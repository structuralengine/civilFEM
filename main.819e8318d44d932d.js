var zG=Math.pow;(self.webpackChunkCQ_editor=self.webpackChunkCQ_editor||[]).push([[179],{8:(K,G,A)=>{"use strict";function y(n){return"function"==typeof n}function l(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const d=l(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,s)=>`${s+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function _(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class p{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(y(r))try{r()}catch(o){e=o instanceof d?o.errors:[o]}const{_finalizers:s}=this;if(s){this._finalizers=null;for(const o of s)try{D(o)}catch(u){e=null!=e?e:[],u instanceof d?e=[...e,...u.errors]:e.push(u)}}if(e)throw new d(e)}}add(e){var t;if(e&&e!==this)if(this.closed)D(e);else{if(e instanceof p){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&_(t,e)}remove(e){const{_finalizers:t}=this;t&&_(t,e),e instanceof p&&e._removeParent(this)}}p.EMPTY=(()=>{const n=new p;return n.closed=!0,n})();const v=p.EMPTY;function C(n){return n instanceof p||n&&"closed"in n&&y(n.remove)&&y(n.add)&&y(n.unsubscribe)}function D(n){y(n)?n():n.unsubscribe()}const I={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},P={setTimeout(n,e,...t){const{delegate:r}=P;return(null==r?void 0:r.setTimeout)?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=P;return((null==e?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function B(n){P.setTimeout(()=>{const{onUnhandledError:e}=I;if(!e)throw n;e(n)})}function U(){}const J=he("C",void 0,void 0);function he(n,e,t){return{kind:n,value:e,error:t}}let ie=null;function ae(n){if(I.useDeprecatedSynchronousErrorHandling){const e=!ie;if(e&&(ie={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=ie;if(ie=null,t)throw r}}else n()}class Ce extends p{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,C(e)&&e.add(this)):this.destination=je}static create(e,t,r){return new lt(e,t,r)}next(e){this.isStopped?De(function re(n){return he("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?De(function W(n){return he("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?De(J,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Ue(n,e){return Le.call(n,e)}class ce{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){qe(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){qe(r)}else qe(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){qe(t)}}}class lt extends Ce{constructor(e,t,r){let s;if(super(),y(e)||!e)s={next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=r?r:void 0};else{let o;this&&I.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),s={next:e.next&&Ue(e.next,o),error:e.error&&Ue(e.error,o),complete:e.complete&&Ue(e.complete,o)}):s=e}this.destination=new ce(s)}}function qe(n){I.useDeprecatedSynchronousErrorHandling?function Me(n){I.useDeprecatedSynchronousErrorHandling&&ie&&(ie.errorThrown=!0,ie.error=n)}(n):B(n)}function De(n,e){const{onStoppedNotification:t}=I;t&&P.setTimeout(()=>t(n,e))}const je={closed:!0,next:U,error:function ut(n){throw n},complete:U},Wt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Xe(n){return n}let xn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,s){const o=function Xn(n){return n&&n instanceof Ce||function Lt(n){return n&&y(n.next)&&y(n.error)&&y(n.complete)}(n)&&C(n)}(t)?t:new lt(t,r,s);return ae(()=>{const{operator:u,source:m}=this;o.add(u?u.call(o,m):m?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Pt(r))((s,o)=>{const u=new lt({next:m=>{try{t(m)}catch(w){o(w),u.unsubscribe()}},error:o,complete:s});this.subscribe(u)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Wt](){return this}pipe(...t){return function Jt(n){return 0===n.length?Xe:1===n.length?n[0]:function(t){return n.reduce((r,s)=>s(r),t)}}(t)(this)}toPromise(t){return new(t=Pt(t))((r,s)=>{let o;this.subscribe(u=>o=u,u=>s(u),()=>r(o))})}}return n.create=e=>new n(e),n})();function Pt(n){var e;return null!==(e=null!=n?n:I.Promise)&&void 0!==e?e:Promise}const ni=l(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let en=(()=>{class n extends xn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new gr(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ni}next(t){ae(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){ae(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ae(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:s,observers:o}=this;return r||s?v:(this.currentObservers=null,o.push(t),new p(()=>{this.currentObservers=null,_(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:s,isStopped:o}=this;r?t.error(s):o&&t.complete()}asObservable(){const t=new xn;return t.source=this,t}}return n.create=(e,t)=>new gr(e,t),n})();class gr extends en{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:v}}function zi(n){return y(null==n?void 0:n.lift)}function En(n){return e=>{if(zi(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Dn(n,e,t,r,s){return new ji(n,e,t,r,s)}class ji extends Ce{constructor(e,t,r,s,o,u){super(e),this.onFinalize=o,this.shouldUnsubscribe=u,this._next=t?function(m){try{t(m)}catch(w){e.error(w)}}:super._next,this._error=s?function(m){try{s(m)}catch(w){e.error(w)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(m){e.error(m)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ii(n,e){return En((t,r)=>{let s=0;t.subscribe(Dn(r,o=>{r.next(n.call(e,o,s++))}))})}function Sr(n){return this instanceof Sr?(this.v=n,this):new Sr(n)}function oo(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,r=t.apply(n,e||[]),o=[];return s={},u("next"),u("throw"),u("return"),s[Symbol.asyncIterator]=function(){return this},s;function u(Z){r[Z]&&(s[Z]=function(Q){return new Promise(function(le,_e){o.push([Z,Q,le,_e])>1||m(Z,Q)})})}function m(Z,Q){try{!function w(Z){Z.value instanceof Sr?Promise.resolve(Z.value.v).then(T,F):N(o[0][2],Z)}(r[Z](Q))}catch(le){N(o[0][3],le)}}function T(Z){m("next",Z)}function F(Z){m("throw",Z)}function N(Z,Q){Z(Q),o.shift(),o.length&&m(o[0][0],o[0][1])}}function ea(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function hi(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(u){return new Promise(function(m,w){!function s(o,u,m,w){Promise.resolve(w).then(function(T){o({value:T,done:m})},u)}(m,w,(u=n[o](u)).done,u.value)})}}}const $i=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Is(n){return y(null==n?void 0:n.then)}function b(n){return y(n[Wt])}function k(n){return Symbol.asyncIterator&&y(null==n?void 0:n[Symbol.asyncIterator])}function z(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ne=function Y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function pe(n){return y(null==n?void 0:n[ne])}function Ae(n){return oo(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:s}=yield Sr(t.read());if(s)return yield Sr(void 0);yield yield Sr(r)}}finally{t.releaseLock()}})}function Ge(n){return y(null==n?void 0:n.getReader)}function $e(n){if(n instanceof xn)return n;if(null!=n){if(b(n))return function yt(n){return new xn(e=>{const t=n[Wt]();if(y(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if($i(n))return function Mt(n){return new xn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Is(n))return function tn(n){return new xn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,B)})}(n);if(k(n))return qt(n);if(pe(n))return function Tt(n){return new xn(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Ge(n))return function sn(n){return qt(Ae(n))}(n)}throw z(n)}function qt(n){return new xn(e=>{(function Dt(n,e){var t,r,s,o;return function zt(n,e,t,r){return new(t||(t=Promise))(function(o,u){function m(F){try{T(r.next(F))}catch(N){u(N)}}function w(F){try{T(r.throw(F))}catch(N){u(N)}}function T(F){F.done?o(F.value):function s(o){return o instanceof t?o:new t(function(u){u(o)})}(F.value).then(m,w)}T((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=ea(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(u){s={error:u}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(s)throw s.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function nn(n,e,t,r=0,s=!1){const o=e.schedule(function(){t(),s?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!s)return o}function ln(n,e,t=1/0){return y(e)?ln((r,s)=>ii((o,u)=>e(r,o,s,u))($e(n(r,s))),t):("number"==typeof e&&(t=e),En((r,s)=>function bn(n,e,t,r,s,o,u,m){const w=[];let T=0,F=0,N=!1;const Z=()=>{N&&!w.length&&!T&&e.complete()},Q=_e=>T<r?le(_e):w.push(_e),le=_e=>{o&&e.next(_e),T++;let xe=!1;$e(t(_e,F++)).subscribe(Dn(e,fe=>{null==s||s(fe),o?Q(fe):e.next(fe)},()=>{xe=!0},void 0,()=>{if(xe)try{for(T--;w.length&&T<r;){const fe=w.shift();u?nn(e,u,()=>le(fe)):le(fe)}Z()}catch(fe){e.error(fe)}}))};return n.subscribe(Dn(e,Q,()=>{N=!0,Z()})),()=>{null==m||m()}}(r,s,n,t)))}function qn(n=1/0){return ln(Xe,n)}const ei=new xn(n=>n.complete());function Ai(n){return n&&y(n.schedule)}function Ii(n){return n[n.length-1]}function Er(n){return y(Ii(n))?n.pop():void 0}function Ui(n){return Ai(Ii(n))?n.pop():void 0}function Ur(n,e=0){return En((t,r)=>{t.subscribe(Dn(r,s=>nn(r,n,()=>r.next(s),e),()=>nn(r,n,()=>r.complete(),e),s=>nn(r,n,()=>r.error(s),e)))})}function oa(n,e=0){return En((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Ns(n,e){if(!n)throw new Error("Iterable cannot be null");return new xn(t=>{nn(t,e,()=>{const r=n[Symbol.asyncIterator]();nn(t,e,()=>{r.next().then(s=>{s.done?t.complete():t.next(s.value)})},0,!0)})})}function js(n,e){return e?function as(n,e){if(null!=n){if(b(n))return function rl(n,e){return $e(n).pipe(oa(e),Ur(e))}(n,e);if($i(n))return function Gi(n,e){return new xn(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Is(n))return function $s(n,e){return $e(n).pipe(oa(e),Ur(e))}(n,e);if(k(n))return Ns(n,e);if(pe(n))return function Do(n,e){return new xn(t=>{let r;return nn(t,e,()=>{r=n[ne](),nn(t,e,()=>{let s,o;try{({value:s,done:o}=r.next())}catch(u){return void t.error(u)}o?t.complete():t.next(s)},0,!0)}),()=>y(null==r?void 0:r.return)&&r.return()})}(n,e);if(Ge(n))return function ua(n,e){return Ns(Ae(n),e)}(n,e)}throw z(n)}(n,e):$e(n)}function Ao(...n){const e=Ui(n),t=function $r(n,e){return"number"==typeof Ii(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?$e(r[0]):qn(t)(js(r,e)):ei}function Pa(n={}){const{connector:e=(()=>new en),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:s=!0}=n;return o=>{let u,m,w,T=0,F=!1,N=!1;const Z=()=>{null==m||m.unsubscribe(),m=void 0},Q=()=>{Z(),u=w=void 0,F=N=!1},le=()=>{const _e=u;Q(),null==_e||_e.unsubscribe()};return En((_e,xe)=>{T++,!N&&!F&&Z();const fe=w=null!=w?w:e();xe.add(()=>{T--,0===T&&!N&&!F&&(m=Pe(le,s))}),fe.subscribe(xe),!u&&T>0&&(u=new lt({next:ue=>fe.next(ue),error:ue=>{N=!0,Z(),m=Pe(Q,t,ue),fe.error(ue)},complete:()=>{F=!0,Z(),m=Pe(Q,r),fe.complete()}}),$e(_e).subscribe(u))})(o)}}function Pe(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new lt({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function Ke(n){for(let e in n)if(n[e]===Ke)return e;throw Error("Could not find renamed property on target object.")}function yn(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function An(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(An).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Rr(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const vs=Ke({__forward_ref__:Ke});function Zi(n){return n.__forward_ref__=Zi,n.toString=function(){return An(this())},n}function Jn(n){return La(n)?n():n}function La(n){return"function"==typeof n&&n.hasOwnProperty(vs)&&n.__forward_ref__===Zi}class Wi extends Error{constructor(e,t){super(function Fa(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function cr(n){return"string"==typeof n?n:null==n?"":String(n)}function Ts(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():cr(n)}function mc(n,e){const t=e?` in ${e}`:"";throw new Wi(-201,`No provider for ${Ts(n)} found${t}`)}function tc(n,e){null==n&&function Mo(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function ki(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Cs(n){return{providers:n.providers||[],imports:n.imports||[]}}function au(n){return fh(n,gc)||fh(n,Gh)}function fh(n,e){return n.hasOwnProperty(e)?n[e]:null}function sl(n){return n&&(n.hasOwnProperty(Uh)||n.hasOwnProperty(Ac))?n[Uh]:null}const gc=Ke({\u0275prov:Ke}),Uh=Ke({\u0275inj:Ke}),Gh=Ke({ngInjectableDef:Ke}),Ac=Ke({ngInjectorDef:Ke});var Hr=(()=>((Hr=Hr||{})[Hr.Default=0]="Default",Hr[Hr.Host=1]="Host",Hr[Hr.Self=2]="Self",Hr[Hr.SkipSelf=4]="SkipSelf",Hr[Hr.Optional=8]="Optional",Hr))();let Wh;function lu(n){const e=Wh;return Wh=n,e}function cu(n,e,t){const r=au(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Hr.Optional?null:void 0!==e?e:void mc(An(n),"Injector")}function q(n){return{toString:n}.toString()}var se=(()=>((se=se||{})[se.OnPush=0]="OnPush",se[se.Default=1]="Default",se))(),Be=(()=>{return(n=Be||(Be={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Be;var n})();const Ve="undefined"!=typeof globalThis&&globalThis,Je="undefined"!=typeof window&&window,At="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ft=Ve||"undefined"!=typeof global&&global||Je||At,cn={},gn=[],_r=Ke({\u0275cmp:Ke}),ls=Ke({\u0275dir:Ke}),vr=Ke({\u0275pipe:Ke}),Lo=Ke({\u0275mod:Ke}),Fs=Ke({\u0275fac:Ke}),fl=Ke({__NG_ELEMENT_ID__:Ke});let Io=0;function or(n){return q(()=>{const t={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===se.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||gn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Be.Emulated,id:"c",styles:n.styles||gn,_:null,setInput:null,schemas:n.schemas||null,tView:null},s=n.directives,o=n.features,u=n.pipes;return r.id+=Io++,r.inputs=pl(n.inputs,t),r.outputs=pl(n.outputs),o&&o.forEach(m=>m(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(zr):null,r.pipeDefs=u?()=>("function"==typeof u?u():u).map(aa):null,r})}function zr(n){return Yi(n)||function Un(n){return n[ls]||null}(n)}function aa(n){return function lo(n){return n[vr]||null}(n)}const mh={};function ys(n){return q(()=>{const e={type:n.type,bootstrap:n.bootstrap||gn,declarations:n.declarations||gn,imports:n.imports||gn,exports:n.exports||gn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(mh[n.id]=n.type),e})}function pl(n,e){if(null==n)return cn;const t={};for(const r in n)if(n.hasOwnProperty(r)){let s=n[r],o=s;Array.isArray(s)&&(o=s[1],s=s[0]),t[s]=r,e&&(e[s]=o)}return t}const _i=or;function Yi(n){return n[_r]||null}function Za(n,e){const t=n[Lo]||null;if(!t&&!0===e)throw new Error(`Type ${An(n)} does not have '\u0275mod' property.`);return t}function al(n){return Array.isArray(n)&&"object"==typeof n[1]}function Co(n){return Array.isArray(n)&&!0===n[1]}function qh(n){return 0!=(8&n.flags)}function Du(n){return 2==(2&n.flags)}function Au(n){return 1==(1&n.flags)}function na(n){return null!==n.template}function pr(n){return 0!=(512&n[2])}function Js(n,e){return n.hasOwnProperty(Fs)?n[Fs]:null}class Vr{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Ci(){return Ba}function Ba(n){return n.type.prototype.ngOnChanges&&(n.setInput=Zo),Hl}function Hl(){const n=Ka(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===cn)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Zo(n,e,t,r){const s=Ka(n)||function ma(n,e){return n[Ca]=e}(n,{previous:cn,current:null}),o=s.current||(s.current={}),u=s.previous,m=this.declaredInputs[t],w=u[m];o[m]=new Vr(w&&w.currentValue,e,u===cn),n[r]=e}Ci.ngInherit=!0;const Ca="__ngSimpleChanges__";function Ka(n){return n[Ca]||null}let Sa;function po(n){return!!n.listen}const Iu={createRenderer:(n,e)=>function Yo(){return void 0!==Sa?Sa:"undefined"!=typeof document?document:void 0}()};function Xo(n){for(;Array.isArray(n);)n=n[0];return n}function qc(n,e){return Xo(e[n])}function Ks(n,e){return Xo(e[n.index])}function Wr(n,e){return n.data[e]}function Ea(n,e){const t=e[n];return al(t)?t:t[0]}function Tf(n){return 4==(4&n[2])}function Fd(n){return 128==(128&n[2])}function uu(n,e){return null==e?null:n[e]}function Xh(n){n[18]=0}function Nd(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const Bn={lFrame:Y_(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Fy(){return Bn.bindingsEnabled}function Kn(){return Bn.lFrame.lView}function ms(){return Bn.lFrame.tView}function Ul(n){return Bn.lFrame.contextLView=n,n[8]}function eo(){let n=wr();for(;null!==n&&64===n.type;)n=n.parent;return n}function wr(){return Bn.lFrame.currentTNode}function Gl(n,e){const t=Bn.lFrame;t.currentTNode=n,t.isParent=e}function Bd(){return Bn.lFrame.isParent}function Ru(){Bn.lFrame.isParent=!1}function Hd(){return Bn.isInCheckNoChangesMode}function Ku(n){Bn.isInCheckNoChangesMode=n}function Wl(){const n=Bn.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Qu(){return Bn.lFrame.bindingIndex++}function hu(n){const e=Bn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function co(n,e){const t=Bn.lFrame;t.bindingIndex=t.bindingRootIndex=n,io(e)}function io(n){Bn.lFrame.currentDirectiveIndex=n}function $u(n){const e=Bn.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function Af(){return Bn.lFrame.currentQueryIndex}function ku(n){Bn.lFrame.currentQueryIndex=n}function zd(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function jl(n,e,t){if(t&Hr.SkipSelf){let s=e,o=n;for(;!(s=s.parent,null!==s||t&Hr.Host||(s=zd(o),null===s||(o=o[15],10&s.type))););if(null===s)return!1;e=s,n=o}const r=Bn.lFrame=If();return r.currentTNode=e,r.lView=n,!0}function Vd(n){const e=If(),t=n[1];Bn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function If(){const n=Bn.lFrame,e=null===n?null:n.child;return null===e?Y_(n):e}function Y_(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Zl(){const n=Bn.lFrame;return Bn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const sc=Zl;function ga(){const n=Zl();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Qa(){return Bn.lFrame.selectedIndex}function bc(n){Bn.lFrame.selectedIndex=n}function la(){const n=Bn.lFrame;return Wr(n.tView,n.selectedIndex)}function eh(){Bn.lFrame.currentNamespace="svg"}function Kh(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:u,ngAfterContentChecked:m,ngAfterViewInit:w,ngAfterViewChecked:T,ngOnDestroy:F}=o;u&&(n.contentHooks||(n.contentHooks=[])).push(-t,u),m&&((n.contentHooks||(n.contentHooks=[])).push(t,m),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,m)),w&&(n.viewHooks||(n.viewHooks=[])).push(-t,w),T&&((n.viewHooks||(n.viewHooks=[])).push(t,T),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,T)),null!=F&&(n.destroyHooks||(n.destroyHooks=[])).push(t,F)}}function mg(n,e,t){gg(n,e,3,t)}function jp(n,e,t,r){(3&n[2])===t&&gg(n,e,t,r)}function Qh(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function gg(n,e,t,r){const o=null!=r?r:-1,u=e.length-1;let m=0;for(let w=void 0!==r?65535&n[18]:0;w<u;w++)if("number"==typeof e[w+1]){if(m=e[w],null!=r&&m>=r)break}else e[w]<0&&(n[18]+=65536),(m<o||-1==o)&&(_g(n,t,e,w),n[18]=(4294901760&n[18])+w+2),w++}function _g(n,e,t,r){const s=t[r]<0,o=t[r+1],m=n[s?-t[r]:t[r]];if(s){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{o.call(m)}finally{}}}else try{o.call(m)}finally{}}class Wd{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function yh(n,e,t){const r=po(n);let s=0;for(;s<t.length;){const o=t[s];if("number"==typeof o){if(0!==o)break;s++;const u=t[s++],m=t[s++],w=t[s++];r?n.setAttribute(e,m,w,u):e.setAttributeNS(u,m,w)}else{const u=o,m=t[++s];yg(u)?r&&n.setProperty(e,u,m):r?n.setAttribute(e,u,m):e.setAttribute(u,m),s++}}return s}function Zp(n){return 3===n||4===n||6===n}function yg(n){return 64===n.charCodeAt(0)}function Yp(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const s=e[r];"number"==typeof s?t=s:0===t||X_(n,t,s,null,-1===t||2===t?e[++r]:null)}}return n}function X_(n,e,t,r,s){let o=0,u=n.length;if(-1===e)u=-1;else for(;o<n.length;){const m=n[o++];if("number"==typeof m){if(m===e){u=-1;break}if(m>e){u=o-1;break}}}for(;o<n.length;){const m=n[o];if("number"==typeof m)break;if(m===t){if(null===r)return void(null!==s&&(n[o+1]=s));if(r===n[o+1])return void(n[o+2]=s)}o++,null!==r&&o++,null!==s&&o++}-1!==u&&(n.splice(u,0,e),o=u+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==s&&n.splice(o++,0,s)}function qd(n){return-1!==n}function jd(n){return 32767&n}function Zd(n,e){let t=function bg(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let Yd=!0;function xg(n){const e=Yd;return Yd=n,e}let Hy=0;function bh(n,e){const t=Jd(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,Xd(r.data,n),Xd(e,null),Xd(r.blueprint,null));const s=Kp(n,e),o=n.injectorIndex;if(qd(s)){const u=jd(s),m=Zd(s,e),w=m[1].data;for(let T=0;T<8;T++)e[o+T]=m[u+T]|w[u+T]}return e[o+8]=s,o}function Xd(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Jd(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Kp(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,s=e;for(;null!==s;){const o=s[1],u=o.type;if(r=2===u?o.declTNode:1===u?s[6]:null,null===r)return-1;if(t++,s=s[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function wg(n,e,t){!function Jp(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(fl)&&(r=t[fl]),null==r&&(r=t[fl]=Hy++);const s=255&r;e.data[n+(s>>5)]|=1<<s}(n,e,t)}function xh(n,e,t){if(t&Hr.Optional)return n;mc(e,"NodeInjector")}function Kd(n,e,t,r){if(t&Hr.Optional&&void 0===r&&(r=null),0==(t&(Hr.Self|Hr.Host))){const s=n[9],o=lu(void 0);try{return s?s.get(e,r,t&Hr.Optional):cu(e,r,t&Hr.Optional)}finally{lu(o)}}return xh(r,e,t)}function Pf(n,e,t,r=Hr.Default,s){if(null!==n){const o=function xc(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(fl)?n[fl]:void 0;return"number"==typeof e?e>=0?255&e:Uy:e}(t);if("function"==typeof o){if(!jl(e,n,r))return r&Hr.Host?xh(s,t,r):Kd(e,t,r,s);try{const u=o(r);if(null!=u||r&Hr.Optional)return u;mc(t)}finally{sc()}}else if("number"==typeof o){let u=null,m=Jd(n,e),w=-1,T=r&Hr.Host?e[16][6]:null;for((-1===m||r&Hr.SkipSelf)&&(w=-1===m?Kp(n,e):e[m+8],-1!==w&&Gy(r,!1)?(u=e[1],m=jd(w),e=Zd(w,e)):m=-1);-1!==m;){const F=e[1];if(Q_(o,m,F.data)){const N=Ax(m,e,t,u,r,T);if(N!==Vy)return N}w=e[m+8],-1!==w&&Gy(r,e[1].data[m+8]===T)&&Q_(o,m,e)?(u=F,m=jd(w),e=Zd(w,e)):m=-1}}}return Kd(e,t,r,s)}const Vy={};function Uy(){return new Lf(eo(),Kn())}function Ax(n,e,t,r,s,o){const u=e[1],m=u.data[n+8],F=Mg(m,u,t,null==r?Du(m)&&Yd:r!=u&&0!=(3&m.type),s&Hr.Host&&o===m);return null!==F?Qp(e,u,F,m):Vy}function Mg(n,e,t,r,s){const o=n.providerIndexes,u=e.data,m=1048575&o,w=n.directiveStart,F=o>>20,Z=s?m+F:n.directiveEnd;for(let Q=r?m:m+F;Q<Z;Q++){const le=u[Q];if(Q<w&&t===le||Q>=w&&le.type===t)return Q}if(s){const Q=u[w];if(Q&&na(Q)&&Q.type===t)return w}return null}function Qp(n,e,t,r){let s=n[t];const o=e.data;if(function Ny(n){return n instanceof Wd}(s)){const u=s;u.resolving&&function qo(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Wi(-200,`Circular dependency in DI detected for ${n}${t}`)}(Ts(o[t]));const m=xg(u.canSeeViewProviders);u.resolving=!0;const w=u.injectImpl?lu(u.injectImpl):null;jl(n,r,Hr.Default);try{s=n[t]=u.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function Oy(n,e,t){const{ngOnChanges:r,ngOnInit:s,ngDoCheck:o}=e.type.prototype;if(r){const u=Ba(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,u),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,u)}s&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,s),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o))}(t,o[t],e)}finally{null!==w&&lu(w),xg(m),u.resolving=!1,sc()}}return s}function Q_(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Gy(n,e){return!(n&Hr.Self||n&Hr.Host&&e)}class Lf{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Pf(this._tNode,this._lView,e,r,t)}}function Ta(n){return q(()=>{const e=n.prototype.constructor,t=e[Fs]||Cg(e),r=Object.prototype;let s=Object.getPrototypeOf(n.prototype).constructor;for(;s&&s!==r;){const o=s[Fs]||Cg(s);if(o&&o!==t)return o;s=Object.getPrototypeOf(s)}return o=>new o})}function Cg(n){return La(n)?()=>{const e=Cg(Jn(n));return e&&e()}:Js(n)}function $h(n){return function zy(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let s=0;for(;s<r;){const o=t[s];if(Zp(o))break;if(0===o)s+=2;else if("number"==typeof o)for(s++;s<r&&"string"==typeof t[s];)s++;else{if(o===e)return t[s+1];s+=2}}}return null}(eo(),n)}const Ff="__parameters__";function nh(n,e,t){return q(()=>{const r=function th(n){return function(...t){if(n){const r=n(...t);for(const s in r)this[s]=r[s]}}}(e);function s(...o){if(this instanceof s)return r.apply(this,o),this;const u=new s(...o);return m.annotation=u,m;function m(w,T,F){const N=w.hasOwnProperty(Ff)?w[Ff]:Object.defineProperty(w,Ff,{value:[]})[Ff];for(;N.length<=F;)N.push(null);return(N[F]=N[F]||[]).push(u),w}}return t&&(s.prototype=Object.create(t.prototype)),s.prototype.ngMetadataName=n,s.annotationCls=s,s})}class wi{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ki({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ix=new wi("AnalyzeForEntryComponents");function du(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),du(r,e)):e!==n&&e.push(r)}return e}function Pu(n,e){n.forEach(t=>Array.isArray(t)?Pu(t,e):e(t))}function im(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Eg(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function rm(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function Yc(n,e,t){let r=$d(n,e);return r>=0?n[1|r]=t:(r=~r,function Yy(n,e,t,r){let s=n.length;if(s==e)n.push(t,r);else if(1===s)n.push(r,n[0]),n[0]=t;else{for(s--,n.push(n[s-1],n[s]);s>e;)n[s]=n[s-2],s--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Tg(n,e){const t=$d(n,e);if(t>=0)return n[1|t]}function $d(n,e){return function Dg(n,e,t){let r=0,s=n.length>>t;for(;s!==r;){const o=r+(s-r>>1),u=n[o<<t];if(e===u)return o<<t;u>e?s=o:r=o+1}return~(s<<t)}(n,e,1)}const am={},iv="__NG_DI_FLAG__",lm="ngTempTokenPath",Qy=/\n/gm,sv="__source",Bf=Ke({provide:String,useValue:Ke});let Hf;function cm(n){const e=Hf;return Hf=n,e}function Bx(n,e=Hr.Default){if(void 0===Hf)throw new Wi(203,"");return null===Hf?cu(n,void 0,e):Hf.get(n,e&Hr.Optional?null:void 0,e)}function Sn(n,e=Hr.Default){return(function ph(){return Wh}()||Bx)(Jn(n),e)}const Jo=Sn;function ov(n){const e=[];for(let t=0;t<n.length;t++){const r=Jn(n[t]);if(Array.isArray(r)){if(0===r.length)throw new Wi(900,"");let s,o=Hr.Default;for(let u=0;u<r.length;u++){const m=r[u],w=um(m);"number"==typeof w?-1===w?s=m.token:o|=w:s=m}e.push(Sn(s,o))}else e.push(Sn(r))}return e}function ef(n,e){return n[iv]=e,n.prototype[iv]=e,n}function um(n){return n[iv]}const zf=ef(nh("Inject",n=>({token:n})),-1),Xc=ef(nh("Optional"),8),ed=ef(nh("SkipSelf"),4);let g;function O(n){var e;return(null===(e=function S(){if(void 0===g&&(g=null,Ft.trustedTypes))try{g=Ft.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return g}())||void 0===e?void 0:e.createHTML(n))||n}class mt{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class jt extends mt{getTypeName(){return"HTML"}}class Nt extends mt{getTypeName(){return"Style"}}class Mn extends mt{getTypeName(){return"Script"}}class Gn extends mt{getTypeName(){return"URL"}}class di extends mt{getTypeName(){return"ResourceURL"}}function ci(n){return n instanceof mt?n.changingThisBreaksApplicationSecurity:n}function fi(n,e){const t=pi(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}function pi(n){return n instanceof mt&&n.getTypeName()||null}class va{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(O(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class Rc{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=O(e),t;const r=this.inertDocument.createElement("body");return r.innerHTML=O(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const t=e.attributes;for(let s=t.length-1;0<s;s--){const u=t.item(s).name;("xmlns:ns1"===u||0===u.indexOf("ns1:"))&&e.removeAttribute(u)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const el=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Dl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ya(n){return(n=String(n)).match(el)||n.match(Dl)?n:"unsafe:"+n}function yo(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function vl(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const tf=yo("area,br,col,hr,img,wbr"),wh=yo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Al=yo("rp,rt"),Fu=vl(tf,vl(wh,yo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vl(Al,yo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),vl(Al,wh)),Ch=yo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Sh=yo("srcset"),kg=vl(Ch,Sh,yo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),yo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),pA=yo("script,style,template");class mA{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=this.checkClobberedElement(t,t.nextSibling);if(s){t=s;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Fu.hasOwnProperty(t))return this.sanitizedSomething=!0,!pA.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let s=0;s<r.length;s++){const o=r.item(s),u=o.name,m=u.toLowerCase();if(!kg.hasOwnProperty(m)){this.sanitizedSomething=!0;continue}let w=o.value;Ch[m]&&(w=ya(w)),Sh[m]&&(n=w,w=(n=String(n)).split(",").map(e=>ya(e.trim())).join(", ")),this.buf.push(" ",u,'="',oC(w),'"')}var n;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Fu.hasOwnProperty(t)&&!tf.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(oC(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const gA=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_A=/([^\#-~ |!])/g;function oC(n){return n.replace(/&/g,"&amp;").replace(gA,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(_A,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let dv;function Ux(n,e){let t=null;try{dv=dv||function cl(n){const e=new Rc(n);return function wc(){try{return!!(new window.DOMParser).parseFromString(O(""),"text/html")}catch(n){return!1}}()?new va(e):e}(n);let r=e?String(e):"";t=dv.getInertBodyElement(r);let s=5,o=r;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,r=o,o=t.innerHTML,t=dv.getInertBodyElement(r)}while(r!==o);return O((new mA).sanitizeChildren(fv(t)||t))}finally{if(t){const r=fv(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function fv(n){return"content"in n&&function aC(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Oo=(()=>((Oo=Oo||{})[Oo.NONE=0]="NONE",Oo[Oo.HTML=1]="HTML",Oo[Oo.STYLE=2]="STYLE",Oo[Oo.SCRIPT=3]="SCRIPT",Oo[Oo.URL=4]="URL",Oo[Oo.RESOURCE_URL=5]="RESOURCE_URL",Oo))();const dC="__ngContext__";function oc(n,e){n[dC]=e}function qx(n){const e=function gv(n){return n[dC]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function Yx(n){return n.ngOriginalError}function _C(n,...e){n.error(...e)}class Gf{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),r=function EA(n){return n&&n.ngErrorLogger||_C}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Yx(e);for(;t&&Yx(t);)t=Yx(t);return t||null}}const LA=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ft))();function Jx(n){return n.ownerDocument.defaultView}function Ou(n){return n instanceof Function?n():n}var Nu=(()=>((Nu=Nu||{})[Nu.Important=1]="Important",Nu[Nu.DashCase=2]="DashCase",Nu))();function ab(n,e){return undefined(n,e)}function Wf(n){const e=n[3];return Co(e)?e[3]:e}function td(n){return fm(n[13])}function Fg(n){return fm(n[4])}function fm(n){for(;null!==n&&!Co(n);)n=n[4];return n}function Eh(n,e,t,r,s){if(null!=r){let o,u=!1;Co(r)?o=r:al(r)&&(u=!0,r=r[0]);const m=Xo(r);0===n&&null!==t?null==s?nw(e,t,m):mm(e,t,m,s||null,!0):1===n&&null!==t?mm(e,t,m,s||null,!0):2===n?function ow(n,e,t){const r=Mv(n,e);r&&function wv(n,e,t,r){po(n)?n.removeChild(e,t,r):e.removeChild(t)}(n,r,e,t)}(e,m,u):3===n&&e.destroyNode(m),null!=o&&function xC(n,e,t,r,s){const o=t[7];o!==Xo(t)&&Eh(e,n,r,o,s);for(let m=10;m<t.length;m++){const w=t[m];Zf(w[1],w,n,e,r,o)}}(e,n,o,t,s)}}function cb(n,e,t){if(po(n))return n.createElement(e,t);{const r=null!==t?function kd(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(t):null;return null===r?n.createElement(e):n.createElementNS(r,e)}}function bv(n,e){const t=n[9],r=t.indexOf(e),s=e[3];1024&e[2]&&(e[2]&=-1025,Nd(s,-1)),t.splice(r,1)}function Og(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const s=r[17];null!==s&&s!==n&&bv(s,r),e>0&&(n[t-1][4]=r[4]);const o=Eg(n,10+e);!function ub(n,e){Zf(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const u=o[19];null!==u&&u.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function xv(n,e){if(!(256&e[2])){const t=e[11];po(t)&&t.destroyNode&&Zf(n,e,t,3,null,null),function vC(n){let e=n[13];if(!e)return db(n[1],n);for(;e;){let t=null;if(al(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)al(e)&&db(e[1],e),e=e[3];null===e&&(e=n),al(e)&&db(e[1],e),t=e&&e[4]}e=t}}(e)}}function db(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function bC(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const s=e[t[r]];if(!(s instanceof Wd)){const o=t[r+1];if(Array.isArray(o))for(let u=0;u<o.length;u+=2){const m=s[o[u]],w=o[u+1];try{w.call(m)}finally{}}else try{o.call(s)}finally{}}}}(n,e),function $x(n,e){const t=n.cleanup,r=e[7];let s=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const u=t[o+1],m="function"==typeof u?u(e):Xo(e[u]),w=r[s=t[o+2]],T=t[o+3];"boolean"==typeof T?m.removeEventListener(t[o],w,T):T>=0?r[s=T]():r[s=-T].unsubscribe(),o+=2}else{const u=r[s=t[o+1]];t[o].call(u)}if(null!==r){for(let o=s+1;o<r.length;o++)r[o]();e[7]=null}}(n,e),1===e[1].type&&po(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&Co(e[3])){t!==e[3]&&bv(t,e);const r=e[19];null!==r&&r.detachView(n)}}}function ew(n,e,t){return function tw(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const s=n.data[r.directiveStart].encapsulation;if(s===Be.None||s===Be.Emulated)return null}return Ks(r,t)}(n,e.parent,t)}function mm(n,e,t,r,s){po(n)?n.insertBefore(e,t,r,s):e.insertBefore(t,r,s)}function nw(n,e,t){po(n)?n.appendChild(e,t):e.appendChild(t)}function Ng(n,e,t,r,s){null!==r?mm(n,e,t,r,s):nw(n,e,t)}function Mv(n,e){return po(n)?n.parentNode(e):e.parentNode}function Bg(n,e,t){return rw(n,e,t)}let rw=function iw(n,e,t){return 40&n.type?Ks(n,t):null};function gm(n,e,t,r){const s=ew(n,r,e),o=e[11],m=Bg(r.parent||e[6],r,e);if(null!=s)if(Array.isArray(t))for(let w=0;w<t.length;w++)Ng(o,s,t[w],m,!1);else Ng(o,s,t,m,!1)}function yl(n,e){if(null!==e){const t=e.type;if(3&t)return Ks(e,n);if(4&t)return fb(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return yl(n,r);{const s=n[e.index];return Co(s)?fb(-1,s):Xo(s)}}if(32&t)return ab(e,n)()||Xo(n[e.index]);{const r=sw(n,e);return null!==r?Array.isArray(r)?r[0]:yl(Wf(n[16]),r):yl(n,e.next)}}return null}function sw(n,e){return null!==e?n[16][6].projection[e.projection]:null}function fb(n,e){const t=10+n+1;if(t<e.length){const r=e[t],s=r[1].firstChild;if(null!==s)return yl(r,s)}return e[7]}function Cv(n,e,t,r,s,o,u){for(;null!=t;){const m=r[t.index],w=t.type;if(u&&0===e&&(m&&oc(Xo(m),r),t.flags|=4),64!=(64&t.flags))if(8&w)Cv(n,e,t.child,r,s,o,!1),Eh(e,n,s,m,o);else if(32&w){const T=ab(t,r);let F;for(;F=T();)Eh(e,n,s,F,o);Eh(e,n,s,m,o)}else 16&w?aw(n,e,r,t,s,o):Eh(e,n,s,m,o);t=u?t.projectionNext:t.next}}function Zf(n,e,t,r,s,o){Cv(t,r,n.firstChild,e,s,o,!1)}function aw(n,e,t,r,s,o){const u=t[16],w=u[6].projection[r.projection];if(Array.isArray(w))for(let T=0;T<w.length;T++)Eh(e,n,s,w[T],o);else Cv(n,e,w,u[3],s,o,!0)}function pb(n,e,t){po(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function nf(n,e,t){po(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function lw(n,e,t){let r=n.length;for(;;){const s=n.indexOf(e,t);if(-1===s)return s;if(0===s||n.charCodeAt(s-1)<=32){const o=e.length;if(s+o===r||n.charCodeAt(s+o)<=32)return s}t=s+1}}const Sv="ng-template";function mb(n,e,t){let r=0;for(;r<n.length;){let s=n[r++];if(t&&"class"===s){if(s=n[r],-1!==lw(s.toLowerCase(),e,0))return!0}else if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}}return!1}function _m(n){return 4===n.type&&n.value!==Sv}function MC(n,e,t){return e===(4!==n.type||t?n.value:Sv)}function CC(n,e,t){let r=4;const s=n.attrs||[],o=function Vg(n){for(let e=0;e<n.length;e++)if(Zp(n[e]))return e;return n.length}(s);let u=!1;for(let m=0;m<e.length;m++){const w=e[m];if("number"!=typeof w){if(!u)if(4&r){if(r=2|1&r,""!==w&&!MC(n,w,t)||""===w&&1===e.length){if(Bu(r))return!1;u=!0}}else{const T=8&r?w:e[++m];if(8&r&&null!==n.attrs){if(!mb(n.attrs,T,t)){if(Bu(r))return!1;u=!0}continue}const N=SC(8&r?"class":w,s,_m(n),t);if(-1===N){if(Bu(r))return!1;u=!0;continue}if(""!==T){let Z;Z=N>o?"":s[N+1].toLowerCase();const Q=8&r?Z:null;if(Q&&-1!==lw(Q,T,0)||2&r&&T!==Z){if(Bu(r))return!1;u=!0}}}}else{if(!u&&!Bu(r)&&!Bu(w))return!1;if(u&&Bu(w))continue;u=!1,r=w|1&r}}return Bu(r)||u}function Bu(n){return 0==(1&n)}function SC(n,e,t,r){if(null===e)return-1;let s=0;if(r||!t){let o=!1;for(;s<e.length;){const u=e[s];if(u===n)return s;if(3===u||6===u)o=!0;else{if(1===u||2===u){let m=e[++s];for(;"string"==typeof m;)m=e[++s];continue}if(4===u)break;if(0===u){s+=4;continue}}s+=o?1:2}return-1}return function vb(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function cw(n,e,t=!1){for(let r=0;r<e.length;r++)if(CC(n,e[r],t))return!0;return!1}function Yf(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let s=0;s<n.length;s++)if(n[s]!==r[s])continue e;return!0}}return!1}function Ev(n,e){return n?":not("+e.trim()+")":e}function yb(n){let e=n[0],t=1,r=2,s="",o=!1;for(;t<n.length;){let u=n[t];if("string"==typeof u)if(2&r){const m=n[++t];s+="["+u+(m.length>0?'="'+m+'"':"")+"]"}else 8&r?s+="."+u:4&r&&(s+=" "+u);else""!==s&&!Bu(u)&&(e+=Ev(o,s),s=""),r=u,o=o||!Bu(r);t++}return""!==s&&(e+=Ev(o,s)),e}const xs={};function Fr(n){EC(ms(),Kn(),Qa()+n,Hd())}function EC(n,e,t,r){if(!r)if(3==(3&e[2])){const o=n.preOrderCheckHooks;null!==o&&mg(e,o,t)}else{const o=n.preOrderHooks;null!==o&&jp(e,o,0,t)}bc(t)}function Dh(n,e){return n<<17|e<<2}function Qc(n){return n>>17&32767}function dw(n){return 2|n}function rf(n){return(131068&n)>>2}function fw(n,e){return-131069&n|e<<2}function pw(n){return 1|n}function Rh(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r],o=t[r+1];if(-1!==o){const u=n.data[o];ku(s),u.contentQueries(2,e[o],o)}}}function ym(n,e,t,r,s,o,u,m,w,T){const F=e.blueprint.slice();return F[0]=s,F[2]=140|r,Xh(F),F[3]=F[15]=n,F[8]=t,F[10]=u||n&&n[10],F[11]=m||n&&n[11],F[12]=w||n&&n[12]||null,F[9]=T||n&&n[9]||null,F[6]=o,F[16]=2==e.type?n[16]:F,F}function $f(n,e,t,r,s){let o=n.data[e];if(null===o)o=function Av(n,e,t,r,s){const o=wr(),u=Bd(),w=n.data[e]=function Rv(n,e,t,r,s,o){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:s,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,u?o:o&&o.parent,t,e,r,s);return null===n.firstChild&&(n.firstChild=w),null!==o&&(u?null==o.child&&null!==w.parent&&(o.child=w):null===o.next&&(o.next=w)),w}(n,e,t,r,s),function Gp(){return Bn.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=t,o.value=r,o.attrs=s;const u=function Df(){const n=Bn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===u?-1:u.injectorIndex}return Gl(o,!0),o}function ep(n,e,t,r){if(0===t)return-1;const s=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return s}function bm(n,e,t){Vd(e);try{const r=n.viewQuery;null!==r&&rd(1,r,t);const s=n.template;null!==s&&fu(n,e,s,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Rh(n,e),n.staticViewQueries&&rd(2,n.viewQuery,t);const o=n.components;null!==o&&function Ab(n,e){for(let t=0;t<e.length;t++)Nb(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,ga()}}function Xg(n,e,t,r){const s=e[2];if(256==(256&s))return;Vd(e);const o=Hd();try{Xh(e),function Zc(n){return Bn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&fu(n,e,t,2,r);const u=3==(3&s);if(!o)if(u){const T=n.preOrderCheckHooks;null!==T&&mg(e,T,null)}else{const T=n.preOrderHooks;null!==T&&jp(e,T,0,null),Qh(e,0)}if(function XA(n){for(let e=td(n);null!==e;e=Fg(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const s=t[r],o=s[3];0==(1024&s[2])&&Nd(o,1),s[2]|=1024}}}(e),function YA(n){for(let e=td(n);null!==e;e=Fg(e))for(let t=10;t<e.length;t++){const r=e[t],s=r[1];Fd(r)&&Xg(s,r,s.template,r[8])}}(e),null!==n.contentQueries&&Rh(n,e),!o)if(u){const T=n.contentCheckHooks;null!==T&&mg(e,T)}else{const T=n.contentHooks;null!==T&&jp(e,T,1),Qh(e,1)}!function Yg(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const s=t[r];if(s<0)bc(~s);else{const o=s,u=t[++r],m=t[++r];co(u,o),m(2,e[o])}}}finally{bc(-1)}}(n,e);const m=n.components;null!==m&&function Qf(n,e){for(let t=0;t<e.length;t++)JA(n,e[t])}(e,m);const w=n.viewQuery;if(null!==w&&rd(2,w,r),!o)if(u){const T=n.viewCheckHooks;null!==T&&mg(e,T)}else{const T=n.viewHooks;null!==T&&jp(e,T,2),Qh(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Nd(e[3],-1))}finally{ga()}}function Da(n,e,t,r){const s=e[10],o=!Hd(),u=Tf(e);try{o&&!u&&s.begin&&s.begin(),u&&bm(n,e,r),Xg(n,e,t,r)}finally{o&&!u&&s.end&&s.end()}}function fu(n,e,t,r,s){const o=Qa(),u=2&r;try{bc(-1),u&&e.length>20&&EC(n,e,20,Hd()),t(r,s)}finally{bc(o)}}function Iv(n,e,t){if(qh(e)){const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const u=n.data[o];u.contentQueries&&u.contentQueries(1,t[o],o)}}}function xm(n,e,t){!Fy()||(function Rb(n,e,t,r){const s=t.directiveStart,o=t.directiveEnd;n.firstCreatePass||bh(t,e),oc(r,e);const u=t.initialInputs;for(let m=s;m<o;m++){const w=n.data[m],T=na(w);T&&Aw(e,t,w);const F=Qp(e,n,m,t);oc(F,e),null!==u&&jA(0,m-s,F,w,0,u),T&&(Ea(t.index,e)[8]=F)}}(n,e,t,Ks(t,e)),128==(128&t.flags)&&function eu(n,e,t){const r=t.directiveStart,s=t.directiveEnd,u=t.index,m=function Ic(){return Bn.lFrame.currentDirectiveIndex}();try{bc(u);for(let w=r;w<s;w++){const T=n.data[w],F=e[w];io(w),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&e_(T,F)}}finally{bc(-1),io(m)}}(n,e,t))}function Jg(n,e,t=Ks){const r=e.localNames;if(null!==r){let s=e.index+1;for(let o=0;o<r.length;o+=2){const u=r[o+1],m=-1===u?t(e,n):n[u];n[s++]=m}}}function rh(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=nd(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function nd(n,e,t,r,s,o,u,m,w,T){const F=20+r,N=F+s,Z=function ww(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:xs);return t}(F,N),Q="function"==typeof T?T():T;return Z[1]={type:n,blueprint:Z,template:t,queries:null,viewQuery:m,declTNode:e,data:Z.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof u?u():u,firstChild:null,schemas:w,consts:Q,incompleteFirstPass:!1}}function tp(n,e,t,r){const s=Pw(e);null===t?s.push(r):(s.push(t),n.firstCreatePass&&Lw(n).push(r,s.length-1))}function Qg(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const s=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,s):t[r]=[e,s]}return t}function Xl(n,e,t,r,s,o,u,m){const w=Ks(e,t);let F,T=e.inputs;!m&&null!=T&&(F=T[r])?(Ow(n,t,F,r,s),Du(e)&&function Cw(n,e){const t=Ea(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(r=function qA(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),s=null!=u?u(s,e.value||"",r):s,po(o)?o.setProperty(w,r,s):yg(r)||(w.setProperty?w.setProperty(r,s):w[r]=s))}function $g(n,e,t,r){let s=!1;if(Fy()){const o=function Tw(n,e,t){const r=n.directiveRegistry;let s=null;if(r)for(let o=0;o<r.length;o++){const u=r[o];cw(t,u.selectors,!1)&&(s||(s=[]),wg(bh(t,e),n,u.type),na(u)?(kb(n,t),s.unshift(u)):s.push(u))}return s}(n,e,t),u=null===r?null:{"":-1};if(null!==o){s=!0,Lb(t,n.data.length,o.length);for(let F=0;F<o.length;F++){const N=o[F];N.providersResolver&&N.providersResolver(N)}let m=!1,w=!1,T=ep(n,e,o.length,null);for(let F=0;F<o.length;F++){const N=o[F];t.mergedAttrs=Yp(t.mergedAttrs,N.hostAttrs),Fb(n,t,e,T,N),Dw(T,N,u),null!==N.contentQueries&&(t.flags|=8),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(t.flags|=128);const Z=N.type.prototype;!m&&(Z.ngOnChanges||Z.ngOnInit||Z.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),m=!0),!w&&(Z.ngOnChanges||Z.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),w=!0),T++}!function WA(n,e){const r=e.directiveEnd,s=n.data,o=e.attrs,u=[];let m=null,w=null;for(let T=e.directiveStart;T<r;T++){const F=s[T],N=F.inputs,Z=null===o||_m(e)?null:ZA(N,o);u.push(Z),m=Qg(N,T,m),w=Qg(F.outputs,T,w)}null!==m&&(m.hasOwnProperty("class")&&(e.flags|=16),m.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=u,e.inputs=m,e.outputs=w}(n,t)}u&&function Pb(n,e,t){if(e){const r=n.localNames=[];for(let s=0;s<e.length;s+=2){const o=t[e[s+1]];if(null==o)throw new Wi(-301,!1);r.push(e[s],o)}}}(t,r,u)}return t.mergedAttrs=Yp(t.mergedAttrs,t.attrs),s}function Ew(n,e,t,r,s,o){const u=o.hostBindings;if(u){let m=n.hostBindingOpCodes;null===m&&(m=n.hostBindingOpCodes=[]);const w=~e.index;(function Ib(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(m)!=w&&m.push(w),m.push(r,s,u)}}function e_(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function kb(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function Dw(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;na(e)&&(t[""]=n)}}function Lb(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Fb(n,e,t,r,s){n.data[r]=s;const o=s.factory||(s.factory=Js(s.type)),u=new Wd(o,na(s),null);n.blueprint[r]=u,t[r]=u,Ew(n,e,0,r,ep(n,t,s.hostVars,xs),s)}function Aw(n,e,t){const r=Ks(e,n),s=rh(t),o=n[10],u=np(n,ym(n,s,null,t.onPush?64:16,r,e,o,o.createRenderer(r,t),null,null));n[e.index]=u}function kh(n,e,t,r,s,o){const u=Ks(n,e);!function Iw(n,e,t,r,s,o,u){if(null==o)po(n)?n.removeAttribute(e,s,t):e.removeAttribute(s);else{const m=null==u?cr(o):u(o,r||"",s);po(n)?n.setAttribute(e,s,m,t):t?e.setAttributeNS(t,s,m):e.setAttribute(s,m)}}(e[11],u,o,n.value,t,r,s)}function jA(n,e,t,r,s,o){const u=o[e];if(null!==u){const m=r.setInput;for(let w=0;w<u.length;){const T=u[w++],F=u[w++],N=u[w++];null!==m?r.setInput(t,N,T,F):t[F]=N}}}function ZA(n,e){let t=null,r=0;for(;r<e.length;){const s=e[r];if(0!==s)if(5!==s){if("number"==typeof s)break;n.hasOwnProperty(s)&&(null===t&&(t=[]),t.push(s,n[s],e[r+1])),r+=2}else r+=2;else r+=4}return t}function PC(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function JA(n,e){const t=Ea(e,n);if(Fd(t)){const r=t[1];80&t[2]?Xg(r,t,r.template,t[8]):t[5]>0&&Mm(t)}}function Mm(n){for(let r=td(n);null!==r;r=Fg(r))for(let s=10;s<r.length;s++){const o=r[s];if(1024&o[2]){const u=o[1];Xg(u,o,u.template,o[8])}else o[5]>0&&Mm(o)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const s=Ea(t[r],n);Fd(s)&&s[5]>0&&Mm(s)}}function Nb(n,e){const t=Ea(e,n),r=t[1];(function Rw(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),bm(r,t,t[8])}function np(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Bb(n){for(;n;){n[2]|=64;const e=Wf(n);if(pr(n)&&!e)return n;n=e}return null}function t_(n,e,t){const r=e[10];r.begin&&r.begin();try{Xg(n,e,n.template,t)}catch(s){throw Vb(e,s),s}finally{r.end&&r.end()}}function zb(n){!function kv(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],r=qx(t),s=r[1];Da(s,r,s.template,t)}}(n[8])}function rd(n,e,t){ku(0),e(n,t)}const kw=(()=>Promise.resolve(null))();function Pw(n){return n[7]||(n[7]=[])}function Lw(n){return n.cleanup||(n.cleanup=[])}function Fw(n,e,t){return(null===n||na(n))&&(t=function Ld(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function Vb(n,e){const t=n[9],r=t?t.get(Gf,null):null;r&&r.handleError(e)}function Ow(n,e,t,r,s){for(let o=0;o<t.length;){const u=t[o++],m=t[o++],w=e[u],T=n.data[u];null!==T.setInput?T.setInput(w,s,r,m):w[m]=s}}function Ph(n,e,t){const r=qc(e,n);!function pm(n,e,t){po(n)?n.setValue(e,t):e.textContent=t}(n[11],r,t)}function Lv(n,e,t){let r=t?n.styles:null,s=t?n.classes:null,o=0;if(null!==e)for(let u=0;u<e.length;u++){const m=e[u];"number"==typeof m?o=m:1==o?s=Rr(s,m):2==o&&(r=Rr(r,m+": "+e[++u]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=s:n.classesWithoutHost=s}const Ov=new wi("INJECTOR",-1);class n_{get(e,t=am){if(t===am){const r=new Error(`NullInjectorError: No provider for ${An(e)}!`);throw r.name="NullInjectorError",r}return t}}const Ub=new wi("Set Injector scope."),Cm={},Bw={};let Nv;function Gb(){return void 0===Nv&&(Nv=new n_),Nv}function i_(n,e=null,t=null,r){const s=Hw(n,e,t,r);return s._resolveInjectorDefTypes(),s}function Hw(n,e=null,t=null,r){return new zw(n,t,e||Gb(),r)}class zw{constructor(e,t,r,s=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];t&&Pu(t,m=>this.processProvider(m,e,t)),Pu([e],m=>this.processInjectorType(m,[],o)),this.records.set(Ov,r_(void 0,this));const u=this.records.get(Ub);this.scope=null!=u?u.value:null,this.source=s||("object"==typeof e?null:An(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=am,r=Hr.Default){this.assertNotDestroyed();const s=cm(this),o=lu(void 0);try{if(!(r&Hr.SkipSelf)){let m=this.records.get(e);if(void 0===m){const w=function eI(n){return"function"==typeof n||"object"==typeof n&&n instanceof wi}(e)&&au(e);m=w&&this.injectableDefInScope(w)?r_(Sm(e),Cm):null,this.records.set(e,m)}if(null!=m)return this.hydrate(e,m)}return(r&Hr.Self?Gb():this.parent).get(e,t=r&Hr.Optional&&t===am?null:t)}catch(u){if("NullInjectorError"===u.name){if((u[lm]=u[lm]||[]).unshift(An(e)),s)throw u;return function Lu(n,e,t,r){const s=n[lm];throw e[sv]&&s.unshift(e[sv]),n.message=function Ig(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let s=An(e);if(Array.isArray(e))s=e.map(An).join(" -> ");else if("object"==typeof e){let o=[];for(let u in e)if(e.hasOwnProperty(u)){let m=e[u];o.push(u+":"+("string"==typeof m?JSON.stringify(m):An(m)))}s=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${s}]: ${n.replace(Qy,"\n  ")}`}("\n"+n.message,s,t,r),n.ngTokenPath=s,n[lm]=null,n}(u,e,"R3InjectorError",this.source)}throw u}finally{lu(o),cm(s)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,s)=>e.push(An(s))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Wi(205,!1)}processInjectorType(e,t,r){if(!(e=Jn(e)))return!1;let s=sl(e);const o=null==s&&e.ngModule||void 0,u=void 0===o?e:o,m=-1!==r.indexOf(u);if(void 0!==o&&(s=sl(o)),null==s)return!1;if(null!=s.imports&&!m){let F;r.push(u);try{Pu(s.imports,N=>{this.processInjectorType(N,t,r)&&(void 0===F&&(F=[]),F.push(N))})}finally{}if(void 0!==F)for(let N=0;N<F.length;N++){const{ngModule:Z,providers:Q}=F[N];Pu(Q,le=>this.processProvider(le,Z,Q||gn))}}this.injectorDefTypes.add(u);const w=Js(u)||(()=>new u);this.records.set(u,r_(w,Cm));const T=s.providers;if(null!=T&&!m){const F=e;Pu(T,N=>this.processProvider(N,F,T))}return void 0!==o&&void 0!==e.providers}processProvider(e,t,r){let s=Em(e=Jn(e))?e:Jn(e&&e.provide);const o=function FC(n,e,t){return Vw(n)?r_(void 0,n.useValue):r_(OC(n),Cm)}(e);if(Em(e)||!0!==e.multi)this.records.get(s);else{let u=this.records.get(s);u||(u=r_(void 0,Cm,!0),u.factory=()=>ov(u.multi),this.records.set(s,u)),s=e,u.multi.push(e)}this.records.set(s,o)}hydrate(e,t){return t.value===Cm&&(t.value=Bw,t.value=t.factory()),"object"==typeof t.value&&t.value&&function $A(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Jn(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function Sm(n){const e=au(n),t=null!==e?e.factory:Js(n);if(null!==t)return t;if(n instanceof wi)throw new Wi(204,!1);if(n instanceof Function)return function Wb(n){const e=n.length;if(e>0)throw rm(e,"?"),new Wi(204,!1);const t=function Dd(n){const e=n&&(n[gc]||n[Gh]);if(e){const t=function Bp(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Wi(204,!1)}function OC(n,e,t){let r;if(Em(n)){const s=Jn(n);return Js(s)||Sm(s)}if(Vw(n))r=()=>Jn(n.useValue);else if(function Uw(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...ov(n.deps||[]));else if(function NC(n){return!(!n||!n.useExisting)}(n))r=()=>Sn(Jn(n.useExisting));else{const s=Jn(n&&(n.useClass||n.provide));if(!function QA(n){return!!n.deps}(n))return Js(s)||Sm(s);r=()=>new s(...ov(n.deps))}return r}function r_(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Vw(n){return null!==n&&"object"==typeof n&&Bf in n}function Em(n){return"function"==typeof n}let Aa=(()=>{class n{static create(t,r){var s;if(Array.isArray(t))return i_({name:""},r,t,"");{const o=null!==(s=t.name)&&void 0!==s?s:"";return i_({name:o},t.parent,t.providers,o)}}}return n.THROW_IF_NOT_FOUND=am,n.NULL=new n_,n.\u0275prov=ki({token:n,providedIn:"any",factory:()=>Sn(Ov)}),n.__NG_ELEMENT_ID__=-1,n})();function oI(n,e){Kh(qx(n)[1],eo())}function hs(n){let e=function ZC(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let s;if(na(n))s=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Wi(903,"");s=e.\u0275dir}if(s){if(t){r.push(s);const u=n;u.inputs=Zb(n.inputs),u.declaredInputs=Zb(n.declaredInputs),u.outputs=Zb(n.outputs);const m=s.hostBindings;m&&lI(n,m);const w=s.viewQuery,T=s.contentQueries;if(w&&Pc(n,w),T&&YC(n,T),yn(n.inputs,s.inputs),yn(n.declaredInputs,s.declaredInputs),yn(n.outputs,s.outputs),na(s)&&s.data.animation){const F=n.data;F.animation=(F.animation||[]).concat(s.data.animation)}}const o=s.features;if(o)for(let u=0;u<o.length;u++){const m=o[u];m&&m.ngInherit&&m(n),m===hs&&(t=!1)}}e=Object.getPrototypeOf(e)}!function aI(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const s=n[r];s.hostVars=e+=s.hostVars,s.hostAttrs=Yp(s.hostAttrs,t=Yp(t,s.hostAttrs))}}(r)}function Zb(n){return n===cn?{}:n===gn?[]:n}function Pc(n,e){const t=n.viewQuery;n.viewQuery=t?(r,s)=>{e(r,s),t(r,s)}:e}function YC(n,e){const t=n.contentQueries;n.contentQueries=t?(r,s,o)=>{e(r,s,o),t(r,s,o)}:e}function lI(n,e){const t=n.hostBindings;n.hostBindings=t?(r,s)=>{e(r,s),t(r,s)}:e}let o_=null;function sp(){if(!o_){const n=Ft.Symbol;if(n&&n.iterator)o_=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(o_=r)}}}return o_}function Dm(n){return!!Xb(n)&&(Array.isArray(n)||!(n instanceof Map)&&sp()in n)}function Xb(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function tu(n,e,t){return n[e]=t}function Jl(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function ia(n,e,t,r){const s=Kn();return Jl(s,Qu(),e)&&(ms(),kh(la(),s,n,e,t,r)),ia}function sf(n,e,t,r){return Jl(n,Qu(),t)?e+cr(t)+r:xs}function cs(n,e,t,r,s,o,u,m){const w=Kn(),T=ms(),F=n+20,N=T.firstCreatePass?function hI(n,e,t,r,s,o,u,m,w){const T=e.consts,F=$f(e,n,4,u||null,uu(T,m));$g(e,t,F,uu(T,w)),Kh(e,F);const N=F.tViews=nd(2,F,r,s,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,T);return null!==e.queries&&(e.queries.template(e,F),N.queries=e.queries.embeddedTView(F)),F}(F,T,w,e,t,r,s,o,u):T.data[F];Gl(N,!1);const Z=w[11].createComment("");gm(T,w,Z,N),oc(Z,w),np(w,w[F]=PC(Z,w,Z,N)),Au(N)&&xm(T,w,N),null!=u&&Jg(w,N,m)}function cp(n){return function rc(n,e){return n[e]}(function Ju(){return Bn.lFrame.contextLView}(),20+n)}function Bt(n,e=Hr.Default){const t=Kn();return null===t?Sn(n,e):Pf(eo(),t,Jn(n),e)}function jv(){throw new Error("invalid")}function Zr(n,e,t){const r=Kn();return Jl(r,Qu(),e)&&Xl(ms(),la(),r,n,e,r[11],t,!1),Zr}function s1(n,e,t,r,s){const u=s?"class":"style";Ow(n,t,e.inputs[u],u,r)}function Jr(n,e,t,r){const s=Kn(),o=ms(),u=20+n,m=s[11],w=s[u]=cb(m,e,function qp(){return Bn.lFrame.currentNamespace}()),T=o.firstCreatePass?function xI(n,e,t,r,s,o,u){const m=e.consts,T=$f(e,n,2,s,uu(m,o));return $g(e,t,T,uu(m,u)),null!==T.attrs&&Lv(T,T.attrs,!1),null!==T.mergedAttrs&&Lv(T,T.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,T),T}(u,o,s,0,e,t,r):o.data[u];Gl(T,!0);const F=T.mergedAttrs;null!==F&&yh(m,w,F);const N=T.classes;null!==N&&nf(m,w,N);const Z=T.styles;return null!==Z&&pb(m,w,Z),64!=(64&T.flags)&&gm(o,s,w,T),0===function Vl(){return Bn.lFrame.elementDepthCount}()&&oc(w,s),function gl(){Bn.lFrame.elementDepthCount++}(),Au(T)&&(xm(o,s,T),Iv(o,T,s)),null!==r&&Jg(s,T),Jr}function ts(){let n=eo();Bd()?Ru():(n=n.parent,Gl(n,!1));const e=n;!function _h(){Bn.lFrame.elementDepthCount--}();const t=ms();return t.firstCreatePass&&(Kh(t,n),qh(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function vg(n){return 0!=(16&n.flags)}(e)&&s1(t,e,Kn(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function By(n){return 0!=(32&n.flags)}(e)&&s1(t,e,Kn(),e.stylesWithoutHost,!1),ts}function xl(n,e,t,r){return Jr(n,e,t,r),ts(),xl}function dp(n,e,t){const r=Kn(),s=ms(),o=n+20,u=s.firstCreatePass?function wI(n,e,t,r,s){const o=e.consts,u=uu(o,r),m=$f(e,n,8,"ng-container",u);return null!==u&&Lv(m,u,!0),$g(e,t,m,uu(o,s)),null!==e.queries&&e.queries.elementStart(e,m),m}(o,s,r,e,t):s.data[o];Gl(u,!0);const m=r[o]=r[11].createComment("");return gm(s,r,m,u),oc(m,r),Au(u)&&(xm(s,r,u),Iv(s,u,r)),null!=t&&Jg(r,u),dp}function fp(){let n=eo();const e=ms();return Bd()?Ru():(n=n.parent,Gl(n,!1)),e.firstCreatePass&&(Kh(e,n),qh(n)&&e.queries.elementEnd(n)),fp}function pp(n,e,t){return dp(n,e,t),fp(),pp}function Pm(){return Kn()}function Zv(n){return!!n&&"function"==typeof n.then}const o1=function uS(n){return!!n&&"function"==typeof n.subscribe};function No(n,e,t,r){const s=Kn(),o=ms(),u=eo();return hS(o,s,s[11],u,n,e,!!t,r),No}function a1(n,e){const t=eo(),r=Kn(),s=ms();return hS(s,r,Fw($u(s.data),t,r),t,n,e,!1),a1}function hS(n,e,t,r,s,o,u,m){const w=Au(r),F=n.firstCreatePass&&Lw(n),N=e[8],Z=Pw(e);let Q=!0;if(3&r.type||m){const xe=Ks(r,e),fe=m?m(xe):xe,ue=Z.length,Ne=m?Re=>m(Xo(Re[r.index])):r.index;if(po(t)){let Re=null;if(!m&&w&&(Re=function MI(n,e,t,r){const s=n.cleanup;if(null!=s)for(let o=0;o<s.length-1;o+=2){const u=s[o];if(u===t&&s[o+1]===r){const m=e[7],w=s[o+2];return m.length>w?m[w]:null}"string"==typeof u&&(o+=2)}return null}(n,e,s,r.index)),null!==Re)(Re.__ngLastListenerFn__||Re).__ngNextListenerFn__=o,Re.__ngLastListenerFn__=o,Q=!1;else{o=l1(r,e,N,o,!1);const Ye=t.listen(fe,s,o);Z.push(o,Ye),F&&F.push(s,Ne,ue,ue+1)}}else o=l1(r,e,N,o,!0),fe.addEventListener(s,o,u),Z.push(o),F&&F.push(s,Ne,ue,u)}else o=l1(r,e,N,o,!1);const le=r.outputs;let _e;if(Q&&null!==le&&(_e=le[s])){const xe=_e.length;if(xe)for(let fe=0;fe<xe;fe+=2){const st=e[_e[fe]][_e[fe+1]].subscribe(o),ht=Z.length;Z.push(o,st),F&&F.push(s,r.index,ht,-(ht+1))}}}function dS(n,e,t,r){try{return!1!==t(r)}catch(s){return Vb(n,s),!1}}function l1(n,e,t,r,s){return function o(u){if(u===Function)return r;const m=2&n.flags?Ea(n.index,e):e;0==(32&e[2])&&Bb(m);let w=dS(e,0,r,u),T=o.__ngNextListenerFn__;for(;T;)w=dS(e,0,T,u)&&w,T=T.__ngNextListenerFn__;return s&&!1===w&&(u.preventDefault(),u.returnValue=!1),w}}function Bo(n=1){return function Ud(n){return(Bn.lFrame.contextLView=function Rf(n,e){for(;n>0;)e=e[15],n--;return e}(n,Bn.lFrame.contextLView))[8]}(n)}function CI(n,e){let t=null;const r=function gb(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let s=0;s<e.length;s++){const o=e[s];if("*"!==o){if(null===r?cw(n,o,!0):Yf(r,o))return s}else t=s}return t}function af(n){const e=Kn()[16][6];if(!e.projection){const r=e.projection=rm(n?n.length:1,null),s=r.slice();let o=e.child;for(;null!==o;){const u=n?CI(o,n):0;null!==u&&(s[u]?s[u].projectionNext=o:r[u]=o,s[u]=o),o=o.next}}}function hd(n,e=0,t){const r=Kn(),s=ms(),o=$f(s,20+n,16,null,t||null);null===o.projection&&(o.projection=e),Ru(),64!=(64&o.flags)&&function Th(n,e,t){aw(e[11],0,e,t,ew(n,t,e),Bg(t.parent||e[6],t,e))}(s,r,o)}function ee(n,e,t,r,s){const o=n[t+1],u=null===e;let m=r?Qc(o):rf(o),w=!1;for(;0!==m&&(!1===w||u);){const F=n[m+1];te(n[m],e)&&(w=!0,n[m+1]=r?pw(F):dw(F)),m=r?Qc(F):rf(F)}w&&(n[t+1]=r?dw(o):pw(o))}function te(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&$d(n,e)>=0}const me={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function de(n){return n.substring(me.key,me.keyEnd)}function Te(n,e){const t=me.textEnd;return t===e?-1:(e=me.keyEnd=function at(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,me.key=e,t),Ee(n,e,t))}function Ee(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Ut(n,e,t){return un(n,e,t,!1),Ut}function Zt(n,e){return un(n,e,null,!0),Zt}function Yt(n,e){for(let t=function be(n){return function ke(n){me.key=0,me.keyEnd=0,me.value=0,me.valueEnd=0,me.textEnd=n.length}(n),Te(n,Ee(n,0,me.textEnd))}(e);t>=0;t=Te(e,t))Yc(n,de(e),!0)}function un(n,e,t,r){const s=Kn(),o=ms(),u=hu(2);o.firstUpdatePass&&Xi(o,n,u,r),e!==xs&&Jl(s,u,e)&&bo(o,o.data[Qa()],s,s[11],n,s[u+1]=function zo(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=An(ci(n)))),n}(e,t),r,u)}function xi(n,e){return e>=n.expandoStartIndex}function Xi(n,e,t,r){const s=n.data;if(null===s[t+1]){const o=s[Qa()],u=xi(n,t);bi(o,r)&&null===e&&!u&&(e=!1),e=function ir(n,e,t,r){const s=$u(n);let o=r?e.residualClasses:e.residualStyles;if(null===s)0===(r?e.classBindings:e.styleBindings)&&(t=Ho(t=ws(null,n,e,t,r),e.attrs,r),o=null);else{const u=e.directiveStylingLast;if(-1===u||n[u]!==s)if(t=ws(s,n,e,t,r),null===o){let w=function Ir(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==rf(r))return n[Qc(r)]}(n,e,r);void 0!==w&&Array.isArray(w)&&(w=ws(null,n,e,w[1],r),w=Ho(w,e.attrs,r),function Mr(n,e,t,r){n[Qc(t?e.classBindings:e.styleBindings)]=r}(n,e,r,w))}else o=function ro(n,e,t){let r;const s=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<s;o++)r=Ho(r,n[o].hostAttrs,t);return Ho(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(s,o,e,r),function V(n,e,t,r,s,o){let u=o?e.classBindings:e.styleBindings,m=Qc(u),w=rf(u);n[r]=t;let F,T=!1;if(Array.isArray(t)){const N=t;F=N[1],(null===F||$d(N,F)>0)&&(T=!0)}else F=t;if(s)if(0!==w){const Z=Qc(n[m+1]);n[r+1]=Dh(Z,m),0!==Z&&(n[Z+1]=fw(n[Z+1],r)),n[m+1]=function BA(n,e){return 131071&n|e<<17}(n[m+1],r)}else n[r+1]=Dh(m,0),0!==m&&(n[m+1]=fw(n[m+1],r)),m=r;else n[r+1]=Dh(w,0),0===m?m=r:n[w+1]=fw(n[w+1],r),w=r;T&&(n[r+1]=dw(n[r+1])),ee(n,F,r,!0),ee(n,F,r,!1),function X(n,e,t,r,s){const o=s?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&$d(o,e)>=0&&(t[r+1]=pw(t[r+1]))}(e,F,n,r,o),u=Dh(m,w),o?e.classBindings=u:e.styleBindings=u}(s,o,e,t,u,r)}}function ws(n,e,t,r,s){let o=null;const u=t.directiveEnd;let m=t.directiveStylingLast;for(-1===m?m=t.directiveStart:m++;m<u&&(o=e[m],r=Ho(r,o.hostAttrs,s),o!==n);)m++;return null!==n&&(t.directiveStylingLast=m),r}function Ho(n,e,t){const r=t?1:2;let s=-1;if(null!==e)for(let o=0;o<e.length;o++){const u=e[o];"number"==typeof u?s=u:s===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Yc(n,u,!!t||e[++o]))}return void 0===n?null:n}function bo(n,e,t,r,s,o,u,m){if(!(3&e.type))return;const w=n.data,T=w[m+1];ds(function DC(n){return 1==(1&n)}(T)?So(w,e,t,s,rf(T),u):void 0)||(ds(o)||function TC(n){return 2==(2&n)}(T)&&(o=So(w,null,t,s,m,u)),function Kc(n,e,t,r,s){const o=po(n);if(e)s?o?n.addClass(t,r):t.classList.add(r):o?n.removeClass(t,r):t.classList.remove(r);else{let u=-1===r.indexOf("-")?void 0:Nu.DashCase;if(null==s)o?n.removeStyle(t,r,u):t.style.removeProperty(r);else{const m="string"==typeof s&&s.endsWith("!important");m&&(s=s.slice(0,-10),u|=Nu.Important),o?n.setStyle(t,r,s,u):t.style.setProperty(r,s,m?"important":"")}}}(r,u,qc(Qa(),t),s,o))}function So(n,e,t,r,s,o){const u=null===e;let m;for(;s>0;){const w=n[s],T=Array.isArray(w),F=T?w[1]:w,N=null===F;let Z=t[s+1];Z===xs&&(Z=N?gn:void 0);let Q=N?Tg(Z,r):F===r?Z:void 0;if(T&&!ds(Q)&&(Q=Tg(w,r)),ds(Q)&&(m=Q,u))return m;const le=n[s+1];s=u?Qc(le):rf(le)}if(null!==e){let w=o?e.residualClasses:e.residualStyles;null!=w&&(m=Tg(w,r))}return m}function ds(n){return void 0!==n}function bi(n,e){return 0!=(n.flags&(e?16:32))}function ri(n,e=""){const t=Kn(),r=ms(),s=n+20,o=r.firstCreatePass?$f(r,s,1,e,null):r.data[s],u=t[s]=function jf(n,e){return po(n)?n.createText(e):n.createTextNode(e)}(t[11],e);gm(r,t,u,o),Gl(o,!1)}function Li(n){return Or("",n,""),Li}function Or(n,e,t){const r=Kn(),s=sf(r,n,e,t);return s!==xs&&Ph(r,Qa(),s),Or}function yr(n,e,t){!function In(n,e,t,r){const s=ms(),o=hu(2);s.firstUpdatePass&&Xi(s,null,o,r);const u=Kn();if(t!==xs&&Jl(u,o,t)){const m=s.data[Qa()];if(bi(m,r)&&!xi(s,o)){let w=r?m.classesWithoutHost:m.stylesWithoutHost;null!==w&&(t=Rr(w,t||"")),s1(s,m,u,t,r)}else!function Ia(n,e,t,r,s,o,u,m){s===xs&&(s=gn);let w=0,T=0,F=0<s.length?s[0]:null,N=0<o.length?o[0]:null;for(;null!==F||null!==N;){const Z=w<s.length?s[w+1]:void 0,Q=T<o.length?o[T+1]:void 0;let _e,le=null;F===N?(w+=2,T+=2,Z!==Q&&(le=N,_e=Q)):null===N||null!==F&&F<N?(w+=2,le=F):(T+=2,le=N,_e=Q),null!==le&&bo(n,e,t,r,le,_e,u,m),F=w<s.length?s[w]:null,N=T<o.length?o[T]:null}}(s,m,u,u[11],u[o+1],u[o+1]=function Po(n,e,t){if(null==t||""===t)return gn;const r=[],s=ci(t);if(Array.isArray(s))for(let o=0;o<s.length;o++)n(r,s[o],!0);else if("object"==typeof s)for(const o in s)s.hasOwnProperty(o)&&n(r,o,s[o]);else"string"==typeof s&&e(r,s);return r}(n,e,t),r,o)}}(Yc,Yt,sf(Kn(),n,e,t),!0)}function Wn(n,e,t){const r=Kn();return Jl(r,Qu(),e)&&Xl(ms(),la(),r,n,e,r[11],t,!0),Wn}function Ji(n,e,t){const r=Kn();if(Jl(r,Qu(),e)){const o=ms(),u=la();Xl(o,u,r,n,e,Fw($u(o.data),u,r),t,!0)}return Ji}const mp="en-US";let sF=mp;function II(n,e,t,r,s){if(n=Jn(n),Array.isArray(n))for(let o=0;o<n.length;o++)II(n[o],e,t,r,s);else{const o=ms(),u=Kn();let m=Em(n)?n:Jn(n.provide),w=OC(n);const T=eo(),F=1048575&T.providerIndexes,N=T.directiveStart,Z=T.providerIndexes>>20;if(Em(n)||!n.multi){const Q=new Wd(w,s,Bt),le=kI(m,e,s?F:F+Z,N);-1===le?(wg(bh(T,u),o,m),RI(o,n,e.length),e.push(m),T.directiveStart++,T.directiveEnd++,s&&(T.providerIndexes+=1048576),t.push(Q),u.push(Q)):(t[le]=Q,u[le]=Q)}else{const Q=kI(m,e,F+Z,N),le=kI(m,e,F,F+Z),_e=Q>=0&&t[Q],xe=le>=0&&t[le];if(s&&!xe||!s&&!_e){wg(bh(T,u),o,m);const fe=function FW(n,e,t,r,s){const o=new Wd(n,t,Bt);return o.multi=[],o.index=e,o.componentProviders=0,AF(o,s,r&&!t),o}(s?LW:PW,t.length,s,r,w);!s&&xe&&(t[le].providerFactory=fe),RI(o,n,e.length,0),e.push(m),T.directiveStart++,T.directiveEnd++,s&&(T.providerIndexes+=1048576),t.push(fe),u.push(fe)}else RI(o,n,Q>-1?Q:le,AF(t[s?le:Q],w,!s&&r));!s&&r&&xe&&t[le].componentProviders++}}}function RI(n,e,t,r){const s=Em(e),o=function Gw(n){return!!n.useClass}(e);if(s||o){const w=(o?Jn(e.useClass):e).prototype.ngOnDestroy;if(w){const T=n.destroyHooks||(n.destroyHooks=[]);if(!s&&e.multi){const F=T.indexOf(t);-1===F?T.push(t,[r,w]):T[F+1].push(r,w)}else T.push(t,w)}}}function AF(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function kI(n,e,t,r){for(let s=t;s<r;s++)if(e[s]===n)return s;return-1}function PW(n,e,t,r){return PI(this.multi,[])}function LW(n,e,t,r){const s=this.multi;let o;if(this.providerFactory){const u=this.providerFactory.componentProviders,m=Qp(t,t[1],this.providerFactory.index,r);o=m.slice(0,u),PI(s,o);for(let w=u;w<m.length;w++)o.push(m[w])}else o=[],PI(s,o);return o}function PI(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function ba(n,e=[]){return t=>{t.providersResolver=(r,s)=>function kW(n,e,t){const r=ms();if(r.firstCreatePass){const s=na(n);II(t,r.data,r.blueprint,s,!0),II(e,r.data,r.blueprint,s,!1)}}(r,s?s(n):n,e)}}class IF{}class BW{resolveComponentFactory(e){throw function NW(n){const e=Error(`No component factory found for ${An(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Xv=(()=>{class n{}return n.NULL=new BW,n})();function HW(){return $b(eo(),Kn())}function $b(n,e){return new Uo(Ks(n,e))}let Uo=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=HW,n})();function zW(n){return n instanceof Uo?n.nativeElement:n}class y1{}let Lm=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function UW(){const n=Kn(),t=Ea(eo().index,n);return function VW(n){return n[11]}(al(t)?t:n)}(),n})(),GW=(()=>{class n{}return n.\u0275prov=ki({token:n,providedIn:"root",factory:()=>null}),n})();class Jv{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const WW=new Jv("13.2.7"),LI={};function ES(n,e,t,r,s=!1){for(;null!==t;){const o=e[t.index];if(null!==o&&r.push(Xo(o)),Co(o))for(let m=10;m<o.length;m++){const w=o[m],T=w[1].firstChild;null!==T&&ES(w[1],w,T,r)}const u=t.type;if(8&u)ES(n,e,t.child,r);else if(32&u){const m=ab(t,e);let w;for(;w=m();)r.push(w)}else if(16&u){const m=sw(e,t);if(Array.isArray(m))r.push(...m);else{const w=Wf(e[16]);ES(w[1],w,m,r,!0)}}t=s?t.projectionNext:t.next}return r}class b1{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return ES(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Co(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Og(e,r),Eg(t,r))}this._attachedToViewContainer=!1}xv(this._lView[1],this._lView)}onDestroy(e){tp(this._lView[1],this._lView,null,e)}markForCheck(){Bb(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){t_(this._lView[1],this._lView,this.context)}checkNoChanges(){!function LC(n,e,t){Ku(!0);try{t_(n,e,t)}finally{Ku(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Wi(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function hb(n,e){Zf(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Wi(902,"");this._appRef=e}}class qW extends b1{constructor(e){super(e),this._view=e}detectChanges(){zb(this._view)}checkNoChanges(){!function Pv(n){Ku(!0);try{zb(n)}finally{Ku(!1)}}(this._view)}get context(){return null}}class kF extends Xv{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Yi(e);return new FI(t,this.ngModule)}}function PF(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class FI extends IF{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function bb(n){return n.map(yb).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return PF(this.componentDef.inputs)}get outputs(){return PF(this.componentDef.outputs)}create(e,t,r,s){const o=(s=s||this.ngModule)?function ZW(n,e){return{get:(t,r,s)=>{const o=n.get(t,LI,s);return o!==LI||r===LI?o:e.get(t,r,s)}}}(e,s.injector):e,u=o.get(y1,Iu),m=o.get(GW,null),w=u.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",F=r?function wm(n,e,t){if(po(n))return n.selectRootElement(e,t===Be.ShadowDom);let r="string"==typeof e?n.querySelector(e):e;return r.textContent="",r}(w,r,this.componentDef.encapsulation):cb(u.createRenderer(null,this.componentDef),T,function jW(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(T)),N=this.componentDef.onPush?576:528,Z=function jC(n,e){return{components:[],scheduler:n||LA,clean:kw,playerHandler:e||null,flags:0}}(),Q=nd(0,null,null,1,0,null,null,null,null,null),le=ym(null,Q,Z,N,null,null,u,w,m,o);let _e,xe;Vd(le);try{const fe=function jb(n,e,t,r,s,o){const u=t[1];t[20]=n;const w=$f(u,20,2,"#host",null),T=w.mergedAttrs=e.hostAttrs;null!==T&&(Lv(w,T,!0),null!==n&&(yh(s,n,T),null!==w.classes&&nf(s,n,w.classes),null!==w.styles&&pb(s,n,w.styles)));const F=r.createRenderer(n,e),N=ym(t,rh(e),null,e.onPush?64:16,t[20],w,r,F,o||null,null);return u.firstCreatePass&&(wg(bh(w,t),u,e.type),kb(u,w),Lb(w,t.length,1)),np(t,N),t[20]=N}(F,this.componentDef,le,u,w);if(F)if(r)yh(w,F,["ng-version",WW.full]);else{const{attrs:ue,classes:Ne}=function uw(n){const e=[],t=[];let r=1,s=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===s?""!==o&&e.push(o,n[++r]):8===s&&t.push(o);else{if(!Bu(s))break;s=o}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);ue&&yh(w,F,ue),Ne&&Ne.length>0&&nf(w,F,Ne.join(" "))}if(xe=Wr(Q,20),void 0!==t){const ue=xe.projection=[];for(let Ne=0;Ne<this.ngContentSelectors.length;Ne++){const Re=t[Ne];ue.push(null!=Re?Array.from(Re):null)}}_e=function qC(n,e,t,r,s){const o=t[1],u=function Sw(n,e,t){const r=eo();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),Fb(n,r,e,ep(n,e,1,null),t));const s=Qp(e,n,r.directiveStart,r);oc(s,e);const o=Ks(r,e);return o&&oc(o,e),s}(o,t,e);if(r.components.push(u),n[8]=u,s&&s.forEach(w=>w(u,e)),e.contentQueries){const w=eo();e.contentQueries(1,u,w.directiveStart)}const m=eo();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(bc(m.index),Ew(t[1],m,0,m.directiveStart,m.directiveEnd,e),e_(e,u)),u}(fe,this.componentDef,le,Z,[oI]),bm(Q,le,null)}finally{ga()}return new XW(this.componentType,_e,$b(xe,le),le,xe)}}class XW extends class OW{}{constructor(e,t,r,s,o){super(),this.location=r,this._rootLView=s,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new qW(s),this.componentType=e}get injector(){return new Lf(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class Fm{}class LF{}const e0=new Map;class NF extends Fm{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new kF(this);const r=Za(e);this._bootstrapComponents=Ou(r.bootstrap),this._r3Injector=Hw(e,t,[{provide:Fm,useValue:this},{provide:Xv,useValue:this.componentFactoryResolver}],An(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Aa.THROW_IF_NOT_FOUND,r=Hr.Default){return e===Aa||e===Fm||e===Ov?this:this._r3Injector.get(e,t,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class OI extends LF{constructor(e){super(),this.moduleType=e,null!==Za(e)&&function KW(n){const e=new Set;!function t(r){const s=Za(r,!0),o=s.id;null!==o&&(function FF(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${An(e)} vs ${An(e.name)}`)}(o,e0.get(o),r),e0.set(o,r));const u=Ou(s.imports);for(const m of u)e.has(m)||(e.add(m),t(m))}(n)}(e)}create(e){return new NF(this.moduleType,e)}}function BF(n,e,t,r){return function HF(n,e,t,r,s,o){const u=e+t;return Jl(n,u,s)?tu(n,u+1,o?r.call(o,s):r(s)):x1(n,u+1)}(Kn(),Wl(),n,e,t,r)}function NI(n,e,t,r,s){return function zF(n,e,t,r,s,o,u){const m=e+t;return function op(n,e,t,r){const s=Jl(n,e,t);return Jl(n,e+1,r)||s}(n,m,s,o)?tu(n,m+2,u?r.call(u,s,o):r(s,o)):x1(n,m+2)}(Kn(),Wl(),n,e,t,r,s)}function x1(n,e){const t=n[e];return t===xs?void 0:t}function BI(n){return e=>{setTimeout(n,void 0,e)}}const Go=class f6 extends en{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){var s,o,u;let m=e,w=t||(()=>null),T=r;if(e&&"object"==typeof e){const N=e;m=null===(s=N.next)||void 0===s?void 0:s.bind(N),w=null===(o=N.error)||void 0===o?void 0:o.bind(N),T=null===(u=N.complete)||void 0===u?void 0:u.bind(N)}this.__isAsync&&(w=BI(w),m&&(m=BI(m)),T&&(T=BI(T)));const F=super.subscribe({next:m,error:w,complete:T});return e instanceof p&&e.add(F),F}};function p6(){return this._results[sp()]()}class Om{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=sp(),r=Om.prototype;r[t]||(r[t]=p6)}get changes(){return this._changes||(this._changes=new Go)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const s=du(e);(this._changesDetected=!function jy(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let s=n[r],o=e[r];if(t&&(s=t(s),o=t(o)),o!==s)return!1}return!0}(r._results,s,t))&&(r._results=s,r.length=s.length,r.last=s[this.length-1],r.first=s[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Uu=(()=>{class n{}return n.__NG_ELEMENT_ID__=_6,n})();const m6=Uu,g6=class extends m6{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e){const t=this._declarationTContainer.tViews,r=ym(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(t)),bm(t,r,e),new b1(r)}};function _6(){return TS(eo(),Kn())}function TS(n,e){return 4&n.type?new g6(e,n,$b(n,e)):null}let ah=(()=>{class n{}return n.__NG_ELEMENT_ID__=v6,n})();function v6(){return jF(eo(),Kn())}const y6=ah,WF=class extends y6{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return $b(this._hostTNode,this._hostLView)}get injector(){return new Lf(this._hostTNode,this._hostLView)}get parentInjector(){const e=Kp(this._hostTNode,this._hostLView);if(qd(e)){const t=Zd(e,this._hostLView),r=jd(e);return new Lf(t[1].data[r+8],t)}return new Lf(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=qF(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){const s=e.createEmbeddedView(t||{});return this.insert(s,r),s}createComponent(e,t,r,s,o){const u=e&&!function nm(n){return"function"==typeof n}(e);let m;if(u)m=t;else{const N=t||{};m=N.index,r=N.injector,s=N.projectableNodes,o=N.ngModuleRef}const w=u?e:new FI(Yi(e)),T=r||this.parentInjector;if(!o&&null==w.ngModule){const Z=(u?T:this.parentInjector).get(Fm,null);Z&&(o=Z)}const F=w.create(T,s,void 0,o);return this.insert(F.hostView,m),F}insert(e,t){const r=e._lView,s=r[1];if(function Od(n){return Co(n[3])}(r)){const F=this.indexOf(e);if(-1!==F)this.detach(F);else{const N=r[3],Z=new WF(N,N[6],N[3]);Z.detach(Z.indexOf(e))}}const o=this._adjustIndex(t),u=this._lContainer;!function Qx(n,e,t,r){const s=10+r,o=t.length;r>0&&(t[s-1][4]=e),r<o-10?(e[4]=t[s],im(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const u=e[17];null!==u&&t!==u&&function yC(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(u,e);const m=e[19];null!==m&&m.insertView(n),e[2]|=128}(s,r,u,o);const m=fb(o,u),w=r[11],T=Mv(w,u[7]);return null!==T&&function yv(n,e,t,r,s,o){r[0]=s,r[6]=e,Zf(n,r,t,1,s,o)}(s,u[6],w,r,T,m),e.attachToViewContainerRef(),im(HI(u),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=qF(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Og(this._lContainer,t);r&&(Eg(HI(this._lContainer),t),xv(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=Og(this._lContainer,t);return r&&null!=Eg(HI(this._lContainer),t)?new b1(r):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function qF(n){return n[8]}function HI(n){return n[8]||(n[8]=[])}function jF(n,e){let t;const r=e[n.index];if(Co(r))t=r;else{let s;if(8&n.type)s=Xo(r);else{const o=e[11];s=o.createComment("");const u=Ks(n,e);mm(o,Mv(o,u),s,function NA(n,e){return po(n)?n.nextSibling(e):e.nextSibling}(o,u),!1)}e[n.index]=t=PC(r,e,s,n),np(e,t)}return new WF(t,n,e)}class zI{constructor(e){this.queryList=e,this.matches=null}clone(){return new zI(this.queryList)}setDirty(){this.queryList.setDirty()}}class VI{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,s=[];for(let o=0;o<r;o++){const u=t.getByIndex(o);s.push(this.queries[u.indexInDeclarationView].clone())}return new VI(s)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==KF(e,t).matches&&this.queries[t].setDirty()}}class ZF{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class UI{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const s=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(e,s);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new UI(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class GI{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new GI(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let s=0;s<r.length;s++){const o=r[s];this.matchTNodeWithReadOption(e,t,w6(t,o)),this.matchTNodeWithReadOption(e,t,Mg(t,e,o,!1,!1))}else r===Uu?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Mg(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const s=this.metadata.read;if(null!==s)if(s===Uo||s===ah||s===Uu&&4&t.type)this.addMatch(t.index,-2);else{const o=Mg(t,e,s,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function w6(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function C6(n,e,t,r){return-1===t?function M6(n,e){return 11&n.type?$b(n,e):4&n.type?TS(n,e):null}(e,n):-2===t?function S6(n,e,t){return t===Uo?$b(e,n):t===Uu?TS(e,n):t===ah?jF(e,n):void 0}(n,e,r):Qp(n,n[1],t,e)}function YF(n,e,t,r){const s=e[19].queries[r];if(null===s.matches){const o=n.data,u=t.matches,m=[];for(let w=0;w<u.length;w+=2){const T=u[w];m.push(T<0?null:C6(e,o[T],u[w+1],t.metadata.read))}s.matches=m}return s.matches}function WI(n,e,t,r){const s=n.queries.getByIndex(t),o=s.matches;if(null!==o){const u=YF(n,e,s,t);for(let m=0;m<o.length;m+=2){const w=o[m];if(w>0)r.push(u[m/2]);else{const T=o[m+1],F=e[-w];for(let N=10;N<F.length;N++){const Z=F[N];Z[17]===Z[3]&&WI(Z[1],Z,T,r)}if(null!==F[9]){const N=F[9];for(let Z=0;Z<N.length;Z++){const Q=N[Z];WI(Q[1],Q,T,r)}}}}}return r}function Ua(n){const e=Kn(),t=ms(),r=Af();ku(r+1);const s=KF(t,r);if(n.dirty&&Tf(e)===(2==(2&s.metadata.flags))){if(null===s.matches)n.reset([]);else{const o=s.crossesNgTemplate?WI(t,e,r,[]):YF(t,e,s,r);n.reset(o,zW),n.notifyOnChanges()}return!0}return!1}function fd(n,e,t){const r=ms();r.firstCreatePass&&(JF(r,new ZF(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),XF(r,Kn(),e)}function Gu(n,e,t,r){const s=ms();if(s.firstCreatePass){const o=eo();JF(s,new ZF(e,t,r),o.index),function T6(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(s,n),2==(2&t)&&(s.staticContentQueries=!0)}XF(s,Kn(),t)}function Ga(){return function E6(n,e){return n[19].queries[e].queryList}(Kn(),Af())}function XF(n,e,t){const r=new Om(4==(4&t));tp(n,e,r,r.destroy),null===e[19]&&(e[19]=new VI),e[19].queries.push(new zI(r))}function JF(n,e,t){null===n.queries&&(n.queries=new UI),n.queries.track(new GI(e,t))}function KF(n,e){return n.queries.getByIndex(e)}function QF(n,e){return TS(n,e)}function IS(...n){}const JI=new wi("Application Initializer");let KI=(()=>{class n{constructor(t){this.appInits=t,this.resolve=IS,this.reject=IS,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,s)=>{this.resolve=r,this.reject=s})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let s=0;s<this.appInits.length;s++){const o=this.appInits[s]();if(Zv(o))t.push(o);else if(o1(o)){const u=new Promise((m,w)=>{o.subscribe({complete:m,error:w})});t.push(u)}}Promise.all(t).then(()=>{r()}).catch(s=>{this.reject(s)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Sn(JI,8))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const C1=new wi("AppId",{providedIn:"root",factory:function mO(){return`${QI()}${QI()}${QI()}`}});function QI(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gO=new wi("Platform Initializer"),S1=new wi("Platform ID"),_O=new wi("appBootstrapListener");let vO=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})();const Nm=new wi("LocaleId",{providedIn:"root",factory:()=>Jo(Nm,Hr.Optional|Hr.SkipSelf)||function W6(){return"undefined"!=typeof $localize&&$localize.locale||mp}()});class j6{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let yO=(()=>{class n{compileModuleSync(t){return new OI(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=Ou(Za(t).declarations).reduce((u,m)=>{const w=Yi(m);return w&&u.push(new FI(w)),u},[]);return new j6(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Y6=(()=>Promise.resolve(0))();function $I(n){"undefined"==typeof Zone?Y6.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class mo{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Go(!1),this.onMicrotaskEmpty=new Go(!1),this.onStable=new Go(!1),this.onError=new Go(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&t,s.shouldCoalesceRunChangeDetection=r,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function X6(){let n=Ft.requestAnimationFrame,e=Ft.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Q6(n){const e=()=>{!function K6(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ft,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,tR(n),n.isCheckStableRunning=!0,eR(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),tR(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,s,o,u,m)=>{try{return bO(n),t.invokeTask(s,o,u,m)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),xO(n)}},onInvoke:(t,r,s,o,u,m,w)=>{try{return bO(n),t.invoke(s,o,u,m,w)}finally{n.shouldCoalesceRunChangeDetection&&e(),xO(n)}},onHasTask:(t,r,s,o)=>{t.hasTask(s,o),r===s&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,tR(n),eR(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,s,o)=>(t.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(s)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(mo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,s){const o=this._inner,u=o.scheduleEventTask("NgZoneEvent: "+s,e,J6,IS,IS);try{return o.runTask(u,t,r)}finally{o.cancelTask(u)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const J6={};function eR(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function tR(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function bO(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function xO(n){n._nesting--,eR(n)}class $6{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Go,this.onMicrotaskEmpty=new Go,this.onStable=new Go,this.onError=new Go}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,s){return e.apply(t,r)}}let nR=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mo.assertNotInAngularZone(),$I(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$I(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,s){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(u=>u.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:s})}whenStable(t,r,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,r,s){return[]}}return n.\u0275fac=function(t){return new(t||n)(Sn(mo))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})(),wO=(()=>{class n{constructor(){this._applications=new Map,iR.addToWindow(this)}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return iR.findTestabilityInTree(this,t,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})();class e8{addToWindow(e){}findTestabilityInTree(e,t,r){return null}}let lf,iR=new e8;const MO=new wi("AllowMultipleToken");class CO{constructor(e,t){this.name=e,this.token=t}}function SO(n,e,t=[]){const r=`Platform: ${e}`,s=new wi(r);return(o=[])=>{let u=EO();if(!u||u.injector.get(MO,!1))if(n)n(t.concat(o).concat({provide:s,useValue:!0}));else{const m=t.concat(o).concat({provide:s,useValue:!0},{provide:Ub,useValue:"platform"});!function r8(n){if(lf&&!lf.destroyed&&!lf.injector.get(MO,!1))throw new Wi(400,"");lf=n.get(TO);const e=n.get(gO,null);e&&e.forEach(t=>t())}(Aa.create({providers:m,name:r}))}return function s8(n){const e=EO();if(!e)throw new Wi(401,"");return e}()}}function EO(){return lf&&!lf.destroyed?lf:null}let TO=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const m=function o8(n,e){let t;return t="noop"===n?new $6:("zone.js"===n?void 0:n)||new mo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),w=[{provide:mo,useValue:m}];return m.run(()=>{const T=Aa.create({providers:w,parent:this.injector,name:t.moduleType.name}),F=t.create(T),N=F.injector.get(Gf,null);if(!N)throw new Wi(402,"");return m.runOutsideAngular(()=>{const Z=m.onError.subscribe({next:Q=>{N.handleError(Q)}});F.onDestroy(()=>{rR(this._modules,F),Z.unsubscribe()})}),function a8(n,e,t){try{const r=t();return Zv(r)?r.catch(s=>{throw e.runOutsideAngular(()=>n.handleError(s)),s}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(N,m,()=>{const Z=F.injector.get(KI);return Z.runInitializers(),Z.donePromise.then(()=>(function VG(n){tc(n,"Expected localeId to be defined"),"string"==typeof n&&(sF=n.toLowerCase().replace(/_/g,"-"))}(F.injector.get(Nm,mp)||mp),this._moduleDoBootstrap(F),F))})})}bootstrapModule(t,r=[]){const s=DO({},r);return function n8(n,e,t){const r=new OI(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,s))}_moduleDoBootstrap(t){const r=t.injector.get(RS);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(s=>r.bootstrap(s));else{if(!t.instance.ngDoBootstrap)throw new Wi(403,"");t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Wi(404,"");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Sn(Aa))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})();function DO(n,e){return Array.isArray(e)?e.reduce(DO,n):Object.assign(Object.assign({},n),e)}let RS=(()=>{class n{constructor(t,r,s,o,u){this._zone=t,this._injector=r,this._exceptionHandler=s,this._componentFactoryResolver=o,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new xn(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),w=new xn(T=>{let F;this._zone.runOutsideAngular(()=>{F=this._zone.onStable.subscribe(()=>{mo.assertNotInAngularZone(),$I(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{mo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{F.unsubscribe(),N.unsubscribe()}});this.isStable=Ao(m,w.pipe(Pa()))}bootstrap(t,r){if(!this._initStatus.done)throw new Wi(405,"");let s;s=t instanceof IF?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(s.componentType);const o=function i8(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Fm),m=s.create(Aa.NULL,[],r||s.selector,o),w=m.location.nativeElement,T=m.injector.get(nR,null),F=T&&m.injector.get(wO);return T&&F&&F.registerApplication(w,T),m.onDestroy(()=>{this.detachView(m.hostView),rR(this.components,m),F&&F.unregisterApplication(w)}),this._loadComponent(m),m}tick(){if(this._runningTick)throw new Wi(101,"");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;rR(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(_O,[]).concat(this._bootstrapListeners).forEach(s=>s(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(Sn(mo),Sn(Aa),Sn(Gf),Sn(Xv),Sn(KI))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let IO=!0,lh=(()=>{class n{}return n.__NG_ELEMENT_ID__=u8,n})();function u8(n){return function h8(n,e,t){if(Du(n)&&!t){const r=Ea(n.index,e);return new b1(r,r)}return 47&n.type?new b1(e[16],e):null}(eo(),Kn(),16==(16&n))}class FO{constructor(){}supports(e){return Dm(e)}create(e){return new _8(e)}}const g8=(n,e)=>e;class _8{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||g8}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,s=0,o=null;for(;t||r;){const u=!r||t&&t.currentIndex<NO(r,s,o)?t:r,m=NO(u,s,o),w=u.currentIndex;if(u===r)s--,r=r._nextRemoved;else if(t=t._next,null==u.previousIndex)s++;else{o||(o=[]);const T=m-s,F=w-s;if(T!=F){for(let Z=0;Z<T;Z++){const Q=Z<o.length?o[Z]:o[Z]=0,le=Q+Z;F<=le&&le<T&&(o[Z]=Q+1)}o[u.previousIndex]=F-T}}m!==w&&e(u,m,w)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Dm(e))throw new Wi(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let s,o,u,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let m=0;m<this.length;m++)o=e[m],u=this._trackByFn(m,o),null!==t&&Object.is(t.trackById,u)?(r&&(t=this._verifyReinsertion(t,o,u,m)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,u,m),r=!0),t=t._next}else s=0,function uI(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[sp()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,m=>{u=this._trackByFn(s,m),null!==t&&Object.is(t.trackById,u)?(r&&(t=this._verifyReinsertion(t,m,u,s)),Object.is(t.item,m)||this._addIdentityChange(t,m)):(t=this._mismatch(t,m,u,s),r=!0),t=t._next,s++}),this.length=s;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,s){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,s)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,s))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,s)):e=this._addAfter(new v8(t,r),o,s),e}_verifyReinsertion(e,t,r,s){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,s):e.currentIndex!=s&&(e.currentIndex=s,this._addToMoves(e,s)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const s=e._prevRemoved,o=e._nextRemoved;return null===s?this._removalsHead=o:s._nextRemoved=o,null===o?this._removalsTail=s:o._prevRemoved=s,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const s=null===t?this._itHead:t._next;return e._next=s,e._prev=t,null===s?this._itTail=e:s._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new OO),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new OO),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class v8{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class y8{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class OO{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new y8,this.map.set(t,r)),r.add(e)}get(e,t){const s=this.map.get(e);return s?s.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function NO(n,e,t){const r=n.previousIndex;if(null===r)return r;let s=0;return t&&r<t.length&&(s=t[r]),r+e+s}class BO{constructor(){}supports(e){return e instanceof Map||Xb(e)}create(){return new b8}}class b8{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Xb(e)))throw new Wi(900,"")}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,s)=>{if(t&&t.key===s)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(s,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const s=this._records.get(e);this._maybeAddToChanges(s,t);const o=s._prev,u=s._next;return o&&(o._next=u),u&&(u._prev=o),s._next=null,s._prev=null,s}const r=new x8(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class x8{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function HO(){return new LS([new FO])}let LS=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const s=r.factories.slice();t=t.concat(s)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||HO()),deps:[[n,new ed,new Xc]]}}find(t){const r=this.factories.find(s=>s.supports(t));if(null!=r)return r;throw new Wi(901,"")}}return n.\u0275prov=ki({token:n,providedIn:"root",factory:HO}),n})();function zO(){return new E1([new BO])}let E1=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const s=r.factories.slice();t=t.concat(s)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||zO()),deps:[[n,new ed,new Xc]]}}find(t){const r=this.factories.find(o=>o.supports(t));if(r)return r;throw new Wi(901,"")}}return n.\u0275prov=ki({token:n,providedIn:"root",factory:zO}),n})();const C8=SO(null,"core",[{provide:S1,useValue:"unknown"},{provide:TO,deps:[Aa]},{provide:wO,deps:[]},{provide:vO,deps:[]}]);let S8=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Sn(RS))},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({}),n})(),FS=null;function _p(){return FS}const Gs=new wi("DocumentToken");let Qv=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ki({token:n,factory:function(){return function A8(){return Sn(VO)}()},providedIn:"platform"}),n})();const I8=new wi("Location Initialized");let VO=(()=>{class n extends Qv{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return _p().getBaseHref(this._doc)}onPopState(t){const r=_p().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=_p().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){UO()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){UO()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(Sn(Gs))},n.\u0275prov=ki({token:n,factory:function(){return function R8(){return new VO(Sn(Gs))}()},providedIn:"platform"}),n})();function UO(){return!!window.history.pushState}function cR(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function GO(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Bm(n){return n&&"?"!==n[0]?"?"+n:n}let n0=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ki({token:n,factory:function(){return function k8(n){const e=Sn(Gs).location;return new WO(Sn(Qv),e&&e.origin||"")}()},providedIn:"root"}),n})();const uR=new wi("appBaseHref");let WO=(()=>{class n extends n0{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return cR(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Bm(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,o){const u=this.prepareExternalUrl(s+Bm(o));this._platformLocation.pushState(t,r,u)}replaceState(t,r,s,o){const u=this.prepareExternalUrl(s+Bm(o));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(Sn(Qv),Sn(uR,8))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})(),P8=(()=>{class n extends n0{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=cR(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,o){let u=this.prepareExternalUrl(s+Bm(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,s,o){let u=this.prepareExternalUrl(s+Bm(o));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(Sn(Qv),Sn(uR,8))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})(),T1=(()=>{class n{constructor(t,r){this._subject=new Go,this._urlChangeListeners=[],this._platformStrategy=t;const s=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=GO(qO(s)),this._platformStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Bm(r))}normalize(t){return n.stripTrailingSlash(function F8(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,qO(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._platformStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Bm(r)),s)}replaceState(t,r="",s=null){this._platformStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Bm(r)),s)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformStrategy).historyGo)||void 0===s||s.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=Bm,n.joinWithSlash=cR,n.stripTrailingSlash=GO,n.\u0275fac=function(t){return new(t||n)(Sn(n0),Sn(Qv))},n.\u0275prov=ki({token:n,factory:function(){return function L8(){return new T1(Sn(n0),Sn(Qv))}()},providedIn:"root"}),n})();function qO(n){return n.replace(/\/index.html$/,"")}function e3(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(o)}return null}let t3=(()=>{class n{constructor(t,r,s,o){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=s,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Dm(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${An(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return n.\u0275fac=function(t){return new(t||n)(Bt(LS),Bt(E1),Bt(Uo),Bt(Lm))},n.\u0275dir=_i({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class bq{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bR=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,o,u)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new bq(s.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===o?void 0:o);else if(null!==o){const m=r.get(o);r.move(m,u),n3(m,s)}});for(let s=0,o=r.length;s<o;s++){const m=r.get(s).context;m.index=s,m.count=o,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{n3(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(Bt(ah),Bt(Uu),Bt(LS))},n.\u0275dir=_i({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function n3(n,e){n.context.$implicit=e.item}let r0=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new xq,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){r3("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){r3("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(Bt(ah),Bt(Uu))},n.\u0275dir=_i({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class xq{constructor(){this.$implicit=null,this.ngIf=null}}function r3(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${An(e)}'.`)}class xR{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let s0=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=_i({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),qS=(()=>{class n{constructor(t,r,s){this.ngSwitch=s,s._addCase(),this._view=new xR(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(Bt(ah),Bt(Uu),Bt(s0,9))},n.\u0275dir=_i({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),s3=(()=>{class n{constructor(t,r,s){s._addDefault(new xR(t,r))}}return n.\u0275fac=function(t){return new(t||n)(Bt(ah),Bt(Uu),Bt(s0,9))},n.\u0275dir=_i({type:n,selectors:[["","ngSwitchDefault",""]]}),n})(),wR=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(t.ngTemplateOutlet){const r=this._viewContainerRef;this._viewRef&&r.remove(r.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?r.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(Bt(ah))},n.\u0275dir=_i({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[Ci]}),n})(),I1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({}),n})();const l3="browser";let Xq=(()=>{class n{}return n.\u0275prov=ki({token:n,providedIn:"root",factory:()=>new Jq(Sn(Gs),window)}),n})();class Jq{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Kq(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const o=s.shadowRoot;if(o){const u=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(u)return u}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],s-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=c3(this.window.history)||c3(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function c3(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class u3{}class SR extends class Qq extends class D8{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function T8(n){FS||(FS=n)}(new SR)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function $q(){return R1=R1||document.querySelector("base"),R1?R1.getAttribute("href"):null}();return null==t?null:function e9(n){jS=jS||document.createElement("a"),jS.setAttribute("href",n);const e=jS.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){R1=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return e3(document.cookie,e)}}let jS,R1=null;const h3=new wi("TRANSITION_ID"),n9=[{provide:JI,useFactory:function t9(n,e,t){return()=>{t.get(KI).donePromise.then(()=>{const r=_p(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<s.length;o++)r.remove(s[o])})}},deps:[h3,Gs,Aa],multi:!0}];class ER{static init(){!function t8(n){iR=n}(new ER)}addToWindow(e){Ft.getAngularTestability=(r,s=!0)=>{const o=e.findTestabilityInTree(r,s);if(null==o)throw new Error("Could not find testability for element.");return o},Ft.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ft.getAllAngularRootElements=()=>e.getAllRootElements(),Ft.frameworkStabilizers||(Ft.frameworkStabilizers=[]),Ft.frameworkStabilizers.push(r=>{const s=Ft.getAllAngularTestabilities();let o=s.length,u=!1;const m=function(w){u=u||w,o--,0==o&&r(u)};s.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const s=e.getTestability(t);return null!=s?s:r?_p().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let i9=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})();const ZS=new wi("EventManagerPlugins");let YS=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let o=0;o<s.length;o++){const u=s[o];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Sn(ZS),Sn(mo))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})();class d3{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=_p().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let f3=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})(),k1=(()=>{class n extends f3{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(o=>{const u=this._doc.createElement("style");u.textContent=o,s.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(p3),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(p3))}}return n.\u0275fac=function(t){return new(t||n)(Sn(Gs))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})();function p3(n){_p().remove(n)}const TR={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},DR=/%COMP%/g;function XS(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?XS(n,s,t):(s=s.replace(DR,n),t.push(s))}return t}function _3(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let JS=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new AR(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Be.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new c9(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case Be.ShadowDom:return new u9(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=XS(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Sn(YS),Sn(k1),Sn(C1))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})();class AR{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(TR[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const o=TR[s];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=TR[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(Nu.DashCase|Nu.Important)?e.style.setProperty(t,r,s&Nu.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Nu.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,_3(r)):this.eventManager.addEventListener(e,t,_3(r))}}class c9 extends AR{constructor(e,t,r,s){super(e),this.component=r;const o=XS(s+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr=function o9(n){return"_ngcontent-%COMP%".replace(DR,n)}(s+"-"+r.id),this.hostAttr=function a9(n){return"_nghost-%COMP%".replace(DR,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class u9 extends AR{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=XS(s.id,s.styles,[]);for(let u=0;u<o.length;u++){const m=document.createElement("style");m.textContent=o[u],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let h9=(()=>{class n extends d3{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(Sn(Gs))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})();const y3=["alt","control","meta","shift"],f9={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},b3={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},p9={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let m9=(()=>{class n extends d3{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const o=n.parseEventName(r),u=n.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_p().onAndCancel(t,o.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const o=n._normalizeKey(r.pop());let u="";if(y3.forEach(w=>{const T=r.indexOf(w);T>-1&&(r.splice(T,1),u+=w+".")}),u+=o,0!=r.length||0===o.length)return null;const m={};return m.domEventName=s,m.fullKey=u,m}static getEventFullKey(t){let r="",s=function g9(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&b3.hasOwnProperty(e)&&(e=b3[e]))}return f9[e]||e}(t);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),y3.forEach(o=>{o!=s&&p9[o](t)&&(r+=o+".")}),r+=s,r}static eventCallback(t,r,s){return o=>{n.getEventFullKey(o)===t&&s.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(Sn(Gs))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})();const b9=SO(C8,"browser",[{provide:S1,useValue:l3},{provide:gO,useValue:function _9(){SR.makeCurrent(),ER.init()},multi:!0},{provide:Gs,useFactory:function y9(){return function fg(n){Sa=n}(document),document},deps:[]}]),x9=[{provide:Ub,useValue:"root"},{provide:Gf,useFactory:function v9(){return new Gf},deps:[]},{provide:ZS,useClass:h9,multi:!0,deps:[Gs,mo,S1]},{provide:ZS,useClass:m9,multi:!0,deps:[Gs]},{provide:JS,useClass:JS,deps:[YS,k1,C1]},{provide:y1,useExisting:JS},{provide:f3,useExisting:k1},{provide:k1,useClass:k1,deps:[Gs]},{provide:nR,useClass:nR,deps:[mo]},{provide:YS,useClass:YS,deps:[ZS,mo]},{provide:u3,useClass:i9,deps:[]}];let x3=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:C1,useValue:t.appId},{provide:h3,useExisting:C1},n9]}}}return n.\u0275fac=function(t){return new(t||n)(Sn(n,12))},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({providers:x9,imports:[I1,S8]}),n})();"undefined"!=typeof window&&window;let RR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ki({token:n,factory:function(t){let r=null;return r=t?new(t||n):Sn(C3),r},providedIn:"root"}),n})(),C3=(()=>{class n extends RR{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Oo.NONE:return r;case Oo.HTML:return fi(r,"HTML")?ci(r):Ux(this._doc,String(r)).toString();case Oo.STYLE:return fi(r,"Style")?ci(r):r;case Oo.SCRIPT:if(fi(r,"Script"))return ci(r);throw new Error("unsafe value used in a script context");case Oo.URL:return pi(r),fi(r,"URL")?ci(r):ya(String(r));case Oo.RESOURCE_URL:if(fi(r,"ResourceURL"))return ci(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function Ki(n){return new jt(n)}(t)}bypassSecurityTrustStyle(t){return function Pr(n){return new Nt(n)}(t)}bypassSecurityTrustScript(t){return function Tr(n){return new Mn(n)}(t)}bypassSecurityTrustUrl(t){return function Ps(n){return new Gn(n)}(t)}bypassSecurityTrustResourceUrl(t){return function Ko(n){return new di(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(Sn(Gs))},n.\u0275prov=ki({token:n,factory:function(t){let r=null;return r=t?new t:function R9(n){return new C3(n.get(Gs))}(Sn(Aa)),r},providedIn:"root"}),n})();const{isArray:k9}=Array,{getPrototypeOf:P9,prototype:L9,keys:F9}=Object;function S3(n){if(1===n.length){const e=n[0];if(k9(e))return{args:e,keys:null};if(function O9(n){return n&&"object"==typeof n&&P9(n)===L9}(e)){const t=F9(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:N9}=Array;function kR(n){return ii(e=>function B9(n,e){return N9(e)?n(...e):n(e)}(n,e))}function E3(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}function T3(...n){const e=Er(n),{args:t,keys:r}=S3(n),s=new xn(o=>{const{length:u}=t;if(!u)return void o.complete();const m=new Array(u);let w=u,T=u;for(let F=0;F<u;F++){let N=!1;$e(t[F]).subscribe(Dn(o,Z=>{N||(N=!0,T--),m[F]=Z},()=>w--,void 0,()=>{(!w||!N)&&(T||o.next(r?E3(r,m):m),o.complete())}))}});return e?s.pipe(kR(e)):s}let D3=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(Bt(Lm),Bt(Uo))},n.\u0275dir=_i({type:n}),n})(),$v=(()=>{class n extends D3{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ta(n)))(r||n)}}(),n.\u0275dir=_i({type:n,features:[hs]}),n})();const hf=new wi("NgValueAccessor"),z9={provide:hf,useExisting:Zi(()=>PR),multi:!0},U9=new wi("CompositionEventMode");let PR=(()=>{class n extends D3{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function V9(){const n=_p()?_p().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(Bt(Lm),Bt(Uo),Bt(U9,8))},n.\u0275dir=_i({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&No("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[ba([z9]),hs]}),n})();function f_(n){return null==n||0===n.length}function I3(n){return null!=n&&"number"==typeof n.length}const gu=new wi("NgValidators"),p_=new wi("NgAsyncValidators"),G9=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class W9{static min(e){return function R3(n){return e=>{if(f_(e.value)||f_(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function k3(n){return e=>{if(f_(e.value)||f_(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function P3(n){return f_(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function L3(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function F3(n){return f_(n.value)||G9.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function O3(n){return e=>f_(e.value)||!I3(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function N3(n){return e=>I3(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function B3(n){if(!n)return KS;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(f_(r.value))return null;const s=r.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}(e)}static nullValidator(e){return null}static compose(e){return W3(e)}static composeAsync(e){return q3(e)}}function KS(n){return null}function H3(n){return null!=n}function z3(n){const e=Zv(n)?js(n):n;return o1(e),e}function V3(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function U3(n,e){return e.map(t=>t(n))}function G3(n){return n.map(e=>function q9(n){return!n.validate}(e)?e:t=>e.validate(t))}function W3(n){if(!n)return null;const e=n.filter(H3);return 0==e.length?null:function(t){return V3(U3(t,e))}}function LR(n){return null!=n?W3(G3(n)):null}function q3(n){if(!n)return null;const e=n.filter(H3);return 0==e.length?null:function(t){return T3(U3(t,e).map(z3)).pipe(ii(V3))}}function FR(n){return null!=n?q3(G3(n)):null}function j3(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function OR(n){return n?Array.isArray(n)?n:[n]:[]}function QS(n,e){return Array.isArray(n)?n.includes(e):n===e}function X3(n,e){const t=OR(e);return OR(n).forEach(s=>{QS(t,s)||t.push(s)}),t}function J3(n,e){return OR(e).filter(t=>!QS(n,t))}class K3{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=LR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=FR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class m_ extends K3{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class qu extends K3{get formDirective(){return null}get path(){return null}}let $3=(()=>{class n extends class Q3{constructor(e){this._cd=e}is(e){var t,r,s;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(s=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===s?void 0:s[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(Bt(m_,2))},n.\u0275dir=_i({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&Zt("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[hs]}),n})();function P1(n,e){(function HR(n,e){const t=function Z3(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(j3(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Y3(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(j3(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();nE(e._rawValidators,s),nE(e._rawAsyncValidators,s)})(n,e),e.valueAccessor.writeValue(n.value),function ej(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&tN(n,e)})}(n,e),function nj(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function tj(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&tN(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function $9(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function nE(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function tN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function UR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const L1="VALID",rE="INVALID",o0="PENDING",F1="DISABLED";function WR(n){return(sE(n)?n.validators:n)||null}function sN(n){return Array.isArray(n)?LR(n):n||null}function qR(n,e){return(sE(e)?e.asyncValidators:n)||null}function oN(n){return Array.isArray(n)?FR(n):n||null}function sE(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const jR=n=>n instanceof YR,oE=n=>n instanceof aE,aN=n=>n instanceof hN;function lN(n){return jR(n)?n.value:n.getRawValue()}function cN(n,e){const t=oE(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new Wi(1e3,"");if(!r[e])throw new Wi(1001,"")}function uN(n,e){oE(n),n._forEachChild((r,s)=>{if(void 0===e[s])throw new Wi(1002,"")})}class ZR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=sN(this._rawValidators),this._composedAsyncValidatorFn=oN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===L1}get invalid(){return this.status===rE}get pending(){return this.status==o0}get disabled(){return this.status===F1}get enabled(){return this.status!==F1}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=sN(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=oN(e)}addValidators(e){this.setValidators(X3(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(X3(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(J3(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(J3(e,this._rawAsyncValidators))}hasValidator(e){return QS(this._rawValidators,e)}hasAsyncValidator(e){return QS(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=o0,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=F1,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=L1,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===L1||this.status===o0)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?F1:L1}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=o0,this._hasOwnPendingAsyncValidator=!0;const t=z3(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function oj(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(s=>{r=oE(r)?r.controls.hasOwnProperty(s)?r.controls[s]:null:aN(r)&&r.at(s)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Go,this.statusChanges=new Go}_calculateStatus(){return this._allControlsDisabled()?F1:this.errors?rE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(o0)?o0:this._anyControlsHaveStatus(rE)?rE:L1}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){sE(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class YR extends ZR{constructor(e=null,t,r){super(WR(t),qR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),sE(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){UR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){UR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class aE extends ZR{constructor(e,t,r){super(WR(t),qR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){uN(this,e),Object.keys(e).forEach(r=>{cN(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=lN(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,o)=>{r=t(r,s,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class hN extends ZR{constructor(e,t,r){super(WR(t),qR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){uN(this,e),e.forEach((r,s)=>{cN(this,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>lN(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const cj={provide:m_,useExisting:Zi(()=>JR)},pN=(()=>Promise.resolve(null))();let JR=(()=>{class n extends m_{constructor(t,r,s,o,u){super(),this._changeDetectorRef=u,this.control=new YR,this._registered=!1,this.update=new Go,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function VR(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(o=>{o.constructor===PR?t=o:function sj(n){return Object.getPrototypeOf(n.constructor)===$v}(o)?r=o:s=o}),s||r||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function zR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){P1(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){pN.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=""===r||r&&"false"!==r;pN.then(()=>{var o;s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),null===(o=this._changeDetectorRef)||void 0===o||o.markForCheck()})}_getPath(t){return this._parent?function eE(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(Bt(qu,9),Bt(gu,10),Bt(p_,10),Bt(hf,10),Bt(lh,8))},n.\u0275dir=_i({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ba([cj]),hs,Ci]}),n})(),gN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({}),n})();const KR=new wi("NgModelWithFormControlWarning");let s2,PN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({imports:[[gN]]}),n})(),Fj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({imports:[PN]}),n})(),LN=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:KR,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({imports:[PN]}),n})(),Nj=(()=>{class n{group(t,r=null){const s=this._reduceControls(t);let m,o=null,u=null;return null!=r&&(function Oj(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(o=null!=r.validators?r.validators:null,u=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(o=null!=r.validator?r.validator:null,u=null!=r.asyncValidator?r.asyncValidator:null)),new aE(s,{asyncValidators:u,updateOn:m,validators:o})}control(t,r,s){return new YR(t,r,s)}array(t,r,s){const o=t.map(u=>this._createControl(u));return new hN(o,r,s)}_reduceControls(t){const r={};return Object.keys(t).forEach(s=>{r[s]=this._createControl(t[s])}),r}_createControl(t){return jR(t)||oE(t)||aN(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:LN}),n})();try{s2="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){s2=!1}let N1,ty,o2,gd=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Yq(n){return n===l3}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!s2)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(Sn(S1))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function g_(n){return function Bj(){if(null==N1&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>N1=!0}))}finally{N1=N1||!1}return N1}()?n:!!n.capture}function Hj(){if(null==ty){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ty=!1,ty;if("scrollBehavior"in document.documentElement.style)ty=!0;else{const n=Element.prototype.scrollTo;ty=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return ty}function cE(n){if(function zj(){if(null==o2){const n="undefined"!=typeof document?document.head:null;o2=!(!n||!n.createShadowRoot&&!n.attachShadow)}return o2}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function uE(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function df(n){return n.composedPath?n.composedPath()[0]:n.target}function a2(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function _u(n){return null!=n&&"false"!=`${n}`}function l0(n,e=0){return function Vj(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function ON(n){return Array.isArray(n)?n:[n]}function uc(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Lc(n){return n instanceof Uo?n.nativeElement:n}class _d extends en{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function is(...n){return js(n,Ui(n))}function hE(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function nu(n,e,t){const r=y(n)||e||t?{next:n,error:e,complete:t}:n;return r?En((s,o)=>{var u;null===(u=r.subscribe)||void 0===u||u.call(r);let m=!0;s.subscribe(Dn(o,w=>{var T;null===(T=r.next)||void 0===T||T.call(r,w),o.next(w)},()=>{var w;m=!1,null===(w=r.complete)||void 0===w||w.call(r),o.complete()},w=>{var T;m=!1,null===(T=r.error)||void 0===T||T.call(r,w),o.error(w)},()=>{var w,T;m&&(null===(w=r.unsubscribe)||void 0===w||w.call(r)),null===(T=r.finalize)||void 0===T||T.call(r)}))}):Xe}class e7 extends p{constructor(e,t){super()}schedule(e,t=0){return this}}const dE={setInterval(n,e,...t){const{delegate:r}=dE;return(null==r?void 0:r.setInterval)?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=dE;return((null==e?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0};class u2 extends e7{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const s=this.id,o=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(o,s,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return dE.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&dE.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let s,r=!1;try{this.work(e)}catch(o){r=!0,s=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,_(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const UN={now:()=>(UN.delegate||Date).now(),delegate:void 0};class B1{constructor(e,t=B1.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}B1.now=UN.now;class h2 extends B1{constructor(e,t=B1.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const H1=new h2(u2),t7=H1;function Fc(n,e){return En((t,r)=>{let s=0;t.subscribe(Dn(r,o=>n.call(e,o,s++)&&r.next(o)))})}function uh(n){return n<=0?()=>ei:En((e,t)=>{let r=0;e.subscribe(Dn(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function GN(n,e=Xe){return n=null!=n?n:r7,En((t,r)=>{let s,o=!0;t.subscribe(Dn(r,u=>{const m=e(u);(o||!n(s,m))&&(o=!1,s=m,r.next(u))}))})}function r7(n,e){return n===e}function ff(n){return En((e,t)=>{$e(n).subscribe(Dn(t,()=>t.complete(),U)),!t.closed&&e.subscribe(t)})}class jN extends class a7{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new en,this._typeaheadSubscription=p.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new en,this.change=new en,e instanceof Om&&e.changes.subscribe(t=>{if(this._activeItem){const s=t.toArray().indexOf(this._activeItem);s>-1&&s!==this._activeItemIndex&&(this._activeItemIndex=s)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(nu(t=>this._pressedLetters.push(t)),function n7(n,e=H1){return En((t,r)=>{let s=null,o=null,u=null;const m=()=>{if(s){s.unsubscribe(),s=null;const T=o;o=null,r.next(T)}};function w(){const T=u+n,F=e.now();if(F<T)return s=this.schedule(void 0,T-F),void r.add(s);m()}t.subscribe(Dn(r,T=>{o=T,u=e.now(),s||(s=e.schedule(w,n),r.add(s))},()=>{m(),r.complete()},void 0,()=>{o=s=null}))})}(e),Fc(()=>this._pressedLetters.length>0),ii(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let s=1;s<r.length+1;s++){const o=(this._activeItemIndex+s)%r.length,u=r[o];if(!this._skipPredicateFn(u)&&0===u.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,s=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!e[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&s){this.setNextItemActive();break}return;case 38:if(this._vertical&&s){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&s){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&s){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&s){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&s){this.setLastItemActive();break}return;default:return void((s||hE(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e),s=t[r];this._activeItem=null==s?null:s,this._activeItemIndex=r}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const s=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[s]))return void this.setActiveItem(s)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof Om?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let ZN=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function c7(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function l7(n){try{return n.frameElement}catch(e){return null}}(function _7(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===XN(r)||!this.isVisible(r)))return!1;let s=t.nodeName.toLowerCase(),o=XN(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===s||"object"===s||this._platform.WEBKIT&&this._platform.IOS&&!function m7(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===s?!!t.hasAttribute("controls")&&-1!==o:"video"===s?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function g7(n){return!function h7(n){return function f7(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function u7(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function d7(n){return function p7(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||YN(n))}(t)&&!this.isDisabled(t)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(Sn(gd))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function YN(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function XN(n){if(!YN(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class v7{constructor(e,t,r,s,o=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=s,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return null==r||r.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const s=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(s)return s}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const s=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(s)return s}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(uh(1)).subscribe(e)}}let y7=(()=>{class n{constructor(t,r,s){this._checker=t,this._ngZone=r,this._document=s}create(t,r=!1){return new v7(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(Sn(ZN),Sn(mo),Sn(Gs))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function fE(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function pE(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const b7=new wi("cdk-input-modality-detector-options"),x7={ignoreKeys:[18,17,224,91,16]},c0=g_({passive:!0,capture:!0});let w7=(()=>{class n{constructor(t,r,s,o){this._platform=t,this._mostRecentTarget=null,this._modality=new _d(null),this._lastTouchMs=0,this._onKeydown=u=>{var m,w;(null===(w=null===(m=this._options)||void 0===m?void 0:m.ignoreKeys)||void 0===w?void 0:w.some(T=>T===u.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=df(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(fE(u)?"keyboard":"mouse"),this._mostRecentTarget=df(u))},this._onTouchstart=u=>{pE(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=df(u))},this._options=Object.assign(Object.assign({},x7),o),this.modalityDetected=this._modality.pipe(function i7(n){return Fc((e,t)=>n<=t)}(1)),this.modalityChanged=this.modalityDetected.pipe(GN()),t.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,c0),s.addEventListener("mousedown",this._onMousedown,c0),s.addEventListener("touchstart",this._onTouchstart,c0)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,c0),document.removeEventListener("mousedown",this._onMousedown,c0),document.removeEventListener("touchstart",this._onTouchstart,c0))}}return n.\u0275fac=function(t){return new(t||n)(Sn(gd),Sn(mo),Sn(Gs),Sn(b7,8))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const C7=new wi("cdk-focus-monitor-default-options"),mE=g_({passive:!0,capture:!0});let u0=(()=>{class n{constructor(t,r,s,o,u){this._ngZone=t,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new en,this._rootNodeFocusAndBlurListener=m=>{const w=df(m),T="focus"===m.type?this._onFocus:this._onBlur;for(let F=w;F;F=F.parentElement)T.call(this,m,F)},this._document=o,this._detectionMode=(null==u?void 0:u.detectionMode)||0}monitor(t,r=!1){const s=Lc(t);if(!this._platform.isBrowser||1!==s.nodeType)return is(null);const o=cE(s)||this._getDocument(),u=this._elementInfo.get(s);if(u)return r&&(u.checkChildren=!0),u.subject;const m={checkChildren:r,subject:new en,rootNode:o};return this._elementInfo.set(s,m),this._registerGlobalListeners(m),m.subject}stopMonitoring(t){const r=Lc(t),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(t,r,s){const o=Lc(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([m,w])=>this._originChanged(m,r,w)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const s=this._elementInfo.get(r),o=df(t);!s||!s.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),s)}_onBlur(t,r){const s=this._elementInfo.get(r);!s||s.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(s.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,mE),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,mE)}),this._rootNodeFocusListenerCount.set(r,s+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ff(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,mE),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,mE),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,s){this._setClasses(t,r),this._emitOrigin(s.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((s,o)=>{(o===t||s.checkChildren&&o.contains(t))&&r.push([o,s])}),r}}return n.\u0275fac=function(t){return new(t||n)(Sn(mo),Sn(gd),Sn(w7),Sn(Gs,8),Sn(C7,8))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const KN="cdk-high-contrast-black-on-white",QN="cdk-high-contrast-white-on-black",d2="cdk-high-contrast-active";let S7=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(d2),t.remove(KN),t.remove(QN),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(d2),t.add(KN)):2===r&&(t.add(d2),t.add(QN))}}}return n.\u0275fac=function(t){return new(t||n)(Sn(gd),Sn(Gs))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function f2(n=0,e,t=t7){let r=-1;return null!=e&&(Ai(e)?t=e:r=e),new xn(s=>{let o=function E7(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let u=0;return t.schedule(function(){s.closed||(s.next(u++),0<=r?this.schedule(void 0,r):s.complete())},o)})}const z1={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=z1;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const s=e(o=>{t=void 0,n(o)});return new p(()=>null==t?void 0:t(s))},requestAnimationFrame(...n){const{delegate:e}=z1;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=z1;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0},$N=new class A7 extends h2{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let s;e=e||r.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,s){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw s}}}(class D7 extends u2{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=z1.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var s;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:o}=e;null!=t&&(null===(s=o[o.length-1])||void 0===s?void 0:s.id)!==t&&(z1.cancelAnimationFrame(t),e._scheduled=void 0)}}),I7=["addListener","removeListener"],R7=["addEventListener","removeEventListener"],k7=["on","off"];function p2(n,e,t,r){if(y(t)&&(r=t,t=void 0),r)return p2(n,e,t).pipe(kR(r));const[s,o]=function F7(n){return y(n.addEventListener)&&y(n.removeEventListener)}(n)?R7.map(u=>m=>n[u](e,m,t)):function P7(n){return y(n.addListener)&&y(n.removeListener)}(n)?I7.map(eB(n,e)):function L7(n){return y(n.on)&&y(n.off)}(n)?k7.map(eB(n,e)):[];if(!s&&$i(n))return ln(u=>p2(u,e,t))($e(n));if(!s)throw new TypeError("Invalid event target");return new xn(u=>{const m=(...w)=>u.next(1<w.length?w:w[0]);return s(m),()=>o(m)})}function eB(n,e){return t=>r=>n[t](e,r)}let m2,O7=1;const gE={};function tB(n){return n in gE&&(delete gE[n],!0)}const N7={setImmediate(n){const e=O7++;return gE[e]=!0,m2||(m2=Promise.resolve()),m2.then(()=>tB(e)&&n()),e},clearImmediate(n){tB(n)}},{setImmediate:B7,clearImmediate:H7}=N7,_E={setImmediate(...n){const{delegate:e}=_E;return((null==e?void 0:e.setImmediate)||B7)(...n)},clearImmediate(n){const{delegate:e}=_E;return((null==e?void 0:e.clearImmediate)||H7)(n)},delegate:void 0},g2=new class V7 extends h2{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let s;e=e||r.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,s){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw s}}}(class z7 extends u2{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=_E.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var s;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:o}=e;null!=t&&(null===(s=o[o.length-1])||void 0===s?void 0:s.id)!==t&&(_E.clearImmediate(t),e._scheduled=void 0)}});function nB(n,e=H1){return function U7(n){return En((e,t)=>{let r=!1,s=null,o=null,u=!1;const m=()=>{if(null==o||o.unsubscribe(),o=null,r){r=!1;const T=s;s=null,t.next(T)}u&&t.complete()},w=()=>{o=null,u&&t.complete()};e.subscribe(Dn(t,T=>{r=!0,s=T,o||$e(n(T)).subscribe(o=Dn(t,m,w))},()=>{u=!0,(!r||!o||o.closed)&&t.complete()}))})}(()=>f2(n,e))}const G7=new wi("cdk-dir-doc",{providedIn:"root",factory:function W7(){return Jo(Gs)}}),q7=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let h0=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new Go,t){const s=t.documentElement?t.documentElement.dir:null;this.value=function j7(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?q7.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||s||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(Sn(G7,8))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),d0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({}),n})(),Y7=(()=>{class n{constructor(t,r,s){this._ngZone=t,this._platform=r,this._scrolled=new en,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new xn(r=>{this._globalSubscription||this._addGlobalListener();const s=t>0?this._scrolled.pipe(nB(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):is()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const s=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Fc(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,t)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let s=Lc(r),o=t.getElementRef().nativeElement;do{if(s==o)return!0}while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>p2(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(Sn(mo),Sn(gd),Sn(Gs,8))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vE=(()=>{class n{constructor(t,r,s){this._platform=t,this._change=new en,this._changeListener=o=>{this._change.next(o)},this._document=s,r.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+s,right:t.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),s=t.documentElement,o=s.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||r.scrollY||s.scrollTop||0,left:-o.left||t.body.scrollLeft||r.scrollX||s.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(nB(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(Sn(gd),Sn(mo),Sn(Gs,8))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({}),n})(),iB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({imports:[[d0,yE],d0,yE]}),n})();function _2(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){const s=e[r];s?n.setProperty(r,s,(null==t?void 0:t.has(r))?"important":""):n.removeProperty(r)}return n}function f0(n,e){const t=e?"":"none";_2(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function rB(n,e,t){_2(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function bE(n,e){return e&&"none"!=e?n+" "+e:n}function sB(n){const e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function v2(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}function y2(n){const e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function b2(n,e,t){const{top:r,bottom:s,left:o,right:u}=n;return t>=r&&t<=s&&e>=o&&e<=u}function V1(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function oB(n,e,t,r){const{top:s,right:o,bottom:u,left:m,width:w,height:T}=n,F=w*e,N=T*e;return r>s-N&&r<u+N&&t>m-F&&t<o+F}class aB{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:y2(t)})})}handleScroll(e){const t=df(e),r=this.positions.get(t);if(!r)return null;const s=r.scrollPosition;let o,u;if(t===this._document){const T=this.getViewportScrollPosition();o=T.top,u=T.left}else o=t.scrollTop,u=t.scrollLeft;const m=s.top-o,w=s.left-u;return this.positions.forEach((T,F)=>{T.clientRect&&t!==F&&t.contains(F)&&V1(T.clientRect,m,w)}),s.top=o,s.left=u,{top:m,left:w}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function lB(n){const e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let s=0;s<t.length;s++)t[s].removeAttribute("id");return"canvas"===r?hB(n,e):("input"===r||"select"===r||"textarea"===r)&&uB(n,e),cB("canvas",n,e,hB),cB("input, textarea, select",n,e,uB),e}function cB(n,e,t,r){const s=e.querySelectorAll(n);if(s.length){const o=t.querySelectorAll(n);for(let u=0;u<s.length;u++)r(s[u],o[u])}}let K7=0;function uB(n,e){"file"!==e.type&&(e.value=n.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${K7++}`)}function hB(n,e){const t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch(r){}}const dB=g_({passive:!0}),xE=g_({passive:!1}),x2=new Set(["position"]);class $7{constructor(e,t,r,s,o,u){this._config=t,this._document=r,this._ngZone=s,this._viewportRuler=o,this._dragDropRegistry=u,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new en,this._pointerMoveSubscription=p.EMPTY,this._pointerUpSubscription=p.EMPTY,this._scrollSubscription=p.EMPTY,this._resizeSubscription=p.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new en,this.started=new en,this.released=new en,this.ended=new en,this.entered=new en,this.exited=new en,this.dropped=new en,this.moved=this._moveEvents,this._pointerDown=m=>{if(this.beforeStarted.next(),this._handles.length){const w=this._getTargetHandle(m);w&&!this._disabledHandles.has(w)&&!this.disabled&&this._initializeDragSequence(w,m)}else this.disabled||this._initializeDragSequence(this._rootElement,m)},this._pointerMove=m=>{const w=this._getPointerPositionOnPage(m);if(!this._hasStartedDragging){if(Math.abs(w.x-this._pickupPositionOnPage.x)+Math.abs(w.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const Q=Date.now()>=this._dragStartTime+this._getDragStartDelay(m),le=this._dropContainer;if(!Q)return void this._endDragSequence(m);(!le||!le.isDragging()&&!le.isReceiving())&&(m.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(m)))}return}m.preventDefault();const T=this._getConstrainedPointerPosition(w);if(this._hasMoved=!0,this._lastKnownPointerPosition=w,this._updatePointerDirectionDelta(T),this._dropContainer)this._updateActiveDropContainer(T,w);else{const F=this._activeTransform;F.x=T.x-this._pickupPositionOnPage.x+this._passiveTransform.x,F.y=T.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(F.x,F.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:T,event:m,distance:this._getDragDistance(T),delta:this._pointerDirectionDelta})})},this._pointerUp=m=>{this._endDragSequence(m)},this._nativeDragStart=m=>{if(this._handles.length){const w=this._getTargetHandle(m);w&&!this._disabledHandles.has(w)&&!this.disabled&&m.preventDefault()}else this.disabled||m.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new aB(r),u.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=_u(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(r=>f0(r,t)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>Lc(r)),this._handles.forEach(r=>f0(r,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=Lc(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,xE),t.addEventListener("touchstart",this._pointerDown,dB),t.addEventListener("dragstart",this._nativeDragStart,xE)}),this._initialTransform=void 0,this._rootElement=t),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Lc(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){var e,t;this._removeRootElementListeners(this._rootElement),this.isDragging()&&(null===(e=this._rootElement)||void 0===e||e.remove()),null===(t=this._anchor)||void 0===t||t.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),f0(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),f0(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){var e,t;null===(e=this._preview)||void 0===e||e.remove(),null===(t=this._previewRef)||void 0===t||t.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){var e,t;null===(e=this._placeholder)||void 0===e||e.remove(),null===(t=this._placeholderRef)||void 0===t||t.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){U1(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const r=this._rootElement,s=r.parentNode,o=this._placeholder=this._createPlaceholderElement(),u=this._anchor=this._anchor||this._document.createComment(""),m=this._getShadowRoot();s.insertBefore(u,r),this._initialTransform=r.style.transform||"",this._preview=this._createPreviewElement(),rB(r,!1,x2),this._document.body.appendChild(s.replaceChild(o,r)),this._getPreviewInsertionPoint(s,m).appendChild(this._preview),this.started.next({source:this}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const r=this.isDragging(),s=U1(t),o=!s&&0!==t.button,u=this._rootElement,m=df(t),w=!s&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),T=s?pE(t):fE(t);if(m&&m.draggable&&"mousedown"===t.type&&t.preventDefault(),r||o||w||T)return;if(this._handles.length){const Z=u.style;this._rootElementTapHighlight=Z.webkitTapHighlightColor||"",Z.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(Z=>this._updateOnScroll(Z)),this._boundaryElement&&(this._boundaryRect=y2(this._boundaryElement));const F=this._previewTemplate;this._pickupPositionInElement=F&&F.template&&!F.matchSize?{x:0,y:0}:this._getPointerPositionInElement(e,t);const N=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:N.x,y:N.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){rB(this._rootElement,!0,x2),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,r=t.getItemIndex(this),s=this._getPointerPositionOnPage(e),o=this._getDragDistance(s),u=t._isOverContainer(s.x,s.y);this.ended.next({source:this,distance:o,dropPoint:s}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:u,distance:o,dropPoint:s}),t.drop(this,r,this._initialIndex,this._initialContainer,u,o,s),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:s}){let o=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,e,t,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,s),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,r=e?e.template:null;let s;if(r&&e){const o=e.matchSize?this._rootElement.getBoundingClientRect():null,u=e.viewContainer.createEmbeddedView(r,e.context);u.detectChanges(),s=pB(u,this._document),this._previewRef=u,e.matchSize?mB(s,o):s.style.transform=wE(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const o=this._rootElement;s=lB(o),mB(s,o.getBoundingClientRect()),this._initialTransform&&(s.style.transform=this._initialTransform)}return _2(s.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},x2),f0(s,!1),s.classList.add("cdk-drag-preview"),s.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(o=>s.classList.add(o)):s.classList.add(t)),s}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function J7(n){const e=getComputedStyle(n),t=v2(e,"transition-property"),r=t.find(m=>"transform"===m||"all"===m);if(!r)return 0;const s=t.indexOf(r),o=v2(e,"transition-duration"),u=v2(e,"transition-delay");return sB(o[s])+sB(u[s])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{const s=u=>{var m;(!u||df(u)===this._preview&&"transform"===u.propertyName)&&(null===(m=this._preview)||void 0===m||m.removeEventListener("transitionend",s),r(),clearTimeout(o))},o=setTimeout(s,1.5*t);this._preview.addEventListener("transitionend",s)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=pB(this._placeholderRef,this._document)):r=lB(this._rootElement),r.style.pointerEvents="none",r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(e,t){const r=this._rootElement.getBoundingClientRect(),s=e===this._rootElement?null:e,o=s?s.getBoundingClientRect():r,u=U1(t)?t.targetTouches[0]:t,m=this._getViewportScrollPosition();return{x:o.left-r.left+(u.pageX-o.left-m.left),y:o.top-r.top+(u.pageY-o.top-m.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),r=U1(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,s=r.pageX-t.left,o=r.pageY-t.top;if(this._ownerSVGElement){const u=this._ownerSVGElement.getScreenCTM();if(u){const m=this._ownerSVGElement.createSVGPoint();return m.x=s,m.y=o,m.matrixTransform(u.inverse())}}return{x:s,y:o}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:r,y:s}=this.constrainPosition?this.constrainPosition(e,this):e;if("x"===this.lockAxis||"x"===t?s=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(r=this._pickupPositionOnPage.x),this._boundaryRect){const{x:o,y:u}=this._pickupPositionInElement,m=this._boundaryRect,{width:w,height:T}=this._getPreviewRect(),F=m.top+u,N=m.bottom-(T-u);r=fB(r,m.left+o,m.right-(w-o)),s=fB(s,F,N)}return{x:r,y:s}}_updatePointerDirectionDelta(e){const{x:t,y:r}=e,s=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,u=Math.abs(t-o.x),m=Math.abs(r-o.y);return u>this._config.pointerDirectionChangeThreshold&&(s.x=t>o.x?1:-1,o.x=t),m>this._config.pointerDirectionChangeThreshold&&(s.y=r>o.y?1:-1,o.y=r),s}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,f0(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,xE),e.removeEventListener("touchstart",this._pointerDown,dB),e.removeEventListener("dragstart",this._nativeDragStart,xE)}_applyRootElementTransform(e,t){const r=wE(e,t),s=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=s.transform&&"none"!=s.transform?s.transform:""),s.transform=bE(r,this._initialTransform)}_applyPreviewTransform(e,t){var r;const s=(null===(r=this._previewTemplate)||void 0===r?void 0:r.template)?void 0:this._initialTransform,o=wE(e,t);this._preview.style.transform=bE(o,s)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const r=this._boundaryElement.getBoundingClientRect(),s=this._rootElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===s.width&&0===s.height)return;const o=r.left-s.left,u=s.right-r.right,m=r.top-s.top,w=s.bottom-r.bottom;r.width>s.width?(o>0&&(e+=o),u>0&&(e-=u)):e=0,r.height>s.height?(m>0&&(t+=m),w>0&&(t-=w)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:U1(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const r=df(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&V1(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){var e;return(null===(e=this._parentPositions.positions.get(this._document))||void 0===e?void 0:e.scrollPosition)||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=cE(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const r=this._previewContainer||"global";if("parent"===r)return e;if("global"===r){const s=this._document;return t||s.fullscreenElement||s.webkitFullscreenElement||s.mozFullScreenElement||s.msFullscreenElement||s.body}return Lc(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function wE(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function fB(n,e,t){return Math.max(e,Math.min(t,n))}function U1(n){return"t"===n.type[0]}function pB(n,e){const t=n.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const r=e.createElement("div");return t.forEach(s=>r.appendChild(s)),r}function mB(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=wE(e.left,e.top)}function G1(n,e){return Math.max(0,Math.min(e,n))}class tZ{constructor(e,t,r,s,o){this._dragDropRegistry=t,this._ngZone=s,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new en,this.entered=new en,this.exited=new en,this.dropped=new en,this.sorted=new en,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=p.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new en,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function T7(n=0,e=H1){return n<0&&(n=0),f2(n,n,e)}(0,$N).pipe(ff(this._stopScrollTimers)).subscribe(()=>{const u=this._scrollNode,m=this.autoScrollStep;1===this._verticalScrollDirection?u.scrollBy(0,-m):2===this._verticalScrollDirection&&u.scrollBy(0,m),1===this._horizontalScrollDirection?u.scrollBy(-m,0):2===this._horizontalScrollDirection&&u.scrollBy(m,0)})},this.element=Lc(e),this._document=r,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new aB(r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,s){let o;this._draggingStarted(),null==s?(o=this.sortingDisabled?this._draggables.indexOf(e):-1,-1===o&&(o=this._getItemIndexFromPointerPosition(e,t,r))):o=s;const u=this._activeDraggables,m=u.indexOf(e),w=e.getPlaceholderElement();let T=u[o];if(T===e&&(T=u[o+1]),!T&&(null==o||-1===o||o<u.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(T=u[0]),m>-1&&u.splice(m,1),T&&!this._dragDropRegistry.isDragging(T)){const F=T.getRootElement();F.parentElement.insertBefore(w,F),u.splice(o,0,e)}else Lc(this.element).appendChild(w),u.push(e);w.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,s,o,u,m){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:s,isPointerOverContainer:o,distance:u,dropPoint:m})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(s=>s.isDragging()).every(s=>-1===e.indexOf(s))?this._reset():this._cacheItems()),this}withDirection(e){return this._direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._orientation=e,this}withScrollableParents(e){const t=Lc(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(r=>r.drag===e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,s){if(this.sortingDisabled||!this._clientRect||!oB(this._clientRect,.05,t,r))return;const o=this._itemPositions,u=this._getItemIndexFromPointerPosition(e,t,r,s);if(-1===u&&o.length>0)return;const m="horizontal"===this._orientation,w=o.findIndex(xe=>xe.drag===e),T=o[u],N=T.clientRect,Z=w>u?1:-1,Q=this._getItemOffsetPx(o[w].clientRect,N,Z),le=this._getSiblingOffsetPx(w,o,Z),_e=o.slice();(function eZ(n,e,t){const r=G1(e,n.length-1),s=G1(t,n.length-1);if(r===s)return;const o=n[r],u=s<r?-1:1;for(let m=r;m!==s;m+=u)n[m]=n[m+u];n[s]=o})(o,w,u),this.sorted.next({previousIndex:w,currentIndex:u,container:this,item:e}),o.forEach((xe,fe)=>{if(_e[fe]===xe)return;const ue=xe.drag===e,Ne=ue?Q:le,Re=ue?e.getPlaceholderElement():xe.drag.getRootElement();xe.offset+=Ne,m?(Re.style.transform=bE(`translate3d(${Math.round(xe.offset)}px, 0, 0)`,xe.initialTransform),V1(xe.clientRect,0,Ne)):(Re.style.transform=bE(`translate3d(0, ${Math.round(xe.offset)}px, 0)`,xe.initialTransform),V1(xe.clientRect,Ne,0))}),this._previousSwap.overlaps=b2(N,t,r),this._previousSwap.drag=T.drag,this._previousSwap.delta=m?s.x:s.y}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,s=0,o=0;if(this._parentPositions.positions.forEach((u,m)=>{m===this._document||!u.clientRect||r||oB(u.clientRect,.05,e,t)&&([s,o]=function nZ(n,e,t,r){const s=vB(e,r),o=yB(e,t);let u=0,m=0;if(s){const w=n.scrollTop;1===s?w>0&&(u=1):n.scrollHeight-w>n.clientHeight&&(u=2)}if(o){const w=n.scrollLeft;1===o?w>0&&(m=1):n.scrollWidth-w>n.clientWidth&&(m=2)}return[u,m]}(m,u.clientRect,e,t),(s||o)&&(r=m))}),!s&&!o){const{width:u,height:m}=this._viewportRuler.getViewportSize(),w={width:u,height:m,top:0,right:u,bottom:m,left:0};s=vB(w,t),o=yB(w,e),r=window}r&&(s!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=s,this._horizontalScrollDirection=o,this._scrollNode=r,(s||o)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=Lc(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=Lc(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_cacheItemPositions(){const e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(t=>{const r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:y2(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_reset(){this._isDragging=!1;const e=Lc(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(t=>{var r;const s=t.getRootElement();if(s){const o=null===(r=this._itemPositions.find(u=>u.drag===t))||void 0===r?void 0:r.initialTransform;s.style.transform=o||""}}),this._siblings.forEach(t=>t._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(e,t,r){const s="horizontal"===this._orientation,o=t[e].clientRect,u=t[e+-1*r];let m=o[s?"width":"height"]*r;if(u){const w=s?"left":"top",T=s?"right":"bottom";-1===r?m-=u.clientRect[w]-o[T]:m+=o[w]-u.clientRect[T]}return m}_getItemOffsetPx(e,t,r){const s="horizontal"===this._orientation;let o=s?t.left-e.left:t.top-e.top;return-1===r&&(o+=s?t.width-e.width:t.height-e.height),o}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const r=this._itemPositions,s="horizontal"===this._orientation;if(r[0].drag!==this._activeDraggables[0]){const u=r[r.length-1].clientRect;return s?e>=u.right:t>=u.bottom}{const u=r[0].clientRect;return s?e<=u.left:t<=u.top}}_getItemIndexFromPointerPosition(e,t,r,s){const o="horizontal"===this._orientation,u=this._itemPositions.findIndex(({drag:m,clientRect:w})=>{if(m===e)return!1;if(s){const T=o?s.x:s.y;if(m===this._previousSwap.drag&&this._previousSwap.overlaps&&T===this._previousSwap.delta)return!1}return o?t>=Math.floor(w.left)&&t<Math.floor(w.right):r>=Math.floor(w.top)&&r<Math.floor(w.bottom)});return-1!==u&&this.sortPredicate(u,e,this)?u:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(e,t){return null!=this._clientRect&&b2(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(s=>s._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._clientRect||!b2(this._clientRect,t,r)||!this.enterPredicate(e,this))return!1;const s=this._getShadowRoot().elementFromPoint(t,r);if(!s)return!1;const o=Lc(this.element);return s===o||o.contains(s)}_startReceiving(e,t){const r=this._activeSiblings;!r.has(e)&&t.every(s=>this.enterPredicate(s,this)||this._draggables.indexOf(s)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&(this._itemPositions.forEach(({clientRect:r})=>{V1(r,t.top,t.left)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=cE(Lc(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._activeDraggables.filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function vB(n,e){const{top:t,bottom:r,height:s}=n,o=.05*s;return e>=t-o&&e<=t+o?1:e>=r-o&&e<=r+o?2:0}function yB(n,e){const{left:t,right:r,width:s}=n,o=.05*s;return e>=t-o&&e<=t+o?1:e>=r-o&&e<=r+o?2:0}const ME=g_({passive:!1,capture:!0});let iZ=(()=>{class n{constructor(t,r){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=s=>s.isDragging(),this.pointerMove=new en,this.pointerUp=new en,this.scroll=new en,this._preventDefaultWhileDragging=s=>{this._activeDragInstances.length>0&&s.preventDefault()},this._persistentTouchmoveListener=s=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&s.preventDefault(),this.pointerMove.next(s))},this._document=r}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,ME)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,ME)}startDragging(t,r){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const s=r.type.startsWith("touch");this._globalListeners.set(s?"touchend":"mouseup",{handler:o=>this.pointerUp.next(o),options:!0}).set("scroll",{handler:o=>this.scroll.next(o),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:ME}),s||this._globalListeners.set("mousemove",{handler:o=>this.pointerMove.next(o),options:ME}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((o,u)=>{this._document.addEventListener(u,o.handler,o.options)})})}}stopDragging(t){const r=this._activeDragInstances.indexOf(t);r>-1&&(this._activeDragInstances.splice(r,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const r=[this.scroll];return t&&t!==this._document&&r.push(new xn(s=>this._ngZone.runOutsideAngular(()=>{const u=m=>{this._activeDragInstances.length&&s.next(m)};return t.addEventListener("scroll",u,!0),()=>{t.removeEventListener("scroll",u,!0)}}))),Ao(...r)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,r)=>{this._document.removeEventListener(r,t.handler,t.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(t){return new(t||n)(Sn(mo),Sn(Gs))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rZ={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let sZ=(()=>{class n{constructor(t,r,s,o){this._document=t,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=o}createDrag(t,r=rZ){return new $7(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new tZ(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(t){return new(t||n)(Sn(Gs),Sn(mo),Sn(vE),Sn(iZ))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({providers:[sZ],imports:[yE]}),n})();class bB{}const zm="*";function p0(n,e){return{type:7,name:n,definitions:e,options:{}}}function __(n,e=null){return{type:4,styles:e,timings:n}}function xB(n,e=null){return{type:3,steps:n,options:e}}function wB(n,e=null){return{type:2,steps:n,options:e}}function Sc(n){return{type:6,styles:n,offset:null}}function pf(n,e,t){return{type:0,name:n,styles:e,options:t}}function v_(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function MB(n=null){return{type:9,options:n}}function CB(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function SB(n){Promise.resolve(null).then(n)}class W1{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){SB(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class EB{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,s=0;const o=this.players.length;0==o?SB(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==o&&this._onFinish()}),u.onDestroy(()=>{++r==o&&this._onDestroy()}),u.onStart(()=>{++s==o&&this._onStart()})}),this.totalTime=this.players.reduce((u,m)=>Math.max(u,m.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const s=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(s)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const xo=!1;function TB(n){return new Wi(3e3,xo)}function VZ(){return"undefined"!=typeof window&&void 0!==window.document}function M2(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function y_(n){switch(n.length){case 0:return new W1;case 1:return n[0];default:return new EB(n)}}function DB(n,e,t,r,s={},o={}){const u=[],m=[];let w=-1,T=null;if(r.forEach(F=>{const N=F.offset,Z=N==w,Q=Z&&T||{};Object.keys(F).forEach(le=>{let _e=le,xe=F[le];if("offset"!==le)switch(_e=e.normalizePropertyName(_e,u),xe){case"!":xe=s[le];break;case zm:xe=o[le];break;default:xe=e.normalizeStyleValue(le,_e,xe,u)}Q[_e]=xe}),Z||m.push(Q),T=Q,w=N}),u.length)throw function IZ(n){return new Wi(3502,xo)}();return m}function C2(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&S2(t,"start",n)));break;case"done":n.onDone(()=>r(t&&S2(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&S2(t,"destroy",n)))}}function S2(n,e,t){const r=t.totalTime,o=E2(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),u=n._data;return null!=u&&(o._data=u),o}function E2(n,e,t,r,s="",o=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:s,totalTime:o,disabled:!!u}}function Lh(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function AB(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let T2=(n,e)=>!1,IB=(n,e,t)=>[],RB=null;function D2(n){const e=n.parentNode||n.host;return e===RB?null:e}(M2()||"undefined"!=typeof Element)&&(VZ()?(RB=(()=>document.documentElement)(),T2=(n,e)=>{for(;e;){if(e===n)return!0;e=D2(e)}return!1}):T2=(n,e)=>n.contains(e),IB=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let ny=null,kB=!1;function PB(n){ny||(ny=function GZ(){return"undefined"!=typeof document?document.body:null}()||{},kB=!!ny.style&&"WebkitAppearance"in ny.style);let e=!0;return ny.style&&!function UZ(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in ny.style,!e&&kB&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in ny.style)),e}const LB=T2,FB=IB;let OB=(()=>{class n{validateStyleProperty(t){return PB(t)}matchesElement(t,r){return!1}containsElement(t,r){return LB(t,r)}getParentElement(t){return D2(t)}query(t,r,s){return FB(t,r,s)}computeStyle(t,r,s){return s||""}animate(t,r,s,o,u,m=[],w){return new W1(s,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})(),A2=(()=>{class n{}return n.NOOP=new OB,n})();const I2="ng-enter",SE="ng-leave",EE="ng-trigger",TE=".ng-trigger",BB="ng-animating",R2=".ng-animating";function iy(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:k2(parseFloat(e[1]),e[2])}function k2(n,e){return"s"===e?1e3*n:n}function DE(n,e,t){return n.hasOwnProperty("duration")?n:function jZ(n,e,t){let s,o=0,u="";if("string"==typeof n){const m=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===m)return e.push(TB()),{duration:0,delay:0,easing:""};s=k2(parseFloat(m[1]),m[2]);const w=m[3];null!=w&&(o=k2(parseFloat(w),m[4]));const T=m[5];T&&(u=T)}else s=n;if(!t){let m=!1,w=e.length;s<0&&(e.push(function lZ(){return new Wi(3100,xo)}()),m=!0),o<0&&(e.push(function cZ(){return new Wi(3101,xo)}()),m=!0),m&&e.splice(w,0,TB())}return{duration:s,delay:o,easing:u}}(n,e,t)}function m0(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function b_(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else m0(n,t);return t}function zB(n,e,t){return t?e+":"+t+";":""}function VB(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=zB(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=zB(0,XZ(t),n.style[t]));n.setAttribute("style",e)}function vp(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const s=L2(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[s]),n.style[s]=e[r]}),M2()&&VB(n))}function ry(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=L2(t);n.style[r]=""}),M2()&&VB(n))}function q1(n){return Array.isArray(n)?1==n.length?n[0]:wB(n):n}const P2=new RegExp("{{\\s*(.+?)\\s*}}","g");function UB(n){let e=[];if("string"==typeof n){let t;for(;t=P2.exec(n);)e.push(t[1]);P2.lastIndex=0}return e}function AE(n,e,t){const r=n.toString(),s=r.replace(P2,(o,u)=>{let m=e[u];return e.hasOwnProperty(u)||(t.push(function hZ(n){return new Wi(3003,xo)}()),m=""),m.toString()});return s==r?n:s}function IE(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const YZ=/-+([a-z0-9])/g;function L2(n){return n.replace(YZ,(...e)=>e[1].toUpperCase())}function XZ(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Fh(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function dZ(n){return new Wi(3004,xo)}()}}function GB(n,e){return window.getComputedStyle(n)[e]}function tY(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function nY(n,e,t){if(":"==n[0]){const w=function iY(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function EZ(n){return new Wi(3016,xo)}()),"* => *"}}(n,t);if("function"==typeof w)return void e.push(w);n=w}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function SZ(n){return new Wi(3015,xo)}()),e;const s=r[1],o=r[2],u=r[3];e.push(WB(s,u));"<"==o[0]&&!("*"==s&&"*"==u)&&e.push(WB(u,s))}(r,t,e)):t.push(n),t}const LE=new Set(["true","1"]),FE=new Set(["false","0"]);function WB(n,e){const t=LE.has(n)||FE.has(n),r=LE.has(e)||FE.has(e);return(s,o)=>{let u="*"==n||n==s,m="*"==e||e==o;return!u&&t&&"boolean"==typeof s&&(u=s?LE.has(n):FE.has(n)),!m&&r&&"boolean"==typeof o&&(m=o?LE.has(e):FE.has(e)),u&&m}}const rY=new RegExp("s*:selfs*,?","g");function F2(n,e,t,r){return new sY(n).build(e,t,r)}class sY{constructor(e){this._driver=e}build(e,t,r){const s=new lY(t);this._resetContextStyleTimingState(s);const o=Fh(this,q1(e),s);return s.unsupportedCSSPropertiesFound.size&&s.unsupportedCSSPropertiesFound.keys(),o}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,s=t.depCount=0;const o=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function pZ(){return new Wi(3006,xo)}()),e.definitions.forEach(m=>{if(this._resetContextStyleTimingState(t),0==m.type){const w=m,T=w.name;T.toString().split(/\s*,\s*/).forEach(F=>{w.name=F,o.push(this.visitState(w,t))}),w.name=T}else if(1==m.type){const w=this.visitTransition(m,t);r+=w.queryCount,s+=w.depCount,u.push(w)}else t.errors.push(function mZ(){return new Wi(3007,xo)}())}),{type:7,name:e.name,states:o,transitions:u,queryCount:r,depCount:s,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,u=s||{};r.styles.forEach(m=>{if(OE(m)){const w=m;Object.keys(w).forEach(T=>{UB(w[T]).forEach(F=>{u.hasOwnProperty(F)||o.add(F)})})}}),o.size&&(IE(o.values()),t.errors.push(function gZ(n,e){return new Wi(3008,xo)}()))}return{type:0,name:e.name,style:r,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Fh(this,q1(e.animation),t);return{type:1,matchers:tY(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:sy(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Fh(this,r,t)),options:sy(e.options)}}visitGroup(e,t){const r=t.currentTime;let s=0;const o=e.steps.map(u=>{t.currentTime=r;const m=Fh(this,u,t);return s=Math.max(s,t.currentTime),m});return t.currentTime=s,{type:3,steps:o,options:sy(e.options)}}visitAnimate(e,t){const r=function uY(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return O2(DE(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=O2(0,0,"");return o.dynamic=!0,o.strValue=r,o}return t=t||DE(r,e),O2(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let s,o=e.styles?e.styles:Sc({});if(5==o.type)s=this.visitKeyframes(o,t);else{let u=e.styles,m=!1;if(!u){m=!0;const T={};r.easing&&(T.easing=r.easing),u=Sc(T)}t.currentTime+=r.duration+r.delay;const w=this.visitStyle(u,t);w.isEmptyStep=m,s=w}return t.currentAnimateTimings=null,{type:4,timings:r,style:s,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(u=>{"string"==typeof u?u==zm?r.push(u):t.errors.push(function _Z(n){return new Wi(3002,xo)}()):r.push(u)}):r.push(e.styles);let s=!1,o=null;return r.forEach(u=>{if(OE(u)){const m=u,w=m.easing;if(w&&(o=w,delete m.easing),!s)for(let T in m)if(m[T].toString().indexOf("{{")>=0){s=!0;break}}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let s=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(m=>{if(!this._driver.validateStyleProperty(m))return delete u[m],void t.unsupportedCSSPropertiesFound.add(m);const w=t.collectedStyles[t.currentQuerySelector],T=w[m];let F=!0;T&&(o!=s&&o>=T.startTime&&s<=T.endTime&&(t.errors.push(function vZ(n,e,t,r,s){return new Wi(3010,xo)}()),F=!1),o=T.startTime),F&&(w[m]={startTime:o,endTime:s}),t.options&&function ZZ(n,e,t){const r=e.params||{},s=UB(n);s.length&&s.forEach(o=>{r.hasOwnProperty(o)||t.push(function uZ(n){return new Wi(3001,xo)}())})}(u[m],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function yZ(){return new Wi(3011,xo)}()),r;let o=0;const u=[];let m=!1,w=!1,T=0;const F=e.steps.map(fe=>{const ue=this._makeStyleAst(fe,t);let Ne=null!=ue.offset?ue.offset:function cY(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(OE(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(OE(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(ue.styles),Re=0;return null!=Ne&&(o++,Re=ue.offset=Ne),w=w||Re<0||Re>1,m=m||Re<T,T=Re,u.push(Re),ue});w&&t.errors.push(function bZ(){return new Wi(3012,xo)}()),m&&t.errors.push(function xZ(){return new Wi(3200,xo)}());const N=e.steps.length;let Z=0;o>0&&o<N?t.errors.push(function wZ(){return new Wi(3202,xo)}()):0==o&&(Z=1/(N-1));const Q=N-1,le=t.currentTime,_e=t.currentAnimateTimings,xe=_e.duration;return F.forEach((fe,ue)=>{const Ne=Z>0?ue==Q?1:Z*ue:u[ue],Re=Ne*xe;t.currentTime=le+_e.delay+Re,_e.duration=Re,this._validateStyleAst(fe,t),fe.offset=Ne,r.styles.push(fe)}),r}visitReference(e,t){return{type:8,animation:Fh(this,q1(e.animation),t),options:sy(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:sy(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:sy(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;const[o,u]=function oY(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(rY,"")),n=n.replace(/@\*/g,TE).replace(/@\w+/g,t=>TE+"-"+t.substr(1)).replace(/:animating/g,R2),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,Lh(t.collectedStyles,t.currentQuerySelector,{});const m=Fh(this,q1(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:s.limit||0,optional:!!s.optional,includeSelf:u,animation:m,originalSelector:e.selector,options:sy(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function MZ(){return new Wi(3013,xo)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:DE(e.timings,t.errors,!0);return{type:12,animation:Fh(this,q1(e.animation),t),timings:r,options:null}}}class lY{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function OE(n){return!Array.isArray(n)&&"object"==typeof n}function sy(n){return n?(n=m0(n)).params&&(n.params=function aY(n){return n?m0(n):null}(n.params)):n={},n}function O2(n,e,t){return{duration:n,delay:e,easing:t}}function N2(n,e,t,r,s,o,u=null,m=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:s,delay:o,totalTime:s+o,easing:u,subTimeline:m}}class NE{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const fY=new RegExp(":enter","g"),mY=new RegExp(":leave","g");function B2(n,e,t,r,s,o={},u={},m,w,T=[]){return(new gY).buildKeyframes(n,e,t,r,s,o,u,m,w,T)}class gY{buildKeyframes(e,t,r,s,o,u,m,w,T,F=[]){T=T||new NE;const N=new H2(e,t,T,s,o,F,[]);N.options=w,N.currentTimeline.setStyles([u],null,N.errors,w),Fh(this,r,N);const Z=N.timelines.filter(Q=>Q.containsAnimation());if(Object.keys(m).length){let Q;for(let le=Z.length-1;le>=0;le--){const _e=Z[le];if(_e.element===t){Q=_e;break}}Q&&!Q.allowOnlyTimelineStyles()&&Q.setStyles([m],null,N.errors,w)}return Z.length?Z.map(Q=>Q.buildKeyframes()):[N2(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const s=t.createSubContext(e.options),o=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,s,s.options);o!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const u=null!=r.duration?iy(r.duration):null,m=null!=r.delay?iy(r.delay):null;return 0!==u&&e.forEach(w=>{const T=t.appendInstructionToTimeline(w,u,m);o=Math.max(o,T.duration+T.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Fh(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let s=t;const o=e.options;if(o&&(o.params||o.delay)&&(s=t.createSubContext(o),s.transformIntoNewTimeline(),null!=o.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=BE);const u=iy(o.delay);s.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>Fh(this,u,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>r&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let s=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?iy(e.options.delay):0;e.steps.forEach(u=>{const m=t.createSubContext(e.options);o&&m.delayNextStep(o),Fh(this,u,m),s=Math.max(s,m.currentTimeline.currentTime),r.push(m.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return DE(t.params?AE(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),s.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,s=t.currentAnimateTimings;!s&&r.getCurrentStyleProperties().length&&r.forwardFrame();const o=s&&s.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,s=t.currentTimeline.duration,o=r.duration,m=t.createSubContext().currentTimeline;m.easing=r.easing,e.styles.forEach(w=>{m.forwardTime((w.offset||0)*o),m.setStyles(w.styles,w.easing,t.errors,t.options),m.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(m),t.transformIntoNewTimeline(s+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,s=e.options||{},o=s.delay?iy(s.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=BE);let u=r;const m=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=m.length;let w=null;m.forEach((T,F)=>{t.currentQueryIndex=F;const N=t.createSubContext(e.options,T);o&&N.delayNextStep(o),T===t.element&&(w=N.currentTimeline),Fh(this,e.animation,N),N.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,N.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),w&&(t.currentTimeline.mergeTimelineCollectedStyles(w),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,s=t.currentTimeline,o=e.timings,u=Math.abs(o.duration),m=u*(t.currentQueryTotal-1);let w=u*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":w=m-w;break;case"full":w=r.currentStaggerTime}const F=t.currentTimeline;w&&F.delayNextStep(w);const N=F.currentTime;Fh(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=s.currentTime-N+(s.startTime-r.currentTimeline.startTime)}}const BE={};class H2{constructor(e,t,r,s,o,u,m,w){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=s,this._leaveClassName=o,this.errors=u,this.timelines=m,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=BE,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=w||new HE(this._driver,t,0),m.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let s=this.options;null!=r.duration&&(s.duration=iy(r.duration)),null!=r.delay&&(s.delay=iy(r.delay));const o=r.params;if(o){let u=s.params;u||(u=this.options.params={}),Object.keys(o).forEach(m=>{(!t||!u.hasOwnProperty(m))&&(u[m]=AE(o[m],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(s=>{r[s]=t[s]})}}return e}createSubContext(e=null,t,r){const s=t||this.element,o=new H2(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=BE,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const s={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},o=new _Y(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(o),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,s,o,u){let m=[];if(s&&m.push(this.element),e.length>0){e=(e=e.replace(fY,"."+this._enterClassName)).replace(mY,"."+this._leaveClassName);let T=this._driver.query(this.element,e,1!=r);0!==r&&(T=r<0?T.slice(T.length+r,T.length):T.slice(0,r)),m.push(...T)}return!o&&0==m.length&&u.push(function CZ(n){return new Wi(3014,xo)}()),m}}class HE{constructor(e,t,r,s){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=s,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new HE(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||zm,this._currentKeyframe[t]=zm}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,s){t&&(this._previousKeyframe.easing=t);const o=s&&s.params||{},u=function vY(n,e){const t={};let r;return n.forEach(s=>{"*"===s?(r=r||Object.keys(e),r.forEach(o=>{t[o]=zm})):b_(s,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(u).forEach(m=>{const w=AE(u[m],o,r);this._pendingStyles[m]=w,this._localTimelineStyles.hasOwnProperty(m)||(this._backFill[m]=this._globalTimelineStyles.hasOwnProperty(m)?this._globalTimelineStyles[m]:zm),this._updateStyle(m,w)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],s=e._styleSummary[t];(!r||s.time>r.time)&&this._updateStyle(t,s.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((m,w)=>{const T=b_(m,!0);Object.keys(T).forEach(F=>{const N=T[F];"!"==N?e.add(F):N==zm&&t.add(F)}),r||(T.offset=w/this.duration),s.push(T)});const o=e.size?IE(e.values()):[],u=t.size?IE(t.values()):[];if(r){const m=s[0],w=m0(m);m.offset=0,w.offset=1,s=[m,w]}return N2(this.element,s,o,u,this.duration,this.startTime,this.easing,!1)}}class _Y extends HE{constructor(e,t,r,s,o,u,m=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=s,this.postStyleProps=o,this._stretchStartingKeyframe=m,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],u=r+t,m=t/u,w=b_(e[0],!1);w.offset=0,o.push(w);const T=b_(e[0],!1);T.offset=ZB(m),o.push(T);const F=e.length-1;for(let N=1;N<=F;N++){let Z=b_(e[N],!1);Z.offset=ZB((t+Z.offset*r)/u),o.push(Z)}r=u,t=0,s="",e=o}return N2(this.element,e,this.preStyleProps,this.postStyleProps,r,t,s,!0)}}function ZB(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class z2{}class yY extends z2{normalizePropertyName(e,t){return L2(e)}normalizeStyleValue(e,t,r,s){let o="";const u=r.toString().trim();if(bY[t]&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const m=r.match(/^[+-]?[\d\.]+([a-z]*)$/);m&&0==m[1].length&&s.push(function fZ(n,e){return new Wi(3005,xo)}())}return u+o}}const bY=(()=>function xY(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function YB(n,e,t,r,s,o,u,m,w,T,F,N,Z){return{type:0,element:n,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:o,toState:r,toStyles:u,timelines:m,queriedElements:w,preStyleProps:T,postStyleProps:F,totalTime:N,errors:Z}}const V2={};class XB{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,s){return function wY(n,e,t,r,s){return n.some(o=>o(e,t,r,s))}(this.ast.matchers,e,t,r,s)}buildStyles(e,t,r){const s=this._stateStyles["*"],o=this._stateStyles[e],u=s?s.buildStyles(t,r):{};return o?o.buildStyles(t,r):u}build(e,t,r,s,o,u,m,w,T,F){const N=[],Z=this.ast.options&&this.ast.options.params||V2,le=this.buildStyles(r,m&&m.params||V2,N),_e=w&&w.params||V2,xe=this.buildStyles(s,_e,N),fe=new Set,ue=new Map,Ne=new Map,Re="void"===s,Ye={params:Object.assign(Object.assign({},Z),_e)},st=F?[]:B2(e,t,this.ast.animation,o,u,le,xe,Ye,T,N);let ht=0;if(st.forEach(hn=>{ht=Math.max(hn.duration+hn.delay,ht)}),N.length)return YB(t,this._triggerName,r,s,Re,le,xe,[],[],ue,Ne,ht,N);st.forEach(hn=>{const Kt=hn.element,We=Lh(ue,Kt,{});hn.preStyleProps.forEach(Ht=>We[Ht]=!0);const It=Lh(Ne,Kt,{});hn.postStyleProps.forEach(Ht=>It[Ht]=!0),Kt!==t&&fe.add(Kt)});const Et=IE(fe.values());return YB(t,this._triggerName,r,s,Re,le,xe,st,Et,ue,Ne,ht)}}class MY{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},s=m0(this.defaultParams);return Object.keys(e).forEach(o=>{const u=e[o];null!=u&&(s[o]=u)}),this.styles.styles.forEach(o=>{if("string"!=typeof o){const u=o;Object.keys(u).forEach(m=>{let w=u[m];w.length>1&&(w=AE(w,s,t));const T=this.normalizer.normalizePropertyName(m,t);w=this.normalizer.normalizeStyleValue(m,T,w,t),r[T]=w})}}),r}}class SY{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(s=>{this.states[s.name]=new MY(s.style,s.options&&s.options.params||{},r)}),JB(this.states,"true","1"),JB(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new XB(e,s,this.states))}),this.fallbackTransition=function EY(n,e,t){return new XB(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,m)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,s){return this.transitionFactories.find(u=>u.match(e,t,r,s))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function JB(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const TY=new NE;class DY{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],o=F2(this._driver,t,r,[]);if(r.length)throw function RZ(n){return new Wi(3503,xo)}();this._animations[e]=o}_buildPlayer(e,t,r){const s=e.element,o=DB(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(s,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const s=[],o=this._animations[e];let u;const m=new Map;if(o?(u=B2(this._driver,t,o,I2,SE,{},{},r,TY,s),u.forEach(F=>{const N=Lh(m,F.element,{});F.postStyleProps.forEach(Z=>N[Z]=null)})):(s.push(function kZ(){return new Wi(3300,xo)}()),u=[]),s.length)throw function PZ(n){return new Wi(3504,xo)}();m.forEach((F,N)=>{Object.keys(F).forEach(Z=>{F[Z]=this._driver.computeStyle(N,Z,zm)})});const T=y_(u.map(F=>{const N=m.get(F.element);return this._buildPlayer(F,{},N)}));return this._playersById[e]=T,T.onDestroy(()=>this.destroy(e)),this.players.push(T),T}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function LZ(n){return new Wi(3301,xo)}();return t}listen(e,t,r,s){const o=E2(t,"","","");return C2(this._getPlayer(e),r,o,s),()=>{}}command(e,t,r,s){if("register"==r)return void this.register(e,s[0]);if("create"==r)return void this.create(e,t,s[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e)}}}const KB="ng-animate-queued",U2="ng-animate-disabled",PY=[],QB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},LY={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},vd="__ng_removed";class G2{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function BY(n){return null!=n?n:null}(r?e.value:e),r){const o=m0(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(s=>{null==r[s]&&(r[s]=t[s])})}}}const j1="void",W2=new G2(j1);class FY{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,yd(t,this._hostClassName)}listen(e,t,r,s){if(!this._triggers.hasOwnProperty(t))throw function FZ(n,e){return new Wi(3302,xo)}();if(null==r||0==r.length)throw function OZ(n){return new Wi(3303,xo)}();if(!function HY(n){return"start"==n||"done"==n}(r))throw function NZ(n,e){return new Wi(3400,xo)}();const o=Lh(this._elementListeners,e,[]),u={name:t,phase:r,callback:s};o.push(u);const m=Lh(this._engine.statesByElement,e,{});return m.hasOwnProperty(t)||(yd(e,EE),yd(e,EE+"-"+t),m[t]=W2),()=>{this._engine.afterFlush(()=>{const w=o.indexOf(u);w>=0&&o.splice(w,1),this._triggers[t]||delete m[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function BZ(n){return new Wi(3401,xo)}();return t}trigger(e,t,r,s=!0){const o=this._getTrigger(t),u=new q2(this.id,t,e);let m=this._engine.statesByElement.get(e);m||(yd(e,EE),yd(e,EE+"-"+t),this._engine.statesByElement.set(e,m={}));let w=m[t];const T=new G2(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&w&&T.absorbOptions(w.options),m[t]=T,w||(w=W2),T.value!==j1&&w.value===T.value){if(!function UY(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let s=0;s<t.length;s++){const o=t[s];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(w.params,T.params)){const _e=[],xe=o.matchStyles(w.value,w.params,_e),fe=o.matchStyles(T.value,T.params,_e);_e.length?this._engine.reportError(_e):this._engine.afterFlush(()=>{ry(e,xe),vp(e,fe)})}return}const Z=Lh(this._engine.playersByElement,e,[]);Z.forEach(_e=>{_e.namespaceId==this.id&&_e.triggerName==t&&_e.queued&&_e.destroy()});let Q=o.matchTransition(w.value,T.value,e,T.params),le=!1;if(!Q){if(!s)return;Q=o.fallbackTransition,le=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:Q,fromState:w,toState:T,player:u,isFallbackTransition:le}),le||(yd(e,KB),u.onStart(()=>{g0(e,KB)})),u.onDone(()=>{let _e=this.players.indexOf(u);_e>=0&&this.players.splice(_e,1);const xe=this._engine.playersByElement.get(e);if(xe){let fe=xe.indexOf(u);fe>=0&&xe.splice(fe,1)}}),this.players.push(u),Z.push(u),u}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,TE,!0);r.forEach(s=>{if(s[vd])return;const o=this._engine.fetchNamespacesByElement(s);o.size?o.forEach(u=>u.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,r,s){const o=this._engine.statesByElement.get(e),u=new Map;if(o){const m=[];if(Object.keys(o).forEach(w=>{if(u.set(w,o[w].value),this._triggers[w]){const T=this.trigger(e,w,j1,s);T&&m.push(T)}}),m.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&y_(m).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const s=new Set;t.forEach(o=>{const u=o.name;if(s.has(u))return;s.add(u);const w=this._triggers[u].fallbackTransition,T=r[u]||W2,F=new G2(j1),N=new q2(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:w,fromState:T,toState:F,player:N,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)s=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[vd];(!o||o===QB)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){yd(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const s=r.player;if(s.destroyed)return;const o=r.element,u=this._elementListeners.get(o);u&&u.forEach(m=>{if(m.name==r.triggerName){const w=E2(o,r.triggerName,r.fromState.value,r.toState.value);w._data=e,C2(r.player,m.phase,w,m.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(r)}),this._queue=[],t.sort((r,s)=>{const o=r.transition.ast.depCount,u=s.transition.ast.depCount;return 0==o||0==u?o-u:this._engine.driver.containsElement(r.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class OY{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,o)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new FY(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,s=this.namespacesByHostElement,o=r.length-1;if(o>=0){let u=!1;if(void 0!==this.driver.getParentElement){let m=this.driver.getParentElement(t);for(;m;){const w=s.get(m);if(w){const T=r.indexOf(w);r.splice(T+1,0,e),u=!0;break}m=this.driver.getParentElement(m)}}else for(let m=o;m>=0;m--)if(this.driver.containsElement(r[m].hostElement,t)){r.splice(m+1,0,e),u=!0;break}u||r.unshift(e)}else r.push(e);return s.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let s=this._namespaceLookup[e];s&&s.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const s=this._namespaceList.indexOf(r);s>=0&&this._namespaceList.splice(s,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const s=Object.keys(r);for(let o=0;o<s.length;o++){const u=r[s[o]].namespaceId;if(u){const m=this._fetchNamespace(u);m&&t.add(m)}}}return t}trigger(e,t,r,s){if(zE(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,s),!0}return!1}insertNode(e,t,r,s){if(!zE(t))return;const o=t[vd];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),yd(e,U2)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),g0(e,U2))}removeNode(e,t,r,s){if(zE(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,s):this.markElementAsRemoved(e,t,!1,s),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,s)}}else this._onRemovalComplete(t,s)}markElementAsRemoved(e,t,r,s,o){this.collectedLeaveElements.push(t),t[vd]={namespaceId:e,setForRemoval:s,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,s,o){return zE(t)?this._fetchNamespace(e).listen(t,r,s,o):()=>{}}_buildInstruction(e,t,r,s,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,s,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,TE,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,R2,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return y_(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[vd];if(r&&r.setForRemoval){if(e[vd]=QB,r.namespaceId){this.destroyInnerAnimations(e);const s=this._fetchNamespace(r.namespaceId);s&&s.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(U2))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(s=>{this.markElementAsDisabled(s,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,s)=>this._balanceNamespaceList(r,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)yd(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let s=0;s<r.length;s++)r[s]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?y_(t).onDone(()=>{r.forEach(s=>s())}):r.forEach(s=>s())}}reportError(e){throw function HZ(n){return new Wi(3402,xo)}()}_flushAnimations(e,t){const r=new NE,s=[],o=new Map,u=[],m=new Map,w=new Map,T=new Map,F=new Set;this.disabledNodes.forEach(et=>{F.add(et);const bt=this.driver.query(et,".ng-animate-queued",!0);for(let Gt=0;Gt<bt.length;Gt++)F.add(bt[Gt])});const N=this.bodyNode,Z=Array.from(this.statesByElement.keys()),Q=tH(Z,this.collectedEnterElements),le=new Map;let _e=0;Q.forEach((et,bt)=>{const Gt=I2+_e++;le.set(bt,Gt),et.forEach(pn=>yd(pn,Gt))});const xe=[],fe=new Set,ue=new Set;for(let et=0;et<this.collectedLeaveElements.length;et++){const bt=this.collectedLeaveElements[et],Gt=bt[vd];Gt&&Gt.setForRemoval&&(xe.push(bt),fe.add(bt),Gt.hasAnimation?this.driver.query(bt,".ng-star-inserted",!0).forEach(pn=>fe.add(pn)):ue.add(bt))}const Ne=new Map,Re=tH(Z,Array.from(fe));Re.forEach((et,bt)=>{const Gt=SE+_e++;Ne.set(bt,Gt),et.forEach(pn=>yd(pn,Gt))}),e.push(()=>{Q.forEach((et,bt)=>{const Gt=le.get(bt);et.forEach(pn=>g0(pn,Gt))}),Re.forEach((et,bt)=>{const Gt=Ne.get(bt);et.forEach(pn=>g0(pn,Gt))}),xe.forEach(et=>{this.processLeaveNode(et)})});const Ye=[],st=[];for(let et=this._namespaceList.length-1;et>=0;et--)this._namespaceList[et].drainQueuedTransitions(t).forEach(Gt=>{const pn=Gt.player,Qt=Gt.element;if(Ye.push(pn),this.collectedEnterElements.length){const yi=Qt[vd];if(yi&&yi.setForMove){if(yi.previousTriggersValues&&yi.previousTriggersValues.has(Gt.triggerName)){const ur=yi.previousTriggersValues.get(Gt.triggerName),qi=this.statesByElement.get(Gt.element);qi&&qi[Gt.triggerName]&&(qi[Gt.triggerName].value=ur)}return void pn.destroy()}}const mn=!N||!this.driver.containsElement(N,Qt),zn=Ne.get(Qt),Ni=le.get(Qt),gi=this._buildInstruction(Gt,r,Ni,zn,mn);if(gi.errors&&gi.errors.length)return void st.push(gi);if(mn)return pn.onStart(()=>ry(Qt,gi.fromStyles)),pn.onDestroy(()=>vp(Qt,gi.toStyles)),void s.push(pn);if(Gt.isFallbackTransition)return pn.onStart(()=>ry(Qt,gi.fromStyles)),pn.onDestroy(()=>vp(Qt,gi.toStyles)),void s.push(pn);const Tn=[];gi.timelines.forEach(yi=>{yi.stretchStartingKeyframe=!0,this.disabledNodes.has(yi.element)||Tn.push(yi)}),gi.timelines=Tn,r.append(Qt,gi.timelines),u.push({instruction:gi,player:pn,element:Qt}),gi.queriedElements.forEach(yi=>Lh(m,yi,[]).push(pn)),gi.preStyleProps.forEach((yi,ur)=>{const qi=Object.keys(yi);if(qi.length){let rs=w.get(ur);rs||w.set(ur,rs=new Set),qi.forEach(ss=>rs.add(ss))}}),gi.postStyleProps.forEach((yi,ur)=>{const qi=Object.keys(yi);let rs=T.get(ur);rs||T.set(ur,rs=new Set),qi.forEach(ss=>rs.add(ss))})});if(st.length){const et=[];st.forEach(bt=>{et.push(function zZ(n,e){return new Wi(3505,xo)}())}),Ye.forEach(bt=>bt.destroy()),this.reportError(et)}const ht=new Map,Et=new Map;u.forEach(et=>{const bt=et.element;r.has(bt)&&(Et.set(bt,bt),this._beforeAnimationBuild(et.player.namespaceId,et.instruction,ht))}),s.forEach(et=>{const bt=et.element;this._getPreviousPlayers(bt,!1,et.namespaceId,et.triggerName,null).forEach(pn=>{Lh(ht,bt,[]).push(pn),pn.destroy()})});const hn=xe.filter(et=>iH(et,w,T)),Kt=new Map;eH(Kt,this.driver,ue,T,zm).forEach(et=>{iH(et,w,T)&&hn.push(et)});const It=new Map;Q.forEach((et,bt)=>{eH(It,this.driver,new Set(et),w,"!")}),hn.forEach(et=>{const bt=Kt.get(et),Gt=It.get(et);Kt.set(et,Object.assign(Object.assign({},bt),Gt))});const Ht=[],it=[],kt={};u.forEach(et=>{const{element:bt,player:Gt,instruction:pn}=et;if(r.has(bt)){if(F.has(bt))return Gt.onDestroy(()=>vp(bt,pn.toStyles)),Gt.disabled=!0,Gt.overrideTotalTime(pn.totalTime),void s.push(Gt);let Qt=kt;if(Et.size>1){let zn=bt;const Ni=[];for(;zn=zn.parentNode;){const gi=Et.get(zn);if(gi){Qt=gi;break}Ni.push(zn)}Ni.forEach(gi=>Et.set(gi,Qt))}const mn=this._buildAnimation(Gt.namespaceId,pn,ht,o,It,Kt);if(Gt.setRealPlayer(mn),Qt===kt)Ht.push(Gt);else{const zn=this.playersByElement.get(Qt);zn&&zn.length&&(Gt.parentPlayer=y_(zn)),s.push(Gt)}}else ry(bt,pn.fromStyles),Gt.onDestroy(()=>vp(bt,pn.toStyles)),it.push(Gt),F.has(bt)&&s.push(Gt)}),it.forEach(et=>{const bt=o.get(et.element);if(bt&&bt.length){const Gt=y_(bt);et.setRealPlayer(Gt)}}),s.forEach(et=>{et.parentPlayer?et.syncPlayerEvents(et.parentPlayer):et.destroy()});for(let et=0;et<xe.length;et++){const bt=xe[et],Gt=bt[vd];if(g0(bt,SE),Gt&&Gt.hasAnimation)continue;let pn=[];if(m.size){let mn=m.get(bt);mn&&mn.length&&pn.push(...mn);let zn=this.driver.query(bt,R2,!0);for(let Ni=0;Ni<zn.length;Ni++){let gi=m.get(zn[Ni]);gi&&gi.length&&pn.push(...gi)}}const Qt=pn.filter(mn=>!mn.destroyed);Qt.length?zY(this,bt,Qt):this.processLeaveNode(bt)}return xe.length=0,Ht.forEach(et=>{this.players.push(et),et.onDone(()=>{et.destroy();const bt=this.players.indexOf(et);this.players.splice(bt,1)}),et.play()}),Ht}elementContainsData(e,t){let r=!1;const s=t[vd];return s&&s.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,s,o){let u=[];if(t){const m=this.playersByQueriedElement.get(e);m&&(u=m)}else{const m=this.playersByElement.get(e);if(m){const w=!o||o==j1;m.forEach(T=>{T.queued||!w&&T.triggerName!=s||u.push(T)})}}return(r||s)&&(u=u.filter(m=>!(r&&r!=m.namespaceId||s&&s!=m.triggerName))),u}_beforeAnimationBuild(e,t,r){const o=t.element,u=t.isRemovalTransition?void 0:e,m=t.isRemovalTransition?void 0:t.triggerName;for(const w of t.timelines){const T=w.element,F=T!==o,N=Lh(r,T,[]);this._getPreviousPlayers(T,F,u,m,t.toState).forEach(Q=>{const le=Q.getRealPlayer();le.beforeDestroy&&le.beforeDestroy(),Q.destroy(),N.push(Q)})}ry(o,t.fromStyles)}_buildAnimation(e,t,r,s,o,u){const m=t.triggerName,w=t.element,T=[],F=new Set,N=new Set,Z=t.timelines.map(le=>{const _e=le.element;F.add(_e);const xe=_e[vd];if(xe&&xe.removedBeforeQueried)return new W1(le.duration,le.delay);const fe=_e!==w,ue=function VY(n){const e=[];return nH(n,e),e}((r.get(_e)||PY).map(ht=>ht.getRealPlayer())).filter(ht=>!!ht.element&&ht.element===_e),Ne=o.get(_e),Re=u.get(_e),Ye=DB(0,this._normalizer,0,le.keyframes,Ne,Re),st=this._buildPlayer(le,Ye,ue);if(le.subTimeline&&s&&N.add(_e),fe){const ht=new q2(e,m,_e);ht.setRealPlayer(st),T.push(ht)}return st});T.forEach(le=>{Lh(this.playersByQueriedElement,le.element,[]).push(le),le.onDone(()=>function NY(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const s=r.indexOf(t);r.splice(s,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const s=r.indexOf(t);r.splice(s,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,le.element,le))}),F.forEach(le=>yd(le,BB));const Q=y_(Z);return Q.onDestroy(()=>{F.forEach(le=>g0(le,BB)),vp(w,t.toStyles)}),N.forEach(le=>{Lh(s,le,[]).push(Q)}),Q}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new W1(e.duration,e.delay)}}class q2{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new W1,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>C2(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Lh(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function zE(n){return n&&1===n.nodeType}function $B(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function eH(n,e,t,r,s){const o=[];t.forEach(w=>o.push($B(w)));const u=[];r.forEach((w,T)=>{const F={};w.forEach(N=>{const Z=F[N]=e.computeStyle(T,N,s);(!Z||0==Z.length)&&(T[vd]=LY,u.push(T))}),n.set(T,F)});let m=0;return t.forEach(w=>$B(w,o[m++])),u}function tH(n,e){const t=new Map;if(n.forEach(m=>t.set(m,[])),0==e.length)return t;const s=new Set(e),o=new Map;function u(m){if(!m)return 1;let w=o.get(m);if(w)return w;const T=m.parentNode;return w=t.has(T)?T:s.has(T)?1:u(T),o.set(m,w),w}return e.forEach(m=>{const w=u(m);1!==w&&t.get(w).push(m)}),t}function yd(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function g0(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function zY(n,e,t){y_(t).onDone(()=>n.processLeaveNode(e))}function nH(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof EB?nH(r.players,e):e.push(r)}}function iH(n,e,t){const r=t.get(n);if(!r)return!1;let s=e.get(n);return s?r.forEach(o=>s.add(o)):e.set(n,r),t.delete(n),!0}class VE{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(s,o)=>{},this._transitionEngine=new OY(e,t,r),this._timelineEngine=new DY(e,t,r),this._transitionEngine.onRemovalComplete=(s,o)=>this.onRemovalComplete(s,o)}registerTrigger(e,t,r,s,o){const u=e+"-"+s;let m=this._triggerCache[u];if(!m){const w=[],F=F2(this._driver,o,w,[]);if(w.length)throw function AZ(n,e){return new Wi(3404,xo)}();m=function CY(n,e,t){return new SY(n,e,t)}(s,F,this._normalizer),this._triggerCache[u]=m}this._transitionEngine.registerTrigger(t,s,m)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,s){this._transitionEngine.insertNode(e,t,r,s)}onRemove(e,t,r,s){this._transitionEngine.removeNode(e,t,s||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,s){if("@"==r.charAt(0)){const[o,u]=AB(r);this._timelineEngine.command(o,t,u,s)}else this._transitionEngine.trigger(e,t,r,s)}listen(e,t,r,s,o){if("@"==r.charAt(0)){const[u,m]=AB(r);return this._timelineEngine.listen(u,t,m,o)}return this._transitionEngine.listen(e,t,r,s,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let WY=(()=>{class n{constructor(t,r,s){this._element=t,this._startStyles=r,this._endStyles=s,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o={}),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&vp(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(vp(this._element,this._initialStyles),this._endStyles&&(vp(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(ry(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ry(this._element,this._endStyles),this._endStyles=null),vp(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function j2(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const s=t[r];qY(s)&&(e=e||{},e[s]=n[s])}return e}function qY(n){return"display"===n||"position"===n}class rH{constructor(e,t,r,s){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:GB(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class jY{validateStyleProperty(e){return PB(e)}matchesElement(e,t){return!1}containsElement(e,t){return LB(e,t)}getParentElement(e){return D2(e)}query(e,t,r){return FB(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,s,o,u=[]){const w={duration:r,delay:s,fill:0==s?"both":"forwards"};o&&(w.easing=o);const T={},F=u.filter(Z=>Z instanceof rH);(function JZ(n,e){return 0===n||0===e})(r,s)&&F.forEach(Z=>{let Q=Z.currentSnapshot;Object.keys(Q).forEach(le=>T[le]=Q[le])}),t=function KZ(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let o=e[0],u=[];if(r.forEach(m=>{o.hasOwnProperty(m)||u.push(m),o[m]=t[m]}),u.length)for(var s=1;s<e.length;s++){let m=e[s];u.forEach(function(w){m[w]=GB(n,w)})}}return e}(e,t=t.map(Z=>b_(Z,!1)),T);const N=function GY(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=j2(e[0]),e.length>1&&(r=j2(e[e.length-1]))):e&&(t=j2(e)),t||r?new WY(n,t,r):null}(e,t);return new rH(e,t,w,N)}}let ZY=(()=>{class n extends bB{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Be.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(t)?wB(t):t;return sH(this._renderer,null,r,"register",[s]),new YY(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(Sn(y1),Sn(Gs))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})();class YY extends class aZ{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new XY(this._id,e,t||{},this._renderer)}}class XY{constructor(e,t,r,s){this.id=e,this.element=t,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return sH(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function sH(n,e,t,r,s){return n.setProperty(e,`@@${t}:${r}`,s)}const oH="@.disabled";let JY=(()=>{class n{constructor(t,r,s){this.delegate=t,this.engine=r,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,u)=>{const m=null==u?void 0:u.parentNode(o);m&&u.removeChild(m,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let F=this._rendererCache.get(o);return F||(F=new aH("",o,this.engine),this._rendererCache.set(o,F)),F}const u=r.id,m=r.id+"-"+this._currentId;this._currentId++,this.engine.register(m,t);const w=F=>{Array.isArray(F)?F.forEach(w):this.engine.registerTrigger(u,m,t,F.name,F)};return r.data.animation.forEach(w),new KY(this,m,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,s){t>=0&&t<this._microtaskId?this._zone.run(()=>r(s)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[u,m]=o;u(m)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(Sn(y1),Sn(VE),Sn(mo))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})();class aH{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,s=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,s){this.delegate.setAttribute(e,t,r,s)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,s){this.delegate.setStyle(e,t,r,s)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==oH?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class KY extends aH{constructor(e,t,r,s){super(t,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==oH?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const s=function QY(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.substr(1),u="";return"@"!=o.charAt(0)&&([o,u]=function $Y(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(o)),this.engine.listen(this.namespaceId,s,o,u,m=>{this.factory.scheduleListenerCallback(m._data||-1,r,m)})}return this.delegate.listen(e,t,r)}}let eX=(()=>{class n extends VE{constructor(t,r,s){super(t.body,r,s)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(Sn(Gs),Sn(A2),Sn(z2))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})();const oy=new wi("AnimationModuleType"),lH=[{provide:bB,useClass:ZY},{provide:z2,useFactory:function tX(){return new yY}},{provide:VE,useClass:eX},{provide:y1,useFactory:function nX(n,e,t){return new JY(n,e,t)},deps:[JS,VE,mo]}],cH=[{provide:A2,useFactory:()=>new jY},{provide:oy,useValue:"BrowserAnimations"},...lH],iX=[{provide:A2,useClass:OB},{provide:oy,useValue:"NoopAnimations"},...lH];let rX=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?iX:cH}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({providers:cH,imports:[x3]}),n})();function _0(n,e){return y(e)?ln(n,e,1):ln(n,1)}class uH{}class hH{}class Vm{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),o=s.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(s,o),this.headers.has(o)?this.headers.get(o).push(u):this.headers.set(o,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const s=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(s,r),this.maybeSetNormalizedName(t,s))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Vm?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Vm;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Vm?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const o=e.value;if(o){let u=this.headers.get(t);if(!u)return;u=u.filter(m=>-1===o.indexOf(m)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class sX{encodeKey(e){return dH(e)}encodeValue(e){return dH(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const aX=/%(\d[a-f0-9])/gi,lX={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function dH(n){return encodeURIComponent(n).replace(aX,(e,t)=>{var r;return null!==(r=lX[t])&&void 0!==r?r:e})}function fH(n){return`${n}`}class x_{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new sX,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function oX(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const o=s.indexOf("="),[u,m]=-1==o?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,o)),e.decodeValue(s.slice(o+1))],w=t.get(u)||[];w.push(m),t.set(u,w)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new x_({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(fH(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(fH(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class cX{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function pH(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function mH(n){return"undefined"!=typeof Blob&&n instanceof Blob}function gH(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Z1{constructor(e,t,r,s){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function uX(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,o=s):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Vm),this.context||(this.context=new cX),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+u}}else this.params=new x_,this.urlWithParams=t}serializeBody(){return null===this.body?null:pH(this.body)||mH(this.body)||gH(this.body)||function hX(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof x_?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||gH(this.body)?null:mH(this.body)?this.body.type||null:pH(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof x_?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,s=e.url||this.url,o=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,m=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,w=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let T=e.headers||this.headers,F=e.params||this.params;const N=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(T=Object.keys(e.setHeaders).reduce((Z,Q)=>Z.set(Q,e.setHeaders[Q]),T)),e.setParams&&(F=Object.keys(e.setParams).reduce((Z,Q)=>Z.set(Q,e.setParams[Q]),F)),new Z1(r,s,u,{params:F,headers:T,context:N,reportProgress:w,responseType:o,withCredentials:m})}}var hc=(()=>((hc=hc||{})[hc.Sent=0]="Sent",hc[hc.UploadProgress=1]="UploadProgress",hc[hc.ResponseHeader=2]="ResponseHeader",hc[hc.DownloadProgress=3]="DownloadProgress",hc[hc.Response=4]="Response",hc[hc.User=5]="User",hc))();class Z2{constructor(e,t=200,r="OK"){this.headers=e.headers||new Vm,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Y2 extends Z2{constructor(e={}){super(e),this.type=hc.ResponseHeader}clone(e={}){return new Y2({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class GE extends Z2{constructor(e={}){super(e),this.type=hc.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new GE({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class _H extends Z2{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function X2(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Y1=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let o;if(t instanceof Z1)o=t;else{let w,T;w=s.headers instanceof Vm?s.headers:new Vm(s.headers),s.params&&(T=s.params instanceof x_?s.params:new x_({fromObject:s.params})),o=new Z1(t,r,void 0!==s.body?s.body:null,{headers:w,context:s.context,params:T,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const u=is(o).pipe(_0(w=>this.handler.handle(w)));if(t instanceof Z1||"events"===s.observe)return u;const m=u.pipe(Fc(w=>w instanceof GE));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return m.pipe(ii(w=>{if(null!==w.body&&!(w.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return w.body}));case"blob":return m.pipe(ii(w=>{if(null!==w.body&&!(w.body instanceof Blob))throw new Error("Response is not a Blob.");return w.body}));case"text":return m.pipe(ii(w=>{if(null!==w.body&&"string"!=typeof w.body)throw new Error("Response is not a string.");return w.body}));default:return m.pipe(ii(w=>w.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new x_).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,X2(s,r))}post(t,r,s={}){return this.request("POST",t,X2(s,r))}put(t,r,s={}){return this.request("PUT",t,X2(s,r))}}return n.\u0275fac=function(t){return new(t||n)(Sn(uH))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})();class vH{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const yH=new wi("HTTP_INTERCEPTORS");let dX=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})();const fX=/^\)\]\}',?\n/;let bH=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new xn(r=>{const s=this.xhrFactory.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((Q,le)=>s.setRequestHeader(Q,le.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Q=t.detectContentTypeHeader();null!==Q&&s.setRequestHeader("Content-Type",Q)}if(t.responseType){const Q=t.responseType.toLowerCase();s.responseType="json"!==Q?Q:"text"}const o=t.serializeBody();let u=null;const m=()=>{if(null!==u)return u;const Q=s.statusText||"OK",le=new Vm(s.getAllResponseHeaders()),_e=function pX(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return u=new Y2({headers:le,status:s.status,statusText:Q,url:_e}),u},w=()=>{let{headers:Q,status:le,statusText:_e,url:xe}=m(),fe=null;204!==le&&(fe=void 0===s.response?s.responseText:s.response),0===le&&(le=fe?200:0);let ue=le>=200&&le<300;if("json"===t.responseType&&"string"==typeof fe){const Ne=fe;fe=fe.replace(fX,"");try{fe=""!==fe?JSON.parse(fe):null}catch(Re){fe=Ne,ue&&(ue=!1,fe={error:Re,text:fe})}}ue?(r.next(new GE({body:fe,headers:Q,status:le,statusText:_e,url:xe||void 0})),r.complete()):r.error(new _H({error:fe,headers:Q,status:le,statusText:_e,url:xe||void 0}))},T=Q=>{const{url:le}=m(),_e=new _H({error:Q,status:s.status||0,statusText:s.statusText||"Unknown Error",url:le||void 0});r.error(_e)};let F=!1;const N=Q=>{F||(r.next(m()),F=!0);let le={type:hc.DownloadProgress,loaded:Q.loaded};Q.lengthComputable&&(le.total=Q.total),"text"===t.responseType&&!!s.responseText&&(le.partialText=s.responseText),r.next(le)},Z=Q=>{let le={type:hc.UploadProgress,loaded:Q.loaded};Q.lengthComputable&&(le.total=Q.total),r.next(le)};return s.addEventListener("load",w),s.addEventListener("error",T),s.addEventListener("timeout",T),s.addEventListener("abort",T),t.reportProgress&&(s.addEventListener("progress",N),null!==o&&s.upload&&s.upload.addEventListener("progress",Z)),s.send(o),r.next({type:hc.Sent}),()=>{s.removeEventListener("error",T),s.removeEventListener("abort",T),s.removeEventListener("load",w),s.removeEventListener("timeout",T),t.reportProgress&&(s.removeEventListener("progress",N),null!==o&&s.upload&&s.upload.removeEventListener("progress",Z)),s.readyState!==s.DONE&&s.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(Sn(u3))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})();const J2=new wi("XSRF_COOKIE_NAME"),K2=new wi("XSRF_HEADER_NAME");class xH{}let mX=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=e3(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(Sn(Gs),Sn(S1),Sn(J2))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})(),Q2=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const s=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||s.startsWith("http://")||s.startsWith("https://"))return r.handle(t);const o=this.tokenService.getToken();return null!==o&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,o)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Sn(xH),Sn(K2))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})(),gX=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(yH,[]);this.chain=r.reduceRight((s,o)=>new vH(s,o),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Sn(hH),Sn(Aa))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})(),_X=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Q2,useClass:dX}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:J2,useValue:t.cookieName}:[],t.headerName?{provide:K2,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({providers:[Q2,{provide:yH,useExisting:Q2,multi:!0},{provide:xH,useClass:mX},{provide:J2,useValue:"XSRF-TOKEN"},{provide:K2,useValue:"X-XSRF-TOKEN"}]}),n})(),vX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({providers:[Y1,{provide:uH,useClass:gX},bH,{provide:hH,useExisting:bH}],imports:[[_X.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();class $2{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class ek extends $2{constructor(e,t,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=s}}class WE extends $2{constructor(e,t,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class yX extends $2{constructor(e){super(),this.element=e instanceof Uo?e.nativeElement:e}}class tk{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof ek?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof WE?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof yX?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class bX extends tk{constructor(e,t,r,s,o){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=s,this.attachDomPortal=u=>{const m=u.element,w=this._document.createComment("dom-portal");m.parentNode.insertBefore(w,m),this.outletElement.appendChild(m),this._attachedPortal=u,super.setDisposeFn(()=>{w.parentNode&&w.parentNode.replaceChild(m,w)})},this._document=o}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let s;return e.viewContainerRef?(s=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>s.destroy())):(s=r.create(e.injector||this._defaultInjector||Aa.NULL),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(s.hostView),s.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(s)),this._attachedPortal=e,s}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context);return r.rootNodes.forEach(s=>this.outletElement.appendChild(s)),r.detectChanges(),this.setDisposeFn(()=>{let s=t.indexOf(r);-1!==s&&t.remove(s)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let nk=(()=>{class n extends tk{constructor(t,r,s){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new Go,this.attachDomPortal=o=>{const u=o.element,m=this._document.createComment("dom-portal");o.setAttachedHost(this),u.parentNode.insertBefore(m,u),this._getRootNode().appendChild(u),this._attachedPortal=o,super.setDisposeFn(()=>{m.parentNode&&m.parentNode.replaceChild(u,m)})},this._document=s}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),u=r.createComponent(o,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(u.hostView.rootNodes[0]),super.setDisposeFn(()=>u.destroy()),this._attachedPortal=t,this._attachedRef=u,this.attached.emit(u),u}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(Bt(Xv),Bt(ah),Bt(Gs))},n.\u0275dir=_i({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[hs]}),n})(),ik=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({}),n})();const wH=Hj();class xX{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=uc(-this._previousScrollPosition.left),e.style.top=uc(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,s=this._document.body.style,o=r.scrollBehavior||"",u=s.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),wH&&(r.scrollBehavior=s.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),wH&&(r.scrollBehavior=o,s.scrollBehavior=u)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class wX{constructor(e,t,r,s){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=s,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class MH{enable(){}disable(){}attach(){}}function rk(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function CH(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class MX{constructor(e,t,r,s){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=s,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:s}=this._viewportRuler.getViewportSize();rk(t,[{width:r,height:s,bottom:s,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let CX=(()=>{class n{constructor(t,r,s,o){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new MH,this.close=u=>new wX(this._scrollDispatcher,this._ngZone,this._viewportRuler,u),this.block=()=>new xX(this._viewportRuler,this._document),this.reposition=u=>new MX(this._scrollDispatcher,this._viewportRuler,this._ngZone,u),this._document=o}}return n.\u0275fac=function(t){return new(t||n)(Sn(Y7),Sn(vE),Sn(mo),Sn(Gs))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class sk{constructor(e){if(this.scrollStrategy=new MH,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class SX{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class EX{constructor(e,t,r,s,o,u,m,w,T){this._portalOutlet=e,this._host=t,this._pane=r,this._config=s,this._ngZone=o,this._keyboardDispatcher=u,this._document=m,this._location=w,this._outsideClickDispatcher=T,this._backdropElement=null,this._backdropClick=new en,this._attachments=new en,this._detachments=new en,this._locationChanges=p.EMPTY,this._backdropClickHandler=F=>this._backdropClick.next(F),this._backdropTransitionendHandler=F=>{this._disposeBackdrop(F.target)},this._keydownEvents=new en,this._outsidePointerEvents=new en,s.scrollStrategy&&(this._scrollStrategy=s.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=s.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(uh(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=uc(this._config.width),e.height=uc(this._config.height),e.minWidth=uc(this._config.minWidth),e.minHeight=uc(this._config.minHeight),e.maxWidth=uc(this._config.maxWidth),e.maxHeight=uc(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,r){const s=ON(t||[]).filter(o=>!!o);s.length&&(r?e.classList.add(...s):e.classList.remove(...s))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(ff(Ao(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let ok=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||a2()){const s=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}const r=this._document.createElement("div");r.classList.add(t),a2()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(Sn(Gs),Sn(gd))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const SH="cdk-overlay-connected-position-bounding-box",TX=/([A-Za-z%]+)$/;class DX{constructor(e,t,r,s,o){this._viewportRuler=t,this._document=r,this._platform=s,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new en,this._resizeSubscription=p.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(SH),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,s=this._containerRect,o=[];let u;for(let m of this._preferredPositions){let w=this._getOriginPoint(e,s,m),T=this._getOverlayPoint(w,t,m),F=this._getOverlayFit(T,t,r,m);if(F.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(m,w);this._canFitWithFlexibleDimensions(F,T,r)?o.push({position:m,origin:w,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(w,m)}):(!u||u.overlayFit.visibleArea<F.visibleArea)&&(u={overlayFit:F,overlayPoint:T,originPoint:w,position:m,overlayRect:t})}if(o.length){let m=null,w=-1;for(const T of o){const F=T.boundingBoxRect.width*T.boundingBoxRect.height*(T.position.weight||1);F>w&&(w=F,m=T)}return this._isPushed=!1,void this._applyPosition(m.position,m.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(u.position,u.originPoint);this._applyPosition(u.position,u.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ay(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(SH),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let s,o;if("center"==r.originX)s=e.left+e.width/2;else{const u=this._isRtl()?e.right:e.left,m=this._isRtl()?e.left:e.right;s="start"==r.originX?u:m}return t.left<0&&(s-=t.left),o="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(o-=t.top),{x:s,y:o}}_getOverlayPoint(e,t,r){let s,o;return s="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+s,y:e.y+o}}_getOverlayFit(e,t,r,s){const o=TH(t);let{x:u,y:m}=e,w=this._getOffset(s,"x"),T=this._getOffset(s,"y");w&&(u+=w),T&&(m+=T);let Z=0-m,Q=m+o.height-r.height,le=this._subtractOverflows(o.width,0-u,u+o.width-r.width),_e=this._subtractOverflows(o.height,Z,Q),xe=le*_e;return{visibleArea:xe,isCompletelyWithinViewport:o.width*o.height===xe,fitsInViewportVertically:_e===o.height,fitsInViewportHorizontally:le==o.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const s=r.bottom-t.y,o=r.right-t.x,u=EH(this._overlayRef.getConfig().minHeight),m=EH(this._overlayRef.getConfig().minWidth),T=e.fitsInViewportHorizontally||null!=m&&m<=o;return(e.fitsInViewportVertically||null!=u&&u<=s)&&T}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const s=TH(t),o=this._viewportRect,u=Math.max(e.x+s.width-o.width,0),m=Math.max(e.y+s.height-o.height,0),w=Math.max(o.top-r.top-e.y,0),T=Math.max(o.left-r.left-e.x,0);let F=0,N=0;return F=s.width<=o.width?T||-u:e.x<this._viewportMargin?o.left-r.left-e.x:0,N=s.height<=o.height?w||-m:e.y<this._viewportMargin?o.top-r.top-e.y:0,this._previousPushAmount={x:F,y:N},{x:e.x+F,y:e.y+N}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),s=new SX(e,r);this._positionChanges.next(s)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,s=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${r} ${s}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,s=this._isRtl();let o,u,m,F,N,Z;if("top"===t.overlayY)u=e.y,o=r.height-u+this._viewportMargin;else if("bottom"===t.overlayY)m=r.height-e.y+2*this._viewportMargin,o=r.height-m+this._viewportMargin;else{const Q=Math.min(r.bottom-e.y+r.top,e.y),le=this._lastBoundingBoxSize.height;o=2*Q,u=e.y-Q,o>le&&!this._isInitialRender&&!this._growAfterOpen&&(u=e.y-le/2)}if("end"===t.overlayX&&!s||"start"===t.overlayX&&s)Z=r.width-e.x+this._viewportMargin,F=e.x-this._viewportMargin;else if("start"===t.overlayX&&!s||"end"===t.overlayX&&s)N=e.x,F=r.right-e.x;else{const Q=Math.min(r.right-e.x+r.left,e.x),le=this._lastBoundingBoxSize.width;F=2*Q,N=e.x-Q,F>le&&!this._isInitialRender&&!this._growAfterOpen&&(N=e.x-le/2)}return{top:u,left:N,bottom:m,right:Z,width:F,height:o}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const s={};if(this._hasExactPosition())s.top=s.left="0",s.bottom=s.right=s.maxHeight=s.maxWidth="",s.width=s.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,u=this._overlayRef.getConfig().maxWidth;s.height=uc(r.height),s.top=uc(r.top),s.bottom=uc(r.bottom),s.width=uc(r.width),s.left=uc(r.left),s.right=uc(r.right),s.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",s.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(s.maxHeight=uc(o)),u&&(s.maxWidth=uc(u))}this._lastBoundingBoxSize=r,ay(this._boundingBox.style,s)}_resetBoundingBoxStyles(){ay(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ay(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},s=this._hasExactPosition(),o=this._hasFlexibleDimensions,u=this._overlayRef.getConfig();if(s){const F=this._viewportRuler.getViewportScrollPosition();ay(r,this._getExactOverlayY(t,e,F)),ay(r,this._getExactOverlayX(t,e,F))}else r.position="static";let m="",w=this._getOffset(t,"x"),T=this._getOffset(t,"y");w&&(m+=`translateX(${w}px) `),T&&(m+=`translateY(${T}px)`),r.transform=m.trim(),u.maxHeight&&(s?r.maxHeight=uc(u.maxHeight):o&&(r.maxHeight="")),u.maxWidth&&(s?r.maxWidth=uc(u.maxWidth):o&&(r.maxWidth="")),ay(this._pane.style,r)}_getExactOverlayY(e,t,r){let s={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),"bottom"===e.overlayY?s.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":s.top=uc(o.y),s}_getExactOverlayX(e,t,r){let u,s={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),u=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===u?s.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":s.left=uc(o.x),s}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(s=>s.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:CH(e,r),isOriginOutsideView:rk(e,r),isOverlayClipped:CH(t,r),isOverlayOutsideView:rk(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,s)=>r-Math.max(s,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&ON(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Uo)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function ay(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function EH(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(TX);return t&&"px"!==t?null:parseFloat(e)}return n||null}function TH(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const DH="cdk-global-overlay-wrapper";class AX{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(DH),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:s,height:o,maxWidth:u,maxHeight:m}=r,w=!("100%"!==s&&"100vw"!==s||u&&"100%"!==u&&"100vw"!==u),T=!("100%"!==o&&"100vh"!==o||m&&"100%"!==m&&"100vh"!==m);e.position=this._cssPosition,e.marginLeft=w?"0":this._leftOffset,e.marginTop=T?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,w?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=T?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(DH),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let IX=(()=>{class n{constructor(t,r,s,o){this._viewportRuler=t,this._document=r,this._platform=s,this._overlayContainer=o}global(){return new AX}flexibleConnectedTo(t){return new DX(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(Sn(vE),Sn(Gs),Sn(gd),Sn(ok))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AH=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(Sn(Gs))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),RX=(()=>{class n extends AH{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=s=>{const o=this._attachedOverlays;for(let u=o.length-1;u>-1;u--)if(o[u]._keydownEvents.observers.length>0){const m=o[u]._keydownEvents;this._ngZone?this._ngZone.run(()=>m.next(s)):m.next(s);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(Sn(Gs),Sn(mo,8))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kX=(()=>{class n extends AH{constructor(t,r,s){super(t),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=df(o)},this._clickListener=o=>{const u=df(o),m="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:u;this._pointerDownEventTarget=null;const w=this._attachedOverlays.slice();for(let T=w.length-1;T>-1;T--){const F=w[T];if(F._outsidePointerEvents.observers.length<1||!F.hasAttached())continue;if(F.overlayElement.contains(u)||F.overlayElement.contains(m))break;const N=F._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>N.next(o)):N.next(o)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(Sn(Gs),Sn(gd),Sn(mo,8))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),PX=0,v0=(()=>{class n{constructor(t,r,s,o,u,m,w,T,F,N,Z){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=o,this._keyboardDispatcher=u,this._injector=m,this._ngZone=w,this._document=T,this._directionality=F,this._location=N,this._outsideClickDispatcher=Z}create(t){const r=this._createHostElement(),s=this._createPaneElement(r),o=this._createPortalOutlet(s),u=new sk(t);return u.direction=u.direction||this._directionality.value,new EX(o,r,s,u,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+PX++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(RS)),new bX(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(Sn(CX),Sn(ok),Sn(Xv),Sn(IX),Sn(RX),Sn(Aa),Sn(mo),Sn(Gs),Sn(h0),Sn(T1),Sn(kX))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})();const OX={provide:new wi("cdk-connected-overlay-scroll-strategy"),deps:[v0],useFactory:function FX(n){return()=>n.scrollStrategies.reposition()}};let IH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({providers:[v0,OX],imports:[[d0,ik,iB],iB]}),n})();const BX=new wi("mat-sanity-checks",{providedIn:"root",factory:function NX(){return!0}});let Ql=(()=>{class n{constructor(t,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!a2()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(Sn(S7),Sn(BX,8),Sn(Gs))},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({imports:[[d0],d0]}),n})();function PH(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=_u(e)}}}function X1(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function ak(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=_u(e)}}}function HX(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?l0(t):this.defaultTabIndex}}}let qE=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class VX{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const LH={enterDuration:225,exitDuration:150},lk=g_({passive:!0}),FH=["mousedown","touchstart"],OH=["mouseup","mouseleave","touchend","touchcancel"];class GX{constructor(e,t,r,s){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,s.isBrowser&&(this._containerElement=Lc(r))}fadeInRipple(e,t,r={}){const s=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=Object.assign(Object.assign({},LH),r.animation);r.centered&&(e=s.left+s.width/2,t=s.top+s.height/2);const u=r.radius||function qX(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),s=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+s*s)}(e,t,s),m=e-s.left,w=t-s.top,T=o.enterDuration,F=document.createElement("div");F.classList.add("mat-ripple-element"),F.style.left=m-u+"px",F.style.top=w-u+"px",F.style.height=2*u+"px",F.style.width=2*u+"px",null!=r.color&&(F.style.backgroundColor=r.color),F.style.transitionDuration=`${T}ms`,this._containerElement.appendChild(F),function WX(n){window.getComputedStyle(n).getPropertyValue("opacity")}(F),F.style.transform="scale(1)";const N=new VX(this,F,r);return N.state=0,this._activeRipples.add(N),r.persistent||(this._mostRecentTransientRipple=N),this._runTimeoutOutsideZone(()=>{const Z=N===this._mostRecentTransientRipple;N.state=1,!r.persistent&&(!Z||!this._isPointerDown)&&N.fadeOut()},T),N}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,s=Object.assign(Object.assign({},LH),e.config.animation);r.style.transitionDuration=`${s.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.remove()},s.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Lc(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(FH))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(OH),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=fE(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!pE(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,lk)})})}_removeTriggerEvents(){this._triggerElement&&(FH.forEach(e=>{this._triggerElement.removeEventListener(e,this,lk)}),this._pointerUpEventsRegistered&&OH.forEach(e=>{this._triggerElement.removeEventListener(e,this,lk)}))}}const jX=new wi("mat-ripple-global-options");let K1=(()=>{class n{constructor(t,r,s,o,u){this._elementRef=t,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new GX(this,r,t,s)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,s){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,Object.assign(Object.assign({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(Bt(Uo),Bt(mo),Bt(gd),Bt(jX,8),Bt(oy,8))},n.\u0275dir=_i({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&Zt("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),jE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({imports:[[Ql],Ql]}),n})();function ck(n){return new xn(e=>{$e(n()).subscribe(e)})}function ZE(...n){return function ZX(){return qn(1)}()(js(n,Ui(n)))}function Um(...n){const e=Ui(n);return En((t,r)=>{(e?ZE(n,t,e):ZE(n,t)).subscribe(r)})}function YX(n,e){}class uk{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const XX={dialogContainer:p0("dialogContainer",[pf("void, exit",Sc({opacity:0,transform:"scale(0.7)"})),pf("enter",Sc({transform:"none"})),v_("* => enter",xB([__("150ms cubic-bezier(0, 0, 0.2, 1)",Sc({transform:"none",opacity:1})),CB("@*",MB(),{optional:!0})])),v_("* => void, * => exit",xB([__("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Sc({opacity:0})),CB("@*",MB(),{optional:!0})]))])};let JX=(()=>{class n extends tk{constructor(t,r,s,o,u,m,w,T){super(),this._elementRef=t,this._focusTrapFactory=r,this._changeDetectorRef=s,this._config=u,this._interactivityChecker=m,this._ngZone=w,this._focusMonitor=T,this._animationStateChanged=new Go,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=F=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(F)),this._ariaLabelledBy=u.ariaLabelledBy||null,this._document=o}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=uE())}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const s=()=>{t.removeEventListener("blur",s),t.removeEventListener("mousedown",s),t.removeAttribute("tabindex")};t.addEventListener("blur",s),t.addEventListener("mousedown",s)})),t.focus(r)}_focusByCssSelector(t,r){let s=this._elementRef.nativeElement.querySelector(t);s&&this._forceFocus(s,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const r=uE(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=uE();return t===r||t.contains(r)}}return n.\u0275fac=function(t){return new(t||n)(Bt(Uo),Bt(y7),Bt(lh),Bt(Gs,8),Bt(uk),Bt(ZN),Bt(mo),Bt(u0))},n.\u0275dir=_i({type:n,viewQuery:function(t,r){if(1&t&&fd(nk,7),2&t){let s;Ua(s=Ga())&&(r._portalOutlet=s.first)}},features:[hs]}),n})(),KX=(()=>{class n extends JX{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:r}){"enter"===t?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:r}))}_onAnimationStart({toState:t,totalTime:r}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:r}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:r})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ta(n)))(r||n)}}(),n.\u0275cmp=or({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,r){1&t&&a1("@dialogContainer.start",function(o){return r._onAnimationStart(o)})("@dialogContainer.done",function(o){return r._onAnimationDone(o)}),2&t&&(Wn("id",r._id),ia("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Ji("@dialogContainer",r._state))},features:[hs],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&cs(0,YX,0,0,"ng-template",0)},directives:[nk],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[XX.dialogContainer]}}),n})(),QX=0;class Q1{constructor(e,t,r="mat-dialog-"+QX++){this._overlayRef=e,this._containerInstance=t,this.id=r,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new en,this._afterClosed=new en,this._beforeClosed=new en,this._state=0,t._id=r,t._animationStateChanged.pipe(Fc(s=>"opened"===s.state),uh(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(Fc(s=>"closed"===s.state),uh(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(Fc(s=>27===s.keyCode&&!this.disableClose&&!hE(s))).subscribe(s=>{s.preventDefault(),hk(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():hk(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Fc(t=>"closing"===t.state),uh(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function hk(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const $X=new wi("MatDialogData"),eJ=new wi("mat-dialog-default-options"),NH=new wi("mat-dialog-scroll-strategy"),nJ={provide:NH,deps:[v0],useFactory:function tJ(n){return()=>n.scrollStrategies.block()}};let iJ=(()=>{class n{constructor(t,r,s,o,u,m,w,T,F,N){this._overlay=t,this._injector=r,this._defaultOptions=s,this._parentDialog=o,this._overlayContainer=u,this._dialogRefConstructor=w,this._dialogContainerType=T,this._dialogDataToken=F,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new en,this._afterOpenedAtThisLevel=new en,this._ariaHiddenElements=new Map,this.afterAllClosed=ck(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Um(void 0))),this._scrollStrategy=m}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,r){r=function rJ(n,e){return Object.assign(Object.assign({},e),n)}(r,this._defaultOptions||new uk),r.id&&this.getDialogById(r.id);const s=this._createOverlay(r),o=this._attachDialogContainer(s,r),u=this._attachDialogContent(t,o,s,r);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(u),u.afterClosed().subscribe(()=>this._removeOpenDialog(u)),this.afterOpened.next(u),o._initializeWithAttachedContent(),u}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const r=this._getOverlayConfig(t);return this._overlay.create(r)}_getOverlayConfig(t){const r=new sk({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachDialogContainer(t,r){const o=Aa.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:uk,useValue:r}]}),u=new ek(this._dialogContainerType,r.viewContainerRef,o,r.componentFactoryResolver);return t.attach(u).instance}_attachDialogContent(t,r,s,o){const u=new this._dialogRefConstructor(s,r,o.id);if(t instanceof Uu)r.attachTemplatePortal(new WE(t,null,{$implicit:o.data,dialogRef:u}));else{const m=this._createInjector(o,u,r),w=r.attachComponentPortal(new ek(t,o.viewContainerRef,m,o.componentFactoryResolver));u.componentInstance=w.instance}return u.updateSize(o.width,o.height).updatePosition(o.position),u}_createInjector(t,r,s){const o=t&&t.viewContainerRef&&t.viewContainerRef.injector,u=[{provide:this._dialogContainerType,useValue:s},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:r}];return t.direction&&(!o||!o.get(h0,null,Hr.Optional))&&u.push({provide:h0,useValue:{value:t.direction,change:is()}}),Aa.create({parent:o||this._injector,providers:u})}_removeOpenDialog(t){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let s=r.length-1;s>-1;s--){let o=r[s];o!==t&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}}return n.\u0275fac=function(t){jv()},n.\u0275dir=_i({type:n}),n})(),YE=(()=>{class n extends iJ{constructor(t,r,s,o,u,m,w,T){super(t,r,o,m,w,u,Q1,KX,$X,T)}}return n.\u0275fac=function(t){return new(t||n)(Sn(v0),Sn(Aa),Sn(T1,8),Sn(eJ,8),Sn(NH),Sn(n,12),Sn(ok),Sn(oy,8))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})(),sJ=0,dk=(()=>{class n{constructor(t,r,s){this.dialogRef=t,this._elementRef=r,this._dialog=s,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=BH(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const r=t._matDialogClose||t._matDialogCloseResult;r&&(this.dialogResult=r.currentValue)}_onButtonClick(t){hk(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(t){return new(t||n)(Bt(Q1,8),Bt(Uo),Bt(YE))},n.\u0275dir=_i({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,r){1&t&&No("click",function(o){return r._onButtonClick(o)}),2&t&&ia("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Ci]}),n})(),fk=(()=>{class n{constructor(t,r,s){this._dialogRef=t,this._elementRef=r,this._dialog=s,this.id="mat-dialog-title-"+sJ++}ngOnInit(){this._dialogRef||(this._dialogRef=BH(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(Bt(Q1,8),Bt(Uo),Bt(YE))},n.\u0275dir=_i({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,r){2&t&&Wn("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),pk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=_i({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})(),mk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=_i({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),n})();function BH(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(r=>r.id===t.id):null}let oJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({providers:[YE,nJ],imports:[[IH,ik,Ql],Ql]}),n})();function $1(n,e){const t=y(n)?n:()=>n,r=s=>s.error(t());return new xn(e?s=>e.schedule(r,0,s):r)}function Gm(n){return En((e,t)=>{let o,r=null,s=!1;r=e.subscribe(Dn(t,void 0,void 0,u=>{o=$e(n(u,Gm(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,o.subscribe(t))})}function HH(n){return En((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const aJ=["*"];let XE;function eM(n){var e;return(null===(e=function lJ(){if(void 0===XE&&(XE=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(XE=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return XE}())||void 0===e?void 0:e.createHTML(n))||n}function zH(n){return Error(`Unable to find icon with the name "${n}"`)}function VH(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function UH(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class ly{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let JE=(()=>{class n{constructor(t,r,s,o){this._httpClient=t,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=s}addSvgIcon(t,r,s){return this.addSvgIconInNamespace("",t,r,s)}addSvgIconLiteral(t,r,s){return this.addSvgIconLiteralInNamespace("",t,r,s)}addSvgIconInNamespace(t,r,s,o){return this._addSvgIconConfig(t,r,new ly(s,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,s,o){const u=this._sanitizer.sanitize(Oo.HTML,s);if(!u)throw UH(s);const m=eM(u);return this._addSvgIconConfig(t,r,new ly("",m,o))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,s){return this._addSvgIconSetConfig(t,new ly(r,null,s))}addSvgIconSetLiteralInNamespace(t,r,s){const o=this._sanitizer.sanitize(Oo.HTML,r);if(!o)throw UH(r);const u=eM(o);return this._addSvgIconSetConfig(t,new ly("",u,s))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(Oo.RESOURCE_URL,t);if(!r)throw VH(t);const s=this._cachedIconsByUrl.get(r);return s?is(KE(s)):this._loadSvgIconFromConfig(new ly(t,null)).pipe(nu(o=>this._cachedIconsByUrl.set(r,o)),ii(o=>KE(o)))}getNamedSvgIcon(t,r=""){const s=GH(r,t);let o=this._svgIconConfigs.get(s);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,t),o)return this._svgIconConfigs.set(s,o),this._getSvgFromConfig(o);const u=this._iconSetConfigs.get(r);return u?this._getSvgFromIconSetConfigs(t,u):$1(zH(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?is(KE(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(ii(r=>KE(r)))}_getSvgFromIconSetConfigs(t,r){const s=this._extractIconWithNameFromAnySet(t,r);return s?is(s):T3(r.filter(u=>!u.svgText).map(u=>this._loadSvgIconSetFromConfig(u).pipe(Gm(m=>{const T=`Loading icon set URL: ${this._sanitizer.sanitize(Oo.RESOURCE_URL,u.url)} failed: ${m.message}`;return this._errorHandler.handleError(new Error(T)),is(null)})))).pipe(ii(()=>{const u=this._extractIconWithNameFromAnySet(t,r);if(!u)throw zH(t);return u}))}_extractIconWithNameFromAnySet(t,r){for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const u=this._svgElementFromConfig(o),m=this._extractSvgIconFromSet(u,t,o.options);if(m)return m}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(nu(r=>t.svgText=r),ii(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?is(null):this._fetchIcon(t).pipe(nu(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,s){const o=t.querySelector(`[id="${r}"]`);if(!o)return null;const u=o.cloneNode(!0);if(u.removeAttribute("id"),"svg"===u.nodeName.toLowerCase())return this._setSvgAttributes(u,s);if("symbol"===u.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(u),s);const m=this._svgElementFromString(eM("<svg></svg>"));return m.appendChild(u),this._setSvgAttributes(m,s)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const s=r.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(t){const r=this._svgElementFromString(eM("<svg></svg>")),s=t.attributes;for(let o=0;o<s.length;o++){const{name:u,value:m}=s[o];"id"!==u&&r.setAttribute(u,m)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){var r;const{url:s,options:o}=t,u=null!==(r=null==o?void 0:o.withCredentials)&&void 0!==r&&r;if(!this._httpClient)throw function cJ(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==s)throw Error(`Cannot fetch icon from URL "${s}".`);const m=this._sanitizer.sanitize(Oo.RESOURCE_URL,s);if(!m)throw VH(s);const w=this._inProgressUrlFetches.get(m);if(w)return w;const T=this._httpClient.get(m,{responseType:"text",withCredentials:u}).pipe(ii(F=>eM(F)),HH(()=>this._inProgressUrlFetches.delete(m)),Pa());return this._inProgressUrlFetches.set(m,T),T}_addSvgIconConfig(t,r,s){return this._svgIconConfigs.set(GH(t,r),s),this}_addSvgIconSetConfig(t,r){const s=this._iconSetConfigs.get(t);return s?s.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let s=0;s<this._resolvers.length;s++){const o=this._resolvers[s](r,t);if(o)return hJ(o)?new ly(o.url,null,o.options):new ly(o,null)}}}return n.\u0275fac=function(t){return new(t||n)(Sn(Y1,8),Sn(RR),Sn(Gs,8),Sn(Gf))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function KE(n){return n.cloneNode(!0)}function GH(n,e){return n+":"+e}function hJ(n){return!(!n.url||!n.options)}const dJ=X1(class{constructor(n){this._elementRef=n}}),fJ=new wi("mat-icon-location",{providedIn:"root",factory:function pJ(){const n=Jo(Gs),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),WH=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],mJ=WH.map(n=>`[${n}]`).join(", "),gJ=/^url\(['"]?#(.*?)['"]?\)$/;let qH=(()=>{class n extends dJ{constructor(t,r,s,o,u){super(t),this._iconRegistry=r,this._location=o,this._errorHandler=u,this._inline=!1,this._currentIconFetch=p.EMPTY,s||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=_u(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const s=t.childNodes[r];(1!==s.nodeType||"svg"===s.nodeName.toLowerCase())&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),r&&t.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((s,o)=>{s.forEach(u=>{o.setAttribute(u.name,`url('${t}#${u.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(mJ),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)WH.forEach(u=>{const m=r[o],w=m.getAttribute(u),T=w?w.match(gJ):null;if(T){let F=s.get(m);F||(F=[],s.set(m,F)),F.push({name:u,value:T[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,s]=this._splitIconName(t);r&&(this._svgNamespace=r),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,r).pipe(uh(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${s}! ${o.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(Bt(Uo),Bt(JE),$h("aria-hidden"),Bt(fJ),Bt(Gf))},n.\u0275cmp=or({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(ia("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),Zt("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[hs],ngContentSelectors:aJ,decls:1,vars:0,template:function(t,r){1&t&&(af(),hd(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),jH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({imports:[[Ql],Ql]}),n})();const _J=["mat-button",""],vJ=["*"],bJ=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],xJ=X1(PH(ak(class{constructor(n){this._elementRef=n}})));let QE=(()=>{class n extends xJ{constructor(t,r,s){super(t),this._focusMonitor=r,this._animationMode=s,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const o of bJ)this._hasHostAttributes(o)&&this._getHostElement().classList.add(o);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(Bt(Uo),Bt(u0),Bt(oy,8))},n.\u0275cmp=or({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&fd(K1,5),2&t){let s;Ua(s=Ga())&&(r.ripple=s.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(ia("disabled",r.disabled||null),Zt("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[hs],attrs:_J,ngContentSelectors:vJ,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(af(),Jr(0,"span",0),hd(1),ts(),xl(2,"span",1)(3,"span",2)),2&t&&(Fr(2),Zt("mat-button-ripple-round",r.isRoundButton||r.isIconButton),Zr("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[K1],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),ZH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({imports:[[jE,Ql],Ql]}),n})();function wJ(n,e){1&n&&hd(0)}const MJ=["*"];let YH=(()=>{class n{constructor(t){this._elementRef=t}focus(){this._elementRef.nativeElement.focus()}}return n.\u0275fac=function(t){return new(t||n)(Bt(Uo))},n.\u0275dir=_i({type:n,selectors:[["","cdkStepHeader",""]],hostAttrs:["role","tab"]}),n})(),XH=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(Bt(Uu))},n.\u0275dir=_i({type:n,selectors:[["","cdkStepLabel",""]]}),n})(),CJ=0;const JH=new wi("STEPPER_GLOBAL_OPTIONS");let gk=(()=>{class n{constructor(t,r){this._stepper=t,this.interacted=!1,this.interactedStream=new Go,this._editable=!0,this._optional=!1,this._completedOverride=null,this._customError=null,this._stepperOptions=r||{},this._displayDefaultIndicatorType=!1!==this._stepperOptions.displayDefaultIndicatorType}get editable(){return this._editable}set editable(t){this._editable=_u(t)}get optional(){return this._optional}set optional(t){this._optional=_u(t)}get completed(){return null==this._completedOverride?this._getDefaultCompleted():this._completedOverride}set completed(t){this._completedOverride=_u(t)}_getDefaultCompleted(){return this.stepControl?this.stepControl.valid&&this.interacted:this.interacted}get hasError(){return null==this._customError?this._getDefaultError():this._customError}set hasError(t){this._customError=_u(t)}_getDefaultError(){return this.stepControl&&this.stepControl.invalid&&this.interacted}select(){this._stepper.selected=this}reset(){this.interacted=!1,null!=this._completedOverride&&(this._completedOverride=!1),null!=this._customError&&(this._customError=!1),this.stepControl&&this.stepControl.reset()}ngOnChanges(){this._stepper._stateChanged()}_markAsInteracted(){this.interacted||(this.interacted=!0,this.interactedStream.emit(this))}_showError(){var t;return null!==(t=this._stepperOptions.showError)&&void 0!==t?t:null!=this._customError}}return n.\u0275fac=function(t){return new(t||n)(Bt(Zi(()=>$E)),Bt(JH,8))},n.\u0275cmp=or({type:n,selectors:[["cdk-step"]],contentQueries:function(t,r,s){if(1&t&&Gu(s,XH,5),2&t){let o;Ua(o=Ga())&&(r.stepLabel=o.first)}},viewQuery:function(t,r){if(1&t&&fd(Uu,7),2&t){let s;Ua(s=Ga())&&(r.content=s.first)}},inputs:{stepControl:"stepControl",label:"label",errorMessage:"errorMessage",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],state:"state",editable:"editable",optional:"optional",completed:"completed",hasError:"hasError"},outputs:{interactedStream:"interacted"},exportAs:["cdkStep"],features:[Ci],ngContentSelectors:MJ,decls:1,vars:0,template:function(t,r){1&t&&(af(),cs(0,wJ,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),n})(),$E=(()=>{class n{constructor(t,r,s,o){this._dir=t,this._changeDetectorRef=r,this._elementRef=s,this._destroyed=new en,this.steps=new Om,this._sortedHeaders=new Om,this._linear=!1,this._selectedIndex=0,this.selectionChange=new Go,this._orientation="horizontal",this._groupId=CJ++}get linear(){return this._linear}set linear(t){this._linear=_u(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){var r;const s=l0(t);this.steps&&this._steps?(this._isValidIndex(s),null===(r=this.selected)||void 0===r||r._markAsInteracted(),this._selectedIndex!==s&&!this._anyControlsInvalidOrPending(s)&&(s>=this._selectedIndex||this.steps.toArray()[s].editable)&&this._updateSelectedItemIndex(s)):this._selectedIndex=s}get selected(){return this.steps?this.steps.toArray()[this.selectedIndex]:void 0}set selected(t){this.selectedIndex=t&&this.steps?this.steps.toArray().indexOf(t):-1}get orientation(){return this._orientation}set orientation(t){this._orientation=t,this._keyManager&&this._keyManager.withVerticalOrientation("vertical"===t)}ngAfterContentInit(){this._steps.changes.pipe(Um(this._steps),ff(this._destroyed)).subscribe(t=>{this.steps.reset(t.filter(r=>r._stepper===this)),this.steps.notifyOnChanges()})}ngAfterViewInit(){this._stepHeader.changes.pipe(Um(this._stepHeader),ff(this._destroyed)).subscribe(t=>{this._sortedHeaders.reset(t.toArray().sort((r,s)=>r._elementRef.nativeElement.compareDocumentPosition(s._elementRef.nativeElement)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)),this._sortedHeaders.notifyOnChanges()}),this._keyManager=new jN(this._sortedHeaders).withWrap().withHomeAndEnd().withVerticalOrientation("vertical"===this._orientation),(this._dir?this._dir.change:is()).pipe(Um(this._layoutDirection()),ff(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.updateActiveItem(this._selectedIndex),this.steps.changes.subscribe(()=>{this.selected||(this._selectedIndex=Math.max(this._selectedIndex-1,0))}),this._isValidIndex(this._selectedIndex)||(this._selectedIndex=0)}ngOnDestroy(){this.steps.destroy(),this._sortedHeaders.destroy(),this._destroyed.next(),this._destroyed.complete()}next(){this.selectedIndex=Math.min(this._selectedIndex+1,this.steps.length-1)}previous(){this.selectedIndex=Math.max(this._selectedIndex-1,0)}reset(){this._updateSelectedItemIndex(0),this.steps.forEach(t=>t.reset()),this._stateChanged()}_getStepLabelId(t){return`cdk-step-label-${this._groupId}-${t}`}_getStepContentId(t){return`cdk-step-content-${this._groupId}-${t}`}_stateChanged(){this._changeDetectorRef.markForCheck()}_getAnimationDirection(t){const r=t-this._selectedIndex;return r<0?"rtl"===this._layoutDirection()?"next":"previous":r>0?"rtl"===this._layoutDirection()?"previous":"next":"current"}_getIndicatorType(t,r="number"){const s=this.steps.toArray()[t],o=this._isCurrentStep(t);return s._displayDefaultIndicatorType?this._getDefaultIndicatorLogic(s,o):this._getGuidelineLogic(s,o,r)}_getDefaultIndicatorLogic(t,r){return t._showError()&&t.hasError&&!r?"error":!t.completed||r?"number":t.editable?"edit":"done"}_getGuidelineLogic(t,r,s="number"){return t._showError()&&t.hasError&&!r?"error":t.completed&&!r?"done":t.completed&&r?s:t.editable&&r?"edit":s}_isCurrentStep(t){return this._selectedIndex===t}_getFocusIndex(){return this._keyManager?this._keyManager.activeItemIndex:this._selectedIndex}_updateSelectedItemIndex(t){const r=this.steps.toArray();this.selectionChange.emit({selectedIndex:t,previouslySelectedIndex:this._selectedIndex,selectedStep:r[t],previouslySelectedStep:r[this._selectedIndex]}),this._containsFocus()?this._keyManager.setActiveItem(t):this._keyManager.updateActiveItem(t),this._selectedIndex=t,this._stateChanged()}_onKeydown(t){const r=hE(t),s=t.keyCode,o=this._keyManager;null==o.activeItemIndex||r||32!==s&&13!==s?o.onKeydown(t):(this.selectedIndex=o.activeItemIndex,t.preventDefault())}_anyControlsInvalidOrPending(t){return!!(this._linear&&t>=0)&&this.steps.toArray().slice(0,t).some(r=>{const s=r.stepControl;return(s?s.invalid||s.pending||!r.interacted:!r.completed)&&!r.optional&&!r._completedOverride})}_layoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_containsFocus(){const t=this._elementRef.nativeElement,r=uE();return t===r||t.contains(r)}_isValidIndex(t){return t>-1&&(!this.steps||t<this.steps.length)}}return n.\u0275fac=function(t){return new(t||n)(Bt(h0,8),Bt(lh),Bt(Uo),Bt(Gs))},n.\u0275dir=_i({type:n,selectors:[["","cdkStepper",""]],contentQueries:function(t,r,s){if(1&t&&(Gu(s,gk,5),Gu(s,YH,5)),2&t){let o;Ua(o=Ga())&&(r._steps=o),Ua(o=Ga())&&(r._stepHeader=o)}},inputs:{linear:"linear",selectedIndex:"selectedIndex",selected:"selected",orientation:"orientation"},outputs:{selectionChange:"selectionChange"},exportAs:["cdkStepper"]}),n})(),SJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({imports:[[d0]]}),n})();function yp(n,e){return En((t,r)=>{let s=null,o=0,u=!1;const m=()=>u&&!s&&r.complete();t.subscribe(Dn(r,w=>{null==s||s.unsubscribe();let T=0;const F=o++;$e(n(w,F)).subscribe(s=Dn(r,N=>r.next(e?e(w,N,F,T++):N),()=>{s=null,m()}))},()=>{u=!0,m()}))})}function EJ(n,e){if(1&n&&pp(0,8),2&n){const t=Bo();Zr("ngTemplateOutlet",t.iconOverrides[t.state])("ngTemplateOutletContext",t._getIconContext())}}function TJ(n,e){if(1&n&&(Jr(0,"span",13),ri(1),ts()),2&n){const t=Bo(2);Fr(1),Li(t._getDefaultTextForState(t.state))}}function DJ(n,e){if(1&n&&(Jr(0,"span",14),ri(1),ts()),2&n){const t=Bo(2);Fr(1),Li(t._intl.completedLabel)}}function AJ(n,e){if(1&n&&(Jr(0,"span",14),ri(1),ts()),2&n){const t=Bo(2);Fr(1),Li(t._intl.editableLabel)}}function IJ(n,e){if(1&n&&(Jr(0,"mat-icon",13),ri(1),ts()),2&n){const t=Bo(2);Fr(1),Li(t._getDefaultTextForState(t.state))}}function RJ(n,e){if(1&n&&(dp(0,9),cs(1,TJ,2,1,"span",10),cs(2,DJ,2,1,"span",11),cs(3,AJ,2,1,"span",11),cs(4,IJ,2,1,"mat-icon",12),fp()),2&n){const t=Bo();Zr("ngSwitch",t.state),Fr(1),Zr("ngSwitchCase","number"),Fr(1),Zr("ngIf","done"===t.state),Fr(1),Zr("ngIf","edit"===t.state)}}function kJ(n,e){if(1&n&&(Jr(0,"div",15),pp(1,16),ts()),2&n){const t=Bo();Fr(1),Zr("ngTemplateOutlet",t._templateLabel().template)}}function PJ(n,e){if(1&n&&(Jr(0,"div",15),ri(1),ts()),2&n){const t=Bo();Fr(1),Li(t.label)}}function LJ(n,e){if(1&n&&(Jr(0,"div",17),ri(1),ts()),2&n){const t=Bo();Fr(1),Li(t._intl.optionalLabel)}}function FJ(n,e){if(1&n&&(Jr(0,"div",18),ri(1),ts()),2&n){const t=Bo();Fr(1),Li(t.errorMessage)}}function OJ(n,e){}function NJ(n,e){if(1&n&&(hd(0),cs(1,OJ,0,0,"ng-template",0)),2&n){const t=Bo();Fr(1),Zr("cdkPortalOutlet",t._portal)}}const BJ=["*"];function HJ(n,e){1&n&&xl(0,"div",9)}const KH=function(n,e){return{step:n,i:e}};function zJ(n,e){if(1&n&&(dp(0),pp(1,7),cs(2,HJ,1,0,"div",8),fp()),2&n){const t=e.$implicit,r=e.index,s=e.last;Bo(2);const o=cp(4);Fr(1),Zr("ngTemplateOutlet",o)("ngTemplateOutletContext",NI(3,KH,t,r)),Fr(1),Zr("ngIf",!s)}}function VJ(n,e){if(1&n){const t=Pm();Jr(0,"div",10),No("@horizontalStepTransition.done",function(s){return Ul(t),Bo(2)._animationDone.next(s)}),pp(1,11),ts()}if(2&n){const t=e.$implicit,r=e.index,s=Bo(2);Zr("@horizontalStepTransition",s._getAnimationDirection(r))("id",s._getStepContentId(r)),ia("aria-labelledby",s._getStepLabelId(r))("aria-expanded",s.selectedIndex===r),Fr(1),Zr("ngTemplateOutlet",t.content)}}function UJ(n,e){if(1&n&&(dp(0),Jr(1,"div",3),cs(2,zJ,3,6,"ng-container",4),ts(),Jr(3,"div",5),cs(4,VJ,2,5,"div",6),ts(),fp()),2&n){const t=Bo();Fr(2),Zr("ngForOf",t.steps),Fr(2),Zr("ngForOf",t.steps)}}function GJ(n,e){if(1&n){const t=Pm();Jr(0,"div",13),pp(1,7),Jr(2,"div",14)(3,"div",15),No("@verticalStepTransition.done",function(s){return Ul(t),Bo(2)._animationDone.next(s)}),Jr(4,"div",16),pp(5,11),ts()()()()}if(2&n){const t=e.$implicit,r=e.index,s=e.last,o=Bo(2),u=cp(4);Fr(1),Zr("ngTemplateOutlet",u)("ngTemplateOutletContext",NI(9,KH,t,r)),Fr(1),Zt("mat-stepper-vertical-line",!s),Fr(1),Zr("@verticalStepTransition",o._getAnimationDirection(r))("id",o._getStepContentId(r)),ia("aria-labelledby",o._getStepLabelId(r))("aria-expanded",o.selectedIndex===r),Fr(2),Zr("ngTemplateOutlet",t.content)}}function WJ(n,e){if(1&n&&(dp(0),cs(1,GJ,6,12,"div",12),fp()),2&n){const t=Bo();Fr(1),Zr("ngForOf",t.steps)}}function qJ(n,e){if(1&n){const t=Pm();Jr(0,"mat-step-header",17),No("click",function(){return Ul(t).step.select()})("keydown",function(s){return Ul(t),Bo()._onKeydown(s)}),ts()}if(2&n){const t=e.step,r=e.i,s=Bo();Zt("mat-horizontal-stepper-header","horizontal"===s.orientation)("mat-vertical-stepper-header","vertical"===s.orientation),Zr("tabIndex",s._getFocusIndex()===r?0:-1)("id",s._getStepLabelId(r))("index",r)("state",s._getIndicatorType(r,t.state))("label",t.stepLabel||t.label)("selected",s.selectedIndex===r)("active",s._stepIsNavigable(r,t))("optional",t.optional)("errorMessage",t.errorMessage)("iconOverrides",s._iconOverrides)("disableRipple",s.disableRipple||!s._stepIsNavigable(r,t))("color",t.color||s.color),ia("aria-posinset",r+1)("aria-setsize",s.steps.length)("aria-controls",s._getStepContentId(r))("aria-selected",s.selectedIndex==r)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null)("aria-disabled",!s._stepIsNavigable(r,t)||null)}}let _k=(()=>{class n extends XH{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ta(n)))(r||n)}}(),n.\u0275dir=_i({type:n,selectors:[["","matStepLabel",""]],features:[hs]}),n})(),eT=(()=>{class n{constructor(){this.changes=new en,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ZJ={provide:eT,deps:[[new Xc,new ed,eT]],useFactory:function jJ(n){return n||new eT}},YJ=X1(class extends YH{constructor(e){super(e)}},"primary");let QH=(()=>{class n extends YJ{constructor(t,r,s,o){super(s),this._intl=t,this._focusMonitor=r,this._intlSubscription=t.changes.subscribe(()=>o.markForCheck())}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._intlSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._elementRef,t,r):this._elementRef.nativeElement.focus(r)}_stringLabel(){return this.label instanceof _k?null:this.label}_templateLabel(){return this.label instanceof _k?this.label:null}_getHostElement(){return this._elementRef.nativeElement}_getIconContext(){return{index:this.index,active:this.active,optional:this.optional}}_getDefaultTextForState(t){return"number"==t?`${this.index+1}`:"edit"==t?"create":"error"==t?"warning":t}}return n.\u0275fac=function(t){return new(t||n)(Bt(eT),Bt(u0),Bt(Uo),Bt(lh))},n.\u0275cmp=or({type:n,selectors:[["mat-step-header"]],hostAttrs:["role","tab",1,"mat-step-header"],inputs:{color:"color",state:"state",label:"label",errorMessage:"errorMessage",iconOverrides:"iconOverrides",index:"index",selected:"selected",active:"active",optional:"optional",disableRipple:"disableRipple"},features:[hs],decls:10,vars:19,consts:[["matRipple","",1,"mat-step-header-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-step-icon-content",3,"ngSwitch"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngSwitchCase"],[3,"ngSwitch",4,"ngSwitchDefault"],[1,"mat-step-label"],["class","mat-step-text-label",4,"ngIf"],["class","mat-step-optional",4,"ngIf"],["class","mat-step-sub-label-error",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch"],["aria-hidden","true",4,"ngSwitchCase"],["class","cdk-visually-hidden",4,"ngIf"],["aria-hidden","true",4,"ngSwitchDefault"],["aria-hidden","true"],[1,"cdk-visually-hidden"],[1,"mat-step-text-label"],[3,"ngTemplateOutlet"],[1,"mat-step-optional"],[1,"mat-step-sub-label-error"]],template:function(t,r){1&t&&(xl(0,"div",0),Jr(1,"div")(2,"div",1),cs(3,EJ,1,2,"ng-container",2),cs(4,RJ,5,4,"ng-container",3),ts()(),Jr(5,"div",4),cs(6,kJ,2,1,"div",5),cs(7,PJ,2,1,"div",5),cs(8,LJ,2,1,"div",6),cs(9,FJ,2,1,"div",7),ts()),2&t&&(Zr("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disableRipple),Fr(1),yr("mat-step-icon-state-",r.state," mat-step-icon"),Zt("mat-step-icon-selected",r.selected),Fr(1),Zr("ngSwitch",!(!r.iconOverrides||!r.iconOverrides[r.state])),Fr(1),Zr("ngSwitchCase",!0),Fr(2),Zt("mat-step-label-active",r.active)("mat-step-label-selected",r.selected)("mat-step-label-error","error"==r.state),Fr(1),Zr("ngIf",r._templateLabel()),Fr(1),Zr("ngIf",r._stringLabel()),Fr(1),Zr("ngIf",r.optional&&"error"!=r.state),Fr(1),Zr("ngIf","error"==r.state))},directives:[qH,K1,s0,qS,wR,s3,r0],styles:[".mat-step-header{overflow:hidden;outline:none;cursor:pointer;position:relative;box-sizing:content-box;-webkit-tap-highlight-color:transparent}.cdk-high-contrast-active .mat-step-header{outline:solid 1px}.cdk-high-contrast-active .mat-step-header.cdk-keyboard-focused,.cdk-high-contrast-active .mat-step-header.cdk-program-focused{outline:solid 3px}.cdk-high-contrast-active .mat-step-header[aria-selected=true] .mat-step-label{text-decoration:underline}.mat-step-optional,.mat-step-sub-label-error{font-size:12px}.mat-step-icon{border-radius:50%;height:24px;width:24px;flex-shrink:0;position:relative}.mat-step-icon-content{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);display:flex}.mat-step-icon .mat-icon{font-size:16px;height:16px;width:16px}.mat-step-icon-state-error .mat-icon{font-size:24px;height:24px;width:24px}.mat-step-label{display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:50px;vertical-align:middle}.mat-step-text-label{text-overflow:ellipsis;overflow:hidden}.mat-step-header .mat-step-header-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,changeDetection:0}),n})();const $H={horizontalStepTransition:p0("horizontalStepTransition",[pf("previous",Sc({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"})),pf("current",Sc({transform:"none",visibility:"inherit"})),pf("next",Sc({transform:"translate3d(100%, 0, 0)",visibility:"hidden"})),v_("* => *",__("500ms cubic-bezier(0.35, 0, 0.25, 1)"))]),verticalStepTransition:p0("verticalStepTransition",[pf("previous",Sc({height:"0px",visibility:"hidden"})),pf("next",Sc({height:"0px",visibility:"hidden"})),pf("current",Sc({height:"*",visibility:"inherit"})),v_("* <=> current",__("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])};let XJ=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(Bt(Uu))},n.\u0275dir=_i({type:n,selectors:[["ng-template","matStepperIcon",""]],inputs:{name:["matStepperIcon","name"]}}),n})(),JJ=(()=>{class n{constructor(t){this._template=t}}return n.\u0275fac=function(t){return new(t||n)(Bt(Uu))},n.\u0275dir=_i({type:n,selectors:[["ng-template","matStepContent",""]]}),n})(),ez=(()=>{class n extends gk{constructor(t,r,s,o){super(t,o),this._errorStateMatcher=r,this._viewContainerRef=s,this._isSelected=p.EMPTY}ngAfterContentInit(){this._isSelected=this._stepper.steps.changes.pipe(yp(()=>this._stepper.selectionChange.pipe(ii(t=>t.selectedStep===this),Um(this._stepper.selected===this)))).subscribe(t=>{t&&this._lazyContent&&!this._portal&&(this._portal=new WE(this._lazyContent._template,this._viewContainerRef))})}ngOnDestroy(){this._isSelected.unsubscribe()}isErrorState(t,r){return this._errorStateMatcher.isErrorState(t,r)||!!(t&&t.invalid&&this.interacted)}}return n.\u0275fac=function(t){return new(t||n)(Bt(Zi(()=>nz)),Bt(qE,4),Bt(ah),Bt(JH,8))},n.\u0275cmp=or({type:n,selectors:[["mat-step"]],contentQueries:function(t,r,s){if(1&t&&(Gu(s,_k,5),Gu(s,JJ,5)),2&t){let o;Ua(o=Ga())&&(r.stepLabel=o.first),Ua(o=Ga())&&(r._lazyContent=o.first)}},inputs:{color:"color"},exportAs:["matStep"],features:[ba([{provide:qE,useExisting:n},{provide:gk,useExisting:n}]),hs],ngContentSelectors:BJ,decls:1,vars:0,consts:[[3,"cdkPortalOutlet"]],template:function(t,r){1&t&&(af(),cs(0,NJ,2,1,"ng-template"))},directives:[nk],encapsulation:2,changeDetection:0}),n})(),tz=(()=>{class n extends $E{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ta(n)))(r||n)}}(),n.\u0275dir=_i({type:n,features:[hs]}),n})(),KJ=(()=>{class n extends tz{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ta(n)))(r||n)}}(),n.\u0275dir=_i({type:n,selectors:[["mat-horizontal-stepper"]],features:[hs]}),n})(),QJ=(()=>{class n extends tz{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ta(n)))(r||n)}}(),n.\u0275dir=_i({type:n,selectors:[["mat-vertical-stepper"]],features:[hs]}),n})(),nz=(()=>{class n extends $E{constructor(t,r,s,o){super(t,r,s,o),this.steps=new Om,this.animationDone=new Go,this.labelPosition="end",this._iconOverrides={},this._animationDone=new en;const u=s.nativeElement.nodeName.toLowerCase();this.orientation="mat-vertical-stepper"===u?"vertical":"horizontal"}ngAfterContentInit(){super.ngAfterContentInit(),this._icons.forEach(({name:t,templateRef:r})=>this._iconOverrides[t]=r),this.steps.changes.pipe(ff(this._destroyed)).subscribe(()=>{this._stateChanged()}),this._animationDone.pipe(GN((t,r)=>t.fromState===r.fromState&&t.toState===r.toState),ff(this._destroyed)).subscribe(t=>{"current"===t.toState&&this.animationDone.emit()})}_stepIsNavigable(t,r){return r.completed||this.selectedIndex===t||!this.linear}}return n.\u0275fac=function(t){return new(t||n)(Bt(h0,8),Bt(lh),Bt(Uo),Bt(Gs))},n.\u0275cmp=or({type:n,selectors:[["mat-stepper"],["mat-vertical-stepper"],["mat-horizontal-stepper"],["","matStepper",""]],contentQueries:function(t,r,s){if(1&t&&(Gu(s,ez,5),Gu(s,XJ,5)),2&t){let o;Ua(o=Ga())&&(r._steps=o),Ua(o=Ga())&&(r._icons=o)}},viewQuery:function(t,r){if(1&t&&fd(QH,5),2&t){let s;Ua(s=Ga())&&(r._stepHeader=s)}},hostAttrs:["role","tablist"],hostVars:9,hostBindings:function(t,r){2&t&&(ia("aria-orientation",r.orientation),Zt("mat-stepper-horizontal","horizontal"===r.orientation)("mat-stepper-vertical","vertical"===r.orientation)("mat-stepper-label-position-end","horizontal"===r.orientation&&"end"==r.labelPosition)("mat-stepper-label-position-bottom","horizontal"===r.orientation&&"bottom"==r.labelPosition))},inputs:{selectedIndex:"selectedIndex",disableRipple:"disableRipple",color:"color",labelPosition:"labelPosition"},outputs:{animationDone:"animationDone"},exportAs:["matStepper","matVerticalStepper","matHorizontalStepper"],features:[ba([{provide:$E,useExisting:n},{provide:KJ,useExisting:n},{provide:QJ,useExisting:n}]),hs],decls:5,vars:3,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],["stepTemplate",""],[1,"mat-horizontal-stepper-header-container"],[4,"ngFor","ngForOf"],[1,"mat-horizontal-content-container"],["class","mat-horizontal-stepper-content","role","tabpanel",3,"id",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","mat-stepper-horizontal-line",4,"ngIf"],[1,"mat-stepper-horizontal-line"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id"],[3,"ngTemplateOutlet"],["class","mat-step",4,"ngFor","ngForOf"],[1,"mat-step"],[1,"mat-vertical-content-container"],["role","tabpanel",1,"mat-vertical-stepper-content",3,"id"],[1,"mat-vertical-content"],[3,"tabIndex","id","index","state","label","selected","active","optional","errorMessage","iconOverrides","disableRipple","color","click","keydown"]],template:function(t,r){1&t&&(dp(0,0),cs(1,UJ,5,2,"ng-container",1),cs(2,WJ,2,1,"ng-container",1),fp(),cs(3,qJ,1,23,"ng-template",null,2,QF)),2&t&&(Zr("ngSwitch",r.orientation),Fr(1),Zr("ngSwitchCase","horizontal"),Fr(1),Zr("ngSwitchCase","vertical"))},directives:[QH,s0,qS,bR,wR,r0],styles:['.mat-stepper-vertical,.mat-stepper-horizontal{display:block}.mat-horizontal-stepper-header-container{white-space:nowrap;display:flex;align-items:center}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header-container{align-items:flex-start}.mat-stepper-horizontal-line{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin:0 -16px;min-width:32px}.mat-stepper-label-position-bottom .mat-stepper-horizontal-line{margin:0;min-width:0;position:relative}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{border-top-width:1px;border-top-style:solid;content:"";display:inline-block;height:0;position:absolute;width:calc(50% - 20px)}.mat-horizontal-stepper-header{display:flex;height:72px;overflow:hidden;align-items:center;padding:0 24px}.mat-horizontal-stepper-header .mat-step-icon{margin-right:8px;flex:none}[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:8px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{box-sizing:border-box;flex-direction:column;height:auto}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{right:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before{left:0}[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:last-child::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:first-child::after{display:none}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-label{padding:16px 0 0 0;text-align:center;width:100%}.mat-vertical-stepper-header{display:flex;align-items:center;height:24px}.mat-vertical-stepper-header .mat-step-icon{margin-right:12px}[dir=rtl] .mat-vertical-stepper-header .mat-step-icon{margin-right:0;margin-left:12px}.mat-horizontal-stepper-content{outline:0}.mat-horizontal-stepper-content[aria-expanded=false]{height:0;overflow:hidden}.mat-horizontal-content-container{overflow:hidden;padding:0 24px 24px 24px}.cdk-high-contrast-active .mat-horizontal-content-container{outline:solid 1px}.mat-vertical-content-container{margin-left:36px;border:0;position:relative}.cdk-high-contrast-active .mat-vertical-content-container{outline:solid 1px}[dir=rtl] .mat-vertical-content-container{margin-left:0;margin-right:36px}.mat-stepper-vertical-line::before{content:"";position:absolute;left:0;border-left-width:1px;border-left-style:solid}[dir=rtl] .mat-stepper-vertical-line::before{left:auto;right:0}.mat-vertical-stepper-content{overflow:hidden;outline:0}.mat-vertical-content{padding:0 24px 24px 24px}.mat-step:last-child .mat-vertical-content-container{border:none}\n'],encapsulation:2,data:{animation:[$H.horizontalStepTransition,$H.verticalStepTransition]},changeDetection:0}),n})(),$J=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({providers:[ZJ,qE],imports:[[Ql,I1,ik,ZH,SJ,jH,jE],Ql]}),n})(),eK=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({providers:[eK]}),n})(),vk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({imports:[[I1,Ql,tK],Ql]}),n})(),iz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({}),n})(),oK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({providers:[qE],imports:[[iz,vk,Ql],iz,vk]}),n})();function rz(n,e){return e?t=>ZE(e.pipe(uh(1),function aK(){return En((n,e)=>{n.subscribe(Dn(e,U))})}()),t.pipe(rz(n))):ln((t,r)=>n(t,r).pipe(uh(1),function lK(n){return ii(()=>n)}(t)))}function sz(n,e=H1){const t=f2(n,e);return rz(()=>t)}const cK=["mat-menu-item",""];function uK(n,e){1&n&&(eh(),Jr(0,"svg",2),xl(1,"polygon",3),ts())}const oz=["*"];function hK(n,e){if(1&n){const t=Pm();Jr(0,"div",0),No("keydown",function(s){return Ul(t),Bo()._handleKeydown(s)})("click",function(){return Ul(t),Bo().closed.emit("click")})("@transformMenu.start",function(s){return Ul(t),Bo()._onAnimationStart(s)})("@transformMenu.done",function(s){return Ul(t),Bo()._onAnimationDone(s)}),Jr(1,"div",1),hd(2),ts()()}if(2&n){const t=Bo();Zr("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),ia("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const tT={transformMenu:p0("transformMenu",[pf("void",Sc({opacity:0,transform:"scale(0.8)"})),v_("void => enter",__("120ms cubic-bezier(0, 0, 0.2, 1)",Sc({opacity:1,transform:"scale(1)"}))),v_("* => void",__("100ms 25ms linear",Sc({opacity:0})))]),fadeInItems:p0("fadeInItems",[pf("showing",Sc({opacity:1})),v_("void => *",[Sc({opacity:0}),__("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},dK=new wi("MatMenuContent"),yk=new wi("MAT_MENU_PANEL"),fK=ak(PH(class{}));let nT=(()=>{class n extends fK{constructor(t,r,s,o,u){var m;super(),this._elementRef=t,this._document=r,this._focusMonitor=s,this._parentMenu=o,this._changeDetectorRef=u,this.role="menuitem",this._hovered=new en,this._focused=new en,this._highlighted=!1,this._triggersSubmenu=!1,null===(m=null==o?void 0:o.addItem)||void 0===m||m.call(o,this)}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var t;const r=this._elementRef.nativeElement.cloneNode(!0),s=r.querySelectorAll("mat-icon, .material-icons");for(let o=0;o<s.length;o++)s[o].remove();return(null===(t=r.textContent)||void 0===t?void 0:t.trim())||""}_setHighlighted(t){var r;this._highlighted=t,null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(t){return new(t||n)(Bt(Uo),Bt(Gs),Bt(u0),Bt(yk,8),Bt(lh))},n.\u0275cmp=or({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,r){1&t&&No("click",function(o){return r._checkDisabled(o)})("mouseenter",function(){return r._handleMouseEnter()}),2&t&&(ia("role",r.role)("tabindex",r._getTabIndex())("aria-disabled",r.disabled.toString())("disabled",r.disabled||null),Zt("mat-menu-item",!0)("mat-menu-item-highlighted",r._highlighted)("mat-menu-item-submenu-trigger",r._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[hs],attrs:cK,ngContentSelectors:oz,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,r){1&t&&(af(),hd(0),xl(1,"div",0),cs(2,uK,2,0,"svg",1)),2&t&&(Fr(1),Zr("matRippleDisabled",r.disableRipple||r.disabled)("matRippleTrigger",r._getHostElement()),Fr(1),Zr("ngIf",r._triggersSubmenu))},directives:[K1,r0],encapsulation:2,changeDetection:0}),n})();const az=new wi("mat-menu-default-options",{providedIn:"root",factory:function pK(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let mK=0,tM=(()=>{class n{constructor(t,r,s,o){this._elementRef=t,this._ngZone=r,this._defaultOptions=s,this._changeDetectorRef=o,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new Om,this._tabSubscription=p.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new en,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new Go,this.close=this.closed,this.panelId="mat-menu-panel-"+mK++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=_u(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=_u(t)}set panelClass(t){const r=this._previousPanelClass;r&&r.length&&r.split(" ").forEach(s=>{this._classList[s]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(s=>{this._classList[s]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new jN(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Um(this._directDescendantItems),yp(t=>Ao(...t.map(r=>r._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{var r;const s=this._keyManager;if("enter"===this._panelAnimationState&&(null===(r=s.activeItem)||void 0===r?void 0:r._hasFocus())){const o=t.toArray(),u=Math.max(0,Math.min(o.length-1,s.activeItemIndex||0));o[u]&&!o[u].disabled?s.setActiveItem(u):s.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(Um(this._directDescendantItems),yp(r=>Ao(...r.map(s=>s._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const r=t.keyCode,s=this._keyManager;switch(r){case 27:hE(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===r||40===r)&&s.setFocusOrigin("keyboard"),void s.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._ngZone.onStable.pipe(uh(1)).subscribe(()=>{let r=null;if(this._directDescendantItems.length&&(r=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!r||!r.contains(document.activeElement)){const s=this._keyManager;s.setFocusOrigin(t).setFirstItemActive(),!s.activeItem&&r&&r.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const r=Math.min(this._baseElevation+t,24),s=`${this._elevationPrefix}${r}`,o=Object.keys(this._classList).find(u=>u.startsWith(this._elevationPrefix));(!o||o===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[s]=!0,this._previousElevation=s)}setPositionClasses(t=this.xPosition,r=this.yPosition){var s;const o=this._classList;o["mat-menu-before"]="before"===t,o["mat-menu-after"]="after"===t,o["mat-menu-above"]="above"===r,o["mat-menu-below"]="below"===r,null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Um(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(r=>r._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(t){return new(t||n)(Bt(Uo),Bt(mo),Bt(az),Bt(lh))},n.\u0275dir=_i({type:n,contentQueries:function(t,r,s){if(1&t&&(Gu(s,dK,5),Gu(s,nT,5),Gu(s,nT,4)),2&t){let o;Ua(o=Ga())&&(r.lazyContent=o.first),Ua(o=Ga())&&(r._allItems=o),Ua(o=Ga())&&(r.items=o)}},viewQuery:function(t,r){if(1&t&&fd(Uu,5),2&t){let s;Ua(s=Ga())&&(r.templateRef=s.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),gK=(()=>{class n extends tM{constructor(t,r,s,o){super(t,r,s,o),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(t){return new(t||n)(Bt(Uo),Bt(mo),Bt(az),Bt(lh))},n.\u0275cmp=or({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,r){2&t&&ia("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[ba([{provide:yk,useExisting:n}]),hs],ngContentSelectors:oz,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,r){1&t&&(af(),cs(0,hK,3,6,"ng-template"))},directives:[t3],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::before{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[tT.transformMenu,tT.fadeInItems]},changeDetection:0}),n})();const lz=new wi("mat-menu-scroll-strategy"),vK={provide:lz,deps:[v0],useFactory:function _K(n){return()=>n.scrollStrategies.reposition()}},uz=g_({passive:!0});let yK=(()=>{class n{constructor(t,r,s,o,u,m,w,T,F){this._overlay=t,this._element=r,this._viewContainerRef=s,this._menuItemInstance=m,this._dir=w,this._focusMonitor=T,this._ngZone=F,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=p.EMPTY,this._hoverSubscription=p.EMPTY,this._menuCloseSubscription=p.EMPTY,this._handleTouchStart=N=>{pE(N)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new Go,this.onMenuOpen=this.menuOpened,this.menuClosed=new Go,this.onMenuClose=this.menuClosed,this._scrollStrategy=o,this._parentMaterialMenu=u instanceof tM?u:void 0,r.nativeElement.addEventListener("touchstart",this._handleTouchStart,uz),m&&(m._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(r=>{this._destroyMenu(r),("click"===r||"tab"===r)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(r)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,uz),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const t=this._createOverlay(),r=t.getConfig(),s=r.positionStrategy;this._setPosition(s),r.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,t.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof tM&&(this.menu._startAnimation(),this.menu._directDescendantItems.changes.pipe(ff(this.menu.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu.close.emit()}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,r):this._element.nativeElement.focus(r)}updatePosition(){var t;null===(t=this._overlayRef)||void 0===t||t.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const r=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,r instanceof tM?(r._resetAnimation(),r.lazyContent?r._animationDone.pipe(Fc(s=>"void"===s.toState),uh(1),ff(r.lazyContent._attached)).subscribe({next:()=>r.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),r.lazyContent&&r.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let t=0,r=this.menu.parentMenu;for(;r;)t++,r=r.parentMenu;this.menu.setElevation(t)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new sk({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t){this.menu.setPositionClasses&&t.positionChanges.subscribe(r=>{const s="start"===r.connectionPair.overlayX?"after":"before",o="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>this.menu.setPositionClasses(s,o)):this.menu.setPositionClasses(s,o)})}_setPosition(t){let[r,s]="before"===this.menu.xPosition?["end","start"]:["start","end"],[o,u]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[m,w]=[o,u],[T,F]=[r,s],N=0;this.triggersSubmenu()?(F=r="before"===this.menu.xPosition?"start":"end",s=T="end"===r?"start":"end",N="bottom"===o?8:-8):this.menu.overlapTrigger||(m="top"===o?"bottom":"top",w="top"===u?"bottom":"top"),t.withPositions([{originX:r,originY:m,overlayX:T,overlayY:o,offsetY:N},{originX:s,originY:m,overlayX:F,overlayY:o,offsetY:N},{originX:r,originY:w,overlayX:T,overlayY:u,offsetY:-N},{originX:s,originY:w,overlayX:F,overlayY:u,offsetY:-N}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),r=this._overlayRef.detachments();return Ao(t,this._parentMaterialMenu?this._parentMaterialMenu.closed:is(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Fc(u=>u!==this._menuItemInstance),Fc(()=>this._menuOpen)):is(),r)}_handleMousedown(t){fE(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const r=t.keyCode;(13===r||32===r)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===r&&"ltr"===this.dir||37===r&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Fc(t=>t===this._menuItemInstance&&!t.disabled),sz(0,g2)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof tM&&this.menu._isAnimating?this.menu._animationDone.pipe(uh(1),sz(0,g2),ff(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new WE(this.menu.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(t){return new(t||n)(Bt(v0),Bt(Uo),Bt(ah),Bt(lz),Bt(yk,8),Bt(nT,10),Bt(h0,8),Bt(u0),Bt(mo))},n.\u0275dir=_i({type:n,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(t,r){1&t&&No("click",function(o){return r._handleClick(o)})("mousedown",function(o){return r._handleMousedown(o)})("keydown",function(o){return r._handleKeydown(o)}),2&t&&ia("aria-expanded",r.menuOpen||null)("aria-controls",r.menuOpen?r.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),bK=(()=>{class n extends yK{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ta(n)))(r||n)}}(),n.\u0275dir=_i({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[hs]}),n})(),xK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({providers:[vK],imports:[[I1,Ql,jE,IH],yE,Ql]}),n})();const wK=["*",[["mat-toolbar-row"]]],MK=["*","mat-toolbar-row"],CK=X1(class{constructor(n){this._elementRef=n}});let SK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=_i({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),EK=(()=>{class n extends CK{constructor(t,r,s){super(t),this._platform=r,this._document=s}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(Bt(Uo),Bt(gd),Bt(Gs))},n.\u0275cmp=or({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,s){if(1&t&&Gu(s,SK,5),2&t){let o;Ua(o=Ga())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&Zt("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[hs],ngContentSelectors:MK,decls:2,vars:0,template:function(t,r){1&t&&(af(wK),hd(0),hd(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),TK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({imports:[[Ql],Ql]}),n})(),DK=(()=>{class n{constructor(){this._listeners=[]}notify(t,r){for(let s of this._listeners)s(t,r)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(r=>t!==r)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const AK=["input"],IK=function(n){return{enterDuration:n}},RK=["*"],kK=new wi("mat-radio-default-options",{providedIn:"root",factory:function PK(){return{color:"accent"}}});let hz=0;const LK={provide:hf,useExisting:Zi(()=>bk),multi:!0};class dz{constructor(e,t){this.source=e,this.value=t}}const fz=new wi("MatRadioGroup");let FK=(()=>{class n{constructor(t){this._changeDetector=t,this._value=null,this._name="mat-radio-group-"+hz++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new Go}get name(){return this._name}set name(t){this._name=t,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(t){this._labelPosition="before"===t?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(t){this._selected=t,this.value=t?t.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(t){this._disabled=_u(t),this._markRadiosForCheck()}get required(){return this._required}set required(t){this._required=_u(t),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(t=>{t.name=this.name,t._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(r=>{r.checked=this.value===r.value,r.checked&&(this._selected=r)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new dz(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(t=>t._markForCheck())}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetector.markForCheck()}}return n.\u0275fac=function(t){return new(t||n)(Bt(lh))},n.\u0275dir=_i({type:n,inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required"},outputs:{change:"change"}}),n})(),bk=(()=>{class n extends FK{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ta(n)))(r||n)}}(),n.\u0275dir=_i({type:n,selectors:[["mat-radio-group"]],contentQueries:function(t,r,s){if(1&t&&Gu(s,xk,5),2&t){let o;Ua(o=Ga())&&(r._radios=o)}},hostAttrs:["role","radiogroup",1,"mat-radio-group"],exportAs:["matRadioGroup"],features:[ba([LK,{provide:fz,useExisting:n}]),hs]}),n})();class OK{constructor(e){this._elementRef=e}}const NK=ak(HX(OK));let BK=(()=>{class n extends NK{constructor(t,r,s,o,u,m,w,T){super(r),this._changeDetector=s,this._focusMonitor=o,this._radioDispatcher=u,this._providerOverride=w,this._uniqueId="mat-radio-"+ ++hz,this.id=this._uniqueId,this.change=new Go,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=t,this._noopAnimations="NoopAnimations"===m,T&&(this.tabIndex=l0(T,0)),this._removeUniqueSelectionListener=u.listen((F,N)=>{F!==this.id&&N===this.name&&(this.checked=!1)})}get checked(){return this._checked}set checked(t){const r=_u(t);this._checked!==r&&(this._checked=r,r&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!r&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),r&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===t),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(t){this._labelPosition=t}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(t){this._setDisabled(_u(t))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(t){this._required=_u(t)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(t){this._color=t}get inputId(){return`${this.id||this._uniqueId}-input`}focus(t,r){r?this._focusMonitor.focusVia(this._inputElement,r,t):this._inputElement.nativeElement.focus(t)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name)}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{!t&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new dz(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(t){t.stopPropagation()}_onInputInteraction(t){if(t.stopPropagation(),!this.checked&&!this.disabled){const r=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),r&&this.radioGroup._emitChangeEvent())}}_setDisabled(t){this._disabled!==t&&(this._disabled=t,this._changeDetector.markForCheck())}_updateTabIndex(){var t;const r=this.radioGroup;let s;if(s=r&&r.selected&&!this.disabled?r.selected===this?this.tabIndex:-1:this.tabIndex,s!==this._previousTabIndex){const o=null===(t=this._inputElement)||void 0===t?void 0:t.nativeElement;o&&(o.setAttribute("tabindex",s+""),this._previousTabIndex=s)}}}return n.\u0275fac=function(t){jv()},n.\u0275dir=_i({type:n,viewQuery:function(t,r){if(1&t&&fd(AK,5),2&t){let s;Ua(s=Ga())&&(r._inputElement=s.first)}},inputs:{id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"},features:[hs]}),n})(),xk=(()=>{class n extends BK{constructor(t,r,s,o,u,m,w,T){super(t,r,s,o,u,m,w,T)}}return n.\u0275fac=function(t){return new(t||n)(Bt(fz,8),Bt(Uo),Bt(lh),Bt(u0),Bt(DK),Bt(oy,8),Bt(kK,8),$h("tabindex"))},n.\u0275cmp=or({type:n,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(t,r){1&t&&No("focus",function(){return r._inputElement.nativeElement.focus()}),2&t&&(ia("tabindex",null)("id",r.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),Zt("mat-radio-checked",r.checked)("mat-radio-disabled",r.disabled)("_mat-animation-noopable",r._noopAnimations)("mat-primary","primary"===r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[hs],ngContentSelectors:RK,decls:13,vars:19,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input",3,"id","checked","disabled","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(t,r){if(1&t&&(af(),Jr(0,"label",0,1)(2,"span",2),xl(3,"span",3)(4,"span",4),Jr(5,"input",5,6),No("change",function(o){return r._onInputInteraction(o)})("click",function(o){return r._onInputClick(o)}),ts(),Jr(7,"span",7),xl(8,"span",8),ts()(),Jr(9,"span",9)(10,"span",10),ri(11,"\xa0"),ts(),hd(12),ts()()),2&t){const s=cp(1);ia("for",r.inputId),Fr(5),Zr("id",r.inputId)("checked",r.checked)("disabled",r.disabled)("required",r.required),ia("name",r.name)("value",r.value)("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedby),Fr(2),Zr("matRippleTrigger",s)("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",BF(17,IK,r._noopAnimations?0:150)),Fr(2),Zt("mat-radio-label-before","before"==r.labelPosition)}},directives:[K1],styles:[".mat-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.mat-radio-label{-webkit-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;opacity:0;transition:transform ease 280ms,background-color ease 280ms,opacity linear 1ms 280ms;width:20px;transform:scale(0.001);-webkit-print-color-adjust:exact;color-adjust:exact}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5);opacity:1;transition:transform ease 280ms,background-color ease 280ms}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-label-content{-webkit-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none;top:0;left:0}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{opacity:0;position:absolute;top:0;left:0;margin:0;width:100%;height:100%;cursor:inherit;z-index:-1}.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-ripple,.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-ripple{outline:solid 3px}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}\n"],encapsulation:2,changeDetection:0}),n})(),HK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({imports:[[jE,Ql],Ql]}),n})();function zK(n,e){if(1&n&&(eh(),xl(0,"circle",4)),2&n){const t=Bo(),r=cp(1);Ut("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),ia("r",t._getCircleRadius())}}function VK(n,e){if(1&n&&(eh(),xl(0,"circle",4)),2&n){const t=Bo(),r=cp(1);Ut("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(r)),ia("r",t._getCircleRadius())}}const GK=X1(class{constructor(n){this._elementRef=n}},"primary"),WK=new wi("mat-progress-spinner-default-options",{providedIn:"root",factory:function qK(){return{diameter:100}}});class qm extends GK{constructor(e,t,r,s,o,u,m,w){super(e),this._document=r,this._diameter=100,this._value=0,this._resizeSubscription=p.EMPTY,this.mode="determinate";const T=qm._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),T.has(r.head)||T.set(r.head,new Set([100])),this._noopAnimations="NoopAnimations"===s&&!!o&&!o._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),o&&(o.diameter&&(this.diameter=o.diameter),o.strokeWidth&&(this.strokeWidth=o.strokeWidth)),t.isBrowser&&t.SAFARI&&m&&u&&w&&(this._resizeSubscription=m.change(150).subscribe(()=>{"indeterminate"===this.mode&&w.run(()=>u.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=l0(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=l0(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,l0(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=cE(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){var t;const r=50*(null!==(t=e.currentScale)&&void 0!==t?t:1);return`${r}% ${r}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,r=qm._diameters;let s=r.get(e);if(!s||!s.has(t)){const o=this._document.createElement("style");o.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),o.textContent=this._getAnimationText(),e.appendChild(o),s||(s=new Set,r.set(e,s)),s.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}qm._diameters=new WeakMap,qm.\u0275fac=function(e){return new(e||qm)(Bt(Uo),Bt(gd),Bt(Gs,8),Bt(oy,8),Bt(WK),Bt(lh),Bt(vE),Bt(mo))},qm.\u0275cmp=or({type:qm,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(ia("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),Ut("width",t.diameter,"px")("height",t.diameter,"px"),Zt("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[hs],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(eh(),Jr(0,"svg",0,1),cs(2,zK,1,11,"circle",2),cs(3,VK,1,9,"circle",3),ts()),2&e&&(Ut("width",t.diameter,"px")("height",t.diameter,"px"),Zr("ngSwitch","indeterminate"===t.mode),ia("viewBox",t._getViewBox()),Fr(2),Zr("ngSwitchCase",!0),Fr(1),Zr("ngSwitchCase",!1))},directives:[s0,qS],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let ZK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({imports:[[Ql,I1],Ql]}),n})(),YK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({}),n})();function pz(n,e,t){n?nn(t,n,e):e()}const iT=l(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function mz(){return En((n,e)=>{let t=null;n._refCount++;const r=Dn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,o=t;t=null,s&&(!o||s===o)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class KK extends xn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,zi(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new p;const t=this.getSubject();e.add(this.source.subscribe(Dn(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=p.EMPTY)}return e}refCount(){return mz()(this)}}function QK(n,e,t,r,s){return(o,u)=>{let m=t,w=e,T=0;o.subscribe(Dn(u,F=>{const N=T++;w=m?n(w,F,N):(m=!0,F),r&&u.next(w)},s&&(()=>{m&&u.next(w),u.complete()})))}}function gz(n,e){return En(QK(n,e,arguments.length>=2,!0))}function Mk(n){return n<=0?()=>ei:En((e,t)=>{let r=[];e.subscribe(Dn(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function _z(n=$K){return En((e,t)=>{let r=!1;e.subscribe(Dn(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function $K(){return new iT}function vz(n){return En((e,t)=>{let r=!1;e.subscribe(Dn(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function y0(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Fc((s,o)=>n(s,o,r)):Xe,uh(1),t?vz(e):_z(()=>new iT))}class jm{constructor(e,t){this.id=e,this.url=t}}class Ck extends jm{constructor(e,t,r="imperative",s=null){super(e,t),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class nM extends jm{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class yz extends jm{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class tQ extends jm{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nQ extends jm{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iQ extends jm{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rQ extends jm{constructor(e,t,r,s,o){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class sQ extends jm{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oQ extends jm{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bz{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xz{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class aQ{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lQ{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cQ{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uQ{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wz{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const uo="primary";class hQ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function b0(n){return new hQ(n)}const Mz="ngNavigationCancelingError";function Sk(n){const e=Error("NavigationCancelingError: "+n);return e[Mz]=!0,e}function fQ(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let o=0;o<r.length;o++){const u=r[o],m=n[o];if(u.startsWith(":"))s[u.substring(1)]=m;else if(u!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function bp(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let o=0;o<t.length;o++)if(s=t[o],!Cz(n[s],e[s]))return!1;return!0}function Cz(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,o)=>r[o]===s)}return n===e}function Sz(n){return Array.prototype.concat.apply([],n)}function Ez(n){return n.length>0?n[n.length-1]:null}function iu(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function xp(n){return o1(n)?n:Zv(n)?js(Promise.resolve(n)):is(n)}const gQ={exact:function Az(n,e,t){if(!uy(n.segments,e.segments)||!rT(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Az(n.children[r],e.children[r],t))return!1;return!0},subset:Iz},Tz={exact:function _Q(n,e){return bp(n,e)},subset:function vQ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Cz(n[t],e[t]))},ignored:()=>!0};function Dz(n,e,t){return gQ[t.paths](n.root,e.root,t.matrixParams)&&Tz[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Iz(n,e,t){return Rz(n,e,e.segments,t)}function Rz(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!uy(s,t)||e.hasChildren()||!rT(s,t,r))}if(n.segments.length===t.length){if(!uy(n.segments,t)||!rT(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!Iz(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(uy(n.segments,s)&&rT(n.segments,s,r)&&n.children[uo])&&Rz(n.children[uo],e,o,r)}}function rT(n,e,t){return e.every((r,s)=>Tz[t](n[s].parameters,r.parameters))}class cy{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=b0(this.queryParams)),this._queryParamMap}toString(){return xQ.serialize(this)}}class wo{constructor(e,t){this.segments=e,this.children=t,this.parent=null,iu(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sT(this)}}class iM{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=b0(this.parameters)),this._parameterMap}toString(){return Oz(this)}}function uy(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class kz{}class Pz{parse(e){const t=new IQ(e);return new cy(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${rM(e.root,!0)}`,r=function CQ(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${oT(t)}=${oT(s)}`).join("&"):`${oT(t)}=${oT(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function wQ(n){return encodeURI(n)}(e.fragment)}`:""}`}}const xQ=new Pz;function sT(n){return n.segments.map(e=>Oz(e)).join("/")}function rM(n,e){if(!n.hasChildren())return sT(n);if(e){const t=n.children[uo]?rM(n.children[uo],!1):"",r=[];return iu(n.children,(s,o)=>{o!==uo&&r.push(`${o}:${rM(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function bQ(n,e){let t=[];return iu(n.children,(r,s)=>{s===uo&&(t=t.concat(e(r,s)))}),iu(n.children,(r,s)=>{s!==uo&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===uo?[rM(n.children[uo],!1)]:[`${s}:${rM(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[uo]?`${sT(n)}/${t[0]}`:`${sT(n)}/(${t.join("//")})`}}function Lz(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function oT(n){return Lz(n).replace(/%3B/gi,";")}function Ek(n){return Lz(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function aT(n){return decodeURIComponent(n)}function Fz(n){return aT(n.replace(/\+/g,"%20"))}function Oz(n){return`${Ek(n.path)}${function MQ(n){return Object.keys(n).map(e=>`;${Ek(e)}=${Ek(n[e])}`).join("")}(n.parameters)}`}const SQ=/^[^\/()?;=#]+/;function lT(n){const e=n.match(SQ);return e?e[0]:""}const EQ=/^[^=?&#]+/,DQ=/^[^&#]+/;class IQ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new wo([],{}):new wo([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[uo]=new wo(e,t)),r}parseSegment(){const e=lT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new iM(aT(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=lT(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=lT(this.remaining);s&&(r=s,this.capture(r))}e[aT(t)]=aT(r)}parseQueryParam(e){const t=function TQ(n){const e=n.match(EQ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function AQ(n){const e=n.match(DQ);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const s=Fz(t),o=Fz(r);if(e.hasOwnProperty(s)){let u=e[s];Array.isArray(u)||(u=[u],e[s]=u),u.push(o)}else e[s]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=lT(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let o;r.indexOf(":")>-1?(o=r.substr(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=uo);const u=this.parseChildren();t[o]=1===Object.keys(u).length?u[uo]:new wo([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Nz{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Tk(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Tk(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Dk(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Dk(e,this._root).map(t=>t.value)}}function Tk(n,e){if(n===e.value)return e;for(const t of e.children){const r=Tk(n,t);if(r)return r}return null}function Dk(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Dk(n,t);if(r.length)return r.unshift(e),r}return[]}class Zm{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function x0(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Bz extends Nz{constructor(e,t){super(e),this.snapshot=t,Ak(this,e)}toString(){return this.snapshot.toString()}}function Hz(n,e){const t=function RQ(n,e){const u=new cT([],{},{},"",{},uo,e,null,n.root,-1,{});return new Vz("",new Zm(u,[]))}(n,e),r=new _d([new iM("",{})]),s=new _d({}),o=new _d({}),u=new _d({}),m=new _d(""),w=new w0(r,s,u,m,o,uo,e,t.root);return w.snapshot=t.root,new Bz(new Zm(w,[]),t)}class w0{constructor(e,t,r,s,o,u,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=o,this.outlet=u,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ii(e=>b0(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ii(e=>b0(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zz(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],o=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(o.component)break;r--}}return function kQ(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class cT{constructor(e,t,r,s,o,u,m,w,T,F,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=o,this.outlet=u,this.component=m,this.routeConfig=w,this._urlSegment=T,this._lastPathIndex=F,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=b0(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=b0(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Vz extends Nz{constructor(e,t){super(t),this.url=e,Ak(this,t)}toString(){return Uz(this._root)}}function Ak(n,e){e.value._routerState=n,e.children.forEach(t=>Ak(n,t))}function Uz(n){const e=n.children.length>0?` { ${n.children.map(Uz).join(", ")} } `:"";return`${n.value}${e}`}function Ik(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,bp(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),bp(e.params,t.params)||n.params.next(t.params),function pQ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!bp(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),bp(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Rk(n,e){const t=bp(n.params,e.params)&&function yQ(n,e){return uy(n,e)&&n.every((t,r)=>bp(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Rk(n.parent,e.parent))}function sM(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function LQ(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return sM(n,r,s);return sM(n,r)})}(n,e,t);return new Zm(r,s)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const u=o.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(m=>sM(n,m)),u}}const r=function FQ(n){return new w0(new _d(n.url),new _d(n.params),new _d(n.queryParams),new _d(n.fragment),new _d(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(o=>sM(n,o));return new Zm(r,s)}}function uT(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function oM(n){return"object"==typeof n&&null!=n&&n.outlets}function kk(n,e,t,r,s){let o={};if(r&&iu(r,(m,w)=>{o[w]=Array.isArray(m)?m.map(T=>`${T}`):`${m}`}),n===e)return new cy(t,o,s);const u=Gz(n,e,t);return new cy(u,o,s)}function Gz(n,e,t){const r={};return iu(n.children,(s,o)=>{r[o]=s===e?t:Gz(s,e,t)}),new wo(n.segments,r)}class Wz{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&uT(r[0]))throw new Error("Root segment cannot have matrix parameters");const s=r.find(oM);if(s&&s!==Ez(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Pk{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function qz(n,e,t){if(n||(n=new wo([],{})),0===n.segments.length&&n.hasChildren())return hT(n,e,t);const r=function VQ(n,e,t){let r=0,s=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return o;const u=n.segments[s],m=t[r];if(oM(m))break;const w=`${m}`,T=r<t.length-1?t[r+1]:null;if(s>0&&void 0===w)break;if(w&&T&&"object"==typeof T&&void 0===T.outlets){if(!Zz(w,T,u))return o;r+=2}else{if(!Zz(w,{},u))return o;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new wo(n.segments.slice(0,r.pathIndex),{});return o.children[uo]=new wo(n.segments.slice(r.pathIndex),n.children),hT(o,0,s)}return r.match&&0===s.length?new wo(n.segments,{}):r.match&&!n.hasChildren()?Lk(n,e,t):r.match?hT(n,0,s):Lk(n,e,t)}function hT(n,e,t){if(0===t.length)return new wo(n.segments,{});{const r=function zQ(n){return oM(n[0])?n[0].outlets:{[uo]:n}}(t),s={};return iu(r,(o,u)=>{"string"==typeof o&&(o=[o]),null!==o&&(s[u]=qz(n.children[u],e,o))}),iu(n.children,(o,u)=>{void 0===r[u]&&(s[u]=o)}),new wo(n.segments,s)}}function Lk(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const o=t[s];if(oM(o)){const w=UQ(o.outlets);return new wo(r,w)}if(0===s&&uT(t[0])){r.push(new iM(n.segments[e].path,jz(t[0]))),s++;continue}const u=oM(o)?o.outlets[uo]:`${o}`,m=s<t.length-1?t[s+1]:null;u&&m&&uT(m)?(r.push(new iM(u,jz(m))),s+=2):(r.push(new iM(u,{})),s++)}return new wo(r,{})}function UQ(n){const e={};return iu(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Lk(new wo([],{}),0,t))}),e}function jz(n){const e={};return iu(n,(t,r)=>e[r]=`${t}`),e}function Zz(n,e,t){return n==t.path&&bp(e,t.parameters)}class WQ{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ik(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=x0(t);e.children.forEach(o=>{const u=o.value.outlet;this.deactivateRoutes(o,s[u],r),delete s[u]}),iu(s,(o,u)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const s=e.value,o=t?t.value:null;if(s===o)if(s.component){const u=r.getContext(s.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,o=x0(e);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],s);if(r&&r.outlet){const u=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,o=x0(e);for(const u of Object.keys(o))this.deactivateRouteAndItsChildren(o[u],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=x0(t);e.children.forEach(o=>{this.activateRoutes(o,s[o.value.outlet],r),this.forwardEvent(new uQ(o.value.snapshot))}),e.children.length&&this.forwardEvent(new lQ(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,o=t?t.value:null;if(Ik(s),s===o)if(s.component){const u=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const u=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),u.children.onOutletReAttached(m.contexts),u.attachRef=m.componentRef,u.route=m.route.value,u.outlet&&u.outlet.attach(m.componentRef,m.route.value),Ik(m.route.value),this.activateChildRoutes(e,null,u.children)}else{const m=function qQ(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(s.snapshot),w=m?m.module.componentFactoryResolver:null;u.attachRef=null,u.route=s,u.resolver=w,u.outlet&&u.outlet.activateWith(s,w),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class Fk{constructor(e,t){this.routes=e,this.module=t}}function w_(n){return"function"==typeof n}function hy(n){return n instanceof cy}const aM=Symbol("INITIAL_VALUE");function lM(){return yp(n=>function XK(...n){const e=Ui(n),t=Er(n),{args:r,keys:s}=S3(n);if(0===r.length)return js([],e);const o=new xn(function JK(n,e,t=Xe){return r=>{pz(e,()=>{const{length:s}=n,o=new Array(s);let u=s,m=s;for(let w=0;w<s;w++)pz(e,()=>{const T=js(n[w],e);let F=!1;T.subscribe(Dn(r,N=>{o[w]=N,F||(F=!0,m--),m||r.next(t(o.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,s?u=>E3(s,u):Xe));return t?o.pipe(kR(t)):o}(n.map(e=>e.pipe(uh(1),Um(aM)))).pipe(gz((e,t)=>{let r=!1;return t.reduce((s,o,u)=>s!==aM?s:(o===aM&&(r=!0),r||!1!==o&&u!==t.length-1&&!hy(o)?s:o),e)},aM),Fc(e=>e!==aM),ii(e=>hy(e)?e:!0===e),uh(1)))}class KQ{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new cM,this.attachRef=null}}class cM{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new KQ,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Yz=(()=>{class n{constructor(t,r,s,o,u){this.parentContexts=t,this.location=r,this.resolver=s,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new Go,this.deactivateEvents=new Go,this.attachEvents=new Go,this.detachEvents=new Go,this.name=o||uo,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const u=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new QQ(t,m,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(Bt(cM),Bt(ah),Bt(Xv),$h("name"),Bt(lh))},n.\u0275dir=_i({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class QQ{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===w0?this.route:e===cM?this.childContexts:this.parent.get(e,t)}}let Xz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=or({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&xl(0,"router-outlet")},directives:[Yz],encapsulation:2}),n})();function Jz(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];$Q(r,e$(e,r))}}function $Q(n,e){n.children&&Jz(n.children,e)}function e$(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Ok(n){const e=n.children&&n.children.map(Ok),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==uo&&(t.component=Xz),t}function bd(n){return n.outlet||uo}function Kz(n,e){const t=n.filter(r=>bd(r)===e);return t.push(...n.filter(r=>bd(r)!==e)),t}const Qz={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function dT(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Qz):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||fQ)(t,n,e);if(!o)return Object.assign({},Qz);const u={};iu(o.posParams,(w,T)=>{u[T]=w.path});const m=o.consumed.length>0?Object.assign(Object.assign({},u),o.consumed[o.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:m,positionalParamSegments:null!==(r=o.posParams)&&void 0!==r?r:{}}}function fT(n,e,t,r,s="corrected"){if(t.length>0&&function i$(n,e,t){return t.some(r=>pT(n,e,r)&&bd(r)!==uo)}(n,t,r)){const u=new wo(e,function n$(n,e,t,r){const s={};s[uo]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&bd(o)!==uo){const u=new wo([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,s[bd(o)]=u}return s}(n,e,r,new wo(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function r$(n,e,t){return t.some(r=>pT(n,e,r))}(n,t,r)){const u=new wo(n.segments,function t$(n,e,t,r,s,o){const u={};for(const m of r)if(pT(n,t,m)&&!s[bd(m)]){const w=new wo([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===o?n.segments.length:e.length,u[bd(m)]=w}return Object.assign(Object.assign({},s),u)}(n,e,t,r,n.children,s));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const o=new wo(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function pT(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function $z(n,e,t,r){return!!(bd(n)===r||r!==uo&&pT(e,t,n))&&("**"===n.path||dT(e,n,t).matched)}function e4(n,e,t){return 0===e.length&&!n.children[t]}class mT{constructor(e){this.segmentGroup=e||null}}class t4{constructor(e){this.urlTree=e}}function uM(n){return $1(new mT(n))}function n4(n){return $1(new t4(n))}class l${constructor(e,t,r,s,o){this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=o,this.allowRedirects=!0,this.ngModule=e.get(Fm)}apply(){const e=fT(this.urlTree.root,[],[],this.config).segmentGroup,t=new wo(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,uo).pipe(ii(o=>this.createUrlTree(Nk(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Gm(o=>{if(o instanceof t4)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof mT?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,uo).pipe(ii(s=>this.createUrlTree(Nk(s),e.queryParams,e.fragment))).pipe(Gm(s=>{throw s instanceof mT?this.noMatchError(s):s}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const s=e.segments.length>0?new wo([],{[uo]:e}):e;return new cy(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(ii(o=>new wo([],o))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const o of Object.keys(r.children))"primary"===o?s.unshift(o):s.push(o);return js(s).pipe(_0(o=>{const u=r.children[o],m=Kz(t,o);return this.expandSegmentGroup(e,m,u,o).pipe(ii(w=>({segment:w,outlet:o})))}),gz((o,u)=>(o[u.outlet]=u.segment,o),{}),function eQ(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Fc((s,o)=>n(s,o,r)):Xe,Mk(1),t?vz(e):_z(()=>new iT))}())}expandSegment(e,t,r,s,o,u){return js(r).pipe(_0(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,o,u).pipe(Gm(T=>{if(T instanceof mT)return is(null);throw T}))),y0(m=>!!m),Gm((m,w)=>{if(m instanceof iT||"EmptyError"===m.name)return e4(t,s,o)?is(new wo([],{})):uM(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,o,u,m){return $z(s,t,o,u)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,o,u):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,o,u):uM(t):uM(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,o,u){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,o,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?n4(o):this.lineralizeSegments(r,o).pipe(ln(u=>{const m=new wo(u,{});return this.expandSegment(e,m,t,u,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,o,u){const{matched:m,consumedSegments:w,remainingSegments:T,positionalParamSegments:F}=dT(t,s,o);if(!m)return uM(t);const N=this.applyRedirectCommands(w,s.redirectTo,F);return s.redirectTo.startsWith("/")?n4(N):this.lineralizeSegments(s,N).pipe(ln(Z=>this.expandSegment(e,t,r,Z.concat(T),u,!1)))}matchSegmentAgainstRoute(e,t,r,s,o){if("**"===r.path)return r.loadChildren?(r._loadedConfig?is(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe(ii(N=>(r._loadedConfig=N,new wo(s,{})))):is(new wo(s,{}));const{matched:u,consumedSegments:m,remainingSegments:w}=dT(t,r,s);return u?this.getChildConfig(e,r,s).pipe(ln(F=>{const N=F.module,Z=F.routes,{segmentGroup:Q,slicedSegments:le}=fT(t,m,w,Z),_e=new wo(Q.segments,Q.children);if(0===le.length&&_e.hasChildren())return this.expandChildren(N,Z,_e).pipe(ii(Ne=>new wo(m,Ne)));if(0===Z.length&&0===le.length)return is(new wo(m,{}));const xe=bd(r)===o;return this.expandSegment(N,_e,Z,le,xe?uo:o,!0).pipe(ii(ue=>new wo(m.concat(ue.segments),ue.children)))})):uM(t)}getChildConfig(e,t,r){return t.children?is(new Fk(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?is(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe(ln(s=>s?this.configLoader.load(e.injector,t).pipe(ii(o=>(t._loadedConfig=o,o))):function o$(n){return $1(Sk(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):is(new Fk([],e))}runCanLoadGuards(e,t,r){const s=t.canLoad;return s&&0!==s.length?is(s.map(u=>{const m=e.get(u);let w;if(function ZQ(n){return n&&w_(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!w_(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return xp(w)})).pipe(lM(),nu(u=>{if(!hy(u))return;const m=Sk(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw m.url=u,m}),ii(u=>!0===u)):is(!0)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return is(r);if(s.numberOfChildren>1||!s.children[uo])return $1(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));s=s.children[uo]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,s){const o=this.createSegmentGroup(e,t.root,r,s);return new cy(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return iu(e,(s,o)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[o]=t[m]}else r[o]=s}),r}createSegmentGroup(e,t,r,s){const o=this.createSegments(e,t.segments,r,s);let u={};return iu(t.children,(m,w)=>{u[w]=this.createSegmentGroup(e,m,r,s)}),new wo(o,u)}createSegments(e,t,r,s){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,s):this.findOrReturn(o,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}function Nk(n){const e={};for(const r of Object.keys(n.children)){const o=Nk(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function c$(n){if(1===n.numberOfChildren&&n.children[uo]){const e=n.children[uo];return new wo(n.segments.concat(e.segments),e.children)}return n}(new wo(n.segments,e))}class r4{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class gT{constructor(e,t){this.component=e,this.route=t}}function h$(n,e,t){const r=n._root;return hM(r,e?e._root:null,t,[r.value])}function _T(n,e,t){const r=function f$(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function hM(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=x0(e);return n.children.forEach(u=>{(function p$(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,u=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(u&&o.routeConfig===u.routeConfig){const w=function m$(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!uy(n.url,e.url);case"pathParamsOrQueryParamsChange":return!uy(n.url,e.url)||!bp(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rk(n,e)||!bp(n.queryParams,e.queryParams);default:return!Rk(n,e)}}(u,o,o.routeConfig.runGuardsAndResolvers);w?s.canActivateChecks.push(new r4(r)):(o.data=u.data,o._resolvedData=u._resolvedData),hM(n,e,o.component?m?m.children:null:t,r,s),w&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new gT(m.outlet.component,u))}else u&&dM(e,m,s),s.canActivateChecks.push(new r4(r)),hM(n,null,o.component?m?m.children:null:t,r,s)})(u,o[u.value.outlet],t,r.concat([u.value]),s),delete o[u.value.outlet]}),iu(o,(u,m)=>dM(u,t.getContext(m),s)),s}function dM(n,e,t){const r=x0(n),s=n.value;iu(r,(o,u)=>{dM(o,s.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new gT(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}class C${}function s4(n){return new xn(e=>e.error(n))}class E${constructor(e,t,r,s,o,u){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=u}recognize(){const e=fT(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,uo);if(null===t)return null;const r=new cT([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},uo,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new Zm(r,t),o=new Vz(this.url,s);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(e){const t=e.value,r=zz(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const o of Object.keys(t.children)){const u=t.children[o],m=Kz(e,o),w=this.processSegmentGroup(m,u,o);if(null===w)return null;r.push(...w)}const s=o4(r);return function T$(n){n.sort((e,t)=>e.value.outlet===uo?-1:t.value.outlet===uo?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}processSegment(e,t,r,s){for(const o of e){const u=this.processSegmentAgainstRoute(o,t,r,s);if(null!==u)return u}return e4(t,r,s)?[]:null}processSegmentAgainstRoute(e,t,r,s){if(e.redirectTo||!$z(e,t,r,s))return null;let o,u=[],m=[];if("**"===e.path){const Q=r.length>0?Ez(r).parameters:{};o=new cT(r,Q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,c4(e),bd(e),e.component,e,a4(t),l4(t)+r.length,u4(e))}else{const Q=dT(t,e,r);if(!Q.matched)return null;u=Q.consumedSegments,m=Q.remainingSegments,o=new cT(u,Q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,c4(e),bd(e),e.component,e,a4(t),l4(t)+u.length,u4(e))}const w=function D$(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:T,slicedSegments:F}=fT(t,u,m,w.filter(Q=>void 0===Q.redirectTo),this.relativeLinkResolution);if(0===F.length&&T.hasChildren()){const Q=this.processChildren(w,T);return null===Q?null:[new Zm(o,Q)]}if(0===w.length&&0===F.length)return[new Zm(o,[])];const N=bd(e)===s,Z=this.processSegment(w,T,F,N?uo:s);return null===Z?null:[new Zm(o,Z)]}}function A$(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function o4(n){const e=[],t=new Set;for(const r of n){if(!A$(r)){e.push(r);continue}const s=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=o4(r.children);e.push(new Zm(r.value,s))}return e.filter(r=>!t.has(r))}function a4(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function l4(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function c4(n){return n.data||{}}function u4(n){return n.resolve||{}}function h4(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Bk(n){return yp(e=>{const t=n(e);return t?js(t).pipe(ii(()=>e)):is(e)})}class N$ extends class O${shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Hk=new wi("ROUTES");class d4{constructor(e,t,r,s){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=s}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const s=this.loadModuleFactory(t.loadChildren).pipe(ii(o=>{this.onLoadEndListener&&this.onLoadEndListener(t);const u=o.create(e);return new Fk(Sz(u.injector.get(Hk,void 0,Hr.Self|Hr.Optional)).map(Ok),u)}),Gm(o=>{throw t._loader$=void 0,o}));return t._loader$=new KK(s,()=>new en).pipe(mz()),t._loader$}loadModuleFactory(e){return xp(e()).pipe(ln(t=>t instanceof LF?is(t):js(this.compiler.compileModuleAsync(t))))}}class H${shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function z$(n){throw n}function V$(n,e,t){return e.parse("/")}function f4(n,e){return is(null)}const U$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},G$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Oh=(()=>{class n{constructor(t,r,s,o,u,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=o,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new en,this.errorHandler=z$,this.malformedUriErrorHandler=V$,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:f4,afterPreactivation:f4},this.urlHandlingStrategy=new H$,this.routeReuseStrategy=new N$,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(Fm),this.console=u.get(vO);const N=u.get(mo);this.isNgZoneEnabled=N instanceof mo&&mo.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function mQ(){return new cy(new wo([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new d4(u,m,Z=>this.triggerEvent(new bz(Z)),Z=>this.triggerEvent(new xz(Z))),this.routerState=Hz(this.currentUrlTree,this.rootComponentType),this.transitions=new _d({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Fc(s=>0!==s.id),ii(s=>Object.assign(Object.assign({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),yp(s=>{let o=!1,u=!1;return is(s).pipe(nu(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),yp(m=>{const w=this.browserUrlTree.toString(),T=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||T)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return p4(m.source)&&(this.browserUrlTree=m.extractedUrl),is(m).pipe(yp(N=>{const Z=this.transitions.getValue();return r.next(new Ck(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),Z!==this.transitions.getValue()?ei:Promise.resolve(N)}),function u$(n,e,t,r){return yp(s=>function a$(n,e,t,r,s){return new l$(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe(ii(o=>Object.assign(Object.assign({},s),{urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),nu(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function I$(n,e,t,r,s){return ln(o=>function S$(n,e,t,r,s="emptyOnly",o="legacy"){try{const u=new E$(n,e,t,r,s,o).recognize();return null===u?s4(new C$):is(u)}catch(u){return s4(u)}}(n,e,o.urlAfterRedirects,t(o.urlAfterRedirects),r,s).pipe(ii(u=>Object.assign(Object.assign({},o),{targetSnapshot:u}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),nu(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const Q=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(Q,N)}this.browserUrlTree=N.urlAfterRedirects}const Z=new nQ(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(Z)}));if(T&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Z,extractedUrl:Q,source:le,restoredState:_e,extras:xe}=m,fe=new Ck(Z,this.serializeUrl(Q),le,_e);r.next(fe);const ue=Hz(Q,this.rootComponentType).snapshot;return is(Object.assign(Object.assign({},m),{targetSnapshot:ue,urlAfterRedirects:Q,extras:Object.assign(Object.assign({},xe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),ei}),Bk(m=>{const{targetSnapshot:w,id:T,extractedUrl:F,rawUrl:N,extras:{skipLocationChange:Z,replaceUrl:Q}}=m;return this.hooks.beforePreactivation(w,{navigationId:T,appliedUrlTree:F,rawUrlTree:N,skipLocationChange:!!Z,replaceUrl:!!Q})}),nu(m=>{const w=new iQ(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),ii(m=>Object.assign(Object.assign({},m),{guards:h$(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function g$(n,e){return ln(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:o,canDeactivateChecks:u}}=t;return 0===u.length&&0===o.length?is(Object.assign(Object.assign({},t),{guardsResult:!0})):function _$(n,e,t,r){return js(n).pipe(ln(s=>function M$(n,e,t,r,s){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?is(o.map(m=>{const w=_T(m,e,s);let T;if(function JQ(n){return n&&w_(n.canDeactivate)}(w))T=xp(w.canDeactivate(n,e,t,r));else{if(!w_(w))throw new Error("Invalid CanDeactivate guard");T=xp(w(n,e,t,r))}return T.pipe(y0())})).pipe(lM()):is(!0)}(s.component,s.route,t,e,r)),y0(s=>!0!==s,!0))}(u,r,s,n).pipe(ln(m=>m&&function jQ(n){return"boolean"==typeof n}(m)?function v$(n,e,t,r){return js(e).pipe(_0(s=>ZE(function b$(n,e){return null!==n&&e&&e(new aQ(n)),is(!0)}(s.route.parent,r),function y$(n,e){return null!==n&&e&&e(new cQ(n)),is(!0)}(s.route,r),function w$(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(u=>function d$(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>ck(()=>is(u.guards.map(w=>{const T=_T(w,u.node,t);let F;if(function XQ(n){return n&&w_(n.canActivateChild)}(T))F=xp(T.canActivateChild(r,n));else{if(!w_(T))throw new Error("Invalid CanActivateChild guard");F=xp(T(r,n))}return F.pipe(y0())})).pipe(lM())));return is(o).pipe(lM())}(n,s.path,t),function x$(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return is(!0);const s=r.map(o=>ck(()=>{const u=_T(o,e,t);let m;if(function YQ(n){return n&&w_(n.canActivate)}(u))m=xp(u.canActivate(e,n));else{if(!w_(u))throw new Error("Invalid CanActivate guard");m=xp(u(e,n))}return m.pipe(y0())}));return is(s).pipe(lM())}(n,s.route,t))),y0(s=>!0!==s,!0))}(r,o,n,e):is(m)),ii(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),nu(m=>{if(hy(m.guardsResult)){const T=Sk(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw T.url=m.guardsResult,T}const w=new rQ(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),Fc(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),Bk(m=>{if(m.guards.canActivateChecks.length)return is(m).pipe(nu(w=>{const T=new sQ(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(T)}),yp(w=>{let T=!1;return is(w).pipe(function R$(n,e){return ln(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return is(t);let o=0;return js(s).pipe(_0(u=>function k$(n,e,t,r){return function P$(n,e,t,r){const s=h4(n);if(0===s.length)return is({});const o={};return js(s).pipe(ln(u=>function L$(n,e,t,r){const s=_T(n,e,r);return xp(s.resolve?s.resolve(e,t):s(e,t))}(n[u],e,t,r).pipe(nu(m=>{o[u]=m}))),Mk(1),ln(()=>h4(o).length===s.length?is(o):ei))}(n._resolve,n,e,r).pipe(ii(o=>(n._resolvedData=o,n.data=Object.assign(Object.assign({},n.data),zz(n,t).resolve),null)))}(u.route,r,n,e)),nu(()=>o++),Mk(1),ln(u=>o===s.length?is(t):ei))})}(this.paramsInheritanceStrategy,this.ngModule.injector),nu({next:()=>T=!0,complete:()=>{T||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),nu(w=>{const T=new oQ(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(T)}))}),Bk(m=>{const{targetSnapshot:w,id:T,extractedUrl:F,rawUrl:N,extras:{skipLocationChange:Z,replaceUrl:Q}}=m;return this.hooks.afterPreactivation(w,{navigationId:T,appliedUrlTree:F,rawUrlTree:N,skipLocationChange:!!Z,replaceUrl:!!Q})}),ii(m=>{const w=function PQ(n,e,t){const r=sM(n,e._root,t?t._root:void 0);return new Bz(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),nu(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>ii(r=>(new WQ(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),nu({next(){o=!0},complete(){o=!0}}),HH(()=>{var m;o||u||this.cancelNavigationTransition(s,`Navigation ID ${s.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===s.id&&(this.currentNavigation=null)}),Gm(m=>{if(u=!0,function dQ(n){return n&&n[Mz]}(m)){const w=hy(m.url);w||(this.navigated=!0,this.restoreHistory(s,!0));const T=new yz(s.id,this.serializeUrl(s.extractedUrl),m.message);r.next(T),w?setTimeout(()=>{const F=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||p4(s.source)};this.scheduleNavigation(F,"imperative",null,N,{resolve:s.resolve,reject:s.reject,promise:s.promise})},0):s.resolve(!1)}else{this.restoreHistory(s,!0);const w=new tQ(s.id,this.serializeUrl(s.extractedUrl),m);r.next(w);try{s.resolve(this.errorHandler(m))}catch(T){s.reject(T)}}return ei}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var s;const o={replaceUrl:!0},u=(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null;if(u){const w=Object.assign({},u);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(o.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Jz(t),this.config=t.map(Ok),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:o,fragment:u,queryParamsHandling:m,preserveFragment:w}=r,T=s||this.routerState.root,F=w?this.currentUrlTree.fragment:u;let N=null;switch(m){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),o);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=o||null}return null!==N&&(N=this.removeEmptyProps(N)),function OQ(n,e,t,r,s){if(0===t.length)return kk(e.root,e.root,e.root,r,s);const o=function NQ(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Wz(!0,0,n);let e=0,t=!1;const r=n.reduce((s,o,u)=>{if("object"==typeof o&&null!=o){if(o.outlets){const m={};return iu(o.outlets,(w,T)=>{m[T]="string"==typeof w?w.split("/"):w}),[...s,{outlets:m}]}if(o.segmentPath)return[...s,o.segmentPath]}return"string"!=typeof o?[...s,o]:0===u?(o.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,o]},[]);return new Wz(t,e,r)}(t);if(o.toRoot())return kk(e.root,e.root,new wo([],{}),r,s);const u=function BQ(n,e,t){if(n.isAbsolute)return new Pk(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const o=t.snapshot._urlSegment;return new Pk(o,o===e.root,0)}const r=uT(n.commands[0])?0:1;return function HQ(n,e,t){let r=n,s=e,o=t;for(;o>s;){if(o-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new Pk(r,!1,s-o)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(o,e,n),m=u.processChildren?hT(u.segmentGroup,u.index,o.commands):qz(u.segmentGroup,u.index,o.commands);return kk(e.root,u.segmentGroup,m,r,s)}(T,this.currentUrlTree,t,N,null!=F?F:null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=hy(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function W$(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?Object.assign({},U$):!1===r?Object.assign({},G$):r,hy(t))return Dz(this.currentUrlTree,t,s);const o=this.parseUrl(t);return Dz(this.currentUrlTree,o,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const o=t[s];return null!=o&&(r[s]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new nM(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,o,u){var m,w;if(this.disposed)return Promise.resolve(!1);let T,F,N;u?(T=u.resolve,F=u.reject,N=u.promise):N=new Promise((le,_e)=>{T=le,F=_e});const Z=++this.navigationId;let Q;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),Q=s&&s.\u0275routerPageId?s.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):Q=0,this.setTransition({id:Z,targetPageId:Q,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:T,reject:F,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(le=>Promise.reject(le))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),o=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",o):this.location.go(s,"",o)}restoreHistory(t,r=!1){var s,o;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)||0===u?this.currentUrlTree===(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const s=new yz(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){jv()},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})();function p4(n){return"imperative"!==n}class m4{}class g4{preload(e,t){return is(null)}}let _4=(()=>{class n{constructor(t,r,s,o){this.router=t,this.injector=s,this.preloadingStrategy=o,this.loader=new d4(s,r,w=>t.triggerEvent(new bz(w)),w=>t.triggerEvent(new xz(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(Fc(t=>t instanceof nM),_0(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Fm);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const o of r)if(o.loadChildren&&!o.canLoad&&o._loadedConfig){const u=o._loadedConfig;s.push(this.processRoutes(u.module,u.routes))}else o.loadChildren&&!o.canLoad?s.push(this.preloadConfig(t,o)):o.children&&s.push(this.processRoutes(t,o.children));return js(s).pipe(qn(),ii(o=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?is(r._loadedConfig):this.loader.load(t.injector,r)).pipe(ln(o=>(r._loadedConfig=o,this.processRoutes(o.module,o.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(Sn(Oh),Sn(yO),Sn(Aa),Sn(m4))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})(),Uk=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ck?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof nM&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof wz&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new wz(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){jv()},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})();const dy=new wi("ROUTER_CONFIGURATION"),v4=new wi("ROUTER_FORROOT_GUARD"),Y$=[T1,{provide:kz,useClass:Pz},{provide:Oh,useFactory:function $$(n,e,t,r,s,o,u={},m,w){const T=new Oh(null,n,e,t,r,s,Sz(o));return m&&(T.urlHandlingStrategy=m),w&&(T.routeReuseStrategy=w),function eee(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,T),u.enableTracing&&T.events.subscribe(F=>{var N,Z;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${F.constructor.name}`),console.log(F.toString()),console.log(F),null===(Z=console.groupEnd)||void 0===Z||Z.call(console)}),T},deps:[kz,cM,T1,Aa,yO,Hk,dy,[class B${},new Xc],[class F${},new Xc]]},cM,{provide:w0,useFactory:function tee(n){return n.routerState.root},deps:[Oh]},_4,g4,class Z${preload(e,t){return t().pipe(Gm(()=>is(null)))}},{provide:dy,useValue:{enableTracing:!1}}];function X$(){return new CO("Router",Oh)}let y4=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Y$,b4(t),{provide:v4,useFactory:Q$,deps:[[Oh,new Xc,new ed]]},{provide:dy,useValue:r||{}},{provide:n0,useFactory:K$,deps:[Qv,[new zf(uR),new Xc],dy]},{provide:Uk,useFactory:J$,deps:[Oh,Xq,dy]},{provide:m4,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:g4},{provide:CO,multi:!0,useFactory:X$},[Gk,{provide:JI,multi:!0,useFactory:nee,deps:[Gk]},{provide:x4,useFactory:iee,deps:[Gk]},{provide:_O,multi:!0,useExisting:x4}]]}}static forChild(t){return{ngModule:n,providers:[b4(t)]}}}return n.\u0275fac=function(t){return new(t||n)(Sn(v4,8),Sn(Oh,8))},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({}),n})();function J$(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Uk(n,e,t)}function K$(n,e,t={}){return t.useHash?new P8(n,e):new WO(n,e)}function Q$(n){return"guarded"}function b4(n){return[{provide:Ix,multi:!0,useValue:n},{provide:Hk,multi:!0,useValue:n}]}let Gk=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new en}appInitializer(){return this.injector.get(I8,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const s=new Promise(m=>r=m),o=this.injector.get(Oh),u=this.injector.get(dy);return"disabled"===u.initialNavigation?(o.setUpLocationChangeListener(),r(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(o.hooks.afterPreactivation=()=>this.initNavigation?is(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),o.initialNavigation()):r(!0),s})}bootstrapListener(t){const r=this.injector.get(dy),s=this.injector.get(_4),o=this.injector.get(Uk),u=this.injector.get(Oh),m=this.injector.get(RS);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&u.initialNavigation(),s.setUpPreloading(),o.init(),u.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(Sn(Aa))},n.\u0275prov=ki({token:n,factory:n.\u0275fac}),n})();function nee(n){return n.appInitializer.bind(n)}function iee(n){return n.bootstrapListener.bind(n)}const x4=new wi("Router Initializer"),see=[];let oee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Cs({imports:[[y4.forRoot(see)],y4]}),n})(),vT=(()=>{class n{constructor(){this.body=[["NumPiers_x",2],["NumPiers_y",3],["Width",10],["Length",35],["Height",12],["PierThickness",1],["Divisions_x",3],["Divisions_y",3],["Divisions_z",3],["GirderWidth",11],["GirderThickness",.3],["GirderEdgeHeight",1],["GirderEdgeThickness",.25]],this.vtk=null,this.pre=[["Young's modulus (kPa)",1e7],["Poisson's ratio",.3],["Density (t/m^3)",1.8],["Ground level (m)",.1],["Fixed boundary (x-min) (m)",-1e5],["Fixed boundary (x-max) (m)",1e5],["Fixed boundary (y-min) (m)",-1e5],["Fixed boundary (y-max) (m)",31e5]],this.isCalcrated=!1,this.result_vtk=new Array}getPlantFEMJson(){const t={};for(const r of this.body){const s=r[0];let o=r[1];if("string"==typeof o){const u=[];for(const m of o.split(","))u.push(parseFloat(m));t[s]=u}else t[s]=o}return JSON.stringify(t,null,2)}get_vtk(){return this.vtk}set_vtk(t){this.vtk=t}get_calc_url(t){let r="https://plantfem.org:5555/static_analysis/uploadfile/";return r+="?YoungModulus="+this.pre[0][1],r+="&PoissonRatio="+this.pre[1][1],r+="&Density="+this.pre[2][1],r+="&ground_level="+this.pre[3][1],r+="&fix_boundary_xmin="+this.pre[4][1],r+="&fix_boundary_xmax="+this.pre[5][1],r+="&fix_boundary_ymin="+this.pre[6][1],r+="&fix_boundary_ymax="+this.pre[7][1],r+="&filename="+t,r}get_result_vtk(t){return this.result_vtk[t]}set_result_vtk(t,r){this.result_vtk[r]=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var aee=A(861);const vu=1001,fc=1003,kl=1006,S_=1009,gM=1012,E_=1015,I0=1016,R0=1020,yu=1023,fy=1026,k0=1027,P0=2400,L0=2401,T_=3e3,hl=3001,_M=35044,vM=35048;class py{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const s=this._listeners[e];if(void 0!==s){const o=s.indexOf(t);-1!==o&&s.splice(o,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const r=this._listeners[e.type];if(void 0!==r){e.target=this;const s=r.slice(0);for(let o=0,u=s.length;o<u;o++)s[o].call(this,e);e.target=null}}}const ru=[];for(let n=0;n<256;n++)ru[n]=(n<16?"0":"")+n.toString(16);const my=Math.PI/180,yM=180/Math.PI;function Nh(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(ru[255&n]+ru[n>>8&255]+ru[n>>16&255]+ru[n>>24&255]+"-"+ru[255&e]+ru[e>>8&255]+"-"+ru[e>>16&15|64]+ru[e>>24&255]+"-"+ru[63&t|128]+ru[t>>8&255]+"-"+ru[t>>16&255]+ru[t>>24&255]+ru[255&r]+ru[r>>8&255]+ru[r>>16&255]+ru[r>>24&255]).toUpperCase()}function su(n,e,t){return Math.max(e,Math.min(t,n))}function bM(n,e,t){return(1-t)*n+t*e}function rP(n){return 0==(n&n-1)&&0!==n}function iV(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}class ui{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6],this.y=s[1]*t+s[4]*r+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),s=Math.sin(t),o=this.x-e.x,u=this.y-e.y;return this.x=o*r-u*s+e.x,this.y=o*s+u*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}ui.prototype.isVector2=!0;class Oc{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,s,o,u,m,w,T){const F=this.elements;return F[0]=e,F[1]=s,F[2]=m,F[3]=t,F[4]=o,F[5]=w,F[6]=r,F[7]=u,F[8]=T,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,s=t.elements,o=this.elements,u=r[0],m=r[3],w=r[6],T=r[1],F=r[4],N=r[7],Z=r[2],Q=r[5],le=r[8],_e=s[0],xe=s[3],fe=s[6],ue=s[1],Ne=s[4],Re=s[7],Ye=s[2],st=s[5],ht=s[8];return o[0]=u*_e+m*ue+w*Ye,o[3]=u*xe+m*Ne+w*st,o[6]=u*fe+m*Re+w*ht,o[1]=T*_e+F*ue+N*Ye,o[4]=T*xe+F*Ne+N*st,o[7]=T*fe+F*Re+N*ht,o[2]=Z*_e+Q*ue+le*Ye,o[5]=Z*xe+Q*Ne+le*st,o[8]=Z*fe+Q*Re+le*ht,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],s=e[2],o=e[3],u=e[4],m=e[5],w=e[6],T=e[7],F=e[8];return t*u*F-t*m*T-r*o*F+r*m*w+s*o*T-s*u*w}invert(){const e=this.elements,t=e[0],r=e[1],s=e[2],o=e[3],u=e[4],m=e[5],w=e[6],T=e[7],F=e[8],N=F*u-m*T,Z=m*w-F*o,Q=T*o-u*w,le=t*N+r*Z+s*Q;if(0===le)return this.set(0,0,0,0,0,0,0,0,0);const _e=1/le;return e[0]=N*_e,e[1]=(s*T-F*r)*_e,e[2]=(m*r-s*u)*_e,e[3]=Z*_e,e[4]=(F*t-s*w)*_e,e[5]=(s*o-m*t)*_e,e[6]=Q*_e,e[7]=(r*w-T*t)*_e,e[8]=(u*t-r*o)*_e,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,s,o,u,m){const w=Math.cos(o),T=Math.sin(o);return this.set(r*w,r*T,-r*(w*u+T*m)+u+e,-s*T,s*w,-s*(-T*u+w*m)+m+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),s=this.elements,o=s[0],u=s[3],m=s[6],w=s[1],T=s[4],F=s[7];return s[0]=t*o+r*w,s[3]=t*u+r*T,s[6]=t*m+r*F,s[1]=-r*o+t*w,s[4]=-r*u+t*T,s[7]=-r*m+t*F,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let s=0;s<9;s++)if(t[s]!==r[s])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function rV(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}function xM(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}Oc.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const sV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},mf={h:0,s:0,l:0},IT={h:0,s:0,l:0};function sP(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function N0(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function oP(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let B0,rr=(()=>{class n{constructor(t,r,s){return void 0===r&&void 0===s?this.set(t):this.setRGB(t,r,s)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,r,s){return this.r=t,this.g=r,this.b=s,this}setHSL(t,r,s){if(t=function iP(n,e){return(n%e+e)%e}(t,1),r=su(r,0,1),s=su(s,0,1),0===r)this.r=this.g=this.b=s;else{const o=s<=.5?s*(1+r):s+r-s*r,u=2*s-o;this.r=sP(u,o,t+1/3),this.g=sP(u,o,t),this.b=sP(u,o,t-1/3)}return this}setStyle(t){function r(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let o;const m=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m)){const w=parseFloat(o[1])/360,T=parseInt(o[2],10)/100,F=parseInt(o[3],10)/100;return r(o[4]),this.setHSL(w,T,F)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=s[1],u=o.length;if(3===u)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const r=sV[t.toLowerCase()];return void 0!==r?this.setHex(r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=N0(t.r),this.g=N0(t.g),this.b=N0(t.b),this}copyLinearToSRGB(t){return this.r=oP(t.r),this.g=oP(t.g),this.b=oP(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const r=this.r,s=this.g,o=this.b,u=Math.max(r,s,o),m=Math.min(r,s,o);let w,T;const F=(m+u)/2;if(m===u)w=0,T=0;else{const N=u-m;switch(T=F<=.5?N/(u+m):N/(2-u-m),u){case r:w=(s-o)/N+(s<o?6:0);break;case s:w=(o-r)/N+2;break;case o:w=(r-s)/N+4}w/=6}return t.h=w,t.s=T,t.l=F,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,r,s){return this.getHSL(mf),mf.h+=t,mf.s+=r,mf.l+=s,this.setHSL(mf.h,mf.s,mf.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,s){return this.r=t.r+(r.r-t.r)*s,this.g=t.g+(r.g-t.g)*s,this.b=t.b+(r.b-t.b)*s,this}lerpHSL(t,r){this.getHSL(mf),t.getHSL(IT);const s=bM(mf.h,IT.h,r),o=bM(mf.s,IT.s,r),u=bM(mf.l,IT.l,r);return this.setHSL(s,o,u),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return n.NAMES=sV,n})();rr.prototype.isColor=!0,rr.prototype.r=1,rr.prototype.g=1,rr.prototype.b=1;class gy{static getDataURL(e){if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===B0&&(B0=xM("canvas")),B0.width=e.width,B0.height=e.height;const r=B0.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=B0}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=xM("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const s=r.getImageData(0,0,e.width,e.height),o=s.data;for(let u=0;u<o.length;u++)o[u]=255*N0(o[u]/255);return r.putImageData(s,0,0),t}if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t[r]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*N0(t[r]/255)):N0(t[r]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let bte=0;class Ec extends py{constructor(e=Ec.DEFAULT_IMAGE,t=Ec.DEFAULT_MAPPING,r=vu,s=vu,o=kl,u=1008,m=yu,w=S_,T=1,F=T_){super(),Object.defineProperty(this,"id",{value:bte++}),this.uuid=Nh(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=u,this.anisotropy=T,this.format=m,this.internalFormat=null,this.type=w,this.offset=new ui(0,0),this.repeat=new ui(1,1),this.center=new ui(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Oc,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=F,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const s=this.image;if(void 0===s.uuid&&(s.uuid=Nh()),!t&&void 0===e.images[s.uuid]){let o;if(Array.isArray(s)){o=[];for(let u=0,m=s.length;u<m;u++)o.push(aP(s[u].isDataTexture?s[u].image:s[u]))}else o=aP(s);e.images[s.uuid]={uuid:s.uuid,url:o}}r.image=s.uuid}return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case vu:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case vu:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function aP(n){return"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?gy.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Ec.DEFAULT_IMAGE=void 0,Ec.DEFAULT_MAPPING=300,Ec.prototype.isTexture=!0;class xa{constructor(e=0,t=0,r=0,s=1){this.x=e,this.y=t,this.z=r,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,s){return this.x=e,this.y=t,this.z=r,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,s=this.z,o=this.w,u=e.elements;return this.x=u[0]*t+u[4]*r+u[8]*s+u[12]*o,this.y=u[1]*t+u[5]*r+u[9]*s+u[13]*o,this.z=u[2]*t+u[6]*r+u[10]*s+u[14]*o,this.w=u[3]*t+u[7]*r+u[11]*s+u[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,s,o;const w=e.elements,T=w[0],F=w[4],N=w[8],Z=w[1],Q=w[5],le=w[9],_e=w[2],xe=w[6],fe=w[10];if(Math.abs(F-Z)<.01&&Math.abs(N-_e)<.01&&Math.abs(le-xe)<.01){if(Math.abs(F+Z)<.1&&Math.abs(N+_e)<.1&&Math.abs(le+xe)<.1&&Math.abs(T+Q+fe-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const Ne=(T+1)/2,Re=(Q+1)/2,Ye=(fe+1)/2,st=(F+Z)/4,ht=(N+_e)/4,Et=(le+xe)/4;return Ne>Re&&Ne>Ye?Ne<.01?(r=0,s=.707106781,o=.707106781):(r=Math.sqrt(Ne),s=st/r,o=ht/r):Re>Ye?Re<.01?(r=.707106781,s=0,o=.707106781):(s=Math.sqrt(Re),r=st/s,o=Et/s):Ye<.01?(r=.707106781,s=.707106781,o=0):(o=Math.sqrt(Ye),r=ht/o,s=Et/o),this.set(r,s,o,t),this}let ue=Math.sqrt((xe-le)*(xe-le)+(N-_e)*(N-_e)+(Z-F)*(Z-F));return Math.abs(ue)<.001&&(ue=1),this.x=(xe-le)/ue,this.y=(N-_e)/ue,this.z=(Z-F)/ue,this.w=Math.acos((T+Q+fe-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}xa.prototype.isVector4=!0;class xd extends py{constructor(e,t,r={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new xa(0,0,e,t),this.scissorTest=!1,this.viewport=new xa(0,0,e,t),this.texture=new Ec(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.internalFormat=void 0!==r.internalFormat?r.internalFormat:null,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:kl,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0!==r.stencilBuffer&&r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}xd.prototype.isWebGLRenderTarget=!0,class xte extends xd{constructor(e,t,r){super(e,t);const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone()}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let s=0,o=this.texture.length;s<o;s++)this.texture[s].image.width=e,this.texture[s].image.height=t,this.texture[s].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class lP extends xd{constructor(e,t,r={}){super(e,t,r),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===r.ignoreDepth||r.ignoreDepth,this.useRenderToTexture=void 0!==r.useRenderToTexture&&r.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(e){return super.copy.call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}lP.prototype.isWebGLMultisampleRenderTarget=!0;class bu{constructor(e=0,t=0,r=0,s=1){this._x=e,this._y=t,this._z=r,this._w=s}static slerp(e,t,r,s){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,s)}static slerpFlat(e,t,r,s,o,u,m){let w=r[s+0],T=r[s+1],F=r[s+2],N=r[s+3];const Z=o[u+0],Q=o[u+1],le=o[u+2],_e=o[u+3];if(0===m)return e[t+0]=w,e[t+1]=T,e[t+2]=F,void(e[t+3]=N);if(1===m)return e[t+0]=Z,e[t+1]=Q,e[t+2]=le,void(e[t+3]=_e);if(N!==_e||w!==Z||T!==Q||F!==le){let xe=1-m;const fe=w*Z+T*Q+F*le+N*_e,ue=fe>=0?1:-1,Ne=1-fe*fe;if(Ne>Number.EPSILON){const Ye=Math.sqrt(Ne),st=Math.atan2(Ye,fe*ue);xe=Math.sin(xe*st)/Ye,m=Math.sin(m*st)/Ye}const Re=m*ue;if(w=w*xe+Z*Re,T=T*xe+Q*Re,F=F*xe+le*Re,N=N*xe+_e*Re,xe===1-m){const Ye=1/Math.sqrt(w*w+T*T+F*F+N*N);w*=Ye,T*=Ye,F*=Ye,N*=Ye}}e[t]=w,e[t+1]=T,e[t+2]=F,e[t+3]=N}static multiplyQuaternionsFlat(e,t,r,s,o,u){const m=r[s],w=r[s+1],T=r[s+2],F=r[s+3],N=o[u],Z=o[u+1],Q=o[u+2],le=o[u+3];return e[t]=m*le+F*N+w*Q-T*Z,e[t+1]=w*le+F*Z+T*N-m*Q,e[t+2]=T*le+F*Q+m*Z-w*N,e[t+3]=F*le-m*N-w*Z-T*Q,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,s){return this._x=e,this._y=t,this._z=r,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,s=e._y,o=e._z,u=e._order,m=Math.cos,w=Math.sin,T=m(r/2),F=m(s/2),N=m(o/2),Z=w(r/2),Q=w(s/2),le=w(o/2);switch(u){case"XYZ":this._x=Z*F*N+T*Q*le,this._y=T*Q*N-Z*F*le,this._z=T*F*le+Z*Q*N,this._w=T*F*N-Z*Q*le;break;case"YXZ":this._x=Z*F*N+T*Q*le,this._y=T*Q*N-Z*F*le,this._z=T*F*le-Z*Q*N,this._w=T*F*N+Z*Q*le;break;case"ZXY":this._x=Z*F*N-T*Q*le,this._y=T*Q*N+Z*F*le,this._z=T*F*le+Z*Q*N,this._w=T*F*N-Z*Q*le;break;case"ZYX":this._x=Z*F*N-T*Q*le,this._y=T*Q*N+Z*F*le,this._z=T*F*le-Z*Q*N,this._w=T*F*N+Z*Q*le;break;case"YZX":this._x=Z*F*N+T*Q*le,this._y=T*Q*N+Z*F*le,this._z=T*F*le-Z*Q*N,this._w=T*F*N-Z*Q*le;break;case"XZY":this._x=Z*F*N-T*Q*le,this._y=T*Q*N-Z*F*le,this._z=T*F*le+Z*Q*N,this._w=T*F*N+Z*Q*le;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+u)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,s=Math.sin(r);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],s=t[4],o=t[8],u=t[1],m=t[5],w=t[9],T=t[2],F=t[6],N=t[10],Z=r+m+N;if(Z>0){const Q=.5/Math.sqrt(Z+1);this._w=.25/Q,this._x=(F-w)*Q,this._y=(o-T)*Q,this._z=(u-s)*Q}else if(r>m&&r>N){const Q=2*Math.sqrt(1+r-m-N);this._w=(F-w)/Q,this._x=.25*Q,this._y=(s+u)/Q,this._z=(o+T)/Q}else if(m>N){const Q=2*Math.sqrt(1+m-r-N);this._w=(o-T)/Q,this._x=(s+u)/Q,this._y=.25*Q,this._z=(w+F)/Q}else{const Q=2*Math.sqrt(1+N-r-m);this._w=(u-s)/Q,this._x=(o+T)/Q,this._y=(w+F)/Q,this._z=.25*Q}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(su(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(0===r)return this;const s=Math.min(1,t/r);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,s=e._y,o=e._z,u=e._w,m=t._x,w=t._y,T=t._z,F=t._w;return this._x=r*F+u*m+s*T-o*w,this._y=s*F+u*w+o*m-r*T,this._z=o*F+u*T+r*w-s*m,this._w=u*F-r*m-s*w-o*T,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const r=this._x,s=this._y,o=this._z,u=this._w;let m=u*e._w+r*e._x+s*e._y+o*e._z;if(m<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,m=-m):this.copy(e),m>=1)return this._w=u,this._x=r,this._y=s,this._z=o,this;const w=1-m*m;if(w<=Number.EPSILON){const Q=1-t;return this._w=Q*u+t*this._w,this._x=Q*r+t*this._x,this._y=Q*s+t*this._y,this._z=Q*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const T=Math.sqrt(w),F=Math.atan2(T,m),N=Math.sin((1-t)*F)/T,Z=Math.sin(t*F)/T;return this._w=u*N+this._w*Z,this._x=r*N+this._x*Z,this._y=s*N+this._y*Z,this._z=o*N+this._z*Z,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),s=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(s),r*Math.sin(o),r*Math.cos(o),t*Math.sin(s))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}bu.prototype.isQuaternion=!0;class ct{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}set(e,t,r){return void 0===r&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(oV.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(oV.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[3]*r+o[6]*s,this.y=o[1]*t+o[4]*r+o[7]*s,this.z=o[2]*t+o[5]*r+o[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,s=this.z,o=e.elements,u=1/(o[3]*t+o[7]*r+o[11]*s+o[15]);return this.x=(o[0]*t+o[4]*r+o[8]*s+o[12])*u,this.y=(o[1]*t+o[5]*r+o[9]*s+o[13])*u,this.z=(o[2]*t+o[6]*r+o[10]*s+o[14])*u,this}applyQuaternion(e){const t=this.x,r=this.y,s=this.z,o=e.x,u=e.y,m=e.z,w=e.w,T=w*t+u*s-m*r,F=w*r+m*t-o*s,N=w*s+o*r-u*t,Z=-o*t-u*r-m*s;return this.x=T*w+Z*-o+F*-m-N*-u,this.y=F*w+Z*-u+N*-o-T*-m,this.z=N*w+Z*-m+T*-u-F*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*s,this.y=o[1]*t+o[5]*r+o[9]*s,this.z=o[2]*t+o[6]*r+o[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,s=e.y,o=e.z,u=t.x,m=t.y,w=t.z;return this.x=s*w-o*m,this.y=o*u-r*w,this.z=r*m-s*u,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return cP.copy(this).projectOnVector(e),this.sub(cP)}reflect(e){return this.sub(cP.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(su(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,s=this.z-e.z;return t*t+r*r+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const s=Math.sin(t)*e;return this.x=s*Math.sin(r),this.y=Math.cos(t)*e,this.z=s*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,r=Math.sqrt(1-zG(e,2));return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}ct.prototype.isVector3=!0;const cP=new ct,oV=new bu;class wd{constructor(e=new ct(1/0,1/0,1/0),t=new ct(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,s=1/0,o=-1/0,u=-1/0,m=-1/0;for(let w=0,T=e.length;w<T;w+=3){const F=e[w],N=e[w+1],Z=e[w+2];F<t&&(t=F),N<r&&(r=N),Z<s&&(s=Z),F>o&&(o=F),N>u&&(u=N),Z>m&&(m=Z)}return this.min.set(t,r,s),this.max.set(o,u,m),this}setFromBufferAttribute(e){let t=1/0,r=1/0,s=1/0,o=-1/0,u=-1/0,m=-1/0;for(let w=0,T=e.count;w<T;w++){const F=e.getX(w),N=e.getY(w),Z=e.getZ(w);F<t&&(t=F),N<r&&(r=N),Z<s&&(s=Z),F>o&&(o=F),N>u&&(u=N),Z>m&&(m=Z)}return this.min.set(t,r,s),this.max.set(o,u,m),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=_y.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(void 0!==r)if(t&&null!=r.attributes&&void 0!==r.attributes.position){const o=r.attributes.position;for(let u=0,m=o.count;u<m;u++)_y.fromBufferAttribute(o,u).applyMatrix4(e.matrixWorld),this.expandByPoint(_y)}else null===r.boundingBox&&r.computeBoundingBox(),uP.copy(r.boundingBox),uP.applyMatrix4(e.matrixWorld),this.union(uP);const s=e.children;for(let o=0,u=s.length;o<u;o++)this.expandByObject(s[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,_y),_y.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(wM),RT.subVectors(this.max,wM),H0.subVectors(e.a,wM),z0.subVectors(e.b,wM),V0.subVectors(e.c,wM),D_.subVectors(z0,H0),A_.subVectors(V0,z0),vy.subVectors(H0,V0);let t=[0,-D_.z,D_.y,0,-A_.z,A_.y,0,-vy.z,vy.y,D_.z,0,-D_.x,A_.z,0,-A_.x,vy.z,0,-vy.x,-D_.y,D_.x,0,-A_.y,A_.x,0,-vy.y,vy.x,0];return!(!hP(t,H0,z0,V0,RT)||(t=[1,0,0,0,1,0,0,0,1],!hP(t,H0,z0,V0,RT)))&&(kT.crossVectors(D_,A_),t=[kT.x,kT.y,kT.z],hP(t,H0,z0,V0,RT))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return _y.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(_y).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Ym[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ym[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ym[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ym[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ym[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ym[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ym[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ym[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ym)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}wd.prototype.isBox3=!0;const Ym=[new ct,new ct,new ct,new ct,new ct,new ct,new ct,new ct],_y=new ct,uP=new wd,H0=new ct,z0=new ct,V0=new ct,D_=new ct,A_=new ct,vy=new ct,wM=new ct,RT=new ct,kT=new ct,yy=new ct;function hP(n,e,t,r,s){for(let o=0,u=n.length-3;o<=u;o+=3){yy.fromArray(n,o);const m=s.x*Math.abs(yy.x)+s.y*Math.abs(yy.y)+s.z*Math.abs(yy.z),w=e.dot(yy),T=t.dot(yy),F=r.dot(yy);if(Math.max(-Math.max(w,T,F),Math.min(w,T,F))>m)return!1}return!0}const wte=new wd,aV=new ct,PT=new ct,dP=new ct;class by{constructor(e=new ct,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;void 0!==t?r.copy(t):wte.setFromPoints(e).getCenter(r);let s=0;for(let o=0,u=e.length;o<u;o++)s=Math.max(s,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){dP.subVectors(e,this.center);const t=dP.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),s=.5*(r-this.radius);this.center.add(dP.multiplyScalar(s/r)),this.radius+=s}return this}union(e){return!0===this.center.equals(e.center)?PT.set(0,0,1).multiplyScalar(e.radius):PT.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(aV.copy(e.center).add(PT)),this.expandByPoint(aV.copy(e.center).sub(PT)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Xm=new ct,fP=new ct,LT=new ct,I_=new ct,pP=new ct,FT=new ct,mP=new ct;class xy{constructor(e=new ct,t=new ct(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Xm)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Xm.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Xm.copy(this.direction).multiplyScalar(t).add(this.origin),Xm.distanceToSquared(e))}distanceSqToSegment(e,t,r,s){fP.copy(e).add(t).multiplyScalar(.5),LT.copy(t).sub(e).normalize(),I_.copy(this.origin).sub(fP);const o=.5*e.distanceTo(t),u=-this.direction.dot(LT),m=I_.dot(this.direction),w=-I_.dot(LT),T=I_.lengthSq(),F=Math.abs(1-u*u);let N,Z,Q,le;if(F>0)if(N=u*w-m,Z=u*m-w,le=o*F,N>=0)if(Z>=-le)if(Z<=le){const _e=1/F;N*=_e,Z*=_e,Q=N*(N+u*Z+2*m)+Z*(u*N+Z+2*w)+T}else Z=o,N=Math.max(0,-(u*Z+m)),Q=-N*N+Z*(Z+2*w)+T;else Z=-o,N=Math.max(0,-(u*Z+m)),Q=-N*N+Z*(Z+2*w)+T;else Z<=-le?(N=Math.max(0,-(-u*o+m)),Z=N>0?-o:Math.min(Math.max(-o,-w),o),Q=-N*N+Z*(Z+2*w)+T):Z<=le?(N=0,Z=Math.min(Math.max(-o,-w),o),Q=Z*(Z+2*w)+T):(N=Math.max(0,-(u*o+m)),Z=N>0?o:Math.min(Math.max(-o,-w),o),Q=-N*N+Z*(Z+2*w)+T);else Z=u>0?-o:o,N=Math.max(0,-(u*Z+m)),Q=-N*N+Z*(Z+2*w)+T;return r&&r.copy(this.direction).multiplyScalar(N).add(this.origin),s&&s.copy(LT).multiplyScalar(Z).add(fP),Q}intersectSphere(e,t){Xm.subVectors(e.center,this.origin);const r=Xm.dot(this.direction),s=Xm.dot(Xm)-r*r,o=e.radius*e.radius;if(s>o)return null;const u=Math.sqrt(o-s),m=r-u,w=r+u;return m<0&&w<0?null:this.at(m<0?w:m,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return null===r?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,s,o,u,m,w;const T=1/this.direction.x,F=1/this.direction.y,N=1/this.direction.z,Z=this.origin;return T>=0?(r=(e.min.x-Z.x)*T,s=(e.max.x-Z.x)*T):(r=(e.max.x-Z.x)*T,s=(e.min.x-Z.x)*T),F>=0?(o=(e.min.y-Z.y)*F,u=(e.max.y-Z.y)*F):(o=(e.max.y-Z.y)*F,u=(e.min.y-Z.y)*F),r>u||o>s||((o>r||r!=r)&&(r=o),(u<s||s!=s)&&(s=u),N>=0?(m=(e.min.z-Z.z)*N,w=(e.max.z-Z.z)*N):(m=(e.max.z-Z.z)*N,w=(e.min.z-Z.z)*N),r>w||m>s)||((m>r||r!=r)&&(r=m),(w<s||s!=s)&&(s=w),s<0)?null:this.at(r>=0?r:s,t)}intersectsBox(e){return null!==this.intersectBox(e,Xm)}intersectTriangle(e,t,r,s,o){pP.subVectors(t,e),FT.subVectors(r,e),mP.crossVectors(pP,FT);let m,u=this.direction.dot(mP);if(u>0){if(s)return null;m=1}else{if(!(u<0))return null;m=-1,u=-u}I_.subVectors(this.origin,e);const w=m*this.direction.dot(FT.crossVectors(I_,FT));if(w<0)return null;const T=m*this.direction.dot(pP.cross(I_));if(T<0||w+T>u)return null;const F=-m*I_.dot(mP);return F<0?null:this.at(F/u,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Nr{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,s,o,u,m,w,T,F,N,Z,Q,le,_e,xe){const fe=this.elements;return fe[0]=e,fe[4]=t,fe[8]=r,fe[12]=s,fe[1]=o,fe[5]=u,fe[9]=m,fe[13]=w,fe[2]=T,fe[6]=F,fe[10]=N,fe[14]=Z,fe[3]=Q,fe[7]=le,fe[11]=_e,fe[15]=xe,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Nr).fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,s=1/U0.setFromMatrixColumn(e,0).length(),o=1/U0.setFromMatrixColumn(e,1).length(),u=1/U0.setFromMatrixColumn(e,2).length();return t[0]=r[0]*s,t[1]=r[1]*s,t[2]=r[2]*s,t[3]=0,t[4]=r[4]*o,t[5]=r[5]*o,t[6]=r[6]*o,t[7]=0,t[8]=r[8]*u,t[9]=r[9]*u,t[10]=r[10]*u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,r=e.x,s=e.y,o=e.z,u=Math.cos(r),m=Math.sin(r),w=Math.cos(s),T=Math.sin(s),F=Math.cos(o),N=Math.sin(o);if("XYZ"===e.order){const Z=u*F,Q=u*N,le=m*F,_e=m*N;t[0]=w*F,t[4]=-w*N,t[8]=T,t[1]=Q+le*T,t[5]=Z-_e*T,t[9]=-m*w,t[2]=_e-Z*T,t[6]=le+Q*T,t[10]=u*w}else if("YXZ"===e.order){const Z=w*F,Q=w*N,le=T*F,_e=T*N;t[0]=Z+_e*m,t[4]=le*m-Q,t[8]=u*T,t[1]=u*N,t[5]=u*F,t[9]=-m,t[2]=Q*m-le,t[6]=_e+Z*m,t[10]=u*w}else if("ZXY"===e.order){const Z=w*F,Q=w*N,le=T*F,_e=T*N;t[0]=Z-_e*m,t[4]=-u*N,t[8]=le+Q*m,t[1]=Q+le*m,t[5]=u*F,t[9]=_e-Z*m,t[2]=-u*T,t[6]=m,t[10]=u*w}else if("ZYX"===e.order){const Z=u*F,Q=u*N,le=m*F,_e=m*N;t[0]=w*F,t[4]=le*T-Q,t[8]=Z*T+_e,t[1]=w*N,t[5]=_e*T+Z,t[9]=Q*T-le,t[2]=-T,t[6]=m*w,t[10]=u*w}else if("YZX"===e.order){const Z=u*w,Q=u*T,le=m*w,_e=m*T;t[0]=w*F,t[4]=_e-Z*N,t[8]=le*N+Q,t[1]=N,t[5]=u*F,t[9]=-m*F,t[2]=-T*F,t[6]=Q*N+le,t[10]=Z-_e*N}else if("XZY"===e.order){const Z=u*w,Q=u*T,le=m*w,_e=m*T;t[0]=w*F,t[4]=-N,t[8]=T*F,t[1]=Z*N+_e,t[5]=u*F,t[9]=Q*N-le,t[2]=le*N-Q,t[6]=m*F,t[10]=_e*N+Z}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Mte,e,Cte)}lookAt(e,t,r){const s=this.elements;return Bh.subVectors(e,t),0===Bh.lengthSq()&&(Bh.z=1),Bh.normalize(),R_.crossVectors(r,Bh),0===R_.lengthSq()&&(1===Math.abs(r.z)?Bh.x+=1e-4:Bh.z+=1e-4,Bh.normalize(),R_.crossVectors(r,Bh)),R_.normalize(),OT.crossVectors(Bh,R_),s[0]=R_.x,s[4]=OT.x,s[8]=Bh.x,s[1]=R_.y,s[5]=OT.y,s[9]=Bh.y,s[2]=R_.z,s[6]=OT.z,s[10]=Bh.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,s=t.elements,o=this.elements,u=r[0],m=r[4],w=r[8],T=r[12],F=r[1],N=r[5],Z=r[9],Q=r[13],le=r[2],_e=r[6],xe=r[10],fe=r[14],ue=r[3],Ne=r[7],Re=r[11],Ye=r[15],st=s[0],ht=s[4],Et=s[8],hn=s[12],Kt=s[1],We=s[5],It=s[9],Ht=s[13],it=s[2],kt=s[6],et=s[10],bt=s[14],Gt=s[3],pn=s[7],Qt=s[11],mn=s[15];return o[0]=u*st+m*Kt+w*it+T*Gt,o[4]=u*ht+m*We+w*kt+T*pn,o[8]=u*Et+m*It+w*et+T*Qt,o[12]=u*hn+m*Ht+w*bt+T*mn,o[1]=F*st+N*Kt+Z*it+Q*Gt,o[5]=F*ht+N*We+Z*kt+Q*pn,o[9]=F*Et+N*It+Z*et+Q*Qt,o[13]=F*hn+N*Ht+Z*bt+Q*mn,o[2]=le*st+_e*Kt+xe*it+fe*Gt,o[6]=le*ht+_e*We+xe*kt+fe*pn,o[10]=le*Et+_e*It+xe*et+fe*Qt,o[14]=le*hn+_e*Ht+xe*bt+fe*mn,o[3]=ue*st+Ne*Kt+Re*it+Ye*Gt,o[7]=ue*ht+Ne*We+Re*kt+Ye*pn,o[11]=ue*Et+Ne*It+Re*et+Ye*Qt,o[15]=ue*hn+Ne*Ht+Re*bt+Ye*mn,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],s=e[8],o=e[12],u=e[1],m=e[5],w=e[9],T=e[13],F=e[2],N=e[6],Z=e[10],Q=e[14];return e[3]*(+o*w*N-s*T*N-o*m*Z+r*T*Z+s*m*Q-r*w*Q)+e[7]*(+t*w*Q-t*T*Z+o*u*Z-s*u*Q+s*T*F-o*w*F)+e[11]*(+t*T*N-t*m*Q-o*u*N+r*u*Q+o*m*F-r*T*F)+e[15]*(-s*m*F-t*w*N+t*m*Z+s*u*N-r*u*Z+r*w*F)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],s=e[2],o=e[3],u=e[4],m=e[5],w=e[6],T=e[7],F=e[8],N=e[9],Z=e[10],Q=e[11],le=e[12],_e=e[13],xe=e[14],fe=e[15],ue=N*xe*T-_e*Z*T+_e*w*Q-m*xe*Q-N*w*fe+m*Z*fe,Ne=le*Z*T-F*xe*T-le*w*Q+u*xe*Q+F*w*fe-u*Z*fe,Re=F*_e*T-le*N*T+le*m*Q-u*_e*Q-F*m*fe+u*N*fe,Ye=le*N*w-F*_e*w-le*m*Z+u*_e*Z+F*m*xe-u*N*xe,st=t*ue+r*Ne+s*Re+o*Ye;if(0===st)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ht=1/st;return e[0]=ue*ht,e[1]=(_e*Z*o-N*xe*o-_e*s*Q+r*xe*Q+N*s*fe-r*Z*fe)*ht,e[2]=(m*xe*o-_e*w*o+_e*s*T-r*xe*T-m*s*fe+r*w*fe)*ht,e[3]=(N*w*o-m*Z*o-N*s*T+r*Z*T+m*s*Q-r*w*Q)*ht,e[4]=Ne*ht,e[5]=(F*xe*o-le*Z*o+le*s*Q-t*xe*Q-F*s*fe+t*Z*fe)*ht,e[6]=(le*w*o-u*xe*o-le*s*T+t*xe*T+u*s*fe-t*w*fe)*ht,e[7]=(u*Z*o-F*w*o+F*s*T-t*Z*T-u*s*Q+t*w*Q)*ht,e[8]=Re*ht,e[9]=(le*N*o-F*_e*o-le*r*Q+t*_e*Q+F*r*fe-t*N*fe)*ht,e[10]=(u*_e*o-le*m*o+le*r*T-t*_e*T-u*r*fe+t*m*fe)*ht,e[11]=(F*m*o-u*N*o-F*r*T+t*N*T+u*r*Q-t*m*Q)*ht,e[12]=Ye*ht,e[13]=(F*_e*s-le*N*s+le*r*Z-t*_e*Z-F*r*xe+t*N*xe)*ht,e[14]=(le*m*s-u*_e*s-le*r*w+t*_e*w+u*r*xe-t*m*xe)*ht,e[15]=(u*N*s-F*m*s+F*r*w-t*N*w-u*r*Z+t*m*Z)*ht,this}scale(e){const t=this.elements,r=e.x,s=e.y,o=e.z;return t[0]*=r,t[4]*=s,t[8]*=o,t[1]*=r,t[5]*=s,t[9]*=o,t[2]*=r,t[6]*=s,t[10]*=o,t[3]*=r,t[7]*=s,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),s=Math.sin(t),o=1-r,u=e.x,m=e.y,w=e.z,T=o*u,F=o*m;return this.set(T*u+r,T*m-s*w,T*w+s*m,0,T*m+s*w,F*m+r,F*w-s*u,0,T*w-s*m,F*w+s*u,o*w*w+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,s,o,u){return this.set(1,r,o,0,e,1,u,0,t,s,1,0,0,0,0,1),this}compose(e,t,r){const s=this.elements,o=t._x,u=t._y,m=t._z,w=t._w,T=o+o,F=u+u,N=m+m,Z=o*T,Q=o*F,le=o*N,_e=u*F,xe=u*N,fe=m*N,ue=w*T,Ne=w*F,Re=w*N,Ye=r.x,st=r.y,ht=r.z;return s[0]=(1-(_e+fe))*Ye,s[1]=(Q+Re)*Ye,s[2]=(le-Ne)*Ye,s[3]=0,s[4]=(Q-Re)*st,s[5]=(1-(Z+fe))*st,s[6]=(xe+ue)*st,s[7]=0,s[8]=(le+Ne)*ht,s[9]=(xe-ue)*ht,s[10]=(1-(Z+_e))*ht,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,r){const s=this.elements;let o=U0.set(s[0],s[1],s[2]).length();const u=U0.set(s[4],s[5],s[6]).length(),m=U0.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),e.x=s[12],e.y=s[13],e.z=s[14],gf.copy(this);const T=1/o,F=1/u,N=1/m;return gf.elements[0]*=T,gf.elements[1]*=T,gf.elements[2]*=T,gf.elements[4]*=F,gf.elements[5]*=F,gf.elements[6]*=F,gf.elements[8]*=N,gf.elements[9]*=N,gf.elements[10]*=N,t.setFromRotationMatrix(gf),r.x=o,r.y=u,r.z=m,this}makePerspective(e,t,r,s,o,u){void 0===u&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const m=this.elements,T=2*o/(r-s),F=(t+e)/(t-e),N=(r+s)/(r-s),Z=-(u+o)/(u-o),Q=-2*u*o/(u-o);return m[0]=2*o/(t-e),m[4]=0,m[8]=F,m[12]=0,m[1]=0,m[5]=T,m[9]=N,m[13]=0,m[2]=0,m[6]=0,m[10]=Z,m[14]=Q,m[3]=0,m[7]=0,m[11]=-1,m[15]=0,this}makeOrthographic(e,t,r,s,o,u){const m=this.elements,w=1/(t-e),T=1/(r-s),F=1/(u-o),N=(t+e)*w,Z=(r+s)*T,Q=(u+o)*F;return m[0]=2*w,m[4]=0,m[8]=0,m[12]=-N,m[1]=0,m[5]=2*T,m[9]=0,m[13]=-Z,m[2]=0,m[6]=0,m[10]=-2*F,m[14]=-Q,m[3]=0,m[7]=0,m[11]=0,m[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let s=0;s<16;s++)if(t[s]!==r[s])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}Nr.prototype.isMatrix4=!0;const U0=new ct,gf=new Nr,Mte=new ct(0,0,0),Cte=new ct(1,1,1),R_=new ct,OT=new ct,Bh=new ct,lV=new Nr,cV=new bu;class G0{constructor(e=0,t=0,r=0,s=G0.DefaultOrder){this._x=e,this._y=t,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,s=this._order){return this._x=e,this._y=t,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const s=e.elements,o=s[0],u=s[4],m=s[8],w=s[1],T=s[5],F=s[9],N=s[2],Z=s[6],Q=s[10];switch(t){case"XYZ":this._y=Math.asin(su(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-F,Q),this._z=Math.atan2(-u,o)):(this._x=Math.atan2(Z,T),this._z=0);break;case"YXZ":this._x=Math.asin(-su(F,-1,1)),Math.abs(F)<.9999999?(this._y=Math.atan2(m,Q),this._z=Math.atan2(w,T)):(this._y=Math.atan2(-N,o),this._z=0);break;case"ZXY":this._x=Math.asin(su(Z,-1,1)),Math.abs(Z)<.9999999?(this._y=Math.atan2(-N,Q),this._z=Math.atan2(-u,T)):(this._y=0,this._z=Math.atan2(w,o));break;case"ZYX":this._y=Math.asin(-su(N,-1,1)),Math.abs(N)<.9999999?(this._x=Math.atan2(Z,Q),this._z=Math.atan2(w,o)):(this._x=0,this._z=Math.atan2(-u,T));break;case"YZX":this._z=Math.asin(su(w,-1,1)),Math.abs(w)<.9999999?(this._x=Math.atan2(-F,T),this._y=Math.atan2(-N,o)):(this._x=0,this._y=Math.atan2(m,Q));break;case"XZY":this._z=Math.asin(-su(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(Z,T),this._y=Math.atan2(m,o)):(this._x=Math.atan2(-F,Q),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return lV.makeRotationFromQuaternion(e),this.setFromRotationMatrix(lV,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return cV.setFromEuler(this),this.setFromQuaternion(cV,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new ct(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}G0.prototype.isEuler=!0,G0.DefaultOrder="XYZ",G0.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class gP{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let Ste=0;const uV=new ct,W0=new bu,Jm=new Nr,NT=new ct,MM=new ct,Ete=new ct,Tte=new bu,hV=new ct(1,0,0),dV=new ct(0,1,0),fV=new ct(0,0,1),Dte={type:"added"},pV={type:"removed"};class ra extends py{constructor(){super(),Object.defineProperty(this,"id",{value:Ste++}),this.uuid=Nh(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ra.DefaultUp.clone();const e=new ct,t=new G0,r=new bu,s=new ct(1,1,1);t._onChange(function o(){r.setFromEuler(t,!1)}),r._onChange(function u(){t.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Nr},normalMatrix:{value:new Oc}}),this.matrix=new Nr,this.matrixWorld=new Nr,this.matrixAutoUpdate=ra.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new gP,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return W0.setFromAxisAngle(e,t),this.quaternion.multiply(W0),this}rotateOnWorldAxis(e,t){return W0.setFromAxisAngle(e,t),this.quaternion.premultiply(W0),this}rotateX(e){return this.rotateOnAxis(hV,e)}rotateY(e){return this.rotateOnAxis(dV,e)}rotateZ(e){return this.rotateOnAxis(fV,e)}translateOnAxis(e,t){return uV.copy(e).applyQuaternion(this.quaternion),this.position.add(uV.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(hV,e)}translateY(e){return this.translateOnAxis(dV,e)}translateZ(e){return this.translateOnAxis(fV,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Jm.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?NT.copy(e):NT.set(e,t,r);const s=this.parent;this.updateWorldMatrix(!0,!1),MM.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Jm.lookAt(MM,NT,this.up):Jm.lookAt(NT,MM,this.up),this.quaternion.setFromRotationMatrix(Jm),s&&(Jm.extractRotation(s.matrixWorld),W0.setFromRotationMatrix(Jm),this.quaternion.premultiply(W0.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Dte)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(pV)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(pV)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Jm.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Jm.multiply(e.parent.matrixWorld)),e.applyMatrix4(Jm),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,s=this.children.length;r<s;r++){const u=this.children[r].getObjectByProperty(e,t);if(void 0!==u)return u}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(MM,e,Ete),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(MM,Tte,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,s=t.length;r<s;r++)t[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let r=0,s=t.length;r<s;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,s=t.length;r<s;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(!0===e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const s=this.children;for(let o=0,u=s.length;o<u;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function o(m,w){return void 0===m[w.uuid]&&(m[w.uuid]=w.toJSON(e)),w.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const m=this.geometry.parameters;if(void 0!==m&&void 0!==m.shapes){const w=m.shapes;if(Array.isArray(w))for(let T=0,F=w.length;T<F;T++)o(e.shapes,w[T]);else o(e.shapes,w)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const m=[];for(let w=0,T=this.material.length;w<T;w++)m.push(o(e.materials,this.material[w]));s.material=m}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let m=0;m<this.children.length;m++)s.children.push(this.children[m].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let m=0;m<this.animations.length;m++)s.animations.push(o(e.animations,this.animations[m]))}if(t){const m=u(e.geometries),w=u(e.materials),T=u(e.textures),F=u(e.images),N=u(e.shapes),Z=u(e.skeletons),Q=u(e.animations);m.length>0&&(r.geometries=m),w.length>0&&(r.materials=w),T.length>0&&(r.textures=T),F.length>0&&(r.images=F),N.length>0&&(r.shapes=N),Z.length>0&&(r.skeletons=Z),Q.length>0&&(r.animations=Q)}return r.object=s,r;function u(m){const w=[];for(const T in m){const F=m[T];delete F.metadata,w.push(F)}return w}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}ra.DefaultUp=new ct(0,1,0),ra.DefaultMatrixAutoUpdate=!0,ra.prototype.isObject3D=!0;const _f=new ct,Km=new ct,_P=new ct,Qm=new ct,q0=new ct,j0=new ct,mV=new ct,vP=new ct,yP=new ct,bP=new ct;class pc{constructor(e=new ct,t=new ct,r=new ct){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,s){s.subVectors(r,t),_f.subVectors(e,t),s.cross(_f);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(e,t,r,s,o){_f.subVectors(s,t),Km.subVectors(r,t),_P.subVectors(e,t);const u=_f.dot(_f),m=_f.dot(Km),w=_f.dot(_P),T=Km.dot(Km),F=Km.dot(_P),N=u*T-m*m;if(0===N)return o.set(-2,-1,-1);const Z=1/N,Q=(T*w-m*F)*Z,le=(u*F-m*w)*Z;return o.set(1-Q-le,le,Q)}static containsPoint(e,t,r,s){return this.getBarycoord(e,t,r,s,Qm),Qm.x>=0&&Qm.y>=0&&Qm.x+Qm.y<=1}static getUV(e,t,r,s,o,u,m,w){return this.getBarycoord(e,t,r,s,Qm),w.set(0,0),w.addScaledVector(o,Qm.x),w.addScaledVector(u,Qm.y),w.addScaledVector(m,Qm.z),w}static isFrontFacing(e,t,r,s){return _f.subVectors(r,t),Km.subVectors(e,t),_f.cross(Km).dot(s)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,s){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,r,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,s),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _f.subVectors(this.c,this.b),Km.subVectors(this.a,this.b),.5*_f.cross(Km).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return pc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return pc.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,s,o){return pc.getUV(e,this.a,this.b,this.c,t,r,s,o)}containsPoint(e){return pc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return pc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,s=this.b,o=this.c;let u,m;q0.subVectors(s,r),j0.subVectors(o,r),vP.subVectors(e,r);const w=q0.dot(vP),T=j0.dot(vP);if(w<=0&&T<=0)return t.copy(r);yP.subVectors(e,s);const F=q0.dot(yP),N=j0.dot(yP);if(F>=0&&N<=F)return t.copy(s);const Z=w*N-F*T;if(Z<=0&&w>=0&&F<=0)return u=w/(w-F),t.copy(r).addScaledVector(q0,u);bP.subVectors(e,o);const Q=q0.dot(bP),le=j0.dot(bP);if(le>=0&&Q<=le)return t.copy(o);const _e=Q*T-w*le;if(_e<=0&&T>=0&&le<=0)return m=T/(T-le),t.copy(r).addScaledVector(j0,m);const xe=F*le-Q*N;if(xe<=0&&N-F>=0&&Q-le>=0)return mV.subVectors(o,s),m=(N-F)/(N-F+(Q-le)),t.copy(s).addScaledVector(mV,m);const fe=1/(xe+_e+Z);return u=_e*fe,m=Z*fe,t.copy(r).addScaledVector(q0,u).addScaledVector(j0,m)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Ate=0;class ou extends py{constructor(){super(),Object.defineProperty(this,"id",{value:Ate++}),this.uuid=Nh(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const r=e[t];if(void 0===r){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===r;continue}const s=this[t];void 0!==s?s&&s.isColor?s.set(r):s&&s.isVector3&&r&&r.isVector3?s.copy(r):this[t]=r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function s(o){const u=[];for(const m in o){const w=o[m];delete w.metadata,u.push(w)}return u}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),0!==this.side&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(r.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=this.flatShading),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t){const o=s(e.textures),u=s(e.images);o.length>0&&(r.textures=o),u.length>0&&(r.images=u)}return r}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(null!==t){const s=t.length;r=new Array(s);for(let o=0;o!==s;++o)r[o]=t[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}ou.prototype.isMaterial=!0;class $m extends ou{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new rr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}$m.prototype.isMeshBasicMaterial=!0;const qa=new ct,BT=new ui;class ka{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.usage=_M,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[e+s]=t.array[r+s];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let s=0,o=e.length;s<o;s++){let u=e[s];void 0===u&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",s),u=new rr),t[r++]=u.r,t[r++]=u.g,t[r++]=u.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let s=0,o=e.length;s<o;s++){let u=e[s];void 0===u&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",s),u=new ui),t[r++]=u.x,t[r++]=u.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let s=0,o=e.length;s<o;s++){let u=e[s];void 0===u&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",s),u=new ct),t[r++]=u.x,t[r++]=u.y,t[r++]=u.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let s=0,o=e.length;s<o;s++){let u=e[s];void 0===u&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",s),u=new xa),t[r++]=u.x,t[r++]=u.y,t[r++]=u.z,t[r++]=u.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,r=this.count;t<r;t++)BT.fromBufferAttribute(this,t),BT.applyMatrix3(e),this.setXY(t,BT.x,BT.y);else if(3===this.itemSize)for(let t=0,r=this.count;t<r;t++)qa.fromBufferAttribute(this,t),qa.applyMatrix3(e),this.setXYZ(t,qa.x,qa.y,qa.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)qa.x=this.getX(t),qa.y=this.getY(t),qa.z=this.getZ(t),qa.applyMatrix4(e),this.setXYZ(t,qa.x,qa.y,qa.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)qa.x=this.getX(t),qa.y=this.getY(t),qa.z=this.getZ(t),qa.applyNormalMatrix(e),this.setXYZ(t,qa.x,qa.y,qa.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)qa.x=this.getX(t),qa.y=this.getY(t),qa.z=this.getZ(t),qa.transformDirection(e),this.setXYZ(t,qa.x,qa.y,qa.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this}setXYZ(e,t,r,s){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this.array[e+2]=s,this}setXYZW(e,t,r,s,o){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this.array[e+2]=s,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==_M&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}ka.prototype.isBufferAttribute=!0;class xP extends ka{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class wP extends ka{constructor(e,t,r){super(new Uint32Array(e),t,r)}}(class Fte extends ka{constructor(e,t,r){super(new Uint16Array(e),t,r)}}).prototype.isFloat16BufferAttribute=!0;class Dr extends ka{constructor(e,t,r){super(new Float32Array(e),t,r)}}let Nte=0;const Md=new Nr,MP=new ra,Z0=new ct,Hh=new wd,CM=new wd,Nc=new ct;class ps extends py{constructor(){super(),Object.defineProperty(this,"id",{value:Nte++}),this.uuid=Nh(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(rV(e)?wP:xP)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(void 0!==r){const o=(new Oc).getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const s=this.attributes.tangent;return void 0!==s&&(s.transformDirection(e),s.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Md.makeRotationFromQuaternion(e),this.applyMatrix4(Md),this}rotateX(e){return Md.makeRotationX(e),this.applyMatrix4(Md),this}rotateY(e){return Md.makeRotationY(e),this.applyMatrix4(Md),this}rotateZ(e){return Md.makeRotationZ(e),this.applyMatrix4(Md),this}translate(e,t,r){return Md.makeTranslation(e,t,r),this.applyMatrix4(Md),this}scale(e,t,r){return Md.makeScale(e,t,r),this.applyMatrix4(Md),this}lookAt(e){return MP.lookAt(e),MP.updateMatrix(),this.applyMatrix4(MP.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Z0).negate(),this.translate(Z0.x,Z0.y,Z0.z),this}setFromPoints(e){const t=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Dr(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new wd);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ct(-1/0,-1/0,-1/0),new ct(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,s=t.length;r<s;r++)Hh.setFromBufferAttribute(t[r]),this.morphTargetsRelative?(Nc.addVectors(this.boundingBox.min,Hh.min),this.boundingBox.expandByPoint(Nc),Nc.addVectors(this.boundingBox.max,Hh.max),this.boundingBox.expandByPoint(Nc)):(this.boundingBox.expandByPoint(Hh.min),this.boundingBox.expandByPoint(Hh.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new by);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ct,1/0);if(e){const r=this.boundingSphere.center;if(Hh.setFromBufferAttribute(e),t)for(let o=0,u=t.length;o<u;o++)CM.setFromBufferAttribute(t[o]),this.morphTargetsRelative?(Nc.addVectors(Hh.min,CM.min),Hh.expandByPoint(Nc),Nc.addVectors(Hh.max,CM.max),Hh.expandByPoint(Nc)):(Hh.expandByPoint(CM.min),Hh.expandByPoint(CM.max));Hh.getCenter(r);let s=0;for(let o=0,u=e.count;o<u;o++)Nc.fromBufferAttribute(e,o),s=Math.max(s,r.distanceToSquared(Nc));if(t)for(let o=0,u=t.length;o<u;o++){const m=t[o],w=this.morphTargetsRelative;for(let T=0,F=m.count;T<F;T++)Nc.fromBufferAttribute(m,T),w&&(Z0.fromBufferAttribute(e,T),Nc.add(Z0)),s=Math.max(s,r.distanceToSquared(Nc))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const r=e.array,s=t.position.array,o=t.normal.array,u=t.uv.array,m=s.length/3;void 0===t.tangent&&this.setAttribute("tangent",new ka(new Float32Array(4*m),4));const w=t.tangent.array,T=[],F=[];for(let Kt=0;Kt<m;Kt++)T[Kt]=new ct,F[Kt]=new ct;const N=new ct,Z=new ct,Q=new ct,le=new ui,_e=new ui,xe=new ui,fe=new ct,ue=new ct;function Ne(Kt,We,It){N.fromArray(s,3*Kt),Z.fromArray(s,3*We),Q.fromArray(s,3*It),le.fromArray(u,2*Kt),_e.fromArray(u,2*We),xe.fromArray(u,2*It),Z.sub(N),Q.sub(N),_e.sub(le),xe.sub(le);const Ht=1/(_e.x*xe.y-xe.x*_e.y);!isFinite(Ht)||(fe.copy(Z).multiplyScalar(xe.y).addScaledVector(Q,-_e.y).multiplyScalar(Ht),ue.copy(Q).multiplyScalar(_e.x).addScaledVector(Z,-xe.x).multiplyScalar(Ht),T[Kt].add(fe),T[We].add(fe),T[It].add(fe),F[Kt].add(ue),F[We].add(ue),F[It].add(ue))}let Re=this.groups;0===Re.length&&(Re=[{start:0,count:r.length}]);for(let Kt=0,We=Re.length;Kt<We;++Kt){const It=Re[Kt],Ht=It.start;for(let kt=Ht,et=Ht+It.count;kt<et;kt+=3)Ne(r[kt+0],r[kt+1],r[kt+2])}const Ye=new ct,st=new ct,ht=new ct,Et=new ct;function hn(Kt){ht.fromArray(o,3*Kt),Et.copy(ht);const We=T[Kt];Ye.copy(We),Ye.sub(ht.multiplyScalar(ht.dot(We))).normalize(),st.crossVectors(Et,We);const Ht=st.dot(F[Kt])<0?-1:1;w[4*Kt]=Ye.x,w[4*Kt+1]=Ye.y,w[4*Kt+2]=Ye.z,w[4*Kt+3]=Ht}for(let Kt=0,We=Re.length;Kt<We;++Kt){const It=Re[Kt],Ht=It.start;for(let kt=Ht,et=Ht+It.count;kt<et;kt+=3)hn(r[kt+0]),hn(r[kt+1]),hn(r[kt+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let r=this.getAttribute("normal");if(void 0===r)r=new ka(new Float32Array(3*t.count),3),this.setAttribute("normal",r);else for(let Z=0,Q=r.count;Z<Q;Z++)r.setXYZ(Z,0,0,0);const s=new ct,o=new ct,u=new ct,m=new ct,w=new ct,T=new ct,F=new ct,N=new ct;if(e)for(let Z=0,Q=e.count;Z<Q;Z+=3){const le=e.getX(Z+0),_e=e.getX(Z+1),xe=e.getX(Z+2);s.fromBufferAttribute(t,le),o.fromBufferAttribute(t,_e),u.fromBufferAttribute(t,xe),F.subVectors(u,o),N.subVectors(s,o),F.cross(N),m.fromBufferAttribute(r,le),w.fromBufferAttribute(r,_e),T.fromBufferAttribute(r,xe),m.add(F),w.add(F),T.add(F),r.setXYZ(le,m.x,m.y,m.z),r.setXYZ(_e,w.x,w.y,w.z),r.setXYZ(xe,T.x,T.y,T.z)}else for(let Z=0,Q=t.count;Z<Q;Z+=3)s.fromBufferAttribute(t,Z+0),o.fromBufferAttribute(t,Z+1),u.fromBufferAttribute(t,Z+2),F.subVectors(u,o),N.subVectors(s,o),F.cross(N),r.setXYZ(Z+0,F.x,F.y,F.z),r.setXYZ(Z+1,F.x,F.y,F.z),r.setXYZ(Z+2,F.x,F.y,F.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const s in r){if(void 0===e.attributes[s])continue;const u=r[s].array,m=e.attributes[s],w=m.array,T=m.itemSize*t,F=Math.min(w.length,u.length-T);for(let N=0,Z=T;N<F;N++,Z++)u[Z]=w[N]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Nc.fromBufferAttribute(e,t),Nc.normalize(),e.setXYZ(t,Nc.x,Nc.y,Nc.z)}toNonIndexed(){function e(m,w){const T=m.array,F=m.itemSize,N=m.normalized,Z=new T.constructor(w.length*F);let Q=0,le=0;for(let _e=0,xe=w.length;_e<xe;_e++){Q=m.isInterleavedBufferAttribute?w[_e]*m.data.stride+m.offset:w[_e]*F;for(let fe=0;fe<F;fe++)Z[le++]=T[Q++]}return new ka(Z,F,N)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ps,r=this.index.array,s=this.attributes;for(const m in s){const T=e(s[m],r);t.setAttribute(m,T)}const o=this.morphAttributes;for(const m in o){const w=[],T=o[m];for(let F=0,N=T.length;F<N;F++){const Q=e(T[F],r);w.push(Q)}t.morphAttributes[m]=w}t.morphTargetsRelative=this.morphTargetsRelative;const u=this.groups;for(let m=0,w=u.length;m<w;m++){const T=u[m];t.addGroup(T.start,T.count,T.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const w=this.parameters;for(const T in w)void 0!==w[T]&&(e[T]=w[T]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const w in r)e.data.attributes[w]=r[w].toJSON(e.data);const s={};let o=!1;for(const w in this.morphAttributes){const T=this.morphAttributes[w],F=[];for(let N=0,Z=T.length;N<Z;N++)F.push(T[N].toJSON(e.data));F.length>0&&(s[w]=F,o=!0)}o&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const u=this.groups;u.length>0&&(e.data.groups=JSON.parse(JSON.stringify(u)));const m=this.boundingSphere;return null!==m&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;null!==r&&this.setIndex(r.clone(t));const s=e.attributes;for(const T in s)this.setAttribute(T,s[T].clone(t));const o=e.morphAttributes;for(const T in o){const F=[],N=o[T];for(let Z=0,Q=N.length;Z<Q;Z++)F.push(N[Z].clone(t));this.morphAttributes[T]=F}this.morphTargetsRelative=e.morphTargetsRelative;const u=e.groups;for(let T=0,F=u.length;T<F;T++){const N=u[T];this.addGroup(N.start,N.count,N.materialIndex)}const m=e.boundingBox;null!==m&&(this.boundingBox=m.clone());const w=e.boundingSphere;return null!==w&&(this.boundingSphere=w.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}ps.prototype.isBufferGeometry=!0;const gV=new Nr,Y0=new xy,CP=new by,k_=new ct,P_=new ct,L_=new ct,SP=new ct,EP=new ct,TP=new ct,HT=new ct,zT=new ct,VT=new ct,UT=new ui,GT=new ui,WT=new ui,DP=new ct,qT=new ct;class Tc extends ra{constructor(e=new ps,t=new $m){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const s=t[r[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=s.length;o<u;o++){const m=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[m]=o}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const r=this.geometry,s=this.material,o=this.matrixWorld;if(void 0===s||(null===r.boundingSphere&&r.computeBoundingSphere(),CP.copy(r.boundingSphere),CP.applyMatrix4(o),!1===e.ray.intersectsSphere(CP))||(gV.copy(o).invert(),Y0.copy(e.ray).applyMatrix4(gV),null!==r.boundingBox&&!1===Y0.intersectsBox(r.boundingBox)))return;let u;if(r.isBufferGeometry){const m=r.index,w=r.attributes.position,T=r.morphAttributes.position,F=r.morphTargetsRelative,N=r.attributes.uv,Z=r.attributes.uv2,Q=r.groups,le=r.drawRange;if(null!==m)if(Array.isArray(s))for(let _e=0,xe=Q.length;_e<xe;_e++){const fe=Q[_e],ue=s[fe.materialIndex];for(let Ye=Math.max(fe.start,le.start),st=Math.min(m.count,Math.min(fe.start+fe.count,le.start+le.count));Ye<st;Ye+=3){const ht=m.getX(Ye),Et=m.getX(Ye+1),hn=m.getX(Ye+2);u=jT(this,ue,e,Y0,w,T,F,N,Z,ht,Et,hn),u&&(u.faceIndex=Math.floor(Ye/3),u.face.materialIndex=fe.materialIndex,t.push(u))}}else for(let fe=Math.max(0,le.start),ue=Math.min(m.count,le.start+le.count);fe<ue;fe+=3){const Ne=m.getX(fe),Re=m.getX(fe+1),Ye=m.getX(fe+2);u=jT(this,s,e,Y0,w,T,F,N,Z,Ne,Re,Ye),u&&(u.faceIndex=Math.floor(fe/3),t.push(u))}else if(void 0!==w)if(Array.isArray(s))for(let _e=0,xe=Q.length;_e<xe;_e++){const fe=Q[_e],ue=s[fe.materialIndex];for(let Ye=Math.max(fe.start,le.start),st=Math.min(w.count,Math.min(fe.start+fe.count,le.start+le.count));Ye<st;Ye+=3)u=jT(this,ue,e,Y0,w,T,F,N,Z,Ye,Ye+1,Ye+2),u&&(u.faceIndex=Math.floor(Ye/3),u.face.materialIndex=fe.materialIndex,t.push(u))}else for(let fe=Math.max(0,le.start),ue=Math.min(w.count,le.start+le.count);fe<ue;fe+=3)u=jT(this,s,e,Y0,w,T,F,N,Z,fe,fe+1,fe+2),u&&(u.faceIndex=Math.floor(fe/3),t.push(u))}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function jT(n,e,t,r,s,o,u,m,w,T,F,N){k_.fromBufferAttribute(s,T),P_.fromBufferAttribute(s,F),L_.fromBufferAttribute(s,N);const Z=n.morphTargetInfluences;if(o&&Z){HT.set(0,0,0),zT.set(0,0,0),VT.set(0,0,0);for(let le=0,_e=o.length;le<_e;le++){const xe=Z[le],fe=o[le];0!==xe&&(SP.fromBufferAttribute(fe,T),EP.fromBufferAttribute(fe,F),TP.fromBufferAttribute(fe,N),u?(HT.addScaledVector(SP,xe),zT.addScaledVector(EP,xe),VT.addScaledVector(TP,xe)):(HT.addScaledVector(SP.sub(k_),xe),zT.addScaledVector(EP.sub(P_),xe),VT.addScaledVector(TP.sub(L_),xe)))}k_.add(HT),P_.add(zT),L_.add(VT)}n.isSkinnedMesh&&(n.boneTransform(T,k_),n.boneTransform(F,P_),n.boneTransform(N,L_));const Q=function Bte(n,e,t,r,s,o,u,m){let w;if(w=1===e.side?r.intersectTriangle(u,o,s,!0,m):r.intersectTriangle(s,o,u,2!==e.side,m),null===w)return null;qT.copy(m),qT.applyMatrix4(n.matrixWorld);const T=t.ray.origin.distanceTo(qT);return T<t.near||T>t.far?null:{distance:T,point:qT.clone(),object:n}}(n,e,t,r,k_,P_,L_,DP);if(Q){m&&(UT.fromBufferAttribute(m,T),GT.fromBufferAttribute(m,F),WT.fromBufferAttribute(m,N),Q.uv=pc.getUV(DP,k_,P_,L_,UT,GT,WT,new ui)),w&&(UT.fromBufferAttribute(w,T),GT.fromBufferAttribute(w,F),WT.fromBufferAttribute(w,N),Q.uv2=pc.getUV(DP,k_,P_,L_,UT,GT,WT,new ui));const le={a:T,b:F,c:N,normal:new ct,materialIndex:0};pc.getNormal(k_,P_,L_,le.normal),Q.face=le}return Q}Tc.prototype.isMesh=!0;class wy extends ps{constructor(e=1,t=1,r=1,s=1,o=1,u=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:s,heightSegments:o,depthSegments:u};const m=this;s=Math.floor(s),o=Math.floor(o),u=Math.floor(u);const w=[],T=[],F=[],N=[];let Z=0,Q=0;function le(_e,xe,fe,ue,Ne,Re,Ye,st,ht,Et,hn){const Kt=Re/ht,We=Ye/Et,It=Re/2,Ht=Ye/2,it=st/2,kt=ht+1,et=Et+1;let bt=0,Gt=0;const pn=new ct;for(let Qt=0;Qt<et;Qt++){const mn=Qt*We-Ht;for(let zn=0;zn<kt;zn++)pn[_e]=(zn*Kt-It)*ue,pn[xe]=mn*Ne,pn[fe]=it,T.push(pn.x,pn.y,pn.z),pn[_e]=0,pn[xe]=0,pn[fe]=st>0?1:-1,F.push(pn.x,pn.y,pn.z),N.push(zn/ht),N.push(1-Qt/Et),bt+=1}for(let Qt=0;Qt<Et;Qt++)for(let mn=0;mn<ht;mn++){const Ni=Z+mn+kt*(Qt+1),gi=Z+(mn+1)+kt*(Qt+1),Tn=Z+(mn+1)+kt*Qt;w.push(Z+mn+kt*Qt,Ni,Tn),w.push(Ni,gi,Tn),Gt+=6}m.addGroup(Q,Gt,hn),Q+=Gt,Z+=bt}le("z","y","x",-1,-1,r,t,e,u,o,0),le("z","y","x",1,-1,r,t,-e,u,o,1),le("x","z","y",1,1,e,r,t,s,u,2),le("x","z","y",1,-1,e,r,-t,s,u,3),le("x","y","z",1,-1,e,t,r,s,o,4),le("x","y","z",-1,-1,e,t,-r,s,o,5),this.setIndex(w),this.setAttribute("position",new Dr(T,3)),this.setAttribute("normal",new Dr(F,3)),this.setAttribute("uv",new Dr(N,2))}static fromJSON(e){return new wy(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function X0(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const s=n[t][r];e[t][r]=s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.clone():Array.isArray(s)?s.slice():s}}return e}function xu(n){const e={};for(let t=0;t<n.length;t++){const r=X0(n[t]);for(const s in r)e[s]=r[s]}return e}const Hte={clone:X0,merge:xu};class F_ extends ou{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=X0(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const u=this.uniforms[s].value;t.uniforms[s]=u&&u.isTexture?{type:"t",value:u.toJSON(e).uuid}:u&&u.isColor?{type:"c",value:u.getHex()}:u&&u.isVector2?{type:"v2",value:u.toArray()}:u&&u.isVector3?{type:"v3",value:u.toArray()}:u&&u.isVector4?{type:"v4",value:u.toArray()}:u&&u.isMatrix3?{type:"m3",value:u.toArray()}:u&&u.isMatrix4?{type:"m4",value:u.toArray()}:{value:u}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const s in this.extensions)!0===this.extensions[s]&&(r[s]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}F_.prototype.isShaderMaterial=!0;class ZT extends ra{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Nr,this.projectionMatrix=new Nr,this.projectionMatrixInverse=new Nr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}ZT.prototype.isCamera=!0;class Bc extends ZT{constructor(e=50,t=1,r=.1,s=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*yM*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*my*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*yM*Math.atan(Math.tan(.5*my*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,s,o,u){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=s,this.view.width=o,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*my*this.fov)/this.zoom,r=2*t,s=this.aspect*r,o=-.5*s;const u=this.view;if(null!==this.view&&this.view.enabled){const w=u.fullWidth,T=u.fullHeight;o+=u.offsetX*s/w,t-=u.offsetY*r/T,s*=u.width/w,r*=u.height/T}const m=this.filmOffset;0!==m&&(o+=e*m/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}Bc.prototype.isPerspectiveCamera=!0;class AP extends ra{constructor(e,t,r){if(super(),this.type="CubeCamera",!0!==r.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=r;const s=new Bc(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new ct(1,0,0)),this.add(s);const o=new Bc(90,1,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new ct(-1,0,0)),this.add(o);const u=new Bc(90,1,e,t);u.layers=this.layers,u.up.set(0,0,1),u.lookAt(new ct(0,1,0)),this.add(u);const m=new Bc(90,1,e,t);m.layers=this.layers,m.up.set(0,0,-1),m.lookAt(new ct(0,-1,0)),this.add(m);const w=new Bc(90,1,e,t);w.layers=this.layers,w.up.set(0,-1,0),w.lookAt(new ct(0,0,1)),this.add(w);const T=new Bc(90,1,e,t);T.layers=this.layers,T.up.set(0,-1,0),T.lookAt(new ct(0,0,-1)),this.add(T)}update(e,t){null===this.parent&&this.updateMatrixWorld();const r=this.renderTarget,[s,o,u,m,w,T]=this.children,F=e.xr.enabled,N=e.getRenderTarget();e.xr.enabled=!1;const Z=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,s),e.setRenderTarget(r,1),e.render(t,o),e.setRenderTarget(r,2),e.render(t,u),e.setRenderTarget(r,3),e.render(t,m),e.setRenderTarget(r,4),e.render(t,w),r.texture.generateMipmaps=Z,e.setRenderTarget(r,5),e.render(t,T),e.setRenderTarget(N),e.xr.enabled=F,r.texture.needsPMREMUpdate=!0}}class SM extends Ec{constructor(e,t,r,s,o,u,m,w,T,F){super(e=void 0!==e?e:[],t=void 0!==t?t:301,r,s,o,u,m,w,T,F),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}SM.prototype.isCubeTexture=!0;class IP extends xd{constructor(e,t,r){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=r),super(e,e,t),this.texture=new SM(void 0,(t=t||{}).mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:kl}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=yu,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r_uniforms={tEquirect:{value:null}},r_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new wy(5,5,5),o=new F_({name:"CubemapFromEquirect",uniforms:X0(r_uniforms),vertexShader:r_vertexShader,fragmentShader:r_fragmentShader,side:1,blending:0});o.uniforms.tEquirect.value=t;const u=new Tc(s,o),m=t.minFilter;return 1008===t.minFilter&&(t.minFilter=kl),new AP(1,10,this).update(e,u),t.minFilter=m,u.geometry.dispose(),u.material.dispose(),this}clear(e,t,r,s){const o=e.getRenderTarget();for(let u=0;u<6;u++)e.setRenderTarget(this,u),e.clear(t,r,s);e.setRenderTarget(o)}}IP.prototype.isWebGLCubeRenderTarget=!0;const RP=new ct,Ute=new ct,Gte=new Oc;class eg{constructor(e=new ct(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,s){return this.normal.set(e,t,r),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const s=RP.subVectors(r,t).cross(Ute.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(RP),s=this.normal.dot(r);if(0===s)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:t.copy(r).multiplyScalar(o).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||Gte.getNormalMatrix(e),s=this.coplanarPoint(RP).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-s.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}eg.prototype.isPlane=!0;const Q0=new by,YT=new ct;class XT{constructor(e=new eg,t=new eg,r=new eg,s=new eg,o=new eg,u=new eg){this.planes=[e,t,r,s,o,u]}set(e,t,r,s,o,u){const m=this.planes;return m[0].copy(e),m[1].copy(t),m[2].copy(r),m[3].copy(s),m[4].copy(o),m[5].copy(u),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,s=r[0],o=r[1],u=r[2],m=r[3],w=r[4],T=r[5],F=r[6],N=r[7],Z=r[8],Q=r[9],le=r[10],_e=r[11],xe=r[12],fe=r[13],ue=r[14],Ne=r[15];return t[0].setComponents(m-s,N-w,_e-Z,Ne-xe).normalize(),t[1].setComponents(m+s,N+w,_e+Z,Ne+xe).normalize(),t[2].setComponents(m+o,N+T,_e+Q,Ne+fe).normalize(),t[3].setComponents(m-o,N-T,_e-Q,Ne-fe).normalize(),t[4].setComponents(m-u,N-F,_e-le,Ne-ue).normalize(),t[5].setComponents(m+u,N+F,_e+le,Ne+ue).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Q0.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Q0)}intersectsSprite(e){return Q0.center.set(0,0,0),Q0.radius=.7071067811865476,Q0.applyMatrix4(e.matrixWorld),this.intersectsSphere(Q0)}intersectsSphere(e){const t=this.planes,r=e.center,s=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(r)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const s=t[r];if(YT.x=s.normal.x>0?e.max.x:e.min.x,YT.y=s.normal.y>0?e.max.y:e.min.y,YT.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(YT)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function _V(){let n=null,e=!1,t=null,r=null;function s(o,u){t(o,u),r=n.requestAnimationFrame(s)}return{start:function(){!0!==e&&null!==t&&(r=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function Wte(n,e){const t=e.isWebGL2,r=new WeakMap;return{get:function u(T){return T.isInterleavedBufferAttribute&&(T=T.data),r.get(T)},remove:function m(T){T.isInterleavedBufferAttribute&&(T=T.data);const F=r.get(T);F&&(n.deleteBuffer(F.buffer),r.delete(T))},update:function w(T,F){if(T.isGLBufferAttribute){const Z=r.get(T);return void((!Z||Z.version<T.version)&&r.set(T,{buffer:T.buffer,type:T.type,bytesPerElement:T.elementSize,version:T.version}))}T.isInterleavedBufferAttribute&&(T=T.data);const N=r.get(T);void 0===N?r.set(T,function s(T,F){const N=T.array,Z=T.usage,Q=n.createBuffer();n.bindBuffer(F,Q),n.bufferData(F,N,Z),T.onUploadCallback();let le=5126;return N instanceof Float32Array?le=5126:N instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):N instanceof Uint16Array?T.isFloat16BufferAttribute?t?le=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):le=5123:N instanceof Int16Array?le=5122:N instanceof Uint32Array?le=5125:N instanceof Int32Array?le=5124:N instanceof Int8Array?le=5120:(N instanceof Uint8Array||N instanceof Uint8ClampedArray)&&(le=5121),{buffer:Q,type:le,bytesPerElement:N.BYTES_PER_ELEMENT,version:T.version}}(T,F)):N.version<T.version&&(function o(T,F,N){const Z=F.array,Q=F.updateRange;n.bindBuffer(N,T),-1===Q.count?n.bufferSubData(N,0,Z):(t?n.bufferSubData(N,Q.offset*Z.BYTES_PER_ELEMENT,Z,Q.offset,Q.count):n.bufferSubData(N,Q.offset*Z.BYTES_PER_ELEMENT,Z.subarray(Q.offset,Q.offset+Q.count)),Q.count=-1)}(N.buffer,T,F),N.version=T.version)}}}class EM extends ps{constructor(e=1,t=1,r=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:s};const o=e/2,u=t/2,m=Math.floor(r),w=Math.floor(s),T=m+1,F=w+1,N=e/m,Z=t/w,Q=[],le=[],_e=[],xe=[];for(let fe=0;fe<F;fe++){const ue=fe*Z-u;for(let Ne=0;Ne<T;Ne++)le.push(Ne*N-o,-ue,0),_e.push(0,0,1),xe.push(Ne/m),xe.push(1-fe/w)}for(let fe=0;fe<w;fe++)for(let ue=0;ue<m;ue++){const Re=ue+T*(fe+1),Ye=ue+1+T*(fe+1),st=ue+1+T*fe;Q.push(ue+T*fe,Re,st),Q.push(Re,Ye,st)}this.setIndex(Q),this.setAttribute("position",new Dr(le,3)),this.setAttribute("normal",new Dr(_e,3)),this.setAttribute("uv",new Dr(xe,2))}static fromJSON(e){return new EM(e.width,e.height,e.widthSegments,e.heightSegments)}}const _o={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\treturn texture2D( envMap, uv ).rgb;\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},tr={common:{diffuse:{value:new rr(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Oc},uv2Transform:{value:new Oc},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ui(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new rr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new rr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Oc}},sprite:{diffuse:{value:new rr(16777215)},opacity:{value:1},center:{value:new ui(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Oc}}},wp={basic:{uniforms:xu([tr.common,tr.specularmap,tr.envmap,tr.aomap,tr.lightmap,tr.fog]),vertexShader:_o.meshbasic_vert,fragmentShader:_o.meshbasic_frag},lambert:{uniforms:xu([tr.common,tr.specularmap,tr.envmap,tr.aomap,tr.lightmap,tr.emissivemap,tr.fog,tr.lights,{emissive:{value:new rr(0)}}]),vertexShader:_o.meshlambert_vert,fragmentShader:_o.meshlambert_frag},phong:{uniforms:xu([tr.common,tr.specularmap,tr.envmap,tr.aomap,tr.lightmap,tr.emissivemap,tr.bumpmap,tr.normalmap,tr.displacementmap,tr.fog,tr.lights,{emissive:{value:new rr(0)},specular:{value:new rr(1118481)},shininess:{value:30}}]),vertexShader:_o.meshphong_vert,fragmentShader:_o.meshphong_frag},standard:{uniforms:xu([tr.common,tr.envmap,tr.aomap,tr.lightmap,tr.emissivemap,tr.bumpmap,tr.normalmap,tr.displacementmap,tr.roughnessmap,tr.metalnessmap,tr.fog,tr.lights,{emissive:{value:new rr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:_o.meshphysical_vert,fragmentShader:_o.meshphysical_frag},toon:{uniforms:xu([tr.common,tr.aomap,tr.lightmap,tr.emissivemap,tr.bumpmap,tr.normalmap,tr.displacementmap,tr.gradientmap,tr.fog,tr.lights,{emissive:{value:new rr(0)}}]),vertexShader:_o.meshtoon_vert,fragmentShader:_o.meshtoon_frag},matcap:{uniforms:xu([tr.common,tr.bumpmap,tr.normalmap,tr.displacementmap,tr.fog,{matcap:{value:null}}]),vertexShader:_o.meshmatcap_vert,fragmentShader:_o.meshmatcap_frag},points:{uniforms:xu([tr.points,tr.fog]),vertexShader:_o.points_vert,fragmentShader:_o.points_frag},dashed:{uniforms:xu([tr.common,tr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:_o.linedashed_vert,fragmentShader:_o.linedashed_frag},depth:{uniforms:xu([tr.common,tr.displacementmap]),vertexShader:_o.depth_vert,fragmentShader:_o.depth_frag},normal:{uniforms:xu([tr.common,tr.bumpmap,tr.normalmap,tr.displacementmap,{opacity:{value:1}}]),vertexShader:_o.meshnormal_vert,fragmentShader:_o.meshnormal_frag},sprite:{uniforms:xu([tr.sprite,tr.fog]),vertexShader:_o.sprite_vert,fragmentShader:_o.sprite_frag},background:{uniforms:{uvTransform:{value:new Oc},t2D:{value:null}},vertexShader:_o.background_vert,fragmentShader:_o.background_frag},cube:{uniforms:xu([tr.envmap,{opacity:{value:1}}]),vertexShader:_o.cube_vert,fragmentShader:_o.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:_o.equirect_vert,fragmentShader:_o.equirect_frag},distanceRGBA:{uniforms:xu([tr.common,tr.displacementmap,{referencePosition:{value:new ct},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:_o.distanceRGBA_vert,fragmentShader:_o.distanceRGBA_frag},shadow:{uniforms:xu([tr.lights,tr.fog,{color:{value:new rr(0)},opacity:{value:1}}]),vertexShader:_o.shadow_vert,fragmentShader:_o.shadow_frag}};function Hie(n,e,t,r,s,o){const u=new rr(0);let w,T,m=!0===s?0:1,F=null,N=0,Z=null;function le(_e,xe){t.buffers.color.setClear(_e.r,_e.g,_e.b,xe,o)}return{getClearColor:function(){return u},setClearColor:function(_e,xe=1){u.set(_e),m=xe,le(u,m)},getClearAlpha:function(){return m},setClearAlpha:function(_e){m=_e,le(u,m)},render:function Q(_e,xe){let fe=!1,ue=!0===xe.isScene?xe.background:null;ue&&ue.isTexture&&(ue=e.get(ue));const Ne=n.xr,Re=Ne.getSession&&Ne.getSession();Re&&"additive"===Re.environmentBlendMode&&(ue=null),null===ue?le(u,m):ue&&ue.isColor&&(le(ue,1),fe=!0),(n.autoClear||fe)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),ue&&(ue.isCubeTexture||306===ue.mapping)?(void 0===T&&(T=new Tc(new wy(1,1,1),new F_({name:"BackgroundCubeMaterial",uniforms:X0(wp.cube.uniforms),vertexShader:wp.cube.vertexShader,fragmentShader:wp.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),T.geometry.deleteAttribute("normal"),T.geometry.deleteAttribute("uv"),T.onBeforeRender=function(Ye,st,ht){this.matrixWorld.copyPosition(ht.matrixWorld)},Object.defineProperty(T.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(T)),T.material.uniforms.envMap.value=ue,T.material.uniforms.flipEnvMap.value=ue.isCubeTexture&&!1===ue.isRenderTargetTexture?-1:1,(F!==ue||N!==ue.version||Z!==n.toneMapping)&&(T.material.needsUpdate=!0,F=ue,N=ue.version,Z=n.toneMapping),_e.unshift(T,T.geometry,T.material,0,0,null)):ue&&ue.isTexture&&(void 0===w&&(w=new Tc(new EM(2,2),new F_({name:"BackgroundMaterial",uniforms:X0(wp.background.uniforms),vertexShader:wp.background.vertexShader,fragmentShader:wp.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),w.geometry.deleteAttribute("normal"),Object.defineProperty(w.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(w)),w.material.uniforms.t2D.value=ue,!0===ue.matrixAutoUpdate&&ue.updateMatrix(),w.material.uniforms.uvTransform.value.copy(ue.matrix),(F!==ue||N!==ue.version||Z!==n.toneMapping)&&(w.material.needsUpdate=!0,F=ue,N=ue.version,Z=n.toneMapping),_e.unshift(w,w.geometry,w.material,0,0,null))}}}function zie(n,e,t,r){const s=n.getParameter(34921),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),u=r.isWebGL2||null!==o,m={},w=_e(null);let T=w;function Z(Ht){return r.isWebGL2?n.bindVertexArray(Ht):o.bindVertexArrayOES(Ht)}function Q(Ht){return r.isWebGL2?n.deleteVertexArray(Ht):o.deleteVertexArrayOES(Ht)}function _e(Ht){const it=[],kt=[],et=[];for(let bt=0;bt<s;bt++)it[bt]=0,kt[bt]=0,et[bt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:it,enabledAttributes:kt,attributeDivisors:et,object:Ht,attributes:{},index:null}}function ue(){const Ht=T.newAttributes;for(let it=0,kt=Ht.length;it<kt;it++)Ht[it]=0}function Ne(Ht){Re(Ht,0)}function Re(Ht,it){const et=T.enabledAttributes,bt=T.attributeDivisors;T.newAttributes[Ht]=1,0===et[Ht]&&(n.enableVertexAttribArray(Ht),et[Ht]=1),bt[Ht]!==it&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Ht,it),bt[Ht]=it)}function Ye(){const Ht=T.newAttributes,it=T.enabledAttributes;for(let kt=0,et=it.length;kt<et;kt++)it[kt]!==Ht[kt]&&(n.disableVertexAttribArray(kt),it[kt]=0)}function st(Ht,it,kt,et,bt,Gt){!0!==r.isWebGL2||5124!==kt&&5125!==kt?n.vertexAttribPointer(Ht,it,kt,et,bt,Gt):n.vertexAttribIPointer(Ht,it,kt,bt,Gt)}function We(){It(),T!==w&&(T=w,Z(T.object))}function It(){w.geometry=null,w.program=null,w.wireframe=!1}return{setup:function F(Ht,it,kt,et,bt){let Gt=!1;if(u){const pn=function le(Ht,it,kt){const et=!0===kt.wireframe;let bt=m[Ht.id];void 0===bt&&(bt={},m[Ht.id]=bt);let Gt=bt[it.id];void 0===Gt&&(Gt={},bt[it.id]=Gt);let pn=Gt[et];return void 0===pn&&(pn=_e(function N(){return r.isWebGL2?n.createVertexArray():o.createVertexArrayOES()}()),Gt[et]=pn),pn}(et,kt,it);T!==pn&&(T=pn,Z(T.object)),Gt=function xe(Ht,it){const kt=T.attributes,et=Ht.attributes;let bt=0;for(const Gt in et){const pn=kt[Gt],Qt=et[Gt];if(void 0===pn||pn.attribute!==Qt||pn.data!==Qt.data)return!0;bt++}return T.attributesNum!==bt||T.index!==it}(et,bt),Gt&&function fe(Ht,it){const kt={},et=Ht.attributes;let bt=0;for(const Gt in et){const pn=et[Gt],Qt={};Qt.attribute=pn,pn.data&&(Qt.data=pn.data),kt[Gt]=Qt,bt++}T.attributes=kt,T.attributesNum=bt,T.index=it}(et,bt)}else{const pn=!0===it.wireframe;(T.geometry!==et.id||T.program!==kt.id||T.wireframe!==pn)&&(T.geometry=et.id,T.program=kt.id,T.wireframe=pn,Gt=!0)}!0===Ht.isInstancedMesh&&(Gt=!0),null!==bt&&t.update(bt,34963),Gt&&(function ht(Ht,it,kt,et){if(!1===r.isWebGL2&&(Ht.isInstancedMesh||et.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;ue();const bt=et.attributes,Gt=kt.getAttributes(),pn=it.defaultAttributeValues;for(const Qt in Gt){const mn=Gt[Qt];if(mn.location>=0){let zn=bt[Qt];if(void 0===zn&&("instanceMatrix"===Qt&&Ht.instanceMatrix&&(zn=Ht.instanceMatrix),"instanceColor"===Qt&&Ht.instanceColor&&(zn=Ht.instanceColor)),void 0!==zn){const Ni=zn.normalized,gi=zn.itemSize,Tn=t.get(zn);if(void 0===Tn)continue;const Es=Tn.buffer,yi=Tn.type,ur=Tn.bytesPerElement;if(zn.isInterleavedBufferAttribute){const qi=zn.data,rs=qi.stride,ss=zn.offset;if(qi&&qi.isInstancedInterleavedBuffer){for(let Qn=0;Qn<mn.locationSize;Qn++)Re(mn.location+Qn,qi.meshPerAttribute);!0!==Ht.isInstancedMesh&&void 0===et._maxInstanceCount&&(et._maxInstanceCount=qi.meshPerAttribute*qi.count)}else for(let Qn=0;Qn<mn.locationSize;Qn++)Ne(mn.location+Qn);n.bindBuffer(34962,Es);for(let Qn=0;Qn<mn.locationSize;Qn++)st(mn.location+Qn,gi/mn.locationSize,yi,Ni,rs*ur,(ss+gi/mn.locationSize*Qn)*ur)}else{if(zn.isInstancedBufferAttribute){for(let qi=0;qi<mn.locationSize;qi++)Re(mn.location+qi,zn.meshPerAttribute);!0!==Ht.isInstancedMesh&&void 0===et._maxInstanceCount&&(et._maxInstanceCount=zn.meshPerAttribute*zn.count)}else for(let qi=0;qi<mn.locationSize;qi++)Ne(mn.location+qi);n.bindBuffer(34962,Es);for(let qi=0;qi<mn.locationSize;qi++)st(mn.location+qi,gi/mn.locationSize,yi,Ni,gi*ur,gi/mn.locationSize*qi*ur)}}else if(void 0!==pn){const Ni=pn[Qt];if(void 0!==Ni)switch(Ni.length){case 2:n.vertexAttrib2fv(mn.location,Ni);break;case 3:n.vertexAttrib3fv(mn.location,Ni);break;case 4:n.vertexAttrib4fv(mn.location,Ni);break;default:n.vertexAttrib1fv(mn.location,Ni)}}}}Ye()}(Ht,it,kt,et),null!==bt&&n.bindBuffer(34963,t.get(bt).buffer))},reset:We,resetDefaultState:It,dispose:function Et(){We();for(const Ht in m){const it=m[Ht];for(const kt in it){const et=it[kt];for(const bt in et)Q(et[bt].object),delete et[bt];delete it[kt]}delete m[Ht]}},releaseStatesOfGeometry:function hn(Ht){if(void 0===m[Ht.id])return;const it=m[Ht.id];for(const kt in it){const et=it[kt];for(const bt in et)Q(et[bt].object),delete et[bt];delete it[kt]}delete m[Ht.id]},releaseStatesOfProgram:function Kt(Ht){for(const it in m){const kt=m[it];if(void 0===kt[Ht.id])continue;const et=kt[Ht.id];for(const bt in et)Q(et[bt].object),delete et[bt];delete kt[Ht.id]}},initAttributes:ue,enableAttribute:Ne,disableUnusedAttributes:Ye}}function Vie(n,e,t,r){const s=r.isWebGL2;let o;this.setMode=function u(T){o=T},this.render=function m(T,F){n.drawArrays(o,T,F),t.update(F,o,1)},this.renderInstances=function w(T,F,N){if(0===N)return;let Z,Q;if(s)Z=n,Q="drawArraysInstanced";else if(Z=e.get("ANGLE_instanced_arrays"),Q="drawArraysInstancedANGLE",null===Z)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");Z[Q](o,T,F,N),t.update(F,o,N)}}function Uie(n,e,t){let r;function o(ht){if("highp"===ht){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";ht="mediump"}return"mediump"===ht&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const u="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&n instanceof WebGL2ComputeRenderingContext;let m=void 0!==t.precision?t.precision:"highp";const w=o(m);w!==m&&(console.warn("THREE.WebGLRenderer:",m,"not supported, using",w,"instead."),m=w);const T=u||e.has("WEBGL_draw_buffers"),F=!0===t.logarithmicDepthBuffer,N=n.getParameter(34930),Z=n.getParameter(35660),Q=n.getParameter(3379),le=n.getParameter(34076),_e=n.getParameter(34921),xe=n.getParameter(36347),fe=n.getParameter(36348),ue=n.getParameter(36349),Ne=Z>0,Re=u||e.has("OES_texture_float");return{isWebGL2:u,drawBuffers:T,getMaxAnisotropy:function s(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const ht=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(ht.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:o,precision:m,logarithmicDepthBuffer:F,maxTextures:N,maxVertexTextures:Z,maxTextureSize:Q,maxCubemapSize:le,maxAttributes:_e,maxVertexUniforms:xe,maxVaryings:fe,maxFragmentUniforms:ue,vertexTextures:Ne,floatFragmentTextures:Re,floatVertexTextures:Ne&&Re,maxSamples:u?n.getParameter(36183):0}}function Gie(n){const e=this;let t=null,r=0,s=!1,o=!1;const u=new eg,m=new Oc,w={value:null,needsUpdate:!1};function T(){w.value!==t&&(w.value=t,w.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function F(N,Z,Q,le){const _e=null!==N?N.length:0;let xe=null;if(0!==_e){if(xe=w.value,!0!==le||null===xe){const fe=Q+4*_e,ue=Z.matrixWorldInverse;m.getNormalMatrix(ue),(null===xe||xe.length<fe)&&(xe=new Float32Array(fe));for(let Ne=0,Re=Q;Ne!==_e;++Ne,Re+=4)u.copy(N[Ne]).applyMatrix4(ue,m),u.normal.toArray(xe,Re),xe[Re+3]=u.constant}w.value=xe,w.needsUpdate=!0}return e.numPlanes=_e,e.numIntersection=0,xe}this.uniform=w,this.numPlanes=0,this.numIntersection=0,this.init=function(N,Z,Q){const le=0!==N.length||Z||0!==r||s;return s=Z,t=F(N,Q,0),r=N.length,le},this.beginShadows=function(){o=!0,F(null)},this.endShadows=function(){o=!1,T()},this.setState=function(N,Z,Q){const le=N.clippingPlanes,_e=N.clipIntersection,xe=N.clipShadows,fe=n.get(N);if(!s||null===le||0===le.length||o&&!xe)o?F(null):T();else{const ue=o?0:r,Ne=4*ue;let Re=fe.clippingState||null;w.value=Re,Re=F(le,Z,Ne,Q);for(let Ye=0;Ye!==Ne;++Ye)Re[Ye]=t[Ye];fe.clippingState=Re,this.numIntersection=_e?this.numPlanes:0,this.numPlanes+=ue}}}function Wie(n){let e=new WeakMap;function t(u,m){return 303===m?u.mapping=301:304===m&&(u.mapping=302),u}function s(u){const m=u.target;m.removeEventListener("dispose",s);const w=e.get(m);void 0!==w&&(e.delete(m),w.dispose())}return{get:function r(u){if(u&&u.isTexture&&!1===u.isRenderTargetTexture){const m=u.mapping;if(303===m||304===m){if(e.has(u))return t(e.get(u).texture,u.mapping);{const w=u.image;if(w&&w.height>0){const T=new IP(w.height/2);return T.fromEquirectangularTexture(n,u),e.set(u,T),u.addEventListener("dispose",s),t(T.texture,u.mapping)}return null}}}return u},dispose:function o(){e=new WeakMap}}}wp.physical={uniforms:xu([wp.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ui(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new rr(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ui},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new rr(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new rr(1,1,1)},specularColorMap:{value:null}}]),vertexShader:_o.meshphysical_vert,fragmentShader:_o.meshphysical_frag};class JT extends ZT{constructor(e=-1,t=1,r=1,s=-1,o=.1,u=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=s,this.near=o,this.far=u,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,r,s,o,u){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=s,this.view.width=o,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=r-e,u=r+e,m=s+t,w=s-t;if(null!==this.view&&this.view.enabled){const T=(this.right-this.left)/this.view.fullWidth/this.zoom,F=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=T*this.view.offsetX,u=o+T*this.view.width,m-=F*this.view.offsetY,w=m-F*this.view.height}this.projectionMatrix.makeOrthographic(o,u,m,w,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}JT.prototype.isOrthographicCamera=!0;class TM extends F_{constructor(e){super(e),this.type="RawShaderMaterial"}}TM.prototype.isRawShaderMaterial=!0;const Mp=Math.pow(2,8),vV=[.125,.215,.35,.446,.526,.582],yV=5+vV.length,kP=new JT,{_lodPlanes:DM,_sizeLods:bV,_sigmas:KT}=qie(),xV=new rr;let PP=null;const My=(1+Math.sqrt(5))/2,tx=1/My,wV=[new ct(1,1,1),new ct(-1,1,1),new ct(1,1,-1),new ct(-1,1,-1),new ct(0,My,tx),new ct(0,My,-tx),new ct(tx,0,My),new ct(-tx,0,My),new ct(My,tx,0),new ct(-My,tx,0)];class MV{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function jie(n){const e=new Float32Array(n),t=new ct(0,1,0);return new TM({name:"SphericalGaussianBlur",defines:{n},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,s=100){PP=this._renderer.getRenderTarget();const o=this._allocateTargets();return this._sceneToCubeUV(e,r,s,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=EV(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=SV(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<DM.length;e++)DM[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(PP),e.scissorTest=!1,QT(e,0,0,e.width,e.height)}_fromTexture(e,t){PP=this._renderer.getRenderTarget();const r=t||this._allocateTargets(e);return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(e){const t={magFilter:kl,minFilter:kl,generateMipmaps:!1,type:I0,format:yu,encoding:T_,depthBuffer:!1},r=CV(t);return r.depthBuffer=!e,null===this._pingPongRenderTarget&&(this._pingPongRenderTarget=CV(t)),r}_compileMaterial(e){const t=new Tc(DM[0],e);this._renderer.compile(t,kP)}_sceneToCubeUV(e,t,r,s){const m=new Bc(90,1,t,r),w=[1,-1,1,1,1,1],T=[1,1,1,-1,-1,-1],F=this._renderer,N=F.autoClear,Z=F.toneMapping;F.getClearColor(xV),F.toneMapping=0,F.autoClear=!1;const Q=new $m({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),le=new Tc(new wy,Q);let _e=!1;const xe=e.background;xe?xe.isColor&&(Q.color.copy(xe),e.background=null,_e=!0):(Q.color.copy(xV),_e=!0);for(let fe=0;fe<6;fe++){const ue=fe%3;0===ue?(m.up.set(0,w[fe],0),m.lookAt(T[fe],0,0)):1===ue?(m.up.set(0,0,w[fe]),m.lookAt(0,T[fe],0)):(m.up.set(0,w[fe],0),m.lookAt(0,0,T[fe])),QT(s,ue*Mp,fe>2?Mp:0,Mp,Mp),F.setRenderTarget(s),_e&&F.render(le,m),F.render(e,m)}le.geometry.dispose(),le.material.dispose(),F.toneMapping=Z,F.autoClear=N,e.background=xe}_textureToCubeUV(e,t){const r=this._renderer,s=301===e.mapping||302===e.mapping;s?(null===this._cubemapShader&&(this._cubemapShader=EV()),this._cubemapShader.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectShader&&(this._equirectShader=SV());const o=s?this._cubemapShader:this._equirectShader,u=new Tc(DM[0],o),m=o.uniforms;m.envMap.value=e,s||m.texelSize.value.set(1/e.image.width,1/e.image.height),QT(t,0,0,3*Mp,2*Mp),r.setRenderTarget(t),r.render(u,kP)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let s=1;s<yV;s++){const o=Math.sqrt(KT[s]*KT[s]-KT[s-1]*KT[s-1]);this._blur(e,s-1,s,o,wV[(s-1)%wV.length])}t.autoClear=r}_blur(e,t,r,s,o){const u=this._pingPongRenderTarget;this._halfBlur(e,u,t,r,s,"latitudinal",o),this._halfBlur(u,e,r,r,s,"longitudinal",o)}_halfBlur(e,t,r,s,o,u,m){const w=this._renderer,T=this._blurMaterial;"latitudinal"!==u&&"longitudinal"!==u&&console.error("blur direction must be either latitudinal or longitudinal!");const N=new Tc(DM[s],T),Z=T.uniforms,Q=bV[r]-1,le=isFinite(o)?Math.PI/(2*Q):2*Math.PI/39,_e=o/le,xe=isFinite(o)?1+Math.floor(3*_e):20;xe>20&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${xe} samples when the maximum is set to 20`);const fe=[];let ue=0;for(let st=0;st<20;++st){const ht=st/_e,Et=Math.exp(-ht*ht/2);fe.push(Et),0===st?ue+=Et:st<xe&&(ue+=2*Et)}for(let st=0;st<fe.length;st++)fe[st]=fe[st]/ue;Z.envMap.value=e.texture,Z.samples.value=xe,Z.weights.value=fe,Z.latitudinal.value="latitudinal"===u,m&&(Z.poleAxis.value=m),Z.dTheta.value=le,Z.mipInt.value=8-r;const Ne=bV[s];QT(t,3*Math.max(0,Mp-2*Ne),(0===s?0:2*Mp)+2*Ne*(s>4?s-8+4:0),3*Ne,2*Ne),w.setRenderTarget(t),w.render(N,kP)}}function qie(){const n=[],e=[],t=[];let r=8;for(let s=0;s<yV;s++){const o=Math.pow(2,r);e.push(o);let u=1/o;s>4?u=vV[s-8+4-1]:0===s&&(u=0),t.push(u);const m=1/(o-1),w=-m/2,T=1+m/2,F=[w,w,T,w,T,T,w,w,T,T,w,T],N=6,Z=6,Q=3,le=2,_e=1,xe=new Float32Array(Q*Z*N),fe=new Float32Array(le*Z*N),ue=new Float32Array(_e*Z*N);for(let Re=0;Re<N;Re++){const Ye=Re%3*2/3-1,st=Re>2?0:-1;xe.set([Ye,st,0,Ye+2/3,st,0,Ye+2/3,st+1,0,Ye,st,0,Ye+2/3,st+1,0,Ye,st+1,0],Q*Z*Re),fe.set(F,le*Z*Re),ue.set([Re,Re,Re,Re,Re,Re],_e*Z*Re)}const Ne=new ps;Ne.setAttribute("position",new ka(xe,Q)),Ne.setAttribute("uv",new ka(fe,le)),Ne.setAttribute("faceIndex",new ka(ue,_e)),n.push(Ne),r>4&&r--}return{_lodPlanes:n,_sizeLods:e,_sigmas:t}}function CV(n){const e=new xd(3*Mp,3*Mp,n);return e.texture.mapping=306,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function QT(n,e,t,r,s){n.viewport.set(e,t,r,s),n.scissor.set(e,t,r,s)}function SV(){const n=new ui(1,1);return new TM({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:n}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = texture2D ( envMap, uv ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function EV(){return new TM({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Zie(n){let e=new WeakMap,t=null;function o(m){const w=m.target;w.removeEventListener("dispose",o);const T=e.get(w);void 0!==T&&(e.delete(w),T.dispose())}return{get:function r(m){if(m&&m.isTexture){const w=m.mapping,T=303===w||304===w,F=301===w||302===w;if(T||F){if(m.isRenderTargetTexture&&!0===m.needsPMREMUpdate){m.needsPMREMUpdate=!1;let N=e.get(m);return null===t&&(t=new MV(n)),N=T?t.fromEquirectangular(m,N):t.fromCubemap(m,N),e.set(m,N),N.texture}if(e.has(m))return e.get(m).texture;{const N=m.image;if(T&&N&&N.height>0||F&&N&&function s(m){let w=0;for(let F=0;F<6;F++)void 0!==m[F]&&w++;return 6===w}(N)){null===t&&(t=new MV(n));const Z=T?t.fromEquirectangular(m):t.fromCubemap(m);return e.set(m,Z),m.addEventListener("dispose",o),Z.texture}return null}}}return m},dispose:function u(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function Yie(n){const e={};function t(r){if(void 0!==e[r])return e[r];let s;switch(r){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(r)}return e[r]=s,s}return{has:function(r){return null!==t(r)},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const s=t(r);return null===s&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),s}}}function Xie(n,e,t,r){const s={},o=new WeakMap;function u(N){const Z=N.target;null!==Z.index&&e.remove(Z.index);for(const le in Z.attributes)e.remove(Z.attributes[le]);Z.removeEventListener("dispose",u),delete s[Z.id];const Q=o.get(Z);Q&&(e.remove(Q),o.delete(Z)),r.releaseStatesOfGeometry(Z),!0===Z.isInstancedBufferGeometry&&delete Z._maxInstanceCount,t.memory.geometries--}function T(N){const Z=[],Q=N.index,le=N.attributes.position;let _e=0;if(null!==Q){const ue=Q.array;_e=Q.version;for(let Ne=0,Re=ue.length;Ne<Re;Ne+=3){const Ye=ue[Ne+0],st=ue[Ne+1],ht=ue[Ne+2];Z.push(Ye,st,st,ht,ht,Ye)}}else{_e=le.version;for(let Ne=0,Re=le.array.length/3-1;Ne<Re;Ne+=3){const Ye=Ne+0,st=Ne+1,ht=Ne+2;Z.push(Ye,st,st,ht,ht,Ye)}}const xe=new(rV(Z)?wP:xP)(Z,1);xe.version=_e;const fe=o.get(N);fe&&e.remove(fe),o.set(N,xe)}return{get:function m(N,Z){return!0===s[Z.id]||(Z.addEventListener("dispose",u),s[Z.id]=!0,t.memory.geometries++),Z},update:function w(N){const Z=N.attributes;for(const le in Z)e.update(Z[le],34962);const Q=N.morphAttributes;for(const le in Q){const _e=Q[le];for(let xe=0,fe=_e.length;xe<fe;xe++)e.update(_e[xe],34962)}},getWireframeAttribute:function F(N){const Z=o.get(N);if(Z){const Q=N.index;null!==Q&&Z.version<Q.version&&T(N)}else T(N);return o.get(N)}}}function Jie(n,e,t,r){const s=r.isWebGL2;let o,m,w;this.setMode=function u(Z){o=Z},this.setIndex=function T(Z){m=Z.type,w=Z.bytesPerElement},this.render=function F(Z,Q){n.drawElements(o,Q,m,Z*w),t.update(Q,o,1)},this.renderInstances=function N(Z,Q,le){if(0===le)return;let _e,xe;if(s)_e=n,xe="drawElementsInstanced";else if(_e=e.get("ANGLE_instanced_arrays"),xe="drawElementsInstancedANGLE",null===_e)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");_e[xe](o,Q,m,Z*w,le),t.update(Q,o,le)}}function Kie(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function s(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function r(o,u,m){switch(t.calls++,u){case 4:t.triangles+=m*(o/3);break;case 1:t.lines+=m*(o/2);break;case 3:t.lines+=m*(o-1);break;case 2:t.lines+=m*o;break;case 0:t.points+=m*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",u)}}}}class FP extends Ec{constructor(e=null,t=1,r=1,s=1){super(null),this.image={data:e,width:t,height:r,depth:s},this.magFilter=fc,this.minFilter=fc,this.wrapR=vu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}function Qie(n,e){return n[0]-e[0]}function $ie(n,e){return Math.abs(e[1])-Math.abs(n[1])}function TV(n,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),n.divideScalar(t)}function ere(n,e,t){const r={},s=new Float32Array(8),o=new WeakMap,u=new ct,m=[];for(let T=0;T<8;T++)m[T]=[T,0];return{update:function w(T,F,N,Z){const Q=T.morphTargetInfluences;if(!0===e.isWebGL2){const le=F.morphAttributes.position.length;let _e=o.get(F);if(void 0===_e||_e.count!==le){let It=function(){Kt.dispose(),o.delete(F),F.removeEventListener("dispose",It)};void 0!==_e&&_e.texture.dispose();const ue=void 0!==F.morphAttributes.normal,Ne=F.morphAttributes.position,Re=F.morphAttributes.normal||[],st=!0===ue?2:1;let ht=F.attributes.position.count*st,Et=1;ht>e.maxTextureSize&&(Et=Math.ceil(ht/e.maxTextureSize),ht=e.maxTextureSize);const hn=new Float32Array(ht*Et*4*le),Kt=new FP(hn,ht,Et,le);Kt.format=yu,Kt.type=E_,Kt.needsUpdate=!0;const We=4*st;for(let Ht=0;Ht<le;Ht++){const it=Ne[Ht],kt=Re[Ht],et=ht*Et*4*Ht;for(let bt=0;bt<it.count;bt++){u.fromBufferAttribute(it,bt),!0===it.normalized&&TV(u,it);const Gt=bt*We;hn[et+Gt+0]=u.x,hn[et+Gt+1]=u.y,hn[et+Gt+2]=u.z,hn[et+Gt+3]=0,!0===ue&&(u.fromBufferAttribute(kt,bt),!0===kt.normalized&&TV(u,kt),hn[et+Gt+4]=u.x,hn[et+Gt+5]=u.y,hn[et+Gt+6]=u.z,hn[et+Gt+7]=0)}}_e={count:le,texture:Kt,size:new ui(ht,Et)},o.set(F,_e),F.addEventListener("dispose",It)}let xe=0;for(let ue=0;ue<Q.length;ue++)xe+=Q[ue];const fe=F.morphTargetsRelative?1:1-xe;Z.getUniforms().setValue(n,"morphTargetBaseInfluence",fe),Z.getUniforms().setValue(n,"morphTargetInfluences",Q),Z.getUniforms().setValue(n,"morphTargetsTexture",_e.texture,t),Z.getUniforms().setValue(n,"morphTargetsTextureSize",_e.size)}else{const le=void 0===Q?0:Q.length;let _e=r[F.id];if(void 0===_e||_e.length!==le){_e=[];for(let Re=0;Re<le;Re++)_e[Re]=[Re,0];r[F.id]=_e}for(let Re=0;Re<le;Re++){const Ye=_e[Re];Ye[0]=Re,Ye[1]=Q[Re]}_e.sort($ie);for(let Re=0;Re<8;Re++)Re<le&&_e[Re][1]?(m[Re][0]=_e[Re][0],m[Re][1]=_e[Re][1]):(m[Re][0]=Number.MAX_SAFE_INTEGER,m[Re][1]=0);m.sort(Qie);const xe=F.morphAttributes.position,fe=F.morphAttributes.normal;let ue=0;for(let Re=0;Re<8;Re++){const Ye=m[Re],st=Ye[0],ht=Ye[1];st!==Number.MAX_SAFE_INTEGER&&ht?(xe&&F.getAttribute("morphTarget"+Re)!==xe[st]&&F.setAttribute("morphTarget"+Re,xe[st]),fe&&F.getAttribute("morphNormal"+Re)!==fe[st]&&F.setAttribute("morphNormal"+Re,fe[st]),s[Re]=ht,ue+=ht):(xe&&!0===F.hasAttribute("morphTarget"+Re)&&F.deleteAttribute("morphTarget"+Re),fe&&!0===F.hasAttribute("morphNormal"+Re)&&F.deleteAttribute("morphNormal"+Re),s[Re]=0)}const Ne=F.morphTargetsRelative?1:1-ue;Z.getUniforms().setValue(n,"morphTargetBaseInfluence",Ne),Z.getUniforms().setValue(n,"morphTargetInfluences",s)}}}}function tre(n,e,t,r){let s=new WeakMap;function m(w){const T=w.target;T.removeEventListener("dispose",m),t.remove(T.instanceMatrix),null!==T.instanceColor&&t.remove(T.instanceColor)}return{update:function o(w){const T=r.render.frame,N=e.get(w,w.geometry);return s.get(N)!==T&&(e.update(N),s.set(N,T)),w.isInstancedMesh&&(!1===w.hasEventListener("dispose",m)&&w.addEventListener("dispose",m),t.update(w.instanceMatrix,34962),null!==w.instanceColor&&t.update(w.instanceColor,34962)),N},dispose:function u(){s=new WeakMap}}}FP.prototype.isDataTexture2DArray=!0;class DV extends Ec{constructor(e=null,t=1,r=1,s=1){super(null),this.image={data:e,width:t,height:r,depth:s},this.magFilter=fc,this.minFilter=fc,this.wrapR=vu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}DV.prototype.isDataTexture3D=!0;const AV=new Ec,IV=new FP,RV=new DV,kV=new SM,PV=[],LV=[],FV=new Float32Array(16),OV=new Float32Array(9),NV=new Float32Array(4);function nx(n,e,t){const r=n[0];if(r<=0||r>0)return n;const s=e*t;let o=PV[s];if(void 0===o&&(o=new Float32Array(s),PV[s]=o),0!==e){r.toArray(o,0);for(let u=1,m=0;u!==e;++u)m+=t,n[u].toArray(o,m)}return o}function ju(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function wu(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function $T(n,e){let t=LV[e];void 0===t&&(t=new Int32Array(e),LV[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function nre(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function ire(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ju(t,e))return;n.uniform2fv(this.addr,e),wu(t,e)}}function rre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ju(t,e))return;n.uniform3fv(this.addr,e),wu(t,e)}}function sre(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ju(t,e))return;n.uniform4fv(this.addr,e),wu(t,e)}}function ore(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(ju(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),wu(t,e)}else{if(ju(t,r))return;NV.set(r),n.uniformMatrix2fv(this.addr,!1,NV),wu(t,r)}}function are(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(ju(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),wu(t,e)}else{if(ju(t,r))return;OV.set(r),n.uniformMatrix3fv(this.addr,!1,OV),wu(t,r)}}function lre(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(ju(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),wu(t,e)}else{if(ju(t,r))return;FV.set(r),n.uniformMatrix4fv(this.addr,!1,FV),wu(t,r)}}function cre(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function ure(n,e){const t=this.cache;ju(t,e)||(n.uniform2iv(this.addr,e),wu(t,e))}function hre(n,e){const t=this.cache;ju(t,e)||(n.uniform3iv(this.addr,e),wu(t,e))}function dre(n,e){const t=this.cache;ju(t,e)||(n.uniform4iv(this.addr,e),wu(t,e))}function fre(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function pre(n,e){const t=this.cache;ju(t,e)||(n.uniform2uiv(this.addr,e),wu(t,e))}function mre(n,e){const t=this.cache;ju(t,e)||(n.uniform3uiv(this.addr,e),wu(t,e))}function gre(n,e){const t=this.cache;ju(t,e)||(n.uniform4uiv(this.addr,e),wu(t,e))}function _re(n,e,t){const r=this.cache,s=t.allocateTextureUnit();r[0]!==s&&(n.uniform1i(this.addr,s),r[0]=s),t.safeSetTexture2D(e||AV,s)}function vre(n,e,t){const r=this.cache,s=t.allocateTextureUnit();r[0]!==s&&(n.uniform1i(this.addr,s),r[0]=s),t.setTexture3D(e||RV,s)}function yre(n,e,t){const r=this.cache,s=t.allocateTextureUnit();r[0]!==s&&(n.uniform1i(this.addr,s),r[0]=s),t.safeSetTextureCube(e||kV,s)}function bre(n,e,t){const r=this.cache,s=t.allocateTextureUnit();r[0]!==s&&(n.uniform1i(this.addr,s),r[0]=s),t.setTexture2DArray(e||IV,s)}function wre(n,e){n.uniform1fv(this.addr,e)}function Mre(n,e){const t=nx(e,this.size,2);n.uniform2fv(this.addr,t)}function Cre(n,e){const t=nx(e,this.size,3);n.uniform3fv(this.addr,t)}function Sre(n,e){const t=nx(e,this.size,4);n.uniform4fv(this.addr,t)}function Ere(n,e){const t=nx(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Tre(n,e){const t=nx(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Dre(n,e){const t=nx(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Are(n,e){n.uniform1iv(this.addr,e)}function Ire(n,e){n.uniform2iv(this.addr,e)}function Rre(n,e){n.uniform3iv(this.addr,e)}function kre(n,e){n.uniform4iv(this.addr,e)}function Pre(n,e){n.uniform1uiv(this.addr,e)}function Lre(n,e){n.uniform2uiv(this.addr,e)}function Fre(n,e){n.uniform3uiv(this.addr,e)}function Ore(n,e){n.uniform4uiv(this.addr,e)}function Nre(n,e,t){const r=e.length,s=$T(t,r);n.uniform1iv(this.addr,s);for(let o=0;o!==r;++o)t.safeSetTexture2D(e[o]||AV,s[o])}function Bre(n,e,t){const r=e.length,s=$T(t,r);n.uniform1iv(this.addr,s);for(let o=0;o!==r;++o)t.setTexture3D(e[o]||RV,s[o])}function Hre(n,e,t){const r=e.length,s=$T(t,r);n.uniform1iv(this.addr,s);for(let o=0;o!==r;++o)t.safeSetTextureCube(e[o]||kV,s[o])}function zre(n,e,t){const r=e.length,s=$T(t,r);n.uniform1iv(this.addr,s);for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||IV,s[o])}function Ure(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=function xre(n){switch(n){case 5126:return nre;case 35664:return ire;case 35665:return rre;case 35666:return sre;case 35674:return ore;case 35675:return are;case 35676:return lre;case 5124:case 35670:return cre;case 35667:case 35671:return ure;case 35668:case 35672:return hre;case 35669:case 35673:return dre;case 5125:return fre;case 36294:return pre;case 36295:return mre;case 36296:return gre;case 35678:case 36198:case 36298:case 36306:case 35682:return _re;case 35679:case 36299:case 36307:return vre;case 35680:case 36300:case 36308:case 36293:return yre;case 36289:case 36303:case 36311:case 36292:return bre}}(e.type)}function BV(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=function Vre(n){switch(n){case 5126:return wre;case 35664:return Mre;case 35665:return Cre;case 35666:return Sre;case 35674:return Ere;case 35675:return Tre;case 35676:return Dre;case 5124:case 35670:return Are;case 35667:case 35671:return Ire;case 35668:case 35672:return Rre;case 35669:case 35673:return kre;case 5125:return Pre;case 36294:return Lre;case 36295:return Fre;case 36296:return Ore;case 35678:case 36198:case 36298:case 36306:case 35682:return Nre;case 35679:case 36299:case 36307:return Bre;case 35680:case 36300:case 36308:case 36293:return Hre;case 36289:case 36303:case 36311:case 36292:return zre}}(e.type)}function HV(n){this.id=n,this.seq=[],this.map={}}BV.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),wu(e,n)},HV.prototype.setValue=function(n,e,t){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const u=r[s];u.setValue(n,e[u.id],t)}};const OP=/(\w+)(\])?(\[|\.)?/g;function zV(n,e){n.seq.push(e),n.map[e.id]=e}function Gre(n,e,t){const r=n.name,s=r.length;for(OP.lastIndex=0;;){const o=OP.exec(r),u=OP.lastIndex;let m=o[1];const T=o[3];if("]"===o[2]&&(m|=0),void 0===T||"["===T&&u+2===s){zV(t,void 0===T?new Ure(m,n,e):new BV(m,n,e));break}{let N=t.map[m];void 0===N&&(N=new HV(m),zV(t,N)),t=N}}}function N_(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let r=0;r<t;++r){const s=n.getActiveUniform(e,r);Gre(s,n.getUniformLocation(e,s.name),this)}}function VV(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}N_.prototype.setValue=function(n,e,t,r){const s=this.map[e];void 0!==s&&s.setValue(n,t,r)},N_.prototype.setOptional=function(n,e,t){const r=e[t];void 0!==r&&this.setValue(n,t,r)},N_.upload=function(n,e,t,r){for(let s=0,o=e.length;s!==o;++s){const u=e[s],m=t[u.id];!1!==m.needsUpdate&&u.setValue(n,m.value,r)}},N_.seqWithValue=function(n,e){const t=[];for(let r=0,s=n.length;r!==s;++r){const o=n[r];o.id in e&&t.push(o)}return t};let Wre=0;function UV(n,e,t){const r=n.getShaderParameter(e,35713),s=n.getShaderInfoLog(e).trim();return r&&""===s?"":t.toUpperCase()+"\n\n"+s+"\n\n"+function qre(n){const e=n.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(n.getShaderSource(e))}function Zre(n,e){const t=function jre(n){switch(n){case T_:return["Linear","( value )"];case hl:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Yre(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function AM(n){return""!==n}function GV(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function WV(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Qre=/^[ \t]*#include +<([\w\d./]+)>/gm;function NP(n){return n.replace(Qre,$re)}function $re(n,e){const t=_o[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return NP(t)}const ese=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,tse=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function qV(n){return n.replace(tse,jV).replace(ese,nse)}function nse(n,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),jV(0,e,t,r)}function jV(n,e,t,r){let s="";for(let o=parseInt(e);o<parseInt(t);o++)s+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return s}function ZV(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function ase(n,e,t,r){const s=n.getContext(),o=t.defines;let u=t.vertexShader,m=t.fragmentShader;const w=function ise(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),T=function rse(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),F=function sse(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case 302:case 307:e="ENVMAP_MODE_REFRACTION"}return e}(t),N=function ose(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),Z=t.isWebGL2?"":function Xre(n){return[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(AM).join("\n")}(t),Q=function Jre(n){const e=[];for(const t in n){const r=n[t];!1!==r&&e.push("#define "+t+" "+r)}return e.join("\n")}(o),le=s.createProgram();let _e,xe,fe=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(_e=[Q].filter(AM).join("\n"),_e.length>0&&(_e+="\n"),xe=[Z,Q].filter(AM).join("\n"),xe.length>0&&(xe+="\n")):(_e=[ZV(t),"#define SHADER_NAME "+t.shaderName,Q,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+F:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+w:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(AM).join("\n"),xe=[Z,ZV(t),"#define SHADER_NAME "+t.shaderName,Q,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+T:"",t.envMap?"#define "+F:"",t.envMap?"#define "+N:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+w:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?_o.tonemapping_pars_fragment:"",0!==t.toneMapping?Yre("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.transparent?"":"#define OPAQUE",_o.encodings_pars_fragment,Zre("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(AM).join("\n")),u=NP(u),u=GV(u,t),u=WV(u,t),m=NP(m),m=GV(m,t),m=WV(m,t),u=qV(u),m=qV(m),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(fe="#version 300 es\n",_e=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+_e,xe=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+xe);const Ne=fe+xe+m,Re=VV(s,35633,fe+_e+u),Ye=VV(s,35632,Ne);if(s.attachShader(le,Re),s.attachShader(le,Ye),void 0!==t.index0AttributeName?s.bindAttribLocation(le,0,t.index0AttributeName):!0===t.morphTargets&&s.bindAttribLocation(le,0,"position"),s.linkProgram(le),n.debug.checkShaderErrors){const Et=s.getProgramInfoLog(le).trim(),hn=s.getShaderInfoLog(Re).trim(),Kt=s.getShaderInfoLog(Ye).trim();let We=!0,It=!0;if(!1===s.getProgramParameter(le,35714)){We=!1;const Ht=UV(s,Re,"vertex"),it=UV(s,Ye,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(le,35715)+"\n\nProgram Info Log: "+Et+"\n"+Ht+"\n"+it)}else""!==Et?console.warn("THREE.WebGLProgram: Program Info Log:",Et):(""===hn||""===Kt)&&(It=!1);It&&(this.diagnostics={runnable:We,programLog:Et,vertexShader:{log:hn,prefix:_e},fragmentShader:{log:Kt,prefix:xe}})}let st,ht;return s.deleteShader(Re),s.deleteShader(Ye),this.getUniforms=function(){return void 0===st&&(st=new N_(s,le)),st},this.getAttributes=function(){return void 0===ht&&(ht=function Kre(n,e){const t={},r=n.getProgramParameter(e,35721);for(let s=0;s<r;s++){const o=n.getActiveAttrib(e,s),u=o.name;let m=1;35674===o.type&&(m=2),35675===o.type&&(m=3),35676===o.type&&(m=4),t[u]={type:o.type,location:n.getAttribLocation(e,u),locationSize:m}}return t}(s,le)),ht},this.destroy=function(){r.releaseStatesOfProgram(this),s.deleteProgram(le),this.program=void 0},this.name=t.shaderName,this.id=Wre++,this.cacheKey=e,this.usedTimes=1,this.program=le,this.vertexShader=Re,this.fragmentShader=Ye,this}let lse=0;class cse{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.fragmentShader,s=this._getShaderStage(e.vertexShader),o=this._getShaderStage(r),u=this._getShaderCacheForMaterial(e);return!1===u.has(s)&&(u.add(s),s.usedTimes++),!1===u.has(o)&&(u.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const r=new use;t.set(e,r)}return t.get(e)}}class use{constructor(){this.id=lse++,this.usedTimes=0}}function hse(n,e,t,r,s,o,u){const m=new gP,w=new cse,T=[],F=s.isWebGL2,N=s.logarithmicDepthBuffer,Z=s.floatVertexTextures,Q=s.maxVertexUniforms,le=s.vertexTextures;let _e=s.precision;const xe={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function ue(We,It,Ht,it,kt){const et=it.fog,Gt=(We.isMeshStandardMaterial?t:e).get(We.envMap||(We.isMeshStandardMaterial?it.environment:null)),pn=xe[We.type],Qt=kt.isSkinnedMesh?function fe(We){const Ht=We.skeleton.bones;if(Z)return 1024;{const kt=Math.floor((Q-20)/4),et=Math.min(kt,Ht.length);return et<Ht.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Ht.length+" bones. This GPU supports "+et+"."),0):et}}(kt):0;let mn,zn,Ni,gi;if(null!==We.precision&&(_e=s.getMaxPrecision(We.precision),_e!==We.precision&&console.warn("THREE.WebGLProgram.getParameters:",We.precision,"not supported, using",_e,"instead.")),pn){const qi=wp[pn];mn=qi.vertexShader,zn=qi.fragmentShader}else mn=We.vertexShader,zn=We.fragmentShader,w.update(We),Ni=w.getVertexShaderID(We),gi=w.getFragmentShaderID(We);const Tn=n.getRenderTarget(),yi=We.clearcoat>0;return{isWebGL2:F,shaderID:pn,shaderName:We.type,vertexShader:mn,fragmentShader:zn,defines:We.defines,customVertexShaderID:Ni,customFragmentShaderID:gi,isRawShaderMaterial:!0===We.isRawShaderMaterial,glslVersion:We.glslVersion,precision:_e,instancing:!0===kt.isInstancedMesh,instancingColor:!0===kt.isInstancedMesh&&null!==kt.instanceColor,supportsVertexTextures:le,outputEncoding:null===Tn?n.outputEncoding:!0===Tn.isXRRenderTarget?Tn.texture.encoding:T_,map:!!We.map,matcap:!!We.matcap,envMap:!!Gt,envMapMode:Gt&&Gt.mapping,envMapCubeUV:!!Gt&&(306===Gt.mapping||307===Gt.mapping),lightMap:!!We.lightMap,aoMap:!!We.aoMap,emissiveMap:!!We.emissiveMap,bumpMap:!!We.bumpMap,normalMap:!!We.normalMap,objectSpaceNormalMap:1===We.normalMapType,tangentSpaceNormalMap:0===We.normalMapType,decodeVideoTexture:!!We.map&&!0===We.map.isVideoTexture&&We.map.encoding===hl,clearcoat:yi,clearcoatMap:yi&&!!We.clearcoatMap,clearcoatRoughnessMap:yi&&!!We.clearcoatRoughnessMap,clearcoatNormalMap:yi&&!!We.clearcoatNormalMap,displacementMap:!!We.displacementMap,roughnessMap:!!We.roughnessMap,metalnessMap:!!We.metalnessMap,specularMap:!!We.specularMap,specularIntensityMap:!!We.specularIntensityMap,specularColorMap:!!We.specularColorMap,transparent:We.transparent,alphaMap:!!We.alphaMap,alphaTest:We.alphaTest>0,gradientMap:!!We.gradientMap,sheen:We.sheen>0,sheenColorMap:!!We.sheenColorMap,sheenRoughnessMap:!!We.sheenRoughnessMap,transmission:We.transmission>0,transmissionMap:!!We.transmissionMap,thicknessMap:!!We.thicknessMap,combine:We.combine,vertexTangents:!!We.normalMap&&!!kt.geometry&&!!kt.geometry.attributes.tangent,vertexColors:We.vertexColors,vertexAlphas:!0===We.vertexColors&&!!kt.geometry&&!!kt.geometry.attributes.color&&4===kt.geometry.attributes.color.itemSize,vertexUvs:!!(We.map||We.bumpMap||We.normalMap||We.specularMap||We.alphaMap||We.emissiveMap||We.roughnessMap||We.metalnessMap||We.clearcoatMap||We.clearcoatRoughnessMap||We.clearcoatNormalMap||We.displacementMap||We.transmissionMap||We.thicknessMap||We.specularIntensityMap||We.specularColorMap||We.sheenColorMap||We.sheenRoughnessMap),uvsVertexOnly:!(We.map||We.bumpMap||We.normalMap||We.specularMap||We.alphaMap||We.emissiveMap||We.roughnessMap||We.metalnessMap||We.clearcoatNormalMap||We.transmission>0||We.transmissionMap||We.thicknessMap||We.specularIntensityMap||We.specularColorMap||We.sheen>0||We.sheenColorMap||We.sheenRoughnessMap||!We.displacementMap),fog:!!et,useFog:We.fog,fogExp2:et&&et.isFogExp2,flatShading:!!We.flatShading,sizeAttenuation:We.sizeAttenuation,logarithmicDepthBuffer:N,skinning:!0===kt.isSkinnedMesh&&Qt>0,maxBones:Qt,useVertexTexture:Z,morphTargets:!!kt.geometry&&!!kt.geometry.morphAttributes.position,morphNormals:!!kt.geometry&&!!kt.geometry.morphAttributes.normal,morphTargetsCount:kt.geometry&&kt.geometry.morphAttributes.position?kt.geometry.morphAttributes.position.length:0,numDirLights:It.directional.length,numPointLights:It.point.length,numSpotLights:It.spot.length,numRectAreaLights:It.rectArea.length,numHemiLights:It.hemi.length,numDirLightShadows:It.directionalShadowMap.length,numPointLightShadows:It.pointShadowMap.length,numSpotLightShadows:It.spotShadowMap.length,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,dithering:We.dithering,shadowMapEnabled:n.shadowMap.enabled&&Ht.length>0,shadowMapType:n.shadowMap.type,toneMapping:We.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:We.premultipliedAlpha,doubleSided:2===We.side,flipSided:1===We.side,depthPacking:void 0!==We.depthPacking&&We.depthPacking,index0AttributeName:We.index0AttributeName,extensionDerivatives:We.extensions&&We.extensions.derivatives,extensionFragDepth:We.extensions&&We.extensions.fragDepth,extensionDrawBuffers:We.extensions&&We.extensions.drawBuffers,extensionShaderTextureLOD:We.extensions&&We.extensions.shaderTextureLOD,rendererExtensionFragDepth:F||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:F||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:F||r.has("EXT_shader_texture_lod"),customProgramCacheKey:We.customProgramCacheKey()}},getProgramCacheKey:function Ne(We){const It=[];if(We.shaderID?It.push(We.shaderID):(It.push(We.customVertexShaderID),It.push(We.customFragmentShaderID)),void 0!==We.defines)for(const Ht in We.defines)It.push(Ht),It.push(We.defines[Ht]);return!1===We.isRawShaderMaterial&&(function Re(We,It){We.push(It.precision),We.push(It.outputEncoding),We.push(It.envMapMode),We.push(It.combine),We.push(It.vertexUvs),We.push(It.fogExp2),We.push(It.sizeAttenuation),We.push(It.maxBones),We.push(It.morphTargetsCount),We.push(It.numDirLights),We.push(It.numPointLights),We.push(It.numSpotLights),We.push(It.numHemiLights),We.push(It.numRectAreaLights),We.push(It.numDirLightShadows),We.push(It.numPointLightShadows),We.push(It.numSpotLightShadows),We.push(It.shadowMapType),We.push(It.toneMapping),We.push(It.numClippingPlanes),We.push(It.numClipIntersection)}(It,We),function Ye(We,It){m.disableAll(),It.isWebGL2&&m.enable(0),It.supportsVertexTextures&&m.enable(1),It.instancing&&m.enable(2),It.instancingColor&&m.enable(3),It.map&&m.enable(4),It.matcap&&m.enable(5),It.envMap&&m.enable(6),It.envMapCubeUV&&m.enable(7),It.lightMap&&m.enable(8),It.aoMap&&m.enable(9),It.emissiveMap&&m.enable(10),It.bumpMap&&m.enable(11),It.normalMap&&m.enable(12),It.objectSpaceNormalMap&&m.enable(13),It.tangentSpaceNormalMap&&m.enable(14),It.clearcoat&&m.enable(15),It.clearcoatMap&&m.enable(16),It.clearcoatRoughnessMap&&m.enable(17),It.clearcoatNormalMap&&m.enable(18),It.displacementMap&&m.enable(19),It.specularMap&&m.enable(20),It.roughnessMap&&m.enable(21),It.metalnessMap&&m.enable(22),It.gradientMap&&m.enable(23),It.alphaMap&&m.enable(24),It.alphaTest&&m.enable(25),It.vertexColors&&m.enable(26),It.vertexAlphas&&m.enable(27),It.vertexUvs&&m.enable(28),It.vertexTangents&&m.enable(29),It.uvsVertexOnly&&m.enable(30),It.fog&&m.enable(31),We.push(m.mask),m.disableAll(),It.useFog&&m.enable(0),It.flatShading&&m.enable(1),It.logarithmicDepthBuffer&&m.enable(2),It.skinning&&m.enable(3),It.useVertexTexture&&m.enable(4),It.morphTargets&&m.enable(5),It.morphNormals&&m.enable(6),It.premultipliedAlpha&&m.enable(7),It.shadowMapEnabled&&m.enable(8),It.physicallyCorrectLights&&m.enable(9),It.doubleSided&&m.enable(10),It.flipSided&&m.enable(11),It.depthPacking&&m.enable(12),It.dithering&&m.enable(13),It.specularIntensityMap&&m.enable(14),It.specularColorMap&&m.enable(15),It.transmission&&m.enable(16),It.transmissionMap&&m.enable(17),It.thicknessMap&&m.enable(18),It.sheen&&m.enable(19),It.sheenColorMap&&m.enable(20),It.sheenRoughnessMap&&m.enable(21),It.decodeVideoTexture&&m.enable(22),It.transparent&&m.enable(23),We.push(m.mask)}(It,We),It.push(n.outputEncoding)),It.push(We.customProgramCacheKey),It.join()},getUniforms:function st(We){const It=xe[We.type];let Ht;return Ht=It?Hte.clone(wp[It].uniforms):We.uniforms,Ht},acquireProgram:function ht(We,It){let Ht;for(let it=0,kt=T.length;it<kt;it++){const et=T[it];if(et.cacheKey===It){Ht=et,++Ht.usedTimes;break}}return void 0===Ht&&(Ht=new ase(n,It,We,o),T.push(Ht)),Ht},releaseProgram:function Et(We){if(0==--We.usedTimes){const It=T.indexOf(We);T[It]=T[T.length-1],T.pop(),We.destroy()}},releaseShaderCache:function hn(We){w.remove(We)},programs:T,dispose:function Kt(){w.dispose()}}}function dse(){let n=new WeakMap;return{get:function e(o){let u=n.get(o);return void 0===u&&(u={},n.set(o,u)),u},remove:function t(o){n.delete(o)},update:function r(o,u,m){n.get(o)[u]=m},dispose:function s(){n=new WeakMap}}}function fse(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function YV(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function XV(){const n=[];let e=0;const t=[],r=[],s=[];function u(N,Z,Q,le,_e,xe){let fe=n[e];return void 0===fe?(fe={id:N.id,object:N,geometry:Z,material:Q,groupOrder:le,renderOrder:N.renderOrder,z:_e,group:xe},n[e]=fe):(fe.id=N.id,fe.object=N,fe.geometry=Z,fe.material=Q,fe.groupOrder=le,fe.renderOrder=N.renderOrder,fe.z=_e,fe.group=xe),e++,fe}return{opaque:t,transmissive:r,transparent:s,init:function o(){e=0,t.length=0,r.length=0,s.length=0},push:function m(N,Z,Q,le,_e,xe){const fe=u(N,Z,Q,le,_e,xe);Q.transmission>0?r.push(fe):!0===Q.transparent?s.push(fe):t.push(fe)},unshift:function w(N,Z,Q,le,_e,xe){const fe=u(N,Z,Q,le,_e,xe);Q.transmission>0?r.unshift(fe):!0===Q.transparent?s.unshift(fe):t.unshift(fe)},finish:function F(){for(let N=e,Z=n.length;N<Z;N++){const Q=n[N];if(null===Q.id)break;Q.id=null,Q.object=null,Q.geometry=null,Q.material=null,Q.group=null}},sort:function T(N,Z){t.length>1&&t.sort(N||fse),r.length>1&&r.sort(Z||YV),s.length>1&&s.sort(Z||YV)}}}function pse(){let n=new WeakMap;return{get:function e(r,s){let o;return!1===n.has(r)?(o=new XV,n.set(r,[o])):s>=n.get(r).length?(o=new XV,n.get(r).push(o)):o=n.get(r)[s],o},dispose:function t(){n=new WeakMap}}}function mse(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ct,color:new rr};break;case"SpotLight":t={position:new ct,direction:new ct,color:new rr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ct,color:new rr,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ct,skyColor:new rr,groundColor:new rr};break;case"RectAreaLight":t={color:new rr,position:new ct,halfWidth:new ct,halfHeight:new ct}}return n[e.id]=t,t}}}let _se=0;function vse(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function yse(n,e){const t=new mse,r=function gse(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ui};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ui,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let F=0;F<9;F++)s.probe.push(new ct);const o=new ct,u=new Nr,m=new Nr;return{setup:function w(F,N){let Z=0,Q=0,le=0;for(let hn=0;hn<9;hn++)s.probe[hn].set(0,0,0);let _e=0,xe=0,fe=0,ue=0,Ne=0,Re=0,Ye=0,st=0;F.sort(vse);const ht=!0!==N?Math.PI:1;for(let hn=0,Kt=F.length;hn<Kt;hn++){const We=F[hn],It=We.color,Ht=We.intensity,it=We.distance,kt=We.shadow&&We.shadow.map?We.shadow.map.texture:null;if(We.isAmbientLight)Z+=It.r*Ht*ht,Q+=It.g*Ht*ht,le+=It.b*Ht*ht;else if(We.isLightProbe)for(let et=0;et<9;et++)s.probe[et].addScaledVector(We.sh.coefficients[et],Ht);else if(We.isDirectionalLight){const et=t.get(We);if(et.color.copy(We.color).multiplyScalar(We.intensity*ht),We.castShadow){const bt=We.shadow,Gt=r.get(We);Gt.shadowBias=bt.bias,Gt.shadowNormalBias=bt.normalBias,Gt.shadowRadius=bt.radius,Gt.shadowMapSize=bt.mapSize,s.directionalShadow[_e]=Gt,s.directionalShadowMap[_e]=kt,s.directionalShadowMatrix[_e]=We.shadow.matrix,Re++}s.directional[_e]=et,_e++}else if(We.isSpotLight){const et=t.get(We);if(et.position.setFromMatrixPosition(We.matrixWorld),et.color.copy(It).multiplyScalar(Ht*ht),et.distance=it,et.coneCos=Math.cos(We.angle),et.penumbraCos=Math.cos(We.angle*(1-We.penumbra)),et.decay=We.decay,We.castShadow){const bt=We.shadow,Gt=r.get(We);Gt.shadowBias=bt.bias,Gt.shadowNormalBias=bt.normalBias,Gt.shadowRadius=bt.radius,Gt.shadowMapSize=bt.mapSize,s.spotShadow[fe]=Gt,s.spotShadowMap[fe]=kt,s.spotShadowMatrix[fe]=We.shadow.matrix,st++}s.spot[fe]=et,fe++}else if(We.isRectAreaLight){const et=t.get(We);et.color.copy(It).multiplyScalar(Ht),et.halfWidth.set(.5*We.width,0,0),et.halfHeight.set(0,.5*We.height,0),s.rectArea[ue]=et,ue++}else if(We.isPointLight){const et=t.get(We);if(et.color.copy(We.color).multiplyScalar(We.intensity*ht),et.distance=We.distance,et.decay=We.decay,We.castShadow){const bt=We.shadow,Gt=r.get(We);Gt.shadowBias=bt.bias,Gt.shadowNormalBias=bt.normalBias,Gt.shadowRadius=bt.radius,Gt.shadowMapSize=bt.mapSize,Gt.shadowCameraNear=bt.camera.near,Gt.shadowCameraFar=bt.camera.far,s.pointShadow[xe]=Gt,s.pointShadowMap[xe]=kt,s.pointShadowMatrix[xe]=We.shadow.matrix,Ye++}s.point[xe]=et,xe++}else if(We.isHemisphereLight){const et=t.get(We);et.skyColor.copy(We.color).multiplyScalar(Ht*ht),et.groundColor.copy(We.groundColor).multiplyScalar(Ht*ht),s.hemi[Ne]=et,Ne++}}ue>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(s.rectAreaLTC1=tr.LTC_FLOAT_1,s.rectAreaLTC2=tr.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(s.rectAreaLTC1=tr.LTC_HALF_1,s.rectAreaLTC2=tr.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=Z,s.ambient[1]=Q,s.ambient[2]=le;const Et=s.hash;(Et.directionalLength!==_e||Et.pointLength!==xe||Et.spotLength!==fe||Et.rectAreaLength!==ue||Et.hemiLength!==Ne||Et.numDirectionalShadows!==Re||Et.numPointShadows!==Ye||Et.numSpotShadows!==st)&&(s.directional.length=_e,s.spot.length=fe,s.rectArea.length=ue,s.point.length=xe,s.hemi.length=Ne,s.directionalShadow.length=Re,s.directionalShadowMap.length=Re,s.pointShadow.length=Ye,s.pointShadowMap.length=Ye,s.spotShadow.length=st,s.spotShadowMap.length=st,s.directionalShadowMatrix.length=Re,s.pointShadowMatrix.length=Ye,s.spotShadowMatrix.length=st,Et.directionalLength=_e,Et.pointLength=xe,Et.spotLength=fe,Et.rectAreaLength=ue,Et.hemiLength=Ne,Et.numDirectionalShadows=Re,Et.numPointShadows=Ye,Et.numSpotShadows=st,s.version=_se++)},setupView:function T(F,N){let Z=0,Q=0,le=0,_e=0,xe=0;const fe=N.matrixWorldInverse;for(let ue=0,Ne=F.length;ue<Ne;ue++){const Re=F[ue];if(Re.isDirectionalLight){const Ye=s.directional[Z];Ye.direction.setFromMatrixPosition(Re.matrixWorld),o.setFromMatrixPosition(Re.target.matrixWorld),Ye.direction.sub(o),Ye.direction.transformDirection(fe),Z++}else if(Re.isSpotLight){const Ye=s.spot[le];Ye.position.setFromMatrixPosition(Re.matrixWorld),Ye.position.applyMatrix4(fe),Ye.direction.setFromMatrixPosition(Re.matrixWorld),o.setFromMatrixPosition(Re.target.matrixWorld),Ye.direction.sub(o),Ye.direction.transformDirection(fe),le++}else if(Re.isRectAreaLight){const Ye=s.rectArea[_e];Ye.position.setFromMatrixPosition(Re.matrixWorld),Ye.position.applyMatrix4(fe),m.identity(),u.copy(Re.matrixWorld),u.premultiply(fe),m.extractRotation(u),Ye.halfWidth.set(.5*Re.width,0,0),Ye.halfHeight.set(0,.5*Re.height,0),Ye.halfWidth.applyMatrix4(m),Ye.halfHeight.applyMatrix4(m),_e++}else if(Re.isPointLight){const Ye=s.point[Q];Ye.position.setFromMatrixPosition(Re.matrixWorld),Ye.position.applyMatrix4(fe),Q++}else if(Re.isHemisphereLight){const Ye=s.hemi[xe];Ye.direction.setFromMatrixPosition(Re.matrixWorld),Ye.direction.transformDirection(fe),Ye.direction.normalize(),xe++}}},state:s}}function JV(n,e){const t=new yse(n,e),r=[],s=[];return{init:function o(){r.length=0,s.length=0},state:{lightsArray:r,shadowsArray:s,lights:t},setupLights:function w(N){t.setup(r,N)},setupLightsView:function T(N){t.setupView(r,N)},pushLight:function u(N){r.push(N)},pushShadow:function m(N){s.push(N)}}}function bse(n,e){let t=new WeakMap;return{get:function r(o,u=0){let m;return!1===t.has(o)?(m=new JV(n,e),t.set(o,[m])):u>=t.get(o).length?(m=new JV(n,e),t.get(o).push(m)):m=t.get(o)[u],m},dispose:function s(){t=new WeakMap}}}class BP extends ou{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}BP.prototype.isMeshDepthMaterial=!0;class HP extends ou{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new ct,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function KV(n,e,t){let r=new XT;const s=new ui,o=new ui,u=new xa,m=new BP({depthPacking:3201}),w=new HP,T={},F=t.maxTextureSize,N={0:1,1:0,2:2},Z=new F_({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ui},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),Q=Z.clone();Q.defines.HORIZONTAL_PASS=1;const le=new ps;le.setAttribute("position",new ka(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _e=new Tc(le,Z),xe=this;function fe(Re,Ye){const st=e.update(_e);Z.defines.VSM_SAMPLES!==Re.blurSamples&&(Z.defines.VSM_SAMPLES=Re.blurSamples,Q.defines.VSM_SAMPLES=Re.blurSamples,Z.needsUpdate=!0,Q.needsUpdate=!0),Z.uniforms.shadow_pass.value=Re.map.texture,Z.uniforms.resolution.value=Re.mapSize,Z.uniforms.radius.value=Re.radius,n.setRenderTarget(Re.mapPass),n.clear(),n.renderBufferDirect(Ye,null,st,Z,_e,null),Q.uniforms.shadow_pass.value=Re.mapPass.texture,Q.uniforms.resolution.value=Re.mapSize,Q.uniforms.radius.value=Re.radius,n.setRenderTarget(Re.map),n.clear(),n.renderBufferDirect(Ye,null,st,Q,_e,null)}function ue(Re,Ye,st,ht,Et,hn,Kt){let We=null;const It=!0===ht.isPointLight?Re.customDistanceMaterial:Re.customDepthMaterial;if(We=void 0!==It?It:!0===ht.isPointLight?w:m,n.localClippingEnabled&&!0===st.clipShadows&&0!==st.clippingPlanes.length||st.displacementMap&&0!==st.displacementScale||st.alphaMap&&st.alphaTest>0){const Ht=We.uuid,it=st.uuid;let kt=T[Ht];void 0===kt&&(kt={},T[Ht]=kt);let et=kt[it];void 0===et&&(et=We.clone(),kt[it]=et),We=et}return We.visible=st.visible,We.wireframe=st.wireframe,We.side=3===Kt?null!==st.shadowSide?st.shadowSide:st.side:null!==st.shadowSide?st.shadowSide:N[st.side],We.alphaMap=st.alphaMap,We.alphaTest=st.alphaTest,We.clipShadows=st.clipShadows,We.clippingPlanes=st.clippingPlanes,We.clipIntersection=st.clipIntersection,We.displacementMap=st.displacementMap,We.displacementScale=st.displacementScale,We.displacementBias=st.displacementBias,We.wireframeLinewidth=st.wireframeLinewidth,We.linewidth=st.linewidth,!0===ht.isPointLight&&!0===We.isMeshDistanceMaterial&&(We.referencePosition.setFromMatrixPosition(ht.matrixWorld),We.nearDistance=Et,We.farDistance=hn),We}function Ne(Re,Ye,st,ht,Et){if(!1===Re.visible)return;if(Re.layers.test(Ye.layers)&&(Re.isMesh||Re.isLine||Re.isPoints)&&(Re.castShadow||Re.receiveShadow&&3===Et)&&(!Re.frustumCulled||r.intersectsObject(Re))){Re.modelViewMatrix.multiplyMatrices(st.matrixWorldInverse,Re.matrixWorld);const We=e.update(Re),It=Re.material;if(Array.isArray(It)){const Ht=We.groups;for(let it=0,kt=Ht.length;it<kt;it++){const et=Ht[it],bt=It[et.materialIndex];if(bt&&bt.visible){const Gt=ue(Re,0,bt,ht,st.near,st.far,Et);n.renderBufferDirect(st,null,We,Gt,Re,et)}}}else if(It.visible){const Ht=ue(Re,0,It,ht,st.near,st.far,Et);n.renderBufferDirect(st,null,We,Ht,Re,null)}}const Kt=Re.children;for(let We=0,It=Kt.length;We<It;We++)Ne(Kt[We],Ye,st,ht,Et)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(Re,Ye,st){if(!1===xe.enabled||!1===xe.autoUpdate&&!1===xe.needsUpdate||0===Re.length)return;const ht=n.getRenderTarget(),Et=n.getActiveCubeFace(),hn=n.getActiveMipmapLevel(),Kt=n.state;Kt.setBlending(0),Kt.buffers.color.setClear(1,1,1,1),Kt.buffers.depth.setTest(!0),Kt.setScissorTest(!1);for(let We=0,It=Re.length;We<It;We++){const Ht=Re[We],it=Ht.shadow;if(void 0===it){console.warn("THREE.WebGLShadowMap:",Ht,"has no shadow.");continue}if(!1===it.autoUpdate&&!1===it.needsUpdate)continue;s.copy(it.mapSize);const kt=it.getFrameExtents();if(s.multiply(kt),o.copy(it.mapSize),(s.x>F||s.y>F)&&(s.x>F&&(o.x=Math.floor(F/kt.x),s.x=o.x*kt.x,it.mapSize.x=o.x),s.y>F&&(o.y=Math.floor(F/kt.y),s.y=o.y*kt.y,it.mapSize.y=o.y)),null===it.map&&!it.isPointLightShadow&&3===this.type){const bt={minFilter:kl,magFilter:kl,format:yu};it.map=new xd(s.x,s.y,bt),it.map.texture.name=Ht.name+".shadowMap",it.mapPass=new xd(s.x,s.y,bt),it.camera.updateProjectionMatrix()}null===it.map&&(it.map=new xd(s.x,s.y,{minFilter:fc,magFilter:fc,format:yu}),it.map.texture.name=Ht.name+".shadowMap",it.camera.updateProjectionMatrix()),n.setRenderTarget(it.map),n.clear();const et=it.getViewportCount();for(let bt=0;bt<et;bt++){const Gt=it.getViewport(bt);u.set(o.x*Gt.x,o.y*Gt.y,o.x*Gt.z,o.y*Gt.w),Kt.viewport(u),it.updateMatrices(Ht,bt),r=it.getFrustum(),Ne(Ye,st,it.camera,Ht,this.type)}!it.isPointLightShadow&&3===this.type&&fe(it,st),it.needsUpdate=!1}xe.needsUpdate=!1,n.setRenderTarget(ht,Et,hn)}}function Mse(n,e,t){const r=t.isWebGL2,m=new function s(){let $t=!1;const Br=new xa;let Cr=null;const As=new xa(0,0,0,0);return{setMask:function(si){Cr!==si&&!$t&&(n.colorMask(si,si,si,si),Cr=si)},setLocked:function(si){$t=si},setClear:function(si,_s,To,Sl,zh){!0===zh&&(si*=Sl,_s*=Sl,To*=Sl),Br.set(si,_s,To,Sl),!1===As.equals(Br)&&(n.clearColor(si,_s,To,Sl),As.copy(Br))},reset:function(){$t=!1,Cr=null,As.set(-1,0,0,0)}}},w=new function o(){let $t=!1,Br=null,Cr=null,As=null;return{setTest:function(si){si?Tn(2929):Es(2929)},setMask:function(si){Br!==si&&!$t&&(n.depthMask(si),Br=si)},setFunc:function(si){if(Cr!==si){if(si)switch(si){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}else n.depthFunc(515);Cr=si}},setLocked:function(si){$t=si},setClear:function(si){As!==si&&(n.clearDepth(si),As=si)},reset:function(){$t=!1,Br=null,Cr=null,As=null}}},T=new function u(){let $t=!1,Br=null,Cr=null,As=null,si=null,_s=null,To=null,Sl=null,zh=null;return{setTest:function(Ll){$t||(Ll?Tn(2960):Es(2960))},setMask:function(Ll){Br!==Ll&&!$t&&(n.stencilMask(Ll),Br=Ll)},setFunc:function(Ll,Dp,lg){(Cr!==Ll||As!==Dp||si!==lg)&&(n.stencilFunc(Ll,Dp,lg),Cr=Ll,As=Dp,si=lg)},setOp:function(Ll,Dp,lg){(_s!==Ll||To!==Dp||Sl!==lg)&&(n.stencilOp(Ll,Dp,lg),_s=Ll,To=Dp,Sl=lg)},setLocked:function(Ll){$t=Ll},setClear:function(Ll){zh!==Ll&&(n.clearStencil(Ll),zh=Ll)},reset:function(){$t=!1,Br=null,Cr=null,As=null,si=null,_s=null,To=null,Sl=null,zh=null}}};let F={},N={},Z=new WeakMap,Q=[],le=null,_e=!1,xe=null,fe=null,ue=null,Ne=null,Re=null,Ye=null,st=null,ht=!1,Et=null,hn=null,Kt=null,We=null,It=null;const Ht=n.getParameter(35661);let it=!1,kt=0;const et=n.getParameter(7938);-1!==et.indexOf("WebGL")?(kt=parseFloat(/^WebGL (\d)/.exec(et)[1]),it=kt>=1):-1!==et.indexOf("OpenGL ES")&&(kt=parseFloat(/^OpenGL ES (\d)/.exec(et)[1]),it=kt>=2);let bt=null,Gt={};const pn=n.getParameter(3088),Qt=n.getParameter(2978),mn=(new xa).fromArray(pn),zn=(new xa).fromArray(Qt);function Ni($t,Br,Cr){const As=new Uint8Array(4),si=n.createTexture();n.bindTexture($t,si),n.texParameteri($t,10241,9728),n.texParameteri($t,10240,9728);for(let _s=0;_s<Cr;_s++)n.texImage2D(Br+_s,0,6408,1,1,0,6408,5121,As);return si}const gi={};function Tn($t){!0!==F[$t]&&(n.enable($t),F[$t]=!0)}function Es($t){!1!==F[$t]&&(n.disable($t),F[$t]=!1)}gi[3553]=Ni(3553,3553,1),gi[34067]=Ni(34067,34069,6),m.setClear(0,0,0,1),w.setClear(1),T.setClear(0),Tn(2929),w.setFunc(3),Bi(!1),br(1),Tn(2884),Qn(0);const rs={100:32774,101:32778,102:32779};if(r)rs[103]=32775,rs[104]=32776;else{const $t=e.get("EXT_blend_minmax");null!==$t&&(rs[103]=$t.MIN_EXT,rs[104]=$t.MAX_EXT)}const ss={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function Qn($t,Br,Cr,As,si,_s,To,Sl){if(0!==$t){if(!1===_e&&(Tn(3042),_e=!0),5===$t)si=si||Br,_s=_s||Cr,To=To||As,(Br!==fe||si!==Re)&&(n.blendEquationSeparate(rs[Br],rs[si]),fe=Br,Re=si),(Cr!==ue||As!==Ne||_s!==Ye||To!==st)&&(n.blendFuncSeparate(ss[Cr],ss[As],ss[_s],ss[To]),ue=Cr,Ne=As,Ye=_s,st=To),xe=$t,ht=null;else if($t!==xe||Sl!==ht){if((100!==fe||100!==Re)&&(n.blendEquation(32774),fe=100,Re=100),Sl)switch($t){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",$t)}else switch($t){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",$t)}ue=null,Ne=null,Ye=null,st=null,xe=$t,ht=Sl}}else!0===_e&&(Es(3042),_e=!1)}function Bi($t){Et!==$t&&(n.frontFace($t?2304:2305),Et=$t)}function br($t){0!==$t?(Tn(2884),$t!==hn&&n.cullFace(1===$t?1029:2===$t?1028:1032)):Es(2884),hn=$t}function Ti($t,Br,Cr){$t?(Tn(32823),(We!==Br||It!==Cr)&&(n.polygonOffset(Br,Cr),We=Br,It=Cr)):Es(32823)}function no($t){void 0===$t&&($t=33984+Ht-1),bt!==$t&&(n.activeTexture($t),bt=$t)}return{buffers:{color:m,depth:w,stencil:T},enable:Tn,disable:Es,bindFramebuffer:function yi($t,Br){return N[$t]!==Br&&(n.bindFramebuffer($t,Br),N[$t]=Br,r&&(36009===$t&&(N[36160]=Br),36160===$t&&(N[36009]=Br)),!0)},drawBuffers:function ur($t,Br){let Cr=Q,As=!1;if($t)if(Cr=Z.get(Br),void 0===Cr&&(Cr=[],Z.set(Br,Cr)),$t.isWebGLMultipleRenderTargets){const si=$t.texture;if(Cr.length!==si.length||36064!==Cr[0]){for(let _s=0,To=si.length;_s<To;_s++)Cr[_s]=36064+_s;Cr.length=si.length,As=!0}}else 36064!==Cr[0]&&(Cr[0]=36064,As=!0);else 1029!==Cr[0]&&(Cr[0]=1029,As=!0);As&&(t.isWebGL2?n.drawBuffers(Cr):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Cr))},useProgram:function qi($t){return le!==$t&&(n.useProgram($t),le=$t,!0)},setBlending:Qn,setMaterial:function Fi($t,Br){2===$t.side?Es(2884):Tn(2884);let Cr=1===$t.side;Br&&(Cr=!Cr),Bi(Cr),1===$t.blending&&!1===$t.transparent?Qn(0):Qn($t.blending,$t.blendEquation,$t.blendSrc,$t.blendDst,$t.blendEquationAlpha,$t.blendSrcAlpha,$t.blendDstAlpha,$t.premultipliedAlpha),w.setFunc($t.depthFunc),w.setTest($t.depthTest),w.setMask($t.depthWrite),m.setMask($t.colorWrite);const As=$t.stencilWrite;T.setTest(As),As&&(T.setMask($t.stencilWriteMask),T.setFunc($t.stencilFunc,$t.stencilRef,$t.stencilFuncMask),T.setOp($t.stencilFail,$t.stencilZFail,$t.stencilZPass)),Ti($t.polygonOffset,$t.polygonOffsetFactor,$t.polygonOffsetUnits),!0===$t.alphaToCoverage?Tn(32926):Es(32926)},setFlipSided:Bi,setCullFace:br,setLineWidth:function ar($t){$t!==Kt&&(it&&n.lineWidth($t),Kt=$t)},setPolygonOffset:Ti,setScissorTest:function xr($t){$t?Tn(3089):Es(3089)},activeTexture:no,bindTexture:function Eo($t,Br){null===bt&&no();let Cr=Gt[bt];void 0===Cr&&(Cr={type:void 0,texture:void 0},Gt[bt]=Cr),(Cr.type!==$t||Cr.texture!==Br)&&(n.bindTexture($t,Br||gi[$t]),Cr.type=$t,Cr.texture=Br)},unbindTexture:function wa(){const $t=Gt[bt];void 0!==$t&&void 0!==$t.type&&(n.bindTexture($t.type,null),$t.type=void 0,$t.texture=void 0)},compressedTexImage2D:function St(){try{n.compressedTexImage2D.apply(n,arguments)}catch($t){console.error("THREE.WebGLState:",$t)}},texImage2D:function us(){try{n.texImage2D.apply(n,arguments)}catch($t){console.error("THREE.WebGLState:",$t)}},texImage3D:function Yr(){try{n.texImage3D.apply(n,arguments)}catch($t){console.error("THREE.WebGLState:",$t)}},texStorage2D:function jr(){try{n.texStorage2D.apply(n,arguments)}catch($t){console.error("THREE.WebGLState:",$t)}},texStorage3D:function Zn(){try{n.texStorage3D.apply(n,arguments)}catch($t){console.error("THREE.WebGLState:",$t)}},texSubImage2D:function ft(){try{n.texSubImage2D.apply(n,arguments)}catch($t){console.error("THREE.WebGLState:",$t)}},texSubImage3D:function $n(){try{n.texSubImage3D.apply(n,arguments)}catch($t){console.error("THREE.WebGLState:",$t)}},compressedTexSubImage2D:function Qi(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch($t){console.error("THREE.WebGLState:",$t)}},scissor:function hr($t){!1===mn.equals($t)&&(n.scissor($t.x,$t.y,$t.z,$t.w),mn.copy($t))},viewport:function lr($t){!1===zn.equals($t)&&(n.viewport($t.x,$t.y,$t.z,$t.w),zn.copy($t))},reset:function Ys(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===r&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),F={},bt=null,Gt={},N={},Z=new WeakMap,Q=[],le=null,_e=!1,xe=null,fe=null,ue=null,Ne=null,Re=null,Ye=null,st=null,ht=!1,Et=null,hn=null,Kt=null,We=null,It=null,mn.set(0,0,n.canvas.width,n.canvas.height),zn.set(0,0,n.canvas.width,n.canvas.height),m.reset(),w.reset(),T.reset()}}}function Cse(n,e,t,r,s,o,u){const m=s.isWebGL2,w=s.maxTextures,T=s.maxCubemapSize,F=s.maxTextureSize,N=s.maxSamples,Q=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):void 0,le=new WeakMap;let _e,xe=!1;try{xe="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(St){}function fe(St,ft){return xe?new OffscreenCanvas(St,ft):xM("canvas")}function ue(St,ft,$n,Qi){let jr=1;if((St.width>Qi||St.height>Qi)&&(jr=Qi/Math.max(St.width,St.height)),jr<1||!0===ft){if("undefined"!=typeof HTMLImageElement&&St instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&St instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&St instanceof ImageBitmap){const Zn=ft?iV:Math.floor,us=Zn(jr*St.width),Yr=Zn(jr*St.height);void 0===_e&&(_e=fe(us,Yr));const hr=$n?fe(us,Yr):_e;return hr.width=us,hr.height=Yr,hr.getContext("2d").drawImage(St,0,0,us,Yr),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+St.width+"x"+St.height+") to ("+us+"x"+Yr+")."),hr}return"data"in St&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+St.width+"x"+St.height+")."),St}return St}function Ne(St){return rP(St.width)&&rP(St.height)}function Ye(St,ft){return St.generateMipmaps&&ft&&St.minFilter!==fc&&St.minFilter!==kl}function st(St){n.generateMipmap(St)}function ht(St,ft,$n,Qi,jr=!1){if(!1===m)return ft;if(null!==St){if(void 0!==n[St])return n[St];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+St+"'")}let Zn=ft;return 6403===ft&&(5126===$n&&(Zn=33326),5131===$n&&(Zn=33325),5121===$n&&(Zn=33321)),33319===ft&&(5126===$n&&(Zn=33328),5131===$n&&(Zn=33327),5121===$n&&(Zn=33323)),6408===ft&&(5126===$n&&(Zn=34836),5131===$n&&(Zn=34842),5121===$n&&(Zn=Qi===hl&&!1===jr?35907:32856),32819===$n&&(Zn=32854),32820===$n&&(Zn=32855)),(33325===Zn||33326===Zn||33327===Zn||33328===Zn||34842===Zn||34836===Zn)&&e.get("EXT_color_buffer_float"),Zn}function Et(St,ft,$n){return!0===Ye(St,$n)||St.isFramebufferTexture&&St.minFilter!==fc&&St.minFilter!==kl?Math.log2(Math.max(ft.width,ft.height))+1:void 0!==St.mipmaps&&St.mipmaps.length>0?St.mipmaps.length:St.isCompressedTexture&&Array.isArray(St.image)?ft.mipmaps.length:1}function hn(St){return St===fc||1004===St||1005===St?9728:9729}function Kt(St){const ft=St.target;ft.removeEventListener("dispose",Kt),function It(St){const ft=r.get(St);void 0!==ft.__webglInit&&(n.deleteTexture(ft.__webglTexture),r.remove(St))}(ft),ft.isVideoTexture&&le.delete(ft),u.memory.textures--}function We(St){const ft=St.target;ft.removeEventListener("dispose",We),function Ht(St){const ft=St.texture,$n=r.get(St),Qi=r.get(ft);if(St){if(void 0!==Qi.__webglTexture&&(n.deleteTexture(Qi.__webglTexture),u.memory.textures--),St.depthTexture&&St.depthTexture.dispose(),St.isWebGLCubeRenderTarget)for(let jr=0;jr<6;jr++)n.deleteFramebuffer($n.__webglFramebuffer[jr]),$n.__webglDepthbuffer&&n.deleteRenderbuffer($n.__webglDepthbuffer[jr]);else n.deleteFramebuffer($n.__webglFramebuffer),$n.__webglDepthbuffer&&n.deleteRenderbuffer($n.__webglDepthbuffer),$n.__webglMultisampledFramebuffer&&n.deleteFramebuffer($n.__webglMultisampledFramebuffer),$n.__webglColorRenderbuffer&&n.deleteRenderbuffer($n.__webglColorRenderbuffer),$n.__webglDepthRenderbuffer&&n.deleteRenderbuffer($n.__webglDepthRenderbuffer);if(St.isWebGLMultipleRenderTargets)for(let jr=0,Zn=ft.length;jr<Zn;jr++){const us=r.get(ft[jr]);us.__webglTexture&&(n.deleteTexture(us.__webglTexture),u.memory.textures--),r.remove(ft[jr])}r.remove(ft),r.remove(St)}}(ft)}let it=0;function bt(St,ft){const $n=r.get(St);if(St.isVideoTexture&&function ar(St){const ft=u.render.frame;le.get(St)!==ft&&(le.set(St,ft),St.update())}(St),St.version>0&&$n.__version!==St.version){const Qi=St.image;if(void 0===Qi)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==Qi.complete)return void Tn($n,St,ft);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+ft),t.bindTexture(3553,$n.__webglTexture)}function Qt(St,ft){const $n=r.get(St);St.version>0&&$n.__version!==St.version?function Es(St,ft,$n){if(6!==ft.image.length)return;gi(St,ft),t.activeTexture(33984+$n),t.bindTexture(34067,St.__webglTexture),n.pixelStorei(37440,ft.flipY),n.pixelStorei(37441,ft.premultiplyAlpha),n.pixelStorei(3317,ft.unpackAlignment),n.pixelStorei(37443,0);const Qi=ft&&(ft.isCompressedTexture||ft.image[0].isCompressedTexture),jr=ft.image[0]&&ft.image[0].isDataTexture,Zn=[];for(let si=0;si<6;si++)Zn[si]=Qi||jr?jr?ft.image[si].image:ft.image[si]:ue(ft.image[si],!1,!0,T),Zn[si]=Ti(ft,Zn[si]);const us=Zn[0],Yr=Ne(us)||m,hr=o.convert(ft.format,ft.encoding),lr=o.convert(ft.type),Ys=ht(ft.internalFormat,hr,lr,ft.encoding),$t=m&&!0!==ft.isVideoTexture,Br=void 0===St.__version;let As,Cr=Et(ft,us,Yr);if(Ni(34067,ft,Yr),Qi){$t&&Br&&t.texStorage2D(34067,Cr,Ys,us.width,us.height);for(let si=0;si<6;si++){As=Zn[si].mipmaps;for(let _s=0;_s<As.length;_s++){const To=As[_s];ft.format!==yu?null!==hr?$t?t.compressedTexSubImage2D(34069+si,_s,0,0,To.width,To.height,hr,To.data):t.compressedTexImage2D(34069+si,_s,Ys,To.width,To.height,0,To.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):$t?t.texSubImage2D(34069+si,_s,0,0,To.width,To.height,hr,lr,To.data):t.texImage2D(34069+si,_s,Ys,To.width,To.height,0,hr,lr,To.data)}}}else{As=ft.mipmaps,$t&&Br&&(As.length>0&&Cr++,t.texStorage2D(34067,Cr,Ys,Zn[0].width,Zn[0].height));for(let si=0;si<6;si++)if(jr){$t?t.texSubImage2D(34069+si,0,0,0,Zn[si].width,Zn[si].height,hr,lr,Zn[si].data):t.texImage2D(34069+si,0,Ys,Zn[si].width,Zn[si].height,0,hr,lr,Zn[si].data);for(let _s=0;_s<As.length;_s++){const Sl=As[_s].image[si].image;$t?t.texSubImage2D(34069+si,_s+1,0,0,Sl.width,Sl.height,hr,lr,Sl.data):t.texImage2D(34069+si,_s+1,Ys,Sl.width,Sl.height,0,hr,lr,Sl.data)}}else{$t?t.texSubImage2D(34069+si,0,0,0,hr,lr,Zn[si]):t.texImage2D(34069+si,0,Ys,hr,lr,Zn[si]);for(let _s=0;_s<As.length;_s++){const To=As[_s];$t?t.texSubImage2D(34069+si,_s+1,0,0,hr,lr,To.image[si]):t.texImage2D(34069+si,_s+1,Ys,hr,lr,To.image[si])}}}Ye(ft,Yr)&&st(34067),St.__version=ft.version,ft.onUpdate&&ft.onUpdate(ft)}($n,St,ft):(t.activeTexture(33984+ft),t.bindTexture(34067,$n.__webglTexture))}const mn={1e3:10497,[vu]:33071,1002:33648},zn={[fc]:9728,1004:9984,1005:9986,[kl]:9729,1007:9985,1008:9987};function Ni(St,ft,$n){if($n?(n.texParameteri(St,10242,mn[ft.wrapS]),n.texParameteri(St,10243,mn[ft.wrapT]),(32879===St||35866===St)&&n.texParameteri(St,32882,mn[ft.wrapR]),n.texParameteri(St,10240,zn[ft.magFilter]),n.texParameteri(St,10241,zn[ft.minFilter])):(n.texParameteri(St,10242,33071),n.texParameteri(St,10243,33071),(32879===St||35866===St)&&n.texParameteri(St,32882,33071),(ft.wrapS!==vu||ft.wrapT!==vu)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(St,10240,hn(ft.magFilter)),n.texParameteri(St,10241,hn(ft.minFilter)),ft.minFilter!==fc&&ft.minFilter!==kl&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const Qi=e.get("EXT_texture_filter_anisotropic");if(ft.type===E_&&!1===e.has("OES_texture_float_linear")||!1===m&&ft.type===I0&&!1===e.has("OES_texture_half_float_linear"))return;(ft.anisotropy>1||r.get(ft).__currentAnisotropy)&&(n.texParameterf(St,Qi.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ft.anisotropy,s.getMaxAnisotropy())),r.get(ft).__currentAnisotropy=ft.anisotropy)}}function gi(St,ft){void 0===St.__webglInit&&(St.__webglInit=!0,ft.addEventListener("dispose",Kt),St.__webglTexture=n.createTexture(),u.memory.textures++)}function Tn(St,ft,$n){let Qi=3553;ft.isDataTexture2DArray&&(Qi=35866),ft.isDataTexture3D&&(Qi=32879),gi(St,ft),t.activeTexture(33984+$n),t.bindTexture(Qi,St.__webglTexture),n.pixelStorei(37440,ft.flipY),n.pixelStorei(37441,ft.premultiplyAlpha),n.pixelStorei(3317,ft.unpackAlignment),n.pixelStorei(37443,0);const jr=function Re(St){return!m&&(St.wrapS!==vu||St.wrapT!==vu||St.minFilter!==fc&&St.minFilter!==kl)}(ft)&&!1===Ne(ft.image);let Zn=ue(ft.image,jr,!1,F);Zn=Ti(ft,Zn);const us=Ne(Zn)||m,Yr=o.convert(ft.format,ft.encoding);let Ys,hr=o.convert(ft.type),lr=ht(ft.internalFormat,Yr,hr,ft.encoding,ft.isVideoTexture);Ni(Qi,ft,us);const $t=ft.mipmaps,Br=m&&!0!==ft.isVideoTexture,Cr=void 0===St.__version,As=Et(ft,Zn,us);if(ft.isDepthTexture)lr=6402,m?lr=ft.type===E_?36012:1014===ft.type?33190:ft.type===R0?35056:33189:ft.type===E_&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ft.format===fy&&6402===lr&&ft.type!==gM&&1014!==ft.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ft.type=gM,hr=o.convert(ft.type)),ft.format===k0&&6402===lr&&(lr=34041,ft.type!==R0&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ft.type=R0,hr=o.convert(ft.type))),Br&&Cr?t.texStorage2D(3553,1,lr,Zn.width,Zn.height):t.texImage2D(3553,0,lr,Zn.width,Zn.height,0,Yr,hr,null);else if(ft.isDataTexture)if($t.length>0&&us){Br&&Cr&&t.texStorage2D(3553,As,lr,$t[0].width,$t[0].height);for(let si=0,_s=$t.length;si<_s;si++)Ys=$t[si],Br?t.texSubImage2D(3553,0,0,0,Ys.width,Ys.height,Yr,hr,Ys.data):t.texImage2D(3553,si,lr,Ys.width,Ys.height,0,Yr,hr,Ys.data);ft.generateMipmaps=!1}else Br?(Cr&&t.texStorage2D(3553,As,lr,Zn.width,Zn.height),t.texSubImage2D(3553,0,0,0,Zn.width,Zn.height,Yr,hr,Zn.data)):t.texImage2D(3553,0,lr,Zn.width,Zn.height,0,Yr,hr,Zn.data);else if(ft.isCompressedTexture){Br&&Cr&&t.texStorage2D(3553,As,lr,$t[0].width,$t[0].height);for(let si=0,_s=$t.length;si<_s;si++)Ys=$t[si],ft.format!==yu?null!==Yr?Br?t.compressedTexSubImage2D(3553,si,0,0,Ys.width,Ys.height,Yr,Ys.data):t.compressedTexImage2D(3553,si,lr,Ys.width,Ys.height,0,Ys.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Br?t.texSubImage2D(3553,si,0,0,Ys.width,Ys.height,Yr,hr,Ys.data):t.texImage2D(3553,si,lr,Ys.width,Ys.height,0,Yr,hr,Ys.data)}else if(ft.isDataTexture2DArray)Br?(Cr&&t.texStorage3D(35866,As,lr,Zn.width,Zn.height,Zn.depth),t.texSubImage3D(35866,0,0,0,0,Zn.width,Zn.height,Zn.depth,Yr,hr,Zn.data)):t.texImage3D(35866,0,lr,Zn.width,Zn.height,Zn.depth,0,Yr,hr,Zn.data);else if(ft.isDataTexture3D)Br?(Cr&&t.texStorage3D(32879,As,lr,Zn.width,Zn.height,Zn.depth),t.texSubImage3D(32879,0,0,0,0,Zn.width,Zn.height,Zn.depth,Yr,hr,Zn.data)):t.texImage3D(32879,0,lr,Zn.width,Zn.height,Zn.depth,0,Yr,hr,Zn.data);else if(ft.isFramebufferTexture)Br&&Cr?t.texStorage2D(3553,As,lr,Zn.width,Zn.height):t.texImage2D(3553,0,lr,Zn.width,Zn.height,0,Yr,hr,null);else if($t.length>0&&us){Br&&Cr&&t.texStorage2D(3553,As,lr,$t[0].width,$t[0].height);for(let si=0,_s=$t.length;si<_s;si++)Ys=$t[si],Br?t.texSubImage2D(3553,si,0,0,Yr,hr,Ys):t.texImage2D(3553,si,lr,Yr,hr,Ys);ft.generateMipmaps=!1}else Br?(Cr&&t.texStorage2D(3553,As,lr,Zn.width,Zn.height),t.texSubImage2D(3553,0,0,0,Yr,hr,Zn)):t.texImage2D(3553,0,lr,Yr,hr,Zn);Ye(ft,us)&&st(Qi),St.__version=ft.version,ft.onUpdate&&ft.onUpdate(ft)}function yi(St,ft,$n,Qi,jr){const Zn=o.convert($n.format,$n.encoding),us=o.convert($n.type),Yr=ht($n.internalFormat,Zn,us,$n.encoding);r.get(ft).__hasExternalTextures||(32879===jr||35866===jr?t.texImage3D(jr,0,Yr,ft.width,ft.height,ft.depth,0,Zn,us,null):t.texImage2D(jr,0,Yr,ft.width,ft.height,0,Zn,us,null)),t.bindFramebuffer(36160,St),ft.useRenderToTexture?Q.framebufferTexture2DMultisampleEXT(36160,Qi,jr,r.get($n).__webglTexture,0,br(ft)):n.framebufferTexture2D(36160,Qi,jr,r.get($n).__webglTexture,0),t.bindFramebuffer(36160,null)}function ur(St,ft,$n){if(n.bindRenderbuffer(36161,St),ft.depthBuffer&&!ft.stencilBuffer){let Qi=33189;if($n||ft.useRenderToTexture){const jr=ft.depthTexture;jr&&jr.isDepthTexture&&(jr.type===E_?Qi=36012:1014===jr.type&&(Qi=33190));const Zn=br(ft);ft.useRenderToTexture?Q.renderbufferStorageMultisampleEXT(36161,Zn,Qi,ft.width,ft.height):n.renderbufferStorageMultisample(36161,Zn,Qi,ft.width,ft.height)}else n.renderbufferStorage(36161,Qi,ft.width,ft.height);n.framebufferRenderbuffer(36160,36096,36161,St)}else if(ft.depthBuffer&&ft.stencilBuffer){const Qi=br(ft);$n&&ft.useRenderbuffer?n.renderbufferStorageMultisample(36161,Qi,35056,ft.width,ft.height):ft.useRenderToTexture?Q.renderbufferStorageMultisampleEXT(36161,Qi,35056,ft.width,ft.height):n.renderbufferStorage(36161,34041,ft.width,ft.height),n.framebufferRenderbuffer(36160,33306,36161,St)}else{const Qi=!0===ft.isWebGLMultipleRenderTargets?ft.texture[0]:ft.texture,jr=o.convert(Qi.format,Qi.encoding),Zn=o.convert(Qi.type),us=ht(Qi.internalFormat,jr,Zn,Qi.encoding),Yr=br(ft);$n&&ft.useRenderbuffer?n.renderbufferStorageMultisample(36161,Yr,us,ft.width,ft.height):ft.useRenderToTexture?Q.renderbufferStorageMultisampleEXT(36161,Yr,us,ft.width,ft.height):n.renderbufferStorage(36161,us,ft.width,ft.height)}n.bindRenderbuffer(36161,null)}function rs(St){const ft=r.get(St),$n=!0===St.isWebGLCubeRenderTarget;if(St.depthTexture&&!ft.__autoAllocateDepthBuffer){if($n)throw new Error("target.depthTexture not supported in Cube render targets");!function qi(St,ft){if(ft&&ft.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,St),!ft.depthTexture||!ft.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(ft.depthTexture).__webglTexture||ft.depthTexture.image.width!==ft.width||ft.depthTexture.image.height!==ft.height)&&(ft.depthTexture.image.width=ft.width,ft.depthTexture.image.height=ft.height,ft.depthTexture.needsUpdate=!0),bt(ft.depthTexture,0);const Qi=r.get(ft.depthTexture).__webglTexture,jr=br(ft);if(ft.depthTexture.format===fy)ft.useRenderToTexture?Q.framebufferTexture2DMultisampleEXT(36160,36096,3553,Qi,0,jr):n.framebufferTexture2D(36160,36096,3553,Qi,0);else{if(ft.depthTexture.format!==k0)throw new Error("Unknown depthTexture format");ft.useRenderToTexture?Q.framebufferTexture2DMultisampleEXT(36160,33306,3553,Qi,0,jr):n.framebufferTexture2D(36160,33306,3553,Qi,0)}}(ft.__webglFramebuffer,St)}else if($n){ft.__webglDepthbuffer=[];for(let Qi=0;Qi<6;Qi++)t.bindFramebuffer(36160,ft.__webglFramebuffer[Qi]),ft.__webglDepthbuffer[Qi]=n.createRenderbuffer(),ur(ft.__webglDepthbuffer[Qi],St,!1)}else t.bindFramebuffer(36160,ft.__webglFramebuffer),ft.__webglDepthbuffer=n.createRenderbuffer(),ur(ft.__webglDepthbuffer,St,!1);t.bindFramebuffer(36160,null)}function br(St){return m&&(St.useRenderbuffer||St.useRenderToTexture)?Math.min(N,St.samples):0}function Ti(St,ft){const $n=St.encoding,Qi=St.format,jr=St.type;return!0===St.isCompressedTexture||!0===St.isVideoTexture||1035===St.format||$n!==T_&&($n===hl?!1===m?!0===e.has("EXT_sRGB")&&Qi===yu?(St.format=1035,St.minFilter=kl,St.generateMipmaps=!1):ft=gy.sRGBToLinear(ft):(Qi!==yu||jr!==S_)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",$n)),ft}let xr=!1,no=!1;this.allocateTextureUnit=function et(){const St=it;return St>=w&&console.warn("THREE.WebGLTextures: Trying to use "+St+" texture units while this GPU supports only "+w),it+=1,St},this.resetTextureUnits=function kt(){it=0},this.setTexture2D=bt,this.setTexture2DArray=function Gt(St,ft){const $n=r.get(St);St.version>0&&$n.__version!==St.version?Tn($n,St,ft):(t.activeTexture(33984+ft),t.bindTexture(35866,$n.__webglTexture))},this.setTexture3D=function pn(St,ft){const $n=r.get(St);St.version>0&&$n.__version!==St.version?Tn($n,St,ft):(t.activeTexture(33984+ft),t.bindTexture(32879,$n.__webglTexture))},this.setTextureCube=Qt,this.rebindTextures=function ss(St,ft,$n){const Qi=r.get(St);void 0!==ft&&yi(Qi.__webglFramebuffer,St,St.texture,36064,3553),void 0!==$n&&rs(St)},this.setupRenderTarget=function Qn(St){const ft=St.texture,$n=r.get(St),Qi=r.get(ft);St.addEventListener("dispose",We),!0!==St.isWebGLMultipleRenderTargets&&(void 0===Qi.__webglTexture&&(Qi.__webglTexture=n.createTexture()),Qi.__version=ft.version,u.memory.textures++);const jr=!0===St.isWebGLCubeRenderTarget,Zn=!0===St.isWebGLMultipleRenderTargets,us=ft.isDataTexture3D||ft.isDataTexture2DArray,Yr=Ne(St)||m;if(jr){$n.__webglFramebuffer=[];for(let hr=0;hr<6;hr++)$n.__webglFramebuffer[hr]=n.createFramebuffer()}else if($n.__webglFramebuffer=n.createFramebuffer(),Zn)if(s.drawBuffers){const hr=St.texture;for(let lr=0,Ys=hr.length;lr<Ys;lr++){const $t=r.get(hr[lr]);void 0===$t.__webglTexture&&($t.__webglTexture=n.createTexture(),u.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(St.useRenderbuffer)if(m){$n.__webglMultisampledFramebuffer=n.createFramebuffer(),$n.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,$n.__webglColorRenderbuffer);const hr=o.convert(ft.format,ft.encoding),lr=o.convert(ft.type),Ys=ht(ft.internalFormat,hr,lr,ft.encoding),$t=br(St);n.renderbufferStorageMultisample(36161,$t,Ys,St.width,St.height),t.bindFramebuffer(36160,$n.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,$n.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),St.depthBuffer&&($n.__webglDepthRenderbuffer=n.createRenderbuffer(),ur($n.__webglDepthRenderbuffer,St,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(jr){t.bindTexture(34067,Qi.__webglTexture),Ni(34067,ft,Yr);for(let hr=0;hr<6;hr++)yi($n.__webglFramebuffer[hr],St,ft,36064,34069+hr);Ye(ft,Yr)&&st(34067),t.unbindTexture()}else if(Zn){const hr=St.texture;for(let lr=0,Ys=hr.length;lr<Ys;lr++){const $t=hr[lr],Br=r.get($t);t.bindTexture(3553,Br.__webglTexture),Ni(3553,$t,Yr),yi($n.__webglFramebuffer,St,$t,36064+lr,3553),Ye($t,Yr)&&st(3553)}t.unbindTexture()}else{let hr=3553;us&&(m?hr=ft.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(hr,Qi.__webglTexture),Ni(hr,ft,Yr),yi($n.__webglFramebuffer,St,ft,36064,hr),Ye(ft,Yr)&&st(hr),t.unbindTexture()}St.depthBuffer&&rs(St)},this.updateRenderTargetMipmap=function Fi(St){const ft=Ne(St)||m,$n=!0===St.isWebGLMultipleRenderTargets?St.texture:[St.texture];for(let Qi=0,jr=$n.length;Qi<jr;Qi++){const Zn=$n[Qi];if(Ye(Zn,ft)){const us=St.isWebGLCubeRenderTarget?34067:3553,Yr=r.get(Zn).__webglTexture;t.bindTexture(us,Yr),st(us),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Bi(St){if(St.useRenderbuffer)if(m){const ft=St.width,$n=St.height;let Qi=16384;const jr=[36064],Zn=St.stencilBuffer?33306:36096;St.depthBuffer&&jr.push(Zn),St.ignoreDepthForMultisampleCopy||(St.depthBuffer&&(Qi|=256),St.stencilBuffer&&(Qi|=1024));const us=r.get(St);t.bindFramebuffer(36008,us.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,us.__webglFramebuffer),St.ignoreDepthForMultisampleCopy&&(n.invalidateFramebuffer(36008,[Zn]),n.invalidateFramebuffer(36009,[Zn])),n.blitFramebuffer(0,0,ft,$n,0,0,ft,$n,Qi,9728),n.invalidateFramebuffer(36008,jr),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,us.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=rs,this.setupFrameBufferTexture=yi,this.safeSetTexture2D=function Eo(St,ft){St&&St.isWebGLRenderTarget&&(!1===xr&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),xr=!0),St=St.texture),bt(St,ft)},this.safeSetTextureCube=function wa(St,ft){St&&St.isWebGLCubeRenderTarget&&(!1===no&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),no=!0),St=St.texture),Qt(St,ft)}}function Sse(n,e,t){const r=t.isWebGL2;return{convert:function s(o,u=null){let m;if(o===S_)return 5121;if(1017===o)return 32819;if(1018===o)return 32820;if(1010===o)return 5120;if(1011===o)return 5122;if(o===gM)return 5123;if(1013===o)return 5124;if(1014===o)return 5125;if(o===E_)return 5126;if(o===I0)return r?5131:(m=e.get("OES_texture_half_float"),null!==m?m.HALF_FLOAT_OES:null);if(1021===o)return 6406;if(o===yu)return 6408;if(1024===o)return 6409;if(1025===o)return 6410;if(o===fy)return 6402;if(o===k0)return 34041;if(1028===o)return 6403;if(1022===o)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===o)return m=e.get("EXT_sRGB"),null!==m?m.SRGB_ALPHA_EXT:null;if(1029===o)return 36244;if(1030===o)return 33319;if(1031===o)return 33320;if(1033===o)return 36249;if(33776===o||33777===o||33778===o||33779===o)if(u===hl){if(m=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===m)return null;if(33776===o)return m.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===o)return m.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===o)return m.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===o)return m.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(m=e.get("WEBGL_compressed_texture_s3tc"),null===m)return null;if(33776===o)return m.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===o)return m.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===o)return m.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===o)return m.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===o||35841===o||35842===o||35843===o){if(m=e.get("WEBGL_compressed_texture_pvrtc"),null===m)return null;if(35840===o)return m.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===o)return m.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===o)return m.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===o)return m.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===o)return m=e.get("WEBGL_compressed_texture_etc1"),null!==m?m.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===o||37496===o){if(m=e.get("WEBGL_compressed_texture_etc"),null===m)return null;if(37492===o)return u===hl?m.COMPRESSED_SRGB8_ETC2:m.COMPRESSED_RGB8_ETC2;if(37496===o)return u===hl?m.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:m.COMPRESSED_RGBA8_ETC2_EAC}if(37808===o||37809===o||37810===o||37811===o||37812===o||37813===o||37814===o||37815===o||37816===o||37817===o||37818===o||37819===o||37820===o||37821===o){if(m=e.get("WEBGL_compressed_texture_astc"),null===m)return null;if(37808===o)return u===hl?m.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:m.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===o)return u===hl?m.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:m.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===o)return u===hl?m.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:m.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===o)return u===hl?m.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:m.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===o)return u===hl?m.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:m.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===o)return u===hl?m.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:m.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===o)return u===hl?m.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:m.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===o)return u===hl?m.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:m.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===o)return u===hl?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:m.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===o)return u===hl?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:m.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===o)return u===hl?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:m.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===o)return u===hl?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:m.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===o)return u===hl?m.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:m.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===o)return u===hl?m.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:m.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===o){if(m=e.get("EXT_texture_compression_bptc"),null===m)return null;if(36492===o)return u===hl?m.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:m.COMPRESSED_RGBA_BPTC_UNORM_EXT}return o===R0?r?34042:(m=e.get("WEBGL_depth_texture"),null!==m?m.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}HP.prototype.isMeshDistanceMaterial=!0;class QV extends Bc{constructor(e=[]){super(),this.cameras=e}}QV.prototype.isArrayCamera=!0;class ix extends ra{constructor(){super(),this.type="Group"}}ix.prototype.isGroup=!0;const Ese={type:"move"};class zP{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ix,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ix,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ct,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ct),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ix,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ct,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ct),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,r){let s=null,o=null,u=null;const m=this._targetRay,w=this._grip,T=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==m&&(s=t.getPose(e.targetRaySpace,r),null!==s&&(m.matrix.fromArray(s.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),s.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(s.linearVelocity)):m.hasLinearVelocity=!1,s.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(s.angularVelocity)):m.hasAngularVelocity=!1,this.dispatchEvent(Ese))),T&&e.hand){u=!0;for(const _e of e.hand.values()){const xe=t.getJointPose(_e,r);if(void 0===T.joints[_e.jointName]){const ue=new ix;ue.matrixAutoUpdate=!1,ue.visible=!1,T.joints[_e.jointName]=ue,T.add(ue)}const fe=T.joints[_e.jointName];null!==xe&&(fe.matrix.fromArray(xe.transform.matrix),fe.matrix.decompose(fe.position,fe.rotation,fe.scale),fe.jointRadius=xe.radius),fe.visible=null!==xe}const Z=T.joints["index-finger-tip"].position.distanceTo(T.joints["thumb-tip"].position),Q=.02,le=.005;T.inputState.pinching&&Z>Q+le?(T.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!T.inputState.pinching&&Z<=Q-le&&(T.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==w&&e.gripSpace&&(o=t.getPose(e.gripSpace,r),null!==o&&(w.matrix.fromArray(o.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),o.linearVelocity?(w.hasLinearVelocity=!0,w.linearVelocity.copy(o.linearVelocity)):w.hasLinearVelocity=!1,o.angularVelocity?(w.hasAngularVelocity=!0,w.angularVelocity.copy(o.angularVelocity)):w.hasAngularVelocity=!1));return null!==m&&(m.visible=null!==s),null!==w&&(w.visible=null!==o),null!==T&&(T.visible=null!==u),this}}class VP extends Ec{constructor(e,t,r,s,o,u,m,w,T,F){if((F=void 0!==F?F:fy)!==fy&&F!==k0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&F===fy&&(r=gM),void 0===r&&F===k0&&(r=R0),super(null,s,o,u,m,w,F,r,T),this.image={width:e,height:t},this.magFilter=void 0!==m?m:fc,this.minFilter=void 0!==w?w:fc,this.flipY=!1,this.generateMipmaps=!1}}VP.prototype.isDepthTexture=!0;class Tse extends py{constructor(e,t){super();const r=this;let s=null,o=1,u=null,m="local-floor";const w=e.extensions.has("WEBGL_multisampled_render_to_texture");let T=null,F=null,N=null,Z=null,Q=!1,le=null;const _e=t.getContextAttributes();let xe=null,fe=null;const ue=[],Ne=new Map,Re=new Bc;Re.layers.enable(1),Re.viewport=new xa;const Ye=new Bc;Ye.layers.enable(2),Ye.viewport=new xa;const st=[Re,Ye],ht=new QV;ht.layers.enable(1),ht.layers.enable(2);let Et=null,hn=null;function Kt(Qt){const mn=Ne.get(Qt.inputSource);mn&&mn.dispatchEvent({type:Qt.type,data:Qt.inputSource})}function We(){Ne.forEach(function(Qt,mn){Qt.disconnect(mn)}),Ne.clear(),Et=null,hn=null,e.setRenderTarget(xe),Z=null,N=null,F=null,s=null,fe=null,pn.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}function It(Qt){const mn=s.inputSources;for(let zn=0;zn<ue.length;zn++)Ne.set(mn[zn],ue[zn]);for(let zn=0;zn<Qt.removed.length;zn++){const Ni=Qt.removed[zn],gi=Ne.get(Ni);gi&&(gi.dispatchEvent({type:"disconnected",data:Ni}),Ne.delete(Ni))}for(let zn=0;zn<Qt.added.length;zn++){const Ni=Qt.added[zn],gi=Ne.get(Ni);gi&&gi.dispatchEvent({type:"connected",data:Ni})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Qt){let mn=ue[Qt];return void 0===mn&&(mn=new zP,ue[Qt]=mn),mn.getTargetRaySpace()},this.getControllerGrip=function(Qt){let mn=ue[Qt];return void 0===mn&&(mn=new zP,ue[Qt]=mn),mn.getGripSpace()},this.getHand=function(Qt){let mn=ue[Qt];return void 0===mn&&(mn=new zP,ue[Qt]=mn),mn.getHandSpace()},this.setFramebufferScaleFactor=function(Qt){o=Qt,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Qt){m=Qt,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u},this.getBaseLayer=function(){return null!==N?N:Z},this.getBinding=function(){return F},this.getFrame=function(){return le},this.getSession=function(){return s},this.setSession=function(){var Qt=(0,aee.Z)(function*(mn){if(s=mn,null!==s){if(xe=e.getRenderTarget(),s.addEventListener("select",Kt),s.addEventListener("selectstart",Kt),s.addEventListener("selectend",Kt),s.addEventListener("squeeze",Kt),s.addEventListener("squeezestart",Kt),s.addEventListener("squeezeend",Kt),s.addEventListener("end",We),s.addEventListener("inputsourceschange",It),!0!==_e.xrCompatible&&(yield t.makeXRCompatible()),void 0===s.renderState.layers||!1===e.capabilities.isWebGL2)Z=new XRWebGLLayer(s,t,{antialias:void 0!==s.renderState.layers||_e.antialias,alpha:_e.alpha,depth:_e.depth,stencil:_e.stencil,framebufferScaleFactor:o}),s.updateRenderState({baseLayer:Z}),fe=new xd(Z.framebufferWidth,Z.framebufferHeight,{format:yu,type:S_,encoding:e.outputEncoding});else{Q=_e.antialias;let zn=null,Ni=null,gi=null;_e.depth&&(gi=_e.stencil?35056:33190,zn=_e.stencil?k0:fy,Ni=_e.stencil?R0:gM);const Tn={colorFormat:e.outputEncoding===hl?35907:32856,depthFormat:gi,scaleFactor:o};F=new XRWebGLBinding(s,t),N=F.createProjectionLayer(Tn),s.updateRenderState({layers:[N]}),fe=Q?new lP(N.textureWidth,N.textureHeight,{format:yu,type:S_,depthTexture:new VP(N.textureWidth,N.textureHeight,Ni,void 0,void 0,void 0,void 0,void 0,void 0,zn),stencilBuffer:_e.stencil,ignoreDepth:N.ignoreDepthValues,useRenderToTexture:w,encoding:e.outputEncoding}):new xd(N.textureWidth,N.textureHeight,{format:yu,type:S_,depthTexture:new VP(N.textureWidth,N.textureHeight,Ni,void 0,void 0,void 0,void 0,void 0,void 0,zn),stencilBuffer:_e.stencil,ignoreDepth:N.ignoreDepthValues,encoding:e.outputEncoding})}fe.isXRRenderTarget=!0,this.setFoveation(1),u=yield s.requestReferenceSpace(m),pn.setContext(s),pn.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}});return function(mn){return Qt.apply(this,arguments)}}();const Ht=new ct,it=new ct;function et(Qt,mn){null===mn?Qt.matrixWorld.copy(Qt.matrix):Qt.matrixWorld.multiplyMatrices(mn.matrixWorld,Qt.matrix),Qt.matrixWorldInverse.copy(Qt.matrixWorld).invert()}this.updateCamera=function(Qt){if(null===s)return;ht.near=Ye.near=Re.near=Qt.near,ht.far=Ye.far=Re.far=Qt.far,(Et!==ht.near||hn!==ht.far)&&(s.updateRenderState({depthNear:ht.near,depthFar:ht.far}),Et=ht.near,hn=ht.far);const mn=Qt.parent,zn=ht.cameras;et(ht,mn);for(let gi=0;gi<zn.length;gi++)et(zn[gi],mn);ht.matrixWorld.decompose(ht.position,ht.quaternion,ht.scale),Qt.position.copy(ht.position),Qt.quaternion.copy(ht.quaternion),Qt.scale.copy(ht.scale),Qt.matrix.copy(ht.matrix),Qt.matrixWorld.copy(ht.matrixWorld);const Ni=Qt.children;for(let gi=0,Tn=Ni.length;gi<Tn;gi++)Ni[gi].updateMatrixWorld(!0);2===zn.length?function kt(Qt,mn,zn){Ht.setFromMatrixPosition(mn.matrixWorld),it.setFromMatrixPosition(zn.matrixWorld);const Ni=Ht.distanceTo(it),gi=mn.projectionMatrix.elements,Tn=zn.projectionMatrix.elements,Es=gi[14]/(gi[10]-1),yi=gi[14]/(gi[10]+1),ur=(gi[9]+1)/gi[5],qi=(gi[9]-1)/gi[5],rs=(gi[8]-1)/gi[0],ss=(Tn[8]+1)/Tn[0],Qn=Es*rs,Fi=Es*ss,Bi=Ni/(-rs+ss),br=Bi*-rs;mn.matrixWorld.decompose(Qt.position,Qt.quaternion,Qt.scale),Qt.translateX(br),Qt.translateZ(Bi),Qt.matrixWorld.compose(Qt.position,Qt.quaternion,Qt.scale),Qt.matrixWorldInverse.copy(Qt.matrixWorld).invert();const ar=Es+Bi,Ti=yi+Bi;Qt.projectionMatrix.makePerspective(Qn-br,Fi+(Ni-br),ur*yi/Ti*ar,qi*yi/Ti*ar,ar,Ti)}(ht,Re,Ye):ht.projectionMatrix.copy(Re.projectionMatrix)},this.getCamera=function(){return ht},this.getFoveation=function(){return null!==N?N.fixedFoveation:null!==Z?Z.fixedFoveation:void 0},this.setFoveation=function(Qt){null!==N&&(N.fixedFoveation=Qt),null!==Z&&void 0!==Z.fixedFoveation&&(Z.fixedFoveation=Qt)};let bt=null;const pn=new _V;pn.setAnimationLoop(function Gt(Qt,mn){if(T=mn.getViewerPose(u),le=mn,null!==T){const Ni=T.views;null!==Z&&(e.setRenderTargetFramebuffer(fe,Z.framebuffer),e.setRenderTarget(fe));let gi=!1;Ni.length!==ht.cameras.length&&(ht.cameras.length=0,gi=!0);for(let Tn=0;Tn<Ni.length;Tn++){const Es=Ni[Tn];let yi=null;if(null!==Z)yi=Z.getViewport(Es);else{const qi=F.getViewSubImage(N,Es);yi=qi.viewport,0===Tn&&(e.setRenderTargetTextures(fe,qi.colorTexture,N.ignoreDepthValues?void 0:qi.depthStencilTexture),e.setRenderTarget(fe))}const ur=st[Tn];ur.matrix.fromArray(Es.transform.matrix),ur.projectionMatrix.fromArray(Es.projectionMatrix),ur.viewport.set(yi.x,yi.y,yi.width,yi.height),0===Tn&&ht.matrix.copy(ur.matrix),!0===gi&&ht.cameras.push(ur)}}const zn=s.inputSources;for(let Ni=0;Ni<ue.length;Ni++)ue[Ni].update(zn[Ni],mn,u);bt&&bt(Qt,mn),le=null}),this.setAnimationLoop=function(Qt){bt=Qt},this.dispose=function(){}}}function Dse(n){function r(fe,ue){fe.opacity.value=ue.opacity,ue.color&&fe.diffuse.value.copy(ue.color),ue.emissive&&fe.emissive.value.copy(ue.emissive).multiplyScalar(ue.emissiveIntensity),ue.map&&(fe.map.value=ue.map),ue.alphaMap&&(fe.alphaMap.value=ue.alphaMap),ue.specularMap&&(fe.specularMap.value=ue.specularMap),ue.alphaTest>0&&(fe.alphaTest.value=ue.alphaTest);const Ne=n.get(ue).envMap;let Re,Ye;Ne&&(fe.envMap.value=Ne,fe.flipEnvMap.value=Ne.isCubeTexture&&!1===Ne.isRenderTargetTexture?-1:1,fe.reflectivity.value=ue.reflectivity,fe.ior.value=ue.ior,fe.refractionRatio.value=ue.refractionRatio),ue.lightMap&&(fe.lightMap.value=ue.lightMap,fe.lightMapIntensity.value=ue.lightMapIntensity),ue.aoMap&&(fe.aoMap.value=ue.aoMap,fe.aoMapIntensity.value=ue.aoMapIntensity),ue.map?Re=ue.map:ue.specularMap?Re=ue.specularMap:ue.displacementMap?Re=ue.displacementMap:ue.normalMap?Re=ue.normalMap:ue.bumpMap?Re=ue.bumpMap:ue.roughnessMap?Re=ue.roughnessMap:ue.metalnessMap?Re=ue.metalnessMap:ue.alphaMap?Re=ue.alphaMap:ue.emissiveMap?Re=ue.emissiveMap:ue.clearcoatMap?Re=ue.clearcoatMap:ue.clearcoatNormalMap?Re=ue.clearcoatNormalMap:ue.clearcoatRoughnessMap?Re=ue.clearcoatRoughnessMap:ue.specularIntensityMap?Re=ue.specularIntensityMap:ue.specularColorMap?Re=ue.specularColorMap:ue.transmissionMap?Re=ue.transmissionMap:ue.thicknessMap?Re=ue.thicknessMap:ue.sheenColorMap?Re=ue.sheenColorMap:ue.sheenRoughnessMap&&(Re=ue.sheenRoughnessMap),void 0!==Re&&(Re.isWebGLRenderTarget&&(Re=Re.texture),!0===Re.matrixAutoUpdate&&Re.updateMatrix(),fe.uvTransform.value.copy(Re.matrix)),ue.aoMap?Ye=ue.aoMap:ue.lightMap&&(Ye=ue.lightMap),void 0!==Ye&&(Ye.isWebGLRenderTarget&&(Ye=Ye.texture),!0===Ye.matrixAutoUpdate&&Ye.updateMatrix(),fe.uv2Transform.value.copy(Ye.matrix))}function N(fe,ue){fe.roughness.value=ue.roughness,fe.metalness.value=ue.metalness,ue.roughnessMap&&(fe.roughnessMap.value=ue.roughnessMap),ue.metalnessMap&&(fe.metalnessMap.value=ue.metalnessMap),ue.emissiveMap&&(fe.emissiveMap.value=ue.emissiveMap),ue.bumpMap&&(fe.bumpMap.value=ue.bumpMap,fe.bumpScale.value=ue.bumpScale,1===ue.side&&(fe.bumpScale.value*=-1)),ue.normalMap&&(fe.normalMap.value=ue.normalMap,fe.normalScale.value.copy(ue.normalScale),1===ue.side&&fe.normalScale.value.negate()),ue.displacementMap&&(fe.displacementMap.value=ue.displacementMap,fe.displacementScale.value=ue.displacementScale,fe.displacementBias.value=ue.displacementBias),n.get(ue).envMap&&(fe.envMapIntensity.value=ue.envMapIntensity)}return{refreshFogUniforms:function e(fe,ue){fe.fogColor.value.copy(ue.color),ue.isFog?(fe.fogNear.value=ue.near,fe.fogFar.value=ue.far):ue.isFogExp2&&(fe.fogDensity.value=ue.density)},refreshMaterialUniforms:function t(fe,ue,Ne,Re,Ye){ue.isMeshBasicMaterial?r(fe,ue):ue.isMeshLambertMaterial?(r(fe,ue),function w(fe,ue){ue.emissiveMap&&(fe.emissiveMap.value=ue.emissiveMap)}(fe,ue)):ue.isMeshToonMaterial?(r(fe,ue),function F(fe,ue){ue.gradientMap&&(fe.gradientMap.value=ue.gradientMap),ue.emissiveMap&&(fe.emissiveMap.value=ue.emissiveMap),ue.bumpMap&&(fe.bumpMap.value=ue.bumpMap,fe.bumpScale.value=ue.bumpScale,1===ue.side&&(fe.bumpScale.value*=-1)),ue.normalMap&&(fe.normalMap.value=ue.normalMap,fe.normalScale.value.copy(ue.normalScale),1===ue.side&&fe.normalScale.value.negate()),ue.displacementMap&&(fe.displacementMap.value=ue.displacementMap,fe.displacementScale.value=ue.displacementScale,fe.displacementBias.value=ue.displacementBias)}(fe,ue)):ue.isMeshPhongMaterial?(r(fe,ue),function T(fe,ue){fe.specular.value.copy(ue.specular),fe.shininess.value=Math.max(ue.shininess,1e-4),ue.emissiveMap&&(fe.emissiveMap.value=ue.emissiveMap),ue.bumpMap&&(fe.bumpMap.value=ue.bumpMap,fe.bumpScale.value=ue.bumpScale,1===ue.side&&(fe.bumpScale.value*=-1)),ue.normalMap&&(fe.normalMap.value=ue.normalMap,fe.normalScale.value.copy(ue.normalScale),1===ue.side&&fe.normalScale.value.negate()),ue.displacementMap&&(fe.displacementMap.value=ue.displacementMap,fe.displacementScale.value=ue.displacementScale,fe.displacementBias.value=ue.displacementBias)}(fe,ue)):ue.isMeshStandardMaterial?(r(fe,ue),ue.isMeshPhysicalMaterial?function Z(fe,ue,Ne){N(fe,ue),fe.ior.value=ue.ior,ue.sheen>0&&(fe.sheenColor.value.copy(ue.sheenColor).multiplyScalar(ue.sheen),fe.sheenRoughness.value=ue.sheenRoughness,ue.sheenColorMap&&(fe.sheenColorMap.value=ue.sheenColorMap),ue.sheenRoughnessMap&&(fe.sheenRoughnessMap.value=ue.sheenRoughnessMap)),ue.clearcoat>0&&(fe.clearcoat.value=ue.clearcoat,fe.clearcoatRoughness.value=ue.clearcoatRoughness,ue.clearcoatMap&&(fe.clearcoatMap.value=ue.clearcoatMap),ue.clearcoatRoughnessMap&&(fe.clearcoatRoughnessMap.value=ue.clearcoatRoughnessMap),ue.clearcoatNormalMap&&(fe.clearcoatNormalScale.value.copy(ue.clearcoatNormalScale),fe.clearcoatNormalMap.value=ue.clearcoatNormalMap,1===ue.side&&fe.clearcoatNormalScale.value.negate())),ue.transmission>0&&(fe.transmission.value=ue.transmission,fe.transmissionSamplerMap.value=Ne.texture,fe.transmissionSamplerSize.value.set(Ne.width,Ne.height),ue.transmissionMap&&(fe.transmissionMap.value=ue.transmissionMap),fe.thickness.value=ue.thickness,ue.thicknessMap&&(fe.thicknessMap.value=ue.thicknessMap),fe.attenuationDistance.value=ue.attenuationDistance,fe.attenuationColor.value.copy(ue.attenuationColor)),fe.specularIntensity.value=ue.specularIntensity,fe.specularColor.value.copy(ue.specularColor),ue.specularIntensityMap&&(fe.specularIntensityMap.value=ue.specularIntensityMap),ue.specularColorMap&&(fe.specularColorMap.value=ue.specularColorMap)}(fe,ue,Ye):N(fe,ue)):ue.isMeshMatcapMaterial?(r(fe,ue),function Q(fe,ue){ue.matcap&&(fe.matcap.value=ue.matcap),ue.bumpMap&&(fe.bumpMap.value=ue.bumpMap,fe.bumpScale.value=ue.bumpScale,1===ue.side&&(fe.bumpScale.value*=-1)),ue.normalMap&&(fe.normalMap.value=ue.normalMap,fe.normalScale.value.copy(ue.normalScale),1===ue.side&&fe.normalScale.value.negate()),ue.displacementMap&&(fe.displacementMap.value=ue.displacementMap,fe.displacementScale.value=ue.displacementScale,fe.displacementBias.value=ue.displacementBias)}(fe,ue)):ue.isMeshDepthMaterial?(r(fe,ue),function le(fe,ue){ue.displacementMap&&(fe.displacementMap.value=ue.displacementMap,fe.displacementScale.value=ue.displacementScale,fe.displacementBias.value=ue.displacementBias)}(fe,ue)):ue.isMeshDistanceMaterial?(r(fe,ue),function _e(fe,ue){ue.displacementMap&&(fe.displacementMap.value=ue.displacementMap,fe.displacementScale.value=ue.displacementScale,fe.displacementBias.value=ue.displacementBias),fe.referencePosition.value.copy(ue.referencePosition),fe.nearDistance.value=ue.nearDistance,fe.farDistance.value=ue.farDistance}(fe,ue)):ue.isMeshNormalMaterial?(r(fe,ue),function xe(fe,ue){ue.bumpMap&&(fe.bumpMap.value=ue.bumpMap,fe.bumpScale.value=ue.bumpScale,1===ue.side&&(fe.bumpScale.value*=-1)),ue.normalMap&&(fe.normalMap.value=ue.normalMap,fe.normalScale.value.copy(ue.normalScale),1===ue.side&&fe.normalScale.value.negate()),ue.displacementMap&&(fe.displacementMap.value=ue.displacementMap,fe.displacementScale.value=ue.displacementScale,fe.displacementBias.value=ue.displacementBias)}(fe,ue)):ue.isLineBasicMaterial?(function s(fe,ue){fe.diffuse.value.copy(ue.color),fe.opacity.value=ue.opacity}(fe,ue),ue.isLineDashedMaterial&&function o(fe,ue){fe.dashSize.value=ue.dashSize,fe.totalSize.value=ue.dashSize+ue.gapSize,fe.scale.value=ue.scale}(fe,ue)):ue.isPointsMaterial?function u(fe,ue,Ne,Re){let Ye;fe.diffuse.value.copy(ue.color),fe.opacity.value=ue.opacity,fe.size.value=ue.size*Ne,fe.scale.value=.5*Re,ue.map&&(fe.map.value=ue.map),ue.alphaMap&&(fe.alphaMap.value=ue.alphaMap),ue.alphaTest>0&&(fe.alphaTest.value=ue.alphaTest),ue.map?Ye=ue.map:ue.alphaMap&&(Ye=ue.alphaMap),void 0!==Ye&&(!0===Ye.matrixAutoUpdate&&Ye.updateMatrix(),fe.uvTransform.value.copy(Ye.matrix))}(fe,ue,Ne,Re):ue.isSpriteMaterial?function m(fe,ue){let Ne;fe.diffuse.value.copy(ue.color),fe.opacity.value=ue.opacity,fe.rotation.value=ue.rotation,ue.map&&(fe.map.value=ue.map),ue.alphaMap&&(fe.alphaMap.value=ue.alphaMap),ue.alphaTest>0&&(fe.alphaTest.value=ue.alphaTest),ue.map?Ne=ue.map:ue.alphaMap&&(Ne=ue.alphaMap),void 0!==Ne&&(!0===Ne.matrixAutoUpdate&&Ne.updateMatrix(),fe.uvTransform.value.copy(Ne.matrix))}(fe,ue):ue.isShadowMaterial?(fe.color.value.copy(ue.color),fe.opacity.value=ue.opacity):ue.isShaderMaterial&&(ue.uniformsNeedUpdate=!1)}}}function ha(n={}){const e=void 0!==n.canvas?n.canvas:function Ase(){const n=xM("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,r=void 0!==n.alpha&&n.alpha,s=void 0===n.depth||n.depth,o=void 0===n.stencil||n.stencil,u=void 0!==n.antialias&&n.antialias,m=void 0===n.premultipliedAlpha||n.premultipliedAlpha,w=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,T=void 0!==n.powerPreference?n.powerPreference:"default",F=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let N=null,Z=null;const Q=[],le=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=T_,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const _e=this;let xe=!1,fe=0,ue=0,Ne=null,Re=-1,Ye=null;const st=new xa,ht=new xa;let Et=null,hn=e.width,Kt=e.height,We=1,It=null,Ht=null;const it=new xa(0,0,hn,Kt),kt=new xa(0,0,hn,Kt);let et=!1;const bt=new XT;let Gt=!1,pn=!1,Qt=null;const mn=new Nr,zn=new ct,Ni={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function gi(){return null===Ne?We:1}let yi,ur,qi,rs,ss,Qn,Fi,Bi,br,ar,Ti,xr,no,Eo,wa,St,ft,$n,Qi,jr,Zn,us,Yr,Tn=t;function Es(_t,wn){for(let Vn=0;Vn<_t.length;Vn++){const li=e.getContext(_t[Vn],wn);if(null!==li)return li}return null}try{const _t={alpha:!0,depth:s,stencil:o,antialias:u,premultipliedAlpha:m,preserveDrawingBuffer:w,powerPreference:T,failIfMajorPerformanceCaveat:F};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r137"),e.addEventListener("webglcontextlost",Ys,!1),e.addEventListener("webglcontextrestored",$t,!1),null===Tn){const wn=["webgl2","webgl","experimental-webgl"];if(!0===_e.isWebGL1Renderer&&wn.shift(),Tn=Es(wn,_t),null===Tn)throw Es(wn)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Tn.getShaderPrecisionFormat&&(Tn.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(_t){throw console.error("THREE.WebGLRenderer: "+_t.message),_t}function hr(){yi=new Yie(Tn),ur=new Uie(Tn,yi,n),yi.init(ur),us=new Sse(Tn,yi,ur),qi=new Mse(Tn,yi,ur),rs=new Kie(Tn),ss=new dse,Qn=new Cse(Tn,yi,qi,ss,ur,us,rs),Fi=new Wie(_e),Bi=new Zie(_e),br=new Wte(Tn,ur),Yr=new zie(Tn,yi,br,ur),ar=new Xie(Tn,br,rs,Yr),Ti=new tre(Tn,ar,br,rs),Qi=new ere(Tn,ur,Qn),St=new Gie(ss),xr=new hse(_e,Fi,Bi,yi,ur,Yr,St),no=new Dse(ss),Eo=new pse,wa=new bse(yi,ur),$n=new Hie(_e,Fi,qi,Ti,r,m),ft=new KV(_e,Ti,ur),jr=new Vie(Tn,yi,rs,ur),Zn=new Jie(Tn,yi,rs,ur),rs.programs=xr.programs,_e.capabilities=ur,_e.extensions=yi,_e.properties=ss,_e.renderLists=Eo,_e.shadowMap=ft,_e.state=qi,_e.info=rs}hr();const lr=new Tse(_e,Tn);function Ys(_t){_t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),xe=!0}function $t(){console.log("THREE.WebGLRenderer: Context Restored."),xe=!1;const _t=rs.autoReset,wn=ft.enabled,Vn=ft.autoUpdate,Ln=ft.needsUpdate,li=ft.type;hr(),rs.autoReset=_t,ft.enabled=wn,ft.autoUpdate=Vn,ft.needsUpdate=Ln,ft.type=li}function Br(_t){const wn=_t.target;wn.removeEventListener("dispose",Br),function Cr(_t){(function As(_t){const wn=ss.get(_t).programs;void 0!==wn&&(wn.forEach(function(Vn){xr.releaseProgram(Vn)}),_t.isShaderMaterial&&xr.releaseShaderCache(_t))})(_t),ss.remove(_t)}(wn)}this.xr=lr,this.getContext=function(){return Tn},this.getContextAttributes=function(){return Tn.getContextAttributes()},this.forceContextLoss=function(){const _t=yi.get("WEBGL_lose_context");_t&&_t.loseContext()},this.forceContextRestore=function(){const _t=yi.get("WEBGL_lose_context");_t&&_t.restoreContext()},this.getPixelRatio=function(){return We},this.setPixelRatio=function(_t){void 0!==_t&&(We=_t,this.setSize(hn,Kt,!1))},this.getSize=function(_t){return _t.set(hn,Kt)},this.setSize=function(_t,wn,Vn){lr.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(hn=_t,Kt=wn,e.width=Math.floor(_t*We),e.height=Math.floor(wn*We),!1!==Vn&&(e.style.width=_t+"px",e.style.height=wn+"px"),this.setViewport(0,0,_t,wn))},this.getDrawingBufferSize=function(_t){return _t.set(hn*We,Kt*We).floor()},this.setDrawingBufferSize=function(_t,wn,Vn){hn=_t,Kt=wn,We=Vn,e.width=Math.floor(_t*Vn),e.height=Math.floor(wn*Vn),this.setViewport(0,0,_t,wn)},this.getCurrentViewport=function(_t){return _t.copy(st)},this.getViewport=function(_t){return _t.copy(it)},this.setViewport=function(_t,wn,Vn,Ln){_t.isVector4?it.set(_t.x,_t.y,_t.z,_t.w):it.set(_t,wn,Vn,Ln),qi.viewport(st.copy(it).multiplyScalar(We).floor())},this.getScissor=function(_t){return _t.copy(kt)},this.setScissor=function(_t,wn,Vn,Ln){_t.isVector4?kt.set(_t.x,_t.y,_t.z,_t.w):kt.set(_t,wn,Vn,Ln),qi.scissor(ht.copy(kt).multiplyScalar(We).floor())},this.getScissorTest=function(){return et},this.setScissorTest=function(_t){qi.setScissorTest(et=_t)},this.setOpaqueSort=function(_t){It=_t},this.setTransparentSort=function(_t){Ht=_t},this.getClearColor=function(_t){return _t.copy($n.getClearColor())},this.setClearColor=function(){$n.setClearColor.apply($n,arguments)},this.getClearAlpha=function(){return $n.getClearAlpha()},this.setClearAlpha=function(){$n.setClearAlpha.apply($n,arguments)},this.clear=function(_t,wn,Vn){let Ln=0;(void 0===_t||_t)&&(Ln|=16384),(void 0===wn||wn)&&(Ln|=256),(void 0===Vn||Vn)&&(Ln|=1024),Tn.clear(Ln)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ys,!1),e.removeEventListener("webglcontextrestored",$t,!1),Eo.dispose(),wa.dispose(),ss.dispose(),Fi.dispose(),Bi.dispose(),Ti.dispose(),Yr.dispose(),xr.dispose(),lr.dispose(),lr.removeEventListener("sessionstart",To),lr.removeEventListener("sessionend",Sl),Qt&&(Qt.dispose(),Qt=null),zh.stop()},this.renderBufferDirect=function(_t,wn,Vn,Ln,li,Ws){null===wn&&(wn=Ni);const Xs=li.isMesh&&li.matrixWorld.determinant()<0,ho=function Lhe(_t,wn,Vn,Ln,li){!0!==wn.isScene&&(wn=Ni),Qn.resetTextureUnits();const Ws=wn.fog,ho=null===Ne?_e.outputEncoding:!0===Ne.isXRRenderTarget?Ne.texture.encoding:T_,so=(Ln.isMeshStandardMaterial?Bi:Fi).get(Ln.envMap||(Ln.isMeshStandardMaterial?wn.environment:null)),da=!0===Ln.vertexColors&&!!Vn.attributes.color&&4===Vn.attributes.color.itemSize,Wo=!!Ln.normalMap&&!!Vn.attributes.tangent,$o=!!Vn.morphAttributes.position,Fl=!!Vn.morphAttributes.normal,Ly=Vn.morphAttributes.position?Vn.morphAttributes.position.length:0,Sx=Ln.toneMapped?_e.toneMapping:0,sa=ss.get(Ln),Ap=Z.state.lights;!0!==Gt||!0!==pn&&_t===Ye||St.setState(Ln,_t,_t===Ye&&Ln.id===Re);let Dc=!1;Ln.version===sa.__version?(sa.needsLights&&sa.lightsStateVersion!==Ap.state.version||sa.outputEncoding!==ho||li.isInstancedMesh&&!1===sa.instancing||!li.isInstancedMesh&&!0===sa.instancing||li.isSkinnedMesh&&!1===sa.skinning||!li.isSkinnedMesh&&!0===sa.skinning||sa.envMap!==so||Ln.fog&&sa.fog!==Ws||void 0!==sa.numClippingPlanes&&(sa.numClippingPlanes!==St.numPlanes||sa.numIntersection!==St.numIntersection)||sa.vertexAlphas!==da||sa.vertexTangents!==Wo||sa.morphTargets!==$o||sa.morphNormals!==Fl||sa.toneMapping!==Sx||!0===ur.isWebGL2&&sa.morphTargetsCount!==Ly)&&(Dc=!0):(Dc=!0,sa.__version=Ln.version);let Ip=sa.currentProgram;!0===Dc&&(Ip=WL(Ln,wn,li));let fA=!1,Rp=!1,cg=!1;const Su=Ip.getUniforms(),tC=sa.uniforms;if(qi.useProgram(Ip.program)&&(fA=!0,Rp=!0,cg=!0),Ln.id!==Re&&(Re=Ln.id,Rp=!0),fA||Ye!==_t){if(Su.setValue(Tn,"projectionMatrix",_t.projectionMatrix),ur.logarithmicDepthBuffer&&Su.setValue(Tn,"logDepthBufFC",2/(Math.log(_t.far+1)/Math.LN2)),Ye!==_t&&(Ye=_t,Rp=!0,cg=!0),Ln.isShaderMaterial||Ln.isMeshPhongMaterial||Ln.isMeshToonMaterial||Ln.isMeshStandardMaterial||Ln.envMap){const wf=Su.map.cameraPosition;void 0!==wf&&wf.setValue(Tn,zn.setFromMatrixPosition(_t.matrixWorld))}(Ln.isMeshPhongMaterial||Ln.isMeshToonMaterial||Ln.isMeshLambertMaterial||Ln.isMeshBasicMaterial||Ln.isMeshStandardMaterial||Ln.isShaderMaterial)&&Su.setValue(Tn,"isOrthographic",!0===_t.isOrthographicCamera),(Ln.isMeshPhongMaterial||Ln.isMeshToonMaterial||Ln.isMeshLambertMaterial||Ln.isMeshBasicMaterial||Ln.isMeshStandardMaterial||Ln.isShaderMaterial||Ln.isShadowMaterial||li.isSkinnedMesh)&&Su.setValue(Tn,"viewMatrix",_t.matrixWorldInverse)}if(li.isSkinnedMesh){Su.setOptional(Tn,li,"bindMatrix"),Su.setOptional(Tn,li,"bindMatrixInverse");const wf=li.skeleton;wf&&(ur.floatVertexTextures?(null===wf.boneTexture&&wf.computeBoneTexture(),Su.setValue(Tn,"boneTexture",wf.boneTexture,Qn),Su.setValue(Tn,"boneTextureSize",wf.boneTextureSize)):Su.setOptional(Tn,wf,"boneMatrices"))}return!!Vn&&(void 0!==Vn.morphAttributes.position||void 0!==Vn.morphAttributes.normal)&&Qi.update(li,Vn,Ln,Ip),(Rp||sa.receiveShadow!==li.receiveShadow)&&(sa.receiveShadow=li.receiveShadow,Su.setValue(Tn,"receiveShadow",li.receiveShadow)),Rp&&(Su.setValue(Tn,"toneMappingExposure",_e.toneMappingExposure),sa.needsLights&&function Fhe(_t,wn){_t.ambientLightColor.needsUpdate=wn,_t.lightProbe.needsUpdate=wn,_t.directionalLights.needsUpdate=wn,_t.directionalLightShadows.needsUpdate=wn,_t.pointLights.needsUpdate=wn,_t.pointLightShadows.needsUpdate=wn,_t.spotLights.needsUpdate=wn,_t.spotLightShadows.needsUpdate=wn,_t.rectAreaLights.needsUpdate=wn,_t.hemisphereLights.needsUpdate=wn}(tC,cg),Ws&&Ln.fog&&no.refreshFogUniforms(tC,Ws),no.refreshMaterialUniforms(tC,Ln,We,Kt,Qt),N_.upload(Tn,sa.uniformsList,tC,Qn)),Ln.isShaderMaterial&&!0===Ln.uniformsNeedUpdate&&(N_.upload(Tn,sa.uniformsList,tC,Qn),Ln.uniformsNeedUpdate=!1),Ln.isSpriteMaterial&&Su.setValue(Tn,"center",li.center),Su.setValue(Tn,"modelViewMatrix",li.modelViewMatrix),Su.setValue(Tn,"normalMatrix",li.normalMatrix),Su.setValue(Tn,"modelMatrix",li.matrixWorld),Ip}(_t,wn,Vn,Ln,li);qi.setMaterial(Ln,Xs);let so=Vn.index;const da=Vn.attributes.position;if(null===so){if(void 0===da||0===da.count)return}else if(0===so.count)return;let Wo=1;!0===Ln.wireframe&&(so=ar.getWireframeAttribute(Vn),Wo=2),Yr.setup(li,Ln,ho,Vn,so);let $o,Fl=jr;null!==so&&($o=br.get(so),Fl=Zn,Fl.setIndex($o));const Ly=null!==so?so.count:da.count,Sx=Vn.drawRange.start*Wo,sa=Vn.drawRange.count*Wo,Ap=null!==Ws?Ws.start*Wo:0,Dc=null!==Ws?Ws.count*Wo:1/0,Ip=Math.max(Sx,Ap),fA=Math.min(Ly,Sx+sa,Ap+Dc)-1,Rp=Math.max(0,fA-Ip+1);if(0!==Rp){if(li.isMesh)!0===Ln.wireframe?(qi.setLineWidth(Ln.wireframeLinewidth*gi()),Fl.setMode(1)):Fl.setMode(4);else if(li.isLine){let cg=Ln.linewidth;void 0===cg&&(cg=1),qi.setLineWidth(cg*gi()),Fl.setMode(li.isLineSegments?1:li.isLineLoop?2:3)}else li.isPoints?Fl.setMode(0):li.isSprite&&Fl.setMode(4);if(li.isInstancedMesh)Fl.renderInstances(Ip,Rp,li.count);else if(Vn.isInstancedBufferGeometry){const cg=Math.min(Vn.instanceCount,Vn._maxInstanceCount);Fl.renderInstances(Ip,Rp,cg)}else Fl.render(Ip,Rp)}},this.compile=function(_t,wn){Z=wa.get(_t),Z.init(),le.push(Z),_t.traverseVisible(function(Vn){Vn.isLight&&Vn.layers.test(wn.layers)&&(Z.pushLight(Vn),Vn.castShadow&&Z.pushShadow(Vn))}),Z.setupLights(_e.physicallyCorrectLights),_t.traverse(function(Vn){const Ln=Vn.material;if(Ln)if(Array.isArray(Ln))for(let li=0;li<Ln.length;li++)WL(Ln[li],_t,Vn);else WL(Ln,_t,Vn)}),le.pop(),Z=null};let si=null;function To(){zh.stop()}function Sl(){zh.start()}const zh=new _V;function Ll(_t,wn,Vn,Ln){if(!1===_t.visible)return;if(_t.layers.test(wn.layers))if(_t.isGroup)Vn=_t.renderOrder;else if(_t.isLOD)!0===_t.autoUpdate&&_t.update(wn);else if(_t.isLight)Z.pushLight(_t),_t.castShadow&&Z.pushShadow(_t);else if(_t.isSprite){if(!_t.frustumCulled||bt.intersectsSprite(_t)){Ln&&zn.setFromMatrixPosition(_t.matrixWorld).applyMatrix4(mn);const Xs=Ti.update(_t),ho=_t.material;ho.visible&&N.push(_t,Xs,ho,Vn,zn.z,null)}}else if((_t.isMesh||_t.isLine||_t.isPoints)&&(_t.isSkinnedMesh&&_t.skeleton.frame!==rs.render.frame&&(_t.skeleton.update(),_t.skeleton.frame=rs.render.frame),!_t.frustumCulled||bt.intersectsObject(_t))){Ln&&zn.setFromMatrixPosition(_t.matrixWorld).applyMatrix4(mn);const Xs=Ti.update(_t),ho=_t.material;if(Array.isArray(ho)){const so=Xs.groups;for(let da=0,Wo=so.length;da<Wo;da++){const $o=so[da],Fl=ho[$o.materialIndex];Fl&&Fl.visible&&N.push(_t,Xs,Fl,Vn,zn.z,$o)}}else ho.visible&&N.push(_t,Xs,ho,Vn,zn.z,null)}const Ws=_t.children;for(let Xs=0,ho=Ws.length;Xs<ho;Xs++)Ll(Ws[Xs],wn,Vn,Ln)}function Dp(_t,wn,Vn,Ln){const li=_t.opaque,Ws=_t.transmissive,Xs=_t.transparent;Z.setupLightsView(Vn),Ws.length>0&&function lg(_t,wn,Vn){null===Qt&&(Qt=new(!0===u&&!0===ur.isWebGL2?lP:xd)(1024,1024,{generateMipmaps:!0,type:null!==us.convert(I0)?I0:S_,minFilter:1008,magFilter:fc,wrapS:vu,wrapT:vu,useRenderToTexture:yi.has("WEBGL_multisampled_render_to_texture")}));const Ln=_e.getRenderTarget();_e.setRenderTarget(Qt),_e.clear();const li=_e.toneMapping;_e.toneMapping=0,dA(_t,wn,Vn),_e.toneMapping=li,Qn.updateMultisampleRenderTarget(Qt),Qn.updateRenderTargetMipmap(Qt),_e.setRenderTarget(Ln)}(li,wn,Vn),Ln&&qi.viewport(st.copy(Ln)),li.length>0&&dA(li,wn,Vn),Ws.length>0&&dA(Ws,wn,Vn),Xs.length>0&&dA(Xs,wn,Vn)}function dA(_t,wn,Vn){const Ln=!0===wn.isScene?wn.overrideMaterial:null;for(let li=0,Ws=_t.length;li<Ws;li++){const Xs=_t[li],ho=Xs.object,so=Xs.geometry,da=null===Ln?Xs.material:Ln,Wo=Xs.group;ho.layers.test(Vn.layers)&&Phe(ho,wn,Vn,so,da,Wo)}}function Phe(_t,wn,Vn,Ln,li,Ws){_t.onBeforeRender(_e,wn,Vn,Ln,li,Ws),_t.modelViewMatrix.multiplyMatrices(Vn.matrixWorldInverse,_t.matrixWorld),_t.normalMatrix.getNormalMatrix(_t.modelViewMatrix),li.onBeforeRender(_e,wn,Vn,Ln,_t,Ws),!0===li.transparent&&2===li.side?(li.side=1,li.needsUpdate=!0,_e.renderBufferDirect(Vn,wn,Ln,li,_t,Ws),li.side=0,li.needsUpdate=!0,_e.renderBufferDirect(Vn,wn,Ln,li,_t,Ws),li.side=2):_e.renderBufferDirect(Vn,wn,Ln,li,_t,Ws),_t.onAfterRender(_e,wn,Vn,Ln,li,Ws)}function WL(_t,wn,Vn){!0!==wn.isScene&&(wn=Ni);const Ln=ss.get(_t),li=Z.state.lights,Xs=li.state.version,ho=xr.getParameters(_t,li.state,Z.state.shadowsArray,wn,Vn),so=xr.getProgramCacheKey(ho);let da=Ln.programs;Ln.environment=_t.isMeshStandardMaterial?wn.environment:null,Ln.fog=wn.fog,Ln.envMap=(_t.isMeshStandardMaterial?Bi:Fi).get(_t.envMap||Ln.environment),void 0===da&&(_t.addEventListener("dispose",Br),da=new Map,Ln.programs=da);let Wo=da.get(so);if(void 0!==Wo){if(Ln.currentProgram===Wo&&Ln.lightsStateVersion===Xs)return HG(_t,ho),Wo}else ho.uniforms=xr.getUniforms(_t),_t.onBuild(Vn,ho,_e),_t.onBeforeCompile(ho,_e),Wo=xr.acquireProgram(ho,so),da.set(so,Wo),Ln.uniforms=ho.uniforms;const $o=Ln.uniforms;(!_t.isShaderMaterial&&!_t.isRawShaderMaterial||!0===_t.clipping)&&($o.clippingPlanes=St.uniform),HG(_t,ho),Ln.needsLights=function Ohe(_t){return _t.isMeshLambertMaterial||_t.isMeshToonMaterial||_t.isMeshPhongMaterial||_t.isMeshStandardMaterial||_t.isShadowMaterial||_t.isShaderMaterial&&!0===_t.lights}(_t),Ln.lightsStateVersion=Xs,Ln.needsLights&&($o.ambientLightColor.value=li.state.ambient,$o.lightProbe.value=li.state.probe,$o.directionalLights.value=li.state.directional,$o.directionalLightShadows.value=li.state.directionalShadow,$o.spotLights.value=li.state.spot,$o.spotLightShadows.value=li.state.spotShadow,$o.rectAreaLights.value=li.state.rectArea,$o.ltc_1.value=li.state.rectAreaLTC1,$o.ltc_2.value=li.state.rectAreaLTC2,$o.pointLights.value=li.state.point,$o.pointLightShadows.value=li.state.pointShadow,$o.hemisphereLights.value=li.state.hemi,$o.directionalShadowMap.value=li.state.directionalShadowMap,$o.directionalShadowMatrix.value=li.state.directionalShadowMatrix,$o.spotShadowMap.value=li.state.spotShadowMap,$o.spotShadowMatrix.value=li.state.spotShadowMatrix,$o.pointShadowMap.value=li.state.pointShadowMap,$o.pointShadowMatrix.value=li.state.pointShadowMatrix);const Fl=Wo.getUniforms(),Ly=N_.seqWithValue(Fl.seq,$o);return Ln.currentProgram=Wo,Ln.uniformsList=Ly,Wo}function HG(_t,wn){const Vn=ss.get(_t);Vn.outputEncoding=wn.outputEncoding,Vn.instancing=wn.instancing,Vn.skinning=wn.skinning,Vn.morphTargets=wn.morphTargets,Vn.morphNormals=wn.morphNormals,Vn.morphTargetsCount=wn.morphTargetsCount,Vn.numClippingPlanes=wn.numClippingPlanes,Vn.numIntersection=wn.numClipIntersection,Vn.vertexAlphas=wn.vertexAlphas,Vn.vertexTangents=wn.vertexTangents,Vn.toneMapping=wn.toneMapping}zh.setAnimationLoop(function _s(_t){si&&si(_t)}),"undefined"!=typeof window&&zh.setContext(window),this.setAnimationLoop=function(_t){si=_t,lr.setAnimationLoop(_t),null===_t?zh.stop():zh.start()},lr.addEventListener("sessionstart",To),lr.addEventListener("sessionend",Sl),this.render=function(_t,wn){if(void 0===wn||!0===wn.isCamera){if(!0!==xe){if(!0===_t.autoUpdate&&_t.updateMatrixWorld(),null===wn.parent&&wn.updateMatrixWorld(),!0===lr.enabled&&!0===lr.isPresenting&&(!0===lr.cameraAutoUpdate&&lr.updateCamera(wn),wn=lr.getCamera()),!0===_t.isScene&&_t.onBeforeRender(_e,_t,wn,Ne),Z=wa.get(_t,le.length),Z.init(),le.push(Z),mn.multiplyMatrices(wn.projectionMatrix,wn.matrixWorldInverse),bt.setFromProjectionMatrix(mn),pn=this.localClippingEnabled,Gt=St.init(this.clippingPlanes,pn,wn),N=Eo.get(_t,Q.length),N.init(),Q.push(N),Ll(_t,wn,0,_e.sortObjects),N.finish(),!0===_e.sortObjects&&N.sort(It,Ht),!0===Gt&&St.beginShadows(),ft.render(Z.state.shadowsArray,_t,wn),!0===Gt&&St.endShadows(),!0===this.info.autoReset&&this.info.reset(),$n.render(N,_t),Z.setupLights(_e.physicallyCorrectLights),wn.isArrayCamera){const Ln=wn.cameras;for(let li=0,Ws=Ln.length;li<Ws;li++){const Xs=Ln[li];Dp(N,_t,Xs,Xs.viewport)}}else Dp(N,_t,wn);null!==Ne&&(Qn.updateMultisampleRenderTarget(Ne),Qn.updateRenderTargetMipmap(Ne)),!0===_t.isScene&&_t.onAfterRender(_e,_t,wn),qi.buffers.depth.setTest(!0),qi.buffers.depth.setMask(!0),qi.buffers.color.setMask(!0),qi.setPolygonOffset(!1),Yr.resetDefaultState(),Re=-1,Ye=null,le.pop(),Z=le.length>0?le[le.length-1]:null,Q.pop(),N=Q.length>0?Q[Q.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return fe},this.getActiveMipmapLevel=function(){return ue},this.getRenderTarget=function(){return Ne},this.setRenderTargetTextures=function(_t,wn,Vn){ss.get(_t.texture).__webglTexture=wn,ss.get(_t.depthTexture).__webglTexture=Vn;const Ln=ss.get(_t);Ln.__hasExternalTextures=!0,Ln.__hasExternalTextures&&(Ln.__autoAllocateDepthBuffer=void 0===Vn,Ln.__autoAllocateDepthBuffer||_t.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),_t.useRenderToTexture=!1,_t.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(_t,wn){const Vn=ss.get(_t);Vn.__webglFramebuffer=wn,Vn.__useDefaultFramebuffer=void 0===wn},this.setRenderTarget=function(_t,wn=0,Vn=0){Ne=_t,fe=wn,ue=Vn;let Ln=!0;if(_t){const so=ss.get(_t);void 0!==so.__useDefaultFramebuffer?(qi.bindFramebuffer(36160,null),Ln=!1):void 0===so.__webglFramebuffer?Qn.setupRenderTarget(_t):so.__hasExternalTextures&&Qn.rebindTextures(_t,ss.get(_t.texture).__webglTexture,ss.get(_t.depthTexture).__webglTexture)}let li=null,Ws=!1,Xs=!1;if(_t){const so=_t.texture;(so.isDataTexture3D||so.isDataTexture2DArray)&&(Xs=!0);const da=ss.get(_t).__webglFramebuffer;_t.isWebGLCubeRenderTarget?(li=da[wn],Ws=!0):li=_t.useRenderbuffer?ss.get(_t).__webglMultisampledFramebuffer:da,st.copy(_t.viewport),ht.copy(_t.scissor),Et=_t.scissorTest}else st.copy(it).multiplyScalar(We).floor(),ht.copy(kt).multiplyScalar(We).floor(),Et=et;if(qi.bindFramebuffer(36160,li)&&ur.drawBuffers&&Ln&&qi.drawBuffers(_t,li),qi.viewport(st),qi.scissor(ht),qi.setScissorTest(Et),Ws){const so=ss.get(_t.texture);Tn.framebufferTexture2D(36160,36064,34069+wn,so.__webglTexture,Vn)}else if(Xs){const so=ss.get(_t.texture);Tn.framebufferTextureLayer(36160,36064,so.__webglTexture,Vn||0,wn||0)}Re=-1},this.readRenderTargetPixels=function(_t,wn,Vn,Ln,li,Ws,Xs){if(!_t||!_t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ho=ss.get(_t).__webglFramebuffer;if(_t.isWebGLCubeRenderTarget&&void 0!==Xs&&(ho=ho[Xs]),ho){qi.bindFramebuffer(36160,ho);try{const so=_t.texture,da=so.format,Wo=so.type;if(da!==yu&&us.convert(da)!==Tn.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const $o=Wo===I0&&(yi.has("EXT_color_buffer_half_float")||ur.isWebGL2&&yi.has("EXT_color_buffer_float"));if(!(Wo===S_||us.convert(Wo)===Tn.getParameter(35738)||Wo===E_&&(ur.isWebGL2||yi.has("OES_texture_float")||yi.has("WEBGL_color_buffer_float"))||$o))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===Tn.checkFramebufferStatus(36160)?wn>=0&&wn<=_t.width-Ln&&Vn>=0&&Vn<=_t.height-li&&Tn.readPixels(wn,Vn,Ln,li,us.convert(da),us.convert(Wo),Ws):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const so=null!==Ne?ss.get(Ne).__webglFramebuffer:null;qi.bindFramebuffer(36160,so)}}},this.copyFramebufferToTexture=function(_t,wn,Vn=0){if(!0!==wn.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const Ln=Math.pow(2,-Vn),li=Math.floor(wn.image.width*Ln),Ws=Math.floor(wn.image.height*Ln);Qn.setTexture2D(wn,0),Tn.copyTexSubImage2D(3553,Vn,0,0,_t.x,_t.y,li,Ws),qi.unbindTexture()},this.copyTextureToTexture=function(_t,wn,Vn,Ln=0){const li=wn.image.width,Ws=wn.image.height,Xs=us.convert(Vn.format),ho=us.convert(Vn.type);Qn.setTexture2D(Vn,0),Tn.pixelStorei(37440,Vn.flipY),Tn.pixelStorei(37441,Vn.premultiplyAlpha),Tn.pixelStorei(3317,Vn.unpackAlignment),wn.isDataTexture?Tn.texSubImage2D(3553,Ln,_t.x,_t.y,li,Ws,Xs,ho,wn.image.data):wn.isCompressedTexture?Tn.compressedTexSubImage2D(3553,Ln,_t.x,_t.y,wn.mipmaps[0].width,wn.mipmaps[0].height,Xs,wn.mipmaps[0].data):Tn.texSubImage2D(3553,Ln,_t.x,_t.y,Xs,ho,wn.image),0===Ln&&Vn.generateMipmaps&&Tn.generateMipmap(3553),qi.unbindTexture()},this.copyTextureToTexture3D=function(_t,wn,Vn,Ln,li=0){if(_e.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Ws=_t.max.x-_t.min.x+1,Xs=_t.max.y-_t.min.y+1,ho=_t.max.z-_t.min.z+1,so=us.convert(Ln.format),da=us.convert(Ln.type);let Wo;if(Ln.isDataTexture3D)Qn.setTexture3D(Ln,0),Wo=32879;else{if(!Ln.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Qn.setTexture2DArray(Ln,0),Wo=35866}Tn.pixelStorei(37440,Ln.flipY),Tn.pixelStorei(37441,Ln.premultiplyAlpha),Tn.pixelStorei(3317,Ln.unpackAlignment);const $o=Tn.getParameter(3314),Fl=Tn.getParameter(32878),Ly=Tn.getParameter(3316),Sx=Tn.getParameter(3315),sa=Tn.getParameter(32877),Ap=Vn.isCompressedTexture?Vn.mipmaps[0]:Vn.image;Tn.pixelStorei(3314,Ap.width),Tn.pixelStorei(32878,Ap.height),Tn.pixelStorei(3316,_t.min.x),Tn.pixelStorei(3315,_t.min.y),Tn.pixelStorei(32877,_t.min.z),Vn.isDataTexture||Vn.isDataTexture3D?Tn.texSubImage3D(Wo,li,wn.x,wn.y,wn.z,Ws,Xs,ho,so,da,Ap.data):Vn.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Tn.compressedTexSubImage3D(Wo,li,wn.x,wn.y,wn.z,Ws,Xs,ho,so,Ap.data)):Tn.texSubImage3D(Wo,li,wn.x,wn.y,wn.z,Ws,Xs,ho,so,da,Ap),Tn.pixelStorei(3314,$o),Tn.pixelStorei(32878,Fl),Tn.pixelStorei(3316,Ly),Tn.pixelStorei(3315,Sx),Tn.pixelStorei(32877,sa),0===li&&Ln.generateMipmaps&&Tn.generateMipmap(Wo),qi.unbindTexture()},this.initTexture=function(_t){Qn.setTexture2D(_t,0),qi.unbindTexture()},this.resetState=function(){fe=0,ue=0,Ne=null,qi.reset(),Yr.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}ha.prototype.isWebGLRenderer=!0,class Ise extends ha{}.prototype.isWebGL1Renderer=!0;class eD{constructor(e,t=25e-5){this.name="",this.color=new rr(e),this.density=t}clone(){return new eD(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}eD.prototype.isFogExp2=!0;class tD{constructor(e,t=1,r=1e3){this.name="",this.color=new rr(e),this.near=t,this.far=r}clone(){return new tD(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}tD.prototype.isFog=!0;class nD extends ra{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}nD.prototype.isScene=!0;class rx{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=_M,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Nh()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let s=0,o=this.stride;s<o;s++)this.array[e+s]=t.array[r+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Nh()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Nh()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}rx.prototype.isInterleavedBuffer=!0;const $l=new ct;class Cy{constructor(e,t,r,s=!1){this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)$l.x=this.getX(t),$l.y=this.getY(t),$l.z=this.getZ(t),$l.applyMatrix4(e),this.setXYZ(t,$l.x,$l.y,$l.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)$l.x=this.getX(t),$l.y=this.getY(t),$l.z=this.getZ(t),$l.applyNormalMatrix(e),this.setXYZ(t,$l.x,$l.y,$l.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)$l.x=this.getX(t),$l.y=this.getY(t),$l.z=this.getZ(t),$l.transformDirection(e),this.setXYZ(t,$l.x,$l.y,$l.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,s){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=s,this}setXYZW(e,t,r,s,o){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=s,this.data.array[e+3]=o,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return new ka(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Cy(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Cy.prototype.isInterleavedBufferAttribute=!0;class UP extends ou{constructor(e){super(),this.type="SpriteMaterial",this.color=new rr(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let sx;UP.prototype.isSpriteMaterial=!0;const IM=new ct,ox=new ct,ax=new ct,lx=new ui,RM=new ui,$V=new Nr,iD=new ct,kM=new ct,rD=new ct,e5=new ui,GP=new ui,t5=new ui;function sD(n,e,t,r,s,o){lx.subVectors(n,t).addScalar(.5).multiply(r),void 0!==s?(RM.x=o*lx.x-s*lx.y,RM.y=s*lx.x+o*lx.y):RM.copy(lx),n.copy(e),n.x+=RM.x,n.y+=RM.y,n.applyMatrix4($V)}(class WP extends ra{constructor(e){if(super(),this.type="Sprite",void 0===sx){sx=new ps;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new rx(t,5);sx.setIndex([0,1,2,0,2,3]),sx.setAttribute("position",new Cy(r,3,0,!1)),sx.setAttribute("uv",new Cy(r,2,3,!1))}this.geometry=sx,this.material=void 0!==e?e:new UP,this.center=new ui(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ox.setFromMatrixScale(this.matrixWorld),$V.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ax.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&ox.multiplyScalar(-ax.z);const r=this.material.rotation;let s,o;0!==r&&(o=Math.cos(r),s=Math.sin(r));const u=this.center;sD(iD.set(-.5,-.5,0),ax,u,ox,s,o),sD(kM.set(.5,-.5,0),ax,u,ox,s,o),sD(rD.set(.5,.5,0),ax,u,ox,s,o),e5.set(0,0),GP.set(1,0),t5.set(1,1);let m=e.ray.intersectTriangle(iD,kM,rD,!1,IM);if(null===m&&(sD(kM.set(-.5,.5,0),ax,u,ox,s,o),GP.set(0,1),m=e.ray.intersectTriangle(iD,rD,kM,!1,IM),null===m))return;const w=e.ray.origin.distanceTo(IM);w<e.near||w>e.far||t.push({distance:w,point:IM.clone(),uv:pc.getUV(IM,iD,kM,rD,e5,GP,t5,new ui),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const r5=new ct,s5=new xa,o5=new xa,kse=new ct,a5=new Nr;class qP extends Tc{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Nr,this.bindMatrixInverse=new Nr}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new xa,t=this.geometry.attributes.skinWeight;for(let r=0,s=t.count;r<s;r++){e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.w=t.getW(r);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,s=this.geometry;s5.fromBufferAttribute(s.attributes.skinIndex,e),o5.fromBufferAttribute(s.attributes.skinWeight,e),r5.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const u=o5.getComponent(o);if(0!==u){const m=s5.getComponent(o);a5.multiplyMatrices(r.bones[m].matrixWorld,r.boneInverses[m]),t.addScaledVector(kse.copy(r5).applyMatrix4(a5),u)}}return t.applyMatrix4(this.bindMatrixInverse)}}qP.prototype.isSkinnedMesh=!0;(class jP extends ra{constructor(){super(),this.type="Bone"}}).prototype.isBone=!0;(class cx extends Ec{constructor(e=null,t=1,r=1,s,o,u,m,w,T=fc,F=fc,N,Z){super(null,u,m,w,T,F,s,o,N,Z),this.image={data:e,width:t,height:r},this.magFilter=T,this.minFilter=F,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}).prototype.isDataTexture=!0;class ux extends ka{constructor(e,t,r,s=1){"number"==typeof r&&(s=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,r),this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}ux.prototype.isInstancedBufferAttribute=!0;const c5=new Nr,u5=new Nr,aD=[],PM=new Tc;(class h5 extends Tc{constructor(e,t,r){super(e,t),this.instanceMatrix=new ux(new Float32Array(16*r),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const r=this.matrixWorld,s=this.count;if(PM.geometry=this.geometry,PM.material=this.material,void 0!==PM.material)for(let o=0;o<s;o++){this.getMatrixAt(o,c5),u5.multiplyMatrices(r,c5),PM.matrixWorld=u5,PM.raycast(e,aD);for(let u=0,m=aD.length;u<m;u++){const w=aD[u];w.instanceId=o,w.object=this,t.push(w)}aD.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new ux(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class Hc extends ou{constructor(e){super(),this.type="LineBasicMaterial",this.color=new rr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Hc.prototype.isLineBasicMaterial=!0;const d5=new ct,f5=new ct,p5=new Nr,YP=new xy,lD=new by;class B_ extends ra{constructor(e=new ps,t=new Hc){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,r=[0];for(let s=1,o=t.count;s<o;s++)d5.fromBufferAttribute(t,s-1),f5.fromBufferAttribute(t,s),r[s]=r[s-1],r[s]+=d5.distanceTo(f5);e.setAttribute("lineDistance",new Dr(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const r=this.geometry,s=this.matrixWorld,o=e.params.Line.threshold,u=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),lD.copy(r.boundingSphere),lD.applyMatrix4(s),lD.radius+=o,!1===e.ray.intersectsSphere(lD))return;p5.copy(s).invert(),YP.copy(e.ray).applyMatrix4(p5);const m=o/((this.scale.x+this.scale.y+this.scale.z)/3),w=m*m,T=new ct,F=new ct,N=new ct,Z=new ct,Q=this.isLineSegments?2:1;if(r.isBufferGeometry){const le=r.index,xe=r.attributes.position;if(null!==le)for(let Ne=Math.max(0,u.start),Re=Math.min(le.count,u.start+u.count)-1;Ne<Re;Ne+=Q){const Ye=le.getX(Ne),st=le.getX(Ne+1);if(T.fromBufferAttribute(xe,Ye),F.fromBufferAttribute(xe,st),YP.distanceSqToSegment(T,F,Z,N)>w)continue;Z.applyMatrix4(this.matrixWorld);const Et=e.ray.origin.distanceTo(Z);Et<e.near||Et>e.far||t.push({distance:Et,point:N.clone().applyMatrix4(this.matrixWorld),index:Ne,face:null,faceIndex:null,object:this})}else for(let Ne=Math.max(0,u.start),Re=Math.min(xe.count,u.start+u.count)-1;Ne<Re;Ne+=Q){if(T.fromBufferAttribute(xe,Ne),F.fromBufferAttribute(xe,Ne+1),YP.distanceSqToSegment(T,F,Z,N)>w)continue;Z.applyMatrix4(this.matrixWorld);const st=e.ray.origin.distanceTo(Z);st<e.near||st>e.far||t.push({distance:st,point:N.clone().applyMatrix4(this.matrixWorld),index:Ne,face:null,faceIndex:null,object:this})}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const s=t[r[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=s.length;o<u;o++){const m=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[m]=o}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}B_.prototype.isLine=!0;const m5=new ct,g5=new ct;class H_ extends B_{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,r=[];for(let s=0,o=t.count;s<o;s+=2)m5.fromBufferAttribute(t,s),g5.fromBufferAttribute(t,s+1),r[s]=0===s?0:r[s-1],r[s+1]=r[s]+m5.distanceTo(g5);e.setAttribute("lineDistance",new Dr(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}H_.prototype.isLineSegments=!0;(class _5 extends B_{constructor(e,t){super(e,t),this.type="LineLoop"}}).prototype.isLineLoop=!0;class hx extends ou{constructor(e){super(),this.type="PointsMaterial",this.color=new rr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}hx.prototype.isPointsMaterial=!0;const v5=new Nr,XP=new xy,cD=new by,uD=new ct;function y5(n,e,t,r,s,o,u){const m=XP.distanceSqToPoint(n);if(m<t){const w=new ct;XP.closestPointToPoint(n,w),w.applyMatrix4(r);const T=s.ray.origin.distanceTo(w);if(T<s.near||T>s.far)return;o.push({distance:T,distanceToRay:Math.sqrt(m),point:w,index:e,face:null,object:u})}}(class hD extends ra{constructor(e=new ps,t=new hx){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,s=this.matrixWorld,o=e.params.Points.threshold,u=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),cD.copy(r.boundingSphere),cD.applyMatrix4(s),cD.radius+=o,!1===e.ray.intersectsSphere(cD))return;v5.copy(s).invert(),XP.copy(e.ray).applyMatrix4(v5);const m=o/((this.scale.x+this.scale.y+this.scale.z)/3),w=m*m;if(r.isBufferGeometry){const T=r.index,N=r.attributes.position;if(null!==T)for(let le=Math.max(0,u.start),_e=Math.min(T.count,u.start+u.count);le<_e;le++){const xe=T.getX(le);uD.fromBufferAttribute(N,xe),y5(uD,xe,w,s,e,t,this)}else for(let le=Math.max(0,u.start),_e=Math.min(N.count,u.start+u.count);le<_e;le++)uD.fromBufferAttribute(N,le),y5(uD,le,w,s,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const s=t[r[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=s.length;o<u;o++){const m=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[m]=o}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}).prototype.isPoints=!0,class Lse extends Ec{constructor(e,t,r,s,o,u,m,w,T){super(e,t,r,s,o,u,m,w,T),this.minFilter=void 0!==u?u:kl,this.magFilter=void 0!==o?o:kl,this.generateMipmaps=!1;const F=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function N(){F.needsUpdate=!0,e.requestVideoFrameCallback(N)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e==0&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class Fse extends Ec{constructor(e,t,r){super({width:e,height:t}),this.format=r,this.magFilter=fc,this.minFilter=fc,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;(class b5 extends Ec{constructor(e,t,r,s,o,u,m,w,T,F,N,Z){super(null,u,m,w,T,F,s,o,N,Z),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class Ose extends Ec{constructor(e,t,r,s,o,u,m,w,T){super(e,t,r,s,o,u,m,w,T),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0,new ct,new ct,new ct,new pc;class Cd{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,s=this.getPoint(0),o=0;t.push(0);for(let u=1;u<=e;u++)r=this.getPoint(u/e),o+=r.distanceTo(s),t.push(o),s=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let s=0;const o=r.length;let u;u=t||e*r[o-1];let T,m=0,w=o-1;for(;m<=w;)if(s=Math.floor(m+(w-m)/2),T=r[s]-u,T<0)m=s+1;else{if(!(T>0)){w=s;break}w=s-1}if(s=w,r[s]===u)return s/(o-1);const F=r[s];return(s+(u-F)/(r[s+1]-F))/(o-1)}getTangent(e,t){let s=e-1e-4,o=e+1e-4;s<0&&(s=0),o>1&&(o=1);const u=this.getPoint(s),m=this.getPoint(o),w=t||(u.isVector2?new ui:new ct);return w.copy(m).sub(u).normalize(),w}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new ct,s=[],o=[],u=[],m=new ct,w=new Nr;for(let Q=0;Q<=e;Q++)s[Q]=this.getTangentAt(Q/e,new ct);o[0]=new ct,u[0]=new ct;let T=Number.MAX_VALUE;const F=Math.abs(s[0].x),N=Math.abs(s[0].y),Z=Math.abs(s[0].z);F<=T&&(T=F,r.set(1,0,0)),N<=T&&(T=N,r.set(0,1,0)),Z<=T&&r.set(0,0,1),m.crossVectors(s[0],r).normalize(),o[0].crossVectors(s[0],m),u[0].crossVectors(s[0],o[0]);for(let Q=1;Q<=e;Q++){if(o[Q]=o[Q-1].clone(),u[Q]=u[Q-1].clone(),m.crossVectors(s[Q-1],s[Q]),m.length()>Number.EPSILON){m.normalize();const le=Math.acos(su(s[Q-1].dot(s[Q]),-1,1));o[Q].applyMatrix4(w.makeRotationAxis(m,le))}u[Q].crossVectors(s[Q],o[Q])}if(!0===t){let Q=Math.acos(su(o[0].dot(o[e]),-1,1));Q/=e,s[0].dot(m.crossVectors(o[0],o[e]))>0&&(Q=-Q);for(let le=1;le<=e;le++)o[le].applyMatrix4(w.makeRotationAxis(s[le],Q*le)),u[le].crossVectors(s[le],o[le])}return{tangents:s,normals:o,binormals:u}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class vD extends Cd{constructor(e=0,t=0,r=1,s=1,o=0,u=2*Math.PI,m=!1,w=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=s,this.aStartAngle=o,this.aEndAngle=u,this.aClockwise=m,this.aRotation=w}getPoint(e,t){const r=t||new ui,s=2*Math.PI;let o=this.aEndAngle-this.aStartAngle;const u=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=s;for(;o>s;)o-=s;o<Number.EPSILON&&(o=u?0:s),!0===this.aClockwise&&!u&&(o===s?o=-s:o-=s);const m=this.aStartAngle+e*o;let w=this.aX+this.xRadius*Math.cos(m),T=this.aY+this.yRadius*Math.sin(m);if(0!==this.aRotation){const F=Math.cos(this.aRotation),N=Math.sin(this.aRotation),Z=w-this.aX,Q=T-this.aY;w=Z*F-Q*N+this.aX,T=Z*N+Q*F+this.aY}return r.set(w,T)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}vD.prototype.isEllipseCurve=!0;class w5 extends vD{constructor(e,t,r,s,o,u){super(e,t,r,r,s,o,u),this.type="ArcCurve"}}function KP(){let n=0,e=0,t=0,r=0;function s(o,u,m,w){n=o,e=m,t=-3*o+3*u-2*m-w,r=2*o-2*u+m+w}return{initCatmullRom:function(o,u,m,w,T){s(u,m,T*(m-o),T*(w-u))},initNonuniformCatmullRom:function(o,u,m,w,T,F,N){let Z=(u-o)/T-(m-o)/(T+F)+(m-u)/F,Q=(m-u)/F-(w-u)/(F+N)+(w-m)/N;Z*=F,Q*=F,s(u,m,Z,Q)},calc:function(o){const u=o*o;return n+e*o+t*u+r*(u*o)}}}w5.prototype.isArcCurve=!0;const yD=new ct,QP=new KP,$P=new KP,eL=new KP;class M5 extends Cd{constructor(e=[],t=!1,r="centripetal",s=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=s}getPoint(e,t=new ct){const r=t,s=this.points,o=s.length,u=(o-(this.closed?0:1))*e;let T,F,m=Math.floor(u),w=u-m;this.closed?m+=m>0?0:(Math.floor(Math.abs(m)/o)+1)*o:0===w&&m===o-1&&(m=o-2,w=1),this.closed||m>0?T=s[(m-1)%o]:(yD.subVectors(s[0],s[1]).add(s[0]),T=yD);const N=s[m%o],Z=s[(m+1)%o];if(this.closed||m+2<o?F=s[(m+2)%o]:(yD.subVectors(s[o-1],s[o-2]).add(s[o-1]),F=yD),"centripetal"===this.curveType||"chordal"===this.curveType){const Q="chordal"===this.curveType?.5:.25;let le=Math.pow(T.distanceToSquared(N),Q),_e=Math.pow(N.distanceToSquared(Z),Q),xe=Math.pow(Z.distanceToSquared(F),Q);_e<1e-4&&(_e=1),le<1e-4&&(le=_e),xe<1e-4&&(xe=_e),QP.initNonuniformCatmullRom(T.x,N.x,Z.x,F.x,le,_e,xe),$P.initNonuniformCatmullRom(T.y,N.y,Z.y,F.y,le,_e,xe),eL.initNonuniformCatmullRom(T.z,N.z,Z.z,F.z,le,_e,xe)}else"catmullrom"===this.curveType&&(QP.initCatmullRom(T.x,N.x,Z.x,F.x,this.tension),$P.initCatmullRom(T.y,N.y,Z.y,F.y,this.tension),eL.initCatmullRom(T.z,N.z,Z.z,F.z,this.tension));return r.set(QP.calc(w),$P.calc(w),eL.calc(w)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const s=e.points[t];this.points.push((new ct).fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function C5(n,e,t,r,s){const o=.5*(r-e),u=.5*(s-t),m=n*n;return(2*t-2*r+o+u)*(n*m)+(-3*t+3*r-2*o-u)*m+o*n+t}function LM(n,e,t,r){return function Nse(n,e){const t=1-n;return t*t*e}(n,e)+function Bse(n,e){return 2*(1-n)*n*e}(n,t)+function Hse(n,e){return n*n*e}(n,r)}function FM(n,e,t,r,s){return function zse(n,e){const t=1-n;return t*t*t*e}(n,e)+function Vse(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function Use(n,e){return 3*(1-n)*n*n*e}(n,r)+function Gse(n,e){return n*n*n*e}(n,s)}M5.prototype.isCatmullRomCurve3=!0;class tL extends Cd{constructor(e=new ui,t=new ui,r=new ui,s=new ui){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=s}getPoint(e,t=new ui){const r=t,s=this.v0,o=this.v1,u=this.v2,m=this.v3;return r.set(FM(e,s.x,o.x,u.x,m.x),FM(e,s.y,o.y,u.y,m.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}tL.prototype.isCubicBezierCurve=!0;class S5 extends Cd{constructor(e=new ct,t=new ct,r=new ct,s=new ct){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=s}getPoint(e,t=new ct){const r=t,s=this.v0,o=this.v1,u=this.v2,m=this.v3;return r.set(FM(e,s.x,o.x,u.x,m.x),FM(e,s.y,o.y,u.y,m.y),FM(e,s.z,o.z,u.z,m.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}S5.prototype.isCubicBezierCurve3=!0;class bD extends Cd{constructor(e=new ui,t=new ui){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ui){const r=t;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new ui;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}bD.prototype.isLineCurve=!0;class nL extends Cd{constructor(e=new ui,t=new ui,r=new ui){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ui){const r=t,s=this.v0,o=this.v1,u=this.v2;return r.set(LM(e,s.x,o.x,u.x),LM(e,s.y,o.y,u.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}nL.prototype.isQuadraticBezierCurve=!0;class iL extends Cd{constructor(e=new ct,t=new ct,r=new ct){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ct){const r=t,s=this.v0,o=this.v1,u=this.v2;return r.set(LM(e,s.x,o.x,u.x),LM(e,s.y,o.y,u.y),LM(e,s.z,o.z,u.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}iL.prototype.isQuadraticBezierCurve3=!0;class rL extends Cd{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new ui){const r=t,s=this.points,o=(s.length-1)*e,u=Math.floor(o),m=o-u,w=s[0===u?u:u-1],T=s[u],F=s[u>s.length-2?s.length-1:u+1],N=s[u>s.length-3?s.length-1:u+2];return r.set(C5(m,w.x,T.x,F.x,N.x),C5(m,w.y,T.y,F.y,N.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const s=e.points[t];this.points.push((new ui).fromArray(s))}return this}}rL.prototype.isSplineCurve=!0;var sL=Object.freeze({__proto__:null,ArcCurve:w5,CatmullRomCurve3:M5,CubicBezierCurve:tL,CubicBezierCurve3:S5,EllipseCurve:vD,LineCurve:bD,LineCurve3:class Wse extends Cd{constructor(e=new ct,t=new ct){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new ct){const r=t;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:nL,QuadraticBezierCurve3:iL,SplineCurve:rL});class qse extends Cd{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new bD(t,e))}getPoint(e,t){const r=e*this.getLength(),s=this.getCurveLengths();let o=0;for(;o<s.length;){if(s[o]>=r){const u=s[o]-r,m=this.curves[o],w=m.getLength();return m.getPointAt(0===w?0:1-u/w,t)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,s=this.curves.length;r<s;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let s=0,o=this.curves;s<o.length;s++){const u=o[s],w=u.getPoints(u&&u.isEllipseCurve?2*e:u&&(u.isLineCurve||u.isLineCurve3)?1:u&&u.isSplineCurve?e*u.points.length:e);for(let T=0;T<w.length;T++){const F=w[T];r&&r.equals(F)||(t.push(F),r=F)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const s=e.curves[t];this.curves.push((new sL[s.type]).fromJSON(s))}return this}}class xD extends qse{constructor(e){super(),this.type="Path",this.currentPoint=new ui,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new bD(this.currentPoint.clone(),new ui(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,s){const o=new nL(this.currentPoint.clone(),new ui(e,t),new ui(r,s));return this.curves.push(o),this.currentPoint.set(r,s),this}bezierCurveTo(e,t,r,s,o,u){const m=new tL(this.currentPoint.clone(),new ui(e,t),new ui(r,s),new ui(o,u));return this.curves.push(m),this.currentPoint.set(o,u),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new rL(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,s,o,u){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,r,s,o,u),this}absarc(e,t,r,s,o,u){return this.absellipse(e,t,r,r,s,o,u),this}ellipse(e,t,r,s,o,u,m,w){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,r,s,o,u,m,w),this}absellipse(e,t,r,s,o,u,m,w){const T=new vD(e,t,r,s,o,u,m,w);if(this.curves.length>0){const N=T.getPoint(0);N.equals(this.currentPoint)||this.lineTo(N.x,N.y)}this.curves.push(T);const F=T.getPoint(1);return this.currentPoint.copy(F),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class tg extends xD{constructor(e){super(e),this.uuid=Nh(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,s=this.holes.length;r<s;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const s=e.holes[t];this.holes.push((new xD).fromJSON(s))}return this}}function E5(n,e,t,r,s){let o,u;if(s===function loe(n,e,t,r){let s=0;for(let o=e,u=t-r;o<t;o+=r)s+=(n[u]-n[o])*(n[o+1]+n[u+1]),u=o;return s}(n,e,t,r)>0)for(o=e;o<t;o+=r)u=A5(o,n[o],n[o+1],u);else for(o=t-r;o>=e;o-=r)u=A5(o,n[o],n[o+1],u);return u&&wD(u,u.next)&&(BM(u),u=u.next),u}function V_(n,e){if(!n)return n;e||(e=n);let r,t=n;do{if(r=!1,t.steiner||!wD(t,t.next)&&0!==Cl(t.prev,t,t.next))t=t.next;else{if(BM(t),t=e=t.prev,t===t.next)break;r=!0}}while(r||t!==e);return e}function OM(n,e,t,r,s,o,u){if(!n)return;!u&&o&&function noe(n,e,t,r){let s=n;do{null===s.z&&(s.z=oL(s.x,s.y,e,t,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==n);s.prevZ.nextZ=null,s.prevZ=null,function ioe(n){let e,t,r,s,o,u,m,w,T=1;do{for(t=n,n=null,o=null,u=0;t;){for(u++,r=t,m=0,e=0;e<T&&(m++,r=r.nextZ,r);e++);for(w=T;m>0||w>0&&r;)0!==m&&(0===w||!r||t.z<=r.z)?(s=t,t=t.nextZ,m--):(s=r,r=r.nextZ,w--),o?o.nextZ=s:n=s,s.prevZ=o,o=s;t=r}o.nextZ=null,T*=2}while(u>1)}(s)}(n,r,s,o);let w,T,m=n;for(;n.prev!==n.next;)if(w=n.prev,T=n.next,o?Yse(n,r,s,o):Zse(n))e.push(w.i/t),e.push(n.i/t),e.push(T.i/t),BM(n),n=T.next,m=T.next;else if((n=T)===m){u?1===u?OM(n=Xse(V_(n),e,t),e,t,r,s,o,2):2===u&&Jse(n,e,t,r,s,o):OM(V_(n),e,t,r,s,o,1);break}}function Zse(n){const e=n.prev,t=n,r=n.next;if(Cl(e,t,r)>=0)return!1;let s=n.next.next;for(;s!==n.prev;){if(fx(e.x,e.y,t.x,t.y,r.x,r.y,s.x,s.y)&&Cl(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function Yse(n,e,t,r){const s=n.prev,o=n,u=n.next;if(Cl(s,o,u)>=0)return!1;const T=s.x>o.x?s.x>u.x?s.x:u.x:o.x>u.x?o.x:u.x,F=s.y>o.y?s.y>u.y?s.y:u.y:o.y>u.y?o.y:u.y,N=oL(s.x<o.x?s.x<u.x?s.x:u.x:o.x<u.x?o.x:u.x,s.y<o.y?s.y<u.y?s.y:u.y:o.y<u.y?o.y:u.y,e,t,r),Z=oL(T,F,e,t,r);let Q=n.prevZ,le=n.nextZ;for(;Q&&Q.z>=N&&le&&le.z<=Z;){if(Q!==n.prev&&Q!==n.next&&fx(s.x,s.y,o.x,o.y,u.x,u.y,Q.x,Q.y)&&Cl(Q.prev,Q,Q.next)>=0||(Q=Q.prevZ,le!==n.prev&&le!==n.next&&fx(s.x,s.y,o.x,o.y,u.x,u.y,le.x,le.y)&&Cl(le.prev,le,le.next)>=0))return!1;le=le.nextZ}for(;Q&&Q.z>=N;){if(Q!==n.prev&&Q!==n.next&&fx(s.x,s.y,o.x,o.y,u.x,u.y,Q.x,Q.y)&&Cl(Q.prev,Q,Q.next)>=0)return!1;Q=Q.prevZ}for(;le&&le.z<=Z;){if(le!==n.prev&&le!==n.next&&fx(s.x,s.y,o.x,o.y,u.x,u.y,le.x,le.y)&&Cl(le.prev,le,le.next)>=0)return!1;le=le.nextZ}return!0}function Xse(n,e,t){let r=n;do{const s=r.prev,o=r.next.next;!wD(s,o)&&T5(s,r,r.next,o)&&NM(s,o)&&NM(o,s)&&(e.push(s.i/t),e.push(r.i/t),e.push(o.i/t),BM(r),BM(r.next),r=n=o),r=r.next}while(r!==n);return V_(r)}function Jse(n,e,t,r,s,o){let u=n;do{let m=u.next.next;for(;m!==u.prev;){if(u.i!==m.i&&soe(u,m)){let w=D5(u,m);return u=V_(u,u.next),w=V_(w,w.next),OM(u,e,t,r,s,o),void OM(w,e,t,r,s,o)}m=m.next}u=u.next}while(u!==n)}function Qse(n,e){return n.x-e.x}function $se(n,e){if(e=function eoe(n,e){let t=e;const r=n.x,s=n.y;let u,o=-1/0;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const Z=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(Z<=r&&Z>o){if(o=Z,Z===r){if(s===t.y)return t;if(s===t.next.y)return t.next}u=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!u)return null;if(r===o)return u;const m=u,w=u.x,T=u.y;let N,F=1/0;t=u;do{r>=t.x&&t.x>=w&&r!==t.x&&fx(s<T?r:o,s,w,T,s<T?o:r,s,t.x,t.y)&&(N=Math.abs(s-t.y)/(r-t.x),NM(t,n)&&(N<F||N===F&&(t.x>u.x||t.x===u.x&&toe(u,t)))&&(u=t,F=N)),t=t.next}while(t!==m);return u}(n,e),e){const t=D5(e,n);V_(e,e.next),V_(t,t.next)}}function toe(n,e){return Cl(n.prev,n,e.prev)<0&&Cl(e.next,n,n.next)<0}function oL(n,e,t,r,s){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-t)*s)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*s)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function roe(n){let e=n,t=n;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==n);return t}function fx(n,e,t,r,s,o,u,m){return(s-u)*(e-m)-(n-u)*(o-m)>=0&&(n-u)*(r-m)-(t-u)*(e-m)>=0&&(t-u)*(o-m)-(s-u)*(r-m)>=0}function soe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function ooe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&T5(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}(n,e)&&(NM(n,e)&&NM(e,n)&&function aoe(n,e){let t=n,r=!1;const s=(n.x+e.x)/2,o=(n.y+e.y)/2;do{t.y>o!=t.next.y>o&&t.next.y!==t.y&&s<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==n);return r}(n,e)&&(Cl(n.prev,n,e.prev)||Cl(n,e.prev,e))||wD(n,e)&&Cl(n.prev,n,n.next)>0&&Cl(e.prev,e,e.next)>0)}function Cl(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function wD(n,e){return n.x===e.x&&n.y===e.y}function T5(n,e,t,r){const s=CD(Cl(n,e,t)),o=CD(Cl(n,e,r)),u=CD(Cl(t,r,n)),m=CD(Cl(t,r,e));return!!(s!==o&&u!==m||0===s&&MD(n,t,e)||0===o&&MD(n,r,e)||0===u&&MD(t,n,r)||0===m&&MD(t,e,r))}function MD(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function CD(n){return n>0?1:n<0?-1:0}function NM(n,e){return Cl(n.prev,n,n.next)<0?Cl(n,e,n.next)>=0&&Cl(n,n.prev,e)>=0:Cl(n,e,n.prev)<0||Cl(n,n.next,e)<0}function D5(n,e){const t=new aL(n.i,n.x,n.y),r=new aL(e.i,e.x,e.y),s=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=s,s.prev=t,r.next=t,t.prev=r,o.next=r,r.prev=o,r}function A5(n,e,t,r){const s=new aL(n,e,t);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function BM(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function aL(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class ng{static area(e){const t=e.length;let r=0;for(let s=t-1,o=0;o<t;s=o++)r+=e[s].x*e[o].y-e[o].x*e[s].y;return.5*r}static isClockWise(e){return ng.area(e)<0}static triangulateShape(e,t){const r=[],s=[],o=[];I5(e),R5(r,e);let u=e.length;t.forEach(I5);for(let w=0;w<t.length;w++)s.push(u),u+=t[w].length,R5(r,t[w]);const m=function(n,e,t=2){const r=e&&e.length,s=r?e[0]*t:n.length;let o=E5(n,0,s,t,!0);const u=[];if(!o||o.next===o.prev)return u;let m,w,T,F,N,Z,Q;if(r&&(o=function Kse(n,e,t,r){const s=[];let o,u,m,w,T;for(o=0,u=e.length;o<u;o++)m=e[o]*r,w=o<u-1?e[o+1]*r:n.length,T=E5(n,m,w,r,!1),T===T.next&&(T.steiner=!0),s.push(roe(T));for(s.sort(Qse),o=0;o<s.length;o++)$se(s[o],t),t=V_(t,t.next);return t}(n,e,o,t)),n.length>80*t){m=T=n[0],w=F=n[1];for(let le=t;le<s;le+=t)N=n[le],Z=n[le+1],N<m&&(m=N),Z<w&&(w=Z),N>T&&(T=N),Z>F&&(F=Z);Q=Math.max(T-m,F-w),Q=0!==Q?1/Q:0}return OM(o,u,t,m,w,Q),u}(r,s);for(let w=0;w<m.length;w+=3)o.push(m.slice(w,w+3));return o}}function I5(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function R5(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class U_ extends ps{constructor(e=new tg([new ui(.5,.5),new ui(-.5,.5),new ui(-.5,-.5),new ui(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,s=[],o=[];for(let m=0,w=e.length;m<w;m++)u(e[m]);function u(m){const w=[],T=void 0!==t.curveSegments?t.curveSegments:12,F=void 0!==t.steps?t.steps:1;let N=void 0!==t.depth?t.depth:1,Z=void 0===t.bevelEnabled||t.bevelEnabled,Q=void 0!==t.bevelThickness?t.bevelThickness:.2,le=void 0!==t.bevelSize?t.bevelSize:Q-.1,_e=void 0!==t.bevelOffset?t.bevelOffset:0,xe=void 0!==t.bevelSegments?t.bevelSegments:3;const fe=t.extrudePath,ue=void 0!==t.UVGenerator?t.UVGenerator:coe;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),N=t.amount);let Ne,Ye,st,ht,Et,Re=!1;fe&&(Ne=fe.getSpacedPoints(F),Re=!0,Z=!1,Ye=fe.computeFrenetFrames(F,!1),st=new ct,ht=new ct,Et=new ct),Z||(xe=0,Q=0,le=0,_e=0);const hn=m.extractPoints(T);let Kt=hn.shape;const We=hn.holes;if(!ng.isClockWise(Kt)){Kt=Kt.reverse();for(let Qn=0,Fi=We.length;Qn<Fi;Qn++){const Bi=We[Qn];ng.isClockWise(Bi)&&(We[Qn]=Bi.reverse())}}const Ht=ng.triangulateShape(Kt,We),it=Kt;for(let Qn=0,Fi=We.length;Qn<Fi;Qn++)Kt=Kt.concat(We[Qn]);function kt(Qn,Fi,Bi){return Fi||console.error("THREE.ExtrudeGeometry: vec does not exist"),Fi.clone().multiplyScalar(Bi).add(Qn)}const et=Kt.length,bt=Ht.length;function Gt(Qn,Fi,Bi){let br,ar,Ti;const xr=Qn.x-Fi.x,no=Qn.y-Fi.y,Eo=Bi.x-Qn.x,wa=Bi.y-Qn.y,St=xr*xr+no*no;if(Math.abs(xr*wa-no*Eo)>Number.EPSILON){const $n=Math.sqrt(St),Qi=Math.sqrt(Eo*Eo+wa*wa),jr=Fi.x-no/$n,Zn=Fi.y+xr/$n,hr=((Bi.x-wa/Qi-jr)*wa-(Bi.y+Eo/Qi-Zn)*Eo)/(xr*wa-no*Eo);br=jr+xr*hr-Qn.x,ar=Zn+no*hr-Qn.y;const lr=br*br+ar*ar;if(lr<=2)return new ui(br,ar);Ti=Math.sqrt(lr/2)}else{let $n=!1;xr>Number.EPSILON?Eo>Number.EPSILON&&($n=!0):xr<-Number.EPSILON?Eo<-Number.EPSILON&&($n=!0):Math.sign(no)===Math.sign(wa)&&($n=!0),$n?(br=-no,ar=xr,Ti=Math.sqrt(St)):(br=xr,ar=no,Ti=Math.sqrt(St/2))}return new ui(br/Ti,ar/Ti)}const pn=[];for(let Qn=0,Fi=it.length,Bi=Fi-1,br=Qn+1;Qn<Fi;Qn++,Bi++,br++)Bi===Fi&&(Bi=0),br===Fi&&(br=0),pn[Qn]=Gt(it[Qn],it[Bi],it[br]);const Qt=[];let mn,zn=pn.concat();for(let Qn=0,Fi=We.length;Qn<Fi;Qn++){const Bi=We[Qn];mn=[];for(let br=0,ar=Bi.length,Ti=ar-1,xr=br+1;br<ar;br++,Ti++,xr++)Ti===ar&&(Ti=0),xr===ar&&(xr=0),mn[br]=Gt(Bi[br],Bi[Ti],Bi[xr]);Qt.push(mn),zn=zn.concat(mn)}for(let Qn=0;Qn<xe;Qn++){const Fi=Qn/xe,Bi=Q*Math.cos(Fi*Math.PI/2),br=le*Math.sin(Fi*Math.PI/2)+_e;for(let ar=0,Ti=it.length;ar<Ti;ar++){const xr=kt(it[ar],pn[ar],br);yi(xr.x,xr.y,-Bi)}for(let ar=0,Ti=We.length;ar<Ti;ar++){const xr=We[ar];mn=Qt[ar];for(let no=0,Eo=xr.length;no<Eo;no++){const wa=kt(xr[no],mn[no],br);yi(wa.x,wa.y,-Bi)}}}const Ni=le+_e;for(let Qn=0;Qn<et;Qn++){const Fi=Z?kt(Kt[Qn],zn[Qn],Ni):Kt[Qn];Re?(ht.copy(Ye.normals[0]).multiplyScalar(Fi.x),st.copy(Ye.binormals[0]).multiplyScalar(Fi.y),Et.copy(Ne[0]).add(ht).add(st),yi(Et.x,Et.y,Et.z)):yi(Fi.x,Fi.y,0)}for(let Qn=1;Qn<=F;Qn++)for(let Fi=0;Fi<et;Fi++){const Bi=Z?kt(Kt[Fi],zn[Fi],Ni):Kt[Fi];Re?(ht.copy(Ye.normals[Qn]).multiplyScalar(Bi.x),st.copy(Ye.binormals[Qn]).multiplyScalar(Bi.y),Et.copy(Ne[Qn]).add(ht).add(st),yi(Et.x,Et.y,Et.z)):yi(Bi.x,Bi.y,N/F*Qn)}for(let Qn=xe-1;Qn>=0;Qn--){const Fi=Qn/xe,Bi=Q*Math.cos(Fi*Math.PI/2),br=le*Math.sin(Fi*Math.PI/2)+_e;for(let ar=0,Ti=it.length;ar<Ti;ar++){const xr=kt(it[ar],pn[ar],br);yi(xr.x,xr.y,N+Bi)}for(let ar=0,Ti=We.length;ar<Ti;ar++){const xr=We[ar];mn=Qt[ar];for(let no=0,Eo=xr.length;no<Eo;no++){const wa=kt(xr[no],mn[no],br);Re?yi(wa.x,wa.y+Ne[F-1].y,Ne[F-1].x+Bi):yi(wa.x,wa.y,N+Bi)}}}function Es(Qn,Fi){let Bi=Qn.length;for(;--Bi>=0;){const br=Bi;let ar=Bi-1;ar<0&&(ar=Qn.length-1);for(let Ti=0,xr=F+2*xe;Ti<xr;Ti++){const no=et*Ti,Eo=et*(Ti+1);qi(Fi+br+no,Fi+ar+no,Fi+ar+Eo,Fi+br+Eo)}}}function yi(Qn,Fi,Bi){w.push(Qn),w.push(Fi),w.push(Bi)}function ur(Qn,Fi,Bi){rs(Qn),rs(Fi),rs(Bi);const br=s.length/3,ar=ue.generateTopUV(r,s,br-3,br-2,br-1);ss(ar[0]),ss(ar[1]),ss(ar[2])}function qi(Qn,Fi,Bi,br){rs(Qn),rs(Fi),rs(br),rs(Fi),rs(Bi),rs(br);const ar=s.length/3,Ti=ue.generateSideWallUV(r,s,ar-6,ar-3,ar-2,ar-1);ss(Ti[0]),ss(Ti[1]),ss(Ti[3]),ss(Ti[1]),ss(Ti[2]),ss(Ti[3])}function rs(Qn){s.push(w[3*Qn+0]),s.push(w[3*Qn+1]),s.push(w[3*Qn+2])}function ss(Qn){o.push(Qn.x),o.push(Qn.y)}(function gi(){const Qn=s.length/3;if(Z){let Fi=0,Bi=et*Fi;for(let br=0;br<bt;br++){const ar=Ht[br];ur(ar[2]+Bi,ar[1]+Bi,ar[0]+Bi)}Fi=F+2*xe,Bi=et*Fi;for(let br=0;br<bt;br++){const ar=Ht[br];ur(ar[0]+Bi,ar[1]+Bi,ar[2]+Bi)}}else{for(let Fi=0;Fi<bt;Fi++){const Bi=Ht[Fi];ur(Bi[2],Bi[1],Bi[0])}for(let Fi=0;Fi<bt;Fi++){const Bi=Ht[Fi];ur(Bi[0]+et*F,Bi[1]+et*F,Bi[2]+et*F)}}r.addGroup(Qn,s.length/3-Qn,0)})(),function Tn(){const Qn=s.length/3;let Fi=0;Es(it,Fi),Fi+=it.length;for(let Bi=0,br=We.length;Bi<br;Bi++){const ar=We[Bi];Es(ar,Fi),Fi+=ar.length}r.addGroup(Qn,s.length/3-Qn,1)}()}this.setAttribute("position",new Dr(s,3)),this.setAttribute("uv",new Dr(o,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function uoe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,s=n.length;r<s;r++)t.shapes.push(n[r].uuid);else t.shapes.push(n.uuid);return void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const r=[];for(let o=0,u=e.shapes.length;o<u;o++)r.push(t[e.shapes[o]]);const s=e.options.extrudePath;return void 0!==s&&(e.options.extrudePath=(new sL[s.type]).fromJSON(s)),new U_(r,e.options)}}const coe={generateTopUV:function(n,e,t,r,s){const m=e[3*r],w=e[3*r+1],T=e[3*s],F=e[3*s+1];return[new ui(e[3*t],e[3*t+1]),new ui(m,w),new ui(T,F)]},generateSideWallUV:function(n,e,t,r,s,o){const u=e[3*t],m=e[3*t+1],w=e[3*t+2],T=e[3*r],F=e[3*r+1],N=e[3*r+2],Z=e[3*s],Q=e[3*s+1],le=e[3*s+2],_e=e[3*o],xe=e[3*o+1],fe=e[3*o+2];return Math.abs(m-F)<Math.abs(u-T)?[new ui(u,1-w),new ui(T,1-N),new ui(Z,1-le),new ui(_e,1-fe)]:[new ui(m,1-w),new ui(F,1-N),new ui(Q,1-le),new ui(xe,1-fe)]}};class zM extends ps{constructor(e=new tg([new ui(0,.5),new ui(-.5,-.5),new ui(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],s=[],o=[],u=[];let m=0,w=0;if(!1===Array.isArray(e))T(e);else for(let F=0;F<e.length;F++)T(e[F]),this.addGroup(m,w,F),m+=w,w=0;function T(F){const N=s.length/3,Z=F.extractPoints(t);let Q=Z.shape;const le=Z.holes;!1===ng.isClockWise(Q)&&(Q=Q.reverse());for(let xe=0,fe=le.length;xe<fe;xe++){const ue=le[xe];!0===ng.isClockWise(ue)&&(le[xe]=ue.reverse())}const _e=ng.triangulateShape(Q,le);for(let xe=0,fe=le.length;xe<fe;xe++)Q=Q.concat(le[xe]);for(let xe=0,fe=Q.length;xe<fe;xe++){const ue=Q[xe];s.push(ue.x,ue.y,0),o.push(0,0,1),u.push(ue.x,ue.y)}for(let xe=0,fe=_e.length;xe<fe;xe++){const ue=_e[xe];r.push(ue[0]+N,ue[1]+N,ue[2]+N),w+=3}}this.setIndex(r),this.setAttribute("position",new Dr(s,3)),this.setAttribute("normal",new Dr(o,3)),this.setAttribute("uv",new Dr(u,2))}toJSON(){const e=super.toJSON();return function hoe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++)e.shapes.push(n[t].uuid);else e.shapes.push(n.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++)r.push(t[e.shapes[s]]);return new zM(r,e.curveSegments)}}(class F5 extends ou{constructor(e){super(),this.type="ShadowMaterial",this.color=new rr(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}).prototype.isShadowMaterial=!0;class lL extends ou{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new rr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ui(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}lL.prototype.isMeshStandardMaterial=!0;(class O5 extends lL{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ui(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return su(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new rr(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new rr(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new rr(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}).prototype.isMeshPhysicalMaterial=!0;(class N5 extends ou{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new rr(16777215),this.specular=new rr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ui(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}).prototype.isMeshPhongMaterial=!0;(class B5 extends ou{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new rr(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ui(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshToonMaterial=!0;(class H5 extends ou{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ui(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}).prototype.isMeshNormalMaterial=!0;(class z5 extends ou{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new rr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshLambertMaterial=!0;(class V5 extends ou{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new rr(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ui(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class U5 extends Hc{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}).prototype.isLineDashedMaterial=!0;const dl={arraySlice:function(n,e,t){return dl.isTypedArray(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){const t=n.length,r=new Array(t);for(let s=0;s!==t;++s)r[s]=s;return r.sort(function e(s,o){return n[s]-n[o]}),r},sortedArray:function(n,e,t){const r=n.length,s=new n.constructor(r);for(let o=0,u=0;u!==r;++o){const m=t[o]*e;for(let w=0;w!==e;++w)s[u++]=n[m+w]}return s},flattenJSON:function(n,e,t,r){let s=1,o=n[0];for(;void 0!==o&&void 0===o[r];)o=n[s++];if(void 0===o)return;let u=o[r];if(void 0!==u)if(Array.isArray(u))do{u=o[r],void 0!==u&&(e.push(o.time),t.push.apply(t,u)),o=n[s++]}while(void 0!==o);else if(void 0!==u.toArray)do{u=o[r],void 0!==u&&(e.push(o.time),u.toArray(t,t.length)),o=n[s++]}while(void 0!==o);else do{u=o[r],void 0!==u&&(e.push(o.time),t.push(u)),o=n[s++]}while(void 0!==o)},subclip:function(n,e,t,r,s=30){const o=n.clone();o.name=e;const u=[];for(let w=0;w<o.tracks.length;++w){const T=o.tracks[w],F=T.getValueSize(),N=[],Z=[];for(let Q=0;Q<T.times.length;++Q){const le=T.times[Q]*s;if(!(le<t||le>=r)){N.push(T.times[Q]);for(let _e=0;_e<F;++_e)Z.push(T.values[Q*F+_e])}}0!==N.length&&(T.times=dl.convertArray(N,T.times.constructor),T.values=dl.convertArray(Z,T.values.constructor),u.push(T))}o.tracks=u;let m=1/0;for(let w=0;w<o.tracks.length;++w)m>o.tracks[w].times[0]&&(m=o.tracks[w].times[0]);for(let w=0;w<o.tracks.length;++w)o.tracks[w].shift(-1*m);return o.resetDuration(),o},makeClipAdditive:function(n,e=0,t=n,r=30){r<=0&&(r=30);const s=t.tracks.length,o=e/r;for(let u=0;u<s;++u){const m=t.tracks[u],w=m.ValueTypeName;if("bool"===w||"string"===w)continue;const T=n.tracks.find(function(fe){return fe.name===m.name&&fe.ValueTypeName===w});if(void 0===T)continue;let F=0;const N=m.getValueSize();m.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(F=N/3);let Z=0;const Q=T.getValueSize();T.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Z=Q/3);const le=m.times.length-1;let _e;if(o<=m.times[0])_e=dl.arraySlice(m.values,F,N-F);else if(o>=m.times[le]){const fe=le*N+F;_e=dl.arraySlice(m.values,fe,fe+N-F)}else{const fe=m.createInterpolant(),ue=F,Ne=N-F;fe.evaluate(o),_e=dl.arraySlice(fe.resultBuffer,ue,Ne)}"quaternion"===w&&(new bu).fromArray(_e).normalize().conjugate().toArray(_e);const xe=T.times.length;for(let fe=0;fe<xe;++fe){const ue=fe*Q+Z;if("quaternion"===w)bu.multiplyQuaternionsFlat(T.values,ue,_e,0,T.values,ue);else{const Ne=Q-2*Z;for(let Re=0;Re<Ne;++Re)T.values[ue+Re]-=_e[Re]}}}return n.blendMode=2501,n}};class G_{constructor(e,t,r,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==s?s:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,s=t[r],o=t[r-1];e:{t:{let u;n:{i:if(!(e<s)){for(let m=r+2;;){if(void 0===s){if(e<o)break i;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,o)}if(r===m)break;if(o=s,s=t[++r],e<s)break t}u=t.length;break n}if(e>=o)break e;{const m=t[1];e<m&&(r=2,o=m);for(let w=r-2;;){if(void 0===o)return this._cachedIndex=0,this.beforeStart_(0,e,s);if(r===w)break;if(s=o,o=t[--r-1],e>=o)break t}u=r,r=0}}for(;r<u;){const m=r+u>>>1;e<t[m]?u=m:r=m+1}if(s=t[r],o=t[r-1],void 0===o)return this._cachedIndex=0,this.beforeStart_(0,e,s);if(void 0===s)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,o,e)}this._cachedIndex=r,this.intervalChanged_(r,o,s)}return this.interpolate_(r,o,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,s=this.valueSize,o=e*s;for(let u=0;u!==s;++u)t[u]=r[o+u];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}G_.prototype.beforeStart_=G_.prototype.copySampleValue_,G_.prototype.afterEnd_=G_.prototype.copySampleValue_;class foe extends G_{constructor(e,t,r,s){super(e,t,r,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:P0,endingEnd:P0}}intervalChanged_(e,t,r){const s=this.parameterPositions;let o=e-2,u=e+1,m=s[o],w=s[u];if(void 0===m)switch(this.getSettings_().endingStart){case L0:o=e,m=2*t-r;break;case 2402:o=s.length-2,m=t+s[o]-s[o+1];break;default:o=e,m=r}if(void 0===w)switch(this.getSettings_().endingEnd){case L0:u=e,w=2*r-t;break;case 2402:u=1,w=r+s[1]-s[0];break;default:u=e-1,w=t}const T=.5*(r-t),F=this.valueSize;this._weightPrev=T/(t-m),this._weightNext=T/(w-r),this._offsetPrev=o*F,this._offsetNext=u*F}interpolate_(e,t,r,s){const o=this.resultBuffer,u=this.sampleValues,m=this.valueSize,w=e*m,T=w-m,F=this._offsetPrev,N=this._offsetNext,Z=this._weightPrev,Q=this._weightNext,le=(r-t)/(s-t),_e=le*le,xe=_e*le,fe=-Z*xe+2*Z*_e-Z*le,ue=(1+Z)*xe+(-1.5-2*Z)*_e+(-.5+Z)*le+1,Ne=(-1-Q)*xe+(1.5+Q)*_e+.5*le,Re=Q*xe-Q*_e;for(let Ye=0;Ye!==m;++Ye)o[Ye]=fe*u[F+Ye]+ue*u[T+Ye]+Ne*u[w+Ye]+Re*u[N+Ye];return o}}class G5 extends G_{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e,t,r,s){const o=this.resultBuffer,u=this.sampleValues,m=this.valueSize,w=e*m,T=w-m,F=(r-t)/(s-t),N=1-F;for(let Z=0;Z!==m;++Z)o[Z]=u[T+Z]*N+u[w+Z]*F;return o}}class poe extends G_{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class Cp{constructor(e,t,r,s){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=dl.convertArray(t,this.TimeBufferType),this.values=dl.convertArray(r,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:dl.convertArray(e.times,Array),values:dl.convertArray(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(r.interpolation=s)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new poe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new G5(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new foe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let r=0,s=t.length;r!==s;++r)t[r]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let r=0,s=t.length;r!==s;++r)t[r]*=e}return this}trim(e,t){const r=this.times,s=r.length;let o=0,u=s-1;for(;o!==s&&r[o]<e;)++o;for(;-1!==u&&r[u]>t;)--u;if(++u,0!==o||u!==s){o>=u&&(u=Math.max(u,1),o=u-1);const m=this.getValueSize();this.times=dl.arraySlice(r,o,u),this.values=dl.arraySlice(this.values,o*m,u*m)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,s=this.values,o=r.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let u=null;for(let m=0;m!==o;m++){const w=r[m];if("number"==typeof w&&isNaN(w)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,m,w),e=!1;break}if(null!==u&&u>w){console.error("THREE.KeyframeTrack: Out of order keys.",this,m,w,u),e=!1;break}u=w}if(void 0!==s&&dl.isTypedArray(s))for(let m=0,w=s.length;m!==w;++m){const T=s[m];if(isNaN(T)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,m,T),e=!1;break}}return e}optimize(){const e=dl.arraySlice(this.times),t=dl.arraySlice(this.values),r=this.getValueSize(),s=2302===this.getInterpolation(),o=e.length-1;let u=1;for(let m=1;m<o;++m){let w=!1;const T=e[m];if(T!==e[m+1]&&(1!==m||T!==e[0]))if(s)w=!0;else{const N=m*r,Z=N-r,Q=N+r;for(let le=0;le!==r;++le){const _e=t[N+le];if(_e!==t[Z+le]||_e!==t[Q+le]){w=!0;break}}}if(w){if(m!==u){e[u]=e[m];const N=m*r,Z=u*r;for(let Q=0;Q!==r;++Q)t[Z+Q]=t[N+Q]}++u}}if(o>0){e[u]=e[o];for(let m=o*r,w=u*r,T=0;T!==r;++T)t[w+T]=t[m+T];++u}return u!==e.length?(this.times=dl.arraySlice(e,0,u),this.values=dl.arraySlice(t,0,u*r)):(this.times=e,this.values=t),this}clone(){const e=dl.arraySlice(this.times,0),t=dl.arraySlice(this.values,0),s=new(0,this.constructor)(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}Cp.prototype.TimeBufferType=Float32Array,Cp.prototype.ValueBufferType=Float32Array,Cp.prototype.DefaultInterpolation=2301;class px extends Cp{}px.prototype.ValueTypeName="bool",px.prototype.ValueBufferType=Array,px.prototype.DefaultInterpolation=2300,px.prototype.InterpolantFactoryMethodLinear=void 0,px.prototype.InterpolantFactoryMethodSmooth=void 0;class W5 extends Cp{}W5.prototype.ValueTypeName="color";class kD extends Cp{}kD.prototype.ValueTypeName="number";class moe extends G_{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e,t,r,s){const o=this.resultBuffer,u=this.sampleValues,m=this.valueSize,w=(r-t)/(s-t);let T=e*m;for(let F=T+m;T!==F;T+=4)bu.slerpFlat(o,0,u,T-m,u,T,w);return o}}class UM extends Cp{InterpolantFactoryMethodLinear(e){return new moe(this.times,this.values,this.getValueSize(),e)}}UM.prototype.ValueTypeName="quaternion",UM.prototype.DefaultInterpolation=2301,UM.prototype.InterpolantFactoryMethodSmooth=void 0;class mx extends Cp{}mx.prototype.ValueTypeName="string",mx.prototype.ValueBufferType=Array,mx.prototype.DefaultInterpolation=2300,mx.prototype.InterpolantFactoryMethodLinear=void 0,mx.prototype.InterpolantFactoryMethodSmooth=void 0;class PD extends Cp{}PD.prototype.ValueTypeName="vector";class LD{constructor(e,t=-1,r,s=2500){this.name=e,this.tracks=r,this.duration=t,this.blendMode=s,this.uuid=Nh(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,s=1/(e.fps||1);for(let u=0,m=r.length;u!==m;++u)t.push(_oe(r[u]).scale(s));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],r=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,u=r.length;o!==u;++o)t.push(Cp.toJSON(r[o]));return s}static CreateFromMorphTargetSequence(e,t,r,s){const o=t.length,u=[];for(let m=0;m<o;m++){let w=[],T=[];w.push((m+o-1)%o,m,(m+1)%o),T.push(0,1,0);const F=dl.getKeyframeOrder(w);w=dl.sortedArray(w,1,F),T=dl.sortedArray(T,1,F),!s&&0===w[0]&&(w.push(o),T.push(T[0])),u.push(new kD(".morphTargetInfluences["+t[m].name+"]",w,T).scale(1/r))}return new this(e,-1,u)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const s=e;r=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<r.length;s++)if(r[s].name===t)return r[s];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const s={},o=/^([\w-]*?)([\d]+)$/;for(let m=0,w=e.length;m<w;m++){const T=e[m],F=T.name.match(o);if(F&&F.length>1){const N=F[1];let Z=s[N];Z||(s[N]=Z=[]),Z.push(T)}}const u=[];for(const m in s)u.push(this.CreateFromMorphTargetSequence(m,s[m],t,r));return u}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(N,Z,Q,le,_e){if(0!==Q.length){const xe=[],fe=[];dl.flattenJSON(Q,xe,fe,le),0!==xe.length&&_e.push(new N(Z,xe,fe))}},s=[],o=e.name||"default",u=e.fps||30,m=e.blendMode;let w=e.length||-1;const T=e.hierarchy||[];for(let N=0;N<T.length;N++){const Z=T[N].keys;if(Z&&0!==Z.length)if(Z[0].morphTargets){const Q={};let le;for(le=0;le<Z.length;le++)if(Z[le].morphTargets)for(let _e=0;_e<Z[le].morphTargets.length;_e++)Q[Z[le].morphTargets[_e]]=-1;for(const _e in Q){const xe=[],fe=[];for(let ue=0;ue!==Z[le].morphTargets.length;++ue){const Ne=Z[le];xe.push(Ne.time),fe.push(Ne.morphTarget===_e?1:0)}s.push(new kD(".morphTargetInfluence["+_e+"]",xe,fe))}w=Q.length*(u||1)}else{const Q=".bones["+t[N].name+"]";r(PD,Q+".position",Z,"pos",s),r(UM,Q+".quaternion",Z,"rot",s),r(PD,Q+".scale",Z,"scl",s)}}return 0===s.length?null:new this(o,w,s,m)}resetDuration(){let t=0;for(let r=0,s=this.tracks.length;r!==s;++r){const o=this.tracks[r];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function _oe(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function goe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return kD;case"vector":case"vector2":case"vector3":case"vector4":return PD;case"color":return W5;case"quaternion":return UM;case"bool":case"boolean":return px;case"string":return mx}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],r=[];dl.flattenJSON(n.keys,t,r,"value"),n.times=t,n.values=r}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const gx={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};const voe=new class q5{constructor(e,t,r){const s=this;let w,o=!1,u=0,m=0;const T=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(F){m++,!1===o&&void 0!==s.onStart&&s.onStart(F,u,m),o=!0},this.itemEnd=function(F){u++,void 0!==s.onProgress&&s.onProgress(F,u,m),u===m&&(o=!1,void 0!==s.onLoad&&s.onLoad())},this.itemError=function(F){void 0!==s.onError&&s.onError(F)},this.resolveURL=function(F){return w?w(F):F},this.setURLModifier=function(F){return w=F,this},this.addHandler=function(F,N){return T.push(F,N),this},this.removeHandler=function(F){const N=T.indexOf(F);return-1!==N&&T.splice(N,2),this},this.getHandler=function(F){for(let N=0,Z=T.length;N<Z;N+=2){const Q=T[N],le=T[N+1];if(Q.global&&(Q.lastIndex=0),Q.test(F))return le}return null}}};class W_{constructor(e){this.manager=void 0!==e?e:voe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(s,o){r.load(e,s,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const ig={};class rg extends W_{constructor(e){super(e)}load(e,t,r,s){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const o=gx.get(e);if(void 0!==o)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(void 0!==ig[e])return void ig[e].push({onLoad:t,onProgress:r,onError:s});ig[e]=[],ig[e].push({onLoad:t,onProgress:r,onError:s});const u=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),m=this.mimeType,w=this.responseType;fetch(u).then(T=>{if(200===T.status||0===T.status){if(0===T.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===T.body.getReader)return T;const F=ig[e],N=T.body.getReader(),Z=T.headers.get("Content-Length"),Q=Z?parseInt(Z):0,le=0!==Q;let _e=0;const xe=new ReadableStream({start(fe){!function ue(){N.read().then(({done:Ne,value:Re})=>{if(Ne)fe.close();else{_e+=Re.byteLength;const Ye=new ProgressEvent("progress",{lengthComputable:le,loaded:_e,total:Q});for(let st=0,ht=F.length;st<ht;st++){const Et=F[st];Et.onProgress&&Et.onProgress(Ye)}fe.enqueue(Re),ue()}})}()}});return new Response(xe)}throw Error(`fetch for "${T.url}" responded with ${T.status}: ${T.statusText}`)}).then(T=>{switch(w){case"arraybuffer":return T.arrayBuffer();case"blob":return T.blob();case"document":return T.text().then(F=>(new DOMParser).parseFromString(F,m));case"json":return T.json();default:if(void 0===m)return T.text();{const N=/charset="?([^;"\s]*)"?/i.exec(m),Z=N&&N[1]?N[1].toLowerCase():void 0,Q=new TextDecoder(Z);return T.arrayBuffer().then(le=>Q.decode(le))}}}).then(T=>{gx.add(e,T);const F=ig[e];delete ig[e];for(let N=0,Z=F.length;N<Z;N++){const Q=F[N];Q.onLoad&&Q.onLoad(T)}}).catch(T=>{const F=ig[e];if(void 0===F)throw this.manager.itemError(e),T;delete ig[e];for(let N=0,Z=F.length;N<Z;N++){const Q=F[N];Q.onError&&Q.onError(T)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class FD extends W_{constructor(e){super(e)}load(e,t,r,s){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,u=gx.get(e);if(void 0!==u)return o.manager.itemStart(e),setTimeout(function(){t&&t(u),o.manager.itemEnd(e)},0),u;const m=xM("img");function w(){F(),gx.add(e,this),t&&t(this),o.manager.itemEnd(e)}function T(N){F(),s&&s(N),o.manager.itemError(e),o.manager.itemEnd(e)}function F(){m.removeEventListener("load",w,!1),m.removeEventListener("error",T,!1)}return m.addEventListener("load",w,!1),m.addEventListener("error",T,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(m.crossOrigin=this.crossOrigin),o.manager.itemStart(e),m.src=e,m}}class yoe extends W_{constructor(e){super(e)}load(e,t,r,s){const o=new SM,u=new FD(this.manager);u.setCrossOrigin(this.crossOrigin),u.setPath(this.path);let m=0;function w(T){u.load(e[T],function(F){o.images[T]=F,m++,6===m&&(o.needsUpdate=!0,t&&t(o))},void 0,s)}for(let T=0;T<e.length;++T)w(T);return o}}class xoe extends W_{constructor(e){super(e)}load(e,t,r,s){const o=new Ec,u=new FD(this.manager);return u.setCrossOrigin(this.crossOrigin),u.setPath(this.path),u.load(e,function(m){o.image=m,o.needsUpdate=!0,void 0!==t&&t(o)},r,s),o}}class Sp extends ra{constructor(e,t=1){super(),this.type="Light",this.color=new rr(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Sp.prototype.isLight=!0;(class j5 extends Sp{constructor(e,t,r){super(e,r),this.type="HemisphereLight",this.position.copy(ra.DefaultUp),this.updateMatrix(),this.groundColor=new rr(t)}copy(e){return Sp.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const Z5=new Nr,Y5=new ct,X5=new ct;class cL{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ui(512,512),this.map=null,this.mapPass=null,this.matrix=new Nr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new XT,this._frameExtents=new ui(1,1),this._viewportCount=1,this._viewports=[new xa(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;Y5.setFromMatrixPosition(e.matrixWorld),t.position.copy(Y5),X5.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(X5),t.updateMatrixWorld(),Z5.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Z5),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class J5 extends cL{constructor(){super(new Bc(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,r=2*yM*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(r!==t.fov||s!==t.aspect||o!==t.far)&&(t.fov=r,t.aspect=s,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}J5.prototype.isSpotLightShadow=!0;(class K5 extends Sp{constructor(e,t,r=0,s=Math.PI/3,o=0,u=1){super(e,t),this.type="SpotLight",this.position.copy(ra.DefaultUp),this.updateMatrix(),this.target=new ra,this.distance=r,this.angle=s,this.penumbra=o,this.decay=u,this.shadow=new J5}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isSpotLight=!0;const Q5=new Nr,GM=new ct,uL=new ct;class $5 extends cL{constructor(){super(new Bc(90,1,.5,500)),this._frameExtents=new ui(4,2),this._viewportCount=6,this._viewports=[new xa(2,1,1,1),new xa(0,1,1,1),new xa(3,1,1,1),new xa(1,1,1,1),new xa(3,0,1,1),new xa(1,0,1,1)],this._cubeDirections=[new ct(1,0,0),new ct(-1,0,0),new ct(0,0,1),new ct(0,0,-1),new ct(0,1,0),new ct(0,-1,0)],this._cubeUps=[new ct(0,1,0),new ct(0,1,0),new ct(0,1,0),new ct(0,1,0),new ct(0,0,1),new ct(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,s=this.matrix,o=e.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),GM.setFromMatrixPosition(e.matrixWorld),r.position.copy(GM),uL.copy(r.position),uL.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(uL),r.updateMatrixWorld(),s.makeTranslation(-GM.x,-GM.y,-GM.z),Q5.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Q5)}}$5.prototype.isPointLightShadow=!0;(class eU extends Sp{constructor(e,t,r=0,s=1){super(e,t),this.type="PointLight",this.distance=r,this.decay=s,this.shadow=new $5}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}).prototype.isPointLight=!0;class tU extends cL{constructor(){super(new JT(-5,5,5,-5,.5,500))}}tU.prototype.isDirectionalLightShadow=!0;(class nU extends Sp{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(ra.DefaultUp),this.updateMatrix(),this.target=new ra,this.shadow=new tU}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isDirectionalLight=!0;class hL extends Sp{constructor(e,t){super(e,t),this.type="AmbientLight"}}hL.prototype.isAmbientLight=!0;(class iU extends Sp{constructor(e,t,r=10,s=10){super(e,t),this.type="RectAreaLight",this.width=r,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class rU{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ct)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,s=e.y,o=e.z,u=this.coefficients;return t.copy(u[0]).multiplyScalar(.282095),t.addScaledVector(u[1],.488603*s),t.addScaledVector(u[2],.488603*o),t.addScaledVector(u[3],.488603*r),t.addScaledVector(u[4],r*s*1.092548),t.addScaledVector(u[5],s*o*1.092548),t.addScaledVector(u[6],.315392*(3*o*o-1)),t.addScaledVector(u[7],r*o*1.092548),t.addScaledVector(u[8],.546274*(r*r-s*s)),t}getIrradianceAt(e,t){const r=e.x,s=e.y,o=e.z,u=this.coefficients;return t.copy(u[0]).multiplyScalar(.886227),t.addScaledVector(u[1],1.023328*s),t.addScaledVector(u[2],1.023328*o),t.addScaledVector(u[3],1.023328*r),t.addScaledVector(u[4],.858086*r*s),t.addScaledVector(u[5],.858086*s*o),t.addScaledVector(u[6],.743125*o*o-.247708),t.addScaledVector(u[7],.858086*r*o),t.addScaledVector(u[8],.429043*(r*r-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let s=0;s<9;s++)r[s].fromArray(e,t+3*s);return this}toArray(e=[],t=0){const r=this.coefficients;for(let s=0;s<9;s++)r[s].toArray(e,t+3*s);return e}static getBasisAt(e,t){const r=e.x,s=e.y,o=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*o,t[3]=.488603*r,t[4]=1.092548*r*s,t[5]=1.092548*s*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*r*o,t[8]=.546274*(r*r-s*s)}}rU.prototype.isSphericalHarmonics3=!0;class OD extends Sp{constructor(e=new rU,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}OD.prototype.isLightProbe=!0;let ND;(class sU extends ps{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0,class Soe extends W_{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,s){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,u=gx.get(e);if(void 0!==u)return o.manager.itemStart(e),setTimeout(function(){t&&t(u),o.manager.itemEnd(e)},0),u;const m={};m.credentials="anonymous"===this.crossOrigin?"same-origin":"include",m.headers=this.requestHeader,fetch(e,m).then(function(w){return w.blob()}).then(function(w){return createImageBitmap(w,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(w){gx.add(e,w),t&&t(w),o.manager.itemEnd(e)}).catch(function(w){s&&s(w),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}.prototype.isImageBitmapLoader=!0;class Eoe extends W_{constructor(e){super(e)}load(e,t,r,s){const o=this,u=new rg(this.manager);u.setResponseType("arraybuffer"),u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(m){try{const w=m.slice(0);(void 0===ND&&(ND=new(window.AudioContext||window.webkitAudioContext)),ND).decodeAudioData(w,function(F){t(F)})}catch(w){s?s(w):console.error(w),o.manager.itemError(e)}},r,s)}}(class Toe extends OD{constructor(e,t,r=1){super(void 0,r);const s=(new rr).set(e),o=(new rr).set(t),u=new ct(s.r,s.g,s.b),m=new ct(o.r,o.g,o.b),w=Math.sqrt(Math.PI),T=w*Math.sqrt(.75);this.sh.coefficients[0].copy(u).add(m).multiplyScalar(w),this.sh.coefficients[1].copy(u).sub(m).multiplyScalar(T)}}).prototype.isHemisphereLightProbe=!0,class Doe extends OD{constructor(e,t=1){super(void 0,t);const r=(new rr).set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class Loe{constructor(e,t,r){let s,o,u;switch(this.binding=e,this.valueSize=r,t){case"quaternion":s=this._slerp,o=this._slerpAdditive,u=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":s=this._select,o=this._select,u=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:s=this._lerp,o=this._lerpAdditive,u=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=o,this._setIdentity=u,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,s=this.valueSize,o=e*s+s;let u=this.cumulativeWeight;if(0===u){for(let m=0;m!==s;++m)r[o+m]=r[m];u=t}else u+=t,this._mixBufferRegion(r,o,0,t/u,s);this.cumulativeWeight=u}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,s=r*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,s=e*t+t,o=this.cumulativeWeight,u=this.cumulativeWeightAdditive,m=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1&&this._mixBufferRegion(r,s,t*this._origIndex,1-o,t),u>0&&this._mixBufferRegionAdditive(r,s,this._addIndex*t,1,t);for(let w=t,T=t+t;w!==T;++w)if(r[w]!==r[w+t]){m.setValue(r,s);break}}saveOriginalState(){const t=this.buffer,r=this.valueSize,s=r*this._origIndex;this.binding.getValue(t,s);for(let o=r,u=s;o!==u;++o)t[o]=t[s+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,s,o){if(s>=.5)for(let u=0;u!==o;++u)e[t+u]=e[r+u]}_slerp(e,t,r,s){bu.slerpFlat(e,t,e,t,e,r,s)}_slerpAdditive(e,t,r,s,o){const u=this._workIndex*o;bu.multiplyQuaternionsFlat(e,u,e,t,e,r),bu.slerpFlat(e,t,e,t,e,u,s)}_lerp(e,t,r,s,o){const u=1-s;for(let m=0;m!==o;++m){const w=t+m;e[w]=e[w]*u+e[r+m]*s}}_lerpAdditive(e,t,r,s,o){for(let u=0;u!==o;++u){const m=t+u;e[m]=e[m]+e[r+u]*s}}}const fL="\\[\\]\\.:\\/",Foe=new RegExp("["+fL+"]","g"),pL="[^"+fL+"]",Ooe="[^"+fL.replace("\\.","")+"]",Noe=/((?:WC+[\/:])*)/.source.replace("WC",pL),Boe=/(WCOD+)?/.source.replace("WCOD",Ooe),Hoe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",pL),zoe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",pL),Voe=new RegExp("^"+Noe+Boe+Hoe+zoe+"$"),Uoe=["material","materials","bones"];class Goe{constructor(e,t,r){const s=r||il.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const s=this._bindings[this._targetGroup.nCachedObjects_];void 0!==s&&s.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=r.length;s!==o;++s)r[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}let il=(()=>{class n{constructor(t,r,s){this.path=r,this.parsedPath=s||n.parseTrackName(r),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,s){return t&&t.isAnimationObjectGroup?new n.Composite(t,r,s):new n(t,r,s)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Foe,"")}static parseTrackName(t){const r=Voe.exec(t);if(!r)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const s={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},o=s.nodeName&&s.nodeName.lastIndexOf(".");if(void 0!==o&&-1!==o){const u=s.nodeName.substring(o+1);-1!==Uoe.indexOf(u)&&(s.nodeName=s.nodeName.substring(0,o),s.objectName=u)}if(null===s.propertyName||0===s.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return s}static findNode(t,r){if(!r||""===r||"."===r||-1===r||r===t.name||r===t.uuid)return t;if(t.skeleton){const s=t.skeleton.getBoneByName(r);if(void 0!==s)return s}if(t.children){const s=function(u){for(let m=0;m<u.length;m++){const w=u[m];if(w.name===r||w.uuid===r)return w;const T=s(w.children);if(T)return T}return null},o=s(t.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){const s=this.resolvedProperty;for(let o=0,u=s.length;o!==u;++o)t[r++]=s[o]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){const s=this.resolvedProperty;for(let o=0,u=s.length;o!==u;++o)s[o]=t[r++]}_setValue_array_setNeedsUpdate(t,r){const s=this.resolvedProperty;for(let o=0,u=s.length;o!==u;++o)s[o]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){const s=this.resolvedProperty;for(let o=0,u=s.length;o!==u;++o)s[o]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node;const r=this.parsedPath,s=r.objectName,o=r.propertyName;let u=r.propertyIndex;if(t||(t=n.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(s){let F=r.objectIndex;switch(s){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let N=0;N<t.length;N++)if(t[N].name===F){F=N;break}break;default:if(void 0===t[s])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[s]}if(void 0!==F){if(void 0===t[F])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[F]}}const m=t[o];if(void 0===m)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+r.nodeName+"."+o+" but it wasn't found.",t);let w=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?w=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(w=this.Versioning.MatrixWorldNeedsUpdate);let T=this.BindingType.Direct;if(void 0!==u){if("morphTargetInfluences"===o){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[u]&&(u=t.morphTargetDictionary[u])}T=this.BindingType.ArrayElement,this.resolvedProperty=m,this.propertyIndex=u}else void 0!==m.fromArray&&void 0!==m.toArray?(T=this.BindingType.HasFromToArray,this.resolvedProperty=m):Array.isArray(m)?(T=this.BindingType.EntireArray,this.resolvedProperty=m):this.propertyName=o;this.getValue=this.GetterByBindingType[T],this.setValue=this.SetterByBindingTypeAndVersioning[T][w]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=Goe,n})();il.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},il.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},il.prototype.GetterByBindingType=[il.prototype._getValue_direct,il.prototype._getValue_array,il.prototype._getValue_arrayElement,il.prototype._getValue_toArray],il.prototype.SetterByBindingTypeAndVersioning=[[il.prototype._setValue_direct,il.prototype._setValue_direct_setNeedsUpdate,il.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[il.prototype._setValue_array,il.prototype._setValue_array_setNeedsUpdate,il.prototype._setValue_array_setMatrixWorldNeedsUpdate],[il.prototype._setValue_arrayElement,il.prototype._setValue_arrayElement_setNeedsUpdate,il.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[il.prototype._setValue_fromArray,il.prototype._setValue_fromArray_setNeedsUpdate,il.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class qoe{constructor(e,t,r=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=s;const o=t.tracks,u=o.length,m=new Array(u),w={endingStart:P0,endingEnd:P0};for(let T=0;T!==u;++T){const F=o[T].createInterpolant(null);m[T]=F,F.settings=w}this._interpolantSettings=w,this._interpolants=m,this._propertyBindings=new Array(u),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const s=this._clip.duration,o=e._clip.duration,m=s/o;e.warp(1,o/s,t),this.warp(m,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const s=this._mixer,o=s.time,u=this.timeScale;let m=this._timeScaleInterpolant;null===m&&(m=s._lendControlInterpolant(),this._timeScaleInterpolant=m);const w=m.parameterPositions,T=m.sampleValues;return w[0]=o,w[1]=o+r,T[0]=e/u,T[1]=t/u,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,s){if(!this.enabled)return void this._updateWeight(e);const o=this._startTime;if(null!==o){const w=(e-o)*r;if(w<0||0===r)return;this._startTime=null,t=r*w}t*=this._updateTimeScale(e);const u=this._updateTime(t),m=this._updateWeight(e);if(m>0){const w=this._interpolants,T=this._propertyBindings;if(2501===this.blendMode)for(let F=0,N=w.length;F!==N;++F)w[F].evaluate(u),T[F].accumulateAdditive(m);else for(let F=0,N=w.length;F!==N;++F)w[F].evaluate(u),T[F].accumulate(s,m)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(null!==r){const s=r.evaluate(e)[0];t*=s,e>r.parameterPositions[1]&&(this.stopFading(),0===s&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;null!==r&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let s=this.time+e,o=this._loopCount;const u=2202===r;if(0===e)return-1===o?s:u&&1==(1&o)?t-s:s;if(2200===r){-1===o&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else{if(!(s<0)){this.time=s;break e}s=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===o&&(e>=0?(o=0,this._setEndings(!0,0===this.repetitions,u)):this._setEndings(0===this.repetitions,!0,u)),s>=t||s<0){const m=Math.floor(s/t);s-=t*m,o+=Math.abs(m);const w=this.repetitions-o;if(w<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===w){const T=e<0;this._setEndings(T,!T,u)}else this._setEndings(!1,!1,u);this._loopCount=o,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:m})}}else this.time=s;if(u&&1==(1&o))return t-s}return s}_setEndings(e,t,r){const s=this._interpolantSettings;r?(s.endingStart=L0,s.endingEnd=L0):(s.endingStart=e?this.zeroSlopeAtStart?L0:P0:2402,s.endingEnd=t?this.zeroSlopeAtEnd?L0:P0:2402)}_scheduleFading(e,t,r){const s=this._mixer,o=s.time;let u=this._weightInterpolant;null===u&&(u=s._lendControlInterpolant(),this._weightInterpolant=u);const m=u.parameterPositions,w=u.sampleValues;return m[0]=o,w[0]=t,m[1]=o+e,w[1]=r,this}}(class joe extends py{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,s=e._clip.tracks,o=s.length,u=e._propertyBindings,m=e._interpolants,w=r.uuid,T=this._bindingsByRootAndName;let F=T[w];void 0===F&&(F={},T[w]=F);for(let N=0;N!==o;++N){const Z=s[N],Q=Z.name;let le=F[Q];if(void 0!==le)++le.referenceCount,u[N]=le;else{if(le=u[N],void 0!==le){null===le._cacheIndex&&(++le.referenceCount,this._addInactiveBinding(le,w,Q));continue}le=new Loe(il.create(r,Q,t&&t._propertyBindings[N].binding.parsedPath),Z.ValueTypeName,Z.getValueSize()),++le.referenceCount,this._addInactiveBinding(le,w,Q),u[N]=le}m[N].resultBuffer=le.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const r=(e._localRoot||this._root).uuid,s=e._clip.uuid,o=this._actionsByClip[s];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,s,r)}const t=e._propertyBindings;for(let r=0,s=t.length;r!==s;++r){const o=t[r];0==o.useCount++&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,s=t.length;r!==s;++r){const o=t[r];0==--o.useCount&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,r){const s=this._actions,o=this._actionsByClip;let u=o[t];if(void 0===u)u={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=u;else{const m=u.knownActions;e._byClipCacheIndex=m.length,m.push(e)}e._cacheIndex=s.length,s.push(e),u.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],s=e._cacheIndex;r._cacheIndex=s,t[s]=r,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,u=this._actionsByClip,m=u[o],w=m.knownActions,T=w[w.length-1],F=e._byClipCacheIndex;T._byClipCacheIndex=F,w[F]=T,w.pop(),e._byClipCacheIndex=null,delete m.actionByRoot[(e._localRoot||this._root).uuid],0===w.length&&delete u[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,s=t.length;r!==s;++r){const o=t[r];0==--o.referenceCount&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,s=this._nActiveActions++,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=r,t[r]=o}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,s=--this._nActiveActions,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=r,t[r]=o}_addInactiveBinding(e,t,r){const s=this._bindingsByRootAndName,o=this._bindings;let u=s[t];void 0===u&&(u={},s[t]=u),u[r]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,s=r.rootNode.uuid,o=r.path,u=this._bindingsByRootAndName,m=u[s],w=t[t.length-1],T=e._cacheIndex;w._cacheIndex=T,t[T]=w,t.pop(),delete m[o],0===Object.keys(m).length&&delete u[s]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,s=this._nActiveBindings++,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=r,t[r]=o}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,s=--this._nActiveBindings,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=r,t[r]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return void 0===r&&(r=new G5(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,s=--this._nActiveControlInterpolants,o=t[s];e.__cacheIndex=s,t[s]=e,o.__cacheIndex=r,t[r]=o}clipAction(e,t,r){const s=t||this._root,o=s.uuid;let u="string"==typeof e?LD.findByName(s,e):e;const m=null!==u?u.uuid:e,w=this._actionsByClip[m];let T=null;if(void 0===r&&(r=null!==u?u.blendMode:2500),void 0!==w){const N=w.actionByRoot[o];if(void 0!==N&&N.blendMode===r)return N;T=w.knownActions[0],null===u&&(u=T._clip)}if(null===u)return null;const F=new qoe(this,u,t,r);return this._bindAction(F,T),this._addInactiveAction(F,m,o),F}existingAction(e,t){const r=t||this._root,s=r.uuid,o="string"==typeof e?LD.findByName(r,e):e,m=this._actionsByClip[o?o.uuid:e];return void 0!==m&&m.actionByRoot[s]||null}stopAllAction(){const e=this._actions;for(let r=this._nActiveActions-1;r>=0;--r)e[r].stop();return this}update(e){const t=this._actions,r=this._nActiveActions,s=this.time+=e*=this.timeScale,o=Math.sign(e),u=this._accuIndex^=1;for(let T=0;T!==r;++T)t[T]._update(s,e,o,u);const m=this._bindings,w=this._nActiveBindings;for(let T=0;T!==w;++T)m[T].apply(u);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,s=this._actionsByClip,o=s[r];if(void 0!==o){const u=o.knownActions;for(let m=0,w=u.length;m!==w;++m){const T=u[m];this._deactivateAction(T);const F=T._cacheIndex,N=t[t.length-1];T._cacheIndex=null,T._byClipCacheIndex=null,N._cacheIndex=F,t[F]=N,t.pop(),this._removeInactiveBindingsForAction(T)}delete s[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const u in r){const w=r[u].actionByRoot[t];void 0!==w&&(this._deactivateAction(w),this._removeInactiveAction(w))}const o=this._bindingsByRootAndName[t];if(void 0!==o)for(const u in o){const m=o[u];m.restoreOriginalState(),this._removeInactiveBinding(m)}}uncacheAction(e,t){const r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class mL{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new mL(void 0===this.value.clone?this.value:this.value.clone())}}(class Zoe extends rx{constructor(e,t,r=1){super(e,t),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;const mU=new ui;class WM{constructor(e=new ui(1/0,1/0),t=new ui(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=mU.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return mU.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}WM.prototype.isBox2=!0;const q_=new ct,HD=new Nr,_L=new Nr;function vU(n){const e=[];n&&n.isBone&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,vU(n.children[t]));return e}class xU extends H_{constructor(e=10,t=10,r=4473924,s=8947848){r=new rr(r),s=new rr(s);const o=t/2,u=e/t,m=e/2,w=[],T=[];for(let Z=0,Q=0,le=-m;Z<=t;Z++,le+=u){w.push(-m,0,le,m,0,le),w.push(le,0,-m,le,0,m);const _e=Z===o?r:s;_e.toArray(T,Q),Q+=3,_e.toArray(T,Q),Q+=3,_e.toArray(T,Q),Q+=3,_e.toArray(T,Q),Q+=3}const F=new ps;F.setAttribute("position",new Dr(w,3)),F.setAttribute("color",new Dr(T,3)),super(F,new Hc({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}const SU=new Float32Array(1);function tae(){}function yL(n){return null==n?tae:function(){return this.querySelector(n)}}function iae(n){return null==n?[]:Array.isArray(n)?n:Array.from(n)}function rae(){return[]}function EU(n){return null==n?rae:function(){return this.querySelectorAll(n)}}function TU(n){return function(){return this.matches(n)}}function DU(n){return function(e){return e.matches(n)}}new Int32Array(SU.buffer),Cd.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(Cd.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n},xD.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)},xU.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class Joe extends H_{constructor(e){const t=vU(e),r=new ps,s=[],o=[],u=new rr(0,0,1),m=new rr(0,1,0);for(let T=0;T<t.length;T++){const F=t[T];F.parent&&F.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),o.push(u.r,u.g,u.b),o.push(m.r,m.g,m.b))}r.setAttribute("position",new Dr(s,3)),r.setAttribute("color",new Dr(o,3)),super(r,new Hc({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,s=r.getAttribute("position");_L.copy(this.root.matrixWorld).invert();for(let o=0,u=0;o<t.length;o++){const m=t[o];m.parent&&m.parent.isBone&&(HD.multiplyMatrices(_L,m.matrixWorld),q_.setFromMatrixPosition(HD),s.setXYZ(u,q_.x,q_.y,q_.z),HD.multiplyMatrices(_L,m.parent.matrixWorld),q_.setFromMatrixPosition(HD),s.setXYZ(u+1,q_.x,q_.y,q_.z),u+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},W_.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),class dL{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let r=0,s=e.length;r<s;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(r){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}.extractUrlBase(n)},W_.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},WM.prototype.center=function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)},WM.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},WM.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},WM.prototype.size=function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)},wd.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)},wd.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},wd.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},wd.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},wd.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)},by.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},XT.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)},Oc.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},Oc.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},Oc.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Oc.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},Oc.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Oc.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},Nr.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)},Nr.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},Nr.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new ct).setFromMatrixColumn(this,3)},Nr.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)},Nr.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Nr.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Nr.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Nr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Nr.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)},Nr.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Nr.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Nr.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Nr.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Nr.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Nr.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Nr.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Nr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Nr.prototype.makeFrustum=function(n,e,t,r,s,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,r,t,s,o)},Nr.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},eg.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)},bu.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)},bu.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},xy.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},xy.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)},xy.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},pc.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},pc.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)},pc.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)},pc.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)},pc.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)},pc.barycoordFromPoint=function(n,e,t,r,s){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),pc.getBarycoord(n,e,t,r,s)},pc.normal=function(n,e,t,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),pc.getNormal(n,e,t,r)},tg.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)},tg.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new U_(this,n)},tg.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new zM(this,n)},ui.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},ui.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},ui.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ct.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},ct.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},ct.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)},ct.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)},ct.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)},ct.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)},ct.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},ct.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},ct.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},xa.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},xa.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ra.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)},ra.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},ra.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)},ra.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},ra.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(ra.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Tc.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Tc.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),qP.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Bc.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(n)},Object.defineProperties(Sp.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}}),Object.defineProperties(ka.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===vM},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(vM)}}}),ka.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?vM:_M),this},ka.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},ka.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ps.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)},ps.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===n?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new ka(arguments[1],arguments[2])))},ps.prototype.addDrawCall=function(n,e,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)},ps.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},ps.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},ps.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)},ps.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(ps.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),rx.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?vM:_M),this},rx.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},U_.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},U_.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},U_.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},nD.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},mL.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(ou.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new rr}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(F_.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}}),ha.prototype.clearTarget=function(n,e,t,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,r)},ha.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)},ha.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},ha.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},ha.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},ha.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},ha.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},ha.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},ha.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},ha.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},ha.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},ha.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},ha.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},ha.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},ha.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)},ha.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},ha.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},ha.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},ha.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},ha.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},ha.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},ha.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},ha.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},ha.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},ha.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(ha.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===n?hl:T_}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(KV.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(xd.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}}),class Roe extends ra{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new Eoe).load(n,function(r){e.setBuffer(r)}),this},AP.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)},AP.prototype.clear=function(n,e,t,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,r)},gy.crossOrigin=void 0,gy.loadTexture=function(n,e,t,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const s=new xoe;s.setCrossOrigin(this.crossOrigin);const o=s.load(n,t,void 0,r);return e&&(o.mapping=e),o},gy.loadTextureCube=function(n,e,t,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const s=new yoe;s.setCrossOrigin(this.crossOrigin);const o=s.load(n,t,void 0,r);return e&&(o.mapping=e),o},gy.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},gy.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"137"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="137");var aae=Array.prototype.find;function cae(){return this.firstElementChild}var hae=Array.prototype.filter;function dae(){return Array.from(this.children)}function AU(n){return new Array(n.length)}function WD(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}function _ae(n){return function(){return n}}function vae(n,e,t,r,s,o){for(var m,u=0,w=e.length,T=o.length;u<T;++u)(m=e[u])?(m.__data__=o[u],r[u]=m):t[u]=new WD(n,o[u]);for(;u<w;++u)(m=e[u])&&(s[u]=m)}function yae(n,e,t,r,s,o,u){var m,w,Q,T=new Map,F=e.length,N=o.length,Z=new Array(F);for(m=0;m<F;++m)(w=e[m])&&(Z[m]=Q=u.call(w,w.__data__,m,e)+"",T.has(Q)?s[m]=w:T.set(Q,w));for(m=0;m<N;++m)Q=u.call(n,o[m],m,o)+"",(w=T.get(Q))?(r[m]=w,w.__data__=o[m],T.delete(Q)):t[m]=new WD(n,o[m]);for(m=0;m<F;++m)(w=e[m])&&T.get(Z[m])===w&&(s[m]=w)}function bae(n){return n.__data__}function wae(n){return"object"==typeof n&&"length"in n?n:Array.from(n)}function Dae(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}WD.prototype={constructor:WD,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};var bL="http://www.w3.org/1999/xhtml";const IU={svg:"http://www.w3.org/2000/svg",xhtml:bL,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qD(n){var e=n+="",t=e.indexOf(":");return t>=0&&"xmlns"!==(e=n.slice(0,t))&&(n=n.slice(t+1)),IU.hasOwnProperty(e)?{space:IU[e],local:n}:n}function Fae(n){return function(){this.removeAttribute(n)}}function Oae(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Nae(n,e){return function(){this.setAttribute(n,e)}}function Bae(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function Hae(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}}function zae(n,e){return function(){var t=e.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function RU(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function Uae(n){return function(){this.style.removeProperty(n)}}function Gae(n,e,t){return function(){this.style.setProperty(n,e,t)}}function Wae(n,e,t){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function _x(n,e){return n.style.getPropertyValue(e)||RU(n).getComputedStyle(n,null).getPropertyValue(e)}function jae(n){return function(){delete this[n]}}function Zae(n,e){return function(){this[n]=e}}function Yae(n,e){return function(){var t=e.apply(this,arguments);null==t?delete this[n]:this[n]=t}}function kU(n){return n.trim().split(/^|\s+/)}function xL(n){return n.classList||new PU(n)}function PU(n){this._node=n,this._names=kU(n.getAttribute("class")||"")}function LU(n,e){for(var t=xL(n),r=-1,s=e.length;++r<s;)t.add(e[r])}function FU(n,e){for(var t=xL(n),r=-1,s=e.length;++r<s;)t.remove(e[r])}function Jae(n){return function(){LU(this,n)}}function Kae(n){return function(){FU(this,n)}}function Qae(n,e){return function(){(e.apply(this,arguments)?LU:FU)(this,n)}}function ele(){this.textContent=""}function tle(n){return function(){this.textContent=n}}function nle(n){return function(){var e=n.apply(this,arguments);this.textContent=null==e?"":e}}function rle(){this.innerHTML=""}function sle(n){return function(){this.innerHTML=n}}function ole(n){return function(){var e=n.apply(this,arguments);this.innerHTML=null==e?"":e}}function lle(){this.nextSibling&&this.parentNode.appendChild(this)}function ule(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dle(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===bL&&e.documentElement.namespaceURI===bL?e.createElement(n):e.createElementNS(t,n)}}function fle(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function OU(n){var e=qD(n);return(e.local?fle:dle)(e)}function mle(){return null}function _le(){var n=this.parentNode;n&&n.removeChild(this)}function yle(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function ble(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function Cle(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function Sle(n){return function(){var e=this.__on;if(e){for(var o,t=0,r=-1,s=e.length;t<s;++t)o=e[t],n.type&&o.type!==n.type||o.name!==n.name?e[++r]=o:this.removeEventListener(o.type,o.listener,o.options);++r?e.length=r:delete this.__on}}}function Ele(n,e,t){return function(){var s,r=this.__on,o=function Mle(n){return function(e){n.call(this,e,this.__data__)}}(e);if(r)for(var u=0,m=r.length;u<m;++u)if((s=r[u]).type===n.type&&s.name===n.name)return this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=t),void(s.value=e);this.addEventListener(n.type,o,t),s={type:n.type,name:n.name,value:e,listener:o,options:t},r?r.push(s):this.__on=[s]}}function NU(n,e,t){var r=RU(n),s=r.CustomEvent;"function"==typeof s?s=new s(e,t):(s=r.document.createEvent("Event"),t?(s.initEvent(e,t.bubbles,t.cancelable),s.detail=t.detail):s.initEvent(e,!1,!1)),n.dispatchEvent(s)}function Dle(n,e){return function(){return NU(this,n,e)}}function Ale(n,e){return function(){return NU(this,n,e.apply(this,arguments))}}PU.prototype={add:function(n){this._names.indexOf(n)<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};var kle=[null];function vf(n,e){this._groups=n,this._parents=e}function BU(){return new vf([[document.documentElement]],kle)}vf.prototype=BU.prototype={constructor:vf,select:function nae(n){"function"!=typeof n&&(n=yL(n));for(var e=this._groups,t=e.length,r=new Array(t),s=0;s<t;++s)for(var w,T,o=e[s],u=o.length,m=r[s]=new Array(u),F=0;F<u;++F)(w=o[F])&&(T=n.call(w,w.__data__,F,o))&&("__data__"in w&&(T.__data__=w.__data__),m[F]=T);return new vf(r,this._parents)},selectAll:function oae(n){n="function"==typeof n?function sae(n){return function(){return iae(n.apply(this,arguments))}}(n):EU(n);for(var e=this._groups,t=e.length,r=[],s=[],o=0;o<t;++o)for(var w,u=e[o],m=u.length,T=0;T<m;++T)(w=u[T])&&(r.push(n.call(w,w.__data__,T,u)),s.push(w));return new vf(r,s)},selectChild:function uae(n){return this.select(null==n?cae:function lae(n){return function(){return aae.call(this.children,n)}}("function"==typeof n?n:DU(n)))},selectChildren:function pae(n){return this.selectAll(null==n?dae:function fae(n){return function(){return hae.call(this.children,n)}}("function"==typeof n?n:DU(n)))},filter:function mae(n){"function"!=typeof n&&(n=TU(n));for(var e=this._groups,t=e.length,r=new Array(t),s=0;s<t;++s)for(var w,o=e[s],u=o.length,m=r[s]=[],T=0;T<u;++T)(w=o[T])&&n.call(w,w.__data__,T,o)&&m.push(w);return new vf(r,this._parents)},data:function xae(n,e){if(!arguments.length)return Array.from(this,bae);var t=e?yae:vae,r=this._parents,s=this._groups;"function"!=typeof n&&(n=_ae(n));for(var o=s.length,u=new Array(o),m=new Array(o),w=new Array(o),T=0;T<o;++T){var F=r[T],N=s[T],Z=N.length,Q=wae(n.call(F,F&&F.__data__,T,r)),le=Q.length,_e=m[T]=new Array(le),xe=u[T]=new Array(le),fe=w[T]=new Array(Z);t(F,N,_e,xe,fe,Q,e);for(var Re,Ye,ue=0,Ne=0;ue<le;++ue)if(Re=_e[ue]){for(ue>=Ne&&(Ne=ue+1);!(Ye=xe[Ne])&&++Ne<le;);Re._next=Ye||null}}return(u=new vf(u,r))._enter=m,u._exit=w,u},enter:function gae(){return new vf(this._enter||this._groups.map(AU),this._parents)},exit:function Mae(){return new vf(this._exit||this._groups.map(AU),this._parents)},join:function Cae(n,e,t){var r=this.enter(),s=this,o=this.exit();return"function"==typeof n?(r=n(r))&&(r=r.selection()):r=r.append(n+""),null!=e&&(s=e(s))&&(s=s.selection()),null==t?o.remove():t(o),r&&s?r.merge(s).order():s},merge:function Sae(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,s=t.length,u=Math.min(s,r.length),m=new Array(s),w=0;w<u;++w)for(var Q,T=t[w],F=r[w],N=T.length,Z=m[w]=new Array(N),le=0;le<N;++le)(Q=T[le]||F[le])&&(Z[le]=Q);for(;w<s;++w)m[w]=t[w];return new vf(m,this._parents)},selection:function Ple(){return this},order:function Eae(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var u,r=n[e],s=r.length-1,o=r[s];--s>=0;)(u=r[s])&&(o&&4^u.compareDocumentPosition(o)&&o.parentNode.insertBefore(u,o),o=u);return this},sort:function Tae(n){function e(N,Z){return N&&Z?n(N.__data__,Z.__data__):!N-!Z}n||(n=Dae);for(var t=this._groups,r=t.length,s=new Array(r),o=0;o<r;++o){for(var T,u=t[o],m=u.length,w=s[o]=new Array(m),F=0;F<m;++F)(T=u[F])&&(w[F]=T);w.sort(e)}return new vf(s,this._parents).order()},call:function Aae(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function Iae(){return Array.from(this)},node:function Rae(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],s=0,o=r.length;s<o;++s){var u=r[s];if(u)return u}return null},size:function kae(){let n=0;for(const e of this)++n;return n},empty:function Pae(){return!this.node()},each:function Lae(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var m,s=e[t],o=0,u=s.length;o<u;++o)(m=s[o])&&n.call(m,m.__data__,o,s);return this},attr:function Vae(n,e){var t=qD(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((null==e?t.local?Oae:Fae:"function"==typeof e?t.local?zae:Hae:t.local?Bae:Nae)(t,e))},style:function qae(n,e,t){return arguments.length>1?this.each((null==e?Uae:"function"==typeof e?Wae:Gae)(n,e,null==t?"":t)):_x(this.node(),n)},property:function Xae(n,e){return arguments.length>1?this.each((null==e?jae:"function"==typeof e?Yae:Zae)(n,e)):this.node()[n]},classed:function $ae(n,e){var t=kU(n+"");if(arguments.length<2){for(var r=xL(this.node()),s=-1,o=t.length;++s<o;)if(!r.contains(t[s]))return!1;return!0}return this.each(("function"==typeof e?Qae:e?Jae:Kae)(t,e))},text:function ile(n){return arguments.length?this.each(null==n?ele:("function"==typeof n?nle:tle)(n)):this.node().textContent},html:function ale(n){return arguments.length?this.each(null==n?rle:("function"==typeof n?ole:sle)(n)):this.node().innerHTML},raise:function cle(){return this.each(lle)},lower:function hle(){return this.each(ule)},append:function ple(n){var e="function"==typeof n?n:OU(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function gle(n,e){var t="function"==typeof n?n:OU(n),r=null==e?mle:"function"==typeof e?e:yL(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function vle(){return this.each(_le)},clone:function xle(n){return this.select(n?ble:yle)},datum:function wle(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function Tle(n,e,t){var s,u,r=Cle(n+""),o=r.length;if(!(arguments.length<2)){for(m=e?Ele:Sle,s=0;s<o;++s)this.each(m(r[s],e,t));return this}var m=this.node().__on;if(m)for(var F,w=0,T=m.length;w<T;++w)for(s=0,F=m[w];s<o;++s)if((u=r[s]).type===F.type&&u.name===F.name)return F.value},dispatch:function Ile(n,e){return this.each(("function"==typeof e?Ale:Dle)(n,e))},[Symbol.iterator]:function*Rle(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var u,r=n[e],s=0,o=r.length;s<o;++s)(u=r[s])&&(yield u)}};const qM=BU;var Lle={value:()=>{}};function HU(){for(var r,n=0,e=arguments.length,t={};n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new jD(t)}function jD(n){this._=n}function Fle(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",s=t.indexOf(".");if(s>=0&&(r=t.slice(s+1),t=t.slice(0,s)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}function Ole(n,e){for(var s,t=0,r=n.length;t<r;++t)if((s=n[t]).name===e)return s.value}function zU(n,e,t){for(var r=0,s=n.length;r<s;++r)if(n[r].name===e){n[r]=Lle,n=n.slice(0,r).concat(n.slice(r+1));break}return null!=t&&n.push({name:e,value:t}),n}jD.prototype=HU.prototype={constructor:jD,on:function(n,e){var s,t=this._,r=Fle(n+"",t),o=-1,u=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<u;)if(s=(n=r[o]).type)t[s]=zU(t[s],n.name,e);else if(null==e)for(s in t)t[s]=zU(t[s],n.name,null);return this}for(;++o<u;)if((s=(n=r[o]).type)&&(s=Ole(t[s],n.name)))return s},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new jD(n)},call:function(n,e){if((s=arguments.length-2)>0)for(var s,o,t=new Array(s),r=0;r<s;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(r=0,s=(o=this._[n]).length;r<s;++r)o[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],s=0,o=r.length;s<o;++s)r[s].value.apply(e,t)}};const Nle=HU;var ZD,YM,vx=0,jM=0,ZM=0,YD=0,Iy=0,XD=0,XM="object"==typeof performance&&performance.now?performance:Date,UU="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function wL(){return Iy||(UU(Ble),Iy=XM.now()+XD)}function Ble(){Iy=0}function JD(){this._call=this._time=this._next=null}function GU(n,e,t){var r=new JD;return r.restart(n,e,t),r}function WU(){Iy=(YD=XM.now())+XD,vx=jM=0;try{!function Hle(){wL(),++vx;for(var e,n=ZD;n;)(e=Iy-n._time)>=0&&n._call.call(void 0,e),n=n._next;--vx}()}finally{vx=0,function Vle(){for(var n,t,e=ZD,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:ZD=t);YM=n,ML(r)}(),Iy=0}}function zle(){var n=XM.now(),e=n-YD;e>1e3&&(XD-=e,YD=n)}function ML(n){vx||(jM&&(jM=clearTimeout(jM)),n-Iy>24?(n<1/0&&(jM=setTimeout(WU,n-XM.now()-XD)),ZM&&(ZM=clearInterval(ZM))):(ZM||(YD=XM.now(),ZM=setInterval(zle,1e3)),vx=1,UU(WU)))}function qU(n,e,t){var r=new JD;return r.restart(s=>{r.stop(),n(s+e)},e=null==e?0:+e,t),r}JD.prototype=GU.prototype={constructor:JD,restart:function(n,e,t){if("function"!=typeof n)throw new TypeError("callback is not a function");t=(null==t?wL():+t)+(null==e?0:+e),!this._next&&YM!==this&&(YM?YM._next=this:ZD=this,YM=this),this._call=n,this._time=t,ML()},stop:function(){this._call&&(this._call=null,this._time=1/0,ML())}};var Ule=Nle("start","end","cancel","interrupt"),Gle=[];function $D(n,e,t,r,s,o){var u=n.__transition;if(u){if(t in u)return}else n.__transition={};!function Wle(n,e,t){var s,r=n.__transition;function u(T){var F,N,Z,Q;if(1!==t.state)return w();for(F in r)if((Q=r[F]).name===t.name){if(3===Q.state)return qU(u);4===Q.state?(Q.state=6,Q.timer.stop(),Q.on.call("interrupt",n,n.__data__,Q.index,Q.group),delete r[F]):+F<e&&(Q.state=6,Q.timer.stop(),Q.on.call("cancel",n,n.__data__,Q.index,Q.group),delete r[F])}if(qU(function(){3===t.state&&(t.state=4,t.timer.restart(m,t.delay,t.time),m(T))}),t.state=2,t.on.call("start",n,n.__data__,t.index,t.group),2===t.state){for(t.state=3,s=new Array(Z=t.tween.length),F=0,N=-1;F<Z;++F)(Q=t.tween[F].value.call(n,n.__data__,t.index,t.group))&&(s[++N]=Q);s.length=N+1}}function m(T){for(var F=T<t.duration?t.ease.call(null,T/t.duration):(t.timer.restart(w),t.state=5,1),N=-1,Z=s.length;++N<Z;)s[N].call(n,F);5===t.state&&(t.on.call("end",n,n.__data__,t.index,t.group),w())}function w(){for(var T in t.state=6,t.timer.stop(),delete r[e],r)return;delete n.__transition}r[e]=t,t.timer=GU(function o(T){t.state=1,t.timer.restart(u,t.delay,t.time),t.delay<=T&&u(T-t.delay)},0,t.time)}(n,t,{name:e,index:r,group:s,on:Ule,tween:Gle,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function EL(n,e){var t=yf(n,e);if(t.state>0)throw new Error("too late; already scheduled");return t}function Ep(n,e){var t=yf(n,e);if(t.state>3)throw new Error("too late; already running");return t}function yf(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function bf(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var eA,XU=180/Math.PI,TL={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function JU(n,e,t,r,s,o){var u,m,w;return(u=Math.sqrt(n*n+e*e))&&(n/=u,e/=u),(w=n*t+e*r)&&(t-=n*w,r-=e*w),(m=Math.sqrt(t*t+r*r))&&(t/=m,r/=m,w/=m),n*r<e*t&&(n=-n,e=-e,w=-w,u=-u),{translateX:s,translateY:o,rotate:Math.atan2(e,n)*XU,skewX:Math.atan(w)*XU,scaleX:u,scaleY:m}}function KU(n,e,t,r){function s(T){return T.length?T.pop()+" ":""}return function(T,F){var N=[],Z=[];return T=n(T),F=n(F),function o(T,F,N,Z,Q,le){if(T!==N||F!==Z){var _e=Q.push("translate(",null,e,null,t);le.push({i:_e-4,x:bf(T,N)},{i:_e-2,x:bf(F,Z)})}else(N||Z)&&Q.push("translate("+N+e+Z+t)}(T.translateX,T.translateY,F.translateX,F.translateY,N,Z),function u(T,F,N,Z){T!==F?(T-F>180?F+=360:F-T>180&&(T+=360),Z.push({i:N.push(s(N)+"rotate(",null,r)-2,x:bf(T,F)})):F&&N.push(s(N)+"rotate("+F+r)}(T.rotate,F.rotate,N,Z),function m(T,F,N,Z){T!==F?Z.push({i:N.push(s(N)+"skewX(",null,r)-2,x:bf(T,F)}):F&&N.push(s(N)+"skewX("+F+r)}(T.skewX,F.skewX,N,Z),function w(T,F,N,Z,Q,le){if(T!==N||F!==Z){var _e=Q.push(s(Q)+"scale(",null,",",null,")");le.push({i:_e-4,x:bf(T,N)},{i:_e-2,x:bf(F,Z)})}else(1!==N||1!==Z)&&Q.push(s(Q)+"scale("+N+","+Z+")")}(T.scaleX,T.scaleY,F.scaleX,F.scaleY,N,Z),T=F=null,function(Q){for(var xe,le=-1,_e=Z.length;++le<_e;)N[(xe=Z[le]).i]=xe.x(Q);return N.join("")}}}var Xle=KU(function Zle(n){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?TL:JU(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),Jle=KU(function Yle(n){return null!=n&&(eA||(eA=document.createElementNS("http://www.w3.org/2000/svg","g")),eA.setAttribute("transform",n),n=eA.transform.baseVal.consolidate())?JU((n=n.matrix).a,n.b,n.c,n.d,n.e,n.f):TL},", ",")",")");function Kle(n,e){var t,r;return function(){var s=Ep(this,n),o=s.tween;if(o!==t)for(var u=0,m=(r=t=o).length;u<m;++u)if(r[u].name===e){(r=r.slice()).splice(u,1);break}s.tween=r}}function Qle(n,e,t){var r,s;if("function"!=typeof t)throw new Error;return function(){var o=Ep(this,n),u=o.tween;if(u!==r){s=(r=u).slice();for(var m={name:e,value:t},w=0,T=s.length;w<T;++w)if(s[w].name===e){s[w]=m;break}w===T&&s.push(m)}o.tween=s}}function DL(n,e,t){var r=n._id;return n.each(function(){var s=Ep(this,r);(s.value||(s.value={}))[e]=t.apply(this,arguments)}),function(s){return yf(s,r).value[e]}}function AL(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function QU(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function JM(){}var tA=1/.7,yx="\\s*([+-]?\\d+)\\s*",QM="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ece=/^#([0-9a-f]{3,8})$/,tce=new RegExp(`^rgb\\(${yx},${yx},${yx}\\)$`),nce=new RegExp(`^rgb\\(${Tp},${Tp},${Tp}\\)$`),ice=new RegExp(`^rgba\\(${yx},${yx},${yx},${QM}\\)$`),rce=new RegExp(`^rgba\\(${Tp},${Tp},${Tp},${QM}\\)$`),sce=new RegExp(`^hsl\\(${QM},${Tp},${Tp}\\)$`),oce=new RegExp(`^hsla\\(${QM},${Tp},${Tp},${QM}\\)$`),$U={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function eG(){return this.rgb().formatHex()}function tG(){return this.rgb().formatRgb()}function Ry(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=ece.exec(n))?(t=e[1].length,e=parseInt(e[1],16),6===t?nG(e):3===t?new hh(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===t?nA(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===t?nA(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=tce.exec(n))?new hh(e[1],e[2],e[3],1):(e=nce.exec(n))?new hh(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ice.exec(n))?nA(e[1],e[2],e[3],e[4]):(e=rce.exec(n))?nA(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=sce.exec(n))?sG(e[1],e[2]/100,e[3]/100,1):(e=oce.exec(n))?sG(e[1],e[2]/100,e[3]/100,e[4]):$U.hasOwnProperty(n)?nG($U[n]):"transparent"===n?new hh(NaN,NaN,NaN,0):null}function nG(n){return new hh(n>>16&255,n>>8&255,255&n,1)}function nA(n,e,t,r){return r<=0&&(n=e=t=NaN),new hh(n,e,t,r)}function cce(n){return n instanceof JM||(n=Ry(n)),n?new hh((n=n.rgb()).r,n.g,n.b,n.opacity):new hh}function $M(n,e,t,r){return 1===arguments.length?cce(n):new hh(n,e,t,null==r?1:r)}function hh(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}function iG(){return`#${Py(this.r)}${Py(this.g)}${Py(this.b)}`}function rG(){const n=iA(this.opacity);return`${1===n?"rgb(":"rgba("}${ky(this.r)}, ${ky(this.g)}, ${ky(this.b)}${1===n?")":`, ${n})`}`}function iA(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function ky(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Py(n){return((n=ky(n))<16?"0":"")+n.toString(16)}function sG(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new xf(n,e,t,r)}function oG(n){if(n instanceof xf)return new xf(n.h,n.s,n.l,n.opacity);if(n instanceof JM||(n=Ry(n)),!n)return new xf;if(n instanceof xf)return n;var e=(n=n.rgb()).r/255,t=n.g/255,r=n.b/255,s=Math.min(e,t,r),o=Math.max(e,t,r),u=NaN,m=o-s,w=(o+s)/2;return m?(u=e===o?(t-r)/m+6*(t<r):t===o?(r-e)/m+2:(e-t)/m+4,m/=w<.5?o+s:2-o-s,u*=60):m=w>0&&w<1?0:u,new xf(u,m,w,n.opacity)}function xf(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}function aG(n){return(n=(n||0)%360)<0?n+360:n}function rA(n){return Math.max(0,Math.min(1,n||0))}function IL(n,e,t){return 255*(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)}function lG(n,e,t,r,s){var o=n*n,u=o*n;return((1-3*n+3*o-u)*e+(4-6*o+3*u)*t+(1+3*n+3*o-3*u)*r+u*s)/6}AL(JM,Ry,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:eG,formatHex:eG,formatHex8:function ace(){return this.rgb().formatHex8()},formatHsl:function lce(){return oG(this).formatHsl()},formatRgb:tG,toString:tG}),AL(hh,$M,QU(JM,{brighter(n){return n=null==n?tA:Math.pow(tA,n),new hh(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new hh(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new hh(ky(this.r),ky(this.g),ky(this.b),iA(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:iG,formatHex:iG,formatHex8:function uce(){return`#${Py(this.r)}${Py(this.g)}${Py(this.b)}${Py(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:rG,toString:rG})),AL(xf,function hce(n,e,t,r){return 1===arguments.length?oG(n):new xf(n,e,t,null==r?1:r)},QU(JM,{brighter(n){return n=null==n?tA:Math.pow(tA,n),new xf(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=null==n?.7:Math.pow(.7,n),new xf(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+360*(this.h<0),e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,s=2*t-r;return new hh(IL(n>=240?n-240:n+120,s,r),IL(n,s,r),IL(n<120?n+240:n-120,s,r),this.opacity)},clamp(){return new xf(aG(this.h),rA(this.s),rA(this.l),iA(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=iA(this.opacity);return`${1===n?"hsl(":"hsla("}${aG(this.h)}, ${100*rA(this.s)}%, ${100*rA(this.l)}%${1===n?")":`, ${n})`}`}}));const RL=n=>()=>n;function uG(n,e){var t=e-n;return t?function cG(n,e){return function(t){return n+t*e}}(n,t):RL(isNaN(n)?e:n)}const sA=function n(e){var t=function mce(n){return 1==(n=+n)?uG:function(e,t){return t-e?function pce(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}(e,t,n):RL(isNaN(e)?t:e)}}(e);function r(s,o){var u=t((s=$M(s)).r,(o=$M(o)).r),m=t(s.g,o.g),w=t(s.b,o.b),T=uG(s.opacity,o.opacity);return function(F){return s.r=u(F),s.g=m(F),s.b=w(F),s.opacity=T(F),s+""}}return r.gamma=n,r}(1);function hG(n){return function(e){var u,m,t=e.length,r=new Array(t),s=new Array(t),o=new Array(t);for(u=0;u<t;++u)m=$M(e[u]),r[u]=m.r||0,s[u]=m.g||0,o[u]=m.b||0;return r=n(r),s=n(s),o=n(o),m.opacity=1,function(w){return m.r=r(w),m.g=s(w),m.b=o(w),m+""}}}hG(function dce(n){var e=n.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),s=n[r],o=n[r+1];return lG((t-r/e)*e,r>0?n[r-1]:2*s-o,s,o,r<e-1?n[r+2]:2*o-s)}}),hG(function fce(n){var e=n.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*e);return lG((t-r/e)*e,n[(r+e-1)%e],n[r%e],n[(r+1)%e],n[(r+2)%e])}});var kL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,PL=new RegExp(kL.source,"g");function dG(n,e){var r,s,o,t=kL.lastIndex=PL.lastIndex=0,u=-1,m=[],w=[];for(n+="",e+="";(r=kL.exec(n))&&(s=PL.exec(e));)(o=s.index)>t&&(o=e.slice(t,o),m[u]?m[u]+=o:m[++u]=o),(r=r[0])===(s=s[0])?m[u]?m[u]+=s:m[++u]=s:(m[++u]=null,w.push({i:u,x:bf(r,s)})),t=PL.lastIndex;return t<e.length&&(o=e.slice(t),m[u]?m[u]+=o:m[++u]=o),m.length<2?w[0]?function _ce(n){return function(e){return n(e)+""}}(w[0].x):function gce(n){return function(){return n}}(e):(e=w.length,function(T){for(var N,F=0;F<e;++F)m[(N=w[F]).i]=N.x(T);return m.join("")})}function fG(n,e){var t;return("number"==typeof e?bf:e instanceof Ry?sA:(t=Ry(e))?(e=t,sA):dG)(n,e)}function vce(n){return function(){this.removeAttribute(n)}}function yce(n){return function(){this.removeAttributeNS(n.space,n.local)}}function bce(n,e,t){var r,o,s=t+"";return function(){var u=this.getAttribute(n);return u===s?null:u===r?o:o=e(r=u,t)}}function xce(n,e,t){var r,o,s=t+"";return function(){var u=this.getAttributeNS(n.space,n.local);return u===s?null:u===r?o:o=e(r=u,t)}}function wce(n,e,t){var r,s,o;return function(){var u,w,m=t(this);return null==m?void this.removeAttribute(n):(u=this.getAttribute(n))===(w=m+"")?null:u===r&&w===s?o:(s=w,o=e(r=u,m))}}function Mce(n,e,t){var r,s,o;return function(){var u,w,m=t(this);return null==m?void this.removeAttributeNS(n.space,n.local):(u=this.getAttributeNS(n.space,n.local))===(w=m+"")?null:u===r&&w===s?o:(s=w,o=e(r=u,m))}}function Sce(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function Ece(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function Tce(n,e){var t,r;function s(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&Ece(n,o)),t}return s._value=e,s}function Dce(n,e){var t,r;function s(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&Sce(n,o)),t}return s._value=e,s}function Ice(n,e){return function(){EL(this,n).delay=+e.apply(this,arguments)}}function Rce(n,e){return e=+e,function(){EL(this,n).delay=e}}function Pce(n,e){return function(){Ep(this,n).duration=+e.apply(this,arguments)}}function Lce(n,e){return e=+e,function(){Ep(this,n).duration=e}}function Oce(n,e){if("function"!=typeof e)throw new Error;return function(){Ep(this,n).ease=e}}function Gce(n,e,t){var r,s,o=function Uce(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(e)?EL:Ep;return function(){var u=o(this,n),m=u.on;m!==r&&(s=(r=m).copy()).on(e,t),u.on=s}}var Xce=qM.prototype.constructor;function pG(n){return function(){this.style.removeProperty(n)}}function nue(n,e,t){return function(r){this.style.setProperty(n,e.call(this,r),t)}}function iue(n,e,t){var r,s;function o(){var u=e.apply(this,arguments);return u!==s&&(r=(s=u)&&nue(n,u,t)),r}return o._value=e,o}function lue(n){return function(e){this.textContent=n.call(this,e)}}function cue(n){var e,t;function r(){var s=n.apply(this,arguments);return s!==t&&(e=(t=s)&&lue(s)),e}return r._value=n,r}var fue=0;function sg(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function mG(){return++fue}var og=qM.prototype;sg.prototype=function pue(n){return qM().transition(n)}.prototype={constructor:sg,select:function Zce(n){var e=this._name,t=this._id;"function"!=typeof n&&(n=yL(n));for(var r=this._groups,s=r.length,o=new Array(s),u=0;u<s;++u)for(var F,N,m=r[u],w=m.length,T=o[u]=new Array(w),Z=0;Z<w;++Z)(F=m[Z])&&(N=n.call(F,F.__data__,Z,m))&&("__data__"in F&&(N.__data__=F.__data__),T[Z]=N,$D(T[Z],e,t,Z,T,yf(F,t)));return new sg(o,this._parents,e,t)},selectAll:function Yce(n){var e=this._name,t=this._id;"function"!=typeof n&&(n=EU(n));for(var r=this._groups,s=r.length,o=[],u=[],m=0;m<s;++m)for(var F,w=r[m],T=w.length,N=0;N<T;++N)if(F=w[N]){for(var Q,Z=n.call(F,F.__data__,N,w),le=yf(F,t),_e=0,xe=Z.length;_e<xe;++_e)(Q=Z[_e])&&$D(Q,e,t,_e,Z,le);o.push(Z),u.push(F)}return new sg(o,u,e,t)},selectChild:og.selectChild,selectChildren:og.selectChildren,filter:function zce(n){"function"!=typeof n&&(n=TU(n));for(var e=this._groups,t=e.length,r=new Array(t),s=0;s<t;++s)for(var w,o=e[s],u=o.length,m=r[s]=[],T=0;T<u;++T)(w=o[T])&&n.call(w,w.__data__,T,o)&&m.push(w);return new sg(r,this._parents,this._name,this._id)},merge:function Vce(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,o=Math.min(r,t.length),u=new Array(r),m=0;m<o;++m)for(var Z,w=e[m],T=t[m],F=w.length,N=u[m]=new Array(F),Q=0;Q<F;++Q)(Z=w[Q]||T[Q])&&(N[Q]=Z);for(;m<r;++m)u[m]=e[m];return new sg(u,this._parents,this._name,this._id)},selection:function Jce(){return new Xce(this._groups,this._parents)},transition:function hue(){for(var n=this._name,e=this._id,t=mG(),r=this._groups,s=r.length,o=0;o<s;++o)for(var w,u=r[o],m=u.length,T=0;T<m;++T)if(w=u[T]){var F=yf(w,e);$D(w,n,t,T,u,{time:F.time+F.delay+F.duration,delay:0,duration:F.duration,ease:F.ease})}return new sg(r,this._parents,n,t)},call:og.call,nodes:og.nodes,node:og.node,size:og.size,empty:og.empty,each:og.each,on:function Wce(n,e){var t=this._id;return arguments.length<2?yf(this.node(),t).on.on(n):this.each(Gce(t,n,e))},attr:function Cce(n,e){var t=qD(n),r="transform"===t?Jle:fG;return this.attrTween(n,"function"==typeof e?(t.local?Mce:wce)(t,r,DL(this,"attr."+n,e)):null==e?(t.local?yce:vce)(t):(t.local?xce:bce)(t,r,e))},attrTween:function Ace(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;var r=qD(n);return this.tween(t,(r.local?Tce:Dce)(r,e))},style:function tue(n,e,t){var r="transform"==(n+="")?Xle:fG;return null==e?this.styleTween(n,function Kce(n,e){var t,r,s;return function(){var o=_x(this,n),u=(this.style.removeProperty(n),_x(this,n));return o===u?null:o===t&&u===r?s:s=e(t=o,r=u)}}(n,r)).on("end.style."+n,pG(n)):"function"==typeof e?this.styleTween(n,function $ce(n,e,t){var r,s,o;return function(){var u=_x(this,n),m=t(this),w=m+"";return null==m&&(this.style.removeProperty(n),w=m=_x(this,n)),u===w?null:u===r&&w===s?o:(s=w,o=e(r=u,m))}}(n,r,DL(this,"style."+n,e))).each(function eue(n,e){var t,r,s,m,o="style."+e,u="end."+o;return function(){var w=Ep(this,n),T=w.on,F=null==w.value[o]?m||(m=pG(e)):void 0;(T!==t||s!==F)&&(r=(t=T).copy()).on(u,s=F),w.on=r}}(this._id,n)):this.styleTween(n,function Qce(n,e,t){var r,o,s=t+"";return function(){var u=_x(this,n);return u===s?null:u===r?o:o=e(r=u,t)}}(n,r,e),t).on("end.style."+n,null)},styleTween:function rue(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,iue(n,e,null==t?"":t))},text:function aue(n){return this.tween("text","function"==typeof n?function oue(n){return function(){var e=n(this);this.textContent=null==e?"":e}}(DL(this,"text",n)):function sue(n){return function(){this.textContent=n}}(null==n?"":n+""))},textTween:function uue(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;return this.tween(e,cue(n))},remove:function jce(){return this.on("end.remove",function qce(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}(this._id))},tween:function $le(n,e){var t=this._id;if(n+="",arguments.length<2){for(var u,r=yf(this.node(),t).tween,s=0,o=r.length;s<o;++s)if((u=r[s]).name===n)return u.value;return null}return this.each((null==e?Kle:Qle)(t,n,e))},delay:function kce(n){var e=this._id;return arguments.length?this.each(("function"==typeof n?Ice:Rce)(e,n)):yf(this.node(),e).delay},duration:function Fce(n){var e=this._id;return arguments.length?this.each(("function"==typeof n?Pce:Lce)(e,n)):yf(this.node(),e).duration},ease:function Nce(n){var e=this._id;return arguments.length?this.each(Oce(e,n)):yf(this.node(),e).ease},easeVarying:function Hce(n){if("function"!=typeof n)throw new Error;return this.each(function Bce(n,e){return function(){var t=e.apply(this,arguments);if("function"!=typeof t)throw new Error;Ep(this,n).ease=t}}(this._id,n))},end:function due(){var n,e,t=this,r=t._id,s=t.size();return new Promise(function(o,u){var m={value:u},w={value:function(){0==--s&&o()}};t.each(function(){var T=Ep(this,r),F=T.on;F!==n&&((e=(n=F).copy())._.cancel.push(m),e._.interrupt.push(m),e._.end.push(w)),T.on=e}),0===s&&o()})},[Symbol.iterator]:og[Symbol.iterator]};var gue={time:null,delay:0,duration:250,ease:function mue(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}};function _ue(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}qM.prototype.interrupt=function jle(n){return this.each(function(){!function qle(n,e){var r,s,u,t=n.__transition,o=!0;if(t){for(u in e=null==e?null:e+"",t)(r=t[u]).name===e?(s=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(s?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[u]):o=!1;o&&delete n.__transition}}(this,n)})},qM.prototype.transition=function vue(n){var e,t;n instanceof sg?(e=n._id,n=n._name):(e=mG(),(t=gue).time=wL(),n=null==n?null:n+"");for(var r=this._groups,s=r.length,o=0;o<s;++o)for(var w,u=r[o],m=u.length,T=0;T<m;++T)(w=u[T])&&$D(w,n,e,T,u,t||_ue(w,e));return new sg(r,this._parents,n,e)};Math;function eC(n){return{type:n}}["w","e"].map(eC),["n","s"].map(eC),["n","w","e","s","nw","ne","sw","se"].map(eC);var BL=Math.sqrt(50),HL=Math.sqrt(10),zL=Math.sqrt(2);function xG(n,e,t){var r=(e-n)/Math.max(0,t),s=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,s);return s>=0?(o>=BL?10:o>=HL?5:o>=zL?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(o>=BL?10:o>=HL?5:o>=zL?2:1)}function lA(n,e){return null==n||null==e?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Due(n,e){return null==n||null==e?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function wG(n){let e,t,r;function s(m,w,T=0,F=m.length){if(T<F){if(0!==e(w,w))return F;do{const N=T+F>>>1;t(m[N],w)<0?T=N+1:F=N}while(T<F)}return T}return 2!==n.length?(e=lA,t=(m,w)=>lA(n(m),w),r=(m,w)=>n(m)-w):(e=n===lA||n===Due?n:Aue,t=n,r=n),{left:s,center:function u(m,w,T=0,F=m.length){const N=s(m,w,T,F-1);return N>T&&r(m[N-1],w)>-r(m[N],w)?N-1:N},right:function o(m,w,T=0,F=m.length){if(T<F){if(0!==e(w,w))return F;do{const N=T+F>>>1;t(m[N],w)<=0?T=N+1:F=N}while(T<F)}return T}}}function Aue(){return 0}const Rue=wG(lA).right,kue=(wG(function Iue(n){return null===n?NaN:+n}),Rue);function CG(n,e){var u,t=e?e.length:0,r=n?Math.min(t,n.length):0,s=new Array(r),o=new Array(t);for(u=0;u<r;++u)s[u]=VL(n[u],e[u]);for(;u<t;++u)o[u]=e[u];return function(m){for(u=0;u<r;++u)o[u]=s[u](m);return o}}function Pue(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function Lue(n,e){var s,t={},r={};for(s in(null===n||"object"!=typeof n)&&(n={}),(null===e||"object"!=typeof e)&&(e={}),e)s in n?t[s]=VL(n[s],e[s]):r[s]=e[s];return function(o){for(s in t)r[s]=t[s](o);return r}}function Fue(n,e){e||(e=[]);var s,t=n?Math.min(e.length,n.length):0,r=e.slice();return function(o){for(s=0;s<t;++s)r[s]=n[s]*(1-o)+e[s]*o;return r}}function VL(n,e){var r,t=typeof e;return null==e||"boolean"===t?RL(e):("number"===t?bf:"string"===t?(r=Ry(e))?(e=r,sA):dG:e instanceof Ry?sA:e instanceof Date?Pue:function Oue(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}(e)?Fue:Array.isArray(e)?CG:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Lue:bf)(n,e)}function Nue(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function Hue(n){return+n}var SG=[0,1];function wx(n){return n}function UL(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:function Bue(n){return function(){return n}}(isNaN(e)?NaN:.5)}function Vue(n,e,t){var r=n[0],s=n[1],o=e[0],u=e[1];return s<r?(r=UL(s,r),o=t(u,o)):(r=UL(r,s),o=t(o,u)),function(m){return o(r(m))}}function Uue(n,e,t){var r=Math.min(n.length,e.length)-1,s=new Array(r),o=new Array(r),u=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++u<r;)s[u]=UL(n[u],n[u+1]),o[u]=t(e[u],e[u+1]);return function(m){var w=kue(n,m,1,r)-1;return o[w](s[w](m))}}function Gue(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function que(){return function Wue(){var r,s,o,m,w,T,n=SG,e=SG,t=VL,u=wx;function F(){var Z=Math.min(n.length,e.length);return u!==wx&&(u=function zue(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}(n[0],n[Z-1])),m=Z>2?Uue:Vue,w=T=null,N}function N(Z){return null==Z||isNaN(Z=+Z)?o:(w||(w=m(n.map(r),e,t)))(r(u(Z)))}return N.invert=function(Z){return u(s((T||(T=m(e,n.map(r),bf)))(Z)))},N.domain=function(Z){return arguments.length?(n=Array.from(Z,Hue),F()):n.slice()},N.range=function(Z){return arguments.length?(e=Array.from(Z),F()):e.slice()},N.rangeRound=function(Z){return e=Array.from(Z),t=Nue,F()},N.clamp=function(Z){return arguments.length?(u=!!Z||wx,F()):u!==wx},N.interpolate=function(Z){return arguments.length?(t=Z,F()):t},N.unknown=function(Z){return arguments.length?(o=Z,N):o},function(Z,Q){return r=Z,s=Q,F()}}()(wx,wx)}function jue(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n)}return this}var EG,Zue=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function cA(n){if(!(e=Zue.exec(n)))throw new Error("invalid format: "+n);var e;return new GL({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function GL(n){this.fill=void 0===n.fill?" ":n.fill+"",this.align=void 0===n.align?">":n.align+"",this.sign=void 0===n.sign?"-":n.sign+"",this.symbol=void 0===n.symbol?"":n.symbol+"",this.zero=!!n.zero,this.width=void 0===n.width?void 0:+n.width,this.comma=!!n.comma,this.precision=void 0===n.precision?void 0:+n.precision,this.trim=!!n.trim,this.type=void 0===n.type?"":n.type+""}function uA(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function Mx(n){return(n=uA(Math.abs(n)))?n[1]:NaN}function TG(n,e){var t=uA(n,e);if(!t)return n+"";var r=t[0],s=t[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}cA.prototype=GL.prototype,GL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const DG={"%":(n,e)=>(100*n).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:function Yue(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)},e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>TG(100*n,e),r:TG,s:function $ue(n,e){var t=uA(n,e);if(!t)return n+"";var r=t[0],s=t[1],o=s-(EG=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,u=r.length;return o===u?r:o>u?r+new Array(o-u+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+uA(n,Math.max(0,e+o-1))[0]},X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function AG(n){return n}var hA,kG,PG,IG=Array.prototype.map,RG=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function she(n){var e=n.domain;return n.ticks=function(t){var r=e();return function Eue(n,e,t){var r,o,u,m,s=-1;if(t=+t,(n=+n)==(e=+e)&&t>0)return[n];if((r=e<n)&&(o=n,n=e,e=o),0===(m=xG(n,e,t))||!isFinite(m))return[];if(m>0){let w=Math.round(n/m),T=Math.round(e/m);for(w*m<n&&++w,T*m>e&&--T,u=new Array(o=T-w+1);++s<o;)u[s]=(w+s)*m}else{m=-m;let w=Math.round(n*m),T=Math.round(e*m);for(w/m<n&&++w,T/m>e&&--T,u=new Array(o=T-w+1);++s<o;)u[s]=(w+s)/m}return r&&u.reverse(),u}(r[0],r[r.length-1],null==t?10:t)},n.tickFormat=function(t,r){var s=e();return function rhe(n,e,t,r){var o,s=function Tue(n,e,t){var r=Math.abs(e-n)/Math.max(0,t),s=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/s;return o>=BL?s*=10:o>=HL?s*=5:o>=zL&&(s*=2),e<n?-s:s}(n,e,t);switch((r=cA(null==r?",f":r)).type){case"s":var u=Math.max(Math.abs(n),Math.abs(e));return null==r.precision&&!isNaN(o=function Xue(n,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Mx(e)/3)))-Mx(Math.abs(n)))}(s,u))&&(r.precision=o),PG(r,u);case"":case"e":case"g":case"p":case"r":null==r.precision&&!isNaN(o=function nhe(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,Mx(e)-Mx(n))+1}(s,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=o-("e"===r.type));break;case"f":case"%":null==r.precision&&!isNaN(o=function ihe(n){return Math.max(0,-Mx(Math.abs(n)))}(s))&&(r.precision=o-2*("%"===r.type))}return kG(r)}(s[0],s[s.length-1],null==t?10:t,r)},n.nice=function(t){null==t&&(t=10);var w,T,r=e(),s=0,o=r.length-1,u=r[s],m=r[o],F=10;for(m<u&&(T=u,u=m,m=T,T=s,s=o,o=T);F-- >0;){if((T=xG(u,m,t))===w)return r[s]=u,r[o]=m,e(r);if(T>0)u=Math.floor(u/T)*T,m=Math.ceil(m/T)*T;else{if(!(T<0))break;u=Math.ceil(u*T)/T,m=Math.floor(m*T)/T}w=T}return n},n}function LG(){var n=que();return n.copy=function(){return Gue(n,LG())},jue.apply(n,arguments),she(n)}function Cx(n,e,t){this.k=n,this.x=e,this.y=t}!function the(n){hA=function ehe(n){var e=void 0===n.grouping||void 0===n.thousands?AG:function Jue(n,e){return function(t,r){for(var s=t.length,o=[],u=0,m=n[0],w=0;s>0&&m>0&&(w+m+1>r&&(m=Math.max(1,r-w)),o.push(t.substring(s-=m,s+m)),!((w+=m+1)>r));)m=n[u=(u+1)%n.length];return o.reverse().join(e)}}(IG.call(n.grouping,Number),n.thousands+""),t=void 0===n.currency?"":n.currency[0]+"",r=void 0===n.currency?"":n.currency[1]+"",s=void 0===n.decimal?".":n.decimal+"",o=void 0===n.numerals?AG:function Kue(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}(IG.call(n.numerals,String)),u=void 0===n.percent?"%":n.percent+"",m=void 0===n.minus?"\u2212":n.minus+"",w=void 0===n.nan?"NaN":n.nan+"";function T(N){var Z=(N=cA(N)).fill,Q=N.align,le=N.sign,_e=N.symbol,xe=N.zero,fe=N.width,ue=N.comma,Ne=N.precision,Re=N.trim,Ye=N.type;"n"===Ye?(ue=!0,Ye="g"):DG[Ye]||(void 0===Ne&&(Ne=12),Re=!0,Ye="g"),(xe||"0"===Z&&"="===Q)&&(xe=!0,Z="0",Q="=");var st="$"===_e?t:"#"===_e&&/[boxX]/.test(Ye)?"0"+Ye.toLowerCase():"",ht="$"===_e?r:/[%p]/.test(Ye)?u:"",Et=DG[Ye],hn=/[defgprs%]/.test(Ye);function Kt(We){var it,kt,et,It=st,Ht=ht;if("c"===Ye)Ht=Et(We)+Ht,We="";else{var bt=(We=+We)<0||1/We<0;if(We=isNaN(We)?w:Et(Math.abs(We),Ne),Re&&(We=function Que(n){e:for(var s,e=n.length,t=1,r=-1;t<e;++t)switch(n[t]){case".":r=s=t;break;case"0":0===r&&(r=t),s=t;break;default:if(!+n[t])break e;r>0&&(r=0)}return r>0?n.slice(0,r)+n.slice(s+1):n}(We)),bt&&0==+We&&"+"!==le&&(bt=!1),It=(bt?"("===le?le:m:"-"===le||"("===le?"":le)+It,Ht=("s"===Ye?RG[8+EG/3]:"")+Ht+(bt&&"("===le?")":""),hn)for(it=-1,kt=We.length;++it<kt;)if(48>(et=We.charCodeAt(it))||et>57){Ht=(46===et?s+We.slice(it+1):We.slice(it))+Ht,We=We.slice(0,it);break}}ue&&!xe&&(We=e(We,1/0));var Gt=It.length+We.length+Ht.length,pn=Gt<fe?new Array(fe-Gt+1).join(Z):"";switch(ue&&xe&&(We=e(pn+We,pn.length?fe-Ht.length:1/0),pn=""),Q){case"<":We=It+We+Ht+pn;break;case"=":We=It+pn+We+Ht;break;case"^":We=pn.slice(0,Gt=pn.length>>1)+It+We+Ht+pn.slice(Gt);break;default:We=pn+It+We+Ht}return o(We)}return Ne=void 0===Ne?6:/[gprs]/.test(Ye)?Math.max(1,Math.min(21,Ne)):Math.max(0,Math.min(20,Ne)),Kt.toString=function(){return N+""},Kt}return{format:T,formatPrefix:function F(N,Z){var Q=T(((N=cA(N)).type="f",N)),le=3*Math.max(-8,Math.min(8,Math.floor(Mx(Z)/3))),_e=Math.pow(10,-le),xe=RG[8+le/3];return function(fe){return Q(_e*fe)+xe}}}}(n),kG=hA.format,PG=hA.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]}),Cx.prototype={constructor:Cx,scale:function(n){return 1===n?this:new Cx(this.k*n,this.x,this.y)},translate:function(n,e){return 0===n&0===e?this:new Cx(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new Cx(1,0,0);var fhe=A(181);let OG=(()=>{class n{constructor(){this.aspectRatio=0,this.Width=0,this.Height=0,this.scene=new nD,this.scene.background=new rr(5396334),this.render=this.render.bind(this)}OnInit(t,r,s,o,u){this.aspectRatio=t,this.Width=o,this.Height=u,this.createCamera(t,o,u),this.add(new hL(15790320)),this.createRender(r,s,o,u),this.addControls(),this.createHelper()}createHelper(){this.GridHelper=new xU(200,20),this.GridHelper.geometry.rotateX(Math.PI/2),this.scene.add(this.GridHelper)}addControls(){new fhe.OrbitControls(this.camera,this.renderer.domElement).addEventListener("change",this.render)}createCamera(t,r,s){t=null===t?this.aspectRatio:t,r=null===r?this.Width:r,s=null===s?this.Height:s,void 0!==this.scene.getObjectByName("camera")&&this.scene.remove(this.camera),this.camera=new Bc(70,t,.1,1e3),this.camera.position.set(0,-50,20),this.camera.name="camera",this.scene.add(this.camera)}createRender(t,r,s,o){this.renderer=new ha({preserveDrawingBuffer:!0,canvas:t,alpha:!0,antialias:!0}),this.renderer.setPixelRatio(r),this.renderer.setSize(s,o),this.renderer.shadowMap.enabled=!0}onResize(t,r,s){this.camera.updateProjectionMatrix(),this.renderer.setSize(r,s),this.render()}render(){this.renderer.render(this.scene,this.camera)}getBoundingClientRect(){return this.renderer.domElement.getBoundingClientRect()}add(...t){for(const r of t)this.scene.add(r)}remove(...t){for(const r of t)this.scene.remove(r)}removeByName(...t){for(const r of t){const s=this.scene.getObjectByName(r);void 0!==s&&this.scene.remove(s)}}getSettingJson(){return{camera:{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z}}}clear(){for(;this.scene.children.length>0;)this.scene.remove(this.scene.children[0]);this.createHelper()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),NG=(()=>{class n{constructor(t){this.scene=t}loadVYK(t){this.scene.clear();const r=this.parseASCII(t),s=r.box,o=new $m({vertexColors:!0}),u=new Tc(s,o);this.scene.add(u);const m=new Hc({color:255});for(const w of r.edge){const T=new B_(w,m);this.scene.add(T)}this.scene.render()}parseASCII(t){const r=[],s=new Array,o=[],u=[],m=/^(\d+)\s+([\s\d]*)/,w=/^[^\d.\s-]+/,T=/^POINTS /,F=/^CELLS /,N=[0,2,1,0,3,2,0,1,5,0,5,4,1,2,6,1,6,5,2,7,6,2,3,7,3,0,7,0,4,7,4,5,6,4,6,7],Z=[4,0,1,5,6,2,1,5,4,0,3,7,6,2,3,7,6,5,4,7],Q=/^CELL_DATA /,le=t.split("\n");let _e=0,xe=0;for(;xe<le.length;){let Re=le[xe].trim();if(null!==T.exec(Re)){const Ye=Re.split(" "),st=parseInt(Ye[1]);for(;null!==w.exec(le[xe]);)xe++;for(let ht=xe;ht<xe+st;ht++){Re=le[ht].trim();const Et=Re.split(" "),hn=parseFloat(Et[0]),Kt=parseFloat(Et[1]),We=parseFloat(Et[2]);o.push(hn,Kt,We)}_e=xe+st;break}xe++}for(xe=_e;xe<le.length;){let Re=le[xe].trim();if(null!==F.exec(Re)){const Ye=Re.split(" "),st=parseInt(Ye[1]);for(;null!==w.exec(le[xe]);)xe++;for(let ht=xe;ht<xe+st;ht++){Re=le[ht].trim();const Et=m.exec(Re),hn=parseInt(Et[1]),Kt=Et[2].split(/\s+/);if(8==hn){N.forEach(it=>r.push(parseInt(Kt[it])));const We=new Array;Z.forEach(it=>{We.push(parseInt(Kt[it]))});const It=[];We.forEach(it=>{It.push(new ct(o[3*it],o[3*it+1],o[3*it+2]))});const Ht=(new ps).setFromPoints(It);s.push(Ht)}}_e=xe+st;break}xe++}for(xe=_e;xe<le.length;){let Re=le[xe].trim();if(null!==Q.exec(Re)){const Ye=Re.split(" "),st=parseInt(Ye[1]);for(;null!==w.exec(le[xe]);)xe++;for(let ht=xe;ht<xe+st;ht++){Re=le[ht].trim();const Et=parseFloat(Re);u.push(Et)}_e=xe+st;break}xe++}xe=_e;let fe=new ps;fe.setIndex(r),fe.setAttribute("position",new Dr(o,3));const ue=new rr(15790320);if(u.length===s.length){const Re=Math.max(...u),Ye=Math.min(...u),st=[];var Ne=LG().domain([Ye,0,Re]).range(["red","white","blue"]);for(let ht=0;ht<u.length;ht++){const Kt=$M(Ne(u[ht])),it=new rr(Kt.r/255,Kt.g/255,Kt.b/255);for(let kt=0;kt<36;kt++)st.push(it.r,it.g,it.b)}fe.setAttribute("color",new Dr(st,3))}else{fe=fe.toNonIndexed();const ht=fe.attributes.position.count/3,Et=[];for(let hn=0;hn<ht;hn++)Et.push(ue.r,ue.g,ue.b),Et.push(ue.r,ue.g,ue.b),Et.push(ue.r,ue.g,ue.b);fe.setAttribute("color",new Dr(Et,3))}return{box:fe,edge:s}}}return n.\u0275fac=function(t){return new(t||n)(Sn(OG))},n.\u0275prov=ki({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var phe=A(788),mhe=A.n(phe);A(853),A(405);const ghe=["pqgrid"];let BG=(()=>{class n{createGrid(){this.grid=mhe().grid(this.div.nativeElement,this.options)}ngOnChanges(t){t.options.firstChange||(this.grid.destroy(),this.createGrid())}ngAfterViewInit(){this.createGrid()}refreshDataAndView(){null!==this.grid&&(this.grid.refreshDataAndView(),console.log("refreshDataAndView"))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=or({type:n,selectors:[["app-sheet"]],viewQuery:function(t,r){if(1&t&&fd(ghe,5),2&t){let s;Ua(s=Ga())&&(r.div=s.first)}},inputs:{options:"options"},features:[Ci],decls:3,vars:0,consts:[[1,"datasheet"],["pqgrid",""]],template:function(t,r){1&t&&(Jr(0,"div",0),xl(1,"div",null,1),ts())},styles:["div.pq-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 5px}button.delete_btn[_ngcontent-%COMP%]{margin:-3px 0}.pq-row-delete[_ngcontent-%COMP%]{text-decoration:line-through}.pq-row-delete[_ngcontent-%COMP%] > .pq-grid-cell[_ngcontent-%COMP%]{background-color:pink}.datasheet[_ngcontent-%COMP%]{padding:0 16px 16px;z-index:1}"]}),n})();const _he=["grid"];let vhe=(()=>{class n{constructor(t,r,s,o){this.http=t,this.dialogRef=r,this.data=s,this.vtk=o,this.options={width:270,height:430,locale:"jp",showTop:!1,showHeader:!1,resizable:!1,draggable:!1,numberCell:{show:!0},stripeRows:!1,colModel:[{title:"key",width:160,editable:!1,dataType:"string"},{title:"value",width:70,dataType:"float"}],dataModel:{data:this.data.body},change:(u,m)=>{this.data.isCalcrated=!1}}}ngOnInit(){null==this.data.get_vtk()?this.get_vtk("assets/default_bridge.vtk"):this.vtk.loadVYK(this.data.get_vtk())}apply(){const t=this.data.getPlantFEMJson(),r=new window.File([t],"generate_bridge.json",{type:"application/json"}),s=new FormData;s.append("files",r,r.name),this.http.post("https://plantfem.org:5555/bridge_creator/uploadfile",s,{responseType:"text"}).subscribe(o=>{const w=(new DOMParser).parseFromString(o,"text/html").getElementsByClassName("g-3");for(let T=0;T<w.length;T++){let Z="https://plantfem.org:5555/bridge_creator/downloadfile/?filename=";Z+=w[T][0].value,this.get_vtk(Z);break}},o=>{alert("error get_vtk_link()"),console.error(o)})}get_vtk(t){this.http.get(t,{responseType:"text"}).subscribe(r=>{this.data.set_vtk(r),this.vtk.loadVYK(r)},r=>{alert(r.message),console.error(r)})}}return n.\u0275fac=function(t){return new(t||n)(Bt(Y1),Bt(Q1),Bt(vT),Bt(NG))},n.\u0275cmp=or({type:n,selectors:[["app-side-right-body"]],viewQuery:function(t,r){if(1&t&&fd(_he,5),2&t){let s;Ua(s=Ga())&&(r.grid=s.first)}},decls:10,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"options"],["grid",""],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close"]],template:function(t,r){1&t&&(Jr(0,"h1",0),ri(1,"\u9ad8\u67b6\u6a4b\u30e2\u30c7\u30eb\u306e\u751f\u6210"),ts(),Jr(2,"div",1),xl(3,"app-sheet",2,3),ts(),Jr(5,"div",4)(6,"button",5),No("click",function(){return r.apply()}),ri(7,"\u66f4\u65b0"),ts(),Jr(8,"button",6),ri(9,"\u89e3\u6790\u6761\u4ef6\u3078"),ts()()),2&t&&(Fr(3),Zr("options",r.options),Fr(5),Zr("mat-dialog-close",2))},directives:[fk,pk,BG,mk,QE,dk],styles:[".my-radio-group[_ngcontent-%COMP%]{margin-left:15px;margin-bottom:10px}.mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}.result-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0;align-items:flex-start}.result-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),n})();const yhe=["grid"];function bhe(n,e){if(1&n){const t=Pm();Jr(0,"button",12),No("click",function(){return Ul(t),Bo().create_access_token()}),ri(1,"\u89e3\u6790\u7d50\u679c"),ts()}}function xhe(n,e){1&n&&(Jr(0,"div"),xl(1,"mat-spinner",13),ts())}let whe=(()=>{class n{constructor(t,r,s){this.http=t,this.dialogRef=r,this.data=s,this.isLoading=!1,this.options={width:270,height:430,locale:"jp",showTop:!1,showHeader:!1,resizable:!1,draggable:!1,numberCell:{show:!0},stripeRows:!1,colModel:[{title:"key",width:160,editable:!1,dataType:"string"},{title:"value",width:70,dataType:"float"}],dataModel:{data:this.data.pre},change:(o,u)=>{this.data.isCalcrated=!1}},this.delay_time=3e3}ngOnInit(){}create_access_token(){if(!0===this.data.isCalcrated)return void this.dialogRef.close(3);this.isLoading=!0;const t=this.data.get_vtk(),r=new window.File([t],"generate_bridge.vtk",{type:"text/plain"}),s=new FormData;s.append("files",r,r.name),this.http.post("https://plantfem.org:5555/upload_vtk_file/",s,{responseType:"text"}).subscribe(o=>{const w=(new DOMParser).parseFromString(o,"text/html").getElementsByClassName("g-3");for(let T=0;T<w.length;T++){this.calc_modal_analysis(w[T][0].value);break}},o=>{alert("error create_access_token()"),console.error(o),this.isLoading=!1})}calc_modal_analysis(t){const r=this.data.get_calc_url(t);this.http.get(r,{responseType:"text"}).subscribe(s=>{this.parse_result_page(s)},s=>{alert("calc_modal_analysis "+s.message),console.error(s),this.isLoading=!1})}parse_result_page(t){const o=(new DOMParser).parseFromString(t,"text/html").getElementsByName("filename");setTimeout(()=>this.x_get_vtk(o,0),this.delay_time)}x_get_vtk(t,r){const o=t[r].value;let u="https://plantfem.org:5555/downloadfile/?filename=";u+=o,console.log("result",r,o),this.http.get(u,{responseType:"text"}).subscribe(m=>{this.data.set_result_vtk(m,r),r<t.length-1?setTimeout(()=>this.x_get_vtk(t,r+1),this.delay_time):(this.data.isCalcrated=!0,this.isLoading=!1,this.dialogRef.close(3))},m=>{alert("get_vtk "+m.message),console.error("get_vtk",r,o,m.message),this.isLoading=!1})}}return n.\u0275fac=function(t){return new(t||n)(Bt(Y1),Bt(Q1),Bt(vT))},n.\u0275cmp=or({type:n,selectors:[["app-side-right-pre"]],viewQuery:function(t,r){if(1&t&&fd(yhe,5),2&t){let s;Ua(s=Ga())&&(r.grid=s.first)}},decls:16,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"my-radio-group"],["aria-label","Select an option"],["value","1","checked",""],["value","2","disabled","true"],[3,"options"],["grid",""],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],[4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["diameter","40"]],template:function(t,r){1&t&&(Jr(0,"h1",0),ri(1,"\u89e3\u6790\u6761\u4ef6\u306e\u8a2d\u5b9a"),ts(),Jr(2,"div",1)(3,"div",2)(4,"mat-radio-group",3)(5,"mat-radio-button",4),ri(6,"\u9759\u7684\u89e3\u6790"),ts(),Jr(7,"mat-radio-button",5),ri(8,"\u30e2\u30fc\u30c9\u89e3\u6790"),ts()()(),xl(9,"app-sheet",6,7),ts(),Jr(11,"div",8)(12,"button",9),ri(13,"\u623b\u308b"),ts(),cs(14,bhe,2,0,"button",10),cs(15,xhe,2,0,"div",11),ts()),2&t&&(Fr(9),Zr("options",r.options),Fr(3),Zr("mat-dialog-close",1),Fr(2),Zr("ngIf",!r.isLoading),Fr(1),Zr("ngIf",r.isLoading))},directives:[fk,pk,bk,xk,BG,mk,QE,dk,r0,qm],styles:[".my-radio-group[_ngcontent-%COMP%]{margin-left:15px;margin-bottom:10px}.mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}.result-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0;align-items:flex-start}.result-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),n})();function Mhe(n,e){if(1&n){const t=Pm();Jr(0,"mat-radio-button",6),No("change",function(){const o=Ul(t).index;return Bo().radioChange(o)}),ri(1),ts()}if(2&n){const t=e.$implicit;Zr("value",t),Fr(1),Or(" ",t," ")}}let Che=(()=>{class n{constructor(t,r){this.data=t,this.vtk=r,this.seasons=["Deformation & mean stress","Deformation & s(1,1)","Deformation & s(2,2)","Deformation & s(3,3)","Deformation & s(1,2)","Deformation & s(1,3)","Deformation & s(2,3)"]}ngOnInit(){this.favoriteSeason=this.seasons[0],this.radioChange(0)}radioChange(t){const r=this.data.get_result_vtk(t);this.vtk.loadVYK(r)}}return n.\u0275fac=function(t){return new(t||n)(Bt(vT),Bt(NG))},n.\u0275cmp=or({type:n,selectors:[["app-side-right-static-result"]],decls:10,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["aria-labelledby","example-radio-group-label",1,"result-radio-group",3,"ngModel","ngModelChange"],["class","result-radio-button",3,"value","change",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close"],[1,"result-radio-button",3,"value","change"]],template:function(t,r){1&t&&(Jr(0,"h1",0),ri(1,"\u89e3\u6790\u7d50\u679c\u306e\u8868\u793a"),ts(),Jr(2,"div",1)(3,"mat-radio-group",2),No("ngModelChange",function(o){return r.favoriteSeason=o}),cs(4,Mhe,2,2,"mat-radio-button",3),ts(),Jr(5,"div"),ri(6),ts()(),Jr(7,"div",4)(8,"button",5),ri(9,"\u89e3\u6790\u6761\u4ef6\u306e\u8a2d\u5b9a\u306b\u623b\u308b"),ts()()),2&t&&(Fr(3),Zr("ngModel",r.favoriteSeason),Fr(1),Zr("ngForOf",r.seasons),Fr(2),Or("Your favorite season is: ",r.favoriteSeason,""),Fr(2),Zr("mat-dialog-close",2))},directives:[fk,pk,bk,$3,JR,bR,xk,mk,QE,dk],styles:[".my-radio-group[_ngcontent-%COMP%]{margin-left:15px;margin-bottom:10px}.mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}.result-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0;align-items:flex-start}.result-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),n})();const She=["stepper"];function Ehe(n,e){1&n&&xl(0,"mat-step",13),2&n&&Zr("stepControl",Bo().dummyFormGroup)}let The=(()=>{class n{constructor(t,r,s){this.dialog=t,this._formBuilder=r,this.data=s,this.dummyFormGroup=this._formBuilder.group({firstCtrl:["",W9.required]})}ngOnInit(){this.openBodyDialog()}stepChange(t){this.currentDialog.close(-1*(t.selectedIndex+1))}openBodyDialog(){this.currentDialog=this.openDialog(vhe),this.currentDialog.afterClosed().subscribe(t=>{2===Math.abs(t)?(t>0&&this.myStepper.next(),this.openPreDialog()):3===Math.abs(t)&&(t>0&&(this.myStepper.next(),this.myStepper.next()),this.openStaticResultDialog())})}openPreDialog(){this.currentDialog=this.openDialog(whe),this.currentDialog.afterClosed().subscribe(t=>{1===Math.abs(t)?(t>0&&this.myStepper.previous(),this.openBodyDialog()):3===Math.abs(t)&&(t>0&&this.myStepper.next(),this.openStaticResultDialog())})}openStaticResultDialog(){this.currentDialog=this.openDialog(Che),this.currentDialog.afterClosed().subscribe(t=>{2===Math.abs(t)?(t>0&&this.myStepper.previous(),this.openPreDialog()):1===Math.abs(t)&&(t>0&&(this.myStepper.previous(),this.myStepper.previous()),this.openBodyDialog())})}openDialog(t){const s=window.innerHeight-100;return this.dialog.open(t,{width:"350px",height:s+"px",position:{right:"10px",top:"70px"},hasBackdrop:!1})}open(t){const r=t.target.files[0];t.target.value="",this.fileToText(r).then(s=>{JSON.parse(s)}).catch(s=>{alert(s)})}fileToText(t){const r=new FileReader;return r.readAsText(t),new Promise((s,o)=>{r.onload=()=>{s(r.result)},r.onerror=()=>{o(r.error)}})}save(){const t=JSON.stringify({});new window.Blob([t],{type:"text/plain"})}}return n.\u0275fac=function(t){return new(t||n)(Bt(YE),Bt(Nj),Bt(vT))},n.\u0275cmp=or({type:n,selectors:[["app-menu"]],viewQuery:function(t,r){if(1&t&&fd(She,5),2&t){let s;Ua(s=Ga())&&(r.myStepper=s.first)}},decls:24,vars:4,consts:[["color","primary"],["mat-icon-button","","aria-label","Example icon-button with menu icon",1,"example-icon",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item",""],["type","file","accept","application/json",2,"display","none",3,"change"],["mat-menu-item","",3,"click"],[1,"example-spacer"],[2,"height","64px",3,"selectionChange"],["stepper",""],["label","3D\u30e2\u30c7\u30eb\u751f\u6210",3,"stepControl"],["label","\u89e3\u6790\u6761\u4ef6",3,"stepControl"],["label","\u89e3\u6790\u7d50\u679c",3,"stepControl",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon",1,"example-icon"],["label","\u89e3\u6790\u7d50\u679c",3,"stepControl"]],template:function(t,r){if(1&t&&(Jr(0,"mat-toolbar",0)(1,"button",1)(2,"mat-icon"),ri(3,"menu"),ts()(),Jr(4,"mat-menu",null,2)(6,"label",3)(7,"span"),ri(8," \u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304f "),Jr(9,"input",4),No("change",function(o){return r.open(o)}),ts()()(),Jr(10,"button",5),No("click",function(){return r.save()}),ri(11,"\u30d5\u30a1\u30a4\u30eb\u3092\u4fdd\u5b58"),ts()(),Jr(12,"span"),ri(13,"plantFEM-\u9ad8\u67b6\u6a4bFEM\u89e3\u6790"),ts(),xl(14,"span",6),Jr(15,"mat-stepper",7,8),No("selectionChange",function(o){return r.stepChange(o)}),xl(17,"mat-step",9)(18,"mat-step",10),cs(19,Ehe,1,1,"mat-step",11),ts(),xl(20,"span",6),Jr(21,"button",12)(22,"mat-icon"),ri(23,"share"),ts()()()),2&t){const s=cp(5);Fr(1),Zr("matMenuTriggerFor",s),Fr(16),Zr("stepControl",r.dummyFormGroup),Fr(1),Zr("stepControl",r.dummyFormGroup),Fr(1),Zr("ngIf",r.data.isCalcrated)}},directives:[EK,QE,bK,qH,gK,nT,nz,ez,r0],styles:[".example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),n})();const Dhe=["myCanvas"];let Ahe=(()=>{class n{constructor(t,r){this.ngZone=t,this.scene=r,ra.DefaultUp.set(0,0,1)}get canvas(){return this.canvasRef.nativeElement}ngAfterViewInit(){this.scene.OnInit(this.getAspectRatio(),this.canvas,devicePixelRatio,window.innerWidth,window.innerHeight),this.animate()}ngOnDestroy(){}animate(){this.ngZone.runOutsideAngular(()=>{window.addEventListener("DOMContentLoaded",()=>{this.scene.render()})})}onMouseDown(t){}onMouseUp(t){}onMouseMove(t){}onResize(t){this.scene.onResize(this.getAspectRatio(),window.innerWidth,window.innerHeight)}getAspectRatio(){return 0===this.canvas.clientHeight?0:this.canvas.clientWidth/this.canvas.clientHeight}}return n.\u0275fac=function(t){return new(t||n)(Bt(mo),Bt(OG))},n.\u0275cmp=or({type:n,selectors:[["app-three"]],viewQuery:function(t,r){if(1&t&&fd(Dhe,7),2&t){let s;Ua(s=Ga())&&(r.canvasRef=s.first)}},hostBindings:function(t,r){1&t&&No("mousedown",function(o){return r.onMouseDown(o)})("mouseup",function(o){return r.onMouseUp(o)})("mousemove",function(o){return r.onMouseMove(o)})("resize",function(o){return r.onResize(o)},!1,Jx)},decls:2,vars:0,consts:[["id","myCanvasS",3,"mousedown","mouseup","mousemove"],["myCanvas",""]],template:function(t,r){1&t&&(Jr(0,"canvas",0,1),No("mousedown",function(o){return r.onMouseDown(o)})("mouseup",function(o){return r.onMouseUp(o)})("mousemove",function(o){return r.onMouseMove(o)}),ts())},styles:["canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0}"]}),n})(),Ihe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=or({type:n,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"over-three"]],template:function(t,r){1&t&&xl(0,"app-menu",0)(1,"app-three")},directives:[The,Ahe],styles:[".over-three[_ngcontent-%COMP%]{z-index:10;position:relative}app-side-left[_ngcontent-%COMP%]{width:20%;display:block}"]}),n})(),Rhe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n,bootstrap:[Ihe]}),n.\u0275inj=Cs({providers:[],imports:[[x3,oee,Fj,LN,vX,oZ,rX,oJ,jH,ZH,$J,vk,oK,xK,TK,HK,ZK,YK]]}),n})();A(166),function c8(){IO=!1}(),b9().bootstrapModule(Rhe).catch(n=>console.error(n))},181:function(K,G,A){"use strict";var I,y=this&&this.__extends||(I=function(P,B){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,J){U.__proto__=J}||function(U,J){for(var W in J)Object.prototype.hasOwnProperty.call(J,W)&&(U[W]=J[W])})(P,B)},function(P,B){if("function"!=typeof B&&null!==B)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function U(){this.constructor=P}I(P,B),P.prototype=null===B?Object.create(B):(U.prototype=B.prototype,new U)});Object.defineProperty(G,"__esModule",{value:!0}),G.OrbitControls=void 0;var l=A(338),_={type:"change"},p={type:"start"},v={type:"end"},C=1e-6,D=function(I){function P(B,U,J){var W=I.call(this)||this;return W.object=B,W.domElement=void 0!==U?U:document,W.window=void 0!==J?J:window,W.enabled=!0,W.target=new l.Vector3,W.minDistance=0,W.maxDistance=1/0,W.minZoom=0,W.maxZoom=1/0,W.minPolarAngle=0,W.maxPolarAngle=Math.PI,W.minAzimuthAngle=-1/0,W.maxAzimuthAngle=1/0,W.enableDamping=!1,W.dampingFactor=.25,W.enableZoom=!0,W.zoomSpeed=1,W.enableRotate=!0,W.rotateSpeed=1,W.enablePan=!0,W.keyPanSpeed=7,W.autoRotate=!1,W.autoRotateSpeed=2,W.enableKeys=!0,W.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},W.mouseButtons={ORBIT:l.MOUSE.LEFT,ZOOM:l.MOUSE.MIDDLE,PAN:l.MOUSE.RIGHT},W.target0=W.target.clone(),W.position0=W.object.position.clone(),W.zoom0=W.object.zoom,W.updateOffset=new l.Vector3,W.updateQuat=(new l.Quaternion).setFromUnitVectors(B.up,new l.Vector3(0,1,0)),W.updateQuatInverse=W.updateQuat.clone().invert(),W.updateLastPosition=new l.Vector3,W.updateLastQuaternion=new l.Quaternion,W.state=-1,W.scale=1,W.spherical=new l.Spherical,W.sphericalDelta=new l.Spherical,W.panOffset=new l.Vector3,W.zoomChanged=!1,W.rotateStart=new l.Vector2,W.rotateEnd=new l.Vector2,W.rotateDelta=new l.Vector2,W.panStart=new l.Vector2,W.panEnd=new l.Vector2,W.panDelta=new l.Vector2,W.dollyStart=new l.Vector2,W.dollyEnd=new l.Vector2,W.dollyDelta=new l.Vector2,W.panLeftV=new l.Vector3,W.panUpV=new l.Vector3,W.panInternalOffset=new l.Vector3,W.onMouseDown=function(re){if(!1!==W.enabled){if(re.preventDefault(),re.button===W.mouseButtons.ORBIT){if(!1===W.enableRotate)return;W.rotateStart.set(re.clientX,re.clientY),W.state=0}else if(re.button===W.mouseButtons.ZOOM){if(!1===W.enableZoom)return;W.dollyStart.set(re.clientX,re.clientY),W.state=1}else if(re.button===W.mouseButtons.PAN){if(!1===W.enablePan)return;W.panStart.set(re.clientX,re.clientY),W.state=2}-1!==W.state&&(document.addEventListener("mousemove",W.onMouseMove,!1),document.addEventListener("mouseup",W.onMouseUp,!1),W.dispatchEvent(p))}},W.onMouseMove=function(re){if(!1!==W.enabled)if(re.preventDefault(),0===W.state){if(!1===W.enableRotate)return;W.rotateEnd.set(re.clientX,re.clientY),W.rotateDelta.subVectors(W.rotateEnd,W.rotateStart);var he=W.domElement===document?W.domElement.body:W.domElement;W.rotateLeft(2*Math.PI*W.rotateDelta.x/he.clientWidth*W.rotateSpeed),W.rotateUp(2*Math.PI*W.rotateDelta.y/he.clientHeight*W.rotateSpeed),W.rotateStart.copy(W.rotateEnd),W.update()}else if(1===W.state){if(!1===W.enableZoom)return;W.dollyEnd.set(re.clientX,re.clientY),W.dollyDelta.subVectors(W.dollyEnd,W.dollyStart),W.dollyDelta.y>0?W.dollyIn(W.getZoomScale()):W.dollyDelta.y<0&&W.dollyOut(W.getZoomScale()),W.dollyStart.copy(W.dollyEnd),W.update()}else if(2===W.state){if(!1===W.enablePan)return;W.panEnd.set(re.clientX,re.clientY),W.panDelta.subVectors(W.panEnd,W.panStart),W.pan(W.panDelta.x,W.panDelta.y),W.panStart.copy(W.panEnd),W.update()}},W.onMouseUp=function(re){!1!==W.enabled&&(document.removeEventListener("mousemove",W.onMouseMove,!1),document.removeEventListener("mouseup",W.onMouseUp,!1),W.dispatchEvent(v),W.state=-1)},W.onMouseWheel=function(re){!1===W.enabled||!1===W.enableZoom||-1!==W.state&&0!==W.state||(re.preventDefault(),re.stopPropagation(),re.deltaY<0?W.dollyOut(W.getZoomScale()):re.deltaY>0&&W.dollyIn(W.getZoomScale()),W.update(),W.dispatchEvent(p),W.dispatchEvent(v))},W.onKeyDown=function(re){if(!1!==W.enabled&&!1!==W.enableKeys&&!1!==W.enablePan)switch(re.keyCode){case W.keys.UP:W.pan(0,W.keyPanSpeed),W.update();break;case W.keys.BOTTOM:W.pan(0,-W.keyPanSpeed),W.update();break;case W.keys.LEFT:W.pan(W.keyPanSpeed,0),W.update();break;case W.keys.RIGHT:W.pan(-W.keyPanSpeed,0),W.update()}},W.onTouchStart=function(re){if(!1!==W.enabled){switch(re.touches.length){case 1:if(!1===W.enableRotate)return;W.rotateStart.set(re.touches[0].pageX,re.touches[0].pageY),W.state=3;break;case 2:if(!1===W.enableZoom)return;var he=re.touches[0].pageX-re.touches[1].pageX,ie=re.touches[0].pageY-re.touches[1].pageY,ae=Math.sqrt(he*he+ie*ie);W.dollyStart.set(0,ae),W.state=4;break;case 3:if(!1===W.enablePan)return;W.panStart.set(re.touches[0].pageX,re.touches[0].pageY),W.state=5;break;default:W.state=-1}-1!==W.state&&W.dispatchEvent(p)}},W.onTouchMove=function(re){if(!1!==W.enabled)switch(re.preventDefault(),re.stopPropagation(),re.touches.length){case 1:if(!1===W.enableRotate||3!==W.state)return;W.rotateEnd.set(re.touches[0].pageX,re.touches[0].pageY),W.rotateDelta.subVectors(W.rotateEnd,W.rotateStart);var he=W.domElement===document?W.domElement.body:W.domElement;W.rotateLeft(2*Math.PI*W.rotateDelta.x/he.clientWidth*W.rotateSpeed),W.rotateUp(2*Math.PI*W.rotateDelta.y/he.clientHeight*W.rotateSpeed),W.rotateStart.copy(W.rotateEnd),W.update();break;case 2:if(!1===W.enableZoom||4!==W.state)return;var ie=re.touches[0].pageX-re.touches[1].pageX,ae=re.touches[0].pageY-re.touches[1].pageY,Me=Math.sqrt(ie*ie+ae*ae);W.dollyEnd.set(0,Me),W.dollyDelta.subVectors(W.dollyEnd,W.dollyStart),W.dollyDelta.y>0?W.dollyOut(W.getZoomScale()):W.dollyDelta.y<0&&W.dollyIn(W.getZoomScale()),W.dollyStart.copy(W.dollyEnd),W.update();break;case 3:if(!1===W.enablePan||5!==W.state)return;W.panEnd.set(re.touches[0].pageX,re.touches[0].pageY),W.panDelta.subVectors(W.panEnd,W.panStart),W.pan(W.panDelta.x,W.panDelta.y),W.panStart.copy(W.panEnd),W.update();break;default:W.state=-1}},W.onTouchEnd=function(re){!1!==W.enabled&&(W.dispatchEvent(v),W.state=-1)},W.onContextMenu=function(re){re.preventDefault()},W.domElement.addEventListener("contextmenu",W.onContextMenu,!1),W.domElement.addEventListener("mousedown",W.onMouseDown,!1),W.domElement.addEventListener("wheel",W.onMouseWheel,!1),W.domElement.addEventListener("touchstart",W.onTouchStart,!1),W.domElement.addEventListener("touchend",W.onTouchEnd,!1),W.domElement.addEventListener("touchmove",W.onTouchMove,!1),W.window.addEventListener("keydown",W.onKeyDown,!1),W.update(),W}return y(P,I),P.prototype.update=function(){var B=this.object.position;return this.updateOffset.copy(B).sub(this.target),this.updateOffset.applyQuaternion(this.updateQuat),this.spherical.setFromVector3(this.updateOffset),this.autoRotate&&-1===this.state&&this.rotateLeft(this.getAutoRotationAngle()),this.spherical.theta+=this.sphericalDelta.theta,this.spherical.phi+=this.sphericalDelta.phi,this.spherical.theta=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,this.spherical.theta)),this.spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this.spherical.phi)),this.spherical.makeSafe(),this.spherical.radius*=this.scale,this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius)),this.target.add(this.panOffset),this.updateOffset.setFromSpherical(this.spherical),this.updateOffset.applyQuaternion(this.updateQuatInverse),B.copy(this.target).add(this.updateOffset),this.object.lookAt(this.target),!0===this.enableDamping?(this.sphericalDelta.theta*=1-this.dampingFactor,this.sphericalDelta.phi*=1-this.dampingFactor):this.sphericalDelta.set(0,0,0),this.scale=1,this.panOffset.set(0,0,0),!!(this.zoomChanged||this.updateLastPosition.distanceToSquared(this.object.position)>C||8*(1-this.updateLastQuaternion.dot(this.object.quaternion))>C)&&(this.dispatchEvent(_),this.updateLastPosition.copy(this.object.position),this.updateLastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0)},P.prototype.panLeft=function(B,U){this.panLeftV.setFromMatrixColumn(U,0),this.panLeftV.multiplyScalar(-B),this.panOffset.add(this.panLeftV)},P.prototype.panUp=function(B,U){this.panUpV.setFromMatrixColumn(U,1),this.panUpV.multiplyScalar(B),this.panOffset.add(this.panUpV)},P.prototype.pan=function(B,U){var J=this.domElement===document?this.domElement.body:this.domElement;if(this._checkPerspectiveCamera(this.object)){this.panInternalOffset.copy(this.object.position).sub(this.target);var re=this.panInternalOffset.length();re*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*B*re/J.clientHeight,this.object.matrix),this.panUp(2*U*re/J.clientHeight,this.object.matrix)}else this._checkOrthographicCamera(this.object)?(this.panLeft(B*(this.object.right-this.object.left)/this.object.zoom/J.clientWidth,this.object.matrix),this.panUp(U*(this.object.top-this.object.bottom)/this.object.zoom/J.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)},P.prototype.dollyIn=function(B){this._checkPerspectiveCamera(this.object)?this.scale/=B:this._checkOrthographicCamera(this.object)?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*B)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},P.prototype.dollyOut=function(B){this._checkPerspectiveCamera(this.object)?this.scale*=B:this._checkOrthographicCamera(this.object)?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/B)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},P.prototype.getAutoRotationAngle=function(){return 2*Math.PI/60/60*this.autoRotateSpeed},P.prototype.getZoomScale=function(){return Math.pow(.95,this.zoomSpeed)},P.prototype.rotateLeft=function(B){this.sphericalDelta.theta-=B},P.prototype.rotateUp=function(B){this.sphericalDelta.phi-=B},P.prototype.getPolarAngle=function(){return this.spherical.phi},P.prototype.getAzimuthalAngle=function(){return this.spherical.theta},P.prototype.dispose=function(){this.domElement.removeEventListener("contextmenu",this.onContextMenu,!1),this.domElement.removeEventListener("mousedown",this.onMouseDown,!1),this.domElement.removeEventListener("wheel",this.onMouseWheel,!1),this.domElement.removeEventListener("touchstart",this.onTouchStart,!1),this.domElement.removeEventListener("touchend",this.onTouchEnd,!1),this.domElement.removeEventListener("touchmove",this.onTouchMove,!1),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),this.window.removeEventListener("keydown",this.onKeyDown,!1)},P.prototype.reset=function(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(_),this.update(),this.state=-1},P.prototype.saveState=function(){this.target0.copy(this.target),this.position0.copy(this.object.position),(this._checkOrthographicCamera(this.object)||this._checkPerspectiveCamera(this.object))&&(this.zoom0=this.object.zoom)},Object.defineProperty(P.prototype,"center",{get:function(){return console.warn("Three.OrbitControls: .center has been renamed to .target"),this.target},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"noZoom",{get:function(){return console.warn("Three.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(B){console.warn("Three.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!B},enumerable:!1,configurable:!0}),P.prototype._checkPerspectiveCamera=function(B){return B.isPerspectiveCamera},P.prototype._checkOrthographicCamera=function(B){return B.isOrthographicCamera},P}(l.EventDispatcher);G.OrbitControls=D},338:(K,G,A)=>{"use strict";A.r(G),A.d(G,{ACESFilmicToneMapping:()=>an,AddEquation:()=>lt,AddOperation:()=>dt,AdditiveAnimationBlendMode:()=>au,AdditiveBlending:()=>Ce,AlphaFormat:()=>Dt,AlwaysDepth:()=>En,AlwaysStencilFunc:()=>vr,AmbientLight:()=>Bw,AmbientLightProbe:()=>jw,AnimationClip:()=>Qg,AnimationLoader:()=>QL,AnimationMixer:()=>XC,AnimationObjectGroup:()=>YC,AnimationUtils:()=>Da,ArcCurve:()=>Tw,ArrayCamera:()=>Ou,ArrowHelper:()=>nS,Audio:()=>UC,AudioAnalyser:()=>sI,AudioContext:()=>Bv,AudioListener:()=>iI,AudioLoader:()=>Ww,AxesHelper:()=>iS,AxisHelper:()=>dS,BackSide:()=>W,BasicDepthPacking:()=>lu,BasicShadowMap:()=>I,BinaryTextureLoader:()=>hd,Bone:()=>wv,BooleanKeyframeTrack:()=>nd,BoundingBoxHelper:()=>l1,Box2:()=>tu,Box3:()=>Fo,Box3Helper:()=>eS,BoxBufferGeometry:()=>ku,BoxGeometry:()=>ku,BoxHelper:()=>cp,BufferAttribute:()=>Wr,BufferGeometry:()=>wr,BufferGeometryLoader:()=>FC,ByteType:()=>ne,Cache:()=>Xl,Camera:()=>sc,CameraHelper:()=>hI,CanvasRenderer:()=>c1,CanvasTexture:()=>SC,CatmullRomCurve3:()=>Aw,CineonToneMapping:()=>Nn,CircleBufferGeometry:()=>gb,CircleGeometry:()=>gb,ClampToEdgeWrapping:()=>os,Clock:()=>HC,Color:()=>er,ColorKeyframeTrack:()=>ww,CompressedTexture:()=>Bu,CompressedTextureLoader:()=>Sw,ConeBufferGeometry:()=>vb,ConeGeometry:()=>vb,CubeCamera:()=>Qa,CubeReflectionMapping:()=>mi,CubeRefractionMapping:()=>fr,CubeTexture:()=>bc,CubeTextureLoader:()=>Ew,CubeUVReflectionMapping:()=>oo,CubeUVRefractionMapping:()=>fa,CubicBezierCurve:()=>Nb,CubicBezierCurve3:()=>Rw,CubicInterpolant:()=>Iv,CullFaceBack:()=>v,CullFaceFront:()=>C,CullFaceFrontBack:()=>D,CullFaceNone:()=>p,Curve:()=>eu,CurvePath:()=>LC,CustomBlending:()=>ce,CustomToneMapping:()=>hi,CylinderBufferGeometry:()=>Vg,CylinderGeometry:()=>Vg,Cylindrical:()=>uI,DataTexture:()=>eh,DataTexture2DArray:()=>ye,DataTexture3D:()=>Se,DataTextureLoader:()=>Ib,DataUtils:()=>fI,DecrementStencilOp:()=>Ve,DecrementWrapStencilOp:()=>At,DefaultLoadingManager:()=>kC,DepthFormat:()=>Ri,DepthStencilFormat:()=>Di,DepthTexture:()=>cw,DirectionalLight:()=>Cm,DirectionalLightHelper:()=>$C,DiscreteInterpolant:()=>Jg,DodecahedronBufferGeometry:()=>Ev,DodecahedronGeometry:()=>Ev,DoubleSide:()=>re,DstAlphaFactor:()=>Lt,DstColorFactor:()=>ni,DynamicBufferAttribute:()=>fp,DynamicCopyUsage:()=>aa,DynamicDrawUsage:()=>Fs,DynamicReadUsage:()=>or,EdgesGeometry:()=>Fr,EdgesHelper:()=>Bo,EllipseCurve:()=>e_,EqualDepth:()=>ii,EqualStencilFunc:()=>oi,EquirectangularReflectionMapping:()=>qs,EquirectangularRefractionMapping:()=>Sr,Euler:()=>Qe,EventDispatcher:()=>pl,ExtrudeBufferGeometry:()=>Kf,ExtrudeGeometry:()=>Kf,FaceColors:()=>Bt,FileLoader:()=>Hu,FlatShading:()=>he,Float16BufferAttribute:()=>Nd,Float32Attribute:()=>MI,Float32BufferAttribute:()=>Bn,Float64Attribute:()=>hS,Float64BufferAttribute:()=>Ha,FloatType:()=>yt,Fog:()=>Lg,FogExp2:()=>_v,Font:()=>Gw,FontLoader:()=>eI,FrontSide:()=>J,Frustum:()=>Wp,GLBufferAttribute:()=>o_,GLSL1:()=>ys,GLSL3:()=>Ol,GammaEncoding:()=>Uh,GreaterDepth:()=>dr,GreaterEqualDepth:()=>Os,GreaterEqualStencilFunc:()=>ls,GreaterStencilFunc:()=>gn,GridHelper:()=>Xw,Group:()=>Pg,HalfFloatType:()=>Mt,HemisphereLight:()=>kw,HemisphereLightHelper:()=>KC,HemisphereLightProbe:()=>qw,IcosahedronBufferGeometry:()=>bw,IcosahedronGeometry:()=>bw,ImageBitmapLoader:()=>Uw,ImageLoader:()=>$g,ImageUtils:()=>ml,ImmediateRenderObject:()=>ap,IncrementStencilOp:()=>Be,IncrementWrapStencilOp:()=>Je,InstancedBufferAttribute:()=>Wb,InstancedBufferGeometry:()=>Sm,InstancedInterleavedBuffer:()=>Yw,InstancedMesh:()=>gm,Int16Attribute:()=>uS,Int16BufferAttribute:()=>Fd,Int32Attribute:()=>No,Int32BufferAttribute:()=>uu,Int8Attribute:()=>pp,Int8BufferAttribute:()=>rc,IntType:()=>Ge,InterleavedBuffer:()=>Jc,InterleavedBufferAttribute:()=>td,Interpolant:()=>fu,InterpolateDiscrete:()=>Mo,InterpolateLinear:()=>Sf,InterpolateSmooth:()=>Ed,InvertStencilOp:()=>xt,JSONLoader:()=>pS,KeepStencilOp:()=>ve,KeyframeTrack:()=>rh,LOD:()=>$x,LatheBufferGeometry:()=>xw,LatheGeometry:()=>xw,Layers:()=>wt,LensFlare:()=>gS,LessDepth:()=>Dn,LessEqualDepth:()=>ji,LessEqualStencilFunc:()=>cn,LessStencilFunc:()=>Cn,Light:()=>sd,LightProbe:()=>i_,Line:()=>Th,Line3:()=>op,LineBasicMaterial:()=>yl,LineCurve:()=>np,LineCurve3:()=>Bb,LineDashedMaterial:()=>bm,LineLoop:()=>pb,LinePieces:()=>bI,LineSegments:()=>Kc,LineStrip:()=>r1,LinearEncoding:()=>sl,LinearFilter:()=>$i,LinearInterpolant:()=>xm,LinearMipMapLinearFilter:()=>z,LinearMipMapNearestFilter:()=>b,LinearMipmapLinearFilter:()=>k,LinearMipmapNearestFilter:()=>Is,LinearToneMapping:()=>zt,Loader:()=>bl,LoaderUtils:()=>zw,LoadingManager:()=>Cw,LogLuvEncoding:()=>Ac,LoopOnce:()=>Vh,LoopPingPong:()=>tc,LoopRepeat:()=>Np,LuminanceAlphaFormat:()=>qn,LuminanceFormat:()=>ln,MOUSE:()=>d,Material:()=>Yo,MaterialLoader:()=>Hw,Math:()=>Yi,MathUtils:()=>Yi,Matrix3:()=>lo,Matrix4:()=>pr,MaxEquation:()=>je,Mesh:()=>io,MeshBasicMaterial:()=>qc,MeshDepthMaterial:()=>rb,MeshDistanceMaterial:()=>sb,MeshFaceMaterial:()=>Zr,MeshLambertMaterial:()=>Av,MeshMatcapMaterial:()=>ep,MeshNormalMaterial:()=>$f,MeshPhongMaterial:()=>Ab,MeshPhysicalMaterial:()=>Qf,MeshStandardMaterial:()=>Rh,MeshToonMaterial:()=>ym,MinEquation:()=>De,MirroredRepeatWrapping:()=>Ls,MixOperation:()=>_n,MultiMaterial:()=>s1,MultiplyBlending:()=>Ue,MultiplyOperation:()=>Fn,NearestFilter:()=>vo,NearestMipMapLinearFilter:()=>Zu,NearestMipMapNearestFilter:()=>ja,NearestMipmapLinearFilter:()=>sr,NearestMipmapNearestFilter:()=>ca,NeverDepth:()=>zi,NeverStencilFunc:()=>Ft,NoBlending:()=>ae,NoColors:()=>iF,NoToneMapping:()=>nt,NormalAnimationBlendMode:()=>Cs,NormalBlending:()=>Me,NotEqualDepth:()=>Fe,NotEqualStencilFunc:()=>_r,NumberKeyframeTrack:()=>Kg,Object3D:()=>Ci,ObjectLoader:()=>OC,ObjectSpaceNormalMap:()=>q,OctahedronBufferGeometry:()=>Eb,OctahedronGeometry:()=>Eb,OneFactor:()=>Xe,OneMinusDstAlphaFactor:()=>Xn,OneMinusDstColorFactor:()=>en,OneMinusSrcAlphaFactor:()=>Pt,OneMinusSrcColorFactor:()=>Jt,OrthographicCamera:()=>n_,PCFShadowMap:()=>P,PCFSoftShadowMap:()=>B,PMREMGenerator:()=>gI,ParametricBufferGeometry:()=>Wg,ParametricGeometry:()=>Wg,Particle:()=>Jr,ParticleBasicMaterial:()=>rF,ParticleSystem:()=>ts,ParticleSystemMaterial:()=>wI,Path:()=>Pv,PerspectiveCamera:()=>ga,Plane:()=>Ca,PlaneBufferGeometry:()=>Kh,PlaneGeometry:()=>Kh,PlaneHelper:()=>dI,PointCloud:()=>xI,PointCloudMaterial:()=>xl,PointLight:()=>Ov,PointLightHelper:()=>l_,Points:()=>_m,PointsMaterial:()=>nf,PolarGridHelper:()=>QC,PolyhedronBufferGeometry:()=>Yf,PolyhedronGeometry:()=>Yf,PositionalAudio:()=>GC,PropertyBinding:()=>Pc,PropertyMixer:()=>sh,QuadraticBezierCurve:()=>Hb,QuadraticBezierCurve3:()=>kv,Quaternion:()=>Ds,QuaternionKeyframeTrack:()=>wm,QuaternionLinearInterpolant:()=>Mw,REVISION:()=>l,RGBADepthPacking:()=>cu,RGBAFormat:()=>bn,RGBAIntegerFormat:()=>Ur,RGBA_ASTC_10x10_Format:()=>Fa,RGBA_ASTC_10x5_Format:()=>La,RGBA_ASTC_10x6_Format:()=>Eu,RGBA_ASTC_10x8_Format:()=>Wi,RGBA_ASTC_12x10_Format:()=>cr,RGBA_ASTC_12x12_Format:()=>Ts,RGBA_ASTC_4x4_Format:()=>Pe,RGBA_ASTC_5x4_Format:()=>Ke,RGBA_ASTC_5x5_Format:()=>yn,RGBA_ASTC_6x5_Format:()=>An,RGBA_ASTC_6x6_Format:()=>Rr,RGBA_ASTC_8x5_Format:()=>vs,RGBA_ASTC_8x6_Format:()=>Zi,RGBA_ASTC_8x8_Format:()=>Jn,RGBA_BPTC_Format:()=>qo,RGBA_ETC2_EAC_Format:()=>Pa,RGBA_PVRTC_2BPPV1_Format:()=>as,RGBA_PVRTC_4BPPV1_Format:()=>ua,RGBA_S3TC_DXT1_Format:()=>rl,RGBA_S3TC_DXT3_Format:()=>$s,RGBA_S3TC_DXT5_Format:()=>Gi,RGBDEncoding:()=>ph,RGBEEncoding:()=>Gh,RGBEFormat:()=>ei,RGBFormat:()=>nn,RGBIntegerFormat:()=>$r,RGBM16Encoding:()=>Wh,RGBM7Encoding:()=>Hr,RGB_ETC1_Format:()=>js,RGB_ETC2_Format:()=>Ao,RGB_PVRTC_2BPPV1_Format:()=>Ns,RGB_PVRTC_4BPPV1_Format:()=>Do,RGB_S3TC_DXT1_Format:()=>oa,RGFormat:()=>Er,RGIntegerFormat:()=>Ui,RawShaderMaterial:()=>Yg,Ray:()=>na,Raycaster:()=>sp,RectAreaLight:()=>Nv,RedFormat:()=>Ai,RedIntegerFormat:()=>Ii,ReinhardToneMapping:()=>on,RepeatWrapping:()=>ea,ReplaceStencilOp:()=>we,ReverseSubtractEquation:()=>ut,RingBufferGeometry:()=>Ah,RingGeometry:()=>Ah,SRGB8_ALPHA8_ASTC_10x10_Format:()=>j_,SRGB8_ALPHA8_ASTC_10x5_Format:()=>Sd,SRGB8_ALPHA8_ASTC_10x6_Format:()=>Fp,SRGB8_ALPHA8_ASTC_10x8_Format:()=>Vc,SRGB8_ALPHA8_ASTC_12x10_Format:()=>Op,SRGB8_ALPHA8_ASTC_12x12_Format:()=>Cf,SRGB8_ALPHA8_ASTC_4x4_Format:()=>kp,SRGB8_ALPHA8_ASTC_5x4_Format:()=>ug,SRGB8_ALPHA8_ASTC_5x5_Format:()=>mc,SRGB8_ALPHA8_ASTC_6x5_Format:()=>Ma,SRGB8_ALPHA8_ASTC_6x6_Format:()=>Mf,SRGB8_ALPHA8_ASTC_8x5_Format:()=>Pp,SRGB8_ALPHA8_ASTC_8x6_Format:()=>Lp,SRGB8_ALPHA8_ASTC_8x8_Format:()=>zc,Scene:()=>Wf,SceneUtils:()=>mS,ShaderChunk:()=>Zs,ShaderLib:()=>ll,ShaderMaterial:()=>Zl,ShadowMaterial:()=>Dv,Shape:()=>rd,ShapeBufferGeometry:()=>vm,ShapeGeometry:()=>vm,ShapePath:()=>Em,ShapeUtils:()=>Jf,ShortType:()=>pe,Skeleton:()=>Bg,SkeletonHelper:()=>Am,SkinnedMesh:()=>Ng,SmoothShading:()=>ie,Sphere:()=>Hs,SphereBufferGeometry:()=>qg,SphereGeometry:()=>qg,Spherical:()=>cI,SphericalHarmonics3:()=>Gb,SplineCurve:()=>t_,SpotLight:()=>Ph,SpotLightHelper:()=>ia,Sprite:()=>bv,SpriteMaterial:()=>Fg,SrcAlphaFactor:()=>xn,SrcAlphaSaturateFactor:()=>gr,SrcColorFactor:()=>Yn,StaticCopyUsage:()=>zr,StaticDrawUsage:()=>Lo,StaticReadUsage:()=>Io,StereoCamera:()=>tI,StreamCopyUsage:()=>mh,StreamDrawUsage:()=>fl,StreamReadUsage:()=>ol,StringKeyframeTrack:()=>tp,SubtractEquation:()=>qe,SubtractiveBlending:()=>Le,TOUCH:()=>_,TangentSpaceNormalMap:()=>Yu,TetrahedronBufferGeometry:()=>jg,TetrahedronGeometry:()=>jg,TextBufferGeometry:()=>Tv,TextGeometry:()=>Tv,Texture:()=>kr,TextureLoader:()=>Rb,TorusBufferGeometry:()=>Zg,TorusGeometry:()=>Zg,TorusKnotBufferGeometry:()=>Tb,TorusKnotGeometry:()=>Tb,Triangle:()=>Sa,TriangleFanDrawMode:()=>Bp,TriangleStripDrawMode:()=>Dd,TrianglesDrawMode:()=>fh,TubeBufferGeometry:()=>Ih,TubeGeometry:()=>Ih,UVMapping:()=>Oi,Uint16Attribute:()=>o1,Uint16BufferAttribute:()=>Od,Uint32Attribute:()=>a1,Uint32BufferAttribute:()=>Xh,Uint8Attribute:()=>Pm,Uint8BufferAttribute:()=>Ea,Uint8ClampedAttribute:()=>Zv,Uint8ClampedBufferAttribute:()=>Tf,Uniform:()=>Yb,UniformsLib:()=>Pi,UniformsUtils:()=>Vd,UnsignedByteType:()=>Y,UnsignedInt248Type:()=>sn,UnsignedIntType:()=>$e,UnsignedShort4444Type:()=>tn,UnsignedShort5551Type:()=>Tt,UnsignedShort565Type:()=>qt,UnsignedShortType:()=>Ae,VSMShadowMap:()=>U,Vector2:()=>Un,Vector3:()=>Ze,Vector4:()=>Rs,VectorKeyframeTrack:()=>Rv,Vertex:()=>dp,VertexColors:()=>jv,VideoTexture:()=>CC,WebGL1Renderer:()=>ab,WebGLCubeRenderTarget:()=>la,WebGLMultisampleRenderTarget:()=>Hp,WebGLRenderTarget:()=>Ro,WebGLRenderTargetCube:()=>fS,WebGLRenderer:()=>Qo,WebGLUtils:()=>dm,WireframeGeometry:()=>Db,WireframeHelper:()=>CI,WrapAroundEnding:()=>Td,XHRLoader:()=>af,ZeroCurvatureEnding:()=>dh,ZeroFactor:()=>Wt,ZeroSlopeEnding:()=>ki,ZeroStencilOp:()=>se,sRGBEncoding:()=>gc});var y=A(861);const l="126",d={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},_={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},p=0,v=1,C=2,D=3,I=0,P=1,B=2,U=3,J=0,W=1,re=2,he=1,ie=2,ae=0,Me=1,Ce=2,Le=3,Ue=4,ce=5,lt=100,qe=101,ut=102,De=103,je=104,Wt=200,Xe=201,Yn=202,Jt=203,xn=204,Pt=205,Lt=206,Xn=207,ni=208,en=209,gr=210,zi=0,En=1,Dn=2,ji=3,ii=4,Os=5,dr=6,Fe=7,Fn=0,_n=1,dt=2,nt=0,zt=1,on=2,Nn=3,an=4,hi=5,Oi=300,mi=301,fr=302,qs=303,Sr=304,oo=306,fa=307,ea=1e3,os=1001,Ls=1002,vo=1003,ca=1004,ja=1004,sr=1005,Zu=1005,$i=1006,Is=1007,b=1007,k=1008,z=1008,Y=1009,ne=1010,pe=1011,Ae=1012,Ge=1013,$e=1014,yt=1015,Mt=1016,tn=1017,Tt=1018,qt=1019,sn=1020,Dt=1021,nn=1022,bn=1023,ln=1024,qn=1025,ei=bn,Ri=1026,Di=1027,Ai=1028,Ii=1029,Er=1030,Ui=1031,$r=1032,Ur=1033,oa=33776,rl=33777,$s=33778,Gi=33779,Do=35840,Ns=35841,ua=35842,as=35843,js=36196,Ao=37492,Pa=37496,Pe=37808,Ke=37809,yn=37810,An=37811,Rr=37812,vs=37813,Zi=37814,Jn=37815,La=37816,Eu=37817,Wi=37818,Fa=37819,cr=37820,Ts=37821,qo=36492,kp=37840,ug=37841,mc=37842,Ma=37843,Mf=37844,Pp=37845,Lp=37846,zc=37847,Sd=37848,Fp=37849,Vc=37850,j_=37851,Op=37852,Cf=37853,Vh=2200,Np=2201,tc=2202,Mo=2300,Sf=2301,Ed=2302,dh=2400,ki=2401,Td=2402,Cs=2500,au=2501,fh=0,Dd=1,Bp=2,sl=3e3,gc=3001,Uh=3007,Gh=3002,Ac=3003,Hr=3004,Wh=3005,ph=3006,lu=3200,cu=3201,Yu=0,q=1,se=0,ve=7680,we=7681,Be=7682,Ve=7683,Je=34055,At=34056,xt=5386,Ft=512,Cn=513,oi=514,cn=515,gn=516,_r=517,ls=518,vr=519,Lo=35044,Fs=35048,fl=35040,Io=35045,or=35049,ol=35041,zr=35046,aa=35050,mh=35042,ys="100",Ol="300 es";function pl(){}Object.assign(pl.prototype,{addEventListener:function(x,c){void 0===this._listeners&&(this._listeners={});const h=this._listeners;void 0===h[x]&&(h[x]=[]),-1===h[x].indexOf(c)&&h[x].push(c)},hasEventListener:function(x,c){if(void 0===this._listeners)return!1;const h=this._listeners;return void 0!==h[x]&&-1!==h[x].indexOf(c)},removeEventListener:function(x,c){if(void 0===this._listeners)return;const M=this._listeners[x];if(void 0!==M){const E=M.indexOf(c);-1!==E&&M.splice(E,1)}},dispatchEvent:function(x){if(void 0===this._listeners)return;const h=this._listeners[x.type];if(void 0!==h){x.target=this;const M=h.slice(0);for(let E=0,R=M.length;E<R;E++)M[E].call(this,x)}}});const _i=[];for(let x=0;x<256;x++)_i[x]=(x<16?"0":"")+x.toString(16);let ao=1234567;const Yi={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const x=4294967295*Math.random()|0,c=4294967295*Math.random()|0,h=4294967295*Math.random()|0,M=4294967295*Math.random()|0;return(_i[255&x]+_i[x>>8&255]+_i[x>>16&255]+_i[x>>24&255]+"-"+_i[255&c]+_i[c>>8&255]+"-"+_i[c>>16&15|64]+_i[c>>24&255]+"-"+_i[63&h|128]+_i[h>>8&255]+"-"+_i[h>>16&255]+_i[h>>24&255]+_i[255&M]+_i[M>>8&255]+_i[M>>16&255]+_i[M>>24&255]).toUpperCase()},clamp:function(x,c,h){return Math.max(c,Math.min(h,x))},euclideanModulo:function(x,c){return(x%c+c)%c},mapLinear:function(x,c,h,M,E){return M+(x-c)*(E-M)/(h-c)},lerp:function(x,c,h){return(1-h)*x+h*c},damp:function(x,c,h,M){return Yi.lerp(x,c,1-Math.exp(-h*M))},pingpong:function(x,c=1){return c-Math.abs(Yi.euclideanModulo(x,2*c)-c)},smoothstep:function(x,c,h){return x<=c?0:x>=h?1:(x=(x-c)/(h-c))*x*(3-2*x)},smootherstep:function(x,c,h){return x<=c?0:x>=h?1:(x=(x-c)/(h-c))*x*x*(x*(6*x-15)+10)},randInt:function(x,c){return x+Math.floor(Math.random()*(c-x+1))},randFloat:function(x,c){return x+Math.random()*(c-x)},randFloatSpread:function(x){return x*(.5-Math.random())},seededRandom:function(x){return void 0!==x&&(ao=x%2147483647),ao=16807*ao%2147483647,(ao-1)/2147483646},degToRad:function(x){return x*Yi.DEG2RAD},radToDeg:function(x){return x*Yi.RAD2DEG},isPowerOfTwo:function(x){return 0==(x&x-1)&&0!==x},ceilPowerOfTwo:function(x){return Math.pow(2,Math.ceil(Math.log(x)/Math.LN2))},floorPowerOfTwo:function(x){return Math.pow(2,Math.floor(Math.log(x)/Math.LN2))},setQuaternionFromProperEuler:function(x,c,h,M,E){const R=Math.cos,V=Math.sin,X=R(h/2),ee=V(h/2),te=R((c+M)/2),me=V((c+M)/2),de=R((c-M)/2),ge=V((c-M)/2),be=R((M-c)/2),Te=V((M-c)/2);switch(E){case"XYX":x.set(X*me,ee*de,ee*ge,X*te);break;case"YZY":x.set(ee*ge,X*me,ee*de,X*te);break;case"ZXZ":x.set(ee*de,ee*ge,X*me,X*te);break;case"XZX":x.set(X*me,ee*Te,ee*be,X*te);break;case"YXY":x.set(ee*be,X*me,ee*Te,X*te);break;case"ZYZ":x.set(ee*Te,ee*be,X*me,X*te);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+E)}}};class Un{constructor(c=0,h=0){this.x=c,this.y=h}get width(){return this.x}set width(c){this.x=c}get height(){return this.y}set height(c){this.y=c}set(c,h){return this.x=c,this.y=h,this}setScalar(c){return this.x=c,this.y=c,this}setX(c){return this.x=c,this}setY(c){return this.y=c,this}setComponent(c,h){switch(c){case 0:this.x=h;break;case 1:this.y=h;break;default:throw new Error("index is out of range: "+c)}return this}getComponent(c){switch(c){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+c)}}clone(){return new this.constructor(this.x,this.y)}copy(c){return this.x=c.x,this.y=c.y,this}add(c,h){return void 0!==h?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(c,h)):(this.x+=c.x,this.y+=c.y,this)}addScalar(c){return this.x+=c,this.y+=c,this}addVectors(c,h){return this.x=c.x+h.x,this.y=c.y+h.y,this}addScaledVector(c,h){return this.x+=c.x*h,this.y+=c.y*h,this}sub(c,h){return void 0!==h?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(c,h)):(this.x-=c.x,this.y-=c.y,this)}subScalar(c){return this.x-=c,this.y-=c,this}subVectors(c,h){return this.x=c.x-h.x,this.y=c.y-h.y,this}multiply(c){return this.x*=c.x,this.y*=c.y,this}multiplyScalar(c){return this.x*=c,this.y*=c,this}divide(c){return this.x/=c.x,this.y/=c.y,this}divideScalar(c){return this.multiplyScalar(1/c)}applyMatrix3(c){const h=this.x,M=this.y,E=c.elements;return this.x=E[0]*h+E[3]*M+E[6],this.y=E[1]*h+E[4]*M+E[7],this}min(c){return this.x=Math.min(this.x,c.x),this.y=Math.min(this.y,c.y),this}max(c){return this.x=Math.max(this.x,c.x),this.y=Math.max(this.y,c.y),this}clamp(c,h){return this.x=Math.max(c.x,Math.min(h.x,this.x)),this.y=Math.max(c.y,Math.min(h.y,this.y)),this}clampScalar(c,h){return this.x=Math.max(c,Math.min(h,this.x)),this.y=Math.max(c,Math.min(h,this.y)),this}clampLength(c,h){const M=this.length();return this.divideScalar(M||1).multiplyScalar(Math.max(c,Math.min(h,M)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(c){return this.x*c.x+this.y*c.y}cross(c){return this.x*c.y-this.y*c.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(c){return Math.sqrt(this.distanceToSquared(c))}distanceToSquared(c){const h=this.x-c.x,M=this.y-c.y;return h*h+M*M}manhattanDistanceTo(c){return Math.abs(this.x-c.x)+Math.abs(this.y-c.y)}setLength(c){return this.normalize().multiplyScalar(c)}lerp(c,h){return this.x+=(c.x-this.x)*h,this.y+=(c.y-this.y)*h,this}lerpVectors(c,h,M){return this.x=c.x+(h.x-c.x)*M,this.y=c.y+(h.y-c.y)*M,this}equals(c){return c.x===this.x&&c.y===this.y}fromArray(c,h=0){return this.x=c[h],this.y=c[h+1],this}toArray(c=[],h=0){return c[h]=this.x,c[h+1]=this.y,c}fromBufferAttribute(c,h,M){return void 0!==M&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=c.getX(h),this.y=c.getY(h),this}rotateAround(c,h){const M=Math.cos(h),E=Math.sin(h),R=this.x-c.x,V=this.y-c.y;return this.x=R*M-V*E+c.x,this.y=R*E+V*M+c.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}Un.prototype.isVector2=!0;class lo{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(c,h,M,E,R,V,X,ee,te){const me=this.elements;return me[0]=c,me[1]=E,me[2]=X,me[3]=h,me[4]=R,me[5]=ee,me[6]=M,me[7]=V,me[8]=te,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(c){const h=this.elements,M=c.elements;return h[0]=M[0],h[1]=M[1],h[2]=M[2],h[3]=M[3],h[4]=M[4],h[5]=M[5],h[6]=M[6],h[7]=M[7],h[8]=M[8],this}extractBasis(c,h,M){return c.setFromMatrix3Column(this,0),h.setFromMatrix3Column(this,1),M.setFromMatrix3Column(this,2),this}setFromMatrix4(c){const h=c.elements;return this.set(h[0],h[4],h[8],h[1],h[5],h[9],h[2],h[6],h[10]),this}multiply(c){return this.multiplyMatrices(this,c)}premultiply(c){return this.multiplyMatrices(c,this)}multiplyMatrices(c,h){const M=c.elements,E=h.elements,R=this.elements,V=M[0],X=M[3],ee=M[6],te=M[1],me=M[4],de=M[7],ge=M[2],be=M[5],Te=M[8],Oe=E[0],ze=E[3],ke=E[6],Ee=E[1],at=E[4],rt=E[7],gt=E[2],tt=E[5],Rt=E[8];return R[0]=V*Oe+X*Ee+ee*gt,R[3]=V*ze+X*at+ee*tt,R[6]=V*ke+X*rt+ee*Rt,R[1]=te*Oe+me*Ee+de*gt,R[4]=te*ze+me*at+de*tt,R[7]=te*ke+me*rt+de*Rt,R[2]=ge*Oe+be*Ee+Te*gt,R[5]=ge*ze+be*at+Te*tt,R[8]=ge*ke+be*rt+Te*Rt,this}multiplyScalar(c){const h=this.elements;return h[0]*=c,h[3]*=c,h[6]*=c,h[1]*=c,h[4]*=c,h[7]*=c,h[2]*=c,h[5]*=c,h[8]*=c,this}determinant(){const c=this.elements,h=c[0],M=c[1],E=c[2],R=c[3],V=c[4],X=c[5],ee=c[6],te=c[7],me=c[8];return h*V*me-h*X*te-M*R*me+M*X*ee+E*R*te-E*V*ee}invert(){const c=this.elements,h=c[0],M=c[1],E=c[2],R=c[3],V=c[4],X=c[5],ee=c[6],te=c[7],me=c[8],de=me*V-X*te,ge=X*ee-me*R,be=te*R-V*ee,Te=h*de+M*ge+E*be;if(0===Te)return this.set(0,0,0,0,0,0,0,0,0);const Oe=1/Te;return c[0]=de*Oe,c[1]=(E*te-me*M)*Oe,c[2]=(X*M-E*V)*Oe,c[3]=ge*Oe,c[4]=(me*h-E*ee)*Oe,c[5]=(E*R-X*h)*Oe,c[6]=be*Oe,c[7]=(M*ee-te*h)*Oe,c[8]=(V*h-M*R)*Oe,this}transpose(){let c;const h=this.elements;return c=h[1],h[1]=h[3],h[3]=c,c=h[2],h[2]=h[6],h[6]=c,c=h[5],h[5]=h[7],h[7]=c,this}getNormalMatrix(c){return this.setFromMatrix4(c).invert().transpose()}transposeIntoArray(c){const h=this.elements;return c[0]=h[0],c[1]=h[3],c[2]=h[6],c[3]=h[1],c[4]=h[4],c[5]=h[7],c[6]=h[2],c[7]=h[5],c[8]=h[8],this}setUvTransform(c,h,M,E,R,V,X){const ee=Math.cos(R),te=Math.sin(R);return this.set(M*ee,M*te,-M*(ee*V+te*X)+V+c,-E*te,E*ee,-E*(-te*V+ee*X)+X+h,0,0,1),this}scale(c,h){const M=this.elements;return M[0]*=c,M[3]*=c,M[6]*=c,M[1]*=h,M[4]*=h,M[7]*=h,this}rotate(c){const h=Math.cos(c),M=Math.sin(c),E=this.elements,R=E[0],V=E[3],X=E[6],ee=E[1],te=E[4],me=E[7];return E[0]=h*R+M*ee,E[3]=h*V+M*te,E[6]=h*X+M*me,E[1]=-M*R+h*ee,E[4]=-M*V+h*te,E[7]=-M*X+h*me,this}translate(c,h){const M=this.elements;return M[0]+=c*M[2],M[3]+=c*M[5],M[6]+=c*M[8],M[1]+=h*M[2],M[4]+=h*M[5],M[7]+=h*M[8],this}equals(c){const h=this.elements,M=c.elements;for(let E=0;E<9;E++)if(h[E]!==M[E])return!1;return!0}fromArray(c,h=0){for(let M=0;M<9;M++)this.elements[M]=c[M+h];return this}toArray(c=[],h=0){const M=this.elements;return c[h]=M[0],c[h+1]=M[1],c[h+2]=M[2],c[h+3]=M[3],c[h+4]=M[4],c[h+5]=M[5],c[h+6]=M[6],c[h+7]=M[7],c[h+8]=M[8],c}clone(){return(new this.constructor).fromArray(this.elements)}}let Za;lo.prototype.isMatrix3=!0;const ml={getDataURL:function(x){if(/^data:/i.test(x.src)||"undefined"==typeof HTMLCanvasElement)return x.src;let c;if(x instanceof HTMLCanvasElement)c=x;else{void 0===Za&&(Za=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Za.width=x.width,Za.height=x.height;const h=Za.getContext("2d");x instanceof ImageData?h.putImageData(x,0,0):h.drawImage(x,0,0,x.width,x.height),c=Za}return c.width>2048||c.height>2048?c.toDataURL("image/jpeg",.6):c.toDataURL("image/png")}};let Ad=0;class kr extends pl{constructor(c=kr.DEFAULT_IMAGE,h=kr.DEFAULT_MAPPING,M=os,E=os,R=$i,V=k,X=bn,ee=Y,te=1,me=sl){super(),Object.defineProperty(this,"id",{value:Ad++}),this.uuid=Yi.generateUUID(),this.name="",this.image=c,this.mipmaps=[],this.mapping=h,this.wrapS=M,this.wrapT=E,this.magFilter=R,this.minFilter=V,this.anisotropy=te,this.format=X,this.internalFormat=null,this.type=ee,this.offset=new Un(0,0),this.repeat=new Un(1,1),this.center=new Un(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new lo,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=me,this.version=0,this.onUpdate=null}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(c){return this.name=c.name,this.image=c.image,this.mipmaps=c.mipmaps.slice(0),this.mapping=c.mapping,this.wrapS=c.wrapS,this.wrapT=c.wrapT,this.magFilter=c.magFilter,this.minFilter=c.minFilter,this.anisotropy=c.anisotropy,this.format=c.format,this.internalFormat=c.internalFormat,this.type=c.type,this.offset.copy(c.offset),this.repeat.copy(c.repeat),this.center.copy(c.center),this.rotation=c.rotation,this.matrixAutoUpdate=c.matrixAutoUpdate,this.matrix.copy(c.matrix),this.generateMipmaps=c.generateMipmaps,this.premultiplyAlpha=c.premultiplyAlpha,this.flipY=c.flipY,this.unpackAlignment=c.unpackAlignment,this.encoding=c.encoding,this}toJSON(c){const h=void 0===c||"string"==typeof c;if(!h&&void 0!==c.textures[this.uuid])return c.textures[this.uuid];const M={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const E=this.image;if(void 0===E.uuid&&(E.uuid=Yi.generateUUID()),!h&&void 0===c.images[E.uuid]){let R;if(Array.isArray(E)){R=[];for(let V=0,X=E.length;V<X;V++)R.push(Oa(E[V].isDataTexture?E[V].image:E[V]))}else R=Oa(E);c.images[E.uuid]={uuid:E.uuid,url:R}}M.image=E.uuid}return h||(c.textures[this.uuid]=M),M}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(c){if(this.mapping!==Oi)return c;if(c.applyMatrix3(this.matrix),c.x<0||c.x>1)switch(this.wrapS){case ea:c.x=c.x-Math.floor(c.x);break;case os:c.x=c.x<0?0:1;break;case Ls:c.x=1===Math.abs(Math.floor(c.x)%2)?Math.ceil(c.x)-c.x:c.x-Math.floor(c.x)}if(c.y<0||c.y>1)switch(this.wrapT){case ea:c.y=c.y-Math.floor(c.y);break;case os:c.y=c.y<0?0:1;break;case Ls:c.y=1===Math.abs(Math.floor(c.y)%2)?Math.ceil(c.y)-c.y:c.y-Math.floor(c.y)}return this.flipY&&(c.y=1-c.y),c}set needsUpdate(c){!0===c&&this.version++}}function Oa(x){return"undefined"!=typeof HTMLImageElement&&x instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&x instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&x instanceof ImageBitmap?ml.getDataURL(x):x.data?{data:Array.prototype.slice.call(x.data),width:x.width,height:x.height,type:x.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}kr.DEFAULT_IMAGE=void 0,kr.DEFAULT_MAPPING=Oi,kr.prototype.isTexture=!0;class Rs{constructor(c=0,h=0,M=0,E=1){this.x=c,this.y=h,this.z=M,this.w=E}get width(){return this.z}set width(c){this.z=c}get height(){return this.w}set height(c){this.w=c}set(c,h,M,E){return this.x=c,this.y=h,this.z=M,this.w=E,this}setScalar(c){return this.x=c,this.y=c,this.z=c,this.w=c,this}setX(c){return this.x=c,this}setY(c){return this.y=c,this}setZ(c){return this.z=c,this}setW(c){return this.w=c,this}setComponent(c,h){switch(c){case 0:this.x=h;break;case 1:this.y=h;break;case 2:this.z=h;break;case 3:this.w=h;break;default:throw new Error("index is out of range: "+c)}return this}getComponent(c){switch(c){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+c)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(c){return this.x=c.x,this.y=c.y,this.z=c.z,this.w=void 0!==c.w?c.w:1,this}add(c,h){return void 0!==h?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(c,h)):(this.x+=c.x,this.y+=c.y,this.z+=c.z,this.w+=c.w,this)}addScalar(c){return this.x+=c,this.y+=c,this.z+=c,this.w+=c,this}addVectors(c,h){return this.x=c.x+h.x,this.y=c.y+h.y,this.z=c.z+h.z,this.w=c.w+h.w,this}addScaledVector(c,h){return this.x+=c.x*h,this.y+=c.y*h,this.z+=c.z*h,this.w+=c.w*h,this}sub(c,h){return void 0!==h?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(c,h)):(this.x-=c.x,this.y-=c.y,this.z-=c.z,this.w-=c.w,this)}subScalar(c){return this.x-=c,this.y-=c,this.z-=c,this.w-=c,this}subVectors(c,h){return this.x=c.x-h.x,this.y=c.y-h.y,this.z=c.z-h.z,this.w=c.w-h.w,this}multiply(c){return this.x*=c.x,this.y*=c.y,this.z*=c.z,this.w*=c.w,this}multiplyScalar(c){return this.x*=c,this.y*=c,this.z*=c,this.w*=c,this}applyMatrix4(c){const h=this.x,M=this.y,E=this.z,R=this.w,V=c.elements;return this.x=V[0]*h+V[4]*M+V[8]*E+V[12]*R,this.y=V[1]*h+V[5]*M+V[9]*E+V[13]*R,this.z=V[2]*h+V[6]*M+V[10]*E+V[14]*R,this.w=V[3]*h+V[7]*M+V[11]*E+V[15]*R,this}divideScalar(c){return this.multiplyScalar(1/c)}setAxisAngleFromQuaternion(c){this.w=2*Math.acos(c.w);const h=Math.sqrt(1-c.w*c.w);return h<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=c.x/h,this.y=c.y/h,this.z=c.z/h),this}setAxisAngleFromRotationMatrix(c){let h,M,E,R;const ee=c.elements,te=ee[0],me=ee[4],de=ee[8],ge=ee[1],be=ee[5],Te=ee[9],Oe=ee[2],ze=ee[6],ke=ee[10];if(Math.abs(me-ge)<.01&&Math.abs(de-Oe)<.01&&Math.abs(Te-ze)<.01){if(Math.abs(me+ge)<.1&&Math.abs(de+Oe)<.1&&Math.abs(Te+ze)<.1&&Math.abs(te+be+ke-3)<.1)return this.set(1,0,0,0),this;h=Math.PI;const at=(te+1)/2,rt=(be+1)/2,gt=(ke+1)/2,tt=(me+ge)/4,Rt=(de+Oe)/4,rn=(Te+ze)/4;return at>rt&&at>gt?at<.01?(M=0,E=.707106781,R=.707106781):(M=Math.sqrt(at),E=tt/M,R=Rt/M):rt>gt?rt<.01?(M=.707106781,E=0,R=.707106781):(E=Math.sqrt(rt),M=tt/E,R=rn/E):gt<.01?(M=.707106781,E=.707106781,R=0):(R=Math.sqrt(gt),M=Rt/R,E=rn/R),this.set(M,E,R,h),this}let Ee=Math.sqrt((ze-Te)*(ze-Te)+(de-Oe)*(de-Oe)+(ge-me)*(ge-me));return Math.abs(Ee)<.001&&(Ee=1),this.x=(ze-Te)/Ee,this.y=(de-Oe)/Ee,this.z=(ge-me)/Ee,this.w=Math.acos((te+be+ke-1)/2),this}min(c){return this.x=Math.min(this.x,c.x),this.y=Math.min(this.y,c.y),this.z=Math.min(this.z,c.z),this.w=Math.min(this.w,c.w),this}max(c){return this.x=Math.max(this.x,c.x),this.y=Math.max(this.y,c.y),this.z=Math.max(this.z,c.z),this.w=Math.max(this.w,c.w),this}clamp(c,h){return this.x=Math.max(c.x,Math.min(h.x,this.x)),this.y=Math.max(c.y,Math.min(h.y,this.y)),this.z=Math.max(c.z,Math.min(h.z,this.z)),this.w=Math.max(c.w,Math.min(h.w,this.w)),this}clampScalar(c,h){return this.x=Math.max(c,Math.min(h,this.x)),this.y=Math.max(c,Math.min(h,this.y)),this.z=Math.max(c,Math.min(h,this.z)),this.w=Math.max(c,Math.min(h,this.w)),this}clampLength(c,h){const M=this.length();return this.divideScalar(M||1).multiplyScalar(Math.max(c,Math.min(h,M)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(c){return this.x*c.x+this.y*c.y+this.z*c.z+this.w*c.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(c){return this.normalize().multiplyScalar(c)}lerp(c,h){return this.x+=(c.x-this.x)*h,this.y+=(c.y-this.y)*h,this.z+=(c.z-this.z)*h,this.w+=(c.w-this.w)*h,this}lerpVectors(c,h,M){return this.x=c.x+(h.x-c.x)*M,this.y=c.y+(h.y-c.y)*M,this.z=c.z+(h.z-c.z)*M,this.w=c.w+(h.w-c.w)*M,this}equals(c){return c.x===this.x&&c.y===this.y&&c.z===this.z&&c.w===this.w}fromArray(c,h=0){return this.x=c[h],this.y=c[h+1],this.z=c[h+2],this.w=c[h+3],this}toArray(c=[],h=0){return c[h]=this.x,c[h+1]=this.y,c[h+2]=this.z,c[h+3]=this.w,c}fromBufferAttribute(c,h,M){return void 0!==M&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=c.getX(h),this.y=c.getY(h),this.z=c.getZ(h),this.w=c.getW(h),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}Rs.prototype.isVector4=!0;class Ro extends pl{constructor(c,h,M){super(),this.width=c,this.height=h,this.depth=1,this.scissor=new Rs(0,0,c,h),this.scissorTest=!1,this.viewport=new Rs(0,0,c,h),this.texture=new kr(void 0,(M=M||{}).mapping,M.wrapS,M.wrapT,M.magFilter,M.minFilter,M.format,M.type,M.anisotropy,M.encoding),this.texture.image={},this.texture.image.width=c,this.texture.image.height=h,this.texture.image.depth=1,this.texture.generateMipmaps=void 0!==M.generateMipmaps&&M.generateMipmaps,this.texture.minFilter=void 0!==M.minFilter?M.minFilter:$i,this.depthBuffer=void 0===M.depthBuffer||M.depthBuffer,this.stencilBuffer=void 0!==M.stencilBuffer&&M.stencilBuffer,this.depthTexture=void 0!==M.depthTexture?M.depthTexture:null}setTexture(c){c.image={width:this.width,height:this.height,depth:this.depth},this.texture=c}setSize(c,h,M=1){(this.width!==c||this.height!==h||this.depth!==M)&&(this.width=c,this.height=h,this.depth=M,this.texture.image.width=c,this.texture.image.height=h,this.texture.image.depth=M,this.dispose()),this.viewport.set(0,0,c,h),this.scissor.set(0,0,c,h)}clone(){return(new this.constructor).copy(this)}copy(c){return this.width=c.width,this.height=c.height,this.depth=c.depth,this.viewport.copy(c.viewport),this.texture=c.texture.clone(),this.depthBuffer=c.depthBuffer,this.stencilBuffer=c.stencilBuffer,this.depthTexture=c.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Ro.prototype.isWebGLRenderTarget=!0;class Hp extends Ro{constructor(c,h,M){super(c,h,M),this.samples=4}copy(c){return super.copy.call(this,c),this.samples=c.samples,this}}Hp.prototype.isWebGLMultisampleRenderTarget=!0;class Ds{constructor(c=0,h=0,M=0,E=1){this._x=c,this._y=h,this._z=M,this._w=E}static slerp(c,h,M,E){return M.copy(c).slerp(h,E)}static slerpFlat(c,h,M,E,R,V,X){let ee=M[E+0],te=M[E+1],me=M[E+2],de=M[E+3];const ge=R[V+0],be=R[V+1],Te=R[V+2],Oe=R[V+3];if(0===X)return c[h+0]=ee,c[h+1]=te,c[h+2]=me,void(c[h+3]=de);if(1===X)return c[h+0]=ge,c[h+1]=be,c[h+2]=Te,void(c[h+3]=Oe);if(de!==Oe||ee!==ge||te!==be||me!==Te){let ze=1-X;const ke=ee*ge+te*be+me*Te+de*Oe,Ee=ke>=0?1:-1,at=1-ke*ke;if(at>Number.EPSILON){const gt=Math.sqrt(at),tt=Math.atan2(gt,ke*Ee);ze=Math.sin(ze*tt)/gt,X=Math.sin(X*tt)/gt}const rt=X*Ee;if(ee=ee*ze+ge*rt,te=te*ze+be*rt,me=me*ze+Te*rt,de=de*ze+Oe*rt,ze===1-X){const gt=1/Math.sqrt(ee*ee+te*te+me*me+de*de);ee*=gt,te*=gt,me*=gt,de*=gt}}c[h]=ee,c[h+1]=te,c[h+2]=me,c[h+3]=de}static multiplyQuaternionsFlat(c,h,M,E,R,V){const X=M[E],ee=M[E+1],te=M[E+2],me=M[E+3],de=R[V],ge=R[V+1],be=R[V+2],Te=R[V+3];return c[h]=X*Te+me*de+ee*be-te*ge,c[h+1]=ee*Te+me*ge+te*de-X*be,c[h+2]=te*Te+me*be+X*ge-ee*de,c[h+3]=me*Te-X*de-ee*ge-te*be,c}get x(){return this._x}set x(c){this._x=c,this._onChangeCallback()}get y(){return this._y}set y(c){this._y=c,this._onChangeCallback()}get z(){return this._z}set z(c){this._z=c,this._onChangeCallback()}get w(){return this._w}set w(c){this._w=c,this._onChangeCallback()}set(c,h,M,E){return this._x=c,this._y=h,this._z=M,this._w=E,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(c){return this._x=c.x,this._y=c.y,this._z=c.z,this._w=c.w,this._onChangeCallback(),this}setFromEuler(c,h){if(!c||!c.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const M=c._x,E=c._y,R=c._z,V=c._order,X=Math.cos,ee=Math.sin,te=X(M/2),me=X(E/2),de=X(R/2),ge=ee(M/2),be=ee(E/2),Te=ee(R/2);switch(V){case"XYZ":this._x=ge*me*de+te*be*Te,this._y=te*be*de-ge*me*Te,this._z=te*me*Te+ge*be*de,this._w=te*me*de-ge*be*Te;break;case"YXZ":this._x=ge*me*de+te*be*Te,this._y=te*be*de-ge*me*Te,this._z=te*me*Te-ge*be*de,this._w=te*me*de+ge*be*Te;break;case"ZXY":this._x=ge*me*de-te*be*Te,this._y=te*be*de+ge*me*Te,this._z=te*me*Te+ge*be*de,this._w=te*me*de-ge*be*Te;break;case"ZYX":this._x=ge*me*de-te*be*Te,this._y=te*be*de+ge*me*Te,this._z=te*me*Te-ge*be*de,this._w=te*me*de+ge*be*Te;break;case"YZX":this._x=ge*me*de+te*be*Te,this._y=te*be*de+ge*me*Te,this._z=te*me*Te-ge*be*de,this._w=te*me*de-ge*be*Te;break;case"XZY":this._x=ge*me*de-te*be*Te,this._y=te*be*de-ge*me*Te,this._z=te*me*Te+ge*be*de,this._w=te*me*de+ge*be*Te;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+V)}return!1!==h&&this._onChangeCallback(),this}setFromAxisAngle(c,h){const M=h/2,E=Math.sin(M);return this._x=c.x*E,this._y=c.y*E,this._z=c.z*E,this._w=Math.cos(M),this._onChangeCallback(),this}setFromRotationMatrix(c){const h=c.elements,M=h[0],E=h[4],R=h[8],V=h[1],X=h[5],ee=h[9],te=h[2],me=h[6],de=h[10],ge=M+X+de;if(ge>0){const be=.5/Math.sqrt(ge+1);this._w=.25/be,this._x=(me-ee)*be,this._y=(R-te)*be,this._z=(V-E)*be}else if(M>X&&M>de){const be=2*Math.sqrt(1+M-X-de);this._w=(me-ee)/be,this._x=.25*be,this._y=(E+V)/be,this._z=(R+te)/be}else if(X>de){const be=2*Math.sqrt(1+X-M-de);this._w=(R-te)/be,this._x=(E+V)/be,this._y=.25*be,this._z=(ee+me)/be}else{const be=2*Math.sqrt(1+de-M-X);this._w=(V-E)/be,this._x=(R+te)/be,this._y=(ee+me)/be,this._z=.25*be}return this._onChangeCallback(),this}setFromUnitVectors(c,h){let E=c.dot(h)+1;return E<1e-6?(E=0,Math.abs(c.x)>Math.abs(c.z)?(this._x=-c.y,this._y=c.x,this._z=0,this._w=E):(this._x=0,this._y=-c.z,this._z=c.y,this._w=E)):(this._x=c.y*h.z-c.z*h.y,this._y=c.z*h.x-c.x*h.z,this._z=c.x*h.y-c.y*h.x,this._w=E),this.normalize()}angleTo(c){return 2*Math.acos(Math.abs(Yi.clamp(this.dot(c),-1,1)))}rotateTowards(c,h){const M=this.angleTo(c);if(0===M)return this;const E=Math.min(1,h/M);return this.slerp(c,E),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(c){return this._x*c._x+this._y*c._y+this._z*c._z+this._w*c._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let c=this.length();return 0===c?(this._x=0,this._y=0,this._z=0,this._w=1):(c=1/c,this._x=this._x*c,this._y=this._y*c,this._z=this._z*c,this._w=this._w*c),this._onChangeCallback(),this}multiply(c,h){return void 0!==h?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(c,h)):this.multiplyQuaternions(this,c)}premultiply(c){return this.multiplyQuaternions(c,this)}multiplyQuaternions(c,h){const M=c._x,E=c._y,R=c._z,V=c._w,X=h._x,ee=h._y,te=h._z,me=h._w;return this._x=M*me+V*X+E*te-R*ee,this._y=E*me+V*ee+R*X-M*te,this._z=R*me+V*te+M*ee-E*X,this._w=V*me-M*X-E*ee-R*te,this._onChangeCallback(),this}slerp(c,h){if(0===h)return this;if(1===h)return this.copy(c);const M=this._x,E=this._y,R=this._z,V=this._w;let X=V*c._w+M*c._x+E*c._y+R*c._z;if(X<0?(this._w=-c._w,this._x=-c._x,this._y=-c._y,this._z=-c._z,X=-X):this.copy(c),X>=1)return this._w=V,this._x=M,this._y=E,this._z=R,this;const ee=1-X*X;if(ee<=Number.EPSILON){const be=1-h;return this._w=be*V+h*this._w,this._x=be*M+h*this._x,this._y=be*E+h*this._y,this._z=be*R+h*this._z,this.normalize(),this._onChangeCallback(),this}const te=Math.sqrt(ee),me=Math.atan2(te,X),de=Math.sin((1-h)*me)/te,ge=Math.sin(h*me)/te;return this._w=V*de+this._w*ge,this._x=M*de+this._x*ge,this._y=E*de+this._y*ge,this._z=R*de+this._z*ge,this._onChangeCallback(),this}equals(c){return c._x===this._x&&c._y===this._y&&c._z===this._z&&c._w===this._w}fromArray(c,h=0){return this._x=c[h],this._y=c[h+1],this._z=c[h+2],this._w=c[h+3],this._onChangeCallback(),this}toArray(c=[],h=0){return c[h]=this._x,c[h+1]=this._y,c[h+2]=this._z,c[h+3]=this._w,c}fromBufferAttribute(c,h){return this._x=c.getX(h),this._y=c.getY(h),this._z=c.getZ(h),this._w=c.getW(h),this}_onChange(c){return this._onChangeCallback=c,this}_onChangeCallback(){}}Ds.prototype.isQuaternion=!0;class Ze{constructor(c=0,h=0,M=0){this.x=c,this.y=h,this.z=M}set(c,h,M){return void 0===M&&(M=this.z),this.x=c,this.y=h,this.z=M,this}setScalar(c){return this.x=c,this.y=c,this.z=c,this}setX(c){return this.x=c,this}setY(c){return this.y=c,this}setZ(c){return this.z=c,this}setComponent(c,h){switch(c){case 0:this.x=h;break;case 1:this.y=h;break;case 2:this.z=h;break;default:throw new Error("index is out of range: "+c)}return this}getComponent(c){switch(c){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+c)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(c){return this.x=c.x,this.y=c.y,this.z=c.z,this}add(c,h){return void 0!==h?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(c,h)):(this.x+=c.x,this.y+=c.y,this.z+=c.z,this)}addScalar(c){return this.x+=c,this.y+=c,this.z+=c,this}addVectors(c,h){return this.x=c.x+h.x,this.y=c.y+h.y,this.z=c.z+h.z,this}addScaledVector(c,h){return this.x+=c.x*h,this.y+=c.y*h,this.z+=c.z*h,this}sub(c,h){return void 0!==h?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(c,h)):(this.x-=c.x,this.y-=c.y,this.z-=c.z,this)}subScalar(c){return this.x-=c,this.y-=c,this.z-=c,this}subVectors(c,h){return this.x=c.x-h.x,this.y=c.y-h.y,this.z=c.z-h.z,this}multiply(c,h){return void 0!==h?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(c,h)):(this.x*=c.x,this.y*=c.y,this.z*=c.z,this)}multiplyScalar(c){return this.x*=c,this.y*=c,this.z*=c,this}multiplyVectors(c,h){return this.x=c.x*h.x,this.y=c.y*h.y,this.z=c.z*h.z,this}applyEuler(c){return c&&c.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(ta.setFromEuler(c))}applyAxisAngle(c,h){return this.applyQuaternion(ta.setFromAxisAngle(c,h))}applyMatrix3(c){const h=this.x,M=this.y,E=this.z,R=c.elements;return this.x=R[0]*h+R[3]*M+R[6]*E,this.y=R[1]*h+R[4]*M+R[7]*E,this.z=R[2]*h+R[5]*M+R[8]*E,this}applyNormalMatrix(c){return this.applyMatrix3(c).normalize()}applyMatrix4(c){const h=this.x,M=this.y,E=this.z,R=c.elements,V=1/(R[3]*h+R[7]*M+R[11]*E+R[15]);return this.x=(R[0]*h+R[4]*M+R[8]*E+R[12])*V,this.y=(R[1]*h+R[5]*M+R[9]*E+R[13])*V,this.z=(R[2]*h+R[6]*M+R[10]*E+R[14])*V,this}applyQuaternion(c){const h=this.x,M=this.y,E=this.z,R=c.x,V=c.y,X=c.z,ee=c.w,te=ee*h+V*E-X*M,me=ee*M+X*h-R*E,de=ee*E+R*M-V*h,ge=-R*h-V*M-X*E;return this.x=te*ee+ge*-R+me*-X-de*-V,this.y=me*ee+ge*-V+de*-R-te*-X,this.z=de*ee+ge*-X+te*-V-me*-R,this}project(c){return this.applyMatrix4(c.matrixWorldInverse).applyMatrix4(c.projectionMatrix)}unproject(c){return this.applyMatrix4(c.projectionMatrixInverse).applyMatrix4(c.matrixWorld)}transformDirection(c){const h=this.x,M=this.y,E=this.z,R=c.elements;return this.x=R[0]*h+R[4]*M+R[8]*E,this.y=R[1]*h+R[5]*M+R[9]*E,this.z=R[2]*h+R[6]*M+R[10]*E,this.normalize()}divide(c){return this.x/=c.x,this.y/=c.y,this.z/=c.z,this}divideScalar(c){return this.multiplyScalar(1/c)}min(c){return this.x=Math.min(this.x,c.x),this.y=Math.min(this.y,c.y),this.z=Math.min(this.z,c.z),this}max(c){return this.x=Math.max(this.x,c.x),this.y=Math.max(this.y,c.y),this.z=Math.max(this.z,c.z),this}clamp(c,h){return this.x=Math.max(c.x,Math.min(h.x,this.x)),this.y=Math.max(c.y,Math.min(h.y,this.y)),this.z=Math.max(c.z,Math.min(h.z,this.z)),this}clampScalar(c,h){return this.x=Math.max(c,Math.min(h,this.x)),this.y=Math.max(c,Math.min(h,this.y)),this.z=Math.max(c,Math.min(h,this.z)),this}clampLength(c,h){const M=this.length();return this.divideScalar(M||1).multiplyScalar(Math.max(c,Math.min(h,M)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(c){return this.x*c.x+this.y*c.y+this.z*c.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(c){return this.normalize().multiplyScalar(c)}lerp(c,h){return this.x+=(c.x-this.x)*h,this.y+=(c.y-this.y)*h,this.z+=(c.z-this.z)*h,this}lerpVectors(c,h,M){return this.x=c.x+(h.x-c.x)*M,this.y=c.y+(h.y-c.y)*M,this.z=c.z+(h.z-c.z)*M,this}cross(c,h){return void 0!==h?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(c,h)):this.crossVectors(this,c)}crossVectors(c,h){const M=c.x,E=c.y,R=c.z,V=h.x,X=h.y,ee=h.z;return this.x=E*ee-R*X,this.y=R*V-M*ee,this.z=M*X-E*V,this}projectOnVector(c){const h=c.lengthSq();if(0===h)return this.set(0,0,0);const M=c.dot(this)/h;return this.copy(c).multiplyScalar(M)}projectOnPlane(c){return bs.copy(this).projectOnVector(c),this.sub(bs)}reflect(c){return this.sub(bs.copy(c).multiplyScalar(2*this.dot(c)))}angleTo(c){const h=Math.sqrt(this.lengthSq()*c.lengthSq());if(0===h)return Math.PI/2;const M=this.dot(c)/h;return Math.acos(Yi.clamp(M,-1,1))}distanceTo(c){return Math.sqrt(this.distanceToSquared(c))}distanceToSquared(c){const h=this.x-c.x,M=this.y-c.y,E=this.z-c.z;return h*h+M*M+E*E}manhattanDistanceTo(c){return Math.abs(this.x-c.x)+Math.abs(this.y-c.y)+Math.abs(this.z-c.z)}setFromSpherical(c){return this.setFromSphericalCoords(c.radius,c.phi,c.theta)}setFromSphericalCoords(c,h,M){const E=Math.sin(h)*c;return this.x=E*Math.sin(M),this.y=Math.cos(h)*c,this.z=E*Math.cos(M),this}setFromCylindrical(c){return this.setFromCylindricalCoords(c.radius,c.theta,c.y)}setFromCylindricalCoords(c,h,M){return this.x=c*Math.sin(h),this.y=M,this.z=c*Math.cos(h),this}setFromMatrixPosition(c){const h=c.elements;return this.x=h[12],this.y=h[13],this.z=h[14],this}setFromMatrixScale(c){const h=this.setFromMatrixColumn(c,0).length(),M=this.setFromMatrixColumn(c,1).length(),E=this.setFromMatrixColumn(c,2).length();return this.x=h,this.y=M,this.z=E,this}setFromMatrixColumn(c,h){return this.fromArray(c.elements,4*h)}setFromMatrix3Column(c,h){return this.fromArray(c.elements,3*h)}equals(c){return c.x===this.x&&c.y===this.y&&c.z===this.z}fromArray(c,h=0){return this.x=c[h],this.y=c[h+1],this.z=c[h+2],this}toArray(c=[],h=0){return c[h]=this.x,c[h+1]=this.y,c[h+2]=this.z,c}fromBufferAttribute(c,h,M){return void 0!==M&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=c.getX(h),this.y=c.getY(h),this.z=c.getZ(h),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}Ze.prototype.isVector3=!0;const bs=new Ze,ta=new Ds;class Fo{constructor(c=new Ze(1/0,1/0,1/0),h=new Ze(-1/0,-1/0,-1/0)){this.min=c,this.max=h}set(c,h){return this.min.copy(c),this.max.copy(h),this}setFromArray(c){let h=1/0,M=1/0,E=1/0,R=-1/0,V=-1/0,X=-1/0;for(let ee=0,te=c.length;ee<te;ee+=3){const me=c[ee],de=c[ee+1],ge=c[ee+2];me<h&&(h=me),de<M&&(M=de),ge<E&&(E=ge),me>R&&(R=me),de>V&&(V=de),ge>X&&(X=ge)}return this.min.set(h,M,E),this.max.set(R,V,X),this}setFromBufferAttribute(c){let h=1/0,M=1/0,E=1/0,R=-1/0,V=-1/0,X=-1/0;for(let ee=0,te=c.count;ee<te;ee++){const me=c.getX(ee),de=c.getY(ee),ge=c.getZ(ee);me<h&&(h=me),de<M&&(M=de),ge<E&&(E=ge),me>R&&(R=me),de>V&&(V=de),ge>X&&(X=ge)}return this.min.set(h,M,E),this.max.set(R,V,X),this}setFromPoints(c){this.makeEmpty();for(let h=0,M=c.length;h<M;h++)this.expandByPoint(c[h]);return this}setFromCenterAndSize(c,h){const M=jo.copy(h).multiplyScalar(.5);return this.min.copy(c).sub(M),this.max.copy(c).add(M),this}setFromObject(c){return this.makeEmpty(),this.expandByObject(c)}clone(){return(new this.constructor).copy(this)}copy(c){return this.min.copy(c.min),this.max.copy(c.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(c){return void 0===c&&(console.warn("THREE.Box3: .getCenter() target is now required"),c=new Ze),this.isEmpty()?c.set(0,0,0):c.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(c){return void 0===c&&(console.warn("THREE.Box3: .getSize() target is now required"),c=new Ze),this.isEmpty()?c.set(0,0,0):c.subVectors(this.max,this.min)}expandByPoint(c){return this.min.min(c),this.max.max(c),this}expandByVector(c){return this.min.sub(c),this.max.add(c),this}expandByScalar(c){return this.min.addScalar(-c),this.max.addScalar(c),this}expandByObject(c){c.updateWorldMatrix(!1,!1);const h=c.geometry;void 0!==h&&(null===h.boundingBox&&h.computeBoundingBox(),Uc.copy(h.boundingBox),Uc.applyMatrix4(c.matrixWorld),this.union(Uc));const M=c.children;for(let E=0,R=M.length;E<R;E++)this.expandByObject(M[E]);return this}containsPoint(c){return!(c.x<this.min.x||c.x>this.max.x||c.y<this.min.y||c.y>this.max.y||c.z<this.min.z||c.z>this.max.z)}containsBox(c){return this.min.x<=c.min.x&&c.max.x<=this.max.x&&this.min.y<=c.min.y&&c.max.y<=this.max.y&&this.min.z<=c.min.z&&c.max.z<=this.max.z}getParameter(c,h){return void 0===h&&(console.warn("THREE.Box3: .getParameter() target is now required"),h=new Ze),h.set((c.x-this.min.x)/(this.max.x-this.min.x),(c.y-this.min.y)/(this.max.y-this.min.y),(c.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(c){return!(c.max.x<this.min.x||c.min.x>this.max.x||c.max.y<this.min.y||c.min.y>this.max.y||c.max.z<this.min.z||c.min.z>this.max.z)}intersectsSphere(c){return this.clampPoint(c.center,jo),jo.distanceToSquared(c.center)<=c.radius*c.radius}intersectsPlane(c){let h,M;return c.normal.x>0?(h=c.normal.x*this.min.x,M=c.normal.x*this.max.x):(h=c.normal.x*this.max.x,M=c.normal.x*this.min.x),c.normal.y>0?(h+=c.normal.y*this.min.y,M+=c.normal.y*this.max.y):(h+=c.normal.y*this.max.y,M+=c.normal.y*this.min.y),c.normal.z>0?(h+=c.normal.z*this.min.z,M+=c.normal.z*this.max.z):(h+=c.normal.z*this.max.z,M+=c.normal.z*this.min.z),h<=-c.constant&&M>=-c.constant}intersectsTriangle(c){if(this.isEmpty())return!1;this.getCenter(Bl),Gc.subVectors(this.max,Bl),fo.subVectors(c.a,Bl),Ya.subVectors(c.b,Bl),El.subVectors(c.c,Bl),Xr.subVectors(Ya,fo),_c.subVectors(El,Ya),Na.subVectors(fo,El);let h=[0,-Xr.z,Xr.y,0,-_c.z,_c.y,0,-Na.z,Na.y,Xr.z,0,-Xr.x,_c.z,0,-_c.x,Na.z,0,-Na.x,-Xr.y,Xr.x,0,-_c.y,_c.x,0,-Na.y,Na.x,0];return!(!Tu(h,fo,Ya,El,Gc)||(h=[1,0,0,0,1,0,0,0,1],!Tu(h,fo,Ya,El,Gc)))&&(Xa.crossVectors(Xr,_c),h=[Xa.x,Xa.y,Xa.z],Tu(h,fo,Ya,El,Gc))}clampPoint(c,h){return void 0===h&&(console.warn("THREE.Box3: .clampPoint() target is now required"),h=new Ze),h.copy(c).clamp(this.min,this.max)}distanceToPoint(c){return jo.copy(c).clamp(this.min,this.max).sub(c).length()}getBoundingSphere(c){return void 0===c&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(c.center),c.radius=.5*this.getSize(jo).length(),c}intersect(c){return this.min.max(c.min),this.max.min(c.max),this.isEmpty()&&this.makeEmpty(),this}union(c){return this.min.min(c.min),this.max.max(c.max),this}applyMatrix4(c){return this.isEmpty()||(Nl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(c),Nl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(c),Nl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(c),Nl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(c),Nl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(c),Nl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(c),Nl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(c),Nl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(c),this.setFromPoints(Nl)),this}translate(c){return this.min.add(c),this.max.add(c),this}equals(c){return c.min.equals(this.min)&&c.max.equals(this.max)}}Fo.prototype.isBox3=!0;const Nl=[new Ze,new Ze,new Ze,new Ze,new Ze,new Ze,new Ze,new Ze],jo=new Ze,Uc=new Fo,fo=new Ze,Ya=new Ze,El=new Ze,Xr=new Ze,_c=new Ze,Na=new Ze,Bl=new Ze,Gc=new Ze,Xa=new Ze,Tl=new Ze;function Tu(x,c,h,M,E){for(let R=0,V=x.length-3;R<=V;R+=3){Tl.fromArray(x,R);const X=E.x*Math.abs(Tl.x)+E.y*Math.abs(Tl.y)+E.z*Math.abs(Tl.z),ee=c.dot(Tl),te=h.dot(Tl),me=M.dot(Tl);if(Math.max(-Math.max(ee,te,me),Math.min(ee,te,me))>X)return!1}return!0}const Bs=new Fo;class Hs{constructor(c=new Ze,h=-1){this.center=c,this.radius=h}set(c,h){return this.center.copy(c),this.radius=h,this}setFromPoints(c,h){const M=this.center;void 0!==h?M.copy(h):Bs.setFromPoints(c).getCenter(M);let E=0;for(let R=0,V=c.length;R<V;R++)E=Math.max(E,M.distanceToSquared(c[R]));return this.radius=Math.sqrt(E),this}copy(c){return this.center.copy(c.center),this.radius=c.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(c){return c.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(c){return c.distanceTo(this.center)-this.radius}intersectsSphere(c){const h=this.radius+c.radius;return c.center.distanceToSquared(this.center)<=h*h}intersectsBox(c){return c.intersectsSphere(this)}intersectsPlane(c){return Math.abs(c.distanceToPoint(this.center))<=this.radius}clampPoint(c,h){const M=this.center.distanceToSquared(c);return void 0===h&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),h=new Ze),h.copy(c),M>this.radius*this.radius&&(h.sub(this.center).normalize(),h.multiplyScalar(this.radius).add(this.center)),h}getBoundingBox(c){return void 0===c&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),c=new Fo),this.isEmpty()?(c.makeEmpty(),c):(c.set(this.center,this.center),c.expandByScalar(this.radius),c)}applyMatrix4(c){return this.center.applyMatrix4(c),this.radius=this.radius*c.getMaxScaleOnAxis(),this}translate(c){return this.center.add(c),this}equals(c){return c.center.equals(this.center)&&c.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const pa=new Ze,nc=new Ze,al=new Ze,Co=new Ze,qh=new Ze,Du=new Ze,Au=new Ze;class na{constructor(c=new Ze,h=new Ze(0,0,-1)){this.origin=c,this.direction=h}set(c,h){return this.origin.copy(c),this.direction.copy(h),this}copy(c){return this.origin.copy(c.origin),this.direction.copy(c.direction),this}at(c,h){return void 0===h&&(console.warn("THREE.Ray: .at() target is now required"),h=new Ze),h.copy(this.direction).multiplyScalar(c).add(this.origin)}lookAt(c){return this.direction.copy(c).sub(this.origin).normalize(),this}recast(c){return this.origin.copy(this.at(c,pa)),this}closestPointToPoint(c,h){void 0===h&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),h=new Ze),h.subVectors(c,this.origin);const M=h.dot(this.direction);return M<0?h.copy(this.origin):h.copy(this.direction).multiplyScalar(M).add(this.origin)}distanceToPoint(c){return Math.sqrt(this.distanceSqToPoint(c))}distanceSqToPoint(c){const h=pa.subVectors(c,this.origin).dot(this.direction);return h<0?this.origin.distanceToSquared(c):(pa.copy(this.direction).multiplyScalar(h).add(this.origin),pa.distanceToSquared(c))}distanceSqToSegment(c,h,M,E){nc.copy(c).add(h).multiplyScalar(.5),al.copy(h).sub(c).normalize(),Co.copy(this.origin).sub(nc);const R=.5*c.distanceTo(h),V=-this.direction.dot(al),X=Co.dot(this.direction),ee=-Co.dot(al),te=Co.lengthSq(),me=Math.abs(1-V*V);let de,ge,be,Te;if(me>0)if(de=V*ee-X,ge=V*X-ee,Te=R*me,de>=0)if(ge>=-Te)if(ge<=Te){const Oe=1/me;de*=Oe,ge*=Oe,be=de*(de+V*ge+2*X)+ge*(V*de+ge+2*ee)+te}else ge=R,de=Math.max(0,-(V*ge+X)),be=-de*de+ge*(ge+2*ee)+te;else ge=-R,de=Math.max(0,-(V*ge+X)),be=-de*de+ge*(ge+2*ee)+te;else ge<=-Te?(de=Math.max(0,-(-V*R+X)),ge=de>0?-R:Math.min(Math.max(-R,-ee),R),be=-de*de+ge*(ge+2*ee)+te):ge<=Te?(de=0,ge=Math.min(Math.max(-R,-ee),R),be=ge*(ge+2*ee)+te):(de=Math.max(0,-(V*R+X)),ge=de>0?R:Math.min(Math.max(-R,-ee),R),be=-de*de+ge*(ge+2*ee)+te);else ge=V>0?-R:R,de=Math.max(0,-(V*ge+X)),be=-de*de+ge*(ge+2*ee)+te;return M&&M.copy(this.direction).multiplyScalar(de).add(this.origin),E&&E.copy(al).multiplyScalar(ge).add(nc),be}intersectSphere(c,h){pa.subVectors(c.center,this.origin);const M=pa.dot(this.direction),E=pa.dot(pa)-M*M,R=c.radius*c.radius;if(E>R)return null;const V=Math.sqrt(R-E),X=M-V,ee=M+V;return X<0&&ee<0?null:this.at(X<0?ee:X,h)}intersectsSphere(c){return this.distanceSqToPoint(c.center)<=c.radius*c.radius}distanceToPlane(c){const h=c.normal.dot(this.direction);if(0===h)return 0===c.distanceToPoint(this.origin)?0:null;const M=-(this.origin.dot(c.normal)+c.constant)/h;return M>=0?M:null}intersectPlane(c,h){const M=this.distanceToPlane(c);return null===M?null:this.at(M,h)}intersectsPlane(c){const h=c.distanceToPoint(this.origin);return 0===h||c.normal.dot(this.direction)*h<0}intersectBox(c,h){let M,E,R,V,X,ee;const te=1/this.direction.x,me=1/this.direction.y,de=1/this.direction.z,ge=this.origin;return te>=0?(M=(c.min.x-ge.x)*te,E=(c.max.x-ge.x)*te):(M=(c.max.x-ge.x)*te,E=(c.min.x-ge.x)*te),me>=0?(R=(c.min.y-ge.y)*me,V=(c.max.y-ge.y)*me):(R=(c.max.y-ge.y)*me,V=(c.min.y-ge.y)*me),M>V||R>E||((R>M||M!=M)&&(M=R),(V<E||E!=E)&&(E=V),de>=0?(X=(c.min.z-ge.z)*de,ee=(c.max.z-ge.z)*de):(X=(c.max.z-ge.z)*de,ee=(c.min.z-ge.z)*de),M>ee||X>E)||((X>M||M!=M)&&(M=X),(ee<E||E!=E)&&(E=ee),E<0)?null:this.at(M>=0?M:E,h)}intersectsBox(c){return null!==this.intersectBox(c,pa)}intersectTriangle(c,h,M,E,R){qh.subVectors(h,c),Du.subVectors(M,c),Au.crossVectors(qh,Du);let X,V=this.direction.dot(Au);if(V>0){if(E)return null;X=1}else{if(!(V<0))return null;X=-1,V=-V}Co.subVectors(this.origin,c);const ee=X*this.direction.dot(Du.crossVectors(Co,Du));if(ee<0)return null;const te=X*this.direction.dot(qh.cross(Co));if(te<0||ee+te>V)return null;const me=-X*Co.dot(Au);return me<0?null:this.at(me/V,R)}applyMatrix4(c){return this.origin.applyMatrix4(c),this.direction.transformDirection(c),this}equals(c){return c.origin.equals(this.origin)&&c.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class pr{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(c,h,M,E,R,V,X,ee,te,me,de,ge,be,Te,Oe,ze){const ke=this.elements;return ke[0]=c,ke[4]=h,ke[8]=M,ke[12]=E,ke[1]=R,ke[5]=V,ke[9]=X,ke[13]=ee,ke[2]=te,ke[6]=me,ke[10]=de,ke[14]=ge,ke[3]=be,ke[7]=Te,ke[11]=Oe,ke[15]=ze,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new pr).fromArray(this.elements)}copy(c){const h=this.elements,M=c.elements;return h[0]=M[0],h[1]=M[1],h[2]=M[2],h[3]=M[3],h[4]=M[4],h[5]=M[5],h[6]=M[6],h[7]=M[7],h[8]=M[8],h[9]=M[9],h[10]=M[10],h[11]=M[11],h[12]=M[12],h[13]=M[13],h[14]=M[14],h[15]=M[15],this}copyPosition(c){const h=this.elements,M=c.elements;return h[12]=M[12],h[13]=M[13],h[14]=M[14],this}setFromMatrix3(c){const h=c.elements;return this.set(h[0],h[3],h[6],0,h[1],h[4],h[7],0,h[2],h[5],h[8],0,0,0,0,1),this}extractBasis(c,h,M){return c.setFromMatrixColumn(this,0),h.setFromMatrixColumn(this,1),M.setFromMatrixColumn(this,2),this}makeBasis(c,h,M){return this.set(c.x,h.x,M.x,0,c.y,h.y,M.y,0,c.z,h.z,M.z,0,0,0,0,1),this}extractRotation(c){const h=this.elements,M=c.elements,E=1/Xu.setFromMatrixColumn(c,0).length(),R=1/Xu.setFromMatrixColumn(c,1).length(),V=1/Xu.setFromMatrixColumn(c,2).length();return h[0]=M[0]*E,h[1]=M[1]*E,h[2]=M[2]*E,h[3]=0,h[4]=M[4]*R,h[5]=M[5]*R,h[6]=M[6]*R,h[7]=0,h[8]=M[8]*V,h[9]=M[9]*V,h[10]=M[10]*V,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,this}makeRotationFromEuler(c){c&&c.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const h=this.elements,M=c.x,E=c.y,R=c.z,V=Math.cos(M),X=Math.sin(M),ee=Math.cos(E),te=Math.sin(E),me=Math.cos(R),de=Math.sin(R);if("XYZ"===c.order){const ge=V*me,be=V*de,Te=X*me,Oe=X*de;h[0]=ee*me,h[4]=-ee*de,h[8]=te,h[1]=be+Te*te,h[5]=ge-Oe*te,h[9]=-X*ee,h[2]=Oe-ge*te,h[6]=Te+be*te,h[10]=V*ee}else if("YXZ"===c.order){const ge=ee*me,be=ee*de,Te=te*me,Oe=te*de;h[0]=ge+Oe*X,h[4]=Te*X-be,h[8]=V*te,h[1]=V*de,h[5]=V*me,h[9]=-X,h[2]=be*X-Te,h[6]=Oe+ge*X,h[10]=V*ee}else if("ZXY"===c.order){const ge=ee*me,be=ee*de,Te=te*me,Oe=te*de;h[0]=ge-Oe*X,h[4]=-V*de,h[8]=Te+be*X,h[1]=be+Te*X,h[5]=V*me,h[9]=Oe-ge*X,h[2]=-V*te,h[6]=X,h[10]=V*ee}else if("ZYX"===c.order){const ge=V*me,be=V*de,Te=X*me,Oe=X*de;h[0]=ee*me,h[4]=Te*te-be,h[8]=ge*te+Oe,h[1]=ee*de,h[5]=Oe*te+ge,h[9]=be*te-Te,h[2]=-te,h[6]=X*ee,h[10]=V*ee}else if("YZX"===c.order){const ge=V*ee,be=V*te,Te=X*ee,Oe=X*te;h[0]=ee*me,h[4]=Oe-ge*de,h[8]=Te*de+be,h[1]=de,h[5]=V*me,h[9]=-X*me,h[2]=-te*me,h[6]=be*de+Te,h[10]=ge-Oe*de}else if("XZY"===c.order){const ge=V*ee,be=V*te,Te=X*ee,Oe=X*te;h[0]=ee*me,h[4]=-de,h[8]=te*me,h[1]=ge*de+Oe,h[5]=V*me,h[9]=be*de-Te,h[2]=Te*de-be,h[6]=X*me,h[10]=Oe*de+ge}return h[3]=0,h[7]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,this}makeRotationFromQuaternion(c){return this.compose(Ef,c,hg)}lookAt(c,h,M){const E=this.elements;return Ja.subVectors(c,h),0===Ja.lengthSq()&&(Ja.z=1),Ja.normalize(),vc.crossVectors(M,Ja),0===vc.lengthSq()&&(1===Math.abs(M.z)?Ja.x+=1e-4:Ja.z+=1e-4,Ja.normalize(),vc.crossVectors(M,Ja)),vc.normalize(),Wc.crossVectors(Ja,vc),E[0]=vc.x,E[4]=Wc.x,E[8]=Ja.x,E[1]=vc.y,E[5]=Wc.y,E[9]=Ja.y,E[2]=vc.z,E[6]=Wc.z,E[10]=Ja.z,this}multiply(c,h){return void 0!==h?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(c,h)):this.multiplyMatrices(this,c)}premultiply(c){return this.multiplyMatrices(c,this)}multiplyMatrices(c,h){const M=c.elements,E=h.elements,R=this.elements,V=M[0],X=M[4],ee=M[8],te=M[12],me=M[1],de=M[5],ge=M[9],be=M[13],Te=M[2],Oe=M[6],ze=M[10],ke=M[14],Ee=M[3],at=M[7],rt=M[11],gt=M[15],tt=E[0],Rt=E[4],rn=E[8],Ut=E[12],Zt=E[1],dn=E[5],kn=E[9],vn=E[13],Yt=E[2],un=E[6],In=E[10],xi=E[14],Xi=E[3],ir=E[7],Ir=E[11],Mr=E[15];return R[0]=V*tt+X*Zt+ee*Yt+te*Xi,R[4]=V*Rt+X*dn+ee*un+te*ir,R[8]=V*rn+X*kn+ee*In+te*Ir,R[12]=V*Ut+X*vn+ee*xi+te*Mr,R[1]=me*tt+de*Zt+ge*Yt+be*Xi,R[5]=me*Rt+de*dn+ge*un+be*ir,R[9]=me*rn+de*kn+ge*In+be*Ir,R[13]=me*Ut+de*vn+ge*xi+be*Mr,R[2]=Te*tt+Oe*Zt+ze*Yt+ke*Xi,R[6]=Te*Rt+Oe*dn+ze*un+ke*ir,R[10]=Te*rn+Oe*kn+ze*In+ke*Ir,R[14]=Te*Ut+Oe*vn+ze*xi+ke*Mr,R[3]=Ee*tt+at*Zt+rt*Yt+gt*Xi,R[7]=Ee*Rt+at*dn+rt*un+gt*ir,R[11]=Ee*rn+at*kn+rt*In+gt*Ir,R[15]=Ee*Ut+at*vn+rt*xi+gt*Mr,this}multiplyScalar(c){const h=this.elements;return h[0]*=c,h[4]*=c,h[8]*=c,h[12]*=c,h[1]*=c,h[5]*=c,h[9]*=c,h[13]*=c,h[2]*=c,h[6]*=c,h[10]*=c,h[14]*=c,h[3]*=c,h[7]*=c,h[11]*=c,h[15]*=c,this}determinant(){const c=this.elements,h=c[0],M=c[4],E=c[8],R=c[12],V=c[1],X=c[5],ee=c[9],te=c[13],me=c[2],de=c[6],ge=c[10],be=c[14];return c[3]*(+R*ee*de-E*te*de-R*X*ge+M*te*ge+E*X*be-M*ee*be)+c[7]*(+h*ee*be-h*te*ge+R*V*ge-E*V*be+E*te*me-R*ee*me)+c[11]*(+h*te*de-h*X*be-R*V*de+M*V*be+R*X*me-M*te*me)+c[15]*(-E*X*me-h*ee*de+h*X*ge+E*V*de-M*V*ge+M*ee*me)}transpose(){const c=this.elements;let h;return h=c[1],c[1]=c[4],c[4]=h,h=c[2],c[2]=c[8],c[8]=h,h=c[6],c[6]=c[9],c[9]=h,h=c[3],c[3]=c[12],c[12]=h,h=c[7],c[7]=c[13],c[13]=h,h=c[11],c[11]=c[14],c[14]=h,this}setPosition(c,h,M){const E=this.elements;return c.isVector3?(E[12]=c.x,E[13]=c.y,E[14]=c.z):(E[12]=c,E[13]=h,E[14]=M),this}invert(){const c=this.elements,h=c[0],M=c[1],E=c[2],R=c[3],V=c[4],X=c[5],ee=c[6],te=c[7],me=c[8],de=c[9],ge=c[10],be=c[11],Te=c[12],Oe=c[13],ze=c[14],ke=c[15],Ee=de*ze*te-Oe*ge*te+Oe*ee*be-X*ze*be-de*ee*ke+X*ge*ke,at=Te*ge*te-me*ze*te-Te*ee*be+V*ze*be+me*ee*ke-V*ge*ke,rt=me*Oe*te-Te*de*te+Te*X*be-V*Oe*be-me*X*ke+V*de*ke,gt=Te*de*ee-me*Oe*ee-Te*X*ge+V*Oe*ge+me*X*ze-V*de*ze,tt=h*Ee+M*at+E*rt+R*gt;if(0===tt)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Rt=1/tt;return c[0]=Ee*Rt,c[1]=(Oe*ge*R-de*ze*R-Oe*E*be+M*ze*be+de*E*ke-M*ge*ke)*Rt,c[2]=(X*ze*R-Oe*ee*R+Oe*E*te-M*ze*te-X*E*ke+M*ee*ke)*Rt,c[3]=(de*ee*R-X*ge*R-de*E*te+M*ge*te+X*E*be-M*ee*be)*Rt,c[4]=at*Rt,c[5]=(me*ze*R-Te*ge*R+Te*E*be-h*ze*be-me*E*ke+h*ge*ke)*Rt,c[6]=(Te*ee*R-V*ze*R-Te*E*te+h*ze*te+V*E*ke-h*ee*ke)*Rt,c[7]=(V*ge*R-me*ee*R+me*E*te-h*ge*te-V*E*be+h*ee*be)*Rt,c[8]=rt*Rt,c[9]=(Te*de*R-me*Oe*R-Te*M*be+h*Oe*be+me*M*ke-h*de*ke)*Rt,c[10]=(V*Oe*R-Te*X*R+Te*M*te-h*Oe*te-V*M*ke+h*X*ke)*Rt,c[11]=(me*X*R-V*de*R-me*M*te+h*de*te+V*M*be-h*X*be)*Rt,c[12]=gt*Rt,c[13]=(me*Oe*E-Te*de*E+Te*M*ge-h*Oe*ge-me*M*ze+h*de*ze)*Rt,c[14]=(Te*X*E-V*Oe*E-Te*M*ee+h*Oe*ee+V*M*ze-h*X*ze)*Rt,c[15]=(V*de*E-me*X*E+me*M*ee-h*de*ee-V*M*ge+h*X*ge)*Rt,this}scale(c){const h=this.elements,M=c.x,E=c.y,R=c.z;return h[0]*=M,h[4]*=E,h[8]*=R,h[1]*=M,h[5]*=E,h[9]*=R,h[2]*=M,h[6]*=E,h[10]*=R,h[3]*=M,h[7]*=E,h[11]*=R,this}getMaxScaleOnAxis(){const c=this.elements;return Math.sqrt(Math.max(c[0]*c[0]+c[1]*c[1]+c[2]*c[2],c[4]*c[4]+c[5]*c[5]+c[6]*c[6],c[8]*c[8]+c[9]*c[9]+c[10]*c[10]))}makeTranslation(c,h,M){return this.set(1,0,0,c,0,1,0,h,0,0,1,M,0,0,0,1),this}makeRotationX(c){const h=Math.cos(c),M=Math.sin(c);return this.set(1,0,0,0,0,h,-M,0,0,M,h,0,0,0,0,1),this}makeRotationY(c){const h=Math.cos(c),M=Math.sin(c);return this.set(h,0,M,0,0,1,0,0,-M,0,h,0,0,0,0,1),this}makeRotationZ(c){const h=Math.cos(c),M=Math.sin(c);return this.set(h,-M,0,0,M,h,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(c,h){const M=Math.cos(h),E=Math.sin(h),R=1-M,V=c.x,X=c.y,ee=c.z,te=R*V,me=R*X;return this.set(te*V+M,te*X-E*ee,te*ee+E*X,0,te*X+E*ee,me*X+M,me*ee-E*V,0,te*ee-E*X,me*ee+E*V,R*ee*ee+M,0,0,0,0,1),this}makeScale(c,h,M){return this.set(c,0,0,0,0,h,0,0,0,0,M,0,0,0,0,1),this}makeShear(c,h,M){return this.set(1,h,M,0,c,1,M,0,c,h,1,0,0,0,0,1),this}compose(c,h,M){const E=this.elements,R=h._x,V=h._y,X=h._z,ee=h._w,te=R+R,me=V+V,de=X+X,ge=R*te,be=R*me,Te=R*de,Oe=V*me,ze=V*de,ke=X*de,Ee=ee*te,at=ee*me,rt=ee*de,gt=M.x,tt=M.y,Rt=M.z;return E[0]=(1-(Oe+ke))*gt,E[1]=(be+rt)*gt,E[2]=(Te-at)*gt,E[3]=0,E[4]=(be-rt)*tt,E[5]=(1-(ge+ke))*tt,E[6]=(ze+Ee)*tt,E[7]=0,E[8]=(Te+at)*Rt,E[9]=(ze-Ee)*Rt,E[10]=(1-(ge+Oe))*Rt,E[11]=0,E[12]=c.x,E[13]=c.y,E[14]=c.z,E[15]=1,this}decompose(c,h,M){const E=this.elements;let R=Xu.set(E[0],E[1],E[2]).length();const V=Xu.set(E[4],E[5],E[6]).length(),X=Xu.set(E[8],E[9],E[10]).length();this.determinant()<0&&(R=-R),c.x=E[12],c.y=E[13],c.z=E[14],ic.copy(this);const te=1/R,me=1/V,de=1/X;return ic.elements[0]*=te,ic.elements[1]*=te,ic.elements[2]*=te,ic.elements[4]*=me,ic.elements[5]*=me,ic.elements[6]*=me,ic.elements[8]*=de,ic.elements[9]*=de,ic.elements[10]*=de,h.setFromRotationMatrix(ic),M.x=R,M.y=V,M.z=X,this}makePerspective(c,h,M,E,R,V){void 0===V&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const X=this.elements,te=2*R/(M-E),me=(h+c)/(h-c),de=(M+E)/(M-E),ge=-(V+R)/(V-R),be=-2*V*R/(V-R);return X[0]=2*R/(h-c),X[4]=0,X[8]=me,X[12]=0,X[1]=0,X[5]=te,X[9]=de,X[13]=0,X[2]=0,X[6]=0,X[10]=ge,X[14]=be,X[3]=0,X[7]=0,X[11]=-1,X[15]=0,this}makeOrthographic(c,h,M,E,R,V){const X=this.elements,ee=1/(h-c),te=1/(M-E),me=1/(V-R),de=(h+c)*ee,ge=(M+E)*te,be=(V+R)*me;return X[0]=2*ee,X[4]=0,X[8]=0,X[12]=-de,X[1]=0,X[5]=2*te,X[9]=0,X[13]=-ge,X[2]=0,X[6]=0,X[10]=-2*me,X[14]=-be,X[3]=0,X[7]=0,X[11]=0,X[15]=1,this}equals(c){const h=this.elements,M=c.elements;for(let E=0;E<16;E++)if(h[E]!==M[E])return!1;return!0}fromArray(c,h=0){for(let M=0;M<16;M++)this.elements[M]=c[M+h];return this}toArray(c=[],h=0){const M=this.elements;return c[h]=M[0],c[h+1]=M[1],c[h+2]=M[2],c[h+3]=M[3],c[h+4]=M[4],c[h+5]=M[5],c[h+6]=M[6],c[h+7]=M[7],c[h+8]=M[8],c[h+9]=M[9],c[h+10]=M[10],c[h+11]=M[11],c[h+12]=M[12],c[h+13]=M[13],c[h+14]=M[14],c[h+15]=M[15],c}}pr.prototype.isMatrix4=!0;const Xu=new Ze,ic=new pr,Ef=new Ze(0,0,0),hg=new Ze(1,1,1),vc=new Ze,Wc=new Ze,Ja=new Ze,Id=new pr,zp=new Ds;class Qe{constructor(c=0,h=0,M=0,E=Qe.DefaultOrder){this._x=c,this._y=h,this._z=M,this._order=E}get x(){return this._x}set x(c){this._x=c,this._onChangeCallback()}get y(){return this._y}set y(c){this._y=c,this._onChangeCallback()}get z(){return this._z}set z(c){this._z=c,this._onChangeCallback()}get order(){return this._order}set order(c){this._order=c,this._onChangeCallback()}set(c,h,M,E){return this._x=c,this._y=h,this._z=M,this._order=E||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(c){return this._x=c._x,this._y=c._y,this._z=c._z,this._order=c._order,this._onChangeCallback(),this}setFromRotationMatrix(c,h,M){const E=Yi.clamp,R=c.elements,V=R[0],X=R[4],ee=R[8],te=R[1],me=R[5],de=R[9],ge=R[2],be=R[6],Te=R[10];switch(h=h||this._order){case"XYZ":this._y=Math.asin(E(ee,-1,1)),Math.abs(ee)<.9999999?(this._x=Math.atan2(-de,Te),this._z=Math.atan2(-X,V)):(this._x=Math.atan2(be,me),this._z=0);break;case"YXZ":this._x=Math.asin(-E(de,-1,1)),Math.abs(de)<.9999999?(this._y=Math.atan2(ee,Te),this._z=Math.atan2(te,me)):(this._y=Math.atan2(-ge,V),this._z=0);break;case"ZXY":this._x=Math.asin(E(be,-1,1)),Math.abs(be)<.9999999?(this._y=Math.atan2(-ge,Te),this._z=Math.atan2(-X,me)):(this._y=0,this._z=Math.atan2(te,V));break;case"ZYX":this._y=Math.asin(-E(ge,-1,1)),Math.abs(ge)<.9999999?(this._x=Math.atan2(be,Te),this._z=Math.atan2(te,V)):(this._x=0,this._z=Math.atan2(-X,me));break;case"YZX":this._z=Math.asin(E(te,-1,1)),Math.abs(te)<.9999999?(this._x=Math.atan2(-de,me),this._y=Math.atan2(-ge,V)):(this._x=0,this._y=Math.atan2(ee,Te));break;case"XZY":this._z=Math.asin(-E(X,-1,1)),Math.abs(X)<.9999999?(this._x=Math.atan2(be,me),this._y=Math.atan2(ee,V)):(this._x=Math.atan2(-de,Te),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+h)}return this._order=h,!1!==M&&this._onChangeCallback(),this}setFromQuaternion(c,h,M){return Id.makeRotationFromQuaternion(c),this.setFromRotationMatrix(Id,h,M)}setFromVector3(c,h){return this.set(c.x,c.y,c.z,h||this._order)}reorder(c){return zp.setFromEuler(this),this.setFromQuaternion(zp,c)}equals(c){return c._x===this._x&&c._y===this._y&&c._z===this._z&&c._order===this._order}fromArray(c){return this._x=c[0],this._y=c[1],this._z=c[2],void 0!==c[3]&&(this._order=c[3]),this._onChangeCallback(),this}toArray(c=[],h=0){return c[h]=this._x,c[h+1]=this._y,c[h+2]=this._z,c[h+3]=this._order,c}toVector3(c){return c?c.set(this._x,this._y,this._z):new Ze(this._x,this._y,this._z)}_onChange(c){return this._onChangeCallback=c,this}_onChangeCallback(){}}Qe.prototype.isEuler=!0,Qe.DefaultOrder="XYZ",Qe.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class wt{constructor(){this.mask=1}set(c){this.mask=1<<c|0}enable(c){this.mask|=1<<c|0}enableAll(){this.mask=-1}toggle(c){this.mask^=1<<c|0}disable(c){this.mask&=~(1<<c|0)}disableAll(){this.mask=0}test(c){return 0!=(this.mask&c.mask)}}let Ot=0;const On=new Ze,Vt=new Ds,Pn=new pr,jn=new Ze,Mi=new Ze,Vi=new Ze,Lr=new Ds,Ar=new Ze(1,0,0),Gr=new Ze(0,1,0),ks=new Ze(0,0,1),Js={type:"added"},Vr={type:"removed"};function Ci(){Object.defineProperty(this,"id",{value:Ot++}),this.uuid=Yi.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ci.DefaultUp.clone();const x=new Ze,c=new Qe,h=new Ds,M=new Ze(1,1,1);c._onChange(function E(){h.setFromEuler(c,!1)}),h._onChange(function R(){c.setFromQuaternion(h,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:x},rotation:{configurable:!0,enumerable:!0,value:c},quaternion:{configurable:!0,enumerable:!0,value:h},scale:{configurable:!0,enumerable:!0,value:M},modelViewMatrix:{value:new pr},normalMatrix:{value:new lo}}),this.matrix=new pr,this.matrixWorld=new pr,this.matrixAutoUpdate=Ci.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new wt,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}Ci.DefaultUp=new Ze(0,1,0),Ci.DefaultMatrixAutoUpdate=!0,Ci.prototype=Object.assign(Object.create(pl.prototype),{constructor:Ci,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(x){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(x),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(x){return this.quaternion.premultiply(x),this},setRotationFromAxisAngle:function(x,c){this.quaternion.setFromAxisAngle(x,c)},setRotationFromEuler:function(x){this.quaternion.setFromEuler(x,!0)},setRotationFromMatrix:function(x){this.quaternion.setFromRotationMatrix(x)},setRotationFromQuaternion:function(x){this.quaternion.copy(x)},rotateOnAxis:function(x,c){return Vt.setFromAxisAngle(x,c),this.quaternion.multiply(Vt),this},rotateOnWorldAxis:function(x,c){return Vt.setFromAxisAngle(x,c),this.quaternion.premultiply(Vt),this},rotateX:function(x){return this.rotateOnAxis(Ar,x)},rotateY:function(x){return this.rotateOnAxis(Gr,x)},rotateZ:function(x){return this.rotateOnAxis(ks,x)},translateOnAxis:function(x,c){return On.copy(x).applyQuaternion(this.quaternion),this.position.add(On.multiplyScalar(c)),this},translateX:function(x){return this.translateOnAxis(Ar,x)},translateY:function(x){return this.translateOnAxis(Gr,x)},translateZ:function(x){return this.translateOnAxis(ks,x)},localToWorld:function(x){return x.applyMatrix4(this.matrixWorld)},worldToLocal:function(x){return x.applyMatrix4(Pn.copy(this.matrixWorld).invert())},lookAt:function(x,c,h){x.isVector3?jn.copy(x):jn.set(x,c,h);const M=this.parent;this.updateWorldMatrix(!0,!1),Mi.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Pn.lookAt(Mi,jn,this.up):Pn.lookAt(jn,Mi,this.up),this.quaternion.setFromRotationMatrix(Pn),M&&(Pn.extractRotation(M.matrixWorld),Vt.setFromRotationMatrix(Pn),this.quaternion.premultiply(Vt.invert()))},add:function(x){if(arguments.length>1){for(let c=0;c<arguments.length;c++)this.add(arguments[c]);return this}return x===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",x),this):(x&&x.isObject3D?(null!==x.parent&&x.parent.remove(x),x.parent=this,this.children.push(x),x.dispatchEvent(Js)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",x),this)},remove:function(x){if(arguments.length>1){for(let h=0;h<arguments.length;h++)this.remove(arguments[h]);return this}const c=this.children.indexOf(x);return-1!==c&&(x.parent=null,this.children.splice(c,1),x.dispatchEvent(Vr)),this},clear:function(){for(let x=0;x<this.children.length;x++){const c=this.children[x];c.parent=null,c.dispatchEvent(Vr)}return this.children.length=0,this},attach:function(x){return this.updateWorldMatrix(!0,!1),Pn.copy(this.matrixWorld).invert(),null!==x.parent&&(x.parent.updateWorldMatrix(!0,!1),Pn.multiply(x.parent.matrixWorld)),x.applyMatrix4(Pn),this.add(x),x.updateWorldMatrix(!1,!0),this},getObjectById:function(x){return this.getObjectByProperty("id",x)},getObjectByName:function(x){return this.getObjectByProperty("name",x)},getObjectByProperty:function(x,c){if(this[x]===c)return this;for(let h=0,M=this.children.length;h<M;h++){const R=this.children[h].getObjectByProperty(x,c);if(void 0!==R)return R}},getWorldPosition:function(x){return void 0===x&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),x=new Ze),this.updateWorldMatrix(!0,!1),x.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(x){return void 0===x&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),x=new Ds),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Mi,x,Vi),x},getWorldScale:function(x){return void 0===x&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),x=new Ze),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Mi,Lr,x),x},getWorldDirection:function(x){void 0===x&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),x=new Ze),this.updateWorldMatrix(!0,!1);const c=this.matrixWorld.elements;return x.set(c[8],c[9],c[10]).normalize()},raycast:function(){},traverse:function(x){x(this);const c=this.children;for(let h=0,M=c.length;h<M;h++)c[h].traverse(x)},traverseVisible:function(x){if(!1===this.visible)return;x(this);const c=this.children;for(let h=0,M=c.length;h<M;h++)c[h].traverseVisible(x)},traverseAncestors:function(x){const c=this.parent;null!==c&&(x(c),c.traverseAncestors(x))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(x){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||x)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,x=!0);const c=this.children;for(let h=0,M=c.length;h<M;h++)c[h].updateMatrixWorld(x)},updateWorldMatrix:function(x,c){const h=this.parent;if(!0===x&&null!==h&&h.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===c){const M=this.children;for(let E=0,R=M.length;E<R;E++)M[E].updateWorldMatrix(!1,!0)}},toJSON:function(x){const c=void 0===x||"string"==typeof x,h={};c&&(x={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},h.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const M={};function E(V,X){return void 0===V[X.uuid]&&(V[X.uuid]=X.toJSON(x)),X.uuid}if(M.uuid=this.uuid,M.type=this.type,""!==this.name&&(M.name=this.name),!0===this.castShadow&&(M.castShadow=!0),!0===this.receiveShadow&&(M.receiveShadow=!0),!1===this.visible&&(M.visible=!1),!1===this.frustumCulled&&(M.frustumCulled=!1),0!==this.renderOrder&&(M.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(M.userData=this.userData),M.layers=this.layers.mask,M.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(M.matrixAutoUpdate=!1),this.isInstancedMesh&&(M.type="InstancedMesh",M.count=this.count,M.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){M.geometry=E(x.geometries,this.geometry);const V=this.geometry.parameters;if(void 0!==V&&void 0!==V.shapes){const X=V.shapes;if(Array.isArray(X))for(let ee=0,te=X.length;ee<te;ee++)E(x.shapes,X[ee]);else E(x.shapes,X)}}if(this.isSkinnedMesh&&(M.bindMode=this.bindMode,M.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(E(x.skeletons,this.skeleton),M.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const V=[];for(let X=0,ee=this.material.length;X<ee;X++)V.push(E(x.materials,this.material[X]));M.material=V}else M.material=E(x.materials,this.material);if(this.children.length>0){M.children=[];for(let V=0;V<this.children.length;V++)M.children.push(this.children[V].toJSON(x).object)}if(this.animations.length>0){M.animations=[];for(let V=0;V<this.animations.length;V++)M.animations.push(E(x.animations,this.animations[V]))}if(c){const V=R(x.geometries),X=R(x.materials),ee=R(x.textures),te=R(x.images),me=R(x.shapes),de=R(x.skeletons),ge=R(x.animations);V.length>0&&(h.geometries=V),X.length>0&&(h.materials=X),ee.length>0&&(h.textures=ee),te.length>0&&(h.images=te),me.length>0&&(h.shapes=me),de.length>0&&(h.skeletons=de),ge.length>0&&(h.animations=ge)}return h.object=M,h;function R(V){const X=[];for(const ee in V){const te=V[ee];delete te.metadata,X.push(te)}return X}},clone:function(x){return(new this.constructor).copy(this,x)},copy:function(x,c=!0){if(this.name=x.name,this.up.copy(x.up),this.position.copy(x.position),this.rotation.order=x.rotation.order,this.quaternion.copy(x.quaternion),this.scale.copy(x.scale),this.matrix.copy(x.matrix),this.matrixWorld.copy(x.matrixWorld),this.matrixAutoUpdate=x.matrixAutoUpdate,this.matrixWorldNeedsUpdate=x.matrixWorldNeedsUpdate,this.layers.mask=x.layers.mask,this.visible=x.visible,this.castShadow=x.castShadow,this.receiveShadow=x.receiveShadow,this.frustumCulled=x.frustumCulled,this.renderOrder=x.renderOrder,this.userData=JSON.parse(JSON.stringify(x.userData)),!0===c)for(let h=0;h<x.children.length;h++)this.add(x.children[h].clone());return this}});const Ba=new Ze,Hl=new Ze,Zo=new lo;class Ca{constructor(c=new Ze(1,0,0),h=0){this.normal=c,this.constant=h}set(c,h){return this.normal.copy(c),this.constant=h,this}setComponents(c,h,M,E){return this.normal.set(c,h,M),this.constant=E,this}setFromNormalAndCoplanarPoint(c,h){return this.normal.copy(c),this.constant=-h.dot(this.normal),this}setFromCoplanarPoints(c,h,M){const E=Ba.subVectors(M,h).cross(Hl.subVectors(c,h)).normalize();return this.setFromNormalAndCoplanarPoint(E,c),this}copy(c){return this.normal.copy(c.normal),this.constant=c.constant,this}normalize(){const c=1/this.normal.length();return this.normal.multiplyScalar(c),this.constant*=c,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(c){return this.normal.dot(c)+this.constant}distanceToSphere(c){return this.distanceToPoint(c.center)-c.radius}projectPoint(c,h){return void 0===h&&(console.warn("THREE.Plane: .projectPoint() target is now required"),h=new Ze),h.copy(this.normal).multiplyScalar(-this.distanceToPoint(c)).add(c)}intersectLine(c,h){void 0===h&&(console.warn("THREE.Plane: .intersectLine() target is now required"),h=new Ze);const M=c.delta(Ba),E=this.normal.dot(M);if(0===E)return 0===this.distanceToPoint(c.start)?h.copy(c.start):void 0;const R=-(c.start.dot(this.normal)+this.constant)/E;return R<0||R>1?void 0:h.copy(M).multiplyScalar(R).add(c.start)}intersectsLine(c){const h=this.distanceToPoint(c.start),M=this.distanceToPoint(c.end);return h<0&&M>0||M<0&&h>0}intersectsBox(c){return c.intersectsPlane(this)}intersectsSphere(c){return c.intersectsPlane(this)}coplanarPoint(c){return void 0===c&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),c=new Ze),c.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(c,h){const M=h||Zo.getNormalMatrix(c),E=this.coplanarPoint(Ba).applyMatrix4(c),R=this.normal.applyMatrix3(M).normalize();return this.constant=-E.dot(R),this}translate(c){return this.constant-=c.dot(this.normal),this}equals(c){return c.normal.equals(this.normal)&&c.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Ca.prototype.isPlane=!0;const Ka=new Ze,ma=new Ze,jh=new Ze,gh=new Ze,zl=new Ze,Zh=new Ze,dg=new Ze,Rd=new Ze,Yh=new Ze,kd=new Ze;class Sa{constructor(c=new Ze,h=new Ze,M=new Ze){this.a=c,this.b=h,this.c=M}static getNormal(c,h,M,E){void 0===E&&(console.warn("THREE.Triangle: .getNormal() target is now required"),E=new Ze),E.subVectors(M,h),Ka.subVectors(c,h),E.cross(Ka);const R=E.lengthSq();return R>0?E.multiplyScalar(1/Math.sqrt(R)):E.set(0,0,0)}static getBarycoord(c,h,M,E,R){Ka.subVectors(E,h),ma.subVectors(M,h),jh.subVectors(c,h);const V=Ka.dot(Ka),X=Ka.dot(ma),ee=Ka.dot(jh),te=ma.dot(ma),me=ma.dot(jh),de=V*te-X*X;if(void 0===R&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),R=new Ze),0===de)return R.set(-2,-1,-1);const ge=1/de,be=(te*ee-X*me)*ge,Te=(V*me-X*ee)*ge;return R.set(1-be-Te,Te,be)}static containsPoint(c,h,M,E){return this.getBarycoord(c,h,M,E,gh),gh.x>=0&&gh.y>=0&&gh.x+gh.y<=1}static getUV(c,h,M,E,R,V,X,ee){return this.getBarycoord(c,h,M,E,gh),ee.set(0,0),ee.addScaledVector(R,gh.x),ee.addScaledVector(V,gh.y),ee.addScaledVector(X,gh.z),ee}static isFrontFacing(c,h,M,E){return Ka.subVectors(M,h),ma.subVectors(c,h),Ka.cross(ma).dot(E)<0}set(c,h,M){return this.a.copy(c),this.b.copy(h),this.c.copy(M),this}setFromPointsAndIndices(c,h,M,E){return this.a.copy(c[h]),this.b.copy(c[M]),this.c.copy(c[E]),this}clone(){return(new this.constructor).copy(this)}copy(c){return this.a.copy(c.a),this.b.copy(c.b),this.c.copy(c.c),this}getArea(){return Ka.subVectors(this.c,this.b),ma.subVectors(this.a,this.b),.5*Ka.cross(ma).length()}getMidpoint(c){return void 0===c&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),c=new Ze),c.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(c){return Sa.getNormal(this.a,this.b,this.c,c)}getPlane(c){return void 0===c&&(console.warn("THREE.Triangle: .getPlane() target is now required"),c=new Ca),c.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(c,h){return Sa.getBarycoord(c,this.a,this.b,this.c,h)}getUV(c,h,M,E,R){return Sa.getUV(c,this.a,this.b,this.c,h,M,E,R)}containsPoint(c){return Sa.containsPoint(c,this.a,this.b,this.c)}isFrontFacing(c){return Sa.isFrontFacing(this.a,this.b,this.c,c)}intersectsBox(c){return c.intersectsTriangle(this)}closestPointToPoint(c,h){void 0===h&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),h=new Ze);const M=this.a,E=this.b,R=this.c;let V,X;zl.subVectors(E,M),Zh.subVectors(R,M),Rd.subVectors(c,M);const ee=zl.dot(Rd),te=Zh.dot(Rd);if(ee<=0&&te<=0)return h.copy(M);Yh.subVectors(c,E);const me=zl.dot(Yh),de=Zh.dot(Yh);if(me>=0&&de<=me)return h.copy(E);const ge=ee*de-me*te;if(ge<=0&&ee>=0&&me<=0)return V=ee/(ee-me),h.copy(M).addScaledVector(zl,V);kd.subVectors(c,R);const be=zl.dot(kd),Te=Zh.dot(kd);if(Te>=0&&be<=Te)return h.copy(R);const Oe=be*te-ee*Te;if(Oe<=0&&te>=0&&Te<=0)return X=te/(te-Te),h.copy(M).addScaledVector(Zh,X);const ze=me*Te-be*de;if(ze<=0&&de-me>=0&&be-Te>=0)return dg.subVectors(R,E),X=(de-me)/(de-me+(be-Te)),h.copy(E).addScaledVector(dg,X);const ke=1/(ze+Oe+ge);return V=Oe*ke,X=ge*ke,h.copy(M).addScaledVector(zl,V).addScaledVector(Zh,X)}equals(c){return c.a.equals(this.a)&&c.b.equals(this.b)&&c.c.equals(this.c)}}let fg=0;function Yo(){Object.defineProperty(this,"id",{value:fg++}),this.uuid=Yi.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=Me,this.side=J,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=xn,this.blendDst=Pt,this.blendEquation=lt,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ji,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=vr,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ve,this.stencilZFail=ve,this.stencilZPass=ve,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Yo.prototype=Object.assign(Object.create(pl.prototype),{constructor:Yo,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(x){if(void 0!==x)for(const c in x){const h=x[c];if(void 0===h){console.warn("THREE.Material: '"+c+"' parameter is undefined.");continue}if("shading"===c){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=h===he;continue}const M=this[c];void 0!==M?M&&M.isColor?M.set(h):M&&M.isVector3&&h&&h.isVector3?M.copy(h):this[c]=h:console.warn("THREE."+this.type+": '"+c+"' is not a property of this material.")}},toJSON:function(x){const c=void 0===x||"string"==typeof x;c&&(x={textures:{},images:{}});const h={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function M(E){const R=[];for(const V in E){const X=E[V];delete X.metadata,R.push(X)}return R}if(h.uuid=this.uuid,h.type=this.type,""!==this.name&&(h.name=this.name),this.color&&this.color.isColor&&(h.color=this.color.getHex()),void 0!==this.roughness&&(h.roughness=this.roughness),void 0!==this.metalness&&(h.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(h.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(h.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(h.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(h.specular=this.specular.getHex()),void 0!==this.shininess&&(h.shininess=this.shininess),void 0!==this.clearcoat&&(h.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(h.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(h.clearcoatMap=this.clearcoatMap.toJSON(x).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(h.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(x).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(h.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(x).uuid,h.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(h.map=this.map.toJSON(x).uuid),this.matcap&&this.matcap.isTexture&&(h.matcap=this.matcap.toJSON(x).uuid),this.alphaMap&&this.alphaMap.isTexture&&(h.alphaMap=this.alphaMap.toJSON(x).uuid),this.lightMap&&this.lightMap.isTexture&&(h.lightMap=this.lightMap.toJSON(x).uuid,h.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(h.aoMap=this.aoMap.toJSON(x).uuid,h.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(h.bumpMap=this.bumpMap.toJSON(x).uuid,h.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(h.normalMap=this.normalMap.toJSON(x).uuid,h.normalMapType=this.normalMapType,h.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(h.displacementMap=this.displacementMap.toJSON(x).uuid,h.displacementScale=this.displacementScale,h.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(h.roughnessMap=this.roughnessMap.toJSON(x).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(h.metalnessMap=this.metalnessMap.toJSON(x).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(h.emissiveMap=this.emissiveMap.toJSON(x).uuid),this.specularMap&&this.specularMap.isTexture&&(h.specularMap=this.specularMap.toJSON(x).uuid),this.envMap&&this.envMap.isTexture&&(h.envMap=this.envMap.toJSON(x).uuid,h.reflectivity=this.reflectivity,h.refractionRatio=this.refractionRatio,void 0!==this.combine&&(h.combine=this.combine),void 0!==this.envMapIntensity&&(h.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(h.gradientMap=this.gradientMap.toJSON(x).uuid),void 0!==this.size&&(h.size=this.size),void 0!==this.sizeAttenuation&&(h.sizeAttenuation=this.sizeAttenuation),this.blending!==Me&&(h.blending=this.blending),this.side!==J&&(h.side=this.side),this.vertexColors&&(h.vertexColors=!0),this.opacity<1&&(h.opacity=this.opacity),!0===this.transparent&&(h.transparent=this.transparent),h.depthFunc=this.depthFunc,h.depthTest=this.depthTest,h.depthWrite=this.depthWrite,h.stencilWrite=this.stencilWrite,h.stencilWriteMask=this.stencilWriteMask,h.stencilFunc=this.stencilFunc,h.stencilRef=this.stencilRef,h.stencilFuncMask=this.stencilFuncMask,h.stencilFail=this.stencilFail,h.stencilZFail=this.stencilZFail,h.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(h.rotation=this.rotation),!0===this.polygonOffset&&(h.polygonOffset=!0),0!==this.polygonOffsetFactor&&(h.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(h.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(h.linewidth=this.linewidth),void 0!==this.dashSize&&(h.dashSize=this.dashSize),void 0!==this.gapSize&&(h.gapSize=this.gapSize),void 0!==this.scale&&(h.scale=this.scale),!0===this.dithering&&(h.dithering=!0),this.alphaTest>0&&(h.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(h.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(h.wireframe=this.wireframe),this.wireframeLinewidth>1&&(h.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(h.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(h.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(h.morphTargets=!0),!0===this.morphNormals&&(h.morphNormals=!0),!0===this.skinning&&(h.skinning=!0),!0===this.flatShading&&(h.flatShading=this.flatShading),!1===this.visible&&(h.visible=!1),!1===this.toneMapped&&(h.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(h.userData=this.userData),c){const E=M(x.textures),R=M(x.images);E.length>0&&(h.textures=E),R.length>0&&(h.images=R)}return h},clone:function(){return(new this.constructor).copy(this)},copy:function(x){this.name=x.name,this.fog=x.fog,this.blending=x.blending,this.side=x.side,this.vertexColors=x.vertexColors,this.opacity=x.opacity,this.transparent=x.transparent,this.blendSrc=x.blendSrc,this.blendDst=x.blendDst,this.blendEquation=x.blendEquation,this.blendSrcAlpha=x.blendSrcAlpha,this.blendDstAlpha=x.blendDstAlpha,this.blendEquationAlpha=x.blendEquationAlpha,this.depthFunc=x.depthFunc,this.depthTest=x.depthTest,this.depthWrite=x.depthWrite,this.stencilWriteMask=x.stencilWriteMask,this.stencilFunc=x.stencilFunc,this.stencilRef=x.stencilRef,this.stencilFuncMask=x.stencilFuncMask,this.stencilFail=x.stencilFail,this.stencilZFail=x.stencilZFail,this.stencilZPass=x.stencilZPass,this.stencilWrite=x.stencilWrite;const c=x.clippingPlanes;let h=null;if(null!==c){const M=c.length;h=new Array(M);for(let E=0;E!==M;++E)h[E]=c[E].clone()}return this.clippingPlanes=h,this.clipIntersection=x.clipIntersection,this.clipShadows=x.clipShadows,this.shadowSide=x.shadowSide,this.colorWrite=x.colorWrite,this.precision=x.precision,this.polygonOffset=x.polygonOffset,this.polygonOffsetFactor=x.polygonOffsetFactor,this.polygonOffsetUnits=x.polygonOffsetUnits,this.dithering=x.dithering,this.alphaTest=x.alphaTest,this.premultipliedAlpha=x.premultipliedAlpha,this.visible=x.visible,this.toneMapped=x.toneMapped,this.userData=JSON.parse(JSON.stringify(x.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Yo.prototype,"needsUpdate",{set:function(x){!0===x&&this.version++}});const Vp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},po={h:0,s:0,l:0},Iu={h:0,s:0,l:0};function Pd(x,c,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?x+6*(c-x)*h:h<.5?c:h<2/3?x+6*(c-x)*(2/3-h):x}function Xo(x){return x<.04045?.0773993808*x:Math.pow(.9478672986*x+.0521327014,2.4)}function Ld(x){return x<.0031308?12.92*x:1.055*Math.pow(x,.41666)-.055}let er=(()=>{class x{constructor(h,M,E){return void 0===M&&void 0===E?this.set(h):this.setRGB(h,M,E)}set(h){return h&&h.isColor?this.copy(h):"number"==typeof h?this.setHex(h):"string"==typeof h&&this.setStyle(h),this}setScalar(h){return this.r=h,this.g=h,this.b=h,this}setHex(h){return h=Math.floor(h),this.r=(h>>16&255)/255,this.g=(h>>8&255)/255,this.b=(255&h)/255,this}setRGB(h,M,E){return this.r=h,this.g=M,this.b=E,this}setHSL(h,M,E){if(h=Yi.euclideanModulo(h,1),M=Yi.clamp(M,0,1),E=Yi.clamp(E,0,1),0===M)this.r=this.g=this.b=E;else{const R=E<=.5?E*(1+M):E+M-E*M,V=2*E-R;this.r=Pd(V,R,h+1/3),this.g=Pd(V,R,h),this.b=Pd(V,R,h-1/3)}return this}setStyle(h){function M(R){void 0!==R&&parseFloat(R)<1&&console.warn("THREE.Color: Alpha component of "+h+" will be ignored.")}let E;if(E=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(h)){let R;const X=E[2];switch(E[1]){case"rgb":case"rgba":if(R=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(X))return this.r=Math.min(255,parseInt(R[1],10))/255,this.g=Math.min(255,parseInt(R[2],10))/255,this.b=Math.min(255,parseInt(R[3],10))/255,M(R[4]),this;if(R=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(X))return this.r=Math.min(100,parseInt(R[1],10))/100,this.g=Math.min(100,parseInt(R[2],10))/100,this.b=Math.min(100,parseInt(R[3],10))/100,M(R[4]),this;break;case"hsl":case"hsla":if(R=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(X)){const ee=parseFloat(R[1])/360,te=parseInt(R[2],10)/100,me=parseInt(R[3],10)/100;return M(R[4]),this.setHSL(ee,te,me)}}}else if(E=/^\#([A-Fa-f\d]+)$/.exec(h)){const R=E[1],V=R.length;if(3===V)return this.r=parseInt(R.charAt(0)+R.charAt(0),16)/255,this.g=parseInt(R.charAt(1)+R.charAt(1),16)/255,this.b=parseInt(R.charAt(2)+R.charAt(2),16)/255,this;if(6===V)return this.r=parseInt(R.charAt(0)+R.charAt(1),16)/255,this.g=parseInt(R.charAt(2)+R.charAt(3),16)/255,this.b=parseInt(R.charAt(4)+R.charAt(5),16)/255,this}return h&&h.length>0?this.setColorName(h):this}setColorName(h){const M=Vp[h];return void 0!==M?this.setHex(M):console.warn("THREE.Color: Unknown color "+h),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(h){return this.r=h.r,this.g=h.g,this.b=h.b,this}copyGammaToLinear(h,M=2){return this.r=Math.pow(h.r,M),this.g=Math.pow(h.g,M),this.b=Math.pow(h.b,M),this}copyLinearToGamma(h,M=2){const E=M>0?1/M:1;return this.r=Math.pow(h.r,E),this.g=Math.pow(h.g,E),this.b=Math.pow(h.b,E),this}convertGammaToLinear(h){return this.copyGammaToLinear(this,h),this}convertLinearToGamma(h){return this.copyLinearToGamma(this,h),this}copySRGBToLinear(h){return this.r=Xo(h.r),this.g=Xo(h.g),this.b=Xo(h.b),this}copyLinearToSRGB(h){return this.r=Ld(h.r),this.g=Ld(h.g),this.b=Ld(h.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(h){void 0===h&&(console.warn("THREE.Color: .getHSL() target is now required"),h={h:0,s:0,l:0});const M=this.r,E=this.g,R=this.b,V=Math.max(M,E,R),X=Math.min(M,E,R);let ee,te;const me=(X+V)/2;if(X===V)ee=0,te=0;else{const de=V-X;switch(te=me<=.5?de/(V+X):de/(2-V-X),V){case M:ee=(E-R)/de+(E<R?6:0);break;case E:ee=(R-M)/de+2;break;case R:ee=(M-E)/de+4}ee/=6}return h.h=ee,h.s=te,h.l=me,h}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(h,M,E){return this.getHSL(po),po.h+=h,po.s+=M,po.l+=E,this.setHSL(po.h,po.s,po.l),this}add(h){return this.r+=h.r,this.g+=h.g,this.b+=h.b,this}addColors(h,M){return this.r=h.r+M.r,this.g=h.g+M.g,this.b=h.b+M.b,this}addScalar(h){return this.r+=h,this.g+=h,this.b+=h,this}sub(h){return this.r=Math.max(0,this.r-h.r),this.g=Math.max(0,this.g-h.g),this.b=Math.max(0,this.b-h.b),this}multiply(h){return this.r*=h.r,this.g*=h.g,this.b*=h.b,this}multiplyScalar(h){return this.r*=h,this.g*=h,this.b*=h,this}lerp(h,M){return this.r+=(h.r-this.r)*M,this.g+=(h.g-this.g)*M,this.b+=(h.b-this.b)*M,this}lerpColors(h,M,E){return this.r=h.r+(M.r-h.r)*E,this.g=h.g+(M.g-h.g)*E,this.b=h.b+(M.b-h.b)*E,this}lerpHSL(h,M){this.getHSL(po),h.getHSL(Iu);const E=Yi.lerp(po.h,Iu.h,M),R=Yi.lerp(po.s,Iu.s,M),V=Yi.lerp(po.l,Iu.l,M);return this.setHSL(E,R,V),this}equals(h){return h.r===this.r&&h.g===this.g&&h.b===this.b}fromArray(h,M=0){return this.r=h[M],this.g=h[M+1],this.b=h[M+2],this}toArray(h=[],M=0){return h[M]=this.r,h[M+1]=this.g,h[M+2]=this.b,h}fromBufferAttribute(h,M){return this.r=h.getX(M),this.g=h.getY(M),this.b=h.getZ(M),!0===h.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return x.NAMES=Vp,x})();er.prototype.isColor=!0,er.prototype.r=1,er.prototype.g=1,er.prototype.b=1;class qc extends Yo{constructor(c){super(),this.type="MeshBasicMaterial",this.color=new er(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Fn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(c)}copy(c){return super.copy(c),this.color.copy(c.color),this.map=c.map,this.lightMap=c.lightMap,this.lightMapIntensity=c.lightMapIntensity,this.aoMap=c.aoMap,this.aoMapIntensity=c.aoMapIntensity,this.specularMap=c.specularMap,this.alphaMap=c.alphaMap,this.envMap=c.envMap,this.combine=c.combine,this.reflectivity=c.reflectivity,this.refractionRatio=c.refractionRatio,this.wireframe=c.wireframe,this.wireframeLinewidth=c.wireframeLinewidth,this.wireframeLinecap=c.wireframeLinecap,this.wireframeLinejoin=c.wireframeLinejoin,this.skinning=c.skinning,this.morphTargets=c.morphTargets,this}}qc.prototype.isMeshBasicMaterial=!0;const Ks=new Ze,Up=new Un;function Wr(x,c,h){if(Array.isArray(x))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=x,this.itemSize=c,this.count=void 0!==x?x.length/c:0,this.normalized=!0===h,this.usage=Lo,this.updateRange={offset:0,count:-1},this.version=0}function rc(x,c,h){Wr.call(this,new Int8Array(x),c,h)}function Ea(x,c,h){Wr.call(this,new Uint8Array(x),c,h)}function Tf(x,c,h){Wr.call(this,new Uint8ClampedArray(x),c,h)}function Fd(x,c,h){Wr.call(this,new Int16Array(x),c,h)}function Od(x,c,h){Wr.call(this,new Uint16Array(x),c,h)}function uu(x,c,h){Wr.call(this,new Int32Array(x),c,h)}function Xh(x,c,h){Wr.call(this,new Uint32Array(x),c,h)}function Nd(x,c,h){Wr.call(this,new Uint16Array(x),c,h)}function Bn(x,c,h){Wr.call(this,new Float32Array(x),c,h)}function Ha(x,c,h){Wr.call(this,new Float64Array(x),c,h)}function Vl(x){if(0===x.length)return-1/0;let c=x[0];for(let h=1,M=x.length;h<M;++h)x[h]>c&&(c=x[h]);return c}Object.defineProperty(Wr.prototype,"needsUpdate",{set:function(x){!0===x&&this.version++}}),Object.assign(Wr.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(x){return this.usage=x,this},copy:function(x){return this.name=x.name,this.array=new x.array.constructor(x.array),this.itemSize=x.itemSize,this.count=x.count,this.normalized=x.normalized,this.usage=x.usage,this},copyAt:function(x,c,h){x*=this.itemSize,h*=c.itemSize;for(let M=0,E=this.itemSize;M<E;M++)this.array[x+M]=c.array[h+M];return this},copyArray:function(x){return this.array.set(x),this},copyColorsArray:function(x){const c=this.array;let h=0;for(let M=0,E=x.length;M<E;M++){let R=x[M];void 0===R&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",M),R=new er),c[h++]=R.r,c[h++]=R.g,c[h++]=R.b}return this},copyVector2sArray:function(x){const c=this.array;let h=0;for(let M=0,E=x.length;M<E;M++){let R=x[M];void 0===R&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",M),R=new Un),c[h++]=R.x,c[h++]=R.y}return this},copyVector3sArray:function(x){const c=this.array;let h=0;for(let M=0,E=x.length;M<E;M++){let R=x[M];void 0===R&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",M),R=new Ze),c[h++]=R.x,c[h++]=R.y,c[h++]=R.z}return this},copyVector4sArray:function(x){const c=this.array;let h=0;for(let M=0,E=x.length;M<E;M++){let R=x[M];void 0===R&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",M),R=new Rs),c[h++]=R.x,c[h++]=R.y,c[h++]=R.z,c[h++]=R.w}return this},applyMatrix3:function(x){if(2===this.itemSize)for(let c=0,h=this.count;c<h;c++)Up.fromBufferAttribute(this,c),Up.applyMatrix3(x),this.setXY(c,Up.x,Up.y);else if(3===this.itemSize)for(let c=0,h=this.count;c<h;c++)Ks.fromBufferAttribute(this,c),Ks.applyMatrix3(x),this.setXYZ(c,Ks.x,Ks.y,Ks.z);return this},applyMatrix4:function(x){for(let c=0,h=this.count;c<h;c++)Ks.x=this.getX(c),Ks.y=this.getY(c),Ks.z=this.getZ(c),Ks.applyMatrix4(x),this.setXYZ(c,Ks.x,Ks.y,Ks.z);return this},applyNormalMatrix:function(x){for(let c=0,h=this.count;c<h;c++)Ks.x=this.getX(c),Ks.y=this.getY(c),Ks.z=this.getZ(c),Ks.applyNormalMatrix(x),this.setXYZ(c,Ks.x,Ks.y,Ks.z);return this},transformDirection:function(x){for(let c=0,h=this.count;c<h;c++)Ks.x=this.getX(c),Ks.y=this.getY(c),Ks.z=this.getZ(c),Ks.transformDirection(x),this.setXYZ(c,Ks.x,Ks.y,Ks.z);return this},set:function(x,c=0){return this.array.set(x,c),this},getX:function(x){return this.array[x*this.itemSize]},setX:function(x,c){return this.array[x*this.itemSize]=c,this},getY:function(x){return this.array[x*this.itemSize+1]},setY:function(x,c){return this.array[x*this.itemSize+1]=c,this},getZ:function(x){return this.array[x*this.itemSize+2]},setZ:function(x,c){return this.array[x*this.itemSize+2]=c,this},getW:function(x){return this.array[x*this.itemSize+3]},setW:function(x,c){return this.array[x*this.itemSize+3]=c,this},setXY:function(x,c,h){return this.array[0+(x*=this.itemSize)]=c,this.array[x+1]=h,this},setXYZ:function(x,c,h,M){return this.array[0+(x*=this.itemSize)]=c,this.array[x+1]=h,this.array[x+2]=M,this},setXYZW:function(x,c,h,M,E){return this.array[0+(x*=this.itemSize)]=c,this.array[x+1]=h,this.array[x+2]=M,this.array[x+3]=E,this},onUpload:function(x){return this.onUploadCallback=x,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),(rc.prototype=Object.create(Wr.prototype)).constructor=rc,(Ea.prototype=Object.create(Wr.prototype)).constructor=Ea,(Tf.prototype=Object.create(Wr.prototype)).constructor=Tf,(Fd.prototype=Object.create(Wr.prototype)).constructor=Fd,(Od.prototype=Object.create(Wr.prototype)).constructor=Od,(uu.prototype=Object.create(Wr.prototype)).constructor=uu,(Xh.prototype=Object.create(Wr.prototype)).constructor=Xh,(Nd.prototype=Object.create(Wr.prototype)).constructor=Nd,Nd.prototype.isFloat16BufferAttribute=!0,(Bn.prototype=Object.create(Wr.prototype)).constructor=Bn,(Ha.prototype=Object.create(Wr.prototype)).constructor=Ha;const gl={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function _h(x,c){return new gl[x](c)}let Fy=0;const jc=new pr,Z_=new Ci,Kn=new Ze,ms=new Fo,Ul=new Fo,eo=new Ze;function wr(){Object.defineProperty(this,"id",{value:Fy++}),this.uuid=Yi.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}wr.prototype=Object.assign(Object.create(pl.prototype),{constructor:wr,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(x){return this.index=Array.isArray(x)?new(Vl(x)>65535?Xh:Od)(x,1):x,this},getAttribute:function(x){return this.attributes[x]},setAttribute:function(x,c){return this.attributes[x]=c,this},deleteAttribute:function(x){return delete this.attributes[x],this},hasAttribute:function(x){return void 0!==this.attributes[x]},addGroup:function(x,c,h=0){this.groups.push({start:x,count:c,materialIndex:h})},clearGroups:function(){this.groups=[]},setDrawRange:function(x,c){this.drawRange.start=x,this.drawRange.count=c},applyMatrix4:function(x){const c=this.attributes.position;void 0!==c&&(c.applyMatrix4(x),c.needsUpdate=!0);const h=this.attributes.normal;if(void 0!==h){const E=(new lo).getNormalMatrix(x);h.applyNormalMatrix(E),h.needsUpdate=!0}const M=this.attributes.tangent;return void 0!==M&&(M.transformDirection(x),M.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(x){return jc.makeRotationX(x),this.applyMatrix4(jc),this},rotateY:function(x){return jc.makeRotationY(x),this.applyMatrix4(jc),this},rotateZ:function(x){return jc.makeRotationZ(x),this.applyMatrix4(jc),this},translate:function(x,c,h){return jc.makeTranslation(x,c,h),this.applyMatrix4(jc),this},scale:function(x,c,h){return jc.makeScale(x,c,h),this.applyMatrix4(jc),this},lookAt:function(x){return Z_.lookAt(x),Z_.updateMatrix(),this.applyMatrix4(Z_.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Kn).negate(),this.translate(Kn.x,Kn.y,Kn.z),this},setFromPoints:function(x){const c=[];for(let h=0,M=x.length;h<M;h++){const E=x[h];c.push(E.x,E.y,E.z||0)}return this.setAttribute("position",new Bn(c,3)),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Fo);const x=this.attributes.position,c=this.morphAttributes.position;if(x&&x.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Ze(-1/0,-1/0,-1/0),new Ze(1/0,1/0,1/0));if(void 0!==x){if(this.boundingBox.setFromBufferAttribute(x),c)for(let h=0,M=c.length;h<M;h++)ms.setFromBufferAttribute(c[h]),this.morphTargetsRelative?(eo.addVectors(this.boundingBox.min,ms.min),this.boundingBox.expandByPoint(eo),eo.addVectors(this.boundingBox.max,ms.max),this.boundingBox.expandByPoint(eo)):(this.boundingBox.expandByPoint(ms.min),this.boundingBox.expandByPoint(ms.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Hs);const x=this.attributes.position,c=this.morphAttributes.position;if(x&&x.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Ze,1/0);if(x){const h=this.boundingSphere.center;if(ms.setFromBufferAttribute(x),c)for(let E=0,R=c.length;E<R;E++)Ul.setFromBufferAttribute(c[E]),this.morphTargetsRelative?(eo.addVectors(ms.min,Ul.min),ms.expandByPoint(eo),eo.addVectors(ms.max,Ul.max),ms.expandByPoint(eo)):(ms.expandByPoint(Ul.min),ms.expandByPoint(Ul.max));ms.getCenter(h);let M=0;for(let E=0,R=x.count;E<R;E++)eo.fromBufferAttribute(x,E),M=Math.max(M,h.distanceToSquared(eo));if(c)for(let E=0,R=c.length;E<R;E++){const V=c[E],X=this.morphTargetsRelative;for(let ee=0,te=V.count;ee<te;ee++)eo.fromBufferAttribute(V,ee),X&&(Kn.fromBufferAttribute(x,ee),eo.add(Kn)),M=Math.max(M,h.distanceToSquared(eo))}this.boundingSphere.radius=Math.sqrt(M),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeTangents:function(){const x=this.index,c=this.attributes;if(null===x||void 0===c.position||void 0===c.normal||void 0===c.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const h=x.array,M=c.position.array,E=c.normal.array,R=c.uv.array,V=M.length/3;void 0===c.tangent&&this.setAttribute("tangent",new Wr(new Float32Array(4*V),4));const X=c.tangent.array,ee=[],te=[];for(let Ut=0;Ut<V;Ut++)ee[Ut]=new Ze,te[Ut]=new Ze;const me=new Ze,de=new Ze,ge=new Ze,be=new Un,Te=new Un,Oe=new Un,ze=new Ze,ke=new Ze;function Ee(Ut,Zt,dn){me.fromArray(M,3*Ut),de.fromArray(M,3*Zt),ge.fromArray(M,3*dn),be.fromArray(R,2*Ut),Te.fromArray(R,2*Zt),Oe.fromArray(R,2*dn),de.sub(me),ge.sub(me),Te.sub(be),Oe.sub(be);const kn=1/(Te.x*Oe.y-Oe.x*Te.y);!isFinite(kn)||(ze.copy(de).multiplyScalar(Oe.y).addScaledVector(ge,-Te.y).multiplyScalar(kn),ke.copy(ge).multiplyScalar(Te.x).addScaledVector(de,-Oe.x).multiplyScalar(kn),ee[Ut].add(ze),ee[Zt].add(ze),ee[dn].add(ze),te[Ut].add(ke),te[Zt].add(ke),te[dn].add(ke))}let at=this.groups;0===at.length&&(at=[{start:0,count:h.length}]);for(let Ut=0,Zt=at.length;Ut<Zt;++Ut){const dn=at[Ut],kn=dn.start;for(let Yt=kn,un=kn+dn.count;Yt<un;Yt+=3)Ee(h[Yt+0],h[Yt+1],h[Yt+2])}const rt=new Ze,gt=new Ze,tt=new Ze,Rt=new Ze;function rn(Ut){tt.fromArray(E,3*Ut),Rt.copy(tt);const Zt=ee[Ut];rt.copy(Zt),rt.sub(tt.multiplyScalar(tt.dot(Zt))).normalize(),gt.crossVectors(Rt,Zt);const kn=gt.dot(te[Ut])<0?-1:1;X[4*Ut]=rt.x,X[4*Ut+1]=rt.y,X[4*Ut+2]=rt.z,X[4*Ut+3]=kn}for(let Ut=0,Zt=at.length;Ut<Zt;++Ut){const dn=at[Ut],kn=dn.start;for(let Yt=kn,un=kn+dn.count;Yt<un;Yt+=3)rn(h[Yt+0]),rn(h[Yt+1]),rn(h[Yt+2])}},computeVertexNormals:function(){const x=this.index,c=this.getAttribute("position");if(void 0!==c){let h=this.getAttribute("normal");if(void 0===h)h=new Wr(new Float32Array(3*c.count),3),this.setAttribute("normal",h);else for(let de=0,ge=h.count;de<ge;de++)h.setXYZ(de,0,0,0);const M=new Ze,E=new Ze,R=new Ze,V=new Ze,X=new Ze,ee=new Ze,te=new Ze,me=new Ze;if(x)for(let de=0,ge=x.count;de<ge;de+=3){const be=x.getX(de+0),Te=x.getX(de+1),Oe=x.getX(de+2);M.fromBufferAttribute(c,be),E.fromBufferAttribute(c,Te),R.fromBufferAttribute(c,Oe),te.subVectors(R,E),me.subVectors(M,E),te.cross(me),V.fromBufferAttribute(h,be),X.fromBufferAttribute(h,Te),ee.fromBufferAttribute(h,Oe),V.add(te),X.add(te),ee.add(te),h.setXYZ(be,V.x,V.y,V.z),h.setXYZ(Te,X.x,X.y,X.z),h.setXYZ(Oe,ee.x,ee.y,ee.z)}else for(let de=0,ge=c.count;de<ge;de+=3)M.fromBufferAttribute(c,de+0),E.fromBufferAttribute(c,de+1),R.fromBufferAttribute(c,de+2),te.subVectors(R,E),me.subVectors(M,E),te.cross(me),h.setXYZ(de+0,te.x,te.y,te.z),h.setXYZ(de+1,te.x,te.y,te.z),h.setXYZ(de+2,te.x,te.y,te.z);this.normalizeNormals(),h.needsUpdate=!0}},merge:function(x,c){if(!x||!x.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",x);void 0===c&&(c=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const h=this.attributes;for(const M in h){if(void 0===x.attributes[M])continue;const R=h[M].array,V=x.attributes[M],X=V.array,ee=V.itemSize*c,te=Math.min(X.length,R.length-ee);for(let me=0,de=ee;me<te;me++,de++)R[de]=X[me]}return this},normalizeNormals:function(){const x=this.attributes.normal;for(let c=0,h=x.count;c<h;c++)eo.fromBufferAttribute(x,c),eo.normalize(),x.setXYZ(c,eo.x,eo.y,eo.z)},toNonIndexed:function(){function x(V,X){const ee=V.array,te=V.itemSize,me=V.normalized,de=new ee.constructor(X.length*te);let ge=0,be=0;for(let Te=0,Oe=X.length;Te<Oe;Te++){ge=X[Te]*te;for(let ze=0;ze<te;ze++)de[be++]=ee[ge++]}return new Wr(de,te,me)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const c=new wr,h=this.index.array,M=this.attributes;for(const V in M){const ee=x(M[V],h);c.setAttribute(V,ee)}const E=this.morphAttributes;for(const V in E){const X=[],ee=E[V];for(let te=0,me=ee.length;te<me;te++){const ge=x(ee[te],h);X.push(ge)}c.morphAttributes[V]=X}c.morphTargetsRelative=this.morphTargetsRelative;const R=this.groups;for(let V=0,X=R.length;V<X;V++){const ee=R[V];c.addGroup(ee.start,ee.count,ee.materialIndex)}return c},toJSON:function(){const x={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(x.uuid=this.uuid,x.type=this.type,""!==this.name&&(x.name=this.name),Object.keys(this.userData).length>0&&(x.userData=this.userData),void 0!==this.parameters){const X=this.parameters;for(const ee in X)void 0!==X[ee]&&(x[ee]=X[ee]);return x}x.data={attributes:{}};const c=this.index;null!==c&&(x.data.index={type:c.array.constructor.name,array:Array.prototype.slice.call(c.array)});const h=this.attributes;for(const X in h){const ee=h[X],te=ee.toJSON(x.data);""!==ee.name&&(te.name=ee.name),x.data.attributes[X]=te}const M={};let E=!1;for(const X in this.morphAttributes){const ee=this.morphAttributes[X],te=[];for(let me=0,de=ee.length;me<de;me++){const ge=ee[me],be=ge.toJSON(x.data);""!==ge.name&&(be.name=ge.name),te.push(be)}te.length>0&&(M[X]=te,E=!0)}E&&(x.data.morphAttributes=M,x.data.morphTargetsRelative=this.morphTargetsRelative);const R=this.groups;R.length>0&&(x.data.groups=JSON.parse(JSON.stringify(R)));const V=this.boundingSphere;return null!==V&&(x.data.boundingSphere={center:V.center.toArray(),radius:V.radius}),x},clone:function(){return(new wr).copy(this)},copy:function(x){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const c={};this.name=x.name;const h=x.index;null!==h&&this.setIndex(h.clone(c));const M=x.attributes;for(const ee in M)this.setAttribute(ee,M[ee].clone(c));const E=x.morphAttributes;for(const ee in E){const te=[],me=E[ee];for(let de=0,ge=me.length;de<ge;de++)te.push(me[de].clone(c));this.morphAttributes[ee]=te}this.morphTargetsRelative=x.morphTargetsRelative;const R=x.groups;for(let ee=0,te=R.length;ee<te;ee++){const me=R[ee];this.addGroup(me.start,me.count,me.materialIndex)}const V=x.boundingBox;null!==V&&(this.boundingBox=V.clone());const X=x.boundingSphere;return null!==X&&(this.boundingSphere=X.clone()),this.drawRange.start=x.drawRange.start,this.drawRange.count=x.drawRange.count,this.userData=x.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const Df=new pr,Gl=new na,Bd=new Hs,Ru=new Ze,Jh=new Ze,Ju=new Ze,Hd=new Ze,Ku=new Ze,Wl=new Ze,yc=new Ze,Zc=new Ze,Qu=new Ze,hu=new Un,Gp=new Un,ql=new Un,co=new Ze,Ic=new Ze;function io(x=new wr,c=new qc){Ci.call(this),this.type="Mesh",this.geometry=x,this.material=c,this.updateMorphTargets()}function Af(x,c,h,M,E,R,V,X,ee,te,me,de){Ru.fromBufferAttribute(E,te),Jh.fromBufferAttribute(E,me),Ju.fromBufferAttribute(E,de);const ge=x.morphTargetInfluences;if(c.morphTargets&&R&&ge){yc.set(0,0,0),Zc.set(0,0,0),Qu.set(0,0,0);for(let Te=0,Oe=R.length;Te<Oe;Te++){const ze=ge[Te],ke=R[Te];0!==ze&&(Hd.fromBufferAttribute(ke,te),Ku.fromBufferAttribute(ke,me),Wl.fromBufferAttribute(ke,de),V?(yc.addScaledVector(Hd,ze),Zc.addScaledVector(Ku,ze),Qu.addScaledVector(Wl,ze)):(yc.addScaledVector(Hd.sub(Ru),ze),Zc.addScaledVector(Ku.sub(Jh),ze),Qu.addScaledVector(Wl.sub(Ju),ze)))}Ru.add(yc),Jh.add(Zc),Ju.add(Qu)}x.isSkinnedMesh&&c.skinning&&(x.boneTransform(te,Ru),x.boneTransform(me,Jh),x.boneTransform(de,Ju));const be=function $u(x,c,h,M,E,R,V,X){let ee;if(ee=c.side===W?M.intersectTriangle(V,R,E,!0,X):M.intersectTriangle(E,R,V,c.side!==re,X),null===ee)return null;Ic.copy(X),Ic.applyMatrix4(x.matrixWorld);const te=h.ray.origin.distanceTo(Ic);return te<h.near||te>h.far?null:{distance:te,point:Ic.clone(),object:x}}(x,c,h,M,Ru,Jh,Ju,co);if(be){X&&(hu.fromBufferAttribute(X,te),Gp.fromBufferAttribute(X,me),ql.fromBufferAttribute(X,de),be.uv=Sa.getUV(co,Ru,Jh,Ju,hu,Gp,ql,new Un)),ee&&(hu.fromBufferAttribute(ee,te),Gp.fromBufferAttribute(ee,me),ql.fromBufferAttribute(ee,de),be.uv2=Sa.getUV(co,Ru,Jh,Ju,hu,Gp,ql,new Un));const Te={a:te,b:me,c:de,normal:new Ze,materialIndex:0};Sa.getNormal(Ru,Jh,Ju,Te.normal),be.face=Te}return be}io.prototype=Object.assign(Object.create(Ci.prototype),{constructor:io,isMesh:!0,copy:function(x){return Ci.prototype.copy.call(this,x),void 0!==x.morphTargetInfluences&&(this.morphTargetInfluences=x.morphTargetInfluences.slice()),void 0!==x.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},x.morphTargetDictionary)),this.material=x.material,this.geometry=x.geometry,this},updateMorphTargets:function(){const x=this.geometry;if(x.isBufferGeometry){const c=x.morphAttributes,h=Object.keys(c);if(h.length>0){const M=c[h[0]];if(void 0!==M){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let E=0,R=M.length;E<R;E++){const V=M[E].name||String(E);this.morphTargetInfluences.push(0),this.morphTargetDictionary[V]=E}}}}else{const c=x.morphTargets;void 0!==c&&c.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(x,c){const h=this.geometry,M=this.material,E=this.matrixWorld;if(void 0===M||(null===h.boundingSphere&&h.computeBoundingSphere(),Bd.copy(h.boundingSphere),Bd.applyMatrix4(E),!1===x.ray.intersectsSphere(Bd))||(Df.copy(E).invert(),Gl.copy(x.ray).applyMatrix4(Df),null!==h.boundingBox&&!1===Gl.intersectsBox(h.boundingBox)))return;let R;if(h.isBufferGeometry){const V=h.index,X=h.attributes.position,ee=h.morphAttributes.position,te=h.morphTargetsRelative,me=h.attributes.uv,de=h.attributes.uv2,ge=h.groups,be=h.drawRange;if(null!==V)if(Array.isArray(M))for(let Te=0,Oe=ge.length;Te<Oe;Te++){const ze=ge[Te],ke=M[ze.materialIndex];for(let rt=Math.max(ze.start,be.start),gt=Math.min(ze.start+ze.count,be.start+be.count);rt<gt;rt+=3){const tt=V.getX(rt),Rt=V.getX(rt+1),rn=V.getX(rt+2);R=Af(this,ke,x,Gl,X,ee,te,me,de,tt,Rt,rn),R&&(R.faceIndex=Math.floor(rt/3),R.face.materialIndex=ze.materialIndex,c.push(R))}}else for(let ze=Math.max(0,be.start),ke=Math.min(V.count,be.start+be.count);ze<ke;ze+=3){const Ee=V.getX(ze),at=V.getX(ze+1),rt=V.getX(ze+2);R=Af(this,M,x,Gl,X,ee,te,me,de,Ee,at,rt),R&&(R.faceIndex=Math.floor(ze/3),c.push(R))}else if(void 0!==X)if(Array.isArray(M))for(let Te=0,Oe=ge.length;Te<Oe;Te++){const ze=ge[Te],ke=M[ze.materialIndex];for(let rt=Math.max(ze.start,be.start),gt=Math.min(ze.start+ze.count,be.start+be.count);rt<gt;rt+=3)R=Af(this,ke,x,Gl,X,ee,te,me,de,rt,rt+1,rt+2),R&&(R.faceIndex=Math.floor(rt/3),R.face.materialIndex=ze.materialIndex,c.push(R))}else for(let ze=Math.max(0,be.start),ke=Math.min(X.count,be.start+be.count);ze<ke;ze+=3)R=Af(this,M,x,Gl,X,ee,te,me,de,ze,ze+1,ze+2),R&&(R.faceIndex=Math.floor(ze/3),c.push(R))}else h.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}});class ku extends wr{constructor(c=1,h=1,M=1,E=1,R=1,V=1){super(),this.type="BoxGeometry",this.parameters={width:c,height:h,depth:M,widthSegments:E,heightSegments:R,depthSegments:V};const X=this;E=Math.floor(E),R=Math.floor(R),V=Math.floor(V);const ee=[],te=[],me=[],de=[];let ge=0,be=0;function Te(Oe,ze,ke,Ee,at,rt,gt,tt,Rt,rn,Ut){const Zt=rt/Rt,dn=gt/rn,kn=rt/2,vn=gt/2,Yt=tt/2,un=Rt+1,In=rn+1;let xi=0,Xi=0;const ir=new Ze;for(let Ir=0;Ir<In;Ir++){const Mr=Ir*dn-vn;for(let ro=0;ro<un;ro++)ir[Oe]=(ro*Zt-kn)*Ee,ir[ze]=Mr*at,ir[ke]=Yt,te.push(ir.x,ir.y,ir.z),ir[Oe]=0,ir[ze]=0,ir[ke]=tt>0?1:-1,me.push(ir.x,ir.y,ir.z),de.push(ro/Rt),de.push(1-Ir/rn),xi+=1}for(let Ir=0;Ir<rn;Ir++)for(let Mr=0;Mr<Rt;Mr++){const ws=ge+Mr+un*(Ir+1),Ho=ge+(Mr+1)+un*(Ir+1),Po=ge+(Mr+1)+un*Ir;ee.push(ge+Mr+un*Ir,ws,Po),ee.push(ws,Ho,Po),Xi+=6}X.addGroup(be,Xi,Ut),be+=Xi,ge+=xi}Te("z","y","x",-1,-1,M,h,c,V,R,0),Te("z","y","x",1,-1,M,h,-c,V,R,1),Te("x","z","y",1,1,c,M,h,E,V,2),Te("x","z","y",1,-1,c,M,-h,E,V,3),Te("x","y","z",1,-1,c,h,M,E,R,4),Te("x","y","z",-1,-1,c,h,-M,E,R,5),this.setIndex(ee),this.setAttribute("position",new Bn(te,3)),this.setAttribute("normal",new Bn(me,3)),this.setAttribute("uv",new Bn(de,2))}}function zd(x){const c={};for(const h in x){c[h]={};for(const M in x[h]){const E=x[h][M];c[h][M]=E&&(E.isColor||E.isMatrix3||E.isMatrix4||E.isVector2||E.isVector3||E.isVector4||E.isTexture||E.isQuaternion)?E.clone():Array.isArray(E)?E.slice():E}}return c}function jl(x){const c={};for(let h=0;h<x.length;h++){const M=zd(x[h]);for(const E in M)c[E]=M[E]}return c}const Vd={clone:zd,merge:jl};function Zl(x){Yo.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==x&&(void 0!==x.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(x))}function sc(){Ci.call(this),this.type="Camera",this.matrixWorldInverse=new pr,this.projectionMatrix=new pr,this.projectionMatrixInverse=new pr}function ga(x=50,c=1,h=.1,M=2e3){sc.call(this),this.type="PerspectiveCamera",this.fov=x,this.zoom=1,this.near=h,this.far=M,this.focus=10,this.aspect=c,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}(Zl.prototype=Object.create(Yo.prototype)).constructor=Zl,Zl.prototype.isShaderMaterial=!0,Zl.prototype.copy=function(x){return Yo.prototype.copy.call(this,x),this.fragmentShader=x.fragmentShader,this.vertexShader=x.vertexShader,this.uniforms=zd(x.uniforms),this.defines=Object.assign({},x.defines),this.wireframe=x.wireframe,this.wireframeLinewidth=x.wireframeLinewidth,this.lights=x.lights,this.clipping=x.clipping,this.skinning=x.skinning,this.morphTargets=x.morphTargets,this.morphNormals=x.morphNormals,this.extensions=Object.assign({},x.extensions),this.glslVersion=x.glslVersion,this},Zl.prototype.toJSON=function(x){const c=Yo.prototype.toJSON.call(this,x);c.glslVersion=this.glslVersion,c.uniforms={};for(const M in this.uniforms){const R=this.uniforms[M].value;c.uniforms[M]=R&&R.isTexture?{type:"t",value:R.toJSON(x).uuid}:R&&R.isColor?{type:"c",value:R.getHex()}:R&&R.isVector2?{type:"v2",value:R.toArray()}:R&&R.isVector3?{type:"v3",value:R.toArray()}:R&&R.isVector4?{type:"v4",value:R.toArray()}:R&&R.isMatrix3?{type:"m3",value:R.toArray()}:R&&R.isMatrix4?{type:"m4",value:R.toArray()}:{value:R}}Object.keys(this.defines).length>0&&(c.defines=this.defines),c.vertexShader=this.vertexShader,c.fragmentShader=this.fragmentShader;const h={};for(const M in this.extensions)!0===this.extensions[M]&&(h[M]=!0);return Object.keys(h).length>0&&(c.extensions=h),c},sc.prototype=Object.assign(Object.create(Ci.prototype),{constructor:sc,isCamera:!0,copy:function(x,c){return Ci.prototype.copy.call(this,x,c),this.matrixWorldInverse.copy(x.matrixWorldInverse),this.projectionMatrix.copy(x.projectionMatrix),this.projectionMatrixInverse.copy(x.projectionMatrixInverse),this},getWorldDirection:function(x){void 0===x&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),x=new Ze),this.updateWorldMatrix(!0,!1);const c=this.matrixWorld.elements;return x.set(-c[8],-c[9],-c[10]).normalize()},updateMatrixWorld:function(x){Ci.prototype.updateMatrixWorld.call(this,x),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(x,c){Ci.prototype.updateWorldMatrix.call(this,x,c),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return(new this.constructor).copy(this)}}),ga.prototype=Object.assign(Object.create(sc.prototype),{constructor:ga,isPerspectiveCamera:!0,copy:function(x,c){return sc.prototype.copy.call(this,x,c),this.fov=x.fov,this.zoom=x.zoom,this.near=x.near,this.far=x.far,this.focus=x.focus,this.aspect=x.aspect,this.view=null===x.view?null:Object.assign({},x.view),this.filmGauge=x.filmGauge,this.filmOffset=x.filmOffset,this},setFocalLength:function(x){const c=.5*this.getFilmHeight()/x;this.fov=2*Yi.RAD2DEG*Math.atan(c),this.updateProjectionMatrix()},getFocalLength:function(){const x=Math.tan(.5*Yi.DEG2RAD*this.fov);return.5*this.getFilmHeight()/x},getEffectiveFOV:function(){return 2*Yi.RAD2DEG*Math.atan(Math.tan(.5*Yi.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(x,c,h,M,E,R){this.aspect=x/c,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=x,this.view.fullHeight=c,this.view.offsetX=h,this.view.offsetY=M,this.view.width=E,this.view.height=R,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const x=this.near;let c=x*Math.tan(.5*Yi.DEG2RAD*this.fov)/this.zoom,h=2*c,M=this.aspect*h,E=-.5*M;const R=this.view;if(null!==this.view&&this.view.enabled){const X=R.fullWidth,ee=R.fullHeight;E+=R.offsetX*M/X,c-=R.offsetY*h/ee,M*=R.width/X,h*=R.height/ee}const V=this.filmOffset;0!==V&&(E+=x*V/this.getFilmWidth()),this.projectionMatrix.makePerspective(E,E+M,c,c-h,x,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(x){const c=Ci.prototype.toJSON.call(this,x);return c.object.fov=this.fov,c.object.zoom=this.zoom,c.object.near=this.near,c.object.far=this.far,c.object.focus=this.focus,c.object.aspect=this.aspect,null!==this.view&&(c.object.view=Object.assign({},this.view)),c.object.filmGauge=this.filmGauge,c.object.filmOffset=this.filmOffset,c}});class Qa extends Ci{constructor(c,h,M){if(super(),this.type="CubeCamera",!0!==M.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=M;const E=new ga(90,1,c,h);E.layers=this.layers,E.up.set(0,-1,0),E.lookAt(new Ze(1,0,0)),this.add(E);const R=new ga(90,1,c,h);R.layers=this.layers,R.up.set(0,-1,0),R.lookAt(new Ze(-1,0,0)),this.add(R);const V=new ga(90,1,c,h);V.layers=this.layers,V.up.set(0,0,1),V.lookAt(new Ze(0,1,0)),this.add(V);const X=new ga(90,1,c,h);X.layers=this.layers,X.up.set(0,0,-1),X.lookAt(new Ze(0,-1,0)),this.add(X);const ee=new ga(90,1,c,h);ee.layers=this.layers,ee.up.set(0,-1,0),ee.lookAt(new Ze(0,0,1)),this.add(ee);const te=new ga(90,1,c,h);te.layers=this.layers,te.up.set(0,-1,0),te.lookAt(new Ze(0,0,-1)),this.add(te)}update(c,h){null===this.parent&&this.updateMatrixWorld();const M=this.renderTarget,[E,R,V,X,ee,te]=this.children,me=c.xr.enabled,de=c.getRenderTarget();c.xr.enabled=!1;const ge=M.texture.generateMipmaps;M.texture.generateMipmaps=!1,c.setRenderTarget(M,0),c.render(h,E),c.setRenderTarget(M,1),c.render(h,R),c.setRenderTarget(M,2),c.render(h,V),c.setRenderTarget(M,3),c.render(h,X),c.setRenderTarget(M,4),c.render(h,ee),M.texture.generateMipmaps=ge,c.setRenderTarget(M,5),c.render(h,te),c.setRenderTarget(de),c.xr.enabled=me}}class bc extends kr{constructor(c,h,M,E,R,V,X,ee,te,me){super(c=void 0!==c?c:[],h=void 0!==h?h:mi,M,E,R,V,X=void 0!==X?X:nn,ee,te,me),this._needsFlipEnvMap=!0,this.flipY=!1}get images(){return this.image}set images(c){this.image=c}}bc.prototype.isCubeTexture=!0;class la extends Ro{constructor(c,h,M){Number.isInteger(h)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),h=M),super(c,c,h),this.texture=new bc(void 0,(h=h||{}).mapping,h.wrapS,h.wrapT,h.magFilter,h.minFilter,h.format,h.type,h.anisotropy,h.encoding),this.texture.generateMipmaps=void 0!==h.generateMipmaps&&h.generateMipmaps,this.texture.minFilter=void 0!==h.minFilter?h.minFilter:$i,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(c,h){this.texture.type=h.type,this.texture.format=bn,this.texture.encoding=h.encoding,this.texture.generateMipmaps=h.generateMipmaps,this.texture.minFilter=h.minFilter,this.texture.magFilter=h.magFilter;const M_uniforms={tEquirect:{value:null}},M_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",M_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",E=new ku(5,5,5),R=new Zl({name:"CubemapFromEquirect",uniforms:zd(M_uniforms),vertexShader:M_vertexShader,fragmentShader:M_fragmentShader,side:W,blending:ae});R.uniforms.tEquirect.value=h;const V=new io(E,R),X=h.minFilter;return h.minFilter===k&&(h.minFilter=$i),new Qa(1,10,this).update(c,V),h.minFilter=X,V.geometry.dispose(),V.material.dispose(),this}clear(c,h,M,E){const R=c.getRenderTarget();for(let V=0;V<6;V++)c.setRenderTarget(this,V),c.clear(h,M,E);c.setRenderTarget(R)}}la.prototype.isWebGLCubeRenderTarget=!0;class eh extends kr{constructor(c,h,M,E,R,V,X,ee,te,me,de,ge){super(null,V,X,ee,te,me,E,R,de,ge),this.image={data:c||null,width:h||1,height:M||1},this.magFilter=void 0!==te?te:vo,this.minFilter=void 0!==me?me:vo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}eh.prototype.isDataTexture=!0;const Gd=new Hs,pg=new Ze;class Wp{constructor(c=new Ca,h=new Ca,M=new Ca,E=new Ca,R=new Ca,V=new Ca){this.planes=[c,h,M,E,R,V]}set(c,h,M,E,R,V){const X=this.planes;return X[0].copy(c),X[1].copy(h),X[2].copy(M),X[3].copy(E),X[4].copy(R),X[5].copy(V),this}copy(c){const h=this.planes;for(let M=0;M<6;M++)h[M].copy(c.planes[M]);return this}setFromProjectionMatrix(c){const h=this.planes,M=c.elements,E=M[0],R=M[1],V=M[2],X=M[3],ee=M[4],te=M[5],me=M[6],de=M[7],ge=M[8],be=M[9],Te=M[10],Oe=M[11],ze=M[12],ke=M[13],Ee=M[14],at=M[15];return h[0].setComponents(X-E,de-ee,Oe-ge,at-ze).normalize(),h[1].setComponents(X+E,de+ee,Oe+ge,at+ze).normalize(),h[2].setComponents(X+R,de+te,Oe+be,at+ke).normalize(),h[3].setComponents(X-R,de-te,Oe-be,at-ke).normalize(),h[4].setComponents(X-V,de-me,Oe-Te,at-Ee).normalize(),h[5].setComponents(X+V,de+me,Oe+Te,at+Ee).normalize(),this}intersectsObject(c){const h=c.geometry;return null===h.boundingSphere&&h.computeBoundingSphere(),Gd.copy(h.boundingSphere).applyMatrix4(c.matrixWorld),this.intersectsSphere(Gd)}intersectsSprite(c){return Gd.center.set(0,0,0),Gd.radius=.7071067811865476,Gd.applyMatrix4(c.matrixWorld),this.intersectsSphere(Gd)}intersectsSphere(c){const h=this.planes,M=c.center,E=-c.radius;for(let R=0;R<6;R++)if(h[R].distanceToPoint(M)<E)return!1;return!0}intersectsBox(c){const h=this.planes;for(let M=0;M<6;M++){const E=h[M];if(pg.x=E.normal.x>0?c.max.x:c.min.x,pg.y=E.normal.y>0?c.max.y:c.min.y,pg.z=E.normal.z>0?c.max.z:c.min.z,E.distanceToPoint(pg)<0)return!1}return!0}containsPoint(c){const h=this.planes;for(let M=0;M<6;M++)if(h[M].distanceToPoint(c)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function qp(){let x=null,c=!1,h=null,M=null;function E(R,V){h(R,V),M=x.requestAnimationFrame(E)}return{start:function(){!0!==c&&null!==h&&(M=x.requestAnimationFrame(E),c=!0)},stop:function(){x.cancelAnimationFrame(M),c=!1},setAnimationLoop:function(R){h=R},setContext:function(R){x=R}}}function Oy(x,c){const h=c.isWebGL2,M=new WeakMap;return{get:function V(te){return te.isInterleavedBufferAttribute&&(te=te.data),M.get(te)},remove:function X(te){te.isInterleavedBufferAttribute&&(te=te.data);const me=M.get(te);me&&(x.deleteBuffer(me.buffer),M.delete(te))},update:function ee(te,me){if(te.isGLBufferAttribute){const ge=M.get(te);return void((!ge||ge.version<te.version)&&M.set(te,{buffer:te.buffer,type:te.type,bytesPerElement:te.elementSize,version:te.version}))}te.isInterleavedBufferAttribute&&(te=te.data);const de=M.get(te);void 0===de?M.set(te,function E(te,me){const de=te.array,ge=te.usage,be=x.createBuffer();x.bindBuffer(me,be),x.bufferData(me,de,ge),te.onUploadCallback();let Te=5126;return de instanceof Float32Array?Te=5126:de instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):de instanceof Uint16Array?te.isFloat16BufferAttribute?h?Te=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):Te=5123:de instanceof Int16Array?Te=5122:de instanceof Uint32Array?Te=5125:de instanceof Int32Array?Te=5124:de instanceof Int8Array?Te=5120:de instanceof Uint8Array&&(Te=5121),{buffer:be,type:Te,bytesPerElement:de.BYTES_PER_ELEMENT,version:te.version}}(te,me)):de.version<te.version&&(function R(te,me,de){const ge=me.array,be=me.updateRange;x.bindBuffer(de,te),-1===be.count?x.bufferSubData(de,0,ge):(h?x.bufferSubData(de,be.offset*ge.BYTES_PER_ELEMENT,ge,be.offset,be.count):x.bufferSubData(de,be.offset*ge.BYTES_PER_ELEMENT,ge.subarray(be.offset,be.offset+be.count)),be.count=-1)}(de.buffer,te,me),de.version=te.version)}}}class Kh extends wr{constructor(c=1,h=1,M=1,E=1){super(),this.type="PlaneGeometry",this.parameters={width:c,height:h,widthSegments:M,heightSegments:E};const R=c/2,V=h/2,X=Math.floor(M),ee=Math.floor(E),te=X+1,me=ee+1,de=c/X,ge=h/ee,be=[],Te=[],Oe=[],ze=[];for(let ke=0;ke<me;ke++){const Ee=ke*ge-V;for(let at=0;at<te;at++)Te.push(at*de-R,-Ee,0),Oe.push(0,0,1),ze.push(at/X),ze.push(1-ke/ee)}for(let ke=0;ke<ee;ke++)for(let Ee=0;Ee<X;Ee++){const rt=Ee+te*(ke+1),gt=Ee+1+te*(ke+1),tt=Ee+1+te*ke;be.push(Ee+te*ke,rt,tt),be.push(rt,gt,tt)}this.setIndex(be),this.setAttribute("position",new Bn(Te,3)),this.setAttribute("normal",new Bn(Oe,3)),this.setAttribute("uv",new Bn(ze,2))}}const Zs={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Pi={common:{diffuse:{value:new er(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new lo},uv2Transform:{value:new lo},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Un(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new er(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new er(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new lo}},sprite:{diffuse:{value:new er(15658734)},opacity:{value:1},center:{value:new Un(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new lo}}},ll={basic:{uniforms:jl([Pi.common,Pi.specularmap,Pi.envmap,Pi.aomap,Pi.lightmap,Pi.fog]),vertexShader:Zs.meshbasic_vert,fragmentShader:Zs.meshbasic_frag},lambert:{uniforms:jl([Pi.common,Pi.specularmap,Pi.envmap,Pi.aomap,Pi.lightmap,Pi.emissivemap,Pi.fog,Pi.lights,{emissive:{value:new er(0)}}]),vertexShader:Zs.meshlambert_vert,fragmentShader:Zs.meshlambert_frag},phong:{uniforms:jl([Pi.common,Pi.specularmap,Pi.envmap,Pi.aomap,Pi.lightmap,Pi.emissivemap,Pi.bumpmap,Pi.normalmap,Pi.displacementmap,Pi.fog,Pi.lights,{emissive:{value:new er(0)},specular:{value:new er(1118481)},shininess:{value:30}}]),vertexShader:Zs.meshphong_vert,fragmentShader:Zs.meshphong_frag},standard:{uniforms:jl([Pi.common,Pi.envmap,Pi.aomap,Pi.lightmap,Pi.emissivemap,Pi.bumpmap,Pi.normalmap,Pi.displacementmap,Pi.roughnessmap,Pi.metalnessmap,Pi.fog,Pi.lights,{emissive:{value:new er(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Zs.meshphysical_vert,fragmentShader:Zs.meshphysical_frag},toon:{uniforms:jl([Pi.common,Pi.aomap,Pi.lightmap,Pi.emissivemap,Pi.bumpmap,Pi.normalmap,Pi.displacementmap,Pi.gradientmap,Pi.fog,Pi.lights,{emissive:{value:new er(0)}}]),vertexShader:Zs.meshtoon_vert,fragmentShader:Zs.meshtoon_frag},matcap:{uniforms:jl([Pi.common,Pi.bumpmap,Pi.normalmap,Pi.displacementmap,Pi.fog,{matcap:{value:null}}]),vertexShader:Zs.meshmatcap_vert,fragmentShader:Zs.meshmatcap_frag},points:{uniforms:jl([Pi.points,Pi.fog]),vertexShader:Zs.points_vert,fragmentShader:Zs.points_frag},dashed:{uniforms:jl([Pi.common,Pi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Zs.linedashed_vert,fragmentShader:Zs.linedashed_frag},depth:{uniforms:jl([Pi.common,Pi.displacementmap]),vertexShader:Zs.depth_vert,fragmentShader:Zs.depth_frag},normal:{uniforms:jl([Pi.common,Pi.bumpmap,Pi.normalmap,Pi.displacementmap,{opacity:{value:1}}]),vertexShader:Zs.normal_vert,fragmentShader:Zs.normal_frag},sprite:{uniforms:jl([Pi.sprite,Pi.fog]),vertexShader:Zs.sprite_vert,fragmentShader:Zs.sprite_frag},background:{uniforms:{uvTransform:{value:new lo},t2D:{value:null}},vertexShader:Zs.background_vert,fragmentShader:Zs.background_frag},cube:{uniforms:jl([Pi.envmap,{opacity:{value:1}}]),vertexShader:Zs.cube_vert,fragmentShader:Zs.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Zs.equirect_vert,fragmentShader:Zs.equirect_frag},distanceRGBA:{uniforms:jl([Pi.common,Pi.displacementmap,{referencePosition:{value:new Ze},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Zs.distanceRGBA_vert,fragmentShader:Zs.distanceRGBA_frag},shadow:{uniforms:jl([Pi.lights,Pi.fog,{color:{value:new er(0)},opacity:{value:1}}]),vertexShader:Zs.shadow_vert,fragmentShader:Zs.shadow_frag}};function Hx(x,c,h,M,E){const R=new er(0);let X,ee,V=0,te=null,me=0,de=null;function be(Te,Oe){h.buffers.color.setClear(Te.r,Te.g,Te.b,Oe,E)}return{getClearColor:function(){return R},setClearColor:function(Te,Oe=1){R.set(Te),V=Oe,be(R,V)},getClearAlpha:function(){return V},setClearAlpha:function(Te){V=Te,be(R,V)},render:function ge(Te,Oe,ze,ke){let Ee=!0===Oe.isScene?Oe.background:null;Ee&&Ee.isTexture&&(Ee=c.get(Ee));const at=x.xr,rt=at.getSession&&at.getSession();rt&&"additive"===rt.environmentBlendMode&&(Ee=null),null===Ee?be(R,V):Ee&&Ee.isColor&&(be(Ee,1),ke=!0),(x.autoClear||ke)&&x.clear(x.autoClearColor,x.autoClearDepth,x.autoClearStencil),Ee&&(Ee.isCubeTexture||Ee.isWebGLCubeRenderTarget||Ee.mapping===oo)?(void 0===ee&&(ee=new io(new ku(1,1,1),new Zl({name:"BackgroundCubeMaterial",uniforms:zd(ll.cube.uniforms),vertexShader:ll.cube.vertexShader,fragmentShader:ll.cube.fragmentShader,side:W,depthTest:!1,depthWrite:!1,fog:!1})),ee.geometry.deleteAttribute("normal"),ee.geometry.deleteAttribute("uv"),ee.onBeforeRender=function(gt,tt,Rt){this.matrixWorld.copyPosition(Rt.matrixWorld)},Object.defineProperty(ee.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),M.update(ee)),Ee.isWebGLCubeRenderTarget&&(Ee=Ee.texture),ee.material.uniforms.envMap.value=Ee,ee.material.uniforms.flipEnvMap.value=Ee.isCubeTexture&&Ee._needsFlipEnvMap?-1:1,(te!==Ee||me!==Ee.version||de!==x.toneMapping)&&(ee.material.needsUpdate=!0,te=Ee,me=Ee.version,de=x.toneMapping),Te.unshift(ee,ee.geometry,ee.material,0,0,null)):Ee&&Ee.isTexture&&(void 0===X&&(X=new io(new Kh(2,2),new Zl({name:"BackgroundMaterial",uniforms:zd(ll.background.uniforms),vertexShader:ll.background.vertexShader,fragmentShader:ll.background.fragmentShader,side:J,depthTest:!1,depthWrite:!1,fog:!1})),X.geometry.deleteAttribute("normal"),Object.defineProperty(X.material,"map",{get:function(){return this.uniforms.t2D.value}}),M.update(X)),X.material.uniforms.t2D.value=Ee,!0===Ee.matrixAutoUpdate&&Ee.updateMatrix(),X.material.uniforms.uvTransform.value.copy(Ee.matrix),(te!==Ee||me!==Ee.version||de!==x.toneMapping)&&(X.material.needsUpdate=!0,te=Ee,me=Ee.version,de=x.toneMapping),Te.unshift(X,X.geometry,X.material,0,0,null))}}}function hv(x,c,h,M){const E=x.getParameter(34921),R=M.isWebGL2?null:c.get("OES_vertex_array_object"),V=M.isWebGL2||null!==R,X={},ee=Oe(null);let te=ee;function ge(vn){return M.isWebGL2?x.bindVertexArray(vn):R.bindVertexArrayOES(vn)}function be(vn){return M.isWebGL2?x.deleteVertexArray(vn):R.deleteVertexArrayOES(vn)}function Oe(vn){const Yt=[],un=[],In=[];for(let xi=0;xi<E;xi++)Yt[xi]=0,un[xi]=0,In[xi]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Yt,enabledAttributes:un,attributeDivisors:In,object:vn,attributes:{},index:null}}function Ee(){const vn=te.newAttributes;for(let Yt=0,un=vn.length;Yt<un;Yt++)vn[Yt]=0}function at(vn){rt(vn,0)}function rt(vn,Yt){const In=te.enabledAttributes,xi=te.attributeDivisors;te.newAttributes[vn]=1,0===In[vn]&&(x.enableVertexAttribArray(vn),In[vn]=1),xi[vn]!==Yt&&((M.isWebGL2?x:c.get("ANGLE_instanced_arrays"))[M.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](vn,Yt),xi[vn]=Yt)}function gt(){const vn=te.newAttributes,Yt=te.enabledAttributes;for(let un=0,In=Yt.length;un<In;un++)Yt[un]!==vn[un]&&(x.disableVertexAttribArray(un),Yt[un]=0)}function tt(vn,Yt,un,In,xi,Xi){!0!==M.isWebGL2||5124!==un&&5125!==un?x.vertexAttribPointer(vn,Yt,un,In,xi,Xi):x.vertexAttribIPointer(vn,Yt,un,xi,Xi)}function dn(){kn(),te!==ee&&(te=ee,ge(te.object))}function kn(){ee.geometry=null,ee.program=null,ee.wireframe=!1}return{setup:function me(vn,Yt,un,In,xi){let Xi=!1;if(V){const ir=function Te(vn,Yt,un){const In=!0===un.wireframe;let xi=X[vn.id];void 0===xi&&(xi={},X[vn.id]=xi);let Xi=xi[Yt.id];void 0===Xi&&(Xi={},xi[Yt.id]=Xi);let ir=Xi[In];return void 0===ir&&(ir=Oe(function de(){return M.isWebGL2?x.createVertexArray():R.createVertexArrayOES()}()),Xi[In]=ir),ir}(In,un,Yt);te!==ir&&(te=ir,ge(te.object)),Xi=function ze(vn,Yt){const un=te.attributes,In=vn.attributes;let xi=0;for(const Xi in In){const ir=un[Xi],Ir=In[Xi];if(void 0===ir||ir.attribute!==Ir||ir.data!==Ir.data)return!0;xi++}return te.attributesNum!==xi||te.index!==Yt}(In,xi),Xi&&function ke(vn,Yt){const un={},In=vn.attributes;let xi=0;for(const Xi in In){const ir=In[Xi],Ir={};Ir.attribute=ir,ir.data&&(Ir.data=ir.data),un[Xi]=Ir,xi++}te.attributes=un,te.attributesNum=xi,te.index=Yt}(In,xi)}else{const ir=!0===Yt.wireframe;(te.geometry!==In.id||te.program!==un.id||te.wireframe!==ir)&&(te.geometry=In.id,te.program=un.id,te.wireframe=ir,Xi=!0)}!0===vn.isInstancedMesh&&(Xi=!0),null!==xi&&h.update(xi,34963),Xi&&(function Rt(vn,Yt,un,In){if(!1===M.isWebGL2&&(vn.isInstancedMesh||In.isInstancedBufferGeometry)&&null===c.get("ANGLE_instanced_arrays"))return;Ee();const xi=In.attributes,Xi=un.getAttributes(),ir=Yt.defaultAttributeValues;for(const Ir in Xi){const Mr=Xi[Ir];if(Mr>=0){const ro=xi[Ir];if(void 0!==ro){const ws=ro.normalized,Ho=ro.itemSize,Po=h.get(ro);if(void 0===Po)continue;const ti=Po.buffer,Ia=Po.type,bo=Po.bytesPerElement;if(ro.isInterleavedBufferAttribute){const So=ro.data,ds=So.stride,zo=ro.offset;So&&So.isInstancedInterleavedBuffer?(rt(Mr,So.meshPerAttribute),void 0===In._maxInstanceCount&&(In._maxInstanceCount=So.meshPerAttribute*So.count)):at(Mr),x.bindBuffer(34962,ti),tt(Mr,Ho,Ia,ws,ds*bo,zo*bo)}else ro.isInstancedBufferAttribute?(rt(Mr,ro.meshPerAttribute),void 0===In._maxInstanceCount&&(In._maxInstanceCount=ro.meshPerAttribute*ro.count)):at(Mr),x.bindBuffer(34962,ti),tt(Mr,Ho,Ia,ws,0,0)}else if("instanceMatrix"===Ir){const ws=h.get(vn.instanceMatrix);if(void 0===ws)continue;const Ho=ws.buffer,Po=ws.type;rt(Mr+0,1),rt(Mr+1,1),rt(Mr+2,1),rt(Mr+3,1),x.bindBuffer(34962,Ho),x.vertexAttribPointer(Mr+0,4,Po,!1,64,0),x.vertexAttribPointer(Mr+1,4,Po,!1,64,16),x.vertexAttribPointer(Mr+2,4,Po,!1,64,32),x.vertexAttribPointer(Mr+3,4,Po,!1,64,48)}else if("instanceColor"===Ir){const ws=h.get(vn.instanceColor);if(void 0===ws)continue;const Ho=ws.buffer,Po=ws.type;rt(Mr,1),x.bindBuffer(34962,Ho),x.vertexAttribPointer(Mr,3,Po,!1,12,0)}else if(void 0!==ir){const ws=ir[Ir];if(void 0!==ws)switch(ws.length){case 2:x.vertexAttrib2fv(Mr,ws);break;case 3:x.vertexAttrib3fv(Mr,ws);break;case 4:x.vertexAttrib4fv(Mr,ws);break;default:x.vertexAttrib1fv(Mr,ws)}}}}gt()}(vn,Yt,un,In),null!==xi&&x.bindBuffer(34963,h.get(xi).buffer))},reset:dn,resetDefaultState:kn,dispose:function rn(){dn();for(const vn in X){const Yt=X[vn];for(const un in Yt){const In=Yt[un];for(const xi in In)be(In[xi].object),delete In[xi];delete Yt[un]}delete X[vn]}},releaseStatesOfGeometry:function Ut(vn){if(void 0===X[vn.id])return;const Yt=X[vn.id];for(const un in Yt){const In=Yt[un];for(const xi in In)be(In[xi].object),delete In[xi];delete Yt[un]}delete X[vn.id]},releaseStatesOfProgram:function Zt(vn){for(const Yt in X){const un=X[Yt];if(void 0===un[vn.id])continue;const In=un[vn.id];for(const xi in In)be(In[xi].object),delete In[xi];delete un[vn.id]}},initAttributes:Ee,enableAttribute:at,disableUnusedAttributes:gt}}function tb(x,c,h,M){const E=M.isWebGL2;let R;this.setMode=function V(te){R=te},this.render=function X(te,me){x.drawArrays(R,te,me),h.update(me,R,1)},this.renderInstances=function ee(te,me,de){if(0===de)return;let ge,be;if(E)ge=x,be="drawArraysInstanced";else if(ge=c.get("ANGLE_instanced_arrays"),be="drawArraysInstancedANGLE",null===ge)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");ge[be](R,te,me,de),h.update(me,R,de)}}function za(x,c,h){let M;function R(tt){if("highp"===tt){if(x.getShaderPrecisionFormat(35633,36338).precision>0&&x.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";tt="mediump"}return"mediump"===tt&&x.getShaderPrecisionFormat(35633,36337).precision>0&&x.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const V="undefined"!=typeof WebGL2RenderingContext&&x instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&x instanceof WebGL2ComputeRenderingContext;let X=void 0!==h.precision?h.precision:"highp";const ee=R(X);ee!==X&&(console.warn("THREE.WebGLRenderer:",X,"not supported, using",ee,"instead."),X=ee);const te=!0===h.logarithmicDepthBuffer,me=x.getParameter(34930),de=x.getParameter(35660),ge=x.getParameter(3379),be=x.getParameter(34076),Te=x.getParameter(34921),Oe=x.getParameter(36347),ze=x.getParameter(36348),ke=x.getParameter(36349),Ee=de>0,at=V||c.has("OES_texture_float");return{isWebGL2:V,getMaxAnisotropy:function E(){if(void 0!==M)return M;if(!0===c.has("EXT_texture_filter_anisotropic")){const tt=c.get("EXT_texture_filter_anisotropic");M=x.getParameter(tt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else M=0;return M},getMaxPrecision:R,precision:X,logarithmicDepthBuffer:te,maxTextures:me,maxVertexTextures:de,maxTextureSize:ge,maxCubemapSize:be,maxAttributes:Te,maxVertexUniforms:Oe,maxVaryings:ze,maxFragmentUniforms:ke,vertexTextures:Ee,floatFragmentTextures:at,floatVertexTextures:Ee&&at,maxSamples:V?x.getParameter(36183):0}}function sC(x){const c=this;let h=null,M=0,E=!1,R=!1;const V=new Ca,X=new lo,ee={value:null,needsUpdate:!1};function te(){ee.value!==h&&(ee.value=h,ee.needsUpdate=M>0),c.numPlanes=M,c.numIntersection=0}function me(de,ge,be,Te){const Oe=null!==de?de.length:0;let ze=null;if(0!==Oe){if(ze=ee.value,!0!==Te||null===ze){const ke=be+4*Oe,Ee=ge.matrixWorldInverse;X.getNormalMatrix(Ee),(null===ze||ze.length<ke)&&(ze=new Float32Array(ke));for(let at=0,rt=be;at!==Oe;++at,rt+=4)V.copy(de[at]).applyMatrix4(Ee,X),V.normal.toArray(ze,rt),ze[rt+3]=V.constant}ee.value=ze,ee.needsUpdate=!0}return c.numPlanes=Oe,c.numIntersection=0,ze}this.uniform=ee,this.numPlanes=0,this.numIntersection=0,this.init=function(de,ge,be){const Te=0!==de.length||ge||0!==M||E;return E=ge,h=me(de,be,0),M=de.length,Te},this.beginShadows=function(){R=!0,me(null)},this.endShadows=function(){R=!1,te()},this.setState=function(de,ge,be){const Te=de.clippingPlanes,Oe=de.clipIntersection,ze=de.clipShadows,ke=x.get(de);if(!E||null===Te||0===Te.length||R&&!ze)R?me(null):te();else{const Ee=R?0:M,at=4*Ee;let rt=ke.clippingState||null;ee.value=rt,rt=me(Te,ge,at,be);for(let gt=0;gt!==at;++gt)rt[gt]=h[gt];ke.clippingState=rt,this.numIntersection=Oe?this.numPlanes:0,this.numPlanes+=Ee}}}function zx(x){let c=new WeakMap;function h(V,X){return X===qs?V.mapping=mi:X===Sr&&(V.mapping=fr),V}function E(V){const X=V.target;X.removeEventListener("dispose",E);const ee=c.get(X);void 0!==ee&&(c.delete(X),ee.dispose())}return{get:function M(V){if(V&&V.isTexture){const X=V.mapping;if(X===qs||X===Sr){if(c.has(V))return h(c.get(V).texture,V.mapping);{const ee=V.image;if(ee&&ee.height>0){const te=x.getRenderTarget(),me=new la(ee.height/2);return me.fromEquirectangularTexture(x,V),c.set(V,me),x.setRenderTarget(te),V.addEventListener("dispose",E),h(me.texture,V.mapping)}return null}}}return V},dispose:function R(){c=new WeakMap}}}function Vx(x){const c={};function h(M){if(void 0!==c[M])return c[M];let E;switch(M){case"WEBGL_depth_texture":E=x.getExtension("WEBGL_depth_texture")||x.getExtension("MOZ_WEBGL_depth_texture")||x.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":E=x.getExtension("EXT_texture_filter_anisotropic")||x.getExtension("MOZ_EXT_texture_filter_anisotropic")||x.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":E=x.getExtension("WEBGL_compressed_texture_s3tc")||x.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||x.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":E=x.getExtension("WEBGL_compressed_texture_pvrtc")||x.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:E=x.getExtension(M)}return c[M]=E,E}return{has:function(M){return null!==h(M)},init:function(M){M.isWebGL2?h("EXT_color_buffer_float"):(h("WEBGL_depth_texture"),h("OES_texture_float"),h("OES_texture_half_float"),h("OES_texture_half_float_linear"),h("OES_standard_derivatives"),h("OES_element_index_uint"),h("OES_vertex_array_object"),h("ANGLE_instanced_arrays")),h("OES_texture_float_linear"),h("EXT_color_buffer_half_float")},get:function(M){const E=h(M);return null===E&&console.warn("THREE.WebGLRenderer: "+M+" extension not supported."),E}}}function Rg(x,c,h,M){const E={},R=new WeakMap;function V(de){const ge=de.target;null!==ge.index&&c.remove(ge.index);for(const Te in ge.attributes)c.remove(ge.attributes[Te]);ge.removeEventListener("dispose",V),delete E[ge.id];const be=R.get(ge);be&&(c.remove(be),R.delete(ge)),M.releaseStatesOfGeometry(ge),!0===ge.isInstancedBufferGeometry&&delete ge._maxInstanceCount,h.memory.geometries--}function te(de){const ge=[],be=de.index,Te=de.attributes.position;let Oe=0;if(null!==be){const Ee=be.array;Oe=be.version;for(let at=0,rt=Ee.length;at<rt;at+=3){const gt=Ee[at+0],tt=Ee[at+1],Rt=Ee[at+2];ge.push(gt,tt,tt,Rt,Rt,gt)}}else{Oe=Te.version;for(let at=0,rt=Te.array.length/3-1;at<rt;at+=3){const gt=at+0,tt=at+1,Rt=at+2;ge.push(gt,tt,tt,Rt,Rt,gt)}}const ze=new(Vl(ge)>65535?Xh:Od)(ge,1);ze.version=Oe;const ke=R.get(de);ke&&c.remove(ke),R.set(de,ze)}return{get:function X(de,ge){return!0===E[ge.id]||(ge.addEventListener("dispose",V),E[ge.id]=!0,h.memory.geometries++),ge},update:function ee(de){const ge=de.attributes;for(const Te in ge)c.update(ge[Te],34962);const be=de.morphAttributes;for(const Te in be){const Oe=be[Te];for(let ze=0,ke=Oe.length;ze<ke;ze++)c.update(Oe[ze],34962)}},getWireframeAttribute:function me(de){const ge=R.get(de);if(ge){const be=de.index;null!==be&&ge.version<be.version&&te(de)}else te(de);return R.get(de)}}}function g(x,c,h,M){const E=M.isWebGL2;let R,X,ee;this.setMode=function V(ge){R=ge},this.setIndex=function te(ge){X=ge.type,ee=ge.bytesPerElement},this.render=function me(ge,be){x.drawElements(R,be,X,ge*ee),h.update(be,R,1)},this.renderInstances=function de(ge,be,Te){if(0===Te)return;let Oe,ze;if(E)Oe=x,ze="drawElementsInstanced";else if(Oe=c.get("ANGLE_instanced_arrays"),ze="drawElementsInstancedANGLE",null===Oe)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");Oe[ze](R,be,X,ge*ee,Te),h.update(be,R,Te)}}function S(x){const h={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:h,programs:null,autoReset:!0,reset:function E(){h.frame++,h.calls=0,h.triangles=0,h.points=0,h.lines=0},update:function M(R,V,X){switch(h.calls++,V){case 4:h.triangles+=X*(R/3);break;case 1:h.lines+=X*(R/2);break;case 3:h.lines+=X*(R-1);break;case 2:h.lines+=X*R;break;case 0:h.points+=X*R;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",V)}}}}function O(x,c){return x[0]-c[0]}function L(x,c){return Math.abs(c[1])-Math.abs(x[1])}function H(x){const c={},h=new Float32Array(8),M=[];for(let R=0;R<8;R++)M[R]=[R,0];return{update:function E(R,V,X,ee){const te=R.morphTargetInfluences,me=void 0===te?0:te.length;let de=c[V.id];if(void 0===de){de=[];for(let ze=0;ze<me;ze++)de[ze]=[ze,0];c[V.id]=de}for(let ze=0;ze<me;ze++){const ke=de[ze];ke[0]=ze,ke[1]=te[ze]}de.sort(L);for(let ze=0;ze<8;ze++)ze<me&&de[ze][1]?(M[ze][0]=de[ze][0],M[ze][1]=de[ze][1]):(M[ze][0]=Number.MAX_SAFE_INTEGER,M[ze][1]=0);M.sort(O);const ge=X.morphTargets&&V.morphAttributes.position,be=X.morphNormals&&V.morphAttributes.normal;let Te=0;for(let ze=0;ze<8;ze++){const ke=M[ze],Ee=ke[0],at=ke[1];Ee!==Number.MAX_SAFE_INTEGER&&at?(ge&&V.getAttribute("morphTarget"+ze)!==ge[Ee]&&V.setAttribute("morphTarget"+ze,ge[Ee]),be&&V.getAttribute("morphNormal"+ze)!==be[Ee]&&V.setAttribute("morphNormal"+ze,be[Ee]),h[ze]=at,Te+=at):(ge&&!0===V.hasAttribute("morphTarget"+ze)&&V.deleteAttribute("morphTarget"+ze),be&&!0===V.hasAttribute("morphNormal"+ze)&&V.deleteAttribute("morphNormal"+ze),h[ze]=0)}const Oe=V.morphTargetsRelative?1:1-Te;ee.getUniforms().setValue(x,"morphTargetBaseInfluence",Oe),ee.getUniforms().setValue(x,"morphTargetInfluences",h)}}}function oe(x,c,h,M){let E=new WeakMap;function X(ee){const te=ee.target;te.removeEventListener("dispose",X),h.remove(te.instanceMatrix),null!==te.instanceColor&&h.remove(te.instanceColor)}return{update:function R(ee){const te=M.render.frame,de=c.get(ee,ee.geometry);return E.get(de)!==te&&(c.update(de),E.set(de,te)),ee.isInstancedMesh&&(!1===ee.hasEventListener("dispose",X)&&ee.addEventListener("dispose",X),h.update(ee.instanceMatrix,34962),null!==ee.instanceColor&&h.update(ee.instanceColor,34962)),de},dispose:function V(){E=new WeakMap}}}ll.physical={uniforms:jl([ll.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Un(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new er(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Zs.meshphysical_vert,fragmentShader:Zs.meshphysical_frag};class ye extends kr{constructor(c=null,h=1,M=1,E=1){super(null),this.image={data:c,width:h,height:M,depth:E},this.magFilter=vo,this.minFilter=vo,this.wrapR=os,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}}ye.prototype.isDataTexture2DArray=!0;class Se extends kr{constructor(c=null,h=1,M=1,E=1){super(null),this.image={data:c,width:h,height:M,depth:E},this.magFilter=vo,this.minFilter=vo,this.wrapR=os,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}}Se.prototype.isDataTexture3D=!0;const Ie=new kr,He=new ye,ot=new Se,mt=new bc,jt=[],Nt=[],Mn=new Float32Array(16),Gn=new Float32Array(9),di=new Float32Array(4);function ci(x,c,h){const M=x[0];if(M<=0||M>0)return x;const E=c*h;let R=jt[E];if(void 0===R&&(R=new Float32Array(E),jt[E]=R),0!==c){M.toArray(R,0);for(let V=1,X=0;V!==c;++V)X+=h,x[V].toArray(R,X)}return R}function fi(x,c){if(x.length!==c.length)return!1;for(let h=0,M=x.length;h<M;h++)if(x[h]!==c[h])return!1;return!0}function pi(x,c){for(let h=0,M=c.length;h<M;h++)x[h]=c[h]}function Ki(x,c){let h=Nt[c];void 0===h&&(h=new Int32Array(c),Nt[c]=h);for(let M=0;M!==c;++M)h[M]=x.allocateTextureUnit();return h}function Pr(x,c){const h=this.cache;h[0]!==c&&(x.uniform1f(this.addr,c),h[0]=c)}function Tr(x,c){const h=this.cache;if(void 0!==c.x)(h[0]!==c.x||h[1]!==c.y)&&(x.uniform2f(this.addr,c.x,c.y),h[0]=c.x,h[1]=c.y);else{if(fi(h,c))return;x.uniform2fv(this.addr,c),pi(h,c)}}function Ps(x,c){const h=this.cache;if(void 0!==c.x)(h[0]!==c.x||h[1]!==c.y||h[2]!==c.z)&&(x.uniform3f(this.addr,c.x,c.y,c.z),h[0]=c.x,h[1]=c.y,h[2]=c.z);else if(void 0!==c.r)(h[0]!==c.r||h[1]!==c.g||h[2]!==c.b)&&(x.uniform3f(this.addr,c.r,c.g,c.b),h[0]=c.r,h[1]=c.g,h[2]=c.b);else{if(fi(h,c))return;x.uniform3fv(this.addr,c),pi(h,c)}}function Ko(x,c){const h=this.cache;if(void 0!==c.x)(h[0]!==c.x||h[1]!==c.y||h[2]!==c.z||h[3]!==c.w)&&(x.uniform4f(this.addr,c.x,c.y,c.z,c.w),h[0]=c.x,h[1]=c.y,h[2]=c.z,h[3]=c.w);else{if(fi(h,c))return;x.uniform4fv(this.addr,c),pi(h,c)}}function cl(x,c){const h=this.cache,M=c.elements;if(void 0===M){if(fi(h,c))return;x.uniformMatrix2fv(this.addr,!1,c),pi(h,c)}else{if(fi(h,M))return;di.set(M),x.uniformMatrix2fv(this.addr,!1,di),pi(h,M)}}function va(x,c){const h=this.cache,M=c.elements;if(void 0===M){if(fi(h,c))return;x.uniformMatrix3fv(this.addr,!1,c),pi(h,c)}else{if(fi(h,M))return;Gn.set(M),x.uniformMatrix3fv(this.addr,!1,Gn),pi(h,M)}}function Rc(x,c){const h=this.cache,M=c.elements;if(void 0===M){if(fi(h,c))return;x.uniformMatrix4fv(this.addr,!1,c),pi(h,c)}else{if(fi(h,M))return;Mn.set(M),x.uniformMatrix4fv(this.addr,!1,Mn),pi(h,M)}}function wc(x,c,h){const M=this.cache,E=h.allocateTextureUnit();M[0]!==E&&(x.uniform1i(this.addr,E),M[0]=E),h.safeSetTexture2D(c||Ie,E)}function el(x,c,h){const M=this.cache,E=h.allocateTextureUnit();M[0]!==E&&(x.uniform1i(this.addr,E),M[0]=E),h.setTexture2DArray(c||He,E)}function kc(x,c,h){const M=this.cache,E=h.allocateTextureUnit();M[0]!==E&&(x.uniform1i(this.addr,E),M[0]=E),h.setTexture3D(c||ot,E)}function Dl(x,c,h){const M=this.cache,E=h.allocateTextureUnit();M[0]!==E&&(x.uniform1i(this.addr,E),M[0]=E),h.safeSetTextureCube(c||mt,E)}function ya(x,c){const h=this.cache;h[0]!==c&&(x.uniform1i(this.addr,c),h[0]=c)}function Va(x,c){const h=this.cache;fi(h,c)||(x.uniform2iv(this.addr,c),pi(h,c))}function yo(x,c){const h=this.cache;fi(h,c)||(x.uniform3iv(this.addr,c),pi(h,c))}function vl(x,c){const h=this.cache;fi(h,c)||(x.uniform4iv(this.addr,c),pi(h,c))}function tf(x,c){const h=this.cache;h[0]!==c&&(x.uniform1ui(this.addr,c),h[0]=c)}function Al(x,c){x.uniform1fv(this.addr,c)}function Mh(x,c){x.uniform1iv(this.addr,c)}function Il(x,c){x.uniform2iv(this.addr,c)}function nb(x,c){x.uniform3iv(this.addr,c)}function Fu(x,c){x.uniform4iv(this.addr,c)}function Ch(x,c){const h=ci(c,this.size,2);x.uniform2fv(this.addr,h)}function Sh(x,c){const h=ci(c,this.size,3);x.uniform3fv(this.addr,h)}function Mc(x,c){const h=ci(c,this.size,4);x.uniform4fv(this.addr,h)}function hm(x,c){const h=ci(c,this.size,4);x.uniformMatrix2fv(this.addr,!1,h)}function kg(x,c){const h=ci(c,this.size,9);x.uniformMatrix3fv(this.addr,!1,h)}function pA(x,c){const h=ci(c,this.size,16);x.uniformMatrix4fv(this.addr,!1,h)}function mA(x,c,h){const M=c.length,E=Ki(h,M);x.uniform1iv(this.addr,E);for(let R=0;R!==M;++R)h.safeSetTexture2D(c[R]||Ie,E[R])}function gA(x,c,h){const M=c.length,E=Ki(h,M);x.uniform1iv(this.addr,E);for(let R=0;R!==M;++R)h.safeSetTextureCube(c[R]||mt,E[R])}function oC(x,c,h){this.id=x,this.addr=h,this.cache=[],this.setValue=function wh(x){switch(x){case 5126:return Pr;case 35664:return Tr;case 35665:return Ps;case 35666:return Ko;case 35674:return cl;case 35675:return va;case 35676:return Rc;case 5124:case 35670:return ya;case 35667:case 35671:return Va;case 35668:case 35672:return yo;case 35669:case 35673:return vl;case 5125:return tf;case 35678:case 36198:case 36298:case 36306:case 35682:return wc;case 35679:case 36299:case 36307:return kc;case 35680:case 36300:case 36308:case 36293:return Dl;case 36289:case 36303:case 36311:case 36292:return el}}(c.type)}function dv(x,c,h){this.id=x,this.addr=h,this.cache=[],this.size=c.size,this.setValue=function _A(x){switch(x){case 5126:return Al;case 35664:return Ch;case 35665:return Sh;case 35666:return Mc;case 35674:return hm;case 35675:return kg;case 35676:return pA;case 5124:case 35670:return Mh;case 35667:case 35671:return Il;case 35668:case 35672:return nb;case 35669:case 35673:return Fu;case 35678:case 36198:case 36298:case 36306:case 35682:return mA;case 35680:case 36300:case 36308:case 36293:return gA}}(c.type)}function Ux(x){this.id=x,this.seq=[],this.map={}}dv.prototype.updateCache=function(x){const c=this.cache;x instanceof Float32Array&&c.length!==x.length&&(this.cache=new Float32Array(x.length)),pi(c,x)},Ux.prototype.setValue=function(x,c,h){const M=this.seq;for(let E=0,R=M.length;E!==R;++E){const V=M[E];V.setValue(x,c[V.id],h)}};const fv=/(\w+)(\])?(\[|\.)?/g;function aC(x,c){x.seq.push(c),x.map[c.id]=c}function Oo(x,c,h){const M=x.name,E=M.length;for(fv.lastIndex=0;;){const R=fv.exec(M),V=fv.lastIndex;let X=R[1];const te=R[3];if("]"===R[2]&&(X|=0),void 0===te||"["===te&&V+2===E){aC(h,void 0===te?new oC(X,x,c):new dv(X,x,c));break}{let de=h.map[X];void 0===de&&(de=new Ux(X),aC(h,de)),h=de}}}function Uf(x,c){this.seq=[],this.map={};const h=x.getProgramParameter(c,35718);for(let M=0;M<h;++M){const E=x.getActiveUniform(c,M);Oo(E,x.getUniformLocation(c,E.name),this)}}function lC(x,c,h){const M=x.createShader(c);return x.shaderSource(M,h),x.compileShader(M),M}Uf.prototype.setValue=function(x,c,h,M){const E=this.map[c];void 0!==E&&E.setValue(x,h,M)},Uf.prototype.setOptional=function(x,c,h){const M=c[h];void 0!==M&&this.setValue(x,h,M)},Uf.upload=function(x,c,h,M){for(let E=0,R=c.length;E!==R;++E){const V=c[E],X=h[V.id];!1!==X.needsUpdate&&V.setValue(x,X.value,M)}},Uf.seqWithValue=function(x,c){const h=[];for(let M=0,E=x.length;M!==E;++M){const R=x[M];R.id in c&&h.push(R)}return h};let Gx=0;function uC(x){switch(x){case sl:return["Linear","( value )"];case gc:return["sRGB","( value )"];case Gh:return["RGBE","( value )"];case Hr:return["RGBM","( value, 7.0 )"];case Wh:return["RGBM","( value, 16.0 )"];case ph:return["RGBD","( value, 256.0 )"];case Uh:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Ac:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",x),["Linear","( value )"]}}function hC(x,c,h){const M=x.getShaderParameter(c,35713),E=x.getShaderInfoLog(c).trim();return M&&""===E?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+h+"\n"+E+function cC(x){const c=x.split("\n");for(let h=0;h<c.length;h++)c[h]=h+1+": "+c[h];return c.join("\n")}(x.getShaderSource(c))}function pv(x,c){const h=uC(c);return"vec4 "+x+"( vec4 value ) { return "+h[0]+"ToLinear"+h[1]+"; }"}function vA(x,c){const h=uC(c);return"vec4 "+x+"( vec4 value ) { return LinearTo"+h[0]+h[1]+"; }"}function yA(x,c){let h;switch(c){case zt:h="Linear";break;case on:h="Reinhard";break;case Nn:h="OptimizedCineon";break;case an:h="ACESFilmic";break;case hi:h="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",c),h="Linear"}return"vec3 "+x+"( vec3 color ) { return "+h+"ToneMapping( color ); }"}function Yl(x){return""!==x}function ib(x,c){return x.replace(/NUM_DIR_LIGHTS/g,c.numDirLights).replace(/NUM_SPOT_LIGHTS/g,c.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,c.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,c.numPointLights).replace(/NUM_HEMI_LIGHTS/g,c.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,c.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,c.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,c.numPointLightShadows)}function Wx(x,c){return x.replace(/NUM_CLIPPING_PLANES/g,c.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,c.numClippingPlanes-c.numClipIntersection)}const dC=/^[ \t]*#include +<([\w\d./]+)>/gm;function oc(x){return x.replace(dC,gv)}function gv(x,c){const h=Zs[c];if(void 0===h)throw new Error("Can not resolve #include <"+c+">");return oc(h)}const qx=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,bA=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function fC(x){return x.replace(bA,mC).replace(qx,pC)}function pC(x,c,h,M){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),mC(0,c,h,M)}function mC(x,c,h,M){let E="";for(let R=parseInt(c);R<parseInt(h);R++)E+=M.replace(/\[\s*i\s*\]/g,"[ "+R+" ]").replace(/UNROLLED_LOOP_INDEX/g,R);return E}function jx(x){let c="precision "+x.precision+" float;\nprecision "+x.precision+" int;";return"highp"===x.precision?c+="\n#define HIGH_PRECISION":"mediump"===x.precision?c+="\n#define MEDIUM_PRECISION":"lowp"===x.precision&&(c+="\n#define LOW_PRECISION"),c}function Zx(x,c,h,M){const E=x.getContext(),R=h.defines;let V=h.vertexShader,X=h.fragmentShader;const ee=function xA(x){let c="SHADOWMAP_TYPE_BASIC";return x.shadowMapType===P?c="SHADOWMAP_TYPE_PCF":x.shadowMapType===B?c="SHADOWMAP_TYPE_PCF_SOFT":x.shadowMapType===U&&(c="SHADOWMAP_TYPE_VSM"),c}(h),te=function gC(x){let c="ENVMAP_TYPE_CUBE";if(x.envMap)switch(x.envMapMode){case mi:case fr:c="ENVMAP_TYPE_CUBE";break;case oo:case fa:c="ENVMAP_TYPE_CUBE_UV"}return c}(h),me=function wA(x){let c="ENVMAP_MODE_REFLECTION";if(x.envMap)switch(x.envMapMode){case fr:case fa:c="ENVMAP_MODE_REFRACTION"}return c}(h),de=function MA(x){let c="ENVMAP_BLENDING_NONE";if(x.envMap)switch(x.combine){case Fn:c="ENVMAP_BLENDING_MULTIPLY";break;case _n:c="ENVMAP_BLENDING_MIX";break;case dt:c="ENVMAP_BLENDING_ADD"}return c}(h),ge=x.gammaFactor>0?x.gammaFactor:1,be=h.isWebGL2?"":function qL(x){return[x.extensionDerivatives||x.envMapCubeUV||x.bumpMap||x.tangentSpaceNormalMap||x.clearcoatNormalMap||x.flatShading||"physical"===x.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(x.extensionFragDepth||x.logarithmicDepthBuffer)&&x.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",x.extensionDrawBuffers&&x.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(x.extensionShaderTextureLOD||x.envMap)&&x.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Yl).join("\n")}(h),Te=function jL(x){const c=[];for(const h in x){const M=x[h];!1!==M&&c.push("#define "+h+" "+M)}return c.join("\n")}(R),Oe=E.createProgram();let ze,ke,Ee=h.glslVersion?"#version "+h.glslVersion+"\n":"";h.isRawShaderMaterial?(ze=[Te].filter(Yl).join("\n"),ze.length>0&&(ze+="\n"),ke=[be,Te].filter(Yl).join("\n"),ke.length>0&&(ke+="\n")):(ze=[jx(h),"#define SHADER_NAME "+h.shaderName,Te,h.instancing?"#define USE_INSTANCING":"",h.instancingColor?"#define USE_INSTANCING_COLOR":"",h.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+ge,"#define MAX_BONES "+h.maxBones,h.useFog&&h.fog?"#define USE_FOG":"",h.useFog&&h.fogExp2?"#define FOG_EXP2":"",h.map?"#define USE_MAP":"",h.envMap?"#define USE_ENVMAP":"",h.envMap?"#define "+me:"",h.lightMap?"#define USE_LIGHTMAP":"",h.aoMap?"#define USE_AOMAP":"",h.emissiveMap?"#define USE_EMISSIVEMAP":"",h.bumpMap?"#define USE_BUMPMAP":"",h.normalMap?"#define USE_NORMALMAP":"",h.normalMap&&h.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",h.normalMap&&h.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",h.clearcoatMap?"#define USE_CLEARCOATMAP":"",h.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",h.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",h.displacementMap&&h.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",h.specularMap?"#define USE_SPECULARMAP":"",h.roughnessMap?"#define USE_ROUGHNESSMAP":"",h.metalnessMap?"#define USE_METALNESSMAP":"",h.alphaMap?"#define USE_ALPHAMAP":"",h.transmissionMap?"#define USE_TRANSMISSIONMAP":"",h.vertexTangents?"#define USE_TANGENT":"",h.vertexColors?"#define USE_COLOR":"",h.vertexUvs?"#define USE_UV":"",h.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",h.flatShading?"#define FLAT_SHADED":"",h.skinning?"#define USE_SKINNING":"",h.useVertexTexture?"#define BONE_TEXTURE":"",h.morphTargets?"#define USE_MORPHTARGETS":"",h.morphNormals&&!1===h.flatShading?"#define USE_MORPHNORMALS":"",h.doubleSided?"#define DOUBLE_SIDED":"",h.flipSided?"#define FLIP_SIDED":"",h.shadowMapEnabled?"#define USE_SHADOWMAP":"",h.shadowMapEnabled?"#define "+ee:"",h.sizeAttenuation?"#define USE_SIZEATTENUATION":"",h.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",h.logarithmicDepthBuffer&&h.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Yl).join("\n"),ke=[be,jx(h),"#define SHADER_NAME "+h.shaderName,Te,h.alphaTest?"#define ALPHATEST "+h.alphaTest+(h.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+ge,h.useFog&&h.fog?"#define USE_FOG":"",h.useFog&&h.fogExp2?"#define FOG_EXP2":"",h.map?"#define USE_MAP":"",h.matcap?"#define USE_MATCAP":"",h.envMap?"#define USE_ENVMAP":"",h.envMap?"#define "+te:"",h.envMap?"#define "+me:"",h.envMap?"#define "+de:"",h.lightMap?"#define USE_LIGHTMAP":"",h.aoMap?"#define USE_AOMAP":"",h.emissiveMap?"#define USE_EMISSIVEMAP":"",h.bumpMap?"#define USE_BUMPMAP":"",h.normalMap?"#define USE_NORMALMAP":"",h.normalMap&&h.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",h.normalMap&&h.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",h.clearcoatMap?"#define USE_CLEARCOATMAP":"",h.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",h.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",h.specularMap?"#define USE_SPECULARMAP":"",h.roughnessMap?"#define USE_ROUGHNESSMAP":"",h.metalnessMap?"#define USE_METALNESSMAP":"",h.alphaMap?"#define USE_ALPHAMAP":"",h.sheen?"#define USE_SHEEN":"",h.transmissionMap?"#define USE_TRANSMISSIONMAP":"",h.vertexTangents?"#define USE_TANGENT":"",h.vertexColors||h.instancingColor?"#define USE_COLOR":"",h.vertexUvs?"#define USE_UV":"",h.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",h.gradientMap?"#define USE_GRADIENTMAP":"",h.flatShading?"#define FLAT_SHADED":"",h.doubleSided?"#define DOUBLE_SIDED":"",h.flipSided?"#define FLIP_SIDED":"",h.shadowMapEnabled?"#define USE_SHADOWMAP":"",h.shadowMapEnabled?"#define "+ee:"",h.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",h.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",h.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",h.logarithmicDepthBuffer&&h.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(h.extensionShaderTextureLOD||h.envMap)&&h.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",h.toneMapping!==nt?"#define TONE_MAPPING":"",h.toneMapping!==nt?Zs.tonemapping_pars_fragment:"",h.toneMapping!==nt?yA("toneMapping",h.toneMapping):"",h.dithering?"#define DITHERING":"",Zs.encodings_pars_fragment,h.map?pv("mapTexelToLinear",h.mapEncoding):"",h.matcap?pv("matcapTexelToLinear",h.matcapEncoding):"",h.envMap?pv("envMapTexelToLinear",h.envMapEncoding):"",h.emissiveMap?pv("emissiveMapTexelToLinear",h.emissiveMapEncoding):"",h.lightMap?pv("lightMapTexelToLinear",h.lightMapEncoding):"",vA("linearToOutputTexel",h.outputEncoding),h.depthPacking?"#define DEPTH_PACKING "+h.depthPacking:"","\n"].filter(Yl).join("\n")),V=oc(V),V=ib(V,h),V=Wx(V,h),X=oc(X),X=ib(X,h),X=Wx(X,h),V=fC(V),X=fC(X),h.isWebGL2&&!0!==h.isRawShaderMaterial&&(Ee="#version 300 es\n",ze=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+ze,ke=["#define varying in",h.glslVersion===Ol?"":"out highp vec4 pc_fragColor;",h.glslVersion===Ol?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+ke);const rt=Ee+ke+X,gt=lC(E,35633,Ee+ze+V),tt=lC(E,35632,rt);if(E.attachShader(Oe,gt),E.attachShader(Oe,tt),void 0!==h.index0AttributeName?E.bindAttribLocation(Oe,0,h.index0AttributeName):!0===h.morphTargets&&E.bindAttribLocation(Oe,0,"position"),E.linkProgram(Oe),x.debug.checkShaderErrors){const Ut=E.getProgramInfoLog(Oe).trim(),Zt=E.getShaderInfoLog(gt).trim(),dn=E.getShaderInfoLog(tt).trim();let kn=!0,vn=!0;if(!1===E.getProgramParameter(Oe,35714)){kn=!1;const Yt=hC(E,gt,"vertex"),un=hC(E,tt,"fragment");console.error("THREE.WebGLProgram: shader error: ",E.getError(),"35715",E.getProgramParameter(Oe,35715),"gl.getProgramInfoLog",Ut,Yt,un)}else""!==Ut?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",Ut):(""===Zt||""===dn)&&(vn=!1);vn&&(this.diagnostics={runnable:kn,programLog:Ut,vertexShader:{log:Zt,prefix:ze},fragmentShader:{log:dn,prefix:ke}})}let Rt,rn;return E.deleteShader(gt),E.deleteShader(tt),this.getUniforms=function(){return void 0===Rt&&(Rt=new Uf(E,Oe)),Rt},this.getAttributes=function(){return void 0===rn&&(rn=function mv(x,c){const h={},M=x.getProgramParameter(c,35721);for(let E=0;E<M;E++){const V=x.getActiveAttrib(c,E).name;h[V]=x.getAttribLocation(c,V)}return h}(E,Oe)),rn},this.destroy=function(){M.releaseStatesOfProgram(this),E.deleteProgram(Oe),this.program=void 0},this.name=h.shaderName,this.id=Gx++,this.cacheKey=c,this.usedTimes=1,this.program=Oe,this.vertexShader=gt,this.fragmentShader=tt,this}function CA(x,c,h,M,E,R){const V=[],X=M.isWebGL2,ee=M.logarithmicDepthBuffer,te=M.floatVertexTextures,me=M.maxVertexUniforms,de=M.vertexTextures;let ge=M.precision;const be={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},Te=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function ze(tt){let Rt;return tt&&tt.isTexture?Rt=tt.encoding:tt&&tt.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),Rt=tt.texture.encoding):Rt=sl,Rt}return{getParameters:function ke(tt,Rt,rn,Ut,Zt){const dn=Ut.fog,vn=c.get(tt.envMap||(tt.isMeshStandardMaterial?Ut.environment:null)),Yt=be[tt.type],un=Zt.isSkinnedMesh?function Oe(tt){const rn=tt.skeleton.bones;if(te)return 1024;{const Zt=Math.floor((me-20)/4),dn=Math.min(Zt,rn.length);return dn<rn.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+rn.length+" bones. This GPU supports "+dn+"."),0):dn}}(Zt):0;let In,xi;if(null!==tt.precision&&(ge=M.getMaxPrecision(tt.precision),ge!==tt.precision&&console.warn("THREE.WebGLProgram.getParameters:",tt.precision,"not supported, using",ge,"instead.")),Yt){const Ir=ll[Yt];In=Ir.vertexShader,xi=Ir.fragmentShader}else In=tt.vertexShader,xi=tt.fragmentShader;const Xi=x.getRenderTarget();return{isWebGL2:X,shaderID:Yt,shaderName:tt.type,vertexShader:In,fragmentShader:xi,defines:tt.defines,isRawShaderMaterial:!0===tt.isRawShaderMaterial,glslVersion:tt.glslVersion,precision:ge,instancing:!0===Zt.isInstancedMesh,instancingColor:!0===Zt.isInstancedMesh&&null!==Zt.instanceColor,supportsVertexTextures:de,outputEncoding:null!==Xi?ze(Xi.texture):x.outputEncoding,map:!!tt.map,mapEncoding:ze(tt.map),matcap:!!tt.matcap,matcapEncoding:ze(tt.matcap),envMap:!!vn,envMapMode:vn&&vn.mapping,envMapEncoding:ze(vn),envMapCubeUV:!!vn&&(vn.mapping===oo||vn.mapping===fa),lightMap:!!tt.lightMap,lightMapEncoding:ze(tt.lightMap),aoMap:!!tt.aoMap,emissiveMap:!!tt.emissiveMap,emissiveMapEncoding:ze(tt.emissiveMap),bumpMap:!!tt.bumpMap,normalMap:!!tt.normalMap,objectSpaceNormalMap:tt.normalMapType===q,tangentSpaceNormalMap:tt.normalMapType===Yu,clearcoatMap:!!tt.clearcoatMap,clearcoatRoughnessMap:!!tt.clearcoatRoughnessMap,clearcoatNormalMap:!!tt.clearcoatNormalMap,displacementMap:!!tt.displacementMap,roughnessMap:!!tt.roughnessMap,metalnessMap:!!tt.metalnessMap,specularMap:!!tt.specularMap,alphaMap:!!tt.alphaMap,gradientMap:!!tt.gradientMap,sheen:!!tt.sheen,transmissionMap:!!tt.transmissionMap,combine:tt.combine,vertexTangents:tt.normalMap&&tt.vertexTangents,vertexColors:tt.vertexColors,vertexUvs:!!(tt.map||tt.bumpMap||tt.normalMap||tt.specularMap||tt.alphaMap||tt.emissiveMap||tt.roughnessMap||tt.metalnessMap||tt.clearcoatMap||tt.clearcoatRoughnessMap||tt.clearcoatNormalMap||tt.displacementMap||tt.transmissionMap),uvsVertexOnly:!(tt.map||tt.bumpMap||tt.normalMap||tt.specularMap||tt.alphaMap||tt.emissiveMap||tt.roughnessMap||tt.metalnessMap||tt.clearcoatNormalMap||tt.transmissionMap||!tt.displacementMap),fog:!!dn,useFog:tt.fog,fogExp2:dn&&dn.isFogExp2,flatShading:!!tt.flatShading,sizeAttenuation:tt.sizeAttenuation,logarithmicDepthBuffer:ee,skinning:tt.skinning&&un>0,maxBones:un,useVertexTexture:te,morphTargets:tt.morphTargets,morphNormals:tt.morphNormals,maxMorphTargets:x.maxMorphTargets,maxMorphNormals:x.maxMorphNormals,numDirLights:Rt.directional.length,numPointLights:Rt.point.length,numSpotLights:Rt.spot.length,numRectAreaLights:Rt.rectArea.length,numHemiLights:Rt.hemi.length,numDirLightShadows:Rt.directionalShadowMap.length,numPointLightShadows:Rt.pointShadowMap.length,numSpotLightShadows:Rt.spotShadowMap.length,numClippingPlanes:R.numPlanes,numClipIntersection:R.numIntersection,dithering:tt.dithering,shadowMapEnabled:x.shadowMap.enabled&&rn.length>0,shadowMapType:x.shadowMap.type,toneMapping:tt.toneMapped?x.toneMapping:nt,physicallyCorrectLights:x.physicallyCorrectLights,premultipliedAlpha:tt.premultipliedAlpha,alphaTest:tt.alphaTest,doubleSided:tt.side===re,flipSided:tt.side===W,depthPacking:void 0!==tt.depthPacking&&tt.depthPacking,index0AttributeName:tt.index0AttributeName,extensionDerivatives:tt.extensions&&tt.extensions.derivatives,extensionFragDepth:tt.extensions&&tt.extensions.fragDepth,extensionDrawBuffers:tt.extensions&&tt.extensions.drawBuffers,extensionShaderTextureLOD:tt.extensions&&tt.extensions.shaderTextureLOD,rendererExtensionFragDepth:X||h.has("EXT_frag_depth"),rendererExtensionDrawBuffers:X||h.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:X||h.has("EXT_shader_texture_lod"),customProgramCacheKey:tt.customProgramCacheKey()}},getProgramCacheKey:function Ee(tt){const Rt=[];if(tt.shaderID?Rt.push(tt.shaderID):(Rt.push(tt.fragmentShader),Rt.push(tt.vertexShader)),void 0!==tt.defines)for(const rn in tt.defines)Rt.push(rn),Rt.push(tt.defines[rn]);if(!1===tt.isRawShaderMaterial){for(let rn=0;rn<Te.length;rn++)Rt.push(tt[Te[rn]]);Rt.push(x.outputEncoding),Rt.push(x.gammaFactor)}return Rt.push(tt.customProgramCacheKey),Rt.join()},getUniforms:function at(tt){const Rt=be[tt.type];let rn;return rn=Rt?Vd.clone(ll[Rt].uniforms):tt.uniforms,rn},acquireProgram:function rt(tt,Rt){let rn;for(let Ut=0,Zt=V.length;Ut<Zt;Ut++){const dn=V[Ut];if(dn.cacheKey===Rt){rn=dn,++rn.usedTimes;break}}return void 0===rn&&(rn=new Zx(x,Rt,tt,E),V.push(rn)),rn},releaseProgram:function gt(tt){if(0==--tt.usedTimes){const Rt=V.indexOf(tt);V[Rt]=V[V.length-1],V.pop(),tt.destroy()}},programs:V}}function SA(){let x=new WeakMap;return{get:function c(R){let V=x.get(R);return void 0===V&&(V={},x.set(R,V)),V},remove:function h(R){x.delete(R)},update:function M(R,V,X){x.get(R)[V]=X},dispose:function E(){x=new WeakMap}}}function Yx(x,c){return x.groupOrder!==c.groupOrder?x.groupOrder-c.groupOrder:x.renderOrder!==c.renderOrder?x.renderOrder-c.renderOrder:x.program!==c.program?x.program.id-c.program.id:x.material.id!==c.material.id?x.material.id-c.material.id:x.z!==c.z?x.z-c.z:x.id-c.id}function EA(x,c){return x.groupOrder!==c.groupOrder?x.groupOrder-c.groupOrder:x.renderOrder!==c.renderOrder?x.renderOrder-c.renderOrder:x.z!==c.z?c.z-x.z:x.id-c.id}function _C(x){const c=[];let h=0;const M=[],E=[],R={id:-1};function X(ge,be,Te,Oe,ze,ke){let Ee=c[h];const at=x.get(Te);return void 0===Ee?(Ee={id:ge.id,object:ge,geometry:be,material:Te,program:at.program||R,groupOrder:Oe,renderOrder:ge.renderOrder,z:ze,group:ke},c[h]=Ee):(Ee.id=ge.id,Ee.object=ge,Ee.geometry=be,Ee.material=Te,Ee.program=at.program||R,Ee.groupOrder=Oe,Ee.renderOrder=ge.renderOrder,Ee.z=ze,Ee.group=ke),h++,Ee}return{opaque:M,transparent:E,init:function V(){h=0,M.length=0,E.length=0},push:function ee(ge,be,Te,Oe,ze,ke){const Ee=X(ge,be,Te,Oe,ze,ke);(!0===Te.transparent?E:M).push(Ee)},unshift:function te(ge,be,Te,Oe,ze,ke){const Ee=X(ge,be,Te,Oe,ze,ke);(!0===Te.transparent?E:M).unshift(Ee)},finish:function de(){for(let ge=h,be=c.length;ge<be;ge++){const Te=c[ge];if(null===Te.id)break;Te.id=null,Te.object=null,Te.geometry=null,Te.material=null,Te.program=null,Te.group=null}},sort:function me(ge,be){M.length>1&&M.sort(ge||Yx),E.length>1&&E.sort(be||EA)}}}function Gf(x){let c=new WeakMap;return{get:function h(E,R){let V;return!1===c.has(E)?(V=new _C(x),c.set(E,[V])):R>=c.get(E).length?(V=new _C(x),c.get(E).push(V)):V=c.get(E)[R],V},dispose:function M(){c=new WeakMap}}}function TA(){const x={};return{get:function(c){if(void 0!==x[c.id])return x[c.id];let h;switch(c.type){case"DirectionalLight":h={direction:new Ze,color:new er};break;case"SpotLight":h={position:new Ze,direction:new Ze,color:new er,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":h={position:new Ze,color:new er,distance:0,decay:0};break;case"HemisphereLight":h={direction:new Ze,skyColor:new er,groundColor:new er};break;case"RectAreaLight":h={color:new er,position:new Ze,halfWidth:new Ze,halfHeight:new Ze}}return x[c.id]=h,h}}}let AA=0;function IA(x,c){return(c.castShadow?1:0)-(x.castShadow?1:0)}function RA(x,c){const h=new TA,M=function DA(){const x={};return{get:function(c){if(void 0!==x[c.id])return x[c.id];let h;switch(c.type){case"DirectionalLight":case"SpotLight":h={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Un};break;case"PointLight":h={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Un,shadowCameraNear:1,shadowCameraFar:1e3}}return x[c.id]=h,h}}}(),E={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let me=0;me<9;me++)E.probe.push(new Ze);const R=new Ze,V=new pr,X=new pr;return{setup:function ee(me){let de=0,ge=0,be=0;for(let Rt=0;Rt<9;Rt++)E.probe[Rt].set(0,0,0);let Te=0,Oe=0,ze=0,ke=0,Ee=0,at=0,rt=0,gt=0;me.sort(IA);for(let Rt=0,rn=me.length;Rt<rn;Rt++){const Ut=me[Rt],Zt=Ut.color,dn=Ut.intensity,kn=Ut.distance,vn=Ut.shadow&&Ut.shadow.map?Ut.shadow.map.texture:null;if(Ut.isAmbientLight)de+=Zt.r*dn,ge+=Zt.g*dn,be+=Zt.b*dn;else if(Ut.isLightProbe)for(let Yt=0;Yt<9;Yt++)E.probe[Yt].addScaledVector(Ut.sh.coefficients[Yt],dn);else if(Ut.isDirectionalLight){const Yt=h.get(Ut);if(Yt.color.copy(Ut.color).multiplyScalar(Ut.intensity),Ut.castShadow){const un=Ut.shadow,In=M.get(Ut);In.shadowBias=un.bias,In.shadowNormalBias=un.normalBias,In.shadowRadius=un.radius,In.shadowMapSize=un.mapSize,E.directionalShadow[Te]=In,E.directionalShadowMap[Te]=vn,E.directionalShadowMatrix[Te]=Ut.shadow.matrix,at++}E.directional[Te]=Yt,Te++}else if(Ut.isSpotLight){const Yt=h.get(Ut);if(Yt.position.setFromMatrixPosition(Ut.matrixWorld),Yt.color.copy(Zt).multiplyScalar(dn),Yt.distance=kn,Yt.coneCos=Math.cos(Ut.angle),Yt.penumbraCos=Math.cos(Ut.angle*(1-Ut.penumbra)),Yt.decay=Ut.decay,Ut.castShadow){const un=Ut.shadow,In=M.get(Ut);In.shadowBias=un.bias,In.shadowNormalBias=un.normalBias,In.shadowRadius=un.radius,In.shadowMapSize=un.mapSize,E.spotShadow[ze]=In,E.spotShadowMap[ze]=vn,E.spotShadowMatrix[ze]=Ut.shadow.matrix,gt++}E.spot[ze]=Yt,ze++}else if(Ut.isRectAreaLight){const Yt=h.get(Ut);Yt.color.copy(Zt).multiplyScalar(dn),Yt.halfWidth.set(.5*Ut.width,0,0),Yt.halfHeight.set(0,.5*Ut.height,0),E.rectArea[ke]=Yt,ke++}else if(Ut.isPointLight){const Yt=h.get(Ut);if(Yt.color.copy(Ut.color).multiplyScalar(Ut.intensity),Yt.distance=Ut.distance,Yt.decay=Ut.decay,Ut.castShadow){const un=Ut.shadow,In=M.get(Ut);In.shadowBias=un.bias,In.shadowNormalBias=un.normalBias,In.shadowRadius=un.radius,In.shadowMapSize=un.mapSize,In.shadowCameraNear=un.camera.near,In.shadowCameraFar=un.camera.far,E.pointShadow[Oe]=In,E.pointShadowMap[Oe]=vn,E.pointShadowMatrix[Oe]=Ut.shadow.matrix,rt++}E.point[Oe]=Yt,Oe++}else if(Ut.isHemisphereLight){const Yt=h.get(Ut);Yt.skyColor.copy(Ut.color).multiplyScalar(dn),Yt.groundColor.copy(Ut.groundColor).multiplyScalar(dn),E.hemi[Ee]=Yt,Ee++}}ke>0&&(c.isWebGL2||!0===x.has("OES_texture_float_linear")?(E.rectAreaLTC1=Pi.LTC_FLOAT_1,E.rectAreaLTC2=Pi.LTC_FLOAT_2):!0===x.has("OES_texture_half_float_linear")?(E.rectAreaLTC1=Pi.LTC_HALF_1,E.rectAreaLTC2=Pi.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),E.ambient[0]=de,E.ambient[1]=ge,E.ambient[2]=be;const tt=E.hash;(tt.directionalLength!==Te||tt.pointLength!==Oe||tt.spotLength!==ze||tt.rectAreaLength!==ke||tt.hemiLength!==Ee||tt.numDirectionalShadows!==at||tt.numPointShadows!==rt||tt.numSpotShadows!==gt)&&(E.directional.length=Te,E.spot.length=ze,E.rectArea.length=ke,E.point.length=Oe,E.hemi.length=Ee,E.directionalShadow.length=at,E.directionalShadowMap.length=at,E.pointShadow.length=rt,E.pointShadowMap.length=rt,E.spotShadow.length=gt,E.spotShadowMap.length=gt,E.directionalShadowMatrix.length=at,E.pointShadowMatrix.length=rt,E.spotShadowMatrix.length=gt,tt.directionalLength=Te,tt.pointLength=Oe,tt.spotLength=ze,tt.rectAreaLength=ke,tt.hemiLength=Ee,tt.numDirectionalShadows=at,tt.numPointShadows=rt,tt.numSpotShadows=gt,E.version=AA++)},setupView:function te(me,de){let ge=0,be=0,Te=0,Oe=0,ze=0;const ke=de.matrixWorldInverse;for(let Ee=0,at=me.length;Ee<at;Ee++){const rt=me[Ee];if(rt.isDirectionalLight){const gt=E.directional[ge];gt.direction.setFromMatrixPosition(rt.matrixWorld),R.setFromMatrixPosition(rt.target.matrixWorld),gt.direction.sub(R),gt.direction.transformDirection(ke),ge++}else if(rt.isSpotLight){const gt=E.spot[Te];gt.position.setFromMatrixPosition(rt.matrixWorld),gt.position.applyMatrix4(ke),gt.direction.setFromMatrixPosition(rt.matrixWorld),R.setFromMatrixPosition(rt.target.matrixWorld),gt.direction.sub(R),gt.direction.transformDirection(ke),Te++}else if(rt.isRectAreaLight){const gt=E.rectArea[Oe];gt.position.setFromMatrixPosition(rt.matrixWorld),gt.position.applyMatrix4(ke),X.identity(),V.copy(rt.matrixWorld),V.premultiply(ke),X.extractRotation(V),gt.halfWidth.set(.5*rt.width,0,0),gt.halfHeight.set(0,.5*rt.height,0),gt.halfWidth.applyMatrix4(X),gt.halfHeight.applyMatrix4(X),Oe++}else if(rt.isPointLight){const gt=E.point[be];gt.position.setFromMatrixPosition(rt.matrixWorld),gt.position.applyMatrix4(ke),be++}else if(rt.isHemisphereLight){const gt=E.hemi[ze];gt.direction.setFromMatrixPosition(rt.matrixWorld),gt.direction.transformDirection(ke),gt.direction.normalize(),ze++}}},state:E}}function Xx(x,c){const h=new RA(x,c),M=[],E=[];return{init:function R(){M.length=0,E.length=0},state:{lightsArray:M,shadowsArray:E,lights:h},setupLights:function ee(){h.setup(M)},setupLightsView:function te(de){h.setupView(M,de)},pushLight:function V(de){M.push(de)},pushShadow:function X(de){E.push(de)}}}function kA(x,c){let h=new WeakMap;return{get:function M(R,V=0){let X;return!1===h.has(R)?(X=new Xx(x,c),h.set(R,[X])):V>=h.get(R).length?(X=new Xx(x,c),h.get(R).push(X)):X=h.get(R)[V],X},dispose:function E(){h=new WeakMap}}}class rb extends Yo{constructor(c){super(),this.type="MeshDepthMaterial",this.depthPacking=lu,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(c)}copy(c){return super.copy(c),this.depthPacking=c.depthPacking,this.skinning=c.skinning,this.morphTargets=c.morphTargets,this.map=c.map,this.alphaMap=c.alphaMap,this.displacementMap=c.displacementMap,this.displacementScale=c.displacementScale,this.displacementBias=c.displacementBias,this.wireframe=c.wireframe,this.wireframeLinewidth=c.wireframeLinewidth,this}}rb.prototype.isMeshDepthMaterial=!0;class sb extends Yo{constructor(c){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Ze,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(c)}copy(c){return super.copy(c),this.referencePosition.copy(c.referencePosition),this.nearDistance=c.nearDistance,this.farDistance=c.farDistance,this.skinning=c.skinning,this.morphTargets=c.morphTargets,this.map=c.map,this.alphaMap=c.alphaMap,this.displacementMap=c.displacementMap,this.displacementScale=c.displacementScale,this.displacementBias=c.displacementBias,this}}function Jx(x,c,h){let M=new Wp;const E=new Un,R=new Un,V=new Rs,X=[],ee=[],te={},me={0:W,1:J,2:re},de=new Zl({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Un},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),ge=de.clone();ge.defines.HORIZONTAL_PASS=1;const be=new wr;be.setAttribute("position",new Wr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const Te=new io(be,de),Oe=this;function ze(gt,tt){const Rt=c.update(Te);de.uniforms.shadow_pass.value=gt.map.texture,de.uniforms.resolution.value=gt.mapSize,de.uniforms.radius.value=gt.radius,x.setRenderTarget(gt.mapPass),x.clear(),x.renderBufferDirect(tt,null,Rt,de,Te,null),ge.uniforms.shadow_pass.value=gt.mapPass.texture,ge.uniforms.resolution.value=gt.mapSize,ge.uniforms.radius.value=gt.radius,x.setRenderTarget(gt.map),x.clear(),x.renderBufferDirect(tt,null,Rt,ge,Te,null)}function ke(gt,tt,Rt){const rn=gt<<0|tt<<1|Rt<<2;let Ut=X[rn];return void 0===Ut&&(Ut=new rb({depthPacking:cu,morphTargets:gt,skinning:tt}),X[rn]=Ut),Ut}function Ee(gt,tt,Rt){const rn=gt<<0|tt<<1|Rt<<2;let Ut=ee[rn];return void 0===Ut&&(Ut=new sb({morphTargets:gt,skinning:tt}),ee[rn]=Ut),Ut}function at(gt,tt,Rt,rn,Ut,Zt,dn){let kn=null,vn=ke,Yt=gt.customDepthMaterial;if(!0===rn.isPointLight&&(vn=Ee,Yt=gt.customDistanceMaterial),void 0===Yt){let un=!1;!0===Rt.morphTargets&&(un=tt.morphAttributes&&tt.morphAttributes.position&&tt.morphAttributes.position.length>0);let In=!1;!0===gt.isSkinnedMesh&&(!0===Rt.skinning?In=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",gt)),kn=vn(un,In,!0===gt.isInstancedMesh)}else kn=Yt;if(x.localClippingEnabled&&!0===Rt.clipShadows&&0!==Rt.clippingPlanes.length){const un=kn.uuid,In=Rt.uuid;let xi=te[un];void 0===xi&&(xi={},te[un]=xi);let Xi=xi[In];void 0===Xi&&(Xi=kn.clone(),xi[In]=Xi),kn=Xi}return kn.visible=Rt.visible,kn.wireframe=Rt.wireframe,kn.side=dn===U?null!==Rt.shadowSide?Rt.shadowSide:Rt.side:null!==Rt.shadowSide?Rt.shadowSide:me[Rt.side],kn.clipShadows=Rt.clipShadows,kn.clippingPlanes=Rt.clippingPlanes,kn.clipIntersection=Rt.clipIntersection,kn.wireframeLinewidth=Rt.wireframeLinewidth,kn.linewidth=Rt.linewidth,!0===rn.isPointLight&&!0===kn.isMeshDistanceMaterial&&(kn.referencePosition.setFromMatrixPosition(rn.matrixWorld),kn.nearDistance=Ut,kn.farDistance=Zt),kn}function rt(gt,tt,Rt,rn,Ut){if(!1===gt.visible)return;if(gt.layers.test(tt.layers)&&(gt.isMesh||gt.isLine||gt.isPoints)&&(gt.castShadow||gt.receiveShadow&&Ut===U)&&(!gt.frustumCulled||M.intersectsObject(gt))){gt.modelViewMatrix.multiplyMatrices(Rt.matrixWorldInverse,gt.matrixWorld);const kn=c.update(gt),vn=gt.material;if(Array.isArray(vn)){const Yt=kn.groups;for(let un=0,In=Yt.length;un<In;un++){const xi=Yt[un],Xi=vn[xi.materialIndex];if(Xi&&Xi.visible){const ir=at(gt,kn,Xi,rn,Rt.near,Rt.far,Ut);x.renderBufferDirect(Rt,null,kn,ir,gt,xi)}}}else if(vn.visible){const Yt=at(gt,kn,vn,rn,Rt.near,Rt.far,Ut);x.renderBufferDirect(Rt,null,kn,Yt,gt,null)}}const dn=gt.children;for(let kn=0,vn=dn.length;kn<vn;kn++)rt(dn[kn],tt,Rt,rn,Ut)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=P,this.render=function(gt,tt,Rt){if(!1===Oe.enabled||!1===Oe.autoUpdate&&!1===Oe.needsUpdate||0===gt.length)return;const rn=x.getRenderTarget(),Ut=x.getActiveCubeFace(),Zt=x.getActiveMipmapLevel(),dn=x.state;dn.setBlending(ae),dn.buffers.color.setClear(1,1,1,1),dn.buffers.depth.setTest(!0),dn.setScissorTest(!1);for(let kn=0,vn=gt.length;kn<vn;kn++){const Yt=gt[kn],un=Yt.shadow;if(void 0===un){console.warn("THREE.WebGLShadowMap:",Yt,"has no shadow.");continue}if(!1===un.autoUpdate&&!1===un.needsUpdate)continue;E.copy(un.mapSize);const In=un.getFrameExtents();if(E.multiply(In),R.copy(un.mapSize),(E.x>h||E.y>h)&&(E.x>h&&(R.x=Math.floor(h/In.x),E.x=R.x*In.x,un.mapSize.x=R.x),E.y>h&&(R.y=Math.floor(h/In.y),E.y=R.y*In.y,un.mapSize.y=R.y)),null===un.map&&!un.isPointLightShadow&&this.type===U){const Xi={minFilter:$i,magFilter:$i,format:bn};un.map=new Ro(E.x,E.y,Xi),un.map.texture.name=Yt.name+".shadowMap",un.mapPass=new Ro(E.x,E.y,Xi),un.camera.updateProjectionMatrix()}null===un.map&&(un.map=new Ro(E.x,E.y,{minFilter:vo,magFilter:vo,format:bn}),un.map.texture.name=Yt.name+".shadowMap",un.camera.updateProjectionMatrix()),x.setRenderTarget(un.map),x.clear();const xi=un.getViewportCount();for(let Xi=0;Xi<xi;Xi++){const ir=un.getViewport(Xi);V.set(R.x*ir.x,R.y*ir.y,R.x*ir.z,R.y*ir.w),dn.viewport(V),un.updateMatrices(Yt,Xi),M=un.getFrustum(),rt(tt,Rt,un.camera,Yt,this.type)}!un.isPointLightShadow&&this.type===U&&ze(un,Rt),un.needsUpdate=!1}Oe.needsUpdate=!1,x.setRenderTarget(rn,Ut,Zt)}}function FA(x,c,h){const M=h.isWebGL2,X=new function E(){let Xt=!1;const Ei=new Rs;let nr=null;const yr=new Rs(0,0,0,0);return{setMask:function(Si){nr!==Si&&!Xt&&(x.colorMask(Si,Si,Si,Si),nr=Si)},setLocked:function(Si){Xt=Si},setClear:function(Si,es,ns,qr,Kr){!0===Kr&&(Si*=qr,es*=qr,ns*=qr),Ei.set(Si,es,ns,qr),!1===yr.equals(Ei)&&(x.clearColor(Si,es,ns,qr),yr.copy(Ei))},reset:function(){Xt=!1,nr=null,yr.set(-1,0,0,0)}}},ee=new function R(){let Xt=!1,Ei=null,nr=null,yr=null;return{setTest:function(Si){Si?Ir(2929):Mr(2929)},setMask:function(Si){Ei!==Si&&!Xt&&(x.depthMask(Si),Ei=Si)},setFunc:function(Si){if(nr!==Si){if(Si)switch(Si){case zi:x.depthFunc(512);break;case En:x.depthFunc(519);break;case Dn:x.depthFunc(513);break;case ji:x.depthFunc(515);break;case ii:x.depthFunc(514);break;case Os:x.depthFunc(518);break;case dr:x.depthFunc(516);break;case Fe:x.depthFunc(517);break;default:x.depthFunc(515)}else x.depthFunc(515);nr=Si}},setLocked:function(Si){Xt=Si},setClear:function(Si){yr!==Si&&(x.clearDepth(Si),yr=Si)},reset:function(){Xt=!1,Ei=null,nr=null,yr=null}}},te=new function V(){let Xt=!1,Ei=null,nr=null,yr=null,Si=null,es=null,ns=null,qr=null,Kr=null;return{setTest:function(Qr){Xt||(Qr?Ir(2960):Mr(2960))},setMask:function(Qr){Ei!==Qr&&!Xt&&(x.stencilMask(Qr),Ei=Qr)},setFunc:function(Qr,nl,pu){(nr!==Qr||yr!==nl||Si!==pu)&&(x.stencilFunc(Qr,nl,pu),nr=Qr,yr=nl,Si=pu)},setOp:function(Qr,nl,pu){(es!==Qr||ns!==nl||qr!==pu)&&(x.stencilOp(Qr,nl,pu),es=Qr,ns=nl,qr=pu)},setLocked:function(Qr){Xt=Qr},setClear:function(Qr){Kr!==Qr&&(x.clearStencil(Qr),Kr=Qr)},reset:function(){Xt=!1,Ei=null,nr=null,yr=null,Si=null,es=null,ns=null,qr=null,Kr=null}}};let me={},de=null,ge=!1,be=null,Te=null,Oe=null,ze=null,ke=null,Ee=null,at=null,rt=!1,gt=null,tt=null,Rt=null,rn=null,Ut=null;const Zt=x.getParameter(35661);let dn=!1,kn=0;const vn=x.getParameter(7938);-1!==vn.indexOf("WebGL")?(kn=parseFloat(/^WebGL (\d)/.exec(vn)[1]),dn=kn>=1):-1!==vn.indexOf("OpenGL ES")&&(kn=parseFloat(/^OpenGL ES (\d)/.exec(vn)[1]),dn=kn>=2);let Yt=null,un={};const In=new Rs,xi=new Rs;function Xi(Xt,Ei,nr){const yr=new Uint8Array(4),Si=x.createTexture();x.bindTexture(Xt,Si),x.texParameteri(Xt,10241,9728),x.texParameteri(Xt,10240,9728);for(let es=0;es<nr;es++)x.texImage2D(Ei+es,0,6408,1,1,0,6408,5121,yr);return Si}const ir={};function Ir(Xt){!0!==me[Xt]&&(x.enable(Xt),me[Xt]=!0)}function Mr(Xt){!1!==me[Xt]&&(x.disable(Xt),me[Xt]=!1)}ir[3553]=Xi(3553,3553,1),ir[34067]=Xi(34067,34069,6),X.setClear(0,0,0,1),ee.setClear(1),te.setClear(0),Ir(2929),ee.setFunc(ji),Ia(!1),bo(v),Ir(2884),Po(ae);const ws={[lt]:32774,[qe]:32778,[ut]:32779};if(M)ws[De]=32775,ws[je]=32776;else{const Xt=c.get("EXT_blend_minmax");null!==Xt&&(ws[De]=Xt.MIN_EXT,ws[je]=Xt.MAX_EXT)}const Ho={[Wt]:0,[Xe]:1,[Yn]:768,[xn]:770,[gr]:776,[ni]:774,[Lt]:772,[Jt]:769,[Pt]:771,[en]:775,[Xn]:773};function Po(Xt,Ei,nr,yr,Si,es,ns,qr){if(Xt!==ae){if(!1===ge&&(Ir(3042),ge=!0),Xt===ce)Si=Si||Ei,es=es||nr,ns=ns||yr,(Ei!==Te||Si!==ke)&&(x.blendEquationSeparate(ws[Ei],ws[Si]),Te=Ei,ke=Si),(nr!==Oe||yr!==ze||es!==Ee||ns!==at)&&(x.blendFuncSeparate(Ho[nr],Ho[yr],Ho[es],Ho[ns]),Oe=nr,ze=yr,Ee=es,at=ns),be=Xt,rt=null;else if(Xt!==be||qr!==rt){if((Te!==lt||ke!==lt)&&(x.blendEquation(32774),Te=lt,ke=lt),qr)switch(Xt){case Me:x.blendFuncSeparate(1,771,1,771);break;case Ce:x.blendFunc(1,1);break;case Le:x.blendFuncSeparate(0,0,769,771);break;case Ue:x.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Xt)}else switch(Xt){case Me:x.blendFuncSeparate(770,771,1,771);break;case Ce:x.blendFunc(770,1);break;case Le:x.blendFunc(0,769);break;case Ue:x.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Xt)}Oe=null,ze=null,Ee=null,at=null,be=Xt,rt=qr}}else!0===ge&&(Mr(3042),ge=!1)}function Ia(Xt){gt!==Xt&&(x.frontFace(Xt?2304:2305),gt=Xt)}function bo(Xt){Xt!==p?(Ir(2884),Xt!==tt&&x.cullFace(Xt===v?1029:Xt===C?1028:1032)):Mr(2884),tt=Xt}function ds(Xt,Ei,nr){Xt?(Ir(32823),(rn!==Ei||Ut!==nr)&&(x.polygonOffset(Ei,nr),rn=Ei,Ut=nr)):Mr(32823)}function bi(Xt){void 0===Xt&&(Xt=33984+Zt-1),Yt!==Xt&&(x.activeTexture(Xt),Yt=Xt)}return{buffers:{color:X,depth:ee,stencil:te},enable:Ir,disable:Mr,useProgram:function ro(Xt){return de!==Xt&&(x.useProgram(Xt),de=Xt,!0)},setBlending:Po,setMaterial:function ti(Xt,Ei){Xt.side===re?Mr(2884):Ir(2884);let nr=Xt.side===W;Ei&&(nr=!nr),Ia(nr),Xt.blending===Me&&!1===Xt.transparent?Po(ae):Po(Xt.blending,Xt.blendEquation,Xt.blendSrc,Xt.blendDst,Xt.blendEquationAlpha,Xt.blendSrcAlpha,Xt.blendDstAlpha,Xt.premultipliedAlpha),ee.setFunc(Xt.depthFunc),ee.setTest(Xt.depthTest),ee.setMask(Xt.depthWrite),X.setMask(Xt.colorWrite);const yr=Xt.stencilWrite;te.setTest(yr),yr&&(te.setMask(Xt.stencilWriteMask),te.setFunc(Xt.stencilFunc,Xt.stencilRef,Xt.stencilFuncMask),te.setOp(Xt.stencilFail,Xt.stencilZFail,Xt.stencilZPass)),ds(Xt.polygonOffset,Xt.polygonOffsetFactor,Xt.polygonOffsetUnits)},setFlipSided:Ia,setCullFace:bo,setLineWidth:function So(Xt){Xt!==Rt&&(dn&&x.lineWidth(Xt),Rt=Xt)},setPolygonOffset:ds,setScissorTest:function zo(Xt){Xt?Ir(3089):Mr(3089)},activeTexture:bi,bindTexture:function ri(Xt,Ei){null===Yt&&bi();let nr=un[Yt];void 0===nr&&(nr={type:void 0,texture:void 0},un[Yt]=nr),(nr.type!==Xt||nr.texture!==Ei)&&(x.bindTexture(Xt,Ei||ir[Xt]),nr.type=Xt,nr.texture=Ei)},unbindTexture:function Li(){const Xt=un[Yt];void 0!==Xt&&void 0!==Xt.type&&(x.bindTexture(Xt.type,null),Xt.type=void 0,Xt.texture=void 0)},compressedTexImage2D:function Or(){try{x.compressedTexImage2D.apply(x,arguments)}catch(Xt){console.error("THREE.WebGLState:",Xt)}},texImage2D:function mr(){try{x.texImage2D.apply(x,arguments)}catch(Xt){console.error("THREE.WebGLState:",Xt)}},texImage3D:function Ct(){try{x.texImage3D.apply(x,arguments)}catch(Xt){console.error("THREE.WebGLState:",Xt)}},scissor:function vt(Xt){!1===In.equals(Xt)&&(x.scissor(Xt.x,Xt.y,Xt.z,Xt.w),In.copy(Xt))},viewport:function ai(Xt){!1===xi.equals(Xt)&&(x.viewport(Xt.x,Xt.y,Xt.z,Xt.w),xi.copy(Xt))},reset:function vi(){x.disable(3042),x.disable(2884),x.disable(2929),x.disable(32823),x.disable(3089),x.disable(2960),x.blendEquation(32774),x.blendFunc(1,0),x.blendFuncSeparate(1,0,1,0),x.colorMask(!0,!0,!0,!0),x.clearColor(0,0,0,0),x.depthMask(!0),x.depthFunc(513),x.clearDepth(1),x.stencilMask(4294967295),x.stencilFunc(519,0,4294967295),x.stencilOp(7680,7680,7680),x.clearStencil(0),x.cullFace(1029),x.frontFace(2305),x.polygonOffset(0,0),x.activeTexture(33984),x.useProgram(null),x.lineWidth(1),x.scissor(0,0,x.canvas.width,x.canvas.height),x.viewport(0,0,x.canvas.width,x.canvas.height),me={},Yt=null,un={},de=null,ge=!1,be=null,Te=null,Oe=null,ze=null,ke=null,Ee=null,at=null,rt=!1,gt=null,tt=null,Rt=null,rn=null,Ut=null,X.reset(),ee.reset(),te.reset()}}}function OA(x,c,h,M,E,R,V){const X=E.isWebGL2,ee=E.maxTextures,te=E.maxCubemapSize,me=E.maxTextureSize,de=E.maxSamples,ge=new WeakMap;let be,Te=!1;try{Te="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(Ct){}function Oe(Ct,vt){return Te?new OffscreenCanvas(Ct,vt):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function ze(Ct,vt,ai,vi){let Xt=1;if((Ct.width>vi||Ct.height>vi)&&(Xt=vi/Math.max(Ct.width,Ct.height)),Xt<1||!0===vt){if("undefined"!=typeof HTMLImageElement&&Ct instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&Ct instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&Ct instanceof ImageBitmap){const Ei=vt?Yi.floorPowerOfTwo:Math.floor,nr=Ei(Xt*Ct.width),yr=Ei(Xt*Ct.height);void 0===be&&(be=Oe(nr,yr));const Si=ai?Oe(nr,yr):be;return Si.width=nr,Si.height=yr,Si.getContext("2d").drawImage(Ct,0,0,nr,yr),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ct.width+"x"+Ct.height+") to ("+nr+"x"+yr+")."),Si}return"data"in Ct&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ct.width+"x"+Ct.height+")."),Ct}return Ct}function ke(Ct){return Yi.isPowerOfTwo(Ct.width)&&Yi.isPowerOfTwo(Ct.height)}function at(Ct,vt){return Ct.generateMipmaps&&vt&&Ct.minFilter!==vo&&Ct.minFilter!==$i}function rt(Ct,vt,ai,vi){x.generateMipmap(Ct),M.get(vt).__maxMipLevel=Math.log2(Math.max(ai,vi))}function gt(Ct,vt,ai){if(!1===X)return vt;if(null!==Ct){if(void 0!==x[Ct])return x[Ct];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ct+"'")}let vi=vt;return 6403===vt&&(5126===ai&&(vi=33326),5131===ai&&(vi=33325),5121===ai&&(vi=33321)),6407===vt&&(5126===ai&&(vi=34837),5131===ai&&(vi=34843),5121===ai&&(vi=32849)),6408===vt&&(5126===ai&&(vi=34836),5131===ai&&(vi=34842),5121===ai&&(vi=32856)),(33325===vi||33326===vi||34842===vi||34836===vi)&&c.get("EXT_color_buffer_float"),vi}function tt(Ct){return Ct===vo||Ct===ca||Ct===sr?9728:9729}function Rt(Ct){const vt=Ct.target;vt.removeEventListener("dispose",Rt),function Ut(Ct){const vt=M.get(Ct);void 0!==vt.__webglInit&&(x.deleteTexture(vt.__webglTexture),M.remove(Ct))}(vt),vt.isVideoTexture&&ge.delete(vt),V.memory.textures--}function rn(Ct){const vt=Ct.target;vt.removeEventListener("dispose",rn),function Zt(Ct){const vt=Ct.texture,ai=M.get(Ct),vi=M.get(vt);if(Ct){if(void 0!==vi.__webglTexture&&x.deleteTexture(vi.__webglTexture),Ct.depthTexture&&Ct.depthTexture.dispose(),Ct.isWebGLCubeRenderTarget)for(let Xt=0;Xt<6;Xt++)x.deleteFramebuffer(ai.__webglFramebuffer[Xt]),ai.__webglDepthbuffer&&x.deleteRenderbuffer(ai.__webglDepthbuffer[Xt]);else x.deleteFramebuffer(ai.__webglFramebuffer),ai.__webglDepthbuffer&&x.deleteRenderbuffer(ai.__webglDepthbuffer),ai.__webglMultisampledFramebuffer&&x.deleteFramebuffer(ai.__webglMultisampledFramebuffer),ai.__webglColorRenderbuffer&&x.deleteRenderbuffer(ai.__webglColorRenderbuffer),ai.__webglDepthRenderbuffer&&x.deleteRenderbuffer(ai.__webglDepthRenderbuffer);M.remove(vt),M.remove(Ct)}}(vt),V.memory.textures--}let dn=0;function Yt(Ct,vt){const ai=M.get(Ct);if(Ct.isVideoTexture&&function bi(Ct){const vt=V.render.frame;ge.get(Ct)!==vt&&(ge.set(Ct,vt),Ct.update())}(Ct),Ct.version>0&&ai.__version!==Ct.version){const vi=Ct.image;if(void 0===vi)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==vi.complete)return void ro(ai,Ct,vt);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}h.activeTexture(33984+vt),h.bindTexture(3553,ai.__webglTexture)}function xi(Ct,vt){const ai=M.get(Ct);Ct.version>0&&ai.__version!==Ct.version?function ws(Ct,vt,ai){if(6!==vt.image.length)return;Mr(Ct,vt),h.activeTexture(33984+ai),h.bindTexture(34067,Ct.__webglTexture),x.pixelStorei(37440,vt.flipY),x.pixelStorei(37441,vt.premultiplyAlpha),x.pixelStorei(3317,vt.unpackAlignment),x.pixelStorei(37443,0);const vi=vt&&(vt.isCompressedTexture||vt.image[0].isCompressedTexture),Xt=vt.image[0]&&vt.image[0].isDataTexture,Ei=[];for(let Kr=0;Kr<6;Kr++)Ei[Kr]=vi||Xt?Xt?vt.image[Kr].image:vt.image[Kr]:ze(vt.image[Kr],!1,!0,te);const nr=Ei[0],yr=ke(nr)||X,Si=R.convert(vt.format),es=R.convert(vt.type),ns=gt(vt.internalFormat,Si,es);let qr;if(Ir(34067,vt,yr),vi){for(let Kr=0;Kr<6;Kr++){qr=Ei[Kr].mipmaps;for(let Qr=0;Qr<qr.length;Qr++){const nl=qr[Qr];vt.format!==bn&&vt.format!==nn?null!==Si?h.compressedTexImage2D(34069+Kr,Qr,ns,nl.width,nl.height,0,nl.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):h.texImage2D(34069+Kr,Qr,ns,nl.width,nl.height,0,Si,es,nl.data)}}Ct.__maxMipLevel=qr.length-1}else{qr=vt.mipmaps;for(let Kr=0;Kr<6;Kr++)if(Xt){h.texImage2D(34069+Kr,0,ns,Ei[Kr].width,Ei[Kr].height,0,Si,es,Ei[Kr].data);for(let Qr=0;Qr<qr.length;Qr++){const pu=qr[Qr].image[Kr].image;h.texImage2D(34069+Kr,Qr+1,ns,pu.width,pu.height,0,Si,es,pu.data)}}else{h.texImage2D(34069+Kr,0,ns,Si,es,Ei[Kr]);for(let Qr=0;Qr<qr.length;Qr++)h.texImage2D(34069+Kr,Qr+1,ns,Si,es,qr[Qr].image[Kr])}Ct.__maxMipLevel=qr.length}at(vt,yr)&&rt(34067,vt,nr.width,nr.height),Ct.__version=vt.version,vt.onUpdate&&vt.onUpdate(vt)}(ai,Ct,vt):(h.activeTexture(33984+vt),h.bindTexture(34067,ai.__webglTexture))}const Xi={[ea]:10497,[os]:33071,[Ls]:33648},ir={[vo]:9728,[ca]:9984,[sr]:9986,[$i]:9729,[Is]:9985,[k]:9987};function Ir(Ct,vt,ai){if(ai?(x.texParameteri(Ct,10242,Xi[vt.wrapS]),x.texParameteri(Ct,10243,Xi[vt.wrapT]),(32879===Ct||35866===Ct)&&x.texParameteri(Ct,32882,Xi[vt.wrapR]),x.texParameteri(Ct,10240,ir[vt.magFilter]),x.texParameteri(Ct,10241,ir[vt.minFilter])):(x.texParameteri(Ct,10242,33071),x.texParameteri(Ct,10243,33071),(32879===Ct||35866===Ct)&&x.texParameteri(Ct,32882,33071),(vt.wrapS!==os||vt.wrapT!==os)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),x.texParameteri(Ct,10240,tt(vt.magFilter)),x.texParameteri(Ct,10241,tt(vt.minFilter)),vt.minFilter!==vo&&vt.minFilter!==$i&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===c.has("EXT_texture_filter_anisotropic")){const vi=c.get("EXT_texture_filter_anisotropic");if(vt.type===yt&&!1===c.has("OES_texture_float_linear")||!1===X&&vt.type===Mt&&!1===c.has("OES_texture_half_float_linear"))return;(vt.anisotropy>1||M.get(vt).__currentAnisotropy)&&(x.texParameterf(Ct,vi.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(vt.anisotropy,E.getMaxAnisotropy())),M.get(vt).__currentAnisotropy=vt.anisotropy)}}function Mr(Ct,vt){void 0===Ct.__webglInit&&(Ct.__webglInit=!0,vt.addEventListener("dispose",Rt),Ct.__webglTexture=x.createTexture(),V.memory.textures++)}function ro(Ct,vt,ai){let vi=3553;vt.isDataTexture2DArray&&(vi=35866),vt.isDataTexture3D&&(vi=32879),Mr(Ct,vt),h.activeTexture(33984+ai),h.bindTexture(vi,Ct.__webglTexture),x.pixelStorei(37440,vt.flipY),x.pixelStorei(37441,vt.premultiplyAlpha),x.pixelStorei(3317,vt.unpackAlignment),x.pixelStorei(37443,0);const Xt=function Ee(Ct){return!X&&(Ct.wrapS!==os||Ct.wrapT!==os||Ct.minFilter!==vo&&Ct.minFilter!==$i)}(vt)&&!1===ke(vt.image),Ei=ze(vt.image,Xt,!1,me),nr=ke(Ei)||X,yr=R.convert(vt.format);let ns,Si=R.convert(vt.type),es=gt(vt.internalFormat,yr,Si);Ir(vi,vt,nr);const qr=vt.mipmaps;if(vt.isDepthTexture)es=6402,X?es=vt.type===yt?36012:vt.type===$e?33190:vt.type===sn?35056:33189:vt.type===yt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),vt.format===Ri&&6402===es&&vt.type!==Ae&&vt.type!==$e&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),vt.type=Ae,Si=R.convert(vt.type)),vt.format===Di&&6402===es&&(es=34041,vt.type!==sn&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),vt.type=sn,Si=R.convert(vt.type))),h.texImage2D(3553,0,es,Ei.width,Ei.height,0,yr,Si,null);else if(vt.isDataTexture)if(qr.length>0&&nr){for(let Kr=0,Qr=qr.length;Kr<Qr;Kr++)ns=qr[Kr],h.texImage2D(3553,Kr,es,ns.width,ns.height,0,yr,Si,ns.data);vt.generateMipmaps=!1,Ct.__maxMipLevel=qr.length-1}else h.texImage2D(3553,0,es,Ei.width,Ei.height,0,yr,Si,Ei.data),Ct.__maxMipLevel=0;else if(vt.isCompressedTexture){for(let Kr=0,Qr=qr.length;Kr<Qr;Kr++)ns=qr[Kr],vt.format!==bn&&vt.format!==nn?null!==yr?h.compressedTexImage2D(3553,Kr,es,ns.width,ns.height,0,ns.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):h.texImage2D(3553,Kr,es,ns.width,ns.height,0,yr,Si,ns.data);Ct.__maxMipLevel=qr.length-1}else if(vt.isDataTexture2DArray)h.texImage3D(35866,0,es,Ei.width,Ei.height,Ei.depth,0,yr,Si,Ei.data),Ct.__maxMipLevel=0;else if(vt.isDataTexture3D)h.texImage3D(32879,0,es,Ei.width,Ei.height,Ei.depth,0,yr,Si,Ei.data),Ct.__maxMipLevel=0;else if(qr.length>0&&nr){for(let Kr=0,Qr=qr.length;Kr<Qr;Kr++)ns=qr[Kr],h.texImage2D(3553,Kr,es,yr,Si,ns);vt.generateMipmaps=!1,Ct.__maxMipLevel=qr.length-1}else h.texImage2D(3553,0,es,yr,Si,Ei),Ct.__maxMipLevel=0;at(vt,nr)&&rt(vi,vt,Ei.width,Ei.height),Ct.__version=vt.version,vt.onUpdate&&vt.onUpdate(vt)}function Ho(Ct,vt,ai,vi){const Xt=vt.texture,Ei=R.convert(Xt.format),nr=R.convert(Xt.type),yr=gt(Xt.internalFormat,Ei,nr);32879===vi||35866===vi?h.texImage3D(vi,0,yr,vt.width,vt.height,vt.depth,0,Ei,nr,null):h.texImage2D(vi,0,yr,vt.width,vt.height,0,Ei,nr,null),x.bindFramebuffer(36160,Ct),x.framebufferTexture2D(36160,ai,vi,M.get(Xt).__webglTexture,0),x.bindFramebuffer(36160,null)}function Po(Ct,vt,ai){if(x.bindRenderbuffer(36161,Ct),vt.depthBuffer&&!vt.stencilBuffer){let vi=33189;if(ai){const Xt=vt.depthTexture;Xt&&Xt.isDepthTexture&&(Xt.type===yt?vi=36012:Xt.type===$e&&(vi=33190));const Ei=zo(vt);x.renderbufferStorageMultisample(36161,Ei,vi,vt.width,vt.height)}else x.renderbufferStorage(36161,vi,vt.width,vt.height);x.framebufferRenderbuffer(36160,36096,36161,Ct)}else if(vt.depthBuffer&&vt.stencilBuffer){if(ai){const vi=zo(vt);x.renderbufferStorageMultisample(36161,vi,35056,vt.width,vt.height)}else x.renderbufferStorage(36161,34041,vt.width,vt.height);x.framebufferRenderbuffer(36160,33306,36161,Ct)}else{const vi=vt.texture,Xt=R.convert(vi.format),Ei=R.convert(vi.type),nr=gt(vi.internalFormat,Xt,Ei);if(ai){const yr=zo(vt);x.renderbufferStorageMultisample(36161,yr,nr,vt.width,vt.height)}else x.renderbufferStorage(36161,nr,vt.width,vt.height)}x.bindRenderbuffer(36161,null)}function zo(Ct){return X&&Ct.isWebGLMultisampleRenderTarget?Math.min(de,Ct.samples):0}let ri=!1,Li=!1;this.allocateTextureUnit=function vn(){const Ct=dn;return Ct>=ee&&console.warn("THREE.WebGLTextures: Trying to use "+Ct+" texture units while this GPU supports only "+ee),dn+=1,Ct},this.resetTextureUnits=function kn(){dn=0},this.setTexture2D=Yt,this.setTexture2DArray=function un(Ct,vt){const ai=M.get(Ct);Ct.version>0&&ai.__version!==Ct.version?ro(ai,Ct,vt):(h.activeTexture(33984+vt),h.bindTexture(35866,ai.__webglTexture))},this.setTexture3D=function In(Ct,vt){const ai=M.get(Ct);Ct.version>0&&ai.__version!==Ct.version?ro(ai,Ct,vt):(h.activeTexture(33984+vt),h.bindTexture(32879,ai.__webglTexture))},this.setTextureCube=xi,this.setupRenderTarget=function bo(Ct){const vt=Ct.texture,ai=M.get(Ct),vi=M.get(vt);Ct.addEventListener("dispose",rn),vi.__webglTexture=x.createTexture(),V.memory.textures++;const Xt=!0===Ct.isWebGLCubeRenderTarget,Ei=!0===Ct.isWebGLMultisampleRenderTarget,nr=vt.isDataTexture3D||vt.isDataTexture2DArray,yr=ke(Ct)||X;if(X&&vt.format===nn&&(vt.type===yt||vt.type===Mt)&&(vt.format=bn,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Xt){ai.__webglFramebuffer=[];for(let Si=0;Si<6;Si++)ai.__webglFramebuffer[Si]=x.createFramebuffer()}else if(ai.__webglFramebuffer=x.createFramebuffer(),Ei)if(X){ai.__webglMultisampledFramebuffer=x.createFramebuffer(),ai.__webglColorRenderbuffer=x.createRenderbuffer(),x.bindRenderbuffer(36161,ai.__webglColorRenderbuffer);const Si=R.convert(vt.format),es=R.convert(vt.type),ns=gt(vt.internalFormat,Si,es),qr=zo(Ct);x.renderbufferStorageMultisample(36161,qr,ns,Ct.width,Ct.height),x.bindFramebuffer(36160,ai.__webglMultisampledFramebuffer),x.framebufferRenderbuffer(36160,36064,36161,ai.__webglColorRenderbuffer),x.bindRenderbuffer(36161,null),Ct.depthBuffer&&(ai.__webglDepthRenderbuffer=x.createRenderbuffer(),Po(ai.__webglDepthRenderbuffer,Ct,!0)),x.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Xt){h.bindTexture(34067,vi.__webglTexture),Ir(34067,vt,yr);for(let Si=0;Si<6;Si++)Ho(ai.__webglFramebuffer[Si],Ct,36064,34069+Si);at(vt,yr)&&rt(34067,vt,Ct.width,Ct.height),h.bindTexture(34067,null)}else{let Si=3553;nr&&(X?Si=vt.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),h.bindTexture(Si,vi.__webglTexture),Ir(Si,vt,yr),Ho(ai.__webglFramebuffer,Ct,36064,Si),at(vt,yr)&&rt(3553,vt,Ct.width,Ct.height),h.bindTexture(3553,null)}Ct.depthBuffer&&function Ia(Ct){const vt=M.get(Ct),ai=!0===Ct.isWebGLCubeRenderTarget;if(Ct.depthTexture){if(ai)throw new Error("target.depthTexture not supported in Cube render targets");!function ti(Ct,vt){if(vt&&vt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(x.bindFramebuffer(36160,Ct),!vt.depthTexture||!vt.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!M.get(vt.depthTexture).__webglTexture||vt.depthTexture.image.width!==vt.width||vt.depthTexture.image.height!==vt.height)&&(vt.depthTexture.image.width=vt.width,vt.depthTexture.image.height=vt.height,vt.depthTexture.needsUpdate=!0),Yt(vt.depthTexture,0);const vi=M.get(vt.depthTexture).__webglTexture;if(vt.depthTexture.format===Ri)x.framebufferTexture2D(36160,36096,3553,vi,0);else{if(vt.depthTexture.format!==Di)throw new Error("Unknown depthTexture format");x.framebufferTexture2D(36160,33306,3553,vi,0)}}(vt.__webglFramebuffer,Ct)}else if(ai){vt.__webglDepthbuffer=[];for(let vi=0;vi<6;vi++)x.bindFramebuffer(36160,vt.__webglFramebuffer[vi]),vt.__webglDepthbuffer[vi]=x.createRenderbuffer(),Po(vt.__webglDepthbuffer[vi],Ct,!1)}else x.bindFramebuffer(36160,vt.__webglFramebuffer),vt.__webglDepthbuffer=x.createRenderbuffer(),Po(vt.__webglDepthbuffer,Ct,!1);x.bindFramebuffer(36160,null)}(Ct)},this.updateRenderTargetMipmap=function So(Ct){const vt=Ct.texture;if(at(vt,ke(Ct)||X)){const vi=Ct.isWebGLCubeRenderTarget?34067:3553,Xt=M.get(vt).__webglTexture;h.bindTexture(vi,Xt),rt(vi,vt,Ct.width,Ct.height),h.bindTexture(vi,null)}},this.updateMultisampleRenderTarget=function ds(Ct){if(Ct.isWebGLMultisampleRenderTarget)if(X){const vt=M.get(Ct);x.bindFramebuffer(36008,vt.__webglMultisampledFramebuffer),x.bindFramebuffer(36009,vt.__webglFramebuffer);const ai=Ct.width,vi=Ct.height;let Xt=16384;Ct.depthBuffer&&(Xt|=256),Ct.stencilBuffer&&(Xt|=1024),x.blitFramebuffer(0,0,ai,vi,0,0,ai,vi,Xt,9728),x.bindFramebuffer(36160,vt.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function Or(Ct,vt){Ct&&Ct.isWebGLRenderTarget&&(!1===ri&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),ri=!0),Ct=Ct.texture),Yt(Ct,vt)},this.safeSetTextureCube=function mr(Ct,vt){Ct&&Ct.isWebGLCubeRenderTarget&&(!1===Li&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Li=!0),Ct=Ct.texture),xi(Ct,vt)}}function dm(x,c,h){const M=h.isWebGL2;return{convert:function E(R){let V;if(R===Y)return 5121;if(R===tn)return 32819;if(R===Tt)return 32820;if(R===qt)return 33635;if(R===ne)return 5120;if(R===pe)return 5122;if(R===Ae)return 5123;if(R===Ge)return 5124;if(R===$e)return 5125;if(R===yt)return 5126;if(R===Mt)return M?5131:(V=c.get("OES_texture_half_float"),null!==V?V.HALF_FLOAT_OES:null);if(R===Dt)return 6406;if(R===nn)return 6407;if(R===bn)return 6408;if(R===ln)return 6409;if(R===qn)return 6410;if(R===Ri)return 6402;if(R===Di)return 34041;if(R===Ai)return 6403;if(R===Ii)return 36244;if(R===Er)return 33319;if(R===Ui)return 33320;if(R===$r)return 36248;if(R===Ur)return 36249;if(R===oa||R===rl||R===$s||R===Gi){if(V=c.get("WEBGL_compressed_texture_s3tc"),null===V)return null;if(R===oa)return V.COMPRESSED_RGB_S3TC_DXT1_EXT;if(R===rl)return V.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(R===$s)return V.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(R===Gi)return V.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(R===Do||R===Ns||R===ua||R===as){if(V=c.get("WEBGL_compressed_texture_pvrtc"),null===V)return null;if(R===Do)return V.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(R===Ns)return V.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(R===ua)return V.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(R===as)return V.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(R===js)return V=c.get("WEBGL_compressed_texture_etc1"),null!==V?V.COMPRESSED_RGB_ETC1_WEBGL:null;if((R===Ao||R===Pa)&&(V=c.get("WEBGL_compressed_texture_etc"),null!==V)){if(R===Ao)return V.COMPRESSED_RGB8_ETC2;if(R===Pa)return V.COMPRESSED_RGBA8_ETC2_EAC}return R===Pe||R===Ke||R===yn||R===An||R===Rr||R===vs||R===Zi||R===Jn||R===La||R===Eu||R===Wi||R===Fa||R===cr||R===Ts||R===kp||R===ug||R===mc||R===Ma||R===Mf||R===Pp||R===Lp||R===zc||R===Sd||R===Fp||R===Vc||R===j_||R===Op||R===Cf?(V=c.get("WEBGL_compressed_texture_astc"),null!==V?R:null):R===qo?(V=c.get("EXT_texture_compression_bptc"),null!==V?R:null):R===sn?M?34042:(V=c.get("WEBGL_depth_texture"),null!==V?V.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}function Ou(x=[]){ga.call(this),this.cameras=x}sb.prototype.isMeshDistanceMaterial=!0,Ou.prototype=Object.assign(Object.create(ga.prototype),{constructor:Ou,isArrayCamera:!0});class Pg extends Ci{constructor(){super(),this.type="Group"}}function ob(){this._targetRay=null,this._grip=null,this._hand=null}function Kx(x,c){const h=this;let M=null,E=1,R=null,V="local-floor",X=null;const ee=[],te=new Map,me=new ga;me.layers.enable(1),me.viewport=new Rs;const de=new ga;de.layers.enable(2),de.viewport=new Rs;const ge=[me,de],be=new Ou;be.layers.enable(1),be.layers.enable(2);let Te=null,Oe=null;function ze(Zt){const dn=te.get(Zt.inputSource);dn&&dn.dispatchEvent({type:Zt.type,data:Zt.inputSource})}function ke(){te.forEach(function(Zt,dn){Zt.disconnect(dn)}),te.clear(),Te=null,Oe=null,x.setFramebuffer(null),x.setRenderTarget(x.getRenderTarget()),Ut.stop(),h.isPresenting=!1,h.dispatchEvent({type:"sessionend"})}function Ee(Zt){const dn=M.inputSources;for(let kn=0;kn<ee.length;kn++)te.set(dn[kn],ee[kn]);for(let kn=0;kn<Zt.removed.length;kn++){const vn=Zt.removed[kn],Yt=te.get(vn);Yt&&(Yt.dispatchEvent({type:"disconnected",data:vn}),te.delete(vn))}for(let kn=0;kn<Zt.added.length;kn++){const vn=Zt.added[kn],Yt=te.get(vn);Yt&&Yt.dispatchEvent({type:"connected",data:vn})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(Zt){let dn=ee[Zt];return void 0===dn&&(dn=new ob,ee[Zt]=dn),dn.getTargetRaySpace()},this.getControllerGrip=function(Zt){let dn=ee[Zt];return void 0===dn&&(dn=new ob,ee[Zt]=dn),dn.getGripSpace()},this.getHand=function(Zt){let dn=ee[Zt];return void 0===dn&&(dn=new ob,ee[Zt]=dn),dn.getHandSpace()},this.setFramebufferScaleFactor=function(Zt){E=Zt,!0===h.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Zt){V=Zt,!0===h.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return R},this.getSession=function(){return M},this.setSession=function(){var Zt=(0,y.Z)(function*(dn){if(M=dn,null!==M){M.addEventListener("select",ze),M.addEventListener("selectstart",ze),M.addEventListener("selectend",ze),M.addEventListener("squeeze",ze),M.addEventListener("squeezestart",ze),M.addEventListener("squeezeend",ze),M.addEventListener("end",ke),M.addEventListener("inputsourceschange",Ee);const kn=c.getContextAttributes();!0!==kn.xrCompatible&&(yield c.makeXRCompatible());const Yt=new XRWebGLLayer(M,c,{antialias:kn.antialias,alpha:kn.alpha,depth:kn.depth,stencil:kn.stencil,framebufferScaleFactor:E});M.updateRenderState({baseLayer:Yt}),R=yield M.requestReferenceSpace(V),Ut.setContext(M),Ut.start(),h.isPresenting=!0,h.dispatchEvent({type:"sessionstart"})}});return function(dn){return Zt.apply(this,arguments)}}();const at=new Ze,rt=new Ze;function tt(Zt,dn){null===dn?Zt.matrixWorld.copy(Zt.matrix):Zt.matrixWorld.multiplyMatrices(dn.matrixWorld,Zt.matrix),Zt.matrixWorldInverse.copy(Zt.matrixWorld).invert()}this.getCamera=function(Zt){be.near=de.near=me.near=Zt.near,be.far=de.far=me.far=Zt.far,(Te!==be.near||Oe!==be.far)&&(M.updateRenderState({depthNear:be.near,depthFar:be.far}),Te=be.near,Oe=be.far);const dn=Zt.parent,kn=be.cameras;tt(be,dn);for(let Yt=0;Yt<kn.length;Yt++)tt(kn[Yt],dn);Zt.matrixWorld.copy(be.matrixWorld),Zt.matrix.copy(be.matrix),Zt.matrix.decompose(Zt.position,Zt.quaternion,Zt.scale);const vn=Zt.children;for(let Yt=0,un=vn.length;Yt<un;Yt++)vn[Yt].updateMatrixWorld(!0);return 2===kn.length?function gt(Zt,dn,kn){at.setFromMatrixPosition(dn.matrixWorld),rt.setFromMatrixPosition(kn.matrixWorld);const vn=at.distanceTo(rt),Yt=dn.projectionMatrix.elements,un=kn.projectionMatrix.elements,In=Yt[14]/(Yt[10]-1),xi=Yt[14]/(Yt[10]+1),Xi=(Yt[9]+1)/Yt[5],ir=(Yt[9]-1)/Yt[5],Ir=(Yt[8]-1)/Yt[0],Mr=(un[8]+1)/un[0],ro=In*Ir,ws=In*Mr,Ho=vn/(-Ir+Mr),Po=Ho*-Ir;dn.matrixWorld.decompose(Zt.position,Zt.quaternion,Zt.scale),Zt.translateX(Po),Zt.translateZ(Ho),Zt.matrixWorld.compose(Zt.position,Zt.quaternion,Zt.scale),Zt.matrixWorldInverse.copy(Zt.matrixWorld).invert();const ti=In+Ho,Ia=xi+Ho;Zt.projectionMatrix.makePerspective(ro-Po,ws+(vn-Po),Xi*xi/Ia*ti,ir*xi/Ia*ti,ti,Ia)}(be,me,de):be.projectionMatrix.copy(me.projectionMatrix),be};let Rt=null;const Ut=new qp;Ut.setAnimationLoop(function rn(Zt,dn){if(X=dn.getViewerPose(R),null!==X){const vn=X.views,Yt=M.renderState.baseLayer;x.setFramebuffer(Yt.framebuffer);let un=!1;vn.length!==be.cameras.length&&(be.cameras.length=0,un=!0);for(let In=0;In<vn.length;In++){const xi=vn[In],Xi=Yt.getViewport(xi),ir=ge[In];ir.matrix.fromArray(xi.transform.matrix),ir.projectionMatrix.fromArray(xi.projectionMatrix),ir.viewport.set(Xi.x,Xi.y,Xi.width,Xi.height),0===In&&be.matrix.copy(ir.matrix),!0===un&&be.cameras.push(ir)}}const kn=M.inputSources;for(let vn=0;vn<ee.length;vn++)ee[vn].update(kn[vn],dn,R);Rt&&Rt(Zt,dn)}),this.setAnimationLoop=function(Zt){Rt=Zt},this.dispose=function(){}}function ZL(x){function M(ke,Ee){ke.opacity.value=Ee.opacity,Ee.color&&ke.diffuse.value.copy(Ee.color),Ee.emissive&&ke.emissive.value.copy(Ee.emissive).multiplyScalar(Ee.emissiveIntensity),Ee.map&&(ke.map.value=Ee.map),Ee.alphaMap&&(ke.alphaMap.value=Ee.alphaMap),Ee.specularMap&&(ke.specularMap.value=Ee.specularMap);const at=x.get(Ee).envMap;if(at){ke.envMap.value=at,ke.flipEnvMap.value=at.isCubeTexture&&at._needsFlipEnvMap?-1:1,ke.reflectivity.value=Ee.reflectivity,ke.refractionRatio.value=Ee.refractionRatio;const tt=x.get(at).__maxMipLevel;void 0!==tt&&(ke.maxMipLevel.value=tt)}let rt,gt;Ee.lightMap&&(ke.lightMap.value=Ee.lightMap,ke.lightMapIntensity.value=Ee.lightMapIntensity),Ee.aoMap&&(ke.aoMap.value=Ee.aoMap,ke.aoMapIntensity.value=Ee.aoMapIntensity),Ee.map?rt=Ee.map:Ee.specularMap?rt=Ee.specularMap:Ee.displacementMap?rt=Ee.displacementMap:Ee.normalMap?rt=Ee.normalMap:Ee.bumpMap?rt=Ee.bumpMap:Ee.roughnessMap?rt=Ee.roughnessMap:Ee.metalnessMap?rt=Ee.metalnessMap:Ee.alphaMap?rt=Ee.alphaMap:Ee.emissiveMap?rt=Ee.emissiveMap:Ee.clearcoatMap?rt=Ee.clearcoatMap:Ee.clearcoatNormalMap?rt=Ee.clearcoatNormalMap:Ee.clearcoatRoughnessMap&&(rt=Ee.clearcoatRoughnessMap),void 0!==rt&&(rt.isWebGLRenderTarget&&(rt=rt.texture),!0===rt.matrixAutoUpdate&&rt.updateMatrix(),ke.uvTransform.value.copy(rt.matrix)),Ee.aoMap?gt=Ee.aoMap:Ee.lightMap&&(gt=Ee.lightMap),void 0!==gt&&(gt.isWebGLRenderTarget&&(gt=gt.texture),!0===gt.matrixAutoUpdate&&gt.updateMatrix(),ke.uv2Transform.value.copy(gt.matrix))}function de(ke,Ee){ke.roughness.value=Ee.roughness,ke.metalness.value=Ee.metalness,Ee.roughnessMap&&(ke.roughnessMap.value=Ee.roughnessMap),Ee.metalnessMap&&(ke.metalnessMap.value=Ee.metalnessMap),Ee.emissiveMap&&(ke.emissiveMap.value=Ee.emissiveMap),Ee.bumpMap&&(ke.bumpMap.value=Ee.bumpMap,ke.bumpScale.value=Ee.bumpScale,Ee.side===W&&(ke.bumpScale.value*=-1)),Ee.normalMap&&(ke.normalMap.value=Ee.normalMap,ke.normalScale.value.copy(Ee.normalScale),Ee.side===W&&ke.normalScale.value.negate()),Ee.displacementMap&&(ke.displacementMap.value=Ee.displacementMap,ke.displacementScale.value=Ee.displacementScale,ke.displacementBias.value=Ee.displacementBias),x.get(Ee).envMap&&(ke.envMapIntensity.value=Ee.envMapIntensity)}return{refreshFogUniforms:function c(ke,Ee){ke.fogColor.value.copy(Ee.color),Ee.isFog?(ke.fogNear.value=Ee.near,ke.fogFar.value=Ee.far):Ee.isFogExp2&&(ke.fogDensity.value=Ee.density)},refreshMaterialUniforms:function h(ke,Ee,at,rt){Ee.isMeshBasicMaterial?M(ke,Ee):Ee.isMeshLambertMaterial?(M(ke,Ee),function ee(ke,Ee){Ee.emissiveMap&&(ke.emissiveMap.value=Ee.emissiveMap)}(ke,Ee)):Ee.isMeshToonMaterial?(M(ke,Ee),function me(ke,Ee){Ee.gradientMap&&(ke.gradientMap.value=Ee.gradientMap),Ee.emissiveMap&&(ke.emissiveMap.value=Ee.emissiveMap),Ee.bumpMap&&(ke.bumpMap.value=Ee.bumpMap,ke.bumpScale.value=Ee.bumpScale,Ee.side===W&&(ke.bumpScale.value*=-1)),Ee.normalMap&&(ke.normalMap.value=Ee.normalMap,ke.normalScale.value.copy(Ee.normalScale),Ee.side===W&&ke.normalScale.value.negate()),Ee.displacementMap&&(ke.displacementMap.value=Ee.displacementMap,ke.displacementScale.value=Ee.displacementScale,ke.displacementBias.value=Ee.displacementBias)}(ke,Ee)):Ee.isMeshPhongMaterial?(M(ke,Ee),function te(ke,Ee){ke.specular.value.copy(Ee.specular),ke.shininess.value=Math.max(Ee.shininess,1e-4),Ee.emissiveMap&&(ke.emissiveMap.value=Ee.emissiveMap),Ee.bumpMap&&(ke.bumpMap.value=Ee.bumpMap,ke.bumpScale.value=Ee.bumpScale,Ee.side===W&&(ke.bumpScale.value*=-1)),Ee.normalMap&&(ke.normalMap.value=Ee.normalMap,ke.normalScale.value.copy(Ee.normalScale),Ee.side===W&&ke.normalScale.value.negate()),Ee.displacementMap&&(ke.displacementMap.value=Ee.displacementMap,ke.displacementScale.value=Ee.displacementScale,ke.displacementBias.value=Ee.displacementBias)}(ke,Ee)):Ee.isMeshStandardMaterial?(M(ke,Ee),Ee.isMeshPhysicalMaterial?function ge(ke,Ee){de(ke,Ee),ke.reflectivity.value=Ee.reflectivity,ke.clearcoat.value=Ee.clearcoat,ke.clearcoatRoughness.value=Ee.clearcoatRoughness,Ee.sheen&&ke.sheen.value.copy(Ee.sheen),Ee.clearcoatMap&&(ke.clearcoatMap.value=Ee.clearcoatMap),Ee.clearcoatRoughnessMap&&(ke.clearcoatRoughnessMap.value=Ee.clearcoatRoughnessMap),Ee.clearcoatNormalMap&&(ke.clearcoatNormalScale.value.copy(Ee.clearcoatNormalScale),ke.clearcoatNormalMap.value=Ee.clearcoatNormalMap,Ee.side===W&&ke.clearcoatNormalScale.value.negate()),ke.transmission.value=Ee.transmission,Ee.transmissionMap&&(ke.transmissionMap.value=Ee.transmissionMap)}(ke,Ee):de(ke,Ee)):Ee.isMeshMatcapMaterial?(M(ke,Ee),function be(ke,Ee){Ee.matcap&&(ke.matcap.value=Ee.matcap),Ee.bumpMap&&(ke.bumpMap.value=Ee.bumpMap,ke.bumpScale.value=Ee.bumpScale,Ee.side===W&&(ke.bumpScale.value*=-1)),Ee.normalMap&&(ke.normalMap.value=Ee.normalMap,ke.normalScale.value.copy(Ee.normalScale),Ee.side===W&&ke.normalScale.value.negate()),Ee.displacementMap&&(ke.displacementMap.value=Ee.displacementMap,ke.displacementScale.value=Ee.displacementScale,ke.displacementBias.value=Ee.displacementBias)}(ke,Ee)):Ee.isMeshDepthMaterial?(M(ke,Ee),function Te(ke,Ee){Ee.displacementMap&&(ke.displacementMap.value=Ee.displacementMap,ke.displacementScale.value=Ee.displacementScale,ke.displacementBias.value=Ee.displacementBias)}(ke,Ee)):Ee.isMeshDistanceMaterial?(M(ke,Ee),function Oe(ke,Ee){Ee.displacementMap&&(ke.displacementMap.value=Ee.displacementMap,ke.displacementScale.value=Ee.displacementScale,ke.displacementBias.value=Ee.displacementBias),ke.referencePosition.value.copy(Ee.referencePosition),ke.nearDistance.value=Ee.nearDistance,ke.farDistance.value=Ee.farDistance}(ke,Ee)):Ee.isMeshNormalMaterial?(M(ke,Ee),function ze(ke,Ee){Ee.bumpMap&&(ke.bumpMap.value=Ee.bumpMap,ke.bumpScale.value=Ee.bumpScale,Ee.side===W&&(ke.bumpScale.value*=-1)),Ee.normalMap&&(ke.normalMap.value=Ee.normalMap,ke.normalScale.value.copy(Ee.normalScale),Ee.side===W&&ke.normalScale.value.negate()),Ee.displacementMap&&(ke.displacementMap.value=Ee.displacementMap,ke.displacementScale.value=Ee.displacementScale,ke.displacementBias.value=Ee.displacementBias)}(ke,Ee)):Ee.isLineBasicMaterial?(function E(ke,Ee){ke.diffuse.value.copy(Ee.color),ke.opacity.value=Ee.opacity}(ke,Ee),Ee.isLineDashedMaterial&&function R(ke,Ee){ke.dashSize.value=Ee.dashSize,ke.totalSize.value=Ee.dashSize+Ee.gapSize,ke.scale.value=Ee.scale}(ke,Ee)):Ee.isPointsMaterial?function V(ke,Ee,at,rt){let gt;ke.diffuse.value.copy(Ee.color),ke.opacity.value=Ee.opacity,ke.size.value=Ee.size*at,ke.scale.value=.5*rt,Ee.map&&(ke.map.value=Ee.map),Ee.alphaMap&&(ke.alphaMap.value=Ee.alphaMap),Ee.map?gt=Ee.map:Ee.alphaMap&&(gt=Ee.alphaMap),void 0!==gt&&(!0===gt.matrixAutoUpdate&&gt.updateMatrix(),ke.uvTransform.value.copy(gt.matrix))}(ke,Ee,at,rt):Ee.isSpriteMaterial?function X(ke,Ee){let at;ke.diffuse.value.copy(Ee.color),ke.opacity.value=Ee.opacity,ke.rotation.value=Ee.rotation,Ee.map&&(ke.map.value=Ee.map),Ee.alphaMap&&(ke.alphaMap.value=Ee.alphaMap),Ee.map?at=Ee.map:Ee.alphaMap&&(at=Ee.alphaMap),void 0!==at&&(!0===at.matrixAutoUpdate&&at.updateMatrix(),ke.uvTransform.value.copy(at.matrix))}(ke,Ee):Ee.isShadowMaterial?(ke.color.value.copy(Ee.color),ke.opacity.value=Ee.opacity):Ee.isShaderMaterial&&(Ee.uniformsNeedUpdate=!1)}}}function Qo(x){const c=void 0!==(x=x||{}).canvas?x.canvas:function Nu(){const x=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return x.style.display="block",x}(),h=void 0!==x.context?x.context:null,M=void 0!==x.alpha&&x.alpha,E=void 0===x.depth||x.depth,R=void 0===x.stencil||x.stencil,V=void 0!==x.antialias&&x.antialias,X=void 0===x.premultipliedAlpha||x.premultipliedAlpha,ee=void 0!==x.preserveDrawingBuffer&&x.preserveDrawingBuffer,te=void 0!==x.powerPreference?x.powerPreference:"default",me=void 0!==x.failIfMajorPerformanceCaveat&&x.failIfMajorPerformanceCaveat;let de=null,ge=null;const be=[],Te=[];this.domElement=c,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=sl,this.physicallyCorrectLights=!1,this.toneMapping=nt,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const Oe=this;let ze=!1,ke=null,Ee=0,at=0,rt=null,gt=null,tt=-1,Rt=null;const rn=new Rs,Ut=new Rs;let Zt=null,dn=c.width,kn=c.height,vn=1,Yt=null,un=null;const In=new Rs(0,0,dn,kn),xi=new Rs(0,0,dn,kn);let Xi=!1;const ir=new Wp;let Ir=!1,Mr=!1;const ro=new pr,ws=new Ze,Ho={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Po(){return null===rt?vn:1}let bo,So,ds,zo,bi,ri,Li,Or,mr,Ct,vt,ai,vi,Xt,Ei,nr,yr,Si,es,ns,qr,ti=h;function Ia(pt,Hn){for(let Rn=0;Rn<pt.length;Rn++){const Ji=c.getContext(pt[Rn],Hn);if(null!==Ji)return Ji}return null}try{const pt={alpha:M,depth:E,stencil:R,antialias:V,premultipliedAlpha:X,preserveDrawingBuffer:ee,powerPreference:te,failIfMajorPerformanceCaveat:me};if(c.addEventListener("webglcontextlost",pu,!1),c.addEventListener("webglcontextrestored",_S,!1),null===ti){const Hn=["webgl2","webgl","experimental-webgl"];if(!0===Oe.isWebGL1Renderer&&Hn.shift(),ti=Ia(Hn,pt),null===ti)throw Ia(Hn)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ti.getShaderPrecisionFormat&&(ti.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(pt){throw console.error("THREE.WebGLRenderer: "+pt.message),pt}function Kr(){bo=new Vx(ti),So=new za(ti,bo,x),bo.init(So),ns=new dm(ti,bo,So),ds=new FA(ti,bo,So),ds.scissor(Ut.copy(xi).multiplyScalar(vn).floor()),ds.viewport(rn.copy(In).multiplyScalar(vn).floor()),zo=new S(ti),bi=new SA,ri=new OA(ti,bo,ds,bi,So,ns,zo),Li=new zx(Oe),Or=new Oy(ti,So),qr=new hv(ti,bo,Or,So),mr=new Rg(ti,Or,zo,qr),Ct=new oe(ti,mr,Or,zo),yr=new H(ti),Ei=new sC(bi),vt=new CA(Oe,Li,bo,So,qr,Ei),ai=new ZL(bi),vi=new Gf(bi),Xt=new kA(bo,So),nr=new Hx(Oe,Li,ds,Ct,X),Si=new tb(ti,bo,zo,So),es=new g(ti,bo,zo,So),zo.programs=vt.programs,Oe.capabilities=So,Oe.extensions=bo,Oe.properties=bi,Oe.renderLists=vi,Oe.state=ds,Oe.info=zo}Kr();const Qr=new Kx(Oe,ti);this.xr=Qr;const nl=new Jx(Oe,Ct,So.maxTextureSize);function pu(pt){pt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),ze=!0}function _S(){console.log("THREE.WebGLRenderer: Context Restored."),ze=!1,Kr()}function vS(pt){const Hn=pt.target;Hn.removeEventListener("dispose",vS),function SI(pt){yS(pt),bi.remove(pt)}(Hn)}function yS(pt){const Hn=bi.get(pt).program;void 0!==Hn&&vt.releaseProgram(Hn)}this.shadowMap=nl,this.getContext=function(){return ti},this.getContextAttributes=function(){return ti.getContextAttributes()},this.forceContextLoss=function(){const pt=bo.get("WEBGL_lose_context");pt&&pt.loseContext()},this.forceContextRestore=function(){const pt=bo.get("WEBGL_lose_context");pt&&pt.restoreContext()},this.getPixelRatio=function(){return vn},this.setPixelRatio=function(pt){void 0!==pt&&(vn=pt,this.setSize(dn,kn,!1))},this.getSize=function(pt){return void 0===pt&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),pt=new Un),pt.set(dn,kn)},this.setSize=function(pt,Hn,Rn){Qr.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(dn=pt,kn=Hn,c.width=Math.floor(pt*vn),c.height=Math.floor(Hn*vn),!1!==Rn&&(c.style.width=pt+"px",c.style.height=Hn+"px"),this.setViewport(0,0,pt,Hn))},this.getDrawingBufferSize=function(pt){return void 0===pt&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),pt=new Un),pt.set(dn*vn,kn*vn).floor()},this.setDrawingBufferSize=function(pt,Hn,Rn){dn=pt,kn=Hn,vn=Rn,c.width=Math.floor(pt*Rn),c.height=Math.floor(Hn*Rn),this.setViewport(0,0,pt,Hn)},this.getCurrentViewport=function(pt){return void 0===pt&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),pt=new Rs),pt.copy(rn)},this.getViewport=function(pt){return pt.copy(In)},this.setViewport=function(pt,Hn,Rn,Wn){pt.isVector4?In.set(pt.x,pt.y,pt.z,pt.w):In.set(pt,Hn,Rn,Wn),ds.viewport(rn.copy(In).multiplyScalar(vn).floor())},this.getScissor=function(pt){return pt.copy(xi)},this.setScissor=function(pt,Hn,Rn,Wn){pt.isVector4?xi.set(pt.x,pt.y,pt.z,pt.w):xi.set(pt,Hn,Rn,Wn),ds.scissor(Ut.copy(xi).multiplyScalar(vn).floor())},this.getScissorTest=function(){return Xi},this.setScissorTest=function(pt){ds.setScissorTest(Xi=pt)},this.setOpaqueSort=function(pt){Yt=pt},this.setTransparentSort=function(pt){un=pt},this.getClearColor=function(pt){return void 0===pt&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),pt=new er),pt.copy(nr.getClearColor())},this.setClearColor=function(){nr.setClearColor.apply(nr,arguments)},this.getClearAlpha=function(){return nr.getClearAlpha()},this.setClearAlpha=function(){nr.setClearAlpha.apply(nr,arguments)},this.clear=function(pt,Hn,Rn){let Wn=0;(void 0===pt||pt)&&(Wn|=16384),(void 0===Hn||Hn)&&(Wn|=256),(void 0===Rn||Rn)&&(Wn|=1024),ti.clear(Wn)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){c.removeEventListener("webglcontextlost",pu,!1),c.removeEventListener("webglcontextrestored",_S,!1),vi.dispose(),Xt.dispose(),bi.dispose(),Li.dispose(),Ct.dispose(),qr.dispose(),Qr.dispose(),Yv.stop()},this.renderBufferImmediate=function(pt,Hn){qr.initAttributes();const Rn=bi.get(pt);pt.hasPositions&&!Rn.position&&(Rn.position=ti.createBuffer()),pt.hasNormals&&!Rn.normal&&(Rn.normal=ti.createBuffer()),pt.hasUvs&&!Rn.uv&&(Rn.uv=ti.createBuffer()),pt.hasColors&&!Rn.color&&(Rn.color=ti.createBuffer());const Wn=Hn.getAttributes();pt.hasPositions&&(ti.bindBuffer(34962,Rn.position),ti.bufferData(34962,pt.positionArray,35048),qr.enableAttribute(Wn.position),ti.vertexAttribPointer(Wn.position,3,5126,!1,0,0)),pt.hasNormals&&(ti.bindBuffer(34962,Rn.normal),ti.bufferData(34962,pt.normalArray,35048),qr.enableAttribute(Wn.normal),ti.vertexAttribPointer(Wn.normal,3,5126,!1,0,0)),pt.hasUvs&&(ti.bindBuffer(34962,Rn.uv),ti.bufferData(34962,pt.uvArray,35048),qr.enableAttribute(Wn.uv),ti.vertexAttribPointer(Wn.uv,2,5126,!1,0,0)),pt.hasColors&&(ti.bindBuffer(34962,Rn.color),ti.bufferData(34962,pt.colorArray,35048),qr.enableAttribute(Wn.color),ti.vertexAttribPointer(Wn.color,3,5126,!1,0,0)),qr.disableUnusedAttributes(),ti.drawArrays(4,0,pt.count),pt.count=0},this.renderBufferDirect=function(pt,Hn,Rn,Wn,Ji,zs){null===Hn&&(Hn=Ho);const gs=Ji.isMesh&&Ji.matrixWorld.determinant()<0,Vs=f1(pt,Hn,Wn,Ji);ds.setMaterial(Wn,gs);let Ss=Rn.index;const wl=Rn.attributes.position;if(null===Ss){if(void 0===wl||0===wl.count)return}else if(0===Ss.count)return;let Qs=1;!0===Wn.wireframe&&(Ss=mr.getWireframeAttribute(Rn),Qs=2),(Wn.morphTargets||Wn.morphNormals)&&yr.update(Ji,Rn,Wn,Vs),qr.setup(Ji,Wn,Vs,Rn,Ss);let Us,Vo=Si;null!==Ss&&(Us=Or.get(Ss),Vo=es,Vo.setIndex(Us));const oh=null!==Ss?Ss.count:wl.count,Ra=Rn.drawRange.start*Qs,Hi=Rn.drawRange.count*Qs,ac=null!==zs?zs.start*Qs:0,p1=null!==zs?zs.count*Qs:1/0,mu=Math.max(Ra,ac),mp=Math.min(oh,Ra+Hi,ac+p1)-1,h_=Math.max(0,mp-mu+1);if(0!==h_){if(Ji.isMesh)!0===Wn.wireframe?(ds.setLineWidth(Wn.wireframeLinewidth*Po()),Vo.setMode(1)):Vo.setMode(4);else if(Ji.isLine){let gp=Wn.linewidth;void 0===gp&&(gp=1),ds.setLineWidth(gp*Po()),Vo.setMode(Ji.isLineSegments?1:Ji.isLineLoop?2:3)}else Ji.isPoints?Vo.setMode(0):Ji.isSprite&&Vo.setMode(4);if(Ji.isInstancedMesh)Vo.renderInstances(mu,h_,Ji.count);else if(Rn.isInstancedBufferGeometry){const gp=Math.min(Rn.instanceCount,Rn._maxInstanceCount);Vo.renderInstances(mu,h_,gp)}else Vo.render(mu,h_)}},this.compile=function(pt,Hn){ge=Xt.get(pt),ge.init(),pt.traverseVisible(function(Wn){Wn.isLight&&Wn.layers.test(Hn.layers)&&(ge.pushLight(Wn),Wn.castShadow&&ge.pushShadow(Wn))}),ge.setupLights();const Rn=new WeakMap;pt.traverse(function(Wn){const Ji=Wn.material;if(Ji)if(Array.isArray(Ji))for(let zs=0;zs<Ji.length;zs++){const gs=Ji[zs];!1===Rn.has(gs)&&(dd(gs,pt,Wn),Rn.set(gs))}else!1===Rn.has(Ji)&&(dd(Ji,pt,Wn),Rn.set(Ji))})};let u1=null;const Yv=new qp;function bS(pt,Hn,Rn,Wn){if(!1===pt.visible)return;if(pt.layers.test(Hn.layers))if(pt.isGroup)Rn=pt.renderOrder;else if(pt.isLOD)!0===pt.autoUpdate&&pt.update(Hn);else if(pt.isLight)ge.pushLight(pt),pt.castShadow&&ge.pushShadow(pt);else if(pt.isSprite){if(!pt.frustumCulled||ir.intersectsSprite(pt)){Wn&&ws.setFromMatrixPosition(pt.matrixWorld).applyMatrix4(ro);const gs=Ct.update(pt),Vs=pt.material;Vs.visible&&de.push(pt,gs,Vs,Rn,ws.z,null)}}else if(pt.isImmediateRenderObject)Wn&&ws.setFromMatrixPosition(pt.matrixWorld).applyMatrix4(ro),de.push(pt,null,pt.material,Rn,ws.z,null);else if((pt.isMesh||pt.isLine||pt.isPoints)&&(pt.isSkinnedMesh&&pt.skeleton.frame!==zo.render.frame&&(pt.skeleton.update(),pt.skeleton.frame=zo.render.frame),!pt.frustumCulled||ir.intersectsObject(pt))){Wn&&ws.setFromMatrixPosition(pt.matrixWorld).applyMatrix4(ro);const gs=Ct.update(pt),Vs=pt.material;if(Array.isArray(Vs)){const Ss=gs.groups;for(let wl=0,Qs=Ss.length;wl<Qs;wl++){const Us=Ss[wl],Vo=Vs[Us.materialIndex];Vo&&Vo.visible&&de.push(pt,gs,Vo,Rn,ws.z,Us)}}else Vs.visible&&de.push(pt,gs,Vs,Rn,ws.z,null)}const zs=pt.children;for(let gs=0,Vs=zs.length;gs<Vs;gs++)bS(zs[gs],Hn,Rn,Wn)}function h1(pt,Hn,Rn){const Wn=!0===Hn.isScene?Hn.overrideMaterial:null;for(let Ji=0,zs=pt.length;Ji<zs;Ji++){const gs=pt[Ji],Vs=gs.object,Ss=gs.geometry,wl=null===Wn?gs.material:Wn,Qs=gs.group;if(Rn.isArrayCamera){const Us=Rn.cameras;for(let Vo=0,oh=Us.length;Vo<oh;Vo++){const Ra=Us[Vo];Vs.layers.test(Ra.layers)&&(ds.viewport(rn.copy(Ra.viewport)),ge.setupLightsView(Ra),d1(Vs,Hn,Ra,Ss,wl,Qs))}}else d1(Vs,Hn,Rn,Ss,wl,Qs)}}function d1(pt,Hn,Rn,Wn,Ji,zs){if(pt.onBeforeRender(Oe,Hn,Rn,Wn,Ji,zs),pt.modelViewMatrix.multiplyMatrices(Rn.matrixWorldInverse,pt.matrixWorld),pt.normalMatrix.getNormalMatrix(pt.modelViewMatrix),pt.isImmediateRenderObject){const gs=f1(Rn,Hn,Ji,pt);ds.setMaterial(Ji),qr.reset(),function EI(pt,Hn){pt.render(function(Rn){Oe.renderBufferImmediate(Rn,Hn)})}(pt,gs)}else Oe.renderBufferDirect(Rn,Hn,Wn,Ji,pt,zs);pt.onAfterRender(Oe,Hn,Rn,Wn,Ji,zs)}function dd(pt,Hn,Rn){!0!==Hn.isScene&&(Hn=Ho);const Wn=bi.get(pt),Ji=ge.state.lights,gs=Ji.state.version,Vs=vt.getParameters(pt,Ji.state,ge.state.shadowsArray,Hn,Rn),Ss=vt.getProgramCacheKey(Vs);let wl=Wn.program,Qs=!0;if(Wn.environment=pt.isMeshStandardMaterial?Hn.environment:null,Wn.fog=Hn.fog,Wn.envMap=Li.get(pt.envMap||Wn.environment),void 0===wl)pt.addEventListener("dispose",vS);else if(wl.cacheKey!==Ss)yS(pt);else if(Wn.lightsStateVersion!==gs)Qs=!1;else{if(void 0!==Vs.shaderID)return;Qs=!1}Qs&&(Vs.uniforms=vt.getUniforms(pt),pt.onBeforeCompile(Vs,Oe),wl=vt.acquireProgram(Vs,Ss),Wn.program=wl,Wn.uniforms=Vs.uniforms,Wn.outputEncoding=Vs.outputEncoding);const Us=Wn.uniforms;(!pt.isShaderMaterial&&!pt.isRawShaderMaterial||!0===pt.clipping)&&(Wn.numClippingPlanes=Ei.numPlanes,Wn.numIntersection=Ei.numIntersection,Us.clippingPlanes=Ei.uniform),Wn.needsLights=function wS(pt){return pt.isMeshLambertMaterial||pt.isMeshToonMaterial||pt.isMeshPhongMaterial||pt.isMeshStandardMaterial||pt.isShadowMaterial||pt.isShaderMaterial&&!0===pt.lights}(pt),Wn.lightsStateVersion=gs,Wn.needsLights&&(Us.ambientLightColor.value=Ji.state.ambient,Us.lightProbe.value=Ji.state.probe,Us.directionalLights.value=Ji.state.directional,Us.directionalLightShadows.value=Ji.state.directionalShadow,Us.spotLights.value=Ji.state.spot,Us.spotLightShadows.value=Ji.state.spotShadow,Us.rectAreaLights.value=Ji.state.rectArea,Us.ltc_1.value=Ji.state.rectAreaLTC1,Us.ltc_2.value=Ji.state.rectAreaLTC2,Us.pointLights.value=Ji.state.point,Us.pointLightShadows.value=Ji.state.pointShadow,Us.hemisphereLights.value=Ji.state.hemi,Us.directionalShadowMap.value=Ji.state.directionalShadowMap,Us.directionalShadowMatrix.value=Ji.state.directionalShadowMatrix,Us.spotShadowMap.value=Ji.state.spotShadowMap,Us.spotShadowMatrix.value=Ji.state.spotShadowMatrix,Us.pointShadowMap.value=Ji.state.pointShadowMap,Us.pointShadowMatrix.value=Ji.state.pointShadowMatrix);const Vo=Wn.program.getUniforms(),oh=Uf.seqWithValue(Vo.seq,Us);Wn.uniformsList=oh}function f1(pt,Hn,Rn,Wn){!0!==Hn.isScene&&(Hn=Ho),ri.resetTextureUnits();const Ji=Hn.fog,zs=Rn.isMeshStandardMaterial?Hn.environment:null,gs=null===rt?Oe.outputEncoding:rt.texture.encoding,Vs=Li.get(Rn.envMap||zs),Ss=bi.get(Rn),wl=ge.state.lights;!0!==Ir||!0!==Mr&&pt===Rt||Ei.setState(Rn,pt,pt===Rt&&Rn.id===tt),Rn.version===Ss.__version?(Rn.fog&&Ss.fog!==Ji||Ss.environment!==zs||Ss.needsLights&&Ss.lightsStateVersion!==wl.state.version||void 0!==Ss.numClippingPlanes&&(Ss.numClippingPlanes!==Ei.numPlanes||Ss.numIntersection!==Ei.numIntersection)||Ss.outputEncoding!==gs||Ss.envMap!==Vs)&&dd(Rn,Hn,Wn):(dd(Rn,Hn,Wn),Ss.__version=Rn.version);let Qs=!1,Us=!1,Vo=!1;const oh=Ss.program,Ra=oh.getUniforms(),Hi=Ss.uniforms;if(ds.useProgram(oh.program)&&(Qs=!0,Us=!0,Vo=!0),Rn.id!==tt&&(tt=Rn.id,Us=!0),Qs||Rt!==pt){if(Ra.setValue(ti,"projectionMatrix",pt.projectionMatrix),So.logarithmicDepthBuffer&&Ra.setValue(ti,"logDepthBufFC",2/(Math.log(pt.far+1)/Math.LN2)),Rt!==pt&&(Rt=pt,Us=!0,Vo=!0),Rn.isShaderMaterial||Rn.isMeshPhongMaterial||Rn.isMeshToonMaterial||Rn.isMeshStandardMaterial||Rn.envMap){const ac=Ra.map.cameraPosition;void 0!==ac&&ac.setValue(ti,ws.setFromMatrixPosition(pt.matrixWorld))}(Rn.isMeshPhongMaterial||Rn.isMeshToonMaterial||Rn.isMeshLambertMaterial||Rn.isMeshBasicMaterial||Rn.isMeshStandardMaterial||Rn.isShaderMaterial)&&Ra.setValue(ti,"isOrthographic",!0===pt.isOrthographicCamera),(Rn.isMeshPhongMaterial||Rn.isMeshToonMaterial||Rn.isMeshLambertMaterial||Rn.isMeshBasicMaterial||Rn.isMeshStandardMaterial||Rn.isShaderMaterial||Rn.isShadowMaterial||Rn.skinning)&&Ra.setValue(ti,"viewMatrix",pt.matrixWorldInverse)}if(Rn.skinning){Ra.setOptional(ti,Wn,"bindMatrix"),Ra.setOptional(ti,Wn,"bindMatrixInverse");const ac=Wn.skeleton;if(ac){const p1=ac.bones;if(So.floatVertexTextures){if(null===ac.boneTexture){let mu=Math.sqrt(4*p1.length);mu=Yi.ceilPowerOfTwo(mu),mu=Math.max(mu,4);const mp=new Float32Array(mu*mu*4);mp.set(ac.boneMatrices);const h_=new eh(mp,mu,mu,bn,yt);ac.boneMatrices=mp,ac.boneTexture=h_,ac.boneTextureSize=mu}Ra.setValue(ti,"boneTexture",ac.boneTexture,ri),Ra.setValue(ti,"boneTextureSize",ac.boneTextureSize)}else Ra.setOptional(ti,ac,"boneMatrices")}}return(Us||Ss.receiveShadow!==Wn.receiveShadow)&&(Ss.receiveShadow=Wn.receiveShadow,Ra.setValue(ti,"receiveShadow",Wn.receiveShadow)),Us&&(Ra.setValue(ti,"toneMappingExposure",Oe.toneMappingExposure),Ss.needsLights&&function xS(pt,Hn){pt.ambientLightColor.needsUpdate=Hn,pt.lightProbe.needsUpdate=Hn,pt.directionalLights.needsUpdate=Hn,pt.directionalLightShadows.needsUpdate=Hn,pt.pointLights.needsUpdate=Hn,pt.pointLightShadows.needsUpdate=Hn,pt.spotLights.needsUpdate=Hn,pt.spotLightShadows.needsUpdate=Hn,pt.rectAreaLights.needsUpdate=Hn,pt.hemisphereLights.needsUpdate=Hn}(Hi,Vo),Ji&&Rn.fog&&ai.refreshFogUniforms(Hi,Ji),ai.refreshMaterialUniforms(Hi,Rn,vn,kn),Uf.upload(ti,Ss.uniformsList,Hi,ri)),Rn.isShaderMaterial&&!0===Rn.uniformsNeedUpdate&&(Uf.upload(ti,Ss.uniformsList,Hi,ri),Rn.uniformsNeedUpdate=!1),Rn.isSpriteMaterial&&Ra.setValue(ti,"center",Wn.center),Ra.setValue(ti,"modelViewMatrix",Wn.modelViewMatrix),Ra.setValue(ti,"normalMatrix",Wn.normalMatrix),Ra.setValue(ti,"modelMatrix",Wn.matrixWorld),oh}Yv.setAnimationLoop(function TI(pt){Qr.isPresenting||u1&&u1(pt)}),"undefined"!=typeof window&&Yv.setContext(window),this.setAnimationLoop=function(pt){u1=pt,Qr.setAnimationLoop(pt),null===pt?Yv.stop():Yv.start()},this.render=function(pt,Hn){let Rn,Wn;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),Rn=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),Wn=arguments[3]),void 0!==Hn&&!0!==Hn.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===ze)return;qr.resetDefaultState(),tt=-1,Rt=null,!0===pt.autoUpdate&&pt.updateMatrixWorld(),null===Hn.parent&&Hn.updateMatrixWorld(),!0===Qr.enabled&&!0===Qr.isPresenting&&(Hn=Qr.getCamera(Hn)),!0===pt.isScene&&pt.onBeforeRender(Oe,pt,Hn,Rn||rt),ge=Xt.get(pt,Te.length),ge.init(),Te.push(ge),ro.multiplyMatrices(Hn.projectionMatrix,Hn.matrixWorldInverse),ir.setFromProjectionMatrix(ro),Mr=this.localClippingEnabled,Ir=Ei.init(this.clippingPlanes,Mr,Hn),de=vi.get(pt,be.length),de.init(),be.push(de),bS(pt,Hn,0,Oe.sortObjects),de.finish(),!0===Oe.sortObjects&&de.sort(Yt,un),!0===Ir&&Ei.beginShadows();const Ji=ge.state.shadowsArray;nl.render(Ji,pt,Hn),ge.setupLights(),ge.setupLightsView(Hn),!0===Ir&&Ei.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==Rn&&this.setRenderTarget(Rn),nr.render(de,pt,Hn,Wn);const zs=de.opaque,gs=de.transparent;zs.length>0&&h1(zs,pt,Hn),gs.length>0&&h1(gs,pt,Hn),!0===pt.isScene&&pt.onAfterRender(Oe,pt,Hn),null!==rt&&(ri.updateRenderTargetMipmap(rt),ri.updateMultisampleRenderTarget(rt)),ds.buffers.depth.setTest(!0),ds.buffers.depth.setMask(!0),ds.buffers.color.setMask(!0),ds.setPolygonOffset(!1),Te.pop(),ge=Te.length>0?Te[Te.length-1]:null,be.pop(),de=be.length>0?be[be.length-1]:null},this.setFramebuffer=function(pt){ke!==pt&&null===rt&&ti.bindFramebuffer(36160,pt),ke=pt},this.getActiveCubeFace=function(){return Ee},this.getActiveMipmapLevel=function(){return at},this.getRenderTarget=function(){return rt},this.setRenderTarget=function(pt,Hn=0,Rn=0){rt=pt,Ee=Hn,at=Rn,pt&&void 0===bi.get(pt).__webglFramebuffer&&ri.setupRenderTarget(pt);let Wn=ke,Ji=!1,zs=!1;if(pt){const gs=pt.texture;(gs.isDataTexture3D||gs.isDataTexture2DArray)&&(zs=!0);const Vs=bi.get(pt).__webglFramebuffer;pt.isWebGLCubeRenderTarget?(Wn=Vs[Hn],Ji=!0):Wn=pt.isWebGLMultisampleRenderTarget?bi.get(pt).__webglMultisampledFramebuffer:Vs,rn.copy(pt.viewport),Ut.copy(pt.scissor),Zt=pt.scissorTest}else rn.copy(In).multiplyScalar(vn).floor(),Ut.copy(xi).multiplyScalar(vn).floor(),Zt=Xi;if(gt!==Wn&&(ti.bindFramebuffer(36160,Wn),gt=Wn),ds.viewport(rn),ds.scissor(Ut),ds.setScissorTest(Zt),Ji){const gs=bi.get(pt.texture);ti.framebufferTexture2D(36160,36064,34069+Hn,gs.__webglTexture,Rn)}else if(zs){const gs=bi.get(pt.texture);ti.framebufferTextureLayer(36160,36064,gs.__webglTexture,Rn||0,Hn||0)}},this.readRenderTargetPixels=function(pt,Hn,Rn,Wn,Ji,zs,gs){if(!pt||!pt.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Vs=bi.get(pt).__webglFramebuffer;if(pt.isWebGLCubeRenderTarget&&void 0!==gs&&(Vs=Vs[gs]),Vs){let Ss=!1;Vs!==gt&&(ti.bindFramebuffer(36160,Vs),Ss=!0);try{const wl=pt.texture,Qs=wl.format,Us=wl.type;if(Qs!==bn&&ns.convert(Qs)!==ti.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Vo=Us===Mt&&(bo.has("EXT_color_buffer_half_float")||So.isWebGL2&&bo.has("EXT_color_buffer_float"));if(!(Us===Y||ns.convert(Us)===ti.getParameter(35738)||Us===yt&&(So.isWebGL2||bo.has("OES_texture_float")||bo.has("WEBGL_color_buffer_float"))||Vo))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ti.checkFramebufferStatus(36160)?Hn>=0&&Hn<=pt.width-Wn&&Rn>=0&&Rn<=pt.height-Ji&&ti.readPixels(Hn,Rn,Wn,Ji,ns.convert(Qs),ns.convert(Us),zs):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{Ss&&ti.bindFramebuffer(36160,gt)}}},this.copyFramebufferToTexture=function(pt,Hn,Rn=0){const Wn=Math.pow(2,-Rn),Ji=Math.floor(Hn.image.width*Wn),zs=Math.floor(Hn.image.height*Wn),gs=ns.convert(Hn.format);ri.setTexture2D(Hn,0),ti.copyTexImage2D(3553,Rn,gs,pt.x,pt.y,Ji,zs,0),ds.unbindTexture()},this.copyTextureToTexture=function(pt,Hn,Rn,Wn=0){const Ji=Hn.image.width,zs=Hn.image.height,gs=ns.convert(Rn.format),Vs=ns.convert(Rn.type);ri.setTexture2D(Rn,0),ti.pixelStorei(37440,Rn.flipY),ti.pixelStorei(37441,Rn.premultiplyAlpha),ti.pixelStorei(3317,Rn.unpackAlignment),Hn.isDataTexture?ti.texSubImage2D(3553,Wn,pt.x,pt.y,Ji,zs,gs,Vs,Hn.image.data):Hn.isCompressedTexture?ti.compressedTexSubImage2D(3553,Wn,pt.x,pt.y,Hn.mipmaps[0].width,Hn.mipmaps[0].height,gs,Hn.mipmaps[0].data):ti.texSubImage2D(3553,Wn,pt.x,pt.y,gs,Vs,Hn.image),0===Wn&&Rn.generateMipmaps&&ti.generateMipmap(3553),ds.unbindTexture()},this.copyTextureToTexture3D=function(pt,Hn,Rn,Wn,Ji=0){if(Oe.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const{width:zs,height:gs,data:Vs}=Rn.image,Ss=ns.convert(Wn.format),wl=ns.convert(Wn.type);let Qs;if(Wn.isDataTexture3D)ri.setTexture3D(Wn,0),Qs=32879;else{if(!Wn.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ri.setTexture2DArray(Wn,0),Qs=35866}ti.pixelStorei(37440,Wn.flipY),ti.pixelStorei(37441,Wn.premultiplyAlpha),ti.pixelStorei(3317,Wn.unpackAlignment);const Us=ti.getParameter(3314),Vo=ti.getParameter(32878),oh=ti.getParameter(3316),Ra=ti.getParameter(3315),Hi=ti.getParameter(32877);ti.pixelStorei(3314,zs),ti.pixelStorei(32878,gs),ti.pixelStorei(3316,pt.min.x),ti.pixelStorei(3315,pt.min.y),ti.pixelStorei(32877,pt.min.z),ti.texSubImage3D(Qs,Ji,Hn.x,Hn.y,Hn.z,pt.max.x-pt.min.x+1,pt.max.y-pt.min.y+1,pt.max.z-pt.min.z+1,Ss,wl,Vs),ti.pixelStorei(3314,Us),ti.pixelStorei(32878,Vo),ti.pixelStorei(3316,oh),ti.pixelStorei(3315,Ra),ti.pixelStorei(32877,Hi),0===Ji&&Wn.generateMipmaps&&ti.generateMipmap(Qs),ds.unbindTexture()},this.initTexture=function(pt){ri.setTexture2D(pt,0),ds.unbindTexture()},this.resetState=function(){ds.reset(),qr.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Pg.prototype.isGroup=!0,Object.assign(ob.prototype,{constructor:ob,getHandSpace:function(){return null===this._hand&&(this._hand=new Pg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new Pg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new Pg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(x){return null!==this._targetRay&&this._targetRay.dispatchEvent(x),null!==this._grip&&this._grip.dispatchEvent(x),null!==this._hand&&this._hand.dispatchEvent(x),this},disconnect:function(x){return this.dispatchEvent({type:"disconnected",data:x}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(x,c,h){let M=null,E=null,R=null;const V=this._targetRay,X=this._grip,ee=this._hand;if(x&&"visible-blurred"!==c.session.visibilityState)if(ee&&x.hand){R=!0;for(const Te of x.hand.values()){const Oe=c.getJointPose(Te,h);if(void 0===ee.joints[Te.jointName]){const ke=new Pg;ke.matrixAutoUpdate=!1,ke.visible=!1,ee.joints[Te.jointName]=ke,ee.add(ke)}const ze=ee.joints[Te.jointName];null!==Oe&&(ze.matrix.fromArray(Oe.transform.matrix),ze.matrix.decompose(ze.position,ze.rotation,ze.scale),ze.jointRadius=Oe.radius),ze.visible=null!==Oe}const de=ee.joints["index-finger-tip"].position.distanceTo(ee.joints["thumb-tip"].position),ge=.02,be=.005;ee.inputState.pinching&&de>ge+be?(ee.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:x.handedness,target:this})):!ee.inputState.pinching&&de<=ge-be&&(ee.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:x.handedness,target:this}))}else null!==V&&(M=c.getPose(x.targetRaySpace,h),null!==M&&(V.matrix.fromArray(M.transform.matrix),V.matrix.decompose(V.position,V.rotation,V.scale))),null!==X&&x.gripSpace&&(E=c.getPose(x.gripSpace,h),null!==E&&(X.matrix.fromArray(E.transform.matrix),X.matrix.decompose(X.position,X.rotation,X.scale)));return null!==V&&(V.visible=null!==M),null!==X&&(X.visible=null!==E),null!==ee&&(ee.visible=null!==R),this}}),Object.assign(Kx.prototype,pl.prototype);class ab extends Qo{}ab.prototype.isWebGL1Renderer=!0;class _v{constructor(c,h){this.name="",this.color=new er(c),this.density=void 0!==h?h:25e-5}clone(){return new _v(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}_v.prototype.isFogExp2=!0;class Lg{constructor(c,h,M){this.name="",this.color=new er(c),this.near=void 0!==h?h:1,this.far=void 0!==M?M:1e3}clone(){return new Lg(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Lg.prototype.isFog=!0;class Wf extends Ci{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(c,h){return super.copy(c,h),null!==c.background&&(this.background=c.background.clone()),null!==c.environment&&(this.environment=c.environment.clone()),null!==c.fog&&(this.fog=c.fog.clone()),null!==c.overrideMaterial&&(this.overrideMaterial=c.overrideMaterial.clone()),this.autoUpdate=c.autoUpdate,this.matrixAutoUpdate=c.matrixAutoUpdate,this}toJSON(c){const h=super.toJSON(c);return null!==this.background&&(h.object.background=this.background.toJSON(c)),null!==this.environment&&(h.object.environment=this.environment.toJSON(c)),null!==this.fog&&(h.object.fog=this.fog.toJSON()),h}}function Jc(x,c){this.array=x,this.stride=c,this.count=void 0!==x?x.length/c:0,this.usage=Lo,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Yi.generateUUID()}Wf.prototype.isScene=!0,Object.defineProperty(Jc.prototype,"needsUpdate",{set:function(x){!0===x&&this.version++}}),Object.assign(Jc.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(x){return this.usage=x,this},copy:function(x){return this.array=new x.array.constructor(x.array),this.count=x.count,this.stride=x.stride,this.usage=x.usage,this},copyAt:function(x,c,h){x*=this.stride,h*=c.stride;for(let M=0,E=this.stride;M<E;M++)this.array[x+M]=c.array[h+M];return this},set:function(x,c=0){return this.array.set(x,c),this},clone:function(x){void 0===x.arrayBuffers&&(x.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Yi.generateUUID()),void 0===x.arrayBuffers[this.array.buffer._uuid]&&(x.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const h=new Jc(new this.array.constructor(x.arrayBuffers[this.array.buffer._uuid]),this.stride);return h.setUsage(this.usage),h},onUpload:function(x){return this.onUploadCallback=x,this},toJSON:function(x){return void 0===x.arrayBuffers&&(x.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Yi.generateUUID()),void 0===x.arrayBuffers[this.array.buffer._uuid]&&(x.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const qf=new Ze;function td(x,c,h,M){this.name="",this.data=x,this.itemSize=c,this.offset=h,this.normalized=!0===M}Object.defineProperties(td.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(x){this.data.needsUpdate=x}}}),Object.assign(td.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(x){for(let c=0,h=this.data.count;c<h;c++)qf.x=this.getX(c),qf.y=this.getY(c),qf.z=this.getZ(c),qf.applyMatrix4(x),this.setXYZ(c,qf.x,qf.y,qf.z);return this},setX:function(x,c){return this.data.array[x*this.data.stride+this.offset]=c,this},setY:function(x,c){return this.data.array[x*this.data.stride+this.offset+1]=c,this},setZ:function(x,c){return this.data.array[x*this.data.stride+this.offset+2]=c,this},setW:function(x,c){return this.data.array[x*this.data.stride+this.offset+3]=c,this},getX:function(x){return this.data.array[x*this.data.stride+this.offset]},getY:function(x){return this.data.array[x*this.data.stride+this.offset+1]},getZ:function(x){return this.data.array[x*this.data.stride+this.offset+2]},getW:function(x){return this.data.array[x*this.data.stride+this.offset+3]},setXY:function(x,c,h){return this.data.array[(x=x*this.data.stride+this.offset)+0]=c,this.data.array[x+1]=h,this},setXYZ:function(x,c,h,M){return this.data.array[(x=x*this.data.stride+this.offset)+0]=c,this.data.array[x+1]=h,this.data.array[x+2]=M,this},setXYZW:function(x,c,h,M,E){return this.data.array[(x=x*this.data.stride+this.offset)+0]=c,this.data.array[x+1]=h,this.data.array[x+2]=M,this.data.array[x+3]=E,this},clone:function(x){if(void 0===x){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const c=[];for(let h=0;h<this.count;h++){const M=h*this.data.stride+this.offset;for(let E=0;E<this.itemSize;E++)c.push(this.data.array[M+E])}return new Wr(new this.array.constructor(c),this.itemSize,this.normalized)}return void 0===x.interleavedBuffers&&(x.interleavedBuffers={}),void 0===x.interleavedBuffers[this.data.uuid]&&(x.interleavedBuffers[this.data.uuid]=this.data.clone(x)),new td(x.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(x){if(void 0===x){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const c=[];for(let h=0;h<this.count;h++){const M=h*this.data.stride+this.offset;for(let E=0;E<this.itemSize;E++)c.push(this.data.array[M+E])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:c,normalized:this.normalized}}return void 0===x.interleavedBuffers&&(x.interleavedBuffers={}),void 0===x.interleavedBuffers[this.data.uuid]&&(x.interleavedBuffers[this.data.uuid]=this.data.toJSON(x)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});class Fg extends Yo{constructor(c){super(),this.type="SpriteMaterial",this.color=new er(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(c)}copy(c){return super.copy(c),this.color.copy(c.color),this.map=c.map,this.alphaMap=c.alphaMap,this.rotation=c.rotation,this.sizeAttenuation=c.sizeAttenuation,this}}let fm;Fg.prototype.isSpriteMaterial=!0;const lb=new Ze,Eh=new Ze,jf=new Ze,pm=new Un,vv=new Un,cb=new pr,ub=new Ze,yv=new Ze,hb=new Ze,vC=new Un,Qx=new Un,yC=new Un;class bv extends Ci{constructor(c){if(super(),this.type="Sprite",void 0===fm){fm=new wr;const M=new Jc(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);fm.setIndex([0,1,2,0,2,3]),fm.setAttribute("position",new td(M,3,0,!1)),fm.setAttribute("uv",new td(M,2,3,!1))}this.geometry=fm,this.material=void 0!==c?c:new Fg,this.center=new Un(.5,.5)}raycast(c,h){null===c.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Eh.setFromMatrixScale(this.matrixWorld),cb.copy(c.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(c.camera.matrixWorldInverse,this.matrixWorld),jf.setFromMatrixPosition(this.modelViewMatrix),c.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Eh.multiplyScalar(-jf.z);const M=this.material.rotation;let E,R;0!==M&&(R=Math.cos(M),E=Math.sin(M));const V=this.center;Og(ub.set(-.5,-.5,0),jf,V,Eh,E,R),Og(yv.set(.5,-.5,0),jf,V,Eh,E,R),Og(hb.set(.5,.5,0),jf,V,Eh,E,R),vC.set(0,0),Qx.set(1,0),yC.set(1,1);let X=c.ray.intersectTriangle(ub,yv,hb,!1,lb);if(null===X&&(Og(yv.set(-.5,.5,0),jf,V,Eh,E,R),Qx.set(0,1),X=c.ray.intersectTriangle(ub,hb,yv,!1,lb),null===X))return;const ee=c.ray.origin.distanceTo(lb);ee<c.near||ee>c.far||h.push({distance:ee,point:lb.clone(),uv:Sa.getUV(lb,ub,yv,hb,vC,Qx,yC,new Un),face:null,object:this})}copy(c){return super.copy(c),void 0!==c.center&&this.center.copy(c.center),this.material=c.material,this}}function Og(x,c,h,M,E,R){pm.subVectors(x,h).addScalar(.5).multiply(M),void 0!==E?(vv.x=R*pm.x-E*pm.y,vv.y=E*pm.x+R*pm.y):vv.copy(pm),x.copy(c),x.x+=vv.x,x.y+=vv.y,x.applyMatrix4(cb)}bv.prototype.isSprite=!0;const xv=new Ze,db=new Ze;class $x extends Ci{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(c){super.copy(c,!1);const h=c.levels;for(let M=0,E=h.length;M<E;M++){const R=h[M];this.addLevel(R.object.clone(),R.distance)}return this.autoUpdate=c.autoUpdate,this}addLevel(c,h=0){h=Math.abs(h);const M=this.levels;let E;for(E=0;E<M.length&&!(h<M[E].distance);E++);return M.splice(E,0,{distance:h,object:c}),this.add(c),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(c){const h=this.levels;if(h.length>0){let M,E;for(M=1,E=h.length;M<E&&!(c<h[M].distance);M++);return h[M-1].object}return null}raycast(c,h){if(this.levels.length>0){xv.setFromMatrixPosition(this.matrixWorld);const E=c.ray.origin.distanceTo(xv);this.getObjectForDistance(E).raycast(c,h)}}update(c){const h=this.levels;if(h.length>1){xv.setFromMatrixPosition(c.matrixWorld),db.setFromMatrixPosition(this.matrixWorld);const M=xv.distanceTo(db)/c.zoom;let E,R;for(h[0].object.visible=!0,E=1,R=h.length;E<R&&M>=h[E].distance;E++)h[E-1].object.visible=!1,h[E].object.visible=!0;for(this._currentLevel=E-1;E<R;E++)h[E].object.visible=!1}}toJSON(c){const h=super.toJSON(c);!1===this.autoUpdate&&(h.object.autoUpdate=!1),h.object.levels=[];const M=this.levels;for(let E=0,R=M.length;E<R;E++){const V=M[E];h.object.levels.push({object:V.object.uuid,distance:V.distance})}return h}}const bC=new Ze,ew=new Rs,tw=new Rs,mm=new Ze,nw=new pr;function Ng(x,c){io.call(this,x,c),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new pr,this.bindMatrixInverse=new pr}function wv(){Ci.call(this),this.type="Bone"}Ng.prototype=Object.assign(Object.create(io.prototype),{constructor:Ng,isSkinnedMesh:!0,copy:function(x){return io.prototype.copy.call(this,x),this.bindMode=x.bindMode,this.bindMatrix.copy(x.bindMatrix),this.bindMatrixInverse.copy(x.bindMatrixInverse),this.skeleton=x.skeleton,this},bind:function(x,c){this.skeleton=x,void 0===c&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),c=this.matrixWorld),this.bindMatrix.copy(c),this.bindMatrixInverse.copy(c).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const x=new Rs,c=this.geometry.attributes.skinWeight;for(let h=0,M=c.count;h<M;h++){x.x=c.getX(h),x.y=c.getY(h),x.z=c.getZ(h),x.w=c.getW(h);const E=1/x.manhattanLength();E!==1/0?x.multiplyScalar(E):x.set(1,0,0,0),c.setXYZW(h,x.x,x.y,x.z,x.w)}},updateMatrixWorld:function(x){io.prototype.updateMatrixWorld.call(this,x),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(x,c){const h=this.skeleton,M=this.geometry;ew.fromBufferAttribute(M.attributes.skinIndex,x),tw.fromBufferAttribute(M.attributes.skinWeight,x),bC.fromBufferAttribute(M.attributes.position,x).applyMatrix4(this.bindMatrix),c.set(0,0,0);for(let E=0;E<4;E++){const R=tw.getComponent(E);if(0!==R){const V=ew.getComponent(E);nw.multiplyMatrices(h.bones[V].matrixWorld,h.boneInverses[V]),c.addScaledVector(mm.copy(bC).applyMatrix4(nw),R)}}return c.applyMatrix4(this.bindMatrixInverse)}}),wv.prototype=Object.assign(Object.create(Ci.prototype),{constructor:wv,isBone:!0});const Mv=new pr,NA=new pr;class Bg{constructor(c=[],h=[]){this.uuid=Yi.generateUUID(),this.bones=c.slice(0),this.boneInverses=h,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const c=this.bones,h=this.boneInverses;if(this.boneMatrices=new Float32Array(16*c.length),0===h.length)this.calculateInverses();else if(c.length!==h.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let M=0,E=this.bones.length;M<E;M++)this.boneInverses.push(new pr)}}calculateInverses(){this.boneInverses.length=0;for(let c=0,h=this.bones.length;c<h;c++){const M=new pr;this.bones[c]&&M.copy(this.bones[c].matrixWorld).invert(),this.boneInverses.push(M)}}pose(){for(let c=0,h=this.bones.length;c<h;c++){const M=this.bones[c];M&&M.matrixWorld.copy(this.boneInverses[c]).invert()}for(let c=0,h=this.bones.length;c<h;c++){const M=this.bones[c];M&&(M.parent&&M.parent.isBone?(M.matrix.copy(M.parent.matrixWorld).invert(),M.matrix.multiply(M.matrixWorld)):M.matrix.copy(M.matrixWorld),M.matrix.decompose(M.position,M.quaternion,M.scale))}}update(){const c=this.bones,h=this.boneInverses,M=this.boneMatrices,E=this.boneTexture;for(let R=0,V=c.length;R<V;R++)Mv.multiplyMatrices(c[R]?c[R].matrixWorld:NA,h[R]),Mv.toArray(M,16*R);null!==E&&(E.needsUpdate=!0)}clone(){return new Bg(this.bones,this.boneInverses)}getBoneByName(c){for(let h=0,M=this.bones.length;h<M;h++){const E=this.bones[h];if(E.name===c)return E}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(c,h){this.uuid=c.uuid;for(let M=0,E=c.bones.length;M<E;M++){const R=c.bones[M];let V=h[R];void 0===V&&(console.warn("THREE.Skeleton: No bone found with UUID:",R),V=new wv),this.bones.push(V),this.boneInverses.push((new pr).fromArray(c.boneInverses[M]))}return this.init(),this}toJSON(){const c={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};c.uuid=this.uuid;const h=this.bones,M=this.boneInverses;for(let E=0,R=h.length;E<R;E++)c.bones.push(h[E].uuid),c.boneInverses.push(M[E].toArray());return c}}const iw=new pr,rw=new pr,Hg=[],zg=new io;function gm(x,c,h){io.call(this,x,c),this.instanceMatrix=new Wr(new Float32Array(16*h),16),this.instanceColor=null,this.count=h,this.frustumCulled=!1}gm.prototype=Object.assign(Object.create(io.prototype),{constructor:gm,isInstancedMesh:!0,copy:function(x){return io.prototype.copy.call(this,x),this.instanceMatrix.copy(x.instanceMatrix),null!==x.instanceColor&&(this.instanceColor=x.instanceColor.clone()),this.count=x.count,this},getColorAt:function(x,c){c.fromArray(this.instanceColor.array,3*x)},getMatrixAt:function(x,c){c.fromArray(this.instanceMatrix.array,16*x)},raycast:function(x,c){const h=this.matrixWorld,M=this.count;if(zg.geometry=this.geometry,zg.material=this.material,void 0!==zg.material)for(let E=0;E<M;E++){this.getMatrixAt(E,iw),rw.multiplyMatrices(h,iw),zg.matrixWorld=rw,zg.raycast(x,Hg);for(let R=0,V=Hg.length;R<V;R++){const X=Hg[R];X.instanceId=E,X.object=this,c.push(X)}Hg.length=0}},setColorAt:function(x,c){null===this.instanceColor&&(this.instanceColor=new Wr(new Float32Array(3*this.count),3)),c.toArray(this.instanceColor.array,3*x)},setMatrixAt:function(x,c){c.toArray(this.instanceMatrix.array,16*x)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}});class yl extends Yo{constructor(c){super(),this.type="LineBasicMaterial",this.color=new er(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(c)}copy(c){return super.copy(c),this.color.copy(c.color),this.linewidth=c.linewidth,this.linecap=c.linecap,this.linejoin=c.linejoin,this.morphTargets=c.morphTargets,this}}yl.prototype.isLineBasicMaterial=!0;const sw=new Ze,fb=new Ze,ow=new pr,Cv=new na,Zf=new Hs;function Th(x=new wr,c=new yl){Ci.call(this),this.type="Line",this.geometry=x,this.material=c,this.updateMorphTargets()}Th.prototype=Object.assign(Object.create(Ci.prototype),{constructor:Th,isLine:!0,copy:function(x){return Ci.prototype.copy.call(this,x),this.material=x.material,this.geometry=x.geometry,this},computeLineDistances:function(){const x=this.geometry;if(x.isBufferGeometry)if(null===x.index){const c=x.attributes.position,h=[0];for(let M=1,E=c.count;M<E;M++)sw.fromBufferAttribute(c,M-1),fb.fromBufferAttribute(c,M),h[M]=h[M-1],h[M]+=sw.distanceTo(fb);x.setAttribute("lineDistance",new Bn(h,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else x.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this},raycast:function(x,c){const h=this.geometry,M=this.matrixWorld,E=x.params.Line.threshold;if(null===h.boundingSphere&&h.computeBoundingSphere(),Zf.copy(h.boundingSphere),Zf.applyMatrix4(M),Zf.radius+=E,!1===x.ray.intersectsSphere(Zf))return;ow.copy(M).invert(),Cv.copy(x.ray).applyMatrix4(ow);const R=E/((this.scale.x+this.scale.y+this.scale.z)/3),V=R*R,X=new Ze,ee=new Ze,te=new Ze,me=new Ze,de=this.isLineSegments?2:1;if(h.isBufferGeometry){const ge=h.index,Te=h.attributes.position;if(null!==ge){const Oe=ge.array;for(let ze=0,ke=Oe.length-1;ze<ke;ze+=de){const at=Oe[ze+1];if(X.fromBufferAttribute(Te,Oe[ze]),ee.fromBufferAttribute(Te,at),Cv.distanceSqToSegment(X,ee,me,te)>V)continue;me.applyMatrix4(this.matrixWorld);const gt=x.ray.origin.distanceTo(me);gt<x.near||gt>x.far||c.push({distance:gt,point:te.clone().applyMatrix4(this.matrixWorld),index:ze,face:null,faceIndex:null,object:this})}}else for(let Oe=0,ze=Te.count-1;Oe<ze;Oe+=de){if(X.fromBufferAttribute(Te,Oe),ee.fromBufferAttribute(Te,Oe+1),Cv.distanceSqToSegment(X,ee,me,te)>V)continue;me.applyMatrix4(this.matrixWorld);const Ee=x.ray.origin.distanceTo(me);Ee<x.near||Ee>x.far||c.push({distance:Ee,point:te.clone().applyMatrix4(this.matrixWorld),index:Oe,face:null,faceIndex:null,object:this})}}else h.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const x=this.geometry;if(x.isBufferGeometry){const c=x.morphAttributes,h=Object.keys(c);if(h.length>0){const M=c[h[0]];if(void 0!==M){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let E=0,R=M.length;E<R;E++){const V=M[E].name||String(E);this.morphTargetInfluences.push(0),this.morphTargetDictionary[V]=E}}}}else{const c=x.morphTargets;void 0!==c&&c.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const aw=new Ze,xC=new Ze;function Kc(x,c){Th.call(this,x,c),this.type="LineSegments"}Kc.prototype=Object.assign(Object.create(Th.prototype),{constructor:Kc,isLineSegments:!0,computeLineDistances:function(){const x=this.geometry;if(x.isBufferGeometry)if(null===x.index){const c=x.attributes.position,h=[];for(let M=0,E=c.count;M<E;M+=2)aw.fromBufferAttribute(c,M),xC.fromBufferAttribute(c,M+1),h[M]=0===M?0:h[M-1],h[M+1]=h[M]+aw.distanceTo(xC);x.setAttribute("lineDistance",new Bn(h,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else x.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}});class pb extends Th{constructor(c,h){super(c,h),this.type="LineLoop"}}pb.prototype.isLineLoop=!0;class nf extends Yo{constructor(c){super(),this.type="PointsMaterial",this.color=new er(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(c)}copy(c){return super.copy(c),this.color.copy(c.color),this.map=c.map,this.alphaMap=c.alphaMap,this.size=c.size,this.sizeAttenuation=c.sizeAttenuation,this.morphTargets=c.morphTargets,this}}nf.prototype.isPointsMaterial=!0;const lw=new pr,wC=new na,Sv=new Hs,mb=new Ze;function _m(x=new wr,c=new nf){Ci.call(this),this.type="Points",this.geometry=x,this.material=c,this.updateMorphTargets()}function MC(x,c,h,M,E,R,V){const X=wC.distanceSqToPoint(x);if(X<h){const ee=new Ze;wC.closestPointToPoint(x,ee),ee.applyMatrix4(M);const te=E.ray.origin.distanceTo(ee);if(te<E.near||te>E.far)return;R.push({distance:te,distanceToRay:Math.sqrt(X),point:ee,index:c,face:null,object:V})}}_m.prototype=Object.assign(Object.create(Ci.prototype),{constructor:_m,isPoints:!0,copy:function(x){return Ci.prototype.copy.call(this,x),this.material=x.material,this.geometry=x.geometry,this},raycast:function(x,c){const h=this.geometry,M=this.matrixWorld,E=x.params.Points.threshold;if(null===h.boundingSphere&&h.computeBoundingSphere(),Sv.copy(h.boundingSphere),Sv.applyMatrix4(M),Sv.radius+=E,!1===x.ray.intersectsSphere(Sv))return;lw.copy(M).invert(),wC.copy(x.ray).applyMatrix4(lw);const R=E/((this.scale.x+this.scale.y+this.scale.z)/3),V=R*R;if(h.isBufferGeometry){const X=h.index,te=h.attributes.position;if(null!==X){const me=X.array;for(let de=0,ge=me.length;de<ge;de++){const be=me[de];mb.fromBufferAttribute(te,be),MC(mb,be,V,M,x,c,this)}}else for(let me=0,de=te.count;me<de;me++)mb.fromBufferAttribute(te,me),MC(mb,me,V,M,x,c,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const x=this.geometry;if(x.isBufferGeometry){const c=x.morphAttributes,h=Object.keys(c);if(h.length>0){const M=c[h[0]];if(void 0!==M){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let E=0,R=M.length;E<R;E++){const V=M[E].name||String(E);this.morphTargetInfluences.push(0),this.morphTargetDictionary[V]=E}}}}else{const c=x.morphTargets;void 0!==c&&c.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});class CC extends kr{constructor(c,h,M,E,R,V,X,ee,te){super(c,h,M,E,R,V,X,ee,te),this.format=void 0!==X?X:nn,this.minFilter=void 0!==V?V:$i,this.magFilter=void 0!==R?R:$i,this.generateMipmaps=!1;const me=this;"requestVideoFrameCallback"in c&&c.requestVideoFrameCallback(function de(){me.needsUpdate=!0,c.requestVideoFrameCallback(de)})}clone(){return new this.constructor(this.image).copy(this)}update(){const c=this.image;"requestVideoFrameCallback"in c==0&&c.readyState>=c.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}CC.prototype.isVideoTexture=!0;class Bu extends kr{constructor(c,h,M,E,R,V,X,ee,te,me,de,ge){super(null,V,X,ee,te,me,E,R,de,ge),this.image={width:h,height:M},this.mipmaps=c,this.flipY=!1,this.generateMipmaps=!1}}Bu.prototype.isCompressedTexture=!0;class SC extends kr{constructor(c,h,M,E,R,V,X,ee,te){super(c,h,M,E,R,V,X,ee,te),this.needsUpdate=!0}}SC.prototype.isCanvasTexture=!0;class cw extends kr{constructor(c,h,M,E,R,V,X,ee,te,me){if((me=void 0!==me?me:Ri)!==Ri&&me!==Di)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===M&&me===Ri&&(M=Ae),void 0===M&&me===Di&&(M=sn),super(null,E,R,V,X,ee,me,M,te),this.image={width:c,height:h},this.magFilter=void 0!==X?X:vo,this.minFilter=void 0!==ee?ee:vo,this.flipY=!1,this.generateMipmaps=!1}}cw.prototype.isDepthTexture=!0;class gb extends wr{constructor(c=1,h=8,M=0,E=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:c,segments:h,thetaStart:M,thetaLength:E},h=Math.max(3,h);const R=[],V=[],X=[],ee=[],te=new Ze,me=new Un;V.push(0,0,0),X.push(0,0,1),ee.push(.5,.5);for(let de=0,ge=3;de<=h;de++,ge+=3){const be=M+de/h*E;te.x=c*Math.cos(be),te.y=c*Math.sin(be),V.push(te.x,te.y,te.z),X.push(0,0,1),me.x=(V[ge]/c+1)/2,me.y=(V[ge+1]/c+1)/2,ee.push(me.x,me.y)}for(let de=1;de<=h;de++)R.push(de,de+1,0);this.setIndex(R),this.setAttribute("position",new Bn(V,3)),this.setAttribute("normal",new Bn(X,3)),this.setAttribute("uv",new Bn(ee,2))}}class Vg extends wr{constructor(c=1,h=1,M=1,E=8,R=1,V=!1,X=0,ee=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:c,radiusBottom:h,height:M,radialSegments:E,heightSegments:R,openEnded:V,thetaStart:X,thetaLength:ee};const te=this;E=Math.floor(E),R=Math.floor(R);const me=[],de=[],ge=[],be=[];let Te=0;const Oe=[],ze=M/2;let ke=0;function at(rt){const gt=Te,tt=new Un,Rt=new Ze;let rn=0;const Ut=!0===rt?c:h,Zt=!0===rt?1:-1;for(let kn=1;kn<=E;kn++)de.push(0,ze*Zt,0),ge.push(0,Zt,0),be.push(.5,.5),Te++;const dn=Te;for(let kn=0;kn<=E;kn++){const Yt=kn/E*ee+X,un=Math.cos(Yt),In=Math.sin(Yt);Rt.x=Ut*In,Rt.y=ze*Zt,Rt.z=Ut*un,de.push(Rt.x,Rt.y,Rt.z),ge.push(0,Zt,0),tt.x=.5*un+.5,tt.y=.5*In*Zt+.5,be.push(tt.x,tt.y),Te++}for(let kn=0;kn<E;kn++){const vn=gt+kn,Yt=dn+kn;!0===rt?me.push(Yt,Yt+1,vn):me.push(Yt+1,Yt,vn),rn+=3}te.addGroup(ke,rn,!0===rt?1:2),ke+=rn}(function Ee(){const rt=new Ze,gt=new Ze;let tt=0;const Rt=(h-c)/M;for(let rn=0;rn<=R;rn++){const Ut=[],Zt=rn/R,dn=Zt*(h-c)+c;for(let kn=0;kn<=E;kn++){const vn=kn/E,Yt=vn*ee+X,un=Math.sin(Yt),In=Math.cos(Yt);gt.x=dn*un,gt.y=-Zt*M+ze,gt.z=dn*In,de.push(gt.x,gt.y,gt.z),rt.set(un,Rt,In).normalize(),ge.push(rt.x,rt.y,rt.z),be.push(vn,1-Zt),Ut.push(Te++)}Oe.push(Ut)}for(let rn=0;rn<E;rn++)for(let Ut=0;Ut<R;Ut++){const dn=Oe[Ut+1][rn],kn=Oe[Ut+1][rn+1],vn=Oe[Ut][rn+1];me.push(Oe[Ut][rn],dn,vn),me.push(dn,kn,vn),tt+=6}te.addGroup(ke,tt,0),ke+=tt})(),!1===V&&(c>0&&at(!0),h>0&&at(!1)),this.setIndex(me),this.setAttribute("position",new Bn(de,3)),this.setAttribute("normal",new Bn(ge,3)),this.setAttribute("uv",new Bn(be,2))}}class vb extends Vg{constructor(c=1,h=1,M=8,E=1,R=!1,V=0,X=2*Math.PI){super(0,c,h,M,E,R,V,X),this.type="ConeGeometry",this.parameters={radius:c,height:h,radialSegments:M,heightSegments:E,openEnded:R,thetaStart:V,thetaLength:X}}}class Yf extends wr{constructor(c,h,M=1,E=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:c,indices:h,radius:M,detail:E};const R=[],V=[];function ee(Ee,at,rt,gt){const tt=gt+1,Rt=[];for(let rn=0;rn<=tt;rn++){Rt[rn]=[];const Ut=Ee.clone().lerp(rt,rn/tt),Zt=at.clone().lerp(rt,rn/tt),dn=tt-rn;for(let kn=0;kn<=dn;kn++)Rt[rn][kn]=0===kn&&rn===tt?Ut:Ut.clone().lerp(Zt,kn/dn)}for(let rn=0;rn<tt;rn++)for(let Ut=0;Ut<2*(tt-rn)-1;Ut++){const Zt=Math.floor(Ut/2);Ut%2==0?(ge(Rt[rn][Zt+1]),ge(Rt[rn+1][Zt]),ge(Rt[rn][Zt])):(ge(Rt[rn][Zt+1]),ge(Rt[rn+1][Zt+1]),ge(Rt[rn+1][Zt]))}}function ge(Ee){R.push(Ee.x,Ee.y,Ee.z)}function be(Ee,at){const rt=3*Ee;at.x=c[rt+0],at.y=c[rt+1],at.z=c[rt+2]}function Oe(Ee,at,rt,gt){gt<0&&1===Ee.x&&(V[at]=Ee.x-1),0===rt.x&&0===rt.z&&(V[at]=gt/2/Math.PI+.5)}function ze(Ee){return Math.atan2(Ee.z,-Ee.x)}function ke(Ee){return Math.atan2(-Ee.y,Math.sqrt(Ee.x*Ee.x+Ee.z*Ee.z))}(function X(Ee){const at=new Ze,rt=new Ze,gt=new Ze;for(let tt=0;tt<h.length;tt+=3)be(h[tt+0],at),be(h[tt+1],rt),be(h[tt+2],gt),ee(at,rt,gt,Ee)})(E),function te(Ee){const at=new Ze;for(let rt=0;rt<R.length;rt+=3)at.x=R[rt+0],at.y=R[rt+1],at.z=R[rt+2],at.normalize().multiplyScalar(Ee),R[rt+0]=at.x,R[rt+1]=at.y,R[rt+2]=at.z}(M),function me(){const Ee=new Ze;for(let at=0;at<R.length;at+=3){Ee.x=R[at+0],Ee.y=R[at+1],Ee.z=R[at+2];const rt=ze(Ee)/2/Math.PI+.5,gt=ke(Ee)/Math.PI+.5;V.push(rt,1-gt)}(function Te(){const Ee=new Ze,at=new Ze,rt=new Ze,gt=new Ze,tt=new Un,Rt=new Un,rn=new Un;for(let Ut=0,Zt=0;Ut<R.length;Ut+=9,Zt+=6){Ee.set(R[Ut+0],R[Ut+1],R[Ut+2]),at.set(R[Ut+3],R[Ut+4],R[Ut+5]),rt.set(R[Ut+6],R[Ut+7],R[Ut+8]),tt.set(V[Zt+0],V[Zt+1]),Rt.set(V[Zt+2],V[Zt+3]),rn.set(V[Zt+4],V[Zt+5]),gt.copy(Ee).add(at).add(rt).divideScalar(3);const dn=ze(gt);Oe(tt,Zt+0,Ee,dn),Oe(Rt,Zt+2,at,dn),Oe(rn,Zt+4,rt,dn)}})(),function de(){for(let Ee=0;Ee<V.length;Ee+=6){const at=V[Ee+0],rt=V[Ee+2],gt=V[Ee+4],tt=Math.max(at,rt,gt),Rt=Math.min(at,rt,gt);tt>.9&&Rt<.1&&(at<.2&&(V[Ee+0]+=1),rt<.2&&(V[Ee+2]+=1),gt<.2&&(V[Ee+4]+=1))}}()}(),this.setAttribute("position",new Bn(R,3)),this.setAttribute("normal",new Bn(R.slice(),3)),this.setAttribute("uv",new Bn(V,2)),0===E?this.computeVertexNormals():this.normalizeNormals()}}class Ev extends Yf{constructor(c=1,h=0){const M=(1+Math.sqrt(5))/2,E=1/M;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-E,-M,0,-E,M,0,E,-M,0,E,M,-E,-M,0,-E,M,0,E,-M,0,E,M,0,-M,0,-E,M,0,-E,-M,0,E,M,0,E],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],c,h),this.type="DodecahedronGeometry",this.parameters={radius:c,detail:h}}}const yb=new Ze,bb=new Ze,uw=new Ze,xs=new Sa;class Fr extends wr{constructor(c,h){if(super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:h},h=void 0!==h?h:1,!0===c.isGeometry)return void console.error("THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const E=Math.pow(10,4),R=Math.cos(Yi.DEG2RAD*h),V=c.getIndex(),X=c.getAttribute("position"),ee=V?V.count:X.count,te=[0,0,0],me=["a","b","c"],de=new Array(3),ge={},be=[];for(let Te=0;Te<ee;Te+=3){V?(te[0]=V.getX(Te),te[1]=V.getX(Te+1),te[2]=V.getX(Te+2)):(te[0]=Te,te[1]=Te+1,te[2]=Te+2);const{a:Oe,b:ze,c:ke}=xs;if(Oe.fromBufferAttribute(X,te[0]),ze.fromBufferAttribute(X,te[1]),ke.fromBufferAttribute(X,te[2]),xs.getNormal(uw),de[0]=`${Math.round(Oe.x*E)},${Math.round(Oe.y*E)},${Math.round(Oe.z*E)}`,de[1]=`${Math.round(ze.x*E)},${Math.round(ze.y*E)},${Math.round(ze.z*E)}`,de[2]=`${Math.round(ke.x*E)},${Math.round(ke.y*E)},${Math.round(ke.z*E)}`,de[0]!==de[1]&&de[1]!==de[2]&&de[2]!==de[0])for(let Ee=0;Ee<3;Ee++){const at=(Ee+1)%3,rt=de[Ee],gt=de[at],tt=xs[me[Ee]],Rt=xs[me[at]],rn=`${rt}_${gt}`,Ut=`${gt}_${rt}`;Ut in ge&&ge[Ut]?(uw.dot(ge[Ut].normal)<=R&&(be.push(tt.x,tt.y,tt.z),be.push(Rt.x,Rt.y,Rt.z)),ge[Ut]=null):rn in ge||(ge[rn]={index0:te[Ee],index1:te[at],normal:uw.clone()})}}for(const Te in ge)if(ge[Te]){const{index0:Oe,index1:ze}=ge[Te];yb.fromBufferAttribute(X,Oe),bb.fromBufferAttribute(X,ze),be.push(yb.x,yb.y,yb.z),be.push(bb.x,bb.y,bb.z)}this.setAttribute("position",new Bn(be,3))}}function hw(x,c,h,M,E){let R,V;if(E===function yw(x,c,h,M){let E=0;for(let R=c,V=h-M;R<h;R+=M)E+=(x[V]-x[R])*(x[R+1]+x[V+1]),V=R;return E}(x,c,h,M)>0)for(R=c;R<h;R+=M)V=_w(R,x[R],x[R+1],V);else for(R=h-M;R>=c;R-=M)V=_w(R,x[R],x[R+1],V);return V&&wb(V,V.next)&&(Gg(V),V=V.next),V}function Dh(x,c){if(!x)return x;c||(c=x);let M,h=x;do{if(M=!1,h.steiner||!wb(h,h.next)&&0!==ul(h.prev,h,h.next))h=h.next;else{if(Gg(h),h=c=h.prev,h===h.next)break;M=!0}}while(M||h!==c);return c}function Qc(x,c,h,M,E,R,V){if(!x)return;!V&&R&&function XL(x,c,h,M){let E=x;do{null===E.z&&(E.z=Ug(E.x,E.y,c,h,M)),E.prevZ=E.prev,E.nextZ=E.next,E=E.next}while(E!==x);E.prevZ.nextZ=null,E.prevZ=null,function xb(x){let c,h,M,E,R,V,X,ee,te=1;do{for(h=x,x=null,R=null,V=0;h;){for(V++,M=h,X=0,c=0;c<te&&(X++,M=M.nextZ,M);c++);for(ee=te;X>0||ee>0&&M;)0!==X&&(0===ee||!M||h.z<=M.z)?(E=h,h=h.nextZ,X--):(E=M,M=M.nextZ,ee--),R?R.nextZ=E:x=E,E.prevZ=R,R=E;h=M}R.nextZ=null,te*=2}while(V>1)}(E)}(x,M,E,R);let ee,te,X=x;for(;x.prev!==x.next;)if(ee=x.prev,te=x.next,R?BA(x,M,E,R):TC(x))c.push(ee.i/h),c.push(x.i/h),c.push(te.i/h),Gg(x),x=te.next,X=te.next;else if((x=te)===X){V?1===V?Qc(x=dw(Dh(x),c,h),c,h,M,E,R,2):2===V&&rf(x,c,h,M,E,R):Qc(Dh(x),c,h,M,E,R,1);break}}function TC(x){const c=x.prev,h=x,M=x.next;if(ul(c,h,M)>=0)return!1;let E=x.next.next;for(;E!==x.prev;){if(Xf(c.x,c.y,h.x,h.y,M.x,M.y,E.x,E.y)&&ul(E.prev,E,E.next)>=0)return!1;E=E.next}return!0}function BA(x,c,h,M){const E=x.prev,R=x,V=x.next;if(ul(E,R,V)>=0)return!1;const te=E.x>R.x?E.x>V.x?E.x:V.x:R.x>V.x?R.x:V.x,me=E.y>R.y?E.y>V.y?E.y:V.y:R.y>V.y?R.y:V.y,de=Ug(E.x<R.x?E.x<V.x?E.x:V.x:R.x<V.x?R.x:V.x,E.y<R.y?E.y<V.y?E.y:V.y:R.y<V.y?R.y:V.y,c,h,M),ge=Ug(te,me,c,h,M);let be=x.prevZ,Te=x.nextZ;for(;be&&be.z>=de&&Te&&Te.z<=ge;){if(be!==x.prev&&be!==x.next&&Xf(E.x,E.y,R.x,R.y,V.x,V.y,be.x,be.y)&&ul(be.prev,be,be.next)>=0||(be=be.prevZ,Te!==x.prev&&Te!==x.next&&Xf(E.x,E.y,R.x,R.y,V.x,V.y,Te.x,Te.y)&&ul(Te.prev,Te,Te.next)>=0))return!1;Te=Te.nextZ}for(;be&&be.z>=de;){if(be!==x.prev&&be!==x.next&&Xf(E.x,E.y,R.x,R.y,V.x,V.y,be.x,be.y)&&ul(be.prev,be,be.next)>=0)return!1;be=be.prevZ}for(;Te&&Te.z<=ge;){if(Te!==x.prev&&Te!==x.next&&Xf(E.x,E.y,R.x,R.y,V.x,V.y,Te.x,Te.y)&&ul(Te.prev,Te,Te.next)>=0)return!1;Te=Te.nextZ}return!0}function dw(x,c,h){let M=x;do{const E=M.prev,R=M.next.next;!wb(E,R)&&IC(E,M,M.next,R)&&Sb(E,R)&&Sb(R,E)&&(c.push(E.i/h),c.push(M.i/h),c.push(R.i/h),Gg(M),Gg(M.next),M=x=R),M=M.next}while(M!==x);return Dh(M)}function rf(x,c,h,M,E,R){let V=x;do{let X=V.next.next;for(;X!==V.prev;){if(V.i!==X.i&&gw(V,X)){let ee=zA(V,X);return V=Dh(V,V.next),ee=Dh(ee,ee.next),Qc(V,c,h,M,E,R),void Qc(ee,c,h,M,E,R)}X=X.next}V=V.next}while(V!==x)}function DC(x,c){return x.x-c.x}function pw(x,c){if(c=function YL(x,c){let h=c;const M=x.x,E=x.y;let V,R=-1/0;do{if(E<=h.y&&E>=h.next.y&&h.next.y!==h.y){const ge=h.x+(E-h.y)*(h.next.x-h.x)/(h.next.y-h.y);if(ge<=M&&ge>R){if(R=ge,ge===M){if(E===h.y)return h;if(E===h.next.y)return h.next}V=h.x<h.next.x?h:h.next}}h=h.next}while(h!==c);if(!V)return null;if(M===R)return V;const X=V,ee=V.x,te=V.y;let de,me=1/0;h=V;do{M>=h.x&&h.x>=ee&&M!==h.x&&Xf(E<te?M:R,E,ee,te,E<te?R:M,E,h.x,h.y)&&(de=Math.abs(E-h.y)/(M-h.x),Sb(h,x)&&(de<me||de===me&&(h.x>V.x||h.x===V.x&&AC(V,h)))&&(V=h,me=de)),h=h.next}while(h!==X);return V}(x,c),c){const h=zA(c,x);Dh(c,c.next),Dh(h,h.next)}}function AC(x,c){return ul(x.prev,x,c.prev)<0&&ul(c.next,x,x.next)<0}function Ug(x,c,h,M,E){return(x=1431655765&((x=858993459&((x=252645135&((x=16711935&((x=32767*(x-h)*E)|x<<8))|x<<4))|x<<2))|x<<1))|(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=32767*(c-M)*E)|c<<8))|c<<4))|c<<2))|c<<1))<<1}function mw(x){let c=x,h=x;do{(c.x<h.x||c.x===h.x&&c.y<h.y)&&(h=c),c=c.next}while(c!==x);return h}function Xf(x,c,h,M,E,R,V,X){return(E-V)*(c-X)-(x-V)*(R-X)>=0&&(x-V)*(M-X)-(h-V)*(c-X)>=0&&(h-V)*(R-X)-(E-V)*(M-X)>=0}function gw(x,c){return x.next.i!==c.i&&x.prev.i!==c.i&&!function RC(x,c){let h=x;do{if(h.i!==x.i&&h.next.i!==x.i&&h.i!==c.i&&h.next.i!==c.i&&IC(h,h.next,x,c))return!0;h=h.next}while(h!==x);return!1}(x,c)&&(Sb(x,c)&&Sb(c,x)&&function HA(x,c){let h=x,M=!1;const E=(x.x+c.x)/2,R=(x.y+c.y)/2;do{h.y>R!=h.next.y>R&&h.next.y!==h.y&&E<(h.next.x-h.x)*(R-h.y)/(h.next.y-h.y)+h.x&&(M=!M),h=h.next}while(h!==x);return M}(x,c)&&(ul(x.prev,x,c.prev)||ul(x,c.prev,c))||wb(x,c)&&ul(x.prev,x,x.next)>0&&ul(c.prev,c,c.next)>0)}function ul(x,c,h){return(c.y-x.y)*(h.x-c.x)-(c.x-x.x)*(h.y-c.y)}function wb(x,c){return x.x===c.x&&x.y===c.y}function IC(x,c,h,M){const E=Cb(ul(x,c,h)),R=Cb(ul(x,c,M)),V=Cb(ul(h,M,x)),X=Cb(ul(h,M,c));return!!(E!==R&&V!==X||0===E&&Mb(x,h,c)||0===R&&Mb(x,M,c)||0===V&&Mb(h,x,M)||0===X&&Mb(h,c,M))}function Mb(x,c,h){return c.x<=Math.max(x.x,h.x)&&c.x>=Math.min(x.x,h.x)&&c.y<=Math.max(x.y,h.y)&&c.y>=Math.min(x.y,h.y)}function Cb(x){return x>0?1:x<0?-1:0}function Sb(x,c){return ul(x.prev,x,x.next)<0?ul(x,c,x.next)>=0&&ul(x,x.prev,c)>=0:ul(x,c,x.prev)<0||ul(x,x.next,c)<0}function zA(x,c){const h=new vw(x.i,x.x,x.y),M=new vw(c.i,c.x,c.y),E=x.next,R=c.prev;return x.next=c,c.prev=x,h.next=E,E.prev=h,M.next=h,h.prev=M,R.next=M,M.prev=R,M}function _w(x,c,h,M){const E=new vw(x,c,h);return M?(E.next=M.next,E.prev=M,M.next.prev=E,M.next=E):(E.prev=E,E.next=E),E}function Gg(x){x.next.prev=x.prev,x.prev.next=x.next,x.prevZ&&(x.prevZ.nextZ=x.nextZ),x.nextZ&&(x.nextZ.prevZ=x.prevZ)}function vw(x,c,h){this.i=x,this.x=c,this.y=h,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}const Jf={area:function(x){const c=x.length;let h=0;for(let M=c-1,E=0;E<c;M=E++)h+=x[M].x*x[E].y-x[E].x*x[M].y;return.5*h},isClockWise:function(x){return Jf.area(x)<0},triangulateShape:function(x,c){const h=[],M=[],E=[];VA(x),UA(h,x);let R=x.length;c.forEach(VA);for(let X=0;X<c.length;X++)M.push(R),R+=c[X].length,UA(h,c[X]);const V=function(x,c,h){h=h||2;const M=c&&c.length,E=M?c[0]*h:x.length;let R=hw(x,0,E,h,!0);const V=[];if(!R||R.next===R.prev)return V;let X,ee,te,me,de,ge,be;if(M&&(R=function fw(x,c,h,M){const E=[];let R,V,X,ee,te;for(R=0,V=c.length;R<V;R++)X=c[R]*M,ee=R<V-1?c[R+1]*M:x.length,te=hw(x,X,ee,M,!1),te===te.next&&(te.steiner=!0),E.push(mw(te));for(E.sort(DC),R=0;R<E.length;R++)pw(E[R],h),h=Dh(h,h.next);return h}(x,c,R,h)),x.length>80*h){X=te=x[0],ee=me=x[1];for(let Te=h;Te<E;Te+=h)de=x[Te],ge=x[Te+1],de<X&&(X=de),ge<ee&&(ee=ge),de>te&&(te=de),ge>me&&(me=ge);be=Math.max(te-X,me-ee),be=0!==be?1/be:0}return Qc(R,V,h,X,ee,be),V}(h,M);for(let X=0;X<V.length;X+=3)E.push(V.slice(X,X+3));return E}};function VA(x){const c=x.length;c>2&&x[c-1].equals(x[0])&&x.pop()}function UA(x,c){for(let h=0;h<c.length;h++)x.push(c[h].x),x.push(c[h].y)}class Kf extends wr{constructor(c,h){super(),this.type="ExtrudeGeometry",this.parameters={shapes:c,options:h},c=Array.isArray(c)?c:[c];const M=this,E=[],R=[];for(let X=0,ee=c.length;X<ee;X++)V(c[X]);function V(X){const ee=[],te=void 0!==h.curveSegments?h.curveSegments:12,me=void 0!==h.steps?h.steps:1;let de=void 0!==h.depth?h.depth:100,ge=void 0===h.bevelEnabled||h.bevelEnabled,be=void 0!==h.bevelThickness?h.bevelThickness:6,Te=void 0!==h.bevelSize?h.bevelSize:be-2,Oe=void 0!==h.bevelOffset?h.bevelOffset:0,ze=void 0!==h.bevelSegments?h.bevelSegments:3;const ke=h.extrudePath,Ee=void 0!==h.UVGenerator?h.UVGenerator:JL;void 0!==h.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),de=h.amount);let at,gt,tt,Rt,rn,rt=!1;ke&&(at=ke.getSpacedPoints(me),rt=!0,ge=!1,gt=ke.computeFrenetFrames(me,!1),tt=new Ze,Rt=new Ze,rn=new Ze),ge||(ze=0,be=0,Te=0,Oe=0);const Ut=X.extractPoints(te);let Zt=Ut.shape;const dn=Ut.holes;if(!Jf.isClockWise(Zt)){Zt=Zt.reverse();for(let bi=0,ri=dn.length;bi<ri;bi++){const Li=dn[bi];Jf.isClockWise(Li)&&(dn[bi]=Li.reverse())}}const vn=Jf.triangulateShape(Zt,dn),Yt=Zt;for(let bi=0,ri=dn.length;bi<ri;bi++)Zt=Zt.concat(dn[bi]);function un(bi,ri,Li){return ri||console.error("THREE.ExtrudeGeometry: vec does not exist"),ri.clone().multiplyScalar(Li).add(bi)}const In=Zt.length,xi=vn.length;function Xi(bi,ri,Li){let Or,mr,Ct;const vt=bi.x-ri.x,ai=bi.y-ri.y,vi=Li.x-bi.x,Xt=Li.y-bi.y,Ei=vt*vt+ai*ai;if(Math.abs(vt*Xt-ai*vi)>Number.EPSILON){const yr=Math.sqrt(Ei),Si=Math.sqrt(vi*vi+Xt*Xt),es=ri.x-ai/yr,ns=ri.y+vt/yr,Qr=((Li.x-Xt/Si-es)*Xt-(Li.y+vi/Si-ns)*vi)/(vt*Xt-ai*vi);Or=es+vt*Qr-bi.x,mr=ns+ai*Qr-bi.y;const nl=Or*Or+mr*mr;if(nl<=2)return new Un(Or,mr);Ct=Math.sqrt(nl/2)}else{let yr=!1;vt>Number.EPSILON?vi>Number.EPSILON&&(yr=!0):vt<-Number.EPSILON?vi<-Number.EPSILON&&(yr=!0):Math.sign(ai)===Math.sign(Xt)&&(yr=!0),yr?(Or=-ai,mr=vt,Ct=Math.sqrt(Ei)):(Or=vt,mr=ai,Ct=Math.sqrt(Ei/2))}return new Un(Or/Ct,mr/Ct)}const ir=[];for(let bi=0,ri=Yt.length,Li=ri-1,Or=bi+1;bi<ri;bi++,Li++,Or++)Li===ri&&(Li=0),Or===ri&&(Or=0),ir[bi]=Xi(Yt[bi],Yt[Li],Yt[Or]);const Ir=[];let Mr,ro=ir.concat();for(let bi=0,ri=dn.length;bi<ri;bi++){const Li=dn[bi];Mr=[];for(let Or=0,mr=Li.length,Ct=mr-1,vt=Or+1;Or<mr;Or++,Ct++,vt++)Ct===mr&&(Ct=0),vt===mr&&(vt=0),Mr[Or]=Xi(Li[Or],Li[Ct],Li[vt]);Ir.push(Mr),ro=ro.concat(Mr)}for(let bi=0;bi<ze;bi++){const ri=bi/ze,Li=be*Math.cos(ri*Math.PI/2),Or=Te*Math.sin(ri*Math.PI/2)+Oe;for(let mr=0,Ct=Yt.length;mr<Ct;mr++){const vt=un(Yt[mr],ir[mr],Or);Ia(vt.x,vt.y,-Li)}for(let mr=0,Ct=dn.length;mr<Ct;mr++){const vt=dn[mr];Mr=Ir[mr];for(let ai=0,vi=vt.length;ai<vi;ai++){const Xt=un(vt[ai],Mr[ai],Or);Ia(Xt.x,Xt.y,-Li)}}}const ws=Te+Oe;for(let bi=0;bi<In;bi++){const ri=ge?un(Zt[bi],ro[bi],ws):Zt[bi];rt?(Rt.copy(gt.normals[0]).multiplyScalar(ri.x),tt.copy(gt.binormals[0]).multiplyScalar(ri.y),rn.copy(at[0]).add(Rt).add(tt),Ia(rn.x,rn.y,rn.z)):Ia(ri.x,ri.y,0)}for(let bi=1;bi<=me;bi++)for(let ri=0;ri<In;ri++){const Li=ge?un(Zt[ri],ro[ri],ws):Zt[ri];rt?(Rt.copy(gt.normals[bi]).multiplyScalar(Li.x),tt.copy(gt.binormals[bi]).multiplyScalar(Li.y),rn.copy(at[bi]).add(Rt).add(tt),Ia(rn.x,rn.y,rn.z)):Ia(Li.x,Li.y,de/me*bi)}for(let bi=ze-1;bi>=0;bi--){const ri=bi/ze,Li=be*Math.cos(ri*Math.PI/2),Or=Te*Math.sin(ri*Math.PI/2)+Oe;for(let mr=0,Ct=Yt.length;mr<Ct;mr++){const vt=un(Yt[mr],ir[mr],Or);Ia(vt.x,vt.y,de+Li)}for(let mr=0,Ct=dn.length;mr<Ct;mr++){const vt=dn[mr];Mr=Ir[mr];for(let ai=0,vi=vt.length;ai<vi;ai++){const Xt=un(vt[ai],Mr[ai],Or);rt?Ia(Xt.x,Xt.y+at[me-1].y,at[me-1].x+Li):Ia(Xt.x,Xt.y,de+Li)}}}function ti(bi,ri){let Li=bi.length;for(;--Li>=0;){const Or=Li;let mr=Li-1;mr<0&&(mr=bi.length-1);for(let Ct=0,vt=me+2*ze;Ct<vt;Ct++){const ai=In*Ct,vi=In*(Ct+1);So(ri+Or+ai,ri+mr+ai,ri+mr+vi,ri+Or+vi)}}}function Ia(bi,ri,Li){ee.push(bi),ee.push(ri),ee.push(Li)}function bo(bi,ri,Li){ds(bi),ds(ri),ds(Li);const Or=E.length/3,mr=Ee.generateTopUV(M,E,Or-3,Or-2,Or-1);zo(mr[0]),zo(mr[1]),zo(mr[2])}function So(bi,ri,Li,Or){ds(bi),ds(ri),ds(Or),ds(ri),ds(Li),ds(Or);const mr=E.length/3,Ct=Ee.generateSideWallUV(M,E,mr-6,mr-3,mr-2,mr-1);zo(Ct[0]),zo(Ct[1]),zo(Ct[3]),zo(Ct[1]),zo(Ct[2]),zo(Ct[3])}function ds(bi){E.push(ee[3*bi+0]),E.push(ee[3*bi+1]),E.push(ee[3*bi+2])}function zo(bi){R.push(bi.x),R.push(bi.y)}(function Ho(){const bi=E.length/3;if(ge){let ri=0,Li=In*ri;for(let Or=0;Or<xi;Or++){const mr=vn[Or];bo(mr[2]+Li,mr[1]+Li,mr[0]+Li)}ri=me+2*ze,Li=In*ri;for(let Or=0;Or<xi;Or++){const mr=vn[Or];bo(mr[0]+Li,mr[1]+Li,mr[2]+Li)}}else{for(let ri=0;ri<xi;ri++){const Li=vn[ri];bo(Li[2],Li[1],Li[0])}for(let ri=0;ri<xi;ri++){const Li=vn[ri];bo(Li[0]+In*me,Li[1]+In*me,Li[2]+In*me)}}M.addGroup(bi,E.length/3-bi,0)})(),function Po(){const bi=E.length/3;let ri=0;ti(Yt,ri),ri+=Yt.length;for(let Li=0,Or=dn.length;Li<Or;Li++){const mr=dn[Li];ti(mr,ri),ri+=mr.length}M.addGroup(bi,E.length/3-bi,1)}()}this.setAttribute("position",new Bn(E,3)),this.setAttribute("uv",new Bn(R,2)),this.computeVertexNormals()}toJSON(){const c=wr.prototype.toJSON.call(this);return function KL(x,c,h){if(h.shapes=[],Array.isArray(x))for(let M=0,E=x.length;M<E;M++)h.shapes.push(x[M].uuid);else h.shapes.push(x.uuid);return void 0!==c.extrudePath&&(h.options.extrudePath=c.extrudePath.toJSON()),h}(this.parameters.shapes,this.parameters.options,c)}}const JL={generateTopUV:function(x,c,h,M,E){const X=c[3*M],ee=c[3*M+1],te=c[3*E],me=c[3*E+1];return[new Un(c[3*h],c[3*h+1]),new Un(X,ee),new Un(te,me)]},generateSideWallUV:function(x,c,h,M,E,R){const V=c[3*h],X=c[3*h+1],ee=c[3*h+2],te=c[3*M],me=c[3*M+1],de=c[3*M+2],ge=c[3*E],be=c[3*E+1],Te=c[3*E+2],Oe=c[3*R],ze=c[3*R+1],ke=c[3*R+2];return Math.abs(X-me)<.01?[new Un(V,1-ee),new Un(te,1-de),new Un(ge,1-Te),new Un(Oe,1-ke)]:[new Un(X,1-ee),new Un(me,1-de),new Un(be,1-Te),new Un(ze,1-ke)]}};class bw extends Yf{constructor(c=1,h=0){const M=(1+Math.sqrt(5))/2;super([-1,M,0,1,M,0,-1,-M,0,1,-M,0,0,-1,M,0,1,M,0,-1,-M,0,1,-M,M,0,-1,M,0,1,-M,0,-1,-M,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],c,h),this.type="IcosahedronGeometry",this.parameters={radius:c,detail:h}}}class xw extends wr{constructor(c,h=12,M=0,E=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:c,segments:h,phiStart:M,phiLength:E},h=Math.floor(h),E=Yi.clamp(E,0,2*Math.PI);const R=[],V=[],X=[],ee=1/h,te=new Ze,me=new Un;for(let de=0;de<=h;de++){const ge=M+de*ee*E,be=Math.sin(ge),Te=Math.cos(ge);for(let Oe=0;Oe<=c.length-1;Oe++)te.x=c[Oe].x*be,te.y=c[Oe].y,te.z=c[Oe].x*Te,V.push(te.x,te.y,te.z),me.x=de/h,me.y=Oe/(c.length-1),X.push(me.x,me.y)}for(let de=0;de<h;de++)for(let ge=0;ge<c.length-1;ge++){const be=ge+de*c.length,Oe=be+c.length,ze=be+c.length+1,ke=be+1;R.push(be,Oe,ke),R.push(Oe,ze,ke)}if(this.setIndex(R),this.setAttribute("position",new Bn(V,3)),this.setAttribute("uv",new Bn(X,2)),this.computeVertexNormals(),E===2*Math.PI){const de=this.attributes.normal.array,ge=new Ze,be=new Ze,Te=new Ze,Oe=h*c.length*3;for(let ze=0,ke=0;ze<c.length;ze++,ke+=3)ge.x=de[ke+0],ge.y=de[ke+1],ge.z=de[ke+2],be.x=de[Oe+ke+0],be.y=de[Oe+ke+1],be.z=de[Oe+ke+2],Te.addVectors(ge,be).normalize(),de[ke+0]=de[Oe+ke+0]=Te.x,de[ke+1]=de[Oe+ke+1]=Te.y,de[ke+2]=de[Oe+ke+2]=Te.z}}}class Eb extends Yf{constructor(c=1,h=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],c,h),this.type="OctahedronGeometry",this.parameters={radius:c,detail:h}}}function Wg(x,c,h){wr.call(this),this.type="ParametricGeometry",this.parameters={func:x,slices:c,stacks:h};const M=[],E=[],R=[],V=[],X=1e-5,ee=new Ze,te=new Ze,me=new Ze,de=new Ze,ge=new Ze;x.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const be=c+1;for(let Te=0;Te<=h;Te++){const Oe=Te/h;for(let ze=0;ze<=c;ze++){const ke=ze/c;x(ke,Oe,te),E.push(te.x,te.y,te.z),ke-X>=0?(x(ke-X,Oe,me),de.subVectors(te,me)):(x(ke+X,Oe,me),de.subVectors(me,te)),Oe-X>=0?(x(ke,Oe-X,me),ge.subVectors(te,me)):(x(ke,Oe+X,me),ge.subVectors(me,te)),ee.crossVectors(de,ge).normalize(),R.push(ee.x,ee.y,ee.z),V.push(ke,Oe)}}for(let Te=0;Te<h;Te++)for(let Oe=0;Oe<c;Oe++){const ke=Te*be+Oe+1,Ee=(Te+1)*be+Oe+1,at=(Te+1)*be+Oe;M.push(Te*be+Oe,ke,at),M.push(ke,Ee,at)}this.setIndex(M),this.setAttribute("position",new Bn(E,3)),this.setAttribute("normal",new Bn(R,3)),this.setAttribute("uv",new Bn(V,2))}(Wg.prototype=Object.create(wr.prototype)).constructor=Wg;class Ah extends wr{constructor(c=.5,h=1,M=8,E=1,R=0,V=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:c,outerRadius:h,thetaSegments:M,phiSegments:E,thetaStart:R,thetaLength:V},M=Math.max(3,M);const X=[],ee=[],te=[],me=[];let de=c;const ge=(h-c)/(E=Math.max(1,E)),be=new Ze,Te=new Un;for(let Oe=0;Oe<=E;Oe++){for(let ze=0;ze<=M;ze++){const ke=R+ze/M*V;be.x=de*Math.cos(ke),be.y=de*Math.sin(ke),ee.push(be.x,be.y,be.z),te.push(0,0,1),Te.x=(be.x/h+1)/2,Te.y=(be.y/h+1)/2,me.push(Te.x,Te.y)}de+=ge}for(let Oe=0;Oe<E;Oe++){const ze=Oe*(M+1);for(let ke=0;ke<M;ke++){const Ee=ke+ze,rt=Ee+M+1,gt=Ee+M+2,tt=Ee+1;X.push(Ee,rt,tt),X.push(rt,gt,tt)}}this.setIndex(X),this.setAttribute("position",new Bn(ee,3)),this.setAttribute("normal",new Bn(te,3)),this.setAttribute("uv",new Bn(me,2))}}class vm extends wr{constructor(c,h=12){super(),this.type="ShapeGeometry",this.parameters={shapes:c,curveSegments:h};const M=[],E=[],R=[],V=[];let X=0,ee=0;if(!1===Array.isArray(c))te(c);else for(let me=0;me<c.length;me++)te(c[me]),this.addGroup(X,ee,me),X+=ee,ee=0;function te(me){const de=E.length/3,ge=me.extractPoints(h);let be=ge.shape;const Te=ge.holes;!1===Jf.isClockWise(be)&&(be=be.reverse());for(let ze=0,ke=Te.length;ze<ke;ze++){const Ee=Te[ze];!0===Jf.isClockWise(Ee)&&(Te[ze]=Ee.reverse())}const Oe=Jf.triangulateShape(be,Te);for(let ze=0,ke=Te.length;ze<ke;ze++)be=be.concat(Te[ze]);for(let ze=0,ke=be.length;ze<ke;ze++){const Ee=be[ze];E.push(Ee.x,Ee.y,0),R.push(0,0,1),V.push(Ee.x,Ee.y)}for(let ze=0,ke=Oe.length;ze<ke;ze++){const Ee=Oe[ze];M.push(Ee[0]+de,Ee[1]+de,Ee[2]+de),ee+=3}}this.setIndex(M),this.setAttribute("position",new Bn(E,3)),this.setAttribute("normal",new Bn(R,3)),this.setAttribute("uv",new Bn(V,2))}toJSON(){const c=wr.prototype.toJSON.call(this);return function GA(x,c){if(c.shapes=[],Array.isArray(x))for(let h=0,M=x.length;h<M;h++)c.shapes.push(x[h].uuid);else c.shapes.push(x.uuid);return c}(this.parameters.shapes,c)}}class qg extends wr{constructor(c=1,h=8,M=6,E=0,R=2*Math.PI,V=0,X=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:c,widthSegments:h,heightSegments:M,phiStart:E,phiLength:R,thetaStart:V,thetaLength:X},h=Math.max(3,Math.floor(h)),M=Math.max(2,Math.floor(M));const ee=Math.min(V+X,Math.PI);let te=0;const me=[],de=new Ze,ge=new Ze,be=[],Te=[],Oe=[],ze=[];for(let ke=0;ke<=M;ke++){const Ee=[],at=ke/M;let rt=0;0==ke&&0==V?rt=.5/h:ke==M&&ee==Math.PI&&(rt=-.5/h);for(let gt=0;gt<=h;gt++){const tt=gt/h;de.x=-c*Math.cos(E+tt*R)*Math.sin(V+at*X),de.y=c*Math.cos(V+at*X),de.z=c*Math.sin(E+tt*R)*Math.sin(V+at*X),Te.push(de.x,de.y,de.z),ge.copy(de).normalize(),Oe.push(ge.x,ge.y,ge.z),ze.push(tt+rt,1-at),Ee.push(te++)}me.push(Ee)}for(let ke=0;ke<M;ke++)for(let Ee=0;Ee<h;Ee++){const at=me[ke][Ee+1],rt=me[ke][Ee],gt=me[ke+1][Ee],tt=me[ke+1][Ee+1];(0!==ke||V>0)&&be.push(at,rt,tt),(ke!==M-1||ee<Math.PI)&&be.push(rt,gt,tt)}this.setIndex(be),this.setAttribute("position",new Bn(Te,3)),this.setAttribute("normal",new Bn(Oe,3)),this.setAttribute("uv",new Bn(ze,2))}}class jg extends Yf{constructor(c=1,h=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],c,h),this.type="TetrahedronGeometry",this.parameters={radius:c,detail:h}}}class Tv extends Kf{constructor(c,h={}){const M=h.font;if(!M||!M.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new wr;const E=M.generateShapes(c,h.size);h.depth=void 0!==h.height?h.height:50,void 0===h.bevelThickness&&(h.bevelThickness=10),void 0===h.bevelSize&&(h.bevelSize=8),void 0===h.bevelEnabled&&(h.bevelEnabled=!1),super(E,h),this.type="TextGeometry"}}class Zg extends wr{constructor(c=1,h=.4,M=8,E=6,R=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:c,tube:h,radialSegments:M,tubularSegments:E,arc:R},M=Math.floor(M),E=Math.floor(E);const V=[],X=[],ee=[],te=[],me=new Ze,de=new Ze,ge=new Ze;for(let be=0;be<=M;be++)for(let Te=0;Te<=E;Te++){const Oe=Te/E*R,ze=be/M*Math.PI*2;de.x=(c+h*Math.cos(ze))*Math.cos(Oe),de.y=(c+h*Math.cos(ze))*Math.sin(Oe),de.z=h*Math.sin(ze),X.push(de.x,de.y,de.z),me.x=c*Math.cos(Oe),me.y=c*Math.sin(Oe),ge.subVectors(de,me).normalize(),ee.push(ge.x,ge.y,ge.z),te.push(Te/E),te.push(be/M)}for(let be=1;be<=M;be++)for(let Te=1;Te<=E;Te++){const ze=(E+1)*(be-1)+Te-1,ke=(E+1)*(be-1)+Te,Ee=(E+1)*be+Te;V.push((E+1)*be+Te-1,ze,Ee),V.push(ze,ke,Ee)}this.setIndex(V),this.setAttribute("position",new Bn(X,3)),this.setAttribute("normal",new Bn(ee,3)),this.setAttribute("uv",new Bn(te,2))}}class Tb extends wr{constructor(c=1,h=.4,M=64,E=8,R=2,V=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:c,tube:h,tubularSegments:M,radialSegments:E,p:R,q:V},M=Math.floor(M),E=Math.floor(E);const X=[],ee=[],te=[],me=[],de=new Ze,ge=new Ze,be=new Ze,Te=new Ze,Oe=new Ze,ze=new Ze,ke=new Ze;for(let at=0;at<=M;++at){const rt=at/M*R*Math.PI*2;Ee(rt,R,V,c,be),Ee(rt+.01,R,V,c,Te),ze.subVectors(Te,be),ke.addVectors(Te,be),Oe.crossVectors(ze,ke),ke.crossVectors(Oe,ze),Oe.normalize(),ke.normalize();for(let gt=0;gt<=E;++gt){const tt=gt/E*Math.PI*2,Rt=-h*Math.cos(tt),rn=h*Math.sin(tt);de.x=be.x+(Rt*ke.x+rn*Oe.x),de.y=be.y+(Rt*ke.y+rn*Oe.y),de.z=be.z+(Rt*ke.z+rn*Oe.z),ee.push(de.x,de.y,de.z),ge.subVectors(de,be).normalize(),te.push(ge.x,ge.y,ge.z),me.push(at/M),me.push(gt/E)}}for(let at=1;at<=M;at++)for(let rt=1;rt<=E;rt++){const tt=(E+1)*at+(rt-1),Rt=(E+1)*at+rt,rn=(E+1)*(at-1)+rt;X.push((E+1)*(at-1)+(rt-1),tt,rn),X.push(tt,Rt,rn)}function Ee(at,rt,gt,tt,Rt){const rn=Math.cos(at),Ut=Math.sin(at),Zt=gt/rt*at,dn=Math.cos(Zt);Rt.x=tt*(2+dn)*.5*rn,Rt.y=tt*(2+dn)*Ut*.5,Rt.z=tt*Math.sin(Zt)*.5}this.setIndex(X),this.setAttribute("position",new Bn(ee,3)),this.setAttribute("normal",new Bn(te,3)),this.setAttribute("uv",new Bn(me,2))}}class Ih extends wr{constructor(c,h=64,M=1,E=8,R=!1){super(),this.type="TubeGeometry",this.parameters={path:c,tubularSegments:h,radius:M,radialSegments:E,closed:R};const V=c.computeFrenetFrames(h,R);this.tangents=V.tangents,this.normals=V.normals,this.binormals=V.binormals;const X=new Ze,ee=new Ze,te=new Un;let me=new Ze;const de=[],ge=[],be=[],Te=[];function ze(at){me=c.getPointAt(at/h,me);const rt=V.normals[at],gt=V.binormals[at];for(let tt=0;tt<=E;tt++){const Rt=tt/E*Math.PI*2,rn=Math.sin(Rt),Ut=-Math.cos(Rt);ee.x=Ut*rt.x+rn*gt.x,ee.y=Ut*rt.y+rn*gt.y,ee.z=Ut*rt.z+rn*gt.z,ee.normalize(),ge.push(ee.x,ee.y,ee.z),X.x=me.x+M*ee.x,X.y=me.y+M*ee.y,X.z=me.z+M*ee.z,de.push(X.x,X.y,X.z)}}(function Oe(){for(let at=0;at<h;at++)ze(at);ze(!1===R?h:0),function Ee(){for(let at=0;at<=h;at++)for(let rt=0;rt<=E;rt++)te.x=at/h,te.y=rt/E,be.push(te.x,te.y)}(),function ke(){for(let at=1;at<=h;at++)for(let rt=1;rt<=E;rt++){const tt=(E+1)*at+(rt-1),Rt=(E+1)*at+rt,rn=(E+1)*(at-1)+rt;Te.push((E+1)*(at-1)+(rt-1),tt,rn),Te.push(tt,Rt,rn)}}()})(),this.setIndex(Te),this.setAttribute("position",new Bn(de,3)),this.setAttribute("normal",new Bn(ge,3)),this.setAttribute("uv",new Bn(be,2))}toJSON(){const c=wr.prototype.toJSON.call(this);return c.path=this.parameters.path.toJSON(),c}}class Db extends wr{constructor(c){if(super(),this.type="WireframeGeometry",!0===c.isGeometry)return void console.error("THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const h=[],M=[0,0],E={},R=new Ze;if(null!==c.index){const V=c.attributes.position,X=c.index;let ee=c.groups;0===ee.length&&(ee=[{start:0,count:X.count,materialIndex:0}]);for(let te=0,me=ee.length;te<me;++te){const de=ee[te],ge=de.start;for(let Te=ge,Oe=ge+de.count;Te<Oe;Te+=3)for(let ze=0;ze<3;ze++){const ke=X.getX(Te+ze),Ee=X.getX(Te+(ze+1)%3);M[0]=Math.min(ke,Ee),M[1]=Math.max(ke,Ee);const at=M[0]+","+M[1];void 0===E[at]&&(E[at]={index1:M[0],index2:M[1]})}}for(const te in E){const me=E[te];R.fromBufferAttribute(V,me.index1),h.push(R.x,R.y,R.z),R.fromBufferAttribute(V,me.index2),h.push(R.x,R.y,R.z)}}else{const V=c.attributes.position;for(let X=0,ee=V.count/3;X<ee;X++)for(let te=0;te<3;te++)R.fromBufferAttribute(V,3*X+te),h.push(R.x,R.y,R.z),R.fromBufferAttribute(V,3*X+(te+1)%3),h.push(R.x,R.y,R.z)}this.setAttribute("position",new Bn(h,3))}}var $c=Object.freeze({__proto__:null,BoxGeometry:ku,BoxBufferGeometry:ku,CircleGeometry:gb,CircleBufferGeometry:gb,ConeGeometry:vb,ConeBufferGeometry:vb,CylinderGeometry:Vg,CylinderBufferGeometry:Vg,DodecahedronGeometry:Ev,DodecahedronBufferGeometry:Ev,EdgesGeometry:Fr,ExtrudeGeometry:Kf,ExtrudeBufferGeometry:Kf,IcosahedronGeometry:bw,IcosahedronBufferGeometry:bw,LatheGeometry:xw,LatheBufferGeometry:xw,OctahedronGeometry:Eb,OctahedronBufferGeometry:Eb,ParametricGeometry:Wg,ParametricBufferGeometry:Wg,PlaneGeometry:Kh,PlaneBufferGeometry:Kh,PolyhedronGeometry:Yf,PolyhedronBufferGeometry:Yf,RingGeometry:Ah,RingBufferGeometry:Ah,ShapeGeometry:vm,ShapeBufferGeometry:vm,SphereGeometry:qg,SphereBufferGeometry:qg,TetrahedronGeometry:jg,TetrahedronBufferGeometry:jg,TextGeometry:Tv,TextBufferGeometry:Tv,TorusGeometry:Zg,TorusBufferGeometry:Zg,TorusKnotGeometry:Tb,TorusKnotBufferGeometry:Tb,TubeGeometry:Ih,TubeBufferGeometry:Ih,WireframeGeometry:Db});class Dv extends Yo{constructor(c){super(),this.type="ShadowMaterial",this.color=new er(0),this.transparent=!0,this.setValues(c)}copy(c){return super.copy(c),this.color.copy(c.color),this}}Dv.prototype.isShadowMaterial=!0;class Yg extends Zl{constructor(c){super(c),this.type="RawShaderMaterial"}}function Rh(x){Yo.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new er(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new er(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yu,this.normalScale=new Un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.vertexTangents=!1,this.setValues(x)}function Qf(x){Rh.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Un(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(c){this.reflectivity=Yi.clamp(2.5*(c-1)/(c+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(x)}Yg.prototype.isRawShaderMaterial=!0,(Rh.prototype=Object.create(Yo.prototype)).constructor=Rh,Rh.prototype.isMeshStandardMaterial=!0,Rh.prototype.copy=function(x){return Yo.prototype.copy.call(this,x),this.defines={STANDARD:""},this.color.copy(x.color),this.roughness=x.roughness,this.metalness=x.metalness,this.map=x.map,this.lightMap=x.lightMap,this.lightMapIntensity=x.lightMapIntensity,this.aoMap=x.aoMap,this.aoMapIntensity=x.aoMapIntensity,this.emissive.copy(x.emissive),this.emissiveMap=x.emissiveMap,this.emissiveIntensity=x.emissiveIntensity,this.bumpMap=x.bumpMap,this.bumpScale=x.bumpScale,this.normalMap=x.normalMap,this.normalMapType=x.normalMapType,this.normalScale.copy(x.normalScale),this.displacementMap=x.displacementMap,this.displacementScale=x.displacementScale,this.displacementBias=x.displacementBias,this.roughnessMap=x.roughnessMap,this.metalnessMap=x.metalnessMap,this.alphaMap=x.alphaMap,this.envMap=x.envMap,this.envMapIntensity=x.envMapIntensity,this.refractionRatio=x.refractionRatio,this.wireframe=x.wireframe,this.wireframeLinewidth=x.wireframeLinewidth,this.wireframeLinecap=x.wireframeLinecap,this.wireframeLinejoin=x.wireframeLinejoin,this.skinning=x.skinning,this.morphTargets=x.morphTargets,this.morphNormals=x.morphNormals,this.flatShading=x.flatShading,this.vertexTangents=x.vertexTangents,this},(Qf.prototype=Object.create(Rh.prototype)).constructor=Qf,Qf.prototype.isMeshPhysicalMaterial=!0,Qf.prototype.copy=function(x){return Rh.prototype.copy.call(this,x),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=x.clearcoat,this.clearcoatMap=x.clearcoatMap,this.clearcoatRoughness=x.clearcoatRoughness,this.clearcoatRoughnessMap=x.clearcoatRoughnessMap,this.clearcoatNormalMap=x.clearcoatNormalMap,this.clearcoatNormalScale.copy(x.clearcoatNormalScale),this.reflectivity=x.reflectivity,this.sheen=x.sheen?(this.sheen||new er).copy(x.sheen):null,this.transmission=x.transmission,this.transmissionMap=x.transmissionMap,this};class Ab extends Yo{constructor(c){super(),this.type="MeshPhongMaterial",this.color=new er(16777215),this.specular=new er(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new er(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yu,this.normalScale=new Un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Fn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(c)}copy(c){return super.copy(c),this.color.copy(c.color),this.specular.copy(c.specular),this.shininess=c.shininess,this.map=c.map,this.lightMap=c.lightMap,this.lightMapIntensity=c.lightMapIntensity,this.aoMap=c.aoMap,this.aoMapIntensity=c.aoMapIntensity,this.emissive.copy(c.emissive),this.emissiveMap=c.emissiveMap,this.emissiveIntensity=c.emissiveIntensity,this.bumpMap=c.bumpMap,this.bumpScale=c.bumpScale,this.normalMap=c.normalMap,this.normalMapType=c.normalMapType,this.normalScale.copy(c.normalScale),this.displacementMap=c.displacementMap,this.displacementScale=c.displacementScale,this.displacementBias=c.displacementBias,this.specularMap=c.specularMap,this.alphaMap=c.alphaMap,this.envMap=c.envMap,this.combine=c.combine,this.reflectivity=c.reflectivity,this.refractionRatio=c.refractionRatio,this.wireframe=c.wireframe,this.wireframeLinewidth=c.wireframeLinewidth,this.wireframeLinecap=c.wireframeLinecap,this.wireframeLinejoin=c.wireframeLinejoin,this.skinning=c.skinning,this.morphTargets=c.morphTargets,this.morphNormals=c.morphNormals,this.flatShading=c.flatShading,this}}Ab.prototype.isMeshPhongMaterial=!0;class ym extends Yo{constructor(c){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new er(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new er(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yu,this.normalScale=new Un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(c)}copy(c){return super.copy(c),this.color.copy(c.color),this.map=c.map,this.gradientMap=c.gradientMap,this.lightMap=c.lightMap,this.lightMapIntensity=c.lightMapIntensity,this.aoMap=c.aoMap,this.aoMapIntensity=c.aoMapIntensity,this.emissive.copy(c.emissive),this.emissiveMap=c.emissiveMap,this.emissiveIntensity=c.emissiveIntensity,this.bumpMap=c.bumpMap,this.bumpScale=c.bumpScale,this.normalMap=c.normalMap,this.normalMapType=c.normalMapType,this.normalScale.copy(c.normalScale),this.displacementMap=c.displacementMap,this.displacementScale=c.displacementScale,this.displacementBias=c.displacementBias,this.alphaMap=c.alphaMap,this.wireframe=c.wireframe,this.wireframeLinewidth=c.wireframeLinewidth,this.wireframeLinecap=c.wireframeLinecap,this.wireframeLinejoin=c.wireframeLinejoin,this.skinning=c.skinning,this.morphTargets=c.morphTargets,this.morphNormals=c.morphNormals,this}}ym.prototype.isMeshToonMaterial=!0;class $f extends Yo{constructor(c){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yu,this.normalScale=new Un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(c)}copy(c){return super.copy(c),this.bumpMap=c.bumpMap,this.bumpScale=c.bumpScale,this.normalMap=c.normalMap,this.normalMapType=c.normalMapType,this.normalScale.copy(c.normalScale),this.displacementMap=c.displacementMap,this.displacementScale=c.displacementScale,this.displacementBias=c.displacementBias,this.wireframe=c.wireframe,this.wireframeLinewidth=c.wireframeLinewidth,this.skinning=c.skinning,this.morphTargets=c.morphTargets,this.morphNormals=c.morphNormals,this.flatShading=c.flatShading,this}}$f.prototype.isMeshNormalMaterial=!0;class Av extends Yo{constructor(c){super(),this.type="MeshLambertMaterial",this.color=new er(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new er(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Fn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(c)}copy(c){return super.copy(c),this.color.copy(c.color),this.map=c.map,this.lightMap=c.lightMap,this.lightMapIntensity=c.lightMapIntensity,this.aoMap=c.aoMap,this.aoMapIntensity=c.aoMapIntensity,this.emissive.copy(c.emissive),this.emissiveMap=c.emissiveMap,this.emissiveIntensity=c.emissiveIntensity,this.specularMap=c.specularMap,this.alphaMap=c.alphaMap,this.envMap=c.envMap,this.combine=c.combine,this.reflectivity=c.reflectivity,this.refractionRatio=c.refractionRatio,this.wireframe=c.wireframe,this.wireframeLinewidth=c.wireframeLinewidth,this.wireframeLinecap=c.wireframeLinecap,this.wireframeLinejoin=c.wireframeLinejoin,this.skinning=c.skinning,this.morphTargets=c.morphTargets,this.morphNormals=c.morphNormals,this}}Av.prototype.isMeshLambertMaterial=!0;class ep extends Yo{constructor(c){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new er(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yu,this.normalScale=new Un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(c)}copy(c){return super.copy(c),this.defines={MATCAP:""},this.color.copy(c.color),this.matcap=c.matcap,this.map=c.map,this.bumpMap=c.bumpMap,this.bumpScale=c.bumpScale,this.normalMap=c.normalMap,this.normalMapType=c.normalMapType,this.normalScale.copy(c.normalScale),this.displacementMap=c.displacementMap,this.displacementScale=c.displacementScale,this.displacementBias=c.displacementBias,this.alphaMap=c.alphaMap,this.skinning=c.skinning,this.morphTargets=c.morphTargets,this.morphNormals=c.morphNormals,this.flatShading=c.flatShading,this}}ep.prototype.isMeshMatcapMaterial=!0;class bm extends yl{constructor(c){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(c)}copy(c){return super.copy(c),this.scale=c.scale,this.dashSize=c.dashSize,this.gapSize=c.gapSize,this}}bm.prototype.isLineDashedMaterial=!0;var Xg=Object.freeze({__proto__:null,ShadowMaterial:Dv,SpriteMaterial:Fg,RawShaderMaterial:Yg,ShaderMaterial:Zl,PointsMaterial:nf,MeshPhysicalMaterial:Qf,MeshStandardMaterial:Rh,MeshPhongMaterial:Ab,MeshToonMaterial:ym,MeshNormalMaterial:$f,MeshLambertMaterial:Av,MeshDepthMaterial:rb,MeshDistanceMaterial:sb,MeshBasicMaterial:qc,MeshMatcapMaterial:ep,LineDashedMaterial:bm,LineBasicMaterial:yl,Material:Yo});const Da={arraySlice:function(x,c,h){return Da.isTypedArray(x)?new x.constructor(x.subarray(c,void 0!==h?h:x.length)):x.slice(c,h)},convertArray:function(x,c,h){return!x||!h&&x.constructor===c?x:"number"==typeof c.BYTES_PER_ELEMENT?new c(x):Array.prototype.slice.call(x)},isTypedArray:function(x){return ArrayBuffer.isView(x)&&!(x instanceof DataView)},getKeyframeOrder:function(x){const h=x.length,M=new Array(h);for(let E=0;E!==h;++E)M[E]=E;return M.sort(function c(E,R){return x[E]-x[R]}),M},sortedArray:function(x,c,h){const M=x.length,E=new x.constructor(M);for(let R=0,V=0;V!==M;++R){const X=h[R]*c;for(let ee=0;ee!==c;++ee)E[V++]=x[X+ee]}return E},flattenJSON:function(x,c,h,M){let E=1,R=x[0];for(;void 0!==R&&void 0===R[M];)R=x[E++];if(void 0===R)return;let V=R[M];if(void 0!==V)if(Array.isArray(V))do{V=R[M],void 0!==V&&(c.push(R.time),h.push.apply(h,V)),R=x[E++]}while(void 0!==R);else if(void 0!==V.toArray)do{V=R[M],void 0!==V&&(c.push(R.time),V.toArray(h,h.length)),R=x[E++]}while(void 0!==R);else do{V=R[M],void 0!==V&&(c.push(R.time),h.push(V)),R=x[E++]}while(void 0!==R)},subclip:function(x,c,h,M,E=30){const R=x.clone();R.name=c;const V=[];for(let ee=0;ee<R.tracks.length;++ee){const te=R.tracks[ee],me=te.getValueSize(),de=[],ge=[];for(let be=0;be<te.times.length;++be){const Te=te.times[be]*E;if(!(Te<h||Te>=M)){de.push(te.times[be]);for(let Oe=0;Oe<me;++Oe)ge.push(te.values[be*me+Oe])}}0!==de.length&&(te.times=Da.convertArray(de,te.times.constructor),te.values=Da.convertArray(ge,te.values.constructor),V.push(te))}R.tracks=V;let X=1/0;for(let ee=0;ee<R.tracks.length;++ee)X>R.tracks[ee].times[0]&&(X=R.tracks[ee].times[0]);for(let ee=0;ee<R.tracks.length;++ee)R.tracks[ee].shift(-1*X);return R.resetDuration(),R},makeClipAdditive:function(x,c=0,h=x,M=30){M<=0&&(M=30);const E=h.tracks.length,R=c/M;for(let V=0;V<E;++V){const X=h.tracks[V],ee=X.ValueTypeName;if("bool"===ee||"string"===ee)continue;const te=x.tracks.find(function(ke){return ke.name===X.name&&ke.ValueTypeName===ee});if(void 0===te)continue;let me=0;const de=X.getValueSize();X.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(me=de/3);let ge=0;const be=te.getValueSize();te.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(ge=be/3);const Te=X.times.length-1;let Oe;if(R<=X.times[0])Oe=Da.arraySlice(X.values,me,de-me);else if(R>=X.times[Te]){const ke=Te*de+me;Oe=Da.arraySlice(X.values,ke,ke+de-me)}else{const ke=X.createInterpolant(),Ee=me,at=de-me;ke.evaluate(R),Oe=Da.arraySlice(ke.resultBuffer,Ee,at)}"quaternion"===ee&&(new Ds).fromArray(Oe).normalize().conjugate().toArray(Oe);const ze=te.times.length;for(let ke=0;ke<ze;++ke){const Ee=ke*be+ge;if("quaternion"===ee)Ds.multiplyQuaternionsFlat(te.values,Ee,Oe,0,te.values,Ee);else{const at=be-2*ge;for(let rt=0;rt<at;++rt)te.values[Ee+rt]-=Oe[rt]}}}return x.blendMode=au,x}};function fu(x,c,h,M){this.parameterPositions=x,this._cachedIndex=0,this.resultBuffer=void 0!==M?M:new c.constructor(h),this.sampleValues=c,this.valueSize=h}function Iv(x,c,h,M){fu.call(this,x,c,h,M),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function xm(x,c,h,M){fu.call(this,x,c,h,M)}function Jg(x,c,h,M){fu.call(this,x,c,h,M)}Object.assign(fu.prototype,{evaluate:function(x){const c=this.parameterPositions;let h=this._cachedIndex,M=c[h],E=c[h-1];e:{t:{let R;n:{i:if(!(x<M)){for(let V=h+2;;){if(void 0===M){if(x<E)break i;return h=c.length,this._cachedIndex=h,this.afterEnd_(h-1,x,E)}if(h===V)break;if(E=M,M=c[++h],x<M)break t}R=c.length;break n}if(x>=E)break e;{const V=c[1];x<V&&(h=2,E=V);for(let X=h-2;;){if(void 0===E)return this._cachedIndex=0,this.beforeStart_(0,x,M);if(h===X)break;if(M=E,E=c[--h-1],x>=E)break t}R=h,h=0}}for(;h<R;){const V=h+R>>>1;x<c[V]?R=V:h=V+1}if(M=c[h],E=c[h-1],void 0===E)return this._cachedIndex=0,this.beforeStart_(0,x,M);if(void 0===M)return h=c.length,this._cachedIndex=h,this.afterEnd_(h-1,E,x)}this._cachedIndex=h,this.intervalChanged_(h,E,M)}return this.interpolate_(h,E,x,M)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(x){const c=this.resultBuffer,h=this.sampleValues,M=this.valueSize,E=x*M;for(let R=0;R!==M;++R)c[R]=h[E+R];return c},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(fu.prototype,{beforeStart_:fu.prototype.copySampleValue_,afterEnd_:fu.prototype.copySampleValue_}),Iv.prototype=Object.assign(Object.create(fu.prototype),{constructor:Iv,DefaultSettings_:{endingStart:dh,endingEnd:dh},intervalChanged_:function(x,c,h){const M=this.parameterPositions;let E=x-2,R=x+1,V=M[E],X=M[R];if(void 0===V)switch(this.getSettings_().endingStart){case ki:E=x,V=2*c-h;break;case Td:E=M.length-2,V=c+M[E]-M[E+1];break;default:E=x,V=h}if(void 0===X)switch(this.getSettings_().endingEnd){case ki:R=x,X=2*h-c;break;case Td:R=1,X=h+M[1]-M[0];break;default:R=x-1,X=c}const ee=.5*(h-c),te=this.valueSize;this._weightPrev=ee/(c-V),this._weightNext=ee/(X-h),this._offsetPrev=E*te,this._offsetNext=R*te},interpolate_:function(x,c,h,M){const E=this.resultBuffer,R=this.sampleValues,V=this.valueSize,X=x*V,ee=X-V,te=this._offsetPrev,me=this._offsetNext,de=this._weightPrev,ge=this._weightNext,be=(h-c)/(M-c),Te=be*be,Oe=Te*be,ze=-de*Oe+2*de*Te-de*be,ke=(1+de)*Oe+(-1.5-2*de)*Te+(-.5+de)*be+1,Ee=(-1-ge)*Oe+(1.5+ge)*Te+.5*be,at=ge*Oe-ge*Te;for(let rt=0;rt!==V;++rt)E[rt]=ze*R[te+rt]+ke*R[ee+rt]+Ee*R[X+rt]+at*R[me+rt];return E}}),xm.prototype=Object.assign(Object.create(fu.prototype),{constructor:xm,interpolate_:function(x,c,h,M){const E=this.resultBuffer,R=this.sampleValues,V=this.valueSize,X=x*V,ee=X-V,te=(h-c)/(M-c),me=1-te;for(let de=0;de!==V;++de)E[de]=R[ee+de]*me+R[X+de]*te;return E}}),Jg.prototype=Object.assign(Object.create(fu.prototype),{constructor:Jg,interpolate_:function(x){return this.copySampleValue_(x-1)}});class rh{constructor(c,h,M,E){if(void 0===c)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===h||0===h.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+c);this.name=c,this.times=Da.convertArray(h,this.TimeBufferType),this.values=Da.convertArray(M,this.ValueBufferType),this.setInterpolation(E||this.DefaultInterpolation)}static toJSON(c){const h=c.constructor;let M;if(h.toJSON!==this.toJSON)M=h.toJSON(c);else{M={name:c.name,times:Da.convertArray(c.times,Array),values:Da.convertArray(c.values,Array)};const E=c.getInterpolation();E!==c.DefaultInterpolation&&(M.interpolation=E)}return M.type=c.ValueTypeName,M}InterpolantFactoryMethodDiscrete(c){return new Jg(this.times,this.values,this.getValueSize(),c)}InterpolantFactoryMethodLinear(c){return new xm(this.times,this.values,this.getValueSize(),c)}InterpolantFactoryMethodSmooth(c){return new Iv(this.times,this.values,this.getValueSize(),c)}setInterpolation(c){let h;switch(c){case Mo:h=this.InterpolantFactoryMethodDiscrete;break;case Sf:h=this.InterpolantFactoryMethodLinear;break;case Ed:h=this.InterpolantFactoryMethodSmooth}if(void 0===h){const M="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(c===this.DefaultInterpolation)throw new Error(M);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",M),this}return this.createInterpolant=h,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Mo;case this.InterpolantFactoryMethodLinear:return Sf;case this.InterpolantFactoryMethodSmooth:return Ed}}getValueSize(){return this.values.length/this.times.length}shift(c){if(0!==c){const h=this.times;for(let M=0,E=h.length;M!==E;++M)h[M]+=c}return this}scale(c){if(1!==c){const h=this.times;for(let M=0,E=h.length;M!==E;++M)h[M]*=c}return this}trim(c,h){const M=this.times,E=M.length;let R=0,V=E-1;for(;R!==E&&M[R]<c;)++R;for(;-1!==V&&M[V]>h;)--V;if(++V,0!==R||V!==E){R>=V&&(V=Math.max(V,1),R=V-1);const X=this.getValueSize();this.times=Da.arraySlice(M,R,V),this.values=Da.arraySlice(this.values,R*X,V*X)}return this}validate(){let c=!0;const h=this.getValueSize();h-Math.floor(h)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),c=!1);const M=this.times,E=this.values,R=M.length;0===R&&(console.error("THREE.KeyframeTrack: Track is empty.",this),c=!1);let V=null;for(let X=0;X!==R;X++){const ee=M[X];if("number"==typeof ee&&isNaN(ee)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,X,ee),c=!1;break}if(null!==V&&V>ee){console.error("THREE.KeyframeTrack: Out of order keys.",this,X,ee,V),c=!1;break}V=ee}if(void 0!==E&&Da.isTypedArray(E))for(let X=0,ee=E.length;X!==ee;++X){const te=E[X];if(isNaN(te)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,X,te),c=!1;break}}return c}optimize(){const c=Da.arraySlice(this.times),h=Da.arraySlice(this.values),M=this.getValueSize(),E=this.getInterpolation()===Ed,R=c.length-1;let V=1;for(let X=1;X<R;++X){let ee=!1;const te=c[X];if(te!==c[X+1]&&(1!==X||te!==c[0]))if(E)ee=!0;else{const de=X*M,ge=de-M,be=de+M;for(let Te=0;Te!==M;++Te){const Oe=h[de+Te];if(Oe!==h[ge+Te]||Oe!==h[be+Te]){ee=!0;break}}}if(ee){if(X!==V){c[V]=c[X];const de=X*M,ge=V*M;for(let be=0;be!==M;++be)h[ge+be]=h[de+be]}++V}}if(R>0){c[V]=c[R];for(let X=R*M,ee=V*M,te=0;te!==M;++te)h[ee+te]=h[X+te];++V}return V!==c.length?(this.times=Da.arraySlice(c,0,V),this.values=Da.arraySlice(h,0,V*M)):(this.times=c,this.values=h),this}clone(){const c=Da.arraySlice(this.times,0),h=Da.arraySlice(this.values,0),E=new(0,this.constructor)(this.name,c,h);return E.createInterpolant=this.createInterpolant,E}}rh.prototype.TimeBufferType=Float32Array,rh.prototype.ValueBufferType=Float32Array,rh.prototype.DefaultInterpolation=Sf;class nd extends rh{}nd.prototype.ValueTypeName="bool",nd.prototype.ValueBufferType=Array,nd.prototype.DefaultInterpolation=Mo,nd.prototype.InterpolantFactoryMethodLinear=void 0,nd.prototype.InterpolantFactoryMethodSmooth=void 0;class ww extends rh{}ww.prototype.ValueTypeName="color";class Kg extends rh{}function Mw(x,c,h,M){fu.call(this,x,c,h,M)}Kg.prototype.ValueTypeName="number",Mw.prototype=Object.assign(Object.create(fu.prototype),{constructor:Mw,interpolate_:function(x,c,h,M){const E=this.resultBuffer,R=this.sampleValues,V=this.valueSize,X=(h-c)/(M-c);let ee=x*V;for(let te=ee+V;ee!==te;ee+=4)Ds.slerpFlat(E,0,R,ee-V,R,ee,X);return E}});class wm extends rh{InterpolantFactoryMethodLinear(c){return new Mw(this.times,this.values,this.getValueSize(),c)}}wm.prototype.ValueTypeName="quaternion",wm.prototype.DefaultInterpolation=Sf,wm.prototype.InterpolantFactoryMethodSmooth=void 0;class tp extends rh{}tp.prototype.ValueTypeName="string",tp.prototype.ValueBufferType=Array,tp.prototype.DefaultInterpolation=Mo,tp.prototype.InterpolantFactoryMethodLinear=void 0,tp.prototype.InterpolantFactoryMethodSmooth=void 0;class Rv extends rh{}Rv.prototype.ValueTypeName="vector";class Qg{constructor(c,h=-1,M,E=Cs){this.name=c,this.tracks=M,this.duration=h,this.blendMode=E,this.uuid=Yi.generateUUID(),this.duration<0&&this.resetDuration()}static parse(c){const h=[],M=c.tracks,E=1/(c.fps||1);for(let V=0,X=M.length;V!==X;++V)h.push(qA(M[V]).scale(E));const R=new this(c.name,c.duration,h,c.blendMode);return R.uuid=c.uuid,R}static toJSON(c){const h=[],M=c.tracks,E={name:c.name,duration:c.duration,tracks:h,uuid:c.uuid,blendMode:c.blendMode};for(let R=0,V=M.length;R!==V;++R)h.push(rh.toJSON(M[R]));return E}static CreateFromMorphTargetSequence(c,h,M,E){const R=h.length,V=[];for(let X=0;X<R;X++){let ee=[],te=[];ee.push((X+R-1)%R,X,(X+1)%R),te.push(0,1,0);const me=Da.getKeyframeOrder(ee);ee=Da.sortedArray(ee,1,me),te=Da.sortedArray(te,1,me),!E&&0===ee[0]&&(ee.push(R),te.push(te[0])),V.push(new Kg(".morphTargetInfluences["+h[X].name+"]",ee,te).scale(1/M))}return new this(c,-1,V)}static findByName(c,h){let M=c;if(!Array.isArray(c)){const E=c;M=E.geometry&&E.geometry.animations||E.animations}for(let E=0;E<M.length;E++)if(M[E].name===h)return M[E];return null}static CreateClipsFromMorphTargetSequences(c,h,M){const E={},R=/^([\w-]*?)([\d]+)$/;for(let X=0,ee=c.length;X<ee;X++){const te=c[X],me=te.name.match(R);if(me&&me.length>1){const de=me[1];let ge=E[de];ge||(E[de]=ge=[]),ge.push(te)}}const V=[];for(const X in E)V.push(this.CreateFromMorphTargetSequence(X,E[X],h,M));return V}static parseAnimation(c,h){if(!c)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const M=function(de,ge,be,Te,Oe){if(0!==be.length){const ze=[],ke=[];Da.flattenJSON(be,ze,ke,Te),0!==ze.length&&Oe.push(new de(ge,ze,ke))}},E=[],R=c.name||"default",V=c.fps||30,X=c.blendMode;let ee=c.length||-1;const te=c.hierarchy||[];for(let de=0;de<te.length;de++){const ge=te[de].keys;if(ge&&0!==ge.length)if(ge[0].morphTargets){const be={};let Te;for(Te=0;Te<ge.length;Te++)if(ge[Te].morphTargets)for(let Oe=0;Oe<ge[Te].morphTargets.length;Oe++)be[ge[Te].morphTargets[Oe]]=-1;for(const Oe in be){const ze=[],ke=[];for(let Ee=0;Ee!==ge[Te].morphTargets.length;++Ee){const at=ge[Te];ze.push(at.time),ke.push(at.morphTarget===Oe?1:0)}E.push(new Kg(".morphTargetInfluence["+Oe+"]",ze,ke))}ee=be.length*(V||1)}else{const be=".bones["+h[de].name+"]";M(Rv,be+".position",ge,"pos",E),M(wm,be+".quaternion",ge,"rot",E),M(Rv,be+".scale",ge,"scl",E)}}return 0===E.length?null:new this(R,ee,E,X)}resetDuration(){let h=0;for(let M=0,E=this.tracks.length;M!==E;++M){const R=this.tracks[M];h=Math.max(h,R.times[R.times.length-1])}return this.duration=h,this}trim(){for(let c=0;c<this.tracks.length;c++)this.tracks[c].trim(0,this.duration);return this}validate(){let c=!0;for(let h=0;h<this.tracks.length;h++)c=c&&this.tracks[h].validate();return c}optimize(){for(let c=0;c<this.tracks.length;c++)this.tracks[c].optimize();return this}clone(){const c=[];for(let h=0;h<this.tracks.length;h++)c.push(this.tracks[h].clone());return new this.constructor(this.name,this.duration,c,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function qA(x){if(void 0===x.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const c=function WA(x){switch(x.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Kg;case"vector":case"vector2":case"vector3":case"vector4":return Rv;case"color":return ww;case"quaternion":return wm;case"bool":case"boolean":return nd;case"string":return tp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+x)}(x.type);if(void 0===x.times){const h=[],M=[];Da.flattenJSON(x.keys,h,M,"value"),x.times=h,x.values=M}return void 0!==c.parse?c.parse(x):new c(x.name,x.times,x.values,x.interpolation)}const Xl={enabled:!1,files:{},add:function(x,c){!1!==this.enabled&&(this.files[x]=c)},get:function(x){if(!1!==this.enabled)return this.files[x]},remove:function(x){delete this.files[x]},clear:function(){this.files={}}};function Cw(x,c,h){const M=this;let X,E=!1,R=0,V=0;const ee=[];this.onStart=void 0,this.onLoad=x,this.onProgress=c,this.onError=h,this.itemStart=function(te){V++,!1===E&&void 0!==M.onStart&&M.onStart(te,R,V),E=!0},this.itemEnd=function(te){R++,void 0!==M.onProgress&&M.onProgress(te,R,V),R===V&&(E=!1,void 0!==M.onLoad&&M.onLoad())},this.itemError=function(te){void 0!==M.onError&&M.onError(te)},this.resolveURL=function(te){return X?X(te):te},this.setURLModifier=function(te){return X=te,this},this.addHandler=function(te,me){return ee.push(te,me),this},this.removeHandler=function(te){const me=ee.indexOf(te);return-1!==me&&ee.splice(me,2),this},this.getHandler=function(te){for(let me=0,de=ee.length;me<de;me+=2){const ge=ee[me],be=ee[me+1];if(ge.global&&(ge.lastIndex=0),ge.test(te))return be}return null}}const kC=new Cw;function bl(x){this.manager=void 0!==x?x:kC,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(bl.prototype,{load:function(){},loadAsync:function(x,c){const h=this;return new Promise(function(M,E){h.load(x,M,c,E)})},parse:function(){},setCrossOrigin:function(x){return this.crossOrigin=x,this},setWithCredentials:function(x){return this.withCredentials=x,this},setPath:function(x){return this.path=x,this},setResourcePath:function(x){return this.resourcePath=x,this},setRequestHeader:function(x){return this.requestHeader=x,this}});const id={};function Hu(x){bl.call(this,x)}Hu.prototype=Object.assign(Object.create(bl.prototype),{constructor:Hu,load:function(x,c,h,M){void 0===x&&(x=""),void 0!==this.path&&(x=this.path+x),x=this.manager.resolveURL(x);const E=this,R=Xl.get(x);if(void 0!==R)return E.manager.itemStart(x),setTimeout(function(){c&&c(R),E.manager.itemEnd(x)},0),R;if(void 0!==id[x])return void id[x].push({onLoad:c,onProgress:h,onError:M});const X=x.match(/^data:(.*?)(;base64)?,(.*)$/);let ee;if(X){const te=X[1],me=!!X[2];let de=X[3];de=decodeURIComponent(de),me&&(de=atob(de));try{let ge;const be=(this.responseType||"").toLowerCase();switch(be){case"arraybuffer":case"blob":const Te=new Uint8Array(de.length);for(let ze=0;ze<de.length;ze++)Te[ze]=de.charCodeAt(ze);ge="blob"===be?new Blob([Te.buffer],{type:te}):Te.buffer;break;case"document":ge=(new DOMParser).parseFromString(de,te);break;case"json":ge=JSON.parse(de);break;default:ge=de}setTimeout(function(){c&&c(ge),E.manager.itemEnd(x)},0)}catch(ge){setTimeout(function(){M&&M(ge),E.manager.itemError(x),E.manager.itemEnd(x)},0)}}else{id[x]=[],id[x].push({onLoad:c,onProgress:h,onError:M}),ee=new XMLHttpRequest,ee.open("GET",x,!0),ee.addEventListener("load",function(te){const me=this.response,de=id[x];if(delete id[x],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Xl.add(x,me);for(let ge=0,be=de.length;ge<be;ge++){const Te=de[ge];Te.onLoad&&Te.onLoad(me)}E.manager.itemEnd(x)}else{for(let ge=0,be=de.length;ge<be;ge++){const Te=de[ge];Te.onError&&Te.onError(te)}E.manager.itemError(x),E.manager.itemEnd(x)}},!1),ee.addEventListener("progress",function(te){const me=id[x];for(let de=0,ge=me.length;de<ge;de++){const be=me[de];be.onProgress&&be.onProgress(te)}},!1),ee.addEventListener("error",function(te){const me=id[x];delete id[x];for(let de=0,ge=me.length;de<ge;de++){const be=me[de];be.onError&&be.onError(te)}E.manager.itemError(x),E.manager.itemEnd(x)},!1),ee.addEventListener("abort",function(te){const me=id[x];delete id[x];for(let de=0,ge=me.length;de<ge;de++){const be=me[de];be.onError&&be.onError(te)}E.manager.itemError(x),E.manager.itemEnd(x)},!1),void 0!==this.responseType&&(ee.responseType=this.responseType),void 0!==this.withCredentials&&(ee.withCredentials=this.withCredentials),ee.overrideMimeType&&ee.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const te in this.requestHeader)ee.setRequestHeader(te,this.requestHeader[te]);ee.send(null)}return E.manager.itemStart(x),ee},setResponseType:function(x){return this.responseType=x,this},setMimeType:function(x){return this.mimeType=x,this}});class QL extends bl{constructor(c){super(c)}load(c,h,M,E){const R=this,V=new Hu(this.manager);V.setPath(this.path),V.setRequestHeader(this.requestHeader),V.setWithCredentials(this.withCredentials),V.load(c,function(X){try{h(R.parse(JSON.parse(X)))}catch(ee){E?E(ee):console.error(ee),R.manager.itemError(c)}},M,E)}parse(c){const h=[];for(let M=0;M<c.length;M++){const E=Qg.parse(c[M]);h.push(E)}return h}}function Sw(x){bl.call(this,x)}Sw.prototype=Object.assign(Object.create(bl.prototype),{constructor:Sw,load:function(x,c,h,M){const E=this,R=[],V=new Bu,X=new Hu(this.manager);X.setPath(this.path),X.setResponseType("arraybuffer"),X.setRequestHeader(this.requestHeader),X.setWithCredentials(E.withCredentials);let ee=0;function te(me){X.load(x[me],function(de){const ge=E.parse(de,!0);R[me]={width:ge.width,height:ge.height,format:ge.format,mipmaps:ge.mipmaps},ee+=1,6===ee&&(1===ge.mipmapCount&&(V.minFilter=$i),V.image=R,V.format=ge.format,V.needsUpdate=!0,c&&c(V))},h,M)}if(Array.isArray(x))for(let me=0,de=x.length;me<de;++me)te(me);else X.load(x,function(me){const de=E.parse(me,!0);if(de.isCubemap){const ge=de.mipmaps.length/de.mipmapCount;for(let be=0;be<ge;be++){R[be]={mipmaps:[]};for(let Te=0;Te<de.mipmapCount;Te++)R[be].mipmaps.push(de.mipmaps[be*de.mipmapCount+Te]),R[be].format=de.format,R[be].width=de.width,R[be].height=de.height}V.image=R}else V.image.width=de.width,V.image.height=de.height,V.mipmaps=de.mipmaps;1===de.mipmapCount&&(V.minFilter=$i),V.format=de.format,V.needsUpdate=!0,c&&c(V)},h,M);return V}});class $g extends bl{constructor(c){super(c)}load(c,h,M,E){void 0!==this.path&&(c=this.path+c),c=this.manager.resolveURL(c);const R=this,V=Xl.get(c);if(void 0!==V)return R.manager.itemStart(c),setTimeout(function(){h&&h(V),R.manager.itemEnd(c)},0),V;const X=document.createElementNS("http://www.w3.org/1999/xhtml","img");function ee(){X.removeEventListener("load",ee,!1),X.removeEventListener("error",te,!1),Xl.add(c,this),h&&h(this),R.manager.itemEnd(c)}function te(me){X.removeEventListener("load",ee,!1),X.removeEventListener("error",te,!1),E&&E(me),R.manager.itemError(c),R.manager.itemEnd(c)}return X.addEventListener("load",ee,!1),X.addEventListener("error",te,!1),"data:"!==c.substr(0,5)&&void 0!==this.crossOrigin&&(X.crossOrigin=this.crossOrigin),R.manager.itemStart(c),X.src=c,X}}class Ew extends bl{constructor(c){super(c)}load(c,h,M,E){const R=new bc,V=new $g(this.manager);V.setCrossOrigin(this.crossOrigin),V.setPath(this.path);let X=0;function ee(te){V.load(c[te],function(me){R.images[te]=me,X++,6===X&&(R.needsUpdate=!0,h&&h(R))},void 0,E)}for(let te=0;te<c.length;++te)ee(te);return R}}function Ib(x){bl.call(this,x)}function Rb(x){bl.call(this,x)}function eu(){this.type="Curve",this.arcLengthDivisions=200}Ib.prototype=Object.assign(Object.create(bl.prototype),{constructor:Ib,load:function(x,c,h,M){const E=this,R=new eh,V=new Hu(this.manager);return V.setResponseType("arraybuffer"),V.setRequestHeader(this.requestHeader),V.setPath(this.path),V.setWithCredentials(E.withCredentials),V.load(x,function(X){const ee=E.parse(X);!ee||(void 0!==ee.image?R.image=ee.image:void 0!==ee.data&&(R.image.width=ee.width,R.image.height=ee.height,R.image.data=ee.data),R.wrapS=void 0!==ee.wrapS?ee.wrapS:os,R.wrapT=void 0!==ee.wrapT?ee.wrapT:os,R.magFilter=void 0!==ee.magFilter?ee.magFilter:$i,R.minFilter=void 0!==ee.minFilter?ee.minFilter:$i,R.anisotropy=void 0!==ee.anisotropy?ee.anisotropy:1,void 0!==ee.encoding&&(R.encoding=ee.encoding),void 0!==ee.flipY&&(R.flipY=ee.flipY),void 0!==ee.format&&(R.format=ee.format),void 0!==ee.type&&(R.type=ee.type),void 0!==ee.mipmaps&&(R.mipmaps=ee.mipmaps,R.minFilter=k),1===ee.mipmapCount&&(R.minFilter=$i),R.needsUpdate=!0,c&&c(R,ee))},h,M),R}}),Rb.prototype=Object.assign(Object.create(bl.prototype),{constructor:Rb,load:function(x,c,h,M){const E=new kr,R=new $g(this.manager);return R.setCrossOrigin(this.crossOrigin),R.setPath(this.path),R.load(x,function(V){E.image=V;const X=x.search(/\.jpe?g($|\?)/i)>0||0===x.search(/^data\:image\/jpeg/);E.format=X?nn:bn,E.needsUpdate=!0,void 0!==c&&c(E)},h,M),E}}),Object.assign(eu.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(x,c){const h=this.getUtoTmapping(x);return this.getPoint(h,c)},getPoints:function(x=5){const c=[];for(let h=0;h<=x;h++)c.push(this.getPoint(h/x));return c},getSpacedPoints:function(x=5){const c=[];for(let h=0;h<=x;h++)c.push(this.getPointAt(h/x));return c},getLength:function(){const x=this.getLengths();return x[x.length-1]},getLengths:function(x){if(void 0===x&&(x=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===x+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const c=[];let h,M=this.getPoint(0),E=0;c.push(0);for(let R=1;R<=x;R++)h=this.getPoint(R/x),E+=h.distanceTo(M),c.push(E),M=h;return this.cacheArcLengths=c,c},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(x,c){const h=this.getLengths();let M=0;const E=h.length;let R;R=c||x*h[E-1];let ee,V=0,X=E-1;for(;V<=X;)if(M=Math.floor(V+(X-V)/2),ee=h[M]-R,ee<0)V=M+1;else{if(!(ee>0)){X=M;break}X=M-1}if(M=X,h[M]===R)return M/(E-1);const te=h[M];return(M+(R-te)/(h[M+1]-te))/(E-1)},getTangent:function(x,c){let M=x-1e-4,E=x+1e-4;M<0&&(M=0),E>1&&(E=1);const R=this.getPoint(M),V=this.getPoint(E),X=c||(R.isVector2?new Un:new Ze);return X.copy(V).sub(R).normalize(),X},getTangentAt:function(x,c){const h=this.getUtoTmapping(x);return this.getTangent(h,c)},computeFrenetFrames:function(x,c){const h=new Ze,M=[],E=[],R=[],V=new Ze,X=new pr;for(let ge=0;ge<=x;ge++)M[ge]=this.getTangentAt(ge/x,new Ze),M[ge].normalize();E[0]=new Ze,R[0]=new Ze;let ee=Number.MAX_VALUE;const te=Math.abs(M[0].x),me=Math.abs(M[0].y),de=Math.abs(M[0].z);te<=ee&&(ee=te,h.set(1,0,0)),me<=ee&&(ee=me,h.set(0,1,0)),de<=ee&&h.set(0,0,1),V.crossVectors(M[0],h).normalize(),E[0].crossVectors(M[0],V),R[0].crossVectors(M[0],E[0]);for(let ge=1;ge<=x;ge++){if(E[ge]=E[ge-1].clone(),R[ge]=R[ge-1].clone(),V.crossVectors(M[ge-1],M[ge]),V.length()>Number.EPSILON){V.normalize();const be=Math.acos(Yi.clamp(M[ge-1].dot(M[ge]),-1,1));E[ge].applyMatrix4(X.makeRotationAxis(V,be))}R[ge].crossVectors(M[ge],E[ge])}if(!0===c){let ge=Math.acos(Yi.clamp(E[0].dot(E[x]),-1,1));ge/=x,M[0].dot(V.crossVectors(E[0],E[x]))>0&&(ge=-ge);for(let be=1;be<=x;be++)E[be].applyMatrix4(X.makeRotationAxis(M[be],ge*be)),R[be].crossVectors(M[be],E[be])}return{tangents:M,normals:E,binormals:R}},clone:function(){return(new this.constructor).copy(this)},copy:function(x){return this.arcLengthDivisions=x.arcLengthDivisions,this},toJSON:function(){const x={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return x.arcLengthDivisions=this.arcLengthDivisions,x.type=this.type,x},fromJSON:function(x){return this.arcLengthDivisions=x.arcLengthDivisions,this}});class e_ extends eu{constructor(c=0,h=0,M=1,E=1,R=0,V=2*Math.PI,X=!1,ee=0){super(),this.type="EllipseCurve",this.aX=c,this.aY=h,this.xRadius=M,this.yRadius=E,this.aStartAngle=R,this.aEndAngle=V,this.aClockwise=X,this.aRotation=ee}getPoint(c,h){const M=h||new Un,E=2*Math.PI;let R=this.aEndAngle-this.aStartAngle;const V=Math.abs(R)<Number.EPSILON;for(;R<0;)R+=E;for(;R>E;)R-=E;R<Number.EPSILON&&(R=V?0:E),!0===this.aClockwise&&!V&&(R===E?R=-E:R-=E);const X=this.aStartAngle+c*R;let ee=this.aX+this.xRadius*Math.cos(X),te=this.aY+this.yRadius*Math.sin(X);if(0!==this.aRotation){const me=Math.cos(this.aRotation),de=Math.sin(this.aRotation),ge=ee-this.aX,be=te-this.aY;ee=ge*me-be*de+this.aX,te=ge*de+be*me+this.aY}return M.set(ee,te)}copy(c){return super.copy(c),this.aX=c.aX,this.aY=c.aY,this.xRadius=c.xRadius,this.yRadius=c.yRadius,this.aStartAngle=c.aStartAngle,this.aEndAngle=c.aEndAngle,this.aClockwise=c.aClockwise,this.aRotation=c.aRotation,this}toJSON(){const c=super.toJSON();return c.aX=this.aX,c.aY=this.aY,c.xRadius=this.xRadius,c.yRadius=this.yRadius,c.aStartAngle=this.aStartAngle,c.aEndAngle=this.aEndAngle,c.aClockwise=this.aClockwise,c.aRotation=this.aRotation,c}fromJSON(c){return super.fromJSON(c),this.aX=c.aX,this.aY=c.aY,this.xRadius=c.xRadius,this.yRadius=c.yRadius,this.aStartAngle=c.aStartAngle,this.aEndAngle=c.aEndAngle,this.aClockwise=c.aClockwise,this.aRotation=c.aRotation,this}}e_.prototype.isEllipseCurve=!0;class Tw extends e_{constructor(c,h,M,E,R,V){super(c,h,M,M,E,R,V),this.type="ArcCurve"}}function kb(){let x=0,c=0,h=0,M=0;function E(R,V,X,ee){x=R,c=X,h=-3*R+3*V-2*X-ee,M=2*R-2*V+X+ee}return{initCatmullRom:function(R,V,X,ee,te){E(V,X,te*(X-R),te*(ee-V))},initNonuniformCatmullRom:function(R,V,X,ee,te,me,de){let ge=(V-R)/te-(X-R)/(te+me)+(X-V)/me,be=(X-V)/me-(ee-V)/(me+de)+(ee-X)/de;ge*=me,be*=me,E(V,X,ge,be)},calc:function(R){const V=R*R;return x+c*R+h*V+M*(V*R)}}}Tw.prototype.isArcCurve=!0;const Pb=new Ze,Dw=new kb,Lb=new kb,Fb=new kb;class Aw extends eu{constructor(c=[],h=!1,M="centripetal",E=.5){super(),this.type="CatmullRomCurve3",this.points=c,this.closed=h,this.curveType=M,this.tension=E}getPoint(c,h=new Ze){const M=h,E=this.points,R=E.length,V=(R-(this.closed?0:1))*c;let te,me,X=Math.floor(V),ee=V-X;this.closed?X+=X>0?0:(Math.floor(Math.abs(X)/R)+1)*R:0===ee&&X===R-1&&(X=R-2,ee=1),this.closed||X>0?te=E[(X-1)%R]:(Pb.subVectors(E[0],E[1]).add(E[0]),te=Pb);const de=E[X%R],ge=E[(X+1)%R];if(this.closed||X+2<R?me=E[(X+2)%R]:(Pb.subVectors(E[R-1],E[R-2]).add(E[R-1]),me=Pb),"centripetal"===this.curveType||"chordal"===this.curveType){const be="chordal"===this.curveType?.5:.25;let Te=Math.pow(te.distanceToSquared(de),be),Oe=Math.pow(de.distanceToSquared(ge),be),ze=Math.pow(ge.distanceToSquared(me),be);Oe<1e-4&&(Oe=1),Te<1e-4&&(Te=Oe),ze<1e-4&&(ze=Oe),Dw.initNonuniformCatmullRom(te.x,de.x,ge.x,me.x,Te,Oe,ze),Lb.initNonuniformCatmullRom(te.y,de.y,ge.y,me.y,Te,Oe,ze),Fb.initNonuniformCatmullRom(te.z,de.z,ge.z,me.z,Te,Oe,ze)}else"catmullrom"===this.curveType&&(Dw.initCatmullRom(te.x,de.x,ge.x,me.x,this.tension),Lb.initCatmullRom(te.y,de.y,ge.y,me.y,this.tension),Fb.initCatmullRom(te.z,de.z,ge.z,me.z,this.tension));return M.set(Dw.calc(ee),Lb.calc(ee),Fb.calc(ee)),M}copy(c){super.copy(c),this.points=[];for(let h=0,M=c.points.length;h<M;h++)this.points.push(c.points[h].clone());return this.closed=c.closed,this.curveType=c.curveType,this.tension=c.tension,this}toJSON(){const c=super.toJSON();c.points=[];for(let h=0,M=this.points.length;h<M;h++)c.points.push(this.points[h].toArray());return c.closed=this.closed,c.curveType=this.curveType,c.tension=this.tension,c}fromJSON(c){super.fromJSON(c),this.points=[];for(let h=0,M=c.points.length;h<M;h++){const E=c.points[h];this.points.push((new Ze).fromArray(E))}return this.closed=c.closed,this.curveType=c.curveType,this.tension=c.tension,this}}function kh(x,c,h,M,E){const R=.5*(M-c),V=.5*(E-h),X=x*x;return(2*h-2*M+R+V)*(x*X)+(-3*h+3*M-2*R-V)*X+R*x+h}function Ob(x,c,h,M){return function Iw(x,c){const h=1-x;return h*h*c}(x,c)+function jA(x,c){return 2*(1-x)*x*c}(x,h)+function ZA(x,c){return x*x*c}(x,M)}function Mm(x,c,h,M,E){return function PC(x,c){const h=1-x;return h*h*h*c}(x,c)+function YA(x,c){const h=1-x;return 3*h*h*x*c}(x,h)+function XA(x,c){return 3*(1-x)*x*x*c}(x,M)+function JA(x,c){return x*x*x*c}(x,E)}Aw.prototype.isCatmullRomCurve3=!0;class Nb extends eu{constructor(c=new Un,h=new Un,M=new Un,E=new Un){super(),this.type="CubicBezierCurve",this.v0=c,this.v1=h,this.v2=M,this.v3=E}getPoint(c,h=new Un){const M=h,E=this.v0,R=this.v1,V=this.v2,X=this.v3;return M.set(Mm(c,E.x,R.x,V.x,X.x),Mm(c,E.y,R.y,V.y,X.y)),M}copy(c){return super.copy(c),this.v0.copy(c.v0),this.v1.copy(c.v1),this.v2.copy(c.v2),this.v3.copy(c.v3),this}toJSON(){const c=super.toJSON();return c.v0=this.v0.toArray(),c.v1=this.v1.toArray(),c.v2=this.v2.toArray(),c.v3=this.v3.toArray(),c}fromJSON(c){return super.fromJSON(c),this.v0.fromArray(c.v0),this.v1.fromArray(c.v1),this.v2.fromArray(c.v2),this.v3.fromArray(c.v3),this}}Nb.prototype.isCubicBezierCurve=!0;class Rw extends eu{constructor(c=new Ze,h=new Ze,M=new Ze,E=new Ze){super(),this.type="CubicBezierCurve3",this.v0=c,this.v1=h,this.v2=M,this.v3=E}getPoint(c,h=new Ze){const M=h,E=this.v0,R=this.v1,V=this.v2,X=this.v3;return M.set(Mm(c,E.x,R.x,V.x,X.x),Mm(c,E.y,R.y,V.y,X.y),Mm(c,E.z,R.z,V.z,X.z)),M}copy(c){return super.copy(c),this.v0.copy(c.v0),this.v1.copy(c.v1),this.v2.copy(c.v2),this.v3.copy(c.v3),this}toJSON(){const c=super.toJSON();return c.v0=this.v0.toArray(),c.v1=this.v1.toArray(),c.v2=this.v2.toArray(),c.v3=this.v3.toArray(),c}fromJSON(c){return super.fromJSON(c),this.v0.fromArray(c.v0),this.v1.fromArray(c.v1),this.v2.fromArray(c.v2),this.v3.fromArray(c.v3),this}}Rw.prototype.isCubicBezierCurve3=!0;class np extends eu{constructor(c=new Un,h=new Un){super(),this.type="LineCurve",this.v1=c,this.v2=h}getPoint(c,h=new Un){const M=h;return 1===c?M.copy(this.v2):(M.copy(this.v2).sub(this.v1),M.multiplyScalar(c).add(this.v1)),M}getPointAt(c,h){return this.getPoint(c,h)}getTangent(c,h){const M=h||new Un;return M.copy(this.v2).sub(this.v1).normalize(),M}copy(c){return super.copy(c),this.v1.copy(c.v1),this.v2.copy(c.v2),this}toJSON(){const c=super.toJSON();return c.v1=this.v1.toArray(),c.v2=this.v2.toArray(),c}fromJSON(c){return super.fromJSON(c),this.v1.fromArray(c.v1),this.v2.fromArray(c.v2),this}}np.prototype.isLineCurve=!0;class Bb extends eu{constructor(c=new Ze,h=new Ze){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=c,this.v2=h}getPoint(c,h=new Ze){const M=h;return 1===c?M.copy(this.v2):(M.copy(this.v2).sub(this.v1),M.multiplyScalar(c).add(this.v1)),M}getPointAt(c,h){return this.getPoint(c,h)}copy(c){return super.copy(c),this.v1.copy(c.v1),this.v2.copy(c.v2),this}toJSON(){const c=super.toJSON();return c.v1=this.v1.toArray(),c.v2=this.v2.toArray(),c}fromJSON(c){return super.fromJSON(c),this.v1.fromArray(c.v1),this.v2.fromArray(c.v2),this}}class Hb extends eu{constructor(c=new Un,h=new Un,M=new Un){super(),this.type="QuadraticBezierCurve",this.v0=c,this.v1=h,this.v2=M}getPoint(c,h=new Un){const M=h,E=this.v0,R=this.v1,V=this.v2;return M.set(Ob(c,E.x,R.x,V.x),Ob(c,E.y,R.y,V.y)),M}copy(c){return super.copy(c),this.v0.copy(c.v0),this.v1.copy(c.v1),this.v2.copy(c.v2),this}toJSON(){const c=super.toJSON();return c.v0=this.v0.toArray(),c.v1=this.v1.toArray(),c.v2=this.v2.toArray(),c}fromJSON(c){return super.fromJSON(c),this.v0.fromArray(c.v0),this.v1.fromArray(c.v1),this.v2.fromArray(c.v2),this}}Hb.prototype.isQuadraticBezierCurve=!0;class kv extends eu{constructor(c=new Ze,h=new Ze,M=new Ze){super(),this.type="QuadraticBezierCurve3",this.v0=c,this.v1=h,this.v2=M}getPoint(c,h=new Ze){const M=h,E=this.v0,R=this.v1,V=this.v2;return M.set(Ob(c,E.x,R.x,V.x),Ob(c,E.y,R.y,V.y),Ob(c,E.z,R.z,V.z)),M}copy(c){return super.copy(c),this.v0.copy(c.v0),this.v1.copy(c.v1),this.v2.copy(c.v2),this}toJSON(){const c=super.toJSON();return c.v0=this.v0.toArray(),c.v1=this.v1.toArray(),c.v2=this.v2.toArray(),c}fromJSON(c){return super.fromJSON(c),this.v0.fromArray(c.v0),this.v1.fromArray(c.v1),this.v2.fromArray(c.v2),this}}kv.prototype.isQuadraticBezierCurve3=!0;class t_ extends eu{constructor(c=[]){super(),this.type="SplineCurve",this.points=c}getPoint(c,h=new Un){const M=h,E=this.points,R=(E.length-1)*c,V=Math.floor(R),X=R-V,ee=E[0===V?V:V-1],te=E[V],me=E[V>E.length-2?E.length-1:V+1],de=E[V>E.length-3?E.length-1:V+2];return M.set(kh(X,ee.x,te.x,me.x,de.x),kh(X,ee.y,te.y,me.y,de.y)),M}copy(c){super.copy(c),this.points=[];for(let h=0,M=c.points.length;h<M;h++)this.points.push(c.points[h].clone());return this}toJSON(){const c=super.toJSON();c.points=[];for(let h=0,M=this.points.length;h<M;h++)c.points.push(this.points[h].toArray());return c}fromJSON(c){super.fromJSON(c),this.points=[];for(let h=0,M=c.points.length;h<M;h++){const E=c.points[h];this.points.push((new Un).fromArray(E))}return this}}t_.prototype.isSplineCurve=!0;var zb=Object.freeze({__proto__:null,ArcCurve:Tw,CatmullRomCurve3:Aw,CubicBezierCurve:Nb,CubicBezierCurve3:Rw,EllipseCurve:e_,LineCurve:np,LineCurve3:Bb,QuadraticBezierCurve:Hb,QuadraticBezierCurve3:kv,SplineCurve:t_});class LC extends eu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(c){this.curves.push(c)}closePath(){const c=this.curves[0].getPoint(0),h=this.curves[this.curves.length-1].getPoint(1);c.equals(h)||this.curves.push(new np(h,c))}getPoint(c){const h=c*this.getLength(),M=this.getCurveLengths();let E=0;for(;E<M.length;){if(M[E]>=h){const R=M[E]-h,V=this.curves[E],X=V.getLength();return V.getPointAt(0===X?0:1-R/X)}E++}return null}getLength(){const c=this.getCurveLengths();return c[c.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const c=[];let h=0;for(let M=0,E=this.curves.length;M<E;M++)h+=this.curves[M].getLength(),c.push(h);return this.cacheLengths=c,c}getSpacedPoints(c=40){const h=[];for(let M=0;M<=c;M++)h.push(this.getPoint(M/c));return this.autoClose&&h.push(h[0]),h}getPoints(c=12){const h=[];let M;for(let E=0,R=this.curves;E<R.length;E++){const V=R[E],ee=V.getPoints(V&&V.isEllipseCurve?2*c:V&&(V.isLineCurve||V.isLineCurve3)?1:V&&V.isSplineCurve?c*V.points.length:c);for(let te=0;te<ee.length;te++){const me=ee[te];M&&M.equals(me)||(h.push(me),M=me)}}return this.autoClose&&h.length>1&&!h[h.length-1].equals(h[0])&&h.push(h[0]),h}copy(c){super.copy(c),this.curves=[];for(let h=0,M=c.curves.length;h<M;h++)this.curves.push(c.curves[h].clone());return this.autoClose=c.autoClose,this}toJSON(){const c=super.toJSON();c.autoClose=this.autoClose,c.curves=[];for(let h=0,M=this.curves.length;h<M;h++)c.curves.push(this.curves[h].toJSON());return c}fromJSON(c){super.fromJSON(c),this.autoClose=c.autoClose,this.curves=[];for(let h=0,M=c.curves.length;h<M;h++){const E=c.curves[h];this.curves.push((new zb[E.type]).fromJSON(E))}return this}}class Pv extends LC{constructor(c){super(),this.type="Path",this.currentPoint=new Un,c&&this.setFromPoints(c)}setFromPoints(c){this.moveTo(c[0].x,c[0].y);for(let h=1,M=c.length;h<M;h++)this.lineTo(c[h].x,c[h].y);return this}moveTo(c,h){return this.currentPoint.set(c,h),this}lineTo(c,h){const M=new np(this.currentPoint.clone(),new Un(c,h));return this.curves.push(M),this.currentPoint.set(c,h),this}quadraticCurveTo(c,h,M,E){const R=new Hb(this.currentPoint.clone(),new Un(c,h),new Un(M,E));return this.curves.push(R),this.currentPoint.set(M,E),this}bezierCurveTo(c,h,M,E,R,V){const X=new Nb(this.currentPoint.clone(),new Un(c,h),new Un(M,E),new Un(R,V));return this.curves.push(X),this.currentPoint.set(R,V),this}splineThru(c){const h=[this.currentPoint.clone()].concat(c),M=new t_(h);return this.curves.push(M),this.currentPoint.copy(c[c.length-1]),this}arc(c,h,M,E,R,V){return this.absarc(c+this.currentPoint.x,h+this.currentPoint.y,M,E,R,V),this}absarc(c,h,M,E,R,V){return this.absellipse(c,h,M,M,E,R,V),this}ellipse(c,h,M,E,R,V,X,ee){return this.absellipse(c+this.currentPoint.x,h+this.currentPoint.y,M,E,R,V,X,ee),this}absellipse(c,h,M,E,R,V,X,ee){const te=new e_(c,h,M,E,R,V,X,ee);if(this.curves.length>0){const de=te.getPoint(0);de.equals(this.currentPoint)||this.lineTo(de.x,de.y)}this.curves.push(te);const me=te.getPoint(1);return this.currentPoint.copy(me),this}copy(c){return super.copy(c),this.currentPoint.copy(c.currentPoint),this}toJSON(){const c=super.toJSON();return c.currentPoint=this.currentPoint.toArray(),c}fromJSON(c){return super.fromJSON(c),this.currentPoint.fromArray(c.currentPoint),this}}class rd extends Pv{constructor(c){super(c),this.uuid=Yi.generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(c){const h=[];for(let M=0,E=this.holes.length;M<E;M++)h[M]=this.holes[M].getPoints(c);return h}extractPoints(c){return{shape:this.getPoints(c),holes:this.getPointsHoles(c)}}copy(c){super.copy(c),this.holes=[];for(let h=0,M=c.holes.length;h<M;h++)this.holes.push(c.holes[h].clone());return this}toJSON(){const c=super.toJSON();c.uuid=this.uuid,c.holes=[];for(let h=0,M=this.holes.length;h<M;h++)c.holes.push(this.holes[h].toJSON());return c}fromJSON(c){super.fromJSON(c),this.uuid=c.uuid,this.holes=[];for(let h=0,M=c.holes.length;h<M;h++){const E=c.holes[h];this.holes.push((new Pv).fromJSON(E))}return this}}class sd extends Ci{constructor(c,h=1){super(),this.type="Light",this.color=new er(c),this.intensity=h}copy(c){return super.copy(c),this.color.copy(c.color),this.intensity=c.intensity,this}toJSON(c){const h=super.toJSON(c);return h.object.color=this.color.getHex(),h.object.intensity=this.intensity,void 0!==this.groundColor&&(h.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(h.object.distance=this.distance),void 0!==this.angle&&(h.object.angle=this.angle),void 0!==this.decay&&(h.object.decay=this.decay),void 0!==this.penumbra&&(h.object.penumbra=this.penumbra),void 0!==this.shadow&&(h.object.shadow=this.shadow.toJSON()),h}}sd.prototype.isLight=!0;class kw extends sd{constructor(c,h,M){super(c,M),this.type="HemisphereLight",this.position.copy(Ci.DefaultUp),this.updateMatrix(),this.groundColor=new er(h)}copy(c){return sd.prototype.copy.call(this,c),this.groundColor.copy(c.groundColor),this}}kw.prototype.isHemisphereLight=!0;const Pw=new pr,Lw=new Ze,Fw=new Ze;class Vb{constructor(c){this.camera=c,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Un(512,512),this.map=null,this.mapPass=null,this.matrix=new pr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Wp,this._frameExtents=new Un(1,1),this._viewportCount=1,this._viewports=[new Rs(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(c){const h=this.camera,M=this.matrix;Lw.setFromMatrixPosition(c.matrixWorld),h.position.copy(Lw),Fw.setFromMatrixPosition(c.target.matrixWorld),h.lookAt(Fw),h.updateMatrixWorld(),Pw.multiplyMatrices(h.projectionMatrix,h.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Pw),M.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),M.multiply(h.projectionMatrix),M.multiply(h.matrixWorldInverse)}getViewport(c){return this._viewports[c]}getFrameExtents(){return this._frameExtents}copy(c){return this.camera=c.camera.clone(),this.bias=c.bias,this.radius=c.radius,this.mapSize.copy(c.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const c={};return 0!==this.bias&&(c.bias=this.bias),0!==this.normalBias&&(c.normalBias=this.normalBias),1!==this.radius&&(c.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(c.mapSize=this.mapSize.toArray()),c.camera=this.camera.toJSON(!1).object,delete c.camera.matrix,c}}class Ow extends Vb{constructor(){super(new ga(50,1,.5,500)),this.focus=1}updateMatrices(c){const h=this.camera,M=2*Yi.RAD2DEG*c.angle*this.focus,E=this.mapSize.width/this.mapSize.height,R=c.distance||h.far;(M!==h.fov||E!==h.aspect||R!==h.far)&&(h.fov=M,h.aspect=E,h.far=R,h.updateProjectionMatrix()),super.updateMatrices(c)}}Ow.prototype.isSpotLightShadow=!0;class Ph extends sd{constructor(c,h,M=0,E=Math.PI/3,R=0,V=1){super(c,h),this.type="SpotLight",this.position.copy(Ci.DefaultUp),this.updateMatrix(),this.target=new Ci,this.distance=M,this.angle=E,this.penumbra=R,this.decay=V,this.shadow=new Ow}get power(){return this.intensity*Math.PI}set power(c){this.intensity=c/Math.PI}copy(c){return super.copy(c),this.distance=c.distance,this.angle=c.angle,this.penumbra=c.penumbra,this.decay=c.decay,this.target=c.target.clone(),this.shadow=c.shadow.clone(),this}}Ph.prototype.isSpotLight=!0;const Lv=new pr,Fv=new Ze,Nw=new Ze;class KA extends Vb{constructor(){super(new ga(90,1,.5,500)),this._frameExtents=new Un(4,2),this._viewportCount=6,this._viewports=[new Rs(2,1,1,1),new Rs(0,1,1,1),new Rs(3,1,1,1),new Rs(1,1,1,1),new Rs(3,0,1,1),new Rs(1,0,1,1)],this._cubeDirections=[new Ze(1,0,0),new Ze(-1,0,0),new Ze(0,0,1),new Ze(0,0,-1),new Ze(0,1,0),new Ze(0,-1,0)],this._cubeUps=[new Ze(0,1,0),new Ze(0,1,0),new Ze(0,1,0),new Ze(0,1,0),new Ze(0,0,1),new Ze(0,0,-1)]}updateMatrices(c,h=0){const M=this.camera,E=this.matrix;Fv.setFromMatrixPosition(c.matrixWorld),M.position.copy(Fv),Nw.copy(M.position),Nw.add(this._cubeDirections[h]),M.up.copy(this._cubeUps[h]),M.lookAt(Nw),M.updateMatrixWorld(),E.makeTranslation(-Fv.x,-Fv.y,-Fv.z),Lv.multiplyMatrices(M.projectionMatrix,M.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Lv)}}KA.prototype.isPointLightShadow=!0;class Ov extends sd{constructor(c,h,M=0,E=1){super(c,h),this.type="PointLight",this.distance=M,this.decay=E,this.shadow=new KA}get power(){return 4*this.intensity*Math.PI}set power(c){this.intensity=c/(4*Math.PI)}copy(c){return super.copy(c),this.distance=c.distance,this.decay=c.decay,this.shadow=c.shadow.clone(),this}}Ov.prototype.isPointLight=!0;class n_ extends sc{constructor(c=-1,h=1,M=1,E=-1,R=.1,V=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=c,this.right=h,this.top=M,this.bottom=E,this.near=R,this.far=V,this.updateProjectionMatrix()}copy(c,h){return super.copy(c,h),this.left=c.left,this.right=c.right,this.top=c.top,this.bottom=c.bottom,this.near=c.near,this.far=c.far,this.zoom=c.zoom,this.view=null===c.view?null:Object.assign({},c.view),this}setViewOffset(c,h,M,E,R,V){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=c,this.view.fullHeight=h,this.view.offsetX=M,this.view.offsetY=E,this.view.width=R,this.view.height=V,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const c=(this.right-this.left)/(2*this.zoom),h=(this.top-this.bottom)/(2*this.zoom),M=(this.right+this.left)/2,E=(this.top+this.bottom)/2;let R=M-c,V=M+c,X=E+h,ee=E-h;if(null!==this.view&&this.view.enabled){const te=(this.right-this.left)/this.view.fullWidth/this.zoom,me=(this.top-this.bottom)/this.view.fullHeight/this.zoom;R+=te*this.view.offsetX,V=R+te*this.view.width,X-=me*this.view.offsetY,ee=X-me*this.view.height}this.projectionMatrix.makeOrthographic(R,V,X,ee,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(c){const h=Ci.prototype.toJSON.call(this,c);return h.object.zoom=this.zoom,h.object.left=this.left,h.object.right=this.right,h.object.top=this.top,h.object.bottom=this.bottom,h.object.near=this.near,h.object.far=this.far,null!==this.view&&(h.object.view=Object.assign({},this.view)),h}}n_.prototype.isOrthographicCamera=!0;class Ub extends Vb{constructor(){super(new n_(-5,5,5,-5,.5,500))}}Ub.prototype.isDirectionalLightShadow=!0;class Cm extends sd{constructor(c,h){super(c,h),this.type="DirectionalLight",this.position.copy(Ci.DefaultUp),this.updateMatrix(),this.target=new Ci,this.shadow=new Ub}copy(c){return super.copy(c),this.target=c.target.clone(),this.shadow=c.shadow.clone(),this}}Cm.prototype.isDirectionalLight=!0;class Bw extends sd{constructor(c,h){super(c,h),this.type="AmbientLight"}}Bw.prototype.isAmbientLight=!0;class Nv extends sd{constructor(c,h,M=10,E=10){super(c,h),this.type="RectAreaLight",this.width=M,this.height=E}copy(c){return super.copy(c),this.width=c.width,this.height=c.height,this}toJSON(c){const h=super.toJSON(c);return h.object.width=this.width,h.object.height=this.height,h}}Nv.prototype.isRectAreaLight=!0;class Gb{constructor(){this.coefficients=[];for(let c=0;c<9;c++)this.coefficients.push(new Ze)}set(c){for(let h=0;h<9;h++)this.coefficients[h].copy(c[h]);return this}zero(){for(let c=0;c<9;c++)this.coefficients[c].set(0,0,0);return this}getAt(c,h){const M=c.x,E=c.y,R=c.z,V=this.coefficients;return h.copy(V[0]).multiplyScalar(.282095),h.addScaledVector(V[1],.488603*E),h.addScaledVector(V[2],.488603*R),h.addScaledVector(V[3],.488603*M),h.addScaledVector(V[4],M*E*1.092548),h.addScaledVector(V[5],E*R*1.092548),h.addScaledVector(V[6],.315392*(3*R*R-1)),h.addScaledVector(V[7],M*R*1.092548),h.addScaledVector(V[8],.546274*(M*M-E*E)),h}getIrradianceAt(c,h){const M=c.x,E=c.y,R=c.z,V=this.coefficients;return h.copy(V[0]).multiplyScalar(.886227),h.addScaledVector(V[1],1.023328*E),h.addScaledVector(V[2],1.023328*R),h.addScaledVector(V[3],1.023328*M),h.addScaledVector(V[4],.858086*M*E),h.addScaledVector(V[5],.858086*E*R),h.addScaledVector(V[6],.743125*R*R-.247708),h.addScaledVector(V[7],.858086*M*R),h.addScaledVector(V[8],.429043*(M*M-E*E)),h}add(c){for(let h=0;h<9;h++)this.coefficients[h].add(c.coefficients[h]);return this}addScaledSH(c,h){for(let M=0;M<9;M++)this.coefficients[M].addScaledVector(c.coefficients[M],h);return this}scale(c){for(let h=0;h<9;h++)this.coefficients[h].multiplyScalar(c);return this}lerp(c,h){for(let M=0;M<9;M++)this.coefficients[M].lerp(c.coefficients[M],h);return this}equals(c){for(let h=0;h<9;h++)if(!this.coefficients[h].equals(c.coefficients[h]))return!1;return!0}copy(c){return this.set(c.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(c,h=0){const M=this.coefficients;for(let E=0;E<9;E++)M[E].fromArray(c,h+3*E);return this}toArray(c=[],h=0){const M=this.coefficients;for(let E=0;E<9;E++)M[E].toArray(c,h+3*E);return c}static getBasisAt(c,h){const M=c.x,E=c.y,R=c.z;h[0]=.282095,h[1]=.488603*E,h[2]=.488603*R,h[3]=.488603*M,h[4]=1.092548*M*E,h[5]=1.092548*E*R,h[6]=.315392*(3*R*R-1),h[7]=1.092548*M*R,h[8]=.546274*(M*M-E*E)}}Gb.prototype.isSphericalHarmonics3=!0;class i_ extends sd{constructor(c=new Gb,h=1){super(void 0,h),this.sh=c}copy(c){return super.copy(c),this.sh.copy(c.sh),this}fromJSON(c){return this.intensity=c.intensity,this.sh.fromArray(c.sh),this}toJSON(c){const h=super.toJSON(c);return h.object.sh=this.sh.toArray(),h}}i_.prototype.isLightProbe=!0;class Hw extends bl{constructor(c){super(c),this.textures={}}load(c,h,M,E){const R=this,V=new Hu(R.manager);V.setPath(R.path),V.setRequestHeader(R.requestHeader),V.setWithCredentials(R.withCredentials),V.load(c,function(X){try{h(R.parse(JSON.parse(X)))}catch(ee){E?E(ee):console.error(ee),R.manager.itemError(c)}},M,E)}parse(c){const h=this.textures;function M(R){return void 0===h[R]&&console.warn("THREE.MaterialLoader: Undefined texture",R),h[R]}const E=new Xg[c.type];if(void 0!==c.uuid&&(E.uuid=c.uuid),void 0!==c.name&&(E.name=c.name),void 0!==c.color&&void 0!==E.color&&E.color.setHex(c.color),void 0!==c.roughness&&(E.roughness=c.roughness),void 0!==c.metalness&&(E.metalness=c.metalness),void 0!==c.sheen&&(E.sheen=(new er).setHex(c.sheen)),void 0!==c.emissive&&void 0!==E.emissive&&E.emissive.setHex(c.emissive),void 0!==c.specular&&void 0!==E.specular&&E.specular.setHex(c.specular),void 0!==c.shininess&&(E.shininess=c.shininess),void 0!==c.clearcoat&&(E.clearcoat=c.clearcoat),void 0!==c.clearcoatRoughness&&(E.clearcoatRoughness=c.clearcoatRoughness),void 0!==c.fog&&(E.fog=c.fog),void 0!==c.flatShading&&(E.flatShading=c.flatShading),void 0!==c.blending&&(E.blending=c.blending),void 0!==c.combine&&(E.combine=c.combine),void 0!==c.side&&(E.side=c.side),void 0!==c.opacity&&(E.opacity=c.opacity),void 0!==c.transparent&&(E.transparent=c.transparent),void 0!==c.alphaTest&&(E.alphaTest=c.alphaTest),void 0!==c.depthTest&&(E.depthTest=c.depthTest),void 0!==c.depthWrite&&(E.depthWrite=c.depthWrite),void 0!==c.colorWrite&&(E.colorWrite=c.colorWrite),void 0!==c.stencilWrite&&(E.stencilWrite=c.stencilWrite),void 0!==c.stencilWriteMask&&(E.stencilWriteMask=c.stencilWriteMask),void 0!==c.stencilFunc&&(E.stencilFunc=c.stencilFunc),void 0!==c.stencilRef&&(E.stencilRef=c.stencilRef),void 0!==c.stencilFuncMask&&(E.stencilFuncMask=c.stencilFuncMask),void 0!==c.stencilFail&&(E.stencilFail=c.stencilFail),void 0!==c.stencilZFail&&(E.stencilZFail=c.stencilZFail),void 0!==c.stencilZPass&&(E.stencilZPass=c.stencilZPass),void 0!==c.wireframe&&(E.wireframe=c.wireframe),void 0!==c.wireframeLinewidth&&(E.wireframeLinewidth=c.wireframeLinewidth),void 0!==c.wireframeLinecap&&(E.wireframeLinecap=c.wireframeLinecap),void 0!==c.wireframeLinejoin&&(E.wireframeLinejoin=c.wireframeLinejoin),void 0!==c.rotation&&(E.rotation=c.rotation),1!==c.linewidth&&(E.linewidth=c.linewidth),void 0!==c.dashSize&&(E.dashSize=c.dashSize),void 0!==c.gapSize&&(E.gapSize=c.gapSize),void 0!==c.scale&&(E.scale=c.scale),void 0!==c.polygonOffset&&(E.polygonOffset=c.polygonOffset),void 0!==c.polygonOffsetFactor&&(E.polygonOffsetFactor=c.polygonOffsetFactor),void 0!==c.polygonOffsetUnits&&(E.polygonOffsetUnits=c.polygonOffsetUnits),void 0!==c.skinning&&(E.skinning=c.skinning),void 0!==c.morphTargets&&(E.morphTargets=c.morphTargets),void 0!==c.morphNormals&&(E.morphNormals=c.morphNormals),void 0!==c.dithering&&(E.dithering=c.dithering),void 0!==c.vertexTangents&&(E.vertexTangents=c.vertexTangents),void 0!==c.visible&&(E.visible=c.visible),void 0!==c.toneMapped&&(E.toneMapped=c.toneMapped),void 0!==c.userData&&(E.userData=c.userData),void 0!==c.vertexColors&&(E.vertexColors="number"==typeof c.vertexColors?c.vertexColors>0:c.vertexColors),void 0!==c.uniforms)for(const R in c.uniforms){const V=c.uniforms[R];switch(E.uniforms[R]={},V.type){case"t":E.uniforms[R].value=M(V.value);break;case"c":E.uniforms[R].value=(new er).setHex(V.value);break;case"v2":E.uniforms[R].value=(new Un).fromArray(V.value);break;case"v3":E.uniforms[R].value=(new Ze).fromArray(V.value);break;case"v4":E.uniforms[R].value=(new Rs).fromArray(V.value);break;case"m3":E.uniforms[R].value=(new lo).fromArray(V.value);break;case"m4":E.uniforms[R].value=(new pr).fromArray(V.value);break;default:E.uniforms[R].value=V.value}}if(void 0!==c.defines&&(E.defines=c.defines),void 0!==c.vertexShader&&(E.vertexShader=c.vertexShader),void 0!==c.fragmentShader&&(E.fragmentShader=c.fragmentShader),void 0!==c.extensions)for(const R in c.extensions)E.extensions[R]=c.extensions[R];if(void 0!==c.shading&&(E.flatShading=1===c.shading),void 0!==c.size&&(E.size=c.size),void 0!==c.sizeAttenuation&&(E.sizeAttenuation=c.sizeAttenuation),void 0!==c.map&&(E.map=M(c.map)),void 0!==c.matcap&&(E.matcap=M(c.matcap)),void 0!==c.alphaMap&&(E.alphaMap=M(c.alphaMap)),void 0!==c.bumpMap&&(E.bumpMap=M(c.bumpMap)),void 0!==c.bumpScale&&(E.bumpScale=c.bumpScale),void 0!==c.normalMap&&(E.normalMap=M(c.normalMap)),void 0!==c.normalMapType&&(E.normalMapType=c.normalMapType),void 0!==c.normalScale){let R=c.normalScale;!1===Array.isArray(R)&&(R=[R,R]),E.normalScale=(new Un).fromArray(R)}return void 0!==c.displacementMap&&(E.displacementMap=M(c.displacementMap)),void 0!==c.displacementScale&&(E.displacementScale=c.displacementScale),void 0!==c.displacementBias&&(E.displacementBias=c.displacementBias),void 0!==c.roughnessMap&&(E.roughnessMap=M(c.roughnessMap)),void 0!==c.metalnessMap&&(E.metalnessMap=M(c.metalnessMap)),void 0!==c.emissiveMap&&(E.emissiveMap=M(c.emissiveMap)),void 0!==c.emissiveIntensity&&(E.emissiveIntensity=c.emissiveIntensity),void 0!==c.specularMap&&(E.specularMap=M(c.specularMap)),void 0!==c.envMap&&(E.envMap=M(c.envMap)),void 0!==c.envMapIntensity&&(E.envMapIntensity=c.envMapIntensity),void 0!==c.reflectivity&&(E.reflectivity=c.reflectivity),void 0!==c.refractionRatio&&(E.refractionRatio=c.refractionRatio),void 0!==c.lightMap&&(E.lightMap=M(c.lightMap)),void 0!==c.lightMapIntensity&&(E.lightMapIntensity=c.lightMapIntensity),void 0!==c.aoMap&&(E.aoMap=M(c.aoMap)),void 0!==c.aoMapIntensity&&(E.aoMapIntensity=c.aoMapIntensity),void 0!==c.gradientMap&&(E.gradientMap=M(c.gradientMap)),void 0!==c.clearcoatMap&&(E.clearcoatMap=M(c.clearcoatMap)),void 0!==c.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap=M(c.clearcoatRoughnessMap)),void 0!==c.clearcoatNormalMap&&(E.clearcoatNormalMap=M(c.clearcoatNormalMap)),void 0!==c.clearcoatNormalScale&&(E.clearcoatNormalScale=(new Un).fromArray(c.clearcoatNormalScale)),void 0!==c.transmission&&(E.transmission=c.transmission),void 0!==c.transmissionMap&&(E.transmissionMap=M(c.transmissionMap)),E}setTextures(c){return this.textures=c,this}}const zw={decodeText:function(x){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(x);let c="";for(let h=0,M=x.length;h<M;h++)c+=String.fromCharCode(x[h]);try{return decodeURIComponent(escape(c))}catch(h){return c}},extractUrlBase:function(x){const c=x.lastIndexOf("/");return-1===c?"./":x.substr(0,c+1)}};function Sm(){wr.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function Wb(x,c,h,M){"number"==typeof h&&(M=h,h=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Wr.call(this,x,c,h),this.meshPerAttribute=M||1}Sm.prototype=Object.assign(Object.create(wr.prototype),{constructor:Sm,isInstancedBufferGeometry:!0,copy:function(x){return wr.prototype.copy.call(this,x),this.instanceCount=x.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const x=wr.prototype.toJSON.call(this);return x.instanceCount=this.instanceCount,x.isInstancedBufferGeometry=!0,x}}),Wb.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Wb,isInstancedBufferAttribute:!0,copy:function(x){return Wr.prototype.copy.call(this,x),this.meshPerAttribute=x.meshPerAttribute,this},toJSON:function(){const x=Wr.prototype.toJSON.call(this);return x.meshPerAttribute=this.meshPerAttribute,x.isInstancedBufferAttribute=!0,x}});class FC extends bl{constructor(c){super(c)}load(c,h,M,E){const R=this,V=new Hu(R.manager);V.setPath(R.path),V.setRequestHeader(R.requestHeader),V.setWithCredentials(R.withCredentials),V.load(c,function(X){try{h(R.parse(JSON.parse(X)))}catch(ee){E?E(ee):console.error(ee),R.manager.itemError(c)}},M,E)}parse(c){const h={},M={};function E(be,Te){if(void 0!==h[Te])return h[Te];const ze=be.interleavedBuffers[Te],ke=function R(be,Te){if(void 0!==M[Te])return M[Te];const ke=new Uint32Array(be.arrayBuffers[Te]).buffer;return M[Te]=ke,ke}(be,ze.buffer),at=new Jc(_h(ze.type,ke),ze.stride);return at.uuid=ze.uuid,h[Te]=at,at}const V=c.isInstancedBufferGeometry?new Sm:new wr,X=c.data.index;if(void 0!==X){const be=_h(X.type,X.array);V.setIndex(new Wr(be,1))}const ee=c.data.attributes;for(const be in ee){const Te=ee[be];let Oe;if(Te.isInterleavedBufferAttribute)Oe=new td(E(c.data,Te.data),Te.itemSize,Te.offset,Te.normalized);else{const ze=_h(Te.type,Te.array);Oe=new(Te.isInstancedBufferAttribute?Wb:Wr)(ze,Te.itemSize,Te.normalized)}void 0!==Te.name&&(Oe.name=Te.name),V.setAttribute(be,Oe)}const te=c.data.morphAttributes;if(te)for(const be in te){const Te=te[be],Oe=[];for(let ze=0,ke=Te.length;ze<ke;ze++){const Ee=Te[ze];let at;at=Ee.isInterleavedBufferAttribute?new td(E(c.data,Ee.data),Ee.itemSize,Ee.offset,Ee.normalized):new Wr(_h(Ee.type,Ee.array),Ee.itemSize,Ee.normalized),void 0!==Ee.name&&(at.name=Ee.name),Oe.push(at)}V.morphAttributes[be]=Oe}c.data.morphTargetsRelative&&(V.morphTargetsRelative=!0);const de=c.data.groups||c.data.drawcalls||c.data.offsets;if(void 0!==de)for(let be=0,Te=de.length;be!==Te;++be){const Oe=de[be];V.addGroup(Oe.start,Oe.count,Oe.materialIndex)}const ge=c.data.boundingSphere;if(void 0!==ge){const be=new Ze;void 0!==ge.center&&be.fromArray(ge.center),V.boundingSphere=new Hs(be,ge.radius)}return c.name&&(V.name=c.name),c.userData&&(V.userData=c.userData),V}}class OC extends bl{constructor(c){super(c)}load(c,h,M,E){const R=this,V=""===this.path?zw.extractUrlBase(c):this.path;this.resourcePath=this.resourcePath||V;const X=new Hu(this.manager);X.setPath(this.path),X.setRequestHeader(this.requestHeader),X.setWithCredentials(this.withCredentials),X.load(c,function(ee){let te=null;try{te=JSON.parse(ee)}catch(de){return void 0!==E&&E(de),void console.error("THREE:ObjectLoader: Can't parse "+c+".",de.message)}const me=te.metadata;void 0!==me&&void 0!==me.type&&"geometry"!==me.type.toLowerCase()?R.parse(te,h):console.error("THREE.ObjectLoader: Can't load "+c)},M,E)}parse(c,h){const M=this.parseAnimations(c.animations),E=this.parseShapes(c.shapes),R=this.parseGeometries(c.geometries,E),V=this.parseImages(c.images,function(){void 0!==h&&h(te)}),X=this.parseTextures(c.textures,V),ee=this.parseMaterials(c.materials,X),te=this.parseObject(c.object,R,ee,M),me=this.parseSkeletons(c.skeletons,te);if(this.bindSkeletons(te,me),void 0!==h){let de=!1;for(const ge in V)if(V[ge]instanceof HTMLImageElement){de=!0;break}!1===de&&h(te)}return te}parseShapes(c){const h={};if(void 0!==c)for(let M=0,E=c.length;M<E;M++){const R=(new rd).fromJSON(c[M]);h[R.uuid]=R}return h}parseSkeletons(c,h){const M={},E={};if(h.traverse(function(R){R.isBone&&(E[R.uuid]=R)}),void 0!==c)for(let R=0,V=c.length;R<V;R++){const X=(new Bg).fromJSON(c[R],E);M[X.uuid]=X}return M}parseGeometries(c,h){const M={};let E;if(void 0!==c){const R=new FC;for(let V=0,X=c.length;V<X;V++){let ee;const te=c[V];switch(te.type){case"PlaneGeometry":case"PlaneBufferGeometry":ee=new $c[te.type](te.width,te.height,te.widthSegments,te.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":ee=new $c[te.type](te.width,te.height,te.depth,te.widthSegments,te.heightSegments,te.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":ee=new $c[te.type](te.radius,te.segments,te.thetaStart,te.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":ee=new $c[te.type](te.radiusTop,te.radiusBottom,te.height,te.radialSegments,te.heightSegments,te.openEnded,te.thetaStart,te.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":ee=new $c[te.type](te.radius,te.height,te.radialSegments,te.heightSegments,te.openEnded,te.thetaStart,te.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":ee=new $c[te.type](te.radius,te.widthSegments,te.heightSegments,te.phiStart,te.phiLength,te.thetaStart,te.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":ee=new $c[te.type](te.radius,te.detail);break;case"RingGeometry":case"RingBufferGeometry":ee=new $c[te.type](te.innerRadius,te.outerRadius,te.thetaSegments,te.phiSegments,te.thetaStart,te.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":ee=new $c[te.type](te.radius,te.tube,te.radialSegments,te.tubularSegments,te.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":ee=new $c[te.type](te.radius,te.tube,te.tubularSegments,te.radialSegments,te.p,te.q);break;case"TubeGeometry":case"TubeBufferGeometry":ee=new $c[te.type]((new zb[te.path.type]).fromJSON(te.path),te.tubularSegments,te.radius,te.radialSegments,te.closed);break;case"LatheGeometry":case"LatheBufferGeometry":ee=new $c[te.type](te.points,te.segments,te.phiStart,te.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":ee=new $c[te.type](te.vertices,te.indices,te.radius,te.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":E=[];for(let de=0,ge=te.shapes.length;de<ge;de++)E.push(h[te.shapes[de]]);ee=new $c[te.type](E,te.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":E=[];for(let de=0,ge=te.shapes.length;de<ge;de++)E.push(h[te.shapes[de]]);const me=te.options.extrudePath;void 0!==me&&(te.options.extrudePath=(new zb[me.type]).fromJSON(me)),ee=new $c[te.type](E,te.options);break;case"BufferGeometry":case"InstancedBufferGeometry":ee=R.parse(te);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+te.type+'"');continue}ee.uuid=te.uuid,void 0!==te.name&&(ee.name=te.name),!0===ee.isBufferGeometry&&void 0!==te.userData&&(ee.userData=te.userData),M[te.uuid]=ee}}return M}parseMaterials(c,h){const M={},E={};if(void 0!==c){const R=new Hw;R.setTextures(h);for(let V=0,X=c.length;V<X;V++){const ee=c[V];if("MultiMaterial"===ee.type){const te=[];for(let me=0;me<ee.materials.length;me++){const de=ee.materials[me];void 0===M[de.uuid]&&(M[de.uuid]=R.parse(de)),te.push(M[de.uuid])}E[ee.uuid]=te}else void 0===M[ee.uuid]&&(M[ee.uuid]=R.parse(ee)),E[ee.uuid]=M[ee.uuid]}}return E}parseAnimations(c){const h={};if(void 0!==c)for(let M=0;M<c.length;M++){const R=Qg.parse(c[M]);h[R.uuid]=R}return h}parseImages(c,h){const M=this,E={};let R;function X(ee){if("string"==typeof ee){const te=ee;return function V(ee){return M.manager.itemStart(ee),R.load(ee,function(){M.manager.itemEnd(ee)},void 0,function(){M.manager.itemError(ee),M.manager.itemEnd(ee)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(te)?te:M.resourcePath+te)}return ee.data?{data:_h(ee.type,ee.data),width:ee.width,height:ee.height}:null}if(void 0!==c&&c.length>0){const ee=new Cw(h);R=new $g(ee),R.setCrossOrigin(this.crossOrigin);for(let te=0,me=c.length;te<me;te++){const de=c[te],ge=de.url;if(Array.isArray(ge)){E[de.uuid]=[];for(let be=0,Te=ge.length;be<Te;be++){const ze=X(ge[be]);null!==ze&&(ze instanceof HTMLImageElement?E[de.uuid].push(ze):E[de.uuid].push(new eh(ze.data,ze.width,ze.height)))}}else{const be=X(de.url);null!==be&&(E[de.uuid]=be)}}}return E}parseTextures(c,h){function M(R,V){return"number"==typeof R?R:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",R),V[R])}const E={};if(void 0!==c)for(let R=0,V=c.length;R<V;R++){const X=c[R];let ee;void 0===X.image&&console.warn('THREE.ObjectLoader: No "image" specified for',X.uuid),void 0===h[X.image]&&console.warn("THREE.ObjectLoader: Undefined image",X.image);const te=h[X.image];Array.isArray(te)?(ee=new bc(te),6===te.length&&(ee.needsUpdate=!0)):(ee=te&&te.data?new eh(te.data,te.width,te.height):new kr(te),te&&(ee.needsUpdate=!0)),ee.uuid=X.uuid,void 0!==X.name&&(ee.name=X.name),void 0!==X.mapping&&(ee.mapping=M(X.mapping,r_)),void 0!==X.offset&&ee.offset.fromArray(X.offset),void 0!==X.repeat&&ee.repeat.fromArray(X.repeat),void 0!==X.center&&ee.center.fromArray(X.center),void 0!==X.rotation&&(ee.rotation=X.rotation),void 0!==X.wrap&&(ee.wrapS=M(X.wrap[0],Vw),ee.wrapT=M(X.wrap[1],Vw)),void 0!==X.format&&(ee.format=X.format),void 0!==X.type&&(ee.type=X.type),void 0!==X.encoding&&(ee.encoding=X.encoding),void 0!==X.minFilter&&(ee.minFilter=M(X.minFilter,NC)),void 0!==X.magFilter&&(ee.magFilter=M(X.magFilter,NC)),void 0!==X.anisotropy&&(ee.anisotropy=X.anisotropy),void 0!==X.flipY&&(ee.flipY=X.flipY),void 0!==X.premultiplyAlpha&&(ee.premultiplyAlpha=X.premultiplyAlpha),void 0!==X.unpackAlignment&&(ee.unpackAlignment=X.unpackAlignment),E[X.uuid]=ee}return E}parseObject(c,h,M,E){let R,ee,te;function V(me){return void 0===h[me]&&console.warn("THREE.ObjectLoader: Undefined geometry",me),h[me]}function X(me){if(void 0!==me){if(Array.isArray(me)){const de=[];for(let ge=0,be=me.length;ge<be;ge++){const Te=me[ge];void 0===M[Te]&&console.warn("THREE.ObjectLoader: Undefined material",Te),de.push(M[Te])}return de}return void 0===M[me]&&console.warn("THREE.ObjectLoader: Undefined material",me),M[me]}}switch(c.type){case"Scene":R=new Wf,void 0!==c.background&&Number.isInteger(c.background)&&(R.background=new er(c.background)),void 0!==c.fog&&("Fog"===c.fog.type?R.fog=new Lg(c.fog.color,c.fog.near,c.fog.far):"FogExp2"===c.fog.type&&(R.fog=new _v(c.fog.color,c.fog.density)));break;case"PerspectiveCamera":R=new ga(c.fov,c.aspect,c.near,c.far),void 0!==c.focus&&(R.focus=c.focus),void 0!==c.zoom&&(R.zoom=c.zoom),void 0!==c.filmGauge&&(R.filmGauge=c.filmGauge),void 0!==c.filmOffset&&(R.filmOffset=c.filmOffset),void 0!==c.view&&(R.view=Object.assign({},c.view));break;case"OrthographicCamera":R=new n_(c.left,c.right,c.top,c.bottom,c.near,c.far),void 0!==c.zoom&&(R.zoom=c.zoom),void 0!==c.view&&(R.view=Object.assign({},c.view));break;case"AmbientLight":R=new Bw(c.color,c.intensity);break;case"DirectionalLight":R=new Cm(c.color,c.intensity);break;case"PointLight":R=new Ov(c.color,c.intensity,c.distance,c.decay);break;case"RectAreaLight":R=new Nv(c.color,c.intensity,c.width,c.height);break;case"SpotLight":R=new Ph(c.color,c.intensity,c.distance,c.angle,c.penumbra,c.decay);break;case"HemisphereLight":R=new kw(c.color,c.groundColor,c.intensity);break;case"LightProbe":R=(new i_).fromJSON(c);break;case"SkinnedMesh":ee=V(c.geometry),te=X(c.material),R=new Ng(ee,te),void 0!==c.bindMode&&(R.bindMode=c.bindMode),void 0!==c.bindMatrix&&R.bindMatrix.fromArray(c.bindMatrix),void 0!==c.skeleton&&(R.skeleton=c.skeleton);break;case"Mesh":ee=V(c.geometry),te=X(c.material),R=new io(ee,te);break;case"InstancedMesh":ee=V(c.geometry),te=X(c.material);const de=c.instanceMatrix;R=new gm(ee,te,c.count),R.instanceMatrix=new Wr(new Float32Array(de.array),16);break;case"LOD":R=new $x;break;case"Line":R=new Th(V(c.geometry),X(c.material));break;case"LineLoop":R=new pb(V(c.geometry),X(c.material));break;case"LineSegments":R=new Kc(V(c.geometry),X(c.material));break;case"PointCloud":case"Points":R=new _m(V(c.geometry),X(c.material));break;case"Sprite":R=new bv(X(c.material));break;case"Group":R=new Pg;break;case"Bone":R=new wv;break;default:R=new Ci}if(R.uuid=c.uuid,void 0!==c.name&&(R.name=c.name),void 0!==c.matrix?(R.matrix.fromArray(c.matrix),void 0!==c.matrixAutoUpdate&&(R.matrixAutoUpdate=c.matrixAutoUpdate),R.matrixAutoUpdate&&R.matrix.decompose(R.position,R.quaternion,R.scale)):(void 0!==c.position&&R.position.fromArray(c.position),void 0!==c.rotation&&R.rotation.fromArray(c.rotation),void 0!==c.quaternion&&R.quaternion.fromArray(c.quaternion),void 0!==c.scale&&R.scale.fromArray(c.scale)),void 0!==c.castShadow&&(R.castShadow=c.castShadow),void 0!==c.receiveShadow&&(R.receiveShadow=c.receiveShadow),c.shadow&&(void 0!==c.shadow.bias&&(R.shadow.bias=c.shadow.bias),void 0!==c.shadow.normalBias&&(R.shadow.normalBias=c.shadow.normalBias),void 0!==c.shadow.radius&&(R.shadow.radius=c.shadow.radius),void 0!==c.shadow.mapSize&&R.shadow.mapSize.fromArray(c.shadow.mapSize),void 0!==c.shadow.camera&&(R.shadow.camera=this.parseObject(c.shadow.camera))),void 0!==c.visible&&(R.visible=c.visible),void 0!==c.frustumCulled&&(R.frustumCulled=c.frustumCulled),void 0!==c.renderOrder&&(R.renderOrder=c.renderOrder),void 0!==c.userData&&(R.userData=c.userData),void 0!==c.layers&&(R.layers.mask=c.layers),void 0!==c.children){const me=c.children;for(let de=0;de<me.length;de++)R.add(this.parseObject(me[de],h,M,E))}if(void 0!==c.animations){const me=c.animations;for(let de=0;de<me.length;de++)R.animations.push(E[me[de]])}if("LOD"===c.type){void 0!==c.autoUpdate&&(R.autoUpdate=c.autoUpdate);const me=c.levels;for(let de=0;de<me.length;de++){const ge=me[de],be=R.getObjectByProperty("uuid",ge.object);void 0!==be&&R.addLevel(be,ge.distance)}}return R}bindSkeletons(c,h){0!==Object.keys(h).length&&c.traverse(function(M){if(!0===M.isSkinnedMesh&&void 0!==M.skeleton){const E=h[M.skeleton];void 0===E?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",M.skeleton):M.bind(E,M.bindMatrix)}})}setTexturePath(c){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(c)}}const r_={UVMapping:Oi,CubeReflectionMapping:mi,CubeRefractionMapping:fr,EquirectangularReflectionMapping:qs,EquirectangularRefractionMapping:Sr,CubeUVReflectionMapping:oo,CubeUVRefractionMapping:fa},Vw={RepeatWrapping:ea,ClampToEdgeWrapping:os,MirroredRepeatWrapping:Ls},NC={NearestFilter:vo,NearestMipmapNearestFilter:ca,NearestMipmapLinearFilter:sr,LinearFilter:$i,LinearMipmapNearestFilter:Is,LinearMipmapLinearFilter:k};function Uw(x){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),bl.call(this,x),this.options={premultiplyAlpha:"none"}}Uw.prototype=Object.assign(Object.create(bl.prototype),{constructor:Uw,isImageBitmapLoader:!0,setOptions:function(c){return this.options=c,this},load:function(x,c,h,M){void 0===x&&(x=""),void 0!==this.path&&(x=this.path+x),x=this.manager.resolveURL(x);const E=this,R=Xl.get(x);if(void 0!==R)return E.manager.itemStart(x),setTimeout(function(){c&&c(R),E.manager.itemEnd(x)},0),R;const V={};V.credentials="anonymous"===this.crossOrigin?"same-origin":"include",V.headers=this.requestHeader,fetch(x,V).then(function(X){return X.blob()}).then(function(X){return createImageBitmap(X,Object.assign(E.options,{colorSpaceConversion:"none"}))}).then(function(X){Xl.add(x,X),c&&c(X),E.manager.itemEnd(x)}).catch(function(X){M&&M(X),E.manager.itemError(x),E.manager.itemEnd(x)}),E.manager.itemStart(x)}});class Em{constructor(){this.type="ShapePath",this.color=new er,this.subPaths=[],this.currentPath=null}moveTo(c,h){return this.currentPath=new Pv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(c,h),this}lineTo(c,h){return this.currentPath.lineTo(c,h),this}quadraticCurveTo(c,h,M,E){return this.currentPath.quadraticCurveTo(c,h,M,E),this}bezierCurveTo(c,h,M,E,R,V){return this.currentPath.bezierCurveTo(c,h,M,E,R,V),this}splineThru(c){return this.currentPath.splineThru(c),this}toShapes(c,h){function M(Ee){const at=[];for(let rt=0,gt=Ee.length;rt<gt;rt++){const tt=Ee[rt],Rt=new rd;Rt.curves=tt.curves,at.push(Rt)}return at}function E(Ee,at){const rt=at.length;let gt=!1;for(let tt=rt-1,Rt=0;Rt<rt;tt=Rt++){let rn=at[tt],Ut=at[Rt],Zt=Ut.x-rn.x,dn=Ut.y-rn.y;if(Math.abs(dn)>Number.EPSILON){if(dn<0&&(rn=at[Rt],Zt=-Zt,Ut=at[tt],dn=-dn),Ee.y<rn.y||Ee.y>Ut.y)continue;if(Ee.y===rn.y){if(Ee.x===rn.x)return!0}else{const kn=dn*(Ee.x-rn.x)-Zt*(Ee.y-rn.y);if(0===kn)return!0;if(kn<0)continue;gt=!gt}}else{if(Ee.y!==rn.y)continue;if(Ut.x<=Ee.x&&Ee.x<=rn.x||rn.x<=Ee.x&&Ee.x<=Ut.x)return!0}}return gt}const R=Jf.isClockWise,V=this.subPaths;if(0===V.length)return[];if(!0===h)return M(V);let X,ee,te;const me=[];if(1===V.length)return ee=V[0],te=new rd,te.curves=ee.curves,me.push(te),me;let de=!R(V[0].getPoints());de=c?!de:de;const ge=[],be=[];let ze,ke,Te=[],Oe=0;be[Oe]=void 0,Te[Oe]=[];for(let Ee=0,at=V.length;Ee<at;Ee++)ee=V[Ee],ze=ee.getPoints(),X=R(ze),X=c?!X:X,X?(!de&&be[Oe]&&Oe++,be[Oe]={s:new rd,p:ze},be[Oe].s.curves=ee.curves,de&&Oe++,Te[Oe]=[]):Te[Oe].push({h:ee,p:ze[0]});if(!be[0])return M(V);if(be.length>1){let Ee=!1;const at=[];for(let rt=0,gt=be.length;rt<gt;rt++)ge[rt]=[];for(let rt=0,gt=be.length;rt<gt;rt++){const tt=Te[rt];for(let Rt=0;Rt<tt.length;Rt++){const rn=tt[Rt];let Ut=!0;for(let Zt=0;Zt<be.length;Zt++)E(rn.p,be[Zt].p)&&(rt!==Zt&&at.push({froms:rt,tos:Zt,hole:Rt}),Ut?(Ut=!1,ge[Zt].push(rn)):Ee=!0);Ut&&ge[rt].push(rn)}}at.length>0&&(Ee||(Te=ge))}for(let Ee=0,at=be.length;Ee<at;Ee++){te=be[Ee].s,me.push(te),ke=Te[Ee];for(let rt=0,gt=ke.length;rt<gt;rt++)te.holes.push(ke[rt].h)}return me}}class Gw{constructor(c){this.type="Font",this.data=c}generateShapes(c,h=100){const M=[],E=function QA(x,c,h){const M=Array.from(x),E=c/h.resolution,R=(h.boundingBox.yMax-h.boundingBox.yMin+h.underlineThickness)*E,V=[];let X=0,ee=0;for(let te=0;te<M.length;te++){const me=M[te];if("\n"===me)X=0,ee-=R;else{const de=$A(me,E,X,ee,h);X+=de.offsetX,V.push(de.path)}}return V}(c,h,this.data);for(let R=0,V=E.length;R<V;R++)Array.prototype.push.apply(M,E[R].toShapes());return M}}function $A(x,c,h,M,E){const R=E.glyphs[x]||E.glyphs["?"];if(!R)return void console.error('THREE.Font: character "'+x+'" does not exists in font family '+E.familyName+".");const V=new Em;let X,ee,te,me,de,ge,be,Te;if(R.o){const Oe=R._cachedOutline||(R._cachedOutline=R.o.split(" "));for(let ze=0,ke=Oe.length;ze<ke;)switch(Oe[ze++]){case"m":X=Oe[ze++]*c+h,ee=Oe[ze++]*c+M,V.moveTo(X,ee);break;case"l":X=Oe[ze++]*c+h,ee=Oe[ze++]*c+M,V.lineTo(X,ee);break;case"q":te=Oe[ze++]*c+h,me=Oe[ze++]*c+M,de=Oe[ze++]*c+h,ge=Oe[ze++]*c+M,V.quadraticCurveTo(de,ge,te,me);break;case"b":te=Oe[ze++]*c+h,me=Oe[ze++]*c+M,de=Oe[ze++]*c+h,ge=Oe[ze++]*c+M,be=Oe[ze++]*c+h,Te=Oe[ze++]*c+M,V.bezierCurveTo(de,ge,be,Te,te,me)}}return{offsetX:R.ha*c,path:V}}Gw.prototype.isFont=!0;class eI extends bl{constructor(c){super(c)}load(c,h,M,E){const R=this,V=new Hu(this.manager);V.setPath(this.path),V.setRequestHeader(this.requestHeader),V.setWithCredentials(R.withCredentials),V.load(c,function(X){let ee;try{ee=JSON.parse(X)}catch(me){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),ee=JSON.parse(X.substring(65,X.length-2))}const te=R.parse(ee);h&&h(te)},M,E)}parse(c){return new Gw(c)}}let Aa;const Bv={getContext:function(){return void 0===Aa&&(Aa=new(window.AudioContext||window.webkitAudioContext)),Aa},setContext:function(x){Aa=x}};class Ww extends bl{constructor(c){super(c)}load(c,h,M,E){const R=this,V=new Hu(this.manager);V.setResponseType("arraybuffer"),V.setPath(this.path),V.setRequestHeader(this.requestHeader),V.setWithCredentials(this.withCredentials),V.load(c,function(X){try{const ee=X.slice(0);Bv.getContext().decodeAudioData(ee,function(me){h(me)})}catch(ee){E?E(ee):console.error(ee),R.manager.itemError(c)}},M,E)}}class qw extends i_{constructor(c,h,M=1){super(void 0,M);const E=(new er).set(c),R=(new er).set(h),V=new Ze(E.r,E.g,E.b),X=new Ze(R.r,R.g,R.b),ee=Math.sqrt(Math.PI),te=ee*Math.sqrt(.75);this.sh.coefficients[0].copy(V).add(X).multiplyScalar(ee),this.sh.coefficients[1].copy(V).sub(X).multiplyScalar(te)}}qw.prototype.isHemisphereLightProbe=!0;class jw extends i_{constructor(c,h=1){super(void 0,h);const M=(new er).set(c);this.sh.coefficients[0].set(M.r,M.g,M.b).multiplyScalar(2*Math.sqrt(Math.PI))}}jw.prototype.isAmbientLightProbe=!0;const Zw=new pr,BC=new pr;class tI{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ga,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ga,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(c){const h=this._cache;if(h.focus!==c.focus||h.fov!==c.fov||h.aspect!==c.aspect*this.aspect||h.near!==c.near||h.far!==c.far||h.zoom!==c.zoom||h.eyeSep!==this.eyeSep){h.focus=c.focus,h.fov=c.fov,h.aspect=c.aspect*this.aspect,h.near=c.near,h.far=c.far,h.zoom=c.zoom,h.eyeSep=this.eyeSep;const E=c.projectionMatrix.clone(),R=h.eyeSep/2,V=R*h.near/h.focus,X=h.near*Math.tan(Yi.DEG2RAD*h.fov*.5)/h.zoom;let ee,te;BC.elements[12]=-R,Zw.elements[12]=R,ee=-X*h.aspect+V,te=X*h.aspect+V,E.elements[0]=2*h.near/(te-ee),E.elements[8]=(te+ee)/(te-ee),this.cameraL.projectionMatrix.copy(E),ee=-X*h.aspect-V,te=X*h.aspect-V,E.elements[0]=2*h.near/(te-ee),E.elements[8]=(te+ee)/(te-ee),this.cameraR.projectionMatrix.copy(E)}this.cameraL.matrixWorld.copy(c.matrixWorld).multiply(BC),this.cameraR.matrixWorld.copy(c.matrixWorld).multiply(Zw)}}class HC{constructor(c){this.autoStart=void 0===c||c,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=zC(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let c=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const h=zC();c=(h-this.oldTime)/1e3,this.oldTime=h,this.elapsedTime+=c}return c}}function zC(){return("undefined"==typeof performance?Date:performance).now()}const ip=new Ze,nI=new Ds,VC=new Ze,Tm=new Ze;class iI extends Ci{constructor(){super(),this.type="AudioListener",this.context=Bv.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new HC}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(c){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=c,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(c){return this.gain.gain.setTargetAtTime(c,this.context.currentTime,.01),this}updateMatrixWorld(c){super.updateMatrixWorld(c);const h=this.context.listener,M=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ip,nI,VC),Tm.set(0,0,-1).applyQuaternion(nI),h.positionX){const E=this.context.currentTime+this.timeDelta;h.positionX.linearRampToValueAtTime(ip.x,E),h.positionY.linearRampToValueAtTime(ip.y,E),h.positionZ.linearRampToValueAtTime(ip.z,E),h.forwardX.linearRampToValueAtTime(Tm.x,E),h.forwardY.linearRampToValueAtTime(Tm.y,E),h.forwardZ.linearRampToValueAtTime(Tm.z,E),h.upX.linearRampToValueAtTime(M.x,E),h.upY.linearRampToValueAtTime(M.y,E),h.upZ.linearRampToValueAtTime(M.z,E)}else h.setPosition(ip.x,ip.y,ip.z),h.setOrientation(Tm.x,Tm.y,Tm.z,M.x,M.y,M.z)}}class UC extends Ci{constructor(c){super(),this.type="Audio",this.listener=c,this.context=c.context,this.gain=this.context.createGain(),this.gain.connect(c.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(c){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=c,this.connect(),this}setMediaElementSource(c){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(c),this.connect(),this}setMediaStreamSource(c){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(c),this.connect(),this}setBuffer(c){return this.buffer=c,this.sourceType="buffer",this.autoplay&&this.play(),this}play(c=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+c;const h=this.context.createBufferSource();return h.buffer=this.buffer,h.loop=this.loop,h.loopStart=this.loopStart,h.loopEnd=this.loopEnd,h.onended=this.onEnded.bind(this),h.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=h,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let c=1,h=this.filters.length;c<h;c++)this.filters[c-1].connect(this.filters[c]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let c=1,h=this.filters.length;c<h;c++)this.filters[c-1].disconnect(this.filters[c]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(c){return c||(c=[]),!0===this._connected?(this.disconnect(),this.filters=c.slice(),this.connect()):this.filters=c.slice(),this}setDetune(c){if(this.detune=c,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(c){return this.setFilters(c?[c]:[])}setPlaybackRate(c){if(!1!==this.hasPlaybackControl)return this.playbackRate=c,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(c){if(!1!==this.hasPlaybackControl)return this.loop=c,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(c){return this.loopStart=c,this}setLoopEnd(c){return this.loopEnd=c,this}getVolume(){return this.gain.gain.value}setVolume(c){return this.gain.gain.setTargetAtTime(c,this.context.currentTime,.01),this}}const s_=new Ze,qb=new Ds,rI=new Ze,rp=new Ze;class GC extends UC{constructor(c){super(c),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(c){return this.panner.refDistance=c,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(c){return this.panner.rolloffFactor=c,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(c){return this.panner.distanceModel=c,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(c){return this.panner.maxDistance=c,this}setDirectionalCone(c,h,M){return this.panner.coneInnerAngle=c,this.panner.coneOuterAngle=h,this.panner.coneOuterGain=M,this}updateMatrixWorld(c){if(super.updateMatrixWorld(c),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(s_,qb,rI),rp.set(0,0,1).applyQuaternion(qb);const h=this.panner;if(h.positionX){const M=this.context.currentTime+this.listener.timeDelta;h.positionX.linearRampToValueAtTime(s_.x,M),h.positionY.linearRampToValueAtTime(s_.y,M),h.positionZ.linearRampToValueAtTime(s_.z,M),h.orientationX.linearRampToValueAtTime(rp.x,M),h.orientationY.linearRampToValueAtTime(rp.y,M),h.orientationZ.linearRampToValueAtTime(rp.z,M)}else h.setPosition(s_.x,s_.y,s_.z),h.setOrientation(rp.x,rp.y,rp.z)}}class sI{constructor(c,h=2048){this.analyser=c.context.createAnalyser(),this.analyser.fftSize=h,this.data=new Uint8Array(this.analyser.frequencyBinCount),c.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let c=0;const h=this.getFrequencyData();for(let M=0;M<h.length;M++)c+=h[M];return c/h.length}}class sh{constructor(c,h,M){let E,R,V;switch(this.binding=c,this.valueSize=M,h){case"quaternion":E=this._slerp,R=this._slerpAdditive,V=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*M),this._workIndex=5;break;case"string":case"bool":E=this._select,R=this._select,V=this._setAdditiveIdentityOther,this.buffer=new Array(5*M);break;default:E=this._lerp,R=this._lerpAdditive,V=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*M)}this._mixBufferRegion=E,this._mixBufferRegionAdditive=R,this._setIdentity=V,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(c,h){const M=this.buffer,E=this.valueSize,R=c*E+E;let V=this.cumulativeWeight;if(0===V){for(let X=0;X!==E;++X)M[R+X]=M[X];V=h}else V+=h,this._mixBufferRegion(M,R,0,h/V,E);this.cumulativeWeight=V}accumulateAdditive(c){const h=this.buffer,M=this.valueSize,E=M*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(h,E,0,c,M),this.cumulativeWeightAdditive+=c}apply(c){const h=this.valueSize,M=this.buffer,E=c*h+h,R=this.cumulativeWeight,V=this.cumulativeWeightAdditive,X=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,R<1&&this._mixBufferRegion(M,E,h*this._origIndex,1-R,h),V>0&&this._mixBufferRegionAdditive(M,E,this._addIndex*h,1,h);for(let ee=h,te=h+h;ee!==te;++ee)if(M[ee]!==M[ee+h]){X.setValue(M,E);break}}saveOriginalState(){const h=this.buffer,M=this.valueSize,E=M*this._origIndex;this.binding.getValue(h,E);for(let R=M,V=E;R!==V;++R)h[R]=h[E+R%M];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const c=this._addIndex*this.valueSize,h=c+this.valueSize;for(let M=c;M<h;M++)this.buffer[M]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const c=this._origIndex*this.valueSize,h=this._addIndex*this.valueSize;for(let M=0;M<this.valueSize;M++)this.buffer[h+M]=this.buffer[c+M]}_select(c,h,M,E,R){if(E>=.5)for(let V=0;V!==R;++V)c[h+V]=c[M+V]}_slerp(c,h,M,E){Ds.slerpFlat(c,h,c,h,c,M,E)}_slerpAdditive(c,h,M,E,R){const V=this._workIndex*R;Ds.multiplyQuaternionsFlat(c,V,c,h,c,M),Ds.slerpFlat(c,h,c,h,c,V,E)}_lerp(c,h,M,E,R){const V=1-E;for(let X=0;X!==R;++X){const ee=h+X;c[ee]=c[ee]*V+c[M+X]*E}}_lerpAdditive(c,h,M,E,R){for(let V=0;V!==R;++V){const X=h+V;c[X]=c[X]+c[M+V]*E}}}const WC="\\[\\]\\.:\\/",$L=new RegExp("["+WC+"]","g"),jb="[^"+WC+"]",qC="[^"+WC.replace("\\.","")+"]",jC=/((?:WC+[\/:])*)/.source.replace("WC",jb),oI=/(WCOD+)?/.source.replace("WCOD",qC),eF=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",jb),ZC=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",jb),hs=new RegExp("^"+jC+oI+eF+ZC+"$"),aI=["material","materials","bones"];function Zb(x,c,h){const M=h||Pc.parseTrackName(c);this._targetGroup=x,this._bindings=x.subscribe_(c,M)}function Pc(x,c,h){this.path=c,this.parsedPath=h||Pc.parseTrackName(c),this.node=Pc.findNode(x,this.parsedPath.nodeName)||x,this.rootNode=x}Object.assign(Zb.prototype,{getValue:function(x,c){this.bind();const M=this._bindings[this._targetGroup.nCachedObjects_];void 0!==M&&M.getValue(x,c)},setValue:function(x,c){const h=this._bindings;for(let M=this._targetGroup.nCachedObjects_,E=h.length;M!==E;++M)h[M].setValue(x,c)},bind:function(){const x=this._bindings;for(let c=this._targetGroup.nCachedObjects_,h=x.length;c!==h;++c)x[c].bind()},unbind:function(){const x=this._bindings;for(let c=this._targetGroup.nCachedObjects_,h=x.length;c!==h;++c)x[c].unbind()}}),Object.assign(Pc,{Composite:Zb,create:function(x,c,h){return x&&x.isAnimationObjectGroup?new Pc.Composite(x,c,h):new Pc(x,c,h)},sanitizeNodeName:function(x){return x.replace(/\s/g,"_").replace($L,"")},parseTrackName:function(x){const c=hs.exec(x);if(!c)throw new Error("PropertyBinding: Cannot parse trackName: "+x);const h={nodeName:c[2],objectName:c[3],objectIndex:c[4],propertyName:c[5],propertyIndex:c[6]},M=h.nodeName&&h.nodeName.lastIndexOf(".");if(void 0!==M&&-1!==M){const E=h.nodeName.substring(M+1);-1!==aI.indexOf(E)&&(h.nodeName=h.nodeName.substring(0,M),h.objectName=E)}if(null===h.propertyName||0===h.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+x);return h},findNode:function(x,c){if(!c||""===c||"."===c||-1===c||c===x.name||c===x.uuid)return x;if(x.skeleton){const h=x.skeleton.getBoneByName(c);if(void 0!==h)return h}if(x.children){const h=function(E){for(let R=0;R<E.length;R++){const V=E[R];if(V.name===c||V.uuid===c)return V;const X=h(V.children);if(X)return X}return null},M=h(x.children);if(M)return M}return null}}),Object.assign(Pc.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(c,h){c[h]=this.node[this.propertyName]},function(c,h){const M=this.resolvedProperty;for(let E=0,R=M.length;E!==R;++E)c[h++]=M[E]},function(c,h){c[h]=this.resolvedProperty[this.propertyIndex]},function(c,h){this.resolvedProperty.toArray(c,h)}],SetterByBindingTypeAndVersioning:[[function(c,h){this.targetObject[this.propertyName]=c[h]},function(c,h){this.targetObject[this.propertyName]=c[h],this.targetObject.needsUpdate=!0},function(c,h){this.targetObject[this.propertyName]=c[h],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(c,h){const M=this.resolvedProperty;for(let E=0,R=M.length;E!==R;++E)M[E]=c[h++]},function(c,h){const M=this.resolvedProperty;for(let E=0,R=M.length;E!==R;++E)M[E]=c[h++];this.targetObject.needsUpdate=!0},function(c,h){const M=this.resolvedProperty;for(let E=0,R=M.length;E!==R;++E)M[E]=c[h++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(c,h){this.resolvedProperty[this.propertyIndex]=c[h]},function(c,h){this.resolvedProperty[this.propertyIndex]=c[h],this.targetObject.needsUpdate=!0},function(c,h){this.resolvedProperty[this.propertyIndex]=c[h],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(c,h){this.resolvedProperty.fromArray(c,h)},function(c,h){this.resolvedProperty.fromArray(c,h),this.targetObject.needsUpdate=!0},function(c,h){this.resolvedProperty.fromArray(c,h),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(c,h){this.bind(),this.getValue(c,h)},setValue:function(c,h){this.bind(),this.setValue(c,h)},bind:function(){let x=this.node;const c=this.parsedPath,h=c.objectName,M=c.propertyName;let E=c.propertyIndex;if(x||(x=Pc.findNode(this.rootNode,c.nodeName)||this.rootNode,this.node=x),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!x)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(h){let ee=c.objectIndex;switch(h){case"materials":if(!x.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!x.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);x=x.material.materials;break;case"bones":if(!x.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);x=x.skeleton.bones;for(let te=0;te<x.length;te++)if(x[te].name===ee){ee=te;break}break;default:if(void 0===x[h])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);x=x[h]}if(void 0!==ee){if(void 0===x[ee])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,x);x=x[ee]}}const R=x[M];if(void 0===R)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+c.nodeName+"."+M+" but it wasn't found.",x);let V=this.Versioning.None;this.targetObject=x,void 0!==x.needsUpdate?V=this.Versioning.NeedsUpdate:void 0!==x.matrixWorldNeedsUpdate&&(V=this.Versioning.MatrixWorldNeedsUpdate);let X=this.BindingType.Direct;if(void 0!==E){if("morphTargetInfluences"===M){if(!x.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!x.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!x.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==x.morphTargetDictionary[E]&&(E=x.morphTargetDictionary[E])}X=this.BindingType.ArrayElement,this.resolvedProperty=R,this.propertyIndex=E}else void 0!==R.fromArray&&void 0!==R.toArray?(X=this.BindingType.HasFromToArray,this.resolvedProperty=R):Array.isArray(R)?(X=this.BindingType.EntireArray,this.resolvedProperty=R):this.propertyName=M;this.getValue=this.GetterByBindingType[X],this.setValue=this.SetterByBindingTypeAndVersioning[X][V]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Pc.prototype,{_getValue_unbound:Pc.prototype.getValue,_setValue_unbound:Pc.prototype.setValue});class YC{constructor(){this.uuid=Yi.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const c={};this._indicesByUUID=c;for(let M=0,E=arguments.length;M!==E;++M)c[arguments[M].uuid]=M;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const h=this;this.stats={objects:{get total(){return h._objects.length},get inUse(){return this.total-h.nCachedObjects_}},get bindingsPerObject(){return h._bindings.length}}}add(){const c=this._objects,h=this._indicesByUUID,M=this._paths,E=this._parsedPaths,R=this._bindings,V=R.length;let X,ee=c.length,te=this.nCachedObjects_;for(let me=0,de=arguments.length;me!==de;++me){const ge=arguments[me],be=ge.uuid;let Te=h[be];if(void 0===Te){Te=ee++,h[be]=Te,c.push(ge);for(let Oe=0,ze=V;Oe!==ze;++Oe)R[Oe].push(new Pc(ge,M[Oe],E[Oe]))}else if(Te<te){X=c[Te];const Oe=--te,ze=c[Oe];h[ze.uuid]=Te,c[Te]=ze,h[be]=Oe,c[Oe]=ge;for(let ke=0,Ee=V;ke!==Ee;++ke){const at=R[ke];let gt=at[Te];at[Te]=at[Oe],void 0===gt&&(gt=new Pc(ge,M[ke],E[ke])),at[Oe]=gt}}else c[Te]!==X&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=te}remove(){const c=this._objects,h=this._indicesByUUID,M=this._bindings,E=M.length;let R=this.nCachedObjects_;for(let V=0,X=arguments.length;V!==X;++V){const ee=arguments[V],te=ee.uuid,me=h[te];if(void 0!==me&&me>=R){const de=R++,ge=c[de];h[ge.uuid]=me,c[me]=ge,h[te]=de,c[de]=ee;for(let be=0,Te=E;be!==Te;++be){const Oe=M[be],ke=Oe[me];Oe[me]=Oe[de],Oe[de]=ke}}}this.nCachedObjects_=R}uncache(){const c=this._objects,h=this._indicesByUUID,M=this._bindings,E=M.length;let R=this.nCachedObjects_,V=c.length;for(let X=0,ee=arguments.length;X!==ee;++X){const me=arguments[X].uuid,de=h[me];if(void 0!==de)if(delete h[me],de<R){const ge=--R,be=c[ge],Te=--V,Oe=c[Te];h[be.uuid]=de,c[de]=be,h[Oe.uuid]=ge,c[ge]=Oe,c.pop();for(let ze=0,ke=E;ze!==ke;++ze){const Ee=M[ze],rt=Ee[Te];Ee[de]=Ee[ge],Ee[ge]=rt,Ee.pop()}}else{const ge=--V,be=c[ge];ge>0&&(h[be.uuid]=de),c[de]=be,c.pop();for(let Te=0,Oe=E;Te!==Oe;++Te){const ze=M[Te];ze[de]=ze[ge],ze.pop()}}}this.nCachedObjects_=R}subscribe_(c,h){const M=this._bindingsIndicesByPath;let E=M[c];const R=this._bindings;if(void 0!==E)return R[E];const V=this._paths,X=this._parsedPaths,ee=this._objects,me=this.nCachedObjects_,de=new Array(ee.length);E=R.length,M[c]=E,V.push(c),X.push(h),R.push(de);for(let ge=me,be=ee.length;ge!==be;++ge)de[ge]=new Pc(ee[ge],c,h);return de}unsubscribe_(c){const h=this._bindingsIndicesByPath,M=h[c];if(void 0!==M){const E=this._paths,R=this._parsedPaths,V=this._bindings,X=V.length-1,ee=V[X];h[c[X]]=M,V[M]=ee,V.pop(),R[M]=R[X],R.pop(),E[M]=E[X],E.pop()}}}YC.prototype.isAnimationObjectGroup=!0;class lI{constructor(c,h,M=null,E=h.blendMode){this._mixer=c,this._clip=h,this._localRoot=M,this.blendMode=E;const R=h.tracks,V=R.length,X=new Array(V),ee={endingStart:dh,endingEnd:dh};for(let te=0;te!==V;++te){const me=R[te].createInterpolant(null);X[te]=me,me.settings=ee}this._interpolantSettings=ee,this._interpolants=X,this._propertyBindings=new Array(V),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Np,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(c){return this._startTime=c,this}setLoop(c,h){return this.loop=c,this.repetitions=h,this}setEffectiveWeight(c){return this.weight=c,this._effectiveWeight=this.enabled?c:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(c){return this._scheduleFading(c,0,1)}fadeOut(c){return this._scheduleFading(c,1,0)}crossFadeFrom(c,h,M){if(c.fadeOut(h),this.fadeIn(h),M){const E=this._clip.duration,R=c._clip.duration,X=E/R;c.warp(1,R/E,h),this.warp(X,1,h)}return this}crossFadeTo(c,h,M){return c.crossFadeFrom(this,h,M)}stopFading(){const c=this._weightInterpolant;return null!==c&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(c)),this}setEffectiveTimeScale(c){return this.timeScale=c,this._effectiveTimeScale=this.paused?0:c,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(c){return this.timeScale=this._clip.duration/c,this.stopWarping()}syncWith(c){return this.time=c.time,this.timeScale=c.timeScale,this.stopWarping()}halt(c){return this.warp(this._effectiveTimeScale,0,c)}warp(c,h,M){const E=this._mixer,R=E.time,V=this.timeScale;let X=this._timeScaleInterpolant;null===X&&(X=E._lendControlInterpolant(),this._timeScaleInterpolant=X);const ee=X.parameterPositions,te=X.sampleValues;return ee[0]=R,ee[1]=R+M,te[0]=c/V,te[1]=h/V,this}stopWarping(){const c=this._timeScaleInterpolant;return null!==c&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(c)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(c,h,M,E){if(!this.enabled)return void this._updateWeight(c);const R=this._startTime;if(null!==R){const ee=(c-R)*M;if(ee<0||0===M)return;this._startTime=null,h=M*ee}h*=this._updateTimeScale(c);const V=this._updateTime(h),X=this._updateWeight(c);if(X>0){const ee=this._interpolants,te=this._propertyBindings;if(this.blendMode===au)for(let me=0,de=ee.length;me!==de;++me)ee[me].evaluate(V),te[me].accumulateAdditive(X);else for(let me=0,de=ee.length;me!==de;++me)ee[me].evaluate(V),te[me].accumulate(E,X)}}_updateWeight(c){let h=0;if(this.enabled){h=this.weight;const M=this._weightInterpolant;if(null!==M){const E=M.evaluate(c)[0];h*=E,c>M.parameterPositions[1]&&(this.stopFading(),0===E&&(this.enabled=!1))}}return this._effectiveWeight=h,h}_updateTimeScale(c){let h=0;if(!this.paused){h=this.timeScale;const M=this._timeScaleInterpolant;null!==M&&(h*=M.evaluate(c)[0],c>M.parameterPositions[1]&&(this.stopWarping(),0===h?this.paused=!0:this.timeScale=h))}return this._effectiveTimeScale=h,h}_updateTime(c){const h=this._clip.duration,M=this.loop;let E=this.time+c,R=this._loopCount;const V=M===tc;if(0===c)return-1===R?E:V&&1==(1&R)?h-E:E;if(M===Vh){-1===R&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(E>=h)E=h;else{if(!(E<0)){this.time=E;break e}E=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=E,this._mixer.dispatchEvent({type:"finished",action:this,direction:c<0?-1:1})}}else{if(-1===R&&(c>=0?(R=0,this._setEndings(!0,0===this.repetitions,V)):this._setEndings(0===this.repetitions,!0,V)),E>=h||E<0){const X=Math.floor(E/h);E-=h*X,R+=Math.abs(X);const ee=this.repetitions-R;if(ee<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,E=c>0?h:0,this.time=E,this._mixer.dispatchEvent({type:"finished",action:this,direction:c>0?1:-1});else{if(1===ee){const te=c<0;this._setEndings(te,!te,V)}else this._setEndings(!1,!1,V);this._loopCount=R,this.time=E,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:X})}}else this.time=E;if(V&&1==(1&R))return h-E}return E}_setEndings(c,h,M){const E=this._interpolantSettings;M?(E.endingStart=ki,E.endingEnd=ki):(E.endingStart=c?this.zeroSlopeAtStart?ki:dh:Td,E.endingEnd=h?this.zeroSlopeAtEnd?ki:dh:Td)}_scheduleFading(c,h,M){const E=this._mixer,R=E.time;let V=this._weightInterpolant;null===V&&(V=E._lendControlInterpolant(),this._weightInterpolant=V);const X=V.parameterPositions,ee=V.sampleValues;return X[0]=R,ee[0]=h,X[1]=R+c,ee[1]=M,this}}class XC extends pl{constructor(c){super(),this._root=c,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(c,h){const M=c._localRoot||this._root,E=c._clip.tracks,R=E.length,V=c._propertyBindings,X=c._interpolants,ee=M.uuid,te=this._bindingsByRootAndName;let me=te[ee];void 0===me&&(me={},te[ee]=me);for(let de=0;de!==R;++de){const ge=E[de],be=ge.name;let Te=me[be];if(void 0!==Te)V[de]=Te;else{if(Te=V[de],void 0!==Te){null===Te._cacheIndex&&(++Te.referenceCount,this._addInactiveBinding(Te,ee,be));continue}Te=new sh(Pc.create(M,be,h&&h._propertyBindings[de].binding.parsedPath),ge.ValueTypeName,ge.getValueSize()),++Te.referenceCount,this._addInactiveBinding(Te,ee,be),V[de]=Te}X[de].resultBuffer=Te.buffer}}_activateAction(c){if(!this._isActiveAction(c)){if(null===c._cacheIndex){const M=(c._localRoot||this._root).uuid,E=c._clip.uuid,R=this._actionsByClip[E];this._bindAction(c,R&&R.knownActions[0]),this._addInactiveAction(c,E,M)}const h=c._propertyBindings;for(let M=0,E=h.length;M!==E;++M){const R=h[M];0==R.useCount++&&(this._lendBinding(R),R.saveOriginalState())}this._lendAction(c)}}_deactivateAction(c){if(this._isActiveAction(c)){const h=c._propertyBindings;for(let M=0,E=h.length;M!==E;++M){const R=h[M];0==--R.useCount&&(R.restoreOriginalState(),this._takeBackBinding(R))}this._takeBackAction(c)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const c=this;this.stats={actions:{get total(){return c._actions.length},get inUse(){return c._nActiveActions}},bindings:{get total(){return c._bindings.length},get inUse(){return c._nActiveBindings}},controlInterpolants:{get total(){return c._controlInterpolants.length},get inUse(){return c._nActiveControlInterpolants}}}}_isActiveAction(c){const h=c._cacheIndex;return null!==h&&h<this._nActiveActions}_addInactiveAction(c,h,M){const E=this._actions,R=this._actionsByClip;let V=R[h];if(void 0===V)V={knownActions:[c],actionByRoot:{}},c._byClipCacheIndex=0,R[h]=V;else{const X=V.knownActions;c._byClipCacheIndex=X.length,X.push(c)}c._cacheIndex=E.length,E.push(c),V.actionByRoot[M]=c}_removeInactiveAction(c){const h=this._actions,M=h[h.length-1],E=c._cacheIndex;M._cacheIndex=E,h[E]=M,h.pop(),c._cacheIndex=null;const R=c._clip.uuid,V=this._actionsByClip,X=V[R],ee=X.knownActions,te=ee[ee.length-1],me=c._byClipCacheIndex;te._byClipCacheIndex=me,ee[me]=te,ee.pop(),c._byClipCacheIndex=null,delete X.actionByRoot[(c._localRoot||this._root).uuid],0===ee.length&&delete V[R],this._removeInactiveBindingsForAction(c)}_removeInactiveBindingsForAction(c){const h=c._propertyBindings;for(let M=0,E=h.length;M!==E;++M){const R=h[M];0==--R.referenceCount&&this._removeInactiveBinding(R)}}_lendAction(c){const h=this._actions,M=c._cacheIndex,E=this._nActiveActions++,R=h[E];c._cacheIndex=E,h[E]=c,R._cacheIndex=M,h[M]=R}_takeBackAction(c){const h=this._actions,M=c._cacheIndex,E=--this._nActiveActions,R=h[E];c._cacheIndex=E,h[E]=c,R._cacheIndex=M,h[M]=R}_addInactiveBinding(c,h,M){const E=this._bindingsByRootAndName,R=this._bindings;let V=E[h];void 0===V&&(V={},E[h]=V),V[M]=c,c._cacheIndex=R.length,R.push(c)}_removeInactiveBinding(c){const h=this._bindings,M=c.binding,E=M.rootNode.uuid,R=M.path,V=this._bindingsByRootAndName,X=V[E],ee=h[h.length-1],te=c._cacheIndex;ee._cacheIndex=te,h[te]=ee,h.pop(),delete X[R],0===Object.keys(X).length&&delete V[E]}_lendBinding(c){const h=this._bindings,M=c._cacheIndex,E=this._nActiveBindings++,R=h[E];c._cacheIndex=E,h[E]=c,R._cacheIndex=M,h[M]=R}_takeBackBinding(c){const h=this._bindings,M=c._cacheIndex,E=--this._nActiveBindings,R=h[E];c._cacheIndex=E,h[E]=c,R._cacheIndex=M,h[M]=R}_lendControlInterpolant(){const c=this._controlInterpolants,h=this._nActiveControlInterpolants++;let M=c[h];return void 0===M&&(M=new xm(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),M.__cacheIndex=h,c[h]=M),M}_takeBackControlInterpolant(c){const h=this._controlInterpolants,M=c.__cacheIndex,E=--this._nActiveControlInterpolants,R=h[E];c.__cacheIndex=E,h[E]=c,R.__cacheIndex=M,h[M]=R}clipAction(c,h,M){const E=h||this._root,R=E.uuid;let V="string"==typeof c?Qg.findByName(E,c):c;const X=null!==V?V.uuid:c,ee=this._actionsByClip[X];let te=null;if(void 0===M&&(M=null!==V?V.blendMode:Cs),void 0!==ee){const de=ee.actionByRoot[R];if(void 0!==de&&de.blendMode===M)return de;te=ee.knownActions[0],null===V&&(V=te._clip)}if(null===V)return null;const me=new lI(this,V,h,M);return this._bindAction(me,te),this._addInactiveAction(me,X,R),me}existingAction(c,h){const M=h||this._root,E=M.uuid,R="string"==typeof c?Qg.findByName(M,c):c,X=this._actionsByClip[R?R.uuid:c];return void 0!==X&&X.actionByRoot[E]||null}stopAllAction(){const c=this._actions;for(let M=this._nActiveActions-1;M>=0;--M)c[M].stop();return this}update(c){const h=this._actions,M=this._nActiveActions,E=this.time+=c*=this.timeScale,R=Math.sign(c),V=this._accuIndex^=1;for(let te=0;te!==M;++te)h[te]._update(E,c,R,V);const X=this._bindings,ee=this._nActiveBindings;for(let te=0;te!==ee;++te)X[te].apply(V);return this}setTime(c){this.time=0;for(let h=0;h<this._actions.length;h++)this._actions[h].time=0;return this.update(c)}getRoot(){return this._root}uncacheClip(c){const h=this._actions,M=c.uuid,E=this._actionsByClip,R=E[M];if(void 0!==R){const V=R.knownActions;for(let X=0,ee=V.length;X!==ee;++X){const te=V[X];this._deactivateAction(te);const me=te._cacheIndex,de=h[h.length-1];te._cacheIndex=null,te._byClipCacheIndex=null,de._cacheIndex=me,h[me]=de,h.pop(),this._removeInactiveBindingsForAction(te)}delete E[M]}}uncacheRoot(c){const h=c.uuid,M=this._actionsByClip;for(const V in M){const ee=M[V].actionByRoot[h];void 0!==ee&&(this._deactivateAction(ee),this._removeInactiveAction(ee))}const R=this._bindingsByRootAndName[h];if(void 0!==R)for(const V in R){const X=R[V];X.restoreOriginalState(),this._removeInactiveBinding(X)}}uncacheAction(c,h){const M=this.existingAction(c,h);null!==M&&(this._deactivateAction(M),this._removeInactiveAction(M))}}XC.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Yb{constructor(c){"string"==typeof c&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),c=arguments[1]),this.value=c}clone(){return new Yb(void 0===this.value.clone?this.value:this.value.clone())}}function Yw(x,c,h){Jc.call(this,x,c),this.meshPerAttribute=h||1}function o_(x,c,h,M,E){this.buffer=x,this.type=c,this.itemSize=h,this.elementSize=M,this.count=E,this.version=0}function sp(x,c,h=0,M=1/0){this.ray=new na(x,c),this.near=h,this.far=M,this.camera=null,this.layers=new wt,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function JC(x,c){return x.distance-c.distance}function Dm(x,c,h,M){if(x.layers.test(c.layers)&&x.raycast(c,h),!0===M){const E=x.children;for(let R=0,V=E.length;R<V;R++)Dm(E[R],c,h,!0)}}Yw.prototype=Object.assign(Object.create(Jc.prototype),{constructor:Yw,isInstancedInterleavedBuffer:!0,copy:function(x){return Jc.prototype.copy.call(this,x),this.meshPerAttribute=x.meshPerAttribute,this},clone:function(x){const c=Jc.prototype.clone.call(this,x);return c.meshPerAttribute=this.meshPerAttribute,c},toJSON:function(x){const c=Jc.prototype.toJSON.call(this,x);return c.isInstancedInterleavedBuffer=!0,c.meshPerAttribute=this.meshPerAttribute,c}}),Object.defineProperty(o_.prototype,"needsUpdate",{set:function(x){!0===x&&this.version++}}),Object.assign(o_.prototype,{isGLBufferAttribute:!0,setBuffer:function(x){return this.buffer=x,this},setType:function(x,c){return this.type=x,this.elementSize=c,this},setItemSize:function(x){return this.itemSize=x,this},setCount:function(x){return this.count=x,this}}),Object.assign(sp.prototype,{set:function(x,c){this.ray.set(x,c)},setFromCamera:function(x,c){c&&c.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(c.matrixWorld),this.ray.direction.set(x.x,x.y,.5).unproject(c).sub(this.ray.origin).normalize(),this.camera=c):c&&c.isOrthographicCamera?(this.ray.origin.set(x.x,x.y,(c.near+c.far)/(c.near-c.far)).unproject(c),this.ray.direction.set(0,0,-1).transformDirection(c.matrixWorld),this.camera=c):console.error("THREE.Raycaster: Unsupported camera type: "+c.type)},intersectObject:function(x,c=!1,h=[]){return Dm(x,this,h,c),h.sort(JC),h},intersectObjects:function(x,c=!1,h=[]){for(let M=0,E=x.length;M<E;M++)Dm(x[M],this,h,c);return h.sort(JC),h}});class cI{constructor(c=1,h=0,M=0){return this.radius=c,this.phi=h,this.theta=M,this}set(c,h,M){return this.radius=c,this.phi=h,this.theta=M,this}copy(c){return this.radius=c.radius,this.phi=c.phi,this.theta=c.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(c){return this.setFromCartesianCoords(c.x,c.y,c.z)}setFromCartesianCoords(c,h,M){return this.radius=Math.sqrt(c*c+h*h+M*M),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(c,M),this.phi=Math.acos(Yi.clamp(h/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class uI{constructor(c=1,h=0,M=0){return this.radius=c,this.theta=h,this.y=M,this}set(c,h,M){return this.radius=c,this.theta=h,this.y=M,this}copy(c){return this.radius=c.radius,this.theta=c.theta,this.y=c.y,this}setFromVector3(c){return this.setFromCartesianCoords(c.x,c.y,c.z)}setFromCartesianCoords(c,h,M){return this.radius=Math.sqrt(c*c+M*M),this.theta=Math.atan2(c,M),this.y=h,this}clone(){return(new this.constructor).copy(this)}}const Xb=new Un;class tu{constructor(c=new Un(1/0,1/0),h=new Un(-1/0,-1/0)){this.min=c,this.max=h}set(c,h){return this.min.copy(c),this.max.copy(h),this}setFromPoints(c){this.makeEmpty();for(let h=0,M=c.length;h<M;h++)this.expandByPoint(c[h]);return this}setFromCenterAndSize(c,h){const M=Xb.copy(h).multiplyScalar(.5);return this.min.copy(c).sub(M),this.max.copy(c).add(M),this}clone(){return(new this.constructor).copy(this)}copy(c){return this.min.copy(c.min),this.max.copy(c.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(c){return void 0===c&&(console.warn("THREE.Box2: .getCenter() target is now required"),c=new Un),this.isEmpty()?c.set(0,0):c.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(c){return void 0===c&&(console.warn("THREE.Box2: .getSize() target is now required"),c=new Un),this.isEmpty()?c.set(0,0):c.subVectors(this.max,this.min)}expandByPoint(c){return this.min.min(c),this.max.max(c),this}expandByVector(c){return this.min.sub(c),this.max.add(c),this}expandByScalar(c){return this.min.addScalar(-c),this.max.addScalar(c),this}containsPoint(c){return!(c.x<this.min.x||c.x>this.max.x||c.y<this.min.y||c.y>this.max.y)}containsBox(c){return this.min.x<=c.min.x&&c.max.x<=this.max.x&&this.min.y<=c.min.y&&c.max.y<=this.max.y}getParameter(c,h){return void 0===h&&(console.warn("THREE.Box2: .getParameter() target is now required"),h=new Un),h.set((c.x-this.min.x)/(this.max.x-this.min.x),(c.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(c){return!(c.max.x<this.min.x||c.min.x>this.max.x||c.max.y<this.min.y||c.min.y>this.max.y)}clampPoint(c,h){return void 0===h&&(console.warn("THREE.Box2: .clampPoint() target is now required"),h=new Un),h.copy(c).clamp(this.min,this.max)}distanceToPoint(c){return Xb.copy(c).clamp(this.min,this.max).sub(c).length()}intersect(c){return this.min.max(c.min),this.max.min(c.max),this}union(c){return this.min.min(c.min),this.max.max(c.max),this}translate(c){return this.min.add(c),this.max.add(c),this}equals(c){return c.min.equals(this.min)&&c.max.equals(this.max)}}tu.prototype.isBox2=!0;const a_=new Ze,Jl=new Ze;class op{constructor(c=new Ze,h=new Ze){this.start=c,this.end=h}set(c,h){return this.start.copy(c),this.end.copy(h),this}copy(c){return this.start.copy(c.start),this.end.copy(c.end),this}getCenter(c){return void 0===c&&(console.warn("THREE.Line3: .getCenter() target is now required"),c=new Ze),c.addVectors(this.start,this.end).multiplyScalar(.5)}delta(c){return void 0===c&&(console.warn("THREE.Line3: .delta() target is now required"),c=new Ze),c.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(c,h){return void 0===h&&(console.warn("THREE.Line3: .at() target is now required"),h=new Ze),this.delta(h).multiplyScalar(c).add(this.start)}closestPointToPointParameter(c,h){a_.subVectors(c,this.start),Jl.subVectors(this.end,this.start);const M=Jl.dot(Jl);let R=Jl.dot(a_)/M;return h&&(R=Yi.clamp(R,0,1)),R}closestPointToPoint(c,h,M){const E=this.closestPointToPointParameter(c,h);return void 0===M&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),M=new Ze),this.delta(M).multiplyScalar(E).add(this.start)}applyMatrix4(c){return this.start.applyMatrix4(c),this.end.applyMatrix4(c),this}equals(c){return c.start.equals(this.start)&&c.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}function ap(x){Ci.call(this),this.material=x,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}(ap.prototype=Object.create(Ci.prototype)).constructor=ap,ap.prototype.isImmediateRenderObject=!0;const zu=new Ze;class ia extends Ci{constructor(c,h){super(),this.light=c,this.light.updateMatrixWorld(),this.matrix=c.matrixWorld,this.matrixAutoUpdate=!1,this.color=h;const M=new wr,E=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let V=0,X=1,ee=32;V<ee;V++,X++){const te=V/ee*Math.PI*2,me=X/ee*Math.PI*2;E.push(Math.cos(te),Math.sin(te),1,Math.cos(me),Math.sin(me),1)}M.setAttribute("position",new Bn(E,3));const R=new yl({fog:!1,toneMapped:!1});this.cone=new Kc(M,R),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const c=this.light.distance?this.light.distance:1e3,h=c*Math.tan(this.light.angle);this.cone.scale.set(h,h,c),zu.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(zu),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Vu=new Ze,sf=new pr,lp=new pr;class Am extends Kc{constructor(c){const h=Im(c),M=new wr,E=[],R=[],V=new er(0,0,1),X=new er(0,1,0);for(let te=0;te<h.length;te++){const me=h[te];me.parent&&me.parent.isBone&&(E.push(0,0,0),E.push(0,0,0),R.push(V.r,V.g,V.b),R.push(X.r,X.g,X.b))}M.setAttribute("position",new Bn(E,3)),M.setAttribute("color",new Bn(R,3)),super(M,new yl({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=c,this.bones=h,this.matrix=c.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(c){const h=this.bones,M=this.geometry,E=M.getAttribute("position");lp.copy(this.root.matrixWorld).invert();for(let R=0,V=0;R<h.length;R++){const X=h[R];X.parent&&X.parent.isBone&&(sf.multiplyMatrices(lp,X.matrixWorld),Vu.setFromMatrixPosition(sf),E.setXYZ(V,Vu.x,Vu.y,Vu.z),sf.multiplyMatrices(lp,X.parent.matrixWorld),Vu.setFromMatrixPosition(sf),E.setXYZ(V+1,Vu.x,Vu.y,Vu.z),V+=2)}M.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(c)}}function Im(x){const c=[];x&&x.isBone&&c.push(x);for(let h=0;h<x.children.length;h++)c.push.apply(c,Im(x.children[h]));return c}class l_ extends io{constructor(c,h,M){super(new qg(h,4,2),new qc({wireframe:!0,fog:!1,toneMapped:!1})),this.light=c,this.light.updateMatrixWorld(),this.color=M,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const c_=new Ze,Rm=new er,km=new er;class KC extends Ci{constructor(c,h,M){super(),this.light=c,this.light.updateMatrixWorld(),this.matrix=c.matrixWorld,this.matrixAutoUpdate=!1,this.color=M;const E=new Eb(h);E.rotateY(.5*Math.PI),this.material=new qc({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const R=E.getAttribute("position"),V=new Float32Array(3*R.count);E.setAttribute("color",new Wr(V,3)),this.add(new io(E,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const c=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const h=c.geometry.getAttribute("color");Rm.copy(this.light.color),km.copy(this.light.groundColor);for(let M=0,E=h.count;M<E;M++){const R=M<E/2?Rm:km;h.setXYZ(M,R.r,R.g,R.b)}h.needsUpdate=!0}c.lookAt(c_.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Xw extends Kc{constructor(c=10,h=10,M=4473924,E=8947848){M=new er(M),E=new er(E);const R=h/2,V=c/h,X=c/2,ee=[],te=[];for(let ge=0,be=0,Te=-X;ge<=h;ge++,Te+=V){ee.push(-X,0,Te,X,0,Te),ee.push(Te,0,-X,Te,0,X);const Oe=ge===R?M:E;Oe.toArray(te,be),be+=3,Oe.toArray(te,be),be+=3,Oe.toArray(te,be),be+=3,Oe.toArray(te,be),be+=3}const me=new wr;me.setAttribute("position",new Bn(ee,3)),me.setAttribute("color",new Bn(te,3)),super(me,new yl({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class QC extends Kc{constructor(c=10,h=16,M=8,E=64,R=4473924,V=8947848){R=new er(R),V=new er(V);const X=[],ee=[];for(let de=0;de<=h;de++){const ge=de/h*(2*Math.PI),be=Math.sin(ge)*c,Te=Math.cos(ge)*c;X.push(0,0,0),X.push(be,0,Te);const Oe=1&de?R:V;ee.push(Oe.r,Oe.g,Oe.b),ee.push(Oe.r,Oe.g,Oe.b)}for(let de=0;de<=M;de++){const ge=1&de?R:V,be=c-c/M*de;for(let Te=0;Te<E;Te++){let Oe=Te/E*(2*Math.PI),ze=Math.sin(Oe)*be,ke=Math.cos(Oe)*be;X.push(ze,0,ke),ee.push(ge.r,ge.g,ge.b),Oe=(Te+1)/E*(2*Math.PI),ze=Math.sin(Oe)*be,ke=Math.cos(Oe)*be,X.push(ze,0,ke),ee.push(ge.r,ge.g,ge.b)}}const te=new wr;te.setAttribute("position",new Bn(X,3)),te.setAttribute("color",new Bn(ee,3)),super(te,new yl({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const Jw=new Ze,Hv=new Ze,Kw=new Ze;class $C extends Ci{constructor(c,h,M){super(),this.light=c,this.light.updateMatrixWorld(),this.matrix=c.matrixWorld,this.matrixAutoUpdate=!1,this.color=M,void 0===h&&(h=1);let E=new wr;E.setAttribute("position",new Bn([-h,h,0,h,h,0,h,-h,0,-h,-h,0,-h,h,0],3));const R=new yl({fog:!1,toneMapped:!1});this.lightPlane=new Th(E,R),this.add(this.lightPlane),E=new wr,E.setAttribute("position",new Bn([0,0,0,0,0,1],3)),this.targetLine=new Th(E,R),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Jw.setFromMatrixPosition(this.light.matrixWorld),Hv.setFromMatrixPosition(this.light.target.matrixWorld),Kw.subVectors(Hv,Jw),this.lightPlane.lookAt(Hv),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Hv),this.targetLine.scale.z=Kw.length()}}const zv=new Ze,tl=new sc;class hI extends Kc{constructor(c){const h=new wr,M=new yl({color:16777215,vertexColors:!0,toneMapped:!1}),E=[],R=[],V={},X=new er(16755200),ee=new er(16711680),te=new er(43775),me=new er(16777215),de=new er(3355443);function ge(Te,Oe,ze){be(Te,ze),be(Oe,ze)}function be(Te,Oe){E.push(0,0,0),R.push(Oe.r,Oe.g,Oe.b),void 0===V[Te]&&(V[Te]=[]),V[Te].push(E.length/3-1)}ge("n1","n2",X),ge("n2","n4",X),ge("n4","n3",X),ge("n3","n1",X),ge("f1","f2",X),ge("f2","f4",X),ge("f4","f3",X),ge("f3","f1",X),ge("n1","f1",X),ge("n2","f2",X),ge("n3","f3",X),ge("n4","f4",X),ge("p","n1",ee),ge("p","n2",ee),ge("p","n3",ee),ge("p","n4",ee),ge("u1","u2",te),ge("u2","u3",te),ge("u3","u1",te),ge("c","t",me),ge("p","c",de),ge("cn1","cn2",de),ge("cn3","cn4",de),ge("cf1","cf2",de),ge("cf3","cf4",de),h.setAttribute("position",new Bn(E,3)),h.setAttribute("color",new Bn(R,3)),super(h,M),this.type="CameraHelper",this.camera=c,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=c.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=V,this.update()}update(){const c=this.geometry,h=this.pointMap;tl.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),cs("c",h,c,tl,0,0,-1),cs("t",h,c,tl,0,0,1),cs("n1",h,c,tl,-1,-1,-1),cs("n2",h,c,tl,1,-1,-1),cs("n3",h,c,tl,-1,1,-1),cs("n4",h,c,tl,1,1,-1),cs("f1",h,c,tl,-1,-1,1),cs("f2",h,c,tl,1,-1,1),cs("f3",h,c,tl,-1,1,1),cs("f4",h,c,tl,1,1,1),cs("u1",h,c,tl,.7,1.1,-1),cs("u2",h,c,tl,-.7,1.1,-1),cs("u3",h,c,tl,0,2,-1),cs("cf1",h,c,tl,-1,0,1),cs("cf2",h,c,tl,1,0,1),cs("cf3",h,c,tl,0,-1,1),cs("cf4",h,c,tl,0,1,1),cs("cn1",h,c,tl,-1,0,-1),cs("cn2",h,c,tl,1,0,-1),cs("cn3",h,c,tl,0,-1,-1),cs("cn4",h,c,tl,0,1,-1),c.getAttribute("position").needsUpdate=!0}}function cs(x,c,h,M,E,R,V){zv.set(E,R,V).unproject(M);const X=c[x];if(void 0!==X){const ee=h.getAttribute("position");for(let te=0,me=X.length;te<me;te++)ee.setXYZ(X[te],zv.x,zv.y,zv.z)}}const Jb=new Fo;class cp extends Kc{constructor(c,h=16776960){const M=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),E=new Float32Array(24),R=new wr;R.setIndex(new Wr(M,1)),R.setAttribute("position",new Wr(E,3)),super(R,new yl({color:h,toneMapped:!1})),this.object=c,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(c){if(void 0!==c&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Jb.setFromObject(this.object),Jb.isEmpty())return;const h=Jb.min,M=Jb.max,E=this.geometry.attributes.position,R=E.array;R[0]=M.x,R[1]=M.y,R[2]=M.z,R[3]=h.x,R[4]=M.y,R[5]=M.z,R[6]=h.x,R[7]=h.y,R[8]=M.z,R[9]=M.x,R[10]=h.y,R[11]=M.z,R[12]=M.x,R[13]=M.y,R[14]=h.z,R[15]=h.x,R[16]=M.y,R[17]=h.z,R[18]=h.x,R[19]=h.y,R[20]=h.z,R[21]=M.x,R[22]=h.y,R[23]=h.z,E.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(c){return this.object=c,this.update(),this}copy(c){return Kc.prototype.copy.call(this,c),this.object=c.object,this}}class eS extends Kc{constructor(c,h=16776960){const M=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),R=new wr;R.setIndex(new Wr(M,1)),R.setAttribute("position",new Bn([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(R,new yl({color:h,toneMapped:!1})),this.box=c,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(c){const h=this.box;h.isEmpty()||(h.getCenter(this.position),h.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(c))}}class dI extends Th{constructor(c,h=1,M=16776960){const E=M,V=new wr;V.setAttribute("position",new Bn([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),V.computeBoundingSphere(),super(V,new yl({color:E,toneMapped:!1})),this.type="PlaneHelper",this.plane=c,this.size=h;const ee=new wr;ee.setAttribute("position",new Bn([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),ee.computeBoundingSphere(),this.add(new io(ee,new qc({color:E,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(c){let h=-this.plane.constant;Math.abs(h)<1e-8&&(h=1e-8),this.scale.set(.5*this.size,.5*this.size,h),this.children[0].material.side=h<0?W:J,this.lookAt(this.plane.normal),super.updateMatrixWorld(c)}}const tS=new Ze;let Vv,Qw;class nS extends Ci{constructor(c=new Ze(0,0,1),h=new Ze(0,0,0),M=1,E=16776960,R=.2*M,V=.2*R){super(),this.type="ArrowHelper",void 0===Vv&&(Vv=new wr,Vv.setAttribute("position",new Bn([0,0,0,0,1,0],3)),Qw=new Vg(0,.5,1,5,1),Qw.translate(0,-.5,0)),this.position.copy(h),this.line=new Th(Vv,new yl({color:E,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new io(Qw,new qc({color:E,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(c),this.setLength(M,R,V)}setDirection(c){if(c.y>.99999)this.quaternion.set(0,0,0,1);else if(c.y<-.99999)this.quaternion.set(1,0,0,0);else{tS.set(c.z,0,-c.x).normalize();const h=Math.acos(c.y);this.quaternion.setFromAxisAngle(tS,h)}}setLength(c,h=.2*c,M=.2*h){this.line.scale.set(1,Math.max(1e-4,c-h),1),this.line.updateMatrix(),this.cone.scale.set(M,h,M),this.cone.position.y=c,this.cone.updateMatrix()}setColor(c){this.line.material.color.set(c),this.cone.material.color.set(c)}copy(c){return super.copy(c,!1),this.line.copy(c.line),this.cone.copy(c.cone),this}}class iS extends Kc{constructor(c=1){const h=[0,0,0,c,0,0,0,0,0,0,c,0,0,0,0,0,0,c],E=new wr;E.setAttribute("position",new Bn(h,3)),E.setAttribute("color",new Bn([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(E,new yl({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}}const rS=new Float32Array(1),tF=new Int32Array(rS.buffer),fI={toHalfFloat:function(x){rS[0]=x;const c=tF[0];let h=c>>16&32768,M=c>>12&2047;const E=c>>23&255;return E<103?h:E>142?(h|=31744,h|=(255==E?0:1)&&8388607&c,h):E<113?(M|=2048,h|=(M>>114-E)+(M>>113-E&1),h):(h|=E-112<<10|M>>1,h+=1&M,h)}},ad=Math.pow(2,8),pI=[.125,.215,.35,.446,.526,.582],mI=5+pI.length,ld={[sl]:0,[gc]:1,[Gh]:2,[Hr]:3,[Wh]:4,[ph]:5,[Uh]:6},hp=new qc({side:W,depthWrite:!1,depthTest:!1}),nF=new io(new ku,hp),$w=new n_,{_lodPlanes:cd,_sizeLods:sS,_sigmas:Gv}=vI(),oS=new er;let Kb=null;const ud=(1+Math.sqrt(5))/2,u_=1/ud,e1=[new Ze(1,1,1),new Ze(-1,1,1),new Ze(1,1,-1),new Ze(-1,1,-1),new Ze(0,ud,u_),new Ze(0,ud,-u_),new Ze(u_,0,ud),new Ze(-u_,0,ud),new Ze(ud,u_,0),new Ze(-ud,u_,0)];function aS(x){const c=Math.max(x.r,x.g,x.b),h=Math.min(Math.max(Math.ceil(Math.log2(c)),-128),127);return x.multiplyScalar(Math.pow(2,-h)),(h+128)/255}class gI{constructor(c){this._renderer=c,this._pingPongRenderTarget=null,this._blurMaterial=function yI(x){const c=new Float32Array(x),h=new Ze(0,1,0);return new Yg({name:"SphericalGaussianBlur",defines:{n:x},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:c},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:h},inputEncoding:{value:ld[sl]},outputEncoding:{value:ld[sl]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:ae,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(c,h=0,M=.1,E=100){Kb=this._renderer.getRenderTarget();const R=this._allocateTargets();return this._sceneToCubeUV(c,M,E,R),h>0&&this._blur(R,0,0,h),this._applyPMREM(R),this._cleanup(R),R}fromEquirectangular(c){return this._fromTexture(c)}fromCubemap(c){return this._fromTexture(c)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=n1(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=t1(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let c=0;c<cd.length;c++)cd[c].dispose()}_cleanup(c){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Kb),c.scissorTest=!1,Wv(c,0,0,c.width,c.height)}_fromTexture(c){Kb=this._renderer.getRenderTarget();const h=this._allocateTargets(c);return this._textureToCubeUV(c,h),this._applyPMREM(h),this._cleanup(h),h}_allocateTargets(c){const h={magFilter:vo,minFilter:vo,generateMipmaps:!1,type:Y,format:ei,encoding:(x=c,void 0===x||x.type!==Y||x.encoding!==sl&&x.encoding!==gc&&x.encoding!==Uh?Gh:c.encoding),depthBuffer:!1},M=lS(h);var x;return M.depthBuffer=!c,this._pingPongRenderTarget=lS(h),M}_compileMaterial(c){const h=new io(cd[0],c);this._renderer.compile(h,$w)}_sceneToCubeUV(c,h,M,E){const X=new ga(90,1,h,M),ee=[1,-1,1,1,1,1],te=[1,1,1,-1,-1,-1],me=this._renderer,de=me.autoClear,ge=me.outputEncoding,be=me.toneMapping;me.getClearColor(oS),me.toneMapping=nt,me.outputEncoding=sl,me.autoClear=!1;let Te=!1;const Oe=c.background;if(Oe){if(Oe.isColor){hp.color.copy(Oe).convertSRGBToLinear(),c.background=null;const ze=aS(hp.color);hp.opacity=ze,Te=!0}}else{hp.color.copy(oS).convertSRGBToLinear();const ze=aS(hp.color);hp.opacity=ze,Te=!0}for(let ze=0;ze<6;ze++){const ke=ze%3;0==ke?(X.up.set(0,ee[ze],0),X.lookAt(te[ze],0,0)):1==ke?(X.up.set(0,0,ee[ze]),X.lookAt(0,te[ze],0)):(X.up.set(0,ee[ze],0),X.lookAt(0,0,te[ze])),Wv(E,ke*ad,ze>2?ad:0,ad,ad),me.setRenderTarget(E),Te&&me.render(nF,X),me.render(c,X)}me.toneMapping=be,me.outputEncoding=ge,me.autoClear=de}_textureToCubeUV(c,h){const M=this._renderer;c.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=n1()):null==this._equirectShader&&(this._equirectShader=t1());const E=c.isCubeTexture?this._cubemapShader:this._equirectShader,R=new io(cd[0],E),V=E.uniforms;V.envMap.value=c,c.isCubeTexture||V.texelSize.value.set(1/c.image.width,1/c.image.height),V.inputEncoding.value=ld[c.encoding],V.outputEncoding.value=ld[h.texture.encoding],Wv(h,0,0,3*ad,2*ad),M.setRenderTarget(h),M.render(R,$w)}_applyPMREM(c){const h=this._renderer,M=h.autoClear;h.autoClear=!1;for(let E=1;E<mI;E++){const R=Math.sqrt(Gv[E]*Gv[E]-Gv[E-1]*Gv[E-1]);this._blur(c,E-1,E,R,e1[(E-1)%e1.length])}h.autoClear=M}_blur(c,h,M,E,R){const V=this._pingPongRenderTarget;this._halfBlur(c,V,h,M,E,"latitudinal",R),this._halfBlur(V,c,M,M,E,"longitudinal",R)}_halfBlur(c,h,M,E,R,V,X){const ee=this._renderer,te=this._blurMaterial;"latitudinal"!==V&&"longitudinal"!==V&&console.error("blur direction must be either latitudinal or longitudinal!");const de=new io(cd[E],te),ge=te.uniforms,be=sS[M]-1,Te=isFinite(R)?Math.PI/(2*be):2*Math.PI/39,Oe=R/Te,ze=isFinite(R)?1+Math.floor(3*Oe):20;ze>20&&console.warn(`sigmaRadians, ${R}, is too large and will clip, as it requested ${ze} samples when the maximum is set to 20`);const ke=[];let Ee=0;for(let tt=0;tt<20;++tt){const Rt=tt/Oe,rn=Math.exp(-Rt*Rt/2);ke.push(rn),0==tt?Ee+=rn:tt<ze&&(Ee+=2*rn)}for(let tt=0;tt<ke.length;tt++)ke[tt]=ke[tt]/Ee;ge.envMap.value=c.texture,ge.samples.value=ze,ge.weights.value=ke,ge.latitudinal.value="latitudinal"===V,X&&(ge.poleAxis.value=X),ge.dTheta.value=Te,ge.mipInt.value=8-M,ge.inputEncoding.value=ld[c.texture.encoding],ge.outputEncoding.value=ld[c.texture.encoding];const at=sS[E];Wv(h,3*Math.max(0,ad-2*at),(0===E?0:2*ad)+2*at*(E>4?E-8+4:0),3*at,2*at),ee.setRenderTarget(h),ee.render(de,$w)}}function vI(){const x=[],c=[],h=[];let M=8;for(let E=0;E<mI;E++){const R=Math.pow(2,M);c.push(R);let V=1/R;E>4?V=pI[E-8+4-1]:0==E&&(V=0),h.push(V);const X=1/(R-1),ee=-X/2,te=1+X/2,me=[ee,ee,te,ee,te,te,ee,ee,te,te,ee,te],de=6,ge=6,be=3,Te=2,Oe=1,ze=new Float32Array(be*ge*de),ke=new Float32Array(Te*ge*de),Ee=new Float32Array(Oe*ge*de);for(let rt=0;rt<de;rt++){const gt=rt%3*2/3-1,tt=rt>2?0:-1;ze.set([gt,tt,0,gt+2/3,tt,0,gt+2/3,tt+1,0,gt,tt,0,gt+2/3,tt+1,0,gt,tt+1,0],be*ge*rt),ke.set(me,Te*ge*rt),Ee.set([rt,rt,rt,rt,rt,rt],Oe*ge*rt)}const at=new wr;at.setAttribute("position",new Wr(ze,be)),at.setAttribute("uv",new Wr(ke,Te)),at.setAttribute("faceIndex",new Wr(Ee,Oe)),x.push(at),M>4&&M--}return{_lodPlanes:x,_sizeLods:c,_sigmas:h}}function lS(x){const c=new Ro(3*ad,3*ad,x);return c.texture.mapping=oo,c.texture.name="PMREM.cubeUv",c.scissorTest=!0,c}function Wv(x,c,h,M,E){x.viewport.set(c,h,M,E),x.scissor.set(c,h,M,E)}function t1(){const x=new Un(1,1);return new Yg({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:x},inputEncoding:{value:ld[sl]},outputEncoding:{value:ld[sl]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:ae,depthTest:!1,depthWrite:!1})}function n1(){return new Yg({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:ld[sl]},outputEncoding:{value:ld[sl]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:ae,depthTest:!1,depthWrite:!1})}const r1=0,bI=1,iF=0,Bt=1,jv=2;function Zr(x){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),x}function s1(x=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),x.isMultiMaterial=!0,x.materials=x,x.clone=function(){return x.slice()},x}function xI(x,c){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new _m(x,c)}function Jr(x){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new bv(x)}function ts(x,c){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new _m(x,c)}function xl(x){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new nf(x)}function rF(x){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new nf(x)}function wI(x){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new nf(x)}function dp(x,c,h){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Ze(x,c,h)}function fp(x,c){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Wr(x,c).setUsage(Fs)}function pp(x,c){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new rc(x,c)}function Pm(x,c){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Ea(x,c)}function Zv(x,c){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Tf(x,c)}function uS(x,c){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Fd(x,c)}function o1(x,c){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Od(x,c)}function No(x,c){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new uu(x,c)}function a1(x,c){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Xh(x,c)}function MI(x,c){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Bn(x,c)}function hS(x,c){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Ha(x,c)}function dS(x){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new iS(x)}function l1(x,c){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new cp(x,c)}function Bo(x,c){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Kc(new Fr(x.geometry),new yl({color:void 0!==c?c:16777215}))}function CI(x,c){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Kc(new Db(x.geometry),new yl({color:void 0!==c?c:16777215}))}function af(x){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Hu(x)}function hd(x){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Ib(x)}function fS(x,c,h){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new la(x,h)}function c1(){console.error("THREE.CanvasRenderer has been removed")}function pS(){console.error("THREE.JSONLoader has been removed.")}eu.create=function(x,c){return console.log("THREE.Curve.create() has been deprecated"),x.prototype=Object.create(eu.prototype),x.prototype.constructor=x,x.prototype.getPoint=c,x},Pv.prototype.fromPoints=function(x){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(x)},Xw.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Am.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},bl.prototype.extractUrlBase=function(x){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),zw.extractUrlBase(x)},bl.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},tu.prototype.center=function(x){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(x)},tu.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},tu.prototype.isIntersectionBox=function(x){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(x)},tu.prototype.size=function(x){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(x)},Fo.prototype.center=function(x){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(x)},Fo.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Fo.prototype.isIntersectionBox=function(x){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(x)},Fo.prototype.isIntersectionSphere=function(x){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(x)},Fo.prototype.size=function(x){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(x)},Hs.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Wp.prototype.setFromMatrix=function(x){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(x)},op.prototype.center=function(x){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(x)},Yi.random16=function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},Yi.nearestPowerOfTwo=function(x){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Yi.floorPowerOfTwo(x)},Yi.nextPowerOfTwo=function(x){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Yi.ceilPowerOfTwo(x)},lo.prototype.flattenToArrayOffset=function(x,c){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(x,c)},lo.prototype.multiplyVector3=function(x){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),x.applyMatrix3(this)},lo.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},lo.prototype.applyToBufferAttribute=function(x){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),x.applyMatrix3(this)},lo.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},lo.prototype.getInverse=function(x){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(x).invert()},pr.prototype.extractPosition=function(x){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(x)},pr.prototype.flattenToArrayOffset=function(x,c){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(x,c)},pr.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Ze).setFromMatrixColumn(this,3)},pr.prototype.setRotationFromQuaternion=function(x){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(x)},pr.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},pr.prototype.multiplyVector3=function(x){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),x.applyMatrix4(this)},pr.prototype.multiplyVector4=function(x){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),x.applyMatrix4(this)},pr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},pr.prototype.rotateAxis=function(x){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),x.transformDirection(this)},pr.prototype.crossVector=function(x){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),x.applyMatrix4(this)},pr.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},pr.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},pr.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},pr.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},pr.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},pr.prototype.applyToBufferAttribute=function(x){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),x.applyMatrix4(this)},pr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},pr.prototype.makeFrustum=function(x,c,h,M,E,R){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(x,c,M,h,E,R)},pr.prototype.getInverse=function(x){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(x).invert()},Ca.prototype.isIntersectionLine=function(x){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(x)},Ds.prototype.multiplyVector3=function(x){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),x.applyQuaternion(this)},Ds.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},na.prototype.isIntersectionBox=function(x){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(x)},na.prototype.isIntersectionPlane=function(x){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(x)},na.prototype.isIntersectionSphere=function(x){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(x)},Sa.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Sa.prototype.barycoordFromPoint=function(x,c){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(x,c)},Sa.prototype.midpoint=function(x){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(x)},Sa.prototypenormal=function(x){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(x)},Sa.prototype.plane=function(x){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(x)},Sa.barycoordFromPoint=function(x,c,h,M,E){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Sa.getBarycoord(x,c,h,M,E)},Sa.normal=function(x,c,h,M){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Sa.getNormal(x,c,h,M)},rd.prototype.extractAllPoints=function(x){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(x)},rd.prototype.extrude=function(x){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Kf(this,x)},rd.prototype.makeGeometry=function(x){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new vm(this,x)},Un.prototype.fromAttribute=function(x,c,h){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(x,c,h)},Un.prototype.distanceToManhattan=function(x){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(x)},Un.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ze.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Ze.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Ze.prototype.getPositionFromMatrix=function(x){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(x)},Ze.prototype.getScaleFromMatrix=function(x){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(x)},Ze.prototype.getColumnFromMatrix=function(x,c){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(c,x)},Ze.prototype.applyProjection=function(x){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(x)},Ze.prototype.fromAttribute=function(x,c,h){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(x,c,h)},Ze.prototype.distanceToManhattan=function(x){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(x)},Ze.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Rs.prototype.fromAttribute=function(x,c,h){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(x,c,h)},Rs.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ci.prototype.getChildByName=function(x){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(x)},Ci.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Ci.prototype.translate=function(x,c){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(c,x)},Ci.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Ci.prototype.applyMatrix=function(x){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(x)},Object.defineProperties(Ci.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(x){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=x}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),io.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(io.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),fh},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties($x.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Bg.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Ng.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(eu.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(x){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=x}}),ga.prototype.setLens=function(x,c){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==c&&(this.filmGauge=c),this.setFocalLength(x)},Object.defineProperties(sd.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(x){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=x}},shadowCameraLeft:{set:function(x){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=x}},shadowCameraRight:{set:function(x){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=x}},shadowCameraTop:{set:function(x){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=x}},shadowCameraBottom:{set:function(x){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=x}},shadowCameraNear:{set:function(x){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=x}},shadowCameraFar:{set:function(x){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=x}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(x){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=x}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(x){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=x}},shadowMapHeight:{set:function(x){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=x}}}),Object.defineProperties(Wr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Fs},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Fs)}}}),Wr.prototype.setDynamic=function(x){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===x?Fs:Lo),this},Wr.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Wr.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},wr.prototype.addIndex=function(x){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(x)},wr.prototype.addAttribute=function(x,c){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),c&&c.isBufferAttribute||c&&c.isInterleavedBufferAttribute?"index"===x?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(c),this):this.setAttribute(x,c):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(x,new Wr(arguments[1],arguments[2])))},wr.prototype.addDrawCall=function(x,c,h){void 0!==h&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(x,c)},wr.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},wr.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},wr.prototype.removeAttribute=function(x){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(x)},wr.prototype.applyMatrix=function(x){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(x)},Object.defineProperties(wr.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Sm.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(x){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=x}}}),Object.defineProperties(sp.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(x){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=x}}}),Object.defineProperties(Jc.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Fs},set:function(x){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(x)}}}),Jc.prototype.setDynamic=function(x){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===x?Fs:Lo),this},Jc.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Kf.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Kf.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Kf.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Wf.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Object.defineProperties(Yb.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Yo.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new er}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(x){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=x===he}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(x){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=x}}}),Object.defineProperties(Ab.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Qf.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(x){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=x}}}),Object.defineProperties(Zl.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(x){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=x}}}),Qo.prototype.clearTarget=function(x,c,h,M){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(x),this.clear(c,h,M)},Qo.prototype.animate=function(x){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(x)},Qo.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Qo.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Qo.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Qo.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Qo.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Qo.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Qo.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Qo.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Qo.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Qo.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Qo.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Qo.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Qo.prototype.enableScissorTest=function(x){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(x)},Qo.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Qo.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Qo.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Qo.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Qo.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Qo.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Qo.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Qo.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Qo.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Qo.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Qo.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(x){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=x}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(x){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=x}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(x){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===x?gc:sl}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Jx.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Ro.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(x){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=x}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(x){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=x}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(x){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=x}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(x){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=x}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(x){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=x}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(x){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=x}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(x){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=x}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(x){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=x}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(x){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=x}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(x){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=x}}}),Object.defineProperties(UC.prototype,{load:{value:function(x){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const c=this;return(new Ww).load(x,function(M){c.setBuffer(M)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),sI.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Qa.prototype.updateCubeMap=function(x,c){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(x,c)},Qa.prototype.clear=function(x,c,h,M){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(x,c,h,M)},ml.crossOrigin=void 0,ml.loadTexture=function(x,c,h,M){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const E=new Rb;E.setCrossOrigin(this.crossOrigin);const R=E.load(x,h,void 0,M);return c&&(R.mapping=c),R},ml.loadTextureCube=function(x,c,h,M){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const E=new Ew;E.setCrossOrigin(this.crossOrigin);const R=E.load(x,h,void 0,M);return c&&(R.mapping=c),R},ml.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},ml.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const mS={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function gS(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:l}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=l)},266:function(K){K.exports=function(){"use strict";var G=navigator.userAgent,A=navigator.platform,y=/gecko\/\d/i.test(G),l=/MSIE \d/.test(G),d=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(G),_=/Edge\/(\d+)/.exec(G),p=l||d||_,v=p&&(l?document.documentMode||6:+(_||d)[1]),C=!_&&/WebKit\//.test(G),D=C&&/Qt\/\d+\.\d+/.test(G),I=!_&&/Chrome\/(\d+)/.exec(G),P=I&&+I[1],B=/Opera\//.test(G),U=/Apple Computer/.test(navigator.vendor),J=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(G),W=/PhantomJS/.test(G),re=U&&(/Mobile\/\w+/.test(G)||navigator.maxTouchPoints>2),he=/Android/.test(G),ie=re||he||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(G),ae=re||/Mac/.test(A),Me=/\bCrOS\b/.test(G),Ce=/win/i.test(A),Le=B&&G.match(/Version\/(\d*\.\d*)/);Le&&(Le=Number(Le[1])),Le&&Le>=15&&(B=!1,C=!0);var Ue=ae&&(D||B&&(null==Le||Le<12.11)),ce=y||p&&v>=9;function lt(g){return new RegExp("(^|\\s)"+g+"(?:$|\\s)\\s*")}var Xe,qe=function(g,S){var O=g.className,L=lt(S).exec(O);if(L){var H=O.slice(L.index+L[0].length);g.className=O.slice(0,L.index)+(H?L[1]+H:"")}};function ut(g){for(var S=g.childNodes.length;S>0;--S)g.removeChild(g.firstChild);return g}function De(g,S){return ut(g).appendChild(S)}function je(g,S,O,L){var H=document.createElement(g);if(O&&(H.className=O),L&&(H.style.cssText=L),"string"==typeof S)H.appendChild(document.createTextNode(S));else if(S)for(var oe=0;oe<S.length;++oe)H.appendChild(S[oe]);return H}function Wt(g,S,O,L){var H=je(g,S,O,L);return H.setAttribute("role","presentation"),H}function Yn(g,S){if(3==S.nodeType&&(S=S.parentNode),g.contains)return g.contains(S);do{if(11==S.nodeType&&(S=S.host),S==g)return!0}while(S=S.parentNode)}function Jt(g){var S;try{S=g.activeElement}catch(O){S=g.body||null}for(;S&&S.shadowRoot&&S.shadowRoot.activeElement;)S=S.shadowRoot.activeElement;return S}function xn(g,S){var O=g.className;lt(S).test(O)||(g.className+=(O?" ":"")+S)}function Pt(g,S){for(var O=g.split(" "),L=0;L<O.length;L++)O[L]&&!lt(O[L]).test(S)&&(S+=" "+O[L]);return S}Xe=document.createRange?function(g,S,O,L){var H=document.createRange();return H.setEnd(L||g,O),H.setStart(g,S),H}:function(g,S,O){var L=document.body.createTextRange();try{L.moveToElementText(g.parentNode)}catch(H){return L}return L.collapse(!0),L.moveEnd("character",O),L.moveStart("character",S),L};var Lt=function(g){g.select()};function Xn(g){return g.display.wrapper.ownerDocument}function ni(g){return Xn(g).defaultView}function en(g){var S=Array.prototype.slice.call(arguments,1);return function(){return g.apply(null,S)}}function gr(g,S,O){for(var L in S||(S={}),g)g.hasOwnProperty(L)&&(!1!==O||!S.hasOwnProperty(L))&&(S[L]=g[L]);return S}function zi(g,S,O,L,H){null==S&&-1==(S=g.search(/[^\s\u00a0]/))&&(S=g.length);for(var oe=L||0,ye=H||0;;){var Se=g.indexOf("\t",oe);if(Se<0||Se>=S)return ye+(S-oe);ye+=Se-oe,ye+=O-ye%O,oe=Se+1}}re?Lt=function(g){g.selectionStart=0,g.selectionEnd=g.value.length}:p&&(Lt=function(g){try{g.select()}catch(S){}});var En=function(){this.id=null,this.f=null,this.time=0,this.handler=en(this.onTimeout,this)};function Dn(g,S){for(var O=0;O<g.length;++O)if(g[O]==S)return O;return-1}En.prototype.onTimeout=function(g){g.id=0,g.time<=+new Date?g.f():setTimeout(g.handler,g.time-+new Date)},En.prototype.set=function(g,S){this.f=S;var O=+new Date+g;(!this.id||O<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,g),this.time=O)};var ii={toString:function(){return"CodeMirror.Pass"}},Os={scroll:!1},dr={origin:"*mouse"},Fe={origin:"+move"};function Fn(g,S,O){for(var L=0,H=0;;){var oe=g.indexOf("\t",L);-1==oe&&(oe=g.length);var ye=oe-L;if(oe==g.length||H+ye>=S)return L+Math.min(ye,S-H);if(H+=oe-L,L=oe+1,(H+=O-H%O)>=S)return L}}var _n=[""];function dt(g){for(;_n.length<=g;)_n.push(nt(_n)+" ");return _n[g]}function nt(g){return g[g.length-1]}function zt(g,S){for(var O=[],L=0;L<g.length;L++)O[L]=S(g[L],L);return O}function Nn(){}function an(g,S){var O;return Object.create?O=Object.create(g):(Nn.prototype=g,O=new Nn),S&&gr(S,O),O}var hi=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Oi(g){return/\w/.test(g)||g>"\x80"&&(g.toUpperCase()!=g.toLowerCase()||hi.test(g))}function mi(g,S){return S?!!(S.source.indexOf("\\w")>-1&&Oi(g))||S.test(g):Oi(g)}function fr(g){for(var S in g)if(g.hasOwnProperty(S)&&g[S])return!1;return!0}var qs=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Sr(g){return g.charCodeAt(0)>=768&&qs.test(g)}function oo(g,S,O){for(;(O<0?S>0:S<g.length)&&Sr(g.charAt(S));)S+=O;return S}function fa(g,S,O){for(var L=S>O?-1:1;;){if(S==O)return S;var H=(S+O)/2,oe=L<0?Math.ceil(H):Math.floor(H);if(oe==S)return g(oe)?S:O;g(oe)?O=oe:S=oe+L}}var os=null;function Ls(g,S,O){var L;os=null;for(var H=0;H<g.length;++H){var oe=g[H];if(oe.from<S&&oe.to>S)return H;oe.to==S&&(oe.from!=oe.to&&"before"==O?L=H:os=H),oe.from==S&&(oe.from!=oe.to&&"before"!=O?L=H:os=H)}return null!=L?L:os}var vo=function(){function O(He){return He<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(He):1424<=He&&He<=1524?"R":1536<=He&&He<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(He-1536):1774<=He&&He<=2220?"r":8192<=He&&He<=8203?"w":8204==He?"b":"L"}var L=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,H=/[stwN]/,oe=/[LRr]/,ye=/[Lb1n]/,Se=/[1n]/;function Ie(He,ot,mt){this.level=He,this.from=ot,this.to=mt}return function(He,ot){var mt="ltr"==ot?"L":"R";if(0==He.length||"ltr"==ot&&!L.test(He))return!1;for(var jt=He.length,Nt=[],Mn=0;Mn<jt;++Mn)Nt.push(O(He.charCodeAt(Mn)));for(var Gn=0,di=mt;Gn<jt;++Gn){var ci=Nt[Gn];"m"==ci?Nt[Gn]=di:di=ci}for(var fi=0,pi=mt;fi<jt;++fi){var Ki=Nt[fi];"1"==Ki&&"r"==pi?Nt[fi]="n":oe.test(Ki)&&(pi=Ki,"r"==Ki&&(Nt[fi]="R"))}for(var Pr=1,Tr=Nt[0];Pr<jt-1;++Pr){var Ps=Nt[Pr];"+"==Ps&&"1"==Tr&&"1"==Nt[Pr+1]?Nt[Pr]="1":","==Ps&&Tr==Nt[Pr+1]&&("1"==Tr||"n"==Tr)&&(Nt[Pr]=Tr),Tr=Ps}for(var Ko=0;Ko<jt;++Ko){var cl=Nt[Ko];if(","==cl)Nt[Ko]="N";else if("%"==cl){var va=void 0;for(va=Ko+1;va<jt&&"%"==Nt[va];++va);for(var Rc=Ko&&"!"==Nt[Ko-1]||va<jt&&"1"==Nt[va]?"1":"N",wc=Ko;wc<va;++wc)Nt[wc]=Rc;Ko=va-1}}for(var el=0,kc=mt;el<jt;++el){var Dl=Nt[el];"L"==kc&&"1"==Dl?Nt[el]="L":oe.test(Dl)&&(kc=Dl)}for(var ya=0;ya<jt;++ya)if(H.test(Nt[ya])){var Va=void 0;for(Va=ya+1;Va<jt&&H.test(Nt[Va]);++Va);for(var yo="L"==(ya?Nt[ya-1]:mt),tf=yo==("L"==(Va<jt?Nt[Va]:mt))?yo?"L":"R":mt,wh=ya;wh<Va;++wh)Nt[wh]=tf;ya=Va-1}for(var Mh,Al=[],Il=0;Il<jt;)if(ye.test(Nt[Il])){var nb=Il;for(++Il;Il<jt&&ye.test(Nt[Il]);++Il);Al.push(new Ie(0,nb,Il))}else{var Fu=Il,Ch=Al.length,Sh="rtl"==ot?1:0;for(++Il;Il<jt&&"L"!=Nt[Il];++Il);for(var Mc=Fu;Mc<Il;)if(Se.test(Nt[Mc])){Fu<Mc&&(Al.splice(Ch,0,new Ie(1,Fu,Mc)),Ch+=Sh);var hm=Mc;for(++Mc;Mc<Il&&Se.test(Nt[Mc]);++Mc);Al.splice(Ch,0,new Ie(2,hm,Mc)),Ch+=Sh,Fu=Mc}else++Mc;Fu<Il&&Al.splice(Ch,0,new Ie(1,Fu,Il))}return"ltr"==ot&&(1==Al[0].level&&(Mh=He.match(/^\s+/))&&(Al[0].from=Mh[0].length,Al.unshift(new Ie(0,0,Mh[0].length))),1==nt(Al).level&&(Mh=He.match(/\s+$/))&&(nt(Al).to-=Mh[0].length,Al.push(new Ie(0,jt-Mh[0].length,jt)))),"rtl"==ot?Al.reverse():Al}}();function ca(g,S){var O=g.order;return null==O&&(O=g.order=vo(g.text,S)),O}var ja=[],sr=function(g,S,O){if(g.addEventListener)g.addEventListener(S,O,!1);else if(g.attachEvent)g.attachEvent("on"+S,O);else{var L=g._handlers||(g._handlers={});L[S]=(L[S]||ja).concat(O)}};function Zu(g,S){return g._handlers&&g._handlers[S]||ja}function $i(g,S,O){if(g.removeEventListener)g.removeEventListener(S,O,!1);else if(g.detachEvent)g.detachEvent("on"+S,O);else{var L=g._handlers,H=L&&L[S];if(H){var oe=Dn(H,O);oe>-1&&(L[S]=H.slice(0,oe).concat(H.slice(oe+1)))}}}function Is(g,S){var O=Zu(g,S);if(O.length)for(var L=Array.prototype.slice.call(arguments,2),H=0;H<O.length;++H)O[H].apply(null,L)}function b(g,S,O){return"string"==typeof S&&(S={type:S,preventDefault:function(){this.defaultPrevented=!0}}),Is(g,O||S.type,g,S),Ae(S)||S.codemirrorIgnore}function k(g){var S=g._handlers&&g._handlers.cursorActivity;if(S)for(var O=g.curOp.cursorActivityHandlers||(g.curOp.cursorActivityHandlers=[]),L=0;L<S.length;++L)-1==Dn(O,S[L])&&O.push(S[L])}function z(g,S){return Zu(g,S).length>0}function Y(g){g.prototype.on=function(S,O){sr(this,S,O)},g.prototype.off=function(S,O){$i(this,S,O)}}function ne(g){g.preventDefault?g.preventDefault():g.returnValue=!1}function pe(g){g.stopPropagation?g.stopPropagation():g.cancelBubble=!0}function Ae(g){return null!=g.defaultPrevented?g.defaultPrevented:0==g.returnValue}function Ge(g){ne(g),pe(g)}function $e(g){return g.target||g.srcElement}function yt(g){var S=g.which;return null==S&&(1&g.button?S=1:2&g.button?S=3:4&g.button&&(S=2)),ae&&g.ctrlKey&&1==S&&(S=3),S}var tn,qt,Mt=function(){if(p&&v<9)return!1;var g=je("div");return"draggable"in g||"dragDrop"in g}();function Tt(g){if(null==tn){var S=je("span","\u200b");De(g,je("span",[S,document.createTextNode("x")])),0!=g.firstChild.offsetHeight&&(tn=S.offsetWidth<=1&&S.offsetHeight>2&&!(p&&v<8))}var O=tn?je("span","\u200b"):je("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return O.setAttribute("cm-text",""),O}function sn(g){if(null!=qt)return qt;var S=De(g,document.createTextNode("A\u062eA")),O=Xe(S,0,1).getBoundingClientRect(),L=Xe(S,1,2).getBoundingClientRect();return ut(g),!(!O||O.left==O.right)&&(qt=L.right-O.right<3)}var g,Dt=3!="\n\nb".split(/\n/).length?function(g){for(var S=0,O=[],L=g.length;S<=L;){var H=g.indexOf("\n",S);-1==H&&(H=g.length);var oe=g.slice(S,"\r"==g.charAt(H-1)?H-1:H),ye=oe.indexOf("\r");-1!=ye?(O.push(oe.slice(0,ye)),S+=ye+1):(O.push(oe),S=H+1)}return O}:function(g){return g.split(/\r\n?|\n/)},nn=window.getSelection?function(g){try{return g.selectionStart!=g.selectionEnd}catch(S){return!1}}:function(g){var S;try{S=g.ownerDocument.selection.createRange()}catch(O){}return!(!S||S.parentElement()!=g)&&0!=S.compareEndPoints("StartToEnd",S)},bn="oncopy"in(g=je("div"))||(g.setAttribute("oncopy","return;"),"function"==typeof g.oncopy),ln=null;var ei={},Ri={};function Di(g,S){arguments.length>2&&(S.dependencies=Array.prototype.slice.call(arguments,2)),ei[g]=S}function Ii(g){if("string"==typeof g&&Ri.hasOwnProperty(g))g=Ri[g];else if(g&&"string"==typeof g.name&&Ri.hasOwnProperty(g.name)){var S=Ri[g.name];"string"==typeof S&&(S={name:S}),(g=an(S,g)).name=S.name}else{if("string"==typeof g&&/^[\w\-]+\/[\w\-]+\+xml$/.test(g))return Ii("application/xml");if("string"==typeof g&&/^[\w\-]+\/[\w\-]+\+json$/.test(g))return Ii("application/json")}return"string"==typeof g?{name:g}:g||{name:"null"}}function Er(g,S){S=Ii(S);var O=ei[S.name];if(!O)return Er(g,"text/plain");var L=O(g,S);if(Ui.hasOwnProperty(S.name)){var H=Ui[S.name];for(var oe in H)!H.hasOwnProperty(oe)||(L.hasOwnProperty(oe)&&(L["_"+oe]=L[oe]),L[oe]=H[oe])}if(L.name=S.name,S.helperType&&(L.helperType=S.helperType),S.modeProps)for(var ye in S.modeProps)L[ye]=S.modeProps[ye];return L}var Ui={};function $r(g,S){gr(S,Ui.hasOwnProperty(g)?Ui[g]:Ui[g]={})}function Ur(g,S){if(!0===S)return S;if(g.copyState)return g.copyState(S);var O={};for(var L in S){var H=S[L];H instanceof Array&&(H=H.concat([])),O[L]=H}return O}function oa(g,S){for(var O;g.innerMode&&(O=g.innerMode(S))&&O.mode!=g;)S=O.state,g=O.mode;return O||{mode:g,state:S}}function rl(g,S,O){return!g.startState||g.startState(S,O)}var $s=function(g,S,O){this.pos=this.start=0,this.string=g,this.tabSize=S||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=O};function Gi(g,S){if((S-=g.first)<0||S>=g.size)throw new Error("There is no line "+(S+g.first)+" in the document.");for(var O=g;!O.lines;)for(var L=0;;++L){var H=O.children[L],oe=H.chunkSize();if(S<oe){O=H;break}S-=oe}return O.lines[S]}function Do(g,S,O){var L=[],H=S.line;return g.iter(S.line,O.line+1,function(oe){var ye=oe.text;H==O.line&&(ye=ye.slice(0,O.ch)),H==S.line&&(ye=ye.slice(S.ch)),L.push(ye),++H}),L}function Ns(g,S,O){var L=[];return g.iter(S,O,function(H){L.push(H.text)}),L}function ua(g,S){var O=S-g.height;if(O)for(var L=g;L;L=L.parent)L.height+=O}function as(g){if(null==g.parent)return null;for(var S=g.parent,O=Dn(S.lines,g),L=S.parent;L;S=L,L=L.parent)for(var H=0;L.children[H]!=S;++H)O+=L.children[H].chunkSize();return O+S.first}function js(g,S){var O=g.first;e:do{for(var L=0;L<g.children.length;++L){var H=g.children[L],oe=H.height;if(S<oe){g=H;continue e}S-=oe,O+=H.chunkSize()}return O}while(!g.lines);for(var ye=0;ye<g.lines.length;++ye){var Ie=g.lines[ye].height;if(S<Ie)break;S-=Ie}return O+ye}function Ao(g,S){return S>=g.first&&S<g.first+g.size}function Pa(g,S){return String(g.lineNumberFormatter(S+g.firstLineNumber))}function Pe(g,S,O){if(void 0===O&&(O=null),!(this instanceof Pe))return new Pe(g,S,O);this.line=g,this.ch=S,this.sticky=O}function Ke(g,S){return g.line-S.line||g.ch-S.ch}function yn(g,S){return g.sticky==S.sticky&&0==Ke(g,S)}function An(g){return Pe(g.line,g.ch)}function Rr(g,S){return Ke(g,S)<0?S:g}function vs(g,S){return Ke(g,S)<0?g:S}function Zi(g,S){return Math.max(g.first,Math.min(S,g.first+g.size-1))}function Jn(g,S){if(S.line<g.first)return Pe(g.first,0);var O=g.first+g.size-1;return S.line>O?Pe(O,Gi(g,O).text.length):function La(g,S){var O=g.ch;return null==O||O>S?Pe(g.line,S):O<0?Pe(g.line,0):g}(S,Gi(g,S.line).text.length)}function Eu(g,S){for(var O=[],L=0;L<S.length;L++)O[L]=Jn(g,S[L]);return O}$s.prototype.eol=function(){return this.pos>=this.string.length},$s.prototype.sol=function(){return this.pos==this.lineStart},$s.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},$s.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},$s.prototype.eat=function(g){var S=this.string.charAt(this.pos);if("string"==typeof g?S==g:S&&(g.test?g.test(S):g(S)))return++this.pos,S},$s.prototype.eatWhile=function(g){for(var S=this.pos;this.eat(g););return this.pos>S},$s.prototype.eatSpace=function(){for(var g=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>g},$s.prototype.skipToEnd=function(){this.pos=this.string.length},$s.prototype.skipTo=function(g){var S=this.string.indexOf(g,this.pos);if(S>-1)return this.pos=S,!0},$s.prototype.backUp=function(g){this.pos-=g},$s.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=zi(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?zi(this.string,this.lineStart,this.tabSize):0)},$s.prototype.indentation=function(){return zi(this.string,null,this.tabSize)-(this.lineStart?zi(this.string,this.lineStart,this.tabSize):0)},$s.prototype.match=function(g,S,O){if("string"!=typeof g){var oe=this.string.slice(this.pos).match(g);return oe&&oe.index>0?null:(oe&&!1!==S&&(this.pos+=oe[0].length),oe)}var L=function(ye){return O?ye.toLowerCase():ye};if(L(this.string.substr(this.pos,g.length))==L(g))return!1!==S&&(this.pos+=g.length),!0},$s.prototype.current=function(){return this.string.slice(this.start,this.pos)},$s.prototype.hideFirstChars=function(g,S){this.lineStart+=g;try{return S()}finally{this.lineStart-=g}},$s.prototype.lookAhead=function(g){var S=this.lineOracle;return S&&S.lookAhead(g)},$s.prototype.baseToken=function(){var g=this.lineOracle;return g&&g.baseToken(this.pos)};var Wi=function(g,S){this.state=g,this.lookAhead=S},Fa=function(g,S,O,L){this.state=S,this.doc=g,this.line=O,this.maxLookAhead=L||0,this.baseTokens=null,this.baseTokenPos=1};function cr(g,S,O,L){var H=[g.state.modeGen],oe={};Lp(g,S.text,g.doc.mode,O,function(He,ot){return H.push(He,ot)},oe,L);for(var ye=O.state,Se=function(He){O.baseTokens=H;var ot=g.state.overlays[He],mt=1,jt=0;O.state=!0,Lp(g,S.text,ot.mode,O,function(Nt,Mn){for(var Gn=mt;jt<Nt;){var di=H[mt];di>Nt&&H.splice(mt,1,Nt,H[mt+1],di),mt+=2,jt=Math.min(Nt,di)}if(Mn)if(ot.opaque)H.splice(Gn,mt-Gn,Nt,"overlay "+Mn),mt=Gn+2;else for(;Gn<mt;Gn+=2){var ci=H[Gn+1];H[Gn+1]=(ci?ci+" ":"")+"overlay "+Mn}},oe),O.state=ye,O.baseTokens=null,O.baseTokenPos=1},Ie=0;Ie<g.state.overlays.length;++Ie)Se(Ie);return{styles:H,classes:oe.bgClass||oe.textClass?oe:null}}function Ts(g,S,O){if(!S.styles||S.styles[0]!=g.state.modeGen){var L=qo(g,as(S)),H=S.text.length>g.options.maxHighlightLength&&Ur(g.doc.mode,L.state),oe=cr(g,S,L);H&&(L.state=H),S.stateAfter=L.save(!H),S.styles=oe.styles,oe.classes?S.styleClasses=oe.classes:S.styleClasses&&(S.styleClasses=null),O===g.doc.highlightFrontier&&(g.doc.modeFrontier=Math.max(g.doc.modeFrontier,++g.doc.highlightFrontier))}return S.styles}function qo(g,S,O){var L=g.doc,H=g.display;if(!L.mode.startState)return new Fa(L,!0,S);var oe=function zc(g,S,O){for(var L,H,oe=g.doc,ye=O?-1:S-(g.doc.mode.innerMode?1e3:100),Se=S;Se>ye;--Se){if(Se<=oe.first)return oe.first;var Ie=Gi(oe,Se-1),He=Ie.stateAfter;if(He&&(!O||Se+(He instanceof Wi?He.lookAhead:0)<=oe.modeFrontier))return Se;var ot=zi(Ie.text,null,g.options.tabSize);(null==H||L>ot)&&(H=Se-1,L=ot)}return H}(g,S,O),ye=oe>L.first&&Gi(L,oe-1).stateAfter,Se=ye?Fa.fromSaved(L,ye,oe):new Fa(L,rl(L.mode),oe);return L.iter(oe,S,function(Ie){kp(g,Ie.text,Se);var He=Se.line;Ie.stateAfter=He==S-1||He%5==0||He>=H.viewFrom&&He<H.viewTo?Se.save():null,Se.nextLine()}),O&&(L.modeFrontier=Se.line),Se}function kp(g,S,O,L){var H=g.doc.mode,oe=new $s(S,g.options.tabSize,O);for(oe.start=oe.pos=L||0,""==S&&ug(H,O.state);!oe.eol();)mc(H,oe,O.state),oe.start=oe.pos}function ug(g,S){if(g.blankLine)return g.blankLine(S);if(g.innerMode){var O=oa(g,S);if(O.mode.blankLine)return O.mode.blankLine(O.state)}}function mc(g,S,O,L){for(var H=0;H<10;H++){L&&(L[0]=oa(g,O).mode);var oe=g.token(S,O);if(S.pos>S.start)return oe}throw new Error("Mode "+g.name+" failed to advance stream.")}Fa.prototype.lookAhead=function(g){var S=this.doc.getLine(this.line+g);return null!=S&&g>this.maxLookAhead&&(this.maxLookAhead=g),S},Fa.prototype.baseToken=function(g){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=g;)this.baseTokenPos+=2;var S=this.baseTokens[this.baseTokenPos+1];return{type:S&&S.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-g}},Fa.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Fa.fromSaved=function(g,S,O){return S instanceof Wi?new Fa(g,Ur(g.mode,S.state),O,S.lookAhead):new Fa(g,Ur(g.mode,S),O)},Fa.prototype.save=function(g){var S=!1!==g?Ur(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Wi(S,this.maxLookAhead):S};var Ma=function(g,S,O){this.start=g.start,this.end=g.pos,this.string=g.current(),this.type=S||null,this.state=O};function Mf(g,S,O,L){var ye,ot,H=g.doc,oe=H.mode,Se=Gi(H,(S=Jn(H,S)).line),Ie=qo(g,S.line,O),He=new $s(Se.text,g.options.tabSize,Ie);for(L&&(ot=[]);(L||He.pos<S.ch)&&!He.eol();)He.start=He.pos,ye=mc(oe,He,Ie.state),L&&ot.push(new Ma(He,ye,Ur(H.mode,Ie.state)));return L?ot:new Ma(He,ye,Ie.state)}function Pp(g,S){if(g)for(;;){var O=g.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!O)break;g=g.slice(0,O.index)+g.slice(O.index+O[0].length);var L=O[1]?"bgClass":"textClass";null==S[L]?S[L]=O[2]:new RegExp("(?:^|\\s)"+O[2]+"(?:$|\\s)").test(S[L])||(S[L]+=" "+O[2])}return g}function Lp(g,S,O,L,H,oe,ye){var Se=O.flattenSpans;null==Se&&(Se=g.options.flattenSpans);var mt,Ie=0,He=null,ot=new $s(S,g.options.tabSize,L),jt=g.options.addModeClass&&[null];for(""==S&&Pp(ug(O,L.state),oe);!ot.eol();){if(ot.pos>g.options.maxHighlightLength?(Se=!1,ye&&kp(g,S,L,ot.pos),ot.pos=S.length,mt=null):mt=Pp(mc(O,ot,L.state,jt),oe),jt){var Nt=jt[0].name;Nt&&(mt="m-"+(mt?Nt+" "+mt:Nt))}if(!Se||He!=mt){for(;Ie<ot.start;)H(Ie=Math.min(ot.start,Ie+5e3),He);He=mt}ot.start=ot.pos}for(;Ie<ot.pos;){var Mn=Math.min(ot.pos,Ie+5e3);H(Mn,He),Ie=Mn}}var Fp=!1,Vc=!1;function Cf(g,S,O){this.marker=g,this.from=S,this.to=O}function Vh(g,S){if(g)for(var O=0;O<g.length;++O){var L=g[O];if(L.marker==S)return L}}function Np(g,S){for(var O,L=0;L<g.length;++L)g[L]!=S&&(O||(O=[])).push(g[L]);return O}function Ed(g,S){if(S.full)return null;var O=Ao(g,S.from.line)&&Gi(g,S.from.line).markedSpans,L=Ao(g,S.to.line)&&Gi(g,S.to.line).markedSpans;if(!O&&!L)return null;var H=S.from.ch,oe=S.to.ch,ye=0==Ke(S.from,S.to),Se=function Mo(g,S,O){var L;if(g)for(var H=0;H<g.length;++H){var oe=g[H],ye=oe.marker;null!=oe.from&&!(ye.inclusiveLeft?oe.from<=S:oe.from<S)&&(oe.from!=S||"bookmark"!=ye.type||O&&oe.marker.insertLeft)||(L||(L=[])).push(new Cf(ye,oe.from,null==oe.to||(ye.inclusiveRight?oe.to>=S:oe.to>S)?null:oe.to))}return L}(O,H,ye),Ie=function Sf(g,S,O){var L;if(g)for(var H=0;H<g.length;++H){var oe=g[H],ye=oe.marker;(null==oe.to||(ye.inclusiveRight?oe.to>=S:oe.to>S)||oe.from==S&&"bookmark"==ye.type&&(!O||oe.marker.insertLeft))&&(L||(L=[])).push(new Cf(ye,null==oe.from||(ye.inclusiveLeft?oe.from<=S:oe.from<S)?null:oe.from-S,null==oe.to?null:oe.to-S))}return L}(L,oe,ye),He=1==S.text.length,ot=nt(S.text).length+(He?H:0);if(Se)for(var mt=0;mt<Se.length;++mt){var jt=Se[mt];if(null==jt.to){var Nt=Vh(Ie,jt.marker);Nt?He&&(jt.to=null==Nt.to?null:Nt.to+ot):jt.to=H}}if(Ie)for(var Mn=0;Mn<Ie.length;++Mn){var Gn=Ie[Mn];null!=Gn.to&&(Gn.to+=ot),null==Gn.from?Vh(Se,Gn.marker)||(Gn.from=ot,He&&(Se||(Se=[])).push(Gn)):(Gn.from+=ot,He&&(Se||(Se=[])).push(Gn))}Se&&(Se=dh(Se)),Ie&&Ie!=Se&&(Ie=dh(Ie));var ci=[Se];if(!He){var pi,fi=S.text.length-2;if(fi>0&&Se)for(var Ki=0;Ki<Se.length;++Ki)null==Se[Ki].to&&(pi||(pi=[])).push(new Cf(Se[Ki].marker,null,null));for(var Pr=0;Pr<fi;++Pr)ci.push(pi);ci.push(Ie)}return ci}function dh(g){for(var S=0;S<g.length;++S){var O=g[S];null!=O.from&&O.from==O.to&&!1!==O.marker.clearWhenEmpty&&g.splice(S--,1)}return g.length?g:null}function Td(g){var S=g.markedSpans;if(S){for(var O=0;O<S.length;++O)S[O].marker.detachLine(g);g.markedSpans=null}}function Cs(g,S){if(S){for(var O=0;O<S.length;++O)S[O].marker.attachLine(g);g.markedSpans=S}}function au(g){return g.inclusiveLeft?-1:0}function fh(g){return g.inclusiveRight?1:0}function Dd(g,S){var O=g.lines.length-S.lines.length;if(0!=O)return O;var L=g.find(),H=S.find(),oe=Ke(L.from,H.from)||au(g)-au(S);return oe?-oe:Ke(L.to,H.to)||fh(g)-fh(S)||S.id-g.id}function Bp(g,S){var L,O=Vc&&g.markedSpans;if(O)for(var H=void 0,oe=0;oe<O.length;++oe)(H=O[oe]).marker.collapsed&&null==(S?H.from:H.to)&&(!L||Dd(L,H.marker)<0)&&(L=H.marker);return L}function sl(g){return Bp(g,!0)}function gc(g){return Bp(g,!1)}function Uh(g,S){var L,O=Vc&&g.markedSpans;if(O)for(var H=0;H<O.length;++H){var oe=O[H];oe.marker.collapsed&&(null==oe.from||oe.from<S)&&(null==oe.to||oe.to>S)&&(!L||Dd(L,oe.marker)<0)&&(L=oe.marker)}return L}function Gh(g,S,O,L,H){var oe=Gi(g,S),ye=Vc&&oe.markedSpans;if(ye)for(var Se=0;Se<ye.length;++Se){var Ie=ye[Se];if(Ie.marker.collapsed){var He=Ie.marker.find(0),ot=Ke(He.from,O)||au(Ie.marker)-au(H),mt=Ke(He.to,L)||fh(Ie.marker)-fh(H);if(!(ot>=0&&mt<=0||ot<=0&&mt>=0)&&(ot<=0&&(Ie.marker.inclusiveRight&&H.inclusiveLeft?Ke(He.to,O)>=0:Ke(He.to,O)>0)||ot>=0&&(Ie.marker.inclusiveRight&&H.inclusiveLeft?Ke(He.from,L)<=0:Ke(He.from,L)<0)))return!0}}}function Ac(g){for(var S;S=sl(g);)g=S.find(-1,!0).line;return g}function ph(g,S){var O=Gi(g,S),L=Ac(O);return O==L?S:as(L)}function lu(g,S){if(S>g.lastLine())return S;var L,O=Gi(g,S);if(!cu(g,O))return S;for(;L=gc(O);)O=L.find(1,!0).line;return as(O)+1}function cu(g,S){var O=Vc&&S.markedSpans;if(O)for(var L=void 0,H=0;H<O.length;++H)if((L=O[H]).marker.collapsed){if(null==L.from)return!0;if(!L.marker.widgetNode&&0==L.from&&L.marker.inclusiveLeft&&Yu(g,S,L))return!0}}function Yu(g,S,O){if(null==O.to){var L=O.marker.find(1,!0);return Yu(g,L.line,Vh(L.line.markedSpans,O.marker))}if(O.marker.inclusiveRight&&O.to==S.text.length)return!0;for(var H=void 0,oe=0;oe<S.markedSpans.length;++oe)if((H=S.markedSpans[oe]).marker.collapsed&&!H.marker.widgetNode&&H.from==O.to&&(null==H.to||H.to!=O.from)&&(H.marker.inclusiveLeft||O.marker.inclusiveRight)&&Yu(g,S,H))return!0}function q(g){for(var S=0,O=(g=Ac(g)).parent,L=0;L<O.lines.length;++L){var H=O.lines[L];if(H==g)break;S+=H.height}for(var oe=O.parent;oe;oe=(O=oe).parent)for(var ye=0;ye<oe.children.length;++ye){var Se=oe.children[ye];if(Se==O)break;S+=Se.height}return S}function se(g){if(0==g.height)return 0;for(var O,S=g.text.length,L=g;O=sl(L);){var H=O.find(0,!0);L=H.from.line,S+=H.from.ch-H.to.ch}for(L=g;O=gc(L);){var oe=O.find(0,!0);S-=L.text.length-oe.from.ch,S+=(L=oe.to.line).text.length-oe.to.ch}return S}function ve(g){var S=g.display,O=g.doc;S.maxLine=Gi(O,O.first),S.maxLineLength=se(S.maxLine),S.maxLineChanged=!0,O.iter(function(L){var H=se(L);H>S.maxLineLength&&(S.maxLineLength=H,S.maxLine=L)})}var we=function(g,S,O){this.text=g,Cs(this,S),this.height=O?O(this):1};function Ve(g){g.parent=null,Td(g)}we.prototype.lineNo=function(){return as(this)},Y(we);var Je={},At={};function xt(g,S){if(!g||/^\s*$/.test(g))return null;var O=S.addModeClass?At:Je;return O[g]||(O[g]=g.replace(/\S+/g,"cm-$&"))}function Ft(g,S){var O=Wt("span",null,null,C?"padding-right: .1px":null),L={pre:Wt("pre",[O],"CodeMirror-line"),content:O,col:0,pos:0,cm:g,trailingSpace:!1,splitSpaces:g.getOption("lineWrapping")};S.measure={};for(var H=0;H<=(S.rest?S.rest.length:0);H++){var oe=H?S.rest[H-1]:S.line,ye=void 0;L.pos=0,L.addToken=oi,sn(g.display.measure)&&(ye=ca(oe,g.doc.direction))&&(L.addToken=gn(L.addToken,ye)),L.map=[],ls(oe,L,Ts(g,oe,S!=g.display.externalMeasured&&as(oe))),oe.styleClasses&&(oe.styleClasses.bgClass&&(L.bgClass=Pt(oe.styleClasses.bgClass,L.bgClass||"")),oe.styleClasses.textClass&&(L.textClass=Pt(oe.styleClasses.textClass,L.textClass||""))),0==L.map.length&&L.map.push(0,0,L.content.appendChild(Tt(g.display.measure))),0==H?(S.measure.map=L.map,S.measure.cache={}):((S.measure.maps||(S.measure.maps=[])).push(L.map),(S.measure.caches||(S.measure.caches=[])).push({}))}if(C){var Ie=L.content.lastChild;(/\bcm-tab\b/.test(Ie.className)||Ie.querySelector&&Ie.querySelector(".cm-tab"))&&(L.content.className="cm-tab-wrap-hack")}return Is(g,"renderLine",g,S.line,L.pre),L.pre.className&&(L.textClass=Pt(L.pre.className,L.textClass||"")),L}function Cn(g){var S=je("span","\u2022","cm-invalidchar");return S.title="\\u"+g.charCodeAt(0).toString(16),S.setAttribute("aria-label",S.title),S}function oi(g,S,O,L,H,oe,ye){if(S){var ot,Se=g.splitSpaces?function cn(g,S){if(g.length>1&&!/  /.test(g))return g;for(var O=S,L="",H=0;H<g.length;H++){var oe=g.charAt(H);" "==oe&&O&&(H==g.length-1||32==g.charCodeAt(H+1))&&(oe="\xa0"),L+=oe,O=" "==oe}return L}(S,g.trailingSpace):S,Ie=g.cm.state.specialChars,He=!1;if(Ie.test(S)){ot=document.createDocumentFragment();for(var mt=0;;){Ie.lastIndex=mt;var jt=Ie.exec(S),Nt=jt?jt.index-mt:S.length-mt;if(Nt){var Mn=document.createTextNode(Se.slice(mt,mt+Nt));ot.appendChild(p&&v<9?je("span",[Mn]):Mn),g.map.push(g.pos,g.pos+Nt,Mn),g.col+=Nt,g.pos+=Nt}if(!jt)break;mt+=Nt+1;var Gn=void 0;if("\t"==jt[0]){var di=g.cm.options.tabSize,ci=di-g.col%di;(Gn=ot.appendChild(je("span",dt(ci),"cm-tab"))).setAttribute("role","presentation"),Gn.setAttribute("cm-text","\t"),g.col+=ci}else"\r"==jt[0]||"\n"==jt[0]?((Gn=ot.appendChild(je("span","\r"==jt[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",jt[0]),g.col+=1):((Gn=g.cm.options.specialCharPlaceholder(jt[0])).setAttribute("cm-text",jt[0]),ot.appendChild(p&&v<9?je("span",[Gn]):Gn),g.col+=1);g.map.push(g.pos,g.pos+1,Gn),g.pos++}}else g.col+=S.length,ot=document.createTextNode(Se),g.map.push(g.pos,g.pos+S.length,ot),p&&v<9&&(He=!0),g.pos+=S.length;if(g.trailingSpace=32==Se.charCodeAt(S.length-1),O||L||H||He||oe||ye){var fi=O||"";L&&(fi+=L),H&&(fi+=H);var pi=je("span",[ot],fi,oe);if(ye)for(var Ki in ye)ye.hasOwnProperty(Ki)&&"style"!=Ki&&"class"!=Ki&&pi.setAttribute(Ki,ye[Ki]);return g.content.appendChild(pi)}g.content.appendChild(ot)}}function gn(g,S){return function(O,L,H,oe,ye,Se,Ie){H=H?H+" cm-force-border":"cm-force-border";for(var He=O.pos,ot=He+L.length;;){for(var mt=void 0,jt=0;jt<S.length&&!((mt=S[jt]).to>He&&mt.from<=He);jt++);if(mt.to>=ot)return g(O,L,H,oe,ye,Se,Ie);g(O,L.slice(0,mt.to-He),H,oe,null,Se,Ie),oe=null,L=L.slice(mt.to-He),He=mt.to}}}function _r(g,S,O,L){var H=!L&&O.widgetNode;H&&g.map.push(g.pos,g.pos+S,H),!L&&g.cm.display.input.needsContentAttribute&&(H||(H=g.content.appendChild(document.createElement("span"))),H.setAttribute("cm-marker",O.id)),H&&(g.cm.display.input.setUneditable(H),g.content.appendChild(H)),g.pos+=S,g.trailingSpace=!1}function ls(g,S,O){var L=g.markedSpans,H=g.text,oe=0;if(L)for(var mt,jt,Mn,Gn,di,ci,fi,Se=H.length,Ie=0,He=1,ot="",Nt=0;;){if(Nt==Ie){Mn=Gn=di=jt="",fi=null,ci=null,Nt=1/0;for(var pi=[],Ki=void 0,Pr=0;Pr<L.length;++Pr){var Tr=L[Pr],Ps=Tr.marker;if("bookmark"==Ps.type&&Tr.from==Ie&&Ps.widgetNode)pi.push(Ps);else if(Tr.from<=Ie&&(null==Tr.to||Tr.to>Ie||Ps.collapsed&&Tr.to==Ie&&Tr.from==Ie)){if(null!=Tr.to&&Tr.to!=Ie&&Nt>Tr.to&&(Nt=Tr.to,Gn=""),Ps.className&&(Mn+=" "+Ps.className),Ps.css&&(jt=(jt?jt+";":"")+Ps.css),Ps.startStyle&&Tr.from==Ie&&(di+=" "+Ps.startStyle),Ps.endStyle&&Tr.to==Nt&&(Ki||(Ki=[])).push(Ps.endStyle,Tr.to),Ps.title&&((fi||(fi={})).title=Ps.title),Ps.attributes)for(var Ko in Ps.attributes)(fi||(fi={}))[Ko]=Ps.attributes[Ko];Ps.collapsed&&(!ci||Dd(ci.marker,Ps)<0)&&(ci=Tr)}else Tr.from>Ie&&Nt>Tr.from&&(Nt=Tr.from)}if(Ki)for(var cl=0;cl<Ki.length;cl+=2)Ki[cl+1]==Nt&&(Gn+=" "+Ki[cl]);if(!ci||ci.from==Ie)for(var va=0;va<pi.length;++va)_r(S,0,pi[va]);if(ci&&(ci.from||0)==Ie){if(_r(S,(null==ci.to?Se+1:ci.to)-Ie,ci.marker,null==ci.from),null==ci.to)return;ci.to==Ie&&(ci=!1)}}if(Ie>=Se)break;for(var Rc=Math.min(Se,Nt);;){if(ot){var wc=Ie+ot.length;if(!ci){var el=wc>Rc?ot.slice(0,Rc-Ie):ot;S.addToken(S,el,mt?mt+Mn:Mn,di,Ie+el.length==Nt?Gn:"",jt,fi)}if(wc>=Rc){ot=ot.slice(Rc-Ie),Ie=Rc;break}Ie=wc,di=""}ot=H.slice(oe,oe=O[He++]),mt=xt(O[He++],S.cm.options)}}else for(var ye=1;ye<O.length;ye+=2)S.addToken(S,H.slice(oe,oe=O[ye]),xt(O[ye+1],S.cm.options))}function vr(g,S,O){this.line=S,this.rest=function Wh(g){for(var S,O;S=gc(g);)g=S.find(1,!0).line,(O||(O=[])).push(g);return O}(S),this.size=this.rest?as(nt(this.rest))-O+1:1,this.node=this.text=null,this.hidden=cu(g,S)}function Lo(g,S,O){for(var H,L=[],oe=S;oe<O;oe=H){var ye=new vr(g.doc,Gi(g.doc,oe),oe);H=oe+ye.size,L.push(ye)}return L}var Fs=null;var ol=null;function zr(g,S){var O=Zu(g,S);if(O.length){var H,L=Array.prototype.slice.call(arguments,2);Fs?H=Fs.delayedCallbacks:ol?H=ol:(H=ol=[],setTimeout(aa,0));for(var oe=function(Se){H.push(function(){return O[Se].apply(null,L)})},ye=0;ye<O.length;++ye)oe(ye)}}function aa(){var g=ol;ol=null;for(var S=0;S<g.length;++S)g[S]()}function mh(g,S,O,L){for(var H=0;H<S.changes.length;H++){var oe=S.changes[H];"text"==oe?_i(g,S):"gutter"==oe?Yi(g,S,O,L):"class"==oe?ao(g,S):"widget"==oe&&Un(g,S,L)}S.changes=null}function ys(g){return g.node==g.text&&(g.node=je("div",null,null,"position: relative"),g.text.parentNode&&g.text.parentNode.replaceChild(g.node,g.text),g.node.appendChild(g.text),p&&v<8&&(g.node.style.zIndex=2)),g.node}function pl(g,S){var O=g.display.externalMeasured;return O&&O.line==S.line?(g.display.externalMeasured=null,S.measure=O.measure,O.built):Ft(g,S)}function _i(g,S){var O=S.text.className,L=pl(g,S);S.text==S.node&&(S.node=L.pre),S.text.parentNode.replaceChild(L.pre,S.text),S.text=L.pre,L.bgClass!=S.bgClass||L.textClass!=S.textClass?(S.bgClass=L.bgClass,S.textClass=L.textClass,ao(g,S)):O&&(S.text.className=O)}function ao(g,S){(function Ol(g,S){var O=S.bgClass?S.bgClass+" "+(S.line.bgClass||""):S.line.bgClass;if(O&&(O+=" CodeMirror-linebackground"),S.background)O?S.background.className=O:(S.background.parentNode.removeChild(S.background),S.background=null);else if(O){var L=ys(S);S.background=L.insertBefore(je("div",null,O),L.firstChild),g.display.input.setUneditable(S.background)}})(g,S),S.line.wrapClass?ys(S).className=S.line.wrapClass:S.node!=S.text&&(S.node.className=""),S.text.className=(S.textClass?S.textClass+" "+(S.line.textClass||""):S.line.textClass)||""}function Yi(g,S,O,L){if(S.gutter&&(S.node.removeChild(S.gutter),S.gutter=null),S.gutterBackground&&(S.node.removeChild(S.gutterBackground),S.gutterBackground=null),S.line.gutterClass){var H=ys(S);S.gutterBackground=je("div",null,"CodeMirror-gutter-background "+S.line.gutterClass,"left: "+(g.options.fixedGutter?L.fixedPos:-L.gutterTotalWidth)+"px; width: "+L.gutterTotalWidth+"px"),g.display.input.setUneditable(S.gutterBackground),H.insertBefore(S.gutterBackground,S.text)}var oe=S.line.gutterMarkers;if(g.options.lineNumbers||oe){var ye=ys(S),Se=S.gutter=je("div",null,"CodeMirror-gutter-wrapper","left: "+(g.options.fixedGutter?L.fixedPos:-L.gutterTotalWidth)+"px");if(Se.setAttribute("aria-hidden","true"),g.display.input.setUneditable(Se),ye.insertBefore(Se,S.text),S.line.gutterClass&&(Se.className+=" "+S.line.gutterClass),g.options.lineNumbers&&(!oe||!oe["CodeMirror-linenumbers"])&&(S.lineNumber=Se.appendChild(je("div",Pa(g.options,O),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+L.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+g.display.lineNumInnerWidth+"px"))),oe)for(var Ie=0;Ie<g.display.gutterSpecs.length;++Ie){var He=g.display.gutterSpecs[Ie].className,ot=oe.hasOwnProperty(He)&&oe[He];ot&&Se.appendChild(je("div",[ot],"CodeMirror-gutter-elt","left: "+L.gutterLeft[He]+"px; width: "+L.gutterWidth[He]+"px"))}}}function Un(g,S,O){S.alignable&&(S.alignable=null);for(var L=lt("CodeMirror-linewidget"),H=S.node.firstChild,oe=void 0;H;H=oe)oe=H.nextSibling,L.test(H.className)&&S.node.removeChild(H);Za(g,S,O)}function lo(g,S,O,L){var H=pl(g,S);return S.text=S.node=H.pre,H.bgClass&&(S.bgClass=H.bgClass),H.textClass&&(S.textClass=H.textClass),ao(g,S),Yi(g,S,O,L),Za(g,S,L),S.node}function Za(g,S,O){if(ml(g,S.line,S,O,!0),S.rest)for(var L=0;L<S.rest.length;L++)ml(g,S.rest[L],S,O,!1)}function ml(g,S,O,L,H){if(S.widgets)for(var oe=ys(O),ye=0,Se=S.widgets;ye<Se.length;++ye){var Ie=Se[ye],He=je("div",[Ie.node],"CodeMirror-linewidget"+(Ie.className?" "+Ie.className:""));Ie.handleMouseEvents||He.setAttribute("cm-ignore-events","true"),Ad(Ie,He,O,L),g.display.input.setUneditable(He),H&&Ie.above?oe.insertBefore(He,O.gutter||O.text):oe.appendChild(He),zr(Ie,"redraw")}}function Ad(g,S,O,L){if(g.noHScroll){(O.alignable||(O.alignable=[])).push(S);var H=L.wrapperWidth;S.style.left=L.fixedPos+"px",g.coverGutter||(H-=L.gutterTotalWidth,S.style.paddingLeft=L.gutterTotalWidth+"px"),S.style.width=H+"px"}g.coverGutter&&(S.style.zIndex=5,S.style.position="relative",g.noHScroll||(S.style.marginLeft=-L.gutterTotalWidth+"px"))}function kr(g){if(null!=g.height)return g.height;var S=g.doc.cm;if(!S)return 0;if(!Yn(document.body,g.node)){var O="position: relative;";g.coverGutter&&(O+="margin-left: -"+S.display.gutters.offsetWidth+"px;"),g.noHScroll&&(O+="width: "+S.display.wrapper.clientWidth+"px;"),De(S.display.measure,je("div",[g.node],null,O))}return g.height=g.node.parentNode.offsetHeight}function Oa(g,S){for(var O=$e(S);O!=g.wrapper;O=O.parentNode)if(!O||1==O.nodeType&&"true"==O.getAttribute("cm-ignore-events")||O.parentNode==g.sizer&&O!=g.mover)return!0}function Rs(g){return g.lineSpace.offsetTop}function Ro(g){return g.mover.offsetHeight-g.lineSpace.offsetHeight}function Hp(g){if(g.cachedPaddingH)return g.cachedPaddingH;var S=De(g.measure,je("pre","x","CodeMirror-line-like")),O=window.getComputedStyle?window.getComputedStyle(S):S.currentStyle,L={left:parseInt(O.paddingLeft),right:parseInt(O.paddingRight)};return!isNaN(L.left)&&!isNaN(L.right)&&(g.cachedPaddingH=L),L}function Ds(g){return 50-g.display.nativeBarWidth}function Ze(g){return g.display.scroller.clientWidth-Ds(g)-g.display.barWidth}function bs(g){return g.display.scroller.clientHeight-Ds(g)-g.display.barHeight}function Fo(g,S,O){if(g.line==S)return{map:g.measure.map,cache:g.measure.cache};if(g.rest){for(var L=0;L<g.rest.length;L++)if(g.rest[L]==S)return{map:g.measure.maps[L],cache:g.measure.caches[L]};for(var H=0;H<g.rest.length;H++)if(as(g.rest[H])>O)return{map:g.measure.maps[H],cache:g.measure.caches[H],before:!0}}}function jo(g,S,O,L){return Ya(g,fo(g,S),O,L)}function Uc(g,S){if(S>=g.display.viewFrom&&S<g.display.viewTo)return g.display.view[On(g,S)];var O=g.display.externalMeasured;return O&&S>=O.lineN&&S<O.lineN+O.size?O:void 0}function fo(g,S){var O=as(S),L=Uc(g,O);L&&!L.text?L=null:L&&L.changes&&(mh(g,L,O,Id(g)),g.curOp.forceUpdate=!0),L||(L=function Nl(g,S){var O=as(S=Ac(S)),L=g.display.externalMeasured=new vr(g.doc,S,O);L.lineN=O;var H=L.built=Ft(g,L);return L.text=H.pre,De(g.display.lineMeasure,H.pre),L}(g,S));var H=Fo(L,S,O);return{line:S,view:L,rect:null,map:H.map,cache:H.cache,before:H.before,hasHeights:!1}}function Ya(g,S,O,L,H){S.before&&(O=-1);var ye,oe=O+(L||"");return S.cache.hasOwnProperty(oe)?ye=S.cache[oe]:(S.rect||(S.rect=S.view.text.getBoundingClientRect()),S.hasHeights||(function ta(g,S,O){var L=g.options.lineWrapping,H=L&&Ze(g);if(!S.measure.heights||L&&S.measure.width!=H){var oe=S.measure.heights=[];if(L){S.measure.width=H;for(var ye=S.text.firstChild.getClientRects(),Se=0;Se<ye.length-1;Se++){var Ie=ye[Se],He=ye[Se+1];Math.abs(Ie.bottom-He.bottom)>2&&oe.push((Ie.bottom+He.top)/2-O.top)}}oe.push(O.bottom-O.top)}}(g,S.view,S.rect),S.hasHeights=!0),(ye=function Na(g,S,O,L){var He,H=Xr(S.map,O,L),oe=H.node,ye=H.start,Se=H.end,Ie=H.collapse;if(3==oe.nodeType){for(var ot=0;ot<4;ot++){for(;ye&&Sr(S.line.text.charAt(H.coverStart+ye));)--ye;for(;H.coverStart+Se<H.coverEnd&&Sr(S.line.text.charAt(H.coverStart+Se));)++Se;if((He=p&&v<9&&0==ye&&Se==H.coverEnd-H.coverStart?oe.parentNode.getBoundingClientRect():_c(Xe(oe,ye,Se).getClientRects(),L)).left||He.right||0==ye)break;Se=ye,ye-=1,Ie="right"}p&&v<11&&(He=function Bl(g,S){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function qn(g){if(null!=ln)return ln;var S=De(g,je("span","x")),O=S.getBoundingClientRect(),L=Xe(S,0,1).getBoundingClientRect();return ln=Math.abs(O.left-L.left)>1}(g))return S;var O=screen.logicalXDPI/screen.deviceXDPI,L=screen.logicalYDPI/screen.deviceYDPI;return{left:S.left*O,right:S.right*O,top:S.top*L,bottom:S.bottom*L}}(g.display.measure,He))}else{var mt;ye>0&&(Ie=L="right"),He=g.options.lineWrapping&&(mt=oe.getClientRects()).length>1?mt["right"==L?mt.length-1:0]:oe.getBoundingClientRect()}if(p&&v<9&&!ye&&(!He||!He.left&&!He.right)){var jt=oe.parentNode.getClientRects()[0];He=jt?{left:jt.left,right:jt.left+Ja(g.display),top:jt.top,bottom:jt.bottom}:El}for(var Nt=He.top-S.rect.top,Mn=He.bottom-S.rect.top,Gn=(Nt+Mn)/2,di=S.view.measure.heights,ci=0;ci<di.length-1&&!(Gn<di[ci]);ci++);var Ki={left:("right"==Ie?He.right:He.left)-S.rect.left,right:("left"==Ie?He.left:He.right)-S.rect.left,top:ci?di[ci-1]:0,bottom:di[ci]};return!He.left&&!He.right&&(Ki.bogus=!0),g.options.singleCursorHeightPerLine||(Ki.rtop=Nt,Ki.rbottom=Mn),Ki}(g,S,O,L)).bogus||(S.cache[oe]=ye)),{left:ye.left,right:ye.right,top:H?ye.rtop:ye.top,bottom:H?ye.rbottom:ye.bottom}}var vc,El={left:0,right:0,top:0,bottom:0};function Xr(g,S,O){for(var L,H,oe,ye,Se,Ie,He=0;He<g.length;He+=3)if(Ie=g[He+1],S<(Se=g[He])?(H=0,oe=1,ye="left"):S<Ie?oe=1+(H=S-Se):(He==g.length-3||S==Ie&&g[He+3]>S)&&(H=(oe=Ie-Se)-1,S>=Ie&&(ye="right")),null!=H){if(L=g[He+2],Se==Ie&&O==(L.insertLeft?"left":"right")&&(ye=O),"left"==O&&0==H)for(;He&&g[He-2]==g[He-3]&&g[He-1].insertLeft;)L=g[2+(He-=3)],ye="left";if("right"==O&&H==Ie-Se)for(;He<g.length-3&&g[He+3]==g[He+4]&&!g[He+5].insertLeft;)L=g[(He+=3)+2],ye="right";break}return{node:L,start:H,end:oe,collapse:ye,coverStart:Se,coverEnd:Ie}}function _c(g,S){var O=El;if("left"==S)for(var L=0;L<g.length&&(O=g[L]).left==O.right;L++);else for(var H=g.length-1;H>=0&&(O=g[H]).left==O.right;H--);return O}function Gc(g){if(g.measure&&(g.measure.cache={},g.measure.heights=null,g.rest))for(var S=0;S<g.rest.length;S++)g.measure.caches[S]={}}function Xa(g){g.display.externalMeasure=null,ut(g.display.lineMeasure);for(var S=0;S<g.display.view.length;S++)Gc(g.display.view[S])}function Tl(g){Xa(g),g.display.cachedCharWidth=g.display.cachedTextHeight=g.display.cachedPaddingH=null,g.options.lineWrapping||(g.display.maxLineChanged=!0),g.display.lineNumChars=null}function Tu(g){return I&&he?-(g.body.getBoundingClientRect().left-parseInt(getComputedStyle(g.body).marginLeft)):g.defaultView.pageXOffset||(g.documentElement||g.body).scrollLeft}function Bs(g){return I&&he?-(g.body.getBoundingClientRect().top-parseInt(getComputedStyle(g.body).marginTop)):g.defaultView.pageYOffset||(g.documentElement||g.body).scrollTop}function Hs(g){var O=Ac(g).widgets,L=0;if(O)for(var H=0;H<O.length;++H)O[H].above&&(L+=kr(O[H]));return L}function pa(g,S,O,L,H){if(!H){var oe=Hs(S);O.top+=oe,O.bottom+=oe}if("line"==L)return O;L||(L="local");var ye=q(S);if("local"==L?ye+=Rs(g.display):ye-=g.display.viewOffset,"page"==L||"window"==L){var Se=g.display.lineSpace.getBoundingClientRect();ye+=Se.top+("window"==L?0:Bs(Xn(g)));var Ie=Se.left+("window"==L?0:Tu(Xn(g)));O.left+=Ie,O.right+=Ie}return O.top+=ye,O.bottom+=ye,O}function nc(g,S,O){if("div"==O)return S;var L=S.left,H=S.top;if("page"==O)L-=Tu(Xn(g)),H-=Bs(Xn(g));else if("local"==O||!O){var oe=g.display.sizer.getBoundingClientRect();L+=oe.left,H+=oe.top}var ye=g.display.lineSpace.getBoundingClientRect();return{left:L-ye.left,top:H-ye.top}}function al(g,S,O,L,H){return L||(L=Gi(g.doc,S.line)),pa(g,L,jo(g,L,S.ch,H),O)}function Co(g,S,O,L,H,oe){function ye(Mn,Gn){var di=Ya(g,H,Mn,Gn?"right":"left",oe);return Gn?di.left=di.right:di.right=di.left,pa(g,L,di,O)}L=L||Gi(g.doc,S.line),H||(H=fo(g,L));var Se=ca(L,g.doc.direction),Ie=S.ch,He=S.sticky;if(Ie>=L.text.length?(Ie=L.text.length,He="before"):Ie<=0&&(Ie=0,He="after"),!Se)return ye("before"==He?Ie-1:Ie,"before"==He);function ot(Mn,Gn,di){return ye(di?Mn-1:Mn,1==Se[Gn].level!=di)}var mt=Ls(Se,Ie,He),jt=os,Nt=ot(Ie,mt,"before"==He);return null!=jt&&(Nt.other=ot(Ie,jt,"before"!=He)),Nt}function qh(g,S){var O=0;S=Jn(g.doc,S),g.options.lineWrapping||(O=Ja(g.display)*S.ch);var L=Gi(g.doc,S.line),H=q(L)+Rs(g.display);return{left:O,right:O,top:H,bottom:H+L.height}}function Du(g,S,O,L,H){var oe=Pe(g,S,O);return oe.xRel=H,L&&(oe.outside=L),oe}function Au(g,S,O){var L=g.doc;if((O+=g.display.viewOffset)<0)return Du(L.first,0,null,-1,-1);var H=js(L,O),oe=L.first+L.size-1;if(H>oe)return Du(L.first+L.size-1,Gi(L,oe).text.length,null,1,1);S<0&&(S=0);for(var ye=Gi(L,H);;){var Se=ic(g,ye,H,S,O),Ie=Uh(ye,Se.ch+(Se.xRel>0||Se.outside>0?1:0));if(!Ie)return Se;var He=Ie.find(1);if(He.line==H)return He;ye=Gi(L,H=He.line)}}function na(g,S,O,L){L-=Hs(S);var H=S.text.length,oe=fa(function(ye){return Ya(g,O,ye-1).bottom<=L},H,0);return{begin:oe,end:H=fa(function(ye){return Ya(g,O,ye).top>L},oe,H)}}function pr(g,S,O,L){return O||(O=fo(g,S)),na(g,S,O,pa(g,S,Ya(g,O,L),"line").top)}function Xu(g,S,O,L){return!(g.bottom<=O)&&(g.top>O||(L?g.left:g.right)>S)}function ic(g,S,O,L,H){H-=q(S);var oe=fo(g,S),ye=Hs(S),Se=0,Ie=S.text.length,He=!0,ot=ca(S,g.doc.direction);if(ot){var mt=(g.options.lineWrapping?hg:Ef)(g,S,O,oe,ot,L,H);Se=(He=1!=mt.level)?mt.from:mt.to-1,Ie=He?mt.to:mt.from-1}var Gn,di,jt=null,Nt=null,Mn=fa(function(Pr){var Tr=Ya(g,oe,Pr);return Tr.top+=ye,Tr.bottom+=ye,!!Xu(Tr,L,H,!1)&&(Tr.top<=H&&Tr.left<=L&&(jt=Pr,Nt=Tr),!0)},Se,Ie),ci=!1;if(Nt){var fi=L-Nt.left<Nt.right-L,pi=fi==He;Mn=jt+(pi?0:1),di=pi?"after":"before",Gn=fi?Nt.left:Nt.right}else{!He&&(Mn==Ie||Mn==Se)&&Mn++,di=0==Mn?"after":Mn==S.text.length?"before":Ya(g,oe,Mn-(He?1:0)).bottom+ye<=H==He?"after":"before";var Ki=Co(g,Pe(O,Mn,di),"line",S,oe);Gn=Ki.left,ci=H<Ki.top?-1:H>=Ki.bottom?1:0}return Du(O,Mn=oo(S.text,Mn,1),di,ci,L-Gn)}function Ef(g,S,O,L,H,oe,ye){var Se=fa(function(mt){var jt=H[mt],Nt=1!=jt.level;return Xu(Co(g,Pe(O,Nt?jt.to:jt.from,Nt?"before":"after"),"line",S,L),oe,ye,!0)},0,H.length-1),Ie=H[Se];if(Se>0){var He=1!=Ie.level,ot=Co(g,Pe(O,He?Ie.from:Ie.to,He?"after":"before"),"line",S,L);Xu(ot,oe,ye,!0)&&ot.top>ye&&(Ie=H[Se-1])}return Ie}function hg(g,S,O,L,H,oe,ye){var Se=na(g,S,L,ye),Ie=Se.begin,He=Se.end;/\s/.test(S.text.charAt(He-1))&&He--;for(var ot=null,mt=null,jt=0;jt<H.length;jt++){var Nt=H[jt];if(!(Nt.from>=He||Nt.to<=Ie)){var Gn=Ya(g,L,1!=Nt.level?Math.min(He,Nt.to)-1:Math.max(Ie,Nt.from)).right,di=Gn<oe?oe-Gn+1e9:Gn-oe;(!ot||mt>di)&&(ot=Nt,mt=di)}}return ot||(ot=H[H.length-1]),ot.from<Ie&&(ot={from:Ie,to:ot.to,level:ot.level}),ot.to>He&&(ot={from:ot.from,to:He,level:ot.level}),ot}function Wc(g){if(null!=g.cachedTextHeight)return g.cachedTextHeight;if(null==vc){vc=je("pre",null,"CodeMirror-line-like");for(var S=0;S<49;++S)vc.appendChild(document.createTextNode("x")),vc.appendChild(je("br"));vc.appendChild(document.createTextNode("x"))}De(g.measure,vc);var O=vc.offsetHeight/50;return O>3&&(g.cachedTextHeight=O),ut(g.measure),O||1}function Ja(g){if(null!=g.cachedCharWidth)return g.cachedCharWidth;var S=je("span","xxxxxxxxxx"),O=je("pre",[S],"CodeMirror-line-like");De(g.measure,O);var L=S.getBoundingClientRect(),H=(L.right-L.left)/10;return H>2&&(g.cachedCharWidth=H),H||10}function Id(g){for(var S=g.display,O={},L={},H=S.gutters.clientLeft,oe=S.gutters.firstChild,ye=0;oe;oe=oe.nextSibling,++ye){var Se=g.display.gutterSpecs[ye].className;O[Se]=oe.offsetLeft+oe.clientLeft+H,L[Se]=oe.clientWidth}return{fixedPos:zp(S),gutterTotalWidth:S.gutters.offsetWidth,gutterLeft:O,gutterWidth:L,wrapperWidth:S.wrapper.clientWidth}}function zp(g){return g.scroller.getBoundingClientRect().left-g.sizer.getBoundingClientRect().left}function Qe(g){var S=Wc(g.display),O=g.options.lineWrapping,L=O&&Math.max(5,g.display.scroller.clientWidth/Ja(g.display)-3);return function(H){if(cu(g.doc,H))return 0;var oe=0;if(H.widgets)for(var ye=0;ye<H.widgets.length;ye++)H.widgets[ye].height&&(oe+=H.widgets[ye].height);return O?oe+(Math.ceil(H.text.length/L)||1)*S:oe+S}}function wt(g){var S=g.doc,O=Qe(g);S.iter(function(L){var H=O(L);H!=L.height&&ua(L,H)})}function Ot(g,S,O,L){var H=g.display;if(!O&&"true"==$e(S).getAttribute("cm-not-content"))return null;var oe,ye,Se=H.lineSpace.getBoundingClientRect();try{oe=S.clientX-Se.left,ye=S.clientY-Se.top}catch(mt){return null}var He,Ie=Au(g,oe,ye);if(L&&Ie.xRel>0&&(He=Gi(g.doc,Ie.line).text).length==Ie.ch){var ot=zi(He,He.length,g.options.tabSize)-He.length;Ie=Pe(Ie.line,Math.max(0,Math.round((oe-Hp(g.display).left)/Ja(g.display))-ot))}return Ie}function On(g,S){if(S>=g.display.viewTo||(S-=g.display.viewFrom)<0)return null;for(var O=g.display.view,L=0;L<O.length;L++)if((S-=O[L].size)<0)return L}function Vt(g,S,O,L){null==S&&(S=g.doc.first),null==O&&(O=g.doc.first+g.doc.size),L||(L=0);var H=g.display;if(L&&O<H.viewTo&&(null==H.updateLineNumbers||H.updateLineNumbers>S)&&(H.updateLineNumbers=S),g.curOp.viewChanged=!0,S>=H.viewTo)Vc&&ph(g.doc,S)<H.viewTo&&jn(g);else if(O<=H.viewFrom)Vc&&lu(g.doc,O+L)>H.viewFrom?jn(g):(H.viewFrom+=L,H.viewTo+=L);else if(S<=H.viewFrom&&O>=H.viewTo)jn(g);else if(S<=H.viewFrom){var oe=Mi(g,O,O+L,1);oe?(H.view=H.view.slice(oe.index),H.viewFrom=oe.lineN,H.viewTo+=L):jn(g)}else if(O>=H.viewTo){var ye=Mi(g,S,S,-1);ye?(H.view=H.view.slice(0,ye.index),H.viewTo=ye.lineN):jn(g)}else{var Se=Mi(g,S,S,-1),Ie=Mi(g,O,O+L,1);Se&&Ie?(H.view=H.view.slice(0,Se.index).concat(Lo(g,Se.lineN,Ie.lineN)).concat(H.view.slice(Ie.index)),H.viewTo+=L):jn(g)}var He=H.externalMeasured;He&&(O<He.lineN?He.lineN+=L:S<He.lineN+He.size&&(H.externalMeasured=null))}function Pn(g,S,O){g.curOp.viewChanged=!0;var L=g.display,H=g.display.externalMeasured;if(H&&S>=H.lineN&&S<H.lineN+H.size&&(L.externalMeasured=null),!(S<L.viewFrom||S>=L.viewTo)){var oe=L.view[On(g,S)];if(null!=oe.node){var ye=oe.changes||(oe.changes=[]);-1==Dn(ye,O)&&ye.push(O)}}}function jn(g){g.display.viewFrom=g.display.viewTo=g.doc.first,g.display.view=[],g.display.viewOffset=0}function Mi(g,S,O,L){var oe,H=On(g,S),ye=g.display.view;if(!Vc||O==g.doc.first+g.doc.size)return{index:H,lineN:O};for(var Se=g.display.viewFrom,Ie=0;Ie<H;Ie++)Se+=ye[Ie].size;if(Se!=S){if(L>0){if(H==ye.length-1)return null;oe=Se+ye[H].size-S,H++}else oe=Se-S;S+=oe,O+=oe}for(;ph(g.doc,O)!=O;){if(H==(L<0?0:ye.length-1))return null;O+=L*ye[H-(L<0?1:0)].size,H+=L}return{index:H,lineN:O}}function Lr(g){for(var S=g.display.view,O=0,L=0;L<S.length;L++){var H=S[L];!H.hidden&&(!H.node||H.changes)&&++O}return O}function Ar(g){g.display.input.showSelection(g.display.input.prepareSelection())}function Gr(g,S){void 0===S&&(S=!0);var O=g.doc,L={},H=L.cursors=document.createDocumentFragment(),oe=L.selection=document.createDocumentFragment(),ye=g.options.$customCursor;ye&&(S=!0);for(var Se=0;Se<O.sel.ranges.length;Se++)if(S||Se!=O.sel.primIndex){var Ie=O.sel.ranges[Se];if(!(Ie.from().line>=g.display.viewTo||Ie.to().line<g.display.viewFrom)){var He=Ie.empty();if(ye){var ot=ye(g,Ie);ot&&ks(g,ot,H)}else(He||g.options.showCursorWhenSelecting)&&ks(g,Ie.head,H);He||Vr(g,Ie,oe)}}return L}function ks(g,S,O){var L=Co(g,S,"div",null,null,!g.options.singleCursorHeightPerLine),H=O.appendChild(je("div","\xa0","CodeMirror-cursor"));if(H.style.left=L.left+"px",H.style.top=L.top+"px",H.style.height=Math.max(0,L.bottom-L.top)*g.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(g.getWrapperElement().className)){var oe=al(g,S,"div",null,null),ye=oe.right-oe.left;H.style.width=(ye>0?ye:g.defaultCharWidth())+"px"}if(L.other){var Se=O.appendChild(je("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));Se.style.display="",Se.style.left=L.other.left+"px",Se.style.top=L.other.top+"px",Se.style.height=.85*(L.other.bottom-L.other.top)+"px"}}function Js(g,S){return g.top-S.top||g.left-S.left}function Vr(g,S,O){var L=g.display,H=g.doc,oe=document.createDocumentFragment(),ye=Hp(g.display),Se=ye.left,Ie=Math.max(L.sizerWidth,Ze(g)-L.sizer.offsetLeft)-ye.right,He="ltr"==H.direction;function ot(pi,Ki,Pr,Tr){Ki<0&&(Ki=0),Ki=Math.round(Ki),Tr=Math.round(Tr),oe.appendChild(je("div",null,"CodeMirror-selected","position: absolute; left: "+pi+"px;\n                             top: "+Ki+"px; width: "+(null==Pr?Ie-pi:Pr)+"px;\n                             height: "+(Tr-Ki)+"px"))}function mt(pi,Ki,Pr){var Ko,cl,Tr=Gi(H,pi),Ps=Tr.text.length;function va(el,kc){return al(g,Pe(pi,el),"div",Tr,kc)}function Rc(el,kc,Dl){var ya=pr(g,Tr,null,el),Va="ltr"==kc==("after"==Dl)?"left":"right";return va("after"==Dl?ya.begin:ya.end-(/\s/.test(Tr.text.charAt(ya.end-1))?2:1),Va)[Va]}var wc=ca(Tr,H.direction);return function ea(g,S,O,L){if(!g)return L(S,O,"ltr",0);for(var H=!1,oe=0;oe<g.length;++oe){var ye=g[oe];(ye.from<O&&ye.to>S||S==O&&ye.to==S)&&(L(Math.max(ye.from,S),Math.min(ye.to,O),1==ye.level?"rtl":"ltr",oe),H=!0)}H||L(S,O,"ltr")}(wc,Ki||0,null==Pr?Ps:Pr,function(el,kc,Dl,ya){var Va="ltr"==Dl,yo=va(el,Va?"left":"right"),vl=va(kc-1,Va?"right":"left"),tf=null==Ki&&0==el,wh=null==Pr&&kc==Ps,Al=0==ya,Mh=!wc||ya==wc.length-1;if(vl.top-yo.top<=3){var Fu=(He?tf:wh)&&Al?Se:(Va?yo:vl).left;ot(Fu,yo.top,((He?wh:tf)&&Mh?Ie:(Va?vl:yo).right)-Fu,yo.bottom)}else{var Sh,Mc,hm,kg;Va?(Sh=He&&tf&&Al?Se:yo.left,Mc=He?Ie:Rc(el,Dl,"before"),hm=He?Se:Rc(kc,Dl,"after"),kg=He&&wh&&Mh?Ie:vl.right):(Sh=He?Rc(el,Dl,"before"):Se,Mc=!He&&tf&&Al?Ie:yo.right,hm=!He&&wh&&Mh?Se:vl.left,kg=He?Rc(kc,Dl,"after"):Ie),ot(Sh,yo.top,Mc-Sh,yo.bottom),yo.bottom<vl.top&&ot(Se,yo.bottom,null,vl.top),ot(hm,vl.top,kg-hm,vl.bottom)}(!Ko||Js(yo,Ko)<0)&&(Ko=yo),Js(vl,Ko)<0&&(Ko=vl),(!cl||Js(yo,cl)<0)&&(cl=yo),Js(vl,cl)<0&&(cl=vl)}),{start:Ko,end:cl}}var jt=S.from(),Nt=S.to();if(jt.line==Nt.line)mt(jt.line,jt.ch,Nt.ch);else{var Mn=Gi(H,jt.line),Gn=Gi(H,Nt.line),di=Ac(Mn)==Ac(Gn),ci=mt(jt.line,jt.ch,di?Mn.text.length+1:null).end,fi=mt(Nt.line,di?0:null,Nt.ch).start;di&&(ci.top<fi.top-2?(ot(ci.right,ci.top,null,ci.bottom),ot(Se,fi.top,fi.left,fi.bottom)):ot(ci.right,ci.top,fi.left-ci.right,ci.bottom)),ci.bottom<fi.top&&ot(Se,ci.bottom,null,fi.top)}O.appendChild(oe)}function Ci(g){if(g.state.focused){var S=g.display;clearInterval(S.blinker);var O=!0;S.cursorDiv.style.visibility="",g.options.cursorBlinkRate>0?S.blinker=setInterval(function(){g.hasFocus()||Ca(g),S.cursorDiv.style.visibility=(O=!O)?"":"hidden"},g.options.cursorBlinkRate):g.options.cursorBlinkRate<0&&(S.cursorDiv.style.visibility="hidden")}}function Ba(g){g.hasFocus()||(g.display.input.focus(),g.state.focused||Zo(g))}function Hl(g){g.state.delayingBlurEvent=!0,setTimeout(function(){g.state.delayingBlurEvent&&(g.state.delayingBlurEvent=!1,g.state.focused&&Ca(g))},100)}function Zo(g,S){g.state.delayingBlurEvent&&!g.state.draggingText&&(g.state.delayingBlurEvent=!1),"nocursor"!=g.options.readOnly&&(g.state.focused||(Is(g,"focus",g,S),g.state.focused=!0,xn(g.display.wrapper,"CodeMirror-focused"),!g.curOp&&g.display.selForContextMenu!=g.doc.sel&&(g.display.input.reset(),C&&setTimeout(function(){return g.display.input.reset(!0)},20)),g.display.input.receivedFocus()),Ci(g))}function Ca(g,S){g.state.delayingBlurEvent||(g.state.focused&&(Is(g,"blur",g,S),g.state.focused=!1,qe(g.display.wrapper,"CodeMirror-focused")),clearInterval(g.display.blinker),setTimeout(function(){g.state.focused||(g.display.shift=!1)},150))}function Ka(g){for(var S=g.display,O=S.lineDiv.offsetTop,L=Math.max(0,S.scroller.getBoundingClientRect().top),H=S.lineDiv.getBoundingClientRect().top,oe=0,ye=0;ye<S.view.length;ye++){var Se=S.view[ye],Ie=g.options.lineWrapping,He=void 0,ot=0;if(!Se.hidden){if(H+=Se.line.height,p&&v<8){var mt=Se.node.offsetTop+Se.node.offsetHeight;He=mt-O,O=mt}else{var jt=Se.node.getBoundingClientRect();He=jt.bottom-jt.top,!Ie&&Se.text.firstChild&&(ot=Se.text.firstChild.getBoundingClientRect().right-jt.left-1)}var Nt=Se.line.height-He;if((Nt>.005||Nt<-.005)&&(H<L&&(oe-=Nt),ua(Se.line,He),ma(Se.line),Se.rest))for(var Mn=0;Mn<Se.rest.length;Mn++)ma(Se.rest[Mn]);if(ot>g.display.sizerWidth){var Gn=Math.ceil(ot/Ja(g.display));Gn>g.display.maxLineLength&&(g.display.maxLineLength=Gn,g.display.maxLine=Se.line,g.display.maxLineChanged=!0)}}}Math.abs(oe)>2&&(S.scroller.scrollTop+=oe)}function ma(g){if(g.widgets)for(var S=0;S<g.widgets.length;++S){var O=g.widgets[S],L=O.node.parentNode;L&&(O.height=L.offsetHeight)}}function jh(g,S,O){var L=O&&null!=O.top?Math.max(0,O.top):g.scroller.scrollTop;L=Math.floor(L-Rs(g));var H=O&&null!=O.bottom?O.bottom:L+g.wrapper.clientHeight,oe=js(S,L),ye=js(S,H);if(O&&O.ensure){var Se=O.ensure.from.line,Ie=O.ensure.to.line;Se<oe?(oe=Se,ye=js(S,q(Gi(S,Se))+g.wrapper.clientHeight)):Math.min(Ie,S.lastLine())>=ye&&(oe=js(S,q(Gi(S,Ie))-g.wrapper.clientHeight),ye=Ie)}return{from:oe,to:Math.max(ye,oe+1)}}function dg(g,S){var O=g.display,L=Wc(g.display);S.top<0&&(S.top=0);var H=g.curOp&&null!=g.curOp.scrollTop?g.curOp.scrollTop:O.scroller.scrollTop,oe=bs(g),ye={};S.bottom-S.top>oe&&(S.bottom=S.top+oe);var Se=g.doc.height+Ro(O),He=S.bottom>Se-L;if(S.top<H)ye.scrollTop=S.top<L?0:S.top;else if(S.bottom>H+oe){var ot=Math.min(S.top,(He?Se:S.bottom)-oe);ot!=H&&(ye.scrollTop=ot)}var mt=g.options.fixedGutter?0:O.gutters.offsetWidth,jt=g.curOp&&null!=g.curOp.scrollLeft?g.curOp.scrollLeft:O.scroller.scrollLeft-mt,Nt=Ze(g)-O.gutters.offsetWidth,Mn=S.right-S.left>Nt;return Mn&&(S.right=S.left+Nt),S.left<10?ye.scrollLeft=0:S.left<jt?ye.scrollLeft=Math.max(0,S.left+mt-(Mn?0:10)):S.right>Nt+jt-3&&(ye.scrollLeft=S.right+(Mn?0:10)-Nt),ye}function Rd(g,S){null!=S&&(fg(g),g.curOp.scrollTop=(null==g.curOp.scrollTop?g.doc.scrollTop:g.curOp.scrollTop)+S)}function Yh(g){fg(g);var S=g.getCursor();g.curOp.scrollToPos={from:S,to:S,margin:g.options.cursorScrollMargin}}function kd(g,S,O){(null!=S||null!=O)&&fg(g),null!=S&&(g.curOp.scrollLeft=S),null!=O&&(g.curOp.scrollTop=O)}function fg(g){var S=g.curOp.scrollToPos;S&&(g.curOp.scrollToPos=null,Yo(g,qh(g,S.from),qh(g,S.to),S.margin))}function Yo(g,S,O,L){var H=dg(g,{left:Math.min(S.left,O.left),top:Math.min(S.top,O.top)-L,right:Math.max(S.right,O.right),bottom:Math.max(S.bottom,O.bottom)+L});kd(g,H.scrollLeft,H.scrollTop)}function Vp(g,S){Math.abs(g.doc.scrollTop-S)<2||(y||wr(g,{top:S}),po(g,S,!0),y&&wr(g),_h(g,100))}function po(g,S,O){S=Math.max(0,Math.min(g.display.scroller.scrollHeight-g.display.scroller.clientHeight,S)),(g.display.scroller.scrollTop!=S||O)&&(g.doc.scrollTop=S,g.display.scrollbars.setScrollTop(S),g.display.scroller.scrollTop!=S&&(g.display.scroller.scrollTop=S))}function Iu(g,S,O,L){S=Math.max(0,Math.min(S,g.display.scroller.scrollWidth-g.display.scroller.clientWidth)),(!(O?S==g.doc.scrollLeft:Math.abs(g.doc.scrollLeft-S)<2)||L)&&(g.doc.scrollLeft=S,Ru(g),g.display.scroller.scrollLeft!=S&&(g.display.scroller.scrollLeft=S),g.display.scrollbars.setScrollLeft(S))}function Pd(g){var S=g.display,O=S.gutters.offsetWidth,L=Math.round(g.doc.height+Ro(g.display));return{clientHeight:S.scroller.clientHeight,viewHeight:S.wrapper.clientHeight,scrollWidth:S.scroller.scrollWidth,clientWidth:S.scroller.clientWidth,viewWidth:S.wrapper.clientWidth,barLeft:g.options.fixedGutter?O:0,docHeight:L,scrollHeight:L+Ds(g)+S.barHeight,nativeBarWidth:S.nativeBarWidth,gutterWidth:O}}var Xo=function(g,S,O){this.cm=O;var L=this.vert=je("div",[je("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),H=this.horiz=je("div",[je("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");L.tabIndex=H.tabIndex=-1,g(L),g(H),sr(L,"scroll",function(){L.clientHeight&&S(L.scrollTop,"vertical")}),sr(H,"scroll",function(){H.clientWidth&&S(H.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,p&&v<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Xo.prototype.update=function(g){var S=g.scrollWidth>g.clientWidth+1,O=g.scrollHeight>g.clientHeight+1,L=g.nativeBarWidth;return O?(this.vert.style.display="block",this.vert.style.bottom=S?L+"px":"0",this.vert.firstChild.style.height=Math.max(0,g.scrollHeight-g.clientHeight+(g.viewHeight-(S?L:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),S?(this.horiz.style.display="block",this.horiz.style.right=O?L+"px":"0",this.horiz.style.left=g.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,g.scrollWidth-g.clientWidth+(g.viewWidth-g.barLeft-(O?L:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&g.clientHeight>0&&(0==L&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:O?L:0,bottom:S?L:0}},Xo.prototype.setScrollLeft=function(g){this.horiz.scrollLeft!=g&&(this.horiz.scrollLeft=g),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Xo.prototype.setScrollTop=function(g){this.vert.scrollTop!=g&&(this.vert.scrollTop=g),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Xo.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=ae&&!J?"12px":"18px",this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new En,this.disableVert=new En},Xo.prototype.enableZeroWidthBar=function(g,S,O){g.style.visibility="",S.set(1e3,function L(){var H=g.getBoundingClientRect();("vert"==O?document.elementFromPoint(H.right-1,(H.top+H.bottom)/2):document.elementFromPoint((H.right+H.left)/2,H.bottom-1))!=g?g.style.visibility="hidden":S.set(1e3,L)})},Xo.prototype.clear=function(){var g=this.horiz.parentNode;g.removeChild(this.horiz),g.removeChild(this.vert)};var Ld=function(){};function er(g,S){S||(S=Pd(g));var O=g.display.barWidth,L=g.display.barHeight;qc(g,S);for(var H=0;H<4&&O!=g.display.barWidth||L!=g.display.barHeight;H++)O!=g.display.barWidth&&g.options.lineWrapping&&Ka(g),qc(g,Pd(g)),O=g.display.barWidth,L=g.display.barHeight}function qc(g,S){var O=g.display,L=O.scrollbars.update(S);O.sizer.style.paddingRight=(O.barWidth=L.right)+"px",O.sizer.style.paddingBottom=(O.barHeight=L.bottom)+"px",O.heightForcer.style.borderBottom=L.bottom+"px solid transparent",L.right&&L.bottom?(O.scrollbarFiller.style.display="block",O.scrollbarFiller.style.height=L.bottom+"px",O.scrollbarFiller.style.width=L.right+"px"):O.scrollbarFiller.style.display="",L.bottom&&g.options.coverGutterNextToScrollbar&&g.options.fixedGutter?(O.gutterFiller.style.display="block",O.gutterFiller.style.height=L.bottom+"px",O.gutterFiller.style.width=S.gutterWidth+"px"):O.gutterFiller.style.display=""}Ld.prototype.update=function(){return{bottom:0,right:0}},Ld.prototype.setScrollLeft=function(){},Ld.prototype.setScrollTop=function(){},Ld.prototype.clear=function(){};var Ks={native:Xo,null:Ld};function Up(g){g.display.scrollbars&&(g.display.scrollbars.clear(),g.display.scrollbars.addClass&&qe(g.display.wrapper,g.display.scrollbars.addClass)),g.display.scrollbars=new Ks[g.options.scrollbarStyle](function(S){g.display.wrapper.insertBefore(S,g.display.scrollbarFiller),sr(S,"mousedown",function(){g.state.focused&&setTimeout(function(){return g.display.input.focus()},0)}),S.setAttribute("cm-not-content","true")},function(S,O){"horizontal"==O?Iu(g,S):Vp(g,S)},g),g.display.scrollbars.addClass&&xn(g.display.wrapper,g.display.scrollbars.addClass)}var Wr=0;function rc(g){g.curOp={cm:g,viewChanged:!1,startHeight:g.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Wr,markArrays:null},function fl(g){Fs?Fs.ops.push(g):g.ownsGroup=Fs={ops:[g],delayedCallbacks:[]}}(g.curOp)}function Ea(g){var S=g.curOp;S&&function or(g,S){var O=g.ownsGroup;if(O)try{!function Io(g){var S=g.delayedCallbacks,O=0;do{for(;O<S.length;O++)S[O].call(null);for(var L=0;L<g.ops.length;L++){var H=g.ops[L];if(H.cursorActivityHandlers)for(;H.cursorActivityCalled<H.cursorActivityHandlers.length;)H.cursorActivityHandlers[H.cursorActivityCalled++].call(null,H.cm)}}while(O<S.length)}(O)}finally{Fs=null,S(O)}}(S,function(O){for(var L=0;L<O.ops.length;L++)O.ops[L].cm.curOp=null;!function Tf(g){for(var S=g.ops,O=0;O<S.length;O++)Fd(S[O]);for(var L=0;L<S.length;L++)Od(S[L]);for(var H=0;H<S.length;H++)uu(S[H]);for(var oe=0;oe<S.length;oe++)Xh(S[oe]);for(var ye=0;ye<S.length;ye++)Nd(S[ye])}(O)})}function Fd(g){var S=g.cm,O=S.display;(function Z_(g){var S=g.display;!S.scrollbarsClipped&&S.scroller.offsetWidth&&(S.nativeBarWidth=S.scroller.offsetWidth-S.scroller.clientWidth,S.heightForcer.style.height=Ds(g)+"px",S.sizer.style.marginBottom=-S.nativeBarWidth+"px",S.sizer.style.borderRightWidth=Ds(g)+"px",S.scrollbarsClipped=!0)})(S),g.updateMaxLine&&ve(S),g.mustUpdate=g.viewChanged||g.forceUpdate||null!=g.scrollTop||g.scrollToPos&&(g.scrollToPos.from.line<O.viewFrom||g.scrollToPos.to.line>=O.viewTo)||O.maxLineChanged&&S.options.lineWrapping,g.update=g.mustUpdate&&new jc(S,g.mustUpdate&&{top:g.scrollTop,ensure:g.scrollToPos},g.forceUpdate)}function Od(g){g.updatedDisplay=g.mustUpdate&&Ul(g.cm,g.update)}function uu(g){var S=g.cm,O=S.display;g.updatedDisplay&&Ka(S),g.barMeasure=Pd(S),O.maxLineChanged&&!S.options.lineWrapping&&(g.adjustWidthTo=jo(S,O.maxLine,O.maxLine.text.length).left+3,S.display.sizerWidth=g.adjustWidthTo,g.barMeasure.scrollWidth=Math.max(O.scroller.clientWidth,O.sizer.offsetLeft+g.adjustWidthTo+Ds(S)+S.display.barWidth),g.maxScrollLeft=Math.max(0,O.sizer.offsetLeft+g.adjustWidthTo-Ze(S))),(g.updatedDisplay||g.selectionChanged)&&(g.preparedSelection=O.input.prepareSelection())}function Xh(g){var S=g.cm;null!=g.adjustWidthTo&&(S.display.sizer.style.minWidth=g.adjustWidthTo+"px",g.maxScrollLeft<S.doc.scrollLeft&&Iu(S,Math.min(S.display.scroller.scrollLeft,g.maxScrollLeft),!0),S.display.maxLineChanged=!1);var O=g.focus&&g.focus==Jt(Xn(S));g.preparedSelection&&S.display.input.showSelection(g.preparedSelection,O),(g.updatedDisplay||g.startHeight!=S.doc.height)&&er(S,g.barMeasure),g.updatedDisplay&&Bd(S,g.barMeasure),g.selectionChanged&&Ci(S),S.state.focused&&g.updateInput&&S.display.input.reset(g.typing),O&&Ba(g.cm)}function Nd(g){var S=g.cm,O=S.display,L=S.doc;g.updatedDisplay&&eo(S,g.update),null!=O.wheelStartX&&(null!=g.scrollTop||null!=g.scrollLeft||g.scrollToPos)&&(O.wheelStartX=O.wheelStartY=null),null!=g.scrollTop&&po(S,g.scrollTop,g.forceScroll),null!=g.scrollLeft&&Iu(S,g.scrollLeft,!0,!0),g.scrollToPos&&function gh(g,S){if(!b(g,"scrollCursorIntoView")){var O=g.display,L=O.sizer.getBoundingClientRect(),H=null,oe=O.wrapper.ownerDocument;if(S.top+L.top<0?H=!0:S.bottom+L.top>(oe.defaultView.innerHeight||oe.documentElement.clientHeight)&&(H=!1),null!=H&&!W){var ye=je("div","\u200b",null,"position: absolute;\n                         top: "+(S.top-O.viewOffset-Rs(g.display))+"px;\n                         height: "+(S.bottom-S.top+Ds(g)+O.barHeight)+"px;\n                         left: "+S.left+"px; width: "+Math.max(2,S.right-S.left)+"px;");g.display.lineSpace.appendChild(ye),ye.scrollIntoView(H),g.display.lineSpace.removeChild(ye)}}}(S,function zl(g,S,O,L){var H;null==L&&(L=0),!g.options.lineWrapping&&S==O&&(O="before"==S.sticky?Pe(S.line,S.ch+1,"before"):S,S=S.ch?Pe(S.line,"before"==S.sticky?S.ch-1:S.ch,"after"):S);for(var oe=0;oe<5;oe++){var ye=!1,Se=Co(g,S),Ie=O&&O!=S?Co(g,O):Se,He=dg(g,H={left:Math.min(Se.left,Ie.left),top:Math.min(Se.top,Ie.top)-L,right:Math.max(Se.left,Ie.left),bottom:Math.max(Se.bottom,Ie.bottom)+L}),ot=g.doc.scrollTop,mt=g.doc.scrollLeft;if(null!=He.scrollTop&&(Vp(g,He.scrollTop),Math.abs(g.doc.scrollTop-ot)>1&&(ye=!0)),null!=He.scrollLeft&&(Iu(g,He.scrollLeft),Math.abs(g.doc.scrollLeft-mt)>1&&(ye=!0)),!ye)break}return H}(S,Jn(L,g.scrollToPos.from),Jn(L,g.scrollToPos.to),g.scrollToPos.margin));var oe=g.maybeHiddenMarkers,ye=g.maybeUnhiddenMarkers;if(oe)for(var Se=0;Se<oe.length;++Se)oe[Se].lines.length||Is(oe[Se],"hide");if(ye)for(var Ie=0;Ie<ye.length;++Ie)ye[Ie].lines.length&&Is(ye[Ie],"unhide");O.wrapper.offsetHeight&&(L.scrollTop=S.display.scroller.scrollTop),g.changeObjs&&Is(S,"changes",S,g.changeObjs),g.update&&g.update.finish()}function Bn(g,S){if(g.curOp)return S();rc(g);try{return S()}finally{Ea(g)}}function Ha(g,S){return function(){if(g.curOp)return S.apply(g,arguments);rc(g);try{return S.apply(g,arguments)}finally{Ea(g)}}}function Vl(g){return function(){if(this.curOp)return g.apply(this,arguments);rc(this);try{return g.apply(this,arguments)}finally{Ea(this)}}}function gl(g){return function(){var S=this.cm;if(!S||S.curOp)return g.apply(this,arguments);rc(S);try{return g.apply(this,arguments)}finally{Ea(S)}}}function _h(g,S){g.doc.highlightFrontier<g.display.viewTo&&g.state.highlight.set(S,en(Fy,g))}function Fy(g){var S=g.doc;if(!(S.highlightFrontier>=g.display.viewTo)){var O=+new Date+g.options.workTime,L=qo(g,S.highlightFrontier),H=[];S.iter(L.line,Math.min(S.first+S.size,g.display.viewTo+500),function(oe){if(L.line>=g.display.viewFrom){var ye=oe.styles,Se=oe.text.length>g.options.maxHighlightLength?Ur(S.mode,L.state):null,Ie=cr(g,oe,L,!0);Se&&(L.state=Se),oe.styles=Ie.styles;var He=oe.styleClasses,ot=Ie.classes;ot?oe.styleClasses=ot:He&&(oe.styleClasses=null);for(var mt=!ye||ye.length!=oe.styles.length||He!=ot&&(!He||!ot||He.bgClass!=ot.bgClass||He.textClass!=ot.textClass),jt=0;!mt&&jt<ye.length;++jt)mt=ye[jt]!=oe.styles[jt];mt&&H.push(L.line),oe.stateAfter=L.save(),L.nextLine()}else oe.text.length<=g.options.maxHighlightLength&&kp(g,oe.text,L),oe.stateAfter=L.line%5==0?L.save():null,L.nextLine();if(+new Date>O)return _h(g,g.options.workDelay),!0}),S.highlightFrontier=L.line,S.modeFrontier=Math.max(S.modeFrontier,L.line),H.length&&Bn(g,function(){for(var oe=0;oe<H.length;oe++)Pn(g,H[oe],"text")})}}var jc=function(g,S,O){var L=g.display;this.viewport=S,this.visible=jh(L,g.doc,S),this.editorIsHidden=!L.wrapper.offsetWidth,this.wrapperHeight=L.wrapper.clientHeight,this.wrapperWidth=L.wrapper.clientWidth,this.oldDisplayWidth=Ze(g),this.force=O,this.dims=Id(g),this.events=[]};function Ul(g,S){var O=g.display,L=g.doc;if(S.editorIsHidden)return jn(g),!1;if(!S.force&&S.visible.from>=O.viewFrom&&S.visible.to<=O.viewTo&&(null==O.updateLineNumbers||O.updateLineNumbers>=O.viewTo)&&O.renderedView==O.view&&0==Lr(g))return!1;Jh(g)&&(jn(g),S.dims=Id(g));var H=L.first+L.size,oe=Math.max(S.visible.from-g.options.viewportMargin,L.first),ye=Math.min(H,S.visible.to+g.options.viewportMargin);O.viewFrom<oe&&oe-O.viewFrom<20&&(oe=Math.max(L.first,O.viewFrom)),O.viewTo>ye&&O.viewTo-ye<20&&(ye=Math.min(H,O.viewTo)),Vc&&(oe=ph(g.doc,oe),ye=lu(g.doc,ye));var Se=oe!=O.viewFrom||ye!=O.viewTo||O.lastWrapHeight!=S.wrapperHeight||O.lastWrapWidth!=S.wrapperWidth;(function Vi(g,S,O){var L=g.display;0==L.view.length||S>=L.viewTo||O<=L.viewFrom?(L.view=Lo(g,S,O),L.viewFrom=S):(L.viewFrom>S?L.view=Lo(g,S,L.viewFrom).concat(L.view):L.viewFrom<S&&(L.view=L.view.slice(On(g,S))),L.viewFrom=S,L.viewTo<O?L.view=L.view.concat(Lo(g,L.viewTo,O)):L.viewTo>O&&(L.view=L.view.slice(0,On(g,O)))),L.viewTo=O})(g,oe,ye),O.viewOffset=q(Gi(g.doc,O.viewFrom)),g.display.mover.style.top=O.viewOffset+"px";var Ie=Lr(g);if(!Se&&0==Ie&&!S.force&&O.renderedView==O.view&&(null==O.updateLineNumbers||O.updateLineNumbers>=O.viewTo))return!1;var He=function Kn(g){if(g.hasFocus())return null;var S=Jt(Xn(g));if(!S||!Yn(g.display.lineDiv,S))return null;var O={activeElt:S};if(window.getSelection){var L=ni(g).getSelection();L.anchorNode&&L.extend&&Yn(g.display.lineDiv,L.anchorNode)&&(O.anchorNode=L.anchorNode,O.anchorOffset=L.anchorOffset,O.focusNode=L.focusNode,O.focusOffset=L.focusOffset)}return O}(g);return Ie>4&&(O.lineDiv.style.display="none"),function Df(g,S,O){var L=g.display,H=g.options.lineNumbers,oe=L.lineDiv,ye=oe.firstChild;function Se(Mn){var Gn=Mn.nextSibling;return C&&ae&&g.display.currentWheelTarget==Mn?Mn.style.display="none":Mn.parentNode.removeChild(Mn),Gn}for(var Ie=L.view,He=L.viewFrom,ot=0;ot<Ie.length;ot++){var mt=Ie[ot];if(!mt.hidden)if(mt.node&&mt.node.parentNode==oe){for(;ye!=mt.node;)ye=Se(ye);var Nt=H&&null!=S&&S<=He&&mt.lineNumber;mt.changes&&(Dn(mt.changes,"gutter")>-1&&(Nt=!1),mh(g,mt,He,O)),Nt&&(ut(mt.lineNumber),mt.lineNumber.appendChild(document.createTextNode(Pa(g.options,He)))),ye=mt.node.nextSibling}else{var jt=lo(g,mt,He,O);oe.insertBefore(jt,ye)}He+=mt.size}for(;ye;)ye=Se(ye)}(g,O.updateLineNumbers,S.dims),Ie>4&&(O.lineDiv.style.display=""),O.renderedView=O.view,function ms(g){if(g&&g.activeElt&&g.activeElt!=Jt(g.activeElt.ownerDocument)&&(g.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(g.activeElt.nodeName)&&g.anchorNode&&Yn(document.body,g.anchorNode)&&Yn(document.body,g.focusNode))){var S=g.activeElt.ownerDocument,O=S.defaultView.getSelection(),L=S.createRange();L.setEnd(g.anchorNode,g.anchorOffset),L.collapse(!1),O.removeAllRanges(),O.addRange(L),O.extend(g.focusNode,g.focusOffset)}}(He),ut(O.cursorDiv),ut(O.selectionDiv),O.gutters.style.height=O.sizer.style.minHeight=0,Se&&(O.lastWrapHeight=S.wrapperHeight,O.lastWrapWidth=S.wrapperWidth,_h(g,400)),O.updateLineNumbers=null,!0}function eo(g,S){for(var O=S.viewport,L=!0;;L=!1){if(L&&g.options.lineWrapping&&S.oldDisplayWidth!=Ze(g))L&&(S.visible=jh(g.display,g.doc,O));else if(O&&null!=O.top&&(O={top:Math.min(g.doc.height+Ro(g.display)-bs(g),O.top)}),S.visible=jh(g.display,g.doc,O),S.visible.from>=g.display.viewFrom&&S.visible.to<=g.display.viewTo)break;if(!Ul(g,S))break;Ka(g);var H=Pd(g);Ar(g),er(g,H),Bd(g,H),S.force=!1}S.signal(g,"update",g),(g.display.viewFrom!=g.display.reportedViewFrom||g.display.viewTo!=g.display.reportedViewTo)&&(S.signal(g,"viewportChange",g,g.display.viewFrom,g.display.viewTo),g.display.reportedViewFrom=g.display.viewFrom,g.display.reportedViewTo=g.display.viewTo)}function wr(g,S){var O=new jc(g,S);if(Ul(g,O)){Ka(g),eo(g,O);var L=Pd(g);Ar(g),er(g,L),Bd(g,L),O.finish()}}function Gl(g){g.sizer.style.marginLeft=g.gutters.offsetWidth+"px",zr(g,"gutterChanged",g)}function Bd(g,S){g.display.sizer.style.minHeight=S.docHeight+"px",g.display.heightForcer.style.top=S.docHeight+"px",g.display.gutters.style.height=S.docHeight+g.display.barHeight+Ds(g)+"px"}function Ru(g){var S=g.display,O=S.view;if(S.alignWidgets||S.gutters.firstChild&&g.options.fixedGutter){for(var L=zp(S)-S.scroller.scrollLeft+g.doc.scrollLeft,H=S.gutters.offsetWidth,oe=L+"px",ye=0;ye<O.length;ye++)if(!O[ye].hidden){g.options.fixedGutter&&(O[ye].gutter&&(O[ye].gutter.style.left=oe),O[ye].gutterBackground&&(O[ye].gutterBackground.style.left=oe));var Se=O[ye].alignable;if(Se)for(var Ie=0;Ie<Se.length;Ie++)Se[Ie].style.left=oe}g.options.fixedGutter&&(S.gutters.style.left=L+H+"px")}}function Jh(g){if(!g.options.lineNumbers)return!1;var S=g.doc,O=Pa(g.options,S.first+S.size-1),L=g.display;if(O.length!=L.lineNumChars){var H=L.measure.appendChild(je("div",[je("div",O)],"CodeMirror-linenumber CodeMirror-gutter-elt")),oe=H.firstChild.offsetWidth,ye=H.offsetWidth-oe;return L.lineGutter.style.width="",L.lineNumInnerWidth=Math.max(oe,L.lineGutter.offsetWidth-ye)+1,L.lineNumWidth=L.lineNumInnerWidth+ye,L.lineNumChars=L.lineNumInnerWidth?O.length:-1,L.lineGutter.style.width=L.lineNumWidth+"px",Gl(g.display),!0}return!1}function Ju(g,S){for(var O=[],L=!1,H=0;H<g.length;H++){var oe=g[H],ye=null;if("string"!=typeof oe&&(ye=oe.style,oe=oe.className),"CodeMirror-linenumbers"==oe){if(!S)continue;L=!0}O.push({className:oe,style:ye})}return S&&!L&&O.push({className:"CodeMirror-linenumbers",style:null}),O}function Hd(g){var S=g.gutters,O=g.gutterSpecs;ut(S),g.lineGutter=null;for(var L=0;L<O.length;++L){var H=O[L],oe=H.className,ye=H.style,Se=S.appendChild(je("div",null,"CodeMirror-gutter "+oe));ye&&(Se.style.cssText=ye),"CodeMirror-linenumbers"==oe&&(g.lineGutter=Se,Se.style.width=(g.lineNumWidth||1)+"px")}S.style.display=O.length?"":"none",Gl(g)}function Ku(g){Hd(g.display),Vt(g),Ru(g)}function Wl(g,S,O,L){var H=this;this.input=O,H.scrollbarFiller=je("div",null,"CodeMirror-scrollbar-filler"),H.scrollbarFiller.setAttribute("cm-not-content","true"),H.gutterFiller=je("div",null,"CodeMirror-gutter-filler"),H.gutterFiller.setAttribute("cm-not-content","true"),H.lineDiv=Wt("div",null,"CodeMirror-code"),H.selectionDiv=je("div",null,null,"position: relative; z-index: 1"),H.cursorDiv=je("div",null,"CodeMirror-cursors"),H.measure=je("div",null,"CodeMirror-measure"),H.lineMeasure=je("div",null,"CodeMirror-measure"),H.lineSpace=Wt("div",[H.measure,H.lineMeasure,H.selectionDiv,H.cursorDiv,H.lineDiv],null,"position: relative; outline: none");var oe=Wt("div",[H.lineSpace],"CodeMirror-lines");H.mover=je("div",[oe],null,"position: relative"),H.sizer=je("div",[H.mover],"CodeMirror-sizer"),H.sizerWidth=null,H.heightForcer=je("div",null,null,"position: absolute; height: 50px; width: 1px;"),H.gutters=je("div",null,"CodeMirror-gutters"),H.lineGutter=null,H.scroller=je("div",[H.sizer,H.heightForcer,H.gutters],"CodeMirror-scroll"),H.scroller.setAttribute("tabIndex","-1"),H.wrapper=je("div",[H.scrollbarFiller,H.gutterFiller,H.scroller],"CodeMirror"),I&&P>=105&&(H.wrapper.style.clipPath="inset(0px)"),H.wrapper.setAttribute("translate","no"),p&&v<8&&(H.gutters.style.zIndex=-1,H.scroller.style.paddingRight=0),!C&&!(y&&ie)&&(H.scroller.draggable=!0),g&&(g.appendChild?g.appendChild(H.wrapper):g(H.wrapper)),H.viewFrom=H.viewTo=S.first,H.reportedViewFrom=H.reportedViewTo=S.first,H.view=[],H.renderedView=null,H.externalMeasured=null,H.viewOffset=0,H.lastWrapHeight=H.lastWrapWidth=0,H.updateLineNumbers=null,H.nativeBarWidth=H.barHeight=H.barWidth=0,H.scrollbarsClipped=!1,H.lineNumWidth=H.lineNumInnerWidth=H.lineNumChars=null,H.alignWidgets=!1,H.cachedCharWidth=H.cachedTextHeight=H.cachedPaddingH=null,H.maxLine=null,H.maxLineLength=0,H.maxLineChanged=!1,H.wheelDX=H.wheelDY=H.wheelStartX=H.wheelStartY=null,H.shift=!1,H.selForContextMenu=null,H.activeTouch=null,H.gutterSpecs=Ju(L.gutters,L.lineNumbers),Hd(H),O.init(H)}jc.prototype.signal=function(g,S){z(g,S)&&this.events.push(arguments)},jc.prototype.finish=function(){for(var g=0;g<this.events.length;g++)Is.apply(null,this.events[g])};var yc=0,Zc=null;function Qu(g){var S=g.wheelDeltaX,O=g.wheelDeltaY;return null==S&&g.detail&&g.axis==g.HORIZONTAL_AXIS&&(S=g.detail),null==O&&g.detail&&g.axis==g.VERTICAL_AXIS?O=g.detail:null==O&&(O=g.wheelDelta),{x:S,y:O}}function hu(g){var S=Qu(g);return S.x*=Zc,S.y*=Zc,S}function Gp(g,S){I&&102==P&&(null==g.display.chromeScrollHack?g.display.sizer.style.pointerEvents="none":clearTimeout(g.display.chromeScrollHack),g.display.chromeScrollHack=setTimeout(function(){g.display.chromeScrollHack=null,g.display.sizer.style.pointerEvents=""},100));var O=Qu(S),L=O.x,H=O.y,oe=Zc;0===S.deltaMode&&(L=S.deltaX,H=S.deltaY,oe=1);var ye=g.display,Se=ye.scroller,He=Se.scrollHeight>Se.clientHeight;if(L&&Se.scrollWidth>Se.clientWidth||H&&He){if(H&&ae&&C)e:for(var ot=S.target,mt=ye.view;ot!=Se;ot=ot.parentNode)for(var jt=0;jt<mt.length;jt++)if(mt[jt].node==ot){g.display.currentWheelTarget=ot;break e}if(L&&!y&&!B&&null!=oe)return H&&He&&Vp(g,Math.max(0,Se.scrollTop+H*oe)),Iu(g,Math.max(0,Se.scrollLeft+L*oe)),(!H||H&&He)&&ne(S),void(ye.wheelStartX=null);if(H&&null!=oe){var Nt=H*oe,Mn=g.doc.scrollTop,Gn=Mn+ye.wrapper.clientHeight;Nt<0?Mn=Math.max(0,Mn+Nt-50):Gn=Math.min(g.doc.height,Gn+Nt+50),wr(g,{top:Mn,bottom:Gn})}yc<20&&0!==S.deltaMode&&(null==ye.wheelStartX?(ye.wheelStartX=Se.scrollLeft,ye.wheelStartY=Se.scrollTop,ye.wheelDX=L,ye.wheelDY=H,setTimeout(function(){if(null!=ye.wheelStartX){var di=Se.scrollLeft-ye.wheelStartX,ci=Se.scrollTop-ye.wheelStartY,fi=ci&&ye.wheelDY&&ci/ye.wheelDY||di&&ye.wheelDX&&di/ye.wheelDX;ye.wheelStartX=ye.wheelStartY=null,fi&&(Zc=(Zc*yc+fi)/(yc+1),++yc)}},200)):(ye.wheelDX+=L,ye.wheelDY+=H))}}p?Zc=-.53:y?Zc=15:I?Zc=-.7:U&&(Zc=-1/3);var ql=function(g,S){this.ranges=g,this.primIndex=S};ql.prototype.primary=function(){return this.ranges[this.primIndex]},ql.prototype.equals=function(g){if(g==this)return!0;if(g.primIndex!=this.primIndex||g.ranges.length!=this.ranges.length)return!1;for(var S=0;S<this.ranges.length;S++){var O=this.ranges[S],L=g.ranges[S];if(!yn(O.anchor,L.anchor)||!yn(O.head,L.head))return!1}return!0},ql.prototype.deepCopy=function(){for(var g=[],S=0;S<this.ranges.length;S++)g[S]=new co(An(this.ranges[S].anchor),An(this.ranges[S].head));return new ql(g,this.primIndex)},ql.prototype.somethingSelected=function(){for(var g=0;g<this.ranges.length;g++)if(!this.ranges[g].empty())return!0;return!1},ql.prototype.contains=function(g,S){S||(S=g);for(var O=0;O<this.ranges.length;O++){var L=this.ranges[O];if(Ke(S,L.from())>=0&&Ke(g,L.to())<=0)return O}return-1};var co=function(g,S){this.anchor=g,this.head=S};function Ic(g,S,O){var L=g&&g.options.selectionsMayTouch,H=S[O];S.sort(function(jt,Nt){return Ke(jt.from(),Nt.from())}),O=Dn(S,H);for(var oe=1;oe<S.length;oe++){var ye=S[oe],Se=S[oe-1],Ie=Ke(Se.to(),ye.from());if(L&&!ye.empty()?Ie>0:Ie>=0){var He=vs(Se.from(),ye.from()),ot=Rr(Se.to(),ye.to()),mt=Se.empty()?ye.from()==ye.head:Se.from()==Se.head;oe<=O&&--O,S.splice(--oe,2,new co(mt?ot:He,mt?He:ot))}}return new ql(S,O)}function io(g,S){return new ql([new co(g,S||g)],0)}function $u(g){return g.text?Pe(g.from.line+g.text.length-1,nt(g.text).length+(1==g.text.length?g.from.ch:0)):g.to}function Af(g,S){if(Ke(g,S.from)<0)return g;if(Ke(g,S.to)<=0)return $u(S);var O=g.line+S.text.length-(S.to.line-S.from.line)-1,L=g.ch;return g.line==S.to.line&&(L+=$u(S).ch-S.to.ch),Pe(O,L)}function ku(g,S){for(var O=[],L=0;L<g.sel.ranges.length;L++){var H=g.sel.ranges[L];O.push(new co(Af(H.anchor,S),Af(H.head,S)))}return Ic(g.cm,O,g.sel.primIndex)}function zd(g,S,O){return g.line==S.line?Pe(O.line,g.ch-S.ch+O.ch):Pe(O.line+(g.line-S.line),g.ch)}function Vd(g){g.doc.mode=Er(g.options,g.doc.modeOption),If(g)}function If(g){g.doc.iter(function(S){S.stateAfter&&(S.stateAfter=null),S.styles&&(S.styles=null)}),g.doc.modeFrontier=g.doc.highlightFrontier=g.doc.first,_h(g,100),g.state.modeGen++,g.curOp&&Vt(g)}function Y_(g,S){return 0==S.from.ch&&0==S.to.ch&&""==nt(S.text)&&(!g.cm||g.cm.options.wholeLineUpdateBefore)}function Zl(g,S,O,L){function H(fi){return O?O[fi]:null}function oe(fi,pi,Ki){(function Be(g,S,O,L){g.text=S,g.stateAfter&&(g.stateAfter=null),g.styles&&(g.styles=null),null!=g.order&&(g.order=null),Td(g),Cs(g,O);var H=L?L(g):1;H!=g.height&&ua(g,H)})(fi,pi,Ki,L),zr(fi,"change",fi,S)}function ye(fi,pi){for(var Ki=[],Pr=fi;Pr<pi;++Pr)Ki.push(new we(He[Pr],H(Pr),L));return Ki}var Se=S.from,Ie=S.to,He=S.text,ot=Gi(g,Se.line),mt=Gi(g,Ie.line),jt=nt(He),Nt=H(He.length-1),Mn=Ie.line-Se.line;if(S.full)g.insert(0,ye(0,He.length)),g.remove(He.length,g.size-He.length);else if(Y_(g,S)){var Gn=ye(0,He.length-1);oe(mt,mt.text,Nt),Mn&&g.remove(Se.line,Mn),Gn.length&&g.insert(Se.line,Gn)}else if(ot==mt)if(1==He.length)oe(ot,ot.text.slice(0,Se.ch)+jt+ot.text.slice(Ie.ch),Nt);else{var di=ye(1,He.length-1);di.push(new we(jt+ot.text.slice(Ie.ch),Nt,L)),oe(ot,ot.text.slice(0,Se.ch)+He[0],H(0)),g.insert(Se.line+1,di)}else if(1==He.length)oe(ot,ot.text.slice(0,Se.ch)+He[0]+mt.text.slice(Ie.ch),H(0)),g.remove(Se.line+1,Mn);else{oe(ot,ot.text.slice(0,Se.ch)+He[0],H(0)),oe(mt,jt+mt.text.slice(Ie.ch),Nt);var ci=ye(1,He.length-1);Mn>1&&g.remove(Se.line+1,Mn-1),g.insert(Se.line+1,ci)}zr(g,"change",g,S)}function sc(g,S,O){!function L(H,oe,ye){if(H.linked)for(var Se=0;Se<H.linked.length;++Se){var Ie=H.linked[Se];if(Ie.doc!=oe){var He=ye&&Ie.sharedHist;O&&!He||(S(Ie.doc,He),L(Ie.doc,H,He))}}}(g,null,!0)}function ga(g,S){if(S.cm)throw new Error("This document is already in use.");g.doc=S,S.cm=g,wt(g),Vd(g),Ud(g),g.options.direction=S.direction,g.options.lineWrapping||ve(g),g.options.mode=S.modeOption,Vt(g)}function Ud(g){("rtl"==g.doc.direction?xn:qe)(g.display.lineDiv,"CodeMirror-rtl")}function Qa(g){this.done=[],this.undone=[],this.undoDepth=g?g.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=g?g.maxGeneration:1}function bc(g,S){var O={from:An(S.from),to:$u(S),text:Do(g,S.from,S.to)};return Oy(g,O,S.from.line,S.to.line+1),sc(g,function(L){return Oy(L,O,S.from.line,S.to.line+1)},!0),O}function la(g){for(;g.length&&nt(g).ranges;)g.pop()}function Gd(g,S,O,L){var H=g.history;H.undone.length=0;var ye,Se,oe=+new Date;if((H.lastOp==L||H.lastOrigin==S.origin&&S.origin&&("+"==S.origin.charAt(0)&&H.lastModTime>oe-(g.cm?g.cm.options.historyEventDelay:500)||"*"==S.origin.charAt(0)))&&(ye=function eh(g,S){return S?(la(g.done),nt(g.done)):g.done.length&&!nt(g.done).ranges?nt(g.done):g.done.length>1&&!g.done[g.done.length-2].ranges?(g.done.pop(),nt(g.done)):void 0}(H,H.lastOp==L)))Se=nt(ye.changes),0==Ke(S.from,S.to)&&0==Ke(S.from,Se.to)?Se.to=$u(S):ye.changes.push(bc(g,S));else{var Ie=nt(H.done);for((!Ie||!Ie.ranges)&&qp(g.sel,H.done),ye={changes:[bc(g,S)],generation:H.generation},H.done.push(ye);H.done.length>H.undoDepth;)H.done.shift(),H.done[0].ranges||H.done.shift()}H.done.push(O),H.generation=++H.maxGeneration,H.lastModTime=H.lastSelTime=oe,H.lastOp=H.lastSelOp=L,H.lastOrigin=H.lastSelOrigin=S.origin,Se||Is(g,"historyAdded")}function Wp(g,S,O,L){var H=g.history,oe=L&&L.origin;O==H.lastSelOp||oe&&H.lastSelOrigin==oe&&(H.lastModTime==H.lastSelTime&&H.lastOrigin==oe||function pg(g,S,O,L){var H=S.charAt(0);return"*"==H||"+"==H&&O.ranges.length==L.ranges.length&&O.somethingSelected()==L.somethingSelected()&&new Date-g.history.lastSelTime<=(g.cm?g.cm.options.historyEventDelay:500)}(g,oe,nt(H.done),S))?H.done[H.done.length-1]=S:qp(S,H.done),H.lastSelTime=+new Date,H.lastSelOrigin=oe,H.lastSelOp=O,L&&!1!==L.clearRedo&&la(H.undone)}function qp(g,S){var O=nt(S);O&&O.ranges&&O.equals(g)||S.push(g)}function Oy(g,S,O,L){var H=S["spans_"+g.id],oe=0;g.iter(Math.max(g.first,O),Math.min(g.first+g.size,L),function(ye){ye.markedSpans&&((H||(H=S["spans_"+g.id]={}))[oe]=ye.markedSpans),++oe})}function Kh(g){if(!g)return null;for(var S,O=0;O<g.length;++O)g[O].marker.explicitlyCleared?S||(S=g.slice(0,O)):S&&S.push(g[O]);return S?S.length?S:null:g}function jp(g,S){var O=function mg(g,S){var O=S["spans_"+g.id];if(!O)return null;for(var L=[],H=0;H<S.text.length;++H)L.push(Kh(O[H]));return L}(g,S),L=Ed(g,S);if(!O)return L;if(!L)return O;for(var H=0;H<O.length;++H){var oe=O[H],ye=L[H];if(oe&&ye)e:for(var Se=0;Se<ye.length;++Se){for(var Ie=ye[Se],He=0;He<oe.length;++He)if(oe[He].marker==Ie.marker)continue e;oe.push(Ie)}else ye&&(O[H]=ye)}return O}function Qh(g,S,O){for(var L=[],H=0;H<g.length;++H){var oe=g[H];if(oe.ranges)L.push(O?ql.prototype.deepCopy.call(oe):oe);else{var ye=oe.changes,Se=[];L.push({changes:Se});for(var Ie=0;Ie<ye.length;++Ie){var He=ye[Ie],ot=void 0;if(Se.push({from:He.from,to:He.to,text:He.text}),S)for(var mt in He)(ot=mt.match(/^spans_(\d+)$/))&&Dn(S,Number(ot[1]))>-1&&(nt(Se)[mt]=He[mt],delete He[mt])}}}return L}function gg(g,S,O,L){if(L){var H=g.anchor;if(O){var oe=Ke(S,H)<0;oe!=Ke(O,H)<0?(H=S,S=O):oe!=Ke(S,O)<0&&(S=O)}return new co(H,S)}return new co(O||S,S)}function _g(g,S,O,L,H){null==H&&(H=g.cm&&(g.cm.display.shift||g.extend)),_l(g,new ql([gg(g.sel.primary(),S,O,H)],0),L)}function vh(g,S,O){for(var L=[],H=g.cm&&(g.cm.display.shift||g.extend),oe=0;oe<g.sel.ranges.length;oe++)L[oe]=gg(g.sel.ranges[oe],S[oe],null,H);_l(g,Ic(g.cm,L,g.sel.primIndex),O)}function Wd(g,S,O,L){var H=g.sel.ranges.slice(0);H[S]=O,_l(g,Ic(g.cm,H,g.sel.primIndex),L)}function Ny(g,S,O,L){_l(g,io(S,O),L)}function kf(g,S,O){var L=g.history.done,H=nt(L);H&&H.ranges?(L[L.length-1]=S,vg(g,S,O)):_l(g,S,O)}function _l(g,S,O){vg(g,S,O),Wp(g,g.sel,g.cm?g.cm.curOp.id:NaN,O)}function vg(g,S,O){(z(g,"beforeSelectionChange")||g.cm&&z(g.cm,"beforeSelectionChange"))&&(S=function Ex(g,S,O){var L={ranges:S.ranges,update:function(H){this.ranges=[];for(var oe=0;oe<H.length;oe++)this.ranges[oe]=new co(Jn(g,H[oe].anchor),Jn(g,H[oe].head))},origin:O&&O.origin};return Is(g,"beforeSelectionChange",g,L),g.cm&&Is(g.cm,"beforeSelectionChange",g.cm,L),L.ranges!=S.ranges?Ic(g.cm,L.ranges,L.ranges.length-1):S}(g,S,O));var L=O&&O.bias||(Ke(S.primary().head,g.sel.primary().head)<0?-1:1);By(g,Dx(g,S,L,!0)),(!O||!1!==O.scroll)&&g.cm&&"nocursor"!=g.cm.getOption("readOnly")&&Yh(g.cm)}function By(g,S){S.equals(g.sel)||(g.sel=S,g.cm&&(g.cm.curOp.updateInput=1,g.cm.curOp.selectionChanged=!0,k(g.cm)),zr(g,"cursorActivity",g))}function Tx(g){By(g,Dx(g,g.sel,null,!1))}function Dx(g,S,O,L){for(var H,oe=0;oe<S.ranges.length;oe++){var ye=S.ranges[oe],Se=S.ranges.length==g.sel.ranges.length&&g.sel.ranges[oe],Ie=Zp(g,ye.anchor,Se&&Se.anchor,O,L),He=ye.head==ye.anchor?Ie:Zp(g,ye.head,Se&&Se.head,O,L);(H||Ie!=ye.anchor||He!=ye.head)&&(H||(H=S.ranges.slice(0,oe)),H[oe]=new co(Ie,He))}return H?Ic(g.cm,H,S.primIndex):S}function yh(g,S,O,L,H){var oe=Gi(g,S.line);if(oe.markedSpans)for(var ye=0;ye<oe.markedSpans.length;++ye){var Se=oe.markedSpans[ye],Ie=Se.marker,He="selectLeft"in Ie?!Ie.selectLeft:Ie.inclusiveLeft,ot="selectRight"in Ie?!Ie.selectRight:Ie.inclusiveRight;if((null==Se.from||(He?Se.from<=S.ch:Se.from<S.ch))&&(null==Se.to||(ot?Se.to>=S.ch:Se.to>S.ch))){if(H&&(Is(Ie,"beforeCursorEnter"),Ie.explicitlyCleared)){if(oe.markedSpans){--ye;continue}break}if(!Ie.atomic)continue;if(O){var mt=Ie.find(L<0?1:-1),jt=void 0;if((L<0?ot:He)&&(mt=yg(g,mt,-L,mt&&mt.line==S.line?oe:null)),mt&&mt.line==S.line&&(jt=Ke(mt,O))&&(L<0?jt<0:jt>0))return yh(g,mt,S,L,H)}var Nt=Ie.find(L<0?-1:1);return(L<0?He:ot)&&(Nt=yg(g,Nt,L,Nt.line==S.line?oe:null)),Nt?yh(g,Nt,S,L,H):null}}return S}function Zp(g,S,O,L,H){var oe=L||1;return yh(g,S,O,oe,H)||!H&&yh(g,S,O,oe,!0)||yh(g,S,O,-oe,H)||!H&&yh(g,S,O,-oe,!0)||(g.cantEdit=!0,Pe(g.first,0))}function yg(g,S,O,L){return O<0&&0==S.ch?S.line>g.first?Jn(g,Pe(S.line-1)):null:O>0&&S.ch==(L||Gi(g,S.line)).text.length?S.line<g.first+g.size-1?Pe(S.line+1,0):null:new Pe(S.line,S.ch+O)}function Yp(g){g.setSelection(Pe(g.firstLine(),0),Pe(g.lastLine()),Os)}function X_(g,S,O){var L={canceled:!1,from:S.from,to:S.to,text:S.text,origin:S.origin,cancel:function(){return L.canceled=!0}};return O&&(L.update=function(H,oe,ye,Se){H&&(L.from=Jn(g,H)),oe&&(L.to=Jn(g,oe)),ye&&(L.text=ye),void 0!==Se&&(L.origin=Se)}),Is(g,"beforeChange",g,L),g.cm&&Is(g.cm,"beforeChange",g.cm,L),L.canceled?(g.cm&&(g.cm.curOp.updateInput=2),null):{from:L.from,to:L.to,text:L.text,origin:L.origin}}function qd(g,S,O){if(g.cm){if(!g.cm.curOp)return Ha(g.cm,qd)(g,S,O);if(g.cm.state.suppressEdits)return}if(!(z(g,"beforeChange")||g.cm&&z(g.cm,"beforeChange"))||(S=X_(g,S,!0))){var L=Fp&&!O&&function ki(g,S,O){var L=null;if(g.iter(S.line,O.line+1,function(Nt){if(Nt.markedSpans)for(var Mn=0;Mn<Nt.markedSpans.length;++Mn){var Gn=Nt.markedSpans[Mn].marker;Gn.readOnly&&(!L||-1==Dn(L,Gn))&&(L||(L=[])).push(Gn)}}),!L)return null;for(var H=[{from:S,to:O}],oe=0;oe<L.length;++oe)for(var ye=L[oe],Se=ye.find(0),Ie=0;Ie<H.length;++Ie){var He=H[Ie];if(!(Ke(He.to,Se.from)<0||Ke(He.from,Se.to)>0)){var ot=[Ie,1],mt=Ke(He.from,Se.from),jt=Ke(He.to,Se.to);(mt<0||!ye.inclusiveLeft&&!mt)&&ot.push({from:He.from,to:Se.from}),(jt>0||!ye.inclusiveRight&&!jt)&&ot.push({from:Se.to,to:He.to}),H.splice.apply(H,ot),Ie+=ot.length-3}}return H}(g,S.from,S.to);if(L)for(var H=L.length-1;H>=0;--H)jd(g,{from:L[H].from,to:L[H].to,text:H?[""]:S.text,origin:S.origin});else jd(g,S)}}function jd(g,S){if(1!=S.text.length||""!=S.text[0]||0!=Ke(S.from,S.to)){var O=ku(g,S);Gd(g,S,O,g.cm?g.cm.curOp.id:NaN),Yd(g,S,O,Ed(g,S));var L=[];sc(g,function(H,oe){!oe&&-1==Dn(L,H.history)&&(Hy(H.history,S),L.push(H.history)),Yd(H,S,null,Ed(H,S))})}}function bg(g,S,O){var L=g.cm&&g.cm.state.suppressEdits;if(!L||O){for(var oe,H=g.history,ye=g.sel,Se="undo"==S?H.done:H.undone,Ie="undo"==S?H.undone:H.done,He=0;He<Se.length&&(oe=Se[He],!(O?oe.ranges&&!oe.equals(g.sel):!oe.ranges));He++);if(He!=Se.length){for(H.lastOrigin=H.lastSelOrigin=null;;){if(!(oe=Se.pop()).ranges){if(L)return void Se.push(oe);break}if(qp(oe,Ie),O&&!oe.equals(g.sel))return void _l(g,oe,{clearRedo:!1});ye=oe}var ot=[];qp(ye,Ie),Ie.push({changes:ot,generation:H.generation}),H.generation=oe.generation||++H.maxGeneration;for(var mt=z(g,"beforeChange")||g.cm&&z(g.cm,"beforeChange"),jt=function(Gn){var di=oe.changes[Gn];if(di.origin=S,mt&&!X_(g,di,!1))return Se.length=0,{};ot.push(bc(g,di));var ci=Gn?ku(g,di):nt(Se);Yd(g,di,ci,jp(g,di)),!Gn&&g.cm&&g.cm.scrollIntoView({from:di.from,to:$u(di)});var fi=[];sc(g,function(pi,Ki){!Ki&&-1==Dn(fi,pi.history)&&(Hy(pi.history,di),fi.push(pi.history)),Yd(pi,di,null,jp(pi,di))})},Nt=oe.changes.length-1;Nt>=0;--Nt){var Mn=jt(Nt);if(Mn)return Mn.v}}}}function Zd(g,S){if(0!=S&&(g.first+=S,g.sel=new ql(zt(g.sel.ranges,function(H){return new co(Pe(H.anchor.line+S,H.anchor.ch),Pe(H.head.line+S,H.head.ch))}),g.sel.primIndex),g.cm)){Vt(g.cm,g.first,g.first-S,S);for(var O=g.cm.display,L=O.viewFrom;L<O.viewTo;L++)Pn(g.cm,L,"gutter")}}function Yd(g,S,O,L){if(g.cm&&!g.cm.curOp)return Ha(g.cm,Yd)(g,S,O,L);if(S.to.line<g.first)Zd(g,S.text.length-1-(S.to.line-S.from.line));else if(!(S.from.line>g.lastLine())){if(S.from.line<g.first){var H=S.text.length-1-(g.first-S.from.line);Zd(g,H),S={from:Pe(g.first,0),to:Pe(S.to.line+H,S.to.ch),text:[nt(S.text)],origin:S.origin}}var oe=g.lastLine();S.to.line>oe&&(S={from:S.from,to:Pe(oe,Gi(g,oe).text.length),text:[S.text[0]],origin:S.origin}),S.removed=Do(g,S.from,S.to),O||(O=ku(g,S)),g.cm?function xg(g,S,O){var L=g.doc,H=g.display,oe=S.from,ye=S.to,Se=!1,Ie=oe.line;g.options.lineWrapping||(Ie=as(Ac(Gi(L,oe.line))),L.iter(Ie,ye.line+1,function(Nt){if(Nt==H.maxLine)return Se=!0,!0})),L.sel.contains(S.from,S.to)>-1&&k(g),Zl(L,S,O,Qe(g)),g.options.lineWrapping||(L.iter(Ie,oe.line+S.text.length,function(Nt){var Mn=se(Nt);Mn>H.maxLineLength&&(H.maxLine=Nt,H.maxLineLength=Mn,H.maxLineChanged=!0,Se=!1)}),Se&&(g.curOp.updateMaxLine=!0)),function Sd(g,S){if(g.modeFrontier=Math.min(g.modeFrontier,S),!(g.highlightFrontier<S-10)){for(var O=g.first,L=S-1;L>O;L--){var H=Gi(g,L).stateAfter;if(H&&(!(H instanceof Wi)||L+H.lookAhead<S)){O=L+1;break}}g.highlightFrontier=Math.min(g.highlightFrontier,O)}}(L,oe.line),_h(g,400);var He=S.text.length-(ye.line-oe.line)-1;S.full?Vt(g):oe.line!=ye.line||1!=S.text.length||Y_(g.doc,S)?Vt(g,oe.line,ye.line+1,He):Pn(g,oe.line,"text");var ot=z(g,"changes"),mt=z(g,"change");if(mt||ot){var jt={from:oe,to:ye,text:S.text,removed:S.removed,origin:S.origin};mt&&zr(g,"change",g,jt),ot&&(g.curOp.changeObjs||(g.curOp.changeObjs=[])).push(jt)}g.display.selForContextMenu=null}(g.cm,S,L):Zl(g,S,L),vg(g,O,Os),g.cantEdit&&Zp(g,Pe(g.firstLine(),0))&&(g.cantEdit=!1)}}function Xp(g,S,O,L,H){var oe;L||(L=O),Ke(L,O)<0&&(O=(oe=[L,O])[0],L=oe[1]),"string"==typeof S&&(S=g.splitLines(S)),qd(g,{from:O,to:L,text:S,origin:H})}function J_(g,S,O,L){O<g.line?g.line+=L:S<g.line&&(g.line=S,g.ch=0)}function K_(g,S,O,L){for(var H=0;H<g.length;++H){var oe=g[H],ye=!0;if(oe.ranges){oe.copied||((oe=g[H]=oe.deepCopy()).copied=!0);for(var Se=0;Se<oe.ranges.length;Se++)J_(oe.ranges[Se].anchor,S,O,L),J_(oe.ranges[Se].head,S,O,L)}else{for(var Ie=0;Ie<oe.changes.length;++Ie){var He=oe.changes[Ie];if(O<He.from.line)He.from=Pe(He.from.line+L,He.from.ch),He.to=Pe(He.to.line+L,He.to.ch);else if(S<=He.to.line){ye=!1;break}}ye||(g.splice(0,H+1),H=0)}}}function Hy(g,S){var O=S.from.line,L=S.to.line,H=S.text.length-(L-O)-1;K_(g.done,O,L,H),K_(g.undone,O,L,H)}function Jp(g,S,O,L){var H=S,oe=S;return"number"==typeof S?oe=Gi(g,Zi(g,S)):H=as(S),null==H?null:(L(oe,H)&&g.cm&&Pn(g.cm,H,O),oe)}function bh(g){this.lines=g,this.parent=null;for(var S=0,O=0;O<g.length;++O)g[O].parent=this,S+=g[O].height;this.height=S}function Xd(g){this.children=g;for(var S=0,O=0,L=0;L<g.length;++L){var H=g[L];S+=H.chunkSize(),O+=H.height,H.parent=this}this.size=S,this.height=O,this.parent=null}co.prototype.from=function(){return vs(this.anchor,this.head)},co.prototype.to=function(){return Rr(this.anchor,this.head)},co.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},bh.prototype={chunkSize:function(){return this.lines.length},removeInner:function(g,S){for(var O=g,L=g+S;O<L;++O){var H=this.lines[O];this.height-=H.height,Ve(H),zr(H,"delete")}this.lines.splice(g,S)},collapse:function(g){g.push.apply(g,this.lines)},insertInner:function(g,S,O){this.height+=O,this.lines=this.lines.slice(0,g).concat(S).concat(this.lines.slice(g));for(var L=0;L<S.length;++L)S[L].parent=this},iterN:function(g,S,O){for(var L=g+S;g<L;++g)if(O(this.lines[g]))return!0}},Xd.prototype={chunkSize:function(){return this.size},removeInner:function(g,S){this.size-=S;for(var O=0;O<this.children.length;++O){var L=this.children[O],H=L.chunkSize();if(g<H){var oe=Math.min(S,H-g),ye=L.height;if(L.removeInner(g,oe),this.height-=ye-L.height,H==oe&&(this.children.splice(O--,1),L.parent=null),0==(S-=oe))break;g=0}else g-=H}if(this.size-S<25&&(this.children.length>1||!(this.children[0]instanceof bh))){var Se=[];this.collapse(Se),this.children=[new bh(Se)],this.children[0].parent=this}},collapse:function(g){for(var S=0;S<this.children.length;++S)this.children[S].collapse(g)},insertInner:function(g,S,O){this.size+=S.length,this.height+=O;for(var L=0;L<this.children.length;++L){var H=this.children[L],oe=H.chunkSize();if(g<=oe){if(H.insertInner(g,S,O),H.lines&&H.lines.length>50){for(var ye=H.lines.length%25+25,Se=ye;Se<H.lines.length;){var Ie=new bh(H.lines.slice(Se,Se+=25));H.height-=Ie.height,this.children.splice(++L,0,Ie),Ie.parent=this}H.lines=H.lines.slice(0,ye),this.maybeSpill()}break}g-=oe}},maybeSpill:function(){if(!(this.children.length<=10)){var g=this;do{var O=new Xd(g.children.splice(g.children.length-5,5));if(g.parent){g.size-=O.size,g.height-=O.height;var H=Dn(g.parent.children,g);g.parent.children.splice(H+1,0,O)}else{var L=new Xd(g.children);L.parent=g,g.children=[L,O],g=L}O.parent=g.parent}while(g.children.length>10);g.parent.maybeSpill()}},iterN:function(g,S,O){for(var L=0;L<this.children.length;++L){var H=this.children[L],oe=H.chunkSize();if(g<oe){var ye=Math.min(S,oe-g);if(H.iterN(g,ye,O))return!0;if(0==(S-=ye))break;g=0}else g-=oe}}};var Jd=function(g,S,O){if(O)for(var L in O)O.hasOwnProperty(L)&&(this[L]=O[L]);this.doc=g,this.node=S};function Kp(g,S,O){q(S)<(g.curOp&&g.curOp.scrollTop||g.doc.scrollTop)&&Rd(g,O)}Jd.prototype.clear=function(){var g=this.doc.cm,S=this.line.widgets,O=this.line,L=as(O);if(null!=L&&S){for(var H=0;H<S.length;++H)S[H]==this&&S.splice(H--,1);S.length||(O.widgets=null);var oe=kr(this);ua(O,Math.max(0,O.height-oe)),g&&(Bn(g,function(){Kp(g,O,-oe),Pn(g,L,"widget")}),zr(g,"lineWidgetCleared",g,this,L))}},Jd.prototype.changed=function(){var g=this,S=this.height,O=this.doc.cm,L=this.line;this.height=null;var H=kr(this)-S;!H||(cu(this.doc,L)||ua(L,L.height+H),O&&Bn(O,function(){O.curOp.forceUpdate=!0,Kp(O,L,H),zr(O,"lineWidgetChanged",O,g,as(L))}))},Y(Jd);var zy=0,xh=function(g,S){this.lines=[],this.type=S,this.doc=g,this.id=++zy};function Kd(g,S,O,L,H){if(L&&L.shared)return function Vy(g,S,O,L,H){(L=gr(L)).shared=!1;var oe=[Kd(g,S,O,L,H)],ye=oe[0],Se=L.widgetNode;return sc(g,function(Ie){Se&&(L.widgetNode=Se.cloneNode(!0)),oe.push(Kd(Ie,Jn(Ie,S),Jn(Ie,O),L,H));for(var He=0;He<Ie.linked.length;++He)if(Ie.linked[He].isParent)return;ye=nt(oe)}),new Pf(oe,ye)}(g,S,O,L,H);if(g.cm&&!g.cm.curOp)return Ha(g.cm,Kd)(g,S,O,L,H);var oe=new xh(g,H),ye=Ke(S,O);if(L&&gr(L,oe,!1),ye>0||0==ye&&!1!==oe.clearWhenEmpty)return oe;if(oe.replacedWith&&(oe.collapsed=!0,oe.widgetNode=Wt("span",[oe.replacedWith],"CodeMirror-widget"),L.handleMouseEvents||oe.widgetNode.setAttribute("cm-ignore-events","true"),L.insertLeft&&(oe.widgetNode.insertLeft=!0)),oe.collapsed){if(Gh(g,S.line,S,O,oe)||S.line!=O.line&&Gh(g,O.line,S,O,oe))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function Op(){Vc=!0}()}oe.addToHistory&&Gd(g,{from:S,to:O,origin:"markText"},g.sel,NaN);var He,Se=S.line,Ie=g.cm;if(g.iter(Se,O.line+1,function(mt){Ie&&oe.collapsed&&!Ie.options.lineWrapping&&Ac(mt)==Ie.display.maxLine&&(He=!0),oe.collapsed&&Se!=S.line&&ua(mt,0),function tc(g,S,O){var L=O&&window.WeakSet&&(O.markedSpans||(O.markedSpans=new WeakSet));L&&g.markedSpans&&L.has(g.markedSpans)?g.markedSpans.push(S):(g.markedSpans=g.markedSpans?g.markedSpans.concat([S]):[S],L&&L.add(g.markedSpans)),S.marker.attachLine(g)}(mt,new Cf(oe,Se==S.line?S.ch:null,Se==O.line?O.ch:null),g.cm&&g.cm.curOp),++Se}),oe.collapsed&&g.iter(S.line,O.line+1,function(mt){cu(g,mt)&&ua(mt,0)}),oe.clearOnEnter&&sr(oe,"beforeCursorEnter",function(){return oe.clear()}),oe.readOnly&&(function j_(){Fp=!0}(),(g.history.done.length||g.history.undone.length)&&g.clearHistory()),oe.collapsed&&(oe.id=++zy,oe.atomic=!0),Ie){if(He&&(Ie.curOp.updateMaxLine=!0),oe.collapsed)Vt(Ie,S.line,O.line+1);else if(oe.className||oe.startStyle||oe.endStyle||oe.css||oe.attributes||oe.title)for(var ot=S.line;ot<=O.line;ot++)Pn(Ie,ot,"text");oe.atomic&&Tx(Ie.doc),zr(Ie,"markerAdded",Ie,oe)}return oe}xh.prototype.clear=function(){if(!this.explicitlyCleared){var g=this.doc.cm,S=g&&!g.curOp;if(S&&rc(g),z(this,"clear")){var O=this.find();O&&zr(this,"clear",O.from,O.to)}for(var L=null,H=null,oe=0;oe<this.lines.length;++oe){var ye=this.lines[oe],Se=Vh(ye.markedSpans,this);g&&!this.collapsed?Pn(g,as(ye),"text"):g&&(null!=Se.to&&(H=as(ye)),null!=Se.from&&(L=as(ye))),ye.markedSpans=Np(ye.markedSpans,Se),null==Se.from&&this.collapsed&&!cu(this.doc,ye)&&g&&ua(ye,Wc(g.display))}if(g&&this.collapsed&&!g.options.lineWrapping)for(var Ie=0;Ie<this.lines.length;++Ie){var He=Ac(this.lines[Ie]),ot=se(He);ot>g.display.maxLineLength&&(g.display.maxLine=He,g.display.maxLineLength=ot,g.display.maxLineChanged=!0)}null!=L&&g&&this.collapsed&&Vt(g,L,H+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,g&&Tx(g.doc)),g&&zr(g,"markerCleared",g,this,L,H),S&&Ea(g),this.parent&&this.parent.clear()}},xh.prototype.find=function(g,S){null==g&&"bookmark"==this.type&&(g=1);for(var O,L,H=0;H<this.lines.length;++H){var oe=this.lines[H],ye=Vh(oe.markedSpans,this);if(null!=ye.from&&(O=Pe(S?oe:as(oe),ye.from),-1==g))return O;if(null!=ye.to&&(L=Pe(S?oe:as(oe),ye.to),1==g))return L}return O&&{from:O,to:L}},xh.prototype.changed=function(){var g=this,S=this.find(-1,!0),O=this,L=this.doc.cm;!S||!L||Bn(L,function(){var H=S.line,oe=as(S.line),ye=Uc(L,oe);if(ye&&(Gc(ye),L.curOp.selectionChanged=L.curOp.forceUpdate=!0),L.curOp.updateMaxLine=!0,!cu(O.doc,H)&&null!=O.height){var Se=O.height;O.height=null;var Ie=kr(O)-Se;Ie&&ua(H,H.height+Ie)}zr(L,"markerChanged",L,g)})},xh.prototype.attachLine=function(g){if(!this.lines.length&&this.doc.cm){var S=this.doc.cm.curOp;(!S.maybeHiddenMarkers||-1==Dn(S.maybeHiddenMarkers,this))&&(S.maybeUnhiddenMarkers||(S.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(g)},xh.prototype.detachLine=function(g){if(this.lines.splice(Dn(this.lines,g),1),!this.lines.length&&this.doc.cm){var S=this.doc.cm.curOp;(S.maybeHiddenMarkers||(S.maybeHiddenMarkers=[])).push(this)}},Y(xh);var Pf=function(g,S){this.markers=g,this.primary=S;for(var O=0;O<g.length;++O)g[O].parent=this};function Uy(g){return g.findMarks(Pe(g.first,0),g.clipPos(Pe(g.lastLine())),function(S){return S.parent})}function Mg(g){for(var S=function(L){var H=g[L],oe=[H.primary.doc];sc(H.primary.doc,function(Ie){return oe.push(Ie)});for(var ye=0;ye<H.markers.length;ye++){var Se=H.markers[ye];-1==Dn(oe,Se.doc)&&(Se.parent=null,H.markers.splice(ye--,1))}},O=0;O<g.length;O++)S(O)}Pf.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var g=0;g<this.markers.length;++g)this.markers[g].clear();zr(this,"clear")}},Pf.prototype.find=function(g,S){return this.primary.find(g,S)},Y(Pf);var Qp=0,xc=function(g,S,O,L,H){if(!(this instanceof xc))return new xc(g,S,O,L,H);null==O&&(O=0),Xd.call(this,[new bh([new we("",null)])]),this.first=O,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=O;var oe=Pe(O,0);this.sel=io(oe),this.history=new Qa(null),this.id=++Qp,this.modeOption=S,this.lineSep=L,this.direction="rtl"==H?"rtl":"ltr",this.extend=!1,"string"==typeof g&&(g=this.splitLines(g)),Zl(this,{from:oe,to:oe,text:g}),_l(this,io(oe),Os)};xc.prototype=an(Xd.prototype,{constructor:xc,iter:function(g,S,O){O?this.iterN(g-this.first,S-g,O):this.iterN(this.first,this.first+this.size,g)},insert:function(g,S){for(var O=0,L=0;L<S.length;++L)O+=S[L].height;this.insertInner(g-this.first,S,O)},remove:function(g,S){this.removeInner(g-this.first,S)},getValue:function(g){var S=Ns(this,this.first,this.first+this.size);return!1===g?S:S.join(g||this.lineSeparator())},setValue:gl(function(g){var S=Pe(this.first,0),O=this.first+this.size-1;qd(this,{from:S,to:Pe(O,Gi(this,O).text.length),text:this.splitLines(g),origin:"setValue",full:!0},!0),this.cm&&kd(this.cm,0,0),_l(this,io(S),Os)}),replaceRange:function(g,S,O,L){Xp(this,g,S=Jn(this,S),O=O?Jn(this,O):S,L)},getRange:function(g,S,O){var L=Do(this,Jn(this,g),Jn(this,S));return!1===O?L:L.join(""===O?"":O||this.lineSeparator())},getLine:function(g){var S=this.getLineHandle(g);return S&&S.text},getLineHandle:function(g){if(Ao(this,g))return Gi(this,g)},getLineNumber:function(g){return as(g)},getLineHandleVisualStart:function(g){return"number"==typeof g&&(g=Gi(this,g)),Ac(g)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(g){return Jn(this,g)},getCursor:function(g){var S=this.sel.primary();return null==g||"head"==g?S.head:"anchor"==g?S.anchor:"end"==g||"to"==g||!1===g?S.to():S.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:gl(function(g,S,O){Ny(this,Jn(this,"number"==typeof g?Pe(g,S||0):g),null,O)}),setSelection:gl(function(g,S,O){Ny(this,Jn(this,g),Jn(this,S||g),O)}),extendSelection:gl(function(g,S,O){_g(this,Jn(this,g),S&&Jn(this,S),O)}),extendSelections:gl(function(g,S){vh(this,Eu(this,g),S)}),extendSelectionsBy:gl(function(g,S){vh(this,Eu(this,zt(this.sel.ranges,g)),S)}),setSelections:gl(function(g,S,O){if(g.length){for(var L=[],H=0;H<g.length;H++)L[H]=new co(Jn(this,g[H].anchor),Jn(this,g[H].head||g[H].anchor));null==S&&(S=Math.min(g.length-1,this.sel.primIndex)),_l(this,Ic(this.cm,L,S),O)}}),addSelection:gl(function(g,S,O){var L=this.sel.ranges.slice(0);L.push(new co(Jn(this,g),Jn(this,S||g))),_l(this,Ic(this.cm,L,L.length-1),O)}),getSelection:function(g){for(var O,S=this.sel.ranges,L=0;L<S.length;L++){var H=Do(this,S[L].from(),S[L].to());O=O?O.concat(H):H}return!1===g?O:O.join(g||this.lineSeparator())},getSelections:function(g){for(var S=[],O=this.sel.ranges,L=0;L<O.length;L++){var H=Do(this,O[L].from(),O[L].to());!1!==g&&(H=H.join(g||this.lineSeparator())),S[L]=H}return S},replaceSelection:function(g,S,O){for(var L=[],H=0;H<this.sel.ranges.length;H++)L[H]=g;this.replaceSelections(L,S,O||"+input")},replaceSelections:gl(function(g,S,O){for(var L=[],H=this.sel,oe=0;oe<H.ranges.length;oe++){var ye=H.ranges[oe];L[oe]={from:ye.from(),to:ye.to(),text:this.splitLines(g[oe]),origin:O}}for(var Se=S&&"end"!=S&&function jl(g,S,O){for(var L=[],H=Pe(g.first,0),oe=H,ye=0;ye<S.length;ye++){var Se=S[ye],Ie=zd(Se.from,H,oe),He=zd($u(Se),H,oe);if(H=Se.to,oe=He,"around"==O){var ot=g.sel.ranges[ye],mt=Ke(ot.head,ot.anchor)<0;L[ye]=new co(mt?He:Ie,mt?Ie:He)}else L[ye]=new co(Ie,Ie)}return new ql(L,g.sel.primIndex)}(this,L,S),Ie=L.length-1;Ie>=0;Ie--)qd(this,L[Ie]);Se?kf(this,Se):this.cm&&Yh(this.cm)}),undo:gl(function(){bg(this,"undo")}),redo:gl(function(){bg(this,"redo")}),undoSelection:gl(function(){bg(this,"undo",!0)}),redoSelection:gl(function(){bg(this,"redo",!0)}),setExtending:function(g){this.extend=g},getExtending:function(){return this.extend},historySize:function(){for(var g=this.history,S=0,O=0,L=0;L<g.done.length;L++)g.done[L].ranges||++S;for(var H=0;H<g.undone.length;H++)g.undone[H].ranges||++O;return{undo:S,redo:O}},clearHistory:function(){var g=this;this.history=new Qa(this.history),sc(this,function(S){return S.history=g.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(g){return g&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(g){return this.history.generation==(g||this.cleanGeneration)},getHistory:function(){return{done:Qh(this.history.done),undone:Qh(this.history.undone)}},setHistory:function(g){var S=this.history=new Qa(this.history);S.done=Qh(g.done.slice(0),null,!0),S.undone=Qh(g.undone.slice(0),null,!0)},setGutterMarker:gl(function(g,S,O){return Jp(this,g,"gutter",function(L){var H=L.gutterMarkers||(L.gutterMarkers={});return H[S]=O,!O&&fr(H)&&(L.gutterMarkers=null),!0})}),clearGutter:gl(function(g){var S=this;this.iter(function(O){O.gutterMarkers&&O.gutterMarkers[g]&&Jp(S,O,"gutter",function(){return O.gutterMarkers[g]=null,fr(O.gutterMarkers)&&(O.gutterMarkers=null),!0})})}),lineInfo:function(g){var S;if("number"==typeof g){if(!(Ao(this,g)&&(S=g,g=Gi(this,g))))return null}else if(null==(S=as(g)))return null;return{line:S,handle:g,text:g.text,gutterMarkers:g.gutterMarkers,textClass:g.textClass,bgClass:g.bgClass,wrapClass:g.wrapClass,widgets:g.widgets}},addLineClass:gl(function(g,S,O){return Jp(this,g,"gutter"==S?"gutter":"class",function(L){var H="text"==S?"textClass":"background"==S?"bgClass":"gutter"==S?"gutterClass":"wrapClass";if(L[H]){if(lt(O).test(L[H]))return!1;L[H]+=" "+O}else L[H]=O;return!0})}),removeLineClass:gl(function(g,S,O){return Jp(this,g,"gutter"==S?"gutter":"class",function(L){var H="text"==S?"textClass":"background"==S?"bgClass":"gutter"==S?"gutterClass":"wrapClass",oe=L[H];if(!oe)return!1;if(null==O)L[H]=null;else{var ye=oe.match(lt(O));if(!ye)return!1;var Se=ye.index+ye[0].length;L[H]=oe.slice(0,ye.index)+(ye.index&&Se!=oe.length?" ":"")+oe.slice(Se)||null}return!0})}),addLineWidget:gl(function(g,S,O){return function wg(g,S,O,L){var H=new Jd(g,O,L),oe=g.cm;return oe&&H.noHScroll&&(oe.display.alignWidgets=!0),Jp(g,S,"widget",function(ye){var Se=ye.widgets||(ye.widgets=[]);if(null==H.insertAt?Se.push(H):Se.splice(Math.min(Se.length,Math.max(0,H.insertAt)),0,H),H.line=ye,oe&&!cu(g,ye)){var Ie=q(ye)<g.scrollTop;ua(ye,ye.height+kr(H)),Ie&&Rd(oe,H.height),oe.curOp.forceUpdate=!0}return!0}),oe&&zr(oe,"lineWidgetAdded",oe,H,"number"==typeof S?S:as(S)),H}(this,g,S,O)}),removeLineWidget:function(g){g.clear()},markText:function(g,S,O){return Kd(this,Jn(this,g),Jn(this,S),O,O&&O.type||"range")},setBookmark:function(g,S){var O={replacedWith:S&&(null==S.nodeType?S.widget:S),insertLeft:S&&S.insertLeft,clearWhenEmpty:!1,shared:S&&S.shared,handleMouseEvents:S&&S.handleMouseEvents};return Kd(this,g=Jn(this,g),g,O,"bookmark")},findMarksAt:function(g){var S=[],O=Gi(this,(g=Jn(this,g)).line).markedSpans;if(O)for(var L=0;L<O.length;++L){var H=O[L];(null==H.from||H.from<=g.ch)&&(null==H.to||H.to>=g.ch)&&S.push(H.marker.parent||H.marker)}return S},findMarks:function(g,S,O){g=Jn(this,g),S=Jn(this,S);var L=[],H=g.line;return this.iter(g.line,S.line+1,function(oe){var ye=oe.markedSpans;if(ye)for(var Se=0;Se<ye.length;Se++){var Ie=ye[Se];!(null!=Ie.to&&H==g.line&&g.ch>=Ie.to||null==Ie.from&&H!=g.line||null!=Ie.from&&H==S.line&&Ie.from>=S.ch)&&(!O||O(Ie.marker))&&L.push(Ie.marker.parent||Ie.marker)}++H}),L},getAllMarks:function(){var g=[];return this.iter(function(S){var O=S.markedSpans;if(O)for(var L=0;L<O.length;++L)null!=O[L].from&&g.push(O[L].marker)}),g},posFromIndex:function(g){var S,O=this.first,L=this.lineSeparator().length;return this.iter(function(H){var oe=H.text.length+L;if(oe>g)return S=g,!0;g-=oe,++O}),Jn(this,Pe(O,S))},indexFromPos:function(g){var S=(g=Jn(this,g)).ch;if(g.line<this.first||g.ch<0)return 0;var O=this.lineSeparator().length;return this.iter(this.first,g.line,function(L){S+=L.text.length+O}),S},copy:function(g){var S=new xc(Ns(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return S.scrollTop=this.scrollTop,S.scrollLeft=this.scrollLeft,S.sel=this.sel,S.extend=!1,g&&(S.history.undoDepth=this.history.undoDepth,S.setHistory(this.getHistory())),S},linkedDoc:function(g){g||(g={});var S=this.first,O=this.first+this.size;null!=g.from&&g.from>S&&(S=g.from),null!=g.to&&g.to<O&&(O=g.to);var L=new xc(Ns(this,S,O),g.mode||this.modeOption,S,this.lineSep,this.direction);return g.sharedHist&&(L.history=this.history),(this.linked||(this.linked=[])).push({doc:L,sharedHist:g.sharedHist}),L.linked=[{doc:this,isParent:!0,sharedHist:g.sharedHist}],function Ax(g,S){for(var O=0;O<S.length;O++){var L=S[O],H=L.find(),oe=g.clipPos(H.from),ye=g.clipPos(H.to);if(Ke(oe,ye)){var Se=Kd(g,oe,ye,L.primary,L.primary.type);L.markers.push(Se),Se.parent=L}}}(L,Uy(this)),L},unlinkDoc:function(g){if(g instanceof Jo&&(g=g.doc),this.linked)for(var S=0;S<this.linked.length;++S)if(this.linked[S].doc==g){this.linked.splice(S,1),g.unlinkDoc(this),Mg(Uy(this));break}if(g.history==this.history){var L=[g.id];sc(g,function(H){return L.push(H.id)},!0),g.history=new Qa(null),g.history.done=Qh(this.history.done,L),g.history.undone=Qh(this.history.undone,L)}},iterLinkedDocs:function(g){sc(this,g)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(g){return this.lineSep?g.split(this.lineSep):Dt(g)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:gl(function(g){"rtl"!=g&&(g="ltr"),g!=this.direction&&(this.direction=g,this.iter(function(S){return S.order=null}),this.cm&&function Rf(g){Bn(g,function(){Ud(g),Vt(g)})}(this.cm))})}),xc.prototype.eachLine=xc.prototype.iter;var Q_=0;function Gy(g){var S=this;if(Cg(S),!b(S,g)&&!Oa(S.display,g)){ne(g),p&&(Q_=+new Date);var O=Ot(S,g,!0),L=g.dataTransfer.files;if(O&&!S.isReadOnly())if(L&&L.length&&window.FileReader&&window.File)for(var H=L.length,oe=Array(H),ye=0,Se=function(){++ye==H&&Ha(S,function(){var Nt={from:O=Jn(S.doc,O),to:O,text:S.doc.splitLines(oe.filter(function(Mn){return null!=Mn}).join(S.doc.lineSeparator())),origin:"paste"};qd(S.doc,Nt),kf(S.doc,io(Jn(S.doc,O),Jn(S.doc,$u(Nt))))})()},Ie=function(Nt,Mn){if(S.options.allowDropFileTypes&&-1==Dn(S.options.allowDropFileTypes,Nt.type))Se();else{var Gn=new FileReader;Gn.onerror=function(){return Se()},Gn.onload=function(){var di=Gn.result;/[\x00-\x08\x0e-\x1f]{2}/.test(di)||(oe[Mn]=di),Se()},Gn.readAsText(Nt)}},He=0;He<L.length;He++)Ie(L[He],He);else{if(S.state.draggingText&&S.doc.sel.contains(O)>-1)return S.state.draggingText(g),void setTimeout(function(){return S.display.input.focus()},20);try{var ot=g.dataTransfer.getData("Text");if(ot){var mt;if(S.state.draggingText&&!S.state.draggingText.copy&&(mt=S.listSelections()),vg(S.doc,io(O,O)),mt)for(var jt=0;jt<mt.length;++jt)Xp(S.doc,"",mt[jt].anchor,mt[jt].head,"drag");S.replaceSelection(ot,"around","paste"),S.display.input.focus()}}catch(Nt){}}}}function Cg(g){g.display.dragCursor&&(g.display.lineSpace.removeChild(g.display.dragCursor),g.display.dragCursor=null)}function $h(g){if(document.getElementsByClassName){for(var S=document.getElementsByClassName("CodeMirror"),O=[],L=0;L<S.length;L++){var H=S[L].CodeMirror;H&&O.push(H)}O.length&&O[0].operation(function(){for(var oe=0;oe<O.length;oe++)g(O[oe])})}}var Qd=!1;function Ff(){Qd||(function Of(){var g;sr(window,"resize",function(){null==g&&(g=setTimeout(function(){g=null,$h(Wy)},100))}),sr(window,"blur",function(){return $h(Ca)})}(),Qd=!0)}function Wy(g){var S=g.display;S.cachedCharWidth=S.cachedTextHeight=S.cachedPaddingH=null,S.scrollbarsClipped=!1,g.setSize()}for(var th={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},nh=0;nh<10;nh++)th[nh+48]=th[nh+96]=String(nh);for(var $_=65;$_<=90;$_++)th[$_]=String.fromCharCode($_);for(var $p=1;$p<=12;$p++)th[$p+111]=th[$p+63235]="F"+$p;var wi={};function Ix(g){var S=g.split(/-(?!$)/);g=S[S.length-1];for(var O,L,H,oe,ye=0;ye<S.length-1;ye++){var Se=S[ye];if(/^(cmd|meta|m)$/i.test(Se))oe=!0;else if(/^a(lt)?$/i.test(Se))O=!0;else if(/^(c|ctrl|control)$/i.test(Se))L=!0;else{if(!/^s(hift)?$/i.test(Se))throw new Error("Unrecognized modifier name: "+Se);H=!0}}return O&&(g="Alt-"+g),L&&(g="Ctrl-"+g),oe&&(g="Cmd-"+g),H&&(g="Shift-"+g),g}function nC(g){var S={};for(var O in g)if(g.hasOwnProperty(O)){var L=g[O];if(/^(name|fallthrough|(de|at)tach)$/.test(O))continue;if("..."==L){delete g[O];continue}for(var H=zt(O.split(" "),Ix),oe=0;oe<H.length;oe++){var ye=void 0,Se=void 0;oe==H.length-1?(Se=H.join(" "),ye=L):(Se=H.slice(0,oe+1).join(" "),ye="...");var Ie=S[Se];if(Ie){if(Ie!=ye)throw new Error("Inconsistent bindings for "+Se)}else S[Se]=ye}delete g[O]}for(var He in S)g[He]=S[He];return g}function em(g,S,O,L){var H=(S=ev(S)).call?S.call(g,L):S[g];if(!1===H)return"nothing";if("..."===H)return"multi";if(null!=H&&O(H))return"handled";if(S.fallthrough){if("[object Array]"!=Object.prototype.toString.call(S.fallthrough))return em(g,S.fallthrough,O,L);for(var oe=0;oe<S.fallthrough.length;oe++){var ye=em(g,S.fallthrough[oe],O,L);if(ye)return ye}}}function Rx(g){var S="string"==typeof g?g:th[g.keyCode];return"Ctrl"==S||"Alt"==S||"Shift"==S||"Mod"==S}function kx(g,S,O){var L=g;return S.altKey&&"Alt"!=L&&(g="Alt-"+g),(Ue?S.metaKey:S.ctrlKey)&&"Ctrl"!=L&&(g="Ctrl-"+g),(Ue?S.ctrlKey:S.metaKey)&&"Mod"!=L&&(g="Cmd-"+g),!O&&S.shiftKey&&"Shift"!=L&&(g="Shift-"+g),g}function Px(g,S){if(B&&34==g.keyCode&&g.char)return!1;var O=th[g.keyCode];return null!=O&&!g.altGraphKey&&(3==g.keyCode&&g.code&&(O=g.code),kx(O,g,S))}function ev(g){return"string"==typeof g?wi[g]:g}function ih(g,S){for(var O=g.doc.sel.ranges,L=[],H=0;H<O.length;H++){for(var oe=S(O[H]);L.length&&Ke(oe.from,nt(L).to)<=0;){var ye=L.pop();if(Ke(ye.from,oe.from)<0){oe.from=ye.from;break}}L.push(oe)}Bn(g,function(){for(var Se=L.length-1;Se>=0;Se--)Xp(g.doc,"",L[Se].from,L[Se].to,"+delete");Yh(g)})}function qy(g,S,O){var L=oo(g.text,S+O,O);return L<0||L>g.text.length?null:L}function $a(g,S,O){var L=qy(g,S.ch,O);return null==L?null:new Pe(S.line,L,O<0?"after":"before")}function tm(g,S,O,L,H){if(g){"rtl"==S.doc.direction&&(H=-H);var oe=ca(O,S.doc.direction);if(oe){var He,ye=H<0?nt(oe):oe[0],Ie=H<0==(1==ye.level)?"after":"before";if(ye.level>0||"rtl"==S.doc.direction){var ot=fo(S,O),mt=Ya(S,ot,He=H<0?O.text.length-1:0).top;He=fa(function(jt){return Ya(S,ot,jt).top==mt},H<0==(1==ye.level)?ye.from:ye.to-1,He),"before"==Ie&&(He=qy(O,He,1))}else He=H<0?ye.to:ye.from;return new Pe(L,He,Ie)}}return new Pe(L,H<0?O.text.length:0,H<0?"before":"after")}wi.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},wi.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},wi.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},wi.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},wi.default=ae?wi.macDefault:wi.pcDefault;var Sg={selectAll:Yp,singleSelection:function(g){return g.setSelection(g.getCursor("anchor"),g.getCursor("head"),Os)},killLine:function(g){return ih(g,function(S){if(S.empty()){var O=Gi(g.doc,S.head.line).text.length;return S.head.ch==O&&S.head.line<g.lastLine()?{from:S.head,to:Pe(S.head.line+1,0)}:{from:S.head,to:Pe(S.head.line,O)}}return{from:S.from(),to:S.to()}})},deleteLine:function(g){return ih(g,function(S){return{from:Pe(S.from().line,0),to:Jn(g.doc,Pe(S.to().line+1,0))}})},delLineLeft:function(g){return ih(g,function(S){return{from:Pe(S.from().line,0),to:S.from()}})},delWrappedLineLeft:function(g){return ih(g,function(S){var O=g.charCoords(S.head,"div").top+5;return{from:g.coordsChar({left:0,top:O},"div"),to:S.from()}})},delWrappedLineRight:function(g){return ih(g,function(S){var O=g.charCoords(S.head,"div").top+5,L=g.coordsChar({left:g.display.lineDiv.offsetWidth+100,top:O},"div");return{from:S.from(),to:L}})},undo:function(g){return g.undo()},redo:function(g){return g.redo()},undoSelection:function(g){return g.undoSelection()},redoSelection:function(g){return g.redoSelection()},goDocStart:function(g){return g.extendSelection(Pe(g.firstLine(),0))},goDocEnd:function(g){return g.extendSelection(Pe(g.lastLine()))},goLineStart:function(g){return g.extendSelectionsBy(function(S){return jy(g,S.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(g){return g.extendSelectionsBy(function(S){return Pu(g,S.head)},{origin:"+move",bias:1})},goLineEnd:function(g){return g.extendSelectionsBy(function(S){return function du(g,S){var O=Gi(g.doc,S),L=function Hr(g){for(var S;S=gc(g);)g=S.find(1,!0).line;return g}(O);return L!=O&&(S=as(L)),tm(!0,g,O,S,-1)}(g,S.head.line)},{origin:"+move",bias:-1})},goLineRight:function(g){return g.extendSelectionsBy(function(S){var O=g.cursorCoords(S.head,"div").top+5;return g.coordsChar({left:g.display.lineDiv.offsetWidth+100,top:O},"div")},Fe)},goLineLeft:function(g){return g.extendSelectionsBy(function(S){var O=g.cursorCoords(S.head,"div").top+5;return g.coordsChar({left:0,top:O},"div")},Fe)},goLineLeftSmart:function(g){return g.extendSelectionsBy(function(S){var O=g.cursorCoords(S.head,"div").top+5,L=g.coordsChar({left:0,top:O},"div");return L.ch<g.getLine(L.line).search(/\S/)?Pu(g,S.head):L},Fe)},goLineUp:function(g){return g.moveV(-1,"line")},goLineDown:function(g){return g.moveV(1,"line")},goPageUp:function(g){return g.moveV(-1,"page")},goPageDown:function(g){return g.moveV(1,"page")},goCharLeft:function(g){return g.moveH(-1,"char")},goCharRight:function(g){return g.moveH(1,"char")},goColumnLeft:function(g){return g.moveH(-1,"column")},goColumnRight:function(g){return g.moveH(1,"column")},goWordLeft:function(g){return g.moveH(-1,"word")},goGroupRight:function(g){return g.moveH(1,"group")},goGroupLeft:function(g){return g.moveH(-1,"group")},goWordRight:function(g){return g.moveH(1,"word")},delCharBefore:function(g){return g.deleteH(-1,"codepoint")},delCharAfter:function(g){return g.deleteH(1,"char")},delWordBefore:function(g){return g.deleteH(-1,"word")},delWordAfter:function(g){return g.deleteH(1,"word")},delGroupBefore:function(g){return g.deleteH(-1,"group")},delGroupAfter:function(g){return g.deleteH(1,"group")},indentAuto:function(g){return g.indentSelection("smart")},indentMore:function(g){return g.indentSelection("add")},indentLess:function(g){return g.indentSelection("subtract")},insertTab:function(g){return g.replaceSelection("\t")},insertSoftTab:function(g){for(var S=[],O=g.listSelections(),L=g.options.tabSize,H=0;H<O.length;H++){var oe=O[H].from(),ye=zi(g.getLine(oe.line),oe.ch,L);S.push(dt(L-ye%L))}g.replaceSelections(S)},defaultTab:function(g){g.somethingSelected()?g.indentSelection("add"):g.execCommand("insertTab")},transposeChars:function(g){return Bn(g,function(){for(var S=g.listSelections(),O=[],L=0;L<S.length;L++)if(S[L].empty()){var H=S[L].head,oe=Gi(g.doc,H.line).text;if(oe)if(H.ch==oe.length&&(H=new Pe(H.line,H.ch-1)),H.ch>0)H=new Pe(H.line,H.ch+1),g.replaceRange(oe.charAt(H.ch-1)+oe.charAt(H.ch-2),Pe(H.line,H.ch-2),H,"+transpose");else if(H.line>g.doc.first){var ye=Gi(g.doc,H.line-1).text;ye&&(H=new Pe(H.line,1),g.replaceRange(oe.charAt(0)+g.doc.lineSeparator()+ye.charAt(ye.length-1),Pe(H.line-1,ye.length-1),H,"+transpose"))}O.push(new co(H,H))}g.setSelections(O)})},newlineAndIndent:function(g){return Bn(g,function(){for(var S=g.listSelections(),O=S.length-1;O>=0;O--)g.replaceRange(g.doc.lineSeparator(),S[O].anchor,S[O].head,"+input");S=g.listSelections();for(var L=0;L<S.length;L++)g.indentLine(S[L].from().line,null,!0);Yh(g)})},openLine:function(g){return g.replaceSelection("\n","start")},toggleOverwrite:function(g){return g.toggleOverwrite()}};function jy(g,S){var O=Gi(g.doc,S),L=Ac(O);return L!=O&&(S=as(L)),tm(!0,g,L,S,1)}function Pu(g,S){var O=jy(g,S.line),L=Gi(g.doc,O.line),H=ca(L,g.doc.direction);if(!H||0==H[0].level){var oe=Math.max(O.ch,L.text.search(/\S/));return Pe(O.line,S.line==O.line&&S.ch<=oe&&S.ch?0:oe,O.sticky)}return O}function im(g,S,O){if("string"==typeof S&&!(S=Sg[S]))return!1;g.display.input.ensurePolled();var L=g.display.shift,H=!1;try{g.isReadOnly()&&(g.state.suppressEdits=!0),O&&(g.display.shift=!1),H=S(g)!=ii}finally{g.display.shift=L,g.state.suppressEdits=!1}return H}var rm=new En;function Nf(g,S,O,L){var H=g.state.keySeq;if(H){if(Rx(S))return"handled";if(/\'$/.test(S)?g.state.keySeq=null:rm.set(50,function(){g.state.keySeq==H&&(g.state.keySeq=null,g.display.input.reset())}),Zy(g,H+" "+S,O,L))return!0}return Zy(g,S,O,L)}function Zy(g,S,O,L){var H=function Eg(g,S,O){for(var L=0;L<g.state.keyMaps.length;L++){var H=em(S,g.state.keyMaps[L],O,g);if(H)return H}return g.options.extraKeys&&em(S,g.options.extraKeys,O,g)||em(S,g.options.keyMap,O,g)}(g,S,L);return"multi"==H&&(g.state.keySeq=S),"handled"==H&&zr(g,"keyHandled",g,S,O),("handled"==H||"multi"==H)&&(ne(O),Ci(g)),!!H}function Yy(g,S){var O=Px(S,!0);return!!O&&(S.shiftKey&&!g.state.keySeq?Nf(g,"Shift-"+O,S,function(L){return im(g,L,!0)})||Nf(g,O,S,function(L){if("string"==typeof L?/^go[A-Z]/.test(L):L.motion)return im(g,L)}):Nf(g,O,S,function(L){return im(g,L)}))}var Xy=null;function tv(g){var S=this;if(!(g.target&&g.target!=S.display.input.getField()||(S.curOp.focus=Jt(Xn(S)),b(S,g)))){p&&v<11&&27==g.keyCode&&(g.returnValue=!1);var O=g.keyCode;S.display.shift=16==O||g.shiftKey;var L=Yy(S,g);B&&(Xy=L?O:null,!L&&88==O&&!bn&&(ae?g.metaKey:g.ctrlKey)&&S.replaceSelection("",null,"cut")),y&&!ae&&!L&&46==O&&g.shiftKey&&!g.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==O&&!/\bCodeMirror-crosshair\b/.test(S.display.lineDiv.className)&&function Yc(g){var S=g.display.lineDiv;function O(L){(18==L.keyCode||!L.altKey)&&(qe(S,"CodeMirror-crosshair"),$i(document,"keyup",O),$i(document,"mouseover",O))}xn(S,"CodeMirror-crosshair"),sr(document,"keyup",O),sr(document,"mouseover",O)}(S)}}function Tg(g){16==g.keyCode&&(this.doc.sel.shift=!1),b(this,g)}function $d(g){var S=this;if(!(g.target&&g.target!=S.display.input.getField()||Oa(S.display,g)||b(S,g)||g.ctrlKey&&!g.altKey||ae&&g.metaKey)){var O=g.keyCode,L=g.charCode;if(B&&O==Xy)return Xy=null,void ne(g);if(!B||g.which&&!(g.which<10)||!Yy(S,g)){var H=String.fromCharCode(null==L?O:L);"\b"!=H&&(function iC(g,S,O){return Nf(g,"'"+O+"'",S,function(L){return im(g,L,!0)})}(S,g,H)||S.display.input.onKeyPress(g))}}}var sm,om,Dg=function(g,S,O){this.time=g,this.pos=S,this.button=O};function Jy(g){var S=this,O=S.display;if(!(b(S,g)||O.activeTouch&&O.input.supportsTouch())){if(O.input.ensurePolled(),O.shift=g.shiftKey,Oa(O,g))return void(C||(O.scroller.draggable=!1,setTimeout(function(){return O.scroller.draggable=!0},100)));if(!rv(S,g)){var L=Ot(S,g),H=yt(g),oe=L?function Lx(g,S){var O=+new Date;return om&&om.compare(O,g,S)?(sm=om=null,"triple"):sm&&sm.compare(O,g,S)?(om=new Dg(O,g,S),sm=null,"double"):(sm=new Dg(O,g,S),om=null,"single")}(L,H):"single";ni(S).focus(),1==H&&S.state.selectingText&&S.state.selectingText(g),(!L||!function Fx(g,S,O,L,H){var oe="Click";return"double"==L?oe="Double"+oe:"triple"==L&&(oe="Triple"+oe),Nf(g,kx(oe=(1==S?"Left":2==S?"Middle":"Right")+oe,H),H,function(ye){if("string"==typeof ye&&(ye=Sg[ye]),!ye)return!1;var Se=!1;try{g.isReadOnly()&&(g.state.suppressEdits=!0),Se=ye(g,O)!=ii}finally{g.state.suppressEdits=!1}return Se})}(S,H,L,oe,g))&&(1==H?L?function nv(g,S,O,L){p?setTimeout(en(Ba,g),0):g.curOp.focus=Jt(Xn(g));var ye,H=function Ky(g,S,O){var L=g.getOption("configureMouse"),H=L?L(g,S,O):{};return null==H.unit&&(H.unit=(Me?O.shiftKey&&O.metaKey:O.altKey)?"rectangle":"single"==S?"char":"double"==S?"word":"line"),(null==H.extend||g.doc.extend)&&(H.extend=g.doc.extend||O.shiftKey),null==H.addNew&&(H.addNew=ae?O.metaKey:O.ctrlKey),null==H.moveOnDrag&&(H.moveOnDrag=!(ae?O.altKey:O.ctrlKey)),H}(g,O,L),oe=g.doc.sel;g.options.dragDrop&&Mt&&!g.isReadOnly()&&"single"==O&&(ye=oe.contains(S))>-1&&(Ke((ye=oe.ranges[ye]).from(),S)<0||S.xRel>0)&&(Ke(ye.to(),S)>0||S.xRel<0)?function Ag(g,S,O,L){var H=g.display,oe=!1,ye=Ha(g,function(He){C&&(H.scroller.draggable=!1),g.state.draggingText=!1,g.state.delayingBlurEvent&&(g.hasFocus()?g.state.delayingBlurEvent=!1:Hl(g)),$i(H.wrapper.ownerDocument,"mouseup",ye),$i(H.wrapper.ownerDocument,"mousemove",Se),$i(H.scroller,"dragstart",Ie),$i(H.scroller,"drop",ye),oe||(ne(He),L.addNew||_g(g.doc,O,null,null,L.extend),C&&!U||p&&9==v?setTimeout(function(){H.wrapper.ownerDocument.body.focus({preventScroll:!0}),H.input.focus()},20):H.input.focus())}),Se=function(He){oe=oe||Math.abs(S.clientX-He.clientX)+Math.abs(S.clientY-He.clientY)>=10},Ie=function(){return oe=!0};C&&(H.scroller.draggable=!0),g.state.draggingText=ye,ye.copy=!L.moveOnDrag,sr(H.wrapper.ownerDocument,"mouseup",ye),sr(H.wrapper.ownerDocument,"mousemove",Se),sr(H.scroller,"dragstart",Ie),sr(H.scroller,"drop",ye),g.state.delayingBlurEvent=!0,setTimeout(function(){return H.input.focus()},20),H.scroller.dragDrop&&H.scroller.dragDrop()}(g,L,S,H):function am(g,S,O,L){p&&Hl(g);var H=g.display,oe=g.doc;ne(S);var ye,Se,Ie=oe.sel,He=Ie.ranges;if(L.addNew&&!L.extend?(Se=oe.sel.contains(O),ye=Se>-1?He[Se]:new co(O,O)):(ye=oe.sel.primary(),Se=oe.sel.primIndex),"rectangle"==L.unit)L.addNew||(ye=new co(O,O)),O=Ot(g,S,!0,!0),Se=-1;else{var ot=Ox(g,O,L.unit);ye=L.extend?gg(ye,ot.anchor,ot.head,L.extend):ot}L.addNew?-1==Se?(Se=He.length,_l(oe,Ic(g,He.concat([ye]),Se),{scroll:!1,origin:"*mouse"})):He.length>1&&He[Se].empty()&&"char"==L.unit&&!L.extend?(_l(oe,Ic(g,He.slice(0,Se).concat(He.slice(Se+1)),0),{scroll:!1,origin:"*mouse"}),Ie=oe.sel):Wd(oe,Se,ye,dr):(Se=0,_l(oe,new ql([ye],0),dr),Ie=oe.sel);var mt=O;function jt(pi){if(0!=Ke(mt,pi))if(mt=pi,"rectangle"==L.unit){for(var Ki=[],Pr=g.options.tabSize,Tr=zi(Gi(oe,O.line).text,O.ch,Pr),Ps=zi(Gi(oe,pi.line).text,pi.ch,Pr),Ko=Math.min(Tr,Ps),cl=Math.max(Tr,Ps),va=Math.min(O.line,pi.line),Rc=Math.min(g.lastLine(),Math.max(O.line,pi.line));va<=Rc;va++){var wc=Gi(oe,va).text,el=Fn(wc,Ko,Pr);Ko==cl?Ki.push(new co(Pe(va,el),Pe(va,el))):wc.length>el&&Ki.push(new co(Pe(va,el),Pe(va,Fn(wc,cl,Pr))))}Ki.length||Ki.push(new co(O,O)),_l(oe,Ic(g,Ie.ranges.slice(0,Se).concat(Ki),Se),{origin:"*mouse",scroll:!1}),g.scrollIntoView(pi)}else{var Va,kc=ye,Dl=Ox(g,pi,L.unit),ya=kc.anchor;Ke(Dl.anchor,ya)>0?(Va=Dl.head,ya=vs(kc.from(),Dl.anchor)):(Va=Dl.anchor,ya=Rr(kc.to(),Dl.head));var yo=Ie.ranges.slice(0);yo[Se]=function iv(g,S){var O=S.anchor,L=S.head,H=Gi(g.doc,O.line);if(0==Ke(O,L)&&O.sticky==L.sticky)return S;var oe=ca(H);if(!oe)return S;var ye=Ls(oe,O.ch,O.sticky),Se=oe[ye];if(Se.from!=O.ch&&Se.to!=O.ch)return S;var He,Ie=ye+(Se.from==O.ch==(1!=Se.level)?0:1);if(0==Ie||Ie==oe.length)return S;if(L.line!=O.line)He=(L.line-O.line)*("ltr"==g.doc.direction?1:-1)>0;else{var ot=Ls(oe,L.ch,L.sticky),mt=ot-ye||(L.ch-O.ch)*(1==Se.level?-1:1);He=ot==Ie-1||ot==Ie?mt<0:mt>0}var jt=oe[Ie+(He?-1:0)],Nt=He==(1==jt.level),Mn=Nt?jt.from:jt.to,Gn=Nt?"after":"before";return O.ch==Mn&&O.sticky==Gn?S:new co(new Pe(O.line,Mn,Gn),L)}(g,new co(Jn(oe,ya),Va)),_l(oe,Ic(g,yo,Se),dr)}}var Nt=H.wrapper.getBoundingClientRect(),Mn=0;function Gn(pi){var Ki=++Mn,Pr=Ot(g,pi,!0,"rectangle"==L.unit);if(Pr)if(0!=Ke(Pr,mt)){g.curOp.focus=Jt(Xn(g)),jt(Pr);var Tr=jh(H,oe);(Pr.line>=Tr.to||Pr.line<Tr.from)&&setTimeout(Ha(g,function(){Mn==Ki&&Gn(pi)}),150)}else{var Ps=pi.clientY<Nt.top?-20:pi.clientY>Nt.bottom?20:0;Ps&&setTimeout(Ha(g,function(){Mn==Ki&&(H.scroller.scrollTop+=Ps,Gn(pi))}),50)}}function di(pi){g.state.selectingText=!1,Mn=1/0,pi&&(ne(pi),H.input.focus()),$i(H.wrapper.ownerDocument,"mousemove",ci),$i(H.wrapper.ownerDocument,"mouseup",fi),oe.history.lastSelOrigin=null}var ci=Ha(g,function(pi){0!==pi.buttons&&yt(pi)?Gn(pi):di(pi)}),fi=Ha(g,di);g.state.selectingText=fi,sr(H.wrapper.ownerDocument,"mousemove",ci),sr(H.wrapper.ownerDocument,"mouseup",fi)}(g,L,S,H)}(S,L,oe,g):$e(g)==O.scroller&&ne(g):2==H?(L&&_g(S.doc,L),setTimeout(function(){return O.input.focus()},20)):3==H&&(ce?S.display.input.onContextMenu(g):Hl(S)))}}}function Ox(g,S,O){if("char"==O)return new co(S,S);if("word"==O)return g.findWordAt(S);if("line"==O)return new co(Pe(S.line,0),Jn(g.doc,Pe(S.line+1,0)));var L=O(g,S);return new co(L.from,L.to)}function lm(g,S,O,L){var H,oe;if(S.touches)H=S.touches[0].clientX,oe=S.touches[0].clientY;else try{H=S.clientX,oe=S.clientY}catch(jt){return!1}if(H>=Math.floor(g.display.gutters.getBoundingClientRect().right))return!1;L&&ne(S);var ye=g.display,Se=ye.lineDiv.getBoundingClientRect();if(oe>Se.bottom||!z(g,O))return Ae(S);oe-=Se.top-ye.viewOffset;for(var Ie=0;Ie<g.display.gutterSpecs.length;++Ie){var He=ye.gutters.childNodes[Ie];if(He&&He.getBoundingClientRect().right>=H)return Is(g,O,g,js(g.doc,oe),g.display.gutterSpecs[Ie].className,S),Ae(S)}}function rv(g,S){return lm(g,S,"gutterClick",!0)}function Qy(g,S){Oa(g.display,S)||function Nx(g,S){return!!z(g,"gutterContextMenu")&&lm(g,S,"gutterContextMenu",!1)}(g,S)||b(g,S,"contextmenu")||ce||g.display.input.onContextMenu(S)}function sv(g){g.display.wrapper.className=g.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+g.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Tl(g)}Dg.prototype.compare=function(g,S,O){return this.time+400>g&&0==Ke(S,this.pos)&&O==this.button};var Bf={toString:function(){return"CodeMirror.Init"}},Hf={},cm={};function Sn(g,S,O){if(!S!=!(O&&O!=Bf)){var H=g.display.dragFunctions,oe=S?sr:$i;oe(g.display.scroller,"dragstart",H.start),oe(g.display.scroller,"dragenter",H.enter),oe(g.display.scroller,"dragover",H.over),oe(g.display.scroller,"dragleave",H.leave),oe(g.display.scroller,"drop",H.drop)}}function $y(g){g.options.lineWrapping?(xn(g.display.wrapper,"CodeMirror-wrap"),g.display.sizer.style.minWidth="",g.display.sizerWidth=null):(qe(g.display.wrapper,"CodeMirror-wrap"),ve(g)),wt(g),Vt(g),Tl(g),setTimeout(function(){return er(g)},100)}function Jo(g,S){var O=this;if(!(this instanceof Jo))return new Jo(g,S);this.options=S=S?gr(S):{},gr(Hf,S,!1);var L=S.value;"string"==typeof L?L=new xc(L,S.mode,null,S.lineSeparator,S.direction):S.mode&&(L.modeOption=S.mode),this.doc=L;var H=new Jo.inputStyles[S.inputStyle](this),oe=this.display=new Wl(g,L,H,S);for(var ye in oe.wrapper.CodeMirror=this,sv(this),S.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Up(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new En,keySeq:null,specialChars:null},S.autofocus&&!ie&&oe.input.focus(),p&&v<11&&setTimeout(function(){return O.display.input.reset(!0)},20),function ov(g){var S=g.display;sr(S.scroller,"mousedown",Ha(g,Jy)),sr(S.scroller,"dblclick",p&&v<11?Ha(g,function(Ie){if(!b(g,Ie)){var He=Ot(g,Ie);if(He&&!rv(g,Ie)&&!Oa(g.display,Ie)){ne(Ie);var ot=g.findWordAt(He);_g(g.doc,ot.anchor,ot.head)}}}):function(Ie){return b(g,Ie)||ne(Ie)}),sr(S.scroller,"contextmenu",function(Ie){return Qy(g,Ie)}),sr(S.input.getField(),"contextmenu",function(Ie){S.scroller.contains(Ie.target)||Qy(g,Ie)});var O,L={end:0};function H(){S.activeTouch&&(O=setTimeout(function(){return S.activeTouch=null},1e3),(L=S.activeTouch).end=+new Date)}function oe(Ie){if(1!=Ie.touches.length)return!1;var He=Ie.touches[0];return He.radiusX<=1&&He.radiusY<=1}function ye(Ie,He){if(null==He.left)return!0;var ot=He.left-Ie.left,mt=He.top-Ie.top;return ot*ot+mt*mt>400}sr(S.scroller,"touchstart",function(Ie){if(!b(g,Ie)&&!oe(Ie)&&!rv(g,Ie)){S.input.ensurePolled(),clearTimeout(O);var He=+new Date;S.activeTouch={start:He,moved:!1,prev:He-L.end<=300?L:null},1==Ie.touches.length&&(S.activeTouch.left=Ie.touches[0].pageX,S.activeTouch.top=Ie.touches[0].pageY)}}),sr(S.scroller,"touchmove",function(){S.activeTouch&&(S.activeTouch.moved=!0)}),sr(S.scroller,"touchend",function(Ie){var He=S.activeTouch;if(He&&!Oa(S,Ie)&&null!=He.left&&!He.moved&&new Date-He.start<300){var mt,ot=g.coordsChar(S.activeTouch,"page");mt=!He.prev||ye(He,He.prev)?new co(ot,ot):!He.prev.prev||ye(He,He.prev.prev)?g.findWordAt(ot):new co(Pe(ot.line,0),Jn(g.doc,Pe(ot.line+1,0))),g.setSelection(mt.anchor,mt.head),g.focus(),ne(Ie)}H()}),sr(S.scroller,"touchcancel",H),sr(S.scroller,"scroll",function(){S.scroller.clientHeight&&(Vp(g,S.scroller.scrollTop),Iu(g,S.scroller.scrollLeft,!0),Is(g,"scroll",g))}),sr(S.scroller,"mousewheel",function(Ie){return Gp(g,Ie)}),sr(S.scroller,"DOMMouseScroll",function(Ie){return Gp(g,Ie)}),sr(S.wrapper,"scroll",function(){return S.wrapper.scrollTop=S.wrapper.scrollLeft=0}),S.dragFunctions={enter:function(Ie){b(g,Ie)||Ge(Ie)},over:function(Ie){b(g,Ie)||(function Ta(g,S){var O=Ot(g,S);if(O){var L=document.createDocumentFragment();ks(g,O,L),g.display.dragCursor||(g.display.dragCursor=je("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),g.display.lineSpace.insertBefore(g.display.dragCursor,g.display.cursorDiv)),De(g.display.dragCursor,L)}}(g,Ie),Ge(Ie))},start:function(Ie){return function Lf(g,S){if(p&&(!g.state.draggingText||+new Date-Q_<100))Ge(S);else if(!b(g,S)&&!Oa(g.display,S)&&(S.dataTransfer.setData("Text",g.getSelection()),S.dataTransfer.effectAllowed="copyMove",S.dataTransfer.setDragImage&&!U)){var O=je("img",null,null,"position: fixed; left: 0; top: 0;");O.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",B&&(O.width=O.height=1,g.display.wrapper.appendChild(O),O._top=O.offsetTop),S.dataTransfer.setDragImage(O,0,0),B&&O.parentNode.removeChild(O)}}(g,Ie)},drop:Ha(g,Gy),leave:function(Ie){b(g,Ie)||Cg(g)}};var Se=S.input.getField();sr(Se,"keyup",function(Ie){return Tg.call(g,Ie)}),sr(Se,"keydown",Ha(g,tv)),sr(Se,"keypress",Ha(g,$d)),sr(Se,"focus",function(Ie){return Zo(g,Ie)}),sr(Se,"blur",function(Ie){return Ca(g,Ie)})}(this),Ff(),rc(this),this.curOp.forceUpdate=!0,ga(this,L),S.autofocus&&!ie||this.hasFocus()?setTimeout(function(){O.hasFocus()&&!O.state.focused&&Zo(O)},20):Ca(this),cm)cm.hasOwnProperty(ye)&&cm[ye](this,S[ye],Bf);Jh(this),S.finishInit&&S.finishInit(this);for(var Se=0;Se<ef.length;++Se)ef[Se](this);Ea(this),C&&S.lineWrapping&&"optimizelegibility"==getComputedStyle(oe.lineDiv).textRendering&&(oe.lineDiv.style.textRendering="auto")}Jo.defaults=Hf,Jo.optionHandlers=cm;var ef=[];function um(g,S,O,L){var oe,H=g.doc;null==O&&(O="add"),"smart"==O&&(H.mode.indent?oe=qo(g,S).state:O="prev");var ye=g.options.tabSize,Se=Gi(H,S),Ie=zi(Se.text,null,ye);Se.stateAfter&&(Se.stateAfter=null);var ot,He=Se.text.match(/^\s*/)[0];if(L||/\S/.test(Se.text)){if("smart"==O&&((ot=H.mode.indent(oe,Se.text.slice(He.length),Se.text))==ii||ot>150)){if(!L)return;O="prev"}}else ot=0,O="not";"prev"==O?ot=S>H.first?zi(Gi(H,S-1).text,null,ye):0:"add"==O?ot=Ie+g.options.indentUnit:"subtract"==O?ot=Ie-g.options.indentUnit:"number"==typeof O&&(ot=Ie+O),ot=Math.max(0,ot);var mt="",jt=0;if(g.options.indentWithTabs)for(var Nt=Math.floor(ot/ye);Nt;--Nt)jt+=ye,mt+="\t";if(jt<ot&&(mt+=dt(ot-jt)),mt!=He)return Xp(H,mt,Pe(S,0),Pe(S,He.length),"+input"),Se.stateAfter=null,!0;for(var Mn=0;Mn<H.sel.ranges.length;Mn++){var Gn=H.sel.ranges[Mn];if(Gn.head.line==S&&Gn.head.ch<He.length){var di=Pe(S,He.length);Wd(H,Mn,new co(di,di));break}}}Jo.defineInitHook=function(g){return ef.push(g)};var Lu=null;function Ig(g){Lu=g}function zf(g,S,O,L,H){var oe=g.doc;g.display.shift=!1,L||(L=oe.sel);var ye=+new Date-200,Se="paste"==H||g.state.pasteIncoming>ye,Ie=Dt(S),He=null;if(Se&&L.ranges.length>1)if(Lu&&Lu.text.join("\n")==S){if(L.ranges.length%Lu.text.length==0){He=[];for(var ot=0;ot<Lu.text.length;ot++)He.push(oe.splitLines(Lu.text[ot]))}}else Ie.length==L.ranges.length&&g.options.pasteLinesPerSelection&&(He=zt(Ie,function(ci){return[ci]}));for(var mt=g.curOp.updateInput,jt=L.ranges.length-1;jt>=0;jt--){var Nt=L.ranges[jt],Mn=Nt.from(),Gn=Nt.to();Nt.empty()&&(O&&O>0?Mn=Pe(Mn.line,Mn.ch-O):g.state.overwrite&&!Se?Gn=Pe(Gn.line,Math.min(Gi(oe,Gn.line).text.length,Gn.ch+nt(Ie).length)):Se&&Lu&&Lu.lineWise&&Lu.text.join("\n")==Ie.join("\n")&&(Mn=Gn=Pe(Mn.line,0)));var di={from:Mn,to:Gn,text:He?He[jt%He.length]:Ie,origin:H||(Se?"paste":g.state.cutIncoming>ye?"cut":"+input")};qd(g.doc,di),zr(g,"inputRead",g,di)}S&&!Se&&av(g,S),Yh(g),g.curOp.updateInput<2&&(g.curOp.updateInput=mt),g.curOp.typing=!0,g.state.pasteIncoming=g.state.cutIncoming=-1}function Xc(g,S){var O=g.clipboardData&&g.clipboardData.getData("Text");if(O)return g.preventDefault(),!S.isReadOnly()&&!S.options.disableInput&&S.hasFocus()&&Bn(S,function(){return zf(S,O,0,null,"paste")}),!0}function av(g,S){if(g.options.electricChars&&g.options.smartIndent)for(var O=g.doc.sel,L=O.ranges.length-1;L>=0;L--){var H=O.ranges[L];if(!(H.head.ch>100||L&&O.ranges[L-1].head.line==H.head.line)){var oe=g.getModeAt(H.head),ye=!1;if(oe.electricChars){for(var Se=0;Se<oe.electricChars.length;Se++)if(S.indexOf(oe.electricChars.charAt(Se))>-1){ye=um(g,H.head.line,"smart");break}}else oe.electricInput&&oe.electricInput.test(Gi(g.doc,H.head.line).text.slice(0,H.head.ch))&&(ye=um(g,H.head.line,"smart"));ye&&zr(g,"electricInput",g,H.head.line)}}}function ed(g){for(var S=[],O=[],L=0;L<g.doc.sel.ranges.length;L++){var H=g.doc.sel.ranges[L].head.line,oe={anchor:Pe(H,0),head:Pe(H+1,0)};O.push(oe),S.push(g.getRange(oe.anchor,oe.head))}return{text:S,ranges:O}}function eb(g,S,O,L){g.setAttribute("autocorrect",O?"":"off"),g.setAttribute("autocapitalize",L?"":"off"),g.setAttribute("spellcheck",!!S)}function lv(){var g=je("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),S=je("div",[g],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return C?g.style.width="1000px":g.setAttribute("wrap","off"),re&&(g.style.border="1px solid black"),eb(g),S}function Vf(g,S,O,L,H){var oe=S,ye=O,Se=Gi(g,S.line),Ie=H&&"rtl"==g.direction?-O:O;function ot(fi){var pi;if("codepoint"==L){var Ki=Se.text.charCodeAt(S.ch+(O>0?0:-1));pi=isNaN(Ki)?null:new Pe(S.line,Math.max(0,Math.min(Se.text.length,S.ch+O*((O>0?Ki>=55296&&Ki<56320:Ki>=56320&&Ki<57343)?2:1))),-O)}else pi=H?function nm(g,S,O,L){var H=ca(S,g.doc.direction);if(!H)return $a(S,O,L);O.ch>=S.text.length?(O.ch=S.text.length,O.sticky="before"):O.ch<=0&&(O.ch=0,O.sticky="after");var oe=Ls(H,O.ch,O.sticky),ye=H[oe];if("ltr"==g.doc.direction&&ye.level%2==0&&(L>0?ye.to>O.ch:ye.from<O.ch))return $a(S,O,L);var Ie,Se=function(ci,fi){return qy(S,ci instanceof Pe?ci.ch:ci,fi)},He=function(ci){return g.options.lineWrapping?(Ie=Ie||fo(g,S),pr(g,S,Ie,ci)):{begin:0,end:S.text.length}},ot=He("before"==O.sticky?Se(O,-1):O.ch);if("rtl"==g.doc.direction||1==ye.level){var mt=1==ye.level==L<0,jt=Se(O,mt?1:-1);if(null!=jt&&(mt?jt<=ye.to&&jt<=ot.end:jt>=ye.from&&jt>=ot.begin))return new Pe(O.line,jt,mt?"before":"after")}var Mn=function(ci,fi,pi){for(;ci>=0&&ci<H.length;ci+=fi){var Pr=H[ci],Tr=fi>0==(1!=Pr.level),Ps=Tr?pi.begin:Se(pi.end,-1);if(Pr.from<=Ps&&Ps<Pr.to||(Ps=Tr?Pr.from:Se(Pr.to,-1),pi.begin<=Ps&&Ps<pi.end))return Ko=Ps,Tr?new Pe(O.line,Se(Ko,1),"before"):new Pe(O.line,Ko,"after")}var Ko},Gn=Mn(oe+L,L,ot);if(Gn)return Gn;var di=L>0?ot.end:Se(ot.begin,-1);return null==di||L>0&&di==S.text.length||!(Gn=Mn(L>0?0:H.length-1,L,He(di)))?null:Gn}(g.cm,Se,S,O):$a(Se,S,O);if(null==pi){if(fi||!function He(){var fi=S.line+Ie;return!(fi<g.first||fi>=g.first+g.size)&&(S=new Pe(fi,S.ch,S.sticky),Se=Gi(g,fi))}())return!1;S=tm(H,g.cm,Se,S.line,Ie)}else S=pi;return!0}if("char"==L||"codepoint"==L)ot();else if("column"==L)ot(!0);else if("word"==L||"group"==L)for(var mt=null,jt="group"==L,Nt=g.cm&&g.cm.getHelper(S,"wordChars"),Mn=!0;!(O<0)||ot(!Mn);Mn=!1){var Gn=Se.text.charAt(S.ch)||"\n",di=mi(Gn,Nt)?"w":jt&&"\n"==Gn?"n":!jt||/\s/.test(Gn)?null:"p";if(jt&&!Mn&&!di&&(di="s"),mt&&mt!=di){O<0&&(O=1,ot(),S.sticky="after");break}if(di&&(mt=di),O>0&&!ot(!Mn))break}var ci=Zp(g,S,oe,ye,!0);return yn(oe,ci)&&(ci.hitSide=!0),ci}function uv(g,S,O,L){var ye,He,H=g.doc,oe=S.left;if("page"==L){var Se=Math.min(g.display.wrapper.clientHeight,ni(g).innerHeight||H(g).documentElement.clientHeight),Ie=Math.max(Se-.5*Wc(g.display),3);ye=(O>0?S.bottom:S.top)+O*Ie}else"line"==L&&(ye=O>0?S.bottom+3:S.top-3);for(;(He=Au(g,oe,ye)).outside;){if(O<0?ye<=0:ye>=H.height){He.hitSide=!0;break}ye+=5*O}return He}var ko=function(g){this.cm=g,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new En,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Zs(g,S){var O=Uc(g,S.line);if(!O||O.hidden)return null;var L=Gi(g.doc,S.line),H=Fo(O,L,S.line),oe=ca(L,g.doc.direction),ye="left";oe&&(ye=Ls(oe,S.ch)%2?"right":"left");var Ie=Xr(H.map,S.ch,ye);return Ie.offset="right"==Ie.collapse?Ie.end:Ie.start,Ie}function ll(g,S){return S&&(g.bad=!0),g}function hv(g,S,O){var L;if(S==g.display.lineDiv){if(!(L=g.display.lineDiv.childNodes[O]))return ll(g.clipPos(Pe(g.display.viewTo-1)),!0);S=null,O=0}else for(L=S;;L=L.parentNode){if(!L||L==g.display.lineDiv)return null;if(L.parentNode&&L.parentNode==g.display.lineDiv)break}for(var H=0;H<g.display.view.length;H++){var oe=g.display.view[H];if(oe.node==L)return tb(oe,S,O)}}function tb(g,S,O){var L=g.text.firstChild,H=!1;if(!S||!Yn(L,S))return ll(Pe(as(g.line),0),!0);if(S==L&&(H=!0,S=L.childNodes[O],O=0,!S)){var oe=g.rest?nt(g.rest):g.line;return ll(Pe(as(oe),oe.text.length),H)}var ye=3==S.nodeType?S:null,Se=S;for(!ye&&1==S.childNodes.length&&3==S.firstChild.nodeType&&(ye=S.firstChild,O&&(O=ye.nodeValue.length));Se.parentNode!=L;)Se=Se.parentNode;var Ie=g.measure,He=Ie.maps;function ot(di,ci,fi){for(var pi=-1;pi<(He?He.length:0);pi++)for(var Ki=pi<0?Ie.map:He[pi],Pr=0;Pr<Ki.length;Pr+=3){var Tr=Ki[Pr+2];if(Tr==di||Tr==ci){var Ps=as(pi<0?g.line:g.rest[pi]),Ko=Ki[Pr]+fi;return(fi<0||Tr!=di)&&(Ko=Ki[Pr+(fi?1:0)]),Pe(Ps,Ko)}}}var mt=ot(ye,Se,O);if(mt)return ll(mt,H);for(var jt=Se.nextSibling,Nt=ye?ye.nodeValue.length-O:0;jt;jt=jt.nextSibling){if(mt=ot(jt,jt.firstChild,0))return ll(Pe(mt.line,mt.ch-Nt),H);Nt+=jt.textContent.length}for(var Mn=Se.previousSibling,Gn=O;Mn;Mn=Mn.previousSibling){if(mt=ot(Mn,Mn.firstChild,-1))return ll(Pe(mt.line,mt.ch+Gn),H);Gn+=Mn.textContent.length}}ko.prototype.init=function(g){var S=this,O=this,L=O.cm,H=O.div=g.lineDiv;function oe(Se){for(var Ie=Se.target;Ie;Ie=Ie.parentNode){if(Ie==H)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(Ie.className))break}return!1}function ye(Se){if(oe(Se)&&!b(L,Se)){if(L.somethingSelected())Ig({lineWise:!1,text:L.getSelections()}),"cut"==Se.type&&L.replaceSelection("",null,"cut");else{if(!L.options.lineWiseCopyCut)return;var Ie=ed(L);Ig({lineWise:!0,text:Ie.text}),"cut"==Se.type&&L.operation(function(){L.setSelections(Ie.ranges,0,Os),L.replaceSelection("",null,"cut")})}if(Se.clipboardData){Se.clipboardData.clearData();var He=Lu.text.join("\n");if(Se.clipboardData.setData("Text",He),Se.clipboardData.getData("Text")==He)return void Se.preventDefault()}var ot=lv(),mt=ot.firstChild;L.display.lineSpace.insertBefore(ot,L.display.lineSpace.firstChild),mt.value=Lu.text.join("\n");var jt=Jt(H.ownerDocument);Lt(mt),setTimeout(function(){L.display.lineSpace.removeChild(ot),jt.focus(),jt==H&&O.showPrimarySelection()},50)}}H.contentEditable=!0,eb(H,L.options.spellcheck,L.options.autocorrect,L.options.autocapitalize),sr(H,"paste",function(Se){!oe(Se)||b(L,Se)||Xc(Se,L)||v<=11&&setTimeout(Ha(L,function(){return S.updateFromDOM()}),20)}),sr(H,"compositionstart",function(Se){S.composing={data:Se.data,done:!1}}),sr(H,"compositionupdate",function(Se){S.composing||(S.composing={data:Se.data,done:!1})}),sr(H,"compositionend",function(Se){S.composing&&(Se.data!=S.composing.data&&S.readFromDOMSoon(),S.composing.done=!0)}),sr(H,"touchstart",function(){return O.forceCompositionEnd()}),sr(H,"input",function(){S.composing||S.readFromDOMSoon()}),sr(H,"copy",ye),sr(H,"cut",ye)},ko.prototype.screenReaderLabelChanged=function(g){g?this.div.setAttribute("aria-label",g):this.div.removeAttribute("aria-label")},ko.prototype.prepareSelection=function(){var g=Gr(this.cm,!1);return g.focus=Jt(this.div.ownerDocument)==this.div,g},ko.prototype.showSelection=function(g,S){!g||!this.cm.display.view.length||((g.focus||S)&&this.showPrimarySelection(),this.showMultipleSelections(g))},ko.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},ko.prototype.showPrimarySelection=function(){var g=this.getSelection(),S=this.cm,O=S.doc.sel.primary(),L=O.from(),H=O.to();if(S.display.viewTo==S.display.viewFrom||L.line>=S.display.viewTo||H.line<S.display.viewFrom)g.removeAllRanges();else{var oe=hv(S,g.anchorNode,g.anchorOffset),ye=hv(S,g.focusNode,g.focusOffset);if(!oe||oe.bad||!ye||ye.bad||0!=Ke(vs(oe,ye),L)||0!=Ke(Rr(oe,ye),H)){var Se=S.display.view,Ie=L.line>=S.display.viewFrom&&Zs(S,L)||{node:Se[0].measure.map[2],offset:0},He=H.line<S.display.viewTo&&Zs(S,H);if(!He){var ot=Se[Se.length-1].measure,mt=ot.maps?ot.maps[ot.maps.length-1]:ot.map;He={node:mt[mt.length-1],offset:mt[mt.length-2]-mt[mt.length-3]}}if(!Ie||!He)return void g.removeAllRanges();var Nt,jt=g.rangeCount&&g.getRangeAt(0);try{Nt=Xe(Ie.node,Ie.offset,He.offset,He.node)}catch(Mn){}Nt&&(!y&&S.state.focused?(g.collapse(Ie.node,Ie.offset),Nt.collapsed||(g.removeAllRanges(),g.addRange(Nt))):(g.removeAllRanges(),g.addRange(Nt)),jt&&null==g.anchorNode?g.addRange(jt):y&&this.startGracePeriod()),this.rememberSelection()}}},ko.prototype.startGracePeriod=function(){var g=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){g.gracePeriod=!1,g.selectionChanged()&&g.cm.operation(function(){return g.cm.curOp.selectionChanged=!0})},20)},ko.prototype.showMultipleSelections=function(g){De(this.cm.display.cursorDiv,g.cursors),De(this.cm.display.selectionDiv,g.selection)},ko.prototype.rememberSelection=function(){var g=this.getSelection();this.lastAnchorNode=g.anchorNode,this.lastAnchorOffset=g.anchorOffset,this.lastFocusNode=g.focusNode,this.lastFocusOffset=g.focusOffset},ko.prototype.selectionInEditor=function(){var g=this.getSelection();if(!g.rangeCount)return!1;var S=g.getRangeAt(0).commonAncestorContainer;return Yn(this.div,S)},ko.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||Jt(this.div.ownerDocument)!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},ko.prototype.blur=function(){this.div.blur()},ko.prototype.getField=function(){return this.div},ko.prototype.supportsTouch=function(){return!0},ko.prototype.receivedFocus=function(){var g=this,S=this;this.selectionInEditor()?setTimeout(function(){return g.pollSelection()},20):Bn(this.cm,function(){return S.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function O(){S.cm.state.focused&&(S.pollSelection(),S.polling.set(S.cm.options.pollInterval,O))})},ko.prototype.selectionChanged=function(){var g=this.getSelection();return g.anchorNode!=this.lastAnchorNode||g.anchorOffset!=this.lastAnchorOffset||g.focusNode!=this.lastFocusNode||g.focusOffset!=this.lastFocusOffset},ko.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var g=this.getSelection(),S=this.cm;if(he&&I&&this.cm.display.gutterSpecs.length&&function Pi(g){for(var S=g;S;S=S.parentNode)if(/CodeMirror-gutter-wrapper/.test(S.className))return!0;return!1}(g.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var O=hv(S,g.anchorNode,g.anchorOffset),L=hv(S,g.focusNode,g.focusOffset);O&&L&&Bn(S,function(){_l(S.doc,io(O,L),Os),(O.bad||L.bad)&&(S.curOp.selectionChanged=!0)})}}},ko.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var oe,ye,Se,g=this.cm,S=g.display,O=g.doc.sel.primary(),L=O.from(),H=O.to();if(0==L.ch&&L.line>g.firstLine()&&(L=Pe(L.line-1,Gi(g.doc,L.line-1).length)),H.ch==Gi(g.doc,H.line).text.length&&H.line<g.lastLine()&&(H=Pe(H.line+1,0)),L.line<S.viewFrom||H.line>S.viewTo-1)return!1;L.line==S.viewFrom||0==(oe=On(g,L.line))?(ye=as(S.view[0].line),Se=S.view[0].node):(ye=as(S.view[oe].line),Se=S.view[oe-1].node.nextSibling);var He,ot,Ie=On(g,H.line);if(Ie==S.view.length-1?(He=S.viewTo-1,ot=S.lineDiv.lastChild):(He=as(S.view[Ie+1].line)-1,ot=S.view[Ie+1].node.previousSibling),!Se)return!1;for(var mt=g.doc.splitLines(function Hx(g,S,O,L,H){var oe="",ye=!1,Se=g.doc.lineSeparator(),Ie=!1;function ot(){ye&&(oe+=Se,Ie&&(oe+=Se),ye=Ie=!1)}function mt(Nt){Nt&&(ot(),oe+=Nt)}function jt(Nt){if(1==Nt.nodeType){var Mn=Nt.getAttribute("cm-text");if(Mn)return void mt(Mn);var di,Gn=Nt.getAttribute("cm-marker");if(Gn){var ci=g.findMarks(Pe(L,0),Pe(H+1,0),function He(Nt){return function(Mn){return Mn.id==Nt}}(+Gn));return void(ci.length&&(di=ci[0].find(0))&&mt(Do(g.doc,di.from,di.to).join(Se)))}if("false"==Nt.getAttribute("contenteditable"))return;var fi=/^(pre|div|p|li|table|br)$/i.test(Nt.nodeName);if(!/^br$/i.test(Nt.nodeName)&&0==Nt.textContent.length)return;fi&&ot();for(var pi=0;pi<Nt.childNodes.length;pi++)jt(Nt.childNodes[pi]);/^(pre|p)$/i.test(Nt.nodeName)&&(Ie=!0),fi&&(ye=!0)}else 3==Nt.nodeType&&mt(Nt.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;jt(S),S!=O;)S=S.nextSibling,Ie=!1;return oe}(g,Se,ot,ye,He)),jt=Do(g.doc,Pe(ye,0),Pe(He,Gi(g.doc,He).text.length));mt.length>1&&jt.length>1;)if(nt(mt)==nt(jt))mt.pop(),jt.pop(),He--;else{if(mt[0]!=jt[0])break;mt.shift(),jt.shift(),ye++}for(var Nt=0,Mn=0,Gn=mt[0],di=jt[0],ci=Math.min(Gn.length,di.length);Nt<ci&&Gn.charCodeAt(Nt)==di.charCodeAt(Nt);)++Nt;for(var fi=nt(mt),pi=nt(jt),Ki=Math.min(fi.length-(1==mt.length?Nt:0),pi.length-(1==jt.length?Nt:0));Mn<Ki&&fi.charCodeAt(fi.length-Mn-1)==pi.charCodeAt(pi.length-Mn-1);)++Mn;if(1==mt.length&&1==jt.length&&ye==L.line)for(;Nt&&Nt>L.ch&&fi.charCodeAt(fi.length-Mn-1)==pi.charCodeAt(pi.length-Mn-1);)Nt--,Mn++;mt[mt.length-1]=fi.slice(0,fi.length-Mn).replace(/^\u200b+/,""),mt[0]=mt[0].slice(Nt).replace(/\u200b+$/,"");var Pr=Pe(ye,Nt),Tr=Pe(He,jt.length?nt(jt).length-Mn:0);return mt.length>1||mt[0]||Ke(Pr,Tr)?(Xp(g.doc,mt,Pr,Tr,"+input"),!0):void 0},ko.prototype.ensurePolled=function(){this.forceCompositionEnd()},ko.prototype.reset=function(){this.forceCompositionEnd()},ko.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},ko.prototype.readFromDOMSoon=function(){var g=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(g.readDOMTimeout=null,g.composing){if(!g.composing.done)return;g.composing=null}g.updateFromDOM()},80))},ko.prototype.updateFromDOM=function(){var g=this;(this.cm.isReadOnly()||!this.pollContent())&&Bn(this.cm,function(){return Vt(g.cm)})},ko.prototype.setUneditable=function(g){g.contentEditable="false"},ko.prototype.onKeyPress=function(g){0==g.charCode||this.composing||(g.preventDefault(),this.cm.isReadOnly()||Ha(this.cm,zf)(this.cm,String.fromCharCode(null==g.charCode?g.keyCode:g.charCode),0))},ko.prototype.readOnlyChanged=function(g){this.div.contentEditable=String("nocursor"!=g)},ko.prototype.onContextMenu=function(){},ko.prototype.resetPosition=function(){},ko.prototype.needsContentAttribute=!0;var za=function(g){this.cm=g,this.prevInput="",this.pollingFast=!1,this.polling=new En,this.hasSelection=!1,this.composing=null,this.resetting=!1};za.prototype.init=function(g){var S=this,O=this,L=this.cm;this.createField(g);var H=this.textarea;function oe(ye){if(!b(L,ye)){if(L.somethingSelected())Ig({lineWise:!1,text:L.getSelections()});else{if(!L.options.lineWiseCopyCut)return;var Se=ed(L);Ig({lineWise:!0,text:Se.text}),"cut"==ye.type?L.setSelections(Se.ranges,null,Os):(O.prevInput="",H.value=Se.text.join("\n"),Lt(H))}"cut"==ye.type&&(L.state.cutIncoming=+new Date)}}g.wrapper.insertBefore(this.wrapper,g.wrapper.firstChild),re&&(H.style.width="0px"),sr(H,"input",function(){p&&v>=9&&S.hasSelection&&(S.hasSelection=null),O.poll()}),sr(H,"paste",function(ye){b(L,ye)||Xc(ye,L)||(L.state.pasteIncoming=+new Date,O.fastPoll())}),sr(H,"cut",oe),sr(H,"copy",oe),sr(g.scroller,"paste",function(ye){if(!Oa(g,ye)&&!b(L,ye)){if(!H.dispatchEvent)return L.state.pasteIncoming=+new Date,void O.focus();var Se=new Event("paste");Se.clipboardData=ye.clipboardData,H.dispatchEvent(Se)}}),sr(g.lineSpace,"selectstart",function(ye){Oa(g,ye)||ne(ye)}),sr(H,"compositionstart",function(){var ye=L.getCursor("from");O.composing&&O.composing.range.clear(),O.composing={start:ye,range:L.markText(ye,L.getCursor("to"),{className:"CodeMirror-composing"})}}),sr(H,"compositionend",function(){O.composing&&(O.poll(),O.composing.range.clear(),O.composing=null)})},za.prototype.createField=function(g){this.wrapper=lv(),this.textarea=this.wrapper.firstChild},za.prototype.screenReaderLabelChanged=function(g){g?this.textarea.setAttribute("aria-label",g):this.textarea.removeAttribute("aria-label")},za.prototype.prepareSelection=function(){var g=this.cm,S=g.display,O=g.doc,L=Gr(g);if(g.options.moveInputWithCursor){var H=Co(g,O.sel.primary().head,"div"),oe=S.wrapper.getBoundingClientRect(),ye=S.lineDiv.getBoundingClientRect();L.teTop=Math.max(0,Math.min(S.wrapper.clientHeight-10,H.top+ye.top-oe.top)),L.teLeft=Math.max(0,Math.min(S.wrapper.clientWidth-10,H.left+ye.left-oe.left))}return L},za.prototype.showSelection=function(g){var O=this.cm.display;De(O.cursorDiv,g.cursors),De(O.selectionDiv,g.selection),null!=g.teTop&&(this.wrapper.style.top=g.teTop+"px",this.wrapper.style.left=g.teLeft+"px")},za.prototype.reset=function(g){if(!(this.contextMenuPending||this.composing&&g)){var S=this.cm;if(this.resetting=!0,S.somethingSelected()){this.prevInput="";var O=S.getSelection();this.textarea.value=O,S.state.focused&&Lt(this.textarea),p&&v>=9&&(this.hasSelection=O)}else g||(this.prevInput=this.textarea.value="",p&&v>=9&&(this.hasSelection=null));this.resetting=!1}},za.prototype.getField=function(){return this.textarea},za.prototype.supportsTouch=function(){return!1},za.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!ie||Jt(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch(g){}},za.prototype.blur=function(){this.textarea.blur()},za.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},za.prototype.receivedFocus=function(){this.slowPoll()},za.prototype.slowPoll=function(){var g=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){g.poll(),g.cm.state.focused&&g.slowPoll()})},za.prototype.fastPoll=function(){var g=!1,S=this;S.pollingFast=!0,S.polling.set(20,function O(){S.poll()||g?(S.pollingFast=!1,S.slowPoll()):(g=!0,S.polling.set(60,O))})},za.prototype.poll=function(){var g=this,S=this.cm,O=this.textarea,L=this.prevInput;if(this.contextMenuPending||this.resetting||!S.state.focused||nn(O)&&!L&&!this.composing||S.isReadOnly()||S.options.disableInput||S.state.keySeq)return!1;var H=O.value;if(H==L&&!S.somethingSelected())return!1;if(p&&v>=9&&this.hasSelection===H||ae&&/[\uf700-\uf7ff]/.test(H))return S.display.input.reset(),!1;if(S.doc.sel==S.display.selForContextMenu){var oe=H.charCodeAt(0);if(8203==oe&&!L&&(L="\u200b"),8666==oe)return this.reset(),this.cm.execCommand("undo")}for(var ye=0,Se=Math.min(L.length,H.length);ye<Se&&L.charCodeAt(ye)==H.charCodeAt(ye);)++ye;return Bn(S,function(){zf(S,H.slice(ye),L.length-ye,null,g.composing?"*compose":null),H.length>1e3||H.indexOf("\n")>-1?O.value=g.prevInput="":g.prevInput=H,g.composing&&(g.composing.range.clear(),g.composing.range=S.markText(g.composing.start,S.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},za.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},za.prototype.onKeyPress=function(){p&&v>=9&&(this.hasSelection=null),this.fastPoll()},za.prototype.onContextMenu=function(g){var S=this,O=S.cm,L=O.display,H=S.textarea;S.contextMenuPending&&S.contextMenuPending();var oe=Ot(O,g),ye=L.scroller.scrollTop;if(oe&&!B){O.options.resetSelectionOnContextMenu&&-1==O.doc.sel.contains(oe)&&Ha(O,_l)(O.doc,io(oe),Os);var mt,Ie=H.style.cssText,He=S.wrapper.style.cssText,ot=S.wrapper.offsetParent.getBoundingClientRect();if(S.wrapper.style.cssText="position: static",H.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(g.clientY-ot.top-5)+"px; left: "+(g.clientX-ot.left-5)+"px;\n      z-index: 1000; background: "+(p?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",C&&(mt=H.ownerDocument.defaultView.scrollY),L.input.focus(),C&&H.ownerDocument.defaultView.scrollTo(null,mt),L.input.reset(),O.somethingSelected()||(H.value=S.prevInput=" "),S.contextMenuPending=Nt,L.selForContextMenu=O.doc.sel,clearTimeout(L.detectingSelectAll),p&&v>=9&&jt(),ce){Ge(g);var Mn=function(){$i(window,"mouseup",Mn),setTimeout(Nt,20)};sr(window,"mouseup",Mn)}else setTimeout(Nt,50)}function jt(){if(null!=H.selectionStart){var Gn=O.somethingSelected(),di="\u200b"+(Gn?H.value:"");H.value="\u21da",H.value=di,S.prevInput=Gn?"":"\u200b",H.selectionStart=1,H.selectionEnd=di.length,L.selForContextMenu=O.doc.sel}}function Nt(){if(S.contextMenuPending==Nt&&(S.contextMenuPending=!1,S.wrapper.style.cssText=He,H.style.cssText=Ie,p&&v<9&&L.scrollbars.setScrollTop(L.scroller.scrollTop=ye),null!=H.selectionStart)){(!p||p&&v<9)&&jt();var Gn=0,di=function(){L.selForContextMenu==O.doc.sel&&0==H.selectionStart&&H.selectionEnd>0&&"\u200b"==S.prevInput?Ha(O,Yp)(O):Gn++<10?L.detectingSelectAll=setTimeout(di,500):(L.selForContextMenu=null,L.input.reset())};L.detectingSelectAll=setTimeout(di,200)}}},za.prototype.readOnlyChanged=function(g){g||this.reset(),this.textarea.disabled="nocursor"==g,this.textarea.readOnly=!!g},za.prototype.setUneditable=function(){},za.prototype.needsContentAttribute=!1,function Bx(g){var S=g.optionHandlers;function O(L,H,oe,ye){g.defaults[L]=H,oe&&(S[L]=ye?function(Se,Ie,He){He!=Bf&&oe(Se,Ie,He)}:oe)}g.defineOption=O,g.Init=Bf,O("value","",function(L,H){return L.setValue(H)},!0),O("mode",null,function(L,H){L.doc.modeOption=H,Vd(L)},!0),O("indentUnit",2,Vd,!0),O("indentWithTabs",!1),O("smartIndent",!0),O("tabSize",4,function(L){If(L),Tl(L),Vt(L)},!0),O("lineSeparator",null,function(L,H){if(L.doc.lineSep=H,H){var oe=[],ye=L.doc.first;L.doc.iter(function(Ie){for(var He=0;;){var ot=Ie.text.indexOf(H,He);if(-1==ot)break;He=ot+H.length,oe.push(Pe(ye,ot))}ye++});for(var Se=oe.length-1;Se>=0;Se--)Xp(L.doc,H,oe[Se],Pe(oe[Se].line,oe[Se].ch+H.length))}}),O("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(L,H,oe){L.state.specialChars=new RegExp(H.source+(H.test("\t")?"":"|\t"),"g"),oe!=Bf&&L.refresh()}),O("specialCharPlaceholder",Cn,function(L){return L.refresh()},!0),O("electricChars",!0),O("inputStyle",ie?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),O("spellcheck",!1,function(L,H){return L.getInputField().spellcheck=H},!0),O("autocorrect",!1,function(L,H){return L.getInputField().autocorrect=H},!0),O("autocapitalize",!1,function(L,H){return L.getInputField().autocapitalize=H},!0),O("rtlMoveVisually",!Ce),O("wholeLineUpdateBefore",!0),O("theme","default",function(L){sv(L),Ku(L)},!0),O("keyMap","default",function(L,H,oe){var ye=ev(H),Se=oe!=Bf&&ev(oe);Se&&Se.detach&&Se.detach(L,ye),ye.attach&&ye.attach(L,Se||null)}),O("extraKeys",null),O("configureMouse",null),O("lineWrapping",!1,$y,!0),O("gutters",[],function(L,H){L.display.gutterSpecs=Ju(H,L.options.lineNumbers),Ku(L)},!0),O("fixedGutter",!0,function(L,H){L.display.gutters.style.left=H?zp(L.display)+"px":"0",L.refresh()},!0),O("coverGutterNextToScrollbar",!1,function(L){return er(L)},!0),O("scrollbarStyle","native",function(L){Up(L),er(L),L.display.scrollbars.setScrollTop(L.doc.scrollTop),L.display.scrollbars.setScrollLeft(L.doc.scrollLeft)},!0),O("lineNumbers",!1,function(L,H){L.display.gutterSpecs=Ju(L.options.gutters,H),Ku(L)},!0),O("firstLineNumber",1,Ku,!0),O("lineNumberFormatter",function(L){return L},Ku,!0),O("showCursorWhenSelecting",!1,Ar,!0),O("resetSelectionOnContextMenu",!0),O("lineWiseCopyCut",!0),O("pasteLinesPerSelection",!0),O("selectionsMayTouch",!1),O("readOnly",!1,function(L,H){"nocursor"==H&&(Ca(L),L.display.input.blur()),L.display.input.readOnlyChanged(H)}),O("screenReaderLabel",null,function(L,H){L.display.input.screenReaderLabelChanged(H=""===H?null:H)}),O("disableInput",!1,function(L,H){H||L.display.input.reset()},!0),O("dragDrop",!0,Sn),O("allowDropFileTypes",null),O("cursorBlinkRate",530),O("cursorScrollMargin",0),O("cursorHeight",1,Ar,!0),O("singleCursorHeightPerLine",!0,Ar,!0),O("workTime",100),O("workDelay",100),O("flattenSpans",!0,If,!0),O("addModeClass",!1,If,!0),O("pollInterval",100),O("undoDepth",200,function(L,H){return L.doc.history.undoDepth=H}),O("historyEventDelay",1250),O("viewportMargin",10,function(L){return L.refresh()},!0),O("maxHighlightLength",1e4,If,!0),O("moveInputWithCursor",!0,function(L,H){H||L.display.input.resetPosition()}),O("tabindex",null,function(L,H){return L.display.input.getField().tabIndex=H||""}),O("autofocus",null),O("direction","ltr",function(L,H){return L.doc.setDirection(H)},!0),O("phrases",null)}(Jo),function cv(g){var S=g.optionHandlers,O=g.helpers={};g.prototype={constructor:g,focus:function(){ni(this).focus(),this.display.input.focus()},setOption:function(L,H){var oe=this.options,ye=oe[L];oe[L]==H&&"mode"!=L||(oe[L]=H,S.hasOwnProperty(L)&&Ha(this,S[L])(this,H,ye),Is(this,"optionChange",this,L))},getOption:function(L){return this.options[L]},getDoc:function(){return this.doc},addKeyMap:function(L,H){this.state.keyMaps[H?"push":"unshift"](ev(L))},removeKeyMap:function(L){for(var H=this.state.keyMaps,oe=0;oe<H.length;++oe)if(H[oe]==L||H[oe].name==L)return H.splice(oe,1),!0},addOverlay:Vl(function(L,H){var oe=L.token?L:g.getMode(this.options,L);if(oe.startState)throw new Error("Overlays may not be stateful.");(function on(g,S,O){for(var L=0,H=O(S);L<g.length&&O(g[L])<=H;)L++;g.splice(L,0,S)})(this.state.overlays,{mode:oe,modeSpec:L,opaque:H&&H.opaque,priority:H&&H.priority||0},function(ye){return ye.priority}),this.state.modeGen++,Vt(this)}),removeOverlay:Vl(function(L){for(var H=this.state.overlays,oe=0;oe<H.length;++oe){var ye=H[oe].modeSpec;if(ye==L||"string"==typeof L&&ye.name==L)return H.splice(oe,1),this.state.modeGen++,void Vt(this)}}),indentLine:Vl(function(L,H,oe){"string"!=typeof H&&"number"!=typeof H&&(H=null==H?this.options.smartIndent?"smart":"prev":H?"add":"subtract"),Ao(this.doc,L)&&um(this,L,H,oe)}),indentSelection:Vl(function(L){for(var H=this.doc.sel.ranges,oe=-1,ye=0;ye<H.length;ye++){var Se=H[ye];if(Se.empty())Se.head.line>oe&&(um(this,Se.head.line,L,!0),oe=Se.head.line,ye==this.doc.sel.primIndex&&Yh(this));else{var Ie=Se.from(),He=Se.to(),ot=Math.max(oe,Ie.line);oe=Math.min(this.lastLine(),He.line-(He.ch?0:1))+1;for(var mt=ot;mt<oe;++mt)um(this,mt,L);var jt=this.doc.sel.ranges;0==Ie.ch&&H.length==jt.length&&jt[ye].from().ch>0&&Wd(this.doc,ye,new co(Ie,jt[ye].to()),Os)}}}),getTokenAt:function(L,H){return Mf(this,L,H)},getLineTokens:function(L,H){return Mf(this,Pe(L),H,!0)},getTokenTypeAt:function(L){L=Jn(this.doc,L);var Ie,H=Ts(this,Gi(this.doc,L.line)),oe=0,ye=(H.length-1)/2,Se=L.ch;if(0==Se)Ie=H[2];else for(;;){var He=oe+ye>>1;if((He?H[2*He-1]:0)>=Se)ye=He;else{if(!(H[2*He+1]<Se)){Ie=H[2*He+2];break}oe=He+1}}var ot=Ie?Ie.indexOf("overlay "):-1;return ot<0?Ie:0==ot?null:Ie.slice(0,ot-1)},getModeAt:function(L){var H=this.doc.mode;return H.innerMode?g.innerMode(H,this.getTokenAt(L).state).mode:H},getHelper:function(L,H){return this.getHelpers(L,H)[0]},getHelpers:function(L,H){var oe=[];if(!O.hasOwnProperty(H))return oe;var ye=O[H],Se=this.getModeAt(L);if("string"==typeof Se[H])ye[Se[H]]&&oe.push(ye[Se[H]]);else if(Se[H])for(var Ie=0;Ie<Se[H].length;Ie++){var He=ye[Se[H][Ie]];He&&oe.push(He)}else Se.helperType&&ye[Se.helperType]?oe.push(ye[Se.helperType]):ye[Se.name]&&oe.push(ye[Se.name]);for(var ot=0;ot<ye._global.length;ot++){var mt=ye._global[ot];mt.pred(Se,this)&&-1==Dn(oe,mt.val)&&oe.push(mt.val)}return oe},getStateAfter:function(L,H){var oe=this.doc;return qo(this,(L=Zi(oe,null==L?oe.first+oe.size-1:L))+1,H).state},cursorCoords:function(L,H){var ye=this.doc.sel.primary();return Co(this,null==L?ye.head:"object"==typeof L?Jn(this.doc,L):L?ye.from():ye.to(),H||"page")},charCoords:function(L,H){return al(this,Jn(this.doc,L),H||"page")},coordsChar:function(L,H){return Au(this,(L=nc(this,L,H||"page")).left,L.top)},lineAtHeight:function(L,H){return L=nc(this,{top:L,left:0},H||"page").top,js(this.doc,L+this.display.viewOffset)},heightAtLine:function(L,H,oe){var Se,ye=!1;if("number"==typeof L){var Ie=this.doc.first+this.doc.size-1;L<this.doc.first?L=this.doc.first:L>Ie&&(L=Ie,ye=!0),Se=Gi(this.doc,L)}else Se=L;return pa(this,Se,{top:0,left:0},H||"page",oe||ye).top+(ye?this.doc.height-q(Se):0)},defaultTextHeight:function(){return Wc(this.display)},defaultCharWidth:function(){return Ja(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(L,H,oe,ye,Se){var Ie=this.display,He=(L=Co(this,Jn(this.doc,L))).bottom,ot=L.left;if(H.style.position="absolute",H.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(H),Ie.sizer.appendChild(H),"over"==ye)He=L.top;else if("above"==ye||"near"==ye){var mt=Math.max(Ie.wrapper.clientHeight,this.doc.height),jt=Math.max(Ie.sizer.clientWidth,Ie.lineSpace.clientWidth);("above"==ye||L.bottom+H.offsetHeight>mt)&&L.top>H.offsetHeight?He=L.top-H.offsetHeight:L.bottom+H.offsetHeight<=mt&&(He=L.bottom),ot+H.offsetWidth>jt&&(ot=jt-H.offsetWidth)}H.style.top=He+"px",H.style.left=H.style.right="","right"==Se?(ot=Ie.sizer.clientWidth-H.offsetWidth,H.style.right="0px"):("left"==Se?ot=0:"middle"==Se&&(ot=(Ie.sizer.clientWidth-H.offsetWidth)/2),H.style.left=ot+"px"),oe&&function Zh(g,S){var O=dg(g,S);null!=O.scrollTop&&Vp(g,O.scrollTop),null!=O.scrollLeft&&Iu(g,O.scrollLeft)}(this,{left:ot,top:He,right:ot+H.offsetWidth,bottom:He+H.offsetHeight})},triggerOnKeyDown:Vl(tv),triggerOnKeyPress:Vl($d),triggerOnKeyUp:Tg,triggerOnMouseDown:Vl(Jy),execCommand:function(L){if(Sg.hasOwnProperty(L))return Sg[L].call(null,this)},triggerElectric:Vl(function(L){av(this,L)}),findPosH:function(L,H,oe,ye){var Se=1;H<0&&(Se=-1,H=-H);for(var Ie=Jn(this.doc,L),He=0;He<H&&!(Ie=Vf(this.doc,Ie,Se,oe,ye)).hitSide;++He);return Ie},moveH:Vl(function(L,H){var oe=this;this.extendSelectionsBy(function(ye){return oe.display.shift||oe.doc.extend||ye.empty()?Vf(oe.doc,ye.head,L,H,oe.options.rtlMoveVisually):L<0?ye.from():ye.to()},Fe)}),deleteH:Vl(function(L,H){var ye=this.doc;this.doc.sel.somethingSelected()?ye.replaceSelection("",null,"+delete"):ih(this,function(Se){var Ie=Vf(ye,Se.head,L,H,!1);return L<0?{from:Ie,to:Se.head}:{from:Se.head,to:Ie}})}),findPosV:function(L,H,oe,ye){var Se=1,Ie=ye;H<0&&(Se=-1,H=-H);for(var He=Jn(this.doc,L),ot=0;ot<H;++ot){var mt=Co(this,He,"div");if(null==Ie?Ie=mt.left:mt.left=Ie,(He=uv(this,mt,Se,oe)).hitSide)break}return He},moveV:Vl(function(L,H){var oe=this,ye=this.doc,Se=[],Ie=!this.display.shift&&!ye.extend&&ye.sel.somethingSelected();if(ye.extendSelectionsBy(function(ot){if(Ie)return L<0?ot.from():ot.to();var mt=Co(oe,ot.head,"div");null!=ot.goalColumn&&(mt.left=ot.goalColumn),Se.push(mt.left);var jt=uv(oe,mt,L,H);return"page"==H&&ot==ye.sel.primary()&&Rd(oe,al(oe,jt,"div").top-mt.top),jt},Fe),Se.length)for(var He=0;He<ye.sel.ranges.length;He++)ye.sel.ranges[He].goalColumn=Se[He]}),findWordAt:function(L){var oe=Gi(this.doc,L.line).text,ye=L.ch,Se=L.ch;if(oe){var Ie=this.getHelper(L,"wordChars");"before"!=L.sticky&&Se!=oe.length||!ye?++Se:--ye;for(var He=oe.charAt(ye),ot=mi(He,Ie)?function(mt){return mi(mt,Ie)}:/\s/.test(He)?function(mt){return/\s/.test(mt)}:function(mt){return!/\s/.test(mt)&&!mi(mt)};ye>0&&ot(oe.charAt(ye-1));)--ye;for(;Se<oe.length&&ot(oe.charAt(Se));)++Se}return new co(Pe(L.line,ye),Pe(L.line,Se))},toggleOverwrite:function(L){null!=L&&L==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?xn(this.display.cursorDiv,"CodeMirror-overwrite"):qe(this.display.cursorDiv,"CodeMirror-overwrite"),Is(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Jt(Xn(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Vl(function(L,H){kd(this,L,H)}),getScrollInfo:function(){var L=this.display.scroller;return{left:L.scrollLeft,top:L.scrollTop,height:L.scrollHeight-Ds(this)-this.display.barHeight,width:L.scrollWidth-Ds(this)-this.display.barWidth,clientHeight:bs(this),clientWidth:Ze(this)}},scrollIntoView:Vl(function(L,H){null==L?(L={from:this.doc.sel.primary().head,to:null},null==H&&(H=this.options.cursorScrollMargin)):"number"==typeof L?L={from:Pe(L,0),to:null}:null==L.from&&(L={from:L,to:null}),L.to||(L.to=L.from),L.margin=H||0,null!=L.from.line?function Sa(g,S){fg(g),g.curOp.scrollToPos=S}(this,L):Yo(this,L.from,L.to,L.margin)}),setSize:Vl(function(L,H){var oe=this,ye=function(Ie){return"number"==typeof Ie||/^\d+$/.test(String(Ie))?Ie+"px":Ie};null!=L&&(this.display.wrapper.style.width=ye(L)),null!=H&&(this.display.wrapper.style.height=ye(H)),this.options.lineWrapping&&Xa(this);var Se=this.display.viewFrom;this.doc.iter(Se,this.display.viewTo,function(Ie){if(Ie.widgets)for(var He=0;He<Ie.widgets.length;He++)if(Ie.widgets[He].noHScroll){Pn(oe,Se,"widget");break}++Se}),this.curOp.forceUpdate=!0,Is(this,"refresh",this)}),operation:function(L){return Bn(this,L)},startOperation:function(){return rc(this)},endOperation:function(){return Ea(this)},refresh:Vl(function(){var L=this.display.cachedTextHeight;Vt(this),this.curOp.forceUpdate=!0,Tl(this),kd(this,this.doc.scrollLeft,this.doc.scrollTop),Gl(this.display),(null==L||Math.abs(L-Wc(this.display))>.5||this.options.lineWrapping)&&wt(this),Is(this,"refresh",this)}),swapDoc:Vl(function(L){var H=this.doc;return H.cm=null,this.state.selectingText&&this.state.selectingText(),ga(this,L),Tl(this),this.display.input.reset(),kd(this,L.scrollLeft,L.scrollTop),this.curOp.forceScroll=!0,zr(this,"swapDoc",this,H),H}),phrase:function(L){var H=this.options.phrases;return H&&Object.prototype.hasOwnProperty.call(H,L)?H[L]:L},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Y(g),g.registerHelper=function(L,H,oe){O.hasOwnProperty(L)||(O[L]=g[L]={_global:[]}),O[L][H]=oe},g.registerGlobalHelper=function(L,H,oe,ye){g.registerHelper(L,H,ye),O[L]._global.push({pred:oe,val:ye})}}(Jo);var Vx="iter insert remove copy getEditor constructor".split(" ");for(var Rg in xc.prototype)xc.prototype.hasOwnProperty(Rg)&&Dn(Vx,Rg)<0&&(Jo.prototype[Rg]=function(g){return function(){return g.apply(this.doc,arguments)}}(xc.prototype[Rg]));return Y(xc),Jo.inputStyles={textarea:za,contenteditable:ko},Jo.defineMode=function(g){!Jo.defaults.mode&&"null"!=g&&(Jo.defaults.mode=g),Di.apply(this,arguments)},Jo.defineMIME=function Ai(g,S){Ri[g]=S},Jo.defineMode("null",function(){return{token:function(g){return g.skipToEnd()}}}),Jo.defineMIME("text/plain","null"),Jo.defineExtension=function(g,S){Jo.prototype[g]=S},Jo.defineDocExtension=function(g,S){xc.prototype[g]=S},Jo.fromTextArea=function sC(g,S){if((S=S?gr(S):{}).value=g.value,!S.tabindex&&g.tabIndex&&(S.tabindex=g.tabIndex),!S.placeholder&&g.placeholder&&(S.placeholder=g.placeholder),null==S.autofocus){var O=Jt(g.ownerDocument);S.autofocus=O==g||null!=g.getAttribute("autofocus")&&O==document.body}function L(){g.value=Se.getValue()}var H;if(g.form&&(sr(g.form,"submit",L),!S.leaveSubmitMethodAlone)){var oe=g.form;H=oe.submit;try{var ye=oe.submit=function(){L(),oe.submit=H,oe.submit(),oe.submit=ye}}catch(Ie){}}S.finishInit=function(Ie){Ie.save=L,Ie.getTextArea=function(){return g},Ie.toTextArea=function(){Ie.toTextArea=isNaN,L(),g.parentNode.removeChild(Ie.getWrapperElement()),g.style.display="",g.form&&($i(g.form,"submit",L),!S.leaveSubmitMethodAlone&&"function"==typeof g.form.submit&&(g.form.submit=H))}},g.style.display="none";var Se=Jo(function(Ie){return g.parentNode.insertBefore(Ie,g.nextSibling)},S);return Se},function zx(g){g.off=$i,g.on=sr,g.wheelEventPixels=hu,g.Doc=xc,g.splitLines=Dt,g.countColumn=zi,g.findColumn=Fn,g.isWordChar=Oi,g.Pass=ii,g.signal=Is,g.Line=we,g.changeEnd=$u,g.scrollbarModel=Ks,g.Pos=Pe,g.cmpPos=Ke,g.modes=ei,g.mimeModes=Ri,g.resolveMode=Ii,g.getMode=Er,g.modeExtensions=Ui,g.extendMode=$r,g.copyState=Ur,g.startState=rl,g.innerMode=oa,g.commands=Sg,g.keyMap=wi,g.keyName=Px,g.isModifierKey=Rx,g.lookupKey=em,g.normalizeKeyMap=nC,g.StringStream=$s,g.SharedTextMarker=Pf,g.TextMarker=xh,g.LineWidget=Jd,g.e_preventDefault=ne,g.e_stopPropagation=pe,g.e_stop=Ge,g.addClass=xn,g.contains=Yn,g.rmClass=qe,g.keyNames=th}(Jo),Jo.version="5.65.9",Jo}()},166:(K,G,A)=>{!function(y){"use strict";y.defineMode("javascript",function(l,d){var re,he,_=l.indentUnit,p=d.statementIndent,v=d.jsonld,C=d.json||v,D=!1!==d.trackScope,I=d.typescript,P=d.wordCharacters||/[\w$\xa1-\uffff]/,B=function(){function Pe(Jn){return{type:Jn,style:"keyword"}}var Ke=Pe("keyword a"),yn=Pe("keyword b"),An=Pe("keyword c"),Rr=Pe("keyword d"),vs=Pe("operator"),Zi={type:"atom",style:"atom"};return{if:Pe("if"),while:Ke,with:Ke,else:yn,do:yn,try:yn,finally:yn,return:Rr,break:Rr,continue:Rr,new:Pe("new"),delete:An,void:An,throw:An,debugger:Pe("debugger"),var:Pe("var"),const:Pe("var"),let:Pe("var"),function:Pe("function"),catch:Pe("catch"),for:Pe("for"),switch:Pe("switch"),case:Pe("case"),default:Pe("default"),in:vs,typeof:vs,instanceof:vs,true:Zi,false:Zi,null:Zi,undefined:Zi,NaN:Zi,Infinity:Zi,this:Pe("this"),class:Pe("class"),super:Pe("atom"),yield:An,export:Pe("export"),import:Pe("import"),extends:An,await:An}}(),U=/[+\-*&%=<>!?|~^@]/,J=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function ie(Pe,Ke,yn){return re=Pe,he=yn,Ke}function ae(Pe,Ke){var yn=Pe.next();if('"'==yn||"'"==yn)return Ke.tokenize=function Me(Pe){return function(Ke,yn){var Rr,An=!1;if(v&&"@"==Ke.peek()&&Ke.match(J))return yn.tokenize=ae,ie("jsonld-keyword","meta");for(;null!=(Rr=Ke.next())&&(Rr!=Pe||An);)An=!An&&"\\"==Rr;return An||(yn.tokenize=ae),ie("string","string")}}(yn),Ke.tokenize(Pe,Ke);if("."==yn&&Pe.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return ie("number","number");if("."==yn&&Pe.match(".."))return ie("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(yn))return ie(yn);if("="==yn&&Pe.eat(">"))return ie("=>","operator");if("0"==yn&&Pe.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return ie("number","number");if(/\d/.test(yn))return Pe.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),ie("number","number");if("/"==yn)return Pe.eat("*")?(Ke.tokenize=Ce,Ce(Pe,Ke)):Pe.eat("/")?(Pe.skipToEnd(),ie("comment","comment")):Pa(Pe,Ke,1)?(function W(Pe){for(var yn,Ke=!1,An=!1;null!=(yn=Pe.next());){if(!Ke){if("/"==yn&&!An)return;"["==yn?An=!0:An&&"]"==yn&&(An=!1)}Ke=!Ke&&"\\"==yn}}(Pe),Pe.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),ie("regexp","string-2")):(Pe.eat("="),ie("operator","operator",Pe.current()));if("`"==yn)return Ke.tokenize=Le,Le(Pe,Ke);if("#"==yn&&"!"==Pe.peek())return Pe.skipToEnd(),ie("meta","meta");if("#"==yn&&Pe.eatWhile(P))return ie("variable","property");if("<"==yn&&Pe.match("!--")||"-"==yn&&Pe.match("->")&&!/\S/.test(Pe.string.slice(0,Pe.start)))return Pe.skipToEnd(),ie("comment","comment");if(U.test(yn))return(">"!=yn||!Ke.lexical||">"!=Ke.lexical.type)&&(Pe.eat("=")?("!"==yn||"="==yn)&&Pe.eat("="):/[<>*+\-|&?]/.test(yn)&&(Pe.eat(yn),">"==yn&&Pe.eat(yn))),"?"==yn&&Pe.eat(".")?ie("."):ie("operator","operator",Pe.current());if(P.test(yn)){Pe.eatWhile(P);var An=Pe.current();if("."!=Ke.lastType){if(B.propertyIsEnumerable(An)){var Rr=B[An];return ie(Rr.type,Rr.style,An)}if("async"==An&&Pe.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return ie("async","keyword",An)}return ie("variable","variable",An)}}function Ce(Pe,Ke){for(var An,yn=!1;An=Pe.next();){if("/"==An&&yn){Ke.tokenize=ae;break}yn="*"==An}return ie("comment","comment")}function Le(Pe,Ke){for(var An,yn=!1;null!=(An=Pe.next());){if(!yn&&("`"==An||"$"==An&&Pe.eat("{"))){Ke.tokenize=ae;break}yn=!yn&&"\\"==An}return ie("quasi","string-2",Pe.current())}function ce(Pe,Ke){Ke.fatArrowAt&&(Ke.fatArrowAt=null);var yn=Pe.string.indexOf("=>",Pe.start);if(!(yn<0)){if(I){var An=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Pe.string.slice(Pe.start,yn));An&&(yn=An.index)}for(var Rr=0,vs=!1,Zi=yn-1;Zi>=0;--Zi){var Jn=Pe.string.charAt(Zi),La="([{}])".indexOf(Jn);if(La>=0&&La<3){if(!Rr){++Zi;break}if(0==--Rr){"("==Jn&&(vs=!0);break}}else if(La>=3&&La<6)++Rr;else if(P.test(Jn))vs=!0;else if(/["'\/`]/.test(Jn))for(;;--Zi){if(0==Zi)return;if(Pe.string.charAt(Zi-1)==Jn&&"\\"!=Pe.string.charAt(Zi-2)){Zi--;break}}else if(vs&&!Rr){++Zi;break}}vs&&!Rr&&(Ke.fatArrowAt=Zi)}}var lt={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function qe(Pe,Ke,yn,An,Rr,vs){this.indented=Pe,this.column=Ke,this.type=yn,this.prev=Rr,this.info=vs,null!=An&&(this.align=An)}function ut(Pe,Ke){if(!D)return!1;for(var yn=Pe.localVars;yn;yn=yn.next)if(yn.name==Ke)return!0;for(var An=Pe.context;An;An=An.prev)for(yn=An.vars;yn;yn=yn.next)if(yn.name==Ke)return!0}function De(Pe,Ke,yn,An,Rr){var vs=Pe.cc;for(je.state=Pe,je.stream=Rr,je.marked=null,je.cc=vs,je.style=Ke,Pe.lexical.hasOwnProperty("align")||(Pe.lexical.align=!0);;)if((vs.length?vs.pop():C?dr:ii)(yn,An)){for(;vs.length&&vs[vs.length-1].lex;)vs.pop()();return je.marked?je.marked:"variable"==yn&&ut(Pe,An)?"variable-2":Ke}}var je={state:null,column:null,marked:null,cc:null};function Wt(){for(var Pe=arguments.length-1;Pe>=0;Pe--)je.cc.push(arguments[Pe])}function Xe(){return Wt.apply(null,arguments),!0}function Yn(Pe,Ke){for(var yn=Ke;yn;yn=yn.next)if(yn.name==Pe)return!0;return!1}function Jt(Pe){var Ke=je.state;if(je.marked="def",D){if(Ke.context)if("var"==Ke.lexical.info&&Ke.context&&Ke.context.block){var yn=xn(Pe,Ke.context);if(null!=yn)return void(Ke.context=yn)}else if(!Yn(Pe,Ke.localVars))return void(Ke.localVars=new Xn(Pe,Ke.localVars));d.globalVars&&!Yn(Pe,Ke.globalVars)&&(Ke.globalVars=new Xn(Pe,Ke.globalVars))}}function xn(Pe,Ke){if(Ke){if(Ke.block){var yn=xn(Pe,Ke.prev);return yn?yn==Ke.prev?Ke:new Lt(yn,Ke.vars,!0):null}return Yn(Pe,Ke.vars)?Ke:new Lt(Ke.prev,new Xn(Pe,Ke.vars),!1)}return null}function Pt(Pe){return"public"==Pe||"private"==Pe||"protected"==Pe||"abstract"==Pe||"readonly"==Pe}function Lt(Pe,Ke,yn){this.prev=Pe,this.vars=Ke,this.block=yn}function Xn(Pe,Ke){this.name=Pe,this.next=Ke}var ni=new Xn("this",new Xn("arguments",null));function en(){je.state.context=new Lt(je.state.context,je.state.localVars,!1),je.state.localVars=ni}function gr(){je.state.context=new Lt(je.state.context,je.state.localVars,!0),je.state.localVars=null}function zi(){je.state.localVars=je.state.context.vars,je.state.context=je.state.context.prev}function En(Pe,Ke){var yn=function(){var An=je.state,Rr=An.indented;if("stat"==An.lexical.type)Rr=An.lexical.indented;else for(var vs=An.lexical;vs&&")"==vs.type&&vs.align;vs=vs.prev)Rr=vs.indented;An.lexical=new qe(Rr,je.stream.column(),Pe,null,An.lexical,Ke)};return yn.lex=!0,yn}function Dn(){var Pe=je.state;Pe.lexical.prev&&(")"==Pe.lexical.type&&(Pe.indented=Pe.lexical.indented),Pe.lexical=Pe.lexical.prev)}function ji(Pe){return function Ke(yn){return yn==Pe?Xe():";"==Pe||"}"==yn||")"==yn||"]"==yn?Wt():Xe(Ke)}}function ii(Pe,Ke){return"var"==Pe?Xe(En("vardef",Ke),yt,ji(";"),Dn):"keyword a"==Pe?Xe(En("form"),Fn,ii,Dn):"keyword b"==Pe?Xe(En("form"),ii,Dn):"keyword d"==Pe?je.stream.match(/^\s*$/,!1)?Xe():Xe(En("stat"),dt,ji(";"),Dn):"debugger"==Pe?Xe(ji(";")):"{"==Pe?Xe(En("}"),gr,vo,Dn,zi):";"==Pe?Xe():"if"==Pe?("else"==je.state.lexical.info&&je.state.cc[je.state.cc.length-1]==Dn&&je.state.cc.pop()(),Xe(En("form"),Fn,ii,Dn,Dt)):"function"==Pe?Xe(qn):"for"==Pe?Xe(En("form"),gr,nn,ii,zi,Dn):"class"==Pe||I&&"interface"==Ke?(je.marked="keyword",Xe(En("form","class"==Pe?Pe:Ke),Ii,Dn)):"variable"==Pe?I&&"declare"==Ke?(je.marked="keyword",Xe(ii)):I&&("module"==Ke||"enum"==Ke||"type"==Ke)&&je.stream.match(/^\s*\w/,!1)?(je.marked="keyword","enum"==Ke?Xe(as):"type"==Ke?Xe(Ri,ji("operator"),$i,ji(";")):Xe(En("form"),Mt,ji("{"),En("}"),vo,Dn,Dn)):I&&"namespace"==Ke?(je.marked="keyword",Xe(En("form"),dr,ii,Dn)):I&&"abstract"==Ke?(je.marked="keyword",Xe(ii)):Xe(En("stat"),qs):"switch"==Pe?Xe(En("form"),Fn,ji("{"),En("}","switch"),gr,vo,Dn,Dn,zi):"case"==Pe?Xe(dr,ji(":")):"default"==Pe?Xe(ji(":")):"catch"==Pe?Xe(En("form"),en,Os,ii,Dn,zi):"export"==Pe?Xe(En("stat"),Ur,Dn):"import"==Pe?Xe(En("stat"),rl,Dn):"async"==Pe?Xe(ii):"@"==Ke?Xe(dr,ii):Wt(En("stat"),dr,ji(";"),Dn)}function Os(Pe){if("("==Pe)return Xe(Di,ji(")"))}function dr(Pe,Ke){return _n(Pe,Ke,!1)}function Fe(Pe,Ke){return _n(Pe,Ke,!0)}function Fn(Pe){return"("!=Pe?Wt():Xe(En(")"),dt,ji(")"),Dn)}function _n(Pe,Ke,yn){if(je.state.fatArrowAt==je.stream.start){var An=yn?hi:an;if("("==Pe)return Xe(en,En(")"),os(Di,")"),Dn,ji("=>"),An,zi);if("variable"==Pe)return Wt(en,Mt,ji("=>"),An,zi)}var Rr=yn?zt:nt;return lt.hasOwnProperty(Pe)?Xe(Rr):"function"==Pe?Xe(qn,Rr):"class"==Pe||I&&"interface"==Ke?(je.marked="keyword",Xe(En("form"),Ai,Dn)):"keyword c"==Pe||"async"==Pe?Xe(yn?Fe:dr):"("==Pe?Xe(En(")"),dt,ji(")"),Dn,Rr):"operator"==Pe||"spread"==Pe?Xe(yn?Fe:dr):"["==Pe?Xe(En("]"),ua,Dn,Rr):"{"==Pe?Ls(oo,"}",null,Rr):"quasi"==Pe?Wt(on,Rr):"new"==Pe?Xe(function Oi(Pe){return function(Ke){return"."==Ke?Xe(Pe?fr:mi):"variable"==Ke&&I?Xe(Ae,Pe?zt:nt):Wt(Pe?Fe:dr)}}(yn)):Xe()}function dt(Pe){return Pe.match(/[;\}\)\],]/)?Wt():Wt(dr)}function nt(Pe,Ke){return","==Pe?Xe(dt):zt(Pe,Ke,!1)}function zt(Pe,Ke,yn){var An=0==yn?nt:zt,Rr=0==yn?dr:Fe;if("=>"==Pe)return Xe(en,yn?hi:an,zi);if("operator"==Pe)return/\+\+|--/.test(Ke)||I&&"!"==Ke?Xe(An):I&&"<"==Ke&&je.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?Xe(En(">"),os($i,">"),Dn,An):"?"==Ke?Xe(dr,ji(":"),Rr):Xe(Rr);if("quasi"==Pe)return Wt(on,An);if(";"!=Pe){if("("==Pe)return Ls(Fe,")","call",An);if("."==Pe)return Xe(Sr,An);if("["==Pe)return Xe(En("]"),dt,ji("]"),Dn,An);if(I&&"as"==Ke)return je.marked="keyword",Xe($i,An);if("regexp"==Pe)return je.state.lastType=je.marked="operator",je.stream.backUp(je.stream.pos-je.stream.start-1),Xe(Rr)}}function on(Pe,Ke){return"quasi"!=Pe?Wt():"${"!=Ke.slice(Ke.length-2)?Xe(on):Xe(dt,Nn)}function Nn(Pe){if("}"==Pe)return je.marked="string-2",je.state.tokenize=Le,Xe(on)}function an(Pe){return ce(je.stream,je.state),Wt("{"==Pe?ii:dr)}function hi(Pe){return ce(je.stream,je.state),Wt("{"==Pe?ii:Fe)}function mi(Pe,Ke){if("target"==Ke)return je.marked="keyword",Xe(nt)}function fr(Pe,Ke){if("target"==Ke)return je.marked="keyword",Xe(zt)}function qs(Pe){return":"==Pe?Xe(Dn,ii):Wt(nt,ji(";"),Dn)}function Sr(Pe){if("variable"==Pe)return je.marked="property",Xe()}function oo(Pe,Ke){return"async"==Pe?(je.marked="property",Xe(oo)):"variable"==Pe||"keyword"==je.style?(je.marked="property","get"==Ke||"set"==Ke?Xe(fa):(I&&je.state.fatArrowAt==je.stream.start&&(yn=je.stream.match(/^\s*:\s*/,!1))&&(je.state.fatArrowAt=je.stream.pos+yn[0].length),Xe(ea))):"number"==Pe||"string"==Pe?(je.marked=v?"property":je.style+" property",Xe(ea)):"jsonld-keyword"==Pe?Xe(ea):I&&Pt(Ke)?(je.marked="keyword",Xe(oo)):"["==Pe?Xe(dr,ca,ji("]"),ea):"spread"==Pe?Xe(Fe,ea):"*"==Ke?(je.marked="keyword",Xe(oo)):":"==Pe?Wt(ea):void 0;var yn}function fa(Pe){return"variable"!=Pe?Wt(ea):(je.marked="property",Xe(qn))}function ea(Pe){return":"==Pe?Xe(Fe):"("==Pe?Wt(qn):void 0}function os(Pe,Ke,yn){function An(Rr,vs){if(yn?yn.indexOf(Rr)>-1:","==Rr){var Zi=je.state.lexical;return"call"==Zi.info&&(Zi.pos=(Zi.pos||0)+1),Xe(function(Jn,La){return Jn==Ke||La==Ke?Wt():Wt(Pe)},An)}return Rr==Ke||vs==Ke?Xe():yn&&yn.indexOf(";")>-1?Wt(Pe):Xe(ji(Ke))}return function(Rr,vs){return Rr==Ke||vs==Ke?Xe():Wt(Pe,An)}}function Ls(Pe,Ke,yn){for(var An=3;An<arguments.length;An++)je.cc.push(arguments[An]);return Xe(En(Ke,yn),os(Pe,Ke),Dn)}function vo(Pe){return"}"==Pe?Xe():Wt(ii,vo)}function ca(Pe,Ke){if(I){if(":"==Pe)return Xe($i);if("?"==Ke)return Xe(ca)}}function ja(Pe,Ke){if(I&&(":"==Pe||"in"==Ke))return Xe($i)}function sr(Pe){if(I&&":"==Pe)return je.stream.match(/^\s*\w+\s+is\b/,!1)?Xe(dr,Zu,$i):Xe($i)}function Zu(Pe,Ke){if("is"==Ke)return je.marked="keyword",Xe()}function $i(Pe,Ke){return"keyof"==Ke||"typeof"==Ke||"infer"==Ke||"readonly"==Ke?(je.marked="keyword",Xe("typeof"==Ke?Fe:$i)):"variable"==Pe||"void"==Ke?(je.marked="type",Xe(pe)):"|"==Ke||"&"==Ke?Xe($i):"string"==Pe||"number"==Pe||"atom"==Pe?Xe(pe):"["==Pe?Xe(En("]"),os($i,"]",","),Dn,pe):"{"==Pe?Xe(En("}"),b,Dn,pe):"("==Pe?Xe(os(ne,")"),Is,pe):"<"==Pe?Xe(os($i,">"),$i):"quasi"==Pe?Wt(z,pe):void 0}function Is(Pe){if("=>"==Pe)return Xe($i)}function b(Pe){return Pe.match(/[\}\)\]]/)?Xe():","==Pe||";"==Pe?Xe(b):Wt(k,b)}function k(Pe,Ke){return"variable"==Pe||"keyword"==je.style?(je.marked="property",Xe(k)):"?"==Ke||"number"==Pe||"string"==Pe?Xe(k):":"==Pe?Xe($i):"["==Pe?Xe(ji("variable"),ja,ji("]"),k):"("==Pe?Wt(ei,k):Pe.match(/[;\}\)\],]/)?void 0:Xe()}function z(Pe,Ke){return"quasi"!=Pe?Wt():"${"!=Ke.slice(Ke.length-2)?Xe(z):Xe($i,Y)}function Y(Pe){if("}"==Pe)return je.marked="string-2",je.state.tokenize=Le,Xe(z)}function ne(Pe,Ke){return"variable"==Pe&&je.stream.match(/^\s*[?:]/,!1)||"?"==Ke?Xe(ne):":"==Pe?Xe($i):"spread"==Pe?Xe(ne):Wt($i)}function pe(Pe,Ke){return"<"==Ke?Xe(En(">"),os($i,">"),Dn,pe):"|"==Ke||"."==Pe||"&"==Ke?Xe($i):"["==Pe?Xe($i,ji("]"),pe):"extends"==Ke||"implements"==Ke?(je.marked="keyword",Xe($i)):"?"==Ke?Xe($i,ji(":"),$i):void 0}function Ae(Pe,Ke){if("<"==Ke)return Xe(En(">"),os($i,">"),Dn,pe)}function Ge(){return Wt($i,$e)}function $e(Pe,Ke){if("="==Ke)return Xe($i)}function yt(Pe,Ke){return"enum"==Ke?(je.marked="keyword",Xe(as)):Wt(Mt,ca,qt,sn)}function Mt(Pe,Ke){return I&&Pt(Ke)?(je.marked="keyword",Xe(Mt)):"variable"==Pe?(Jt(Ke),Xe()):"spread"==Pe?Xe(Mt):"["==Pe?Ls(Tt,"]"):"{"==Pe?Ls(tn,"}"):void 0}function tn(Pe,Ke){return"variable"!=Pe||je.stream.match(/^\s*:/,!1)?("variable"==Pe&&(je.marked="property"),"spread"==Pe?Xe(Mt):"}"==Pe?Wt():"["==Pe?Xe(dr,ji("]"),ji(":"),tn):Xe(ji(":"),Mt,qt)):(Jt(Ke),Xe(qt))}function Tt(){return Wt(Mt,qt)}function qt(Pe,Ke){if("="==Ke)return Xe(Fe)}function sn(Pe){if(","==Pe)return Xe(yt)}function Dt(Pe,Ke){if("keyword b"==Pe&&"else"==Ke)return Xe(En("form","else"),ii,Dn)}function nn(Pe,Ke){return"await"==Ke?Xe(nn):"("==Pe?Xe(En(")"),bn,Dn):void 0}function bn(Pe){return"var"==Pe?Xe(yt,ln):"variable"==Pe?Xe(ln):Wt(ln)}function ln(Pe,Ke){return")"==Pe?Xe():";"==Pe?Xe(ln):"in"==Ke||"of"==Ke?(je.marked="keyword",Xe(dr,ln)):Wt(dr,ln)}function qn(Pe,Ke){return"*"==Ke?(je.marked="keyword",Xe(qn)):"variable"==Pe?(Jt(Ke),Xe(qn)):"("==Pe?Xe(en,En(")"),os(Di,")"),Dn,sr,ii,zi):I&&"<"==Ke?Xe(En(">"),os(Ge,">"),Dn,qn):void 0}function ei(Pe,Ke){return"*"==Ke?(je.marked="keyword",Xe(ei)):"variable"==Pe?(Jt(Ke),Xe(ei)):"("==Pe?Xe(en,En(")"),os(Di,")"),Dn,sr,zi):I&&"<"==Ke?Xe(En(">"),os(Ge,">"),Dn,ei):void 0}function Ri(Pe,Ke){return"keyword"==Pe||"variable"==Pe?(je.marked="type",Xe(Ri)):"<"==Ke?Xe(En(">"),os(Ge,">"),Dn):void 0}function Di(Pe,Ke){return"@"==Ke&&Xe(dr,Di),"spread"==Pe?Xe(Di):I&&Pt(Ke)?(je.marked="keyword",Xe(Di)):I&&"this"==Pe?Xe(ca,qt):Wt(Mt,ca,qt)}function Ai(Pe,Ke){return"variable"==Pe?Ii(Pe,Ke):Er(Pe,Ke)}function Ii(Pe,Ke){if("variable"==Pe)return Jt(Ke),Xe(Er)}function Er(Pe,Ke){return"<"==Ke?Xe(En(">"),os(Ge,">"),Dn,Er):"extends"==Ke||"implements"==Ke||I&&","==Pe?("implements"==Ke&&(je.marked="keyword"),Xe(I?$i:dr,Er)):"{"==Pe?Xe(En("}"),Ui,Dn):void 0}function Ui(Pe,Ke){return"async"==Pe||"variable"==Pe&&("static"==Ke||"get"==Ke||"set"==Ke||I&&Pt(Ke))&&je.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(je.marked="keyword",Xe(Ui)):"variable"==Pe||"keyword"==je.style?(je.marked="property",Xe($r,Ui)):"number"==Pe||"string"==Pe?Xe($r,Ui):"["==Pe?Xe(dr,ca,ji("]"),$r,Ui):"*"==Ke?(je.marked="keyword",Xe(Ui)):I&&"("==Pe?Wt(ei,Ui):";"==Pe||","==Pe?Xe(Ui):"}"==Pe?Xe():"@"==Ke?Xe(dr,Ui):void 0}function $r(Pe,Ke){if("!"==Ke||"?"==Ke)return Xe($r);if(":"==Pe)return Xe($i,qt);if("="==Ke)return Xe(Fe);var yn=je.state.lexical.prev;return Wt(yn&&"interface"==yn.info?ei:qn)}function Ur(Pe,Ke){return"*"==Ke?(je.marked="keyword",Xe(Ns,ji(";"))):"default"==Ke?(je.marked="keyword",Xe(dr,ji(";"))):"{"==Pe?Xe(os(oa,"}"),Ns,ji(";")):Wt(ii)}function oa(Pe,Ke){return"as"==Ke?(je.marked="keyword",Xe(ji("variable"))):"variable"==Pe?Wt(Fe,oa):void 0}function rl(Pe){return"string"==Pe?Xe():"("==Pe?Wt(dr):"."==Pe?Wt(nt):Wt($s,Gi,Ns)}function $s(Pe,Ke){return"{"==Pe?Ls($s,"}"):("variable"==Pe&&Jt(Ke),"*"==Ke&&(je.marked="keyword"),Xe(Do))}function Gi(Pe){if(","==Pe)return Xe($s,Gi)}function Do(Pe,Ke){if("as"==Ke)return je.marked="keyword",Xe($s)}function Ns(Pe,Ke){if("from"==Ke)return je.marked="keyword",Xe(dr)}function ua(Pe){return"]"==Pe?Xe():Wt(os(Fe,"]"))}function as(){return Wt(En("form"),Mt,ji("{"),En("}"),os(js,"}"),Dn,Dn)}function js(){return Wt(Mt,qt)}function Pa(Pe,Ke,yn){return Ke.tokenize==ae&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Ke.lastType)||"quasi"==Ke.lastType&&/\{\s*$/.test(Pe.string.slice(0,Pe.pos-(yn||0)))}return en.lex=gr.lex=!0,zi.lex=!0,Dn.lex=!0,{startState:function(Pe){var Ke={tokenize:ae,lastType:"sof",cc:[],lexical:new qe((Pe||0)-_,0,"block",!1),localVars:d.localVars,context:d.localVars&&new Lt(null,null,!1),indented:Pe||0};return d.globalVars&&"object"==typeof d.globalVars&&(Ke.globalVars=d.globalVars),Ke},token:function(Pe,Ke){if(Pe.sol()&&(Ke.lexical.hasOwnProperty("align")||(Ke.lexical.align=!1),Ke.indented=Pe.indentation(),ce(Pe,Ke)),Ke.tokenize!=Ce&&Pe.eatSpace())return null;var yn=Ke.tokenize(Pe,Ke);return"comment"==re?yn:(Ke.lastType="operator"!=re||"++"!=he&&"--"!=he?re:"incdec",De(Ke,yn,re,he,Pe))},indent:function(Pe,Ke){if(Pe.tokenize==Ce||Pe.tokenize==Le)return y.Pass;if(Pe.tokenize!=ae)return 0;var Rr,yn=Ke&&Ke.charAt(0),An=Pe.lexical;if(!/^\s*else\b/.test(Ke))for(var vs=Pe.cc.length-1;vs>=0;--vs){var Zi=Pe.cc[vs];if(Zi==Dn)An=An.prev;else if(Zi!=Dt&&Zi!=zi)break}for(;("stat"==An.type||"form"==An.type)&&("}"==yn||(Rr=Pe.cc[Pe.cc.length-1])&&(Rr==nt||Rr==zt)&&!/^[,\.=+\-*:?[\(]/.test(Ke));)An=An.prev;p&&")"==An.type&&"stat"==An.prev.type&&(An=An.prev);var Jn=An.type,La=yn==Jn;return"vardef"==Jn?An.indented+("operator"==Pe.lastType||","==Pe.lastType?An.info.length+1:0):"form"==Jn&&"{"==yn?An.indented:"form"==Jn?An.indented+_:"stat"==Jn?An.indented+(function Ao(Pe,Ke){return"operator"==Pe.lastType||","==Pe.lastType||U.test(Ke.charAt(0))||/[,.]/.test(Ke.charAt(0))}(Pe,Ke)?p||_:0):"switch"!=An.info||La||0==d.doubleIndentSwitch?An.align?An.column+(La?0:1):An.indented+(La?0:_):An.indented+(/^(?:case|default)\b/.test(Ke)?_:2*_)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:C?null:"/*",blockCommentEnd:C?null:"*/",blockCommentContinue:C?null:" * ",lineComment:C?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:C?"json":"javascript",jsonldMode:v,jsonMode:C,expressionAllowed:Pa,skipExpression:function(Pe){De(Pe,"atom","atom","true",new y.StringStream("",2,null))}}}),y.registerHelper("wordChars","javascript",/[\w$]/),y.defineMIME("text/javascript","javascript"),y.defineMIME("text/ecmascript","javascript"),y.defineMIME("application/javascript","javascript"),y.defineMIME("application/x-javascript","javascript"),y.defineMIME("application/ecmascript","javascript"),y.defineMIME("application/json",{name:"javascript",json:!0}),y.defineMIME("application/x-json",{name:"javascript",json:!0}),y.defineMIME("application/manifest+json",{name:"javascript",json:!0}),y.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),y.defineMIME("text/typescript",{name:"javascript",typescript:!0}),y.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(A(266))},391:(K,G,A)=>{A(200),A(879),A(378),K.exports=A(713)},713:(K,G,A)=>{var y=A(259);K.exports=y,function(l){l.ui=l.ui||{},l.ui.version="1.12.1";var b,_=0,p=Array.prototype.slice;l.cleanData=(b=l.cleanData,function(k){var z,Y,ne;for(ne=0;null!=(Y=k[ne]);ne++)try{(z=l._data(Y,"events"))&&z.remove&&l(Y).triggerHandler("remove")}catch(pe){}b(k)}),l.widget=function(b,k,z){var Y,ne,pe,Ae={},Ge=b.split(".")[0],$e=Ge+"-"+(b=b.split(".")[1]);return z||(z=k,k=l.Widget),l.isArray(z)&&(z=l.extend.apply(null,[{}].concat(z))),l.expr[":"][$e.toLowerCase()]=function(yt){return!!l.data(yt,$e)},l[Ge]=l[Ge]||{},Y=l[Ge][b],ne=l[Ge][b]=function(yt,Mt){if(!this._createWidget)return new ne(yt,Mt);arguments.length&&this._createWidget(yt,Mt)},l.extend(ne,Y,{version:z.version,_proto:l.extend({},z),_childConstructors:[]}),(pe=new k).options=l.widget.extend({},pe.options),l.each(z,function(yt,Mt){Ae[yt]=l.isFunction(Mt)?function(){function tn(){return k.prototype[yt].apply(this,arguments)}function Tt(qt){return k.prototype[yt].apply(this,qt)}return function(){var Dt,qt=this._super,sn=this._superApply;return this._super=tn,this._superApply=Tt,Dt=Mt.apply(this,arguments),this._super=qt,this._superApply=sn,Dt}}():Mt}),ne.prototype=l.widget.extend(pe,{widgetEventPrefix:Y&&pe.widgetEventPrefix||b},Ae,{constructor:ne,namespace:Ge,widgetName:b,widgetFullName:$e}),Y?(l.each(Y._childConstructors,function(yt,Mt){var tn=Mt.prototype;l.widget(tn.namespace+"."+tn.widgetName,ne,Mt._proto)}),delete Y._childConstructors):k._childConstructors.push(ne),l.widget.bridge(b,ne),ne},l.widget.extend=function(b){for(var ne,pe,k=p.call(arguments,1),z=0,Y=k.length;z<Y;z++)for(ne in k[z])pe=k[z][ne],k[z].hasOwnProperty(ne)&&void 0!==pe&&(b[ne]=l.isPlainObject(pe)?l.isPlainObject(b[ne])?l.widget.extend({},b[ne],pe):l.widget.extend({},pe):pe);return b},l.widget.bridge=function(b,k){var z=k.prototype.widgetFullName||b;l.fn[b]=function(Y){var ne="string"==typeof Y,pe=p.call(arguments,1),Ae=this;return ne?this.length||"instance"!==Y?this.each(function(){var Ge,$e=l.data(this,z);return"instance"===Y?(Ae=$e,!1):$e?l.isFunction($e[Y])&&"_"!==Y.charAt(0)?(Ge=$e[Y].apply($e,pe))!==$e&&void 0!==Ge?(Ae=Ge&&Ge.jquery?Ae.pushStack(Ge.get()):Ge,!1):void 0:l.error("no such method '"+Y+"' for "+b+" widget instance"):l.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+Y+"'")}):Ae=void 0:(pe.length&&(Y=l.widget.extend.apply(null,[Y].concat(pe))),this.each(function(){var Ge=l.data(this,z);Ge?(Ge.option(Y||{}),Ge._init&&Ge._init()):l.data(this,z,new k(Y,this))})),Ae}},l.Widget=function(){},l.Widget._childConstructors=[],l.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(b,k){k=l(k||this.defaultElement||this)[0],this.element=l(k),this.uuid=_++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=l(),this.hoverable=l(),this.focusable=l(),this.classesElementLookup={},k!==this&&(l.data(k,this.widgetFullName,this),this._on(!0,this.element,{remove:function(z){z.target===k&&this.destroy()}}),this.document=l(k.style?k.ownerDocument:k.document||k),this.window=l(this.document[0].defaultView||this.document[0].parentWindow)),this.options=l.widget.extend({},this.options,this._getCreateOptions(),b),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:l.noop,_create:l.noop,_init:l.noop,destroy:function(){var b=this;this._destroy(),l.each(this.classesElementLookup,function(k,z){b._removeClass(z,k)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:l.noop,widget:function(){return this.element},option:function(b,k){var Y,ne,pe,z=b;if(0===arguments.length)return l.widget.extend({},this.options);if("string"==typeof b)if(z={},Y=b.split("."),b=Y.shift(),Y.length){for(ne=z[b]=l.widget.extend({},this.options[b]),pe=0;pe<Y.length-1;pe++)ne[Y[pe]]=ne[Y[pe]]||{},ne=ne[Y[pe]];if(b=Y.pop(),1===arguments.length)return void 0===ne[b]?null:ne[b];ne[b]=k}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];z[b]=k}return this._setOptions(z),this},_setOptions:function(b){var k;for(k in b)this._setOption(k,b[k]);return this},_setOption:function(b,k){return"classes"===b&&this._setOptionClasses(k),this.options[b]=k,"disabled"===b&&this._setOptionDisabled(k),this},_setOptionClasses:function(b){var k,z,Y;for(k in b)Y=this.classesElementLookup[k],b[k]!==this.options.classes[k]&&Y&&Y.length&&(z=l(Y.get()),this._removeClass(Y,k),z.addClass(this._classes({element:z,keys:k,classes:b,add:!0})))},_setOptionDisabled:function(b){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!b),b&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(b){var k=[],z=this;function Y(ne,pe){var Ae,Ge;for(Ge=0;Ge<ne.length;Ge++)Ae=z.classesElementLookup[ne[Ge]]||l(),Ae=l(b.add?l.unique(Ae.get().concat(b.element.get())):Ae.not(b.element).get()),z.classesElementLookup[ne[Ge]]=Ae,k.push(ne[Ge]),pe&&b.classes[ne[Ge]]&&k.push(b.classes[ne[Ge]])}return b=l.extend({element:this.element,classes:this.options.classes||{}},b),this._on(b.element,{remove:"_untrackClassesElement"}),b.keys&&Y(b.keys.match(/\S+/g)||[],!0),b.extra&&Y(b.extra.match(/\S+/g)||[]),k.join(" ")},_untrackClassesElement:function(b){var k=this;l.each(k.classesElementLookup,function(z,Y){-1!==l.inArray(b.target,Y)&&(k.classesElementLookup[z]=l(Y.not(b.target).get()))})},_removeClass:function(b,k,z){return this._toggleClass(b,k,z,!1)},_addClass:function(b,k,z){return this._toggleClass(b,k,z,!0)},_toggleClass:function(b,k,z,Y){var ne="string"==typeof b||null===b,pe={extra:ne?k:z,keys:ne?b:k,element:ne?this.element:b,add:Y="boolean"==typeof Y?Y:z};return pe.element.toggleClass(this._classes(pe),Y),this},_on:function(b,k,z){var Y,ne=this;"boolean"!=typeof b&&(z=k,k=b,b=!1),z?(k=Y=l(k),this.bindings=this.bindings.add(k)):(z=k,k=this.element,Y=this.widget()),l.each(z,function(pe,Ae){function Ge(){if(b||!0!==ne.options.disabled&&!l(this).hasClass("ui-state-disabled"))return("string"==typeof Ae?ne[Ae]:Ae).apply(ne,arguments)}"string"!=typeof Ae&&(Ge.guid=Ae.guid=Ae.guid||Ge.guid||l.guid++);var $e=pe.match(/^([\w:-]*)\s*(.*)$/),yt=$e[1]+ne.eventNamespace,Mt=$e[2];Mt?Y.on(yt,Mt,Ge):k.on(yt,Ge)})},_off:function(b,k){k=(k||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,b.off(k).off(k),this.bindings=l(this.bindings.not(b).get()),this.focusable=l(this.focusable.not(b).get()),this.hoverable=l(this.hoverable.not(b).get())},_delay:function(b,k){var Y=this;return setTimeout(function z(){return("string"==typeof b?Y[b]:b).apply(Y,arguments)},k||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(k){this._addClass(l(k.currentTarget),null,"ui-state-hover")},mouseleave:function(k){this._removeClass(l(k.currentTarget),null,"ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(k){this._addClass(l(k.currentTarget),null,"ui-state-focus")},focusout:function(k){this._removeClass(l(k.currentTarget),null,"ui-state-focus")}})},_trigger:function(b,k,z){var Y,ne,pe=this.options[b];if(z=z||{},(k=l.Event(k)).type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),k.target=this.element[0],ne=k.originalEvent)for(Y in ne)Y in k||(k[Y]=ne[Y]);return this.element.trigger(k,z),!(l.isFunction(pe)&&!1===pe.apply(this.element[0],[k].concat(z))||k.isDefaultPrevented())}},l.each({show:"fadeIn",hide:"fadeOut"},function(b,k){l.Widget.prototype["_"+b]=function(z,Y,ne){"string"==typeof Y&&(Y={effect:Y});var pe,Ae=Y?!0===Y||"number"==typeof Y?k:Y.effect||k:b;"number"==typeof(Y=Y||{})&&(Y={duration:Y}),pe=!l.isEmptyObject(Y),Y.complete=ne,Y.delay&&z.delay(Y.delay),pe&&l.effects&&l.effects.effect[Ae]?z[b](Y):Ae!==b&&z[Ae]?z[Ae](Y.duration,Y.easing,ne):z.queue(function(Ge){l(this)[b](),ne&&ne.call(z[0]),Ge()})}}),function(){var b,k=Math.max,z=Math.abs,Y=/left|center|right/,ne=/top|center|bottom/,pe=/[\+\-]\d+(\.[\d]+)?%?/,Ae=/^\w+/,Ge=/%$/,$e=l.fn.position;function yt(Tt,qt,sn){return[parseFloat(Tt[0])*(Ge.test(Tt[0])?qt/100:1),parseFloat(Tt[1])*(Ge.test(Tt[1])?sn/100:1)]}function Mt(Tt,qt){return parseInt(l.css(Tt,qt),10)||0}function tn(Tt){var qt=Tt[0];return 9===qt.nodeType?{width:Tt.width(),height:Tt.height(),offset:{top:0,left:0}}:l.isWindow(qt)?{width:Tt.width(),height:Tt.height(),offset:{top:Tt.scrollTop(),left:Tt.scrollLeft()}}:qt.preventDefault?{width:0,height:0,offset:{top:qt.pageY,left:qt.pageX}}:{width:Tt.outerWidth(),height:Tt.outerHeight(),offset:Tt.offset()}}l.position={scrollbarWidth:function(){if(void 0!==b)return b;var Tt,qt,sn=l("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),Dt=sn.children()[0];return l("body").append(sn),Tt=Dt.offsetWidth,sn.css("overflow","scroll"),Tt===(qt=Dt.offsetWidth)&&(qt=sn[0].clientWidth),sn.remove(),b=Tt-qt},getScrollInfo:function(Tt){var qt=Tt.isWindow||Tt.isDocument?"":Tt.element.css("overflow-x"),sn=Tt.isWindow||Tt.isDocument?"":Tt.element.css("overflow-y"),Dt="scroll"===qt||"auto"===qt&&Tt.width<Tt.element[0].scrollWidth;return{width:"scroll"===sn||"auto"===sn&&Tt.height<Tt.element[0].scrollHeight?l.position.scrollbarWidth():0,height:Dt?l.position.scrollbarWidth():0}},getWithinInfo:function(Tt){var qt=l(Tt||window),sn=l.isWindow(qt[0]),Dt=!!qt[0]&&9===qt[0].nodeType;return{element:qt,isWindow:sn,isDocument:Dt,offset:sn||Dt?{left:0,top:0}:l(Tt).offset(),scrollLeft:qt.scrollLeft(),scrollTop:qt.scrollTop(),width:qt.outerWidth(),height:qt.outerHeight()}}},l.fn.position=function(Tt){if(!Tt||!Tt.of)return $e.apply(this,arguments);Tt=l.extend({},Tt);var qt,sn,Dt,nn,bn,ln,qn=l(Tt.of),ei=l.position.getWithinInfo(Tt.within),Ri=l.position.getScrollInfo(ei),Di=(Tt.collision||"flip").split(" "),Ai={};return ln=tn(qn),qn[0].preventDefault&&(Tt.at="left top"),sn=ln.width,Dt=ln.height,bn=l.extend({},nn=ln.offset),l.each(["my","at"],function(){var Er,Ui,Ii=(Tt[this]||"").split(" ");1===Ii.length&&(Ii=Y.test(Ii[0])?Ii.concat(["center"]):ne.test(Ii[0])?["center"].concat(Ii):["center","center"]),Ii[0]=Y.test(Ii[0])?Ii[0]:"center",Ii[1]=ne.test(Ii[1])?Ii[1]:"center",Er=pe.exec(Ii[0]),Ui=pe.exec(Ii[1]),Ai[this]=[Er?Er[0]:0,Ui?Ui[0]:0],Tt[this]=[Ae.exec(Ii[0])[0],Ae.exec(Ii[1])[0]]}),1===Di.length&&(Di[1]=Di[0]),"right"===Tt.at[0]?bn.left+=sn:"center"===Tt.at[0]&&(bn.left+=sn/2),"bottom"===Tt.at[1]?bn.top+=Dt:"center"===Tt.at[1]&&(bn.top+=Dt/2),qt=yt(Ai.at,sn,Dt),bn.left+=qt[0],bn.top+=qt[1],this.each(function(){var Ii,Er,Ui=l(this),$r=Ui.outerWidth(),Ur=Ui.outerHeight(),oa=Mt(this,"marginLeft"),rl=Mt(this,"marginTop"),$s=$r+oa+Mt(this,"marginRight")+Ri.width,Gi=Ur+rl+Mt(this,"marginBottom")+Ri.height,Do=l.extend({},bn),Ns=yt(Ai.my,Ui.outerWidth(),Ui.outerHeight());"right"===Tt.my[0]?Do.left-=$r:"center"===Tt.my[0]&&(Do.left-=$r/2),"bottom"===Tt.my[1]?Do.top-=Ur:"center"===Tt.my[1]&&(Do.top-=Ur/2),Do.left+=Ns[0],Do.top+=Ns[1],Ii={marginLeft:oa,marginTop:rl},l.each(["left","top"],function(ua,as){l.ui.position[Di[ua]]&&l.ui.position[Di[ua]][as](Do,{targetWidth:sn,targetHeight:Dt,elemWidth:$r,elemHeight:Ur,collisionPosition:Ii,collisionWidth:$s,collisionHeight:Gi,offset:[qt[0]+Ns[0],qt[1]+Ns[1]],my:Tt.my,at:Tt.at,within:ei,elem:Ui})}),Tt.using&&(Er=function(ua){var as=nn.left-Do.left,js=as+sn-$r,Ao=nn.top-Do.top,Pa=Ao+Dt-Ur,Pe={target:{element:qn,left:nn.left,top:nn.top,width:sn,height:Dt},element:{element:Ui,left:Do.left,top:Do.top,width:$r,height:Ur},horizontal:js<0?"left":as>0?"right":"center",vertical:Pa<0?"top":Ao>0?"bottom":"middle"};sn<$r&&z(as+js)<sn&&(Pe.horizontal="center"),Dt<Ur&&z(Ao+Pa)<Dt&&(Pe.vertical="middle"),Pe.important=k(z(as),z(js))>k(z(Ao),z(Pa))?"horizontal":"vertical",Tt.using.call(this,ua,Pe)}),Ui.offset(l.extend(Do,{using:Er}))})},l.ui.position={fit:{left:function(Tt,qt){var sn=qt.within,Dt=sn.isWindow?sn.scrollLeft:sn.offset.left,nn=sn.width,bn=Tt.left-qt.collisionPosition.marginLeft,ln=Dt-bn,qn=bn+qt.collisionWidth-nn-Dt;qt.collisionWidth>nn?ln>0&&qn<=0?Tt.left+=ln-(Tt.left+ln+qt.collisionWidth-nn-Dt):Tt.left=qn>0&&ln<=0?Dt:ln>qn?Dt+nn-qt.collisionWidth:Dt:ln>0?Tt.left+=ln:qn>0?Tt.left-=qn:Tt.left=k(Tt.left-bn,Tt.left)},top:function(Tt,qt){var sn=qt.within,Dt=sn.isWindow?sn.scrollTop:sn.offset.top,nn=qt.within.height,bn=Tt.top-qt.collisionPosition.marginTop,ln=Dt-bn,qn=bn+qt.collisionHeight-nn-Dt;qt.collisionHeight>nn?ln>0&&qn<=0?Tt.top+=ln-(Tt.top+ln+qt.collisionHeight-nn-Dt):Tt.top=qn>0&&ln<=0?Dt:ln>qn?Dt+nn-qt.collisionHeight:Dt:ln>0?Tt.top+=ln:qn>0?Tt.top-=qn:Tt.top=k(Tt.top-bn,Tt.top)}},flip:{left:function(Tt,qt){var Ii,Er,sn=qt.within,nn=sn.width,bn=sn.isWindow?sn.scrollLeft:sn.offset.left,ln=Tt.left-qt.collisionPosition.marginLeft,qn=ln-bn,ei=ln+qt.collisionWidth-nn-bn,Ri="left"===qt.my[0]?-qt.elemWidth:"right"===qt.my[0]?qt.elemWidth:0,Di="left"===qt.at[0]?qt.targetWidth:"right"===qt.at[0]?-qt.targetWidth:0,Ai=-2*qt.offset[0];qn<0?((Ii=Tt.left+Ri+Di+Ai+qt.collisionWidth-nn-(sn.offset.left+sn.scrollLeft))<0||Ii<z(qn))&&(Tt.left+=Ri+Di+Ai):ei>0&&((Er=Tt.left-qt.collisionPosition.marginLeft+Ri+Di+Ai-bn)>0||z(Er)<ei)&&(Tt.left+=Ri+Di+Ai)},top:function(Tt,qt){var Er,Ui,sn=qt.within,nn=sn.height,bn=sn.isWindow?sn.scrollTop:sn.offset.top,ln=Tt.top-qt.collisionPosition.marginTop,qn=ln-bn,ei=ln+qt.collisionHeight-nn-bn,Di="top"===qt.my[1]?-qt.elemHeight:"bottom"===qt.my[1]?qt.elemHeight:0,Ai="top"===qt.at[1]?qt.targetHeight:"bottom"===qt.at[1]?-qt.targetHeight:0,Ii=-2*qt.offset[1];qn<0?((Ui=Tt.top+Di+Ai+Ii+qt.collisionHeight-nn-(sn.offset.top+sn.scrollTop))<0||Ui<z(qn))&&(Tt.top+=Di+Ai+Ii):ei>0&&((Er=Tt.top-qt.collisionPosition.marginTop+Di+Ai+Ii-bn)>0||z(Er)<ei)&&(Tt.top+=Di+Ai+Ii)}},flipfit:{left:function(){l.ui.position.flip.left.apply(this,arguments),l.ui.position.fit.left.apply(this,arguments)},top:function(){l.ui.position.flip.top.apply(this,arguments),l.ui.position.fit.top.apply(this,arguments)}}}}(),l.extend(l.expr[":"],{data:l.expr.createPseudo?l.expr.createPseudo(function(b){return function(k){return!!l.data(k,b)}}):function(b,k,z){return!!l.data(b,z[3])}}),l.fn.extend({disableSelection:function(){var b="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(b+".ui-disableSelection",function(k){k.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),l.ui.focusable=function(b,k){var z,Y,ne,pe,Ae,Ge=b.nodeName.toLowerCase();return"area"===Ge?(Y=(z=b.parentNode).name,!(!b.href||!Y||"map"!==z.nodeName.toLowerCase())&&(ne=l("img[usemap='#"+Y+"']")).length>0&&ne.is(":visible")):(/^(input|select|textarea|button|object)$/.test(Ge)?(pe=!b.disabled)&&(Ae=l(b).closest("fieldset")[0])&&(pe=!Ae.disabled):pe="a"===Ge&&b.href||k,pe&&l(b).is(":visible")&&function P(b){for(var k=b.css("visibility");"inherit"===k;)k=(b=b.parent()).css("visibility");return"hidden"!==k}(l(b)))},l.extend(l.expr[":"],{focusable:function(b){return l.ui.focusable(b,null!=l.attr(b,"tabindex"))}}),l.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):l(this[0].form)},l.ui.formResetMixin={_formResetHandler:function(){var b=l(this);setTimeout(function(){var k=b.data("ui-form-reset-instances");l.each(k,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var b=this.form.data("ui-form-reset-instances")||[];b.length||this.form.on("reset.ui-form-reset",this._formResetHandler),b.push(this),this.form.data("ui-form-reset-instances",b)}},_unbindFormResetHandler:function(){if(this.form.length){var b=this.form.data("ui-form-reset-instances");b.splice(l.inArray(this,b),1),b.length?this.form.data("ui-form-reset-instances",b):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}},"1.7"===l.fn.jquery.substring(0,3)&&(l.each(["Width","Height"],function(b,k){var z="Width"===k?["Left","Right"]:["Top","Bottom"],Y=k.toLowerCase(),ne={innerWidth:l.fn.innerWidth,innerHeight:l.fn.innerHeight,outerWidth:l.fn.outerWidth,outerHeight:l.fn.outerHeight};function pe(Ae,Ge,$e,yt){return l.each(z,function(){Ge-=parseFloat(l.css(Ae,"padding"+this))||0,$e&&(Ge-=parseFloat(l.css(Ae,"border"+this+"Width"))||0),yt&&(Ge-=parseFloat(l.css(Ae,"margin"+this))||0)}),Ge}l.fn["inner"+k]=function(Ae){return void 0===Ae?ne["inner"+k].call(this):this.each(function(){l(this).css(Y,pe(this,Ae)+"px")})},l.fn["outer"+k]=function(Ae,Ge){return"number"!=typeof Ae?ne["outer"+k].call(this,Ae):this.each(function(){l(this).css(Y,pe(this,Ae,!0,Ge)+"px")})}}),l.fn.addBack=function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))}),l.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},l.ui.escapeSelector=function(){var b=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g;return function(k){return k.replace(b,"\\$1")}}(),l.fn.labels=function(){var b,k,z,Y,ne;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(Y=this.eq(0).parents("label"),(z=this.attr("id"))&&(ne=(b=this.eq(0).parents().last()).add(b.length?b.siblings():this.siblings()),k="label[for='"+l.ui.escapeSelector(z)+"']",Y=Y.add(ne.find(k).addBack(k))),this.pushStack(Y))},l.fn.scrollParent=function(b){var k=this.css("position"),z="absolute"===k,Y=b?/(auto|scroll|hidden)/:/(auto|scroll)/,ne=this.parents().filter(function(){var pe=l(this);return(!z||"static"!==pe.css("position"))&&Y.test(pe.css("overflow")+pe.css("overflow-y")+pe.css("overflow-x"))}).eq(0);return"fixed"!==k&&ne.length?ne:l(this[0].ownerDocument||document)},l.extend(l.expr[":"],{tabbable:function(b){var k=l.attr(b,"tabindex"),z=null!=k;return(!z||k>=0)&&l.ui.focusable(b,z)}}),l.fn.extend({uniqueId:function(){var b=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++b)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&l(this).removeAttr("id")})}}),l.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var Le=!1;l(document).on("mouseup",function(){Le=!1}),l.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.on("mousedown."+this.widgetName,function(k){return b._mouseDown(k)}).on("click."+this.widgetName,function(k){if(!0===l.data(k.target,b.widgetName+".preventClickEvent"))return l.removeData(k.target,b.widgetName+".preventClickEvent"),k.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!Le){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var k=this,z=1===b.which,Y=!("string"!=typeof this.options.cancel||!b.target.nodeName)&&l(b.target).closest(this.options.cancel).length;return!(z&&!Y&&this._mouseCapture(b)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){k.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted)?(b.preventDefault(),0):(!0===l.data(b.target,this.widgetName+".preventClickEvent")&&l.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(ne){return k._mouseMove(ne)},this._mouseUpDelegate=function(ne){return k._mouseUp(ne)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),Le=!0,0)))}},_mouseMove:function(b){if(this._mouseMoved){if(l.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button)return this._mouseUp(b);if(!b.which)if(b.originalEvent.altKey||b.originalEvent.ctrlKey||b.originalEvent.metaKey||b.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(b)}return(b.which||b.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b),this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&l.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,Le=!1,b.preventDefault()},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),l.ui.plugin={add:function(b,k,z){var Y,ne=l.ui[b].prototype;for(Y in z)ne.plugins[Y]=ne.plugins[Y]||[],ne.plugins[Y].push([k,z[Y]])},call:function(b,k,z,Y){var ne,pe=b.plugins[k];if(pe&&(Y||b.element[0].parentNode&&11!==b.element[0].parentNode.nodeType))for(ne=0;ne<pe.length;ne++)b.options[pe[ne][0]]&&pe[ne][1].apply(b.element,z)}},l.ui.safeActiveElement=function(b){var k;try{k=b.activeElement}catch(z){k=b.body}return k||(k=b.body),k.nodeName||(k=b.body),k},l.ui.safeBlur=function(b){b&&"body"!==b.nodeName.toLowerCase()&&l(b).trigger("blur")},l.widget("ui.draggable",l.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(b,k){this._super(b,k),"handle"===b&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(b){var k=this.options;return!(this.helper||k.disabled||l(b.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(b),!this.handle)||(this._blurActiveElement(b),this._blockFrames(!0===k.iframeFix?"iframe":k.iframeFix),0))},_blockFrames:function(b){this.iframeBlocks=this.document.find(b).map(function(){var k=l(this);return l("<div>").css("position","absolute").appendTo(k.parent()).outerWidth(k.outerWidth()).outerHeight(k.outerHeight()).offset(k.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(b){var k=l.ui.safeActiveElement(this.document[0]);l(b.target).closest(k).length||l.ui.safeBlur(k)},_mouseStart:function(b){var k=this.options;return this.helper=this._createHelper(b),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),l.ui.ddmanager&&(l.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===l(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(b),this.originalPosition=this.position=this._generatePosition(b,!1),this.originalPageX=b.pageX,this.originalPageY=b.pageY,k.cursorAt&&this._adjustOffsetFromHelper(k.cursorAt),this._setContainment(),!1===this._trigger("start",b)?(this._clear(),!1):(this._cacheHelperProportions(),l.ui.ddmanager&&!k.dropBehaviour&&l.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),l.ui.ddmanager&&l.ui.ddmanager.dragStart(this,b),!0)},_refreshOffsets:function(b){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:b.pageX-this.offset.left,top:b.pageY-this.offset.top}},_mouseDrag:function(b,k){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b,!0),this.positionAbs=this._convertPositionTo("absolute"),!k){var z=this._uiHash();if(!1===this._trigger("drag",b,z))return this._mouseUp(new l.Event("mouseup",b)),!1;this.position=z.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",l.ui.ddmanager&&l.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var k=this,z=!1;return l.ui.ddmanager&&!this.options.dropBehaviour&&(z=l.ui.ddmanager.drop(this,b)),this.dropped&&(z=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!z||"valid"===this.options.revert&&z||!0===this.options.revert||l.isFunction(this.options.revert)&&this.options.revert.call(this.element,z)?l(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==k._trigger("stop",b)&&k._clear()}):!1!==this._trigger("stop",b)&&this._clear(),!1},_mouseUp:function(b){return this._unblockFrames(),l.ui.ddmanager&&l.ui.ddmanager.dragStop(this,b),this.handleElement.is(b.target)&&this.element.trigger("focus"),l.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new l.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(b){return!this.options.handle||!!l(b.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(b){var k=this.options,z=l.isFunction(k.helper),Y=z?l(k.helper.apply(this.element[0],[b])):"clone"===k.helper?this.element.clone().removeAttr("id"):this.element;return Y.parents("body").length||Y.appendTo("parent"===k.appendTo?this.element[0].parentNode:k.appendTo),z&&Y[0]===this.element[0]&&this._setPositionRelative(),Y[0]!==this.element[0]&&!/(fixed|absolute)/.test(Y.css("position"))&&Y.css("position","absolute"),Y},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),l.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(b){return/(html|body)/i.test(b.tagName)||b===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&l.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var b=this.element.position(),k=this._isRootNode(this.scrollParent[0]);return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+(k?0:this.scrollParent.scrollTop()),left:b.left-(parseInt(this.helper.css("left"),10)||0)+(k?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,k,z,Y=this.options,ne=this.document[0];this.relativeContainer=null,Y.containment?"window"!==Y.containment?"document"!==Y.containment?Y.containment.constructor!==Array?("parent"===Y.containment&&(Y.containment=this.helper[0].parentNode),(z=(k=l(Y.containment))[0])&&(b=/(scroll|auto)/.test(k.css("overflow")),this.containment=[(parseInt(k.css("borderLeftWidth"),10)||0)+(parseInt(k.css("paddingLeft"),10)||0),(parseInt(k.css("borderTopWidth"),10)||0)+(parseInt(k.css("paddingTop"),10)||0),(b?Math.max(z.scrollWidth,z.offsetWidth):z.offsetWidth)-(parseInt(k.css("borderRightWidth"),10)||0)-(parseInt(k.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(z.scrollHeight,z.offsetHeight):z.offsetHeight)-(parseInt(k.css("borderBottomWidth"),10)||0)-(parseInt(k.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=k)):this.containment=Y.containment:this.containment=[0,0,l(ne).width()-this.helperProportions.width-this.margins.left,(l(ne).height()||ne.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[l(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,l(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,l(window).scrollLeft()+l(window).width()-this.helperProportions.width-this.margins.left,l(window).scrollTop()+(l(window).height()||ne.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(b,k){k||(k=this.position);var z="absolute"===b?1:-1,Y=this._isRootNode(this.scrollParent[0]);return{top:k.top+this.offset.relative.top*z+this.offset.parent.top*z-("fixed"===this.cssPosition?-this.offset.scroll.top:Y?0:this.offset.scroll.top)*z,left:k.left+this.offset.relative.left*z+this.offset.parent.left*z-("fixed"===this.cssPosition?-this.offset.scroll.left:Y?0:this.offset.scroll.left)*z}},_generatePosition:function(b,k){var z,Y,ne,pe,Ae=this.options,Ge=this._isRootNode(this.scrollParent[0]),$e=b.pageX,yt=b.pageY;return(!Ge||!this.offset.scroll)&&(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),k&&(this.containment&&(this.relativeContainer?(Y=this.relativeContainer.offset(),z=[this.containment[0]+Y.left,this.containment[1]+Y.top,this.containment[2]+Y.left,this.containment[3]+Y.top]):z=this.containment,b.pageX-this.offset.click.left<z[0]&&($e=z[0]+this.offset.click.left),b.pageY-this.offset.click.top<z[1]&&(yt=z[1]+this.offset.click.top),b.pageX-this.offset.click.left>z[2]&&($e=z[2]+this.offset.click.left),b.pageY-this.offset.click.top>z[3]&&(yt=z[3]+this.offset.click.top)),Ae.grid&&(ne=Ae.grid[1]?this.originalPageY+Math.round((yt-this.originalPageY)/Ae.grid[1])*Ae.grid[1]:this.originalPageY,yt=z?ne-this.offset.click.top>=z[1]||ne-this.offset.click.top>z[3]?ne:ne-this.offset.click.top>=z[1]?ne-Ae.grid[1]:ne+Ae.grid[1]:ne,pe=Ae.grid[0]?this.originalPageX+Math.round(($e-this.originalPageX)/Ae.grid[0])*Ae.grid[0]:this.originalPageX,$e=z?pe-this.offset.click.left>=z[0]||pe-this.offset.click.left>z[2]?pe:pe-this.offset.click.left>=z[0]?pe-Ae.grid[0]:pe+Ae.grid[0]:pe),"y"===Ae.axis&&($e=this.originalPageX),"x"===Ae.axis&&(yt=this.originalPageY)),{top:yt-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:Ge?0:this.offset.scroll.top),left:$e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:Ge?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(b,k,z){return z=z||this._uiHash(),l.ui.plugin.call(this,b,[k,z,this],!0),/^(drag|start|stop)/.test(b)&&(this.positionAbs=this._convertPositionTo("absolute"),z.offset=this.positionAbs),l.Widget.prototype._trigger.call(this,b,k,z)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),l.ui.plugin.add("draggable","connectToSortable",{start:function(b,k,z){var Y=l.extend({},k,{item:z.element});z.sortables=[],l(z.options.connectToSortable).each(function(){var ne=l(this).sortable("instance");ne&&!ne.options.disabled&&(z.sortables.push(ne),ne.refreshPositions(),ne._trigger("activate",b,Y))})},stop:function(b,k,z){var Y=l.extend({},k,{item:z.element});z.cancelHelperRemoval=!1,l.each(z.sortables,function(){var ne=this;ne.isOver?(ne.isOver=0,z.cancelHelperRemoval=!0,ne.cancelHelperRemoval=!1,ne._storedCSS={position:ne.placeholder.css("position"),top:ne.placeholder.css("top"),left:ne.placeholder.css("left")},ne._mouseStop(b),ne.options.helper=ne.options._helper):(ne.cancelHelperRemoval=!0,ne._trigger("deactivate",b,Y))})},drag:function(b,k,z){l.each(z.sortables,function(){var Y=!1,ne=this;ne.positionAbs=z.positionAbs,ne.helperProportions=z.helperProportions,ne.offset.click=z.offset.click,ne._intersectsWith(ne.containerCache)&&(Y=!0,l.each(z.sortables,function(){return this.positionAbs=z.positionAbs,this.helperProportions=z.helperProportions,this.offset.click=z.offset.click,this!==ne&&this._intersectsWith(this.containerCache)&&l.contains(ne.element[0],this.element[0])&&(Y=!1),Y})),Y?(ne.isOver||(ne.isOver=1,z._parent=k.helper.parent(),ne.currentItem=k.helper.appendTo(ne.element).data("ui-sortable-item",!0),ne.options._helper=ne.options.helper,ne.options.helper=function(){return k.helper[0]},b.target=ne.currentItem[0],ne._mouseCapture(b,!0),ne._mouseStart(b,!0,!0),ne.offset.click.top=z.offset.click.top,ne.offset.click.left=z.offset.click.left,ne.offset.parent.left-=z.offset.parent.left-ne.offset.parent.left,ne.offset.parent.top-=z.offset.parent.top-ne.offset.parent.top,z._trigger("toSortable",b),z.dropped=ne.element,l.each(z.sortables,function(){this.refreshPositions()}),z.currentItem=z.element,ne.fromOutside=z),ne.currentItem&&(ne._mouseDrag(b),k.position=ne.position)):ne.isOver&&(ne.isOver=0,ne.cancelHelperRemoval=!0,ne.options._revert=ne.options.revert,ne.options.revert=!1,ne._trigger("out",b,ne._uiHash(ne)),ne._mouseStop(b,!0),ne.options.revert=ne.options._revert,ne.options.helper=ne.options._helper,ne.placeholder&&ne.placeholder.remove(),k.helper.appendTo(z._parent),z._refreshOffsets(b),k.position=z._generatePosition(b,!0),z._trigger("fromSortable",b),z.dropped=!1,l.each(z.sortables,function(){this.refreshPositions()}))})}}),l.ui.plugin.add("draggable","cursor",{start:function(b,k,z){var Y=l("body"),ne=z.options;Y.css("cursor")&&(ne._cursor=Y.css("cursor")),Y.css("cursor",ne.cursor)},stop:function(b,k,z){var Y=z.options;Y._cursor&&l("body").css("cursor",Y._cursor)}}),l.ui.plugin.add("draggable","opacity",{start:function(b,k,z){var Y=l(k.helper),ne=z.options;Y.css("opacity")&&(ne._opacity=Y.css("opacity")),Y.css("opacity",ne.opacity)},stop:function(b,k,z){var Y=z.options;Y._opacity&&l(k.helper).css("opacity",Y._opacity)}}),l.ui.plugin.add("draggable","scroll",{start:function(b,k,z){z.scrollParentNotHidden||(z.scrollParentNotHidden=z.helper.scrollParent(!1)),z.scrollParentNotHidden[0]!==z.document[0]&&"HTML"!==z.scrollParentNotHidden[0].tagName&&(z.overflowOffset=z.scrollParentNotHidden.offset())},drag:function(b,k,z){var Y=z.options,ne=!1,pe=z.scrollParentNotHidden[0],Ae=z.document[0];pe!==Ae&&"HTML"!==pe.tagName?((!Y.axis||"x"!==Y.axis)&&(z.overflowOffset.top+pe.offsetHeight-b.pageY<Y.scrollSensitivity?pe.scrollTop=ne=pe.scrollTop+Y.scrollSpeed:b.pageY-z.overflowOffset.top<Y.scrollSensitivity&&(pe.scrollTop=ne=pe.scrollTop-Y.scrollSpeed)),(!Y.axis||"y"!==Y.axis)&&(z.overflowOffset.left+pe.offsetWidth-b.pageX<Y.scrollSensitivity?pe.scrollLeft=ne=pe.scrollLeft+Y.scrollSpeed:b.pageX-z.overflowOffset.left<Y.scrollSensitivity&&(pe.scrollLeft=ne=pe.scrollLeft-Y.scrollSpeed))):((!Y.axis||"x"!==Y.axis)&&(b.pageY-l(Ae).scrollTop()<Y.scrollSensitivity?ne=l(Ae).scrollTop(l(Ae).scrollTop()-Y.scrollSpeed):l(window).height()-(b.pageY-l(Ae).scrollTop())<Y.scrollSensitivity&&(ne=l(Ae).scrollTop(l(Ae).scrollTop()+Y.scrollSpeed))),(!Y.axis||"y"!==Y.axis)&&(b.pageX-l(Ae).scrollLeft()<Y.scrollSensitivity?ne=l(Ae).scrollLeft(l(Ae).scrollLeft()-Y.scrollSpeed):l(window).width()-(b.pageX-l(Ae).scrollLeft())<Y.scrollSensitivity&&(ne=l(Ae).scrollLeft(l(Ae).scrollLeft()+Y.scrollSpeed)))),!1!==ne&&l.ui.ddmanager&&!Y.dropBehaviour&&l.ui.ddmanager.prepareOffsets(z,b)}}),l.ui.plugin.add("draggable","snap",{start:function(b,k,z){var Y=z.options;z.snapElements=[],l(Y.snap.constructor!==String?Y.snap.items||":data(ui-draggable)":Y.snap).each(function(){var ne=l(this),pe=ne.offset();this!==z.element[0]&&z.snapElements.push({item:this,width:ne.outerWidth(),height:ne.outerHeight(),top:pe.top,left:pe.left})})},drag:function(b,k,z){var Y,ne,pe,Ae,Ge,$e,yt,Mt,tn,Tt,qt=z.options,sn=qt.snapTolerance,Dt=k.offset.left,nn=Dt+z.helperProportions.width,bn=k.offset.top,ln=bn+z.helperProportions.height;for(tn=z.snapElements.length-1;tn>=0;tn--)$e=(Ge=z.snapElements[tn].left-z.margins.left)+z.snapElements[tn].width,Mt=(yt=z.snapElements[tn].top-z.margins.top)+z.snapElements[tn].height,nn<Ge-sn||Dt>$e+sn||ln<yt-sn||bn>Mt+sn||!l.contains(z.snapElements[tn].item.ownerDocument,z.snapElements[tn].item)?(z.snapElements[tn].snapping&&z.options.snap.release&&z.options.snap.release.call(z.element,b,l.extend(z._uiHash(),{snapItem:z.snapElements[tn].item})),z.snapElements[tn].snapping=!1):("inner"!==qt.snapMode&&(Y=Math.abs(yt-ln)<=sn,ne=Math.abs(Mt-bn)<=sn,pe=Math.abs(Ge-nn)<=sn,Ae=Math.abs($e-Dt)<=sn,Y&&(k.position.top=z._convertPositionTo("relative",{top:yt-z.helperProportions.height,left:0}).top),ne&&(k.position.top=z._convertPositionTo("relative",{top:Mt,left:0}).top),pe&&(k.position.left=z._convertPositionTo("relative",{top:0,left:Ge-z.helperProportions.width}).left),Ae&&(k.position.left=z._convertPositionTo("relative",{top:0,left:$e}).left)),Tt=Y||ne||pe||Ae,"outer"!==qt.snapMode&&(Y=Math.abs(yt-bn)<=sn,ne=Math.abs(Mt-ln)<=sn,pe=Math.abs(Ge-Dt)<=sn,Ae=Math.abs($e-nn)<=sn,Y&&(k.position.top=z._convertPositionTo("relative",{top:yt,left:0}).top),ne&&(k.position.top=z._convertPositionTo("relative",{top:Mt-z.helperProportions.height,left:0}).top),pe&&(k.position.left=z._convertPositionTo("relative",{top:0,left:Ge}).left),Ae&&(k.position.left=z._convertPositionTo("relative",{top:0,left:$e-z.helperProportions.width}).left)),!z.snapElements[tn].snapping&&(Y||ne||pe||Ae||Tt)&&z.options.snap.snap&&z.options.snap.snap.call(z.element,b,l.extend(z._uiHash(),{snapItem:z.snapElements[tn].item})),z.snapElements[tn].snapping=Y||ne||pe||Ae||Tt)}}),l.ui.plugin.add("draggable","stack",{start:function(b,k,z){var Y,pe=l.makeArray(l(z.options.stack)).sort(function(Ae,Ge){return(parseInt(l(Ae).css("zIndex"),10)||0)-(parseInt(l(Ge).css("zIndex"),10)||0)});!pe.length||(Y=parseInt(l(pe[0]).css("zIndex"),10)||0,l(pe).each(function(Ae){l(this).css("zIndex",Y+Ae)}),this.css("zIndex",Y+pe.length))}}),l.ui.plugin.add("draggable","zIndex",{start:function(b,k,z){var Y=l(k.helper),ne=z.options;Y.css("zIndex")&&(ne._zIndex=Y.css("zIndex")),Y.css("zIndex",ne.zIndex)},stop:function(b,k,z){var Y=z.options;Y._zIndex&&l(k.helper).css("zIndex",Y._zIndex)}}),l.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b,k=this.options,z=k.accept;this.isover=!1,this.isout=!0,this.accept=l.isFunction(z)?z:function(Y){return Y.is(z)},this.proportions=function(){if(!arguments.length)return b||(b={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});b=arguments[0]},this._addToManager(k.scope),k.addClasses&&this._addClass("ui-droppable")},_addToManager:function(b){l.ui.ddmanager.droppables[b]=l.ui.ddmanager.droppables[b]||[],l.ui.ddmanager.droppables[b].push(this)},_splice:function(b){for(var k=0;k<b.length;k++)b[k]===this&&b.splice(k,1)},_destroy:function(){this._splice(l.ui.ddmanager.droppables[this.options.scope])},_setOption:function(b,k){"accept"===b?this.accept=l.isFunction(k)?k:function(Y){return Y.is(k)}:"scope"===b&&(this._splice(l.ui.ddmanager.droppables[this.options.scope]),this._addToManager(k)),this._super(b,k)},_activate:function(b){var k=l.ui.ddmanager.current;this._addActiveClass(),k&&this._trigger("activate",b,this.ui(k))},_deactivate:function(b){var k=l.ui.ddmanager.current;this._removeActiveClass(),k&&this._trigger("deactivate",b,this.ui(k))},_over:function(b){var k=l.ui.ddmanager.current;!k||(k.currentItem||k.element)[0]===this.element[0]||this.accept.call(this.element[0],k.currentItem||k.element)&&(this._addHoverClass(),this._trigger("over",b,this.ui(k)))},_out:function(b){var k=l.ui.ddmanager.current;!k||(k.currentItem||k.element)[0]===this.element[0]||this.accept.call(this.element[0],k.currentItem||k.element)&&(this._removeHoverClass(),this._trigger("out",b,this.ui(k)))},_drop:function(b,k){var z=k||l.ui.ddmanager.current,Y=!1;return!(!z||(z.currentItem||z.element)[0]===this.element[0]||(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var ne=l(this).droppable("instance");if(ne.options.greedy&&!ne.options.disabled&&ne.options.scope===z.options.scope&&ne.accept.call(ne.element[0],z.currentItem||z.element)&&De(z,l.extend(ne,{offset:ne.element.offset()}),ne.options.tolerance,b))return Y=!0,!1}),Y))&&!!this.accept.call(this.element[0],z.currentItem||z.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",b,this.ui(z)),this.element)},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var De=l.ui.intersect=function(){function b(k,z,Y){return k>=z&&k<z+Y}return function(k,z,Y,ne){if(!z.offset)return!1;var pe=(k.positionAbs||k.position.absolute).left+k.margins.left,Ae=(k.positionAbs||k.position.absolute).top+k.margins.top,Ge=pe+k.helperProportions.width,$e=Ae+k.helperProportions.height,yt=z.offset.left,Mt=z.offset.top,tn=yt+z.proportions().width,Tt=Mt+z.proportions().height;switch(Y){case"fit":return yt<=pe&&Ge<=tn&&Mt<=Ae&&$e<=Tt;case"intersect":return yt<pe+k.helperProportions.width/2&&Ge-k.helperProportions.width/2<tn&&Mt<Ae+k.helperProportions.height/2&&$e-k.helperProportions.height/2<Tt;case"pointer":return b(ne.pageY,Mt,z.proportions().height)&&b(ne.pageX,yt,z.proportions().width);case"touch":return(Ae>=Mt&&Ae<=Tt||$e>=Mt&&$e<=Tt||Ae<Mt&&$e>Tt)&&(pe>=yt&&pe<=tn||Ge>=yt&&Ge<=tn||pe<yt&&Ge>tn);default:return!1}}}();l.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(b,k){var z,Y,ne=l.ui.ddmanager.droppables[b.options.scope]||[],pe=k?k.type:null,Ae=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();e:for(z=0;z<ne.length;z++)if(!(ne[z].options.disabled||b&&!ne[z].accept.call(ne[z].element[0],b.currentItem||b.element))){for(Y=0;Y<Ae.length;Y++)if(Ae[Y]===ne[z].element[0]){ne[z].proportions().height=0;continue e}ne[z].visible="none"!==ne[z].element.css("display"),ne[z].visible&&("mousedown"===pe&&ne[z]._activate.call(ne[z],k),ne[z].offset=ne[z].element.offset(),ne[z].proportions({width:ne[z].element[0].offsetWidth,height:ne[z].element[0].offsetHeight}))}},drop:function(b,k){var z=!1;return l.each((l.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){!this.options||(!this.options.disabled&&this.visible&&De(b,this,this.options.tolerance,k)&&(z=this._drop.call(this,k)||z),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,k)))}),z},dragStart:function(b,k){b.element.parentsUntil("body").on("scroll.droppable",function(){b.options.refreshPositions||l.ui.ddmanager.prepareOffsets(b,k)})},drag:function(b,k){b.options.refreshPositions&&l.ui.ddmanager.prepareOffsets(b,k),l.each(l.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var z,Y,ne,pe=De(b,this,this.options.tolerance,k),Ae=!pe&&this.isover?"isout":pe&&!this.isover?"isover":null;!Ae||(this.options.greedy&&(Y=this.options.scope,(ne=this.element.parents(":data(ui-droppable)").filter(function(){return l(this).droppable("instance").options.scope===Y})).length&&((z=l(ne[0]).droppable("instance")).greedyChild="isover"===Ae)),z&&"isover"===Ae&&(z.isover=!1,z.isout=!0,z._out.call(z,k)),this[Ae]=!0,this["isout"===Ae?"isover":"isout"]=!1,this["isover"===Ae?"_over":"_out"].call(this,k),z&&"isout"===Ae&&(z.isout=!1,z.isover=!0,z._over.call(z,k)))}})},dragStop:function(b,k){b.element.parentsUntil("body").off("scroll.droppable"),b.options.refreshPositions||l.ui.ddmanager.prepareOffsets(b,k)}},!1!==l.uiBackCompat&&l.widget("ui.droppable",l.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),l.widget("ui.resizable",l.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(b){return parseFloat(b)||0},_isNumber:function(b){return!isNaN(parseFloat(b))},_hasScroll:function(b,k){if("hidden"===l(b).css("overflow"))return!1;var z=k&&"left"===k?"scrollLeft":"scrollTop",Y=!1;return b[z]>0||(b[z]=1,Y=b[z]>0,b[z]=0,Y)},_create:function(){var b,k=this.options,z=this;this._addClass("ui-resizable"),l.extend(this,{_aspectRatio:!!k.aspectRatio,aspectRatio:k.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:k.helper||k.ghost||k.animate?k.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(l("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,b={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(b),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(b),this._proportionallyResize()),this._setupHandles(),k.autoHide&&l(this.element).on("mouseenter",function(){k.disabled||(z._removeClass("ui-resizable-autohide"),z._handles.show())}).on("mouseleave",function(){k.disabled||z.resizing||(z._addClass("ui-resizable-autohide"),z._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,k=function(z){l(z).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(k(this.element),this.originalElement.css({position:(b=this.element).css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),k(this.originalElement),this},_setOption:function(b,k){"handles"===(this._super(b,k),b)&&(this._removeHandles(),this._setupHandles())},_setupHandles:function(){var k,z,Y,ne,pe,b=this.options,Ae=this;if(this.handles=b.handles||(l(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=l(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),Y=this.handles.split(","),this.handles={},z=0;z<Y.length;z++)ne="ui-resizable-"+(k=l.trim(Y[z])),pe=l("<div>"),this._addClass(pe,"ui-resizable-handle "+ne),pe.css({zIndex:b.zIndex}),this.handles[k]=".ui-resizable-"+k,this.element.append(pe);this._renderAxis=function(Ge){var $e,yt,Mt,tn;for($e in Ge=Ge||this.element,this.handles)this.handles[$e].constructor===String?this.handles[$e]=this.element.children(this.handles[$e]).first().show():(this.handles[$e].jquery||this.handles[$e].nodeType)&&(this.handles[$e]=l(this.handles[$e]),this._on(this.handles[$e],{mousedown:Ae._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(yt=l(this.handles[$e],this.element),tn=/sw|ne|nw|se|n|s/.test($e)?yt.outerHeight():yt.outerWidth(),Mt=["padding",/ne|nw|n/.test($e)?"Top":/se|sw|s/.test($e)?"Bottom":/^e$/.test($e)?"Right":"Left"].join(""),Ge.css(Mt,tn),this._proportionallyResize()),this._handles=this._handles.add(this.handles[$e])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){Ae.resizing||(this.className&&(pe=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),Ae.axis=pe&&pe[1]?pe[1]:"se")}),b.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(b){var k,z,Y=!1;for(k in this.handles)((z=l(this.handles[k])[0])===b.target||l.contains(z,b.target))&&(Y=!0);return!this.options.disabled&&Y},_mouseStart:function(b){var k,z,Y,ne=this.options,pe=this.element;return this.resizing=!0,this._renderProxy(),k=this._num(this.helper.css("left")),z=this._num(this.helper.css("top")),ne.containment&&(k+=l(ne.containment).scrollLeft()||0,z+=l(ne.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:k,top:z},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:pe.width(),height:pe.height()},this.originalSize=this._helper?{width:pe.outerWidth(),height:pe.outerHeight()}:{width:pe.width(),height:pe.height()},this.sizeDiff={width:pe.outerWidth()-pe.width(),height:pe.outerHeight()-pe.height()},this.originalPosition={left:k,top:z},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof ne.aspectRatio?ne.aspectRatio:this.originalSize.width/this.originalSize.height||1,Y=l(".ui-resizable-"+this.axis).css("cursor"),l("body").css("cursor","auto"===Y?this.axis+"-resize":Y),this._addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var k,z,Y=this.originalMousePosition,pe=b.pageX-Y.left||0,Ae=b.pageY-Y.top||0,Ge=this._change[this.axis];return this._updatePrevProperties(),Ge&&(k=Ge.apply(this,[b,pe,Ae]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(k=this._updateRatio(k,b)),k=this._respectSize(k,b),this._updateCache(k),this._propagate("resize",b),z=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),l.isEmptyObject(z)||(this._updatePrevProperties(),this._trigger("resize",b,this.ui()),this._applyChanges())),!1},_mouseStop:function(b){this.resizing=!1;var k,z,Y,ne,pe,Ae,Ge,$e=this.options,yt=this;return this._helper&&(Y=(z=(k=this._proportionallyResizeElements).length&&/textarea/i.test(k[0].nodeName))&&this._hasScroll(k[0],"left")?0:yt.sizeDiff.height,ne=z?0:yt.sizeDiff.width,pe={width:yt.helper.width()-ne,height:yt.helper.height()-Y},Ae=parseFloat(yt.element.css("left"))+(yt.position.left-yt.originalPosition.left)||null,Ge=parseFloat(yt.element.css("top"))+(yt.position.top-yt.originalPosition.top)||null,$e.animate||this.element.css(l.extend(pe,{top:Ge,left:Ae})),yt.helper.height(yt.size.height),yt.helper.width(yt.size.width),this._helper&&!$e.animate&&this._proportionallyResize()),l("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var b={};return this.position.top!==this.prevPosition.top&&(b.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(b.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(b.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(b.height=this.size.height+"px"),this.helper.css(b),b},_updateVirtualBoundaries:function(b){var k,z,Y,ne,pe,Ae=this.options;pe={minWidth:this._isNumber(Ae.minWidth)?Ae.minWidth:0,maxWidth:this._isNumber(Ae.maxWidth)?Ae.maxWidth:1/0,minHeight:this._isNumber(Ae.minHeight)?Ae.minHeight:0,maxHeight:this._isNumber(Ae.maxHeight)?Ae.maxHeight:1/0},(this._aspectRatio||b)&&(Y=pe.minWidth/this.aspectRatio,z=pe.maxHeight*this.aspectRatio,ne=pe.maxWidth/this.aspectRatio,(k=pe.minHeight*this.aspectRatio)>pe.minWidth&&(pe.minWidth=k),Y>pe.minHeight&&(pe.minHeight=Y),z<pe.maxWidth&&(pe.maxWidth=z),ne<pe.maxHeight&&(pe.maxHeight=ne)),this._vBoundaries=pe},_updateCache:function(b){this.offset=this.helper.offset(),this._isNumber(b.left)&&(this.position.left=b.left),this._isNumber(b.top)&&(this.position.top=b.top),this._isNumber(b.height)&&(this.size.height=b.height),this._isNumber(b.width)&&(this.size.width=b.width)},_updateRatio:function(b){var k=this.position,z=this.size,Y=this.axis;return this._isNumber(b.height)?b.width=b.height*this.aspectRatio:this._isNumber(b.width)&&(b.height=b.width/this.aspectRatio),"sw"===Y&&(b.left=k.left+(z.width-b.width),b.top=null),"nw"===Y&&(b.top=k.top+(z.height-b.height),b.left=k.left+(z.width-b.width)),b},_respectSize:function(b){var k=this._vBoundaries,z=this.axis,Y=this._isNumber(b.width)&&k.maxWidth&&k.maxWidth<b.width,ne=this._isNumber(b.height)&&k.maxHeight&&k.maxHeight<b.height,pe=this._isNumber(b.width)&&k.minWidth&&k.minWidth>b.width,Ae=this._isNumber(b.height)&&k.minHeight&&k.minHeight>b.height,Ge=this.originalPosition.left+this.originalSize.width,$e=this.originalPosition.top+this.originalSize.height,yt=/sw|nw|w/.test(z),Mt=/nw|ne|n/.test(z);return pe&&(b.width=k.minWidth),Ae&&(b.height=k.minHeight),Y&&(b.width=k.maxWidth),ne&&(b.height=k.maxHeight),pe&&yt&&(b.left=Ge-k.minWidth),Y&&yt&&(b.left=Ge-k.maxWidth),Ae&&Mt&&(b.top=$e-k.minHeight),ne&&Mt&&(b.top=$e-k.maxHeight),b.width||b.height||b.left||!b.top?!b.width&&!b.height&&!b.top&&b.left&&(b.left=null):b.top=null,b},_getPaddingPlusBorderDimensions:function(b){for(var k=0,z=[],Y=[b.css("borderTopWidth"),b.css("borderRightWidth"),b.css("borderBottomWidth"),b.css("borderLeftWidth")],ne=[b.css("paddingTop"),b.css("paddingRight"),b.css("paddingBottom"),b.css("paddingLeft")];k<4;k++)z[k]=parseFloat(Y[k])||0,z[k]+=parseFloat(ne[k])||0;return{height:z[0]+z[2],width:z[1]+z[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b,k=0,z=this.helper||this.element;k<this._proportionallyResizeElements.length;k++)b=this._proportionallyResizeElements[k],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(b)),b.css({height:z.height()-this.outerDimensions.height||0,width:z.width()-this.outerDimensions.width||0})},_renderProxy:function(){var k=this.options;this.elementOffset=this.element.offset(),this._helper?(this.helper=this.helper||l("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++k.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(b,k){return{width:this.originalSize.width+k}},w:function(b,k){return{left:this.originalPosition.left+k,width:this.originalSize.width-k}},n:function(b,k,z){return{top:this.originalPosition.top+z,height:this.originalSize.height-z}},s:function(b,k,z){return{height:this.originalSize.height+z}},se:function(b,k,z){return l.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,k,z]))},sw:function(b,k,z){return l.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,k,z]))},ne:function(b,k,z){return l.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,k,z]))},nw:function(b,k,z){return l.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,k,z]))}},_propagate:function(b,k){l.ui.plugin.call(this,b,[k,this.ui()]),"resize"!==b&&this._trigger(b,k,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),l.ui.plugin.add("resizable","animate",{stop:function(b){var k=l(this).resizable("instance"),z=k.options,Y=k._proportionallyResizeElements,ne=Y.length&&/textarea/i.test(Y[0].nodeName),pe=ne&&k._hasScroll(Y[0],"left")?0:k.sizeDiff.height,Ge={width:k.size.width-(ne?0:k.sizeDiff.width),height:k.size.height-pe},$e=parseFloat(k.element.css("left"))+(k.position.left-k.originalPosition.left)||null,yt=parseFloat(k.element.css("top"))+(k.position.top-k.originalPosition.top)||null;k.element.animate(l.extend(Ge,yt&&$e?{top:yt,left:$e}:{}),{duration:z.animateDuration,easing:z.animateEasing,step:function(){var Mt={width:parseFloat(k.element.css("width")),height:parseFloat(k.element.css("height")),top:parseFloat(k.element.css("top")),left:parseFloat(k.element.css("left"))};Y&&Y.length&&l(Y[0]).css({width:Mt.width,height:Mt.height}),k._updateCache(Mt),k._propagate("resize",b)}})}}),l.ui.plugin.add("resizable","containment",{start:function(){var b,k,z,Y,ne,pe,Ae,Ge=l(this).resizable("instance"),yt=Ge.element,Mt=Ge.options.containment,tn=Mt instanceof l?Mt.get(0):/parent/.test(Mt)?yt.parent().get(0):Mt;!tn||(Ge.containerElement=l(tn),/document/.test(Mt)||Mt===document?(Ge.containerOffset={left:0,top:0},Ge.containerPosition={left:0,top:0},Ge.parentData={element:l(document),left:0,top:0,width:l(document).width(),height:l(document).height()||document.body.parentNode.scrollHeight}):(b=l(tn),k=[],l(["Top","Right","Left","Bottom"]).each(function(Tt,qt){k[Tt]=Ge._num(b.css("padding"+qt))}),Ge.containerOffset=b.offset(),Ge.containerPosition=b.position(),Ge.containerSize={height:b.innerHeight()-k[3],width:b.innerWidth()-k[1]},z=Ge.containerOffset,Y=Ge.containerSize.height,ne=Ge.containerSize.width,pe=Ge._hasScroll(tn,"left")?tn.scrollWidth:ne,Ae=Ge._hasScroll(tn)?tn.scrollHeight:Y,Ge.parentData={element:tn,left:z.left,top:z.top,width:pe,height:Ae}))},resize:function(b){var k,z,Y,ne,pe=l(this).resizable("instance"),Ae=pe.options,Ge=pe.containerOffset,$e=pe.position,yt=pe._aspectRatio||b.shiftKey,Mt={top:0,left:0},tn=pe.containerElement,Tt=!0;tn[0]!==document&&/static/.test(tn.css("position"))&&(Mt=Ge),$e.left<(pe._helper?Ge.left:0)&&(pe.size.width=pe.size.width+(pe._helper?pe.position.left-Ge.left:pe.position.left-Mt.left),yt&&(pe.size.height=pe.size.width/pe.aspectRatio,Tt=!1),pe.position.left=Ae.helper?Ge.left:0),$e.top<(pe._helper?Ge.top:0)&&(pe.size.height=pe.size.height+(pe._helper?pe.position.top-Ge.top:pe.position.top),yt&&(pe.size.width=pe.size.height*pe.aspectRatio,Tt=!1),pe.position.top=pe._helper?Ge.top:0),Y=pe.containerElement.get(0)===pe.element.parent().get(0),ne=/relative|absolute/.test(pe.containerElement.css("position")),Y&&ne?(pe.offset.left=pe.parentData.left+pe.position.left,pe.offset.top=pe.parentData.top+pe.position.top):(pe.offset.left=pe.element.offset().left,pe.offset.top=pe.element.offset().top),k=Math.abs(pe.sizeDiff.width+(pe._helper?pe.offset.left-Mt.left:pe.offset.left-Ge.left)),z=Math.abs(pe.sizeDiff.height+(pe._helper?pe.offset.top-Mt.top:pe.offset.top-Ge.top)),k+pe.size.width>=pe.parentData.width&&(pe.size.width=pe.parentData.width-k,yt&&(pe.size.height=pe.size.width/pe.aspectRatio,Tt=!1)),z+pe.size.height>=pe.parentData.height&&(pe.size.height=pe.parentData.height-z,yt&&(pe.size.width=pe.size.height*pe.aspectRatio,Tt=!1)),Tt||(pe.position.left=pe.prevPosition.left,pe.position.top=pe.prevPosition.top,pe.size.width=pe.prevSize.width,pe.size.height=pe.prevSize.height)},stop:function(){var b=l(this).resizable("instance"),k=b.options,z=b.containerOffset,Y=b.containerPosition,ne=b.containerElement,pe=l(b.helper),Ae=pe.offset(),Ge=pe.outerWidth()-b.sizeDiff.width,$e=pe.outerHeight()-b.sizeDiff.height;b._helper&&!k.animate&&/relative/.test(ne.css("position"))&&l(this).css({left:Ae.left-Y.left-z.left,width:Ge,height:$e}),b._helper&&!k.animate&&/static/.test(ne.css("position"))&&l(this).css({left:Ae.left-Y.left-z.left,width:Ge,height:$e})}}),l.ui.plugin.add("resizable","alsoResize",{start:function(){var b=l(this).resizable("instance");l(b.options.alsoResize).each(function(){var z=l(this);z.data("ui-resizable-alsoresize",{width:parseFloat(z.width()),height:parseFloat(z.height()),left:parseFloat(z.css("left")),top:parseFloat(z.css("top"))})})},resize:function(b,k){var z=l(this).resizable("instance"),ne=z.originalSize,pe=z.originalPosition,Ae={height:z.size.height-ne.height||0,width:z.size.width-ne.width||0,top:z.position.top-pe.top||0,left:z.position.left-pe.left||0};l(z.options.alsoResize).each(function(){var Ge=l(this),$e=l(this).data("ui-resizable-alsoresize"),yt={},Mt=Ge.parents(k.originalElement[0]).length?["width","height"]:["width","height","top","left"];l.each(Mt,function(tn,Tt){var qt=($e[Tt]||0)+(Ae[Tt]||0);qt&&qt>=0&&(yt[Tt]=qt||null)}),Ge.css(yt)})},stop:function(){l(this).removeData("ui-resizable-alsoresize")}}),l.ui.plugin.add("resizable","ghost",{start:function(){var b=l(this).resizable("instance"),k=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:k.height,width:k.width,margin:0,left:0,top:0}),b._addClass(b.ghost,"ui-resizable-ghost"),!1!==l.uiBackCompat&&"string"==typeof b.options.ghost&&b.ghost.addClass(this.options.ghost),b.ghost.appendTo(b.helper)},resize:function(){var b=l(this).resizable("instance");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=l(this).resizable("instance");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),l.ui.plugin.add("resizable","grid",{resize:function(){var b,k=l(this).resizable("instance"),z=k.options,Y=k.size,ne=k.originalSize,pe=k.originalPosition,Ae=k.axis,Ge="number"==typeof z.grid?[z.grid,z.grid]:z.grid,$e=Ge[0]||1,yt=Ge[1]||1,Mt=Math.round((Y.width-ne.width)/$e)*$e,tn=Math.round((Y.height-ne.height)/yt)*yt,Tt=ne.width+Mt,qt=ne.height+tn,sn=z.maxWidth&&z.maxWidth<Tt,Dt=z.maxHeight&&z.maxHeight<qt,nn=z.minWidth&&z.minWidth>Tt,bn=z.minHeight&&z.minHeight>qt;z.grid=Ge,nn&&(Tt+=$e),bn&&(qt+=yt),sn&&(Tt-=$e),Dt&&(qt-=yt),/^(se|s|e)$/.test(Ae)?(k.size.width=Tt,k.size.height=qt):/^(ne)$/.test(Ae)?(k.size.width=Tt,k.size.height=qt,k.position.top=pe.top-tn):/^(sw)$/.test(Ae)?(k.size.width=Tt,k.size.height=qt,k.position.left=pe.left-Mt):((qt-yt<=0||Tt-$e<=0)&&(b=k._getPaddingPlusBorderDimensions(this)),qt-yt>0?(k.size.height=qt,k.position.top=pe.top-tn):(k.size.height=qt=yt-b.height,k.position.top=pe.top+ne.height-qt),Tt-$e>0?(k.size.width=Tt,k.position.left=pe.left-Mt):(k.size.width=Tt=$e-b.width,k.position.left=pe.left+ne.width-Tt))}}),l.widget("ui.selectable",l.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){b.elementPos=l(b.element[0]).offset(),b.selectees=l(b.options.filter,b.element[0]),b._addClass(b.selectees,"ui-selectee"),b.selectees.each(function(){var k=l(this),z=k.offset(),Y={left:z.left-b.elementPos.left,top:z.top-b.elementPos.top};l.data(this,"selectable-item",{element:this,$element:k,left:Y.left,top:Y.top,right:Y.left+k.outerWidth(),bottom:Y.top+k.outerHeight(),startselected:!1,selected:k.hasClass("ui-selected"),selecting:k.hasClass("ui-selecting"),unselecting:k.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=l("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(b){var k=this,z=this.options;this.opos=[b.pageX,b.pageY],this.elementPos=l(this.element[0]).offset(),!this.options.disabled&&(this.selectees=l(z.filter,this.element[0]),this._trigger("start",b),l(z.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),z.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var Y=l.data(this,"selectable-item");Y.startselected=!0,!b.metaKey&&!b.ctrlKey&&(k._removeClass(Y.$element,"ui-selected"),Y.selected=!1,k._addClass(Y.$element,"ui-unselecting"),Y.unselecting=!0,k._trigger("unselecting",b,{unselecting:Y.element}))}),l(b.target).parents().addBack().each(function(){var Y,ne=l.data(this,"selectable-item");if(ne)return Y=!b.metaKey&&!b.ctrlKey||!ne.$element.hasClass("ui-selected"),k._removeClass(ne.$element,Y?"ui-unselecting":"ui-selected")._addClass(ne.$element,Y?"ui-selecting":"ui-unselecting"),ne.unselecting=!Y,ne.selecting=Y,ne.selected=Y,Y?k._trigger("selecting",b,{selecting:ne.element}):k._trigger("unselecting",b,{unselecting:ne.element}),!1}))},_mouseDrag:function(b){if(this.dragged=!0,!this.options.disabled){var k,z=this,Y=this.options,ne=this.opos[0],pe=this.opos[1],Ae=b.pageX,Ge=b.pageY;return ne>Ae&&(k=Ae,Ae=ne,ne=k),pe>Ge&&(k=Ge,Ge=pe,pe=k),this.helper.css({left:ne,top:pe,width:Ae-ne,height:Ge-pe}),this.selectees.each(function(){var $e=l.data(this,"selectable-item"),yt=!1,Mt={};!$e||$e.element===z.element[0]||(Mt.left=$e.left+z.elementPos.left,Mt.right=$e.right+z.elementPos.left,Mt.top=$e.top+z.elementPos.top,Mt.bottom=$e.bottom+z.elementPos.top,"touch"===Y.tolerance?yt=!(Mt.left>Ae||Mt.right<ne||Mt.top>Ge||Mt.bottom<pe):"fit"===Y.tolerance&&(yt=Mt.left>ne&&Mt.right<Ae&&Mt.top>pe&&Mt.bottom<Ge),yt?($e.selected&&(z._removeClass($e.$element,"ui-selected"),$e.selected=!1),$e.unselecting&&(z._removeClass($e.$element,"ui-unselecting"),$e.unselecting=!1),$e.selecting||(z._addClass($e.$element,"ui-selecting"),$e.selecting=!0,z._trigger("selecting",b,{selecting:$e.element}))):($e.selecting&&((b.metaKey||b.ctrlKey)&&$e.startselected?(z._removeClass($e.$element,"ui-selecting"),$e.selecting=!1,z._addClass($e.$element,"ui-selected"),$e.selected=!0):(z._removeClass($e.$element,"ui-selecting"),$e.selecting=!1,$e.startselected&&(z._addClass($e.$element,"ui-unselecting"),$e.unselecting=!0),z._trigger("unselecting",b,{unselecting:$e.element}))),$e.selected&&!b.metaKey&&!b.ctrlKey&&!$e.startselected&&(z._removeClass($e.$element,"ui-selected"),$e.selected=!1,z._addClass($e.$element,"ui-unselecting"),$e.unselecting=!0,z._trigger("unselecting",b,{unselecting:$e.element}))))}),!1}},_mouseStop:function(b){var k=this;return this.dragged=!1,l(".ui-unselecting",this.element[0]).each(function(){var z=l.data(this,"selectable-item");k._removeClass(z.$element,"ui-unselecting"),z.unselecting=!1,z.startselected=!1,k._trigger("unselected",b,{unselected:z.element})}),l(".ui-selecting",this.element[0]).each(function(){var z=l.data(this,"selectable-item");k._removeClass(z.$element,"ui-selecting")._addClass(z.$element,"ui-selected"),z.selecting=!1,z.selected=!0,z.startselected=!0,k._trigger("selected",b,{selected:z.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),l.widget("ui.sortable",l.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(b,k,z){return b>=k&&b<k+z},_isFloating:function(b){return/left|right/.test(b.css("float"))||/inline|table-cell/.test(b.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(b,k){this._super(b,k),"handle"===b&&this._setHandleClassName()},_setHandleClassName:function(){var b=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),l.each(this.items,function(){b._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(b,k){var z=null,Y=!1,ne=this;return!(this.reverting||this.options.disabled||"static"===this.options.type||(this._refreshItems(b),l(b.target).parents().each(function(){if(l.data(this,ne.widgetName+"-item")===ne)return z=l(this),!1}),l.data(b.target,ne.widgetName+"-item")===ne&&(z=l(b.target)),!z)||this.options.handle&&!k&&(l(this.options.handle,z).find("*").addBack().each(function(){this===b.target&&(Y=!0)}),!Y)||(this.currentItem=z,this._removeCurrentsFromItems(),0))},_mouseStart:function(b,k,z){var Y,ne,pe=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},l.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,pe.cursorAt&&this._adjustOffsetFromHelper(pe.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),pe.containment&&this._setContainment(),pe.cursor&&"auto"!==pe.cursor&&(ne=this.document.find("body"),this.storedCursor=ne.css("cursor"),ne.css("cursor",pe.cursor),this.storedStylesheet=l("<style>*{ cursor: "+pe.cursor+" !important; }</style>").appendTo(ne)),pe.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",pe.opacity)),pe.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",pe.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!z)for(Y=this.containers.length-1;Y>=0;Y--)this.containers[Y]._trigger("activate",b,this._uiHash(this));return l.ui.ddmanager&&(l.ui.ddmanager.current=this),l.ui.ddmanager&&!pe.dropBehaviour&&l.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var k,z,Y,ne,pe=this.options,Ae=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<pe.scrollSensitivity?this.scrollParent[0].scrollTop=Ae=this.scrollParent[0].scrollTop+pe.scrollSpeed:b.pageY-this.overflowOffset.top<pe.scrollSensitivity&&(this.scrollParent[0].scrollTop=Ae=this.scrollParent[0].scrollTop-pe.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<pe.scrollSensitivity?this.scrollParent[0].scrollLeft=Ae=this.scrollParent[0].scrollLeft+pe.scrollSpeed:b.pageX-this.overflowOffset.left<pe.scrollSensitivity&&(this.scrollParent[0].scrollLeft=Ae=this.scrollParent[0].scrollLeft-pe.scrollSpeed)):(b.pageY-this.document.scrollTop()<pe.scrollSensitivity?Ae=this.document.scrollTop(this.document.scrollTop()-pe.scrollSpeed):this.window.height()-(b.pageY-this.document.scrollTop())<pe.scrollSensitivity&&(Ae=this.document.scrollTop(this.document.scrollTop()+pe.scrollSpeed)),b.pageX-this.document.scrollLeft()<pe.scrollSensitivity?Ae=this.document.scrollLeft(this.document.scrollLeft()-pe.scrollSpeed):this.window.width()-(b.pageX-this.document.scrollLeft())<pe.scrollSensitivity&&(Ae=this.document.scrollLeft(this.document.scrollLeft()+pe.scrollSpeed))),!1!==Ae&&l.ui.ddmanager&&!pe.dropBehaviour&&l.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),(!this.options.axis||"y"!==this.options.axis)&&(this.helper[0].style.left=this.position.left+"px"),(!this.options.axis||"x"!==this.options.axis)&&(this.helper[0].style.top=this.position.top+"px"),k=this.items.length-1;k>=0;k--)if(Y=(z=this.items[k]).item[0],(ne=this._intersectsWithPointer(z))&&z.instance===this.currentContainer&&Y!==this.currentItem[0]&&this.placeholder[1===ne?"next":"prev"]()[0]!==Y&&!l.contains(this.placeholder[0],Y)&&("semi-dynamic"!==this.options.type||!l.contains(this.element[0],Y))){if(this.direction=1===ne?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(z))break;this._rearrange(b,z),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),l.ui.ddmanager&&l.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,k){if(b){if(l.ui.ddmanager&&!this.options.dropBehaviour&&l.ui.ddmanager.drop(this,b),this.options.revert){var z=this,Y=this.placeholder.offset(),ne=this.options.axis,pe={};(!ne||"x"===ne)&&(pe.left=Y.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),(!ne||"y"===ne)&&(pe.top=Y.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,l(this.helper).animate(pe,parseInt(this.options.revert,10)||500,function(){z._clear(b)})}else this._clear(b,k);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new l.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),l.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?l(this.domPosition.prev).after(this.currentItem):l(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var k=this._getItemsAsjQuery(b&&b.connected),z=[];return b=b||{},l(k).each(function(){var Y=(l(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);Y&&z.push((b.key||Y[1]+"[]")+"="+(b.key&&b.expression?Y[1]:Y[2]))}),!z.length&&b.key&&z.push(b.key+"="),z.join("&")},toArray:function(b){var k=this._getItemsAsjQuery(b&&b.connected),z=[];return b=b||{},k.each(function(){z.push(l(b.item||this).attr(b.attribute||"id")||"")}),z},_intersectsWith:function(b){var k=this.positionAbs.left,Y=this.positionAbs.top,pe=b.left,Ae=pe+b.width,Ge=b.top,$e=Ge+b.height,yt=this.offset.click.top,Mt=this.offset.click.left;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>b[this.floating?"width":"height"]?("x"===this.options.axis||Y+yt>Ge&&Y+yt<$e)&&("y"===this.options.axis||k+Mt>pe&&k+Mt<Ae):pe<k+this.helperProportions.width/2&&k+this.helperProportions.width-this.helperProportions.width/2<Ae&&Ge<Y+this.helperProportions.height/2&&Y+this.helperProportions.height-this.helperProportions.height/2<$e},_intersectsWithPointer:function(b){var k,z,Y="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),ne="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width);return!(!Y||!ne)&&(k=this._getDragVerticalDirection(),z=this._getDragHorizontalDirection(),this.floating?"right"===z||"down"===k?2:1:k&&("down"===k?2:1))},_intersectsWithSides:function(b){var k=this._isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),z=this._isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),Y=this._getDragVerticalDirection(),ne=this._getDragHorizontalDirection();return this.floating&&ne?"right"===ne&&z||"left"===ne&&!z:Y&&("down"===Y&&k||"up"===Y&&!k)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return 0!==b&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return 0!==b&&(b>0?"right":"left")},refresh:function(b){return this._refreshItems(b),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var b=this.options;return b.connectWith.constructor===String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(b){var k,z,Y,ne,pe=[],Ae=[],Ge=this._connectWith();if(Ge&&b)for(k=Ge.length-1;k>=0;k--)for(z=(Y=l(Ge[k],this.document[0])).length-1;z>=0;z--)(ne=l.data(Y[z],this.widgetFullName))&&ne!==this&&!ne.options.disabled&&Ae.push([l.isFunction(ne.options.items)?ne.options.items.call(ne.element):l(ne.options.items,ne.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),ne]);function $e(){pe.push(this)}for(Ae.push([l.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):l(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),k=Ae.length-1;k>=0;k--)Ae[k][0].each($e);return l(pe)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=l.grep(this.items,function(k){for(var z=0;z<b.length;z++)if(b[z]===k.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var k,z,Y,ne,pe,Ae,Ge,$e,yt=this.items,Mt=[[l.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):l(this.options.items,this.element),this]],tn=this._connectWith();if(tn&&this.ready)for(k=tn.length-1;k>=0;k--)for(z=(Y=l(tn[k],this.document[0])).length-1;z>=0;z--)(ne=l.data(Y[z],this.widgetFullName))&&ne!==this&&!ne.options.disabled&&(Mt.push([l.isFunction(ne.options.items)?ne.options.items.call(ne.element[0],b,{item:this.currentItem}):l(ne.options.items,ne.element),ne]),this.containers.push(ne));for(k=Mt.length-1;k>=0;k--)for(pe=Mt[k][1],z=0,$e=(Ae=Mt[k][0]).length;z<$e;z++)(Ge=l(Ae[z])).data(this.widgetName+"-item",pe),yt.push({item:Ge,instance:pe,width:0,height:0,left:0,top:0})},refreshPositions:function(b){var k,z,Y,ne;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),k=this.items.length-1;k>=0;k--)((z=this.items[k]).instance===this.currentContainer||!this.currentContainer||z.item[0]===this.currentItem[0])&&(Y=this.options.toleranceElement?l(this.options.toleranceElement,z.item):z.item,b||(z.width=Y.outerWidth(),z.height=Y.outerHeight()),ne=Y.offset(),z.left=ne.left,z.top=ne.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(k=this.containers.length-1;k>=0;k--)ne=this.containers[k].element.offset(),this.containers[k].containerCache.left=ne.left,this.containers[k].containerCache.top=ne.top,this.containers[k].containerCache.width=this.containers[k].element.outerWidth(),this.containers[k].containerCache.height=this.containers[k].element.outerHeight();return this},_createPlaceholder:function(b){var k,z=(b=b||this).options;(!z.placeholder||z.placeholder.constructor===String)&&(k=z.placeholder,z.placeholder={element:function(){var Y=b.currentItem[0].nodeName.toLowerCase(),ne=l("<"+Y+">",b.document[0]);return b._addClass(ne,"ui-sortable-placeholder",k||b.currentItem[0].className)._removeClass(ne,"ui-sortable-helper"),"tbody"===Y?b._createTrPlaceholder(b.currentItem.find("tr").eq(0),l("<tr>",b.document[0]).appendTo(ne)):"tr"===Y?b._createTrPlaceholder(b.currentItem,ne):"img"===Y&&ne.attr("src",b.currentItem.attr("src")),k||ne.css("visibility","hidden"),ne},update:function(Y,ne){k&&!z.forcePlaceholderSize||(ne.height()||ne.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),ne.width()||ne.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=l(z.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),z.placeholder.update(b,b.placeholder)},_createTrPlaceholder:function(b,k){var z=this;b.children().each(function(){l("<td>&#160;</td>",z.document[0]).attr("colspan",l(this).attr("colspan")||1).appendTo(k)})},_contactContainers:function(b){var k,z,Y,ne,pe,Ae,Ge,$e,yt,Mt,tn=null,Tt=null;for(k=this.containers.length-1;k>=0;k--)if(!l.contains(this.currentItem[0],this.containers[k].element[0]))if(this._intersectsWith(this.containers[k].containerCache)){if(tn&&l.contains(this.containers[k].element[0],tn.element[0]))continue;tn=this.containers[k],Tt=k}else this.containers[k].containerCache.over&&(this.containers[k]._trigger("out",b,this._uiHash(this)),this.containers[k].containerCache.over=0);if(tn)if(1===this.containers.length)this.containers[Tt].containerCache.over||(this.containers[Tt]._trigger("over",b,this._uiHash(this)),this.containers[Tt].containerCache.over=1);else{for(Y=1e4,ne=null,pe=(yt=tn.floating||this._isFloating(this.currentItem))?"left":"top",Ae=yt?"width":"height",Mt=yt?"pageX":"pageY",z=this.items.length-1;z>=0;z--)!l.contains(this.containers[Tt].element[0],this.items[z].item[0])||this.items[z].item[0]!==this.currentItem[0]&&(Ge=this.items[z].item.offset()[pe],$e=!1,b[Mt]-Ge>this.items[z][Ae]/2&&($e=!0),Math.abs(b[Mt]-Ge)<Y&&(Y=Math.abs(b[Mt]-Ge),ne=this.items[z],this.direction=$e?"up":"down"));if(!ne&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[Tt])return void(this.currentContainer.containerCache.over||(this.containers[Tt]._trigger("over",b,this._uiHash()),this.currentContainer.containerCache.over=1));ne?this._rearrange(b,ne,null,!0):this._rearrange(b,null,this.containers[Tt].element,!0),this._trigger("change",b,this._uiHash()),this.containers[Tt]._trigger("change",b,this._uiHash(this)),this.currentContainer=this.containers[Tt],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[Tt]._trigger("over",b,this._uiHash(this)),this.containers[Tt].containerCache.over=1}},_createHelper:function(b){var k=this.options,z=l.isFunction(k.helper)?l(k.helper.apply(this.element[0],[b,this.currentItem])):"clone"===k.helper?this.currentItem.clone():this.currentItem;return z.parents("body").length||l("parent"!==k.appendTo?k.appendTo:this.currentItem[0].parentNode)[0].appendChild(z[0]),z[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!z[0].style.width||k.forceHelperSize)&&z.width(this.currentItem.width()),(!z[0].style.height||k.forceHelperSize)&&z.height(this.currentItem.height()),z},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),l.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&l.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&l.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,k,z,Y=this.options;"parent"===Y.containment&&(Y.containment=this.helper[0].parentNode),("document"===Y.containment||"window"===Y.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===Y.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===Y.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(Y.containment)||(b=l(Y.containment)[0],k=l(Y.containment).offset(),z="hidden"!==l(b).css("overflow"),this.containment=[k.left+(parseInt(l(b).css("borderLeftWidth"),10)||0)+(parseInt(l(b).css("paddingLeft"),10)||0)-this.margins.left,k.top+(parseInt(l(b).css("borderTopWidth"),10)||0)+(parseInt(l(b).css("paddingTop"),10)||0)-this.margins.top,k.left+(z?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(l(b).css("borderLeftWidth"),10)||0)-(parseInt(l(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,k.top+(z?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(l(b).css("borderTopWidth"),10)||0)-(parseInt(l(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,k){k||(k=this.position);var z="absolute"===b?1:-1,Y="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&l.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,ne=/(html|body)/i.test(Y[0].tagName);return{top:k.top+this.offset.relative.top*z+this.offset.parent.top*z-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():ne?0:Y.scrollTop())*z,left:k.left+this.offset.relative.left*z+this.offset.parent.left*z-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():ne?0:Y.scrollLeft())*z}},_generatePosition:function(b){var k,z,Y=this.options,ne=b.pageX,pe=b.pageY,Ae="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&l.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,Ge=/(html|body)/i.test(Ae[0].tagName);return"relative"===this.cssPosition&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(ne=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(pe=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(ne=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(pe=this.containment[3]+this.offset.click.top)),Y.grid&&(k=this.originalPageY+Math.round((pe-this.originalPageY)/Y.grid[1])*Y.grid[1],pe=this.containment?k-this.offset.click.top>=this.containment[1]&&k-this.offset.click.top<=this.containment[3]?k:k-this.offset.click.top>=this.containment[1]?k-Y.grid[1]:k+Y.grid[1]:k,z=this.originalPageX+Math.round((ne-this.originalPageX)/Y.grid[0])*Y.grid[0],ne=this.containment?z-this.offset.click.left>=this.containment[0]&&z-this.offset.click.left<=this.containment[2]?z:z-this.offset.click.left>=this.containment[0]?z-Y.grid[0]:z+Y.grid[0]:z)),{top:pe-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():Ge?0:Ae.scrollTop()),left:ne-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():Ge?0:Ae.scrollLeft())}},_rearrange:function(b,k,z,Y){z?z[0].appendChild(this.placeholder[0]):k.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?k.item[0]:k.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var ne=this.counter;this._delay(function(){ne===this.counter&&this.refreshPositions(!Y)})},_clear:function(b,k){this.reverting=!1;var z,Y=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(z in this._storedCSS)("auto"===this._storedCSS[z]||"static"===this._storedCSS[z])&&(this._storedCSS[z]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function ne(pe,Ae,Ge){return function($e){Ge._trigger(pe,$e,Ae._uiHash(Ae))}}for(this.fromOutside&&!k&&Y.push(function(pe){this._trigger("receive",pe,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!k&&Y.push(function(pe){this._trigger("update",pe,this._uiHash())}),this!==this.currentContainer&&(k||(Y.push(function(pe){this._trigger("remove",pe,this._uiHash())}),Y.push(function(pe){return function(Ae){pe._trigger("receive",Ae,this._uiHash(this))}}.call(this,this.currentContainer)),Y.push(function(pe){return function(Ae){pe._trigger("update",Ae,this._uiHash(this))}}.call(this,this.currentContainer)))),z=this.containers.length-1;z>=0;z--)k||Y.push(ne("deactivate",this,this.containers[z])),this.containers[z].containerCache.over&&(Y.push(ne("out",this,this.containers[z])),this.containers[z].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,k||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!k){for(z=0;z<Y.length;z++)Y[z].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===l.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var k=b||this;return{helper:k.helper,placeholder:k.placeholder||l([]),position:k.position,originalPosition:k.originalPosition,offset:k.positionAbs,item:k.currentItem,sender:b?b.element:null}}}),l.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var b=this.options;this.prevShow=this.prevHide=l(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),!b.collapsible&&(!1===b.active||null==b.active)&&(b.active=0),this._processPanels(),b.active<0&&(b.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():l()}},_createIcons:function(){var b,k,z=this.options.icons;z&&(b=l("<span>"),this._addClass(b,"ui-accordion-header-icon","ui-icon "+z.header),b.prependTo(this.headers),k=this.active.children(".ui-accordion-header-icon"),this._removeClass(k,z.header)._addClass(k,null,z.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var b;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),b=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&b.css("height","")},_setOption:function(b,k){"active"!==b?("event"===b&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(k)),this._super(b,k),"collapsible"===b&&!k&&!1===this.options.active&&this._activate(0),"icons"===b&&(this._destroyIcons(),k&&this._createIcons())):this._activate(k)},_setOptionDisabled:function(b){this._super(b),this.element.attr("aria-disabled",b),this._toggleClass(null,"ui-state-disabled",!!b),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!b)},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var k=l.ui.keyCode,z=this.headers.length,Y=this.headers.index(b.target),ne=!1;switch(b.keyCode){case k.RIGHT:case k.DOWN:ne=this.headers[(Y+1)%z];break;case k.LEFT:case k.UP:ne=this.headers[(Y-1+z)%z];break;case k.SPACE:case k.ENTER:this._eventHandler(b);break;case k.HOME:ne=this.headers[0];break;case k.END:ne=this.headers[z-1]}ne&&(l(b.target).attr("tabIndex",-1),l(ne).attr("tabIndex",0),l(ne).trigger("focus"),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===l.ui.keyCode.UP&&b.ctrlKey&&l(b.currentTarget).prev().trigger("focus")},refresh:function(){var b=this.options;this._processPanels(),!1===b.active&&!0===b.collapsible||!this.headers.length?(b.active=!1,this.active=l()):!1===b.active?this._activate(0):this.active.length&&!l.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(b.active=!1,this.active=l()):this._activate(Math.max(0,b.active-1)):b.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var b=this.headers,k=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),k&&(this._off(b.not(this.headers)),this._off(k.not(this.panels)))},_refresh:function(){var b,k=this.options,z=k.heightStyle,Y=this.element.parent();this.active=this._findActive(k.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var ne=l(this),pe=ne.uniqueId().attr("id"),Ae=ne.next(),Ge=Ae.uniqueId().attr("id");ne.attr("aria-controls",Ge),Ae.attr("aria-labelledby",pe)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(k.event),"fill"===z?(b=Y.height(),this.element.siblings(":visible").each(function(){var ne=l(this),pe=ne.css("position");"absolute"===pe||"fixed"===pe||(b-=ne.outerHeight(!0))}),this.headers.each(function(){b-=l(this).outerHeight(!0)}),this.headers.next().each(function(){l(this).height(Math.max(0,b-l(this).innerHeight()+l(this).height()))}).css("overflow","auto")):"auto"===z&&(b=0,this.headers.next().each(function(){var ne=l(this).is(":visible");ne||l(this).show(),b=Math.max(b,l(this).css("height","").height()),ne||l(this).hide()}).height(b))},_activate:function(b){var k=this._findActive(b)[0];k!==this.active[0]&&this._eventHandler({target:k=k||this.active[0],currentTarget:k,preventDefault:l.noop})},_findActive:function(b){return"number"==typeof b?this.headers.eq(b):l()},_setupEvents:function(b){var k={keydown:"_keydown"};b&&l.each(b.split(" "),function(z,Y){k[Y]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,k),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(b){var k,z,Y=this.options,ne=this.active,pe=l(b.currentTarget),Ae=pe[0]===ne[0],Ge=Ae&&Y.collapsible,$e=Ge?l():pe.next(),yt=ne.next(),Mt={oldHeader:ne,oldPanel:yt,newHeader:Ge?l():pe,newPanel:$e};b.preventDefault(),(!Ae||Y.collapsible)&&!1!==this._trigger("beforeActivate",b,Mt)&&(Y.active=!Ge&&this.headers.index(pe),this.active=Ae?l():pe,this._toggle(Mt),this._removeClass(ne,"ui-accordion-header-active","ui-state-active"),Y.icons&&(k=ne.children(".ui-accordion-header-icon"),this._removeClass(k,null,Y.icons.activeHeader)._addClass(k,null,Y.icons.header)),Ae||(this._removeClass(pe,"ui-accordion-header-collapsed")._addClass(pe,"ui-accordion-header-active","ui-state-active"),Y.icons&&(z=pe.children(".ui-accordion-header-icon"),this._removeClass(z,null,Y.icons.header)._addClass(z,null,Y.icons.activeHeader)),this._addClass(pe.next(),"ui-accordion-content-active")))},_toggle:function(b){var k=b.newPanel,z=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=k,this.prevHide=z,this.options.animate?this._animate(k,z,b):(z.hide(),k.show(),this._toggleComplete(b)),z.attr({"aria-hidden":"true"}),z.prev().attr({"aria-selected":"false","aria-expanded":"false"}),k.length&&z.length?z.prev().attr({tabIndex:-1,"aria-expanded":"false"}):k.length&&this.headers.filter(function(){return 0===parseInt(l(this).attr("tabIndex"),10)}).attr("tabIndex",-1),k.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(b,k,z){var Y,ne,pe,Ae=this,Ge=0,$e=b.css("box-sizing"),yt=b.length&&(!k.length||b.index()<k.index()),Mt=this.options.animate||{},tn=yt&&Mt.down||Mt,Tt=function(){Ae._toggleComplete(z)};return"number"==typeof tn&&(pe=tn),"string"==typeof tn&&(ne=tn),ne=ne||tn.easing||Mt.easing,pe=pe||tn.duration||Mt.duration,k.length?b.length?(Y=b.show().outerHeight(),k.animate(this.hideProps,{duration:pe,easing:ne,step:function(qt,sn){sn.now=Math.round(qt)}}),void b.hide().animate(this.showProps,{duration:pe,easing:ne,complete:Tt,step:function(qt,sn){sn.now=Math.round(qt),"height"!==sn.prop?"content-box"===$e&&(Ge+=sn.now):"content"!==Ae.options.heightStyle&&(sn.now=Math.round(Y-k.outerHeight()-Ge),Ge=0)}})):k.animate(this.hideProps,pe,ne,Tt):b.animate(this.showProps,pe,ne,Tt)},_toggleComplete:function(b){var k=b.oldPanel,z=k.prev();this._removeClass(k,"ui-accordion-content-active"),this._removeClass(z,"ui-accordion-header-active")._addClass(z,"ui-accordion-header-collapsed"),k.length&&(k.parent()[0].className=k.parent()[0].className),this._trigger("activate",null,b)}}),l.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(b){b.preventDefault()},"click .ui-menu-item":function(b){var k=l(b.target),z=l(l.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&k.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),k.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&z.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){if(!this.previousFilter){var k=l(b.target).closest(".ui-menu-item"),z=l(b.currentTarget);k[0]===z[0]&&(this._removeClass(z.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(b,z))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(b,k){var z=this.active||this.element.find(this.options.items).eq(0);k||this.focus(b,z)},blur:function(b){this._delay(function(){!l.contains(this.element[0],l.ui.safeActiveElement(this.document[0]))&&this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(b){this._closeOnDocumentClick(b)&&this.collapseAll(b),this.mouseHandled=!1}})},_destroy:function(){var k=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),k.children().each(function(){var z=l(this);z.data("ui-menu-submenu-caret")&&z.remove()})},_keydown:function(b){var k,z,Y,ne,pe=!0;switch(b.keyCode){case l.ui.keyCode.PAGE_UP:this.previousPage(b);break;case l.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case l.ui.keyCode.HOME:this._move("first","first",b);break;case l.ui.keyCode.END:this._move("last","last",b);break;case l.ui.keyCode.UP:this.previous(b);break;case l.ui.keyCode.DOWN:this.next(b);break;case l.ui.keyCode.LEFT:this.collapse(b);break;case l.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case l.ui.keyCode.ENTER:case l.ui.keyCode.SPACE:this._activate(b);break;case l.ui.keyCode.ESCAPE:this.collapse(b);break;default:pe=!1,z=this.previousFilter||"",ne=!1,Y=b.keyCode>=96&&b.keyCode<=105?(b.keyCode-96).toString():String.fromCharCode(b.keyCode),clearTimeout(this.filterTimer),Y===z?ne=!0:Y=z+Y,k=this._filterMenuItems(Y),(k=ne&&-1!==k.index(this.active.next())?this.active.nextAll(".ui-menu-item"):k).length||(Y=String.fromCharCode(b.keyCode),k=this._filterMenuItems(Y)),k.length?(this.focus(b,k),this.previousFilter=Y,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}pe&&b.preventDefault()},_activate:function(b){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(b):this.select(b))},refresh:function(){var k,z,Y,ne,pe=this,Ae=this.options.icons.submenu,Ge=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),z=Ge.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var $e=l(this),yt=$e.prev(),Mt=l("<span>").data("ui-menu-submenu-caret",!0);pe._addClass(Mt,"ui-menu-icon","ui-icon "+Ae),yt.attr("aria-haspopup","true").prepend(Mt),$e.attr("aria-labelledby",yt.attr("id"))}),this._addClass(z,"ui-menu","ui-widget ui-widget-content ui-front"),(k=Ge.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var $e=l(this);pe._isDivider($e)&&pe._addClass($e,"ui-menu-divider","ui-widget-content")}),ne=(Y=k.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(Y,"ui-menu-item")._addClass(ne,"ui-menu-item-wrapper"),k.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!l.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(b,k){if("icons"===b){var z=this.element.find(".ui-menu-icon");this._removeClass(z,null,this.options.icons.submenu)._addClass(z,null,k.submenu)}this._super(b,k)},_setOptionDisabled:function(b){this._super(b),this.element.attr("aria-disabled",String(b)),this._toggleClass(null,"ui-state-disabled",!!b)},focus:function(b,k){var z,Y,ne;this.blur(b,b&&"focus"===b.type),this._scrollIntoView(k),this.active=k.first(),Y=this.active.children(".ui-menu-item-wrapper"),this._addClass(Y,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",Y.attr("id")),ne=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(ne,null,"ui-state-active"),b&&"keydown"===b.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(z=k.children(".ui-menu")).length&&b&&/^mouse/.test(b.type)&&this._startOpening(z),this.activeMenu=k.parent(),this._trigger("focus",b,{item:k})},_scrollIntoView:function(b){var k,z,Y,ne,pe,Ae;this._hasScroll()&&(k=parseFloat(l.css(this.activeMenu[0],"borderTopWidth"))||0,z=parseFloat(l.css(this.activeMenu[0],"paddingTop"))||0,Y=b.offset().top-this.activeMenu.offset().top-k-z,ne=this.activeMenu.scrollTop(),pe=this.activeMenu.height(),Ae=b.outerHeight(),Y<0?this.activeMenu.scrollTop(ne+Y):Y+Ae>pe&&this.activeMenu.scrollTop(ne+Y-pe+Ae))},blur:function(b,k){k||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",b,{item:this.active}),this.active=null)},_startOpening:function(b){clearTimeout(this.timer),"true"===b.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(b)},this.delay))},_open:function(b){var k=l.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(k)},collapseAll:function(b,k){clearTimeout(this.timer),this.timer=this._delay(function(){var z=k?this.element:l(b&&b.target).closest(this.element.find(".ui-menu"));z.length||(z=this.element),this._close(z),this.blur(b),this._removeClass(z.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=z},this.delay)},_close:function(b){b||(b=this.active?this.active.parent():this.element),b.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(b){return!l(b.target).closest(".ui-menu").length},_isDivider:function(b){return!/[^\-\u2014\u2013\s]/.test(b.text())},collapse:function(b){var k=this.active&&this.active.parent().closest(".ui-menu-item",this.element);k&&k.length&&(this._close(),this.focus(b,k))},expand:function(b){var k=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();k&&k.length&&(this._open(k.parent()),this._delay(function(){this.focus(b,k)}))},next:function(b){this._move("next","first",b)},previous:function(b){this._move("prev","last",b)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(b,k,z){var Y;this.active&&(Y="first"===b||"last"===b?this.active["first"===b?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[b+"All"](".ui-menu-item").eq(0)),(!Y||!Y.length||!this.active)&&(Y=this.activeMenu.find(this.options.items)[k]()),this.focus(z,Y)},nextPage:function(b){var k,z,Y;this.active?this.isLastItem()||(this._hasScroll()?(z=this.active.offset().top,Y=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(k=l(this)).offset().top-z-Y<0}),this.focus(b,k)):this.focus(b,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(b)},previousPage:function(b){var k,z,Y;this.active?this.isFirstItem()||(this._hasScroll()?(z=this.active.offset().top,Y=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return(k=l(this)).offset().top-z+Y>0}),this.focus(b,k)):this.focus(b,this.activeMenu.find(this.options.items).first())):this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||l(b.target).closest(".ui-menu-item");var k={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,k)},_filterMenuItems:function(b){var k=b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),z=new RegExp("^"+k,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return z.test(l.trim(l(this).children(".ui-menu-item-wrapper").text()))})}}),l.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var b,k,z,Y=this.element[0].nodeName.toLowerCase(),ne="textarea"===Y,pe="input"===Y;this.isMultiLine=ne||!pe&&this._isContentEditable(this.element),this.valueMethod=this.element[ne||pe?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(Ae){if(this.element.prop("readOnly"))return b=!0,z=!0,void(k=!0);b=!1,z=!1,k=!1;var Ge=l.ui.keyCode;switch(Ae.keyCode){case Ge.PAGE_UP:b=!0,this._move("previousPage",Ae);break;case Ge.PAGE_DOWN:b=!0,this._move("nextPage",Ae);break;case Ge.UP:b=!0,this._keyEvent("previous",Ae);break;case Ge.DOWN:b=!0,this._keyEvent("next",Ae);break;case Ge.ENTER:this.menu.active&&(b=!0,Ae.preventDefault(),this.menu.select(Ae));break;case Ge.TAB:this.menu.active&&this.menu.select(Ae);break;case Ge.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(Ae),Ae.preventDefault());break;default:k=!0,this._searchTimeout(Ae)}},keypress:function(Ae){if(b)return b=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&Ae.preventDefault());if(!k){var Ge=l.ui.keyCode;switch(Ae.keyCode){case Ge.PAGE_UP:this._move("previousPage",Ae);break;case Ge.PAGE_DOWN:this._move("nextPage",Ae);break;case Ge.UP:this._keyEvent("previous",Ae);break;case Ge.DOWN:this._keyEvent("next",Ae)}}},input:function(Ae){if(z)return z=!1,void Ae.preventDefault();this._searchTimeout(Ae)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(Ae){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(Ae),this._change(Ae))}}),this._initSource(),this.menu=l("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(Ae){Ae.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==l.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(Ae,Ge){var $e,yt;if(this.isNewMenu&&(this.isNewMenu=!1,Ae.originalEvent&&/^mouse/.test(Ae.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){l(Ae.target).trigger(Ae.originalEvent)});yt=Ge.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",Ae,{item:yt})&&Ae.originalEvent&&/^key/.test(Ae.originalEvent.type)&&this._value(yt.value),($e=Ge.item.attr("aria-label")||yt.value)&&l.trim($e).length&&(this.liveRegion.children().hide(),l("<div>").text($e).appendTo(this.liveRegion))},menuselect:function(Ae,Ge){var $e=Ge.item.data("ui-autocomplete-item"),yt=this.previous;this.element[0]!==l.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=yt,this._delay(function(){this.previous=yt,this.selectedItem=$e})),!1!==this._trigger("select",Ae,{item:$e})&&this._value($e.value),this.term=this._value(),this.close(Ae),this.selectedItem=$e}}),this.liveRegion=l("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(b,k){this._super(b,k),"source"===b&&this._initSource(),"appendTo"===b&&this.menu.element.appendTo(this._appendTo()),"disabled"===b&&k&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(b){var k=this.menu.element[0];return b.target===this.element[0]||b.target===k||l.contains(k,b.target)},_closeOnClickOutside:function(b){this._isEventTargetInWidget(b)||this.close()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?l(b):this.document.find(b).eq(0)),(!b||!b[0])&&(b=this.element.closest(".ui-front, dialog")),b.length||(b=this.document[0].body),b},_initSource:function(){var b,k,z=this;l.isArray(this.options.source)?(b=this.options.source,this.source=function(Y,ne){ne(l.ui.autocomplete.filter(b,Y.term))}):"string"==typeof this.options.source?(k=this.options.source,this.source=function(Y,ne){z.xhr&&z.xhr.abort(),z.xhr=l.ajax({url:k,data:Y,dataType:"json",success:function(pe){ne(pe)},error:function(){ne([])}})}):this.source=this.options.source},_searchTimeout:function(b){clearTimeout(this.searching),this.searching=this._delay(function(){var k=this.term===this._value(),z=this.menu.element.is(":visible");(!k||k&&!z&&!(b.altKey||b.ctrlKey||b.metaKey||b.shiftKey))&&(this.selectedItem=null,this.search(null,b))},this.options.delay)},search:function(b,k){return b=null!=b?b:this._value(),this.term=this._value(),b.length<this.options.minLength?this.close(k):!1!==this._trigger("search",k)?this._search(b):void 0},_search:function(b){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:b},this._response())},_response:function(){var b=++this.requestIndex;return l.proxy(function(k){b===this.requestIndex&&this.__response(k),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(b){b&&(b=this._normalize(b)),this._trigger("response",null,{content:b}),!this.options.disabled&&b&&b.length&&!this.cancelSearch?(this._suggest(b),this._trigger("open")):this._close()},close:function(b){this.cancelSearch=!0,this._close(b)},_close:function(b){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",b))},_change:function(b){this.previous!==this._value()&&this._trigger("change",b,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:l.map(b,function(k){return"string"==typeof k?{label:k,value:k}:l.extend({},k,{label:k.label||k.value,value:k.value||k.label})})},_suggest:function(b){var k=this.menu.element.empty();this._renderMenu(k,b),this.isNewMenu=!0,this.menu.refresh(),k.show(),this._resizeMenu(),k.position(l.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var b=this.menu.element;b.outerWidth(Math.max(b.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,k){var z=this;l.each(k,function(Y,ne){z._renderItemData(b,ne)})},_renderItemData:function(b,k){return this._renderItem(b,k).data("ui-autocomplete-item",k)},_renderItem:function(b,k){return l("<li>").append(l("<div>").text(k.label)).appendTo(b)},_move:function(b,k){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(b)||this.menu.isLastItem()&&/^next/.test(b)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[b](k);this.search(null,k)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(b,k){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(b,k),k.preventDefault())},_isContentEditable:function(b){if(!b.length)return!1;var k=b.prop("contentEditable");return"inherit"===k?this._isContentEditable(b.parent()):"true"===k}}),l.extend(l.ui.autocomplete,{escapeRegex:function(b){return b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,k){var z=new RegExp(l.ui.autocomplete.escapeRegex(k),"i");return l.grep(b,function(Y){return z.test(Y.label||Y.value||Y)})}}),l.widget("ui.autocomplete",l.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(b){return b+(b>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(b){var k;this._superApply(arguments),!this.options.disabled&&!this.cancelSearch&&(k=b&&b.length?this.options.messages.results(b.length):this.options.messages.noResults,this.liveRegion.children().hide(),l("<div>").text(k).appendTo(this.liveRegion))}});var gr,Lt=/ui-corner-([a-z]){2,6}/g;function En(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},l.extend(this._defaults,this.regional[""]),this.regional.en=l.extend(!0,{},this.regional[""]),this.regional["en-US"]=l.extend(!0,{},this.regional.en),this.dpDiv=Dn(l("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function Dn(b){var k="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.on("mouseout",k,function(){l(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&l(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&l(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",k,ji)}function ji(){l.datepicker._isDisabledDatepicker(gr.inline?gr.dpDiv.parent()[0]:gr.input[0])||(l(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),l(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&l(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&l(this).addClass("ui-datepicker-next-hover"))}function ii(b,k){for(var z in l.extend(b,k),k)null==k[z]&&(b[z]=k[z]);return b}function dt(b){return function(){var k=this.element.val();b.apply(this,arguments),this._refresh(),k!==this.element.val()&&this._trigger("change")}}l.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var b=this,k=[];l.each(this.options.items,function(z,Y){var ne,pe={};if(Y){if("controlgroupLabel"===z)return(ne=b.element.find(Y)).each(function(){var Ae=l(this);Ae.children(".ui-controlgroup-label-contents").length||Ae.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),b._addClass(ne,null,"ui-widget ui-widget-content ui-state-default"),void(k=k.concat(ne.get()));!l.fn[z]||(pe=b["_"+z+"Options"]?b["_"+z+"Options"]("middle"):{classes:{}},b.element.find(Y).each(function(){var Ae=l(this),Ge=Ae[z]("instance"),$e=l.widget.extend({},pe);if("button"!==z||!Ae.parent(".ui-spinner").length){Ge||(Ge=Ae[z]()[z]("instance")),Ge&&($e.classes=b._resolveClassesValues($e.classes,Ge)),Ae[z]($e);var yt=Ae[z]("widget");l.data(yt[0],"ui-controlgroup-data",Ge||Ae[z]("instance")),k.push(yt[0])}}))}}),this.childWidgets=l(l.unique(k)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(b){this.childWidgets.each(function(){var z=l(this).data("ui-controlgroup-data");z&&z[b]&&z[b]()})},_updateCornerClass:function(b,k){var Y=this._buildSimpleOptions(k,"label").classes.label;this._removeClass(b,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(b,null,Y)},_buildSimpleOptions:function(b,k){var z="vertical"===this.options.direction,Y={classes:{}};return Y.classes[k]={middle:"",first:"ui-corner-"+(z?"top":"left"),last:"ui-corner-"+(z?"bottom":"right"),only:"ui-corner-all"}[b],Y},_spinnerOptions:function(b){var k=this._buildSimpleOptions(b,"ui-spinner");return k.classes["ui-spinner-up"]="",k.classes["ui-spinner-down"]="",k},_buttonOptions:function(b){return this._buildSimpleOptions(b,"ui-button")},_checkboxradioOptions:function(b){return this._buildSimpleOptions(b,"ui-checkboxradio-label")},_selectmenuOptions:function(b){var k="vertical"===this.options.direction;return{width:!!k&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(k?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(k?"top":"left")},last:{"ui-selectmenu-button-open":k?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(k?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[b]}},_resolveClassesValues:function(b,k){var z={};return l.each(b,function(Y){var ne=k.options.classes[Y]||"";ne=l.trim(ne.replace(Lt,"")),z[Y]=(ne+" "+b[Y]).replace(/\s+/g," ")}),z},_setOption:function(b,k){"direction"===b&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(b,k),"disabled"!==b?this.refresh():this._callChildMethod(k?"disable":"enable")},refresh:function(){var b,k=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),b=this.childWidgets,this.options.onlyVisible&&(b=b.filter(":visible")),b.length&&(l.each(["first","last"],function(z,Y){var ne=b[Y]().data("ui-controlgroup-data");if(ne&&k["_"+ne.widgetName+"Options"]){var pe=k["_"+ne.widgetName+"Options"](1===b.length?"only":Y);pe.classes=k._resolveClassesValues(pe.classes,ne),ne.element[ne.widgetName](pe)}else k._updateCornerClass(b[Y](),Y)}),this._callChildMethod("refresh"))}}),l.widget("ui.checkboxradio",[l.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var b,k,z=this,Y=this._super()||{};return this._readType(),k=this.element.labels(),this.label=l(k[k.length-1]),this.label.length||l.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){z.originalLabel+=3===this.nodeType?l(this).text():this.outerHTML}),this.originalLabel&&(Y.label=this.originalLabel),null!=(b=this.element[0].disabled)&&(Y.disabled=b),Y},_create:function(){var b=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),b&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var b=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,("input"!==b||!/radio|checkbox/.test(this.type))&&l.error("Can't create checkboxradio on element.nodeName="+b+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var k=this.element[0].name,z="input[name='"+l.ui.escapeSelector(k)+"']";return k?(this.form.length?l(this.form[0].elements).filter(z):l(z).filter(function(){return 0===l(this).form().length})).not(this.element):l([])},_toggleClasses:function(){var b=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",b),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",b)._toggleClass(this.icon,null,"ui-icon-blank",!b),"radio"===this.type&&this._getRadioGroup().each(function(){var k=l(this).checkboxradio("instance");k&&k._removeClass(k.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(b,k){if("label"!==b||k){if(this._super(b,k),"disabled"===b)return this._toggleClass(this.label,null,"ui-state-disabled",k),void(this.element[0].disabled=k);this.refresh()}},_updateIcon:function(b){var k="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=l("<span>"),this.iconSpace=l("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(k+=b?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,b?"ui-icon-blank":"ui-icon-check")):k+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",k),b||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var b=this.label.contents().not(this.element[0]);this.icon&&(b=b.not(this.icon[0])),this.iconSpace&&(b=b.not(this.iconSpace[0])),b.remove(),this.label.append(this.options.label)},refresh:function(){var b=this.element[0].checked,k=this.element[0].disabled;this._updateIcon(b),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",b),null!==this.options.label&&this._updateLabel(),k!==this.options.disabled&&this._setOptions({disabled:k})}}]),l.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var b,k=this._super()||{};return this.isInput=this.element.is("input"),null!=(b=this.element[0].disabled)&&(k.disabled=b),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(k.label=this.originalLabel),k},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(b){b.keyCode===l.ui.keyCode.SPACE&&(b.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),!this.options.showLabel&&!this.title&&this.element.attr("title",this.options.label)},_updateIcon:function(b,k){var z="iconPosition"!==b,Y=z?this.options.iconPosition:k,ne="top"===Y||"bottom"===Y;this.icon?z&&this._removeClass(this.icon,null,this.options.icon):(this.icon=l("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),z&&this._addClass(this.icon,null,k),this._attachIcon(Y),ne?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=l("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(Y))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(b){this.icon[/^(?:end|bottom)/.test(b)?"before":"after"](this.iconSpace)},_attachIcon:function(b){this.element[/^(?:end|bottom)/.test(b)?"append":"prepend"](this.icon)},_setOptions:function(b){!(void 0===b.showLabel?this.options.showLabel:b.showLabel)&&!(void 0===b.icon?this.options.icon:b.icon)&&(b.showLabel=!0),this._super(b)},_setOption:function(b,k){"icon"===b&&(k?this._updateIcon(b,k):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===b&&this._updateIcon(b,k),"showLabel"===b&&(this._toggleClass("ui-button-icon-only",null,!k),this._updateTooltip()),"label"===b&&(this.isInput?this.element.val(k):(this.element.html(k),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(b,k),"disabled"===b&&(this._toggleClass(null,"ui-state-disabled",k),this.element[0].disabled=k,k&&this.element.blur())},refresh:function(){var b=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOptions({disabled:b}),this._updateTooltip()}}),!1!==l.uiBackCompat&&(l.widget("ui.button",l.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(b,k){"text"!==b?("showLabel"===b&&(this.options.text=k),"icon"===b&&(this.options.icons.primary=k),"icons"===b&&(k.primary?(this._super("icon",k.primary),this._super("iconPosition","beginning")):k.secondary&&(this._super("icon",k.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",k)}}),l.fn.button=function(b){return function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?b.apply(this,arguments):(l.ui.checkboxradio||l.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(l.fn.button),l.fn.buttonset=function(){return l.ui.controlgroup||l.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),l.extend(l.ui,{datepicker:{version:"1.12.1"}}),l.extend(En.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(b){return ii(this._defaults,b||{}),this},_attachDatepicker:function(b,k){var z,Y,ne;Y="div"===(z=b.nodeName.toLowerCase())||"span"===z,b.id||(this.uuid+=1,b.id="dp"+this.uuid),(ne=this._newInst(l(b),Y)).settings=l.extend({},k||{}),"input"===z?this._connectDatepicker(b,ne):Y&&this._inlineDatepicker(b,ne)},_newInst:function(b,k){return{id:b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:k,dpDiv:k?Dn(l("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,k){var z=l(b);k.append=l([]),k.trigger=l([]),!z.hasClass(this.markerClassName)&&(this._attachments(z,k),z.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(k),l.data(b,"datepicker",k),k.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,k){var z,Y,ne,pe=this._get(k,"appendText"),Ae=this._get(k,"isRTL");k.append&&k.append.remove(),pe&&(k.append=l("<span class='"+this._appendClass+"'>"+pe+"</span>"),b[Ae?"before":"after"](k.append)),b.off("focus",this._showDatepicker),k.trigger&&k.trigger.remove(),("focus"===(z=this._get(k,"showOn"))||"both"===z)&&b.on("focus",this._showDatepicker),("button"===z||"both"===z)&&(Y=this._get(k,"buttonText"),ne=this._get(k,"buttonImage"),k.trigger=l(this._get(k,"buttonImageOnly")?l("<img/>").addClass(this._triggerClass).attr({src:ne,alt:Y,title:Y}):l("<button type='button'></button>").addClass(this._triggerClass).html(ne?l("<img/>").attr({src:ne,alt:Y,title:Y}):Y)),b[Ae?"before":"after"](k.trigger),k.trigger.on("click",function(){return l.datepicker._datepickerShowing&&l.datepicker._lastInput===b[0]?l.datepicker._hideDatepicker():(l.datepicker._datepickerShowing&&l.datepicker._lastInput!==b[0]&&l.datepicker._hideDatepicker(),l.datepicker._showDatepicker(b[0])),!1}))},_autoSize:function(b){if(this._get(b,"autoSize")&&!b.inline){var k,z,Y,ne,pe=new Date(2009,11,20),Ae=this._get(b,"dateFormat");Ae.match(/[DM]/)&&(pe.setMonth((k=function(Ge){for(z=0,Y=0,ne=0;ne<Ge.length;ne++)Ge[ne].length>z&&(z=Ge[ne].length,Y=ne);return Y})(this._get(b,Ae.match(/MM/)?"monthNames":"monthNamesShort"))),pe.setDate(k(this._get(b,Ae.match(/DD/)?"dayNames":"dayNamesShort"))+20-pe.getDay())),b.input.attr("size",this._formatDate(b,pe).length)}},_inlineDatepicker:function(b,k){var z=l(b);z.hasClass(this.markerClassName)||(z.addClass(this.markerClassName).append(k.dpDiv),l.data(b,"datepicker",k),this._setDate(k,this._getDefaultDate(k),!0),this._updateDatepicker(k),this._updateAlternate(k),k.settings.disabled&&this._disableDatepicker(b),k.dpDiv.css("display","block"))},_dialogDatepicker:function(b,k,z,Y,ne){var Ae,Ge,$e,yt,Mt=this._dialogInst;return Mt||(this.uuid+=1,this._dialogInput=l("<input type='text' id='dp"+this.uuid+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),l("body").append(this._dialogInput),(Mt=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},l.data(this._dialogInput[0],"datepicker",Mt)),ii(Mt.settings,Y||{}),k=k&&k.constructor===Date?this._formatDate(Mt,k):k,this._dialogInput.val(k),this._pos=ne?ne.length?ne:[ne.pageX,ne.pageY]:null,this._pos||(Ae=document.documentElement.clientWidth,Ge=document.documentElement.clientHeight,$e=document.documentElement.scrollLeft||document.body.scrollLeft,yt=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[Ae/2-100+$e,Ge/2-150+yt]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),Mt.settings.onSelect=z,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),l.blockUI&&l.blockUI(this.dpDiv),l.data(this._dialogInput[0],"datepicker",Mt),this},_destroyDatepicker:function(b){var k,z=l(b),Y=l.data(b,"datepicker");!z.hasClass(this.markerClassName)||(k=b.nodeName.toLowerCase(),l.removeData(b,"datepicker"),"input"===k?(Y.append.remove(),Y.trigger.remove(),z.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):("div"===k||"span"===k)&&z.removeClass(this.markerClassName).empty(),gr===Y&&(gr=null))},_enableDatepicker:function(b){var k,z,Y=l(b),ne=l.data(b,"datepicker");!Y.hasClass(this.markerClassName)||("input"===(k=b.nodeName.toLowerCase())?(b.disabled=!1,ne.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===k||"span"===k)&&((z=Y.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),z.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=l.map(this._disabledInputs,function(pe){return pe===b?null:pe}))},_disableDatepicker:function(b){var k,z,Y=l(b),ne=l.data(b,"datepicker");!Y.hasClass(this.markerClassName)||("input"===(k=b.nodeName.toLowerCase())?(b.disabled=!0,ne.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===k||"span"===k)&&((z=Y.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),z.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=l.map(this._disabledInputs,function(pe){return pe===b?null:pe}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(b){if(!b)return!1;for(var k=0;k<this._disabledInputs.length;k++)if(this._disabledInputs[k]===b)return!0;return!1},_getInst:function(b){try{return l.data(b,"datepicker")}catch(k){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(b,k,z){var Y,ne,pe,Ae,Ge=this._getInst(b);if(2===arguments.length&&"string"==typeof k)return"defaults"===k?l.extend({},l.datepicker._defaults):Ge?"all"===k?l.extend({},Ge.settings):this._get(Ge,k):null;Y=k||{},"string"==typeof k&&((Y={})[k]=z),Ge&&(this._curInst===Ge&&this._hideDatepicker(),ne=this._getDateDatepicker(b,!0),pe=this._getMinMaxDate(Ge,"min"),Ae=this._getMinMaxDate(Ge,"max"),ii(Ge.settings,Y),null!==pe&&void 0!==Y.dateFormat&&void 0===Y.minDate&&(Ge.settings.minDate=this._formatDate(Ge,pe)),null!==Ae&&void 0!==Y.dateFormat&&void 0===Y.maxDate&&(Ge.settings.maxDate=this._formatDate(Ge,Ae)),"disabled"in Y&&(Y.disabled?this._disableDatepicker(b):this._enableDatepicker(b)),this._attachments(l(b),Ge),this._autoSize(Ge),this._setDate(Ge,ne),this._updateAlternate(Ge),this._updateDatepicker(Ge))},_changeDatepicker:function(b,k,z){this._optionDatepicker(b,k,z)},_refreshDatepicker:function(b){var k=this._getInst(b);k&&this._updateDatepicker(k)},_setDateDatepicker:function(b,k){var z=this._getInst(b);z&&(this._setDate(z,k),this._updateDatepicker(z),this._updateAlternate(z))},_getDateDatepicker:function(b,k){var z=this._getInst(b);return z&&!z.inline&&this._setDateFromField(z,k),z?this._getDate(z):null},_doKeyDown:function(b){var k,z,Y,ne=l.datepicker._getInst(b.target),pe=!0,Ae=ne.dpDiv.is(".ui-datepicker-rtl");if(ne._keyEvent=!0,l.datepicker._datepickerShowing)switch(b.keyCode){case 9:l.datepicker._hideDatepicker(),pe=!1;break;case 13:return(Y=l("td."+l.datepicker._dayOverClass+":not(."+l.datepicker._currentClass+")",ne.dpDiv))[0]&&l.datepicker._selectDay(b.target,ne.selectedMonth,ne.selectedYear,Y[0]),(k=l.datepicker._get(ne,"onSelect"))?(z=l.datepicker._formatDate(ne),k.apply(ne.input?ne.input[0]:null,[z,ne])):l.datepicker._hideDatepicker(),!1;case 27:l.datepicker._hideDatepicker();break;case 33:l.datepicker._adjustDate(b.target,b.ctrlKey?-l.datepicker._get(ne,"stepBigMonths"):-l.datepicker._get(ne,"stepMonths"),"M");break;case 34:l.datepicker._adjustDate(b.target,b.ctrlKey?+l.datepicker._get(ne,"stepBigMonths"):+l.datepicker._get(ne,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&l.datepicker._clearDate(b.target),pe=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&l.datepicker._gotoToday(b.target),pe=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&l.datepicker._adjustDate(b.target,Ae?1:-1,"D"),pe=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&l.datepicker._adjustDate(b.target,b.ctrlKey?-l.datepicker._get(ne,"stepBigMonths"):-l.datepicker._get(ne,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&l.datepicker._adjustDate(b.target,-7,"D"),pe=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&l.datepicker._adjustDate(b.target,Ae?-1:1,"D"),pe=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&l.datepicker._adjustDate(b.target,b.ctrlKey?+l.datepicker._get(ne,"stepBigMonths"):+l.datepicker._get(ne,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&l.datepicker._adjustDate(b.target,7,"D"),pe=b.ctrlKey||b.metaKey;break;default:pe=!1}else 36===b.keyCode&&b.ctrlKey?l.datepicker._showDatepicker(this):pe=!1;pe&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(b){var k,z,Y=l.datepicker._getInst(b.target);if(l.datepicker._get(Y,"constrainInput"))return k=l.datepicker._possibleChars(l.datepicker._get(Y,"dateFormat")),z=String.fromCharCode(null==b.charCode?b.keyCode:b.charCode),b.ctrlKey||b.metaKey||z<" "||!k||k.indexOf(z)>-1},_doKeyUp:function(b){var z=l.datepicker._getInst(b.target);if(z.input.val()!==z.lastVal)try{l.datepicker.parseDate(l.datepicker._get(z,"dateFormat"),z.input?z.input.val():null,l.datepicker._getFormatConfig(z))&&(l.datepicker._setDateFromField(z),l.datepicker._updateAlternate(z),l.datepicker._updateDatepicker(z))}catch(Y){}return!0},_showDatepicker:function(b){var k,z,Y,ne,pe,Ae,Ge;"input"!==(b=b.target||b).nodeName.toLowerCase()&&(b=l("input",b.parentNode)[0]),l.datepicker._isDisabledDatepicker(b)||l.datepicker._lastInput===b||(k=l.datepicker._getInst(b),l.datepicker._curInst&&l.datepicker._curInst!==k&&(l.datepicker._curInst.dpDiv.stop(!0,!0),k&&l.datepicker._datepickerShowing&&l.datepicker._hideDatepicker(l.datepicker._curInst.input[0])),!1!==(Y=(z=l.datepicker._get(k,"beforeShow"))?z.apply(b,[b,k]):{})&&(ii(k.settings,Y),k.lastVal=null,l.datepicker._lastInput=b,l.datepicker._setDateFromField(k),l.datepicker._inDialog&&(b.value=""),l.datepicker._pos||(l.datepicker._pos=l.datepicker._findPos(b),l.datepicker._pos[1]+=b.offsetHeight),ne=!1,l(b).parents().each(function(){return!(ne|="fixed"===l(this).css("position"))}),pe={left:l.datepicker._pos[0],top:l.datepicker._pos[1]},l.datepicker._pos=null,k.dpDiv.empty(),k.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),l.datepicker._updateDatepicker(k),pe=l.datepicker._checkOffset(k,pe,ne),k.dpDiv.css({position:l.datepicker._inDialog&&l.blockUI?"static":ne?"fixed":"absolute",display:"none",left:pe.left+"px",top:pe.top+"px"}),k.inline||(Ae=l.datepicker._get(k,"showAnim"),Ge=l.datepicker._get(k,"duration"),k.dpDiv.css("z-index",function zi(b){for(var k,z;b.length&&b[0]!==document;){if(("absolute"===(k=b.css("position"))||"relative"===k||"fixed"===k)&&(z=parseInt(b.css("zIndex"),10),!isNaN(z)&&0!==z))return z;b=b.parent()}return 0}(l(b))+1),l.datepicker._datepickerShowing=!0,l.effects&&l.effects.effect[Ae]?k.dpDiv.show(Ae,l.datepicker._get(k,"showOptions"),Ge):k.dpDiv[Ae||"show"](Ae?Ge:null),l.datepicker._shouldFocusInput(k)&&k.input.trigger("focus"),l.datepicker._curInst=k)))},_updateDatepicker:function(b){this.maxRows=4,gr=b,b.dpDiv.empty().append(this._generateHTML(b)),this._attachHandlers(b);var k,z=this._getNumberOfMonths(b),Y=z[1],pe=b.dpDiv.find("."+this._dayOverClass+" a");pe.length>0&&ji.apply(pe.get(0)),b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),Y>1&&b.dpDiv.addClass("ui-datepicker-multi-"+Y).css("width",17*Y+"em"),b.dpDiv[(1!==z[0]||1!==z[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),b===l.datepicker._curInst&&l.datepicker._datepickerShowing&&l.datepicker._shouldFocusInput(b)&&b.input.trigger("focus"),b.yearshtml&&(k=b.yearshtml,setTimeout(function(){k===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml),k=b.yearshtml=null},0))},_shouldFocusInput:function(b){return b.input&&b.input.is(":visible")&&!b.input.is(":disabled")&&!b.input.is(":focus")},_checkOffset:function(b,k,z){var Y=b.dpDiv.outerWidth(),ne=b.dpDiv.outerHeight(),pe=b.input?b.input.outerWidth():0,Ae=b.input?b.input.outerHeight():0,Ge=document.documentElement.clientWidth+(z?0:l(document).scrollLeft()),$e=document.documentElement.clientHeight+(z?0:l(document).scrollTop());return k.left-=this._get(b,"isRTL")?Y-pe:0,k.left-=z&&k.left===b.input.offset().left?l(document).scrollLeft():0,k.top-=z&&k.top===b.input.offset().top+Ae?l(document).scrollTop():0,k.left-=Math.min(k.left,k.left+Y>Ge&&Ge>Y?Math.abs(k.left+Y-Ge):0),k.top-=Math.min(k.top,k.top+ne>$e&&$e>ne?Math.abs(ne+Ae):0),k},_findPos:function(b){for(var k,z=this._getInst(b),Y=this._get(z,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||l.expr.filters.hidden(b));)b=b[Y?"previousSibling":"nextSibling"];return[(k=l(b).offset()).left,k.top]},_hideDatepicker:function(b){var k,z,Y,ne,pe=this._curInst;!pe||b&&pe!==l.data(b,"datepicker")||this._datepickerShowing&&(k=this._get(pe,"showAnim"),z=this._get(pe,"duration"),Y=function(){l.datepicker._tidyDialog(pe)},l.effects&&(l.effects.effect[k]||l.effects[k])?pe.dpDiv.hide(k,l.datepicker._get(pe,"showOptions"),z,Y):pe.dpDiv["slideDown"===k?"slideUp":"fadeIn"===k?"fadeOut":"hide"](k?z:null,Y),k||Y(),this._datepickerShowing=!1,(ne=this._get(pe,"onClose"))&&ne.apply(pe.input?pe.input[0]:null,[pe.input?pe.input.val():"",pe]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),l.blockUI&&(l.unblockUI(),l("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(b){b.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(l.datepicker._curInst){var k=l(b.target),z=l.datepicker._getInst(k[0]);(k[0].id!==l.datepicker._mainDivId&&0===k.parents("#"+l.datepicker._mainDivId).length&&!k.hasClass(l.datepicker.markerClassName)&&!k.closest("."+l.datepicker._triggerClass).length&&l.datepicker._datepickerShowing&&(!l.datepicker._inDialog||!l.blockUI)||k.hasClass(l.datepicker.markerClassName)&&l.datepicker._curInst!==z)&&l.datepicker._hideDatepicker()}},_adjustDate:function(b,k,z){var Y=l(b),ne=this._getInst(Y[0]);this._isDisabledDatepicker(Y[0])||(this._adjustInstDate(ne,k+("M"===z?this._get(ne,"showCurrentAtPos"):0),z),this._updateDatepicker(ne))},_gotoToday:function(b){var k,z=l(b),Y=this._getInst(z[0]);this._get(Y,"gotoCurrent")&&Y.currentDay?(Y.selectedDay=Y.currentDay,Y.drawMonth=Y.selectedMonth=Y.currentMonth,Y.drawYear=Y.selectedYear=Y.currentYear):(k=new Date,Y.selectedDay=k.getDate(),Y.drawMonth=Y.selectedMonth=k.getMonth(),Y.drawYear=Y.selectedYear=k.getFullYear()),this._notifyChange(Y),this._adjustDate(z)},_selectMonthYear:function(b,k,z){var Y=l(b),ne=this._getInst(Y[0]);ne["selected"+("M"===z?"Month":"Year")]=ne["draw"+("M"===z?"Month":"Year")]=parseInt(k.options[k.selectedIndex].value,10),this._notifyChange(ne),this._adjustDate(Y)},_selectDay:function(b,k,z,Y){var ne,pe=l(b);l(Y).hasClass(this._unselectableClass)||this._isDisabledDatepicker(pe[0])||((ne=this._getInst(pe[0])).selectedDay=ne.currentDay=l("a",Y).html(),ne.selectedMonth=ne.currentMonth=k,ne.selectedYear=ne.currentYear=z,this._selectDate(b,this._formatDate(ne,ne.currentDay,ne.currentMonth,ne.currentYear)))},_clearDate:function(b){var k=l(b);this._selectDate(k,"")},_selectDate:function(b,k){var z,Y=l(b),ne=this._getInst(Y[0]);k=null!=k?k:this._formatDate(ne),ne.input&&ne.input.val(k),this._updateAlternate(ne),(z=this._get(ne,"onSelect"))?z.apply(ne.input?ne.input[0]:null,[k,ne]):ne.input&&ne.input.trigger("change"),ne.inline?this._updateDatepicker(ne):(this._hideDatepicker(),this._lastInput=ne.input[0],"object"!=typeof ne.input[0]&&ne.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(b){var k,z,Y,ne=this._get(b,"altField");ne&&(k=this._get(b,"altFormat")||this._get(b,"dateFormat"),z=this._getDate(b),Y=this.formatDate(k,z,this._getFormatConfig(b)),l(ne).val(Y))},noWeekends:function(b){var k=b.getDay();return[k>0&&k<6,""]},iso8601Week:function(b){var k,z=new Date(b.getTime());return z.setDate(z.getDate()+4-(z.getDay()||7)),k=z.getTime(),z.setMonth(0),z.setDate(1),Math.floor(Math.round((k-z)/864e5)/7)+1},parseDate:function(b,k,z){if(null==b||null==k)throw"Invalid arguments";if(""===(k="object"==typeof k?k.toString():k+""))return null;var Y,ne,pe,ln,Ae=0,Ge=(z?z.shortYearCutoff:null)||this._defaults.shortYearCutoff,$e="string"!=typeof Ge?Ge:(new Date).getFullYear()%100+parseInt(Ge,10),yt=(z?z.dayNamesShort:null)||this._defaults.dayNamesShort,Mt=(z?z.dayNames:null)||this._defaults.dayNames,tn=(z?z.monthNamesShort:null)||this._defaults.monthNamesShort,Tt=(z?z.monthNames:null)||this._defaults.monthNames,qt=-1,sn=-1,Dt=-1,nn=-1,bn=!1,qn=function(Ai){var Ii=Y+1<b.length&&b.charAt(Y+1)===Ai;return Ii&&Y++,Ii},ei=function(Ai){var Ii=qn(Ai),Er="@"===Ai?14:"!"===Ai?20:"y"===Ai&&Ii?4:"o"===Ai?3:2,$r=new RegExp("^\\d{"+("y"===Ai?Er:1)+","+Er+"}"),Ur=k.substring(Ae).match($r);if(!Ur)throw"Missing number at position "+Ae;return Ae+=Ur[0].length,parseInt(Ur[0],10)},Ri=function(Ai,Ii,Er){var Ui=-1,$r=l.map(qn(Ai)?Er:Ii,function(Ur,oa){return[[oa,Ur]]}).sort(function(Ur,oa){return-(Ur[1].length-oa[1].length)});if(l.each($r,function(Ur,oa){var rl=oa[1];if(k.substr(Ae,rl.length).toLowerCase()===rl.toLowerCase())return Ui=oa[0],Ae+=rl.length,!1}),-1!==Ui)return Ui+1;throw"Unknown name at position "+Ae},Di=function(){if(k.charAt(Ae)!==b.charAt(Y))throw"Unexpected literal at position "+Ae;Ae++};for(Y=0;Y<b.length;Y++)if(bn)"'"!==b.charAt(Y)||qn("'")?Di():bn=!1;else switch(b.charAt(Y)){case"d":Dt=ei("d");break;case"D":Ri("D",yt,Mt);break;case"o":nn=ei("o");break;case"m":sn=ei("m");break;case"M":sn=Ri("M",tn,Tt);break;case"y":qt=ei("y");break;case"@":qt=(ln=new Date(ei("@"))).getFullYear(),sn=ln.getMonth()+1,Dt=ln.getDate();break;case"!":qt=(ln=new Date((ei("!")-this._ticksTo1970)/1e4)).getFullYear(),sn=ln.getMonth()+1,Dt=ln.getDate();break;case"'":qn("'")?Di():bn=!0;break;default:Di()}if(Ae<k.length&&(pe=k.substr(Ae),!/^\s+/.test(pe)))throw"Extra/unparsed characters found in date: "+pe;if(-1===qt?qt=(new Date).getFullYear():qt<100&&(qt+=(new Date).getFullYear()-(new Date).getFullYear()%100+(qt<=$e?0:-100)),nn>-1)for(sn=1,Dt=nn;!(Dt<=(ne=this._getDaysInMonth(qt,sn-1)));)sn++,Dt-=ne;if((ln=this._daylightSavingAdjust(new Date(qt,sn-1,Dt))).getFullYear()!==qt||ln.getMonth()+1!==sn||ln.getDate()!==Dt)throw"Invalid date";return ln},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(b,k,z){if(!k)return"";var Y,ne=(z?z.dayNamesShort:null)||this._defaults.dayNamesShort,pe=(z?z.dayNames:null)||this._defaults.dayNames,Ae=(z?z.monthNamesShort:null)||this._defaults.monthNamesShort,Ge=(z?z.monthNames:null)||this._defaults.monthNames,$e=function(qt){var sn=Y+1<b.length&&b.charAt(Y+1)===qt;return sn&&Y++,sn},yt=function(qt,sn,Dt){var nn=""+sn;if($e(qt))for(;nn.length<Dt;)nn="0"+nn;return nn},Mt=function(qt,sn,Dt,nn){return $e(qt)?nn[sn]:Dt[sn]},tn="",Tt=!1;if(k)for(Y=0;Y<b.length;Y++)if(Tt)"'"!==b.charAt(Y)||$e("'")?tn+=b.charAt(Y):Tt=!1;else switch(b.charAt(Y)){case"d":tn+=yt("d",k.getDate(),2);break;case"D":tn+=Mt("D",k.getDay(),ne,pe);break;case"o":tn+=yt("o",Math.round((new Date(k.getFullYear(),k.getMonth(),k.getDate()).getTime()-new Date(k.getFullYear(),0,0).getTime())/864e5),3);break;case"m":tn+=yt("m",k.getMonth()+1,2);break;case"M":tn+=Mt("M",k.getMonth(),Ae,Ge);break;case"y":tn+=$e("y")?k.getFullYear():(k.getFullYear()%100<10?"0":"")+k.getFullYear()%100;break;case"@":tn+=k.getTime();break;case"!":tn+=1e4*k.getTime()+this._ticksTo1970;break;case"'":$e("'")?tn+="'":Tt=!0;break;default:tn+=b.charAt(Y)}return tn},_possibleChars:function(b){var k,z="",Y=!1,ne=function(pe){var Ae=k+1<b.length&&b.charAt(k+1)===pe;return Ae&&k++,Ae};for(k=0;k<b.length;k++)if(Y)"'"!==b.charAt(k)||ne("'")?z+=b.charAt(k):Y=!1;else switch(b.charAt(k)){case"d":case"m":case"y":case"@":z+="0123456789";break;case"D":case"M":return null;case"'":ne("'")?z+="'":Y=!0;break;default:z+=b.charAt(k)}return z},_get:function(b,k){return void 0!==b.settings[k]?b.settings[k]:this._defaults[k]},_setDateFromField:function(b,k){if(b.input.val()!==b.lastVal){var z=this._get(b,"dateFormat"),Y=b.lastVal=b.input?b.input.val():null,ne=this._getDefaultDate(b),pe=ne,Ae=this._getFormatConfig(b);try{pe=this.parseDate(z,Y,Ae)||ne}catch(Ge){Y=k?"":Y}b.selectedDay=pe.getDate(),b.drawMonth=b.selectedMonth=pe.getMonth(),b.drawYear=b.selectedYear=pe.getFullYear(),b.currentDay=Y?pe.getDate():0,b.currentMonth=Y?pe.getMonth():0,b.currentYear=Y?pe.getFullYear():0,this._adjustInstDate(b)}},_getDefaultDate:function(b){return this._restrictMinMax(b,this._determineDate(b,this._get(b,"defaultDate"),new Date))},_determineDate:function(b,k,z){var Ae,Ge,pe=null==k||""===k?z:"string"==typeof k?function(Ae){try{return l.datepicker.parseDate(l.datepicker._get(b,"dateFormat"),Ae,l.datepicker._getFormatConfig(b))}catch(qt){}for(var Ge=(Ae.toLowerCase().match(/^c/)?l.datepicker._getDate(b):null)||new Date,$e=Ge.getFullYear(),yt=Ge.getMonth(),Mt=Ge.getDate(),tn=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,Tt=tn.exec(Ae);Tt;){switch(Tt[2]||"d"){case"d":case"D":Mt+=parseInt(Tt[1],10);break;case"w":case"W":Mt+=7*parseInt(Tt[1],10);break;case"m":case"M":yt+=parseInt(Tt[1],10),Mt=Math.min(Mt,l.datepicker._getDaysInMonth($e,yt));break;case"y":case"Y":$e+=parseInt(Tt[1],10),Mt=Math.min(Mt,l.datepicker._getDaysInMonth($e,yt))}Tt=tn.exec(Ae)}return new Date($e,yt,Mt)}(k):"number"==typeof k?isNaN(k)?z:(Ae=k,(Ge=new Date).setDate(Ge.getDate()+Ae),Ge):new Date(k.getTime());return(pe=pe&&"Invalid Date"===pe.toString()?z:pe)&&(pe.setHours(0),pe.setMinutes(0),pe.setSeconds(0),pe.setMilliseconds(0)),this._daylightSavingAdjust(pe)},_daylightSavingAdjust:function(b){return b?(b.setHours(b.getHours()>12?b.getHours()+2:0),b):null},_setDate:function(b,k,z){var Y=!k,ne=b.selectedMonth,pe=b.selectedYear,Ae=this._restrictMinMax(b,this._determineDate(b,k,new Date));b.selectedDay=b.currentDay=Ae.getDate(),b.drawMonth=b.selectedMonth=b.currentMonth=Ae.getMonth(),b.drawYear=b.selectedYear=b.currentYear=Ae.getFullYear(),(ne!==b.selectedMonth||pe!==b.selectedYear)&&!z&&this._notifyChange(b),this._adjustInstDate(b),b.input&&b.input.val(Y?"":this._formatDate(b))},_getDate:function(b){return!b.currentYear||b.input&&""===b.input.val()?null:this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay))},_attachHandlers:function(b){var k=this._get(b,"stepMonths"),z="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){var Y={prev:function(){l.datepicker._adjustDate(z,-k,"M")},next:function(){l.datepicker._adjustDate(z,+k,"M")},hide:function(){l.datepicker._hideDatepicker()},today:function(){l.datepicker._gotoToday(z)},selectDay:function(){return l.datepicker._selectDay(z,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return l.datepicker._selectMonthYear(z,this,"M"),!1},selectYear:function(){return l.datepicker._selectMonthYear(z,this,"Y"),!1}};l(this).on(this.getAttribute("data-event"),Y[this.getAttribute("data-handler")])})},_generateHTML:function(b){var k,z,Y,ne,pe,Ae,Ge,$e,yt,Mt,tn,Tt,qt,sn,Dt,nn,bn,ln,qn,ei,Ri,Di,Ai,Ii,Er,Ui,$r,Ur,oa,rl,$s,Gi,Do,Ns,ua,as,js,Ao,Pa,Pe=new Date,Ke=this._daylightSavingAdjust(new Date(Pe.getFullYear(),Pe.getMonth(),Pe.getDate())),yn=this._get(b,"isRTL"),An=this._get(b,"showButtonPanel"),Rr=this._get(b,"hideIfNoPrevNext"),vs=this._get(b,"navigationAsDateFormat"),Zi=this._getNumberOfMonths(b),Jn=this._get(b,"showCurrentAtPos"),La=this._get(b,"stepMonths"),Eu=1!==Zi[0]||1!==Zi[1],Wi=this._daylightSavingAdjust(b.currentDay?new Date(b.currentYear,b.currentMonth,b.currentDay):new Date(9999,9,9)),Fa=this._getMinMaxDate(b,"min"),cr=this._getMinMaxDate(b,"max"),Ts=b.drawMonth-Jn,qo=b.drawYear;if(Ts<0&&(Ts+=12,qo--),cr)for(k=this._daylightSavingAdjust(new Date(cr.getFullYear(),cr.getMonth()-Zi[0]*Zi[1]+1,cr.getDate())),k=Fa&&k<Fa?Fa:k;this._daylightSavingAdjust(new Date(qo,Ts,1))>k;)--Ts<0&&(Ts=11,qo--);for(b.drawMonth=Ts,b.drawYear=qo,z=this._get(b,"prevText"),z=vs?this.formatDate(z,this._daylightSavingAdjust(new Date(qo,Ts-La,1)),this._getFormatConfig(b)):z,Y=this._canAdjustMonth(b,-1,qo,Ts)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+z+"'><span class='ui-icon ui-icon-circle-triangle-"+(yn?"e":"w")+"'>"+z+"</span></a>":Rr?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+z+"'><span class='ui-icon ui-icon-circle-triangle-"+(yn?"e":"w")+"'>"+z+"</span></a>",ne=this._get(b,"nextText"),ne=vs?this.formatDate(ne,this._daylightSavingAdjust(new Date(qo,Ts+La,1)),this._getFormatConfig(b)):ne,pe=this._canAdjustMonth(b,1,qo,Ts)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+ne+"'><span class='ui-icon ui-icon-circle-triangle-"+(yn?"w":"e")+"'>"+ne+"</span></a>":Rr?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+ne+"'><span class='ui-icon ui-icon-circle-triangle-"+(yn?"w":"e")+"'>"+ne+"</span></a>",Ae=this._get(b,"currentText"),Ge=this._get(b,"gotoCurrent")&&b.currentDay?Wi:Ke,Ae=vs?this.formatDate(Ae,Ge,this._getFormatConfig(b)):Ae,$e=b.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(b,"closeText")+"</button>",yt=An?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(yn?$e:"")+(this._isInRange(b,Ge)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+Ae+"</button>":"")+(yn?"":$e)+"</div>":"",Mt=parseInt(this._get(b,"firstDay"),10),Mt=isNaN(Mt)?0:Mt,tn=this._get(b,"showWeek"),Tt=this._get(b,"dayNames"),qt=this._get(b,"dayNamesMin"),sn=this._get(b,"monthNames"),Dt=this._get(b,"monthNamesShort"),nn=this._get(b,"beforeShowDay"),bn=this._get(b,"showOtherMonths"),ln=this._get(b,"selectOtherMonths"),qn=this._getDefaultDate(b),ei="",Di=0;Di<Zi[0];Di++){for(Ai="",this.maxRows=4,Ii=0;Ii<Zi[1];Ii++){if(Er=this._daylightSavingAdjust(new Date(qo,Ts,b.selectedDay)),Ui=" ui-corner-all",$r="",Eu){if($r+="<div class='ui-datepicker-group",Zi[1]>1)switch(Ii){case 0:$r+=" ui-datepicker-group-first",Ui=" ui-corner-"+(yn?"right":"left");break;case Zi[1]-1:$r+=" ui-datepicker-group-last",Ui=" ui-corner-"+(yn?"left":"right");break;default:$r+=" ui-datepicker-group-middle",Ui=""}$r+="'>"}for($r+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+Ui+"'>"+(/all|left/.test(Ui)&&0===Di?yn?pe:Y:"")+(/all|right/.test(Ui)&&0===Di?yn?Y:pe:"")+this._generateMonthYearHeader(b,Ts,qo,Fa,cr,Di>0||Ii>0,sn,Dt)+"</div><table class='ui-datepicker-calendar'><thead><tr>",Ur=tn?"<th class='ui-datepicker-week-col'>"+this._get(b,"weekHeader")+"</th>":"",Ri=0;Ri<7;Ri++)Ur+="<th scope='col'"+((Ri+Mt+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+Tt[oa=(Ri+Mt)%7]+"'>"+qt[oa]+"</span></th>";for($r+=Ur+"</tr></thead><tbody>",rl=this._getDaysInMonth(qo,Ts),qo===b.selectedYear&&Ts===b.selectedMonth&&(b.selectedDay=Math.min(b.selectedDay,rl)),$s=(this._getFirstDayOfMonth(qo,Ts)-Mt+7)%7,Gi=Math.ceil(($s+rl)/7),this.maxRows=Do=Eu&&this.maxRows>Gi?this.maxRows:Gi,Ns=this._daylightSavingAdjust(new Date(qo,Ts,1-$s)),ua=0;ua<Do;ua++){for($r+="<tr>",as=tn?"<td class='ui-datepicker-week-col'>"+this._get(b,"calculateWeek")(Ns)+"</td>":"",Ri=0;Ri<7;Ri++)js=nn?nn.apply(b.input?b.input[0]:null,[Ns]):[!0,""],Pa=(Ao=Ns.getMonth()!==Ts)&&!ln||!js[0]||Fa&&Ns<Fa||cr&&Ns>cr,as+="<td class='"+((Ri+Mt+6)%7>=5?" ui-datepicker-week-end":"")+(Ao?" ui-datepicker-other-month":"")+(Ns.getTime()===Er.getTime()&&Ts===b.selectedMonth&&b._keyEvent||qn.getTime()===Ns.getTime()&&qn.getTime()===Er.getTime()?" "+this._dayOverClass:"")+(Pa?" "+this._unselectableClass+" ui-state-disabled":"")+(Ao&&!bn?"":" "+js[1]+(Ns.getTime()===Wi.getTime()?" "+this._currentClass:"")+(Ns.getTime()===Ke.getTime()?" ui-datepicker-today":""))+"'"+(Ao&&!bn||!js[2]?"":" title='"+js[2].replace(/'/g,"&#39;")+"'")+(Pa?"":" data-handler='selectDay' data-event='click' data-month='"+Ns.getMonth()+"' data-year='"+Ns.getFullYear()+"'")+">"+(Ao&&!bn?"&#xa0;":Pa?"<span class='ui-state-default'>"+Ns.getDate()+"</span>":"<a class='ui-state-default"+(Ns.getTime()===Ke.getTime()?" ui-state-highlight":"")+(Ns.getTime()===Wi.getTime()?" ui-state-active":"")+(Ao?" ui-priority-secondary":"")+"' href='#'>"+Ns.getDate()+"</a>")+"</td>",Ns.setDate(Ns.getDate()+1),Ns=this._daylightSavingAdjust(Ns);$r+=as+"</tr>"}++Ts>11&&(Ts=0,qo++),Ai+=$r+="</tbody></table>"+(Eu?"</div>"+(Zi[0]>0&&Ii===Zi[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}ei+=Ai}return ei+=yt,b._keyEvent=!1,ei},_generateMonthYearHeader:function(b,k,z,Y,ne,pe,Ae,Ge){var $e,yt,Mt,tn,Tt,qt,sn,Dt,nn=this._get(b,"changeMonth"),bn=this._get(b,"changeYear"),ln=this._get(b,"showMonthAfterYear"),qn="<div class='ui-datepicker-title'>",ei="";if(pe||!nn)ei+="<span class='ui-datepicker-month'>"+Ae[k]+"</span>";else{for($e=Y&&Y.getFullYear()===z,yt=ne&&ne.getFullYear()===z,ei+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",Mt=0;Mt<12;Mt++)(!$e||Mt>=Y.getMonth())&&(!yt||Mt<=ne.getMonth())&&(ei+="<option value='"+Mt+"'"+(Mt===k?" selected='selected'":"")+">"+Ge[Mt]+"</option>");ei+="</select>"}if(ln||(qn+=ei+(!pe&&nn&&bn?"":"&#xa0;")),!b.yearshtml)if(b.yearshtml="",pe||!bn)qn+="<span class='ui-datepicker-year'>"+z+"</span>";else{for(tn=this._get(b,"yearRange").split(":"),Tt=(new Date).getFullYear(),sn=(qt=function(Ri){var Di=Ri.match(/c[+\-].*/)?z+parseInt(Ri.substring(1),10):Ri.match(/[+\-].*/)?Tt+parseInt(Ri,10):parseInt(Ri,10);return isNaN(Di)?Tt:Di})(tn[0]),Dt=Math.max(sn,qt(tn[1]||"")),sn=Y?Math.max(sn,Y.getFullYear()):sn,Dt=ne?Math.min(Dt,ne.getFullYear()):Dt,b.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";sn<=Dt;sn++)b.yearshtml+="<option value='"+sn+"'"+(sn===z?" selected='selected'":"")+">"+sn+"</option>";b.yearshtml+="</select>",qn+=b.yearshtml,b.yearshtml=null}return qn+=this._get(b,"yearSuffix"),ln&&(qn+=(!pe&&nn&&bn?"":"&#xa0;")+ei),qn+"</div>"},_adjustInstDate:function(b,k,z){var Y=b.selectedYear+("Y"===z?k:0),ne=b.selectedMonth+("M"===z?k:0),pe=Math.min(b.selectedDay,this._getDaysInMonth(Y,ne))+("D"===z?k:0),Ae=this._restrictMinMax(b,this._daylightSavingAdjust(new Date(Y,ne,pe)));b.selectedDay=Ae.getDate(),b.drawMonth=b.selectedMonth=Ae.getMonth(),b.drawYear=b.selectedYear=Ae.getFullYear(),("M"===z||"Y"===z)&&this._notifyChange(b)},_restrictMinMax:function(b,k){var z=this._getMinMaxDate(b,"min"),Y=this._getMinMaxDate(b,"max"),ne=z&&k<z?z:k;return Y&&ne>Y?Y:ne},_notifyChange:function(b){var k=this._get(b,"onChangeMonthYear");k&&k.apply(b.input?b.input[0]:null,[b.selectedYear,b.selectedMonth+1,b])},_getNumberOfMonths:function(b){var k=this._get(b,"numberOfMonths");return null==k?[1,1]:"number"==typeof k?[1,k]:k},_getMinMaxDate:function(b,k){return this._determineDate(b,this._get(b,k+"Date"),null)},_getDaysInMonth:function(b,k){return 32-this._daylightSavingAdjust(new Date(b,k,32)).getDate()},_getFirstDayOfMonth:function(b,k){return new Date(b,k,1).getDay()},_canAdjustMonth:function(b,k,z,Y){var ne=this._getNumberOfMonths(b),pe=this._daylightSavingAdjust(new Date(z,Y+(k<0?k:ne[0]*ne[1]),1));return k<0&&pe.setDate(this._getDaysInMonth(pe.getFullYear(),pe.getMonth())),this._isInRange(b,pe)},_isInRange:function(b,k){var z,Y,ne=this._getMinMaxDate(b,"min"),pe=this._getMinMaxDate(b,"max"),Ae=null,Ge=null,$e=this._get(b,"yearRange");return $e&&(z=$e.split(":"),Y=(new Date).getFullYear(),Ae=parseInt(z[0],10),Ge=parseInt(z[1],10),z[0].match(/[+\-].*/)&&(Ae+=Y),z[1].match(/[+\-].*/)&&(Ge+=Y)),(!ne||k.getTime()>=ne.getTime())&&(!pe||k.getTime()<=pe.getTime())&&(!Ae||k.getFullYear()>=Ae)&&(!Ge||k.getFullYear()<=Ge)},_getFormatConfig:function(b){var k=this._get(b,"shortYearCutoff");return{shortYearCutoff:k="string"!=typeof k?k:(new Date).getFullYear()%100+parseInt(k,10),dayNamesShort:this._get(b,"dayNamesShort"),dayNames:this._get(b,"dayNames"),monthNamesShort:this._get(b,"monthNamesShort"),monthNames:this._get(b,"monthNames")}},_formatDate:function(b,k,z,Y){k||(b.currentDay=b.selectedDay,b.currentMonth=b.selectedMonth,b.currentYear=b.selectedYear);var ne=k?"object"==typeof k?k:this._daylightSavingAdjust(new Date(Y,z,k)):this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay));return this.formatDate(this._get(b,"dateFormat"),ne,this._getFormatConfig(b))}}),l.fn.datepicker=function(b){if(!this.length)return this;l.datepicker.initialized||(l(document).on("mousedown",l.datepicker._checkExternalClick),l.datepicker.initialized=!0),0===l("#"+l.datepicker._mainDivId).length&&l("body").append(l.datepicker.dpDiv);var k=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&"string"==typeof arguments[1]?l.datepicker["_"+b+"Datepicker"].apply(l.datepicker,[this[0]].concat(k)):this.each(function(){"string"==typeof b?l.datepicker["_"+b+"Datepicker"].apply(l.datepicker,[this].concat(k)):l.datepicker._attachDatepicker(this,b)}):l.datepicker["_"+b+"Datepicker"].apply(l.datepicker,[this[0]].concat(k))},l.datepicker=new En,l.datepicker.initialized=!1,l.datepicker.uuid=(new Date).getTime(),l.datepicker.version="1.12.1",l.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var k=l(this).css(b).offset().top;k<0&&l(this).css("top",b.top-k)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&l.fn.draggable&&this._makeDraggable(),this.options.resizable&&l.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;return b&&(b.jquery||b.nodeType)?l(b):this.document.find(b||"body").eq(0)},_destroy:function(){var b,k=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(b=k.parent.children().eq(k.index)).length&&b[0]!==this.element[0]?b.before(this.element):k.parent.append(this.element)},widget:function(){return this.uiDialog},disable:l.noop,enable:l.noop,close:function(b){var k=this;!this._isOpen||!1===this._trigger("beforeClose",b)||(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||l.ui.safeBlur(l.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){k._trigger("close",b)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(b,k){var z=!1,Y=this.uiDialog.siblings(".ui-front:visible").map(function(){return+l(this).css("z-index")}).get(),ne=Math.max.apply(null,Y);return ne>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",ne+1),z=!0),z&&!k&&this._trigger("focus",b),z},open:function(){var b=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=l(l.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){b._focusTabbable(),b._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var b=this._focusedElement;b||(b=this.element.find("[autofocus]")),b.length||(b=this.element.find(":tabbable")),b.length||(b=this.uiDialogButtonPane.find(":tabbable")),b.length||(b=this.uiDialogTitlebarClose.filter(":tabbable")),b.length||(b=this.uiDialog),b.eq(0).trigger("focus")},_keepFocus:function(b){function k(){var z=l.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===z||l.contains(this.uiDialog[0],z)||this._focusTabbable()}b.preventDefault(),k.call(this),this._delay(k)},_createWrapper:function(){this.uiDialog=l("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===l.ui.keyCode.ESCAPE)return b.preventDefault(),void this.close(b);if(b.keyCode===l.ui.keyCode.TAB&&!b.isDefaultPrevented()){var k=this.uiDialog.find(":tabbable"),z=k.filter(":first"),Y=k.filter(":last");b.target!==Y[0]&&b.target!==this.uiDialog[0]||b.shiftKey?(b.target===z[0]||b.target===this.uiDialog[0])&&b.shiftKey&&(this._delay(function(){Y.trigger("focus")}),b.preventDefault()):(this._delay(function(){z.trigger("focus")}),b.preventDefault())}},mousedown:function(b){this._moveToTop(b)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var b;this.uiDialogTitlebar=l("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(k){l(k.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=l("<button type='button'></button>").button({label:l("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(k){k.preventDefault(),this.close(k)}}),b=l("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(b,"ui-dialog-title"),this._title(b),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(b){this.options.title?b.text(this.options.title):b.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=l("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=l("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var b=this,k=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),l.isEmptyObject(k)||l.isArray(k)&&!k.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(l.each(k,function(z,Y){var ne,pe;Y=l.isFunction(Y)?{click:Y,text:z}:Y,Y=l.extend({type:"button"},Y),ne=Y.click,pe={icon:Y.icon,iconPosition:Y.iconPosition,showLabel:Y.showLabel,icons:Y.icons,text:Y.text},delete Y.click,delete Y.icon,delete Y.iconPosition,delete Y.showLabel,delete Y.icons,"boolean"==typeof Y.text&&delete Y.text,l("<button></button>",Y).button(pe).appendTo(b.uiButtonSet).on("click",function(){ne.apply(b.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var b=this,k=this.options;function z(Y){return{position:Y.position,offset:Y.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(Y,ne){b._addClass(l(this),"ui-dialog-dragging"),b._blockFrames(),b._trigger("dragStart",Y,z(ne))},drag:function(Y,ne){b._trigger("drag",Y,z(ne))},stop:function(Y,ne){var pe=ne.offset.left-b.document.scrollLeft(),Ae=ne.offset.top-b.document.scrollTop();k.position={my:"left top",at:"left"+(pe>=0?"+":"")+pe+" top"+(Ae>=0?"+":"")+Ae,of:b.window},b._removeClass(l(this),"ui-dialog-dragging"),b._unblockFrames(),b._trigger("dragStop",Y,z(ne))}})},_makeResizable:function(){var b=this,k=this.options,z=k.resizable,Y=this.uiDialog.css("position"),ne="string"==typeof z?z:"n,e,s,w,se,sw,ne,nw";function pe(Ae){return{originalPosition:Ae.originalPosition,originalSize:Ae.originalSize,position:Ae.position,size:Ae.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:k.maxWidth,maxHeight:k.maxHeight,minWidth:k.minWidth,minHeight:this._minHeight(),handles:ne,start:function(Ae,Ge){b._addClass(l(this),"ui-dialog-resizing"),b._blockFrames(),b._trigger("resizeStart",Ae,pe(Ge))},resize:function(Ae,Ge){b._trigger("resize",Ae,pe(Ge))},stop:function(Ae,Ge){var $e=b.uiDialog.offset(),yt=$e.left-b.document.scrollLeft(),Mt=$e.top-b.document.scrollTop();k.height=b.uiDialog.height(),k.width=b.uiDialog.width(),k.position={my:"left top",at:"left"+(yt>=0?"+":"")+yt+" top"+(Mt>=0?"+":"")+Mt,of:b.window},b._removeClass(l(this),"ui-dialog-resizing"),b._unblockFrames(),b._trigger("resizeStop",Ae,pe(Ge))}}).css("position",Y)},_trackFocus:function(){this._on(this.widget(),{focusin:function(b){this._makeFocusTarget(),this._focusedElement=l(b.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var b=this._trackingInstances(),k=l.inArray(this,b);-1!==k&&b.splice(k,1)},_trackingInstances:function(){var b=this.document.data("ui-dialog-instances");return b||this.document.data("ui-dialog-instances",b=[]),b},_minHeight:function(){var b=this.options;return"auto"===b.height?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(){var b=this.uiDialog.is(":visible");b||this.uiDialog.show(),this.uiDialog.position(this.options.position),b||this.uiDialog.hide()},_setOptions:function(b){var k=this,z=!1,Y={};l.each(b,function(ne,pe){k._setOption(ne,pe),ne in k.sizeRelatedOptions&&(z=!0),ne in k.resizableRelatedOptions&&(Y[ne]=pe)}),z&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",Y)},_setOption:function(b,k){var z,Y,ne=this.uiDialog;"disabled"!==b&&(this._super(b,k),"appendTo"===b&&this.uiDialog.appendTo(this._appendTo()),"buttons"===b&&this._createButtons(),"closeText"===b&&this.uiDialogTitlebarClose.button({label:l("<a>").text(""+this.options.closeText).html()}),"draggable"===b&&((z=ne.is(":data(ui-draggable)"))&&!k&&ne.draggable("destroy"),!z&&k&&this._makeDraggable()),"position"===b&&this._position(),"resizable"===b&&((Y=ne.is(":data(ui-resizable)"))&&!k&&ne.resizable("destroy"),Y&&"string"==typeof k&&ne.resizable("option","handles",k),!Y&&!1!==k&&this._makeResizable()),"title"===b&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var b,k,z,Y=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),Y.minWidth>Y.width&&(Y.width=Y.minWidth),b=this.uiDialog.css({height:"auto",width:Y.width}).outerHeight(),k=Math.max(0,Y.minHeight-b),z="number"==typeof Y.maxHeight?Math.max(0,Y.maxHeight-b):"none","auto"===Y.height?this.element.css({minHeight:k,maxHeight:z,height:"auto"}):this.element.height(Math.max(0,Y.height-b)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=l(this);return l("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){return!!l(b.target).closest(".ui-dialog").length||!!l(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var b=!0;this._delay(function(){b=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(k){b||this._allowInteraction(k)||(k.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=l("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var b=this.document.data("ui-dialog-overlays")-1;b?this.document.data("ui-dialog-overlays",b):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==l.uiBackCompat&&l.widget("ui.dialog",l.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(b,k){"dialogClass"===b&&this.uiDialog.removeClass(this.options.dialogClass).addClass(k),this._superApply(arguments)}}),l.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=l("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(b){if(void 0===b)return this.options.value;this.options.value=this._constrainedValue(b),this._refreshValue()},_constrainedValue:function(b){return void 0===b&&(b=this.options.value),this.indeterminate=!1===b,"number"!=typeof b&&(b=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,b))},_setOptions:function(b){var k=b.value;delete b.value,this._super(b),this.options.value=this._constrainedValue(k),this._refreshValue()},_setOption:function(b,k){"max"===b&&(k=Math.max(this.min,k)),this._super(b,k)},_setOptionDisabled:function(b){this._super(b),this.element.attr("aria-disabled",b),this._toggleClass(null,"ui-state-disabled",!!b)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var b=this.options.value,k=this._percentage();this.valueDiv.toggle(this.indeterminate||b>this.min).width(k.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,b===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=l("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":b}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==b&&(this.oldValue=b,this._trigger("change")),b===this.options.max&&this._trigger("complete")}}),l.widget("ui.selectmenu",[l.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var b=this.element.uniqueId().attr("id");this.ids={element:b,button:b+"-button",menu:b+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=l()},_drawButton:function(){var b,k=this,z=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(Y){this.button.focus(),Y.preventDefault()}}),this.element.hide(),this.button=l("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),b=l("<span>").appendTo(this.button),this._addClass(b,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(z).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){k._rendered||k._refreshMenu()})},_drawMenu:function(){var b=this;this.menu=l("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=l("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(k,z){k.preventDefault(),b._setSelection(),b._select(z.item.data("ui-selectmenu-item"),k)},focus:function(k,z){var Y=z.item.data("ui-selectmenu-item");null!=b.focusIndex&&Y.index!==b.focusIndex&&(b._trigger("focus",k,{item:Y}),b.isOpen||b._select(Y,k)),b.focusIndex=Y.index,b.button.attr("aria-activedescendant",b.menuItems.eq(Y.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var b,k=this.element.find("option");this.menu.empty(),this._parseOptions(k),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,k.length&&(b=this._getSelectedItem(),this.menuInstance.focus(null,b),this._setAria(b.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(b){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",b)))},_position:function(){this.menuWrap.position(l.extend({of:this.button},this.options.position))},close:function(b){!this.isOpen||(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",b))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(b){var k=l("<span>");return this._setText(k,b.label),this._addClass(k,"ui-selectmenu-text"),k},_renderMenu:function(b,k){var z=this,Y="";l.each(k,function(ne,pe){var Ae;pe.optgroup!==Y&&(Ae=l("<li>",{text:pe.optgroup}),z._addClass(Ae,"ui-selectmenu-optgroup","ui-menu-divider"+(pe.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),Ae.appendTo(b),Y=pe.optgroup),z._renderItemData(b,pe)})},_renderItemData:function(b,k){return this._renderItem(b,k).data("ui-selectmenu-item",k)},_renderItem:function(b,k){var z=l("<li>"),Y=l("<div>",{title:k.element.attr("title")});return k.disabled&&this._addClass(z,null,"ui-state-disabled"),this._setText(Y,k.label),z.append(Y).appendTo(b)},_setText:function(b,k){k?b.text(k):b.html("&#160;")},_move:function(b,k){var z,Y,ne=".ui-menu-item";this.isOpen?z=this.menuItems.eq(this.focusIndex).parent("li"):(z=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),ne+=":not(.ui-state-disabled)"),(Y="first"===b||"last"===b?z["first"===b?"prevAll":"nextAll"](ne).eq(-1):z[b+"All"](ne).eq(0)).length&&this.menuInstance.focus(k,Y)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(b){this[this.isOpen?"close":"open"](b)},_setSelection:function(){var b;!this.range||(window.getSelection?((b=window.getSelection()).removeAllRanges(),b.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(b){!this.isOpen||l(b.target).closest(".ui-selectmenu-menu, #"+l.ui.escapeSelector(this.ids.button)).length||this.close(b)}},_buttonEvents:{mousedown:function(){var b;window.getSelection?(b=window.getSelection()).rangeCount&&(this.range=b.getRangeAt(0)):this.range=document.selection.createRange()},click:function(b){this._setSelection(),this._toggle(b)},keydown:function(b){var k=!0;switch(b.keyCode){case l.ui.keyCode.TAB:case l.ui.keyCode.ESCAPE:this.close(b),k=!1;break;case l.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(b);break;case l.ui.keyCode.UP:b.altKey?this._toggle(b):this._move("prev",b);break;case l.ui.keyCode.DOWN:b.altKey?this._toggle(b):this._move("next",b);break;case l.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(b):this._toggle(b);break;case l.ui.keyCode.LEFT:this._move("prev",b);break;case l.ui.keyCode.RIGHT:this._move("next",b);break;case l.ui.keyCode.HOME:case l.ui.keyCode.PAGE_UP:this._move("first",b);break;case l.ui.keyCode.END:case l.ui.keyCode.PAGE_DOWN:this._move("last",b);break;default:this.menu.trigger(b),k=!1}k&&b.preventDefault()}},_selectFocusedItem:function(b){var k=this.menuItems.eq(this.focusIndex).parent("li");k.hasClass("ui-state-disabled")||this._select(k.data("ui-selectmenu-item"),b)},_select:function(b,k){var z=this.element[0].selectedIndex;this.element[0].selectedIndex=b.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(b)),this._setAria(b),this._trigger("select",k,{item:b}),b.index!==z&&this._trigger("change",k,{item:b}),this.close(k)},_setAria:function(b){var k=this.menuItems.eq(b.index).attr("id");this.button.attr({"aria-labelledby":k,"aria-activedescendant":k}),this.menu.attr("aria-activedescendant",k)},_setOption:function(b,k){if("icons"===b){var z=this.button.find("span.ui-icon");this._removeClass(z,null,this.options.icons.button)._addClass(z,null,k.button)}this._super(b,k),"appendTo"===b&&this.menuWrap.appendTo(this._appendTo()),"width"===b&&this._resizeButton()},_setOptionDisabled:function(b){this._super(b),this.menuInstance.option("disabled",b),this.button.attr("aria-disabled",b),this._toggleClass(this.button,null,"ui-state-disabled",b),this.element.prop("disabled",b),b?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?l(b):this.document.find(b).eq(0)),(!b||!b[0])&&(b=this.element.closest(".ui-front, dialog")),b.length||(b=this.document[0].body),b},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var b=this.options.width;!1!==b?(null===b&&(b=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(b)):this.button.css("width","")},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var b=this._super();return b.disabled=this.element.prop("disabled"),b},_parseOptions:function(b){var k=this,z=[];b.each(function(Y,ne){z.push(k._parseOption(l(ne),Y))}),this.items=z},_parseOption:function(b,k){var z=b.parent("optgroup");return{element:b,index:k,value:b.val(),label:b.text(),optgroup:z.attr("label")||"",disabled:z.prop("disabled")||b.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),l.widget("ui.slider",l.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var b,k,z=this.options,Y=this.element.find(".ui-slider-handle"),pe=[];for(Y.length>(k=z.values&&z.values.length||1)&&(Y.slice(k).remove(),Y=Y.slice(0,k)),b=Y.length;b<k;b++)pe.push("<span tabindex='0'></span>");this.handles=Y.add(l(pe.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(Ae){l(this).data("ui-slider-handle-index",Ae).attr("tabIndex",0)})},_createRange:function(){var b=this.options;b.range?(!0===b.range&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:l.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=l("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),("min"===b.range||"max"===b.range)&&this._addClass(this.range,"ui-slider-range-"+b.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(b){var z,Y,ne,pe,Ge,$e,yt=this,Mt=this.options;return!Mt.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),z=this._normValueFromMouse({x:b.pageX,y:b.pageY}),Y=this._valueMax()-this._valueMin()+1,this.handles.each(function(tn){var Tt=Math.abs(z-yt.values(tn));(Y>Tt||Y===Tt&&(tn===yt._lastChangedValue||yt.values(tn)===Mt.min))&&(Y=Tt,ne=l(this),pe=tn)}),!1!==this._start(b,pe))&&(this._mouseSliding=!0,this._handleIndex=pe,this._addClass(ne,null,"ui-state-active"),ne.trigger("focus"),Ge=ne.offset(),$e=!l(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=$e?{left:0,top:0}:{left:b.pageX-Ge.left-ne.width()/2,top:b.pageY-Ge.top-ne.height()/2-(parseInt(ne.css("borderTopWidth"),10)||0)-(parseInt(ne.css("borderBottomWidth"),10)||0)+(parseInt(ne.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,pe,z),this._animateOff=!0,!0)},_mouseStart:function(){return!0},_mouseDrag:function(b){var z=this._normValueFromMouse({x:b.pageX,y:b.pageY});return this._slide(b,this._handleIndex,z),!1},_mouseStop:function(b){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(b,this._handleIndex),this._change(b,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(b){var k,z,Y,ne,pe;return"horizontal"===this.orientation?(k=this.elementSize.width,z=b.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(k=this.elementSize.height,z=b.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(Y=z/k)>1&&(Y=1),Y<0&&(Y=0),"vertical"===this.orientation&&(Y=1-Y),ne=this._valueMax()-this._valueMin(),pe=this._valueMin()+Y*ne,this._trimAlignValue(pe)},_uiHash:function(b,k,z){var Y={handle:this.handles[b],handleIndex:b,value:void 0!==k?k:this.value()};return this._hasMultipleValues()&&(Y.value=void 0!==k?k:this.values(b),Y.values=z||this.values()),Y},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(b,k){return this._trigger("start",b,this._uiHash(k))},_slide:function(b,k,z){var ne,pe=this.value(),Ae=this.values();this._hasMultipleValues()&&(ne=this.values(k?0:1),pe=this.values(k),2===this.options.values.length&&!0===this.options.range&&(z=0===k?Math.min(ne,z):Math.max(ne,z)),Ae[k]=z),z!==pe&&!1!==this._trigger("slide",b,this._uiHash(k,z,Ae))&&(this._hasMultipleValues()?this.values(k,z):this.value(z))},_stop:function(b,k){this._trigger("stop",b,this._uiHash(k))},_change:function(b,k){!this._keySliding&&!this._mouseSliding&&(this._lastChangedValue=k,this._trigger("change",b,this._uiHash(k)))},value:function(b){return arguments.length?(this.options.value=this._trimAlignValue(b),this._refreshValue(),void this._change(null,0)):this._value()},values:function(b,k){var z,Y,ne;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(k),this._refreshValue(),void this._change(null,b);if(!arguments.length)return this._values();if(!l.isArray(arguments[0]))return this._hasMultipleValues()?this._values(b):this.value();for(z=this.options.values,Y=arguments[0],ne=0;ne<z.length;ne+=1)z[ne]=this._trimAlignValue(Y[ne]),this._change(null,ne);this._refreshValue()},_setOption:function(b,k){var z,Y=0;switch("range"===b&&!0===this.options.range&&("min"===k?(this.options.value=this._values(0),this.options.values=null):"max"===k&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),l.isArray(this.options.values)&&(Y=this.options.values.length),this._super(b,k),b){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(k),this.handles.css("horizontal"===k?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),z=Y-1;z>=0;z--)this._change(null,z);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(b){this._super(b),this._toggleClass(null,"ui-state-disabled",!!b)},_value:function(){var b=this.options.value;return this._trimAlignValue(b)},_values:function(b){var z,Y;if(arguments.length)return this._trimAlignValue(this.options.values[b]);if(this._hasMultipleValues()){for(z=this.options.values.slice(),Y=0;Y<z.length;Y+=1)z[Y]=this._trimAlignValue(z[Y]);return z}return[]},_trimAlignValue:function(b){if(b<=this._valueMin())return this._valueMin();if(b>=this._valueMax())return this._valueMax();var k=this.options.step>0?this.options.step:1,z=(b-this._valueMin())%k,Y=b-z;return 2*Math.abs(z)>=k&&(Y+=z>0?k:-k),parseFloat(Y.toFixed(5))},_calculateNewMax:function(){var b=this.options.max,k=this._valueMin(),z=this.options.step;(b=Math.round((b-k)/z)*z+k)>this.options.max&&(b-=z),this.max=parseFloat(b.toFixed(this._precision()))},_precision:function(){var b=this._precisionOf(this.options.step);return null!==this.options.min&&(b=Math.max(b,this._precisionOf(this.options.min))),b},_precisionOf:function(b){var k=b.toString(),z=k.indexOf(".");return-1===z?0:k.length-z-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(b){"vertical"===b&&this.range.css({width:"",left:""}),"horizontal"===b&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var b,k,z,Y,ne,pe=this.options.range,Ae=this.options,Ge=this,$e=!this._animateOff&&Ae.animate,yt={};this._hasMultipleValues()?this.handles.each(function(Mt){k=(Ge.values(Mt)-Ge._valueMin())/(Ge._valueMax()-Ge._valueMin())*100,yt["horizontal"===Ge.orientation?"left":"bottom"]=k+"%",l(this).stop(1,1)[$e?"animate":"css"](yt,Ae.animate),!0===Ge.options.range&&("horizontal"===Ge.orientation?(0===Mt&&Ge.range.stop(1,1)[$e?"animate":"css"]({left:k+"%"},Ae.animate),1===Mt&&Ge.range[$e?"animate":"css"]({width:k-b+"%"},{queue:!1,duration:Ae.animate})):(0===Mt&&Ge.range.stop(1,1)[$e?"animate":"css"]({bottom:k+"%"},Ae.animate),1===Mt&&Ge.range[$e?"animate":"css"]({height:k-b+"%"},{queue:!1,duration:Ae.animate}))),b=k}):(z=this.value(),Y=this._valueMin(),ne=this._valueMax(),yt["horizontal"===this.orientation?"left":"bottom"]=(k=ne!==Y?(z-Y)/(ne-Y)*100:0)+"%",this.handle.stop(1,1)[$e?"animate":"css"](yt,Ae.animate),"min"===pe&&"horizontal"===this.orientation&&this.range.stop(1,1)[$e?"animate":"css"]({width:k+"%"},Ae.animate),"max"===pe&&"horizontal"===this.orientation&&this.range.stop(1,1)[$e?"animate":"css"]({width:100-k+"%"},Ae.animate),"min"===pe&&"vertical"===this.orientation&&this.range.stop(1,1)[$e?"animate":"css"]({height:k+"%"},Ae.animate),"max"===pe&&"vertical"===this.orientation&&this.range.stop(1,1)[$e?"animate":"css"]({height:100-k+"%"},Ae.animate))},_handleEvents:{keydown:function(b){var z,Y,ne,pe=l(b.target).data("ui-slider-handle-index");switch(b.keyCode){case l.ui.keyCode.HOME:case l.ui.keyCode.END:case l.ui.keyCode.PAGE_UP:case l.ui.keyCode.PAGE_DOWN:case l.ui.keyCode.UP:case l.ui.keyCode.RIGHT:case l.ui.keyCode.DOWN:case l.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(l(b.target),null,"ui-state-active"),!1===this._start(b,pe)))return}switch(ne=this.options.step,z=Y=this._hasMultipleValues()?this.values(pe):this.value(),b.keyCode){case l.ui.keyCode.HOME:Y=this._valueMin();break;case l.ui.keyCode.END:Y=this._valueMax();break;case l.ui.keyCode.PAGE_UP:Y=this._trimAlignValue(z+(this._valueMax()-this._valueMin())/this.numPages);break;case l.ui.keyCode.PAGE_DOWN:Y=this._trimAlignValue(z-(this._valueMax()-this._valueMin())/this.numPages);break;case l.ui.keyCode.UP:case l.ui.keyCode.RIGHT:if(z===this._valueMax())return;Y=this._trimAlignValue(z+ne);break;case l.ui.keyCode.DOWN:case l.ui.keyCode.LEFT:if(z===this._valueMin())return;Y=this._trimAlignValue(z-ne)}this._slide(b,pe,Y)},keyup:function(b){var k=l(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,k),this._change(b,k),this._removeClass(l(b.target),null,"ui-state-active"))}}}),l.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b=this._super(),k=this.element;return l.each(["min","max","step"],function(z,Y){var ne=k.attr(Y);null!=ne&&ne.length&&(b[Y]=ne)}),b},_events:{keydown:function(b){this._start(b)&&this._keydown(b)&&b.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(b){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",b))},mousewheel:function(b,k){if(k){if(!this.spinning&&!this._start(b))return!1;this._spin((k>0?1:-1)*this.options.step,b),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(b)},100),b.preventDefault()}},"mousedown .ui-spinner-button":function(b){var k;function z(){this.element[0]===l.ui.safeActiveElement(this.document[0])||(this.element.trigger("focus"),this.previous=k,this._delay(function(){this.previous=k}))}k=this.element[0]===l.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),b.preventDefault(),z.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,z.call(this)}),!1!==this._start(b)&&this._repeat(null,l(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){if(l(b.currentTarget).hasClass("ui-state-active")){if(!1===this._start(b))return!1;this._repeat(null,l(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)}},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(b){var k=this.options,z=l.ui.keyCode;switch(b.keyCode){case z.UP:return this._repeat(null,1,b),!0;case z.DOWN:return this._repeat(null,-1,b),!0;case z.PAGE_UP:return this._repeat(null,k.page,b),!0;case z.PAGE_DOWN:return this._repeat(null,-k.page,b),!0}return!1},_start:function(b){return!(!this.spinning&&!1===this._trigger("start",b)||(this.counter||(this.counter=1),this.spinning=!0,0))},_repeat:function(b,k,z){b=b||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,k,z)},b),this._spin(k*this.options.step,z)},_spin:function(b,k){var z=this.value()||0;this.counter||(this.counter=1),z=this._adjustValue(z+b*this._increment(this.counter)),(!this.spinning||!1!==this._trigger("spin",k,{value:z}))&&(this._value(z),this.counter++)},_increment:function(b){var k=this.options.incremental;return k?l.isFunction(k)?k(b):Math.floor(b*b*b/5e4-b*b/500+17*b/200+1):1},_precision:function(){var b=this._precisionOf(this.options.step);return null!==this.options.min&&(b=Math.max(b,this._precisionOf(this.options.min))),b},_precisionOf:function(b){var k=b.toString(),z=k.indexOf(".");return-1===z?0:k.length-z-1},_adjustValue:function(b){var k,z,Y=this.options;return z=b-(k=null!==Y.min?Y.min:0),b=k+(z=Math.round(z/Y.step)*Y.step),b=parseFloat(b.toFixed(this._precision())),null!==Y.max&&b>Y.max?Y.max:null!==Y.min&&b<Y.min?Y.min:b},_stop:function(b){!this.spinning||(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",b))},_setOption:function(b,k){var z,Y,ne;if("culture"===b||"numberFormat"===b)return z=this._parse(this.element.val()),this.options[b]=k,void this.element.val(this._format(z));("max"===b||"min"===b||"step"===b)&&"string"==typeof k&&(k=this._parse(k)),"icons"===b&&(Y=this.buttons.first().find(".ui-icon"),this._removeClass(Y,null,this.options.icons.up),this._addClass(Y,null,k.up),ne=this.buttons.last().find(".ui-icon"),this._removeClass(ne,null,this.options.icons.down),this._addClass(ne,null,k.down)),this._super(b,k)},_setOptionDisabled:function(b){this._super(b),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!b),this.element.prop("disabled",!!b),this.buttons.button(b?"disable":"enable")},_setOptions:dt(function(b){this._super(b)}),_parse:function(b){return"string"==typeof b&&""!==b&&(b=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(b,10,this.options.culture):+b),""===b||isNaN(b)?null:b},_format:function(b){return""===b?"":window.Globalize&&this.options.numberFormat?Globalize.format(b,this.options.numberFormat,this.options.culture):b},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var b=this.value();return null!==b&&b===this._adjustValue(b)},_value:function(b,k){var z;""!==b&&null!==(z=this._parse(b))&&(k||(z=this._adjustValue(z)),b=this._format(z)),this.element.val(b),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:dt(function(b){this._stepUp(b)}),_stepUp:function(b){this._start()&&(this._spin((b||1)*this.options.step),this._stop())},stepDown:dt(function(b){this._stepDown(b)}),_stepDown:function(b){this._start()&&(this._spin((b||1)*-this.options.step),this._stop())},pageUp:dt(function(b){this._stepUp((b||1)*this.options.page)}),pageDown:dt(function(b){this._stepDown((b||1)*this.options.page)}),value:function(b){if(!arguments.length)return this._parse(this.element.val());dt(this._value).call(this,b)},widget:function(){return this.uiSpinner}}),!1!==l.uiBackCompat&&l.widget("ui.spinner",l.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),l.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var b=/#.*$/;return function(k){var z,Y;z=k.href.replace(b,""),Y=location.href.replace(b,"");try{z=decodeURIComponent(z)}catch(ne){}try{Y=decodeURIComponent(Y)}catch(ne){}return k.hash.length>1&&z===Y}}(),_create:function(){var b=this,k=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,k.collapsible),this._processTabs(),k.active=this._initialActive(),l.isArray(k.disabled)&&(k.disabled=l.unique(k.disabled.concat(l.map(this.tabs.filter(".ui-state-disabled"),function(z){return b.tabs.index(z)}))).sort()),this.active=!1!==this.options.active&&this.anchors.length?this._findActive(k.active):l(),this._refresh(),this.active.length&&this.load(k.active)},_initialActive:function(){var b=this.options.active,k=this.options.collapsible,z=location.hash.substring(1);return null===b&&(z&&this.tabs.each(function(Y,ne){if(l(ne).attr("aria-controls")===z)return b=Y,!1}),null===b&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===b||-1===b)&&(b=!!this.tabs.length&&0)),!1!==b&&-1===(b=this.tabs.index(this.tabs.eq(b)))&&(b=!k&&0),!k&&!1===b&&this.anchors.length&&(b=0),b},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):l()}},_tabKeydown:function(b){var k=l(l.ui.safeActiveElement(this.document[0])).closest("li"),z=this.tabs.index(k),Y=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case l.ui.keyCode.RIGHT:case l.ui.keyCode.DOWN:z++;break;case l.ui.keyCode.UP:case l.ui.keyCode.LEFT:Y=!1,z--;break;case l.ui.keyCode.END:z=this.anchors.length-1;break;case l.ui.keyCode.HOME:z=0;break;case l.ui.keyCode.SPACE:return b.preventDefault(),clearTimeout(this.activating),void this._activate(z);case l.ui.keyCode.ENTER:return b.preventDefault(),clearTimeout(this.activating),void this._activate(z!==this.options.active&&z);default:return}b.preventDefault(),clearTimeout(this.activating),z=this._focusNextTab(z,Y),!b.ctrlKey&&!b.metaKey&&(k.attr("aria-selected","false"),this.tabs.eq(z).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",z)},this.delay))}},_panelKeydown:function(b){this._handlePageNav(b)||b.ctrlKey&&b.keyCode===l.ui.keyCode.UP&&(b.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(b){return b.altKey&&b.keyCode===l.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):b.altKey&&b.keyCode===l.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(b,k){for(var z=this.tabs.length-1;-1!==l.inArray((b>z&&(b=0),b<0&&(b=z),b),this.options.disabled);)b=k?b+1:b-1;return b},_focusNextTab:function(b,k){return b=this._findNextTab(b,k),this.tabs.eq(b).trigger("focus"),b},_setOption:function(b,k){"active"!==b?(this._super(b,k),"collapsible"===b&&(this._toggleClass("ui-tabs-collapsible",null,k),!k&&!1===this.options.active&&this._activate(0)),"event"===b&&this._setupEvents(k),"heightStyle"===b&&this._setupHeightStyle(k)):this._activate(k)},_sanitizeSelector:function(b){return b?b.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,k=this.tablist.children(":has(a[href])");b.disabled=l.map(k.filter(".ui-state-disabled"),function(z){return k.index(z)}),this._processTabs(),!1!==b.active&&this.anchors.length?this.active.length&&!l.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=l()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=l()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this,k=this.tabs,z=this.anchors,Y=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(ne){l(this).is(".ui-state-disabled")&&ne.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){l(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return l("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=l(),this.anchors.each(function(ne,pe){var Ae,Ge,$e,yt=l(pe).uniqueId().attr("id"),Mt=l(pe).closest("li"),tn=Mt.attr("aria-controls");b._isLocal(pe)?($e=(Ae=pe.hash).substring(1),Ge=b.element.find(b._sanitizeSelector(Ae))):($e=Mt.attr("aria-controls")||l({}).uniqueId()[0].id,(Ge=b.element.find(Ae="#"+$e)).length||(Ge=b._createPanel($e)).insertAfter(b.panels[ne-1]||b.tablist),Ge.attr("aria-live","polite")),Ge.length&&(b.panels=b.panels.add(Ge)),tn&&Mt.data("ui-tabs-aria-controls",tn),Mt.attr({"aria-controls":$e,"aria-labelledby":yt}),Ge.attr("aria-labelledby",yt)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),k&&(this._off(k.not(this.tabs)),this._off(z.not(this.anchors)),this._off(Y.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(b){return l("<div>").attr("id",b).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(b){var k,z,Y;for(l.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1),Y=0;z=this.tabs[Y];Y++)k=l(z),!0===b||-1!==l.inArray(Y,b)?(k.attr("aria-disabled","true"),this._addClass(k,null,"ui-state-disabled")):(k.removeAttr("aria-disabled"),this._removeClass(k,null,"ui-state-disabled"));this.options.disabled=b,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===b)},_setupEvents:function(b){var k={};b&&l.each(b.split(" "),function(z,Y){k[Y]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(z){z.preventDefault()}}),this._on(this.anchors,k),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(b){var k,z=this.element.parent();"fill"===b?(k=z.height(),k-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var Y=l(this),ne=Y.css("position");"absolute"===ne||"fixed"===ne||(k-=Y.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){k-=l(this).outerHeight(!0)}),this.panels.each(function(){l(this).height(Math.max(0,k-l(this).innerHeight()+l(this).height()))}).css("overflow","auto")):"auto"===b&&(k=0,this.panels.each(function(){k=Math.max(k,l(this).height("").height())}).height(k))},_eventHandler:function(b){var k=this.options,z=this.active,ne=l(b.currentTarget).closest("li"),pe=ne[0]===z[0],Ae=pe&&k.collapsible,Ge=Ae?l():this._getPanelForTab(ne),$e=z.length?this._getPanelForTab(z):l(),yt={oldTab:z,oldPanel:$e,newTab:Ae?l():ne,newPanel:Ge};b.preventDefault(),!(ne.hasClass("ui-state-disabled")||ne.hasClass("ui-tabs-loading")||this.running||pe&&!k.collapsible||!1===this._trigger("beforeActivate",b,yt))&&(k.active=!Ae&&this.tabs.index(ne),this.active=pe?l():ne,this.xhr&&this.xhr.abort(),!$e.length&&!Ge.length&&l.error("jQuery UI Tabs: Mismatching fragment identifier."),Ge.length&&this.load(this.tabs.index(ne),b),this._toggle(b,yt))},_toggle:function(b,k){var z=this,Y=k.newPanel,ne=k.oldPanel;function pe(){z.running=!1,z._trigger("activate",b,k)}function Ae(){z._addClass(k.newTab.closest("li"),"ui-tabs-active","ui-state-active"),Y.length&&z.options.show?z._show(Y,z.options.show,pe):(Y.show(),pe())}this.running=!0,ne.length&&this.options.hide?this._hide(ne,this.options.hide,function(){z._removeClass(k.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),Ae()}):(this._removeClass(k.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),ne.hide(),Ae()),ne.attr("aria-hidden","true"),k.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),Y.length&&ne.length?k.oldTab.attr("tabIndex",-1):Y.length&&this.tabs.filter(function(){return 0===l(this).attr("tabIndex")}).attr("tabIndex",-1),Y.attr("aria-hidden","false"),k.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(b){var k,z=this._findActive(b);z[0]!==this.active[0]&&(z.length||(z=this.active),k=z.find(".ui-tabs-anchor")[0],this._eventHandler({target:k,currentTarget:k,preventDefault:l.noop}))},_findActive:function(b){return!1===b?l():this.tabs.eq(b)},_getIndex:function(b){return"string"==typeof b&&(b=this.anchors.index(this.anchors.filter("[href$='"+l.ui.escapeSelector(b)+"']"))),b},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){l.data(this,"ui-tabs-destroy")?l(this).remove():l(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var b=l(this),k=b.data("ui-tabs-aria-controls");k?b.attr("aria-controls",k).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var k=this.options.disabled;!1!==k&&(void 0===b?k=!1:(b=this._getIndex(b),k=l.isArray(k)?l.map(k,function(z){return z!==b?z:null}):l.map(this.tabs,function(z,Y){return Y!==b?Y:null})),this._setOptionDisabled(k))},disable:function(b){var k=this.options.disabled;if(!0!==k){if(void 0===b)k=!0;else{if(b=this._getIndex(b),-1!==l.inArray(b,k))return;k=l.isArray(k)?l.merge([b],k).sort():[b]}this._setOptionDisabled(k)}},load:function(b,k){b=this._getIndex(b);var z=this,Y=this.tabs.eq(b),ne=Y.find(".ui-tabs-anchor"),pe=this._getPanelForTab(Y),Ae={tab:Y,panel:pe},Ge=function($e,yt){"abort"===yt&&z.panels.stop(!1,!0),z._removeClass(Y,"ui-tabs-loading"),pe.removeAttr("aria-busy"),$e===z.xhr&&delete z.xhr};this._isLocal(ne[0])||(this.xhr=l.ajax(this._ajaxSettings(ne,k,Ae)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(Y,"ui-tabs-loading"),pe.attr("aria-busy","true"),this.xhr.done(function($e,yt,Mt){setTimeout(function(){pe.html($e),z._trigger("load",k,Ae),Ge(Mt,yt)},1)}).fail(function($e,yt){setTimeout(function(){Ge($e,yt)},1)})))},_ajaxSettings:function(b,k,z){var Y=this;return{url:b.attr("href").replace(/#.*$/,""),beforeSend:function(ne,pe){return Y._trigger("beforeLoad",k,l.extend({jqXHR:ne,ajaxSettings:pe},z))}}},_getPanelForTab:function(b){var k=l(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+k))}}),!1!==l.uiBackCompat&&l.widget("ui.tabs",l.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),l.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var b=l(this).attr("title")||"";return l("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(b,k){var z=(b.attr("aria-describedby")||"").split(/\s+/);z.push(k),b.data("ui-tooltip-id",k).attr("aria-describedby",l.trim(z.join(" ")))},_removeDescribedBy:function(b){var k=b.data("ui-tooltip-id"),z=(b.attr("aria-describedby")||"").split(/\s+/),Y=l.inArray(k,z);-1!==Y&&z.splice(Y,1),b.removeData("ui-tooltip-id"),(z=l.trim(z.join(" ")))?b.attr("aria-describedby",z):b.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=l("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=l([])},_setOption:function(b,k){var z=this;this._super(b,k),"content"===b&&l.each(this.tooltips,function(Y,ne){z._updateContent(ne.element)})},_setOptionDisabled:function(b){this[b?"_disable":"_enable"]()},_disable:function(){var b=this;l.each(this.tooltips,function(k,z){var Y=l.Event("blur");Y.target=Y.currentTarget=z.element[0],b.close(Y,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var k=l(this);if(k.is("[title]"))return k.data("ui-tooltip-title",k.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var b=l(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))}),this.disabledTitles=l([])},open:function(b){var k=this,z=l(b?b.target:this.element).closest(this.options.items);!z.length||z.data("ui-tooltip-id")||(z.attr("title")&&z.data("ui-tooltip-title",z.attr("title")),z.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&z.parents().each(function(){var ne,Y=l(this);Y.data("ui-tooltip-open")&&((ne=l.Event("blur")).target=ne.currentTarget=this,k.close(ne,!0)),Y.attr("title")&&(Y.uniqueId(),k.parents[this.id]={element:this,title:Y.attr("title")},Y.attr("title",""))}),this._registerCloseHandlers(b,z),this._updateContent(z,b))},_updateContent:function(b,k){var z,Y=this.options.content,ne=this,pe=k?k.type:null;if("string"==typeof Y||Y.nodeType||Y.jquery)return this._open(k,b,Y);(z=Y.call(b[0],function(Ae){ne._delay(function(){!b.data("ui-tooltip-open")||(k&&(k.type=pe),this._open(k,b,Ae))})}))&&this._open(k,b,z)},_open:function(b,k,z){var Y,ne,pe,Ae,Ge=l.extend({},this.options.position);function $e(yt){Ge.of=yt,!ne.is(":hidden")&&ne.position(Ge)}z&&((Y=this._find(k))?Y.tooltip.find(".ui-tooltip-content").html(z):(k.is("[title]")&&(b&&"mouseover"===b.type?k.attr("title",""):k.removeAttr("title")),Y=this._tooltip(k),this._addDescribedBy(k,(ne=Y.tooltip).attr("id")),ne.find(".ui-tooltip-content").html(z),this.liveRegion.children().hide(),(Ae=l("<div>").html(ne.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),Ae.removeAttr("id").find("[id]").removeAttr("id"),Ae.appendTo(this.liveRegion),this.options.track&&b&&/^mouse/.test(b.type)?(this._on(this.document,{mousemove:$e}),$e(b)):ne.position(l.extend({of:k},this.options.position)),ne.hide(),this._show(ne,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(pe=this.delayedShow=setInterval(function(){ne.is(":visible")&&($e(Ge.of),clearInterval(pe))},l.fx.interval)),this._trigger("open",b,{tooltip:ne})))},_registerCloseHandlers:function(b,k){var z={keyup:function(Y){if(Y.keyCode===l.ui.keyCode.ESCAPE){var ne=l.Event(Y);ne.currentTarget=k[0],this.close(ne,!0)}}};k[0]!==this.element[0]&&(z.remove=function(){this._removeTooltip(this._find(k).tooltip)}),(!b||"mouseover"===b.type)&&(z.mouseleave="close"),(!b||"focusin"===b.type)&&(z.focusout="close"),this._on(!0,k,z)},close:function(b){var k,z=this,Y=l(b?b.currentTarget:this.element),ne=this._find(Y);ne?(k=ne.tooltip,!ne.closing&&(clearInterval(this.delayedShow),Y.data("ui-tooltip-title")&&!Y.attr("title")&&Y.attr("title",Y.data("ui-tooltip-title")),this._removeDescribedBy(Y),ne.hiding=!0,k.stop(!0),this._hide(k,this.options.hide,function(){z._removeTooltip(l(this))}),Y.removeData("ui-tooltip-open"),this._off(Y,"mouseleave focusout keyup"),Y[0]!==this.element[0]&&this._off(Y,"remove"),this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&l.each(this.parents,function(pe,Ae){l(Ae.element).attr("title",Ae.title),delete z.parents[pe]}),ne.closing=!0,this._trigger("close",b,{tooltip:k}),ne.hiding||(ne.closing=!1))):Y.removeData("ui-tooltip-open")},_tooltip:function(b){var k=l("<div>").attr("role","tooltip"),z=l("<div>").appendTo(k),Y=k.uniqueId().attr("id");return this._addClass(z,"ui-tooltip-content"),this._addClass(k,"ui-tooltip","ui-widget ui-widget-content"),k.appendTo(this._appendTo(b)),this.tooltips[Y]={element:b,tooltip:k}},_find:function(b){var k=b.data("ui-tooltip-id");return k?this.tooltips[k]:null},_removeTooltip:function(b){b.remove(),delete this.tooltips[b.attr("id")]},_appendTo:function(b){var k=b.closest(".ui-front, dialog");return k.length||(k=this.document[0].body),k},_destroy:function(){var b=this;l.each(this.tooltips,function(k,z){var Y=l.Event("blur"),ne=z.element;Y.target=Y.currentTarget=ne[0],b.close(Y,!0),l("#"+k).remove(),ne.data("ui-tooltip-title")&&(ne.attr("title")||ne.attr("title",ne.data("ui-tooltip-title")),ne.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),!1!==l.uiBackCompat&&l.widget("ui.tooltip",l.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var b=this._superApply(arguments);return this.options.tooltipClass&&b.tooltip.addClass(this.options.tooltipClass),b}});var Nn="ui-effects-",an="ui-effects-style",hi="ui-effects-animated",Oi=l;l.effects={effect:{}},function(b,k){var Mt,Y=/^([\-+])=\s*(\d+\.?\d*)/,ne=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(Dt){return[Dt[1],Dt[2],Dt[3],Dt[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(Dt){return[2.55*Dt[1],2.55*Dt[2],2.55*Dt[3],Dt[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(Dt){return[parseInt(Dt[1],16),parseInt(Dt[2],16),parseInt(Dt[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(Dt){return[parseInt(Dt[1]+Dt[1],16),parseInt(Dt[2]+Dt[2],16),parseInt(Dt[3]+Dt[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(Dt){return[Dt[1],Dt[2]/100,Dt[3]/100,Dt[4]]}}],pe=b.Color=function(Dt,nn,bn,ln){return new b.Color.fn.parse(Dt,nn,bn,ln)},Ae={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},Ge={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},$e=pe.support={},yt=b("<p>")[0],tn=b.each;function Tt(Dt,nn,bn){var ln=Ge[nn.type]||{};return null==Dt?bn||!nn.def?null:nn.def:(Dt=ln.floor?~~Dt:parseFloat(Dt),isNaN(Dt)?nn.def:ln.mod?(Dt+ln.mod)%ln.mod:0>Dt?0:ln.max<Dt?ln.max:Dt)}function qt(Dt){var nn=pe(),bn=nn._rgba=[];return Dt=Dt.toLowerCase(),tn(ne,function(ln,qn){var ei,Ri=qn.re.exec(Dt),Di=Ri&&qn.parse(Ri),Ai=qn.space||"rgba";if(Di)return ei=nn[Ai](Di),nn[Ae[Ai].cache]=ei[Ae[Ai].cache],bn=nn._rgba=ei._rgba,!1}),bn.length?("0,0,0,0"===bn.join()&&b.extend(bn,Mt.transparent),nn):Mt[Dt]}function sn(Dt,nn,bn){return 6*(bn=(bn+1)%1)<1?Dt+(nn-Dt)*bn*6:2*bn<1?nn:3*bn<2?Dt+(nn-Dt)*(2/3-bn)*6:Dt}yt.style.cssText="background-color:rgba(1,1,1,.5)",$e.rgba=yt.style.backgroundColor.indexOf("rgba")>-1,tn(Ae,function(Dt,nn){nn.cache="_"+Dt,nn.props.alpha={idx:3,type:"percent",def:1}}),pe.fn=b.extend(pe.prototype,{parse:function(Dt,nn,bn,ln){if(Dt===k)return this._rgba=[null,null,null,null],this;(Dt.jquery||Dt.nodeType)&&(Dt=b(Dt).css(nn),nn=k);var qn=this,ei=b.type(Dt),Ri=this._rgba=[];return nn!==k&&(Dt=[Dt,nn,bn,ln],ei="array"),"string"===ei?this.parse(qt(Dt)||Mt._default):"array"===ei?(tn(Ae.rgba.props,function(Di,Ai){Ri[Ai.idx]=Tt(Dt[Ai.idx],Ai)}),this):"object"===ei?(tn(Ae,Dt instanceof pe?function(Di,Ai){Dt[Ai.cache]&&(qn[Ai.cache]=Dt[Ai.cache].slice())}:function(Di,Ai){var Ii=Ai.cache;tn(Ai.props,function(Er,Ui){if(!qn[Ii]&&Ai.to){if("alpha"===Er||null==Dt[Er])return;qn[Ii]=Ai.to(qn._rgba)}qn[Ii][Ui.idx]=Tt(Dt[Er],Ui,!0)}),qn[Ii]&&b.inArray(null,qn[Ii].slice(0,3))<0&&(qn[Ii][3]=1,Ai.from&&(qn._rgba=Ai.from(qn[Ii])))}),this):void 0},is:function(Dt){var nn=pe(Dt),bn=!0,ln=this;return tn(Ae,function(qn,ei){var Ri,Di=nn[ei.cache];return Di&&(Ri=ln[ei.cache]||ei.to&&ei.to(ln._rgba)||[],tn(ei.props,function(Ai,Ii){if(null!=Di[Ii.idx])return bn=Di[Ii.idx]===Ri[Ii.idx]})),bn}),bn},_space:function(){var Dt=[],nn=this;return tn(Ae,function(bn,ln){nn[ln.cache]&&Dt.push(bn)}),Dt.pop()},transition:function(Dt,nn){var bn=pe(Dt),ln=bn._space(),qn=Ae[ln],ei=0===this.alpha()?pe("transparent"):this,Ri=ei[qn.cache]||qn.to(ei._rgba),Di=Ri.slice();return bn=bn[qn.cache],tn(qn.props,function(Ai,Ii){var Er=Ii.idx,Ui=Ri[Er],$r=bn[Er],Ur=Ge[Ii.type]||{};null!==$r&&(null===Ui?Di[Er]=$r:(Ur.mod&&($r-Ui>Ur.mod/2?Ui+=Ur.mod:Ui-$r>Ur.mod/2&&(Ui-=Ur.mod)),Di[Er]=Tt(($r-Ui)*nn+Ui,Ii)))}),this[ln](Di)},blend:function(Dt){if(1===this._rgba[3])return this;var nn=this._rgba.slice(),bn=nn.pop(),ln=pe(Dt)._rgba;return pe(b.map(nn,function(qn,ei){return(1-bn)*ln[ei]+bn*qn}))},toRgbaString:function(){var Dt="rgba(",nn=b.map(this._rgba,function(bn,ln){return null==bn?ln>2?1:0:bn});return 1===nn[3]&&(nn.pop(),Dt="rgb("),Dt+nn.join()+")"},toHslaString:function(){var Dt="hsla(",nn=b.map(this.hsla(),function(bn,ln){return null==bn&&(bn=ln>2?1:0),ln&&ln<3&&(bn=Math.round(100*bn)+"%"),bn});return 1===nn[3]&&(nn.pop(),Dt="hsl("),Dt+nn.join()+")"},toHexString:function(Dt){var nn=this._rgba.slice(),bn=nn.pop();return Dt&&nn.push(~~(255*bn)),"#"+b.map(nn,function(ln){return 1===(ln=(ln||0).toString(16)).length?"0"+ln:ln}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),pe.fn.parse.prototype=pe.fn,Ae.hsla.to=function(Dt){if(null==Dt[0]||null==Dt[1]||null==Dt[2])return[null,null,null,Dt[3]];var Ui,nn=Dt[0]/255,bn=Dt[1]/255,ln=Dt[2]/255,qn=Dt[3],ei=Math.max(nn,bn,ln),Ri=Math.min(nn,bn,ln),Di=ei-Ri,Ai=ei+Ri,Ii=.5*Ai;return Ui=0===Di?0:Ii<=.5?Di/Ai:Di/(2-Ai),[Math.round(Ri===ei?0:nn===ei?60*(bn-ln)/Di+360:bn===ei?60*(ln-nn)/Di+120:60*(nn-bn)/Di+240)%360,Ui,Ii,null==qn?1:qn]},Ae.hsla.from=function(Dt){if(null==Dt[0]||null==Dt[1]||null==Dt[2])return[null,null,null,Dt[3]];var nn=Dt[0]/360,bn=Dt[1],ln=Dt[2],qn=Dt[3],ei=ln<=.5?ln*(1+bn):ln+bn-ln*bn,Ri=2*ln-ei;return[Math.round(255*sn(Ri,ei,nn+1/3)),Math.round(255*sn(Ri,ei,nn)),Math.round(255*sn(Ri,ei,nn-1/3)),qn]},tn(Ae,function(Dt,nn){var bn=nn.props,ln=nn.cache,qn=nn.to,ei=nn.from;pe.fn[Dt]=function(Ri){if(qn&&!this[ln]&&(this[ln]=qn(this._rgba)),Ri===k)return this[ln].slice();var Di,Ai=b.type(Ri),Ii="array"===Ai||"object"===Ai?Ri:arguments,Er=this[ln].slice();return tn(bn,function(Ui,$r){var Ur=Ii["object"===Ai?Ui:$r.idx];null==Ur&&(Ur=Er[$r.idx]),Er[$r.idx]=Tt(Ur,$r)}),ei?((Di=pe(ei(Er)))[ln]=Er,Di):pe(Er)},tn(bn,function(Ri,Di){pe.fn[Ri]||(pe.fn[Ri]=function(Ai){var Ur,Ii=b.type(Ai),Er="alpha"===Ri?this._hsla?"hsla":"rgba":Dt,Ui=this[Er](),$r=Ui[Di.idx];return"undefined"===Ii?$r:("function"===Ii&&(Ai=Ai.call(this,$r),Ii=b.type(Ai)),null==Ai&&Di.empty?this:("string"===Ii&&(Ur=Y.exec(Ai))&&(Ai=$r+parseFloat(Ur[2])*("+"===Ur[1]?1:-1)),Ui[Di.idx]=Ai,this[Er](Ui)))})})}),pe.hook=function(Dt){var nn=Dt.split(" ");tn(nn,function(bn,ln){b.cssHooks[ln]={set:function(qn,ei){var Ri,Di,Ai="";if("transparent"!==ei&&("string"!==b.type(ei)||(Ri=qt(ei)))){if(ei=pe(Ri||ei),!$e.rgba&&1!==ei._rgba[3]){for(Di="backgroundColor"===ln?qn.parentNode:qn;(""===Ai||"transparent"===Ai)&&Di&&Di.style;)try{Ai=b.css(Di,"backgroundColor"),Di=Di.parentNode}catch(Ii){}ei=ei.blend(Ai&&"transparent"!==Ai?Ai:"_default")}ei=ei.toRgbaString()}try{qn.style[ln]=ei}catch(Ii){}}},b.fx.step[ln]=function(qn){qn.colorInit||(qn.start=pe(qn.elem,ln),qn.end=pe(qn.end),qn.colorInit=!0),b.cssHooks[ln].set(qn.elem,qn.start.transition(qn.end,qn.pos))}})},pe.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),b.cssHooks.borderColor={expand:function(Dt){var nn={};return tn(["Top","Right","Bottom","Left"],function(bn,ln){nn["border"+ln+"Color"]=Dt}),nn}},Mt=b.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(Oi),function(){var ne,b=["add","remove","toggle"],k={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function z(ne){var pe,Ae,Ge=ne.ownerDocument.defaultView?ne.ownerDocument.defaultView.getComputedStyle(ne,null):ne.currentStyle,$e={};if(Ge&&Ge.length&&Ge[0]&&Ge[Ge[0]])for(Ae=Ge.length;Ae--;)"string"==typeof Ge[pe=Ge[Ae]]&&($e[l.camelCase(pe)]=Ge[pe]);else for(pe in Ge)"string"==typeof Ge[pe]&&($e[pe]=Ge[pe]);return $e}l.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(ne,pe){l.fx.step[pe]=function(Ae){("none"!==Ae.end&&!Ae.setAttr||1===Ae.pos&&!Ae.setAttr)&&(Oi.style(Ae.elem,pe,Ae.end),Ae.setAttr=!0)}}),l.fn.addBack||(l.fn.addBack=function(ne){return this.add(null==ne?this.prevObject:this.prevObject.filter(ne))}),l.effects.animateClass=function(ne,pe,Ae,Ge){var $e=l.speed(pe,Ae,Ge);return this.queue(function(){var tn,yt=l(this),Mt=yt.attr("class")||"",Tt=$e.children?yt.find("*").addBack():yt;Tt=Tt.map(function(){return{el:l(this),start:z(this)}}),(tn=function(){l.each(b,function(qt,sn){ne[sn]&&yt[sn+"Class"](ne[sn])})})(),Tt=Tt.map(function(){return this.end=z(this.el[0]),this.diff=function Y(ne,pe){var Ge,$e,Ae={};for(Ge in pe)ne[Ge]!==($e=pe[Ge])&&(k[Ge]||(l.fx.step[Ge]||!isNaN(parseFloat($e)))&&(Ae[Ge]=$e));return Ae}(this.start,this.end),this}),yt.attr("class",Mt),Tt=Tt.map(function(){var qt=this,sn=l.Deferred(),Dt=l.extend({},$e,{queue:!1,complete:function(){sn.resolve(qt)}});return this.el.animate(this.diff,Dt),sn.promise()}),l.when.apply(l,Tt.get()).done(function(){tn(),l.each(arguments,function(){var qt=this.el;l.each(this.diff,function(sn){qt.css(sn,"")})}),$e.complete.call(yt[0])})})},l.fn.extend({addClass:(ne=l.fn.addClass,function(pe,Ae,Ge,$e){return Ae?l.effects.animateClass.call(this,{add:pe},Ae,Ge,$e):ne.apply(this,arguments)}),removeClass:function(ne){return function(pe,Ae,Ge,$e){return arguments.length>1?l.effects.animateClass.call(this,{remove:pe},Ae,Ge,$e):ne.apply(this,arguments)}}(l.fn.removeClass),toggleClass:function(ne){return function(pe,Ae,Ge,$e,yt){return"boolean"==typeof Ae||void 0===Ae?Ge?l.effects.animateClass.call(this,Ae?{add:pe}:{remove:pe},Ge,$e,yt):ne.apply(this,arguments):l.effects.animateClass.call(this,{toggle:pe},Ae,Ge,$e)}}(l.fn.toggleClass),switchClass:function(ne,pe,Ae,Ge,$e){return l.effects.animateClass.call(this,{add:pe,remove:ne},Ae,Ge,$e)}})}(),function(){var Y;function b(Y,ne,pe,Ae){return l.isPlainObject(Y)&&(ne=Y,Y=Y.effect),Y={effect:Y},null==ne&&(ne={}),l.isFunction(ne)&&(Ae=ne,pe=null,ne={}),("number"==typeof ne||l.fx.speeds[ne])&&(Ae=pe,pe=ne,ne={}),l.isFunction(pe)&&(Ae=pe,pe=null),ne&&l.extend(Y,ne),pe=pe||ne.duration,Y.duration=l.fx.off?0:"number"==typeof pe?pe:pe in l.fx.speeds?l.fx.speeds[pe]:l.fx.speeds._default,Y.complete=Ae||ne.complete,Y}function k(Y){return!!(!Y||"number"==typeof Y||l.fx.speeds[Y]||"string"==typeof Y&&!l.effects.effect[Y]||l.isFunction(Y)||"object"==typeof Y&&!Y.effect)}function z(Y,ne){var pe=ne.outerWidth(),Ae=ne.outerHeight(),$e=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(Y)||["",0,pe,Ae,0];return{top:parseFloat($e[1])||0,right:"auto"===$e[2]?pe:parseFloat($e[2]),bottom:"auto"===$e[3]?Ae:parseFloat($e[3]),left:parseFloat($e[4])||0}}l.expr&&l.expr.filters&&l.expr.filters.animated&&(l.expr.filters.animated=(Y=l.expr.filters.animated,function(ne){return!!l(ne).data(hi)||Y(ne)})),!1!==l.uiBackCompat&&l.extend(l.effects,{save:function(Y,ne){for(var pe=0,Ae=ne.length;pe<Ae;pe++)null!==ne[pe]&&Y.data(Nn+ne[pe],Y[0].style[ne[pe]])},restore:function(Y,ne){for(var pe,Ae=0,Ge=ne.length;Ae<Ge;Ae++)null!==ne[Ae]&&(pe=Y.data(Nn+ne[Ae]),Y.css(ne[Ae],pe))},setMode:function(Y,ne){return"toggle"===ne&&(ne=Y.is(":hidden")?"show":"hide"),ne},createWrapper:function(Y){if(Y.parent().is(".ui-effects-wrapper"))return Y.parent();var ne={width:Y.outerWidth(!0),height:Y.outerHeight(!0),float:Y.css("float")},pe=l("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),Ae={width:Y.width(),height:Y.height()},Ge=document.activeElement;return Y.wrap(pe),(Y[0]===Ge||l.contains(Y[0],Ge))&&l(Ge).trigger("focus"),pe=Y.parent(),"static"===Y.css("position")?(pe.css({position:"relative"}),Y.css({position:"relative"})):(l.extend(ne,{position:Y.css("position"),zIndex:Y.css("z-index")}),l.each(["top","left","bottom","right"],function($e,yt){ne[yt]=Y.css(yt),isNaN(parseInt(ne[yt],10))&&(ne[yt]="auto")}),Y.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),Y.css(Ae),pe.css(ne).show()},removeWrapper:function(Y){var ne=document.activeElement;return Y.parent().is(".ui-effects-wrapper")&&(Y.parent().replaceWith(Y),(Y[0]===ne||l.contains(Y[0],ne))&&l(ne).trigger("focus")),Y}}),l.extend(l.effects,{version:"1.12.1",define:function(Y,ne,pe){return pe||(pe=ne,ne="effect"),l.effects.effect[Y]=pe,l.effects.effect[Y].mode=ne,pe},scaledDimensions:function(Y,ne,pe){if(0===ne)return{height:0,width:0,outerHeight:0,outerWidth:0};var Ae="horizontal"!==pe?(ne||100)/100:1,Ge="vertical"!==pe?(ne||100)/100:1;return{height:Y.height()*Ge,width:Y.width()*Ae,outerHeight:Y.outerHeight()*Ge,outerWidth:Y.outerWidth()*Ae}},clipToBox:function(Y){return{width:Y.clip.right-Y.clip.left,height:Y.clip.bottom-Y.clip.top,left:Y.clip.left,top:Y.clip.top}},unshift:function(Y,ne,pe){var Ae=Y.queue();ne>1&&Ae.splice.apply(Ae,[1,0].concat(Ae.splice(ne,pe))),Y.dequeue()},saveStyle:function(Y){Y.data(an,Y[0].style.cssText)},restoreStyle:function(Y){Y[0].style.cssText=Y.data(an)||"",Y.removeData(an)},mode:function(Y,ne){var pe=Y.is(":hidden");return"toggle"===ne&&(ne=pe?"show":"hide"),(pe?"hide"===ne:"show"===ne)&&(ne="none"),ne},getBaseline:function(Y,ne){var pe,Ae;switch(Y[0]){case"top":pe=0;break;case"middle":pe=.5;break;case"bottom":pe=1;break;default:pe=Y[0]/ne.height}switch(Y[1]){case"left":Ae=0;break;case"center":Ae=.5;break;case"right":Ae=1;break;default:Ae=Y[1]/ne.width}return{x:Ae,y:pe}},createPlaceholder:function(Y){var ne,pe=Y.css("position"),Ae=Y.position();return Y.css({marginTop:Y.css("marginTop"),marginBottom:Y.css("marginBottom"),marginLeft:Y.css("marginLeft"),marginRight:Y.css("marginRight")}).outerWidth(Y.outerWidth()).outerHeight(Y.outerHeight()),/^(static|relative)/.test(pe)&&(pe="absolute",ne=l("<"+Y[0].nodeName+">").insertAfter(Y).css({display:/^(inline|ruby)/.test(Y.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:Y.css("marginTop"),marginBottom:Y.css("marginBottom"),marginLeft:Y.css("marginLeft"),marginRight:Y.css("marginRight"),float:Y.css("float")}).outerWidth(Y.outerWidth()).outerHeight(Y.outerHeight()).addClass("ui-effects-placeholder"),Y.data(Nn+"placeholder",ne)),Y.css({position:pe,left:Ae.left,top:Ae.top}),ne},removePlaceholder:function(Y){var ne=Nn+"placeholder",pe=Y.data(ne);pe&&(pe.remove(),Y.removeData(ne))},cleanUp:function(Y){l.effects.restoreStyle(Y),l.effects.removePlaceholder(Y)},setTransition:function(Y,ne,pe,Ae){return Ae=Ae||{},l.each(ne,function(Ge,$e){var yt=Y.cssUnit($e);yt[0]>0&&(Ae[$e]=yt[0]*pe+yt[1])}),Ae}}),l.fn.extend({effect:function(){var Y=b.apply(this,arguments),ne=l.effects.effect[Y.effect],pe=ne.mode,Ae=Y.queue,Ge=Ae||"fx",$e=Y.complete,yt=Y.mode,Mt=[],tn=function(qt){var sn=l(this),Dt=l.effects.mode(sn,yt)||pe;sn.data(hi,!0),Mt.push(Dt),pe&&("show"===Dt||Dt===pe&&"hide"===Dt)&&sn.show(),(!pe||"none"!==Dt)&&l.effects.saveStyle(sn),l.isFunction(qt)&&qt()};if(l.fx.off||!ne)return yt?this[yt](Y.duration,$e):this.each(function(){$e&&$e.call(this)});function Tt(qt){var sn=l(this);function nn(){l.isFunction($e)&&$e.call(sn[0]),l.isFunction(qt)&&qt()}Y.mode=Mt.shift(),!1===l.uiBackCompat||pe?"none"===Y.mode?(sn[yt](),nn()):ne.call(sn[0],Y,function Dt(){sn.removeData(hi),l.effects.cleanUp(sn),"hide"===Y.mode&&sn.hide(),nn()}):(sn.is(":hidden")?"hide"===yt:"show"===yt)?(sn[yt](),nn()):ne.call(sn[0],Y,nn)}return!1===Ae?this.each(tn).each(Tt):this.queue(Ge,tn).queue(Ge,Tt)},show:function(Y){return function(ne){if(k(ne))return Y.apply(this,arguments);var pe=b.apply(this,arguments);return pe.mode="show",this.effect.call(this,pe)}}(l.fn.show),hide:function(Y){return function(ne){if(k(ne))return Y.apply(this,arguments);var pe=b.apply(this,arguments);return pe.mode="hide",this.effect.call(this,pe)}}(l.fn.hide),toggle:function(Y){return function(ne){if(k(ne)||"boolean"==typeof ne)return Y.apply(this,arguments);var pe=b.apply(this,arguments);return pe.mode="toggle",this.effect.call(this,pe)}}(l.fn.toggle),cssUnit:function(Y){var ne=this.css(Y),pe=[];return l.each(["em","px","%","pt"],function(Ae,Ge){ne.indexOf(Ge)>0&&(pe=[parseFloat(ne),Ge])}),pe},cssClip:function(Y){return Y?this.css("clip","rect("+Y.top+"px "+Y.right+"px "+Y.bottom+"px "+Y.left+"px)"):z(this.css("clip"),this)},transfer:function(Y,ne){var pe=l(this),Ae=l(Y.to),Ge="fixed"===Ae.css("position"),$e=l("body"),yt=Ge?$e.scrollTop():0,Mt=Ge?$e.scrollLeft():0,tn=Ae.offset(),Tt={top:tn.top-yt,left:tn.left-Mt,height:Ae.innerHeight(),width:Ae.innerWidth()},qt=pe.offset(),sn=l("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(Y.className).css({top:qt.top-yt,left:qt.left-Mt,height:pe.innerHeight(),width:pe.innerWidth(),position:Ge?"fixed":"absolute"}).animate(Tt,Y.duration,Y.easing,function(){sn.remove(),l.isFunction(ne)&&ne()})}}),l.fx.step.clip=function(Y){Y.clipInit||(Y.start=l(Y.elem).cssClip(),"string"==typeof Y.end&&(Y.end=z(Y.end,Y.elem)),Y.clipInit=!0),l(Y.elem).cssClip({top:Y.pos*(Y.end.top-Y.start.top)+Y.start.top,right:Y.pos*(Y.end.right-Y.start.right)+Y.start.right,bottom:Y.pos*(Y.end.bottom-Y.start.bottom)+Y.start.bottom,left:Y.pos*(Y.end.left-Y.start.left)+Y.start.left})}}(),function(){var b={};l.each(["Quad","Cubic","Quart","Quint","Expo"],function(k,z){b[z]=function(Y){return Math.pow(Y,k+2)}}),l.extend(b,{Sine:function(k){return 1-Math.cos(k*Math.PI/2)},Circ:function(k){return 1-Math.sqrt(1-k*k)},Elastic:function(k){return 0===k||1===k?k:-Math.pow(2,8*(k-1))*Math.sin((80*(k-1)-7.5)*Math.PI/15)},Back:function(k){return k*k*(3*k-2)},Bounce:function(k){for(var z,Y=4;k<((z=Math.pow(2,--Y))-1)/11;);return 1/Math.pow(4,3-Y)-7.5625*Math.pow((3*z-2)/22-k,2)}}),l.each(b,function(k,z){l.easing["easeIn"+k]=z,l.easing["easeOut"+k]=function(Y){return 1-z(1-Y)},l.easing["easeInOut"+k]=function(Y){return Y<.5?z(2*Y)/2:1-z(-2*Y+2)/2}})}(),l.effects.define("blind","hide",function(b,k){var z={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},Y=l(this),ne=b.direction||"up",pe=Y.cssClip(),Ae={clip:l.extend({},pe)},Ge=l.effects.createPlaceholder(Y);Ae.clip[z[ne][0]]=Ae.clip[z[ne][1]],"show"===b.mode&&(Y.cssClip(Ae.clip),Ge&&Ge.css(l.effects.clipToBox(Ae)),Ae.clip=pe),Ge&&Ge.animate(l.effects.clipToBox(Ae),b.duration,b.easing),Y.animate(Ae,{queue:!1,duration:b.duration,easing:b.easing,complete:k})}),l.effects.define("bounce",function(b,k){var z,Y,ne,pe=l(this),Ae=b.mode,Ge="hide"===Ae,$e="show"===Ae,yt=b.direction||"up",Mt=b.distance,tn=b.times||5,Tt=2*tn+($e||Ge?1:0),qt=b.duration/Tt,sn=b.easing,Dt="up"===yt||"down"===yt?"top":"left",nn="up"===yt||"left"===yt,bn=0,ln=pe.queue().length;for(l.effects.createPlaceholder(pe),ne=pe.css(Dt),Mt||(Mt=pe["top"===Dt?"outerHeight":"outerWidth"]()/3),$e&&((Y={opacity:1})[Dt]=ne,pe.css("opacity",0).css(Dt,nn?2*-Mt:2*Mt).animate(Y,qt,sn)),Ge&&(Mt/=Math.pow(2,tn-1)),(Y={})[Dt]=ne;bn<tn;bn++)(z={})[Dt]=(nn?"-=":"+=")+Mt,pe.animate(z,qt,sn).animate(Y,qt,sn),Mt=Ge?2*Mt:Mt/2;Ge&&((z={opacity:0})[Dt]=(nn?"-=":"+=")+Mt,pe.animate(z,qt,sn)),pe.queue(k),l.effects.unshift(pe,ln,Tt+1)}),l.effects.define("clip","hide",function(b,k){var z,Y={},ne=l(this),pe=b.direction||"vertical",Ae="both"===pe,Ge=Ae||"horizontal"===pe,$e=Ae||"vertical"===pe;z=ne.cssClip(),Y.clip={top:$e?(z.bottom-z.top)/2:z.top,right:Ge?(z.right-z.left)/2:z.right,bottom:$e?(z.bottom-z.top)/2:z.bottom,left:Ge?(z.right-z.left)/2:z.left},l.effects.createPlaceholder(ne),"show"===b.mode&&(ne.cssClip(Y.clip),Y.clip=z),ne.animate(Y,{queue:!1,duration:b.duration,easing:b.easing,complete:k})}),l.effects.define("drop","hide",function(b,k){var z,Y=l(this),pe="show"===b.mode,Ae=b.direction||"left",Ge="up"===Ae||"down"===Ae?"top":"left",$e="up"===Ae||"left"===Ae?"-=":"+=",yt="+="===$e?"-=":"+=",Mt={opacity:0};l.effects.createPlaceholder(Y),z=b.distance||Y["top"===Ge?"outerHeight":"outerWidth"](!0)/2,Mt[Ge]=$e+z,pe&&(Y.css(Mt),Mt[Ge]=yt+z,Mt.opacity=1),Y.animate(Mt,{queue:!1,duration:b.duration,easing:b.easing,complete:k})}),l.effects.define("explode","hide",function(b,k){var z,Y,ne,pe,Ae,Ge,$e=b.pieces?Math.round(Math.sqrt(b.pieces)):3,yt=$e,Mt=l(this),Tt="show"===b.mode,qt=Mt.show().css("visibility","hidden").offset(),sn=Math.ceil(Mt.outerWidth()/yt),Dt=Math.ceil(Mt.outerHeight()/$e),nn=[];function bn(){nn.push(this),nn.length===$e*yt&&function ln(){Mt.css({visibility:"visible"}),l(nn).remove(),k()}()}for(z=0;z<$e;z++)for(pe=qt.top+z*Dt,Ge=z-($e-1)/2,Y=0;Y<yt;Y++)ne=qt.left+Y*sn,Ae=Y-(yt-1)/2,Mt.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-Y*sn,top:-z*Dt}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:sn,height:Dt,left:ne+(Tt?Ae*sn:0),top:pe+(Tt?Ge*Dt:0),opacity:Tt?0:1}).animate({left:ne+(Tt?0:Ae*sn),top:pe+(Tt?0:Ge*Dt),opacity:Tt?1:0},b.duration||500,b.easing,bn)}),l.effects.define("fade","toggle",function(b,k){var z="show"===b.mode;l(this).css("opacity",z?0:1).animate({opacity:z?1:0},{queue:!1,duration:b.duration,easing:b.easing,complete:k})}),l.effects.define("fold","hide",function(b,k){var z=l(this),Y=b.mode,ne="show"===Y,pe="hide"===Y,Ae=b.size||15,Ge=/([0-9]+)%/.exec(Ae),yt=b.horizFirst?["right","bottom"]:["bottom","right"],Mt=b.duration/2,tn=l.effects.createPlaceholder(z),Tt=z.cssClip(),qt={clip:l.extend({},Tt)},sn={clip:l.extend({},Tt)},Dt=[Tt[yt[0]],Tt[yt[1]]],nn=z.queue().length;Ge&&(Ae=parseInt(Ge[1],10)/100*Dt[pe?0:1]),qt.clip[yt[0]]=Ae,sn.clip[yt[0]]=Ae,sn.clip[yt[1]]=0,ne&&(z.cssClip(sn.clip),tn&&tn.css(l.effects.clipToBox(sn)),sn.clip=Tt),z.queue(function(bn){tn&&tn.animate(l.effects.clipToBox(qt),Mt,b.easing).animate(l.effects.clipToBox(sn),Mt,b.easing),bn()}).animate(qt,Mt,b.easing).animate(sn,Mt,b.easing).queue(k),l.effects.unshift(z,nn,4)}),l.effects.define("highlight","show",function(b,k){var z=l(this),Y={backgroundColor:z.css("backgroundColor")};"hide"===b.mode&&(Y.opacity=0),l.effects.saveStyle(z),z.css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(Y,{queue:!1,duration:b.duration,easing:b.easing,complete:k})}),l.effects.define("size",function(b,k){var z,Y,ne,pe=l(this),Ae=["fontSize"],Ge=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],$e=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],yt=b.mode,Mt="effect"!==yt,tn=b.scale||"both",Tt=b.origin||["middle","center"],qt=pe.css("position"),sn=pe.position(),Dt=l.effects.scaledDimensions(pe),nn=b.from||Dt,bn=b.to||l.effects.scaledDimensions(pe,0);l.effects.createPlaceholder(pe),"show"===yt&&(ne=nn,nn=bn,bn=ne),Y={from:{y:nn.height/Dt.height,x:nn.width/Dt.width},to:{y:bn.height/Dt.height,x:bn.width/Dt.width}},("box"===tn||"both"===tn)&&(Y.from.y!==Y.to.y&&(nn=l.effects.setTransition(pe,Ge,Y.from.y,nn),bn=l.effects.setTransition(pe,Ge,Y.to.y,bn)),Y.from.x!==Y.to.x&&(nn=l.effects.setTransition(pe,$e,Y.from.x,nn),bn=l.effects.setTransition(pe,$e,Y.to.x,bn))),("content"===tn||"both"===tn)&&Y.from.y!==Y.to.y&&(nn=l.effects.setTransition(pe,Ae,Y.from.y,nn),bn=l.effects.setTransition(pe,Ae,Y.to.y,bn)),Tt&&(z=l.effects.getBaseline(Tt,Dt),nn.top=(Dt.outerHeight-nn.outerHeight)*z.y+sn.top,nn.left=(Dt.outerWidth-nn.outerWidth)*z.x+sn.left,bn.top=(Dt.outerHeight-bn.outerHeight)*z.y+sn.top,bn.left=(Dt.outerWidth-bn.outerWidth)*z.x+sn.left),pe.css(nn),("content"===tn||"both"===tn)&&(Ge=Ge.concat(["marginTop","marginBottom"]).concat(Ae),$e=$e.concat(["marginLeft","marginRight"]),pe.find("*[width]").each(function(){var ln=l(this),qn=l.effects.scaledDimensions(ln),ei={height:qn.height*Y.from.y,width:qn.width*Y.from.x,outerHeight:qn.outerHeight*Y.from.y,outerWidth:qn.outerWidth*Y.from.x},Ri={height:qn.height*Y.to.y,width:qn.width*Y.to.x,outerHeight:qn.height*Y.to.y,outerWidth:qn.width*Y.to.x};Y.from.y!==Y.to.y&&(ei=l.effects.setTransition(ln,Ge,Y.from.y,ei),Ri=l.effects.setTransition(ln,Ge,Y.to.y,Ri)),Y.from.x!==Y.to.x&&(ei=l.effects.setTransition(ln,$e,Y.from.x,ei),Ri=l.effects.setTransition(ln,$e,Y.to.x,Ri)),Mt&&l.effects.saveStyle(ln),ln.css(ei),ln.animate(Ri,b.duration,b.easing,function(){Mt&&l.effects.restoreStyle(ln)})})),pe.animate(bn,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){var ln=pe.offset();0===bn.opacity&&pe.css("opacity",nn.opacity),Mt||(pe.css("position","static"===qt?"relative":qt).offset(ln),l.effects.saveStyle(pe)),k()}})}),l.effects.define("scale",function(b,k){var z=l(this),Y=b.mode,ne=parseInt(b.percent,10)||(0===parseInt(b.percent,10)||"effect"!==Y?0:100),pe=l.extend(!0,{from:l.effects.scaledDimensions(z),to:l.effects.scaledDimensions(z,ne,b.direction||"both"),origin:b.origin||["middle","center"]},b);b.fade&&(pe.from.opacity=1,pe.to.opacity=0),l.effects.effect.size.call(this,pe,k)}),l.effects.define("puff","hide",function(b,k){var z=l.extend(!0,{},b,{fade:!0,percent:parseInt(b.percent,10)||150});l.effects.effect.scale.call(this,z,k)}),l.effects.define("pulsate","show",function(b,k){var z=l(this),Y=b.mode,ne="show"===Y,Ge=2*(b.times||5)+(ne||"hide"===Y?1:0),$e=b.duration/Ge,yt=0,Mt=1,tn=z.queue().length;for((ne||!z.is(":visible"))&&(z.css("opacity",0).show(),yt=1);Mt<Ge;Mt++)z.animate({opacity:yt},$e,b.easing),yt=1-yt;z.animate({opacity:yt},$e,b.easing),z.queue(k),l.effects.unshift(z,tn,Ge+1)}),l.effects.define("shake",function(b,k){var z=1,Y=l(this),ne=b.direction||"left",pe=b.distance||20,Ae=b.times||3,Ge=2*Ae+1,$e=Math.round(b.duration/Ge),yt="up"===ne||"down"===ne?"top":"left",Mt="up"===ne||"left"===ne,tn={},Tt={},qt={},sn=Y.queue().length;for(l.effects.createPlaceholder(Y),tn[yt]=(Mt?"-=":"+=")+pe,Tt[yt]=(Mt?"+=":"-=")+2*pe,qt[yt]=(Mt?"-=":"+=")+2*pe,Y.animate(tn,$e,b.easing);z<Ae;z++)Y.animate(Tt,$e,b.easing).animate(qt,$e,b.easing);Y.animate(Tt,$e,b.easing).animate(tn,$e/2,b.easing).queue(k),l.effects.unshift(Y,sn,Ge+1)}),l.effects.define("slide","show",function(b,k){var z,Y,ne=l(this),pe={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},Ae=b.mode,Ge=b.direction||"left",$e="up"===Ge||"down"===Ge?"top":"left",yt="up"===Ge||"left"===Ge,Mt=b.distance||ne["top"===$e?"outerHeight":"outerWidth"](!0),tn={};l.effects.createPlaceholder(ne),z=ne.cssClip(),Y=ne.position()[$e],tn[$e]=(yt?-1:1)*Mt+Y,tn.clip=ne.cssClip(),tn.clip[pe[Ge][1]]=tn.clip[pe[Ge][0]],"show"===Ae&&(ne.cssClip(tn.clip),ne.css($e,tn[$e]),tn.clip=z,tn[$e]=Y),ne.animate(tn,{queue:!1,duration:b.duration,easing:b.easing,complete:k})}),!1!==l.uiBackCompat&&l.effects.define("transfer",function(b,k){l(this).transfer(b,k)})}(y)},259:function(K,G){var y;!function(l,d){"use strict";"object"==typeof K.exports?K.exports=l.document?d(l,!0):function(_){if(!_.document)throw new Error("jQuery requires a window with a document");return d(_)}:d(l)}("undefined"!=typeof window?window:this,function(l,d){"use strict";var _=[],p=Object.getPrototypeOf,v=_.slice,C=_.flat?function(q){return _.flat.call(q)}:function(q){return _.concat.apply([],q)},D=_.push,I=_.indexOf,P={},B=P.toString,U=P.hasOwnProperty,J=U.toString,W=J.call(Object),re={},he=function(se){return"function"==typeof se&&"number"!=typeof se.nodeType&&"function"!=typeof se.item},ie=function(se){return null!=se&&se===se.window},ae=l.document,Me={type:!0,src:!0,nonce:!0,noModule:!0};function Ce(q,se,ve){var we,Be,Ve=(ve=ve||ae).createElement("script");if(Ve.text=q,se)for(we in Me)(Be=se[we]||se.getAttribute&&se.getAttribute(we))&&Ve.setAttribute(we,Be);ve.head.appendChild(Ve).parentNode.removeChild(Ve)}function Le(q){return null==q?q+"":"object"==typeof q||"function"==typeof q?P[B.call(q)]||"object":typeof q}var ce=function(q,se){return new ce.fn.init(q,se)};function lt(q){var se=!!q&&"length"in q&&q.length,ve=Le(q);return!he(q)&&!ie(q)&&("array"===ve||0===se||"number"==typeof se&&se>0&&se-1 in q)}ce.fn=ce.prototype={jquery:"3.6.1",constructor:ce,length:0,toArray:function(){return v.call(this)},get:function(q){return null==q?v.call(this):q<0?this[q+this.length]:this[q]},pushStack:function(q){var se=ce.merge(this.constructor(),q);return se.prevObject=this,se},each:function(q){return ce.each(this,q)},map:function(q){return this.pushStack(ce.map(this,function(se,ve){return q.call(se,ve,se)}))},slice:function(){return this.pushStack(v.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(ce.grep(this,function(q,se){return(se+1)%2}))},odd:function(){return this.pushStack(ce.grep(this,function(q,se){return se%2}))},eq:function(q){var se=this.length,ve=+q+(q<0?se:0);return this.pushStack(ve>=0&&ve<se?[this[ve]]:[])},end:function(){return this.prevObject||this.constructor()},push:D,sort:_.sort,splice:_.splice},ce.extend=ce.fn.extend=function(){var q,se,ve,we,Be,Ve,Je=arguments[0]||{},At=1,xt=arguments.length,Ft=!1;for("boolean"==typeof Je&&(Ft=Je,Je=arguments[At]||{},At++),"object"!=typeof Je&&!he(Je)&&(Je={}),At===xt&&(Je=this,At--);At<xt;At++)if(null!=(q=arguments[At]))for(se in q)we=q[se],"__proto__"!==se&&Je!==we&&(Ft&&we&&(ce.isPlainObject(we)||(Be=Array.isArray(we)))?(ve=Je[se],Ve=Be&&!Array.isArray(ve)?[]:Be||ce.isPlainObject(ve)?ve:{},Be=!1,Je[se]=ce.extend(Ft,Ve,we)):void 0!==we&&(Je[se]=we));return Je},ce.extend({expando:"jQuery"+("3.6.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(q){throw new Error(q)},noop:function(){},isPlainObject:function(q){var se,ve;return!(!q||"[object Object]"!==B.call(q)||(se=p(q))&&("function"!=typeof(ve=U.call(se,"constructor")&&se.constructor)||J.call(ve)!==W))},isEmptyObject:function(q){var se;for(se in q)return!1;return!0},globalEval:function(q,se,ve){Ce(q,{nonce:se&&se.nonce},ve)},each:function(q,se){var ve,we=0;if(lt(q))for(ve=q.length;we<ve&&!1!==se.call(q[we],we,q[we]);we++);else for(we in q)if(!1===se.call(q[we],we,q[we]))break;return q},makeArray:function(q,se){var ve=se||[];return null!=q&&(lt(Object(q))?ce.merge(ve,"string"==typeof q?[q]:q):D.call(ve,q)),ve},inArray:function(q,se,ve){return null==se?-1:I.call(se,q,ve)},merge:function(q,se){for(var ve=+se.length,we=0,Be=q.length;we<ve;we++)q[Be++]=se[we];return q.length=Be,q},grep:function(q,se,ve){for(var Be=[],Ve=0,Je=q.length,At=!ve;Ve<Je;Ve++)!se(q[Ve],Ve)!==At&&Be.push(q[Ve]);return Be},map:function(q,se,ve){var we,Be,Ve=0,Je=[];if(lt(q))for(we=q.length;Ve<we;Ve++)null!=(Be=se(q[Ve],Ve,ve))&&Je.push(Be);else for(Ve in q)null!=(Be=se(q[Ve],Ve,ve))&&Je.push(Be);return C(Je)},guid:1,support:re}),"function"==typeof Symbol&&(ce.fn[Symbol.iterator]=_[Symbol.iterator]),ce.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(q,se){P["[object "+se+"]"]=se.toLowerCase()});var qe=function(q){var se,ve,we,Be,Ve,Je,At,xt,Ft,Cn,oi,cn,gn,_r,ls,vr,Lo,Fs,fl,Io="sizzle"+1*new Date,or=q.document,ol=0,zr=0,aa=Hs(),mh=Hs(),ys=Hs(),Ol=Hs(),pl=function(Qe,wt){return Qe===wt&&(oi=!0),0},_i={}.hasOwnProperty,ao=[],Yi=ao.pop,Un=ao.push,lo=ao.push,Za=ao.slice,ml=function(Qe,wt){for(var Ot=0,On=Qe.length;Ot<On;Ot++)if(Qe[Ot]===wt)return Ot;return-1},Ad="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",kr="[\\x20\\t\\r\\n\\f]",Oa="(?:\\\\[\\da-fA-F]{1,6}"+kr+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Rs="\\["+kr+"*("+Oa+")(?:"+kr+"*([*^$|!~]?=)"+kr+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Oa+"))|)"+kr+"*\\]",Ro=":("+Oa+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Rs+")*)|.*)\\)|)",Hp=new RegExp(kr+"+","g"),Ds=new RegExp("^"+kr+"+|((?:^|[^\\\\])(?:\\\\.)*)"+kr+"+$","g"),Ze=new RegExp("^"+kr+"*,"+kr+"*"),bs=new RegExp("^"+kr+"*([>+~]|"+kr+")"+kr+"*"),ta=new RegExp(kr+"|>"),Fo=new RegExp(Ro),Nl=new RegExp("^"+Oa+"$"),jo={ID:new RegExp("^#("+Oa+")"),CLASS:new RegExp("^\\.("+Oa+")"),TAG:new RegExp("^("+Oa+"|[*])"),ATTR:new RegExp("^"+Rs),PSEUDO:new RegExp("^"+Ro),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+kr+"*(even|odd|(([+-]|)(\\d*)n|)"+kr+"*(?:([+-]|)"+kr+"*(\\d+)|))"+kr+"*\\)|)","i"),bool:new RegExp("^(?:"+Ad+")$","i"),needsContext:new RegExp("^"+kr+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+kr+"*((?:-\\d)?\\d*)"+kr+"*\\)|)(?=[^-]|$)","i")},Uc=/HTML$/i,fo=/^(?:input|select|textarea|button)$/i,Ya=/^h\d$/i,El=/^[^{]+\{\s*\[native \w/,Xr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_c=/[+~]/,Na=new RegExp("\\\\[\\da-fA-F]{1,6}"+kr+"?|\\\\([^\\r\\n\\f])","g"),Bl=function(Qe,wt){var Ot="0x"+Qe.slice(1)-65536;return wt||(Ot<0?String.fromCharCode(Ot+65536):String.fromCharCode(Ot>>10|55296,1023&Ot|56320))},Gc=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Xa=function(Qe,wt){return wt?"\0"===Qe?"\ufffd":Qe.slice(0,-1)+"\\"+Qe.charCodeAt(Qe.length-1).toString(16)+" ":"\\"+Qe},Tl=function(){cn()},Tu=Ef(function(Qe){return!0===Qe.disabled&&"fieldset"===Qe.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{lo.apply(ao=Za.call(or.childNodes),or.childNodes)}catch(Qe){lo={apply:ao.length?function(wt,Ot){Un.apply(wt,Za.call(Ot))}:function(wt,Ot){for(var On=wt.length,Vt=0;wt[On++]=Ot[Vt++];);wt.length=On-1}}}function Bs(Qe,wt,Ot,On){var Vt,Pn,jn,Mi,Vi,Lr,Ar,Gr=wt&&wt.ownerDocument,ks=wt?wt.nodeType:9;if(Ot=Ot||[],"string"!=typeof Qe||!Qe||1!==ks&&9!==ks&&11!==ks)return Ot;if(!On&&(cn(wt),wt=wt||gn,ls)){if(11!==ks&&(Vi=Xr.exec(Qe)))if(Vt=Vi[1]){if(9===ks){if(!(jn=wt.getElementById(Vt)))return Ot;if(jn.id===Vt)return Ot.push(jn),Ot}else if(Gr&&(jn=Gr.getElementById(Vt))&&fl(wt,jn)&&jn.id===Vt)return Ot.push(jn),Ot}else{if(Vi[2])return lo.apply(Ot,wt.getElementsByTagName(Qe)),Ot;if((Vt=Vi[3])&&ve.getElementsByClassName&&wt.getElementsByClassName)return lo.apply(Ot,wt.getElementsByClassName(Vt)),Ot}if(ve.qsa&&!Ol[Qe+" "]&&(!vr||!vr.test(Qe))&&(1!==ks||"object"!==wt.nodeName.toLowerCase())){if(Ar=Qe,Gr=wt,1===ks&&(ta.test(Qe)||bs.test(Qe))){for(((Gr=_c.test(Qe)&&pr(wt.parentNode)||wt)!==wt||!ve.scope)&&((Mi=wt.getAttribute("id"))?Mi=Mi.replace(Gc,Xa):wt.setAttribute("id",Mi=Io)),Pn=(Lr=Je(Qe)).length;Pn--;)Lr[Pn]=(Mi?"#"+Mi:":scope")+" "+ic(Lr[Pn]);Ar=Lr.join(",")}try{return lo.apply(Ot,Gr.querySelectorAll(Ar)),Ot}catch(Js){Ol(Qe,!0)}finally{Mi===Io&&wt.removeAttribute("id")}}}return xt(Qe.replace(Ds,"$1"),wt,Ot,On)}function Hs(){var Qe=[];return function wt(Ot,On){return Qe.push(Ot+" ")>we.cacheLength&&delete wt[Qe.shift()],wt[Ot+" "]=On}}function pa(Qe){return Qe[Io]=!0,Qe}function nc(Qe){var wt=gn.createElement("fieldset");try{return!!Qe(wt)}catch(Ot){return!1}finally{wt.parentNode&&wt.parentNode.removeChild(wt),wt=null}}function al(Qe,wt){for(var Ot=Qe.split("|"),On=Ot.length;On--;)we.attrHandle[Ot[On]]=wt}function Co(Qe,wt){var Ot=wt&&Qe,On=Ot&&1===Qe.nodeType&&1===wt.nodeType&&Qe.sourceIndex-wt.sourceIndex;if(On)return On;if(Ot)for(;Ot=Ot.nextSibling;)if(Ot===wt)return-1;return Qe?1:-1}function qh(Qe){return function(wt){return"input"===wt.nodeName.toLowerCase()&&wt.type===Qe}}function Du(Qe){return function(wt){var Ot=wt.nodeName.toLowerCase();return("input"===Ot||"button"===Ot)&&wt.type===Qe}}function Au(Qe){return function(wt){return"form"in wt?wt.parentNode&&!1===wt.disabled?"label"in wt?"label"in wt.parentNode?wt.parentNode.disabled===Qe:wt.disabled===Qe:wt.isDisabled===Qe||wt.isDisabled!==!Qe&&Tu(wt)===Qe:wt.disabled===Qe:"label"in wt&&wt.disabled===Qe}}function na(Qe){return pa(function(wt){return wt=+wt,pa(function(Ot,On){for(var Vt,Pn=Qe([],Ot.length,wt),jn=Pn.length;jn--;)Ot[Vt=Pn[jn]]&&(Ot[Vt]=!(On[Vt]=Ot[Vt]))})})}function pr(Qe){return Qe&&void 0!==Qe.getElementsByTagName&&Qe}for(se in ve=Bs.support={},Ve=Bs.isXML=function(Qe){var Ot=Qe&&(Qe.ownerDocument||Qe).documentElement;return!Uc.test(Qe&&Qe.namespaceURI||Ot&&Ot.nodeName||"HTML")},cn=Bs.setDocument=function(Qe){var wt,Ot,On=Qe?Qe.ownerDocument||Qe:or;return On==gn||9!==On.nodeType||!On.documentElement||(_r=(gn=On).documentElement,ls=!Ve(gn),or!=gn&&(Ot=gn.defaultView)&&Ot.top!==Ot&&(Ot.addEventListener?Ot.addEventListener("unload",Tl,!1):Ot.attachEvent&&Ot.attachEvent("onunload",Tl)),ve.scope=nc(function(Vt){return _r.appendChild(Vt).appendChild(gn.createElement("div")),void 0!==Vt.querySelectorAll&&!Vt.querySelectorAll(":scope fieldset div").length}),ve.attributes=nc(function(Vt){return Vt.className="i",!Vt.getAttribute("className")}),ve.getElementsByTagName=nc(function(Vt){return Vt.appendChild(gn.createComment("")),!Vt.getElementsByTagName("*").length}),ve.getElementsByClassName=El.test(gn.getElementsByClassName),ve.getById=nc(function(Vt){return _r.appendChild(Vt).id=Io,!gn.getElementsByName||!gn.getElementsByName(Io).length}),ve.getById?(we.filter.ID=function(Vt){var Pn=Vt.replace(Na,Bl);return function(jn){return jn.getAttribute("id")===Pn}},we.find.ID=function(Vt,Pn){if(void 0!==Pn.getElementById&&ls){var jn=Pn.getElementById(Vt);return jn?[jn]:[]}}):(we.filter.ID=function(Vt){var Pn=Vt.replace(Na,Bl);return function(jn){var Mi=void 0!==jn.getAttributeNode&&jn.getAttributeNode("id");return Mi&&Mi.value===Pn}},we.find.ID=function(Vt,Pn){if(void 0!==Pn.getElementById&&ls){var jn,Mi,Vi,Lr=Pn.getElementById(Vt);if(Lr){if((jn=Lr.getAttributeNode("id"))&&jn.value===Vt)return[Lr];for(Vi=Pn.getElementsByName(Vt),Mi=0;Lr=Vi[Mi++];)if((jn=Lr.getAttributeNode("id"))&&jn.value===Vt)return[Lr]}return[]}}),we.find.TAG=ve.getElementsByTagName?function(Vt,Pn){return void 0!==Pn.getElementsByTagName?Pn.getElementsByTagName(Vt):ve.qsa?Pn.querySelectorAll(Vt):void 0}:function(Vt,Pn){var jn,Mi=[],Vi=0,Lr=Pn.getElementsByTagName(Vt);if("*"===Vt){for(;jn=Lr[Vi++];)1===jn.nodeType&&Mi.push(jn);return Mi}return Lr},we.find.CLASS=ve.getElementsByClassName&&function(Vt,Pn){if(void 0!==Pn.getElementsByClassName&&ls)return Pn.getElementsByClassName(Vt)},Lo=[],vr=[],(ve.qsa=El.test(gn.querySelectorAll))&&(nc(function(Vt){var Pn;_r.appendChild(Vt).innerHTML="<a id='"+Io+"'></a><select id='"+Io+"-\r\\' msallowcapture=''><option selected=''></option></select>",Vt.querySelectorAll("[msallowcapture^='']").length&&vr.push("[*^$]="+kr+"*(?:''|\"\")"),Vt.querySelectorAll("[selected]").length||vr.push("\\["+kr+"*(?:value|"+Ad+")"),Vt.querySelectorAll("[id~="+Io+"-]").length||vr.push("~="),(Pn=gn.createElement("input")).setAttribute("name",""),Vt.appendChild(Pn),Vt.querySelectorAll("[name='']").length||vr.push("\\["+kr+"*name"+kr+"*="+kr+"*(?:''|\"\")"),Vt.querySelectorAll(":checked").length||vr.push(":checked"),Vt.querySelectorAll("a#"+Io+"+*").length||vr.push(".#.+[+~]"),Vt.querySelectorAll("\\\f"),vr.push("[\\r\\n\\f]")}),nc(function(Vt){Vt.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Pn=gn.createElement("input");Pn.setAttribute("type","hidden"),Vt.appendChild(Pn).setAttribute("name","D"),Vt.querySelectorAll("[name=d]").length&&vr.push("name"+kr+"*[*^$|!~]?="),2!==Vt.querySelectorAll(":enabled").length&&vr.push(":enabled",":disabled"),_r.appendChild(Vt).disabled=!0,2!==Vt.querySelectorAll(":disabled").length&&vr.push(":enabled",":disabled"),Vt.querySelectorAll("*,:x"),vr.push(",.*:")})),(ve.matchesSelector=El.test(Fs=_r.matches||_r.webkitMatchesSelector||_r.mozMatchesSelector||_r.oMatchesSelector||_r.msMatchesSelector))&&nc(function(Vt){ve.disconnectedMatch=Fs.call(Vt,"*"),Fs.call(Vt,"[s!='']:x"),Lo.push("!=",Ro)}),vr=vr.length&&new RegExp(vr.join("|")),Lo=Lo.length&&new RegExp(Lo.join("|")),wt=El.test(_r.compareDocumentPosition),fl=wt||El.test(_r.contains)?function(Vt,Pn){var jn=9===Vt.nodeType?Vt.documentElement:Vt,Mi=Pn&&Pn.parentNode;return Vt===Mi||!(!Mi||1!==Mi.nodeType||!(jn.contains?jn.contains(Mi):Vt.compareDocumentPosition&&16&Vt.compareDocumentPosition(Mi)))}:function(Vt,Pn){if(Pn)for(;Pn=Pn.parentNode;)if(Pn===Vt)return!0;return!1},pl=wt?function(Vt,Pn){if(Vt===Pn)return oi=!0,0;var jn=!Vt.compareDocumentPosition-!Pn.compareDocumentPosition;return jn||(1&(jn=(Vt.ownerDocument||Vt)==(Pn.ownerDocument||Pn)?Vt.compareDocumentPosition(Pn):1)||!ve.sortDetached&&Pn.compareDocumentPosition(Vt)===jn?Vt==gn||Vt.ownerDocument==or&&fl(or,Vt)?-1:Pn==gn||Pn.ownerDocument==or&&fl(or,Pn)?1:Cn?ml(Cn,Vt)-ml(Cn,Pn):0:4&jn?-1:1)}:function(Vt,Pn){if(Vt===Pn)return oi=!0,0;var jn,Mi=0,Vi=Vt.parentNode,Lr=Pn.parentNode,Ar=[Vt],Gr=[Pn];if(!Vi||!Lr)return Vt==gn?-1:Pn==gn?1:Vi?-1:Lr?1:Cn?ml(Cn,Vt)-ml(Cn,Pn):0;if(Vi===Lr)return Co(Vt,Pn);for(jn=Vt;jn=jn.parentNode;)Ar.unshift(jn);for(jn=Pn;jn=jn.parentNode;)Gr.unshift(jn);for(;Ar[Mi]===Gr[Mi];)Mi++;return Mi?Co(Ar[Mi],Gr[Mi]):Ar[Mi]==or?-1:Gr[Mi]==or?1:0}),gn},Bs.matches=function(Qe,wt){return Bs(Qe,null,null,wt)},Bs.matchesSelector=function(Qe,wt){if(cn(Qe),ve.matchesSelector&&ls&&!Ol[wt+" "]&&(!Lo||!Lo.test(wt))&&(!vr||!vr.test(wt)))try{var Ot=Fs.call(Qe,wt);if(Ot||ve.disconnectedMatch||Qe.document&&11!==Qe.document.nodeType)return Ot}catch(On){Ol(wt,!0)}return Bs(wt,gn,null,[Qe]).length>0},Bs.contains=function(Qe,wt){return(Qe.ownerDocument||Qe)!=gn&&cn(Qe),fl(Qe,wt)},Bs.attr=function(Qe,wt){(Qe.ownerDocument||Qe)!=gn&&cn(Qe);var Ot=we.attrHandle[wt.toLowerCase()],On=Ot&&_i.call(we.attrHandle,wt.toLowerCase())?Ot(Qe,wt,!ls):void 0;return void 0!==On?On:ve.attributes||!ls?Qe.getAttribute(wt):(On=Qe.getAttributeNode(wt))&&On.specified?On.value:null},Bs.escape=function(Qe){return(Qe+"").replace(Gc,Xa)},Bs.error=function(Qe){throw new Error("Syntax error, unrecognized expression: "+Qe)},Bs.uniqueSort=function(Qe){var wt,Ot=[],On=0,Vt=0;if(oi=!ve.detectDuplicates,Cn=!ve.sortStable&&Qe.slice(0),Qe.sort(pl),oi){for(;wt=Qe[Vt++];)wt===Qe[Vt]&&(On=Ot.push(Vt));for(;On--;)Qe.splice(Ot[On],1)}return Cn=null,Qe},Be=Bs.getText=function(Qe){var wt,Ot="",On=0,Vt=Qe.nodeType;if(Vt){if(1===Vt||9===Vt||11===Vt){if("string"==typeof Qe.textContent)return Qe.textContent;for(Qe=Qe.firstChild;Qe;Qe=Qe.nextSibling)Ot+=Be(Qe)}else if(3===Vt||4===Vt)return Qe.nodeValue}else for(;wt=Qe[On++];)Ot+=Be(wt);return Ot},(we=Bs.selectors={cacheLength:50,createPseudo:pa,match:jo,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Qe){return Qe[1]=Qe[1].replace(Na,Bl),Qe[3]=(Qe[3]||Qe[4]||Qe[5]||"").replace(Na,Bl),"~="===Qe[2]&&(Qe[3]=" "+Qe[3]+" "),Qe.slice(0,4)},CHILD:function(Qe){return Qe[1]=Qe[1].toLowerCase(),"nth"===Qe[1].slice(0,3)?(Qe[3]||Bs.error(Qe[0]),Qe[4]=+(Qe[4]?Qe[5]+(Qe[6]||1):2*("even"===Qe[3]||"odd"===Qe[3])),Qe[5]=+(Qe[7]+Qe[8]||"odd"===Qe[3])):Qe[3]&&Bs.error(Qe[0]),Qe},PSEUDO:function(Qe){var wt,Ot=!Qe[6]&&Qe[2];return jo.CHILD.test(Qe[0])?null:(Qe[3]?Qe[2]=Qe[4]||Qe[5]||"":Ot&&Fo.test(Ot)&&(wt=Je(Ot,!0))&&(wt=Ot.indexOf(")",Ot.length-wt)-Ot.length)&&(Qe[0]=Qe[0].slice(0,wt),Qe[2]=Ot.slice(0,wt)),Qe.slice(0,3))}},filter:{TAG:function(Qe){var wt=Qe.replace(Na,Bl).toLowerCase();return"*"===Qe?function(){return!0}:function(Ot){return Ot.nodeName&&Ot.nodeName.toLowerCase()===wt}},CLASS:function(Qe){var wt=aa[Qe+" "];return wt||(wt=new RegExp("(^|"+kr+")"+Qe+"("+kr+"|$)"))&&aa(Qe,function(Ot){return wt.test("string"==typeof Ot.className&&Ot.className||void 0!==Ot.getAttribute&&Ot.getAttribute("class")||"")})},ATTR:function(Qe,wt,Ot){return function(On){var Vt=Bs.attr(On,Qe);return null==Vt?"!="===wt:!wt||(Vt+="","="===wt?Vt===Ot:"!="===wt?Vt!==Ot:"^="===wt?Ot&&0===Vt.indexOf(Ot):"*="===wt?Ot&&Vt.indexOf(Ot)>-1:"$="===wt?Ot&&Vt.slice(-Ot.length)===Ot:"~="===wt?(" "+Vt.replace(Hp," ")+" ").indexOf(Ot)>-1:"|="===wt&&(Vt===Ot||Vt.slice(0,Ot.length+1)===Ot+"-"))}},CHILD:function(Qe,wt,Ot,On,Vt){var Pn="nth"!==Qe.slice(0,3),jn="last"!==Qe.slice(-4),Mi="of-type"===wt;return 1===On&&0===Vt?function(Vi){return!!Vi.parentNode}:function(Vi,Lr,Ar){var Gr,ks,Js,Vr,Ci,Ba,Hl=Pn!==jn?"nextSibling":"previousSibling",Zo=Vi.parentNode,Ca=Mi&&Vi.nodeName.toLowerCase(),Ka=!Ar&&!Mi,ma=!1;if(Zo){if(Pn){for(;Hl;){for(Vr=Vi;Vr=Vr[Hl];)if(Mi?Vr.nodeName.toLowerCase()===Ca:1===Vr.nodeType)return!1;Ba=Hl="only"===Qe&&!Ba&&"nextSibling"}return!0}if(Ba=[jn?Zo.firstChild:Zo.lastChild],jn&&Ka){for(ma=(Ci=(Gr=(ks=(Js=(Vr=Zo)[Io]||(Vr[Io]={}))[Vr.uniqueID]||(Js[Vr.uniqueID]={}))[Qe]||[])[0]===ol&&Gr[1])&&Gr[2],Vr=Ci&&Zo.childNodes[Ci];Vr=++Ci&&Vr&&Vr[Hl]||(ma=Ci=0)||Ba.pop();)if(1===Vr.nodeType&&++ma&&Vr===Vi){ks[Qe]=[ol,Ci,ma];break}}else if(Ka&&(ma=Ci=(Gr=(ks=(Js=(Vr=Vi)[Io]||(Vr[Io]={}))[Vr.uniqueID]||(Js[Vr.uniqueID]={}))[Qe]||[])[0]===ol&&Gr[1]),!1===ma)for(;(Vr=++Ci&&Vr&&Vr[Hl]||(ma=Ci=0)||Ba.pop())&&((Mi?Vr.nodeName.toLowerCase()!==Ca:1!==Vr.nodeType)||!++ma||(Ka&&((ks=(Js=Vr[Io]||(Vr[Io]={}))[Vr.uniqueID]||(Js[Vr.uniqueID]={}))[Qe]=[ol,ma]),Vr!==Vi)););return(ma-=Vt)===On||ma%On==0&&ma/On>=0}}},PSEUDO:function(Qe,wt){var Ot,On=we.pseudos[Qe]||we.setFilters[Qe.toLowerCase()]||Bs.error("unsupported pseudo: "+Qe);return On[Io]?On(wt):On.length>1?(Ot=[Qe,Qe,"",wt],we.setFilters.hasOwnProperty(Qe.toLowerCase())?pa(function(Vt,Pn){for(var jn,Mi=On(Vt,wt),Vi=Mi.length;Vi--;)Vt[jn=ml(Vt,Mi[Vi])]=!(Pn[jn]=Mi[Vi])}):function(Vt){return On(Vt,0,Ot)}):On}},pseudos:{not:pa(function(Qe){var wt=[],Ot=[],On=At(Qe.replace(Ds,"$1"));return On[Io]?pa(function(Vt,Pn,jn,Mi){for(var Vi,Lr=On(Vt,null,Mi,[]),Ar=Vt.length;Ar--;)(Vi=Lr[Ar])&&(Vt[Ar]=!(Pn[Ar]=Vi))}):function(Vt,Pn,jn){return wt[0]=Vt,On(wt,null,jn,Ot),wt[0]=null,!Ot.pop()}}),has:pa(function(Qe){return function(wt){return Bs(Qe,wt).length>0}}),contains:pa(function(Qe){return Qe=Qe.replace(Na,Bl),function(wt){return(wt.textContent||Be(wt)).indexOf(Qe)>-1}}),lang:pa(function(Qe){return Nl.test(Qe||"")||Bs.error("unsupported lang: "+Qe),Qe=Qe.replace(Na,Bl).toLowerCase(),function(wt){var Ot;do{if(Ot=ls?wt.lang:wt.getAttribute("xml:lang")||wt.getAttribute("lang"))return(Ot=Ot.toLowerCase())===Qe||0===Ot.indexOf(Qe+"-")}while((wt=wt.parentNode)&&1===wt.nodeType);return!1}}),target:function(Qe){var wt=q.location&&q.location.hash;return wt&&wt.slice(1)===Qe.id},root:function(Qe){return Qe===_r},focus:function(Qe){return Qe===gn.activeElement&&(!gn.hasFocus||gn.hasFocus())&&!!(Qe.type||Qe.href||~Qe.tabIndex)},enabled:Au(!1),disabled:Au(!0),checked:function(Qe){var wt=Qe.nodeName.toLowerCase();return"input"===wt&&!!Qe.checked||"option"===wt&&!!Qe.selected},selected:function(Qe){return!0===Qe.selected},empty:function(Qe){for(Qe=Qe.firstChild;Qe;Qe=Qe.nextSibling)if(Qe.nodeType<6)return!1;return!0},parent:function(Qe){return!we.pseudos.empty(Qe)},header:function(Qe){return Ya.test(Qe.nodeName)},input:function(Qe){return fo.test(Qe.nodeName)},button:function(Qe){var wt=Qe.nodeName.toLowerCase();return"input"===wt&&"button"===Qe.type||"button"===wt},text:function(Qe){var wt;return"input"===Qe.nodeName.toLowerCase()&&"text"===Qe.type&&(null==(wt=Qe.getAttribute("type"))||"text"===wt.toLowerCase())},first:na(function(){return[0]}),last:na(function(Qe,wt){return[wt-1]}),eq:na(function(Qe,wt,Ot){return[Ot<0?Ot+wt:Ot]}),even:na(function(Qe,wt){for(var Ot=0;Ot<wt;Ot+=2)Qe.push(Ot);return Qe}),odd:na(function(Qe,wt){for(var Ot=1;Ot<wt;Ot+=2)Qe.push(Ot);return Qe}),lt:na(function(Qe,wt,Ot){for(var On=Ot<0?Ot+wt:Ot>wt?wt:Ot;--On>=0;)Qe.push(On);return Qe}),gt:na(function(Qe,wt,Ot){for(var On=Ot<0?Ot+wt:Ot;++On<wt;)Qe.push(On);return Qe})}}).pseudos.nth=we.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})we.pseudos[se]=qh(se);for(se in{submit:!0,reset:!0})we.pseudos[se]=Du(se);function Xu(){}function ic(Qe){for(var wt=0,Ot=Qe.length,On="";wt<Ot;wt++)On+=Qe[wt].value;return On}function Ef(Qe,wt,Ot){var On=wt.dir,Vt=wt.next,Pn=Vt||On,jn=Ot&&"parentNode"===Pn,Mi=zr++;return wt.first?function(Vi,Lr,Ar){for(;Vi=Vi[On];)if(1===Vi.nodeType||jn)return Qe(Vi,Lr,Ar);return!1}:function(Vi,Lr,Ar){var Gr,ks,Js,Vr=[ol,Mi];if(Ar){for(;Vi=Vi[On];)if((1===Vi.nodeType||jn)&&Qe(Vi,Lr,Ar))return!0}else for(;Vi=Vi[On];)if(1===Vi.nodeType||jn)if(ks=(Js=Vi[Io]||(Vi[Io]={}))[Vi.uniqueID]||(Js[Vi.uniqueID]={}),Vt&&Vt===Vi.nodeName.toLowerCase())Vi=Vi[On]||Vi;else{if((Gr=ks[Pn])&&Gr[0]===ol&&Gr[1]===Mi)return Vr[2]=Gr[2];if(ks[Pn]=Vr,Vr[2]=Qe(Vi,Lr,Ar))return!0}return!1}}function hg(Qe){return Qe.length>1?function(wt,Ot,On){for(var Vt=Qe.length;Vt--;)if(!Qe[Vt](wt,Ot,On))return!1;return!0}:Qe[0]}function Wc(Qe,wt,Ot,On,Vt){for(var Pn,jn=[],Mi=0,Vi=Qe.length,Lr=null!=wt;Mi<Vi;Mi++)(Pn=Qe[Mi])&&(!Ot||Ot(Pn,On,Vt))&&(jn.push(Pn),Lr&&wt.push(Mi));return jn}function Ja(Qe,wt,Ot,On,Vt,Pn){return On&&!On[Io]&&(On=Ja(On)),Vt&&!Vt[Io]&&(Vt=Ja(Vt,Pn)),pa(function(jn,Mi,Vi,Lr){var Ar,Gr,ks,Js=[],Vr=[],Ci=Mi.length,Ba=jn||function vc(Qe,wt,Ot){for(var On=0,Vt=wt.length;On<Vt;On++)Bs(Qe,wt[On],Ot);return Ot}(wt||"*",Vi.nodeType?[Vi]:Vi,[]),Hl=!Qe||!jn&&wt?Ba:Wc(Ba,Js,Qe,Vi,Lr),Zo=Ot?Vt||(jn?Qe:Ci||On)?[]:Mi:Hl;if(Ot&&Ot(Hl,Zo,Vi,Lr),On)for(Ar=Wc(Zo,Vr),On(Ar,[],Vi,Lr),Gr=Ar.length;Gr--;)(ks=Ar[Gr])&&(Zo[Vr[Gr]]=!(Hl[Vr[Gr]]=ks));if(jn){if(Vt||Qe){if(Vt){for(Ar=[],Gr=Zo.length;Gr--;)(ks=Zo[Gr])&&Ar.push(Hl[Gr]=ks);Vt(null,Zo=[],Ar,Lr)}for(Gr=Zo.length;Gr--;)(ks=Zo[Gr])&&(Ar=Vt?ml(jn,ks):Js[Gr])>-1&&(jn[Ar]=!(Mi[Ar]=ks))}}else Zo=Wc(Zo===Mi?Zo.splice(Ci,Zo.length):Zo),Vt?Vt(null,Mi,Zo,Lr):lo.apply(Mi,Zo)})}function Id(Qe){for(var wt,Ot,On,Vt=Qe.length,Pn=we.relative[Qe[0].type],jn=Pn||we.relative[" "],Mi=Pn?1:0,Vi=Ef(function(Gr){return Gr===wt},jn,!0),Lr=Ef(function(Gr){return ml(wt,Gr)>-1},jn,!0),Ar=[function(Gr,ks,Js){var Vr=!Pn&&(Js||ks!==Ft)||((wt=ks).nodeType?Vi(Gr,ks,Js):Lr(Gr,ks,Js));return wt=null,Vr}];Mi<Vt;Mi++)if(Ot=we.relative[Qe[Mi].type])Ar=[Ef(hg(Ar),Ot)];else{if((Ot=we.filter[Qe[Mi].type].apply(null,Qe[Mi].matches))[Io]){for(On=++Mi;On<Vt&&!we.relative[Qe[On].type];On++);return Ja(Mi>1&&hg(Ar),Mi>1&&ic(Qe.slice(0,Mi-1).concat({value:" "===Qe[Mi-2].type?"*":""})).replace(Ds,"$1"),Ot,Mi<On&&Id(Qe.slice(Mi,On)),On<Vt&&Id(Qe=Qe.slice(On)),On<Vt&&ic(Qe))}Ar.push(Ot)}return hg(Ar)}return Xu.prototype=we.filters=we.pseudos,we.setFilters=new Xu,Je=Bs.tokenize=function(Qe,wt){var Ot,On,Vt,Pn,jn,Mi,Vi,Lr=mh[Qe+" "];if(Lr)return wt?0:Lr.slice(0);for(jn=Qe,Mi=[],Vi=we.preFilter;jn;){for(Pn in(!Ot||(On=Ze.exec(jn)))&&(On&&(jn=jn.slice(On[0].length)||jn),Mi.push(Vt=[])),Ot=!1,(On=bs.exec(jn))&&(Ot=On.shift(),Vt.push({value:Ot,type:On[0].replace(Ds," ")}),jn=jn.slice(Ot.length)),we.filter)(On=jo[Pn].exec(jn))&&(!Vi[Pn]||(On=Vi[Pn](On)))&&(Ot=On.shift(),Vt.push({value:Ot,type:Pn,matches:On}),jn=jn.slice(Ot.length));if(!Ot)break}return wt?jn.length:jn?Bs.error(Qe):mh(Qe,Mi).slice(0)},At=Bs.compile=function(Qe,wt){var Ot,On=[],Vt=[],Pn=ys[Qe+" "];if(!Pn){for(wt||(wt=Je(Qe)),Ot=wt.length;Ot--;)(Pn=Id(wt[Ot]))[Io]?On.push(Pn):Vt.push(Pn);Pn=ys(Qe,function zp(Qe,wt){var Ot=wt.length>0,On=Qe.length>0,Vt=function(Pn,jn,Mi,Vi,Lr){var Ar,Gr,ks,Js=0,Vr="0",Ci=Pn&&[],Ba=[],Hl=Ft,Zo=Pn||On&&we.find.TAG("*",Lr),Ca=ol+=null==Hl?1:Math.random()||.1,Ka=Zo.length;for(Lr&&(Ft=jn==gn||jn||Lr);Vr!==Ka&&null!=(Ar=Zo[Vr]);Vr++){if(On&&Ar){for(Gr=0,!jn&&Ar.ownerDocument!=gn&&(cn(Ar),Mi=!ls);ks=Qe[Gr++];)if(ks(Ar,jn||gn,Mi)){Vi.push(Ar);break}Lr&&(ol=Ca)}Ot&&((Ar=!ks&&Ar)&&Js--,Pn&&Ci.push(Ar))}if(Js+=Vr,Ot&&Vr!==Js){for(Gr=0;ks=wt[Gr++];)ks(Ci,Ba,jn,Mi);if(Pn){if(Js>0)for(;Vr--;)Ci[Vr]||Ba[Vr]||(Ba[Vr]=Yi.call(Vi));Ba=Wc(Ba)}lo.apply(Vi,Ba),Lr&&!Pn&&Ba.length>0&&Js+wt.length>1&&Bs.uniqueSort(Vi)}return Lr&&(ol=Ca,Ft=Hl),Ci};return Ot?pa(Vt):Vt}(Vt,On)),Pn.selector=Qe}return Pn},xt=Bs.select=function(Qe,wt,Ot,On){var Vt,Pn,jn,Mi,Vi,Lr="function"==typeof Qe&&Qe,Ar=!On&&Je(Qe=Lr.selector||Qe);if(Ot=Ot||[],1===Ar.length){if((Pn=Ar[0]=Ar[0].slice(0)).length>2&&"ID"===(jn=Pn[0]).type&&9===wt.nodeType&&ls&&we.relative[Pn[1].type]){if(!(wt=(we.find.ID(jn.matches[0].replace(Na,Bl),wt)||[])[0]))return Ot;Lr&&(wt=wt.parentNode),Qe=Qe.slice(Pn.shift().value.length)}for(Vt=jo.needsContext.test(Qe)?0:Pn.length;Vt--&&!we.relative[Mi=(jn=Pn[Vt]).type];)if((Vi=we.find[Mi])&&(On=Vi(jn.matches[0].replace(Na,Bl),_c.test(Pn[0].type)&&pr(wt.parentNode)||wt))){if(Pn.splice(Vt,1),!(Qe=On.length&&ic(Pn)))return lo.apply(Ot,On),Ot;break}}return(Lr||At(Qe,Ar))(On,wt,!ls,Ot,!wt||_c.test(Qe)&&pr(wt.parentNode)||wt),Ot},ve.sortStable=Io.split("").sort(pl).join("")===Io,ve.detectDuplicates=!!oi,cn(),ve.sortDetached=nc(function(Qe){return 1&Qe.compareDocumentPosition(gn.createElement("fieldset"))}),nc(function(Qe){return Qe.innerHTML="<a href='#'></a>","#"===Qe.firstChild.getAttribute("href")})||al("type|href|height|width",function(Qe,wt,Ot){if(!Ot)return Qe.getAttribute(wt,"type"===wt.toLowerCase()?1:2)}),(!ve.attributes||!nc(function(Qe){return Qe.innerHTML="<input/>",Qe.firstChild.setAttribute("value",""),""===Qe.firstChild.getAttribute("value")}))&&al("value",function(Qe,wt,Ot){if(!Ot&&"input"===Qe.nodeName.toLowerCase())return Qe.defaultValue}),nc(function(Qe){return null==Qe.getAttribute("disabled")})||al(Ad,function(Qe,wt,Ot){var On;if(!Ot)return!0===Qe[wt]?wt.toLowerCase():(On=Qe.getAttributeNode(wt))&&On.specified?On.value:null}),Bs}(l);ce.find=qe,ce.expr=qe.selectors,ce.expr[":"]=ce.expr.pseudos,ce.uniqueSort=ce.unique=qe.uniqueSort,ce.text=qe.getText,ce.isXMLDoc=qe.isXML,ce.contains=qe.contains,ce.escapeSelector=qe.escape;var ut=function(q,se,ve){for(var we=[],Be=void 0!==ve;(q=q[se])&&9!==q.nodeType;)if(1===q.nodeType){if(Be&&ce(q).is(ve))break;we.push(q)}return we},De=function(q,se){for(var ve=[];q;q=q.nextSibling)1===q.nodeType&&q!==se&&ve.push(q);return ve},je=ce.expr.match.needsContext;function Wt(q,se){return q.nodeName&&q.nodeName.toLowerCase()===se.toLowerCase()}var Xe=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Yn(q,se,ve){return he(se)?ce.grep(q,function(we,Be){return!!se.call(we,Be,we)!==ve}):se.nodeType?ce.grep(q,function(we){return we===se!==ve}):"string"!=typeof se?ce.grep(q,function(we){return I.call(se,we)>-1!==ve}):ce.filter(se,q,ve)}ce.filter=function(q,se,ve){var we=se[0];return ve&&(q=":not("+q+")"),1===se.length&&1===we.nodeType?ce.find.matchesSelector(we,q)?[we]:[]:ce.find.matches(q,ce.grep(se,function(Be){return 1===Be.nodeType}))},ce.fn.extend({find:function(q){var se,ve,we=this.length,Be=this;if("string"!=typeof q)return this.pushStack(ce(q).filter(function(){for(se=0;se<we;se++)if(ce.contains(Be[se],this))return!0}));for(ve=this.pushStack([]),se=0;se<we;se++)ce.find(q,Be[se],ve);return we>1?ce.uniqueSort(ve):ve},filter:function(q){return this.pushStack(Yn(this,q||[],!1))},not:function(q){return this.pushStack(Yn(this,q||[],!0))},is:function(q){return!!Yn(this,"string"==typeof q&&je.test(q)?ce(q):q||[],!1).length}});var Jt,xn=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Pt=ce.fn.init=function(q,se,ve){var we,Be;if(!q)return this;if(ve=ve||Jt,"string"==typeof q){if(!(we="<"===q[0]&&">"===q[q.length-1]&&q.length>=3?[null,q,null]:xn.exec(q))||!we[1]&&se)return!se||se.jquery?(se||ve).find(q):this.constructor(se).find(q);if(we[1]){if(ce.merge(this,ce.parseHTML(we[1],(se=se instanceof ce?se[0]:se)&&se.nodeType?se.ownerDocument||se:ae,!0)),Xe.test(we[1])&&ce.isPlainObject(se))for(we in se)he(this[we])?this[we](se[we]):this.attr(we,se[we]);return this}return(Be=ae.getElementById(we[2]))&&(this[0]=Be,this.length=1),this}return q.nodeType?(this[0]=q,this.length=1,this):he(q)?void 0!==ve.ready?ve.ready(q):q(ce):ce.makeArray(q,this)};Pt.prototype=ce.fn,Jt=ce(ae);var Lt=/^(?:parents|prev(?:Until|All))/,Xn={children:!0,contents:!0,next:!0,prev:!0};function ni(q,se){for(;(q=q[se])&&1!==q.nodeType;);return q}ce.fn.extend({has:function(q){var se=ce(q,this),ve=se.length;return this.filter(function(){for(var we=0;we<ve;we++)if(ce.contains(this,se[we]))return!0})},closest:function(q,se){var ve,we=0,Be=this.length,Ve=[],Je="string"!=typeof q&&ce(q);if(!je.test(q))for(;we<Be;we++)for(ve=this[we];ve&&ve!==se;ve=ve.parentNode)if(ve.nodeType<11&&(Je?Je.index(ve)>-1:1===ve.nodeType&&ce.find.matchesSelector(ve,q))){Ve.push(ve);break}return this.pushStack(Ve.length>1?ce.uniqueSort(Ve):Ve)},index:function(q){return q?"string"==typeof q?I.call(ce(q),this[0]):I.call(this,q.jquery?q[0]:q):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(q,se){return this.pushStack(ce.uniqueSort(ce.merge(this.get(),ce(q,se))))},addBack:function(q){return this.add(null==q?this.prevObject:this.prevObject.filter(q))}}),ce.each({parent:function(q){var se=q.parentNode;return se&&11!==se.nodeType?se:null},parents:function(q){return ut(q,"parentNode")},parentsUntil:function(q,se,ve){return ut(q,"parentNode",ve)},next:function(q){return ni(q,"nextSibling")},prev:function(q){return ni(q,"previousSibling")},nextAll:function(q){return ut(q,"nextSibling")},prevAll:function(q){return ut(q,"previousSibling")},nextUntil:function(q,se,ve){return ut(q,"nextSibling",ve)},prevUntil:function(q,se,ve){return ut(q,"previousSibling",ve)},siblings:function(q){return De((q.parentNode||{}).firstChild,q)},children:function(q){return De(q.firstChild)},contents:function(q){return null!=q.contentDocument&&p(q.contentDocument)?q.contentDocument:(Wt(q,"template")&&(q=q.content||q),ce.merge([],q.childNodes))}},function(q,se){ce.fn[q]=function(ve,we){var Be=ce.map(this,se,ve);return"Until"!==q.slice(-5)&&(we=ve),we&&"string"==typeof we&&(Be=ce.filter(we,Be)),this.length>1&&(Xn[q]||ce.uniqueSort(Be),Lt.test(q)&&Be.reverse()),this.pushStack(Be)}});var en=/[^\x20\t\r\n\f]+/g;function zi(q){return q}function En(q){throw q}function Dn(q,se,ve,we){var Be;try{q&&he(Be=q.promise)?Be.call(q).done(se).fail(ve):q&&he(Be=q.then)?Be.call(q,se,ve):se.apply(void 0,[q].slice(we))}catch(Ve){ve.apply(void 0,[Ve])}}ce.Callbacks=function(q){q="string"==typeof q?function gr(q){var se={};return ce.each(q.match(en)||[],function(ve,we){se[we]=!0}),se}(q):ce.extend({},q);var se,ve,we,Be,Ve=[],Je=[],At=-1,xt=function(){for(Be=Be||q.once,we=se=!0;Je.length;At=-1)for(ve=Je.shift();++At<Ve.length;)!1===Ve[At].apply(ve[0],ve[1])&&q.stopOnFalse&&(At=Ve.length,ve=!1);q.memory||(ve=!1),se=!1,Be&&(Ve=ve?[]:"")},Ft={add:function(){return Ve&&(ve&&!se&&(At=Ve.length-1,Je.push(ve)),function Cn(oi){ce.each(oi,function(cn,gn){he(gn)?(!q.unique||!Ft.has(gn))&&Ve.push(gn):gn&&gn.length&&"string"!==Le(gn)&&Cn(gn)})}(arguments),ve&&!se&&xt()),this},remove:function(){return ce.each(arguments,function(Cn,oi){for(var cn;(cn=ce.inArray(oi,Ve,cn))>-1;)Ve.splice(cn,1),cn<=At&&At--}),this},has:function(Cn){return Cn?ce.inArray(Cn,Ve)>-1:Ve.length>0},empty:function(){return Ve&&(Ve=[]),this},disable:function(){return Be=Je=[],Ve=ve="",this},disabled:function(){return!Ve},lock:function(){return Be=Je=[],!ve&&!se&&(Ve=ve=""),this},locked:function(){return!!Be},fireWith:function(Cn,oi){return Be||(oi=[Cn,(oi=oi||[]).slice?oi.slice():oi],Je.push(oi),se||xt()),this},fire:function(){return Ft.fireWith(this,arguments),this},fired:function(){return!!we}};return Ft},ce.extend({Deferred:function(q){var se=[["notify","progress",ce.Callbacks("memory"),ce.Callbacks("memory"),2],["resolve","done",ce.Callbacks("once memory"),ce.Callbacks("once memory"),0,"resolved"],["reject","fail",ce.Callbacks("once memory"),ce.Callbacks("once memory"),1,"rejected"]],ve="pending",we={state:function(){return ve},always:function(){return Be.done(arguments).fail(arguments),this},catch:function(Ve){return we.then(null,Ve)},pipe:function(){var Ve=arguments;return ce.Deferred(function(Je){ce.each(se,function(At,xt){var Ft=he(Ve[xt[4]])&&Ve[xt[4]];Be[xt[1]](function(){var Cn=Ft&&Ft.apply(this,arguments);Cn&&he(Cn.promise)?Cn.promise().progress(Je.notify).done(Je.resolve).fail(Je.reject):Je[xt[0]+"With"](this,Ft?[Cn]:arguments)})}),Ve=null}).promise()},then:function(Ve,Je,At){var xt=0;function Ft(Cn,oi,cn,gn){return function(){var _r=this,ls=arguments,vr=function(){var Fs,fl;if(!(Cn<xt)){if((Fs=cn.apply(_r,ls))===oi.promise())throw new TypeError("Thenable self-resolution");he(fl=Fs&&("object"==typeof Fs||"function"==typeof Fs)&&Fs.then)?gn?fl.call(Fs,Ft(xt,oi,zi,gn),Ft(xt,oi,En,gn)):(xt++,fl.call(Fs,Ft(xt,oi,zi,gn),Ft(xt,oi,En,gn),Ft(xt,oi,zi,oi.notifyWith))):(cn!==zi&&(_r=void 0,ls=[Fs]),(gn||oi.resolveWith)(_r,ls))}},Lo=gn?vr:function(){try{vr()}catch(Fs){ce.Deferred.exceptionHook&&ce.Deferred.exceptionHook(Fs,Lo.stackTrace),Cn+1>=xt&&(cn!==En&&(_r=void 0,ls=[Fs]),oi.rejectWith(_r,ls))}};Cn?Lo():(ce.Deferred.getStackHook&&(Lo.stackTrace=ce.Deferred.getStackHook()),l.setTimeout(Lo))}}return ce.Deferred(function(Cn){se[0][3].add(Ft(0,Cn,he(At)?At:zi,Cn.notifyWith)),se[1][3].add(Ft(0,Cn,he(Ve)?Ve:zi)),se[2][3].add(Ft(0,Cn,he(Je)?Je:En))}).promise()},promise:function(Ve){return null!=Ve?ce.extend(Ve,we):we}},Be={};return ce.each(se,function(Ve,Je){var At=Je[2],xt=Je[5];we[Je[1]]=At.add,xt&&At.add(function(){ve=xt},se[3-Ve][2].disable,se[3-Ve][3].disable,se[0][2].lock,se[0][3].lock),At.add(Je[3].fire),Be[Je[0]]=function(){return Be[Je[0]+"With"](this===Be?void 0:this,arguments),this},Be[Je[0]+"With"]=At.fireWith}),we.promise(Be),q&&q.call(Be,Be),Be},when:function(q){var se=arguments.length,ve=se,we=Array(ve),Be=v.call(arguments),Ve=ce.Deferred(),Je=function(At){return function(xt){we[At]=this,Be[At]=arguments.length>1?v.call(arguments):xt,--se||Ve.resolveWith(we,Be)}};if(se<=1&&(Dn(q,Ve.done(Je(ve)).resolve,Ve.reject,!se),"pending"===Ve.state()||he(Be[ve]&&Be[ve].then)))return Ve.then();for(;ve--;)Dn(Be[ve],Je(ve),Ve.reject);return Ve.promise()}});var ji=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ce.Deferred.exceptionHook=function(q,se){l.console&&l.console.warn&&q&&ji.test(q.name)&&l.console.warn("jQuery.Deferred exception: "+q.message,q.stack,se)},ce.readyException=function(q){l.setTimeout(function(){throw q})};var ii=ce.Deferred();function Os(){ae.removeEventListener("DOMContentLoaded",Os),l.removeEventListener("load",Os),ce.ready()}ce.fn.ready=function(q){return ii.then(q).catch(function(se){ce.readyException(se)}),this},ce.extend({isReady:!1,readyWait:1,ready:function(q){(!0===q?--ce.readyWait:ce.isReady)||(ce.isReady=!0,!(!0!==q&&--ce.readyWait>0)&&ii.resolveWith(ae,[ce]))}}),ce.ready.then=ii.then,"complete"===ae.readyState||"loading"!==ae.readyState&&!ae.documentElement.doScroll?l.setTimeout(ce.ready):(ae.addEventListener("DOMContentLoaded",Os),l.addEventListener("load",Os));var dr=function(q,se,ve,we,Be,Ve,Je){var At=0,xt=q.length,Ft=null==ve;if("object"===Le(ve))for(At in Be=!0,ve)dr(q,se,At,ve[At],!0,Ve,Je);else if(void 0!==we&&(Be=!0,he(we)||(Je=!0),Ft&&(Je?(se.call(q,we),se=null):(Ft=se,se=function(Cn,oi,cn){return Ft.call(ce(Cn),cn)})),se))for(;At<xt;At++)se(q[At],ve,Je?we:we.call(q[At],At,se(q[At],ve)));return Be?q:Ft?se.call(q):xt?se(q[0],ve):Ve},Fe=/^-ms-/,Fn=/-([a-z])/g;function _n(q,se){return se.toUpperCase()}function dt(q){return q.replace(Fe,"ms-").replace(Fn,_n)}var nt=function(q){return 1===q.nodeType||9===q.nodeType||!+q.nodeType};function zt(){this.expando=ce.expando+zt.uid++}zt.uid=1,zt.prototype={cache:function(q){var se=q[this.expando];return se||(se={},nt(q)&&(q.nodeType?q[this.expando]=se:Object.defineProperty(q,this.expando,{value:se,configurable:!0}))),se},set:function(q,se,ve){var we,Be=this.cache(q);if("string"==typeof se)Be[dt(se)]=ve;else for(we in se)Be[dt(we)]=se[we];return Be},get:function(q,se){return void 0===se?this.cache(q):q[this.expando]&&q[this.expando][dt(se)]},access:function(q,se,ve){return void 0===se||se&&"string"==typeof se&&void 0===ve?this.get(q,se):(this.set(q,se,ve),void 0!==ve?ve:se)},remove:function(q,se){var ve,we=q[this.expando];if(void 0!==we){if(void 0!==se)for((ve=(se=Array.isArray(se)?se.map(dt):(se=dt(se))in we?[se]:se.match(en)||[]).length);ve--;)delete we[se[ve]];(void 0===se||ce.isEmptyObject(we))&&(q.nodeType?q[this.expando]=void 0:delete q[this.expando])}},hasData:function(q){var se=q[this.expando];return void 0!==se&&!ce.isEmptyObject(se)}};var on=new zt,Nn=new zt,an=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,hi=/[A-Z]/g;function mi(q,se,ve){var we;if(void 0===ve&&1===q.nodeType)if(we="data-"+se.replace(hi,"-$&").toLowerCase(),"string"==typeof(ve=q.getAttribute(we))){try{ve=function Oi(q){return"true"===q||"false"!==q&&("null"===q?null:q===+q+""?+q:an.test(q)?JSON.parse(q):q)}(ve)}catch(Be){}Nn.set(q,se,ve)}else ve=void 0;return ve}ce.extend({hasData:function(q){return Nn.hasData(q)||on.hasData(q)},data:function(q,se,ve){return Nn.access(q,se,ve)},removeData:function(q,se){Nn.remove(q,se)},_data:function(q,se,ve){return on.access(q,se,ve)},_removeData:function(q,se){on.remove(q,se)}}),ce.fn.extend({data:function(q,se){var ve,we,Be,Ve=this[0],Je=Ve&&Ve.attributes;if(void 0===q){if(this.length&&(Be=Nn.get(Ve),1===Ve.nodeType&&!on.get(Ve,"hasDataAttrs"))){for(ve=Je.length;ve--;)Je[ve]&&0===(we=Je[ve].name).indexOf("data-")&&(we=dt(we.slice(5)),mi(Ve,we,Be[we]));on.set(Ve,"hasDataAttrs",!0)}return Be}return"object"==typeof q?this.each(function(){Nn.set(this,q)}):dr(this,function(At){var xt;if(Ve&&void 0===At)return void 0!==(xt=Nn.get(Ve,q))||void 0!==(xt=mi(Ve,q))?xt:void 0;this.each(function(){Nn.set(this,q,At)})},null,se,arguments.length>1,null,!0)},removeData:function(q){return this.each(function(){Nn.remove(this,q)})}}),ce.extend({queue:function(q,se,ve){var we;if(q)return we=on.get(q,se=(se||"fx")+"queue"),ve&&(!we||Array.isArray(ve)?we=on.access(q,se,ce.makeArray(ve)):we.push(ve)),we||[]},dequeue:function(q,se){var ve=ce.queue(q,se=se||"fx"),we=ve.length,Be=ve.shift(),Ve=ce._queueHooks(q,se);"inprogress"===Be&&(Be=ve.shift(),we--),Be&&("fx"===se&&ve.unshift("inprogress"),delete Ve.stop,Be.call(q,function(){ce.dequeue(q,se)},Ve)),!we&&Ve&&Ve.empty.fire()},_queueHooks:function(q,se){var ve=se+"queueHooks";return on.get(q,ve)||on.access(q,ve,{empty:ce.Callbacks("once memory").add(function(){on.remove(q,[se+"queue",ve])})})}}),ce.fn.extend({queue:function(q,se){var ve=2;return"string"!=typeof q&&(se=q,q="fx",ve--),arguments.length<ve?ce.queue(this[0],q):void 0===se?this:this.each(function(){var we=ce.queue(this,q,se);ce._queueHooks(this,q),"fx"===q&&"inprogress"!==we[0]&&ce.dequeue(this,q)})},dequeue:function(q){return this.each(function(){ce.dequeue(this,q)})},clearQueue:function(q){return this.queue(q||"fx",[])},promise:function(q,se){var ve,we=1,Be=ce.Deferred(),Ve=this,Je=this.length,At=function(){--we||Be.resolveWith(Ve,[Ve])};for("string"!=typeof q&&(se=q,q=void 0),q=q||"fx";Je--;)(ve=on.get(Ve[Je],q+"queueHooks"))&&ve.empty&&(we++,ve.empty.add(At));return At(),Be.promise(se)}});var fr=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,qs=new RegExp("^(?:([+-])=|)("+fr+")([a-z%]*)$","i"),Sr=["Top","Right","Bottom","Left"],oo=ae.documentElement,fa=function(q){return ce.contains(q.ownerDocument,q)},ea={composed:!0};oo.getRootNode&&(fa=function(q){return ce.contains(q.ownerDocument,q)||q.getRootNode(ea)===q.ownerDocument});var os=function(q,se){return"none"===(q=se||q).style.display||""===q.style.display&&fa(q)&&"none"===ce.css(q,"display")};function Ls(q,se,ve,we){var Be,Ve,Je=20,At=we?function(){return we.cur()}:function(){return ce.css(q,se,"")},xt=At(),Ft=ve&&ve[3]||(ce.cssNumber[se]?"":"px"),Cn=q.nodeType&&(ce.cssNumber[se]||"px"!==Ft&&+xt)&&qs.exec(ce.css(q,se));if(Cn&&Cn[3]!==Ft){for(Ft=Ft||Cn[3],Cn=+(xt/=2)||1;Je--;)ce.style(q,se,Cn+Ft),(1-Ve)*(1-(Ve=At()/xt||.5))<=0&&(Je=0),Cn/=Ve;ce.style(q,se,(Cn*=2)+Ft),ve=ve||[]}return ve&&(Cn=+Cn||+xt||0,Be=ve[1]?Cn+(ve[1]+1)*ve[2]:+ve[2],we&&(we.unit=Ft,we.start=Cn,we.end=Be)),Be}var vo={};function ca(q){var se,ve=q.ownerDocument,we=q.nodeName,Be=vo[we];return Be||(se=ve.body.appendChild(ve.createElement(we)),Be=ce.css(se,"display"),se.parentNode.removeChild(se),"none"===Be&&(Be="block"),vo[we]=Be,Be)}function ja(q,se){for(var ve,we,Be=[],Ve=0,Je=q.length;Ve<Je;Ve++)(we=q[Ve]).style&&(ve=we.style.display,se?("none"===ve&&(Be[Ve]=on.get(we,"display")||null,Be[Ve]||(we.style.display="")),""===we.style.display&&os(we)&&(Be[Ve]=ca(we))):"none"!==ve&&(Be[Ve]="none",on.set(we,"display",ve)));for(Ve=0;Ve<Je;Ve++)null!=Be[Ve]&&(q[Ve].style.display=Be[Ve]);return q}ce.fn.extend({show:function(){return ja(this,!0)},hide:function(){return ja(this)},toggle:function(q){return"boolean"==typeof q?q?this.show():this.hide():this.each(function(){os(this)?ce(this).show():ce(this).hide()})}});var se,ve,sr=/^(?:checkbox|radio)$/i,Zu=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,$i=/^$|^module$|\/(?:java|ecma)script/i;se=ae.createDocumentFragment().appendChild(ae.createElement("div")),(ve=ae.createElement("input")).setAttribute("type","radio"),ve.setAttribute("checked","checked"),ve.setAttribute("name","t"),se.appendChild(ve),re.checkClone=se.cloneNode(!0).cloneNode(!0).lastChild.checked,se.innerHTML="<textarea>x</textarea>",re.noCloneChecked=!!se.cloneNode(!0).lastChild.defaultValue,se.innerHTML="<option></option>",re.option=!!se.lastChild;var Is={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function b(q,se){var ve;return ve=void 0!==q.getElementsByTagName?q.getElementsByTagName(se||"*"):void 0!==q.querySelectorAll?q.querySelectorAll(se||"*"):[],void 0===se||se&&Wt(q,se)?ce.merge([q],ve):ve}function k(q,se){for(var ve=0,we=q.length;ve<we;ve++)on.set(q[ve],"globalEval",!se||on.get(se[ve],"globalEval"))}Is.tbody=Is.tfoot=Is.colgroup=Is.caption=Is.thead,Is.th=Is.td,re.option||(Is.optgroup=Is.option=[1,"<select multiple='multiple'>","</select>"]);var z=/<|&#?\w+;/;function Y(q,se,ve,we,Be){for(var Ve,Je,At,xt,Ft,Cn,oi=se.createDocumentFragment(),cn=[],gn=0,_r=q.length;gn<_r;gn++)if((Ve=q[gn])||0===Ve)if("object"===Le(Ve))ce.merge(cn,Ve.nodeType?[Ve]:Ve);else if(z.test(Ve)){for(Je=Je||oi.appendChild(se.createElement("div")),At=(Zu.exec(Ve)||["",""])[1].toLowerCase(),Je.innerHTML=(xt=Is[At]||Is._default)[1]+ce.htmlPrefilter(Ve)+xt[2],Cn=xt[0];Cn--;)Je=Je.lastChild;ce.merge(cn,Je.childNodes),(Je=oi.firstChild).textContent=""}else cn.push(se.createTextNode(Ve));for(oi.textContent="",gn=0;Ve=cn[gn++];)if(we&&ce.inArray(Ve,we)>-1)Be&&Be.push(Ve);else if(Ft=fa(Ve),Je=b(oi.appendChild(Ve),"script"),Ft&&k(Je),ve)for(Cn=0;Ve=Je[Cn++];)$i.test(Ve.type||"")&&ve.push(Ve);return oi}var ne=/^([^.]*)(?:\.(.+)|)/;function pe(){return!0}function Ae(){return!1}function Ge(q,se){return q===function $e(){try{return ae.activeElement}catch(q){}}()==("focus"===se)}function yt(q,se,ve,we,Be,Ve){var Je,At;if("object"==typeof se){for(At in"string"!=typeof ve&&(we=we||ve,ve=void 0),se)yt(q,At,ve,we,se[At],Ve);return q}if(null==we&&null==Be?(Be=ve,we=ve=void 0):null==Be&&("string"==typeof ve?(Be=we,we=void 0):(Be=we,we=ve,ve=void 0)),!1===Be)Be=Ae;else if(!Be)return q;return 1===Ve&&(Je=Be,Be=function(xt){return ce().off(xt),Je.apply(this,arguments)},Be.guid=Je.guid||(Je.guid=ce.guid++)),q.each(function(){ce.event.add(this,se,Be,we,ve)})}function Mt(q,se,ve){ve?(on.set(q,se,!1),ce.event.add(q,se,{namespace:!1,handler:function(we){var Be,Ve,Je=on.get(this,se);if(1&we.isTrigger&&this[se]){if(Je.length)(ce.event.special[se]||{}).delegateType&&we.stopPropagation();else if(Je=v.call(arguments),on.set(this,se,Je),Be=ve(this,se),this[se](),Je!==(Ve=on.get(this,se))||Be?on.set(this,se,!1):Ve={},Je!==Ve)return we.stopImmediatePropagation(),we.preventDefault(),Ve&&Ve.value}else Je.length&&(on.set(this,se,{value:ce.event.trigger(ce.extend(Je[0],ce.Event.prototype),Je.slice(1),this)}),we.stopImmediatePropagation())}})):void 0===on.get(q,se)&&ce.event.add(q,se,pe)}ce.event={global:{},add:function(q,se,ve,we,Be){var Ve,Je,At,xt,Ft,Cn,oi,cn,gn,_r,ls,vr=on.get(q);if(nt(q))for(ve.handler&&(ve=(Ve=ve).handler,Be=Ve.selector),Be&&ce.find.matchesSelector(oo,Be),ve.guid||(ve.guid=ce.guid++),(xt=vr.events)||(xt=vr.events=Object.create(null)),(Je=vr.handle)||(Je=vr.handle=function(Lo){return void 0!==ce&&ce.event.triggered!==Lo.type?ce.event.dispatch.apply(q,arguments):void 0}),Ft=(se=(se||"").match(en)||[""]).length;Ft--;)gn=ls=(At=ne.exec(se[Ft])||[])[1],_r=(At[2]||"").split(".").sort(),gn&&(oi=ce.event.special[gn]||{},oi=ce.event.special[gn=(Be?oi.delegateType:oi.bindType)||gn]||{},Cn=ce.extend({type:gn,origType:ls,data:we,handler:ve,guid:ve.guid,selector:Be,needsContext:Be&&ce.expr.match.needsContext.test(Be),namespace:_r.join(".")},Ve),(cn=xt[gn])||((cn=xt[gn]=[]).delegateCount=0,(!oi.setup||!1===oi.setup.call(q,we,_r,Je))&&q.addEventListener&&q.addEventListener(gn,Je)),oi.add&&(oi.add.call(q,Cn),Cn.handler.guid||(Cn.handler.guid=ve.guid)),Be?cn.splice(cn.delegateCount++,0,Cn):cn.push(Cn),ce.event.global[gn]=!0)},remove:function(q,se,ve,we,Be){var Ve,Je,At,xt,Ft,Cn,oi,cn,gn,_r,ls,vr=on.hasData(q)&&on.get(q);if(vr&&(xt=vr.events)){for(Ft=(se=(se||"").match(en)||[""]).length;Ft--;)if(gn=ls=(At=ne.exec(se[Ft])||[])[1],_r=(At[2]||"").split(".").sort(),gn){for(oi=ce.event.special[gn]||{},cn=xt[gn=(we?oi.delegateType:oi.bindType)||gn]||[],At=At[2]&&new RegExp("(^|\\.)"+_r.join("\\.(?:.*\\.|)")+"(\\.|$)"),Je=Ve=cn.length;Ve--;)Cn=cn[Ve],(Be||ls===Cn.origType)&&(!ve||ve.guid===Cn.guid)&&(!At||At.test(Cn.namespace))&&(!we||we===Cn.selector||"**"===we&&Cn.selector)&&(cn.splice(Ve,1),Cn.selector&&cn.delegateCount--,oi.remove&&oi.remove.call(q,Cn));Je&&!cn.length&&((!oi.teardown||!1===oi.teardown.call(q,_r,vr.handle))&&ce.removeEvent(q,gn,vr.handle),delete xt[gn])}else for(gn in xt)ce.event.remove(q,gn+se[Ft],ve,we,!0);ce.isEmptyObject(xt)&&on.remove(q,"handle events")}},dispatch:function(q){var se,ve,we,Be,Ve,Je,At=new Array(arguments.length),xt=ce.event.fix(q),Ft=(on.get(this,"events")||Object.create(null))[xt.type]||[],Cn=ce.event.special[xt.type]||{};for(At[0]=xt,se=1;se<arguments.length;se++)At[se]=arguments[se];if(xt.delegateTarget=this,!Cn.preDispatch||!1!==Cn.preDispatch.call(this,xt)){for(Je=ce.event.handlers.call(this,xt,Ft),se=0;(Be=Je[se++])&&!xt.isPropagationStopped();)for(xt.currentTarget=Be.elem,ve=0;(Ve=Be.handlers[ve++])&&!xt.isImmediatePropagationStopped();)(!xt.rnamespace||!1===Ve.namespace||xt.rnamespace.test(Ve.namespace))&&(xt.handleObj=Ve,xt.data=Ve.data,void 0!==(we=((ce.event.special[Ve.origType]||{}).handle||Ve.handler).apply(Be.elem,At))&&!1===(xt.result=we)&&(xt.preventDefault(),xt.stopPropagation()));return Cn.postDispatch&&Cn.postDispatch.call(this,xt),xt.result}},handlers:function(q,se){var ve,we,Be,Ve,Je,At=[],xt=se.delegateCount,Ft=q.target;if(xt&&Ft.nodeType&&!("click"===q.type&&q.button>=1))for(;Ft!==this;Ft=Ft.parentNode||this)if(1===Ft.nodeType&&("click"!==q.type||!0!==Ft.disabled)){for(Ve=[],Je={},ve=0;ve<xt;ve++)void 0===Je[Be=(we=se[ve]).selector+" "]&&(Je[Be]=we.needsContext?ce(Be,this).index(Ft)>-1:ce.find(Be,this,null,[Ft]).length),Je[Be]&&Ve.push(we);Ve.length&&At.push({elem:Ft,handlers:Ve})}return Ft=this,xt<se.length&&At.push({elem:Ft,handlers:se.slice(xt)}),At},addProp:function(q,se){Object.defineProperty(ce.Event.prototype,q,{enumerable:!0,configurable:!0,get:he(se)?function(){if(this.originalEvent)return se(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[q]},set:function(ve){Object.defineProperty(this,q,{enumerable:!0,configurable:!0,writable:!0,value:ve})}})},fix:function(q){return q[ce.expando]?q:new ce.Event(q)},special:{load:{noBubble:!0},click:{setup:function(q){var se=this||q;return sr.test(se.type)&&se.click&&Wt(se,"input")&&Mt(se,"click",pe),!1},trigger:function(q){var se=this||q;return sr.test(se.type)&&se.click&&Wt(se,"input")&&Mt(se,"click"),!0},_default:function(q){var se=q.target;return sr.test(se.type)&&se.click&&Wt(se,"input")&&on.get(se,"click")||Wt(se,"a")}},beforeunload:{postDispatch:function(q){void 0!==q.result&&q.originalEvent&&(q.originalEvent.returnValue=q.result)}}}},ce.removeEvent=function(q,se,ve){q.removeEventListener&&q.removeEventListener(se,ve)},ce.Event=function(q,se){if(!(this instanceof ce.Event))return new ce.Event(q,se);q&&q.type?(this.originalEvent=q,this.type=q.type,this.isDefaultPrevented=q.defaultPrevented||void 0===q.defaultPrevented&&!1===q.returnValue?pe:Ae,this.target=q.target&&3===q.target.nodeType?q.target.parentNode:q.target,this.currentTarget=q.currentTarget,this.relatedTarget=q.relatedTarget):this.type=q,se&&ce.extend(this,se),this.timeStamp=q&&q.timeStamp||Date.now(),this[ce.expando]=!0},ce.Event.prototype={constructor:ce.Event,isDefaultPrevented:Ae,isPropagationStopped:Ae,isImmediatePropagationStopped:Ae,isSimulated:!1,preventDefault:function(){var q=this.originalEvent;this.isDefaultPrevented=pe,q&&!this.isSimulated&&q.preventDefault()},stopPropagation:function(){var q=this.originalEvent;this.isPropagationStopped=pe,q&&!this.isSimulated&&q.stopPropagation()},stopImmediatePropagation:function(){var q=this.originalEvent;this.isImmediatePropagationStopped=pe,q&&!this.isSimulated&&q.stopImmediatePropagation(),this.stopPropagation()}},ce.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},ce.event.addProp),ce.each({focus:"focusin",blur:"focusout"},function(q,se){ce.event.special[q]={setup:function(){return Mt(this,q,Ge),!1},trigger:function(){return Mt(this,q),!0},_default:function(ve){return on.get(ve.target,q)},delegateType:se}}),ce.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(q,se){ce.event.special[q]={delegateType:se,bindType:se,handle:function(ve){var we,Be=this,Ve=ve.relatedTarget,Je=ve.handleObj;return(!Ve||Ve!==Be&&!ce.contains(Be,Ve))&&(ve.type=Je.origType,we=Je.handler.apply(this,arguments),ve.type=se),we}}}),ce.fn.extend({on:function(q,se,ve,we){return yt(this,q,se,ve,we)},one:function(q,se,ve,we){return yt(this,q,se,ve,we,1)},off:function(q,se,ve){var we,Be;if(q&&q.preventDefault&&q.handleObj)return we=q.handleObj,ce(q.delegateTarget).off(we.namespace?we.origType+"."+we.namespace:we.origType,we.selector,we.handler),this;if("object"==typeof q){for(Be in q)this.off(Be,se,q[Be]);return this}return(!1===se||"function"==typeof se)&&(ve=se,se=void 0),!1===ve&&(ve=Ae),this.each(function(){ce.event.remove(this,q,ve,se)})}});var tn=/<script|<style|<link/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,qt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function sn(q,se){return Wt(q,"table")&&Wt(11!==se.nodeType?se:se.firstChild,"tr")&&ce(q).children("tbody")[0]||q}function Dt(q){return q.type=(null!==q.getAttribute("type"))+"/"+q.type,q}function nn(q){return"true/"===(q.type||"").slice(0,5)?q.type=q.type.slice(5):q.removeAttribute("type"),q}function bn(q,se){var ve,we,Be,Je,At,xt;if(1===se.nodeType){if(on.hasData(q)&&(xt=on.get(q).events))for(Be in on.remove(se,"handle events"),xt)for(ve=0,we=xt[Be].length;ve<we;ve++)ce.event.add(se,Be,xt[Be][ve]);Nn.hasData(q)&&(Je=Nn.access(q),At=ce.extend({},Je),Nn.set(se,At))}}function ln(q,se){var ve=se.nodeName.toLowerCase();"input"===ve&&sr.test(q.type)?se.checked=q.checked:("input"===ve||"textarea"===ve)&&(se.defaultValue=q.defaultValue)}function qn(q,se,ve,we){se=C(se);var Be,Ve,Je,At,xt,Ft,Cn=0,oi=q.length,cn=oi-1,gn=se[0],_r=he(gn);if(_r||oi>1&&"string"==typeof gn&&!re.checkClone&&Tt.test(gn))return q.each(function(ls){var vr=q.eq(ls);_r&&(se[0]=gn.call(this,ls,vr.html())),qn(vr,se,ve,we)});if(oi&&(Ve=(Be=Y(se,q[0].ownerDocument,!1,q,we)).firstChild,1===Be.childNodes.length&&(Be=Ve),Ve||we)){for(At=(Je=ce.map(b(Be,"script"),Dt)).length;Cn<oi;Cn++)xt=Be,Cn!==cn&&(xt=ce.clone(xt,!0,!0),At&&ce.merge(Je,b(xt,"script"))),ve.call(q[Cn],xt,Cn);if(At)for(Ft=Je[Je.length-1].ownerDocument,ce.map(Je,nn),Cn=0;Cn<At;Cn++)$i.test((xt=Je[Cn]).type||"")&&!on.access(xt,"globalEval")&&ce.contains(Ft,xt)&&(xt.src&&"module"!==(xt.type||"").toLowerCase()?ce._evalUrl&&!xt.noModule&&ce._evalUrl(xt.src,{nonce:xt.nonce||xt.getAttribute("nonce")},Ft):Ce(xt.textContent.replace(qt,""),xt,Ft))}return q}function ei(q,se,ve){for(var we,Be=se?ce.filter(se,q):q,Ve=0;null!=(we=Be[Ve]);Ve++)!ve&&1===we.nodeType&&ce.cleanData(b(we)),we.parentNode&&(ve&&fa(we)&&k(b(we,"script")),we.parentNode.removeChild(we));return q}ce.extend({htmlPrefilter:function(q){return q},clone:function(q,se,ve){var we,Be,Ve,Je,At=q.cloneNode(!0),xt=fa(q);if(!(re.noCloneChecked||1!==q.nodeType&&11!==q.nodeType||ce.isXMLDoc(q)))for(Je=b(At),we=0,Be=(Ve=b(q)).length;we<Be;we++)ln(Ve[we],Je[we]);if(se)if(ve)for(Ve=Ve||b(q),Je=Je||b(At),we=0,Be=Ve.length;we<Be;we++)bn(Ve[we],Je[we]);else bn(q,At);return(Je=b(At,"script")).length>0&&k(Je,!xt&&b(q,"script")),At},cleanData:function(q){for(var se,ve,we,Be=ce.event.special,Ve=0;void 0!==(ve=q[Ve]);Ve++)if(nt(ve)){if(se=ve[on.expando]){if(se.events)for(we in se.events)Be[we]?ce.event.remove(ve,we):ce.removeEvent(ve,we,se.handle);ve[on.expando]=void 0}ve[Nn.expando]&&(ve[Nn.expando]=void 0)}}}),ce.fn.extend({detach:function(q){return ei(this,q,!0)},remove:function(q){return ei(this,q)},text:function(q){return dr(this,function(se){return void 0===se?ce.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=se)})},null,q,arguments.length)},append:function(){return qn(this,arguments,function(q){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||sn(this,q).appendChild(q)})},prepend:function(){return qn(this,arguments,function(q){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var se=sn(this,q);se.insertBefore(q,se.firstChild)}})},before:function(){return qn(this,arguments,function(q){this.parentNode&&this.parentNode.insertBefore(q,this)})},after:function(){return qn(this,arguments,function(q){this.parentNode&&this.parentNode.insertBefore(q,this.nextSibling)})},empty:function(){for(var q,se=0;null!=(q=this[se]);se++)1===q.nodeType&&(ce.cleanData(b(q,!1)),q.textContent="");return this},clone:function(q,se){return q=null!=q&&q,se=null==se?q:se,this.map(function(){return ce.clone(this,q,se)})},html:function(q){return dr(this,function(se){var ve=this[0]||{},we=0,Be=this.length;if(void 0===se&&1===ve.nodeType)return ve.innerHTML;if("string"==typeof se&&!tn.test(se)&&!Is[(Zu.exec(se)||["",""])[1].toLowerCase()]){se=ce.htmlPrefilter(se);try{for(;we<Be;we++)1===(ve=this[we]||{}).nodeType&&(ce.cleanData(b(ve,!1)),ve.innerHTML=se);ve=0}catch(Ve){}}ve&&this.empty().append(se)},null,q,arguments.length)},replaceWith:function(){var q=[];return qn(this,arguments,function(se){var ve=this.parentNode;ce.inArray(this,q)<0&&(ce.cleanData(b(this)),ve&&ve.replaceChild(se,this))},q)}}),ce.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(q,se){ce.fn[q]=function(ve){for(var we,Be=[],Ve=ce(ve),Je=Ve.length-1,At=0;At<=Je;At++)we=At===Je?this:this.clone(!0),ce(Ve[At])[se](we),D.apply(Be,we.get());return this.pushStack(Be)}});var Ri=new RegExp("^("+fr+")(?!px)[a-z%]+$","i"),Di=/^--/,Ai=function(q){var se=q.ownerDocument.defaultView;return(!se||!se.opener)&&(se=l),se.getComputedStyle(q)},Ii=function(q,se,ve){var we,Be,Ve={};for(Be in se)Ve[Be]=q.style[Be],q.style[Be]=se[Be];for(Be in we=ve.call(q),se)q.style[Be]=Ve[Be];return we},Er=new RegExp(Sr.join("|"),"i"),Ui="[\\x20\\t\\r\\n\\f]",$r=new RegExp("^"+Ui+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ui+"+$","g");function Ur(q,se,ve){var we,Be,Ve,Je,At=Di.test(se),xt=q.style;return(ve=ve||Ai(q))&&(Je=ve.getPropertyValue(se)||ve[se],At&&(Je=Je.replace($r,"$1")),""===Je&&!fa(q)&&(Je=ce.style(q,se)),!re.pixelBoxStyles()&&Ri.test(Je)&&Er.test(se)&&(we=xt.width,Be=xt.minWidth,Ve=xt.maxWidth,xt.minWidth=xt.maxWidth=xt.width=Je,Je=ve.width,xt.width=we,xt.minWidth=Be,xt.maxWidth=Ve)),void 0!==Je?Je+"":Je}function oa(q,se){return{get:function(){if(!q())return(this.get=se).apply(this,arguments);delete this.get}}}!function(){function q(){if(Ft){xt.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ft.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",oo.appendChild(xt).appendChild(Ft);var Cn=l.getComputedStyle(Ft);ve="1%"!==Cn.top,At=12===se(Cn.marginLeft),Ft.style.right="60%",Ve=36===se(Cn.right),we=36===se(Cn.width),Ft.style.position="absolute",Be=12===se(Ft.offsetWidth/3),oo.removeChild(xt),Ft=null}}function se(Cn){return Math.round(parseFloat(Cn))}var ve,we,Be,Ve,Je,At,xt=ae.createElement("div"),Ft=ae.createElement("div");!Ft.style||(Ft.style.backgroundClip="content-box",Ft.cloneNode(!0).style.backgroundClip="",re.clearCloneStyle="content-box"===Ft.style.backgroundClip,ce.extend(re,{boxSizingReliable:function(){return q(),we},pixelBoxStyles:function(){return q(),Ve},pixelPosition:function(){return q(),ve},reliableMarginLeft:function(){return q(),At},scrollboxSize:function(){return q(),Be},reliableTrDimensions:function(){var Cn,oi,cn,gn;return null==Je&&(Cn=ae.createElement("table"),oi=ae.createElement("tr"),cn=ae.createElement("div"),Cn.style.cssText="position:absolute;left:-11111px;border-collapse:separate",oi.style.cssText="border:1px solid",oi.style.height="1px",cn.style.height="9px",cn.style.display="block",oo.appendChild(Cn).appendChild(oi).appendChild(cn),gn=l.getComputedStyle(oi),Je=parseInt(gn.height,10)+parseInt(gn.borderTopWidth,10)+parseInt(gn.borderBottomWidth,10)===oi.offsetHeight,oo.removeChild(Cn)),Je}}))}();var rl=["Webkit","Moz","ms"],$s=ae.createElement("div").style,Gi={};function Ns(q){return ce.cssProps[q]||Gi[q]||(q in $s?q:Gi[q]=function Do(q){for(var se=q[0].toUpperCase()+q.slice(1),ve=rl.length;ve--;)if((q=rl[ve]+se)in $s)return q}(q)||q)}var ua=/^(none|table(?!-c[ea]).+)/,as={position:"absolute",visibility:"hidden",display:"block"},js={letterSpacing:"0",fontWeight:"400"};function Ao(q,se,ve){var we=qs.exec(se);return we?Math.max(0,we[2]-(ve||0))+(we[3]||"px"):se}function Pa(q,se,ve,we,Be,Ve){var Je="width"===se?1:0,At=0,xt=0;if(ve===(we?"border":"content"))return 0;for(;Je<4;Je+=2)"margin"===ve&&(xt+=ce.css(q,ve+Sr[Je],!0,Be)),we?("content"===ve&&(xt-=ce.css(q,"padding"+Sr[Je],!0,Be)),"margin"!==ve&&(xt-=ce.css(q,"border"+Sr[Je]+"Width",!0,Be))):(xt+=ce.css(q,"padding"+Sr[Je],!0,Be),"padding"!==ve?xt+=ce.css(q,"border"+Sr[Je]+"Width",!0,Be):At+=ce.css(q,"border"+Sr[Je]+"Width",!0,Be));return!we&&Ve>=0&&(xt+=Math.max(0,Math.ceil(q["offset"+se[0].toUpperCase()+se.slice(1)]-Ve-xt-At-.5))||0),xt}function Pe(q,se,ve){var we=Ai(q),Ve=(!re.boxSizingReliable()||ve)&&"border-box"===ce.css(q,"boxSizing",!1,we),Je=Ve,At=Ur(q,se,we),xt="offset"+se[0].toUpperCase()+se.slice(1);if(Ri.test(At)){if(!ve)return At;At="auto"}return(!re.boxSizingReliable()&&Ve||!re.reliableTrDimensions()&&Wt(q,"tr")||"auto"===At||!parseFloat(At)&&"inline"===ce.css(q,"display",!1,we))&&q.getClientRects().length&&(Ve="border-box"===ce.css(q,"boxSizing",!1,we),(Je=xt in q)&&(At=q[xt])),(At=parseFloat(At)||0)+Pa(q,se,ve||(Ve?"border":"content"),Je,we,At)+"px"}function Ke(q,se,ve,we,Be){return new Ke.prototype.init(q,se,ve,we,Be)}ce.extend({cssHooks:{opacity:{get:function(q,se){if(se){var ve=Ur(q,"opacity");return""===ve?"1":ve}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(q,se,ve,we){if(q&&3!==q.nodeType&&8!==q.nodeType&&q.style){var Be,Ve,Je,At=dt(se),xt=Di.test(se),Ft=q.style;if(xt||(se=Ns(At)),Je=ce.cssHooks[se]||ce.cssHooks[At],void 0===ve)return Je&&"get"in Je&&void 0!==(Be=Je.get(q,!1,we))?Be:Ft[se];if("string"==(Ve=typeof ve)&&(Be=qs.exec(ve))&&Be[1]&&(ve=Ls(q,se,Be),Ve="number"),null==ve||ve!=ve)return;"number"===Ve&&!xt&&(ve+=Be&&Be[3]||(ce.cssNumber[At]?"":"px")),!re.clearCloneStyle&&""===ve&&0===se.indexOf("background")&&(Ft[se]="inherit"),(!Je||!("set"in Je)||void 0!==(ve=Je.set(q,ve,we)))&&(xt?Ft.setProperty(se,ve):Ft[se]=ve)}},css:function(q,se,ve,we){var Be,Ve,Je,At=dt(se);return Di.test(se)||(se=Ns(At)),(Je=ce.cssHooks[se]||ce.cssHooks[At])&&"get"in Je&&(Be=Je.get(q,!0,ve)),void 0===Be&&(Be=Ur(q,se,we)),"normal"===Be&&se in js&&(Be=js[se]),""===ve||ve?(Ve=parseFloat(Be),!0===ve||isFinite(Ve)?Ve||0:Be):Be}}),ce.each(["height","width"],function(q,se){ce.cssHooks[se]={get:function(ve,we,Be){if(we)return!ua.test(ce.css(ve,"display"))||ve.getClientRects().length&&ve.getBoundingClientRect().width?Pe(ve,se,Be):Ii(ve,as,function(){return Pe(ve,se,Be)})},set:function(ve,we,Be){var Ve,Je=Ai(ve),At=!re.scrollboxSize()&&"absolute"===Je.position,Ft=(At||Be)&&"border-box"===ce.css(ve,"boxSizing",!1,Je),Cn=Be?Pa(ve,se,Be,Ft,Je):0;return Ft&&At&&(Cn-=Math.ceil(ve["offset"+se[0].toUpperCase()+se.slice(1)]-parseFloat(Je[se])-Pa(ve,se,"border",!1,Je)-.5)),Cn&&(Ve=qs.exec(we))&&"px"!==(Ve[3]||"px")&&(ve.style[se]=we,we=ce.css(ve,se)),Ao(0,we,Cn)}}}),ce.cssHooks.marginLeft=oa(re.reliableMarginLeft,function(q,se){if(se)return(parseFloat(Ur(q,"marginLeft"))||q.getBoundingClientRect().left-Ii(q,{marginLeft:0},function(){return q.getBoundingClientRect().left}))+"px"}),ce.each({margin:"",padding:"",border:"Width"},function(q,se){ce.cssHooks[q+se]={expand:function(ve){for(var we=0,Be={},Ve="string"==typeof ve?ve.split(" "):[ve];we<4;we++)Be[q+Sr[we]+se]=Ve[we]||Ve[we-2]||Ve[0];return Be}},"margin"!==q&&(ce.cssHooks[q+se].set=Ao)}),ce.fn.extend({css:function(q,se){return dr(this,function(ve,we,Be){var Ve,Je,At={},xt=0;if(Array.isArray(we)){for(Ve=Ai(ve),Je=we.length;xt<Je;xt++)At[we[xt]]=ce.css(ve,we[xt],!1,Ve);return At}return void 0!==Be?ce.style(ve,we,Be):ce.css(ve,we)},q,se,arguments.length>1)}}),ce.Tween=Ke,(Ke.prototype={constructor:Ke,init:function(q,se,ve,we,Be,Ve){this.elem=q,this.prop=ve,this.easing=Be||ce.easing._default,this.options=se,this.start=this.now=this.cur(),this.end=we,this.unit=Ve||(ce.cssNumber[ve]?"":"px")},cur:function(){var q=Ke.propHooks[this.prop];return q&&q.get?q.get(this):Ke.propHooks._default.get(this)},run:function(q){var se,ve=Ke.propHooks[this.prop];return this.pos=se=this.options.duration?ce.easing[this.easing](q,this.options.duration*q,0,1,this.options.duration):q,this.now=(this.end-this.start)*se+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),ve&&ve.set?ve.set(this):Ke.propHooks._default.set(this),this}}).init.prototype=Ke.prototype,(Ke.propHooks={_default:{get:function(q){var se;return 1!==q.elem.nodeType||null!=q.elem[q.prop]&&null==q.elem.style[q.prop]?q.elem[q.prop]:(se=ce.css(q.elem,q.prop,""))&&"auto"!==se?se:0},set:function(q){ce.fx.step[q.prop]?ce.fx.step[q.prop](q):1!==q.elem.nodeType||!ce.cssHooks[q.prop]&&null==q.elem.style[Ns(q.prop)]?q.elem[q.prop]=q.now:ce.style(q.elem,q.prop,q.now+q.unit)}}}).scrollTop=Ke.propHooks.scrollLeft={set:function(q){q.elem.nodeType&&q.elem.parentNode&&(q.elem[q.prop]=q.now)}},ce.easing={linear:function(q){return q},swing:function(q){return.5-Math.cos(q*Math.PI)/2},_default:"swing"},ce.fx=Ke.prototype.init,ce.fx.step={};var yn,An,Rr=/^(?:toggle|show|hide)$/,vs=/queueHooks$/;function Zi(){An&&(!1===ae.hidden&&l.requestAnimationFrame?l.requestAnimationFrame(Zi):l.setTimeout(Zi,ce.fx.interval),ce.fx.tick())}function Jn(){return l.setTimeout(function(){yn=void 0}),yn=Date.now()}function La(q,se){var ve,we=0,Be={height:q};for(se=se?1:0;we<4;we+=2-se)Be["margin"+(ve=Sr[we])]=Be["padding"+ve]=q;return se&&(Be.opacity=Be.width=q),Be}function Eu(q,se,ve){for(var we,Be=(cr.tweeners[se]||[]).concat(cr.tweeners["*"]),Ve=0,Je=Be.length;Ve<Je;Ve++)if(we=Be[Ve].call(ve,se,q))return we}function cr(q,se,ve){var we,Be,Ve=0,Je=cr.prefilters.length,At=ce.Deferred().always(function(){delete xt.elem}),xt=function(){if(Be)return!1;for(var oi=yn||Jn(),cn=Math.max(0,Ft.startTime+Ft.duration-oi),_r=1-(cn/Ft.duration||0),ls=0,vr=Ft.tweens.length;ls<vr;ls++)Ft.tweens[ls].run(_r);return At.notifyWith(q,[Ft,_r,cn]),_r<1&&vr?cn:(vr||At.notifyWith(q,[Ft,1,0]),At.resolveWith(q,[Ft]),!1)},Ft=At.promise({elem:q,props:ce.extend({},se),opts:ce.extend(!0,{specialEasing:{},easing:ce.easing._default},ve),originalProperties:se,originalOptions:ve,startTime:yn||Jn(),duration:ve.duration,tweens:[],createTween:function(oi,cn){var gn=ce.Tween(q,Ft.opts,oi,cn,Ft.opts.specialEasing[oi]||Ft.opts.easing);return Ft.tweens.push(gn),gn},stop:function(oi){var cn=0,gn=oi?Ft.tweens.length:0;if(Be)return this;for(Be=!0;cn<gn;cn++)Ft.tweens[cn].run(1);return oi?(At.notifyWith(q,[Ft,1,0]),At.resolveWith(q,[Ft,oi])):At.rejectWith(q,[Ft,oi]),this}}),Cn=Ft.props;for(function Fa(q,se){var ve,we,Be,Ve,Je;for(ve in q)if(Be=se[we=dt(ve)],Ve=q[ve],Array.isArray(Ve)&&(Be=Ve[1],Ve=q[ve]=Ve[0]),ve!==we&&(q[we]=Ve,delete q[ve]),(Je=ce.cssHooks[we])&&"expand"in Je)for(ve in Ve=Je.expand(Ve),delete q[we],Ve)ve in q||(q[ve]=Ve[ve],se[ve]=Be);else se[we]=Be}(Cn,Ft.opts.specialEasing);Ve<Je;Ve++)if(we=cr.prefilters[Ve].call(Ft,q,Cn,Ft.opts))return he(we.stop)&&(ce._queueHooks(Ft.elem,Ft.opts.queue).stop=we.stop.bind(we)),we;return ce.map(Cn,Eu,Ft),he(Ft.opts.start)&&Ft.opts.start.call(q,Ft),Ft.progress(Ft.opts.progress).done(Ft.opts.done,Ft.opts.complete).fail(Ft.opts.fail).always(Ft.opts.always),ce.fx.timer(ce.extend(xt,{elem:q,anim:Ft,queue:Ft.opts.queue})),Ft}ce.Animation=ce.extend(cr,{tweeners:{"*":[function(q,se){var ve=this.createTween(q,se);return Ls(ve.elem,q,qs.exec(se),ve),ve}]},tweener:function(q,se){he(q)?(se=q,q=["*"]):q=q.match(en);for(var ve,we=0,Be=q.length;we<Be;we++)(cr.tweeners[ve=q[we]]=cr.tweeners[ve]||[]).unshift(se)},prefilters:[function Wi(q,se,ve){var we,Be,Ve,Je,At,xt,Ft,Cn,oi="width"in se||"height"in se,cn=this,gn={},_r=q.style,ls=q.nodeType&&os(q),vr=on.get(q,"fxshow");for(we in ve.queue||(null==(Je=ce._queueHooks(q,"fx")).unqueued&&(Je.unqueued=0,At=Je.empty.fire,Je.empty.fire=function(){Je.unqueued||At()}),Je.unqueued++,cn.always(function(){cn.always(function(){Je.unqueued--,ce.queue(q,"fx").length||Je.empty.fire()})})),se)if(Rr.test(Be=se[we])){if(delete se[we],Ve=Ve||"toggle"===Be,Be===(ls?"hide":"show")){if("show"!==Be||!vr||void 0===vr[we])continue;ls=!0}gn[we]=vr&&vr[we]||ce.style(q,we)}if((xt=!ce.isEmptyObject(se))||!ce.isEmptyObject(gn))for(we in oi&&1===q.nodeType&&(ve.overflow=[_r.overflow,_r.overflowX,_r.overflowY],null==(Ft=vr&&vr.display)&&(Ft=on.get(q,"display")),"none"===(Cn=ce.css(q,"display"))&&(Ft?Cn=Ft:(ja([q],!0),Ft=q.style.display||Ft,Cn=ce.css(q,"display"),ja([q]))),("inline"===Cn||"inline-block"===Cn&&null!=Ft)&&"none"===ce.css(q,"float")&&(xt||(cn.done(function(){_r.display=Ft}),null==Ft&&(Ft="none"===(Cn=_r.display)?"":Cn)),_r.display="inline-block")),ve.overflow&&(_r.overflow="hidden",cn.always(function(){_r.overflow=ve.overflow[0],_r.overflowX=ve.overflow[1],_r.overflowY=ve.overflow[2]})),xt=!1,gn)xt||(vr?"hidden"in vr&&(ls=vr.hidden):vr=on.access(q,"fxshow",{display:Ft}),Ve&&(vr.hidden=!ls),ls&&ja([q],!0),cn.done(function(){for(we in ls||ja([q]),on.remove(q,"fxshow"),gn)ce.style(q,we,gn[we])})),xt=Eu(ls?vr[we]:0,we,cn),we in vr||(vr[we]=xt.start,ls&&(xt.end=xt.start,xt.start=0))}],prefilter:function(q,se){se?cr.prefilters.unshift(q):cr.prefilters.push(q)}}),ce.speed=function(q,se,ve){var we=q&&"object"==typeof q?ce.extend({},q):{complete:ve||!ve&&se||he(q)&&q,duration:q,easing:ve&&se||se&&!he(se)&&se};return ce.fx.off?we.duration=0:"number"!=typeof we.duration&&(we.duration=we.duration in ce.fx.speeds?ce.fx.speeds[we.duration]:ce.fx.speeds._default),(null==we.queue||!0===we.queue)&&(we.queue="fx"),we.old=we.complete,we.complete=function(){he(we.old)&&we.old.call(this),we.queue&&ce.dequeue(this,we.queue)},we},ce.fn.extend({fadeTo:function(q,se,ve,we){return this.filter(os).css("opacity",0).show().end().animate({opacity:se},q,ve,we)},animate:function(q,se,ve,we){var Be=ce.isEmptyObject(q),Ve=ce.speed(se,ve,we),Je=function(){var At=cr(this,ce.extend({},q),Ve);(Be||on.get(this,"finish"))&&At.stop(!0)};return Je.finish=Je,Be||!1===Ve.queue?this.each(Je):this.queue(Ve.queue,Je)},stop:function(q,se,ve){var we=function(Be){var Ve=Be.stop;delete Be.stop,Ve(ve)};return"string"!=typeof q&&(ve=se,se=q,q=void 0),se&&this.queue(q||"fx",[]),this.each(function(){var Be=!0,Ve=null!=q&&q+"queueHooks",Je=ce.timers,At=on.get(this);if(Ve)At[Ve]&&At[Ve].stop&&we(At[Ve]);else for(Ve in At)At[Ve]&&At[Ve].stop&&vs.test(Ve)&&we(At[Ve]);for(Ve=Je.length;Ve--;)Je[Ve].elem===this&&(null==q||Je[Ve].queue===q)&&(Je[Ve].anim.stop(ve),Be=!1,Je.splice(Ve,1));(Be||!ve)&&ce.dequeue(this,q)})},finish:function(q){return!1!==q&&(q=q||"fx"),this.each(function(){var se,ve=on.get(this),we=ve[q+"queue"],Be=ve[q+"queueHooks"],Ve=ce.timers,Je=we?we.length:0;for(ve.finish=!0,ce.queue(this,q,[]),Be&&Be.stop&&Be.stop.call(this,!0),se=Ve.length;se--;)Ve[se].elem===this&&Ve[se].queue===q&&(Ve[se].anim.stop(!0),Ve.splice(se,1));for(se=0;se<Je;se++)we[se]&&we[se].finish&&we[se].finish.call(this);delete ve.finish})}}),ce.each(["toggle","show","hide"],function(q,se){var ve=ce.fn[se];ce.fn[se]=function(we,Be,Ve){return null==we||"boolean"==typeof we?ve.apply(this,arguments):this.animate(La(se,!0),we,Be,Ve)}}),ce.each({slideDown:La("show"),slideUp:La("hide"),slideToggle:La("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(q,se){ce.fn[q]=function(ve,we,Be){return this.animate(se,ve,we,Be)}}),ce.timers=[],ce.fx.tick=function(){var q,se=0,ve=ce.timers;for(yn=Date.now();se<ve.length;se++)!(q=ve[se])()&&ve[se]===q&&ve.splice(se--,1);ve.length||ce.fx.stop(),yn=void 0},ce.fx.timer=function(q){ce.timers.push(q),ce.fx.start()},ce.fx.interval=13,ce.fx.start=function(){An||(An=!0,Zi())},ce.fx.stop=function(){An=null},ce.fx.speeds={slow:600,fast:200,_default:400},ce.fn.delay=function(q,se){return q=ce.fx&&ce.fx.speeds[q]||q,this.queue(se=se||"fx",function(ve,we){var Be=l.setTimeout(ve,q);we.stop=function(){l.clearTimeout(Be)}})},function(){var q=ae.createElement("input"),ve=ae.createElement("select").appendChild(ae.createElement("option"));q.type="checkbox",re.checkOn=""!==q.value,re.optSelected=ve.selected,(q=ae.createElement("input")).value="t",q.type="radio",re.radioValue="t"===q.value}();var Ts,qo=ce.expr.attrHandle;ce.fn.extend({attr:function(q,se){return dr(this,ce.attr,q,se,arguments.length>1)},removeAttr:function(q){return this.each(function(){ce.removeAttr(this,q)})}}),ce.extend({attr:function(q,se,ve){var we,Be,Ve=q.nodeType;if(3!==Ve&&8!==Ve&&2!==Ve)return void 0===q.getAttribute?ce.prop(q,se,ve):((1!==Ve||!ce.isXMLDoc(q))&&(Be=ce.attrHooks[se.toLowerCase()]||(ce.expr.match.bool.test(se)?Ts:void 0)),void 0!==ve?null===ve?void ce.removeAttr(q,se):Be&&"set"in Be&&void 0!==(we=Be.set(q,ve,se))?we:(q.setAttribute(se,ve+""),ve):Be&&"get"in Be&&null!==(we=Be.get(q,se))?we:null==(we=ce.find.attr(q,se))?void 0:we)},attrHooks:{type:{set:function(q,se){if(!re.radioValue&&"radio"===se&&Wt(q,"input")){var ve=q.value;return q.setAttribute("type",se),ve&&(q.value=ve),se}}}},removeAttr:function(q,se){var ve,we=0,Be=se&&se.match(en);if(Be&&1===q.nodeType)for(;ve=Be[we++];)q.removeAttribute(ve)}}),Ts={set:function(q,se,ve){return!1===se?ce.removeAttr(q,ve):q.setAttribute(ve,ve),ve}},ce.each(ce.expr.match.bool.source.match(/\w+/g),function(q,se){var ve=qo[se]||ce.find.attr;qo[se]=function(we,Be,Ve){var Je,At,xt=Be.toLowerCase();return Ve||(At=qo[xt],qo[xt]=Je,Je=null!=ve(we,Be,Ve)?xt:null,qo[xt]=At),Je}});var kp=/^(?:input|select|textarea|button)$/i,ug=/^(?:a|area)$/i;function mc(q){return(q.match(en)||[]).join(" ")}function Ma(q){return q.getAttribute&&q.getAttribute("class")||""}function Mf(q){return Array.isArray(q)?q:"string"==typeof q&&q.match(en)||[]}ce.fn.extend({prop:function(q,se){return dr(this,ce.prop,q,se,arguments.length>1)},removeProp:function(q){return this.each(function(){delete this[ce.propFix[q]||q]})}}),ce.extend({prop:function(q,se,ve){var we,Be,Ve=q.nodeType;if(3!==Ve&&8!==Ve&&2!==Ve)return(1!==Ve||!ce.isXMLDoc(q))&&(Be=ce.propHooks[se=ce.propFix[se]||se]),void 0!==ve?Be&&"set"in Be&&void 0!==(we=Be.set(q,ve,se))?we:q[se]=ve:Be&&"get"in Be&&null!==(we=Be.get(q,se))?we:q[se]},propHooks:{tabIndex:{get:function(q){var se=ce.find.attr(q,"tabindex");return se?parseInt(se,10):kp.test(q.nodeName)||ug.test(q.nodeName)&&q.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),re.optSelected||(ce.propHooks.selected={get:function(q){return null},set:function(q){}}),ce.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ce.propFix[this.toLowerCase()]=this}),ce.fn.extend({addClass:function(q){var se,ve,we,Be,Ve,Je;return he(q)?this.each(function(At){ce(this).addClass(q.call(this,At,Ma(this)))}):(se=Mf(q)).length?this.each(function(){if(we=Ma(this),ve=1===this.nodeType&&" "+mc(we)+" "){for(Ve=0;Ve<se.length;Ve++)ve.indexOf(" "+(Be=se[Ve])+" ")<0&&(ve+=Be+" ");Je=mc(ve),we!==Je&&this.setAttribute("class",Je)}}):this},removeClass:function(q){var se,ve,we,Be,Ve,Je;return he(q)?this.each(function(At){ce(this).removeClass(q.call(this,At,Ma(this)))}):arguments.length?(se=Mf(q)).length?this.each(function(){if(we=Ma(this),ve=1===this.nodeType&&" "+mc(we)+" "){for(Ve=0;Ve<se.length;Ve++)for(Be=se[Ve];ve.indexOf(" "+Be+" ")>-1;)ve=ve.replace(" "+Be+" "," ");Je=mc(ve),we!==Je&&this.setAttribute("class",Je)}}):this:this.attr("class","")},toggleClass:function(q,se){var ve,we,Be,Ve,Je=typeof q,At="string"===Je||Array.isArray(q);return he(q)?this.each(function(xt){ce(this).toggleClass(q.call(this,xt,Ma(this),se),se)}):"boolean"==typeof se&&At?se?this.addClass(q):this.removeClass(q):(ve=Mf(q),this.each(function(){if(At)for(Ve=ce(this),Be=0;Be<ve.length;Be++)Ve.hasClass(we=ve[Be])?Ve.removeClass(we):Ve.addClass(we);else(void 0===q||"boolean"===Je)&&((we=Ma(this))&&on.set(this,"__className__",we),this.setAttribute&&this.setAttribute("class",we||!1===q?"":on.get(this,"__className__")||""))}))},hasClass:function(q){var se,ve,we=0;for(se=" "+q+" ";ve=this[we++];)if(1===ve.nodeType&&(" "+mc(Ma(ve))+" ").indexOf(se)>-1)return!0;return!1}});var Pp=/\r/g;ce.fn.extend({val:function(q){var se,ve,we,Be=this[0];return arguments.length?(we=he(q),this.each(function(Ve){var Je;1===this.nodeType&&(null==(Je=we?q.call(this,Ve,ce(this).val()):q)?Je="":"number"==typeof Je?Je+="":Array.isArray(Je)&&(Je=ce.map(Je,function(At){return null==At?"":At+""})),(!(se=ce.valHooks[this.type]||ce.valHooks[this.nodeName.toLowerCase()])||!("set"in se)||void 0===se.set(this,Je,"value"))&&(this.value=Je))})):Be?(se=ce.valHooks[Be.type]||ce.valHooks[Be.nodeName.toLowerCase()])&&"get"in se&&void 0!==(ve=se.get(Be,"value"))?ve:"string"==typeof(ve=Be.value)?ve.replace(Pp,""):null==ve?"":ve:void 0}}),ce.extend({valHooks:{option:{get:function(q){var se=ce.find.attr(q,"value");return null!=se?se:mc(ce.text(q))}},select:{get:function(q){var se,ve,we,Be=q.options,Ve=q.selectedIndex,Je="select-one"===q.type,At=Je?null:[],xt=Je?Ve+1:Be.length;for(we=Ve<0?xt:Je?Ve:0;we<xt;we++)if(((ve=Be[we]).selected||we===Ve)&&!ve.disabled&&(!ve.parentNode.disabled||!Wt(ve.parentNode,"optgroup"))){if(se=ce(ve).val(),Je)return se;At.push(se)}return At},set:function(q,se){for(var ve,we,Be=q.options,Ve=ce.makeArray(se),Je=Be.length;Je--;)((we=Be[Je]).selected=ce.inArray(ce.valHooks.option.get(we),Ve)>-1)&&(ve=!0);return ve||(q.selectedIndex=-1),Ve}}}}),ce.each(["radio","checkbox"],function(){ce.valHooks[this]={set:function(q,se){if(Array.isArray(se))return q.checked=ce.inArray(ce(q).val(),se)>-1}},re.checkOn||(ce.valHooks[this].get=function(q){return null===q.getAttribute("value")?"on":q.value})}),re.focusin="onfocusin"in l;var Lp=/^(?:focusinfocus|focusoutblur)$/,zc=function(q){q.stopPropagation()};ce.extend(ce.event,{trigger:function(q,se,ve,we){var Be,Ve,Je,At,xt,Ft,Cn,oi,cn=[ve||ae],gn=U.call(q,"type")?q.type:q,_r=U.call(q,"namespace")?q.namespace.split("."):[];if(Ve=oi=Je=ve=ve||ae,3!==ve.nodeType&&8!==ve.nodeType&&!Lp.test(gn+ce.event.triggered)&&(gn.indexOf(".")>-1&&(_r=gn.split("."),gn=_r.shift(),_r.sort()),xt=gn.indexOf(":")<0&&"on"+gn,(q=q[ce.expando]?q:new ce.Event(gn,"object"==typeof q&&q)).isTrigger=we?2:3,q.namespace=_r.join("."),q.rnamespace=q.namespace?new RegExp("(^|\\.)"+_r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,q.result=void 0,q.target||(q.target=ve),se=null==se?[q]:ce.makeArray(se,[q]),Cn=ce.event.special[gn]||{},we||!Cn.trigger||!1!==Cn.trigger.apply(ve,se))){if(!we&&!Cn.noBubble&&!ie(ve)){for(Lp.test((At=Cn.delegateType||gn)+gn)||(Ve=Ve.parentNode);Ve;Ve=Ve.parentNode)cn.push(Ve),Je=Ve;Je===(ve.ownerDocument||ae)&&cn.push(Je.defaultView||Je.parentWindow||l)}for(Be=0;(Ve=cn[Be++])&&!q.isPropagationStopped();)oi=Ve,q.type=Be>1?At:Cn.bindType||gn,(Ft=(on.get(Ve,"events")||Object.create(null))[q.type]&&on.get(Ve,"handle"))&&Ft.apply(Ve,se),(Ft=xt&&Ve[xt])&&Ft.apply&&nt(Ve)&&(q.result=Ft.apply(Ve,se),!1===q.result&&q.preventDefault());return q.type=gn,!we&&!q.isDefaultPrevented()&&(!Cn._default||!1===Cn._default.apply(cn.pop(),se))&&nt(ve)&&xt&&he(ve[gn])&&!ie(ve)&&((Je=ve[xt])&&(ve[xt]=null),ce.event.triggered=gn,q.isPropagationStopped()&&oi.addEventListener(gn,zc),ve[gn](),q.isPropagationStopped()&&oi.removeEventListener(gn,zc),ce.event.triggered=void 0,Je&&(ve[xt]=Je)),q.result}},simulate:function(q,se,ve){var we=ce.extend(new ce.Event,ve,{type:q,isSimulated:!0});ce.event.trigger(we,null,se)}}),ce.fn.extend({trigger:function(q,se){return this.each(function(){ce.event.trigger(q,se,this)})},triggerHandler:function(q,se){var ve=this[0];if(ve)return ce.event.trigger(q,se,ve,!0)}}),re.focusin||ce.each({focus:"focusin",blur:"focusout"},function(q,se){var ve=function(we){ce.event.simulate(se,we.target,ce.event.fix(we))};ce.event.special[se]={setup:function(){var we=this.ownerDocument||this.document||this,Be=on.access(we,se);Be||we.addEventListener(q,ve,!0),on.access(we,se,(Be||0)+1)},teardown:function(){var we=this.ownerDocument||this.document||this,Be=on.access(we,se)-1;Be?on.access(we,se,Be):(we.removeEventListener(q,ve,!0),on.remove(we,se))}}});var Sd=l.location,Fp={guid:Date.now()},Vc=/\?/;ce.parseXML=function(q){var se,ve;if(!q||"string"!=typeof q)return null;try{se=(new l.DOMParser).parseFromString(q,"text/xml")}catch(we){}return ve=se&&se.getElementsByTagName("parsererror")[0],(!se||ve)&&ce.error("Invalid XML: "+(ve?ce.map(ve.childNodes,function(we){return we.textContent}).join("\n"):q)),se};var j_=/\[\]$/,Op=/\r?\n/g,Cf=/^(?:submit|button|image|reset|file)$/i,Vh=/^(?:input|select|textarea|keygen)/i;function Np(q,se,ve,we){var Be;if(Array.isArray(se))ce.each(se,function(Ve,Je){ve||j_.test(q)?we(q,Je):Np(q+"["+("object"==typeof Je&&null!=Je?Ve:"")+"]",Je,ve,we)});else if(ve||"object"!==Le(se))we(q,se);else for(Be in se)Np(q+"["+Be+"]",se[Be],ve,we)}ce.param=function(q,se){var ve,we=[],Be=function(Ve,Je){var At=he(Je)?Je():Je;we[we.length]=encodeURIComponent(Ve)+"="+encodeURIComponent(null==At?"":At)};if(null==q)return"";if(Array.isArray(q)||q.jquery&&!ce.isPlainObject(q))ce.each(q,function(){Be(this.name,this.value)});else for(ve in q)Np(ve,q[ve],se,Be);return we.join("&")},ce.fn.extend({serialize:function(){return ce.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var q=ce.prop(this,"elements");return q?ce.makeArray(q):this}).filter(function(){var q=this.type;return this.name&&!ce(this).is(":disabled")&&Vh.test(this.nodeName)&&!Cf.test(q)&&(this.checked||!sr.test(q))}).map(function(q,se){var ve=ce(this).val();return null==ve?null:Array.isArray(ve)?ce.map(ve,function(we){return{name:se.name,value:we.replace(Op,"\r\n")}}):{name:se.name,value:ve.replace(Op,"\r\n")}}).get()}});var tc=/%20/g,Mo=/#.*$/,Sf=/([?&])_=[^&]*/,Ed=/^(.*?):[ \t]*([^\r\n]*)$/gm,ki=/^(?:GET|HEAD)$/,Td=/^\/\//,Cs={},au={},fh="*/".concat("*"),Dd=ae.createElement("a");function Bp(q){return function(se,ve){"string"!=typeof se&&(ve=se,se="*");var we,Be=0,Ve=se.toLowerCase().match(en)||[];if(he(ve))for(;we=Ve[Be++];)"+"===we[0]?(we=we.slice(1)||"*",(q[we]=q[we]||[]).unshift(ve)):(q[we]=q[we]||[]).push(ve)}}function sl(q,se,ve,we){var Be={},Ve=q===au;function Je(At){var xt;return Be[At]=!0,ce.each(q[At]||[],function(Ft,Cn){var oi=Cn(se,ve,we);return"string"!=typeof oi||Ve||Be[oi]?Ve?!(xt=oi):void 0:(se.dataTypes.unshift(oi),Je(oi),!1)}),xt}return Je(se.dataTypes[0])||!Be["*"]&&Je("*")}function gc(q,se){var ve,we,Be=ce.ajaxSettings.flatOptions||{};for(ve in se)void 0!==se[ve]&&((Be[ve]?q:we||(we={}))[ve]=se[ve]);return we&&ce.extend(!0,q,we),q}Dd.href=Sd.href,ce.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Sd.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Sd.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":fh,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ce.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(q,se){return se?gc(gc(q,ce.ajaxSettings),se):gc(ce.ajaxSettings,q)},ajaxPrefilter:Bp(Cs),ajaxTransport:Bp(au),ajax:function(q,se){"object"==typeof q&&(se=q,q=void 0);var ve,we,Be,Ve,Je,At,xt,Ft,Cn,oi,cn=ce.ajaxSetup({},se=se||{}),gn=cn.context||cn,_r=cn.context&&(gn.nodeType||gn.jquery)?ce(gn):ce.event,ls=ce.Deferred(),vr=ce.Callbacks("once memory"),Lo=cn.statusCode||{},Fs={},fl={},Io="canceled",or={readyState:0,getResponseHeader:function(zr){var aa;if(xt){if(!Ve)for(Ve={};aa=Ed.exec(Be);)Ve[aa[1].toLowerCase()+" "]=(Ve[aa[1].toLowerCase()+" "]||[]).concat(aa[2]);aa=Ve[zr.toLowerCase()+" "]}return null==aa?null:aa.join(", ")},getAllResponseHeaders:function(){return xt?Be:null},setRequestHeader:function(zr,aa){return null==xt&&(zr=fl[zr.toLowerCase()]=fl[zr.toLowerCase()]||zr,Fs[zr]=aa),this},overrideMimeType:function(zr){return null==xt&&(cn.mimeType=zr),this},statusCode:function(zr){var aa;if(zr)if(xt)or.always(zr[or.status]);else for(aa in zr)Lo[aa]=[Lo[aa],zr[aa]];return this},abort:function(zr){var aa=zr||Io;return ve&&ve.abort(aa),ol(0,aa),this}};if(ls.promise(or),cn.url=((q||cn.url||Sd.href)+"").replace(Td,Sd.protocol+"//"),cn.type=se.method||se.type||cn.method||cn.type,cn.dataTypes=(cn.dataType||"*").toLowerCase().match(en)||[""],null==cn.crossDomain){At=ae.createElement("a");try{At.href=cn.url,At.href=At.href,cn.crossDomain=Dd.protocol+"//"+Dd.host!=At.protocol+"//"+At.host}catch(zr){cn.crossDomain=!0}}if(cn.data&&cn.processData&&"string"!=typeof cn.data&&(cn.data=ce.param(cn.data,cn.traditional)),sl(Cs,cn,se,or),xt)return or;for(Cn in(Ft=ce.event&&cn.global)&&0==ce.active++&&ce.event.trigger("ajaxStart"),cn.type=cn.type.toUpperCase(),cn.hasContent=!ki.test(cn.type),we=cn.url.replace(Mo,""),cn.hasContent?cn.data&&cn.processData&&0===(cn.contentType||"").indexOf("application/x-www-form-urlencoded")&&(cn.data=cn.data.replace(tc,"+")):(oi=cn.url.slice(we.length),cn.data&&(cn.processData||"string"==typeof cn.data)&&(we+=(Vc.test(we)?"&":"?")+cn.data,delete cn.data),!1===cn.cache&&(we=we.replace(Sf,"$1"),oi=(Vc.test(we)?"&":"?")+"_="+Fp.guid+++oi),cn.url=we+oi),cn.ifModified&&(ce.lastModified[we]&&or.setRequestHeader("If-Modified-Since",ce.lastModified[we]),ce.etag[we]&&or.setRequestHeader("If-None-Match",ce.etag[we])),(cn.data&&cn.hasContent&&!1!==cn.contentType||se.contentType)&&or.setRequestHeader("Content-Type",cn.contentType),or.setRequestHeader("Accept",cn.dataTypes[0]&&cn.accepts[cn.dataTypes[0]]?cn.accepts[cn.dataTypes[0]]+("*"!==cn.dataTypes[0]?", "+fh+"; q=0.01":""):cn.accepts["*"]),cn.headers)or.setRequestHeader(Cn,cn.headers[Cn]);if(cn.beforeSend&&(!1===cn.beforeSend.call(gn,or,cn)||xt))return or.abort();if(Io="abort",vr.add(cn.complete),or.done(cn.success),or.fail(cn.error),ve=sl(au,cn,se,or)){if(or.readyState=1,Ft&&_r.trigger("ajaxSend",[or,cn]),xt)return or;cn.async&&cn.timeout>0&&(Je=l.setTimeout(function(){or.abort("timeout")},cn.timeout));try{xt=!1,ve.send(Fs,ol)}catch(zr){if(xt)throw zr;ol(-1,zr)}}else ol(-1,"No Transport");function ol(zr,aa,mh,ys){var Ol,pl,_i,ao,Yi,Un=aa;xt||(xt=!0,Je&&l.clearTimeout(Je),ve=void 0,Be=ys||"",or.readyState=zr>0?4:0,Ol=zr>=200&&zr<300||304===zr,mh&&(ao=function Uh(q,se,ve){for(var we,Be,Ve,Je,At=q.contents,xt=q.dataTypes;"*"===xt[0];)xt.shift(),void 0===we&&(we=q.mimeType||se.getResponseHeader("Content-Type"));if(we)for(Be in At)if(At[Be]&&At[Be].test(we)){xt.unshift(Be);break}if(xt[0]in ve)Ve=xt[0];else{for(Be in ve){if(!xt[0]||q.converters[Be+" "+xt[0]]){Ve=Be;break}Je||(Je=Be)}Ve=Ve||Je}if(Ve)return Ve!==xt[0]&&xt.unshift(Ve),ve[Ve]}(cn,or,mh)),!Ol&&ce.inArray("script",cn.dataTypes)>-1&&ce.inArray("json",cn.dataTypes)<0&&(cn.converters["text script"]=function(){}),ao=function Gh(q,se,ve,we){var Be,Ve,Je,At,xt,Ft={},Cn=q.dataTypes.slice();if(Cn[1])for(Je in q.converters)Ft[Je.toLowerCase()]=q.converters[Je];for(Ve=Cn.shift();Ve;)if(q.responseFields[Ve]&&(ve[q.responseFields[Ve]]=se),!xt&&we&&q.dataFilter&&(se=q.dataFilter(se,q.dataType)),xt=Ve,Ve=Cn.shift())if("*"===Ve)Ve=xt;else if("*"!==xt&&xt!==Ve){if(!(Je=Ft[xt+" "+Ve]||Ft["* "+Ve]))for(Be in Ft)if((At=Be.split(" "))[1]===Ve&&(Je=Ft[xt+" "+At[0]]||Ft["* "+At[0]])){!0===Je?Je=Ft[Be]:!0!==Ft[Be]&&(Ve=At[0],Cn.unshift(At[1]));break}if(!0!==Je)if(Je&&q.throws)se=Je(se);else try{se=Je(se)}catch(oi){return{state:"parsererror",error:Je?oi:"No conversion from "+xt+" to "+Ve}}}return{state:"success",data:se}}(cn,ao,or,Ol),Ol?(cn.ifModified&&((Yi=or.getResponseHeader("Last-Modified"))&&(ce.lastModified[we]=Yi),(Yi=or.getResponseHeader("etag"))&&(ce.etag[we]=Yi)),204===zr||"HEAD"===cn.type?Un="nocontent":304===zr?Un="notmodified":(Un=ao.state,pl=ao.data,Ol=!(_i=ao.error))):(_i=Un,(zr||!Un)&&(Un="error",zr<0&&(zr=0))),or.status=zr,or.statusText=(aa||Un)+"",Ol?ls.resolveWith(gn,[pl,Un,or]):ls.rejectWith(gn,[or,Un,_i]),or.statusCode(Lo),Lo=void 0,Ft&&_r.trigger(Ol?"ajaxSuccess":"ajaxError",[or,cn,Ol?pl:_i]),vr.fireWith(gn,[or,Un]),Ft&&(_r.trigger("ajaxComplete",[or,cn]),--ce.active||ce.event.trigger("ajaxStop")))}return or},getJSON:function(q,se,ve){return ce.get(q,se,ve,"json")},getScript:function(q,se){return ce.get(q,void 0,se,"script")}}),ce.each(["get","post"],function(q,se){ce[se]=function(ve,we,Be,Ve){return he(we)&&(Ve=Ve||Be,Be=we,we=void 0),ce.ajax(ce.extend({url:ve,type:se,dataType:Ve,data:we,success:Be},ce.isPlainObject(ve)&&ve))}}),ce.ajaxPrefilter(function(q){var se;for(se in q.headers)"content-type"===se.toLowerCase()&&(q.contentType=q.headers[se]||"")}),ce._evalUrl=function(q,se,ve){return ce.ajax({url:q,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(we){ce.globalEval(we,se,ve)}})},ce.fn.extend({wrapAll:function(q){var se;return this[0]&&(he(q)&&(q=q.call(this[0])),se=ce(q,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&se.insertBefore(this[0]),se.map(function(){for(var ve=this;ve.firstElementChild;)ve=ve.firstElementChild;return ve}).append(this)),this},wrapInner:function(q){return he(q)?this.each(function(se){ce(this).wrapInner(q.call(this,se))}):this.each(function(){var se=ce(this),ve=se.contents();ve.length?ve.wrapAll(q):se.append(q)})},wrap:function(q){var se=he(q);return this.each(function(ve){ce(this).wrapAll(se?q.call(this,ve):q)})},unwrap:function(q){return this.parent(q).not("body").each(function(){ce(this).replaceWith(this.childNodes)}),this}}),ce.expr.pseudos.hidden=function(q){return!ce.expr.pseudos.visible(q)},ce.expr.pseudos.visible=function(q){return!!(q.offsetWidth||q.offsetHeight||q.getClientRects().length)},ce.ajaxSettings.xhr=function(){try{return new l.XMLHttpRequest}catch(q){}};var Ac={0:200,1223:204},Hr=ce.ajaxSettings.xhr();re.cors=!!Hr&&"withCredentials"in Hr,re.ajax=Hr=!!Hr,ce.ajaxTransport(function(q){var se,ve;if(re.cors||Hr&&!q.crossDomain)return{send:function(we,Be){var Ve,Je=q.xhr();if(Je.open(q.type,q.url,q.async,q.username,q.password),q.xhrFields)for(Ve in q.xhrFields)Je[Ve]=q.xhrFields[Ve];for(Ve in q.mimeType&&Je.overrideMimeType&&Je.overrideMimeType(q.mimeType),!q.crossDomain&&!we["X-Requested-With"]&&(we["X-Requested-With"]="XMLHttpRequest"),we)Je.setRequestHeader(Ve,we[Ve]);se=function(At){return function(){se&&(se=ve=Je.onload=Je.onerror=Je.onabort=Je.ontimeout=Je.onreadystatechange=null,"abort"===At?Je.abort():"error"===At?"number"!=typeof Je.status?Be(0,"error"):Be(Je.status,Je.statusText):Be(Ac[Je.status]||Je.status,Je.statusText,"text"!==(Je.responseType||"text")||"string"!=typeof Je.responseText?{binary:Je.response}:{text:Je.responseText},Je.getAllResponseHeaders()))}},Je.onload=se(),ve=Je.onerror=Je.ontimeout=se("error"),void 0!==Je.onabort?Je.onabort=ve:Je.onreadystatechange=function(){4===Je.readyState&&l.setTimeout(function(){se&&ve()})},se=se("abort");try{Je.send(q.hasContent&&q.data||null)}catch(At){if(se)throw At}},abort:function(){se&&se()}}}),ce.ajaxPrefilter(function(q){q.crossDomain&&(q.contents.script=!1)}),ce.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(q){return ce.globalEval(q),q}}}),ce.ajaxPrefilter("script",function(q){void 0===q.cache&&(q.cache=!1),q.crossDomain&&(q.type="GET")}),ce.ajaxTransport("script",function(q){var se,ve;if(q.crossDomain||q.scriptAttrs)return{send:function(we,Be){se=ce("<script>").attr(q.scriptAttrs||{}).prop({charset:q.scriptCharset,src:q.url}).on("load error",ve=function(Ve){se.remove(),ve=null,Ve&&Be("error"===Ve.type?404:200,Ve.type)}),ae.head.appendChild(se[0])},abort:function(){ve&&ve()}}});var q,Wh=[],ph=/(=)\?(?=&|$)|\?\?/;ce.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var q=Wh.pop()||ce.expando+"_"+Fp.guid++;return this[q]=!0,q}}),ce.ajaxPrefilter("json jsonp",function(q,se,ve){var we,Be,Ve,Je=!1!==q.jsonp&&(ph.test(q.url)?"url":"string"==typeof q.data&&0===(q.contentType||"").indexOf("application/x-www-form-urlencoded")&&ph.test(q.data)&&"data");if(Je||"jsonp"===q.dataTypes[0])return we=q.jsonpCallback=he(q.jsonpCallback)?q.jsonpCallback():q.jsonpCallback,Je?q[Je]=q[Je].replace(ph,"$1"+we):!1!==q.jsonp&&(q.url+=(Vc.test(q.url)?"&":"?")+q.jsonp+"="+we),q.converters["script json"]=function(){return Ve||ce.error(we+" was not called"),Ve[0]},q.dataTypes[0]="json",Be=l[we],l[we]=function(){Ve=arguments},ve.always(function(){void 0===Be?ce(l).removeProp(we):l[we]=Be,q[we]&&(q.jsonpCallback=se.jsonpCallback,Wh.push(we)),Ve&&he(Be)&&Be(Ve[0]),Ve=Be=void 0}),"script"}),re.createHTMLDocument=((q=ae.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===q.childNodes.length),ce.parseHTML=function(q,se,ve){return"string"!=typeof q?[]:("boolean"==typeof se&&(ve=se,se=!1),se||(re.createHTMLDocument?((we=(se=ae.implementation.createHTMLDocument("")).createElement("base")).href=ae.location.href,se.head.appendChild(we)):se=ae),Ve=!ve&&[],(Be=Xe.exec(q))?[se.createElement(Be[1])]:(Be=Y([q],se,Ve),Ve&&Ve.length&&ce(Ve).remove(),ce.merge([],Be.childNodes)));var we,Be,Ve},ce.fn.load=function(q,se,ve){var we,Be,Ve,Je=this,At=q.indexOf(" ");return At>-1&&(we=mc(q.slice(At)),q=q.slice(0,At)),he(se)?(ve=se,se=void 0):se&&"object"==typeof se&&(Be="POST"),Je.length>0&&ce.ajax({url:q,type:Be||"GET",dataType:"html",data:se}).done(function(xt){Ve=arguments,Je.html(we?ce("<div>").append(ce.parseHTML(xt)).find(we):xt)}).always(ve&&function(xt,Ft){Je.each(function(){ve.apply(this,Ve||[xt.responseText,Ft,xt])})}),this},ce.expr.pseudos.animated=function(q){return ce.grep(ce.timers,function(se){return q===se.elem}).length},ce.offset={setOffset:function(q,se,ve){var we,Be,Ve,Je,At,xt,Cn=ce.css(q,"position"),oi=ce(q),cn={};"static"===Cn&&(q.style.position="relative"),At=oi.offset(),Ve=ce.css(q,"top"),xt=ce.css(q,"left"),("absolute"===Cn||"fixed"===Cn)&&(Ve+xt).indexOf("auto")>-1?(Je=(we=oi.position()).top,Be=we.left):(Je=parseFloat(Ve)||0,Be=parseFloat(xt)||0),he(se)&&(se=se.call(q,ve,ce.extend({},At))),null!=se.top&&(cn.top=se.top-At.top+Je),null!=se.left&&(cn.left=se.left-At.left+Be),"using"in se?se.using.call(q,cn):oi.css(cn)}},ce.fn.extend({offset:function(q){if(arguments.length)return void 0===q?this:this.each(function(Be){ce.offset.setOffset(this,q,Be)});var se,ve,we=this[0];return we?we.getClientRects().length?{top:(se=we.getBoundingClientRect()).top+(ve=we.ownerDocument.defaultView).pageYOffset,left:se.left+ve.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var q,se,ve,we=this[0],Be={top:0,left:0};if("fixed"===ce.css(we,"position"))se=we.getBoundingClientRect();else{for(se=this.offset(),ve=we.ownerDocument,q=we.offsetParent||ve.documentElement;q&&(q===ve.body||q===ve.documentElement)&&"static"===ce.css(q,"position");)q=q.parentNode;q&&q!==we&&1===q.nodeType&&((Be=ce(q).offset()).top+=ce.css(q,"borderTopWidth",!0),Be.left+=ce.css(q,"borderLeftWidth",!0))}return{top:se.top-Be.top-ce.css(we,"marginTop",!0),left:se.left-Be.left-ce.css(we,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var q=this.offsetParent;q&&"static"===ce.css(q,"position");)q=q.offsetParent;return q||oo})}}),ce.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(q,se){var ve="pageYOffset"===se;ce.fn[q]=function(we){return dr(this,function(Be,Ve,Je){var At;if(ie(Be)?At=Be:9===Be.nodeType&&(At=Be.defaultView),void 0===Je)return At?At[se]:Be[Ve];At?At.scrollTo(ve?At.pageXOffset:Je,ve?Je:At.pageYOffset):Be[Ve]=Je},q,we,arguments.length)}}),ce.each(["top","left"],function(q,se){ce.cssHooks[se]=oa(re.pixelPosition,function(ve,we){if(we)return we=Ur(ve,se),Ri.test(we)?ce(ve).position()[se]+"px":we})}),ce.each({Height:"height",Width:"width"},function(q,se){ce.each({padding:"inner"+q,content:se,"":"outer"+q},function(ve,we){ce.fn[we]=function(Be,Ve){var Je=arguments.length&&(ve||"boolean"!=typeof Be),At=ve||(!0===Be||!0===Ve?"margin":"border");return dr(this,function(xt,Ft,Cn){var oi;return ie(xt)?0===we.indexOf("outer")?xt["inner"+q]:xt.document.documentElement["client"+q]:9===xt.nodeType?(oi=xt.documentElement,Math.max(xt.body["scroll"+q],oi["scroll"+q],xt.body["offset"+q],oi["offset"+q],oi["client"+q])):void 0===Cn?ce.css(xt,Ft,At):ce.style(xt,Ft,Cn,At)},se,Je?Be:void 0,Je)}})}),ce.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(q,se){ce.fn[se]=function(ve){return this.on(se,ve)}}),ce.fn.extend({bind:function(q,se,ve){return this.on(q,null,se,ve)},unbind:function(q,se){return this.off(q,null,se)},delegate:function(q,se,ve,we){return this.on(se,q,ve,we)},undelegate:function(q,se,ve){return 1===arguments.length?this.off(q,"**"):this.off(se,q||"**",ve)},hover:function(q,se){return this.mouseenter(q).mouseleave(se||q)}}),ce.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(q,se){ce.fn[se]=function(ve,we){return arguments.length>0?this.on(se,null,ve,we):this.trigger(se)}});var lu=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;ce.proxy=function(q,se){var ve,we,Be;if("string"==typeof se&&(ve=q[se],se=q,q=ve),he(q))return we=v.call(arguments,2),Be=function(){return q.apply(se||this,we.concat(v.call(arguments)))},Be.guid=q.guid=q.guid||ce.guid++,Be},ce.holdReady=function(q){q?ce.readyWait++:ce.ready(!0)},ce.isArray=Array.isArray,ce.parseJSON=JSON.parse,ce.nodeName=Wt,ce.isFunction=he,ce.isWindow=ie,ce.camelCase=dt,ce.type=Le,ce.now=Date.now,ce.isNumeric=function(q){var se=ce.type(q);return("number"===se||"string"===se)&&!isNaN(q-parseFloat(q))},ce.trim=function(q){return null==q?"":(q+"").replace(lu,"$1")},void 0!==(y=function(){return ce}.apply(G,[]))&&(K.exports=y);var cu=l.jQuery,Yu=l.$;return ce.noConflict=function(q){return l.$===ce&&(l.$=Yu),q&&l.jQuery===ce&&(l.jQuery=cu),ce},void 0===d&&(l.jQuery=l.$=ce),ce})},650:K=>{K.exports=function G(A,y,l){function d(v,C){if(!y[v]){if(!A[v]){if(_)return _(v,!0);var I=new Error("Cannot find module '"+v+"'");throw I.code="MODULE_NOT_FOUND",I}var P=y[v]={exports:{}};A[v][0].call(P.exports,function(B){return d(A[v][1][B]||B)},P,P.exports,G,A,y,l)}return y[v].exports}for(var _=void 0,p=0;p<l.length;p++)d(l[p]);return d}({1:[function(G,A,y){"use strict";var l=G("./utils"),d=G("./support"),_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";y.encode=function(p){for(var v,C,D,P,B,U,J=[],W=0,re=p.length,he=re,ie="string"!==l.getTypeOf(p);W<p.length;)he=re-W,D=ie?(v=p[W++],C=W<re?p[W++]:0,W<re?p[W++]:0):(v=p.charCodeAt(W++),C=W<re?p.charCodeAt(W++):0,W<re?p.charCodeAt(W++):0),P=(3&v)<<4|C>>4,B=1<he?(15&C)<<2|D>>6:64,U=2<he?63&D:64,J.push(_.charAt(v>>2)+_.charAt(P)+_.charAt(B)+_.charAt(U));return J.join("")},y.decode=function(p){var v,C,D,I,P,B,U=0,J=0,W="data:";if(p.substr(0,W.length)===W)throw new Error("Invalid base64 input, it looks like a data url.");var re,he=3*(p=p.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(p.charAt(p.length-1)===_.charAt(64)&&he--,p.charAt(p.length-2)===_.charAt(64)&&he--,he%1!=0)throw new Error("Invalid base64 input, bad content length.");for(re=d.uint8array?new Uint8Array(0|he):new Array(0|he);U<p.length;)v=_.indexOf(p.charAt(U++))<<2|(I=_.indexOf(p.charAt(U++)))>>4,C=(15&I)<<4|(P=_.indexOf(p.charAt(U++)))>>2,D=(3&P)<<6|(B=_.indexOf(p.charAt(U++))),re[J++]=v,64!==P&&(re[J++]=C),64!==B&&(re[J++]=D);return re}},{"./support":30,"./utils":32}],2:[function(G,A,y){"use strict";var l=G("./external"),d=G("./stream/DataWorker"),_=G("./stream/Crc32Probe"),p=G("./stream/DataLengthProbe");function v(C,D,I,P,B){this.compressedSize=C,this.uncompressedSize=D,this.crc32=I,this.compression=P,this.compressedContent=B}v.prototype={getContentWorker:function(){var C=new d(l.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new p("data_length")),D=this;return C.on("end",function(){if(this.streamInfo.data_length!==D.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),C},getCompressedWorker:function(){return new d(l.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},v.createWorkerFrom=function(C,D,I){return C.pipe(new _).pipe(new p("uncompressedSize")).pipe(D.compressWorker(I)).pipe(new p("compressedSize")).withStreamInfo("compression",D)},A.exports=v},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(G,A,y){"use strict";var l=G("./stream/GenericWorker");y.STORE={magic:"\0\0",compressWorker:function(){return new l("STORE compression")},uncompressWorker:function(){return new l("STORE decompression")}},y.DEFLATE=G("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(G,A,y){"use strict";var l=G("./utils"),d=function(){for(var _,p=[],v=0;v<256;v++){_=v;for(var C=0;C<8;C++)_=1&_?3988292384^_>>>1:_>>>1;p[v]=_}return p}();A.exports=function(_,p){return void 0!==_&&_.length?"string"!==l.getTypeOf(_)?function(v,C,D,I){var P=d,B=0+D;v^=-1;for(var U=0;U<B;U++)v=v>>>8^P[255&(v^C[U])];return-1^v}(0|p,_,_.length):function(v,C,D,I){var P=d,B=0+D;v^=-1;for(var U=0;U<B;U++)v=v>>>8^P[255&(v^C.charCodeAt(U))];return-1^v}(0|p,_,_.length):0}},{"./utils":32}],5:[function(G,A,y){"use strict";y.base64=!1,y.binary=!1,y.dir=!1,y.createFolders=!0,y.date=null,y.compression=null,y.compressionOptions=null,y.comment=null,y.unixPermissions=null,y.dosPermissions=null},{}],6:[function(G,A,y){"use strict";var l;l="undefined"!=typeof Promise?Promise:G("lie"),A.exports={Promise:l}},{lie:37}],7:[function(G,A,y){"use strict";var l="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,d=G("pako"),_=G("./utils"),p=G("./stream/GenericWorker"),v=l?"uint8array":"array";function C(D,I){p.call(this,"FlateWorker/"+D),this._pako=null,this._pakoAction=D,this._pakoOptions=I,this.meta={}}y.magic="\b\0",_.inherits(C,p),C.prototype.processChunk=function(D){this.meta=D.meta,null===this._pako&&this._createPako(),this._pako.push(_.transformTo(v,D.data),!1)},C.prototype.flush=function(){p.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},C.prototype.cleanUp=function(){p.prototype.cleanUp.call(this),this._pako=null},C.prototype._createPako=function(){this._pako=new d[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var D=this;this._pako.onData=function(I){D.push({data:I,meta:D.meta})}},y.compressWorker=function(D){return new C("Deflate",D)},y.uncompressWorker=function(){return new C("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(G,A,y){"use strict";function l(P,B){var U,J="";for(U=0;U<B;U++)J+=String.fromCharCode(255&P),P>>>=8;return J}function d(P,B,U,J,W,re){var he,ie,ae=P.file,Me=P.compression,Ce=re!==v.utf8encode,Le=_.transformTo("string",re(ae.name)),Ue=_.transformTo("string",v.utf8encode(ae.name)),ce=ae.comment,lt=_.transformTo("string",re(ce)),qe=_.transformTo("string",v.utf8encode(ce)),ut=Ue.length!==ae.name.length,De=qe.length!==ce.length,je="",Wt="",Xe="",Yn=ae.dir,Jt=ae.date,xn={crc32:0,compressedSize:0,uncompressedSize:0};B&&!U||(xn.crc32=P.crc32,xn.compressedSize=P.compressedSize,xn.uncompressedSize=P.uncompressedSize);var Pt=0;B&&(Pt|=8),Ce||!ut&&!De||(Pt|=2048);var en,zi,Lt=0,Xn=0;Yn&&(Lt|=16),"UNIX"===W?(Xn=798,Lt|=(zi=en=ae.unixPermissions,en||(zi=Yn?16893:33204),(65535&zi)<<16)):(Xn=20,Lt|=function(en){return 63&(en||0)}(ae.dosPermissions)),he=Jt.getUTCHours(),he<<=6,he|=Jt.getUTCMinutes(),he<<=5,he|=Jt.getUTCSeconds()/2,ie=Jt.getUTCFullYear()-1980,ie<<=4,ie|=Jt.getUTCMonth()+1,ie<<=5,ie|=Jt.getUTCDate(),ut&&(Wt=l(1,1)+l(C(Le),4)+Ue,je+="up"+l(Wt.length,2)+Wt),De&&(Xe=l(1,1)+l(C(lt),4)+qe,je+="uc"+l(Xe.length,2)+Xe);var ni="";return ni+="\n\0",ni+=l(Pt,2),ni+=Me.magic,ni+=l(he,2),ni+=l(ie,2),ni+=l(xn.crc32,4),ni+=l(xn.compressedSize,4),ni+=l(xn.uncompressedSize,4),ni+=l(Le.length,2),ni+=l(je.length,2),{fileRecord:D.LOCAL_FILE_HEADER+ni+Le+je,dirRecord:D.CENTRAL_FILE_HEADER+l(Xn,2)+ni+l(lt.length,2)+"\0\0\0\0"+l(Lt,4)+l(J,4)+Le+je+lt}}var _=G("../utils"),p=G("../stream/GenericWorker"),v=G("../utf8"),C=G("../crc32"),D=G("../signature");function I(P,B,U,J){p.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=B,this.zipPlatform=U,this.encodeFileName=J,this.streamFiles=P,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}_.inherits(I,p),I.prototype.push=function(P){var B=P.meta.percent||0,U=this.entriesCount,J=this._sources.length;this.accumulate?this.contentBuffer.push(P):(this.bytesWritten+=P.data.length,p.prototype.push.call(this,{data:P.data,meta:{currentFile:this.currentFile,percent:U?(B+100*(U-J-1))/U:100}}))},I.prototype.openedSource=function(P){this.currentSourceOffset=this.bytesWritten,this.currentFile=P.file.name;var B=this.streamFiles&&!P.file.dir;if(B){var U=d(P,B,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:U.fileRecord,meta:{percent:0}})}else this.accumulate=!0},I.prototype.closedSource=function(P){this.accumulate=!1;var J,B=this.streamFiles&&!P.file.dir,U=d(P,B,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(U.dirRecord),B)this.push({data:(J=P,D.DATA_DESCRIPTOR+l(J.crc32,4)+l(J.compressedSize,4)+l(J.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:U.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},I.prototype.flush=function(){for(var P=this.bytesWritten,B=0;B<this.dirRecords.length;B++)this.push({data:this.dirRecords[B],meta:{percent:100}});var W,re,he,Me,J=(W=this.dirRecords.length,re=this.bytesWritten-P,he=P,Me=_.transformTo("string",(0,this.encodeFileName)(this.zipComment)),D.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(W,2)+l(W,2)+l(re,4)+l(he,4)+l(Me.length,2)+Me);this.push({data:J,meta:{percent:100}})},I.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},I.prototype.registerPrevious=function(P){this._sources.push(P);var B=this;return P.on("data",function(U){B.processChunk(U)}),P.on("end",function(){B.closedSource(B.previous.streamInfo),B._sources.length?B.prepareNextSource():B.end()}),P.on("error",function(U){B.error(U)}),this},I.prototype.resume=function(){return!!p.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},I.prototype.error=function(P){var B=this._sources;if(!p.prototype.error.call(this,P))return!1;for(var U=0;U<B.length;U++)try{B[U].error(P)}catch(J){}return!0},I.prototype.lock=function(){p.prototype.lock.call(this);for(var P=this._sources,B=0;B<P.length;B++)P[B].lock()},A.exports=I},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(G,A,y){"use strict";var l=G("../compressions"),d=G("./ZipFileWorker");y.generateWorker=function(_,p,v){var C=new d(p.streamFiles,v,p.platform,p.encodeFileName),D=0;try{_.forEach(function(I,P){D++;var B=function(re,he){var ie=re||he,ae=l[ie];if(!ae)throw new Error(ie+" is not a valid compression method !");return ae}(P.options.compression,p.compression),J=P.dir,W=P.date;P._compressWorker(B,P.options.compressionOptions||p.compressionOptions||{}).withStreamInfo("file",{name:I,dir:J,date:W,comment:P.comment||"",unixPermissions:P.unixPermissions,dosPermissions:P.dosPermissions}).pipe(C)}),C.entriesCount=D}catch(I){C.error(I)}return C}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(G,A,y){"use strict";function l(){if(!(this instanceof l))return new l;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var d=new l;for(var _ in this)"function"!=typeof this[_]&&(d[_]=this[_]);return d}}(l.prototype=G("./object")).loadAsync=G("./load"),l.support=G("./support"),l.defaults=G("./defaults"),l.version="3.10.1",l.loadAsync=function(d,_){return(new l).loadAsync(d,_)},l.external=G("./external"),A.exports=l},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(G,A,y){"use strict";var l=G("./utils"),d=G("./external"),_=G("./utf8"),p=G("./zipEntries"),v=G("./stream/Crc32Probe"),C=G("./nodejsUtils");function D(I){return new d.Promise(function(P,B){var U=I.decompressed.getContentWorker().pipe(new v);U.on("error",function(J){B(J)}).on("end",function(){U.streamInfo.crc32!==I.decompressed.crc32?B(new Error("Corrupted zip : CRC32 mismatch")):P()}).resume()})}A.exports=function(I,P){var B=this;return P=l.extend(P||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:_.utf8decode}),C.isNode&&C.isStream(I)?d.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",I,!0,P.optimizedBinaryString,P.base64).then(function(U){var J=new p(P);return J.load(U),J}).then(function(U){var J=[d.Promise.resolve(U)],W=U.files;if(P.checkCRC32)for(var re=0;re<W.length;re++)J.push(D(W[re]));return d.Promise.all(J)}).then(function(U){for(var J=U.shift(),W=J.files,re=0;re<W.length;re++){var he=W[re],ie=he.fileNameStr,ae=l.resolve(he.fileNameStr);B.file(ae,he.decompressed,{binary:!0,optimizedBinaryString:!0,date:he.date,dir:he.dir,comment:he.fileCommentStr.length?he.fileCommentStr:null,unixPermissions:he.unixPermissions,dosPermissions:he.dosPermissions,createFolders:P.createFolders}),he.dir||(B.file(ae).unsafeOriginalName=ie)}return J.zipComment.length&&(B.comment=J.zipComment),B})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(G,A,y){"use strict";var l=G("../utils"),d=G("../stream/GenericWorker");function _(p,v){d.call(this,"Nodejs stream input adapter for "+p),this._upstreamEnded=!1,this._bindStream(v)}l.inherits(_,d),_.prototype._bindStream=function(p){var v=this;(this._stream=p).pause(),p.on("data",function(C){v.push({data:C,meta:{percent:0}})}).on("error",function(C){v.isPaused?this.generatedError=C:v.error(C)}).on("end",function(){v.isPaused?v._upstreamEnded=!0:v.end()})},_.prototype.pause=function(){return!!d.prototype.pause.call(this)&&(this._stream.pause(),!0)},_.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},A.exports=_},{"../stream/GenericWorker":28,"../utils":32}],13:[function(G,A,y){"use strict";var l=G("readable-stream").Readable;function d(_,p,v){l.call(this,p),this._helper=_;var C=this;_.on("data",function(D,I){C.push(D)||C._helper.pause(),v&&v(I)}).on("error",function(D){C.emit("error",D)}).on("end",function(){C.push(null)})}G("../utils").inherits(d,l),d.prototype._read=function(){this._helper.resume()},A.exports=d},{"../utils":32,"readable-stream":16}],14:[function(G,A,y){"use strict";A.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(l,d){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(l,d);if("number"==typeof l)throw new Error('The "data" argument must not be a number');return new Buffer(l,d)},allocBuffer:function(l){if(Buffer.alloc)return Buffer.alloc(l);var d=new Buffer(l);return d.fill(0),d},isBuffer:function(l){return Buffer.isBuffer(l)},isStream:function(l){return l&&"function"==typeof l.on&&"function"==typeof l.pause&&"function"==typeof l.resume}}},{}],15:[function(G,A,y){"use strict";function l(ae,Me,Ce){var Le,Ue=_.getTypeOf(Me),ce=_.extend(Ce||{},C);ce.date=ce.date||new Date,null!==ce.compression&&(ce.compression=ce.compression.toUpperCase()),"string"==typeof ce.unixPermissions&&(ce.unixPermissions=parseInt(ce.unixPermissions,8)),ce.unixPermissions&&16384&ce.unixPermissions&&(ce.dir=!0),ce.dosPermissions&&16&ce.dosPermissions&&(ce.dir=!0),ce.dir&&(ae=W(ae)),ce.createFolders&&(Le=J(ae))&&re.call(this,Le,!0),Ce&&void 0!==Ce.binary||(ce.binary=!("string"===Ue&&!1===ce.binary&&!1===ce.base64)),(Me instanceof D&&0===Me.uncompressedSize||ce.dir||!Me||0===Me.length)&&(ce.base64=!1,ce.binary=!0,Me="",ce.compression="STORE",Ue="string");var qe;qe=Me instanceof D||Me instanceof p?Me:B.isNode&&B.isStream(Me)?new U(ae,Me):_.prepareContent(ae,Me,ce.binary,ce.optimizedBinaryString,ce.base64);var ut=new I(ae,qe,ce);this.files[ae]=ut}var d=G("./utf8"),_=G("./utils"),p=G("./stream/GenericWorker"),v=G("./stream/StreamHelper"),C=G("./defaults"),D=G("./compressedObject"),I=G("./zipObject"),P=G("./generate"),B=G("./nodejsUtils"),U=G("./nodejs/NodejsStreamInputAdapter"),J=function(ae){"/"===ae.slice(-1)&&(ae=ae.substring(0,ae.length-1));var Me=ae.lastIndexOf("/");return 0<Me?ae.substring(0,Me):""},W=function(ae){return"/"!==ae.slice(-1)&&(ae+="/"),ae},re=function(ae,Me){return Me=void 0!==Me?Me:C.createFolders,ae=W(ae),this.files[ae]||l.call(this,ae,null,{dir:!0,createFolders:Me}),this.files[ae]};function he(ae){return"[object RegExp]"===Object.prototype.toString.call(ae)}var ie={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(ae){var Me,Ce,Le;for(Me in this.files)Le=this.files[Me],(Ce=Me.slice(this.root.length,Me.length))&&Me.slice(0,this.root.length)===this.root&&ae(Ce,Le)},filter:function(ae){var Me=[];return this.forEach(function(Ce,Le){ae(Ce,Le)&&Me.push(Le)}),Me},file:function(ae,Me,Ce){if(1!==arguments.length)return l.call(this,ae=this.root+ae,Me,Ce),this;if(he(ae)){var Le=ae;return this.filter(function(ce,lt){return!lt.dir&&Le.test(ce)})}var Ue=this.files[this.root+ae];return Ue&&!Ue.dir?Ue:null},folder:function(ae){if(!ae)return this;if(he(ae))return this.filter(function(Ue,ce){return ce.dir&&ae.test(Ue)});var Ce=re.call(this,this.root+ae),Le=this.clone();return Le.root=Ce.name,Le},remove:function(ae){var Me=this.files[ae=this.root+ae];if(Me||("/"!==ae.slice(-1)&&(ae+="/"),Me=this.files[ae]),Me&&!Me.dir)delete this.files[ae];else for(var Ce=this.filter(function(Ue,ce){return ce.name.slice(0,ae.length)===ae}),Le=0;Le<Ce.length;Le++)delete this.files[Ce[Le].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(ae){var Me,Ce={};try{if((Ce=_.extend(ae||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:d.utf8encode})).type=Ce.type.toLowerCase(),Ce.compression=Ce.compression.toUpperCase(),"binarystring"===Ce.type&&(Ce.type="string"),!Ce.type)throw new Error("No output type specified.");_.checkSupport(Ce.type),"darwin"!==Ce.platform&&"freebsd"!==Ce.platform&&"linux"!==Ce.platform&&"sunos"!==Ce.platform||(Ce.platform="UNIX"),"win32"===Ce.platform&&(Ce.platform="DOS"),Me=P.generateWorker(this,Ce,Ce.comment||this.comment||"")}catch(Ue){(Me=new p("error")).error(Ue)}return new v(Me,Ce.type||"string",Ce.mimeType)},generateAsync:function(ae,Me){return this.generateInternalStream(ae).accumulate(Me)},generateNodeStream:function(ae,Me){return(ae=ae||{}).type||(ae.type="nodebuffer"),this.generateInternalStream(ae).toNodejsStream(Me)}};A.exports=ie},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(G,A,y){"use strict";A.exports=G("stream")},{stream:void 0}],17:[function(G,A,y){"use strict";var l=G("./DataReader");function d(_){l.call(this,_);for(var p=0;p<this.data.length;p++)_[p]=255&_[p]}G("../utils").inherits(d,l),d.prototype.byteAt=function(_){return this.data[this.zero+_]},d.prototype.lastIndexOfSignature=function(_){for(var p=_.charCodeAt(0),v=_.charCodeAt(1),C=_.charCodeAt(2),D=_.charCodeAt(3),I=this.length-4;0<=I;--I)if(this.data[I]===p&&this.data[I+1]===v&&this.data[I+2]===C&&this.data[I+3]===D)return I-this.zero;return-1},d.prototype.readAndCheckSignature=function(_){var p=_.charCodeAt(0),v=_.charCodeAt(1),C=_.charCodeAt(2),D=_.charCodeAt(3),I=this.readData(4);return p===I[0]&&v===I[1]&&C===I[2]&&D===I[3]},d.prototype.readData=function(_){if(this.checkOffset(_),0===_)return[];var p=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,p},A.exports=d},{"../utils":32,"./DataReader":18}],18:[function(G,A,y){"use strict";var l=G("../utils");function d(_){this.data=_,this.length=_.length,this.index=0,this.zero=0}d.prototype={checkOffset:function(_){this.checkIndex(this.index+_)},checkIndex:function(_){if(this.length<this.zero+_||_<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+_+"). Corrupted zip ?")},setIndex:function(_){this.checkIndex(_),this.index=_},skip:function(_){this.setIndex(this.index+_)},byteAt:function(){},readInt:function(_){var p,v=0;for(this.checkOffset(_),p=this.index+_-1;p>=this.index;p--)v=(v<<8)+this.byteAt(p);return this.index+=_,v},readString:function(_){return l.transformTo("string",this.readData(_))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var _=this.readInt(4);return new Date(Date.UTC(1980+(_>>25&127),(_>>21&15)-1,_>>16&31,_>>11&31,_>>5&63,(31&_)<<1))}},A.exports=d},{"../utils":32}],19:[function(G,A,y){"use strict";var l=G("./Uint8ArrayReader");function d(_){l.call(this,_)}G("../utils").inherits(d,l),d.prototype.readData=function(_){this.checkOffset(_);var p=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,p},A.exports=d},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(G,A,y){"use strict";var l=G("./DataReader");function d(_){l.call(this,_)}G("../utils").inherits(d,l),d.prototype.byteAt=function(_){return this.data.charCodeAt(this.zero+_)},d.prototype.lastIndexOfSignature=function(_){return this.data.lastIndexOf(_)-this.zero},d.prototype.readAndCheckSignature=function(_){return _===this.readData(4)},d.prototype.readData=function(_){this.checkOffset(_);var p=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,p},A.exports=d},{"../utils":32,"./DataReader":18}],21:[function(G,A,y){"use strict";var l=G("./ArrayReader");function d(_){l.call(this,_)}G("../utils").inherits(d,l),d.prototype.readData=function(_){if(this.checkOffset(_),0===_)return new Uint8Array(0);var p=this.data.subarray(this.zero+this.index,this.zero+this.index+_);return this.index+=_,p},A.exports=d},{"../utils":32,"./ArrayReader":17}],22:[function(G,A,y){"use strict";var l=G("../utils"),d=G("../support"),_=G("./ArrayReader"),p=G("./StringReader"),v=G("./NodeBufferReader"),C=G("./Uint8ArrayReader");A.exports=function(D){var I=l.getTypeOf(D);return l.checkSupport(I),"string"!==I||d.uint8array?"nodebuffer"===I?new v(D):d.uint8array?new C(l.transformTo("uint8array",D)):new _(l.transformTo("array",D)):new p(D)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(G,A,y){"use strict";y.LOCAL_FILE_HEADER="PK\x03\x04",y.CENTRAL_FILE_HEADER="PK\x01\x02",y.CENTRAL_DIRECTORY_END="PK\x05\x06",y.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",y.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",y.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(G,A,y){"use strict";var l=G("./GenericWorker"),d=G("../utils");function _(p){l.call(this,"ConvertWorker to "+p),this.destType=p}d.inherits(_,l),_.prototype.processChunk=function(p){this.push({data:d.transformTo(this.destType,p.data),meta:p.meta})},A.exports=_},{"../utils":32,"./GenericWorker":28}],25:[function(G,A,y){"use strict";var l=G("./GenericWorker"),d=G("../crc32");function _(){l.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}G("../utils").inherits(_,l),_.prototype.processChunk=function(p){this.streamInfo.crc32=d(p.data,this.streamInfo.crc32||0),this.push(p)},A.exports=_},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(G,A,y){"use strict";var l=G("../utils"),d=G("./GenericWorker");function _(p){d.call(this,"DataLengthProbe for "+p),this.propName=p,this.withStreamInfo(p,0)}l.inherits(_,d),_.prototype.processChunk=function(p){p&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+p.data.length),d.prototype.processChunk.call(this,p)},A.exports=_},{"../utils":32,"./GenericWorker":28}],27:[function(G,A,y){"use strict";var l=G("../utils"),d=G("./GenericWorker");function _(p){d.call(this,"DataWorker");var v=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,p.then(function(C){v.dataIsReady=!0,v.data=C,v.max=C&&C.length||0,v.type=l.getTypeOf(C),v.isPaused||v._tickAndRepeat()},function(C){v.error(C)})}l.inherits(_,d),_.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this.data=null},_.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,l.delay(this._tickAndRepeat,[],this)),!0)},_.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(l.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},_.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var p=null,v=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":p=this.data.substring(this.index,v);break;case"uint8array":p=this.data.subarray(this.index,v);break;case"array":case"nodebuffer":p=this.data.slice(this.index,v)}return this.index=v,this.push({data:p,meta:{percent:this.max?this.index/this.max*100:0}})},A.exports=_},{"../utils":32,"./GenericWorker":28}],28:[function(G,A,y){"use strict";function l(d){this.name=d||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}l.prototype={push:function(d){this.emit("data",d)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(d){this.emit("error",d)}return!0},error:function(d){return!this.isFinished&&(this.isPaused?this.generatedError=d:(this.isFinished=!0,this.emit("error",d),this.previous&&this.previous.error(d),this.cleanUp()),!0)},on:function(d,_){return this._listeners[d].push(_),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(d,_){if(this._listeners[d])for(var p=0;p<this._listeners[d].length;p++)this._listeners[d][p].call(this,_)},pipe:function(d){return d.registerPrevious(this)},registerPrevious:function(d){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=d.streamInfo,this.mergeStreamInfo(),this.previous=d;var _=this;return d.on("data",function(p){_.processChunk(p)}),d.on("end",function(){_.end()}),d.on("error",function(p){_.error(p)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var d=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),d=!0),this.previous&&this.previous.resume(),!d},flush:function(){},processChunk:function(d){this.push(d)},withStreamInfo:function(d,_){return this.extraStreamInfo[d]=_,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var d in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,d)&&(this.streamInfo[d]=this.extraStreamInfo[d])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var d="Worker "+this.name;return this.previous?this.previous+" -> "+d:d}},A.exports=l},{}],29:[function(G,A,y){"use strict";var l=G("../utils"),d=G("./ConvertWorker"),_=G("./GenericWorker"),p=G("../base64"),v=G("../support"),C=G("../external"),D=null;if(v.nodestream)try{D=G("../nodejs/NodejsStreamOutputAdapter")}catch(B){}function P(B,U,J){var W=U;switch(U){case"blob":case"arraybuffer":W="uint8array";break;case"base64":W="string"}try{this._internalType=W,this._outputType=U,this._mimeType=J,l.checkSupport(W),this._worker=B.pipe(new d(W)),B.lock()}catch(re){this._worker=new _("error"),this._worker.error(re)}}P.prototype={accumulate:function(B){return function I(B,U){return new C.Promise(function(J,W){var re=[],he=B._internalType,ie=B._outputType,ae=B._mimeType;B.on("data",function(Me,Ce){re.push(Me),U&&U(Ce)}).on("error",function(Me){re=[],W(Me)}).on("end",function(){try{var Me=function(Ce,Le,Ue){switch(Ce){case"blob":return l.newBlob(l.transformTo("arraybuffer",Le),Ue);case"base64":return p.encode(Le);default:return l.transformTo(Ce,Le)}}(ie,function(Ce,Le){var Ue,ce=0,lt=null,qe=0;for(Ue=0;Ue<Le.length;Ue++)qe+=Le[Ue].length;switch(Ce){case"string":return Le.join("");case"array":return Array.prototype.concat.apply([],Le);case"uint8array":for(lt=new Uint8Array(qe),Ue=0;Ue<Le.length;Ue++)lt.set(Le[Ue],ce),ce+=Le[Ue].length;return lt;case"nodebuffer":return Buffer.concat(Le);default:throw new Error("concat : unsupported type '"+Ce+"'")}}(he,re),ae);J(Me)}catch(Ce){W(Ce)}re=[]}).resume()})}(this,B)},on:function(B,U){var J=this;return this._worker.on(B,"data"===B?function(W){U.call(J,W.data,W.meta)}:function(){l.delay(U,arguments,J)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(B){if(l.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new D(this,{objectMode:"nodebuffer"!==this._outputType},B)}},A.exports=P},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(G,A,y){"use strict";if(y.base64=!0,y.array=!0,y.string=!0,y.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,y.nodebuffer="undefined"!=typeof Buffer,y.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)y.blob=!1;else{var l=new ArrayBuffer(0);try{y.blob=0===new Blob([l],{type:"application/zip"}).size}catch(_){try{var d=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);d.append(l),y.blob=0===d.getBlob("application/zip").size}catch(p){y.blob=!1}}}try{y.nodestream=!!G("readable-stream").Readable}catch(_){y.nodestream=!1}},{"readable-stream":16}],31:[function(G,A,y){"use strict";for(var l=G("./utils"),d=G("./support"),_=G("./nodejsUtils"),p=G("./stream/GenericWorker"),v=new Array(256),C=0;C<256;C++)v[C]=252<=C?6:248<=C?5:240<=C?4:224<=C?3:192<=C?2:1;function D(){p.call(this,"utf-8 decode"),this.leftOver=null}function I(){p.call(this,"utf-8 encode")}v[254]=v[254]=1,y.utf8encode=function(P){return d.nodebuffer?_.newBufferFrom(P,"utf-8"):function(B){var U,J,W,re,he,ie=B.length,ae=0;for(re=0;re<ie;re++)55296==(64512&(J=B.charCodeAt(re)))&&re+1<ie&&56320==(64512&(W=B.charCodeAt(re+1)))&&(J=65536+(J-55296<<10)+(W-56320),re++),ae+=J<128?1:J<2048?2:J<65536?3:4;for(U=d.uint8array?new Uint8Array(ae):new Array(ae),re=he=0;he<ae;re++)55296==(64512&(J=B.charCodeAt(re)))&&re+1<ie&&56320==(64512&(W=B.charCodeAt(re+1)))&&(J=65536+(J-55296<<10)+(W-56320),re++),J<128?U[he++]=J:(J<2048?U[he++]=192|J>>>6:(J<65536?U[he++]=224|J>>>12:(U[he++]=240|J>>>18,U[he++]=128|J>>>12&63),U[he++]=128|J>>>6&63),U[he++]=128|63&J);return U}(P)},y.utf8decode=function(P){return d.nodebuffer?l.transformTo("nodebuffer",P).toString("utf-8"):function(B){var U,J,W,re,he=B.length,ie=new Array(2*he);for(U=J=0;U<he;)if((W=B[U++])<128)ie[J++]=W;else if(4<(re=v[W]))ie[J++]=65533,U+=re-1;else{for(W&=2===re?31:3===re?15:7;1<re&&U<he;)W=W<<6|63&B[U++],re--;1<re?ie[J++]=65533:W<65536?ie[J++]=W:(ie[J++]=55296|(W-=65536)>>10&1023,ie[J++]=56320|1023&W)}return ie.length!==J&&(ie.subarray?ie=ie.subarray(0,J):ie.length=J),l.applyFromCharCode(ie)}(P=l.transformTo(d.uint8array?"uint8array":"array",P))},l.inherits(D,p),D.prototype.processChunk=function(P){var B=l.transformTo(d.uint8array?"uint8array":"array",P.data);if(this.leftOver&&this.leftOver.length){if(d.uint8array){var U=B;(B=new Uint8Array(U.length+this.leftOver.length)).set(this.leftOver,0),B.set(U,this.leftOver.length)}else B=this.leftOver.concat(B);this.leftOver=null}var J=function(re,he){var ie;for((he=he||re.length)>re.length&&(he=re.length),ie=he-1;0<=ie&&128==(192&re[ie]);)ie--;return ie<0||0===ie?he:ie+v[re[ie]]>he?ie:he}(B),W=B;J!==B.length&&(d.uint8array?(W=B.subarray(0,J),this.leftOver=B.subarray(J,B.length)):(W=B.slice(0,J),this.leftOver=B.slice(J,B.length))),this.push({data:y.utf8decode(W),meta:P.meta})},D.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:y.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},y.Utf8DecodeWorker=D,l.inherits(I,p),I.prototype.processChunk=function(P){this.push({data:y.utf8encode(P.data),meta:P.meta})},y.Utf8EncodeWorker=I},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(G,A,y){"use strict";var l=G("./support"),d=G("./base64"),_=G("./nodejsUtils"),p=G("./external");function v(U){return U}function C(U,J){for(var W=0;W<U.length;++W)J[W]=255&U.charCodeAt(W);return J}G("setimmediate"),y.newBlob=function(U,J){y.checkSupport("blob");try{return new Blob([U],{type:J})}catch(re){try{var W=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return W.append(U),W.getBlob(J)}catch(he){throw new Error("Bug : can't construct the Blob.")}}};var D={stringifyByChunk:function(U,J,W){var re=[],he=0,ie=U.length;if(ie<=W)return String.fromCharCode.apply(null,U);for(;he<ie;)re.push(String.fromCharCode.apply(null,"array"===J||"nodebuffer"===J?U.slice(he,Math.min(he+W,ie)):U.subarray(he,Math.min(he+W,ie)))),he+=W;return re.join("")},stringifyByChar:function(U){for(var J="",W=0;W<U.length;W++)J+=String.fromCharCode(U[W]);return J},applyCanBeUsed:{uint8array:function(){try{return l.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(U){return!1}}(),nodebuffer:function(){try{return l.nodebuffer&&1===String.fromCharCode.apply(null,_.allocBuffer(1)).length}catch(U){return!1}}()}};function I(U){var J=65536,W=y.getTypeOf(U),re=!0;if("uint8array"===W?re=D.applyCanBeUsed.uint8array:"nodebuffer"===W&&(re=D.applyCanBeUsed.nodebuffer),re)for(;1<J;)try{return D.stringifyByChunk(U,W,J)}catch(he){J=Math.floor(J/2)}return D.stringifyByChar(U)}function P(U,J){for(var W=0;W<U.length;W++)J[W]=U[W];return J}y.applyFromCharCode=I;var B={};B.string={string:v,array:function(U){return C(U,new Array(U.length))},arraybuffer:function(U){return B.string.uint8array(U).buffer},uint8array:function(U){return C(U,new Uint8Array(U.length))},nodebuffer:function(U){return C(U,_.allocBuffer(U.length))}},B.array={string:I,array:v,arraybuffer:function(U){return new Uint8Array(U).buffer},uint8array:function(U){return new Uint8Array(U)},nodebuffer:function(U){return _.newBufferFrom(U)}},B.arraybuffer={string:function(U){return I(new Uint8Array(U))},array:function(U){return P(new Uint8Array(U),new Array(U.byteLength))},arraybuffer:v,uint8array:function(U){return new Uint8Array(U)},nodebuffer:function(U){return _.newBufferFrom(new Uint8Array(U))}},B.uint8array={string:I,array:function(U){return P(U,new Array(U.length))},arraybuffer:function(U){return U.buffer},uint8array:v,nodebuffer:function(U){return _.newBufferFrom(U)}},B.nodebuffer={string:I,array:function(U){return P(U,new Array(U.length))},arraybuffer:function(U){return B.nodebuffer.uint8array(U).buffer},uint8array:function(U){return P(U,new Uint8Array(U.length))},nodebuffer:v},y.transformTo=function(U,J){if(J=J||"",!U)return J;y.checkSupport(U);var W=y.getTypeOf(J);return B[W][U](J)},y.resolve=function(U){for(var J=U.split("/"),W=[],re=0;re<J.length;re++){var he=J[re];"."===he||""===he&&0!==re&&re!==J.length-1||(".."===he?W.pop():W.push(he))}return W.join("/")},y.getTypeOf=function(U){return"string"==typeof U?"string":"[object Array]"===Object.prototype.toString.call(U)?"array":l.nodebuffer&&_.isBuffer(U)?"nodebuffer":l.uint8array&&U instanceof Uint8Array?"uint8array":l.arraybuffer&&U instanceof ArrayBuffer?"arraybuffer":void 0},y.checkSupport=function(U){if(!l[U.toLowerCase()])throw new Error(U+" is not supported by this platform")},y.MAX_VALUE_16BITS=65535,y.MAX_VALUE_32BITS=-1,y.pretty=function(U){var J,W,re="";for(W=0;W<(U||"").length;W++)re+="\\x"+((J=U.charCodeAt(W))<16?"0":"")+J.toString(16).toUpperCase();return re},y.delay=function(U,J,W){setImmediate(function(){U.apply(W||null,J||[])})},y.inherits=function(U,J){function W(){}W.prototype=J.prototype,U.prototype=new W},y.extend=function(){var U,J,W={};for(U=0;U<arguments.length;U++)for(J in arguments[U])Object.prototype.hasOwnProperty.call(arguments[U],J)&&void 0===W[J]&&(W[J]=arguments[U][J]);return W},y.prepareContent=function(U,J,W,re,he){return p.Promise.resolve(J).then(function(ie){return l.blob&&(ie instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(ie)))&&"undefined"!=typeof FileReader?new p.Promise(function(ae,Me){var Ce=new FileReader;Ce.onload=function(Le){ae(Le.target.result)},Ce.onerror=function(Le){Me(Le.target.error)},Ce.readAsArrayBuffer(ie)}):ie}).then(function(ie){var Me,ae=y.getTypeOf(ie);return ae?("arraybuffer"===ae?ie=y.transformTo("uint8array",ie):"string"===ae&&(he?ie=d.decode(ie):W&&!0!==re&&(ie=C(Me=ie,l.uint8array?new Uint8Array(Me.length):new Array(Me.length)))),ie):p.Promise.reject(new Error("Can't read the data of '"+U+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(G,A,y){"use strict";var l=G("./reader/readerFor"),d=G("./utils"),_=G("./signature"),p=G("./zipEntry"),v=G("./support");function C(D){this.files=[],this.loadOptions=D}C.prototype={checkSignature:function(D){if(!this.reader.readAndCheckSignature(D)){this.reader.index-=4;var I=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+d.pretty(I)+", expected "+d.pretty(D)+")")}},isSignature:function(D,I){var P=this.reader.index;this.reader.setIndex(D);var B=this.reader.readString(4)===I;return this.reader.setIndex(P),B},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var D=this.reader.readData(this.zipCommentLength),P=d.transformTo(v.uint8array?"uint8array":"array",D);this.zipComment=this.loadOptions.decodeFileName(P)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var D,I,P,B=this.zip64EndOfCentralSize-44;0<B;)D=this.reader.readInt(2),I=this.reader.readInt(4),P=this.reader.readData(I),this.zip64ExtensibleData[D]={id:D,length:I,value:P}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var D,I;for(D=0;D<this.files.length;D++)this.reader.setIndex((I=this.files[D]).localHeaderOffset),this.checkSignature(_.LOCAL_FILE_HEADER),I.readLocalPart(this.reader),I.handleUTF8(),I.processAttributes()},readCentralDir:function(){var D;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(_.CENTRAL_FILE_HEADER);)(D=new p({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(D);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var D=this.reader.lastIndexOfSignature(_.CENTRAL_DIRECTORY_END);if(D<0)throw this.isSignature(0,_.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(D);var I=D;if(this.checkSignature(_.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===d.MAX_VALUE_16BITS||this.diskWithCentralDirStart===d.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===d.MAX_VALUE_16BITS||this.centralDirRecords===d.MAX_VALUE_16BITS||this.centralDirSize===d.MAX_VALUE_32BITS||this.centralDirOffset===d.MAX_VALUE_32BITS){if(this.zip64=!0,(D=this.reader.lastIndexOfSignature(_.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(D),this.checkSignature(_.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,_.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(_.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(_.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var P=this.centralDirOffset+this.centralDirSize;this.zip64&&(P+=20,P+=12+this.zip64EndOfCentralSize);var B=I-P;if(0<B)this.isSignature(I,_.CENTRAL_FILE_HEADER)||(this.reader.zero=B);else if(B<0)throw new Error("Corrupted zip: missing "+Math.abs(B)+" bytes.")},prepareReader:function(D){this.reader=l(D)},load:function(D){this.prepareReader(D),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},A.exports=C},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(G,A,y){"use strict";var l=G("./reader/readerFor"),d=G("./utils"),_=G("./compressedObject"),p=G("./crc32"),v=G("./utf8"),C=G("./compressions"),D=G("./support");function I(P,B){this.options=P,this.loadOptions=B}I.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(P){var B,U;if(P.skip(22),this.fileNameLength=P.readInt(2),U=P.readInt(2),this.fileName=P.readData(this.fileNameLength),P.skip(U),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(B=function(J){for(var W in C)if(Object.prototype.hasOwnProperty.call(C,W)&&C[W].magic===J)return C[W];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+d.pretty(this.compressionMethod)+" unknown (inner file : "+d.transformTo("string",this.fileName)+")");this.decompressed=new _(this.compressedSize,this.uncompressedSize,this.crc32,B,P.readData(this.compressedSize))},readCentralPart:function(P){this.versionMadeBy=P.readInt(2),P.skip(2),this.bitFlag=P.readInt(2),this.compressionMethod=P.readString(2),this.date=P.readDate(),this.crc32=P.readInt(4),this.compressedSize=P.readInt(4),this.uncompressedSize=P.readInt(4);var B=P.readInt(2);if(this.extraFieldsLength=P.readInt(2),this.fileCommentLength=P.readInt(2),this.diskNumberStart=P.readInt(2),this.internalFileAttributes=P.readInt(2),this.externalFileAttributes=P.readInt(4),this.localHeaderOffset=P.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");P.skip(B),this.readExtraFields(P),this.parseZIP64ExtraField(P),this.fileComment=P.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var P=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==P&&(this.dosPermissions=63&this.externalFileAttributes),3==P&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var P=l(this.extraFields[1].value);this.uncompressedSize===d.MAX_VALUE_32BITS&&(this.uncompressedSize=P.readInt(8)),this.compressedSize===d.MAX_VALUE_32BITS&&(this.compressedSize=P.readInt(8)),this.localHeaderOffset===d.MAX_VALUE_32BITS&&(this.localHeaderOffset=P.readInt(8)),this.diskNumberStart===d.MAX_VALUE_32BITS&&(this.diskNumberStart=P.readInt(4))}},readExtraFields:function(P){var B,U,J,W=P.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});P.index+4<W;)B=P.readInt(2),U=P.readInt(2),J=P.readData(U),this.extraFields[B]={id:B,length:U,value:J};P.setIndex(W)},handleUTF8:function(){var P=D.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=v.utf8decode(this.fileName),this.fileCommentStr=v.utf8decode(this.fileComment);else{var B=this.findExtraFieldUnicodePath();if(null!==B)this.fileNameStr=B;else{var U=d.transformTo(P,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(U)}var J=this.findExtraFieldUnicodeComment();if(null!==J)this.fileCommentStr=J;else{var W=d.transformTo(P,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(W)}}},findExtraFieldUnicodePath:function(){var P=this.extraFields[28789];if(P){var B=l(P.value);return 1!==B.readInt(1)||p(this.fileName)!==B.readInt(4)?null:v.utf8decode(B.readData(P.length-5))}return null},findExtraFieldUnicodeComment:function(){var P=this.extraFields[25461];if(P){var B=l(P.value);return 1!==B.readInt(1)||p(this.fileComment)!==B.readInt(4)?null:v.utf8decode(B.readData(P.length-5))}return null}},A.exports=I},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(G,A,y){"use strict";function l(B,U,J){this.name=B,this.dir=J.dir,this.date=J.date,this.comment=J.comment,this.unixPermissions=J.unixPermissions,this.dosPermissions=J.dosPermissions,this._data=U,this._dataBinary=J.binary,this.options={compression:J.compression,compressionOptions:J.compressionOptions}}var d=G("./stream/StreamHelper"),_=G("./stream/DataWorker"),p=G("./utf8"),v=G("./compressedObject"),C=G("./stream/GenericWorker");l.prototype={internalStream:function(B){var U=null,J="string";try{if(!B)throw new Error("No output type specified.");var W="string"===(J=B.toLowerCase())||"text"===J;"binarystring"!==J&&"text"!==J||(J="string"),U=this._decompressWorker();var re=!this._dataBinary;re&&!W&&(U=U.pipe(new p.Utf8EncodeWorker)),!re&&W&&(U=U.pipe(new p.Utf8DecodeWorker))}catch(he){(U=new C("error")).error(he)}return new d(U,J,"")},async:function(B,U){return this.internalStream(B).accumulate(U)},nodeStream:function(B,U){return this.internalStream(B||"nodebuffer").toNodejsStream(U)},_compressWorker:function(B,U){if(this._data instanceof v&&this._data.compression.magic===B.magic)return this._data.getCompressedWorker();var J=this._decompressWorker();return this._dataBinary||(J=J.pipe(new p.Utf8EncodeWorker)),v.createWorkerFrom(J,B,U)},_decompressWorker:function(){return this._data instanceof v?this._data.getContentWorker():this._data instanceof C?this._data:new _(this._data)}};for(var D=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],I=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},P=0;P<D.length;P++)l.prototype[D[P]]=I;A.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(G,A,y){(function(l){"use strict";var d,_,p=l.MutationObserver||l.WebKitMutationObserver;if(p){var v=0,C=new p(B),D=l.document.createTextNode("");C.observe(D,{characterData:!0}),d=function(){D.data=v=++v%2}}else if(l.setImmediate||void 0===l.MessageChannel)d="document"in l&&"onreadystatechange"in l.document.createElement("script")?function(){var U=l.document.createElement("script");U.onreadystatechange=function(){B(),U.onreadystatechange=null,U.parentNode.removeChild(U),U=null},l.document.documentElement.appendChild(U)}:function(){setTimeout(B,0)};else{var I=new l.MessageChannel;I.port1.onmessage=B,d=function(){I.port2.postMessage(0)}}var P=[];function B(){var U,J;_=!0;for(var W=P.length;W;){for(J=P,P=[],U=-1;++U<W;)J[U]();W=P.length}_=!1}A.exports=function(U){1!==P.push(U)||_||d()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(G,A,y){"use strict";var l=G("immediate");function d(){}var _={},p=["REJECTED"],v=["FULFILLED"],C=["PENDING"];function D(W){if("function"!=typeof W)throw new TypeError("resolver must be a function");this.state=C,this.queue=[],this.outcome=void 0,W!==d&&U(this,W)}function I(W,re,he){this.promise=W,"function"==typeof re&&(this.onFulfilled=re,this.callFulfilled=this.otherCallFulfilled),"function"==typeof he&&(this.onRejected=he,this.callRejected=this.otherCallRejected)}function P(W,re,he){l(function(){var ie;try{ie=re(he)}catch(ae){return _.reject(W,ae)}ie===W?_.reject(W,new TypeError("Cannot resolve promise with itself")):_.resolve(W,ie)})}function B(W){var re=W&&W.then;if(W&&("object"==typeof W||"function"==typeof W)&&"function"==typeof re)return function(){re.apply(W,arguments)}}function U(W,re){var he=!1;function ie(Ce){he||(he=!0,_.reject(W,Ce))}function ae(Ce){he||(he=!0,_.resolve(W,Ce))}var Me=J(function(){re(ae,ie)});"error"===Me.status&&ie(Me.value)}function J(W,re){var he={};try{he.value=W(re),he.status="success"}catch(ie){he.status="error",he.value=ie}return he}(A.exports=D).prototype.finally=function(W){if("function"!=typeof W)return this;var re=this.constructor;return this.then(function(he){return re.resolve(W()).then(function(){return he})},function(he){return re.resolve(W()).then(function(){throw he})})},D.prototype.catch=function(W){return this.then(null,W)},D.prototype.then=function(W,re){if("function"!=typeof W&&this.state===v||"function"!=typeof re&&this.state===p)return this;var he=new this.constructor(d);return this.state!==C?P(he,this.state===v?W:re,this.outcome):this.queue.push(new I(he,W,re)),he},I.prototype.callFulfilled=function(W){_.resolve(this.promise,W)},I.prototype.otherCallFulfilled=function(W){P(this.promise,this.onFulfilled,W)},I.prototype.callRejected=function(W){_.reject(this.promise,W)},I.prototype.otherCallRejected=function(W){P(this.promise,this.onRejected,W)},_.resolve=function(W,re){var he=J(B,re);if("error"===he.status)return _.reject(W,he.value);var ie=he.value;if(ie)U(W,ie);else{W.state=v,W.outcome=re;for(var ae=-1,Me=W.queue.length;++ae<Me;)W.queue[ae].callFulfilled(re)}return W},_.reject=function(W,re){W.state=p,W.outcome=re;for(var he=-1,ie=W.queue.length;++he<ie;)W.queue[he].callRejected(re);return W},D.resolve=function(W){return W instanceof this?W:_.resolve(new this(d),W)},D.reject=function(W){var re=new this(d);return _.reject(re,W)},D.all=function(W){var re=this;if("[object Array]"!==Object.prototype.toString.call(W))return this.reject(new TypeError("must be an array"));var he=W.length,ie=!1;if(!he)return this.resolve([]);for(var ae=new Array(he),Me=0,Ce=-1,Le=new this(d);++Ce<he;)Ue(W[Ce],Ce);return Le;function Ue(ce,lt){re.resolve(ce).then(function(qe){ae[lt]=qe,++Me!==he||ie||(ie=!0,_.resolve(Le,ae))},function(qe){ie||(ie=!0,_.reject(Le,qe))})}},D.race=function(W){if("[object Array]"!==Object.prototype.toString.call(W))return this.reject(new TypeError("must be an array"));var he=W.length,ie=!1;if(!he)return this.resolve([]);for(var ae=-1,Me=new this(d);++ae<he;)this.resolve(W[ae]).then(function(Le){ie||(ie=!0,_.resolve(Me,Le))},function(Le){ie||(ie=!0,_.reject(Me,Le))});return Me}},{immediate:36}],38:[function(G,A,y){"use strict";var l={};(0,G("./lib/utils/common").assign)(l,G("./lib/deflate"),G("./lib/inflate"),G("./lib/zlib/constants")),A.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(G,A,y){"use strict";var l=G("./zlib/deflate"),d=G("./utils/common"),_=G("./utils/strings"),p=G("./zlib/messages"),v=G("./zlib/zstream"),C=Object.prototype.toString;function U(W){if(!(this instanceof U))return new U(W);this.options=d.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},W||{});var re=this.options;re.raw&&0<re.windowBits?re.windowBits=-re.windowBits:re.gzip&&0<re.windowBits&&re.windowBits<16&&(re.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var he=l.deflateInit2(this.strm,re.level,re.method,re.windowBits,re.memLevel,re.strategy);if(0!==he)throw new Error(p[he]);if(re.header&&l.deflateSetHeader(this.strm,re.header),re.dictionary){var ie;if(ie="string"==typeof re.dictionary?_.string2buf(re.dictionary):"[object ArrayBuffer]"===C.call(re.dictionary)?new Uint8Array(re.dictionary):re.dictionary,0!==(he=l.deflateSetDictionary(this.strm,ie)))throw new Error(p[he]);this._dict_set=!0}}function J(W,re){var he=new U(re);if(he.push(W,!0),he.err)throw he.msg||p[he.err];return he.result}U.prototype.push=function(W,re){var he,ie,ae=this.strm,Me=this.options.chunkSize;if(this.ended)return!1;ie=re===~~re?re:!0===re?4:0,ae.input="string"==typeof W?_.string2buf(W):"[object ArrayBuffer]"===C.call(W)?new Uint8Array(W):W,ae.next_in=0,ae.avail_in=ae.input.length;do{if(0===ae.avail_out&&(ae.output=new d.Buf8(Me),ae.next_out=0,ae.avail_out=Me),1!==(he=l.deflate(ae,ie))&&0!==he)return this.onEnd(he),!(this.ended=!0);0!==ae.avail_out&&(0!==ae.avail_in||4!==ie&&2!==ie)||this.onData("string"===this.options.to?_.buf2binstring(d.shrinkBuf(ae.output,ae.next_out)):d.shrinkBuf(ae.output,ae.next_out))}while((0<ae.avail_in||0===ae.avail_out)&&1!==he);return 4===ie?(he=l.deflateEnd(this.strm),this.onEnd(he),this.ended=!0,0===he):2!==ie||(this.onEnd(0),!(ae.avail_out=0))},U.prototype.onData=function(W){this.chunks.push(W)},U.prototype.onEnd=function(W){0===W&&(this.result="string"===this.options.to?this.chunks.join(""):d.flattenChunks(this.chunks)),this.chunks=[],this.err=W,this.msg=this.strm.msg},y.Deflate=U,y.deflate=J,y.deflateRaw=function(W,re){return(re=re||{}).raw=!0,J(W,re)},y.gzip=function(W,re){return(re=re||{}).gzip=!0,J(W,re)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(G,A,y){"use strict";var l=G("./zlib/inflate"),d=G("./utils/common"),_=G("./utils/strings"),p=G("./zlib/constants"),v=G("./zlib/messages"),C=G("./zlib/zstream"),D=G("./zlib/gzheader"),I=Object.prototype.toString;function P(U){if(!(this instanceof P))return new P(U);this.options=d.assign({chunkSize:16384,windowBits:0,to:""},U||{});var J=this.options;J.raw&&0<=J.windowBits&&J.windowBits<16&&(J.windowBits=-J.windowBits,0===J.windowBits&&(J.windowBits=-15)),!(0<=J.windowBits&&J.windowBits<16)||U&&U.windowBits||(J.windowBits+=32),15<J.windowBits&&J.windowBits<48&&0==(15&J.windowBits)&&(J.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new C,this.strm.avail_out=0;var W=l.inflateInit2(this.strm,J.windowBits);if(W!==p.Z_OK)throw new Error(v[W]);this.header=new D,l.inflateGetHeader(this.strm,this.header)}function B(U,J){var W=new P(J);if(W.push(U,!0),W.err)throw W.msg||v[W.err];return W.result}P.prototype.push=function(U,J){var W,re,he,ie,ae,Me,Ce=this.strm,Le=this.options.chunkSize,Ue=this.options.dictionary,ce=!1;if(this.ended)return!1;re=J===~~J?J:!0===J?p.Z_FINISH:p.Z_NO_FLUSH,Ce.input="string"==typeof U?_.binstring2buf(U):"[object ArrayBuffer]"===I.call(U)?new Uint8Array(U):U,Ce.next_in=0,Ce.avail_in=Ce.input.length;do{if(0===Ce.avail_out&&(Ce.output=new d.Buf8(Le),Ce.next_out=0,Ce.avail_out=Le),(W=l.inflate(Ce,p.Z_NO_FLUSH))===p.Z_NEED_DICT&&Ue&&(Me="string"==typeof Ue?_.string2buf(Ue):"[object ArrayBuffer]"===I.call(Ue)?new Uint8Array(Ue):Ue,W=l.inflateSetDictionary(this.strm,Me)),W===p.Z_BUF_ERROR&&!0===ce&&(W=p.Z_OK,ce=!1),W!==p.Z_STREAM_END&&W!==p.Z_OK)return this.onEnd(W),!(this.ended=!0);Ce.next_out&&(0!==Ce.avail_out&&W!==p.Z_STREAM_END&&(0!==Ce.avail_in||re!==p.Z_FINISH&&re!==p.Z_SYNC_FLUSH)||("string"===this.options.to?(he=_.utf8border(Ce.output,Ce.next_out),ie=Ce.next_out-he,ae=_.buf2string(Ce.output,he),Ce.next_out=ie,Ce.avail_out=Le-ie,ie&&d.arraySet(Ce.output,Ce.output,he,ie,0),this.onData(ae)):this.onData(d.shrinkBuf(Ce.output,Ce.next_out)))),0===Ce.avail_in&&0===Ce.avail_out&&(ce=!0)}while((0<Ce.avail_in||0===Ce.avail_out)&&W!==p.Z_STREAM_END);return W===p.Z_STREAM_END&&(re=p.Z_FINISH),re===p.Z_FINISH?(W=l.inflateEnd(this.strm),this.onEnd(W),this.ended=!0,W===p.Z_OK):re!==p.Z_SYNC_FLUSH||(this.onEnd(p.Z_OK),!(Ce.avail_out=0))},P.prototype.onData=function(U){this.chunks.push(U)},P.prototype.onEnd=function(U){U===p.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):d.flattenChunks(this.chunks)),this.chunks=[],this.err=U,this.msg=this.strm.msg},y.Inflate=P,y.inflate=B,y.inflateRaw=function(U,J){return(J=J||{}).raw=!0,B(U,J)},y.ungzip=B},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(G,A,y){"use strict";var l="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;y.assign=function(p){for(var v=Array.prototype.slice.call(arguments,1);v.length;){var C=v.shift();if(C){if("object"!=typeof C)throw new TypeError(C+"must be non-object");for(var D in C)C.hasOwnProperty(D)&&(p[D]=C[D])}}return p},y.shrinkBuf=function(p,v){return p.length===v?p:p.subarray?p.subarray(0,v):(p.length=v,p)};var d={arraySet:function(p,v,C,D,I){if(v.subarray&&p.subarray)p.set(v.subarray(C,C+D),I);else for(var P=0;P<D;P++)p[I+P]=v[C+P]},flattenChunks:function(p){var v,C,D,I,P,B;for(v=D=0,C=p.length;v<C;v++)D+=p[v].length;for(B=new Uint8Array(D),v=I=0,C=p.length;v<C;v++)B.set(P=p[v],I),I+=P.length;return B}},_={arraySet:function(p,v,C,D,I){for(var P=0;P<D;P++)p[I+P]=v[C+P]},flattenChunks:function(p){return[].concat.apply([],p)}};y.setTyped=function(p){p?(y.Buf8=Uint8Array,y.Buf16=Uint16Array,y.Buf32=Int32Array,y.assign(y,d)):(y.Buf8=Array,y.Buf16=Array,y.Buf32=Array,y.assign(y,_))},y.setTyped(l)},{}],42:[function(G,A,y){"use strict";var l=G("./common"),d=!0,_=!0;try{String.fromCharCode.apply(null,[0])}catch(D){d=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(D){_=!1}for(var p=new l.Buf8(256),v=0;v<256;v++)p[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;function C(D,I){if(I<65537&&(D.subarray&&_||!D.subarray&&d))return String.fromCharCode.apply(null,l.shrinkBuf(D,I));for(var P="",B=0;B<I;B++)P+=String.fromCharCode(D[B]);return P}p[254]=p[254]=1,y.string2buf=function(D){var I,P,B,U,J,W=D.length,re=0;for(U=0;U<W;U++)55296==(64512&(P=D.charCodeAt(U)))&&U+1<W&&56320==(64512&(B=D.charCodeAt(U+1)))&&(P=65536+(P-55296<<10)+(B-56320),U++),re+=P<128?1:P<2048?2:P<65536?3:4;for(I=new l.Buf8(re),U=J=0;J<re;U++)55296==(64512&(P=D.charCodeAt(U)))&&U+1<W&&56320==(64512&(B=D.charCodeAt(U+1)))&&(P=65536+(P-55296<<10)+(B-56320),U++),P<128?I[J++]=P:(P<2048?I[J++]=192|P>>>6:(P<65536?I[J++]=224|P>>>12:(I[J++]=240|P>>>18,I[J++]=128|P>>>12&63),I[J++]=128|P>>>6&63),I[J++]=128|63&P);return I},y.buf2binstring=function(D){return C(D,D.length)},y.binstring2buf=function(D){for(var I=new l.Buf8(D.length),P=0,B=I.length;P<B;P++)I[P]=D.charCodeAt(P);return I},y.buf2string=function(D,I){var P,B,U,J,W=I||D.length,re=new Array(2*W);for(P=B=0;P<W;)if((U=D[P++])<128)re[B++]=U;else if(4<(J=p[U]))re[B++]=65533,P+=J-1;else{for(U&=2===J?31:3===J?15:7;1<J&&P<W;)U=U<<6|63&D[P++],J--;1<J?re[B++]=65533:U<65536?re[B++]=U:(re[B++]=55296|(U-=65536)>>10&1023,re[B++]=56320|1023&U)}return C(re,B)},y.utf8border=function(D,I){var P;for((I=I||D.length)>D.length&&(I=D.length),P=I-1;0<=P&&128==(192&D[P]);)P--;return P<0||0===P?I:P+p[D[P]]>I?P:I}},{"./common":41}],43:[function(G,A,y){"use strict";A.exports=function(l,d,_,p){for(var v=65535&l|0,C=l>>>16&65535|0,D=0;0!==_;){for(_-=D=2e3<_?2e3:_;C=C+(v=v+d[p++]|0)|0,--D;);v%=65521,C%=65521}return v|C<<16|0}},{}],44:[function(G,A,y){"use strict";A.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(G,A,y){"use strict";var l=function(){for(var d,_=[],p=0;p<256;p++){d=p;for(var v=0;v<8;v++)d=1&d?3988292384^d>>>1:d>>>1;_[p]=d}return _}();A.exports=function(d,_,p,v){var C=l,D=v+p;d^=-1;for(var I=v;I<D;I++)d=d>>>8^C[255&(d^_[I])];return-1^d}},{}],46:[function(G,A,y){"use strict";var l,d=G("../utils/common"),_=G("./trees"),p=G("./adler32"),v=G("./crc32"),C=G("./messages"),B=-2,ce=258,lt=262;function Yn(Fe,Fn){return Fe.msg=C[Fn],Fn}function Jt(Fe){return(Fe<<1)-(4<Fe?9:0)}function xn(Fe){for(var Fn=Fe.length;0<=--Fn;)Fe[Fn]=0}function Pt(Fe){var Fn=Fe.state,_n=Fn.pending;_n>Fe.avail_out&&(_n=Fe.avail_out),0!==_n&&(d.arraySet(Fe.output,Fn.pending_buf,Fn.pending_out,_n,Fe.next_out),Fe.next_out+=_n,Fn.pending_out+=_n,Fe.total_out+=_n,Fe.avail_out-=_n,Fn.pending-=_n,0===Fn.pending&&(Fn.pending_out=0))}function Lt(Fe,Fn){_._tr_flush_block(Fe,0<=Fe.block_start?Fe.block_start:-1,Fe.strstart-Fe.block_start,Fn),Fe.block_start=Fe.strstart,Pt(Fe.strm)}function Xn(Fe,Fn){Fe.pending_buf[Fe.pending++]=Fn}function ni(Fe,Fn){Fe.pending_buf[Fe.pending++]=Fn>>>8&255,Fe.pending_buf[Fe.pending++]=255&Fn}function en(Fe,Fn){var _n,dt,nt=Fe.max_chain_length,zt=Fe.strstart,on=Fe.prev_length,Nn=Fe.nice_match,an=Fe.strstart>Fe.w_size-lt?Fe.strstart-(Fe.w_size-lt):0,hi=Fe.window,Oi=Fe.w_mask,mi=Fe.prev,fr=Fe.strstart+ce,qs=hi[zt+on-1],Sr=hi[zt+on];Fe.prev_length>=Fe.good_match&&(nt>>=2),Nn>Fe.lookahead&&(Nn=Fe.lookahead);do{if(hi[(_n=Fn)+on]===Sr&&hi[_n+on-1]===qs&&hi[_n]===hi[zt]&&hi[++_n]===hi[zt+1]){zt+=2,_n++;do{}while(hi[++zt]===hi[++_n]&&hi[++zt]===hi[++_n]&&hi[++zt]===hi[++_n]&&hi[++zt]===hi[++_n]&&hi[++zt]===hi[++_n]&&hi[++zt]===hi[++_n]&&hi[++zt]===hi[++_n]&&hi[++zt]===hi[++_n]&&zt<fr);if(dt=ce-(fr-zt),zt=fr-ce,on<dt){if(Fe.match_start=Fn,Nn<=(on=dt))break;qs=hi[zt+on-1],Sr=hi[zt+on]}}}while((Fn=mi[Fn&Oi])>an&&0!=--nt);return on<=Fe.lookahead?on:Fe.lookahead}function gr(Fe){var Fn,_n,dt,nt,zt,on,Nn,an,hi,Oi,mi=Fe.w_size;do{if(nt=Fe.window_size-Fe.lookahead-Fe.strstart,Fe.strstart>=mi+(mi-lt)){for(d.arraySet(Fe.window,Fe.window,mi,mi,0),Fe.match_start-=mi,Fe.strstart-=mi,Fe.block_start-=mi,Fn=_n=Fe.hash_size;dt=Fe.head[--Fn],Fe.head[Fn]=mi<=dt?dt-mi:0,--_n;);for(Fn=_n=mi;dt=Fe.prev[--Fn],Fe.prev[Fn]=mi<=dt?dt-mi:0,--_n;);nt+=mi}if(0===Fe.strm.avail_in)break;if(Nn=Fe.window,an=Fe.strstart+Fe.lookahead,Oi=void 0,(hi=nt)<(Oi=(on=Fe.strm).avail_in)&&(Oi=hi),_n=0===Oi?0:(on.avail_in-=Oi,d.arraySet(Nn,on.input,on.next_in,Oi,an),1===on.state.wrap?on.adler=p(on.adler,Nn,Oi,an):2===on.state.wrap&&(on.adler=v(on.adler,Nn,Oi,an)),on.next_in+=Oi,on.total_in+=Oi,Oi),Fe.lookahead+=_n,Fe.lookahead+Fe.insert>=3)for(Fe.ins_h=Fe.window[zt=Fe.strstart-Fe.insert],Fe.ins_h=(Fe.ins_h<<Fe.hash_shift^Fe.window[zt+1])&Fe.hash_mask;Fe.insert&&(Fe.ins_h=(Fe.ins_h<<Fe.hash_shift^Fe.window[zt+3-1])&Fe.hash_mask,Fe.prev[zt&Fe.w_mask]=Fe.head[Fe.ins_h],Fe.head[Fe.ins_h]=zt,zt++,Fe.insert--,!(Fe.lookahead+Fe.insert<3)););}while(Fe.lookahead<lt&&0!==Fe.strm.avail_in)}function zi(Fe,Fn){for(var _n,dt;;){if(Fe.lookahead<lt){if(gr(Fe),Fe.lookahead<lt&&0===Fn)return 1;if(0===Fe.lookahead)break}if(_n=0,Fe.lookahead>=3&&(Fe.ins_h=(Fe.ins_h<<Fe.hash_shift^Fe.window[Fe.strstart+3-1])&Fe.hash_mask,_n=Fe.prev[Fe.strstart&Fe.w_mask]=Fe.head[Fe.ins_h],Fe.head[Fe.ins_h]=Fe.strstart),0!==_n&&Fe.strstart-_n<=Fe.w_size-lt&&(Fe.match_length=en(Fe,_n)),Fe.match_length>=3)if(dt=_._tr_tally(Fe,Fe.strstart-Fe.match_start,Fe.match_length-3),Fe.lookahead-=Fe.match_length,Fe.match_length<=Fe.max_lazy_match&&Fe.lookahead>=3){for(Fe.match_length--;Fe.strstart++,Fe.ins_h=(Fe.ins_h<<Fe.hash_shift^Fe.window[Fe.strstart+3-1])&Fe.hash_mask,_n=Fe.prev[Fe.strstart&Fe.w_mask]=Fe.head[Fe.ins_h],Fe.head[Fe.ins_h]=Fe.strstart,0!=--Fe.match_length;);Fe.strstart++}else Fe.strstart+=Fe.match_length,Fe.match_length=0,Fe.ins_h=Fe.window[Fe.strstart],Fe.ins_h=(Fe.ins_h<<Fe.hash_shift^Fe.window[Fe.strstart+1])&Fe.hash_mask;else dt=_._tr_tally(Fe,0,Fe.window[Fe.strstart]),Fe.lookahead--,Fe.strstart++;if(dt&&(Lt(Fe,!1),0===Fe.strm.avail_out))return 1}return Fe.insert=Fe.strstart<2?Fe.strstart:2,4===Fn?(Lt(Fe,!0),0===Fe.strm.avail_out?3:4):Fe.last_lit&&(Lt(Fe,!1),0===Fe.strm.avail_out)?1:2}function En(Fe,Fn){for(var _n,dt,nt;;){if(Fe.lookahead<lt){if(gr(Fe),Fe.lookahead<lt&&0===Fn)return 1;if(0===Fe.lookahead)break}if(_n=0,Fe.lookahead>=3&&(Fe.ins_h=(Fe.ins_h<<Fe.hash_shift^Fe.window[Fe.strstart+3-1])&Fe.hash_mask,_n=Fe.prev[Fe.strstart&Fe.w_mask]=Fe.head[Fe.ins_h],Fe.head[Fe.ins_h]=Fe.strstart),Fe.prev_length=Fe.match_length,Fe.prev_match=Fe.match_start,Fe.match_length=2,0!==_n&&Fe.prev_length<Fe.max_lazy_match&&Fe.strstart-_n<=Fe.w_size-lt&&(Fe.match_length=en(Fe,_n),Fe.match_length<=5&&(1===Fe.strategy||3===Fe.match_length&&4096<Fe.strstart-Fe.match_start)&&(Fe.match_length=2)),Fe.prev_length>=3&&Fe.match_length<=Fe.prev_length){for(nt=Fe.strstart+Fe.lookahead-3,dt=_._tr_tally(Fe,Fe.strstart-1-Fe.prev_match,Fe.prev_length-3),Fe.lookahead-=Fe.prev_length-1,Fe.prev_length-=2;++Fe.strstart<=nt&&(Fe.ins_h=(Fe.ins_h<<Fe.hash_shift^Fe.window[Fe.strstart+3-1])&Fe.hash_mask,_n=Fe.prev[Fe.strstart&Fe.w_mask]=Fe.head[Fe.ins_h],Fe.head[Fe.ins_h]=Fe.strstart),0!=--Fe.prev_length;);if(Fe.match_available=0,Fe.match_length=2,Fe.strstart++,dt&&(Lt(Fe,!1),0===Fe.strm.avail_out))return 1}else if(Fe.match_available){if((dt=_._tr_tally(Fe,0,Fe.window[Fe.strstart-1]))&&Lt(Fe,!1),Fe.strstart++,Fe.lookahead--,0===Fe.strm.avail_out)return 1}else Fe.match_available=1,Fe.strstart++,Fe.lookahead--}return Fe.match_available&&(dt=_._tr_tally(Fe,0,Fe.window[Fe.strstart-1]),Fe.match_available=0),Fe.insert=Fe.strstart<2?Fe.strstart:2,4===Fn?(Lt(Fe,!0),0===Fe.strm.avail_out?3:4):Fe.last_lit&&(Lt(Fe,!1),0===Fe.strm.avail_out)?1:2}function Dn(Fe,Fn,_n,dt,nt){this.good_length=Fe,this.max_lazy=Fn,this.nice_length=_n,this.max_chain=dt,this.func=nt}function ji(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new d.Buf16(1146),this.dyn_dtree=new d.Buf16(122),this.bl_tree=new d.Buf16(78),xn(this.dyn_ltree),xn(this.dyn_dtree),xn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new d.Buf16(16),this.heap=new d.Buf16(573),xn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new d.Buf16(573),xn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ii(Fe){var Fn;return Fe&&Fe.state?(Fe.total_in=Fe.total_out=0,Fe.data_type=2,(Fn=Fe.state).pending=0,Fn.pending_out=0,Fn.wrap<0&&(Fn.wrap=-Fn.wrap),Fn.status=Fn.wrap?42:113,Fe.adler=2===Fn.wrap?0:1,Fn.last_flush=0,_._tr_init(Fn),0):Yn(Fe,B)}function Os(Fe){var _n,Fn=ii(Fe);return 0===Fn&&((_n=Fe.state).window_size=2*_n.w_size,xn(_n.head),_n.max_lazy_match=l[_n.level].max_lazy,_n.good_match=l[_n.level].good_length,_n.nice_match=l[_n.level].nice_length,_n.max_chain_length=l[_n.level].max_chain,_n.strstart=0,_n.block_start=0,_n.lookahead=0,_n.insert=0,_n.match_length=_n.prev_length=2,_n.match_available=0,_n.ins_h=0),Fn}function dr(Fe,Fn,_n,dt,nt,zt){if(!Fe)return B;var on=1;if(-1===Fn&&(Fn=6),dt<0?(on=0,dt=-dt):15<dt&&(on=2,dt-=16),nt<1||9<nt||8!==_n||dt<8||15<dt||Fn<0||9<Fn||zt<0||4<zt)return Yn(Fe,B);8===dt&&(dt=9);var Nn=new ji;return(Fe.state=Nn).strm=Fe,Nn.wrap=on,Nn.gzhead=null,Nn.w_bits=dt,Nn.w_size=1<<Nn.w_bits,Nn.w_mask=Nn.w_size-1,Nn.hash_bits=nt+7,Nn.hash_size=1<<Nn.hash_bits,Nn.hash_mask=Nn.hash_size-1,Nn.hash_shift=~~((Nn.hash_bits+3-1)/3),Nn.window=new d.Buf8(2*Nn.w_size),Nn.head=new d.Buf16(Nn.hash_size),Nn.prev=new d.Buf16(Nn.w_size),Nn.lit_bufsize=1<<nt+6,Nn.pending_buf_size=4*Nn.lit_bufsize,Nn.pending_buf=new d.Buf8(Nn.pending_buf_size),Nn.d_buf=1*Nn.lit_bufsize,Nn.l_buf=3*Nn.lit_bufsize,Nn.level=Fn,Nn.strategy=zt,Nn.method=_n,Os(Fe)}l=[new Dn(0,0,0,0,function(Fe,Fn){var _n=65535;for(_n>Fe.pending_buf_size-5&&(_n=Fe.pending_buf_size-5);;){if(Fe.lookahead<=1){if(gr(Fe),0===Fe.lookahead&&0===Fn)return 1;if(0===Fe.lookahead)break}Fe.strstart+=Fe.lookahead,Fe.lookahead=0;var dt=Fe.block_start+_n;if((0===Fe.strstart||Fe.strstart>=dt)&&(Fe.lookahead=Fe.strstart-dt,Fe.strstart=dt,Lt(Fe,!1),0===Fe.strm.avail_out)||Fe.strstart-Fe.block_start>=Fe.w_size-lt&&(Lt(Fe,!1),0===Fe.strm.avail_out))return 1}return Fe.insert=0,4===Fn?(Lt(Fe,!0),0===Fe.strm.avail_out?3:4):(Fe.strstart>Fe.block_start&&Lt(Fe,!1),1)}),new Dn(4,4,8,4,zi),new Dn(4,5,16,8,zi),new Dn(4,6,32,32,zi),new Dn(4,4,16,16,En),new Dn(8,16,32,32,En),new Dn(8,16,128,128,En),new Dn(8,32,128,256,En),new Dn(32,128,258,1024,En),new Dn(32,258,258,4096,En)],y.deflateInit=function(Fe,Fn){return dr(Fe,Fn,8,15,8,0)},y.deflateInit2=dr,y.deflateReset=Os,y.deflateResetKeep=ii,y.deflateSetHeader=function(Fe,Fn){return Fe&&Fe.state?2!==Fe.state.wrap?B:(Fe.state.gzhead=Fn,0):B},y.deflate=function(Fe,Fn){var _n,dt,nt,zt;if(!Fe||!Fe.state||5<Fn||Fn<0)return Fe?Yn(Fe,B):B;if(dt=Fe.state,!Fe.output||!Fe.input&&0!==Fe.avail_in||666===dt.status&&4!==Fn)return Yn(Fe,0===Fe.avail_out?-5:B);if(dt.strm=Fe,_n=dt.last_flush,dt.last_flush=Fn,42===dt.status)if(2===dt.wrap)Fe.adler=0,Xn(dt,31),Xn(dt,139),Xn(dt,8),dt.gzhead?(Xn(dt,(dt.gzhead.text?1:0)+(dt.gzhead.hcrc?2:0)+(dt.gzhead.extra?4:0)+(dt.gzhead.name?8:0)+(dt.gzhead.comment?16:0)),Xn(dt,255&dt.gzhead.time),Xn(dt,dt.gzhead.time>>8&255),Xn(dt,dt.gzhead.time>>16&255),Xn(dt,dt.gzhead.time>>24&255),Xn(dt,9===dt.level?2:2<=dt.strategy||dt.level<2?4:0),Xn(dt,255&dt.gzhead.os),dt.gzhead.extra&&dt.gzhead.extra.length&&(Xn(dt,255&dt.gzhead.extra.length),Xn(dt,dt.gzhead.extra.length>>8&255)),dt.gzhead.hcrc&&(Fe.adler=v(Fe.adler,dt.pending_buf,dt.pending,0)),dt.gzindex=0,dt.status=69):(Xn(dt,0),Xn(dt,0),Xn(dt,0),Xn(dt,0),Xn(dt,0),Xn(dt,9===dt.level?2:2<=dt.strategy||dt.level<2?4:0),Xn(dt,3),dt.status=113);else{var on=8+(dt.w_bits-8<<4)<<8;on|=(2<=dt.strategy||dt.level<2?0:dt.level<6?1:6===dt.level?2:3)<<6,0!==dt.strstart&&(on|=32),on+=31-on%31,dt.status=113,ni(dt,on),0!==dt.strstart&&(ni(dt,Fe.adler>>>16),ni(dt,65535&Fe.adler)),Fe.adler=1}if(69===dt.status)if(dt.gzhead.extra){for(nt=dt.pending;dt.gzindex<(65535&dt.gzhead.extra.length)&&(dt.pending!==dt.pending_buf_size||(dt.gzhead.hcrc&&dt.pending>nt&&(Fe.adler=v(Fe.adler,dt.pending_buf,dt.pending-nt,nt)),Pt(Fe),nt=dt.pending,dt.pending!==dt.pending_buf_size));)Xn(dt,255&dt.gzhead.extra[dt.gzindex]),dt.gzindex++;dt.gzhead.hcrc&&dt.pending>nt&&(Fe.adler=v(Fe.adler,dt.pending_buf,dt.pending-nt,nt)),dt.gzindex===dt.gzhead.extra.length&&(dt.gzindex=0,dt.status=73)}else dt.status=73;if(73===dt.status)if(dt.gzhead.name){nt=dt.pending;do{if(dt.pending===dt.pending_buf_size&&(dt.gzhead.hcrc&&dt.pending>nt&&(Fe.adler=v(Fe.adler,dt.pending_buf,dt.pending-nt,nt)),Pt(Fe),nt=dt.pending,dt.pending===dt.pending_buf_size)){zt=1;break}zt=dt.gzindex<dt.gzhead.name.length?255&dt.gzhead.name.charCodeAt(dt.gzindex++):0,Xn(dt,zt)}while(0!==zt);dt.gzhead.hcrc&&dt.pending>nt&&(Fe.adler=v(Fe.adler,dt.pending_buf,dt.pending-nt,nt)),0===zt&&(dt.gzindex=0,dt.status=91)}else dt.status=91;if(91===dt.status)if(dt.gzhead.comment){nt=dt.pending;do{if(dt.pending===dt.pending_buf_size&&(dt.gzhead.hcrc&&dt.pending>nt&&(Fe.adler=v(Fe.adler,dt.pending_buf,dt.pending-nt,nt)),Pt(Fe),nt=dt.pending,dt.pending===dt.pending_buf_size)){zt=1;break}zt=dt.gzindex<dt.gzhead.comment.length?255&dt.gzhead.comment.charCodeAt(dt.gzindex++):0,Xn(dt,zt)}while(0!==zt);dt.gzhead.hcrc&&dt.pending>nt&&(Fe.adler=v(Fe.adler,dt.pending_buf,dt.pending-nt,nt)),0===zt&&(dt.status=103)}else dt.status=103;if(103===dt.status&&(dt.gzhead.hcrc?(dt.pending+2>dt.pending_buf_size&&Pt(Fe),dt.pending+2<=dt.pending_buf_size&&(Xn(dt,255&Fe.adler),Xn(dt,Fe.adler>>8&255),Fe.adler=0,dt.status=113)):dt.status=113),0!==dt.pending){if(Pt(Fe),0===Fe.avail_out)return dt.last_flush=-1,0}else if(0===Fe.avail_in&&Jt(Fn)<=Jt(_n)&&4!==Fn)return Yn(Fe,-5);if(666===dt.status&&0!==Fe.avail_in)return Yn(Fe,-5);if(0!==Fe.avail_in||0!==dt.lookahead||0!==Fn&&666!==dt.status){var Nn=2===dt.strategy?function(an,hi){for(var Oi;;){if(0===an.lookahead&&(gr(an),0===an.lookahead)){if(0===hi)return 1;break}if(an.match_length=0,Oi=_._tr_tally(an,0,an.window[an.strstart]),an.lookahead--,an.strstart++,Oi&&(Lt(an,!1),0===an.strm.avail_out))return 1}return an.insert=0,4===hi?(Lt(an,!0),0===an.strm.avail_out?3:4):an.last_lit&&(Lt(an,!1),0===an.strm.avail_out)?1:2}(dt,Fn):3===dt.strategy?function(an,hi){for(var Oi,mi,fr,qs,Sr=an.window;;){if(an.lookahead<=ce){if(gr(an),an.lookahead<=ce&&0===hi)return 1;if(0===an.lookahead)break}if(an.match_length=0,an.lookahead>=3&&0<an.strstart&&(mi=Sr[fr=an.strstart-1])===Sr[++fr]&&mi===Sr[++fr]&&mi===Sr[++fr]){qs=an.strstart+ce;do{}while(mi===Sr[++fr]&&mi===Sr[++fr]&&mi===Sr[++fr]&&mi===Sr[++fr]&&mi===Sr[++fr]&&mi===Sr[++fr]&&mi===Sr[++fr]&&mi===Sr[++fr]&&fr<qs);an.match_length=ce-(qs-fr),an.match_length>an.lookahead&&(an.match_length=an.lookahead)}if(an.match_length>=3?(Oi=_._tr_tally(an,1,an.match_length-3),an.lookahead-=an.match_length,an.strstart+=an.match_length,an.match_length=0):(Oi=_._tr_tally(an,0,an.window[an.strstart]),an.lookahead--,an.strstart++),Oi&&(Lt(an,!1),0===an.strm.avail_out))return 1}return an.insert=0,4===hi?(Lt(an,!0),0===an.strm.avail_out?3:4):an.last_lit&&(Lt(an,!1),0===an.strm.avail_out)?1:2}(dt,Fn):l[dt.level].func(dt,Fn);if(3!==Nn&&4!==Nn||(dt.status=666),1===Nn||3===Nn)return 0===Fe.avail_out&&(dt.last_flush=-1),0;if(2===Nn&&(1===Fn?_._tr_align(dt):5!==Fn&&(_._tr_stored_block(dt,0,0,!1),3===Fn&&(xn(dt.head),0===dt.lookahead&&(dt.strstart=0,dt.block_start=0,dt.insert=0))),Pt(Fe),0===Fe.avail_out))return dt.last_flush=-1,0}return 4!==Fn?0:dt.wrap<=0?1:(2===dt.wrap?(Xn(dt,255&Fe.adler),Xn(dt,Fe.adler>>8&255),Xn(dt,Fe.adler>>16&255),Xn(dt,Fe.adler>>24&255),Xn(dt,255&Fe.total_in),Xn(dt,Fe.total_in>>8&255),Xn(dt,Fe.total_in>>16&255),Xn(dt,Fe.total_in>>24&255)):(ni(dt,Fe.adler>>>16),ni(dt,65535&Fe.adler)),Pt(Fe),0<dt.wrap&&(dt.wrap=-dt.wrap),0!==dt.pending?0:1)},y.deflateEnd=function(Fe){var Fn;return Fe&&Fe.state?42!==(Fn=Fe.state.status)&&69!==Fn&&73!==Fn&&91!==Fn&&103!==Fn&&113!==Fn&&666!==Fn?Yn(Fe,B):(Fe.state=null,113===Fn?Yn(Fe,-3):0):B},y.deflateSetDictionary=function(Fe,Fn){var _n,dt,nt,zt,on,Nn,an,hi,Oi=Fn.length;if(!Fe||!Fe.state||2===(zt=(_n=Fe.state).wrap)||1===zt&&42!==_n.status||_n.lookahead)return B;for(1===zt&&(Fe.adler=p(Fe.adler,Fn,Oi,0)),_n.wrap=0,Oi>=_n.w_size&&(0===zt&&(xn(_n.head),_n.strstart=0,_n.block_start=0,_n.insert=0),hi=new d.Buf8(_n.w_size),d.arraySet(hi,Fn,Oi-_n.w_size,_n.w_size,0),Fn=hi,Oi=_n.w_size),on=Fe.avail_in,Nn=Fe.next_in,an=Fe.input,Fe.avail_in=Oi,Fe.next_in=0,Fe.input=Fn,gr(_n);_n.lookahead>=3;){for(dt=_n.strstart,nt=_n.lookahead-2;_n.ins_h=(_n.ins_h<<_n.hash_shift^_n.window[dt+3-1])&_n.hash_mask,_n.prev[dt&_n.w_mask]=_n.head[_n.ins_h],_n.head[_n.ins_h]=dt,dt++,--nt;);_n.strstart=dt,_n.lookahead=2,gr(_n)}return _n.strstart+=_n.lookahead,_n.block_start=_n.strstart,_n.insert=_n.lookahead,_n.lookahead=0,_n.match_length=_n.prev_length=2,_n.match_available=0,Fe.next_in=Nn,Fe.input=an,Fe.avail_in=on,_n.wrap=zt,0},y.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(G,A,y){"use strict";A.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(G,A,y){"use strict";A.exports=function(l,d){var _,p,v,C,D,I,P,B,U,J,W,re,he,ie,ae,Me,Ce,Le,Ue,ce,lt,qe,ut,De,je;De=l.input,v=(p=l.next_in)+(l.avail_in-5),je=l.output,D=(C=l.next_out)-(d-l.avail_out),I=C+(l.avail_out-257),P=(_=l.state).dmax,B=_.wsize,U=_.whave,J=_.wnext,W=_.window,re=_.hold,he=_.bits,ie=_.lencode,ae=_.distcode,Me=(1<<_.lenbits)-1,Ce=(1<<_.distbits)-1;e:do{he<15&&(re+=De[p++]<<he,re+=De[p++]<<(he+=8),he+=8),Le=ie[re&Me];t:for(;;){if(re>>>=Ue=Le>>>24,he-=Ue,0==(Ue=Le>>>16&255))je[C++]=65535&Le;else{if(!(16&Ue)){if(0==(64&Ue)){Le=ie[(65535&Le)+(re&(1<<Ue)-1)];continue t}if(32&Ue){_.mode=12;break e}l.msg="invalid literal/length code",_.mode=30;break e}ce=65535&Le,(Ue&=15)&&(he<Ue&&(re+=De[p++]<<he,he+=8),ce+=re&(1<<Ue)-1,re>>>=Ue,he-=Ue),he<15&&(re+=De[p++]<<he,re+=De[p++]<<(he+=8),he+=8),Le=ae[re&Ce];n:for(;;){if(re>>>=Ue=Le>>>24,he-=Ue,!(16&(Ue=Le>>>16&255))){if(0==(64&Ue)){Le=ae[(65535&Le)+(re&(1<<Ue)-1)];continue n}l.msg="invalid distance code",_.mode=30;break e}if(lt=65535&Le,he<(Ue&=15)&&(re+=De[p++]<<he,(he+=8)<Ue&&(re+=De[p++]<<he,he+=8)),P<(lt+=re&(1<<Ue)-1)){l.msg="invalid distance too far back",_.mode=30;break e}if(re>>>=Ue,he-=Ue,(Ue=C-D)<lt){if(U<(Ue=lt-Ue)&&_.sane){l.msg="invalid distance too far back",_.mode=30;break e}if(ut=W,(qe=0)===J){if(qe+=B-Ue,Ue<ce){for(ce-=Ue;je[C++]=W[qe++],--Ue;);qe=C-lt,ut=je}}else if(J<Ue){if(qe+=B+J-Ue,(Ue-=J)<ce){for(ce-=Ue;je[C++]=W[qe++],--Ue;);if(qe=0,J<ce){for(ce-=Ue=J;je[C++]=W[qe++],--Ue;);qe=C-lt,ut=je}}}else if(qe+=J-Ue,Ue<ce){for(ce-=Ue;je[C++]=W[qe++],--Ue;);qe=C-lt,ut=je}for(;2<ce;)je[C++]=ut[qe++],je[C++]=ut[qe++],je[C++]=ut[qe++],ce-=3;ce&&(je[C++]=ut[qe++],1<ce&&(je[C++]=ut[qe++]))}else{for(qe=C-lt;je[C++]=je[qe++],je[C++]=je[qe++],je[C++]=je[qe++],2<(ce-=3););ce&&(je[C++]=je[qe++],1<ce&&(je[C++]=je[qe++]))}break}}break}}while(p<v&&C<I);p-=ce=he>>3,re&=(1<<(he-=ce<<3))-1,l.next_in=p,l.next_out=C,l.avail_in=p<v?v-p+5:5-(p-v),l.avail_out=C<I?I-C+257:257-(C-I),_.hold=re,_.bits=he}},{}],49:[function(G,A,y){"use strict";var l=G("../utils/common"),d=G("./adler32"),_=G("./crc32"),p=G("./inffast"),v=G("./inftrees"),P=-2;function W(qe){return(qe>>>24&255)+(qe>>>8&65280)+((65280&qe)<<8)+((255&qe)<<24)}function re(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function he(qe){var ut;return qe&&qe.state?(qe.total_in=qe.total_out=(ut=qe.state).total=0,qe.msg="",ut.wrap&&(qe.adler=1&ut.wrap),ut.mode=1,ut.last=0,ut.havedict=0,ut.dmax=32768,ut.head=null,ut.hold=0,ut.bits=0,ut.lencode=ut.lendyn=new l.Buf32(852),ut.distcode=ut.distdyn=new l.Buf32(592),ut.sane=1,ut.back=-1,0):P}function ie(qe){var ut;return qe&&qe.state?((ut=qe.state).wsize=0,ut.whave=0,ut.wnext=0,he(qe)):P}function ae(qe,ut){var De,je;return qe&&qe.state?(je=qe.state,ut<0?(De=0,ut=-ut):(De=1+(ut>>4),ut<48&&(ut&=15)),ut&&(ut<8||15<ut)?P:(null!==je.window&&je.wbits!==ut&&(je.window=null),je.wrap=De,je.wbits=ut,ie(qe))):P}function Me(qe,ut){var De,je;return qe?(je=new re,(qe.state=je).window=null,0!==(De=ae(qe,ut))&&(qe.state=null),De):P}var Ce,Le,Ue=!0;function ce(qe){if(Ue){var ut;for(Ce=new l.Buf32(512),Le=new l.Buf32(32),ut=0;ut<144;)qe.lens[ut++]=8;for(;ut<256;)qe.lens[ut++]=9;for(;ut<280;)qe.lens[ut++]=7;for(;ut<288;)qe.lens[ut++]=8;for(v(1,qe.lens,0,288,Ce,0,qe.work,{bits:9}),ut=0;ut<32;)qe.lens[ut++]=5;v(2,qe.lens,0,32,Le,0,qe.work,{bits:5}),Ue=!1}qe.lencode=Ce,qe.lenbits=9,qe.distcode=Le,qe.distbits=5}function lt(qe,ut,De,je){var Wt,Xe=qe.state;return null===Xe.window&&(Xe.wsize=1<<Xe.wbits,Xe.wnext=0,Xe.whave=0,Xe.window=new l.Buf8(Xe.wsize)),je>=Xe.wsize?(l.arraySet(Xe.window,ut,De-Xe.wsize,Xe.wsize,0),Xe.wnext=0,Xe.whave=Xe.wsize):(je<(Wt=Xe.wsize-Xe.wnext)&&(Wt=je),l.arraySet(Xe.window,ut,De-je,Wt,Xe.wnext),(je-=Wt)?(l.arraySet(Xe.window,ut,De-je,je,0),Xe.wnext=je,Xe.whave=Xe.wsize):(Xe.wnext+=Wt,Xe.wnext===Xe.wsize&&(Xe.wnext=0),Xe.whave<Xe.wsize&&(Xe.whave+=Wt))),0}y.inflateReset=ie,y.inflateReset2=ae,y.inflateResetKeep=he,y.inflateInit=function(qe){return Me(qe,15)},y.inflateInit2=Me,y.inflate=function(qe,ut){var De,je,Wt,Xe,Yn,Jt,xn,Pt,Lt,Xn,ni,en,gr,zi,En,Dn,ji,ii,Os,dr,Fe,Fn,_n,dt,nt=0,zt=new l.Buf8(4),on=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!qe||!qe.state||!qe.output||!qe.input&&0!==qe.avail_in)return P;12===(De=qe.state).mode&&(De.mode=13),Yn=qe.next_out,Wt=qe.output,Xe=qe.next_in,je=qe.input,Pt=De.hold,Lt=De.bits,Xn=Jt=qe.avail_in,ni=xn=qe.avail_out,Fn=0;e:for(;;)switch(De.mode){case 1:if(0===De.wrap){De.mode=13;break}for(;Lt<16;){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}if(2&De.wrap&&35615===Pt){zt[De.check=0]=255&Pt,zt[1]=Pt>>>8&255,De.check=_(De.check,zt,2,0),Lt=Pt=0,De.mode=2;break}if(De.flags=0,De.head&&(De.head.done=!1),!(1&De.wrap)||(((255&Pt)<<8)+(Pt>>8))%31){qe.msg="incorrect header check",De.mode=30;break}if(8!=(15&Pt)){qe.msg="unknown compression method",De.mode=30;break}if(Lt-=4,Fe=8+(15&(Pt>>>=4)),0===De.wbits)De.wbits=Fe;else if(Fe>De.wbits){qe.msg="invalid window size",De.mode=30;break}De.dmax=1<<Fe,qe.adler=De.check=1,De.mode=512&Pt?10:12,Lt=Pt=0;break;case 2:for(;Lt<16;){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}if(De.flags=Pt,8!=(255&De.flags)){qe.msg="unknown compression method",De.mode=30;break}if(57344&De.flags){qe.msg="unknown header flags set",De.mode=30;break}De.head&&(De.head.text=Pt>>8&1),512&De.flags&&(zt[0]=255&Pt,zt[1]=Pt>>>8&255,De.check=_(De.check,zt,2,0)),Lt=Pt=0,De.mode=3;case 3:for(;Lt<32;){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}De.head&&(De.head.time=Pt),512&De.flags&&(zt[0]=255&Pt,zt[1]=Pt>>>8&255,zt[2]=Pt>>>16&255,zt[3]=Pt>>>24&255,De.check=_(De.check,zt,4,0)),Lt=Pt=0,De.mode=4;case 4:for(;Lt<16;){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}De.head&&(De.head.xflags=255&Pt,De.head.os=Pt>>8),512&De.flags&&(zt[0]=255&Pt,zt[1]=Pt>>>8&255,De.check=_(De.check,zt,2,0)),Lt=Pt=0,De.mode=5;case 5:if(1024&De.flags){for(;Lt<16;){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}De.length=Pt,De.head&&(De.head.extra_len=Pt),512&De.flags&&(zt[0]=255&Pt,zt[1]=Pt>>>8&255,De.check=_(De.check,zt,2,0)),Lt=Pt=0}else De.head&&(De.head.extra=null);De.mode=6;case 6:if(1024&De.flags&&(Jt<(en=De.length)&&(en=Jt),en&&(De.head&&(Fe=De.head.extra_len-De.length,De.head.extra||(De.head.extra=new Array(De.head.extra_len)),l.arraySet(De.head.extra,je,Xe,en,Fe)),512&De.flags&&(De.check=_(De.check,je,en,Xe)),Jt-=en,Xe+=en,De.length-=en),De.length))break e;De.length=0,De.mode=7;case 7:if(2048&De.flags){if(0===Jt)break e;for(en=0;Fe=je[Xe+en++],De.head&&Fe&&De.length<65536&&(De.head.name+=String.fromCharCode(Fe)),Fe&&en<Jt;);if(512&De.flags&&(De.check=_(De.check,je,en,Xe)),Jt-=en,Xe+=en,Fe)break e}else De.head&&(De.head.name=null);De.length=0,De.mode=8;case 8:if(4096&De.flags){if(0===Jt)break e;for(en=0;Fe=je[Xe+en++],De.head&&Fe&&De.length<65536&&(De.head.comment+=String.fromCharCode(Fe)),Fe&&en<Jt;);if(512&De.flags&&(De.check=_(De.check,je,en,Xe)),Jt-=en,Xe+=en,Fe)break e}else De.head&&(De.head.comment=null);De.mode=9;case 9:if(512&De.flags){for(;Lt<16;){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}if(Pt!==(65535&De.check)){qe.msg="header crc mismatch",De.mode=30;break}Lt=Pt=0}De.head&&(De.head.hcrc=De.flags>>9&1,De.head.done=!0),qe.adler=De.check=0,De.mode=12;break;case 10:for(;Lt<32;){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}qe.adler=De.check=W(Pt),Lt=Pt=0,De.mode=11;case 11:if(0===De.havedict)return qe.next_out=Yn,qe.avail_out=xn,qe.next_in=Xe,qe.avail_in=Jt,De.hold=Pt,De.bits=Lt,2;qe.adler=De.check=1,De.mode=12;case 12:if(5===ut||6===ut)break e;case 13:if(De.last){Pt>>>=7&Lt,Lt-=7&Lt,De.mode=27;break}for(;Lt<3;){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}switch(De.last=1&Pt,Lt-=1,3&(Pt>>>=1)){case 0:De.mode=14;break;case 1:if(ce(De),De.mode=20,6!==ut)break;Pt>>>=2,Lt-=2;break e;case 2:De.mode=17;break;case 3:qe.msg="invalid block type",De.mode=30}Pt>>>=2,Lt-=2;break;case 14:for(Pt>>>=7&Lt,Lt-=7&Lt;Lt<32;){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}if((65535&Pt)!=(Pt>>>16^65535)){qe.msg="invalid stored block lengths",De.mode=30;break}if(De.length=65535&Pt,Lt=Pt=0,De.mode=15,6===ut)break e;case 15:De.mode=16;case 16:if(en=De.length){if(Jt<en&&(en=Jt),xn<en&&(en=xn),0===en)break e;l.arraySet(Wt,je,Xe,en,Yn),Jt-=en,Xe+=en,xn-=en,Yn+=en,De.length-=en;break}De.mode=12;break;case 17:for(;Lt<14;){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}if(De.nlen=257+(31&Pt),Lt-=5,De.ndist=1+(31&(Pt>>>=5)),Lt-=5,De.ncode=4+(15&(Pt>>>=5)),Pt>>>=4,Lt-=4,286<De.nlen||30<De.ndist){qe.msg="too many length or distance symbols",De.mode=30;break}De.have=0,De.mode=18;case 18:for(;De.have<De.ncode;){for(;Lt<3;){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}De.lens[on[De.have++]]=7&Pt,Pt>>>=3,Lt-=3}for(;De.have<19;)De.lens[on[De.have++]]=0;if(De.lencode=De.lendyn,De.lenbits=7,Fn=v(0,De.lens,0,19,De.lencode,0,De.work,_n={bits:De.lenbits}),De.lenbits=_n.bits,Fn){qe.msg="invalid code lengths set",De.mode=30;break}De.have=0,De.mode=19;case 19:for(;De.have<De.nlen+De.ndist;){for(;Dn=(nt=De.lencode[Pt&(1<<De.lenbits)-1])>>>16&255,ji=65535&nt,!((En=nt>>>24)<=Lt);){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}if(ji<16)Pt>>>=En,Lt-=En,De.lens[De.have++]=ji;else{if(16===ji){for(dt=En+2;Lt<dt;){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}if(Pt>>>=En,Lt-=En,0===De.have){qe.msg="invalid bit length repeat",De.mode=30;break}Fe=De.lens[De.have-1],en=3+(3&Pt),Pt>>>=2,Lt-=2}else if(17===ji){for(dt=En+3;Lt<dt;){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}Lt-=En,Fe=0,en=3+(7&(Pt>>>=En)),Pt>>>=3,Lt-=3}else{for(dt=En+7;Lt<dt;){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}Lt-=En,Fe=0,en=11+(127&(Pt>>>=En)),Pt>>>=7,Lt-=7}if(De.have+en>De.nlen+De.ndist){qe.msg="invalid bit length repeat",De.mode=30;break}for(;en--;)De.lens[De.have++]=Fe}}if(30===De.mode)break;if(0===De.lens[256]){qe.msg="invalid code -- missing end-of-block",De.mode=30;break}if(De.lenbits=9,Fn=v(1,De.lens,0,De.nlen,De.lencode,0,De.work,_n={bits:De.lenbits}),De.lenbits=_n.bits,Fn){qe.msg="invalid literal/lengths set",De.mode=30;break}if(De.distbits=6,De.distcode=De.distdyn,Fn=v(2,De.lens,De.nlen,De.ndist,De.distcode,0,De.work,_n={bits:De.distbits}),De.distbits=_n.bits,Fn){qe.msg="invalid distances set",De.mode=30;break}if(De.mode=20,6===ut)break e;case 20:De.mode=21;case 21:if(6<=Jt&&258<=xn){qe.next_out=Yn,qe.avail_out=xn,qe.next_in=Xe,qe.avail_in=Jt,De.hold=Pt,De.bits=Lt,p(qe,ni),Yn=qe.next_out,Wt=qe.output,xn=qe.avail_out,Xe=qe.next_in,je=qe.input,Jt=qe.avail_in,Pt=De.hold,Lt=De.bits,12===De.mode&&(De.back=-1);break}for(De.back=0;Dn=(nt=De.lencode[Pt&(1<<De.lenbits)-1])>>>16&255,ji=65535&nt,!((En=nt>>>24)<=Lt);){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}if(Dn&&0==(240&Dn)){for(ii=En,Os=Dn,dr=ji;Dn=(nt=De.lencode[dr+((Pt&(1<<ii+Os)-1)>>ii)])>>>16&255,ji=65535&nt,!(ii+(En=nt>>>24)<=Lt);){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}Pt>>>=ii,Lt-=ii,De.back+=ii}if(Pt>>>=En,Lt-=En,De.back+=En,De.length=ji,0===Dn){De.mode=26;break}if(32&Dn){De.back=-1,De.mode=12;break}if(64&Dn){qe.msg="invalid literal/length code",De.mode=30;break}De.extra=15&Dn,De.mode=22;case 22:if(De.extra){for(dt=De.extra;Lt<dt;){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}De.length+=Pt&(1<<De.extra)-1,Pt>>>=De.extra,Lt-=De.extra,De.back+=De.extra}De.was=De.length,De.mode=23;case 23:for(;Dn=(nt=De.distcode[Pt&(1<<De.distbits)-1])>>>16&255,ji=65535&nt,!((En=nt>>>24)<=Lt);){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}if(0==(240&Dn)){for(ii=En,Os=Dn,dr=ji;Dn=(nt=De.distcode[dr+((Pt&(1<<ii+Os)-1)>>ii)])>>>16&255,ji=65535&nt,!(ii+(En=nt>>>24)<=Lt);){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}Pt>>>=ii,Lt-=ii,De.back+=ii}if(Pt>>>=En,Lt-=En,De.back+=En,64&Dn){qe.msg="invalid distance code",De.mode=30;break}De.offset=ji,De.extra=15&Dn,De.mode=24;case 24:if(De.extra){for(dt=De.extra;Lt<dt;){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}De.offset+=Pt&(1<<De.extra)-1,Pt>>>=De.extra,Lt-=De.extra,De.back+=De.extra}if(De.offset>De.dmax){qe.msg="invalid distance too far back",De.mode=30;break}De.mode=25;case 25:if(0===xn)break e;if(De.offset>(en=ni-xn)){if((en=De.offset-en)>De.whave&&De.sane){qe.msg="invalid distance too far back",De.mode=30;break}gr=en>De.wnext?De.wsize-(en-=De.wnext):De.wnext-en,en>De.length&&(en=De.length),zi=De.window}else zi=Wt,gr=Yn-De.offset,en=De.length;for(xn<en&&(en=xn),xn-=en,De.length-=en;Wt[Yn++]=zi[gr++],--en;);0===De.length&&(De.mode=21);break;case 26:if(0===xn)break e;Wt[Yn++]=De.length,xn--,De.mode=21;break;case 27:if(De.wrap){for(;Lt<32;){if(0===Jt)break e;Jt--,Pt|=je[Xe++]<<Lt,Lt+=8}if(qe.total_out+=ni-=xn,De.total+=ni,ni&&(qe.adler=De.check=De.flags?_(De.check,Wt,ni,Yn-ni):d(De.check,Wt,ni,Yn-ni)),ni=xn,(De.flags?Pt:W(Pt))!==De.check){qe.msg="incorrect data check",De.mode=30;break}Lt=Pt=0}De.mode=28;case 28:if(De.wrap&&De.flags){for(;Lt<32;){if(0===Jt)break e;Jt--,Pt+=je[Xe++]<<Lt,Lt+=8}if(Pt!==(4294967295&De.total)){qe.msg="incorrect length check",De.mode=30;break}Lt=Pt=0}De.mode=29;case 29:Fn=1;break e;case 30:Fn=-3;break e;case 31:return-4;default:return P}return qe.next_out=Yn,qe.avail_out=xn,qe.next_in=Xe,qe.avail_in=Jt,De.hold=Pt,De.bits=Lt,(De.wsize||ni!==qe.avail_out&&De.mode<30&&(De.mode<27||4!==ut))&&lt(qe,qe.output,qe.next_out,ni-qe.avail_out)?(De.mode=31,-4):(ni-=qe.avail_out,qe.total_in+=Xn-=qe.avail_in,qe.total_out+=ni,De.total+=ni,De.wrap&&ni&&(qe.adler=De.check=De.flags?_(De.check,Wt,ni,qe.next_out-ni):d(De.check,Wt,ni,qe.next_out-ni)),qe.data_type=De.bits+(De.last?64:0)+(12===De.mode?128:0)+(20===De.mode||15===De.mode?256:0),(0==Xn&&0===ni||4===ut)&&0===Fn&&(Fn=-5),Fn)},y.inflateEnd=function(qe){if(!qe||!qe.state)return P;var ut=qe.state;return ut.window&&(ut.window=null),qe.state=null,0},y.inflateGetHeader=function(qe,ut){var De;return qe&&qe.state?0==(2&(De=qe.state).wrap)?P:((De.head=ut).done=!1,0):P},y.inflateSetDictionary=function(qe,ut){var De,je=ut.length;return qe&&qe.state?0!==(De=qe.state).wrap&&11!==De.mode?P:11===De.mode&&d(1,ut,je,0)!==De.check?-3:lt(qe,ut,je,je)?(De.mode=31,-4):(De.havedict=1,0):P},y.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(G,A,y){"use strict";var l=G("../utils/common"),d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],_=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],p=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],v=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];A.exports=function(C,D,I,P,B,U,J,W){var re,he,ie,ae,Me,Ce,Le,Ue,ce,lt=W.bits,qe=0,ut=0,De=0,je=0,Wt=0,Xe=0,Yn=0,Jt=0,xn=0,Pt=0,Lt=null,Xn=0,ni=new l.Buf16(16),en=new l.Buf16(16),gr=null,zi=0;for(qe=0;qe<=15;qe++)ni[qe]=0;for(ut=0;ut<P;ut++)ni[D[I+ut]]++;for(Wt=lt,je=15;1<=je&&0===ni[je];je--);if(je<Wt&&(Wt=je),0===je)return B[U++]=20971520,B[U++]=20971520,W.bits=1,0;for(De=1;De<je&&0===ni[De];De++);for(Wt<De&&(Wt=De),qe=Jt=1;qe<=15;qe++)if(Jt<<=1,(Jt-=ni[qe])<0)return-1;if(0<Jt&&(0===C||1!==je))return-1;for(en[1]=0,qe=1;qe<15;qe++)en[qe+1]=en[qe]+ni[qe];for(ut=0;ut<P;ut++)0!==D[I+ut]&&(J[en[D[I+ut]]++]=ut);if(Ce=0===C?(Lt=gr=J,19):1===C?(Lt=d,Xn-=257,gr=_,zi-=257,256):(Lt=p,gr=v,-1),qe=De,Me=U,Yn=ut=Pt=0,ie=-1,ae=(xn=1<<(Xe=Wt))-1,1===C&&852<xn||2===C&&592<xn)return 1;for(;;){for(Le=qe-Yn,ce=J[ut]<Ce?(Ue=0,J[ut]):J[ut]>Ce?(Ue=gr[zi+J[ut]],Lt[Xn+J[ut]]):(Ue=96,0),re=1<<qe-Yn,De=he=1<<Xe;B[Me+(Pt>>Yn)+(he-=re)]=Le<<24|Ue<<16|ce|0,0!==he;);for(re=1<<qe-1;Pt&re;)re>>=1;if(0!==re?(Pt&=re-1,Pt+=re):Pt=0,ut++,0==--ni[qe]){if(qe===je)break;qe=D[I+J[ut]]}if(Wt<qe&&(Pt&ae)!==ie){for(0===Yn&&(Yn=Wt),Me+=De,Jt=1<<(Xe=qe-Yn);Xe+Yn<je&&!((Jt-=ni[Xe+Yn])<=0);)Xe++,Jt<<=1;if(xn+=1<<Xe,1===C&&852<xn||2===C&&592<xn)return 1;B[ie=Pt&ae]=Wt<<24|Xe<<16|Me-U|0}}return 0!==Pt&&(B[Me+Pt]=qe-Yn<<24|64<<16|0),W.bits=Wt,0}},{"../utils/common":41}],51:[function(G,A,y){"use strict";A.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(G,A,y){"use strict";var l=G("../utils/common");function p(nt){for(var zt=nt.length;0<=--zt;)nt[zt]=0}var D=256,I=286,P=30,J=15,Ce=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Le=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ue=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],lt=new Array(576);p(lt);var qe=new Array(60);p(qe);var ut=new Array(512);p(ut);var De=new Array(256);p(De);var je=new Array(29);p(je);var Wt,Xe,Yn,Jt=new Array(P);function xn(nt,zt,on,Nn,an){this.static_tree=nt,this.extra_bits=zt,this.extra_base=on,this.elems=Nn,this.max_length=an,this.has_stree=nt&&nt.length}function Pt(nt,zt){this.dyn_tree=nt,this.max_code=0,this.stat_desc=zt}function Lt(nt){return nt<256?ut[nt]:ut[256+(nt>>>7)]}function Xn(nt,zt){nt.pending_buf[nt.pending++]=255&zt,nt.pending_buf[nt.pending++]=zt>>>8&255}function ni(nt,zt,on){nt.bi_valid>16-on?(nt.bi_buf|=zt<<nt.bi_valid&65535,Xn(nt,nt.bi_buf),nt.bi_buf=zt>>16-nt.bi_valid,nt.bi_valid+=on-16):(nt.bi_buf|=zt<<nt.bi_valid&65535,nt.bi_valid+=on)}function en(nt,zt,on){ni(nt,on[2*zt],on[2*zt+1])}function gr(nt,zt){for(var on=0;on|=1&nt,nt>>>=1,on<<=1,0<--zt;);return on>>>1}function zi(nt,zt,on){var Nn,an,hi=new Array(16),Oi=0;for(Nn=1;Nn<=J;Nn++)hi[Nn]=Oi=Oi+on[Nn-1]<<1;for(an=0;an<=zt;an++){var mi=nt[2*an+1];0!==mi&&(nt[2*an]=gr(hi[mi]++,mi))}}function En(nt){var zt;for(zt=0;zt<I;zt++)nt.dyn_ltree[2*zt]=0;for(zt=0;zt<P;zt++)nt.dyn_dtree[2*zt]=0;for(zt=0;zt<19;zt++)nt.bl_tree[2*zt]=0;nt.dyn_ltree[512]=1,nt.opt_len=nt.static_len=0,nt.last_lit=nt.matches=0}function Dn(nt){8<nt.bi_valid?Xn(nt,nt.bi_buf):0<nt.bi_valid&&(nt.pending_buf[nt.pending++]=nt.bi_buf),nt.bi_buf=0,nt.bi_valid=0}function ji(nt,zt,on,Nn){var an=2*zt,hi=2*on;return nt[an]<nt[hi]||nt[an]===nt[hi]&&Nn[zt]<=Nn[on]}function ii(nt,zt,on){for(var Nn=nt.heap[on],an=on<<1;an<=nt.heap_len&&(an<nt.heap_len&&ji(zt,nt.heap[an+1],nt.heap[an],nt.depth)&&an++,!ji(zt,Nn,nt.heap[an],nt.depth));)nt.heap[on]=nt.heap[an],on=an,an<<=1;nt.heap[on]=Nn}function Os(nt,zt,on){var Nn,an,hi,Oi,mi=0;if(0!==nt.last_lit)for(;Nn=nt.pending_buf[nt.d_buf+2*mi]<<8|nt.pending_buf[nt.d_buf+2*mi+1],an=nt.pending_buf[nt.l_buf+mi],mi++,0===Nn?en(nt,an,zt):(en(nt,(hi=De[an])+D+1,zt),0!==(Oi=Ce[hi])&&ni(nt,an-=je[hi],Oi),en(nt,hi=Lt(--Nn),on),0!==(Oi=Le[hi])&&ni(nt,Nn-=Jt[hi],Oi)),mi<nt.last_lit;);en(nt,256,zt)}function dr(nt,zt){var on,Nn,an,hi=zt.dyn_tree,Oi=zt.stat_desc.static_tree,mi=zt.stat_desc.has_stree,fr=zt.stat_desc.elems,qs=-1;for(nt.heap_len=0,nt.heap_max=573,on=0;on<fr;on++)0!==hi[2*on]?(nt.heap[++nt.heap_len]=qs=on,nt.depth[on]=0):hi[2*on+1]=0;for(;nt.heap_len<2;)hi[2*(an=nt.heap[++nt.heap_len]=qs<2?++qs:0)]=1,nt.depth[an]=0,nt.opt_len--,mi&&(nt.static_len-=Oi[2*an+1]);for(zt.max_code=qs,on=nt.heap_len>>1;1<=on;on--)ii(nt,hi,on);for(an=fr;on=nt.heap[1],nt.heap[1]=nt.heap[nt.heap_len--],ii(nt,hi,1),Nn=nt.heap[1],nt.heap[--nt.heap_max]=on,nt.heap[--nt.heap_max]=Nn,hi[2*an]=hi[2*on]+hi[2*Nn],nt.depth[an]=(nt.depth[on]>=nt.depth[Nn]?nt.depth[on]:nt.depth[Nn])+1,hi[2*on+1]=hi[2*Nn+1]=an,nt.heap[1]=an++,ii(nt,hi,1),2<=nt.heap_len;);nt.heap[--nt.heap_max]=nt.heap[1],function(Sr,oo){var fa,ea,os,Ls,vo,ca,ja=oo.dyn_tree,sr=oo.max_code,Zu=oo.stat_desc.static_tree,$i=oo.stat_desc.has_stree,Is=oo.stat_desc.extra_bits,b=oo.stat_desc.extra_base,k=oo.stat_desc.max_length,z=0;for(Ls=0;Ls<=J;Ls++)Sr.bl_count[Ls]=0;for(ja[2*Sr.heap[Sr.heap_max]+1]=0,fa=Sr.heap_max+1;fa<573;fa++)k<(Ls=ja[2*ja[2*(ea=Sr.heap[fa])+1]+1]+1)&&(Ls=k,z++),ja[2*ea+1]=Ls,sr<ea||(Sr.bl_count[Ls]++,vo=0,b<=ea&&(vo=Is[ea-b]),Sr.opt_len+=(ca=ja[2*ea])*(Ls+vo),$i&&(Sr.static_len+=ca*(Zu[2*ea+1]+vo)));if(0!==z){do{for(Ls=k-1;0===Sr.bl_count[Ls];)Ls--;Sr.bl_count[Ls]--,Sr.bl_count[Ls+1]+=2,Sr.bl_count[k]--,z-=2}while(0<z);for(Ls=k;0!==Ls;Ls--)for(ea=Sr.bl_count[Ls];0!==ea;)sr<(os=Sr.heap[--fa])||(ja[2*os+1]!==Ls&&(Sr.opt_len+=(Ls-ja[2*os+1])*ja[2*os],ja[2*os+1]=Ls),ea--)}}(nt,zt),zi(hi,qs,nt.bl_count)}function Fe(nt,zt,on){var Nn,an,hi=-1,Oi=zt[1],mi=0,fr=7,qs=4;for(0===Oi&&(fr=138,qs=3),zt[2*(on+1)+1]=65535,Nn=0;Nn<=on;Nn++)an=Oi,Oi=zt[2*(Nn+1)+1],++mi<fr&&an===Oi||(mi<qs?nt.bl_tree[2*an]+=mi:0!==an?(an!==hi&&nt.bl_tree[2*an]++,nt.bl_tree[32]++):mi<=10?nt.bl_tree[34]++:nt.bl_tree[36]++,hi=an,qs=(mi=0)===Oi?(fr=138,3):an===Oi?(fr=6,3):(fr=7,4))}function Fn(nt,zt,on){var Nn,an,hi=-1,Oi=zt[1],mi=0,fr=7,qs=4;for(0===Oi&&(fr=138,qs=3),Nn=0;Nn<=on;Nn++)if(an=Oi,Oi=zt[2*(Nn+1)+1],!(++mi<fr&&an===Oi)){if(mi<qs)for(;en(nt,an,nt.bl_tree),0!=--mi;);else 0!==an?(an!==hi&&(en(nt,an,nt.bl_tree),mi--),en(nt,16,nt.bl_tree),ni(nt,mi-3,2)):mi<=10?(en(nt,17,nt.bl_tree),ni(nt,mi-3,3)):(en(nt,18,nt.bl_tree),ni(nt,mi-11,7));hi=an,qs=(mi=0)===Oi?(fr=138,3):an===Oi?(fr=6,3):(fr=7,4)}}p(Jt);var _n=!1;function dt(nt,zt,on,Nn){var an,hi,Oi;ni(nt,0+(Nn?1:0),3),hi=zt,Oi=on,Dn(an=nt),Xn(an,Oi),Xn(an,~Oi),l.arraySet(an.pending_buf,an.window,hi,Oi,an.pending),an.pending+=Oi}y._tr_init=function(nt){_n||(function(){var zt,on,Nn,an,hi,Oi=new Array(16);for(an=Nn=0;an<28;an++)for(je[an]=Nn,zt=0;zt<1<<Ce[an];zt++)De[Nn++]=an;for(De[Nn-1]=an,an=hi=0;an<16;an++)for(Jt[an]=hi,zt=0;zt<1<<Le[an];zt++)ut[hi++]=an;for(hi>>=7;an<P;an++)for(Jt[an]=hi<<7,zt=0;zt<1<<Le[an]-7;zt++)ut[256+hi++]=an;for(on=0;on<=J;on++)Oi[on]=0;for(zt=0;zt<=143;)lt[2*zt+1]=8,zt++,Oi[8]++;for(;zt<=255;)lt[2*zt+1]=9,zt++,Oi[9]++;for(;zt<=279;)lt[2*zt+1]=7,zt++,Oi[7]++;for(;zt<=287;)lt[2*zt+1]=8,zt++,Oi[8]++;for(zi(lt,287,Oi),zt=0;zt<P;zt++)qe[2*zt+1]=5,qe[2*zt]=gr(zt,5);Wt=new xn(lt,Ce,257,I,J),Xe=new xn(qe,Le,0,P,J),Yn=new xn(new Array(0),Ue,0,19,7)}(),_n=!0),nt.l_desc=new Pt(nt.dyn_ltree,Wt),nt.d_desc=new Pt(nt.dyn_dtree,Xe),nt.bl_desc=new Pt(nt.bl_tree,Yn),nt.bi_buf=0,nt.bi_valid=0,En(nt)},y._tr_stored_block=dt,y._tr_flush_block=function(nt,zt,on,Nn){var an,hi,Oi=0;0<nt.level?(2===nt.strm.data_type&&(nt.strm.data_type=function(mi){var fr,qs=4093624447;for(fr=0;fr<=31;fr++,qs>>>=1)if(1&qs&&0!==mi.dyn_ltree[2*fr])return 0;if(0!==mi.dyn_ltree[18]||0!==mi.dyn_ltree[20]||0!==mi.dyn_ltree[26])return 1;for(fr=32;fr<D;fr++)if(0!==mi.dyn_ltree[2*fr])return 1;return 0}(nt)),dr(nt,nt.l_desc),dr(nt,nt.d_desc),Oi=function(mi){var fr;for(Fe(mi,mi.dyn_ltree,mi.l_desc.max_code),Fe(mi,mi.dyn_dtree,mi.d_desc.max_code),dr(mi,mi.bl_desc),fr=18;3<=fr&&0===mi.bl_tree[2*ce[fr]+1];fr--);return mi.opt_len+=3*(fr+1)+5+5+4,fr}(nt),(hi=nt.static_len+3+7>>>3)<=(an=nt.opt_len+3+7>>>3)&&(an=hi)):an=hi=on+5,on+4<=an&&-1!==zt?dt(nt,zt,on,Nn):4===nt.strategy||hi===an?(ni(nt,2+(Nn?1:0),3),Os(nt,lt,qe)):(ni(nt,4+(Nn?1:0),3),function(mi,fr,qs,Sr){var oo;for(ni(mi,fr-257,5),ni(mi,qs-1,5),ni(mi,Sr-4,4),oo=0;oo<Sr;oo++)ni(mi,mi.bl_tree[2*ce[oo]+1],3);Fn(mi,mi.dyn_ltree,fr-1),Fn(mi,mi.dyn_dtree,qs-1)}(nt,nt.l_desc.max_code+1,nt.d_desc.max_code+1,Oi+1),Os(nt,nt.dyn_ltree,nt.dyn_dtree)),En(nt),Nn&&Dn(nt)},y._tr_tally=function(nt,zt,on){return nt.pending_buf[nt.d_buf+2*nt.last_lit]=zt>>>8&255,nt.pending_buf[nt.d_buf+2*nt.last_lit+1]=255&zt,nt.pending_buf[nt.l_buf+nt.last_lit]=255&on,nt.last_lit++,0===zt?nt.dyn_ltree[2*on]++:(nt.matches++,zt--,nt.dyn_ltree[2*(De[on]+D+1)]++,nt.dyn_dtree[2*Lt(zt)]++),nt.last_lit===nt.lit_bufsize-1},y._tr_align=function(nt){var zt;ni(nt,2,3),en(nt,256,lt),16===(zt=nt).bi_valid?(Xn(zt,zt.bi_buf),zt.bi_buf=0,zt.bi_valid=0):8<=zt.bi_valid&&(zt.pending_buf[zt.pending++]=255&zt.bi_buf,zt.bi_buf>>=8,zt.bi_valid-=8)}},{"../utils/common":41}],53:[function(G,A,y){"use strict";A.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(G,A,y){(function(l){!function(d,_){"use strict";if(!d.setImmediate){var p,v,C,D,I=1,P={},B=!1,U=d.document,J=Object.getPrototypeOf&&Object.getPrototypeOf(d);J=J&&J.setTimeout?J:d,p="[object process]"==={}.toString.call(d.process)?function(ie){process.nextTick(function(){re(ie)})}:function(){if(d.postMessage&&!d.importScripts){var ie=!0,ae=d.onmessage;return d.onmessage=function(){ie=!1},d.postMessage("","*"),d.onmessage=ae,ie}}()?(D="setImmediate$"+Math.random()+"$",d.addEventListener?d.addEventListener("message",he,!1):d.attachEvent("onmessage",he),function(ie){d.postMessage(D+ie,"*")}):d.MessageChannel?((C=new MessageChannel).port1.onmessage=function(ie){re(ie.data)},function(ie){C.port2.postMessage(ie)}):U&&"onreadystatechange"in U.createElement("script")?(v=U.documentElement,function(ie){var ae=U.createElement("script");ae.onreadystatechange=function(){re(ie),ae.onreadystatechange=null,v.removeChild(ae),ae=null},v.appendChild(ae)}):function(ie){setTimeout(re,0,ie)},J.setImmediate=function(ie){"function"!=typeof ie&&(ie=new Function(""+ie));for(var ae=new Array(arguments.length-1),Me=0;Me<ae.length;Me++)ae[Me]=arguments[Me+1];return P[I]={callback:ie,args:ae},p(I),I++},J.clearImmediate=W}function W(ie){delete P[ie]}function re(ie){if(B)setTimeout(re,0,ie);else{var ae=P[ie];if(ae){B=!0;try{!function(Me){var Ce=Me.callback,Le=Me.args;switch(Le.length){case 0:Ce();break;case 1:Ce(Le[0]);break;case 2:Ce(Le[0],Le[1]);break;case 3:Ce(Le[0],Le[1],Le[2]);break;default:Ce.apply(undefined,Le)}}(ae)}finally{W(ie),B=!1}}}}function he(ie){ie.source===d&&"string"==typeof ie.data&&0===ie.data.indexOf(D)&&re(+ie.data.slice(D.length))}}("undefined"==typeof self?void 0===l?this:l:self)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},788:(K,G,A)=>{K.exports=A(237)},853:(K,G,A)=>{var l,d,p,v,y=y||A(259);p=(d=(l=y).paramquery).pqGrid.regional.en={strLocal:"en",strAdd:"Add",strBlanks:"(Blanks)",strDelete:"Delete",strEdit:"Edit",strCondition:"Condition:",strConditions:{"":"--None--",begin:"Begins with",between:"In between",contain:"Contains",equal:"Equals",empty:"Empty",end:"Ends With",great:"Greater than",gte:"Greater than or equal",less:"Less than",lte:"Less than or equal",notbegin:"Not begins with",notcontain:"Not contains",notequal:"Not equals",notempty:"Not empty",notend:"Not ends with",range:"[ Range ]",regexp:"Regular expression"},strOk:"Ok",strClear:"Clear",strTabRemove:"{0} would be deleted permanently.\r\n Are you sure?",strTabName:"sheet{0}",strTabAdd:"New sheet",strTabClose:"Remove sheet",strGroup_header:"Drag a column here to group by that column",strGroup_merge:"Merge cells",strGroup_fixCols:"Fix columns",strGroup_grandSummary:"Grand summary",strTP_aggPane:"Aggregates",strTP_colPane:"Group columns",strTP_pivot:"Pivot mode",strTP_rowPane:"Group rows",strTP_aggPH:"Drop columns for computing aggregate values",strTP_colPH:"Drop columns here for grouping along column or x axis",strTP_rowPH:"Drop columns here for grouping along row or y axis",strLoading:"Loading",strNextResult:"Next Result",strNoRows:"No rows to display.",strNothingFound:"Nothing found",strPrevResult:"Previous Result",strSearch:"Search",strSelectAll:"Select All",strSelectedmatches:"Selected {0} of {1} match(es)",strFormulas:{ABS:["ABS(number)","Returns the absolute value of a number. The absolute value of a number is the number without its sign."],ACOS:["ACOS(number)","Returns the arccosine, or inverse cosine, of a number. The arccosine is the angle whose cosine is number. The returned angle is given in radians in the range 0 (zero) to pi."],AND:["AND(logical1, [logical2], ...)","Returns TRUE if all its arguments evaluate to TRUE, and returns FALSE if one or more arguments evaluate to FALSE."],ASIN:["ASIN(number)","Returns the arcsine, or inverse sine, of a number. The arcsine is the angle whose sine is number. The returned angle is given in radians in the range -pi/2 to pi/2."],ATAN:["ATAN(number)","Returns the arctangent, or inverse tangent, of a number. The arctangent is the angle whose tangent is number. The returned angle is given in radians in the range -pi/2 to pi/2."],AVERAGE:["AVERAGE(number1, [number2], ...)","Returns the average (arithmetic mean) of the arguments. For example, if the range A1:A20 contains numbers, the formula =AVERAGE(A1:A20) returns the average of those numbers."],AVERAGEIF:["AVERAGEIF(range, criteria, [average_range])","Returns the average (arithmetic mean) of all the cells in a range that meet a given criteria."],AVERAGEIFS:["AVERAGEIFS(average_range, criteria_range1, criteria1, [criteria_range2, criteria2], ...)","Returns the average (arithmetic mean) of all cells that meet multiple criteria."],CEILING:["CEILING(number, significance)","Returns number rounded up, away from zero, to the nearest multiple of significance. For example, if you want to avoid using pennies in your prices and your product is priced at $4.42, use the formula =CEILING(4.42,0.05) to round prices up to the nearest nickel."],CHAR:["CHAR(number)","Returns the character specified by a number."],CHOOSE:["CHOOSE(index_num, value1, [value2], ...)","If index_num is 1, CHOOSE returns value1; if it is 2, CHOOSE returns value2; and so on."],CODE:["CODE(text)","Returns a numeric code for the first character in a text string."],COLUMN:["COLUMN()","Returns reference of the cell in which the COLUMN function appears."],COLUMNS:["COLUMNS(array)","Returns the number of columns in an array or reference."],CONCATENATE:["CONCATENATE(text1, [text2], ...)","join two or more text strings into one string."],COS:["COS(number)","Returns the cosine of the given angle(in radians)."],COUNT:["COUNT(value1, [value2], ...)","Counts the number of cells that contain numbers, and counts numbers within the list of arguments."],COUNTA:["COUNTA(value1, [value2], ...)","The COUNTA function counts the number of cells that are not empty in a range."],COUNTBLANK:["COUNTBLANK(range)","Counts empty cells in a specified range of cells."],COUNTIF:["COUNTIF(range, criteria)","counts the number of cells that meet a criterion; for example, to count the number of times a particular city appears in a customer list."],COUNTIFS:["COUNTIFS(criteria_range1, criteria1, [criteria_range2, criteria2]\u2026)","Applies criteria to cells across multiple ranges and counts the number of times all criteria are met."],DATE:["DATE(year,month,day)","returns the sequential serial number that represents a particular date."],DATEDIF:["DATEDIF(start_date,end_date,unit)","Calculates the number of days, months, or years between two dates. Unit can be 'Y', 'M' or 'D'."],DATEVALUE:["DATEVALUE(date_text)",'converts a date that is stored as text to a serial number that Excel recognizes as a date. For example, the formula =DATEVALUE("1/1/2008") returns 39448.'],DAY:["DAY(serial_number)","Returns the day of a date, represented by a serial number."],DAYS:["DAYS(end_date, start_date)","Returns the number of days between two dates."],DEGREES:["DEGREES(angle)","Converts radians into degrees."],EOMONTH:["EOMONTH(start_date, months)","Returns the serial number for the last day of the month that is the indicated number of months before or after start_date."],EXP:["EXP(number)","Returns e raised to the power of number. "],FIND:["FIND(find_text, within_text, [start_num])","Locates one text string within a second text string, and return the number of the starting position of the first text string from the first character of the second text string."],FLOOR:["FLOOR(number, significance)","Rounds number down, toward zero, to the nearest multiple of significance."],HLOOKUP:["HLOOKUP(lookup_value, table_array, row_index_num, [range_lookup])","Searches for a value in the top row of a table or an array of values, and then returns a value in the same column from a row you specify in the table or array."],HOUR:["HOUR(serial_number)","Returns the hour of a time value. The hour is given as an integer, ranging from 0 (12:00 A.M.) to 23 (11:00 P.M.)."],IF:["IF(logical_test, value_if_true, [value_if_false])","returns one value if a condition is true and another value if it's false."],INDEX:["INDEX(array, row_num, [column_num])","Returns the value of an element in a table or an array, selected by the row and column number indexes."],INDIRECT:["INDIRECT(ref_text, [a1])","Returns the reference specified by a text string. References are immediately evaluated to display their contents."],ISBLANK:["ISBLANK(value)","Returns TRUE if the value is blank"],LARGE:["LARGE(array, k)","Returns the k-th largest value in a data set."],LEFT:["LEFT(text, [num_chars])","returns the first character or characters in a text string, based on the number of characters you specify."],LEN:["LEN(text)","returns the number of characters in a text string."],LOOKUP:["LOOKUP(lookup_value, lookup_vector, [result_vector])","Looks in a one-row or one-column range (known as a vector) for a value and returns a value from the same position in a second one-row or one-column range."],LOWER:["LOWER(text)","Converts all uppercase letters in a text string to lowercase."],MATCH:["MATCH(lookup_value, lookup_array, [match_type])","Searches for a specified item in a range of cells, and then returns the relative position of that item in the range. match_type can be: 0 for exact match with option to use wildcards; 1 ( default ) for less than, The values in the lookup_array argument must be placed in ascending order; -1 for greater than, values in the lookup_array argument must be placed in descending order."],MAX:["MAX(number1, [number2], ...)","Returns the largest value in a set of values."],MEDIAN:["MEDIAN(number1, [number2], ...)","Returns the median of the given numbers. The median is the number in the middle of a set of numbers."],MID:["MID(text, start_num, num_chars)","returns a specific number of characters from a text string, starting at the position you specify, based on the number of characters you specify."],MIN:["MIN(number1, [number2], ...)","Returns the smallest number in a set of values."],MODE:["MODE(number1,[number2],...)","Returns the most frequently occurring, or repetitive, value in an array or range of data."],MONTH:["MONTH(serial_number)","Returns the month of a date represented by a serial number. The month is given as an integer, ranging from 1 (January) to 12 (December)."],OR:["OR(logical1, [logical2], ...)","returns TRUE if any of its arguments evaluate to TRUE, and returns FALSE if all of its arguments evaluate to FALSE."],PI:["PI()","Returns the number 3.14159265358979, the mathematical constant pi."],POWER:["POWER(number, power)","Returns the result of a number raised to a power."],PRODUCT:["PRODUCT(number1, [number2], ...)","multiplies all the numbers given as arguments and returns the product. PRODUCT(A1:A3, C1:C3) is equivalent to =A1 * A2 * A3 * C1 * C2 * C3."],PROPER:["PROPER(text)","Capitalizes the first letter in each word of a text value."],RADIANS:["RADIANS(angle)","Converts degrees into radians."],RAND:["RAND()","Returns an evenly distributed random real number greater than or equal to 0 and less than 1."],RANK:["RANK(number,ref,[order])","Returns the rank of a number in a list of numbers."],RATE:["",""],REPLACE:["REPLACE(old_text, start_num, num_chars, new_text)","replaces part of a text string, based on the number of characters you specify, with a different text string."],REPT:["REPT(text, number_times)","Repeats text a given number of times."],RIGHT:["RIGHT(text,[num_chars])","returns the last character or characters in a text string, based on the number of characters you specify."],ROUND:["ROUND(number, num_digits)","rounds a number to a specified number of digits."],ROUNDDOWN:["ROUNDDOWN(number, num_digits)","Rounds a number down, toward zero."],ROUNDUP:["ROUNDUP(number, num_digits)","Rounds a number up, away from 0 (zero)."],ROW:["ROW()","Returns the reference of the cell in which the ROW function appears."],ROWS:["ROWS(array)","Returns the number of rows in a reference or array."],SEARCH:["SEARCH(find_text,within_text,[start_num])","locate one text string within a second text string, and return the number of the starting position of the first text string from the first character of the second text string."],SIN:["SIN(number)","Returns the sine of the given angle(in radians)."],SMALL:["SMALL(array, k)","Returns the k-th smallest value in a data set."],SQRT:["SQRT(number)","Returns a positive square root."],STDEV:["STDEV(number1,[number2],...)","Estimates standard deviation based on a sample. The standard deviation is a measure of how widely values are dispersed from the average value (the mean)."],STDEVP:["STDEVP(number1,[number2],...)","Calculates standard deviation based on the entire population given as arguments."],SUBSTITUTE:["SUBSTITUTE(text, old_text, new_text, [instance_num])","Substitutes new_text for old_text in a text string."],SUM:["SUM(number1,[number2],...)","Adds its arguments. You can add individual values, cell references or ranges or a mix of all three."],SUMIF:["SUMIF(range, criteria, [sum_range])","adds the values in a range that meet criteria that you specify"],SUMIFS:["SUMIFS(sum_range, criteria_range1, criteria1, [criteria_range2, criteria2], ...)","adds all of its arguments that meet multiple criteria."],SUMPRODUCT:["SUMPRODUCT(array1, [array2], [array3], ...)","Multiplies corresponding components in the given arrays, and returns the sum of those products."],TAN:["TAN(number)","Returns the tangent of the given angle(in radians)."],TEXT:['TEXT(Value you want to format, "Format code you want to apply")',"The TEXT function lets you change the way a number appears by applying formatting to it with format codes."],TIME:["TIME(hour, minute, second)","Returns the decimal number for a particular time."],TIMEVALUE:["TIMEVALUE(time_text)","Returns the decimal number of the time represented by a text string. The decimal number is a value ranging from 0 (zero) to 0.99988426, representing the times from 0:00:00 (12:00:00 AM) to 23:59:59 (11:59:59 P.M.)."],TODAY:["TODAY()","Returns the serial number of the current date."],TRIM:["TRIM(text)","Removes all spaces from text except for single spaces between words."],TRUNC:["TRUNC(number, [num_digits])","Truncates a number to an integer by removing the fractional part of the number."],UPPER:["UPPER(text)","Converts text to uppercase."],VALUE:["VALUE(text)","Converts a text string that represents a number to a number."],VAR:["VAR(number1,[number2],...)","Estimates variance based on a sample."],VARP:["VARP(number1,[number2],...)","Calculates variance based on the entire population."],VLOOKUP:["VLOOKUP (lookup_value, table_array, col_index_num, [range_lookup])","look up a value in a table or a range by row. For example, look up a price of an automotive part by the part number."],YEAR:["YEAR(serial_number)","Returns the year corresponding to a date. The year is returned as an integer in the range 1900-9999."]}},v=d.pqPager.regional.en={strDisplay:"Displaying {0} to {1} of {2} items.",strFirstPage:"First Page",strLastPage:"Last Page",strNextPage:"Next Page",strPage:"Page {0} of {1}",strPrevPage:"Previous Page",strRefresh:"Refresh",strRpp:"Records per page: {0}"},l.extend(d.pqGrid.defaults,p),l.extend(d.pqPager.defaults,v)},405:(K,G,A)=>{var l,d,p,v,y=y||A(259);p=(d=(l=y).paramquery).pqGrid.regional.ja={strLocal:"ja",strAdd:"\u8ffd\u52a0",strBlanks:"(Blanks)",strDelete:"\u524a\u9664",strEdit:"\u7de8\u96c6",strCondition:"Condition:",strConditions:{"":"--None--",begin:"Begins with",between:"In between",contain:"Contains",equal:"Equals",empty:"Empty",end:"Ends With",great:"Greater than",gte:"Greater than or equal",less:"Less than",lte:"Less than or equal",notbegin:"Not begins with",notcontain:"Not contains",notequal:"Not equals",notempty:"Not empty",notend:"Not ends with",range:"[ Range ]",regexp:"Regular expression"},strOk:"Ok",strClear:"Clear",strTabRemove:"{0} would be deleted permanently.\r\n Are you sure?",strTabName:"sheet{0}",strTabAdd:"New sheet",strTabClose:"Remove sheet",strGroup_header:"Drag a column here to group by that column",strGroup_merge:"Merge cells",strGroup_fixCols:"Fix columns",strGroup_grandSummary:"Grand summary",strTP_aggPane:"Aggregates",strTP_colPane:"Group columns",strTP_pivot:"Pivot mode",strTP_rowPane:"Group rows",strTP_aggPH:"Drop columns for computing aggregate values",strTP_colPH:"Drop columns here for grouping along column or x axis",strTP_rowPH:"Drop columns here for grouping along row or y axis",strLoading:"\u30ed\u30fc\u30c9\u4e2d",strNextResult:"\u6b21\u306e\u7d50\u679c",strNoRows:"\u8868\u793a\u3059\u308b\u884c\u304c\u3042\u308a\u307e\u305b\u3093\u3002",strNothingFound:"\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002",strPrevResult:"\u524d\u306e\u7d50\u679c",strSearch:"\u691c\u7d22",strSelectAll:"Select All",strSelectedmatches:"",strFormulas:{ABS:["ABS(number)","Returns the absolute value of a number. The absolute value of a number is the number without its sign."],ACOS:["ACOS(number)","Returns the arccosine, or inverse cosine, of a number. The arccosine is the angle whose cosine is number. The returned angle is given in radians in the range 0 (zero) to pi."],AND:["AND(logical1, [logical2], ...)","Returns TRUE if all its arguments evaluate to TRUE, and returns FALSE if one or more arguments evaluate to FALSE."],ASIN:["ASIN(number)","Returns the arcsine, or inverse sine, of a number. The arcsine is the angle whose sine is number. The returned angle is given in radians in the range -pi/2 to pi/2."],ATAN:["ATAN(number)","Returns the arctangent, or inverse tangent, of a number. The arctangent is the angle whose tangent is number. The returned angle is given in radians in the range -pi/2 to pi/2."],AVERAGE:["AVERAGE(number1, [number2], ...)","Returns the average (arithmetic mean) of the arguments. For example, if the range A1:A20 contains numbers, the formula =AVERAGE(A1:A20) returns the average of those numbers."],AVERAGEIF:["AVERAGEIF(range, criteria, [average_range])","Returns the average (arithmetic mean) of all the cells in a range that meet a given criteria."],AVERAGEIFS:["AVERAGEIFS(average_range, criteria_range1, criteria1, [criteria_range2, criteria2], ...)","Returns the average (arithmetic mean) of all cells that meet multiple criteria."],CEILING:["CEILING(number, significance)","Returns number rounded up, away from zero, to the nearest multiple of significance. For example, if you want to avoid using pennies in your prices and your product is priced at $4.42, use the formula =CEILING(4.42,0.05) to round prices up to the nearest nickel."],CHAR:["CHAR(number)","Returns the character specified by a number."],CHOOSE:["CHOOSE(index_num, value1, [value2], ...)","If index_num is 1, CHOOSE returns value1; if it is 2, CHOOSE returns value2; and so on."],CODE:["CODE(text)","Returns a numeric code for the first character in a text string."],COLUMN:["COLUMN()","Returns reference of the cell in which the COLUMN function appears."],COLUMNS:["COLUMNS(array)","Returns the number of columns in an array or reference."],CONCATENATE:["CONCATENATE(text1, [text2], ...)","join two or more text strings into one string."],COS:["COS(number)","Returns the cosine of the given angle(in radians)."],COUNT:["COUNT(value1, [value2], ...)","Counts the number of cells that contain numbers, and counts numbers within the list of arguments."],COUNTA:["COUNTA(value1, [value2], ...)","The COUNTA function counts the number of cells that are not empty in a range."],COUNTBLANK:["COUNTBLANK(range)","Counts empty cells in a specified range of cells."],COUNTIF:["COUNTIF(range, criteria)","counts the number of cells that meet a criterion; for example, to count the number of times a particular city appears in a customer list."],COUNTIFS:["COUNTIFS(criteria_range1, criteria1, [criteria_range2, criteria2]\u2026)","Applies criteria to cells across multiple ranges and counts the number of times all criteria are met."],DATE:["DATE(year,month,day)","returns the sequential serial number that represents a particular date."],DATEDIF:["DATEDIF(start_date,end_date,unit)","Calculates the number of days, months, or years between two dates. Unit can be 'Y', 'M' or 'D'."],DATEVALUE:["DATEVALUE(date_text)",'converts a date that is stored as text to a serial number that Excel recognizes as a date. For example, the formula =DATEVALUE("1/1/2008") returns 39448.'],DAY:["DAY(serial_number)","Returns the day of a date, represented by a serial number."],DAYS:["DAYS(end_date, start_date)","Returns the number of days between two dates."],DEGREES:["DEGREES(angle)","Converts radians into degrees."],EOMONTH:["EOMONTH(start_date, months)","Returns the serial number for the last day of the month that is the indicated number of months before or after start_date."],EXP:["EXP(number)","Returns e raised to the power of number. "],FIND:["FIND(find_text, within_text, [start_num])","Locates one text string within a second text string, and return the number of the starting position of the first text string from the first character of the second text string."],FLOOR:["FLOOR(number, significance)","Rounds number down, toward zero, to the nearest multiple of significance."],HLOOKUP:["HLOOKUP(lookup_value, table_array, row_index_num, [range_lookup])","Searches for a value in the top row of a table or an array of values, and then returns a value in the same column from a row you specify in the table or array."],HOUR:["HOUR(serial_number)","Returns the hour of a time value. The hour is given as an integer, ranging from 0 (12:00 A.M.) to 23 (11:00 P.M.)."],IF:["IF(logical_test, value_if_true, [value_if_false])","returns one value if a condition is true and another value if it's false."],INDEX:["INDEX(array, row_num, [column_num])","Returns the value of an element in a table or an array, selected by the row and column number indexes."],INDIRECT:["INDIRECT(ref_text, [a1])","Returns the reference specified by a text string. References are immediately evaluated to display their contents."],ISBLANK:["ISBLANK(value)","Returns TRUE if the value is blank"],LARGE:["LARGE(array, k)","Returns the k-th largest value in a data set."],LEFT:["LEFT(text, [num_chars])","returns the first character or characters in a text string, based on the number of characters you specify."],LEN:["LEN(text)","returns the number of characters in a text string."],LOOKUP:["LOOKUP(lookup_value, lookup_vector, [result_vector])","Looks in a one-row or one-column range (known as a vector) for a value and returns a value from the same position in a second one-row or one-column range."],LOWER:["LOWER(text)","Converts all uppercase letters in a text string to lowercase."],MATCH:["MATCH(lookup_value, lookup_array, [match_type])","Searches for a specified item in a range of cells, and then returns the relative position of that item in the range. match_type can be: 0 for exact match with option to use wildcards; 1 ( default ) for less than, The values in the lookup_array argument must be placed in ascending order; -1 for greater than, values in the lookup_array argument must be placed in descending order."],MAX:["MAX(number1, [number2], ...)","Returns the largest value in a set of values."],MEDIAN:["MEDIAN(number1, [number2], ...)","Returns the median of the given numbers. The median is the number in the middle of a set of numbers."],MID:["MID(text, start_num, num_chars)","returns a specific number of characters from a text string, starting at the position you specify, based on the number of characters you specify."],MIN:["MIN(number1, [number2], ...)","Returns the smallest number in a set of values."],MODE:["MODE(number1,[number2],...)","Returns the most frequently occurring, or repetitive, value in an array or range of data."],MONTH:["MONTH(serial_number)","Returns the month of a date represented by a serial number. The month is given as an integer, ranging from 1 (January) to 12 (December)."],OR:["OR(logical1, [logical2], ...)","returns TRUE if any of its arguments evaluate to TRUE, and returns FALSE if all of its arguments evaluate to FALSE."],PI:["PI()","Returns the number 3.14159265358979, the mathematical constant pi."],POWER:["POWER(number, power)","Returns the result of a number raised to a power."],PRODUCT:["PRODUCT(number1, [number2], ...)","multiplies all the numbers given as arguments and returns the product. PRODUCT(A1:A3, C1:C3) is equivalent to =A1 * A2 * A3 * C1 * C2 * C3."],PROPER:["PROPER(text)","Capitalizes the first letter in each word of a text value."],RADIANS:["RADIANS(angle)","Converts degrees into radians."],RAND:["RAND()","Returns an evenly distributed random real number greater than or equal to 0 and less than 1."],RANK:["RANK(number,ref,[order])","Returns the rank of a number in a list of numbers."],RATE:["",""],REPLACE:["REPLACE(old_text, start_num, num_chars, new_text)","replaces part of a text string, based on the number of characters you specify, with a different text string."],REPT:["REPT(text, number_times)","Repeats text a given number of times."],RIGHT:["RIGHT(text,[num_chars])","returns the last character or characters in a text string, based on the number of characters you specify."],ROUND:["ROUND(number, num_digits)","rounds a number to a specified number of digits."],ROUNDDOWN:["ROUNDDOWN(number, num_digits)","Rounds a number down, toward zero."],ROUNDUP:["ROUNDUP(number, num_digits)","Rounds a number up, away from 0 (zero)."],ROW:["ROW()","Returns the reference of the cell in which the ROW function appears."],ROWS:["ROWS(array)","Returns the number of rows in a reference or array."],SEARCH:["SEARCH(find_text,within_text,[start_num])","locate one text string within a second text string, and return the number of the starting position of the first text string from the first character of the second text string."],SIN:["SIN(number)","Returns the sine of the given angle(in radians)."],SMALL:["SMALL(array, k)","Returns the k-th smallest value in a data set."],SQRT:["SQRT(number)","Returns a positive square root."],STDEV:["STDEV(number1,[number2],...)","Estimates standard deviation based on a sample. The standard deviation is a measure of how widely values are dispersed from the average value (the mean)."],STDEVP:["STDEVP(number1,[number2],...)","Calculates standard deviation based on the entire population given as arguments."],SUBSTITUTE:["SUBSTITUTE(text, old_text, new_text, [instance_num])","Substitutes new_text for old_text in a text string."],SUM:["SUM(number1,[number2],...)","Adds its arguments. You can add individual values, cell references or ranges or a mix of all three."],SUMIF:["SUMIF(range, criteria, [sum_range])","adds the values in a range that meet criteria that you specify"],SUMIFS:["SUMIFS(sum_range, criteria_range1, criteria1, [criteria_range2, criteria2], ...)","adds all of its arguments that meet multiple criteria."],SUMPRODUCT:["SUMPRODUCT(array1, [array2], [array3], ...)","Multiplies corresponding components in the given arrays, and returns the sum of those products."],TAN:["TAN(number)","Returns the tangent of the given angle(in radians)."],TEXT:['TEXT(Value you want to format, "Format code you want to apply")',"The TEXT function lets you change the way a number appears by applying formatting to it with format codes."],TIME:["TIME(hour, minute, second)","Returns the decimal number for a particular time."],TIMEVALUE:["TIMEVALUE(time_text)","Returns the decimal number of the time represented by a text string. The decimal number is a value ranging from 0 (zero) to 0.99988426, representing the times from 0:00:00 (12:00:00 AM) to 23:59:59 (11:59:59 P.M.)."],TODAY:["TODAY()","Returns the serial number of the current date."],TRIM:["TRIM(text)","Removes all spaces from text except for single spaces between words."],TRUNC:["TRUNC(number, [num_digits])","Truncates a number to an integer by removing the fractional part of the number."],UPPER:["UPPER(text)","Converts text to uppercase."],VALUE:["VALUE(text)","Converts a text string that represents a number to a number."],VAR:["VAR(number1,[number2],...)","Estimates variance based on a sample."],VARP:["VARP(number1,[number2],...)","Calculates variance based on the entire population."],VLOOKUP:["VLOOKUP (lookup_value, table_array, col_index_num, [range_lookup])","look up a value in a table or a range by row. For example, look up a price of an automotive part by the part number."],YEAR:["YEAR(serial_number)","Returns the year corresponding to a date. The year is returned as an integer in the range 1900-9999."]}},v=d.pqPager.regional.ja={strDisplay:" {2} \u9805\u76ee\u4e2d\u3000{0} \u304b\u3089 {1}\u3000\u3092\u3000\u8868\u793a",strFirstPage:"\u6700\u521d",strLastPage:"\u6700\u5f8c",strNextPage:"\u6b21",strPage:"{0}\u3000/ {1}  \u30da\u30fc\u30b8",strPrevPage:"\u524d",strRefresh:"\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5",strRpp:"\uff11\u30da\u30fc\u30b8\u3042\u305f\u308a\u306e\u30ec\u30b3\u30fc\u30c9: {0}"},l.extend(d.pqGrid.defaults,p),l.extend(d.pqPager.defaults,v)},237:(module,__unused_webpack_exports,__webpack_require__)=>{(function(_a,_b){var jQuery,pq,JSZip,jQuery,pq,JSZip,K,G,A;jQuery=__webpack_require__(391),pq={},JSZip=__webpack_require__(650),module.exports=pq,pq.mixin={render:{getRenderVal:function(K,G,A){var y=K.column,l=y[_b(0)];return(G&&!1!==l||l)&&(y.render||y._render||y.format||y._renderG)?A.renderCell(K):[K.rowData[K.dataIndx],""]},getTitle:function(K,G){var A=K.title;return null!=A?"function"==typeof A&&(A=A.call(this.that,{colIndx:G,column:K,dataIndx:K.dataIndx,Export:!0})):A="",A}},GrpTree:{buildCache:function(){for(var K,G,A=this,l=A.isTree,d=l?A.that.options.dataModel.data:A.that.pdata,_=A.cache={},p=A.id,v=0,C=d.length;v<C;v++)if(K=d[v],l||K.pq_gtitle){if(null==(G=K[p]))throw"unknown id of row";_[G]=K}},cascadeInit:function(){if(this[_b(1)]()){for(var K,G=this,A=[],y=G.cbId,d=G.Model.select,_=G.that.pdata,p=0,v=_.length;p<v;p++)(K=_[p])[y]?G.isEditable(K)?(A.push(K),delete K[y]):d&&(K[_b(2)]=!0):null===K[y]&&delete K[y];A.length&&G.checkNodes(A,null,null,!0)}},cascadeNest:function(K){for(var G,A,y,l=this,d=l.cbId,_=l.prop,p=l.childstr,v=K.length,C=0;C<v;C++)(A=K[C])[_]&&(G=!0,l.eachChild(A,l[_b(3)](d,A[d],_)),delete A[_]),(y=A[p])&&y.length&&l[_b(4)](y);G&&l.hasParent(A)&&l.eachParent(A,l[_b(5)](d))},checkAll:function(K,G){return this.checkNodes(this.that.pdata,K=null==K||K,G,null,!0)},checkNodes:function(K,G,A,y,l){var d,_,p,v=0,C=K.length,D=[],I={check:G=null==G||G},P=this,B=P.that,U=B.riOffset,J=P.cbId,W=P.prop,he=P.Model,re=!l&&P.isCascade(he);for(l=y&&he[_b(6)]||!y,he=he.select;v<C;v++)this.isEditable(d=K[v])&&D.push({rowData:d,rowIndx:_=d.pq_ri,rowIndxPage:_-U});if(I.rows=D,I.dataIndx=P.colUI.dataIndx,y&&(I.init=y),!1!==(p=l?B._trigger("beforeCheck",A,I):p)&&(C=(D=I.rows).length)){var ie=this.chkRows=[];for(v=0;v<C;v++)d=D[v].rowData,re&&(d[W]=!0),ie.push({rd:d,val:G,oldVal:d[J]}),d[J]=G;re&&P[_b(4)](P.getRoots()),he&&this.selectRows(),re&&(I[_b(7)]=P[_b(7)](P)),l&&B._trigger("check",A,I),ie.length=0}P.setValCBox(),y||B.refresh({header:!1})},chkEachChild:function(K,G,A){return function(y){var l;!this.isEditable(y)||A&&y[A]||(l=y[K],null!==G&&l!==G&&(this.chkRows.push({rd:y,val:G,oldVal:l}),y[K]=G))}},chkEachParent:function(K){var G=this.childstr;return function(A){if(this.isEditable(A)){for(var y,l,d=A[G],_=0,p=0,v=A[K],C=0,D=d.length;C<D;C++)if(this.isEditable(l=d[C])){if(l=l[K])_++;else{if(null===l){y=null;break}p++}if(_&&p){y=null;break}}v!==(y=void 0===y?!!_:y)&&(this.chkRows.push({rd:A,val:y,oldVal:v}),A[K]=y)}}},eachChild:function(K,G,A){G.call(this,K,A);for(var y,l=this.childstr,d=K[l]||[],_=0,p=d.length;_<p;_++)(y=d[_])[l]?this.eachChild(y,G,K):G.call(this,y,K)},eachParent:function(K,G){for(;K=this.getParent(K);)G.call(this,K)},_flatten:function(K,G,A,y){for(var l,d,_=K.length,p=this.id,v=this.parentId,C=0,D=this.childstr;C<_;C++)(l=K[C]).pq_level=A,y.push(l),G&&(l[v]=p?G[p]:G),(d=l[D])&&this._flatten(d,l,A+1,y)},flatten:function(K){var G=[];return this._flatten(K,null,0,G),G},getUniqueNodes:function(K){var G=[],A={},y=this.parentId,l=this.id;return K.forEach(function(d){null!=d[l]&&(A[d[l]]=1)}),K.forEach(function(d){A[d[y]]||G.push(d)}),G},getCascadeInit:function(){var K=this[_b(8)];return this[_b(8)]=!0,K},getNode:function(K){return this.cache[K]},getParent:function(K){return this.cache[K=K[this.parentId]]},fillState:function(K){var G,A,y=this.childstr,l=this.cache;for(G in l)(A=l[G])[y]&&(K[G]=A.pq_close||!1);return K},hasParent:function(K){return null!=K[this.parentId]},getRoots:function(K){for(var G,y=K||this.that.pdata||[],l=y.length,d=0,_=[];d<l;d++)0!==(G=y[d]).pq_level||G[_b(9)]||_.push(G);return l&&!_.length?y:_},setCascadeInit:function(K){this[_b(8)]=K},getCascadeList:function(K){var G=[];return function(){if(!G.length)for(var A=K.chkRows,y=0,l=K.cbId,d=A.length;y<d;y++){var _=A[y],p=_.rd,v=p.pq_ri,C={},D={};C[l]=_.val,D[l]=_.oldVal,G.push({rowIndx:v,rowData:p,newRow:C,oldRow:D})}return G}},getChildren:function(K){return(K?K[this.childstr]:this.getRoots())||[]},getChildrenAll:function(K,G){for(var A,y=this.childstr,l=K[y]||[],d=l.length,_=0,p=G||[];_<d;_++)p.push(A=l[_]),A[y]&&this[_b(10)](A,p);return p},getSummary:function(K){return K[_b(11)]},isAncestor:function(K,G){for(var A=K;A=this.getParent(A);)if(A==G)return!0},isEmpty:function(K){return!(K[this.childstr]||[]).length},isCascade:function(K){return K.cascade&&K.checkbox&&!K.maxCheck},isEditable:function(K){if(K[_b(9)])return!1;var A=this.colCB;return!A||!(A=A.editable)||("function"==typeof A?A.call(this.that,{rowData:K}):A)},isFolder:function(K){return null!=K.pq_close||!!K[this.childstr]},onCheckbox:function(K,G){return function(A,y){G.checkbox&&K.colUI==y.column&&K.checkNodes([y.rowData],y.input.checked,A)}},onCMInit:function(){var K,G,A=this,y=(d=A.that).columns,l=A.isTree,d=d.colModel,_=A.Model;_[_b(12)]&&d&&(d=d.find(function(p){return!p.hidden}),_.titleIndx=d.dataIndx=(null==d.dataIndx?Math.random():d.dataIndx).toString()),_.checkbox&&y&&((G=y[_.cbId]||{dataIndx:_.cbId}).cb={check:!0,uncheck:!1,select:_.select,header:_[_b(13)],maxCheck:_.maxCheck},K=l?y[_.dataIndx]:y[_.titleIndx]),A.colCB=G,A.colUI=K,y&&l&&A[_b(14)]()},onCustomSortTree:function(K,G){var A=this.getRoots(G.data);return this.sort(A,G[_b(15)]),G.data=this.flatten(A),!1},onRefresh:function(K,G){return function(){if(G.checkbox)for(var A=this.$cont.find(".pq_indeter"),y=A.length;y--;)A[y][_b(16)]=!0}},refreshView:function(K){this.that[_b(17)]({header:!1,source:K})},renderCB:function(K,G,A){if(G[_b(9)])return"";var y,d="",_="",p="";return(K="function"==typeof K?K.call(this.that,G):K)?(G[A]&&(d="checked"),this.isEditable(G)||(_="disabled",y="pq_disable"),[_a(0)+(p=null===G[A]?"class='pq_indeter'":p)+" "+d+" "+_+"/>",y]):void 0},selectRows:function(){for(var K=0,G=this.chkRows,A=G.length;K<A;K++){var y=(l=G[K]).rd,l=l.val;y[_b(2)]=l}},sort:function(K,G){function A(){return"function"==typeof G?G:G.shift()}var y=this.childstr;!function l(d,_){var p,v=d.length,C=0;if(v)for(_&&d.sort(_),_=A();C<v;C++)(p=d[C][y])&&l(p,_)}(K,A())},copyArray:function(K,G){for(var A=0,y=G.length;A<y;A++)K.push(G[A])},_summaryT:function(K,G,A,y,l,d,_){for(var p,v,C,D,I,P=this,B=P.childstr,U=P.isGroup,J=P.isTree,W=d[_b(18)],re=d[_b(19)],he=!d[_b(20)],ie=d.titleIndx,ae=0,Me=K.length,Ce=0,Le={},Ue={},ce=P.id,lt=P.parentId,qe=U&&_?d.dataIndx[_.pq_level]:"",ut=[],De=A.length,je=pq.aggregate;Ce<De;Ce++)Le[I=A[Ce]]=[];for(;ae<Me;ae++){if(G.push(v=K[ae]),C=v[B]){for(p=P._summaryT(C,G,A,y,l,d,v),Ce=0;Ce<De;Ce++)P.copyArray(Le[I=A[Ce]],p[1][I]);P.copyArray(ut,p[2])}if(J&&(!W||!P.isFolder(v))||U&&!v.pq_gtitle){for(Ce=0;Ce<De;Ce++)Le[I=A[Ce]].push(v[I]);ut.push(v)}}for(Ue.pq_level=_?_.pq_level:0,d[_b(21)]&&(Ue[_b(22)]=!0),_&&(J&&!W||U&&re[_.pq_level])&&(Ue[lt]=_[ce],he||1<Me?G.push(Ue):Ue.pq_ghidden=!0,(_[_b(11)]=Ue).pq_hidden=_.pq_close),Ce=0;Ce<De;Ce++)D=(D=y[Ce])[qe]||D.type,Ue[I=A[Ce]]=je[D](Le[I],l[Ce],ut,Ue),W&&_&&I!=ie&&(_[I]=Ue[I]);return Ue[_b(9)]=!0,[Ue,Le,ut]},summaryT:function(){for(var K,G,A=this,y=A.that,l=y.options,d=A.Model,_=A.getRoots(),p=[],v=[],C=[],D=[],I=0,P=y.colModel,B=P.length;I<B;I++)(G=(K=P[I]).summary)&&G.type&&(C.push(K.dataIndx),D.push(K),v.push(G));_=A._summaryT(_,p,C,v,D,d)[0],d[_b(21)]?A[_b(23)]=l[_b(23)]=[_]:(A[_b(23)]||[]).length=0,y.pdata=p}}},K=jQuery,G=pq.mixin,A=!0,K(document).one("pq:ready",function(){var y=K(_a(1)).appendTo(document.body);y[0][_b(16)]=!0,y.on("change",function(){A=!1}),y.click(),y.remove()}),G.ChkGrpTree={onCellKeyDown:function(y,l){var d=this.colUI;if(d&&l.dataIndx==d.dataIndx&&32==y.keyCode)return this.that.getCell(l).find("input").click(),!1},getCheckedNodes:function(D){var l,d=this.that,_=D?d.getData():d.options.dataModel.data,p=_.length,v=0,C=[],I=((D=this.colCB||{}).cb||{}).check,P=D.dataIndx;if(null!=P)for(;v<p;v++)(l=_[v])[P]===I&&C.push(l);return C},hasCboxHead:function(){return((this.colCB||{}).cb||{}).header},isHeadChecked:function(){return this.inpVal},onBeforeCheck:function(y,l){var d,_,p,v,C,D,I;l.check&&this.colCB&&(_=(d=(D=this.colCB).cb).select,(p=d.maxCheck)&&this.colUI.dataIndx==l.dataIndx&&(I=(v=l.rows.slice(0,p)).length,C=D.dataIndx,0<(I=I+(D=this[_b(24)](!0)).length-p)&&D.slice(0,I).forEach(function(P){P[C]=d.uncheck,_&&delete P[_b(2)]}),l.rows=v))},onHeaderChange:function(y){!1===this.checkAll(y.target.checked,y)&&this[_b(25)]()},onRefreshHeader:function(){var y,l=this,d=l.that;l[_b(26)]()&&("groupModel"!=l.model||d.options[l.model].on)&&(d=d[_b(27)]({dataIndx:l.colUI.dataIndx}),(y=d.find("input")).length||(d.find(".pq-title-span").prepend(_a(2)),y=d.find("input")),l.$inp&&y[0]==l.$inp[0]||(l.$inp=y,l[_b(25)](),A&&y.on("click",function(_){null==y.data("pq_value")&&(y[0].checked=!0,y.data("pq_value",!0),l[_b(28)](_))}),y.on("change",function(_){l[_b(28)](_)})))},refreshHeadVal:function(){this.$inp&&this.$inp.pqval({val:this.inpVal})},setValCBox:function(){if(this[_b(26)]()){var y,l=this.that,d=l.options,_=this.colCB,p=_.dataIndx,v=l.colIndxs[p],C=_.cb,P=C.all,D="remote"!=d.pageModel.type&&P?0:l.riOffset,I=P?d.dataModel.data:l.pdata,B=(P=null,0),U=0,J=0;if(I){for(var W=0,re=I.length;W<re;W++)(y=I[W])[_b(9)]||y.pq_gtitle||!this.isEditable(y,_,W+D,v,p)||(U++,y[p]===C.check?B++:J++);B==U&&U?P=!0:J==U&&(P=!1),this.inpVal=P,this[_b(25)]()}}},unCheckAll:function(){this.checkAll(!1)},unCheckNodes:function(y,l){this.checkNodes(y,!1,l)}},function(K){function G(y,l,d,_){for(var p=l.slice(),v=0,C=p.length,D=[];v<C;v++){var I=p[v],P=I.cb,B=I.one;if(B){if(I._oncerun)continue;I._oncerun=!0}if(!1===P.call(y,d,_)&&(d[_b(29)](),d[_b(30)]()),B&&D.push(v),d[_b(31)]())break}if(C=D.length)for(v=C-1;0<=v;v--)p.splice(D[v],1)}var A=((A=K.paramquery=K.paramquery||{})._trigger=function(y,l,d){var _,p,v=this,C=v.listeners,D=C[y],I=v.options,P=I.allEvents,B=I.bubble,U=v.element,J=I[y];if(d=d||{},(l=K.Event(l)).type=v.widgetName+":"+y,l.target=U[0],p=l[_b(32)])for(_ in p)_ in l||(l[_]=p[_]);return P&&"function"==typeof P&&P.call(v,l,d),D&&D.length&&(G(v,D,l,d),l[_b(31)]())||I.trigger&&(U[B?"trigger":"triggerHandler"](l,d),l[_b(31)]())||(J&&!1===J.call(v,l,d)&&(l[_b(29)](),l[_b(30)]()),(D=C[y+"Done"])&&D.length&&G(v,D,l,d)),!l[_b(33)]()},A.on=function(){for(var y,l,d,_,p,v,C,D,I=arguments,P=(_="boolean"==typeof I[0]?(y=I[0],l=I[1],d=I[2],I[3]):(l=I[0],d=I[1],I[2]),l.split(" ")),B=0;B<P.length;B++){var U=P[B];U&&(v=d,C=_,D=y,((p=this).listeners[U=U]||(p.listeners[U]=[]))[D?"unshift":"push"]({cb:v,one:C}))}return this},A.one=function(){for(var y=arguments.length,l=[],d=0;d<y;d++)l[d]=arguments[d];return l[y]=!0,this.on.apply(this,l)},A.off=function(y,l){for(var d=y.split(" "),_=0;_<d.length;_++){var p=d[_];if(p){B=P=I=D=void 0;var C=l;if(C){var D=this.listeners[p];if(D){for(var I=[],P=0,B=D.length;P<B;P++)C==D[P].cb&&I.push(P);if(I.length)for(P=I.length-1;0<=P;P--)D.splice(I[P],1)}}else delete this.listeners[p]}}return this},{options:{items:_a(3),position:{my:"center top",at:"center bottom"},content:function(){var d,_,y=K(this),l=(d=(_=y.closest(".pq-grid").pqGrid("instance"))[_b(34)]({$td:y})).rowIndx;return(_=_.data({rowIndx:l,dataIndx:d=d.dataIndx,data:"pq_valid"}).data)?(""==(l=_.icon)?"":_a(4)+l+_a(5))+(d=null!=(d=_.msg)?d:""):y.attr("title")}}});A._create=function(){this._super();var y=this.element,l=this[_b(35)];y.on("pqtooltipopen"+l,function(D,_){var p,v,C=K(D.target);(D=K(D[_b(32)].target)).on("remove.pqtt",function(I){C.pqTooltip("close",I,!0)}),C.is(".pq-grid")&&(v=(D=(p=C.pqGrid("instance"))[_b(34)]({$td:D})).rowIndx,D=D.dataIndx,(p=p.getRowData({rowIndx:v}))&&(p=p[_b(36)])&&(p=p[D])&&(p=p.pq_valid)&&(D=(v=p).style,_.tooltip.addClass(p=v.cls),v=_.tooltip.attr("style"),_.tooltip.attr("style",v+";"+D)))}),y.on("pqtooltipclose"+l,function(d,_){K(d.target),K(d[_b(32)].target).off(".pqtt")})},K.widget("paramquery.pqTooltip",K.ui.tooltip,A)}(jQuery),function(K){var G,A,y,l,d,_,p,v,C,D,I,P=K.paramquery,B=Array.prototype,U=(B.find||(B.find=function(ie,ae){for(var Me,Ce=0,Le=this.length;Ce<Le;Ce++)if(ie.call(ae,Me=this[Ce],Ce,this))return Me}),B.findIndex||(B.findIndex=function(ie,ae){for(var Ce=0,Le=this.length;Ce<Le;Ce++)if(ie.call(ae,this[Ce],Ce,this))return Ce;return-1}),K.extend(pq,{arrayUnique:function(ie,ae){for(var Me,Ce,Le=[],Ue=ie.length,ce={},lt=0;lt<Ue;lt++)Me=ie[lt],1!=ce[Ce=ae?Me[ae]:Me]&&(ce[Ce]=1,Le.push(Me));return Le},cap1:function(ie){return ie&&ie.length?ie[0][_b(37)]()+ie.slice(1):""},elementFromXY:function(Ce){var ae,Me=Ce.clientX,Le=(Ce=Ce.clientY,K(document[_b(38)](Me,Ce)));return Le.closest(_a(6)).length&&((ae=Le).hide(),Le=K(document[_b(38)](Me,Ce)),ae.show()),Le},getFocusEle:function(ie){var ae=["a","textarea","button","input","select","[tabindex]"].map(function(Le){return Le+_a(7)}).join(","),Me=document[_b(39)];if(Me){var Ce=(ae=[].filter.call(K(ae),function(Ue){return 0<Ue[_b(40)]||0<Ue[_b(41)]||Ue==Me})).indexOf(Me);if(-1<(Ce=-1==Ce?ae.indexOf(K(Me).closest("[tabindex=0]")[0]):Ce))return ie?ae[Ce-1]:ae[Ce+1]}},focusEle:function(ie){return(ie=this[_b(42)](ie))&&ie.focus(),ie},escapeHtml:function(ie){return ie.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},excelToJui:(p={},function(ie){var ae=p[ie];return ae||(ae=ie.replace(/yy/g,"y").replace(/dddd/g,"DD").replace(/ddd/g,"D").replace(/mmmm/g,"MM").replace(/mmm/g,"M"),p[ie]=ae),ae}),excelToNum:(_={},function(ie){var ae=_[ie];return ae||(ae=ie.replace(/\\/g,""),_[ie]=ae),ae}),extend:function(ie,ae,Me){function Ce(){}Ce.prototype=ie.prototype;var Le,Ue=ae.prototype=new Ce,ce=ie.prototype;for(Le in Me){var lt=ce[Le],qe=Me[Le];Ue[Le]=lt?function(ut,De){return function(){var je,Wt=this._super;return this._super=function(){return ut.apply(this,arguments)},je=De.apply(this,arguments),this._super=Wt,je}}(lt,qe):qe}Ue.constructor=ae,Ue._base=ie,Ue._bp=function(ut){var De=arguments;return Array.prototype.shift.call(De),ce[ut].apply(this,De)}},copyObj:function(ie,ae,Me){var Ce,Le,Ue=pq.objectify(Me);for(Ce in ae)Ue[Ce]||(Le=ae[Ce],ie[Ce]=K[_b(43)](Le)?K.extend(!0,{},Le):Le);return ie},extendT:function(ie,ae){var Me,Ce;for(Me in ae)void 0===ie[Me]&&((Ce=Object[_b(44)](ae,Me)).get||Ce.set?Object[_b(45)](ie,Me,Ce):ie[Me]=(Ce=ae[Me])&&"object"==typeof Ce?K.extend(!0,{},Ce):Ce);return ie},flatten:function(ie,ae){var Me,Ce=0,Le=ie.length;for(ae=ae||[];Ce<Le;Ce++)null!=(Me=ie[Ce])&&(Me.push?pq.flatten(Me,ae):ae.push(Me));return ae},toRC:function(Me){Me=Me.match(/([A-Z]*)(\d*)/);var ae,Ce=pq.toNumber(Me[1]);return[ae=Me[2]?Me[2]-1:ae,Ce]},formatEx:function(ie,ae,Me,Ce){return Me&&(Ce=Ce||pq[_b(46)](ie),pq.filter.conditions[Me][Ce])?this.format(ie,ae,Ce):ae},format:function(ie,ae,Me){var Ce=ie.format;if(Ce&&null!=ae){if("function"==typeof Ce)return Ce(ae);if("date"==(Me=Me||pq[_b(46)](ie)))try{var Le=new Date(ae);Le&&!isNaN(Le.getTime())&&(ae=K.datepicker.formatDate(Ce,Le))}catch(Ue){}else ae=pq[_b(47)](ae,Ce)}return ae},onResize:function(ie,ae){ie[_b(48)]?ie[_b(48)]("onresize",ae):window[_b(49)]?new(window[_b(49)])(ae).observe(ie):window[_b(50)]?window[_b(50)](ie,ae):K(ie).resize(ae)},fileRead:function(ie,ae,Me){var Ce=new FileReader;Ce[ae](ie),Ce.onload=function(){Me(Ce.result)}},fileToBase:function(ie,ae){pq.fileRead(ie,"readAsDataURL",ae)},xmlhttp:function(ie,ae,Me){var Ce=new XMLHttpRequest;Ce.onload=function(){Me(Ce.response)},Ce.open("GET",ie),Ce[_b(51)]=ae,Ce.send()},urlToBase:function(ie,ae){pq.xmlhttp(ie,"blob",function(Me){pq.fileToBase(Me,ae)})},objectAttr:function(ie){ie&&ie.split(" ")},deFormat:function(ie,ae,Me){if(ae){var Ce,Le,Ue=ie.format;if(Ue&&(Le=pq[_b(46)](ie),!Me||pq.filter.conditions[Me][Le]))try{"function"==typeof Ue?ae=ie.deFormat(ae):"date"==Le?(Ce=ie.formatRaw||"mm/dd/yy")!=Ue&&(ae=K.datepicker.parseDate(Ue,ae),ae=K.datepicker.formatDate(Ce,ae)):ae=pq[_b(52)](ae,Ue)}catch(ce){ae=null}}return ae},fakeEvent:function(ie,ae,Me){var Ce;"timeout"==ae&&ie.off(ae="keyup change").on(ae,function(){clearTimeout(Ce),Ce=setTimeout(function(){ie[_b(53)]("timeout")},Me)})},getAddress:function(ce){ce=ce.split(":");var ae,Me,Ce=(Le=this.toRC(ce[0]))[0],Le=Le[1],Ue=(ce=this.toRC(ce[1]||ce[0]))[0];return ce=ce[1],{r1:Ce,c1:Le,rc:ae=isNaN(Ue)?ae:Ue-Ce+1,cc:Me=isNaN(ce)?Me:ce-Le+1,r2:Ue,c2:ce}},getClsVal:function(ie,ae){return(ie=ie.match(new RegExp("\\b"+ae+"(\\S+)\\b")))?ie[1]:null},getDataType:function(Me){var ae;return"bool"==(Me=Me.dataType)?ae="bool":"float"==Me||"integer"==Me?ae="number":"date"==Me&&(ae="date"),ae||"string"},getFn:(d={},function(ie){var ae=ie;return"string"!=typeof ie||(ae=d[ie])||(ae=window,ie.split(".").forEach(function(Me){ae=ae[Me]}),d[ie]=ae),ae}),isCtrl:function(ie){return ie.ctrlKey||ie.metaKey},isDateFormat:(l={},function(ie){var ae=l[ie];return null==ae?l[ie]=/^[mdy\s-\/\.,]*$/i.test(ie):ae}),isEmpty:function(ie){for(var ae in ie)return!1;return!0},isObject:function(ie){return"[object Object]"===Object.prototype.toString.call(ie)},juiToExcel:(y={},function(ie){var ae=y[ie];return ae||(ae=ie.replace(/y/g,"yy").replace(/DD/g,"dddd").replace(/D/g,"ddd").replace(/MM/g,"mmmm").replace(/M/g,"mmm"),y[ie]=ae),ae}),makePopup:function(ie,ae,Me){function Ce(qe){qe&&ce&&document.body.contains(ae)?lt.hide():(lt.remove(),K(document).off(Le),Me&&Me())}var Ue,Le="mousedown.pq"+(Ue=(Math.random()+"").replace(".",""))+" keydown.pq"+Ue,ce="input"==(Ue=ae?(ae.nodeName||"")[_b(54)]():"")||"textarea"==Ue,lt=K(ie);lt.addClass("pq-popup").on("keydown",function(qe){qe.keyCode==K.ui.keyCode.ESCAPE&&Ce(!0)}),K(ae).one("remove",function(){Ce()}),requestAnimationFrame(function(){K(document).on(Le,function(qe){var ut=K(qe.target);ie.contains(ut[0])||pq.isCtrl(qe)||ut.closest(".ui-datepicker").length||ut.closest(ae).length||Ce(!0)})})},moveItem:function(ie,ae,Me,Ce){return Ce<Me?(ae.splice(Me,1),ae.splice(Ce++,0,ie)):Me==Ce?Ce++:(ae.splice(Ce,0,ie),ae.splice(Me,1)),Ce},newLine:function(ie){return isNaN(ie)&&"string"==typeof ie?ie.replace(/(\r\n|\r|\n)/g,"<br>"):ie},numToExcel:(A={},function(ie){var ae=A[ie];return ae||(ae=ie.replace(/[^#0,.@%]/g,function(Me){return"\\"+Me}),A[ie]=ae),ae}),objectify:function(ie){for(var ae={},Me=ie.length;Me--;)ae[ie[Me]]=1;return ae},styleObj:function(ie){var ae;return"string"==typeof ie&&(ae=ie.split(";"),ie={},ae.forEach(function(Me){Me&&(ae=Me.split(":"))[0]&&ae[1]&&(ie[ae[0].trim()]=ae[1].trim())})),ie},tint:function(ce,ae){function Me(lt,qe){return lt=lt.slice(qe,qe+2),parseInt(lt,16)}function Ce(lt){return lt+=(255-lt)*ae,(lt=255<(lt=Math.round(lt))?255:lt).toString(16)[_b(37)]()}ce=ce.replace(/^#/,""),ae=+ae;var Le=Me(ce,0),Ue=Me(ce,2);return ce=Me(ce,4),Ce(Le)+Ce(Ue)+Ce(ce)},styleStr:function(ie){if("string"!=typeof ie){var ae,Me,Ce=[];for(ae in ie)(Me=ie[ae])&&Ce.push(ae+":"+Me);ie=Ce.length?Ce.join(";")+";":""}return ie},escapeXml:function(ie){var ae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};return ie&&(ie+"").replace(/(&|\<|\>|"|')/g,function(Me,Ce){return ae[Ce]})},unescapeXml:(G={amp:"&",lt:"<",gt:">",quot:'"',apos:"'"},function(ie){return ie.replace(/&(amp|lt|gt|quot|apos);/g,function(ae,Me){return G[Me]})})}),P.select=function(ie){var ae,Ce=ie.options,Le=ie.groupIndx,Ue=ie.labelIndx,ce=ie.valueIndx,lt=null!=Ue&&null!=ce,qe=null!=Le,ut=ie.prepend,De=ie.dataMap,je=["<select ",ie.attr," >"];if(ut)for(var Wt in ut)je.push('<option value="',Wt,'">',ut[Wt],"</option>");if(Ce&&Ce.length){for(var Xe=0,Yn=Ce.length;Xe<Yn;Xe++){var Jt=Ce[Xe];if(lt){var xn,Pt,Lt,Xn=Jt[ce],ni=Jt[_b(55)]?'disabled="disabled" ':"",en=Jt[_b(56)]?'selected="selected" ':"";null!=Xn&&(Lt=De?function(){for(var gr={},zi=0;zi<De.length;zi++){var En=De[zi];gr[En]=Jt[En]}return"data-map='"+JSON.stringify(gr)+"'"}():"",qe&&(Pt=Jt[_b(57)]?'disabled="disabled" ':"",ae!=(xn=Jt[Le])&&(null!=ae&&je.push("</optgroup>"),je.push('<optgroup label="',xn,'" ',Pt," >"),ae=xn)),Ue==ce?je.push("<option ",en,ni,Lt,">",Xn,"</option>"):je.push("<option ",en,ni,Lt,' value="',Xn,'">',Pt=Jt[Ue],"</option>"))}else if("object"==typeof Jt)for(var Wt in Jt)je.push('<option value="',Wt,'">',Jt[Wt],"</option>");else je.push("<option>",Jt,"</option>")}qe&&je.push("</optgroup>")}return je.push("</select>"),je.join("")},K.fn.pqval=function(ie){var ae;return ie?ie.incr?(ae=this.data("pq_value"),this.prop("indeterminate",!1),ae?this.prop("checked",ae=!1):!1===ae?(this.prop("indeterminate",!(ae=null)),this.prop("checked",!1)):this.prop("checked",ae=!0),this.data("pq_value",ae),ae):(this.data("pq_value",ae=ie.val),this.prop("indeterminate",!1),null===ae?(this.prop("indeterminate",!0),this.prop("checked",!1)):this.prop("checked",!!ae),this):this.data("pq_value")},P.xmlToArray=function(ie,ae){var Me=ae.itemParent,Ce=ae.itemNames,Le=[];return K(ie).find(Me).each(function(Ue,ce){var lt=K(ce),qe=[];K(Ce).each(function(ut,De){qe.push(lt.find(De).text().replace(/\r|\n|\t/g,""))}),Le.push(qe)}),Le},P.xmlToJson=function(ie,ae){var Me=ae.itemParent,Ce=ae.itemNames,Le=[];return K(ie).find(Me).each(function(Ue,ce){for(var lt=K(ce),qe={},ut=0,De=Ce.length;ut<De;ut++){var je=Ce[ut];qe[je]=lt.find(je).text().replace(/\r|\n|\t/g,"")}Le.push(qe)}),Le},P[_b(58)]=function(Ce){Ce=K(Ce);var ae=[],Me=[],Le=(Ce=Ce.children("tbody").children("tr")).length?K(Ce[0]):K(),Ue=1<Ce.length?K(Ce[1]):K();return Le.children("th,td").each(function(ce,ut){var qe="left";ut={title:(ut=K(ut)).html(),width:ut.width(),dataType:"string",align:qe=Ue.length&&Ue.find("td:eq("+ce+")").attr("align")||qe,dataIndx:ce},ae.push(ut)}),Ce.each(function(ce,lt){var qe;0!=ce&&(ce=K(lt),qe=[],ce.children("td").each(function(ut,De){qe.push(K.trim(K(De).html()))}),Me.push(qe))}),{data:Me,colModel:ae}},C={},function(ie,ae){var Me;if(ie){if(Me=ie.split(":"),Me=C[ie=ae&&1<Me.length?Me[1]:Me[0]])return Me;(ae=ie.match(v=v||/^([^#0]*|&#[^#0]*)?[\,\.#0]*?([\,\s\.]?)([#0]*)(([\,\s\.])([0]+))?([^#^0]*|&#[^#]*)?$/))&&ae.length&&(C[ie]=Me={symbol:ae[1]||"",thouSep:ae[2],thousand:ae[3].length,decSep:ae[5]||"",decimal:(ae[6]||[]).length,symbolEnd:ae[7]||""})}return Me||{symbol:"",symbolEnd:"",thouSep:",",thousand:3,decSep:".",decimal:2}}),J=(P[_b(59)]=function(ie,ae){if(!ae||"@"==ae)return ie+"";if(ie=parseFloat(ie),!isNaN(ie)&&"Infinity"!=ie&&"-Infinity"!=ie){0<(ae||"").indexOf("%")&&(ie*=100);for(var Me=ie<0,Ce=(ae=U(ae,Me)).symbol,Le=ae.symbolEnd,Ue=ae.thousand,ce=ae.thouSep,lt=ae.decSep,qe=(ie=ie.toFixed(ae=ae.decimal)).length,ut=ie.substring(0,qe-(ae+=lt.length)),De=(ie=ie.substring(qe-ae+lt.length,qe),ut.match(/\d/g).reverse()),je=[],Wt=0;Wt<De.length;Wt++)0<Wt&&Wt%Ue==0&&je.push(ce),je.push(De[Wt]);return(Me?"-":"")+Ce+(ut=(je=je.reverse()).join(""))+lt+ie+Le}},pq[_b(47)]=P[_b(59)],pq[_b(52)]=function(ie,Le){var Me=(Le=U(Le,ie<0)).symbol,Ce=Le.symbolEnd,Ue=Le.thouSep;return Le=Le.decSep,Ue="."===Ue?"\\.":Ue,ie=ie.replace(Me,"").replace(Ce,"").replace(new RegExp(Ue,"g"),""),Le?+ie.replace(Le,"."):ie},pq.valid={isFloat:function(ie){var ae=+ie;return!isNaN(ae)&&ae==ie},isInt:function(ie){var ae=parseInt(ie);return!isNaN(ae)&&ae==ie},isDate:function(ie){return!isNaN(Date.parse(ie))}},[]),W={},re=pq.toLetter=function(ie){var ae,Me,Ce=J[ie];return Ce||(Me=++ie%26,ae=ie/26|0,Me=Me?String[_b(60)](64+Me):(--ae,"Z"),Ce=ae?re(ae-1)+Me:Me,J[--ie]=Ce,W[Ce]=ie),Ce};function he(ie){var ae=ie.rtl;return null==ae?ie.rtl="rtl"==K(ie).css("direction"):ae}pq.toNumber=function(ie){var ae,Me,Ce=W[ie];if(null==Ce&&ie){for(ae=ie.length,Ce=-1,Me=0;Me<ae;Me++)Ce+=(ie[Me].charCodeAt(0)-64)*Math.pow(26,ae-Me-1);J[Ce]=ie,W[ie]=Ce}return Ce},pq[_b(61)]=function(ie,ae){for(var Me=[],Ce=0;Ce<ae;Ce++)Me[Ce]=re(Ce);var Le=[];for(Ce=0;Ce<ie;Ce++)for(var Ue=Le[Ce]=[],ce=0;ce<ae;ce++)Ue[ce]=Me[ce]+(Ce+1);return Le},D="w",I="scrollLeft",K(document).one("pq:ready",function(){var ie=K(_a(8)).appendTo("body"),ae=ie[0];0==ae[I]&&(ae[I]=100,D=0==ae[I]?"g":"i"),ie.remove()}),pq.scrollTop=function(ie){return ie.scrollTop},pq[I+"Val"]=function(ie,ae){return he(ie)?"w"==D?ie[_b(62)]-ie[_b(63)]-ae:"g"==D?-1*ae:ae:ae},pq[I]=function(ie,ae){var Me,Ce=he(ie);if(null==ae){if(Me=ie[I],Ce){if("w"==D)return ie[_b(62)]-ie[_b(63)]-Me;if("g"==D)return-1*Me}return Me}ie[I]=pq[I+"Val"](ie,ae)}}(jQuery),function(K){pq[_b(64)]={minLen:function(A,y,l){if(A=l(A),y=l(y),A.length>=y)return!0},nonEmpty:function(A){if(null!=A&&""!==A)return!0},maxLen:function(A,y,l){if(A=l(A),y=l(y),A.length<=y)return!0},gt:function(A,y,l){if(A=l(A),(y=l(y))<A)return!0},gte:function(A,y,l){if(A=l(A),(y=l(y))<=A)return!0},lt:function(A,y,l){if((A=l(A))<(y=l(y)))return!0},lte:function(A,y,l){if((A=l(A))<=(y=l(y)))return!0},neq:function(A,y,l){if((A=l(A))!==(y=l(y)))return!0},regexp:function(A,y){if(new RegExp(y).test(A))return!0}};var G=K.paramquery;G.cValid=function(A){this.that=A},G.cValid.prototype={_isValidCell:function(A){var y=this.that,l=A.column,d=l[_b(64)];if(!d||!d.length)return{valid:!0};function _(re){return y[_b(65)](re,v,!0)}var p=A.value,v=l.dataType,C=A.rowData;if(!C)throw"rowData required.";for(var D=0;D<d.length;D++){var I=d[D],P=I.on,B=I.type,U=!1,J=I.msg,W=I.value;if(!1!==P&&((P=pq[_b(64)][B])?U=null!=p&&P(p,W,_):B&&!(P={column:l,value:p,rowData:C,msg:J})===y.callFn(B,P)?(U=!1,J=P.msg):U=!0,!U))return{valid:!1,msg:J,column:l,warn:I.warn,dataIndx:l.dataIndx,validation:I}}return{valid:!0}},onScrollCell:function(A,y,l,d,_,p){var C=(v=this.that).options.bootstrap;if(A||(D=v[_b(66)]())&&D.$cell){(v=A||D.$cell).attr("title",y),A="tooltip";var v,D="open";C.on&&C.tooltip&&(A=C.tooltip,D="show");try{v[A]("destroy")}catch(B){}v[A]({trigger:"manual",position:{my:"left center+5",at:"right center"},content:function(){return(""==l?"":_a(4)+l+_a(5))+y},open:function(B,W){var J;W=W.tooltip,d&&W.addClass(d),p&&(J=W.attr("style"),W.attr("style",J+";"+p)),_&&W.tooltip.css(_)}})[A](D)}},isValidCell:function(Me){var y=this,l=y.that,d=Me.rowData,_=Me.rowIndx,Le=Me.value,p=Me.valueDef,Ce=Me.column,v=Me[_b(67)],C=l.options,D=Me[_b(68)],I=Ce.dataIndx,P=C.validation,B=C.warning,U=(J=C.editModel)[_b(69)],J=J.warnClass,W=document[_b(39)];if(Me[_b(70)]&&0==l.isEditable({rowIndx:_,rowData:d,column:Ce,dataIndx:I}))return{valid:!0};Le=(Me=this[_b(71)]({column:Ce,value:Le,rowData:d})).warn;var re,he,ie,ae,Ue=Me.msg;if((Ce=Me.valid)?l.data({rowData:d,dataIndx:I,data:"pq_valid"})&&(l[_b(72)]({rowData:d,rowIndx:_,dataIndx:I,cls:J+" "+U}),l.removeData({rowData:d,dataIndx:I,data:"pq_valid"})):(B=K.extend({},Le?B:P,Me.validation),re=B.css,he=B.cls,ie=B.icon,ae=B.style),D||Le)return Ce?{valid:!0}:(l.addClass({rowData:d,rowIndx:_,dataIndx:I,cls:Le?J:U}),l.data({rowData:d,dataIndx:I,data:{pq_valid:{css:re,icon:ie,style:ae,msg:Ue,cls:he}}}),Me);if(!Ce){if(null==_&&(null==(_=(P=l.getRowIndx({rowData:d,dataUF:!0})).rowIndx)||P.uf))return Me.uf=P.uf,Me;if(v){if(p){if(K(W).hasClass("pq-editor-focus")&&(B=C.editModel.indices)){if(D=B.rowIndx,Le=B.dataIndx,null!=_&&_!=D)throw _a(9)+_;if(I!=Le)throw _a(10)+I;l.editCell({rowIndx:D,dataIndx:I})}}else{l.goToPage({rowIndx:_});var ce=l.normalize({rowIndx:_,dataIndx:I}),lt=l.getCell(ce);l.scrollCell(ce,function(){y[_b(73)](lt,Ue,ie,he,re,ae),l.focus(ce)})}this[_b(73)](lt,Ue,ie,he,re,ae)}return Me}if(p&&(J=l[_b(66)]())&&J.$cell){(U=J.$cell).removeAttr("title");try{U.tooltip("destroy")}catch(qe){}}return{valid:!0}},isValid:function(A){var y,l=this.that,p=(A=A||{})[_b(68)],d=A[_b(67)],_=A[_b(70)];if(p=null!=p&&p,null!=(U=A.dataIndx))return P=l.columns[U],v=A.rowData||l.getRowData(A),W=(y=A.hasOwnProperty("value"))?A.value:v[U],(J=this[_b(74)]({rowData:v,checkEditable:_,rowIndx:A.rowIndx,value:W,valueDef:y,column:P,allowInvalid:p,focusInvalid:d})).valid||J.warn?{valid:!0}:J;if(null!=A.rowIndx||null!=A[_b(75)]||null!=A.rowData){for(var v=A.rowData||l.getRowData(A),C=l.colModel,he=[],D=0,I=C.length;D<I;D++){var P;if(!(P=C[D]).hidden){var U,J,W=v[U=P.dataIndx];if(!(J=this[_b(74)]({rowData:v,value:W,column:P,rowIndx:A.rowIndx,checkEditable:_,allowInvalid:p,focusInvalid:d})).valid&&!J.warn){if(!p)return J;he.push({rowData:v,dataIndx:U,column:P})}}}return p&&he.length?{cells:he,valid:!1}:{valid:!0}}var re=A.data||l.options.dataModel.data;if(he=[],!re)return null;for(D=0,I=re.length;D<I;D++){var ie=this.isValid({rowData:v=re[D],rowIndx:void 0,checkEditable:_,allowInvalid:p,focusInvalid:d}),ae=ie.cells;if(!1===p){if(!ie.valid)return ie}else ae&&ae.length&&(he=he.concat(ae))}return p&&he.length?{cells:he,valid:!1}:{valid:!0}}}}(jQuery),function(K){var G={options:{curPage:0,totalPages:0,totalRecords:0,msg:"",rPPOptions:[10,20,30,40,50,100],rPP:20,layout:["first","prev","|","strPage","|","next","last","|","strRpp","|","refresh","|","strDisplay"]},_create:function(){var y=this,l=y.options,p=l.rtl,d=y.element,_={first:y.initButton(l[_b(76)],"seek-"+(p?"end":"first"),"first"),"|":_a(11),next:y.initButton(l[_b(77)],"seek-"+(p?"prev":"next"),"next"),prev:y.initButton(l[_b(78)],"seek-"+(p?"next":"prev"),"prev"),last:y.initButton(l[_b(79)],"seek-"+(p?"first":"end"),"last"),strPage:y.getPageOf(),strRpp:y[_b(80)](),refresh:y.initButton(l.strRefresh,"refresh","refresh"),strDisplay:_a(12)+y.getDisplay()+"</span></td>"};p=l.layout.map(function(v){return _[v]}).join(""),y.listeners={},d.html(_a(13)+p+"</tr></table>"),d.addClass("pq-pager"),y.$first=d.find(".pq-page-first"),y.bindButton(y.$first,function(v){1<l.curPage&&y.onChange(v,1)}),y.$prev=d.find(".pq-page-prev"),y.bindButton(y.$prev,function(v){1<l.curPage&&y.onChange(v,l.curPage-1)}),y.$next=d.find(".pq-page-next"),y.bindButton(y.$next,function(v){l.curPage<l.totalPages&&y.onChange(v,l.curPage+1)}),y.$last=d.find(".pq-page-last"),y.bindButton(y.$last,function(v){l.curPage!==l.totalPages&&y.onChange(v,l.totalPages)}),y.$refresh=d.find(".pq-page-refresh"),y.bindButton(y.$refresh,function(v){if(!1===y._trigger("beforeRefresh",v))return!1;y._trigger("refresh",v)}),y.$display=d.find(".pq-page-display"),y.$select=d.find(".pq-page-select").val(l.rPP).on("change",y[_b(81)].bind(y)),y[_b(82)]=d.find(".pq-page-total"),y.$curPage=d.find(".pq-page-current"),y[_b(83)](y.$curPage)},_destroy:function(){this.element.empty()[_b(72)]("pq-pager")[_b(84)](),this._trigger("destroy")},_setOption:function(y,l){this._super(y,l="curPage"!=y&&"totalPages"!=y?l:+l)},_setOptions:function(y){var l,d=!1,_=this.options;for(l in y){var p=y[l],v=typeof p;"string"==v||"number"==v||"function"!=typeof p.splice&&!K[_b(43)](p)?p!=_[l]&&(this._setOption(l,p),d=!0):JSON.stringify(p)!=JSON.stringify(_[l])&&(this._setOption(l,p),d=!0)}return d&&this._refresh(),this}},A=(K.widget("paramquery.pqPager",G),pq.pager=function(y,l){return(y=K(y).pqPager(l)).data("paramqueryPqPager")||y.data("paramquery-pqPager")},G=K.paramquery).pqPager;A.regional={},A.defaults=A.prototype.options,K.extend(A.prototype,{bindButton:function(y,l){y.bind("click keydown",function(d){if("click"==d.type||d.keyCode==K.ui.keyCode.ENTER)return l.call(this,d)})},bindCurPage:function(y){var l=this,d=this.options;y.bind("keydown",function(_){_.keyCode===K.ui.keyCode.ENTER&&K(this).trigger("change")}).bind("change",function(_){var p=K(this),v=p.val();return isNaN(v)||v<1||(v=parseInt(v))!==d.curPage&&(v>d.totalPages||!1===l.onChange(_,v))?(p.val(d.curPage),!1):void 0})},initButton:function(y,l,d){return _a(14)+d+_a(15)+y+_a(16)+l+_a(17)},onChange:function(y,l){if(!1===this._trigger("beforeChange",y,l={curPage:l}))return!1;this._trigger("change",y,l)},onChangeSelect:function(y){var l=K(y.target),d=+l.val(),_={rPP:d};if(!1===this._trigger("beforeChange",y,_))return l.val(this.options.rPP),!1;this.options.rPP=d,this._trigger("change",y,_)},refresh:function(){this._destroy(),this._create()},format:function(y){var l=y.format;return function(d){return l?pq[_b(47)](d,l):d}},_refresh:function(){var y=this,l=y.options,d=l.curPage>=l.totalPages;y.setDisable(y.$next,d),y.setDisable(y.$last,d),y.setDisable(y.$first,d=l.curPage<=1),y.setDisable(y.$prev,d),y[_b(82)].text(y.format(l)(l.totalPages)),y.$curPage.val(l.curPage),y.$select.val(l.rPP),y.$display.html(this.getDisplay()),y._trigger("refreshView")},getDisplay:function(){var y,l,d,_=this.options,p=this.format(_),v=0<_[_b(85)]?(y=_.rPP,v=_.strDisplay||"",l=_.curPage,(_=_[_b(85)])<(d=l*y)&&(d=_),(v=(v=v.replace("{0}",p(1+(l-1)*y))).replace("{1}",p(d))).replace("{2}",p(_))):"";return v},getPageOf:function(){var y=this.options;return"<td><span>"+(y.strPage||"").replace("{0}",_a(18)+y.curPage+_a(19)).replace("{1}",_a(20)+this.format(y)(y.totalPages)+"</span>")+"</span></td>"},getRppOptions:function(){var y,l,d,_,I,p=(I=this.options).rPPOptions,v=0,C=p.length,D=this.format(I);if((I=I.strRpp||"")&&-1!=I.indexOf("{0}")){for(_=[_a(21)];v<C;v++)l=+(l=p[v])==l?D(y=l):l[y=Object.keys(l)[0]],_.push('<option value="',y,'">',l,"</option>");_.push("</select>"),d=_.join(""),I=I.replace("{0}",d)+"</span>"}return _a(22)+I+"</span></td>"},getInstance:function(){return{pager:this}},_trigger:G._trigger,on:G.on,one:G.one,off:G.off,setDisable:function(y,l){y[l?"addClass":"removeClass"]("disabled").css("pointer-events",l?"none":"").attr("tabindex",l?"":"0")}})}(jQuery),function(K){function G(){}G.prototype={belongs:function(p){if(p.target==this.that.element[0])return!0},setTimer:function(p,v){clearTimeout(this._timeID),this._timeID=setTimeout(function(){p()},v)}};var A=K.paramquery,y=(A.cClass=G,{widgetEventPrefix:"pqgrid"}),l=(y[_b(86)]=function(p,v){return this[_b(87)]=p,K(document)[_b(53)]("pq:ready"),K.Widget.prototype[_b(86)].apply(this,arguments)},y._create=function(){var p=this,v=p.options,C=p.element,D=p[_b(35)],he=(ie=v.bootstrap).on,I=v[_b(88)]&&!he,P=v[_b(89)],B=_a(23),U=v.ui,J=(K(document)[_b(53)]("pqGrid:bootup",{instance:this}),p.BS_on=he,v[_b(90)]||(v[_b(90)]={on:!1,collapsed:!1}),v.flexHeight&&(v.height="flex"),v.flexWidth&&(v.width="flex"),p.iRefresh=new A.cRefresh(p),p.iKeyNav=new A.cKeyNav(p),p.iValid=new A.cValid(p),p.tables=[],p.$tbl=null,p.iCols=new A.cColModel(p),p.iSort=new A.cSort(p),C.on("scroll"+D,function(){this.scrollLeft=0,this.scrollTop=0}).on("mousedown"+D,p._mouseDown.bind(p)),(he?ie:U).grid),W=he?"":U.header_o,re=he?"":U.bottom,ie=(he=(he?ie:U).top,C.empty().attr({role:"grid",dir:v.rtl?"rtl":"ltr"}).addClass("pq-grid pq-theme "+J+" "+(I?" ui-corner-all":"")).html([_a(24),he," ",I?" ui-corner-top":"","'>",_a(25),I?" ui-corner-top":"","'>&nbsp;</div>",_a(26),"</div>",_a(27),_a(28),v.toolPanel.show?"":"none",";'></div>",_a(29),v[_b(91)].show?"":"none",";'></div>",_a(30),_a(31),W,_a(32),P?B:"",_a(33),P?"":B,"</div>",_a(34),"</div>",_a(35),re," ",I?" ui-corner-bottom":"","'>",_a(36),"</div>"].join("")),p.setLocale(),p.$bottom=K(".pq-grid-bottom",C),p.$summary=K(".pq-summary-outer",C),p.$toolPanel=C.find(".pq-tool-panel"),p[_b(92)]=C.find(".pq-tool-panel-rules"),p.$top=K("div.pq-grid-top",C),v.showTop||p.$top.css("display","none"),p.$title=K("div.pq-grid-title",C),v.showTitle||p.$title.css("display","none"),p[_b(93)]=K(".pq-grid-center",C).on("scroll",function(){this.scrollTop=0}));p.$header=K(".pq-header-outer",ie).on("scroll",function(){this.scrollTop=0,this.scrollLeft=0}).on("focus",function(ae){p[_b(94)](ae)}),p.$footer=K(".pq-grid-footer",C),U=p.$cont=K(".pq-body-outer",ie),ie.on("mousedown",p[_b(95)].bind(p)),p.iRenderB=new(pq[_b(96)])(p,{$center:ie,$b:U,$sum:p.$summary,header:!0,$h:p.$header}),p._trigger("render",null,{dataModel:p.options.dataModel,colModel:p.colModel}),"ontouchend"in document&&(p.addTouch(),p.contextIOS(C)),C.on("contextmenu"+D,p.onContext.bind(p)),U.on("click",_a(37),function(ae){if(!0!==K.data(ae.target,p.widgetName+".preventClickEvent"))return p.evtBelongs(ae)?p[_b(97)](ae):void 0}).on("dblclick",".pq-grid-cell",function(ae){if(p.evtBelongs(ae))return p[_b(98)](ae)}),U.on("focusout",function(){p.onblur()}).on("focus",function(ae){p.onfocus(ae)}).on("mousedown",p[_b(99)].bind(p)).on("change",p._onChange(p)).on("mouseenter",_a(37),p[_b(100)](p)).on("mouseenter",".pq-grid-row",p[_b(101)](p)).on("mouseleave",".pq-grid-cell",p[_b(102)](p)).on("mouseleave",".pq-grid-row",p[_b(103)](p)).on("keyup",p._onKeyUp(p)),v[_b(104)].native||this[_b(105)](),ie.bind("keydown.pq-grid",p._onKeyDown(p)),this[_b(106)](),p.iRows=new A.cRows(p),p[_b(107)](),p._initPager(),p[_b(108)](),p[_b(109)](),p[_b(110)]=new(A[_b(111)])(p),this._mouseInit()},y.contextIOS=function(p){var v,C,D,I="contextmenu";p.on("touchstart",function(P){v=1,setTimeout(function(){var B;v&&1==(D=P[_b(32)].touches).length&&(B=K.Event(I,B=D[0]),K(P.target).trigger(B),C=1)},600),p.one(I,function(){v=0})}).on("touchmove touchend",function(P){v=0,C&&(C=0,P[_b(29)]())})},y.addTouch=function(){var p,v,C=this[_b(93)][0];C[_b(112)]("touchstart",function(U){var I,P,B=U.target;U=U[_b(113)][0],p?B&&B==p.target&&(I=p.x-U.pageX,P=p.y-U.pageY,Math.sqrt(I*I+P*P)<=12&&(v=p,setTimeout(function(){v=null},500))):(p={x:U.pageX,y:U.pageY,target:B},setTimeout(function(){p=null},400))},!0),C[_b(112)]("touchend",function(D){var I=D.target;v&&I==v.target&&K(I).trigger("dblclick",D)})},y._mouseDown=function(p){var v=this;K(p.target).closest(".pq-editor-focus").length&&(this[_b(114)]=!0,window.setTimeout(function(){v[_b(114)]=!1},0))},y.destroy=function(){for(var p in this._trigger("destroy"),this._super(),K(window).off("resize"+this[_b(35)]),this)delete this[p];this.options=void 0,K.fragments={}},y.setLocale=function(){var p=this.options,v=p.locale;p.strLocal!=v&&(K.extend(!0,p,A.pqGrid.regional[v]),K.extend(p.pageModel,A.pqPager.regional[v]))},y._setOption=function(p,v){function C(){B[p]=v}function D(ae){return ae?"addClass":"removeClass"}var I,P=this,B=P.options,U=P.pageI,J=P.iRenderB,W=P.iRenderSum,re=P[_b(115)],he=B.dataModel;if(!P.$title)return C(),P;if("height"===p)C(),P[_b(108)]();else if("locale"==p||"pageModel"==p)C(),"locale"==p&&P.setLocale(),U&&U.destroy();else if("width"===p)C(),P[_b(108)]();else if("title"==p)C(),P[_b(106)]();else if("roundCorners"==p){C();var ie=D(v);P.element[ie]("ui-corner-all"),P.$top[ie]("ui-corner-top"),P.$bottom[ie]("ui-corner-bottom")}else if("freezeCols"==p)v=parseInt(v),!isNaN(v)&&0<=v&&v<=P.colModel.length-2&&C();else if("freezeRows"==p)v=parseInt(v),!isNaN(v)&&0<=v&&C();else if("resizable"==p)C(),P[_b(108)]();else if("draggable"==p)C(),P[_b(109)]();else if("dataModel"==p)v.data!==he.data&&he.dataUF&&(he.dataUF.length=0),C();else{if("groupModel"==p)throw _a(38);if("treeModel"==p)throw _a(39);"colModel"===p||"columnTemplate"==p?(C(),P.iCols.init()):"disabled"===p?(P._super(p,v),!0===v?P._disable():P._enable()):"strLoading"===p?(C(),P[_b(116)]()):"showTop"===p?(C(),P.$top.css("display",v?"":"none")):"showTitle"===p?(C(),P.$title.css("display",v?"":"none")):"showToolbar"===p?(C(),P._toolbar.widget().css("display",v?"":"none")):"collapsible"===p?(C(),P[_b(117)]()):"showBottom"===p?(C(),P.$bottom.css("display",v?"":"none")):"wrap"==p||"hwrap"==p?(C(),("wrap"==p?J.$tbl.add(W.$tbl):re.$tbl)[D(!v)]("pq-no-wrap")):"rowBorders"===p?(C(),ie=D(v),J.$tbl[ie](I="pq-td-border-top"),W.$tbl[ie](I)):"columnBorders"===p?(C(),ie=D(v),J.$tbl[ie](I="pq-td-border-right"),W.$tbl[ie](I)):"strNoRows"===p?(C(),P.$cont.find(".pq-grid-norows").text(v)):C()}return P},y.options={cancel:_a(40),trigger:!1,bootstrap:{on:!1,thead:_a(41),tbody:_a(42),grid:"panel panel-default",top:"",btn:"btn btn-default",groupModel:{icon:[_a(43),_a(44)]},header_active:"active"},ui:{on:!0,grid:_a(45),top:"ui-widget-header",bottom:"",header_o:"ui-widget-header",header:"ui-state-default",header_active:""},format:function(p,v,C,D){var I="format";return C[I]||D[I]||v[I]},cellDatatype:function(p,v){return v.dataType},collapsible:{on:!0,toggle:!0,collapsed:!1,_collapsed:!1,refreshAfterExpand:!0,css:{zIndex:1e3}},colModel:null,columnBorders:!0,dataModel:{data:[],dataUF:[],cache:!1,dataType:"JSON",location:"local",sorting:"local",sortDir:"up",method:"GET"},direction:"",draggable:!1,editable:!0,editModel:{pressToEdit:!0,charsAllow:["0123456789.-=eE+","0123456789-=eE+"],clicksToEdit:2,filterKeys:!0,reInt:/^([-]?[1-9][0-9]*|[-]?[0-9]?)(e[-+]?)?[0-9]*$/i,reFloat:/^[-]?[0-9]*\.?[0-9]*(e[-+]?)?[0-9]*$/i,onBlur:"validate",saveKey:K.ui.keyCode.ENTER,onSave:"nextFocus",onTab:"nextFocus",allowInvalid:!1,invalidClass:_a(46),warnClass:_a(47),validate:!0},editor:{select:!1,type:"contenteditable"},summaryOptions:{number:_a(48),date:"count,max,min",string:"count"},summaryTitle:{avg:"Avg: {0}",count:"Count: {0}",max:"Max: {0}",min:"Min: {0}",stdev:"Stdev: {0}",stdevp:"Stdevp: {0}",sum:"Sum: {0}"},validation:{icon:"ui-icon-alert",cls:"ui-state-error",style:"padding:3px 10px;"},warning:{icon:"ui-icon-info",cls:"",style:"padding:3px 10px;"},freezeCols:0,freezeRows:0,freezeBorders:!0,calcDataIndxFromColIndx:!0,height:400,hoverMode:"null",locale:"en",maxColWidth:2e3,minColWidth:50,minWidth:100,menuUI:{tabs:["hideCols","filter"],buttons:["clear","ok"],gridOptions:{autoRow:!1,copyModel:{render:!0},editable:function(p){return!p.rowData[_b(55)]},fillHandle:"",filterModel:{header:!0,on:!0},hoverMode:"row",hwrap:!1,rowBorders:!1,rowHt:24,rowHtHead:23,scrollModel:{autoFit:!0},showTop:!1,height:300,wrap:!1}},mergeCells:[],numberCell:{width:30,title:"",resizable:!0,minWidth:30,maxWidth:100,show:!0},pageModel:{curPage:1,totalPages:0,rPP:10,rPPOptions:[10,20,50,100]},refreshCompareBy:"value",resizable:!1,rowBorders:!0,rowResize:!0,autoRow:!0,scrollModel:{autoFit:!1},selectionModel:{column:!0,type:"cell",onTab:"nextFocus",row:!0,mode:"block"},showBottom:!0,showHeader:!0,showTitle:!0,showToolbar:!0,showTop:!0,sortable:!0,sql:!1,stringify:!0,stripeRows:!0,title:"&nbsp;",toolPanelRules:{},treeModel:null,width:"auto",wrap:!0,hwrap:!0},K.widget("paramquery._pqGrid",K.ui.mouse,y),A._pqGrid.prototype);function d(p){return _a(49)+p+"' ></span>"}function _(p){return _a(50)+p+"'></span></span>"}l.setData=function(p){var v=(C=this.options).groupModel.pivot,C=C.reactive,D=this.Group();v&&D.option({pivot:!1}),this.option("dataModel.data",p),C||this[_b(118)](),v&&D.option({pivot:!0})},l.refreshCM=function(p,v){p&&(this.options.colModel=p),this.iCols.init(v)},l.evtBelongs=function(p){return K(p.target).closest(".pq-grid")[0]==this.element[0]},l.readCell=function(p,v,C,D,I){if(!C||!1!==C.isRootCell(D,I,"o"))return p[v.dataIndx]},l.saveCell=function(p,v,C){p[v.dataIndx]=C},l[_b(119)]=function(){var p=this.element,v=p.data();(v.resizable||v[_b(120)]||v["ui-resizable"])&&p.resizable("destroy")},l._disable=function(){null==this.$disable&&(this.$disable=K(_a(51)).css("opacity",.2).appendTo(this.element))},l._enable=function(){this.$disable&&(this.element[0][_b(121)](this.$disable[0]),this.$disable=null)},l._destroy=function(){var p=this[_b(35)];this.loading&&this.xhr.abort(),this[_b(119)](),this[_b(122)](),this.element.off(p),K(window).unbind(p),K(document).unbind(p),this.element.empty().css("height","").css("width","")[_b(72)](_a(52)).removeData()},l._onKeyUp=function(p){return function(v){p.evtBelongs(v)&&p._trigger("keyUp",v,null)}},l.onKeyDown=function(p){if(K(p.target).closest(".pq-header-outer").length)return this._trigger("headerKeyDown",p,null);!1!==this.iKeyNav[_b(123)](p)&&this._trigger("keyDown",p,null)},l._onKeyDown=function(p){return function(v){p.evtBelongs(v)&&p.onKeyDown(v,p)}},l.collapse=function(p){function v(){D.css("overflow","hidden"),P.addClass(_a(53))[_b(72)](_a(54)),D.hasClass("ui-resizable")&&D.resizable("destroy"),C._toolbar&&C._toolbar.disable(),I.collapsed=I._collapsed=!0,I.animating=!1,C._trigger("collapse")}p=p||{};var C=this,D=C.element,I=C.options[_b(90)],P=I.$collapse.children("span");if(I._collapsed)return!1;I.htCapture=D.height(),!1===p.animate?(D.height(23),v()):(I.animating=!0,C.disable(),D.animate({height:"23px"},function(){v()}))},l.expand=function(p){function v(){D.css("overflow",""),I._collapsed=I.collapsed=!1,C[_b(108)](),I[_b(124)]&&C.refresh(),B.addClass(_a(54))[_b(72)](_a(53)),C._toolbar&&C._toolbar.enable(),C.enable(),I.animating=!1,C._trigger("expand")}var C=this,D=C.element,I=C.options[_b(90)],P=I.htCapture,B=I.$collapse.children("span");if(!1===I._collapsed)return!1;!1===(p=p||{}).animate?(D.height(P),v()):(I.animating=!0,D.animate({height:P},function(){v()}))},l[_b(117)]=function(){var p=this,v=this.$top,C=this.options,D=this.BS_on,I=C[_b(90)];I.$stripe||(C=K([_a(55),"</div>"].join("")).appendTo(v),I.$stripe=C),I.on?I.$collapse||(I.$collapse=K(D?d("collapse-down"):_("circle-triangle-n")).appendTo(I.$stripe).click(function(){I.collapsed?p.expand():p.collapse()})):I.$collapse&&(I.$collapse.remove(),delete I.$collapse),I.collapsed&&!I._collapsed?p.collapse({animate:!1}):!I.collapsed&&I._collapsed&&p.expand({animate:!1}),I.toggle?I.$toggle||(I.$toggle=K(D?d("fullscreen"):_("arrow-4-diag")).prependTo(I.$stripe).click(function(){p.toggle()})):I.$toggle&&(I.$toggle.remove(),delete I.$toggle),I.toggled&&!I.state&&this.toggle()},l.toggle=function(p){p=p||{};var v,C,D=this.options,I=D[_b(90)],P=this.element,B=I.state,U=B?"min":"max",J=K("html"),W=K(window),re=K(document.body);if(!1===this._trigger("beforeToggle",null,{state:U}))return!1;"min"==U?(C=B.doc,this.option({height:(v=B.grid).height,width:v.width,maxHeight:v.maxHeight,maxWidth:v.maxWidth}),P[0].style.cssText=v.cssText,re[0].style.cssText=C.cssText,J.css({overflow:"visible"}),window.scrollTo(C.scrollLeft,C.scrollTop),I.state=null):(v={height:D.height,width:D.width,cssText:P[0].style.cssText,maxHeight:D.maxHeight,maxWidth:D.maxWidth},this.option({height:"100%",width:"100%",maxHeight:null,maxWidth:null}),P.css(K.extend({position:"fixed",left:0,top:0,margin:0},I.css)),C={scrollLeft:W.scrollLeft(),scrollTop:W.scrollTop(),cssText:re[0].style.cssText},re.css({height:0,width:0,overflow:"hidden",position:"static"}),J.css({overflow:"hidden"}),window.scrollTo(0,0),I.state={grid:v,doc:C}),I.toggled=!!I.state,p.refresh||(this._trigger("toggle",null,{state:U}),this[_b(108)](),this.refresh(),W.trigger("resize",{$grid:P,state:U}))},l[_b(98)]=function(p){var v=this,C=K(p[_b(125)]),D=v[_b(34)]({$td:C});D.$td=C,0!=v._trigger("cellDblClick",p,D)&&(1<v.options.editModel[_b(126)]&&v.isEditable(D)&&v.editCell(D),D.$tr=C.closest(".pq-grid-row"),v._trigger("rowDblClick",p,D))},l[_b(65)]=function(p,v,C){if("="==(p+"")[0])return p;var D;if("date"==v)return D=Date.parse(p),isNaN(D)?void 0:C?D:p;if("integer"==v)D=parseInt(p);else{if("float"!=v)return"bool"==v?null==p?p:0==(D=K.trim(p)[_b(54)]()).length?null:"true"==D||"yes"==D||"1"==D||"false"!=D&&"no"!=D&&"0"!=D&&Boolean(D):"object"==v||null==p?p:K.trim(p);D=parseFloat(p)}return isNaN(D)||null==D?null==p?p:null:D},l.isValid=function(p){return this.iValid.isValid(p)},l[_b(127)]=function(p){p=p||{};var C=(C=this.getChanges()).updateList.concat(C.addList);return p.data=C,this.isValid(p)},l[_b(128)]=function(C){var v,D=(C=this.normalize(C)).rowData;return null==(v=D&&(D=D[_b(129)])?(D[C.dataIndx]||{}).edit:v)&&null!=(D=C.column.editable)?"function"==typeof D?D.call(this,C):D:v},l[_b(130)]=function(p){var C,v=this.options.editable;return null==(C=(C=p.rowData)&&(C.pq_rowprop||{}).edit)?"function"==typeof v?v.call(this,this.normalize(p)):v:C},l.isEditable=function(p){var v=this[_b(128)](p);return null==v?this[_b(130)](p):v},l[_b(131)]=function(){var p=this.pdata;p&&p.length||((p=this.$cont[0])[_b(132)]("tabindex",0),p.focus())},l[_b(95)]=function(){var p=this;p[_b(133)]=function(v){K(document).unbind("mouseup"+p[_b(35)],p[_b(133)]),p._trigger("mousePQUp",v,null)},K(document).bind("mouseup"+p[_b(35)],p[_b(133)])},l[_b(99)]=function(p){var v,C;p.which&&1!=p.which||!this.evtBelongs(p)||(C=(v=K(p.target)).closest(_a(37)),v.is("a")||(C.length&&(p[_b(125)]=C[0],this[_b(134)](p)),p[_b(135)]()||((C=v.closest(".pq-grid-row")).length&&(p[_b(125)]=C[0],this[_b(136)](p)),p[_b(135)]()||this[_b(131)](p))))},l[_b(134)]=function(p){var v=K(p[_b(125)]),C=this[_b(34)]({$td:v});null!=C.rowIndx&&((C=this.iMerge[_b(137)](C.rowIndx,C.colIndx,!0)).$td=v,this._trigger("cellMouseDown",p,C))},l[_b(136)]=function(p){var v=K(p[_b(125)]),C=this.getRowIndx({$tr:v});C.$tr=v,this._trigger("rowMouseDown",p,C)},l[_b(100)]=function(p){return function(v){if(p.evtBelongs(v)){var C=K(this),D=p.options,I=p[_b(34)]({$td:C});if(null!=I.rowIndx&&null!=I.colIndx&&!1!==p._trigger("cellMouseEnter",v,I))return"cell"==D.hoverMode&&p[_b(138)](C),!0}}},l._onChange=function(p){var v,C,D;function I(){if(v&&C&&C.target==v.target){for(var P in{ctrlKey:0,metaKey:0,shiftKey:0,altKey:0})C[P]=v[P];p._trigger("valChange",C,D),C=v=void 0}}return p.on("cellClickDone",function(P){v=P[_b(32)],I()}),function(P){var B,U;p.evtBelongs(P)&&(U=(B=K(P.target)).closest(".pq-grid-cell")).length&&(D=p[_b(34)]({$td:U}),(D=p.normalize(D)).input=B[0],C=P,I())}},l[_b(101)]=function(p){return function(v){if(p.evtBelongs(v)){var D=K(this),C=p.options,I=(D=p.getRowIndx({$tr:D}))[_b(75)];if(!1!==p._trigger("rowMouseEnter",v,D))return"row"==C.hoverMode&&p[_b(139)](I),!0}}},l[_b(102)]=function(p){return function(v){p.evtBelongs(v)&&(v=K(this),"cell"==p.options.hoverMode&&p[_b(140)](v))}},l[_b(103)]=function(p){return function(v){var C,D,I;p.evtBelongs(v)&&(C=K(this),I=(D=p.getRowIndx({$tr:C}))[_b(75)],!1!==p._trigger("rowMouseLeave",v,{$tr:C,rowIndx:D.rowIndx,rowIndxPage:I})&&"row"==p.options.hoverMode&&p[_b(141)](I))}},l[_b(84)]=function(){this.element[_b(72)]("pq-disable-select").off("selectstart"+this[_b(35)])},l[_b(105)]=function(){this.element.addClass("pq-disable-select").on("selectstart"+this[_b(35)],function(p){var v=p.target,C=K(v);if(v)return!!C.is(_a(56))||!!C.closest(".pq-native-select").length||void p[_b(29)]()})},l[_b(97)]=function(p){var v=this,C=v.options.editModel,D=K(p[_b(125)]),I=v[_b(34)]({$td:D}),P=(I=v.normalize(I)).colIndx;I.$td=D,I.evt=p,0!=v._trigger("beforeCellClick",p,I)&&(v._trigger("cellClick",p,I),null==P||P<0||(1==C[_b(126)]&&v.isEditable(I)&&v.editCell(I),I.$tr=D.closest(".pq-grid-row"),v._trigger("rowClick",p,I)))},l[_b(142)]=function(C){var v=(C=this.iRenderB[_b(143)](C))[0],D=(C=C[1],this[_b(144)]);return{ri:v,colIndx:C,column:(D[v]||D[v-1])[C],filterRow:!D[v]}},l.onContext=function(p){function v(J){B._trigger(J,p,P)}var C,D,I,P,B=this,U=p.target;if(B.evtBelongs(p)){D=U;do{if(I=K(D),P={ele:D},I.is(".pq-grid")){P={},v("context");break}if(I.is("img")?(P.type="img",C=1):I.is(_a(37))?(P=B[_b(34)]({$td:I})).rowData&&(P.type=P.column?"cell":"num",P.$td=I,C=1,v("cellRightClick")):I.is(".pq-tab-item")?(P.id=B.iTab.getId(I),P.type="tab",C=1):I.is(".pq-grid-col")&&((P=B[_b(142)](D)).type="head",P.$th=I,C=1,v("headRightClick")),C){v("context");break}}while(D=D.parentNode)}},l[_b(138)]=function(p){p.addClass(_a(57))},l[_b(140)]=function(p){p[_b(72)](_a(57))},l[_b(139)]=function(p){isNaN(p)||(p=this.getRow({rowIndxPage:p}))&&p.addClass(_a(58))},l[_b(141)]=function(p){isNaN(p)||(p=this.getRow({rowIndxPage:p}))&&p[_b(72)](_a(58))},l[_b(145)]=function(){return{dataModel:this.options.dataModel,data:this.pdata,colModel:this.options.colModel}},l._initPager=function(){var p,v=this,C=v.options,D=C.pageModel;D.type&&((p=K.extend(p={bootstrap:C.bootstrap,change:function(I,P){v.blurEditor({force:!0});var B=v.options.pageModel;null!=P.curPage&&(B.prevPage=B.curPage,B.curPage=P.curPage),null!=P.rPP&&(B.rPP=P.rPP),"remote"==B.type?v[_b(146)]({callback:function(){v[_b(147)]({apply:!0,header:!1})}}):v[_b(17)]({header:!1,source:"pager"})},refresh:function(){v[_b(118)]()}},D)).rtl=C.rtl,v.pageI=pq.pager(D.appendTo||this.$footer,p).on("destroy",function(){delete v.pageI}))},l[_b(107)]=function(){this.$loading&&this.$loading.remove(),this.$loading=K(_a(59)).appendTo(this.element),K([_a(60),this.options.strLoading,"...</div></div>"].join("")).appendTo(this.$loading),this.$loading.find("div.pq-loading-bg").css("opacity",.2)},l[_b(116)]=function(){this.$loading.find("div.pq-loading-mask").children("div").html(this.options.strLoading)},l[_b(148)]=function(){null==this[_b(149)]&&(this[_b(149)]=0),this[_b(149)]++,this.$loading.show()},l[_b(150)]=function(){0<this[_b(149)]&&this[_b(149)]--,this[_b(149)]||this.$loading.hide()},l[_b(151)]=function(){var C,p=(v=(C=this.options).dataModel).data||[],v=v.dataUF||[];return"remote"==(C=C.pageModel).location?C[_b(85)]:p.length+v.length},l[_b(152)]=function(p){p=p||{};var v,C,D,I,P,B=this,U=B.options,J=U.pageModel,W=(W=U.dataModel).data,re=J.type,he=B[_b(153)];if(B._trigger("beforeRefreshData",null,{}),"local"==re?(I=J[_b(85)]=W.length,J.totalPages=I=Math.ceil(I/J.rPP),J.curPage>I&&(J.curPage=I),I&&!J.curPage&&(J.curPage=1),(D=J.curPage*J.rPP)>W.length&&(D=W.length),B.pdata=W.slice(P=0<=(P=(J.curPage-1)*J.rPP)?P:0,D),P=P):"remote"==re?(J.totalPages=I=Math.ceil(J[_b(85)]/J.rPP),J.curPage>I&&(J.curPage=I),I&&!J.curPage&&(J.curPage=1),(D=J.rPP)>W.length&&(D=W.length),B.pdata=W.slice(0,D),P=J.rPP*(J.curPage-1)):B.pdata=U[_b(154)]?W.slice(0):W,B.riOffset=0<=P?P:0,B._trigger("dataReady",null,p),B._trigger("dataReadyAfter",null,p),0!=p[_b(155)])for(v in he)C=he[v],delete he[v],B._trigger(v,C.evt,C.ui)},l[_b(156)]=function(p){p=p||{};var v=this,C="",D="",I=v.options,P=I.dataModel,B=I.sortModel,U=I[_b(157)],J=I.pageModel,W={},re={},he={};return"function"==typeof P.getUrl?((I=P.getUrl.call(v,I={colModel:v.colModel,dataModel:P,sortModel:B,groupModel:I.groupModel,pageModel:J,filterModel:U}))&&I.url&&(C=I.url),I&&I.data&&(D=I.data)):"string"==typeof P.url&&(C=P.url,"remote"==B.type&&(p.initBySort||v.sort({initByRemote:!0}),(I=v.iSort[_b(158)]())&&(W={pq_sort:I})),"remote"==J.type&&(he={pq_curpage:J.curPage,pq_rpp:J.rPP}),"local"!=U.type&&(B=v[_b(159)][_b(160)]())&&(v[_b(153)].filter={ui:{}},re={pq_filter:B}),D=K.extend({pq_datatype:P.dataType},re,he,W,v.postData(P),P[_b(161)])),{url:C,dataURL:D}},l.postData=function(p){var v=p.postData;return"function"==typeof v?v.call(this,{colModel:this.colModel,dataModel:p}):v},l[_b(146)]=function(p){p=p||{};var v=this,C=v.options.dataModel,D=(v.loading&&v.xhr.abort(),I=v[_b(156)](p)).url,I=I.dataURL;D&&(v.loading=!0,v[_b(148)](),v.xhr=K.ajax({url:D,dataType:C.dataType,async:null==C.async||C.async,cache:C.cache,contentType:C[_b(162)],type:C.method,data:I,beforeSend:function(P,B){if("function"==typeof C.beforeSend)return C.beforeSend.call(v,P,B)},success:function(P,B,U){v[_b(163)](P,B,U,p)},error:function(P,B,U){if(v[_b(150)](),v.loading=!1,"function"==typeof C.error)C.error.call(v,P,B,U);else if("abort"!=U)throw"Error : "+U}}))},l[_b(163)]=function(p,J,C,D){var U,I=this,P=I.colModel,B=(U=I.options).pageModel;J="function"==typeof(U=U.dataModel).getData?U.getData.call(I,p,J,C):p,U.data=J.data,"remote"==B.type&&(null!=J.curPage&&(B.curPage=J.curPage),null!=J[_b(85)]&&(B[_b(85)]=J[_b(85)])),I[_b(150)](),I.loading=!1,I._trigger("load",null,{dataModel:U,colModel:P}),D.callback&&D.callback()},l[_b(106)]=function(){this.$title.html(this.options.title)},l[_b(122)]=function(){var p=this.element,v=p.parent(".pq-wrapper");v.length&&v.data("draggable")&&(v.draggable("destroy"),this.$title[_b(72)](_a(61)),p.unwrap(".pq-wrapper"))},l[_b(109)]=function(){var v=this.element,C=this.$title;this.options.draggable?(C.addClass(_a(61)),v.parent(".pq-wrapper").length||v.wrap(_a(62)),v.parent(".pq-wrapper").draggable({handle:C})):this[_b(122)]()},l[_b(108)]=function(){var p,v=this,C=this.element,D=this.options,I=-1<(D.width+"").indexOf("%"),P=-1<(D.height+"").indexOf("%"),B="auto"==D.width,U="flex"==D.width,J="flex"==D.height;!D.resizable||(J||P)&&(U||I||B)?this[_b(119)]():(p="e,s,se",J||P?p="e":(U||I||B)&&(p="s"),J=!0,C.hasClass("ui-resizable")&&(p==C.resizable("option","handles")?J=!1:this[_b(119)]()),J&&C.resizable({helper:"ui-state-default",handles:p,minWidth:D.minWidth,minHeight:D.minHeight||100,delay:0,start:function(W,re){K(re.helper).css({opacity:.5,background:"#ccc",border:"1px solid steelblue"})},stop:function(){var W=v.element,re=W[0],Ce=D.height,he=-1<((Me=D.width)+"").indexOf("%"),ie=-1<(Ce+"").indexOf("%"),ae="auto"==Me,Me="flex"==Me,Le=(Ce="flex"==Ce,!1);re.style.width=re[_b(40)]+3+"px",re.style.height=re[_b(41)]+3+"px",ie||Ce||(Le=!0,D.height=re[_b(41)]),he||ae||Me||(Le=!0,D.width=re[_b(40)]),v.refresh({soft:!0}),W.css("position","relative"),Le&&K(window).trigger("resize")}}))},l.refresh=function(p){this.iRefresh.refresh(p)},l[_b(17)]=function(p){null!=this.options.editModel.indices&&this.blurEditor({force:!0}),this[_b(152)](p),this.refresh(p)},l[_b(164)]=function(){var p=this,v=p.options,C=v.pageModel,D=!!C.type,I=C.rPP,P=C[_b(85)];D?(p.pageI||p._initPager(),p.pageI.option(C),I<P?p.$bottom.css("display",""):v.showBottom||p.$bottom.css("display","none")):(p.pageI&&p.pageI.destroy(),p.$bottom.css("display",v.showBottom?"":"none"))},l[_b(165)]=function(){return{grid:this}},l[_b(118)]=function(p){var v=this,C=v.options.dataModel.location,D="lazy"==C;0!=v._trigger("beforeNewData",null,p=p||{})&&(v.pdata=[],"remote"==C?v[_b(146)]({callback:function(){v[_b(147)](p)}}):(v[_b(147)](D?K.extend({},p,{sort:!1,filter:!1,group:!1,trigger:!1}):p),D&&v.iLazy.init(p)))},l.getColIndx=function(p){var v=p.dataIndx,C=p.column,D=this.colModel,I=D.length,P=0;if(C){for(;P<I;P++)if(D[P]==C)return P}else{if(null==v)throw"dataIndx / column NA";if(null!=(p=this.colIndxs[v]))return p}return-1},l.getColumn=function(p){if(null==(p=p.dataIndx))throw"dataIndx N/A";return this.columns[p]||this.iGroup[_b(166)]()[p]},l[_b(167)]=function(I,v,C){var D=this.options;I=this.iRenderB[_b(168)](I,v)[0],this.$div_focus||(v=this.$div_focus=K([_a(63),_a(64),"</div>","</div>"].join("")),"flex"==D.height&&"flex"==D.width||"grid"==C.appendTo?v.appendTo(this.element):v[_b(169)](I))},l[_b(170)]=function(){var p,v;this.$div_focus&&((v=p=this.$div_focus.find(".pq-editor-focus")).hasClass("hasDatepicker")&&v.datepicker("hide").datepicker("destroy"),p[0]==document[_b(39)]&&(v=this[_b(114)],this[_b(114)]=!0,p.blur(),this[_b(114)]=v),this.$div_focus.remove(),delete this.$div_focus,v=K.extend({},(p=this.options.editModel).indices),p.indices=null,v.rowData=void 0,this[_b(171)](v))},l.scrollX=function(p,v){var C=this;return C.iRenderB.scrollX(p,function(){v&&v.call(C)})},l.scrollY=function(p,v){var C=this;return C.iRenderB.scrollY(p,function(){v&&v.call(C)})},l.scrollXY=function(p,v,C){var D=this;return D.iRenderB.scrollXY(p,v,function(){C&&C.call(D)})},l.scrollRow=function(p,v){var C=this;C.iRenderB.scrollRow(C.normalize(p)[_b(75)],function(){v&&v.call(C)})},l[_b(172)]=function(p,v){var C=this;C.iRenderB[_b(172)](C.normalize(p).colIndx,function(){v&&v.call(C)})},l.scrollCell=function(D,v){var C=this;D=C.normalize(D),C.iRenderB.scrollCell(D[_b(75)],D.colIndx,function(){v&&v.call(C),C._trigger("scrollCell")})},l.blurEditor=function(p){if(this.$div_focus){var v=this.$div_focus.find(".pq-editor-focus");if(!p||!p[_b(173)])return v[_b(53)]("blur",p);document[_b(39)]==v[0]&&v.blur()}},l.Selection=function(){return this.iSelection},l.goToPage=function(p){var C,D=this.options.pageModel;"local"!=D.type&&"remote"!=D.type||(C=p.rowIndx,(C=null==p.page?Math.ceil((C+1)/D.rPP):p.page)!=D.curPage&&(D.curPage=C,"local"==D.type?this[_b(17)]():this[_b(118)]()))},l[_b(174)]=function(p,v){if(null==p)return this.iSelection.removeAll(),this.iRows.removeAll({all:!0}),!0;function C(){null!=B&&!1!==p.focus&&D.focus({rowIndxPage:B,colIndx:null==U?D[_b(175)]():U}),v&&v.call(D)}var D=this,I=D.pdata,P=(I&&I.length||C(),(p=this.normalize(p)).rowIndx),B=p[_b(75)],U=p.colIndx;(null==P||P<0||U<0||U>=this.colModel.length)&&C(),this.goToPage(p),D.scrollRow({rowIndxPage:B=P-this.riOffset},function(){null==U?(D.iRows.add({rowIndx:P}),C()):D[_b(172)]({colIndx:U},function(){D.Range({r1:P,c1:U}).select(),C()})})},l[_b(176)]=function(){return this.colModel},l[_b(177)]=function(){return this.iGroup[_b(177)]()},l[_b(178)]=function(){return this.iGroup[_b(178)]()},l[_b(179)]=function(C){if(!(D=(J=this.options).editModel).indices)return null;var v,D=K.extend({},D.indices),I=(C=C?C.evt:null,this.riOffset),P=D.colIndx,B=(I=(D=D[_b(75)])+I,(P=this.colModel[P]).dataIndx),U=this.pdata[D],J=J.dataModel;if(null==U)return null;if(null!=D){var W=this[_b(180)]();if(K[_b(43)](W))for(var re in v={},W)v[re]=U[re];else v=this.readCell(U,P);return"<br>"==W&&(W=""),D={rowIndx:I,rowIndxPage:D,dataIndx:B,column:P,newVal:W=null==v&&""===W?null:W,value:W,oldVal:v,rowData:U,dataModel:J},!1!==this._trigger("cellBeforeSave",C,D)&&(P={},K[_b(43)](W)?P=W:P[B]=W,!1!==this.updateRow({row:P,rowIndx:I,silent:!0,source:"edit",checkEditable:!1})&&(this._trigger("cellSave",C,D),!0))}},l[_b(181)]=function(p,v,C,D,I,P,B,U,J){var W,re,he=this[_b(65)],ie=this.columns,ae=this.colIndxs;for(W in p)if(Me=ae[W],re=ie[W])if(P&&!1===this.isEditable({rowIndx:C,rowData:D,colIndx:Me,column:re}))delete p[W],v&&delete v[W];else{var Me=re.dataType,Ce=he(p[W],Me),Le=void 0!==(Le=v?v[W]:void 0)?he(Le,Me):void 0;if(p[W]=Ce,B&&re[_b(64)])if("edit"==J&&!1===U){var Ue=this.isValid({focusInvalid:!0,dataIndx:W,rowIndx:C,value:Ce});if(0==Ue.valid&&!Ue.warn)return!1}else!1!==(Ue=this.iValid[_b(74)]({column:re,rowData:"add"==I?p:D,allowInvalid:U,value:Ce})).valid||!1!==U||Ue.warn||delete p[W];"update"==I&&Ce===Le&&(delete p[W],delete v[W])}return"update"!=I||!pq.isEmpty(p)||void 0},l[_b(182)]=function(p){if(p.rowList)throw"not supported";if(Wt=p.addList=p.addList||[],p.updateList=p.updateList||[],p.deleteList=p.deleteList||[],Wt.length&&Wt[0].rowData)throw"rd in addList";if(!1===this._trigger("beforeValidate",null,p))return!1;for(var v,C,D,I=this,P=I.options,Ce=P.editModel,B=(U=P.dataModel).data||[],U=U.dataUF||[],ae=P.colModel,J=P.pageModel,Le=P[_b(183)],W=P[_b(184)],re=I.iRenderB,he=ae.map(function(ii){return ii.dataIndx}),ie=(null==p.validate?Ce:p).validate,Me=(ae="remote"==J.type,(null==p[_b(68)]?Ce:p)[_b(68)]),Pt=(Ce=P.trackModel,p.track),Ue=(Le=null==p.history?Le.on:p.history,this.iHistory),ce=this.iUCData,lt=null==p[_b(70)]||p[_b(70)],qe=null==p[_b(185)]?lt:p[_b(185)],ut=p.source,De=I.iRefresh,je=this.riOffset,Wt=p.addList,Xe=p.updateList,Yn=p.deleteList,Jt=[],xn=[],Lt=(Pt=null==Pt?null==P.track?Ce.on:P.track:Pt,0),Xn=Xe.length;Lt<Xn;Lt++){var ni,en=Xe[Lt],gr=en.newRow,zi=en.rowData,En=en[_b(70)],Dn=en.rowIndx,ji=en.oldRow;if(null==En&&(En=lt),!ji)throw _a(65);if(!1===(ni=this[_b(181)](gr,ji,Dn,zi,"update",En,ie,Me,ut)))return!1;ni&&xn.push(en)}for(Lt=0,Xn=Wt.length;Lt<Xn;Lt++){if(gr=(en=Wt[Lt]).newRow,En=en[_b(70)],Dn=en.rowIndx,null==En&&(En=qe),he.forEach(function(ii){gr[ii]=gr[ii]}),!1===(ni=this[_b(181)](gr,ji,Dn,zi,"add",En,ie,Me,ut)))return!1;ni&&Jt.push(en)}return Wt=p.addList=Jt,Ce=(Xe=p.updateList=xn).length,D=Yn.length,(P=Wt.length)||Ce||D?(Le&&(Ue.increment(),Ue.push(p)),Ce&&(!W||P||D||(v=re.saveValues(W)),I[_b(186)](Xe,ce,Pt)),D&&(I[_b(187)](Yn,ce,Pt,B,U,J,ae,je),De.addRowIndx()),P&&(I._digestAdd(Wt,ce,Pt,B,J,ae,je),De.addRT(Wt.map(function(ii){return ii.newRow})),De.addRowIndx()),I._trigger("change",null,p),(C=v?re.dirtyCells(v,W):C)||!0):"edit"==ut&&null},l[_b(186)]=function(p,v,C){for(var D,I=0,P=p.length,B=this.columns,U=this.saveCell;I<P;I++){var J=p[I],W=J.newRow,re=J.rowData;for(D in C&&v.update({rowData:re,row:W,refresh:!1}),W)U(re,B[D],W[D])}},l._digestAdd=function(p,v,C,D,I,P,B){var U=0,J=p.length;for(p.sort(function(ie,ae){return ie.rowIndx-ae.rowIndx});U<J;U++){var W=p[U],re=W.newRow,he=W.rowIndx;C&&v.add({rowData:re}),null==he?D.push(re):D.splice(P?he-B:he,0,re),W.rowData=re,P&&I[_b(85)]++}},l[_b(187)]=function(p,v,C,D,I,P,B,U){for(var J,W=0,re=p.length;W<re;W++){var he=p[W],ie=he.rowData,ae=!1,Me=D.indexOf(ie);-1==Me?0<=(Me=I.indexOf(ie))&&(ae=!0):he.rowIndx=B?Me+U:Me,he.uf=ae,he.indx=Me}for(p.sort(function(Ce,Le){return Le.rowIndx-Ce.rowIndx}),W=0;W<re;W++)ie=(he=p[W]).rowData,ae=he.uf,J=he.rowIndx,Me=he.indx,C&&v.delete({rowIndx:J,rowData:ie}),ae?I.splice(Me,1):(J=D.splice(Me,1))&&J.length&&B&&P[_b(85)]--},l[_b(188)]=function(D){var v=this,C=v.normalize(D);D=v.iRenderB,C.skip=!0,D.eachV(function(I,P){C[_b(75)]=P,v[_b(171)](C)}),v._trigger("refreshColumn",null,C)},l[_b(171)]=function(C){var v=this,D=(C=v.normalize(C),v._focusEle),I=C[_b(75)],P=C.colIndx;v.iRenderB[_b(171)](I,P,C.rowData,C.column)&&(D&&D[_b(75)]==I&&v.focus(),C.skip||(v.refresh({soft:!0}),v._trigger("refreshCell",null,C)))},l[_b(189)]=function(v){v=this.normalize(v);var C=(D=this[_b(144)]).length-1,D=D[C];this[_b(115)][_b(171)](C,v.colIndx,D,v.column)},l.refreshRow=function(p){var v,C,D,I;if(this.pdata)return C=(p=(v=this).normalize(p)).rowIndx,D=p[_b(75)],(p=p.rowData)?(v.iRenderB.refreshRow(D),v.refresh({soft:!0}),(I=v._focusEle)&&I[_b(75)]==D&&v.focus(),v._trigger("refreshRow",null,{rowData:p,rowIndx:C,rowIndxPage:D}),!0):null},l[_b(190)]=function(p){var v,C,D,I,P,B;this[_b(191)]||(D=C=v=!1,P=(I=this.options.editModel).indices,this[_b(191)]=!(B=void 0),p&&(v=p.old,C=p.silent,D=p.fireOnly,B=p.evt),P&&(C||v||this._trigger("editorEnd",B,P),D||(this[_b(170)](p),I.indices=null)),this[_b(191)]=null)},l[_b(192)]=function(){return{beginIndx:this.initV,endIndx:this.finalV}},l[_b(193)]=function(){var p=this.iRenderB;return{initV:p.initV,finalV:p.finalV,initH:p.initH,finalH:p.finalH}},l[_b(194)]=function(){return this.riOffset},l[_b(66)]=function(){var p,v,C=this.options.editModel;return C.indices?(C=this.getCell(C.indices),v=(p=this.$div_focus.children(".pq-editor-inner")).find(".pq-editor-focus"),{$td:C,$cell:p,$editor:v}):{}},l.editCell=function(I){var v,C=this,D=C.normalize(I),P=D.rowIndx,B=D.colIndx;if((I=C.iMerge)[_b(195)](P,B)&&((I=I[_b(137)](P,B)).rowIndx!=D.rowIndx||I.colIndx!=D.colIndx))return!1;C.scrollCell(D,function(){if((v=C.getCell(D))&&v.length)return C._editCell(D)})},l[_b(196)]=function(p){if(null==p.rowIndx)throw"rowIndx NA";for(var v=this.colModel,C=0;C<v.length;C++)if(!v[C].hidden&&(p.colIndx=C,this.isEditable(p)))return C;return-1},l[_b(197)]=function(v){v=this.normalize(v).rowIndx;var C=this[_b(196)]({rowIndx:v});-1!=C&&this.editCell({rowIndx:v,colIndx:C})},l.getEditor=function(P,v){function C(J){return"function"==typeof J?J.call(D,I):J}var D=this,I=D.normalize(P),B=(P=C(D.options.editor),C(I.column.editor)),U=K.extend(!0,{},P,0==B?{type:!1}:B);return(v?[v]:["attr","cls","style","type","options"]).forEach(function(J){U[J]=C(U[J])||""}),v?U[v]:U},l._editCell=function(C){var v=this,D=(C=v.normalize(C)).evt,I=C[_b(75)],P=C.colIndx;if(!(J=v.pdata)||I>=J.length)return!1;var J,B=v.options,U=B.editModel,W=C.rowIndx,re=v.colModel[P],he=re.dataIndx,ie=v.readCell(J=J[I],re),ae={rowIndx:W,rowIndxPage:I,cellData:ie,rowData:J,dataIndx:he,colIndx:P,column:re},Me=!1,Ce=v.getEditor(ae),Le=Ce.type;if(0!=Le){if(U.indices){var Ue,ce=U.indices;if(ce[_b(75)]==I&&ce.colIndx==P)return(Ue=v.$div_focus.find(".pq-editor-focus"))[0].focus(),document[_b(39)]!=Ue[0]&&window.setTimeout(function(){Ue.focus()},0),!1;if(!1===v.blurEditor({evt:D}))return!1;v[_b(190)]({evt:D})}U.indices={rowIndxPage:I,rowIndx:W,colIndx:P,column:re,dataIndx:he},v[_b(167)](I,P,Ce),(ce=v.$div_focus.children(".pq-editor-inner")).addClass("pq-align-"+(re.align||"left")),ae.$cell=ce,C=(null==C.select?Ce:C).select;var lt,Pt,qe=Ce.valueIndx,ut=Ce.dataMap,De=Ce.mapIndices||{},je=(Pt="pq-editor-focus "+Ce.cls)+" pq-cell-editor ",Wt=Ce.attr,Xe=xn=(xn=Ce.style)?"style='"+xn+"'":"",Yn=xn,Jt=(ae.cls=Pt,ae.attr=Wt,"checkbox"==Le?(Pt=Ce.subtype,ce.html(lt="<input "+(ie?"checked='checked'":"")+" class='"+je+"' "+Wt+" "+Yn+_a(66)+he+"' />"),Yn=ce.children("input"),"triple"==Pt&&(Yn.pqval({val:ie}),ce.click(function(){K(this).children("input").pqval({incr:!0})}))):"textarea"==Le||"select"==Le||"textbox"==Le||"contenteditable"==Le?("textarea"==Le?lt="<textarea class='"+je+"' "+Wt+" "+Xe+" name='"+he+"' ></textarea>":"contenteditable"==Le?(lt=_a(67)+(re.dataType||"")+"' "+xn+" "+Wt+" class='"+je+"' name='"+he+"'></div>",Me=!0):lt="select"==Le?(Pt=Ce.options||[],Yn=[Wt," class='",je,"' ",Xe," name='",he,"'"].join(""),A.select({options:Pt,attr:Yn,prepend:Ce.prepend,labelIndx:Ce.labelIndx,valueIndx:qe,groupIndx:Ce.groupIndx,dataMap:ut})):"<input class='"+je+"' "+Wt+" "+Xe+" type=text name='"+he+"' />",K(lt).appendTo(ce).val("select"==Le&&null!=qe&&(De[qe]||this.columns[qe])?De[qe]?J[De[qe]]:J[qe]:ie)):Le&&K("<"+Le+" class='"+je+"' tabindex=0 "+Wt+" "+Xe+">").appendTo(ce),ae.$editor=ce.children(".pq-editor-focus"),Ue=ce.children(".pq-editor-focus"),U.filterKeys),xn=v.getCell(U.indices),Lt=((Pt=re.editModel)&&void 0!==Pt.filterKeys&&(Jt=Pt.filterKeys),"textarea"!=Le&&"contenteditable"!=Le&&xn.empty(),{$cell:ce,cellData:ie,$editor:Ue,$td:xn,dataIndx:he,column:re,colIndx:P,rowIndx:W,rowIndxPage:I,rowData:J,editor:Ce}),Xn=v.iKeyNav;if(v._trigger("editorBegin",D,Lt),U.indices=Lt,(Ue=ce.children(".pq-editor-focus")).data({FK:Jt}).on("click",function(){K(this).focus(),v._trigger("editorClick",null,Lt)}).on("keydown",Xn[_b(198)].bind(Xn)).on("keypress",function(zi){return Xn[_b(199)](zi,{FK:Jt})}).on("keyup",function(zi){return Xn[_b(200)](zi,{FK:Jt})}).on("blur",l._onBlur=function(zi,_n){var Dn=B.editModel,ji=Dn.onBlur,ii="save"==ji,Os=document[_b(39)],dr=K(zi.target),Fe="validate"==ji,Fn=Dn[_b(201)];if(_n=!!_n&&_n.force,!v[_b(191)]&&!v[_b(114)]&&Dn.indices){if(!_n){if(!1===v._trigger("editorBlur",zi,Lt)||!ji||dr[0]==Os||Fn&&dr.hasClass(Fn))return;if(dr.hasClass("pq-autocomplete-text")){if(K("."+dr.data("id")).is(":visible"))return}else if(dr.hasClass("hasDatepicker")){if(dr.datepicker("widget").is(":visible"))return!1}else if(dr.hasClass(_a(68))){if(dr[_b(202)]("widget").is(":visible"))return}else if(dr.hasClass("ui-multiselect")){if(K(".ui-multiselect-menu").is(":visible")||K(Os).closest(".ui-multiselect-menu").length)return}else if(dr.hasClass("pq-select-button")){if(K(".pq-select-menu").is(":visible")||K(Os).closest(".pq-select-menu").length)return}else if(Ce[_b(203)]&&Ce[_b(203)].call(v,Lt))return}if(v[_b(114)]=!0,Dn=_n||ii||!Fe,!v[_b(179)]({evt:zi,silent:Dn})&&!_n&&Fe)return v[_b(204)](),!1;v[_b(190)]({evt:zi}),v[_b(204)]()}}).on("focus",function(zi){v._trigger("editorFocus",zi,Lt)}),Ue.focus(),window.setTimeout(function(){!1===K(document[_b(39)]).hasClass("pq-editor-focus")&&(v.element?v.element.find(".pq-editor-focus"):K()).focus()}),C)if(Me)try{var ni=document[_b(205)](),en=window[_b(206)]();ni[_b(207)](Ue[0]),en[_b(208)](),en.addRange(ni)}catch(zi){}else Ue.select()}},l[_b(204)]=function(p){var v=this;p=p||{},v[_b(114)]&&(p.timer?window.setTimeout(function(){delete v[_b(114)]},0):delete v[_b(114)])},l.getRow=function(p){return p=this.normalize(p)[_b(75)],this.iRenderB.get$Row(p)},l.getCell=function(v){0<=v.vci&&(v.colIndx=this.iCols.getci(v.vci));var C=(v=this.normalize(v))[_b(75)];return C=this.iRenderB.getCell(C,v=v.colIndx),K(C)},l[_b(27)]=function(C){0<=C.vci&&(C.colIndx=this.iCols.getci(C.vci));var v=(C=this.normalize(C)).colIndx;return C=0<=(C=C.ri)?C:this[_b(144)].length-1,C=this[_b(115)].getCell(C,v),K(C)},l[_b(209)]=function(p){return p.ri=this[_b(144)].length,this[_b(27)](p)},l[_b(210)]=function(){var p=this.options.editModel.indices;return p?K.extend({},p):null},l[_b(180)]=function(){if(!(p=this.options.editModel.indices))return null;var P=this.colModel[P=p.colIndx],v=this.getEditor(p),C=v.valueIndx,D=v.labelIndx,I=v.mapIndices||{},B=(P=P.dataIndx,this.$div_focus.children(".pq-editor-inner")),U=v.getData;if(U)J=this.callFn(U,p);else if("checkbox"==(U=v.type))var p=B.children(),J="triple"==v.subtype?p.pqval():!!p.is(":checked");else if((p=B.find('*[name="'+P+'"]'))&&p.length)if("select"==U&&null!=C)if(I[C]||this.columns[C]){(J={})[I[C]||C]=p.val(),J[I[D]||D]=p.find("option:selected").text();var W=v.dataMap;if(W){var re=p.find("option:selected").data("map");if(re)for(var he=0;he<W.length;he++){var ie=W[he];J[I[ie]||ie]=re[ie]}}}else J=p.val();else J=p.val();else(p=B.find(".pq-editor-focus"))&&p.length&&(J=p.val());return J},l[_b(34)]=function(C){var v,D={};return(C=C.$td)&&C.length&&C.closest(".pq-body-outer")[0]==this.$cont[0]&&(C=this.iRenderB[_b(143)](C[0]))&&(v=C[0]+this.riOffset,D=this.iMerge[_b(137)](v,C[1],!0)),D},l[_b(211)]=function(p){var v=this.options,D="remote"==v.pageModel.type,I=this.riOffset,P=v.dataModel.data,B=[];if(null==P)return B;for(var U=0,J=P.length;U<J;U++){var W,re,he=P[U];he.pq_rowcls&&(p.rowData=he,this.hasClass(p)&&(re=(W=D?U+I:U)-I,(he={rowData:he}).rowIndx=W,he[_b(75)]=re,B.push(he)))}return B},l[_b(212)]=function(p){var v=this.options,D="remote"==v.pageModel.type,I=this.riOffset,P=v.dataModel.data,B=[];if(null==P)return B;for(var U=0,J=P.length;U<J;U++){var W=P[U],re=D?U+I:U,he=W.pq_cellcls;if(he)for(var ie in he)this.hasClass(ie={rowData:W,rowIndx:re,dataIndx:ie,cls:p.cls})&&(ie=this.normalize(ie),B.push(ie))}return B},l.data=function(I){var v=(null!=(v=I.colIndx)?this.colModel[v]:I).dataIndx,C=I.data,D=null==C||"string"==typeof C;if(!(I=I.rowData||this.getRowData(I)))return{data:null};if(null==v){var P=I.pq_rowdata;if(D)return{data:B=null!=P?null==C?P:P[C]:B};P=K.extend(!0,I.pq_rowdata,C),I.pq_rowdata=P}else{var B,U=I[_b(36)];if(D)return null!=U&&(D=U[v],B=null==C||null==D?D:D[C]),{data:B};U||(I[_b(36)]={}),P=K.extend(!0,I[_b(36)][v],C),I[_b(36)][v]=P}},l.attr=function(B){var v=B.rowIndx,C=(null!=(C=B.colIndx)?this.colModel[C]:B).dataIndx,D=B.attr,I=null==D||"string"==typeof D,P=B.refresh;if(!(B=B.rowData||this.getRowData(B)))return{attr:null};if(I||!1===P||null!=v||(v=this.getRowIndx({rowData:B}).rowIndx),null==C){var U=B.pq_rowattr;if(I)return{attr:J=null!=U?null==D?U:U[D]:J};U=K.extend(!0,B.pq_rowattr,D),B.pq_rowattr=U,!1!==P&&null!=v&&this.refreshRow({rowIndx:v})}else{var J,W=B[_b(213)];if(I)return null!=W&&(I=W[C],J=null==D||null==I?I:I[D]),{attr:J};W||(B[_b(213)]={}),U=K.extend(!0,B[_b(213)][C],D),B[_b(213)][C]=U,!1!==P&&null!=v&&this[_b(171)]({rowIndx:v,dataIndx:C})}},l[_b(214)]=function(p,v){var C,D,I="";if("string"==typeof p)I=p;else if(p)for(C in p)if(D=p[C]){if("title"==C)D=D.replace(/"/g,"&quot;");else{if("style"==C){v&&v.push(D);continue}"object"==typeof D&&(D=JSON.stringify(D))}I+=C+'="'+D+'"'}return I},l.removeData=function(p){var I,v=(null!=(v=p.colIndx)?this.colModel[v]:p).dataIndx,C="string"==typeof(I=null==(I=p.data)?[]:I)?I.split(" "):I,D=C.length;if(I=p.rowData||this.getRowData(p))if(null==v){var P=I.pq_rowdata;if(P){if(D)for(var B=0;B<D;B++)delete P[C[B]];D&&!K[_b(215)](P)||delete I.pq_rowdata}}else if((p=I[_b(36)])&&p[v]){var U=p[v];if(D)for(B=0;B<D;B++)delete U[C[B]];D&&!K[_b(215)](U)||delete p[v]}},l.removeAttr=function(J){var D,v=J.rowIndx,C=J.dataIndx,I=(C=null!=(D=J.colIndx)?this.colModel[D].dataIndx:C,"string"==typeof(D=null==(D=J.attr)?[]:D)?D.split(" "):D),P=I.length,B=v-this.riOffset,U=J.refresh;if(J=J.rowData||this.getRowData(J))if(!1!==U&&null==v&&(v=this.getRowIndx({rowData:J}).rowIndx),null==C){var W=J.pq_rowattr;if(W){if(P)for(var re=0;re<P;re++){var he=I[re];delete W[he]}else for(he in W)I.push(he);P&&!K[_b(215)](W)||delete J.pq_rowattr}!1!==U&&null!=v&&I.length&&(D=I.join(" "),(ie=this.getRow({rowIndxPage:B}))&&ie.removeAttr(D))}else{var ie=J[_b(213)];if(ie&&ie[C]){var ae=ie[C];if(P)for(re=0;re<P;re++)delete ae[he=I[re]];else for(he in ae)I.push(he);P&&!K[_b(215)](ae)||delete ie[C]}!1!==U&&null!=v&&I.length&&(D=I.join(" "),(J=this.getCell({rowIndxPage:B,dataIndx:C}))&&J.removeAttr(D))}},l.normalize=function(p,v){var C,D,I={};for(D in p)I[D]=p[D];var P=I.rowIndx,B=I[_b(75)],U=I.dataIndx,J=I.colIndx;return null==B&&null==P||(C=this.riOffset,P=null==P?+B+C:P,B=null==B?+P-C:B,I.rowIndx=P,I[_b(75)]=B,I.rowData=I.rowData||v&&v[P]||this.getRowData(I)),null==J&&null==U||(C=this.colModel,U=null==U?C[J]?C[J].dataIndx:void 0:U,I.column=C[J=null==J?this.colIndxs[U]:J],I.colIndx=J,I.dataIndx=U),I},l[_b(216)]=function(p){var v=this,C=v.get_p_data();return p.map(function(D){return v.normalize(D,C)})},l.addClass=function(B){var v=(B=this.normalize(B))[_b(75)],C=B.dataIndx,D=pq[_b(217)],I=B.cls,P=B.refresh;if(B=B.rowData)if(!1!==P&&null==v&&(v=this.getRowIndx({rowData:B})[_b(75)]),null==C){var U,J=B.pq_rowcls;U=D((U=J?J+" "+I:I).split(/\s+/)).join(" "),B.pq_rowcls=U,!1===P||null==v||!this.SelectRow().inViewRow(v)||(J=this.getRow({rowIndxPage:v}))&&J.addClass(I)}else{var W=[];"function"!=typeof C.push?W.push(C):W=C;for(var re=(re=B.pq_cellcls)||(B.pq_cellcls={}),he=0,ie=W.length;he<ie;he++){var ae=re[C=W[he]];U=D((U=ae?ae+" "+I:I).split(/\s+/)).join(" "),re[C]=U,!1===P||null==v||!this.SelectRow().inViewRow(v)||(ae=this.getCell({rowIndxPage:v,dataIndx:C}))&&ae.addClass(I)}}},l[_b(72)]=function(v){var C=(v=this.normalize(v)).rowIndx,D=v.rowData,I=v.dataIndx,P=v.cls,B=v.refresh;if(D){var U=D.pq_cellcls;if(v=D.pq_rowcls,!1!==B&&null==C&&(C=this.getRowIndx({rowData:D}).rowIndx),null==I)v&&(D.pq_rowcls=this[_b(218)](v,P),null!=C&&!1!==B&&(v=this.getRow({rowIndx:C}))&&v[_b(72)](P));else if(U){var J=[];"function"!=typeof I.push?J.push(I):J=I;for(var W=0,re=J.length;W<re;W++){var he=U[I=J[W]];he&&(D.pq_cellcls[I]=this[_b(218)](he,P),null!=C&&!1!==B&&(he=this.getCell({rowIndx:C,dataIndx:I}))&&he[_b(72)](P))}}}},l.hasClass=function(D){var v,C=D.dataIndx,I=D.cls;return D=this.getRowData(D),I=new RegExp("\\b"+I+"\\b"),D?null==C?!(!(v=D.pq_rowcls)||!I.test(v)):!!((v=D.pq_cellcls)&&v[C]&&I.test(v[C])):null},l[_b(218)]=function(p,v){if(p&&v){for(var C=p.split(/\s+/),D=v.split(/\s+/),I=[],P=0,B=C.length;P<B;P++){for(var U=C[P],J=!1,W=0,re=D.length;W<re;W++)if(U===D[W]){J=!0;break}J||I.push(U)}return 1<I.length?I.join(" "):1===I.length?I[0]:null}},l.getRowIndx=function(p){var v,C=p.$tr,D=p.rowData,I=this.riOffset;if(D){if(null!=(B=D.pq_ri))return{rowData:D,rowIndx:B,rowIndxPage:B-I};var P=this.get_p_data(),B=!1,U=p.dataUF?this.options.dataModel.dataUF:null,J=!1;if(P)for(var W=0,re=P.length;W<re;W++)if(P[W]==D){J=!0;break}if(!J&&U)for(B=!0,W=0,re=U.length;W<re;W++)if(U[W]==D){J=!0;break}return J?(v=W-I,{rowIndxPage:B?void 0:v,uf:B,rowIndx:W,rowData:D}):{}}return null==C||0==C.length||null==(v=this.iRenderB.getRowIndx(C[0])[0])?{}:{rowIndxPage:v,rowIndx:v+I}},l.search=function(p){for(var D,v=p.row,C=p.first,I=(p=(D=this.options).dataModel,[]),P=this.riOffset,B="remote"==(D=D.pageModel.type),U=p.data,J=0,W=U.length;J<W;J++){var re,he=U[J],ie=!0;for(re in v)v[re]!==he[re]&&(ie=!1);if(ie){var ae=this.normalize({rowIndx:B?J+P:J});if(I.push(ae),C)break}}return I},l[_b(219)]=function(p,v,C,D,I){for(var P=0,B=this.options[C],U=p?this.iRenderB[D]:B,J=(v=this[v]).length;P<J;P++)if(!v[P=P==B?U:P][I])return P},l[_b(220)]=function(p){return this[_b(219)](p,"pdata","freezeRows","initV","pq_hidden")},l[_b(175)]=function(p){return this[_b(219)](p,"colModel","freezeCols","initH","hidden")},l[_b(221)]=function(){for(var p=this.pdata,v=p.length-1;0<=v;v--)if(!p[v].pq_hidden)return v;return null},l[_b(222)]=function(){return this.iCols[_b(222)]()},l[_b(223)]=function(p){return this.iCols[_b(223)](p)},l[_b(224)]=function(p){return this.iCols[_b(224)](p)},l[_b(225)]=function(p){return this.iKeys[_b(225)](p)},l[_b(226)]=function(p){return this.iKeys[_b(226)](p)},l[_b(227)]=function(p,v){var C,D=0,I=this.options.numberCell,P=this.colModel;-1==p&&(I.show&&(D+=+I.width),p=0);for(var B=p;B<v;B++)if((C=P[B])&&!C.hidden){if(!C._width)throw"assert failed";D+=C._width}return D}}(jQuery),function(K){(K.paramquery.cKeyNav=function(G){this.that=G}).prototype={bodyKeyDown:function(G){function A(Xn){return ae==Xn}function y(){return v[_b(175)]()}function l(){return v[_b(222)]()}function d(){return v[_b(220)]()}function _(){return v[_b(221)]()}var p=this,v=p.that,C=v.riOffset,D=v.options,I=D.rtl,P=v.iMerge,re=K(G.target),B=v._fe,U=v.colModel,J=D[_b(104)],W=D.editModel,he=(re=re[0]==(he=v.$cont[0]),pq.isCtrl(G)),ie=K.ui.keyCode,ce=ie.TAB,ae=G.keyCode,Me=ae==(Me=ie.LEFT),Ce=ae==(Ce=ie.RIGHT),Le=A(ie.HOME),Ue=A(ie.END),lt=(ce=ae==ce,A(ie.SPACE)),qe=A(ie.PAGE_UP),ut=A(ie.PAGE_DOWN),De=G.shiftKey,je=A(ie.UP),Wt=A(ie.DOWN);if(W.indices)v.$div_focus.find(".pq-cell-focus").focus();else{if(re&&!B&&ce&&!De)return Jt=v[_b(193)](),void v.focus({rowIndxPage:Jt.initV,colIndx:Jt.initH});if(lt&&re)return!1;var Xe,Yn,Jt=v.normalize(B),xn=(lt=Jt[_b(75)],Jt.rowIndx),Pt=Jt.colIndx,Lt=(re=v.pdata,B=Jt,!0);if(null!=xn&&null!=Pt&&null!=Jt.rowData){if(P[_b(195)](xn,Pt)&&(lt=(Jt=B=P[_b(137)](xn,Pt))[_b(75)],xn=Jt.rowIndx,Pt=Jt.colIndx,(qe||ut||Le||Ue)&&(Jt=P.getData(xn,Pt,"proxy_cell"))&&!re[P=Jt.rowIndx-C].pq_hidden&&(xn=(lt=P)+C),U[Pt].hidden&&(Pt=v[_b(223)](Pt))),0==v._trigger("beforeCellKeyDown",G,B))return!1;v._trigger("cellKeyDown",G,B),Le||he&&Me?(he&&Le&&(xn=d()+C),Pt=(I?l:y)(),p.select(xn,Pt,G)):Ue||he&&Ce?(he&&Ue&&(xn=_()+C),Pt=(I?y:l)(),p.select(xn,Pt,G)):Me||Ce||je||Wt||J.onTab&&ce?((Me&&!I||Ce&&I)&&Pt!=y()||ce&&De?(Xe=p.incrIndx(lt,Pt,!1))||pq.focusEle(!0)&&G[_b(29)]():(Ce&&!I||Me&&I)&&(Pt!=l()||D.autoAddCol)||ce&&!De?(!ce&&D.autoAddCol&&Pt==l()&&v.Columns().add([{}]),Xe=p.incrIndx(lt,Pt,!0)):je?Xe=he?{rowIndxPage:d(),colIndx:Pt}:p[_b(228)](lt,Pt,!1):Wt&&(Xe=he?{rowIndxPage:_(),colIndx:Pt}:(D.autoAddRow&&lt==_()&&v.addNodes([{}]),p[_b(228)](lt,Pt,!0))),Xe?(xn=Xe[_b(75)]+C,p.select(xn,Xe.colIndx,G)):Lt=!1):ut||qe?v.iRenderB[qe?"pageUp":"pageDown"](lt,function(gr){p.select(xn=gr+C,Pt,G)}):ae==ie.ENTER?(Yn=v.getCell(B))&&Yn[0]&&(v.isEditable(B)?v.editCell(B):(re=Yn.find("button"))[0]&&K(re[0]).click()):he&&"65"==ae?(Jt=v.iSelection,"row"==J.type&&"single"!=J.mode?v.iRows.toggleAll({all:J.all}):"cell"==J.type&&"single"!=J.mode&&Jt.selectAll({type:"cell",all:J.all})):he?Lt=!1:W[_b(229)]&&this.isEditKey(ae)&&!he&&(46==ae?v.clear():("select"==v.getEditor(B,"type")&&(lt=B[_b(75)],Pt=B.colIndx,(Yn=v.getCell(B))&&Yn[0]&&v.isEditable(B)&&v.editCell({rowIndxPage:lt,colIndx:Pt,select:!0})),Lt=!1)),Lt&&G[_b(29)]()}}},getPrevVisibleRIP:function(G){for(var A=this.that.pdata,y=G-1;0<=y;y--)if(!A[y].pq_hidden)return y;return G},setDataMergeCell:function(G,A){var y,l=this.that.iMerge;l[_b(195)](G,A)&&(y=l[_b(137)](G,A),l.setData(y.rowIndx,y.colIndx,{proxy_cell:{rowIndx:G,colIndx:A}}))},getValText:function(A){A=A[0].nodeName[_b(54)]();return-1!=K.inArray(A,["input","textarea","select"])?"val":"text"},getNextVisibleRIP:function(G){for(var A=this.that.pdata,y=G+1,l=A.length;y<l;y++)if(!A[y].pq_hidden)return y;return G},incrEditIndx:function(G,A,y){var l=this.that,d=l.colModel,_=d.length,p=l.iMerge,v=l.riOffset,C=l[y?"getLastVisibleRIP":"getFirstVisibleRIP"]();do{var D,I=G+v;if(A=p[_b(195)](I,A)?(D=p[_b(230)](I,A),(P=p.getData(I,A,"proxy_edit_cell"))&&(G=(I=P.rowIndx)-v),y?A+D.o_cc:A-1):y?A+1:A-1,y&&_<=A||!y&&A<0){if(G==C)return null;G=this[y?"getNextVisibleRIP":"getPrevVisibleRIP"](G),A=y?0:_-1}p[_b(195)](I=G+v,A)&&(D=p[_b(137)](I,A),p.setData(D.rowIndx,D.colIndx,{proxy_edit_cell:{rowIndx:I,colIndx:A}}),I=D.rowIndx,A=D.colIndx);var P=d[A],B=l.isEditable({rowIndx:I,colIndx:A}),U="function"==typeof(U=P.editor)?U.call(l,l.normalize({rowIndx:I,colIndx:A})):U}while(G=I-v,P&&(P.hidden||0==B||!1===U));return{rowIndxPage:G,colIndx:A}},incrIndx:function(G,A,y){var l,d,_,p,v,C=this.that,D=C.iMerge,I=G,P=A,B=C.pdata,U=C.riOffset,J=C[(W="get"+(y?"Last":"First")+"Visible")+"RIP"](),W=C[W+"CI"](),re=C.colModel,he=re.length;if(null==P)I!=J&&(v={rowIndxPage:I=this[y?"getNextVisibleRIP":"getPrevVisibleRIP"](I)});else if(P==W)(v=this[_b(228)](I,P,y))[_b(75)]!=I&&(v.colIndx=C["get"+(y?"First":"Last")+"VisibleCI"]());else{for(;D[_b(195)](d=I+U,P)&&(l=D[_b(230)](d,P),B[I=p||!(_=D.getData(l.o_ri,l.o_ci,"proxy_cell"))||B[_=_.rowIndx-U].pq_hidden?I:_].pq_hidden&&(I=D[_b(231)](d,P)[_b(75)]),!p&&y&&(P=l.o_ci+(l.o_cc?l.o_cc-1:0))),y?P<he-1&&P++:0<P&&P--,(p=re[P])&&p.hidden;);v={rowIndxPage:I,colIndx:P}}if(v[_b(75)]!=G||v.colIndx!=A)return v},incrRowIndx:function(G,A,y){var _,l=(_=this.that).riOffset,d=G+l;return(_=_.iMerge)[_b(195)](d,A)&&(d=_[_b(230)](d,A),_=_.getData(d.o_ri,d.o_ci,"proxy_cell"),y&&(G=d.o_ri-l+d.o_rc-1),A=_?_.colIndx:d.v_ci),{rowIndxPage:G=this["get"+(y?"Next":"Prev")+"VisibleRIP"](G),colIndx:A}},isEditKey:function(G){return 32<=G&&G<=127||189==G||190==G||187==G},keyDownInEdit:function(G){var A=this.that,y=A.options,l=y.editModel.indices;if(l){var d=K(G.target),_=K.ui.keyCode,D=y.editModel,p=(l=K.extend({},l))[_b(75)],v=l.colIndx,C=(C=l.column.editModel)?K.extend({},D,C):D;return D=this.getValText(d),d.data("oldVal",d[D]()),0!=A._trigger("editorKeyDown",G,l)&&((D=G.keyCode)==_.TAB||D==C.saveKey&&!G.altKey?(l="downFocus"==(C=D==_.TAB?C.onTab:C.onSave)?(y.autoAddRow&&p==A[_b(221)]()&&A.addNodes([{}]),this[_b(228)](p,v,!G.shiftKey)):{rowIndxPage:p,colIndx:v,incr:!!C,edit:"nextEdit"==C},d.hasClass(_a(68))&&d[_b(202)]("widget").is(":visible")&&D==_.ENTER?void 0:this[_b(232)](l,G)):D==_.ESCAPE?(A[_b(190)]({evt:G}),A.focus({rowIndxPage:p,colIndx:v}),G[_b(29)](),!1):D==_.PAGE_UP||D==_.PAGE_DOWN?(G[_b(29)](),!1):!C.keyUpDown||G.altKey||D!=_.DOWN&&D!=_.UP?void 0:(l=this[_b(228)](p,v,D==_.DOWN),this[_b(232)](l,G)))}},keyPressInEdit:function(G,_){var y=this.that,l=y.options.editModel,d=l.indices,C=(_=(_||{}).FK,d.column),p=K.ui.keyCode,v=["BACKSPACE","LEFT","RIGHT","UP","DOWN","DELETE","HOME","END"].map(function(D){return p[D]});return C=C.dataType,0<=K.inArray(G.keyCode,v)||!(!1===y._trigger("editorKeyPress",G,K.extend({},d))||_&&("float"==C||"integer"==C)&&(v=d.$editor.val(),y=l.charsAllow["float"==C?0:1],_=G.charCode||G.keyCode,d=String[_b(60)](_),"="!==v[0]&&d&&-1==y.indexOf(d)))},keyUpInEdit:function(G,y){y=(y||{}).FK;var l,d=(l=(l=(p=this.that).options).editModel).indices;p._trigger("editorKeyUp",G,K.extend({},d));var _,p=d.column.dataType;!y||"float"!=p&&"integer"!=p||(d=K(G.target),y="integer"==p?l.reInt:l.reFloat,G=this.getValText(d),l=d.data("oldVal"),_=d[G](),0==y.test(_)&&"="!==_[0]&&(y.test(l)?d[G](l):(_=("float"==p?parseFloat:parseInt)(l),isNaN(_)?d[G](0):d[G](_))))},saveAndMove:function(G,A){if(null==G)return A[_b(29)](),!1;var l,d=this,_=d.that,p=G[_b(75)],v=G.colIndx;return!(_[_b(114)]=!0)!==_[_b(179)]({evt:A})&&_.pdata?(_[_b(190)](A),G.incr&&(l=d[G.edit?"incrEditIndx":"incrIndx"](p,v,!A.shiftKey),p=l?l[_b(75)]:p,v=l?l.colIndx:v),_.scrollCell({rowIndxPage:p,colIndx:v},function(){d.select(p+_.riOffset,v,A),G.edit&&_._editCell({rowIndxPage:p,colIndx:v})}),_[_b(204)]({timer:!0,msg:"saveAndMove"})):(_.pdata||_[_b(190)](A),_[_b(204)]({timer:!0,msg:_a(69)})),A[_b(29)](),!1},select:function(G,A,y){var l=this.that,d=G-l.riOffset,v=(this[_b(233)](G,A),l.options),_=l.iSelection,p=v[_b(104)],C="row"==(v=p.type),D="cell"==v;l.scrollCell({rowIndx:G,colIndx:A},function(){var I,P,B,U,J=_.address();y.shiftKey&&y.keyCode!==K.ui.keyCode.TAB&&p.type&&"single"!=p.mode&&(J.length||C)?C?l.iRows.extend({rowIndx:G,evt:y}):(P=(I=J[J.length-1]).firstR,B=I.firstC,"column"==(U=I.type)?(I.c1=B,I.c2=A,I.r1=I.r2=I.type=I.cc=I.rc=void 0,l.Range(J,!1).select()):"row"==U?_[_b(234)]({r1:P,r2:G,firstR:P,firstC:B}):_[_b(234)]({r1:P,c1:B,r2:G,c2:A,firstR:P,firstC:B})):C||D&&l.Range({r1:G,c1:A,firstR:G,firstC:A}).select(),l.focus({rowIndxPage:d,colIndx:A})})}}}(jQuery),function(K){var G,A;(K.paramquery[_b(235)]=function(){}).prototype={autoFitCols:function(){var y=(d=this.that).colModel,l=y.length,p=this.dims,d=d[_b(227)](-1,l,!0),_=this.getSBWd();if(d!==(p=p.wdCenter-_)){for(var v,C=d-p,D=[],I=0;I<l;I++){var P=(J=y[I])._percent,B=J._resized;J.hidden||P||B||(C<0?(re=J._maxWidth-J._width)&&D.push({availWd:-1*re,colIndx:I}):(re=J._width-J._minWidth)&&D.push({availWd:re,colIndx:I})),B&&delete(v=J)._resized}D.sort(function(ae,Me){return ae.availWd>Me.availWd?1:ae.availWd<Me.availWd?-1:0}),I=0;for(var U=D.length;I<U;I++){var J,W,re=(ie=D[I]).availWd,ie=ie.colIndx,he=Math.round(C/(U-I));ie=(J=y[ie])._width,Math.abs(re)>Math.abs(he)?(W=ie-he,C-=he):(W=ie-re,C-=re),J.width=J._width=W}0!=C&&v&&((W=v._width-C)>v._maxWidth?W=v._maxWidth:W<v._minWidth&&(W=v._minWidth),v.width=v._width=W)}},numericVal:function(y,l){return l=-1<(y+"").indexOf("%")?parseInt(y)*l/100:parseInt(y),Math.round(l)},refreshColumnWidths:function(y){y=y||{};var l=this.that,d=l.options,_=d.numberCell,p="flex"===d.width,v=l.colModel,C=this.autoFit,D=this.dims.wdCenter,I=v.length,U=d[_b(236)],J=d[_b(237)],P=0,B=(_.show&&(_.width<_.minWidth&&(_.width=_.minWidth),P=_.outerWidth=_.width),p?null:+D-P),W=(U=Math.floor(this.numericVal(U,B)),J=Math.ceil(this.numericVal(J,B)),0);if(!p&&B<5||isNaN(B)){if(d.debug)throw"availWidth N/A"}else{delete l[_b(238)];for(var re=0;re<I;re++){var he,ie,ae,Me,Ce,Le,Ue=v[re];Ue.hidden||(ie=-1<((he=Ue.width)+"").indexOf("%")||null,Me=Ue.maxWidth,ae=(ae=Ue.minWidth)?this.numericVal(ae,B):U,(Me=Me?this.numericVal(Me,B):J)<ae&&(Me=ae),null!=he?(Le=0,!p&&ie?(l[_b(238)]=!0,Ue.resizable=!1,Ue._percent=!0,1<=(W+=(Ce=+this.numericVal(he,B))-(Le=Math.floor(Ce)))&&(Le+=1,--W)):he&&(Le=+he),Le<ae?Le=ae:Me<Le&&(Le=Me),Ue._width=Le):Ue._width=ae,ie||(Ue.width=Ue._width),Ue._minWidth=ae,Ue._maxWidth=p?1e3:Me)}0==p&&!1!==y[_b(239)]&&C&&this[_b(240)]()}},format:(G=K.datepicker,A=pq[_b(47)],function(y,l){return"function"==typeof l?l(y):pq[_b(241)](l)?y==parseInt(y)?pq.formulas.TEXT(y,pq.juiToExcel(l)):isNaN(Date.parse(y))?void 0:G.formatDate(l,new Date(y)):y==parseFloat(y)?A(y,l):void 0}),renderCell:function(y){var l,d,_,p,v,C,D=this.that,I=y.attr||[],P=y.style||[],B=y.Export,U=D.options,J=y.cls||[],W=y.rowData,re=y.column,he=re.dataIndx,ie=(W.pq_celldt||{})[he]||re.dataType,ae="pic"==ie,Me=y.colIndx,Ce=pq.styleStr,Le=D[_b(214)],Ue=re.style||{},ce=W[_b(242)],lt=(W[_b(129)]||{})[he]||{},qe=W.pq_rowprop||{},ut=U.freezeCols,De=U[_b(243)];if(W)return v=W[he],B||(Ue&&P.push(Ce(Ue)),ce&&P.push(Ce(ce)),(Ue=(W[_b(244)]||{})[he])&&P.push(Ce(Ue)),Me==ut-1&&De&&J.push("pq-last-frozen-col"),re.cls&&J.push(re.cls),U.editModel[_b(245)]&&!1===D.isEditable(y)&&J.push("pq-cell-disable"),ae?v=!v||"data"!=v.substr(0,4)&&"http"!=v.substr(0,4)?v:_a(70)+v+'" />':"string"==typeof v&&"html"!=ie&&(v=pq.escapeHtml(v))),Ue=(ce=U.format.call(D,W,re,lt,qe))?this.format(v,ce,ie):v,y.dataIndx=he,y.cellData=v,y.formatVal=Ue,(Me=re.render)&&(C=D.callFn(Me,y))&&"string"!=typeof C&&((l=C.attr)&&I.push(Le(l)),p=C.prop,(_=C.cls)&&J.push(_),(d=C.style)&&P.push(Ce(d)),C=C.text),(C=null==C&&(Me=re._renderG||re._render)?Me.call(D,y):C)&&"string"!=typeof C&&((l=C.attr)&&I.push(l),(_=C.cls)&&J.push(_),(d=C.style)&&P.push(Ce(d)),C=C.text),null==C&&(C=Ue||v),B?[C,d,p,(l||{}).title]:((ut=(p=p||{}).align||lt.align||qe.align||re.align)&&J.push("pq-align-"+ut),(ut=p.valign||lt.valign||qe.valign||re.valign)&&J.push("pq-valign-"+ut),(De=(W.pq_cellcls||{})[he])&&J.push(De),(U=(W[_b(213)]||{})[he])&&I.push(Le(U,P)),P=P.length?" style='"+P.join("")+"' ":"",null==(C=pq.newLine(C))&&(C=""),["<div class='",J.join(" "),"' ",I.join(" "),P," >",ae?C:"<div>"+C+"</div>","</div>"].join(""))}}}(jQuery),function(K){var G,A=K.paramquery,y=A._pqGrid.prototype;y[_b(246)]=function(C){var d,_,p,v=(C=this[_b(115)][_b(143)](C[0]))[0];return(p=null!=(C=C[1])&&null!=v&&(_=(_=this[_b(144)][v])&&_[C])?_.colModel:p)&&p.length&&(d=!0),{col:_||this.colModel[C],ci:C,ri:v,isParent:d}},y.flex=function(l){var d=this.colIndxs;l&&l.dataIndx&&(l.colIndx=l.dataIndx.map(function(_){return d[_]})),this[_b(110)].flex(l)},y.flexAsync=function(l){var d=this;cancelAnimationFrame(G),G=requestAnimationFrame(function(){d.flex(l)})},A.mixHeader={colCollapse:function(v,d){var _=this.that,p={column:v};v=v[_b(90)],!1!==_._trigger("beforeColumnCollapse",d,p)&&(v.on=!v.on,!1!==_._trigger("columnCollapse",d,p)&&_.refresh({colModel:!0}))},onHeaderClick:function(l){var d,_=this.that,p=_[_b(247)];if(_._trigger("headerClick",l),!p||"stop"==p.status){if((p=K(l.target)).is("input,label"))return!0;if((d=p.closest(_a(71))).length)if(d=(_=_[_b(246)](d)).col,p.hasClass("pq-col-collapse"))this[_b(248)](d,l);else if(!_.isParent)return this[_b(249)](d,_.ci,l)}},getTitle:function(l,d){var _=l.title;return"function"==typeof _?_.call(this.that,{column:l,colIndx:d,dataIndx:l.dataIndx}):_},createHeaderCell:function(l){var d,_=this.that,he=_.options,p=l.cls,v=l.style,C=l.attr,D=l.column,ie=l.colIndx,I=this[_b(250)](he.sortModel),P=D[_b(90)],B=pq.styleStr,U=D.halign||D.align,J=D.hvalign,W=D.cls,re=D.colModel;return he=this.hasMenuH(he,D),ie=null!=(ie=this.getTitle(D,ie))?ie:D.dataIndx,U&&p.push("pq-align-"+U),J&&p.push("pq-valign-"+J),(U=D.styleHead)&&v.push(B(U)),(U=D.attrHead)&&C.push(_[_b(214)](U)),W&&p.push(W),p.push(D.clsHead),he&&p.push("pq-has-menu"),re&&re.length?P&&(p.push("pq-collapsible-th"),d=[_a(72),P.on?"plus":"minus","'></span>"].join("")):p.push("pq-grid-col-leaf"),C.push("pq-row-indx="+l.rowIndx+" pq-col-indx="+l.colIndx),D.pq_title=ie,["<div ",C.join(" ")," "," class='",p.join(" "),"' style='",v.join(""),"' >",_a(73),d,_a(74),ie,"</span>",I,"</div>",he?"<span class='pq-menu-icon'></span>":"","</div>"].join("")},getSortSpaceSpans:function(l){var d=l.space?" pq-space":"";return[_a(75),d,"'></span>",l.number?_a(76)+d+"'></span>":""].join("")},hasMenuH:function(l,d){var _=d.colModel;return(!_||!_.length)&&(_=l.menuIcon,l=d.menuIcon,_&&!1!==l||!1!==_&&l)},onHeaderCellClick:function(l,d,_){var p,v,C,D=this.that,I=D.options,P=I.sortModel,B=(l=l||{}).dataIndx;!1!==D._trigger("headerCellClick",_,{column:l,colIndx:d,dataIndx:B})&&-1!=d&&(I[_b(104)].column&&-1==_.target.className.indexOf("pq-title-span")?(I={c1:d,firstC:d,firstR:D[_b(220)]()},v=(p=(C=D.iSelection).address()).length,pq.isCtrl(_)?C.add(I):(_.shiftKey&&(v&&"column"==p[v-1].type&&((C=p[v-1]).c1=C.firstC,C.c2=d,C.r1=C.r2=C.type=C.cc=void 0),I=p),D.Range(I,!1).select()),D.focus({rowIndxPage:D[_b(220)](!0),colIndx:d}),D._trigger("mousePQUp")):P.on&&(P.wholeCell||K(_.target).hasClass("pq-title-span"))&&0!=l.sortable&&D.sort({sorter:[{dataIndx:B,sortIndx:l.sortIndx}],addon:!0,skipCustomSort:pq.isCtrl(_),tempMultiple:P.multiKey&&_[P.multiKey],evt:_}))},setSortIcons:function(){var l=this.that,d=l.options,_=d.bootstrap,p=d.ui,v=l[_b(144)].length-1;if(l.$head_i){var C=l.iSort.getSorter(),D=C.length,I=!1;l.options.sortModel.number&&1<D&&(I=!0);for(var P=0;P<D;P++){var B,U=l.getColIndx({dataIndx:U=(J=C[P]).dataIndx}),J=J.dir;0<=U&&(B=_.on?_[_b(251)]:p[_b(251)]+" pq-col-sort-"+("up"==J?"asc":"desc"),J=_.on?_a(77)+J:_a(78)+("up"==J?"n":"s"),(U=K(l[_b(115)].getCell(v,U))).addClass(B),U.find(".pq-col-sort-icon").addClass(J),I&&U.find(".pq-col-sort-count").html(P+1))}}}},A[_b(111)]=function(l){var d=this,_=((d.that=l).$head_i.on({mousedown:function(v){var C;v[_b(252)]||(C=K(v.target),d[_b(253)](v),v[_b(252)]=!0,v=K.Event("mousedown",v),C.trigger(v))},dblclick:function(v){d[_b(254)](v)}},_a(79)),l.options),p=_.flex;d.rtl=_.rtl?"right":"left",p.on&&p.one&&l.one("ready",function(){d.flex()})},A[_b(111)].prototype={doubleClick:function(p){var d=this.that.options,_=d.flex;p=K(p.target),p=parseInt(p.attr("pq-col-indx")),isNaN(p)||_.on&&this.flex(_.all&&!d[_b(255)].autoFit?{}:{colIndx:[p]})},flex:function(l){this.that.iRenderB.flex(l)},setDraggables:function(p){p=K(p.target);var d,_,v=this,C=v.rtl;p.draggable({axis:"x",helper:function(D,I){var P=K(D.target),B=parseInt(P.attr("pq-col-indx"));return v[_b(256)](B),v[_b(257)](D,I),P},start:function(D,I){d=D.clientX,_=parseInt(v.$cl[0].style[C])},drag:function(D,I){D=D.clientX-d,"right"==v.rtl&&(D*=-1),v.$cl[0].style[C]=_+D+"px"},stop:function(D,I){return v.resizeStop(D,I,d)}})},_getDragHelper:function(D){var _=+(C=this.that).options.freezeCols,d=(D=K(D.target),C[_b(93)]),C=C[_b(115)],p=(_=(D=+D.attr("pq-col-indx"))<_?0:C.scrollX(),d[_b(258)]()),v=C.getLeft(D)-_;C=C.getLeft(1+D)-_,D="style='height:"+p+"px;"+this.rtl+":",this.$clleft=K(_a(80)+D+v+"px;'></div>").appendTo(d),this.$cl=K(_a(80)+D+C+"px;'></div>").appendTo(d)},_setDragLimits:function(l){var d,_,p;l<0||(p=(_=this.that)[_b(115)],_=_.colModel[l],_=(d=p.getLeft(l)+_._minWidth)+_._maxWidth-_._minWidth,(p=K(p._resizeDiv(l))).draggable("instance")&&p.draggable("option","containment",[d,0,_,0]))},columnResize:function(l,d,_){var p,v,C,D=this.that,I=D.colModel,P=D.options,B=P.numberCell;P.rtl&&(d*=-1),-1==l?(p=null,C=(v=parseInt(B.width))+d,B.width=C):(p=I[l],C=(v=parseInt(p.width))+d,p.width=C,p._resized=!0),D.refresh({soft:!0}),D._trigger("columnResize",_,{colIndx:l,column:p,dataIndx:p?p.dataIndx:null,oldWidth:v,newWidth:(p||B).width})},resizeStop:function(l,d,_){this.$clleft.remove(),this.$cl.remove(),_=l.clientX-_,d=+K(d.helper).attr("pq-col-indx"),this[_b(259)](d,_,l)}}}(jQuery),function(K){var G=K.paramquery;G[_b(260)]=function(A){function y(p,v){return K(_a(81)+p+" ui-icon "+v+"'></div>").appendTo(A.element)}var l=this,d=A.options,_=d[_b(261)];l.that=A,l[_b(262)]=null,l.rtl=d.rtl,l.status="stop",l.$arrowTop=y("down",_.topIcon),l[_b(263)]=y("up",_.bottomIcon),l.hideArrows(),_&&_.enabled&&A.$head_i.on("mousedown",".pq-grid-col",l[_b(264)](l,A))},G[_b(260)].prototype={dragHelper:function(A,y,l){var d=y.options[_b(261)].rejectIcon;return function(){A.status="helper",y.$head_i.find(_a(79)).hide();var _=K(_a(82)+d+_a(83)+l.pq_title+"</div>");return(A[_b(262)]=_)[0]}},getRowIndx:function(A,y,l){for(;l&&A[l][y]==A[l-1][y];)l--;return l},hideArrows:function(){this.$arrowTop.hide(),this[_b(263)].hide()},_columnIndexOf:function(A,y){for(var l=0,d=A.length;l<d;l++)if(A[l]==y)return l;return-1},moveColumn:function(D,P,l,C,J){var p=this.that,U=p.options[B="colModel"],I=p[_b(144)],v=p.depth-1,B=(C=null==C?this.getRowIndx(I,D,v):C,J=null==J?this.getRowIndx(I,P,v):J,v=I[C][D],P=(I=(C=I[J][P]).parent)?I[B]:U,(J=(D=v.parent)?D[B]:U).indexOf(v));return U=l?0:1,J=P.indexOf(C),p.iCols.move(1,B,J+U,D,I,"dnd")[0]},onColMouseDown:function(A,y){return function(l){var d,_,p=K(this),v=K(l.target);l[_b(252)]||v.is(_a(84))||v.parent().hasClass(_a(85))||(_=(d=(p=y[_b(246)](p)).col)?d.parent:null,!d||d.nodrag||d._nodrag||_&&1==_.colSpan||A[_b(265)](l,d,p)&&(l[_b(252)]=!0,_=K.Event("mousedown",l),v.trigger(_)))}},onDrop:function(){var A=this,y=A.that;return function(l,p){var _=+p.draggable.attr("pq-col-indx"),v=(p=+p.draggable.attr("pq-row-indx"),+(C=K(this)).attr("pq-col-indx")),C=+C.attr("pq-row-indx"),D=A.leftDrop;A.rtl&&(D=!D),!1!==y._trigger("beforeColumnOrder",null,{colIndxDrag:_,colIndxDrop:v,left:D})&&(v=A.moveColumn(_,v,D,p,C))&&y._trigger("columnOrder",null,{dataIndx:v.dataIndx,column:v,oldcolIndx:_,colIndx:y.getColIndx({column:v})})}},onStart:function(A,y,l,d){return function(_){if(!1===y._trigger("columnDrag",_[_b(32)],{column:l}))return!1;A[_b(266)](d)}},onDrag:function(A,y){return function(l,d){A.status="drag";var _,p=K(".pq-drop-hover",y.$head_i);0<p.length?(A[_b(267)](!0),_=p.width(),l=l.clientX-p.offset().left+K(document).scrollLeft(),A.leftDrop=l=l<_/2,A[_b(268)](p,l)):(A.hideArrows(),_=K(".pq-drop-hover",y.$top),A[_b(267)](!!_.length))}},setDraggable:function(d,y,l){d=K(d[_b(125)]);var _=this,p=_.that;if(!d.hasClass("ui-draggable"))return d.draggable({distance:10,cursorAt:{top:-18,left:-10},zIndex:"1000",appendTo:p.element,revert:"invalid",helper:_.dragHelper(_,p,y),start:_.onStart(_,p,y,l),drag:_.onDrag(_,p),stop:function(){p.element&&(_.status="stop",p.$head_i.find(_a(79)).show(),_.hideArrows())}}),!0},setDroppables:function(A){for(var y,l,d,_,p,v=this.that,C=A.col,D=A.ri,I=A.o_ci,P=I+C.o_colspan,B={hoverClass:A=_a(86),classes:{"ui-droppable-hover":A},accept:".pq-grid-col",tolerance:"pointer",drop:this.onDrop()},U=v.$head_i.find(_a(87)),J=U.length;J--;)p=(_=K(U[J])).hasClass("ui-droppable"),d=(l=v[_b(246)](_)).col,y=l.ri,l=l.ci,d==C||d.nodrop||d._nodrop||D<y&&I<=l&&l<P?p&&_.droppable("destroy"):p||_.droppable(B)},showFeedback:function(_,p){var l=this.that,v=_[0],d=l[_b(93)][0].offsetTop;_=_.offset().left-K(l.element).offset().left+(p?0:v[_b(40)])-8,p=d+v.offsetTop-16,v=d+l.$header[0][_b(41)],this.$arrowTop.css({left:_,top:p,display:""}),this[_b(263)].css({left:_,top:v,display:""})},updateDragHelper:function(A){var y="removeClass",l="addClass",d=(_=this.that.options[_b(261)]).acceptIcon,_=_.rejectIcon,p=this[_b(262)];p&&p[A?y:l]("ui-state-error").children("span.pq-drag-icon")[A?l:y](d)[A?y:l](_)}}}(jQuery),function(K){K.paramquery[_b(269)]={_input:function(G,A,y,l,d,_){return["<input ",' value="',A=pq.formatEx(G,A,_),"\" name='",G.dataIndx,"' type=text style='",l,"' class='",y,"' ",d," />"].join("")},_onKeyDown:function(G,A,y){var l,d=this,_=this.that;if(G.keyCode===K.ui.keyCode.TAB){var p,v,C=d[_b(143)](y.closest(".pq-grid-col")[0])[1],D=_.colModel,I=G.shiftKey,P=D[C];if("textbox2"==(P.filterUI||{}).type&&(_[_b(172)]({colIndx:C}),(l=d.getCellEd(C)[1])[0]==y[0]?I||(p=l[1]):I&&(p=l[0]),p))return p.focus(),G[_b(29)](),!1;for(;I?C--:C++,!(C<0||C>=D.length);){var B=(P=D[C]).filter;if(!P.hidden&&B){v=!0,_[_b(172)]({colIndx:C},function(){var U=d.getCellEd(C)[1];if(U="textbox2"==(P.filterUI||{}).type?K(I?U[1]:U[0]):U)return U.focus(),G[_b(29)](),!1});break}}!v&&I&&pq.focusEle(!0)&&G[_b(29)]()}},_textarea:function(G,A,y,l,d){return["<textarea name='",G,"' style='"+l+"' class='"+y+"' "+d+" >",A,"</textarea>"].join("")},bindListener:function(G,A,y,l){var _,d=this.that,p=(_=pq.filter.getVal(_=l.filter))[0],v=_[1];pq.fakeEvent(G,A,d.options[_b(157)].timeout),G.off(A).on(A,function(C){var D,I,P=(B=l.filterUI).type,B=B.condition;if("checkbox"==P?D=G.pqval({incr:!0}):"textbox2"==P?(D=K(G[0]).val(),I=K(G[1]).val()):D=G.val(),D=""===D?void 0:pq.deFormat(l,D,B),I=""===I?void 0:pq.deFormat(l,I,B),p!==D||v!==I)return p=D,v=I,(y=pq.getFn(y)).call(d,C,{column:l,dataIndx:l.dataIndx,value:D,value2:I})})},betweenTmpl:function(G,A){return[_a(88),G,"</div>",_a(89),_a(90),A,"</div>"].join("")},createListener:function(G){var A={},y=this.that;return A[G]=function(l,d){var _=d.column;y.filter({rules:[{dataIndx:_.filterIndx||d.dataIndx,condition:_.filter.condition,value:d.value,value2:d.value2}]})},A},getCellEd:function(y){var A;return y=(A=K(this.getCell(A=this.data.length-1,y))).find(_a(91)),[A,y]},onCreateHeader:function(){var G=this;G.that.options[_b(157)].header&&G.eachH(function(A){A.filter&&G[_b(270)](A)})},onHeaderKeyDown:function(G,A){var y=K(G[_b(32)].target);return!y.hasClass(_a(92))||this._onKeyDown(G,A,y)},postRenderCell:function(G){var A=G.dataIndx,y=G.filterUI||{},l=G.filter,d=this.that,p=(_=this.getCellEd(_=d.colIndxs[A]))[0],v=_[1];if(0!=v.length){var C=y.type,D={button:"click",select:"change",checkbox:"change",textbox:"timeout",textbox2:"timeout"},_=pq.filter.getVal(l)[0],P=("checkbox"==C?v.pqval({val:_}):"select"==C&&(K.isArray(_=_||[])||(_=[_]),G.format&&(_=_.slice(0,25).map(function(ie){return pq.format(G,ie)})),v.val(_.join(", "))),_=y.init,l.listeners||[l.listener||D[C]]);_&&_.find(function(ie){return d.callFn(ie,{dataIndx:A,column:G,filter:l,filterUI:y,$cell:p,$editor:v})});for(var B=0;B<P.length;B++){var U,J=P[B],W=typeof J,re={};for(U in"string"==W?J=this[_b(271)](J):"function"==W&&(re[D[C]]=J,J=re),J)this[_b(272)](v,U,J[U],G)}}},getControlStr:function(G){var A=this.that,y=G.dataIndx,l=" ui-corner-all",d=(p=pq.filter.getVal(p=G.filter))[0],_=p[1],p=p[2],v=(P=G.filterUI=pq.filter[_b(273)]({column:G,dataIndx:y,condition:p,indx:0},A)).type,C="",D=("textbox2"==v&&(_=null!=_?_:""),_a(93)+(P.cls||"")),I=P.style||"",P=(P.attr||"")+" tabindex=-1";return v&&0<=v.indexOf("textbox")?(d=d||"",D=D+" pq-search-txt"+l,C="textbox2"==v?this[_b(274)](this._input(G,d,D+" pq-from",I,P,p),this._input(G,_,D+" pq-to",I,P,p)):this._input(G,d,D,I,P,p)):"select"===v?C="<input type='text' "+["name='",y,"' class='",D+=l,"' style='",I,"' ",P].join("")+_a(94)+(A.options.rtl?"left":"right")+":0;top:3px;' class='ui-icon ui-icon-arrowthick-1-s'></span>":"checkbox"==v?C=["<input ",null==d||0==d?"":"checked=checked"," name='",y,_a(95)+D+"' style='"+I+"' "+P+" />"].join(""):"string"==typeof v&&(C=v),C},renderFilterCell:function(G,A,y){var l,d=this.that.options[_b(157)],_=G.cls,p=G.halign||G.align;return p&&y.push("pq-align-"+p),_&&y.push(_),y.push(G.clsHead),G.filter&&(l=this[_b(275)](G))&&y.push("pq-col-"+A),(p=this.hasMenu(d,G))&&y.push("pq-has-menu"),[_a(96),"",l,"</div>",p?"<span class='pq-filter-icon'></span>":""].join("")},hasMenu:function(G,A){return A=(A.filter||{}).menuIcon,(G=G.menuIcon)&&!1!==A||!1!==G&&A}}}(jQuery),function(K){var G=K.paramquery.cRefresh=function(A){var y=this;y.vrows=[],(y.that=A).on("dataReadyDone",function(){y.addRowIndx(!0)}),K(window).on("resize"+A[_b(35)]+" orientationchange"+A[_b(35)],y[_b(276)].bind(y))};K.extend(G,{Z:function(){return(window.outerWidth-8)/window.innerWidth},cssZ:function(){return document.body.style.zoom},isFullScreen:function(){return document.fullScreen||document[_b(277)]||document[_b(278)]||window[_b(279)]==screen.height},isSB:function(){return K(document).height()>K(window).height()}}),K(document).one("pq:ready",function(){var A=G.Z,y=G.cssZ,l=A(),d=y(),_=(G.isZoom=function(){var v=A(),C=y();if(l!=v||d!=C)return l=v,d=C,!0},G.isSB),p=_();pq.onResize(document.body,function(){var v=_();v!=p&&(p=v,K(window).trigger("resize",{SB:!0}))})}),K(window).on("resize",function(){G.isZoom&&(G.ISZOOM=G.isZoom())}),G.prototype={addRT:function(A){var y=this.that.options,l=y.dataModel,d=y[_b(280)];if(d)for(var _,p=A||l.data,v=p.length;v--;)(_=p[v])&&pq.extendT(_,d)},addRowIndx:function(A){for(var y,l=this.that,d=l.options.dataModel.dataUF,_=l.get_p_data(),p=_.length;p--;)(y=_[p])&&(y.pq_ri=p);if(A&&d)for(p=d.length;p--;)delete d[p].pq_ri},move:function(){},setGridAndCenterHeightForFlex:function(){var A=this.that;A.element.height(""),A[_b(93)].height(""),A.dims.htGrid=A.element.height()},setGridWidthForFlex:function(){var A=this.that,y=A.options,l=this[_b(281)],d=A.element,_=A.$toolPanel[0][_b(40)]+A.iRenderB[_b(282)]();y.maxWidth&&_>=this[_b(281)]&&(_=l),A._trigger("contWd"),d.width(_+"px"),A.dims.wdGrid=_},_calcOffset:function(A){return(A=/(-|\+)([0-9]+)/.exec(A))&&3===A.length?parseInt(A[1]+A[2]):0},setMax:function(A){var l,y=(l=this.that).element;(l=l.options[A])?(l==parseInt(l)&&(l+="px"),y.css(A,l)):y.css(A,"")},refreshGridWidthAndHeight:function(){var A,y,l,d=(W=this.that).options,_=W.dims,p=-1<(d.width+"").indexOf("%"),v=-1<(d.height+"").indexOf("%"),C=-1<(d.maxHeight+"").indexOf("%"),D="flex"==d.height,I=d[_b(283)],P=C&&D,B=-1<(d.maxWidth+"").indexOf("%"),U="flex"==d.width,J=B&&U,W=W.element;if(p||v||P||J){if(!(I=I?K(I):W.parent()).length)return;I=I[0]==document.body||"fixed"==W.css("position")?(l=K(window).width(),window[_b(279)]||K(window).height()):(l=I.width(),I.height());var he=this[_b(284)],re=p?he(d.width):0;he=v?he(d.height):0,J?A=parseInt(d.maxWidth)*l/100:p&&(A=parseInt(d.width)*l/100+re),P?y=parseInt(d.maxHeight)*I/100:v&&(y=parseInt(d.height)*I/100+he)}A||(U&&d.maxWidth?B||(A=d.maxWidth):p||(A=d.width)),d.maxWidth&&(this[_b(281)]=A),y||(D&&d.maxHeight?C||(y=d.maxHeight):v||(y=d.height)),parseFloat(A)==A?W.css("width",A=A<d.minWidth?d.minWidth:A):"auto"===A&&W.width(A),parseFloat(y)==y&&W.css("height",y=y<d.minHeight?d.minHeight:y),_.wdGrid=Math.round(W.width()),_.htGrid=Math.round(W.height())},isReactiveDims:function(){function A(v){return-1!=(v+"").indexOf("%")}var l=(p=this.that.options).width,d=p.height,_=p.maxWidth,p=p.maxHeight,y=A(l);return l="auto"===l,d=A(d),_=A(_),p=A(p),y||l||d||_||p},getParentDims:function(){var A,y=this.that.element,l=y.parent();return l.length?[l[0]==document.body||"fixed"==y.css("position")?(A=window[_b(279)]||K(window).height(),K(window).width()):(A=l.height(),l.width()),A]:[]},onWindowResize:function(A,y){var l,d,_=this,p=_.that,v=p.dims||{},C=v.htParent,D=v.wdParent,I=p.options,P=p.element;if(!G[_b(285)]()&&!I.disabled&&!(K.support.touch&&I.editModel.indices&&K(document[_b(39)]).is(".pq-editor-focus")||y&&(p=y.$grid)&&(p==P||0==P.closest(p).length))){if(I=_[_b(286)](),G.ISZOOM)return _[_b(287)](function(){_.refresh({soft:!0})});I&&_[_b(287)](function(){if(d=_[_b(288)](),l=d[0],(d=d[1])==C&&l==D){if(parseInt(P.width())==parseInt(v.wdGrid))return}else v.htParent=d,v.wdParent=l;_.refresh({soft:!0})})}},setResizeTimer:function(A){var y=this,l=y.that;clearTimeout(y[_b(289)]),y[_b(289)]=window.setTimeout(function(){l.element&&(A?A():y[_b(290)]())},l.options[_b(291)]||100)},refresh:function(A){var y,l=this,d=l.that,_=null==(A=A||{}).header||A.header,p=A.pager,v=!A.soft,C=d.element,D=d.$toolPanel,I=d.dims=d.dims||{htCenter:0,htHead:0,htSum:0,htBody:0,wdCenter:0,htTblSum:0};A.colModel&&d.refreshCM(),C[0][_b(40)]?(D.css("height","1px"),A.toolbar&&d[_b(292)](),(y=d.options)[_b(90)]._collapsed=!1,l.setMax("maxHeight"),l.setMax("maxWidth"),l[_b(293)](),v&&!1!==p&&d[_b(164)](),I.htCenter=l[_b(294)](),p=D[0][_b(40)],I.wdCenter=I.wdGrid-p,d[_b(93)].css("margin"+(y.rtl?"Left":"Right"),p),d.iRenderB.init({header:_,soft:A.soft,source:A.source}),"flex"==y.height&&l[_b(295)](),"flex"==y.width&&l[_b(296)](),D=this[_b(288)](),I.wdParent=D[0],I.htParent=D[1],v&&d[_b(117)](),y.dataModel[_b(161)]=void 0,d._trigger("refreshFull")):C.addClass("pq-pending-refresh")},setCenterHeight:function(){var A,y=this.that,l=y.$top,d=y.options;return"flex"===d.height&&!d.maxHeight||(A=y.dims.htGrid-(d.showTop?l[0][_b(41)]+parseInt(l.css("marginTop")):0)-y.$bottom[0][_b(41)]+1,y[_b(93)].height(A=0<=A?A:"")),A}}}(jQuery),function(K){(K.paramquery[_b(297)]=function(G,A){var y,l=this,d=(l.that=G,l.fns={},l.options=G.options,(A=l.colCB=(y=l.colUI=A).cbId?G.columns[A.cbId]:A).cb=K.extend({},{all:!1,header:!1,select:!1,check:!0,uncheck:!1},A.cb)),_=A.dataIndx;y._render=l.cellRender(A,y),l.on("dataAvailable",function(){G.one("dataReady",l[_b(298)].bind(l))}).on("dataReady",l[_b(299)].bind(l)).on("valChange",l[_b(300)](l)).on("cellKeyDown",l[_b(301)].bind(l)).on("refreshHeader",l[_b(302)].bind(l)).on("change",l.onChange(l,G,_,d.check,d.uncheck)),d.select&&l.on("rowSelect",l[_b(303)](l,G)).on("beforeRowSelectDone",l[_b(304)](l,G,_,d.check,d.uncheck)),l.on("beforeCheck",l[_b(305)].bind(l))}).prototype=K.extend({cellRender:function(G,A){var y=this;return function(l){var d,_=l.rowData,p=G.dataIndx,v=G.cb,C=A[_b(306)],D=A.useLabel;if(!(_.pq_gtitle||_[_b(9)]||l.Export))return[D?" <label>":"",_a(0),v.check===_[p]?"checked":""," ",y.isEditable(_,G,l.rowIndx,this.colModel.indexOf(G),p)?"":"disabled"," />",d=null==(d=C?C.call(this,l):d)?G==A?"":l.formatVal||l.cellData:d,D?"</label>":""].join("")}},checkAll:function(G,A){var y=this.that;return this.checkNodes(y=this.colCB.cb.all?y.options.dataModel.data:y.pdata,G=null==G||G,A)},checkNodes:function(G,A,y){var l,d,_,p,v,C,D,I;if(G.length)return l=this.that,d=this.colUI.dataIndx,_=(I=this.colCB).cb,p=(A=null==A||A)?_.check:_.uncheck,v=I.dataIndx,C=(I=G[0]).pq_ri,D=function(){return l[_b(171)]({rowIndx:C,dataIndx:d}),!1},G=G.map(function(P){var B={},U={};return B[v]=P[v],U[v]=p,{rowIndx:P.pq_ri,rowData:P,oldRow:B,newRow:U}}),I={rowIndx:C,rowData:I,dataIndx:d,check:A,rows:G},A={source:"checkbox"},!1===l._trigger("beforeCheck",y,I)?D():(A.updateList=I.rows,A.history=A.track=!_.select&&null,!1===l[_b(182)](A)?D():void(_.maxCheck||1!=A.updateList.length?l.refresh({header:!1}):l.refreshRow({rowIndx:A.updateList[0].rowIndx})))},isEditable:function(G,A,y,l,d){return this.that.isEditable({rowIndx:y,rowData:G,column:A,colIndx:l,dataIndx:d})},onBeforeRowSelect:function(G,A,y,l,d){return function(_,p){var v;"checkbox"!=p.source&&((v=function(C){for(var D,I,P=C.length,B=A.columns[y],U=A.colIndxs[y];P--;)D=(I=C[P]).rowIndx,G.isEditable(I=I.rowData,B,D,U,y)?I[y]=I[_b(2)]?d:l:C.splice(P,1)})(p.addList),v(p.deleteList))}},onChange:function(G,A,y,l,d){return function(_,p){function v(B,U){B.length&&A._trigger("check",_,{rows:B,dataIndx:P,rowIndx:B[0].rowIndx,rowData:B[0].rowData,check:U})}function C(B){B.forEach(function(U){var J=U.newRow,W=U.oldRow;J.hasOwnProperty(y)&&(J[y]===l?D.push(U):W&&W[y]===l&&I.push(U))})}var D=[],I=[],P=G.colUI.dataIndx;G.setValCBox(),C(p.addList),C(p.updateList),G.colCB.cb.select&&A.SelectRow().update({addList:D,deleteList:I,source:"checkbox"}),v(D,!0),v(I,!1)}},onCheckBoxChange:function(G){return function(A,y){if(y.dataIndx==G.colUI.dataIndx)return G.checkNodes([y.rowData],y.input.checked,A)}},onDataReady:function(){this.setValCBox()},off:function(){var G,A=this.fns,y=this.that;for(G in A)y.off(G,A[G]);this.fns={}},on:function(G,A){return this.fns[G]=A,this.that.on(G,A),this},destroy:function(){for(var G in this.off(),this)delete this[G]},oneDataReady:function(){var G,A=this.that.get_p_data(),y=0,l=A.length,d=this.colCB,_=d.cb,p=d.dataIndx;if(null!=p&&A&&_.select)for(;y<l;y++)(G=A[y])&&(G[p]===_.check?G[_b(2)]=!0:G[_b(2)]&&(G[p]=_.check))},onRowSelect:function(G,A){return function(y,l){"checkbox"!=l.source&&(l.addList.length||l.deleteList.length)&&(G.setValCBox(),A.refresh({header:!1}))}}},pq.mixin.ChkGrpTree)}(jQuery),function(K){var G,A=K.paramquery,y={options:{stateColKeys:{width:1,filter:["crules","mode"],hidden:1},stateKeys:{height:1,width:1,freezeRows:1,freezeCols:1,groupModel:["dataIndx","collapsed","grandSummary"],pageModel:["curPage","rPP"],sortModel:["sorter"]},detailModel:{cache:!0,offset:100,expandIcon:_a(97),collapseIcon:_a(98),height:"auto"},dragColumns:{enabled:!0,acceptIcon:_a(99),rejectIcon:_a(100),topIcon:_a(101),bottomIcon:_a(102)},flex:{on:!0,one:!1,all:!0},track:null,mergeModel:{flex:!1},realFocus:!0,sortModel:{on:!0,type:"local",multiKey:"shiftKey",number:!0,single:!0,cancel:!0,sorter:[],useCache:!0,ignoreCase:!1},filterModel:{on:!0,newDI:[],type:"local",mode:"AND",header:!1,timeout:400}},_create:function(){var d=this,_=d.options;null==_.rtl&&(_.rtl="rtl"==d.element.css("direction")),d.listeners={},d[_b(153)]={},d.iHistory=new A.cHistory(d),d.iGroup=new A.cGroup(d),d.iMerge=new A.cMerge(d),d[_b(159)]=new(A[_b(307)])(d),d.iSelection=new pq.Selection(d),d.iUCData=new A.cUCData(d),d[_b(308)]=new(A[_b(309)])(d),d._super(),new A.cFormula(d),d[_b(247)]=new(A[_b(260)])(d),d[_b(292)](),"remote"===_.dataModel.location&&d.refresh(),d.on("dataAvailable",function(){d.one("refreshDone",function(){d._trigger("ready"),setTimeout(function(){d.element&&d._trigger("complete")},0)})}),d.__init(),d[_b(118)]({header:!0})},__init:function(){G=G||K([_a(103),_a(104),"</div>"].join("")).appendTo(document.body)}};function l(d,_,p){for(var v=0,C=d.length;v<C;v++){for(var D,I=d[v],P={},B=0,U=_.length;B<U;B++)P[D=_[B]]=I[D];p.push(P)}}K.widget("paramquery.pqGrid",A._pqGrid,y),K.widget.extend=function(){var d,_,p,v,C,D=Array.prototype.shift,I=K[_b(43)],P=K.isArray,B=K.widget.extend,U=D.apply(arguments),J=("boolean"==typeof U&&(d=U,U=D.apply(arguments)),arguments),W=0,re=J.length;for(null==d&&(d=1<re);W<re;W++)for(v in _=J[W])(C=(p=Object[_b(44)](_,v)).get)&&"reactiveGetter"!=C.name||p.set?Object[_b(45)](U,v,p):void 0!==(C=_[v])&&(p=!(0<W),I(C)?C.byRef?U[v]=C:(U[v]=U[v]||{},B(p,U[v],C)):U[v]=P(C)&&d&&p?C.slice():C);return U},pq.grid=function(d,_){return(d=K(d).pqGrid(_)).data("paramqueryPqGrid")||d.data("paramquery-pqGrid")},A.pqGrid.regional={},A.pqGrid.defaults=(y=A.pqGrid.prototype).options,y.focusT=function(d){var _=this;setTimeout(function(){_.focus(d)})},y.focus=function(he){var _,v,C,D,I=this,P=I._fe,B=!(he=he||P||{}).nofocus,U=I.options.editModel,J=(J=he[_b(75)])>=(W=I.pdata).length?W.length-1:J,W=(he=(he=he.colIndx)>(W=I.colModel).length?W.length-1:he,I.iMerge),re=J+I.riOffset;he=-1==he?I[_b(175)](!0):he,null!=J&&null!=he&&(W[_b(195)](re,he)&&(J=(W=W[_b(137)](re,he))[_b(75)],he=W.colIndx),re=I.iRenderB,W="ontouchstart"in window?"disabled":"",_=(C=re[_b(310)](J,he))[0],C={left:_,top:D=C[1],height:C[3]-D-2,width:C[2]-_-2},D=re[_b(168)](J,he)[0],P?(P.$td&&P.$td[_b(72)]("pq-focus"),(v=P.$ele)&&v.parent()[0]!=D&&(P.$ele.remove(),v=null)):P=I._fe={},(v=v||(P.$ele=K("<textarea "+W+_a(105)))).appendTo(D),v.val("").css(C),P[_b(75)]=J,P.colIndx=he,(P.$td=I.getCell(P)).addClass("pq-focus"),I.one("assignTblDims",function(){v.css({left:0,top:0})}),B&&(I.one("scroll",function(){(P.$td=I.getCell(P)).addClass("pq-focus")}),v.blur(),v[0].focus()),U[_b(229)]&&v.off("input").on("input",function(ie){var ae=I.getEditor(P,"type"),Me="select"==ae;I.isEditable(P)&&ae&&!Me&&(I.editCell(P),ae=I[_b(66)]().$editor,Me=K(ie.target).val(),ae&&ae.val(Me))}),v.css({height:2,width:2}))},y.onfocus=function(d){},y[_b(94)]=function(){},y.onblur=function(){},y.callFn=function(d,_){return pq.getFn(d).call(this,_)},y.rowExpand=function(d){this.iHierarchy.rowExpand(d)},y[_b(311)]=function(d){this.iHierarchy[_b(311)](d)},y[_b(312)]=function(d){this.iHierarchy[_b(312)](d)},y._saveState=function(d,_,p){var v,C,D,I;for(v in p)(C=p[v])&&(D=d[v],K.isArray(C)?null!=D&&(I=_[v]=K[_b(43)](_[v])?_[v]:{},C.forEach(function(P){I[P]=D[P]})):_[v]=D)},y.saveState=function(d){d=d||{};var _,p,v,C=this,re=C.element,D=C.options,I=D[_b(313)],P=D.stateKeys,B=C.colModel,U=[],J=0,W=B.length;for(re=re[0].id;J<W;J++)_=(p=B[J]).dataIndx,C._saveState(p,p={dataIndx:_},I),U[J]=p;return v={colModel:U,datestamp:Date.now()},C._saveState(D,v,P),(D=d.extra)&&(v=K.extend(!0,v,D)),!1!==d.stringify&&(v=JSON.stringify(v),!1!==d.save&&"undefined"!=typeof Storage&&localStorage.setItem("pq-grid"+(re||""),v)),v},y.getState=function(){if("undefined"!=typeof Storage)return localStorage.getItem("pq-grid"+(this.element[0].id||""))},y.loadState=function(d){var _=this,p=K.widget.extend,v=(d=d||{}).state||_.getState();if(!v)return!1;for(var C,D,I,P=(v="string"==typeof v?JSON.parse(v):v).colModel,B=[],U=[],J=_.options,W=J[_b(313)],re=1<_.depth,he=(re?_:J).colModel,ie=0,ae=P.length;ie<ae;ie++)B[I=(C=P[ie]).dataIndx]=C,U[I]=ie;for(re||he.sort(function(Me,Ce){return U[Me.dataIndx]-U[Ce.dataIndx]}),ie=0,ae=he.length;ie<ae;ie++)(C=B[I=(D=he[ie]).dataIndx])&&_._saveState(C,D,W);return _.iCols.init(),p(J.sortModel,v.sortModel),p(J.pageModel,v.pageModel),_.Group().option(v.groupModel,!1),_.Tree().option(v.treeModel,!1),re={freezeRows:v.freezeRows,freezeCols:v.freezeCols},isNaN(+J.height)||isNaN(+v.height)||(re.height=v.height),isNaN(+J.width)||isNaN(+v.width)||(re.width=v.width),_.option(re),!1!==d.refresh&&_[_b(118)](),!0},y[_b(292)]=function(){var d,_,p,v,C=this,D=C.options,I=D.toolbar;C._toolbar&&(d=C._toolbar).destroy(),I&&(v=I.cls||"",_=I.style||"",p=I.attr||"",I=I.items,v=K("<div class='"+v+"' style='"+_+"' "+p+" ></div>"),d?d.widget()[_b(314)](v):C.$top.append(v),d=pq.toolbar(v,{items:I,gridInstance:C,bootstrap:D.bootstrap}),D[_b(315)]||v.css("display","none"),C._toolbar=d)},y.filter=function(d){return this[_b(159)].filter(d)},y.Checkbox=function(d){return this.iCheckBox[d]},y[_b(316)]=function(){this[_b(115)].refreshHS()},y[_b(317)]=function(){this.iRenderSum.refreshHS()},y[_b(318)]=function(p){var _=(p=this.normalize(p)).colIndx,v=(p=p.column,this[_b(115)]),C=v.rows-1;this.options[_b(157)].header&&(v[_b(171)](C,_,{},p),v[_b(270)](p,_,C))},y.pageData=function(){return this.pdata},y.getData=function(v){var _=(v=v||{}).dataIndx,C=(v=v.data,!(p=_?_.length:0)),D=this.columns,I=(P=this.options.dataModel)[_b(319)]||P.data||[],P=P.dataUF||[],B=[];if(!p)return P.length?I.concat(P):I;v?l(v,_,B):(l(I,_,B),l(P,_,B));for(var U=[],p=_.reduce(function(Me,Ce){var Le=D[Ce];return Le&&Me.push({dataIndx:Ce,dir:"up",dataType:Le.dataType,sortType:Le.sortType}),Me},[]),J={},W=0,re=B.length;W<re;W++){var he=B[W],ie=JSON.stringify(he);J[ie]||(U.push(he),J[ie]=1)}return this.iSort[_b(320)](p,U,C)},y[_b(321)]=function(d,_){var p=d[0];return K[_b(43)](p)?(p=Object.keys(p))[0]!=_&&1==p.length&&(d=d.map(function(v){var C,D={};for(C in v)D[_]=C,D.pq_label=v[C];return D})):d=d.map(function(v){var C={};return C[_]=v,C}),d},y[_b(322)]=function(B,P,p){var v,C=this,D=C.options[_b(157)],I=D.newDI.slice();return P=P?[P,B]:[B],B=I.indexOf(B),"AND"==D.mode&&I.length&&"remote"!=D.type&&(0<=B&&I.splice(B,I.length),I.length&&(D=I.map(function(U){var J=C.getColumn({dataIndx:U}).filter;return{dataIndx:U,crules:J.crules||[J],mode:J.mode}}),v=C.filter({data:C.getData(),mode:"AND",rules:D}))),P=P.concat(p||[]),C.getData({data:v,dataIndx:P})},y[_b(323)]=function(d,_,p){var v;return d.filter(null==p?function(C){var D=C[_];return null!=D&&""!==D||(v?void 0:(v=!0,!(C[_]="")))}:function(C){return null!=(C=C[_])&&""!==C})},y.get_p_data=function(){var d,_=(v=this.options).pageModel,p=_.type,v=v.dataModel.data,C=this.pdata,D=[];return p?(_=_.rPP,d=this.riOffset||0,!C.length&&v.length&&(C=v.slice(d,d+_)),D=(p="remote"==p)?new Array(d):v.slice(0,d),p=p?[]:v.slice(d+_),D.concat(C,p)):C.length?C:v},y[_b(147)]=function(d){var _=this,p=!(d=d||{}).data,v=d.source,C=d.sort,D=[],I=(B=_.options)[_b(157)],P=B.dataModel,B=B.sortModel;if(_.iRefresh.addRT(d.data),0!=p&&!(_.pdata=[])!==d.trigger&&_._trigger("dataAvailable",d.evt,{source:v}),D=(I&&I.on&&"local"==I.type&&0!=d.filter?_[_b(159)][_b(324)](d):P).data,"local"==B.type&&!1!==C&&(p?_.sort({refresh:!1}):D=_.iSort[_b(325)](D,!0)),0==p)return D;_[_b(17)](d)},y.reset=function(P){var _=this,p=(P=P||{}).sort,C=!1!==P.refresh,I=P.filter;P=P.group,(p||I||P)&&(p&&(0,K.extend)(_.options.sortModel,!0===p?{sorter:[]}:p),I&&!C&&this[_b(159)][_b(326)](_.colModel),P&&_[_b(327)](!0===P?{dataIndx:[]}:P,!1),C&&(I?(_.filter({oper:"replace",rules:[]}),_[_b(316)]()):p?_.sort():_[_b(17)]()))},y._trigger=A._trigger,y.on=A.on,y.one=A.one,y.off=A.off,y.pager=function(){var d;return this.pageI=this.pageI||((d=this.widget().find(".pq-pager")).length?d.pqPager("instance"):null),this.pageI},y.toolbar=function(){return this._toolbar.element},y.Columns=function(){return this.iCols}}(jQuery),function(K){var G=K.paramquery;G.cColModel=function(A){this.that=A,this.init()},G.cColModel.prototype={add:function(A,I,D,d){var _,p,v=this,C=v.that,P=(D=D||C.options.colModel,{args:arguments}),B=A.length,U=[I=null==I?D.length:I,0].concat(A);!1!==C._trigger("beforeColAdd",null,P)&&("undo"!=d&&"redo"!=d&&C.iHistory.push({callback:function(J){p=(_||{}).colModel,J?v.add(A,I,p,"redo"):v.remove(B,I,p,"undo")}}),D.splice.apply(D,U),C.refreshCM(),_=D[0].parent,C._trigger("colAdd",null,P),C.refresh())},move:function(A,y,l,d,_,p){var v,C=this,D={args:arguments},I=C.that,P=[],B=I.options.colModel,U=(d||{}).colModel||B,J=(_||{}).colModel||B;return!1!==I._trigger("beforeColMove",null,D)&&("undo"!=p&&"redo"!=p&&I.iHistory.push({callback:function(W){W?C.move(A,y,l,d,_,"redo"):C.move(A,v,U==J&&v<y?y+A:y,_,d,"undo")}}),P=U.splice(y,A),J.splice.apply(J,[v=U==J&&y+A<l?l-A:l,0].concat(P)),I.refreshCM(),I._trigger("colMove",null,D),I.refresh()),P},remove:function(A,y,I,d){var _,p,v=this,C={args:arguments},D=v.that,P=(I=I||D.options.colModel)[0].parent;!1!==D._trigger("beforeColRemove",null,C)&&("undo"!=d&&"redo"!=d&&D.iHistory.push({callback:function(B){p=(P||{}).colModel,B?v.remove(A,y,p,"redo"):v.add(_,y,p,"undo")}}),_=I.splice(y,A),D.refreshCM(),D._trigger("colRemove",null,C),D.refresh())},alter:function(A){var y=this.that;A.call(y),y.refreshCM(),y.refresh()},assignRowSpan:function(){for(var A,y,l,d,_=this.that,p=_.colModel.length,v=_[_b(144)],C=_.depth,D=0;D<p;D++)for(y=0;y<C;y++)if(A=v[y][D],!(0<D&&A==v[y][D-1]||0<y&&A==v[y-1][D])){for(l=y+(d=1);l<C;l++)A==v[l][D]&&d++;A.rowSpan=d}return v},autoGenColumns:function(){var _,A=this.that.options,y=(_=A[_b(328)]||{}).dataType,l=_.title,d=_.width,p=pq.valid,v=[];(_=A.dataModel.data)&&_.length&&K.each(_=_[0],function(C,D){var I="string";p.isInt(D)?I=-1<D+"".indexOf(".")?"float":"integer":p.isDate(D)?I="date":p.isFloat(D)&&(I="float"),v.push({dataType:y||I,dataIndx:C,title:l||C,width:d||100})}),A.colModel=v},cacheIndices:function(){for(var A=this.that,y="JSON"==this[_b(46)](),l={},d={},_={},p=A.colModel,v=0,C=p.length,D=0,I=this.vciArr=[],P=this.ciArr=[];v<C;v++){var B=p[v],U=B.dataIndx;null==U&&("pq_detail"==(U="detail"==B.type?"pq_detail":y?"dataIndx_"+v:v)&&(B.dataType="object"),B.dataIndx=U),l[U]=B,d[U]=v,B[_b(64)]&&(_[U]=_),B.hidden||(I[P[D]=v]=D,D++),B.align||!(U=B.dataType)||"integer"!=U&&"float"!=U||(B.align="right")}A.columns=l,A.colIndxs=d,A[_b(64)]=_},collapse:function(C){var y,l,d,_=C[_b(90)],p=_.on||!1,v=C.colModel||[],D=C=v.length,I=0,P=_.last,B=P?C-1:0;if(C){for(;D--;)y=v[D],null===P?(d=y.showifOpen===p)&&I++:d=B!==D&&p,(y.hidden=d)||!(l=y.colModel)||y[_b(90)]||this.each(function(U){U.hidden=d},l);I==C&&this.each(function(U){U.hidden=!1},[v[0]])}},each:function(A,y){var l=this.that;(y||l.options.colModel).forEach(function(d){A.call(l,d),d.colModel&&this.each(A,d.colModel)},this)},extend:function(A,y){for(var l=A.length;l--;)y&&pq.extendT(A[l],y)},find:function(A,y){for(var l,d=this.that,_=y||d.options.colModel,p=0,v=_.length;p<v;p++)if(A.call(d,l=_[p])||l.colModel&&(l=this.find(A,l.colModel)))return l},getHeaderCells:function(){for(var A=this.that,y=A.options.colModel,l=A.colModel.length,d=A.depth,_=[],p=0;p<d;p++){_[p]=[];for(var v,C=0,D=0,I=0;I<l;I++){if(0==p)v=y[C];else{var P=_[p-1][I],B=P.colModel;if(B&&0!=B.length){for(var U=I-P.leftPos,J=0,W=0,re=0;re<B.length;re++)if(U<(J+=0<B[re].childCount?B[re].childCount:1)){W=re;break}v=B[W]}else v=P}P=v.childCount||1,I==D?(v.leftPos=I,_[p][I]=v,D+=P,y[C+1]&&C++):_[p][I]=_[p][I-1]}}return A[_b(144)]=_},getDataType:function(){var A=this.colModel;if(A&&A[0])return"string"==typeof A[0].dataIndx?"JSON":"ARRAY"},getci:function(A){return this.ciArr[A]},getvci:function(A){return this.vciArr[A]},getNextVisibleCI:function(A){for(var y=this.vciArr,l=this.that.colModel.length;A<l;A++)if(null!=y[A])return A},getPrevVisibleCI:function(A){for(var y=this.vciArr;0<=A;A--)if(null!=y[A])return A},getLastVisibleCI:function(){var A=this.ciArr;return A[A.length-1]},getVisibleTotal:function(){return this.ciArr.length},hide:function(A){var y=this.that,l=y.columns;A.diShow=A.diShow||[],A.diHide=A.diHide||[],!1!==y._trigger("beforeHideCols",null,A)&&(A.diShow=A.diShow.filter(function(d){if((d=l[d]).hidden)return delete d.hidden,!0}),A.diHide=A.diHide.filter(function(d){if(!(d=l[d]).hidden)return d.hidden=!0}),y.refresh({colModel:!0}),y._trigger("hideCols",null,A))},init:function(A){var y=this,l=y.that,d=l.options,_=d[_b(328)],p=d.colModel;p||(y[_b(329)](),p=d.colModel),d=y.nestedCols(p),l.depth=d.depth,p=l.colModel=d.colModel,_&&y.extend(p,_),y[_b(330)](),y[_b(331)](),y[_b(332)](),y[_b(333)](),l._trigger("CMInit",null,A)},initTypeColumns:function(){var A,y=this.that,l=y.colModel,d=0,_=l.length,p=y.columns,v=y.iCheckBox=y.iCheckBox||{};for(A in v)v[A].colUI!=p[A]&&(v[A].destroy(),delete v[A]);for(;d<_;d++){var C=l[d],D=C.type;D&&("checkbox"==D||"checkBoxSelection"==D?(A=C.dataIndx,C.type="checkbox",v[A]=v[A]||new(G[_b(297)])(y,C)):"detail"!=D||y.iHierarchy||(C.dataIndx="pq_detail",y.iHierarchy=new G.cHierarchy(y,C)))}},nestedCols:function(A,y,l,d){for(var _=A.length,p=[],v=0,C=y=y||1,D=0,I=0,P=0;v<_;v++){var B=A[v],U=B.colModel;B.parent=d,!0===l&&(B.hidden=l),U&&U.length?(B[_b(90)]&&this.collapse(B),U=this.nestedCols(U,y+1,B.hidden,B),p=p.concat(U.colModel),0<U.colSpan?(U.depth>C&&(C=U.depth),B.colSpan=U.colSpan,D+=U.colSpan):B.colSpan=0,P+=U.o_colspan,B.o_colspan=U.o_colspan,B.childCount=U.childCount,I+=U.childCount):(B.hidden?B.colSpan=0:(B.colSpan=1,D++),P++,B.o_colspan=1,B.childCount=0,I++,p.push(B))}return{depth:C,colModel:p,colSpan:D,width:0,childCount:I,o_colspan:P}},reduce:function(A,y){var l=this.that,d=[];return(y||l.options.colModel).forEach(function(_,p){(_=A.call(l,_,p))&&((p=_.colModel)&&p.length?(p=this.reduce(A,p)).length&&(_.colModel=p,d.push(_)):d.push(_))},this),d},reverse:function(A){var y,l=this,d=l.that;(A||d.options.colModel).reverse().forEach(function(_){(y=_.colModel)&&l.reverse(y)}),A||d.refreshCM()}}}(jQuery),function(K){K.extend(K.paramquery.pqGrid.prototype,{parent:function(){return this._parent},child:function(A){return((this.normalize(A).rowData||{}).pq_detail||{}).child}}),(K.paramquery.cHierarchy=function G(A,y){var l=this,d=A.options;l.that=A,l.type="detail",l[_b(334)]=!0,l[_b(335)]="auto"==(d=d[_b(336)].height)?1:d,A.on("cellClick",l.toggle.bind(l)).on("cellKeyDown",function(_,p){if(_.keyCode==K.ui.keyCode.ENTER)return l.toggle(_,p)}).on("beforeViewEmpty",l[_b(337)].bind(l)).on("autoRowHeight",l[_b(338)].bind(l)).one("render",function(){A.iRenderB.removeView=l.removeView(l,A),A.iRenderB.renderView=l.renderView(l,A)}).one("destroy",l.onDestroy.bind(l)).on("columnResize",l[_b(339)].bind(l)),y._render=l.renderCell.bind(l)}).prototype={detachCells:function(A){A.children().detach(),A.remove()},onColumnResize:function(){var A=this,y=A.getPadding();A.that.iRenderB.eachV(function(l,d){K("#"+A.getId(d)).css(y)})},getCls:function(){return"pq-detail-cont-"+this.that.uuid},getId:function(A){return"pq-detail-"+A+"-"+this.that.uuid},getRip:function(A){return+A.id.split("-")[2]},onAutoRowHeight:function(){var A=this,y=this.that.iRenderB;y.$ele.find("."+A.getCls()).each(function(l,d){var _=A.getRip(d);_=y[_b(340)](_),K(d).css("top",_)})},onBeforeViewEmpty:function(A,d){var p=d[_b(75)],l=this.that.iRenderB,_=(d=d.region,0<=p?"#"+this.getId(p):"."+this.getCls());p=(0<=p?l.$ele:l["$c"+d]).find(_),this[_b(341)](p)},onDestroy:function(){(this.that.getData()||[]).forEach(function(A){A.child&&A.child.remove()})},onResize:function(A,y){var l,d=[];pq.onResize(y[0],function(){d.push(y[0]),clearTimeout(l),l=setTimeout(function(){var _=A.that.pdata,p=[];d.forEach(function(v){var C,D,I;document.body.contains(v)&&(C=A.getRip(v),v=v[_b(41)],(I=(D=_[C]).pq_detail.height||A[_b(335)])!=v&&(D.pq_detail.height=v,p.push([C,v-I])))}),d=[],p.length&&(A.that._trigger("onResizeHierarchy"),A[_b(342)](p))},150)})},removeView:function(A,y){var l=y.iRenderB.removeView;return function(d,_,p){for(var v,C,D=l.apply(this,arguments),I=A.getCls(),P=this[_b(343)](d,p),B=d;B<=_;B++)(v=this.getRow(B,P))&&1==v.children.length&&1==(C=K(v).children("."+I)).length&&(A[_b(341)](C),v.parentNode[_b(121)](v));return D}},getPadding:function(){var l,y={};return y["padding"+((l=this.that).options.rtl?"Right":"Left")]=l=l.dims.wdContLeft+5,y},renderView:function(A,y){var l=y.iRenderB.renderView;return function(d,_,p,v){var C,D=l.apply(this,arguments),I=y.iRenderB,P=A.getCls()+" pq-detail",B=y.options,U=A.getPadding(),J=B.freezeRows,W=B[_b(336)],re=W.init,he=this.data;if(A[_b(334)]){for(A[_b(334)]=!1,C=d;C<=_;C++)if((Ce=he[C])&&!Ce.pq_hidden){var Me=(ie=Ce.pq_detail=Ce.pq_detail||{}).child;if(ae=ie.show){Me||"function"==typeof re&&(Me=re.call(y,{rowData:Ce}),ie.child=Me);var ae=Me.parent(),Ce=I[_b(340)](C),ie=_a(106)+Ce+_a(107);if(ae.length){if(!document.body.contains(ae[0]))throw _a(108);ae.css({top:Ce})}else ae=K(_a(109)+A.getId(C)+"' class='"+P+"' style='"+ie+"'></div>").append(Me),K(I.getRow(C,C<J?"tr":"right")).append(ae),"auto"==W.height&&A.onResize(A,ae);ae.css(U);for(var Le,Ue,ce=ae.find(".pq-grid"),lt=0,qe=ce.length;lt<qe;lt++)(Ue=(Le=K(ce[lt])).pqGrid("instance"))._parent=y,Le.hasClass("pq-pending-refresh")&&Le.is(":visible")&&(Le[_b(72)]("pq-pending-refresh"),Ue.refresh())}}return A[_b(334)]=!0,D}}},renderCell:function(d){var y=this.that.options[_b(336)],l=d.cellData;return(d=d.rowData)[_b(9)]||d.pq_gtitle?"":"<div class='ui-icon "+(l&&l.show?y.expandIcon:y[_b(344)])+"'></div>"},rowExpand:function(l){var y=this.that,p=(l=y.normalize(l),y.options),d=l.rowData,_=l[_b(75)],v=(p=p[_b(336)],"pq_detail");d&&!1!==y._trigger("beforeRowExpand",null,l)&&((y=d[v]=d[v]||{}).show=!0,p.cache||this[_b(311)](l),this[_b(342)]([[_,y.height||this[_b(335)]]],l))},rowInvalidate:function(y){var d,l="pq_detail";(d=(d=(y=this.that.getRowData(y))[l])?d.child:null)&&(d.remove(),y[l].child=null)},rowCollapse:function(l){var y=this.that,_=y.options,p=(l=y.normalize(l)).rowData,d=l[_b(75)];_=_[_b(336)],(p=p?p.pq_detail:null)&&p.show&&!(l.close=!0)!==y._trigger("beforeRowExpand",null,l)&&(_.cache||this[_b(311)](l),p.show=!1,this[_b(342)]([[d,-(p.height||this[_b(335)])]],l))},softRefresh:function(A,y){var l=this.that,d=l.iRenderB;d[_b(345)](A),d.setPanes(),d[_b(346)](!0),y&&l.refreshRow(y),d.refresh()},toggle:function(A,p){var l=this.that,d=p.column,_=p.rowData,v=(p=p.rowIndx,this.type);_.pq_gtitle||_[_b(9)]||d&&d.type===v&&l[(_.pq_detail=_.pq_detail||{}).show?"rowCollapse":"rowExpand"]({rowIndx:p})}}}(jQuery),function(K){(K.paramquery.cCells=function G(A){var y=this;y.that=A,y.class="pq-grid-overlay",y.rtl=A.options.rtl?"right":"left",y.ranges=[],A.on("assignTblDims",y.onRefresh(y,A))}).prototype={addBlock:function(A,y){var l,d,_,p,v,C,D,I,P,B,U,J,W,re,he,ie,ae,Me,Ce;A&&this.addUnique(this.ranges,A)&&(l=this.that,_=(d=p=this.serialize(D=A.r1,v=A.c1,P=A.r2,A=A.c2))+" pq-number-overlay",p+=" pq-head-overlay",U=l.iRenderB,I=function(Le,Ue){return U[_b(168)](Le,Ue)},(re=this.shiftRC(D,v,P,A))&&(P=re[2],A=re[3],Ce=I(D=re[0],v=re[1]),C=I(P,A),J=(re=U.getCellXY(D,v))[0],W=re[1],he=(re=U[_b(310)](P,A))[2],ae=(ie=re[3])-W,Me=he-J,Ce==C?this.addLayer(J,W,ae,Me,d,Ce,(Me?"":_a(110))+(ae?"":_a(111))):(D=I(D,A),I=I(P,v),P=Ce[0][_b(40)],B=Ce[0][_b(41)],I==Ce?(this.addLayer(J,W,ae,P-J,d,Ce,"border-right:0;"),this.addLayer(0,W,ae,he,d,C,"border-left:0;")):Ce==D?(this.addLayer(J,W,B-W,Me,d,Ce,"border-bottom:0;"),this.addLayer(J,0,ie,Me,d,C,"border-top:0;")):(this.addLayer(J,W,B-W,P-J,d,Ce,_a(112)),this.addLayer(0,W,B-W,he,d,D,_a(113)),this.addLayer(J,0,ie,P-J,d,I,_a(114)),this.addLayer(0,0,ie,he,d,C,_a(115)))),this.addLayer(0,W,ae,Me=l.options.numberCell.outerWidth||0,_,U.$clt,""),this.addLayer(0,W,ae,Me,_,U.$cleft,""),0!=l.options.showHeader&&(J=(re=(U=l[_b(115)]).getCellXY(0,v))[0],W=re[1],he=(re=U[_b(310)](l[_b(144)].length-1,A))[2],ae=(ie=re[3])-W,this.addLayer(J,W,ae,Me=he-J,p,Ce=U.$cright,""),this.addLayer(J,W,ae,Me,p,Ce=U.$cleft,""))))},addLayer:function(A,y,l,d,_,p,v){K("<svg class='"+this.class+" "+_+"' style='"+(A=this.rtl+":"+A+"px;top:"+y+"px;height:"+l+"px;width:"+d+"px;"+(v||""))+"'></svg>").appendTo(p)},addUnique:function(A,y){if(!A.filter(function(l){return y.r1==l.r1&&y.c1==l.c1&&y.r2==l.r2&&y.c2==l.c2})[0])return A.push(y),!0},getLastVisibleFrozenCI:function(){for(var A=this.that,y=A.colModel,l=A.options.freezeCols-1;0<=l;l--)if(!y[l].hidden)return l},getLastVisibleFrozenRIP:function(){for(var A=this.that,y=A.get_p_data(),l=A.riOffset,d=A.options.freezeRows+l-1;l<=d;d--)if(!y[d].pq_hidden)return d-l},getSelection:function(){var A=this.that,y=A.get_p_data(),l=A.colModel,d=[];return this.ranges.forEach(function(_){for(var p,v,D=_.r2,I=_.c1,P=_.c2,B=_.r1;B<=D;B++)for(p=y[B],v=I;v<=P;v++)d.push({dataIndx:l[v].dataIndx,colIndx:v,rowIndx:B,rowData:p})}),d},isSelected:function(y){var l=(y=this.that.normalize(y)).rowIndx,d=y.colIndx;return null==d||null==l?null:!!this.ranges.find(function(D){var p=D.r1,v=D.r2,C=D.c1;if(D=D.c2,p<=l&&l<=v&&C<=d&&d<=D)return!0})},onRefresh:function(A,y){var l;return function(){clearTimeout(l),l=setTimeout(function(){y.element&&(A.removeAll(),y.Selection().address().forEach(function(d){A.addBlock(d)}))},50)}},removeAll:function(){var A=this.that,y=A.$cont;y&&(y.children().children().children("svg").remove(),A.$head_i.children().children("svg").remove()),this.ranges=[]},removeBlock:function(A){var y,l,d,_,p;A&&(y=A.r1,l=A.c1,d=A.r2,_=A.c2,A=this.that,0<=(p=this.ranges.findIndex(function(v){return y==v.r1&&l==v.c1&&d==v.r2&&_==v.c2}))&&(this.ranges.splice(p,1),p="."+this.class+"."+this.serialize(y,l,d,_),A.$cont.find(p).remove(),A.$head_i.find(p).remove()))},serialize:function(A,y,l,d){return"r1"+A+"c1"+y+"r2"+l+"c2"+d},shiftRC:function(A,y,l,d){var _=this.that,p=_.pdata.length,C=_.riOffset;if(l-=C,!(p<=(A=(A-=C)<_.options.freezeRows?Math.max(A,Math.min(0,l)):A)||l<0))return A=A+C-C,l=(l=Math.min(l,p-1))+C-C,[A=Math.max(A,0),y,l=Math.min(l,p-1),d=Math.min(d,_.colModel.length-1)]}}}(jQuery),function(K){K.paramquery.pqGrid.prototype.Range=function(l,d){return new pq.Range(this,l,"range",d)};var G=pq.Range=function(l,d,_,p){if(null==l)throw"invalid param";if(this.that=l,this._areas=[],this instanceof G==0)return new G(l,d,_,p);this._type=_||"range",this.init(d,p)};function A(l){l.shiftKey&&"pqGrid:mousePQUp"!=l.type||(this._trigger("selectEnd",null,{selection:this.Selection()}),this.off("mousePQUp",A),this.off("keyUp",A))}G.prototype=K.extend({add:function(l){this.init(l)},address:function(){return this._areas},addressLast:function(){var l=this.address();return l[l.length-1]},history:function(l){function d(he){function ie(ae,Me,Ce,Le){for(var Ue in ae){var ce,lt=ae[Ue][Le],qe=K.extend(!0,{},qe=(he?Me:Ce)[Ue]);for(ce in lt)lt[ce]=qe[ce];for(ce in qe)lt[ce]=qe[ce]}}ie(D,p,_,W),ie(U,B,P,l),ie(I,C,v,re),J.refresh()}var _={},p={},v={},C={},D={},I={},P={},B={},U={},J=this.that,W="pq_cell"+l,re="pq_row"+l;return{add:function(he,ie,ae){function Me(Ce,Le,Ue,ce,lt){Ue[Le=Ce[Le]]||(ce[Le]=Ce,Ue[Le]=K.extend(!0,{},Ce[lt]))}ae?Me(he,"pq_ri",_,D,W):ie?Me(ie,"dataIndx",P,U,l):Me(he,"pq_ri",v,I,re)},push:function(){function he(ae){return Object.keys(ae).length}function ie(ae,Me,Ce){for(var Le in ae)Me[Le]=K.extend(!0,{},ae[Le][Ce])}(he(D)||he(U)||he(I))&&(ie(D,p,W),ie(U,B,l),ie(I,C,re),J.iHistory.push({callback:d}))}}},refreshStop:function(){this._stop=!0},refresh:function(){this.that.refresh(),this._stop=!1},setAPS:function(l,d,_){function p(re,he,ie){null==ie&&!re[B]||(D=(D=re[B]=re[B]||{})[he]=D[he]||{})[l]==ie||(W.add(re,null,!0),D[l]=ie)}var v,C,D,I=this,P=I.that,B="pq_cell"+_,U="pq_row"+_,J="attr"==_,W=I.history(_);I.each(function(re,he,ie,ae,Me,Ce){v="row"==ae,!(C="column"==ae)&&!v||J?p(re,he,d):((D=C?(I.addProp(ie),ie[_]=ie[_]||{}):re[U]=re[U]||{})[l]!=d&&(C?W.add(null,ie):W.add(re),D[l]=d),P.Range(C?{c1:Ce,c2:Ce}:{r1:Me,r2:Me},!1).each(function(Le,Ue){var ce;C&&null!=(Le[U]||{})[l]&&(ce=d),p(Le,Ue,ce)},!0))},J),W.push(),I._stop||I.refresh()},addProp:function(l){l.prop=l.prop||{get align(){return l.align},set align(d){l.align=d},get format(){return l.format},set format(d){l.format=d},get valign(){return l.valign},set valign(d){l.valign=d},get edit(){return l.editable},set edit(d){l.editable=d}}},setAttr:function(l,d){this.setAPS(l,d,"attr")},setStyle:function(l,d){this.setAPS(l,d,"style")},setProp:function(l,d){this.setAPS(l,d,"prop")},clear:function(){return this.copy({copy:!1,cut:!0,source:"clear"})},clearOther:function(l){for(var d=this._normal(l,!0),_=this.address(),p=_.length-1;0<=p;p--){var v=_[p];v.r1==d.r1&&v.c1==d.c1&&v.r2==d.r2&&v.c2==d.c2||_.splice(p,1)}},clone:function(){return this.that.Range(this._areas)},_cellAttr:function(l,d){return(l=l[_b(213)]=l[_b(213)]||{})[d]=l[d]||{}},comment:function(l){return this.attr("title",l)},pic:function(l,d,_){var p=this.that.Pic(),v=0,C=0;this.each(function(D,I,P,B,U,J){return v=U,C=J,!1}),pq.fileToBase(l,function(D){p.add(p.name(l.name),D,[C,d||0,v,_||0])})},_copyArea:function(l,d,_,p,v,C,D,I,P,B,U,J,W,re){for(var he,ie,ae,Me,Ce,Le,Ue=this.that,ce=Ue.readCell,lt=this[_b(347)],qe=Ue.iMerge,ut=[],De=[],je=[],Wt=Ue.riOffset,Xe=Ue.iRenderB,Yn=_;Yn<=p;Yn++)Le=(Ce=v[Yn]).dataType,ut[Yn]=!Le||"string"==Le||"html"==Le,!1===(De[Yn]=Ce.copy)?re.push(Yn):J&&je.push(this.getTitle(Ce,Yn));for(J&&C.push(je.slice()),ae=l;ae<=d;ae++){var Jt=I[ae],xn={},Pt={},Lt={rowIndx:ae,rowIndxPage:ae-Wt,rowData:Jt,Export:!0,exportClip:!0};if(!1===Jt.pq_copy)W.push(ae);else{for(je=[],Yn=_;Yn<=p;Yn++)Me=(Ce=v[Yn]).dataIndx,!1!==De[Yn]&&(he=Jt[Me],B&&((ie=ce(Jt,Ce,qe,ae,Yn))===he&&(Lt.colIndx=Yn,Lt.column=Ce,Lt.dataIndx=Me,ie=lt(Lt,U,Xe)[0],ut[Yn]&&/(\r|\n)/.test(ie)&&(ie=this.newLine(ie))),je.push(ie)),P&&void 0!==he&&(xn[Me]=void 0,Pt[Me]=he));P&&D.push({rowIndx:ae,rowData:Jt,oldRow:Pt,newRow:xn}),C.push(je.slice())}}},copy:function(l){var d,_,v,C,D=this.that,I=(l=l||{}).dest,P=!!l.cut,B=null==l.copy||l.copy,U=l.source||(P?"cut":"copy"),ce=l.history,lt=l[_b(68)],J=[],W=[],re=[],he=[],ie=D.get_p_data(),ae=D.colModel,qe=l.render,ut=l.header,Me=D.options.copyModel,Ce=(navigator||{}).clipboard,Le=this.address(),Ue={areas:Le,cut:P,dest:I,header:ut};ce=null==ce||ce,lt=null==lt||lt,qe=null==qe?Me.render:qe,ut=null==ut?Me.header:ut,Le.length&&!1!==D._trigger("beforeCopy",null,Ue)&&(Le.forEach(function(De){this._copyArea(d=De.r1,"cell"===(v=De.type)?d:De.r2,_=De.c1,v="cell"===v?_:De.c2,ae,W,J,ie,P,B,qe,ut,re,he)},this),B&&(Me=l.clip,C=W.map(function(De){return De.join("\t")||" "}).join("\n"),Me?(Me.val(C),Me.select()):(Ce&&Ce.writeText(C),D[_b(348)](C)),Ue.data=W,Ue.skippedRIs=re,Ue.skippedCIs=he,D._trigger("copy",null,Ue)),I?D.paste({text:C,dest:I,rowList:J,history:ce,allowInvalid:lt}):P&&!1!==D[_b(182)]({updateList:J,source:U,history:ce,allowInvalid:lt})&&D.refresh({source:U,header:!1}))},_countArea:function(C){var d=C.type,_=C.r1,p=C.c1,v=C.r2;return C=C.c2,"cell"===d?1:"row"===d?0:(v-_+1)*(C-p+1)},count:function(){for(var l="range"===this._type,d=this.address(),_=0,p=d.length,v=0;v<p;v++)_+=l?this._countArea(d[v]):1;return _},cut:function(l){return(l=l||{}).cut=!0,this.copy(l)},_eachRC:function(l,d,_,p){this.address().forEach(function(v){for(var C=v[_],D=v[p];C<=D;C++)l(this[C],C)},this.that[d])},eachCol:function(l){this._eachRC(l,"colModel","c1","c2")},eachRow:function(l){this._eachRC(l,"pdata","r1","r2")},_hsCols:function(l){var d=[],_={};this.eachCol(function(p){d.push(p.dataIndx)}),_[l]=d,this.that.Columns().hide(_)},hideCols:function(){this._hsCols("diHide")},showCols:function(){this._hsCols("diShow")},hideRows:function(){this.eachRow(function(l){l.pq_hidden=!0})},showRows:function(){this.eachRow(function(l){l.pq_hidden=!1})},each:function(l,d){for(var _=this.that,p=_.colModel,v=this.address(),C=0,D=_.pdata;C<v.length;C++)for(var I,P,B,U=v[C],J=U.r1,W=U.r2,re=U.c2,he=U.type,ie="column"==he,ae="row"==he;J<=W;J++){if(I=D[J])for(P=(P=U.c1)<0?0:P;P<=re;P++){if((B=p[P])&&!1===l(I,B.dataIndx,B,he,J,P))return;if(ae&&!d)break}if(ie&&!d)break}},enable:function(l){return null==(l=this.prop("edit",l))||l},getAPS:function(l,d){var _,p,v,C,D=this;return D.each(function(I,P,B){return D.addProp(B),C=(I["pq_row"+d]||{})[l],_=(B[d]||{})[l],p=null==(v=((I["pq_cell"+d]||{})[P]||{})[l])?null==C?_:C:v,!1}),p},getAttr:function(l){return this.getAPS(l,"attr")},getProp:function(l){return this.getAPS(l,"prop")},getStyle:function(l){return this.getAPS(l,"style")},getIndx:function(l){return null==l?this._areas.length-1:l},getValue:function(){var l,_,p,v,C,D,I,P,B=this.address(),U=[],J=this.that;if(B.length){for(_=(B=B[0]).r1,p=B.c1,v=B.r2,C=B.c2,P=J.get_p_data(),D=_;D<=v;D++)for(l=P[D],I=p;I<=C;I++)U.push(l[J.colModel[I].dataIndx]);return U}},indexOf:function(l){for(var d,_=(l=this._normal(l)).r1,p=l.c1,v=l.r2,C=l.c2,D=this.address(),I=0,P=D.length;I<P;I++)if(_>=(d=D[I]).r1&&v<=d.r2&&p>=d.c1&&C<=d.c2)return I;return-1},index:function(l){for(var d,_=(l=this._normal(l)).type,p=l.r1,v=l.c1,C=l.r2,D=l.c2,I=this.address(),P=0,B=I.length;P<B;P++)if(_===(d=I[P]).type&&p===d.r1&&C===d.r2&&v===d.c1&&D===d.c2)return P;return-1},init:function(l,d){var _,p;if(d=!1!==d,l)if("function"==typeof l.push)for(var v=0,C=l.length;v<C;v++)this.init(l[v],d);else"string"==typeof l?this.init(pq.getAddress(l),d):(_=this._normal(l,d),p=this._areas=this._areas||[],_&&p.push(_))},isValid:function(){return!!this._areas.length},format:function(l){return this.prop("format",l)},merge:function(l){l=l||{};var d,_,p=this.that,v=p.options.mergeCells,C=this._areas[0];C&&(_=C.c2-C.c1+1,(1<(d=C.r2-C.r1+1)||1<_)&&(C.rc=d,C.cc=_,v.push(C),!1!==l.refresh&&p[_b(17)]()))},newLine:function(l){return'"'+l.replace(/"/g,'""')+'"'},replace:function(_,v){_=this._normal(_);var p=this._areas;v=this.getIndx(v),p.splice(v,1,_)},remove:function(_){var d=this._areas;0<=(_=this.indexOf(_))&&d.splice(_,1)},resize:function(l,d){var _=this._normal(l),p=this._areas[this.getIndx(d)];return["r1","c1","r2","c2","rc","cc","type"].forEach(function(v){p[v]=_[v]}),this},rows:function(l){var d=this.that,_=[],p=this[_b(349)]();if(p)for(var v=p.r1,C=p.c1,I=p.c2,P=p.type,B=null==l?p.r2:v+l,U=null==l?v:v+l;U<=B;U++)_.push({r1:U,c1:C,r2:U,c2:I,type:P});return pq.Range(d,_,"row")},_normal:function(l,d){if(l.type)return l;if("function"==typeof l.push){for(var _=[],p=0,v=l.length;p<v;p++){var C=this._normal(l[p],d);C&&_.push(C)}return _}var D,I,P=this.that,B=P.get_p_data().length-1,U=P.colModel.length-1,J=B<(J=l.r1)?B:J,W=U<(W=l.c1)?U:W,re=l.rc,he=l.cc,ie=l.r2,ae=l.c2;return U<0||B<0?null:null!=J||null!=W?(ie<J&&(D=J,J=ie,ie=D),ae<W&&(D=W,W=ae,ae=D),null==J?(J=0,ie=B,ae=null==ae?W:ae,I="column"):null==W?(W=0,ie=null==ie?J:ie,ae=U,I=l._type||"row"):null==ie&&null==re||J==ie&&W==ae?(I="cell",ie=J,ae=W):I="block",ie=B<(ie=re?J+re-1:ie)?B:ie,ae=U<(ae=he?W+he-1:ae)?U:ae,!d||"block"!=I&&"cell"!=I||(J=(_=P.iMerge[_b(350)](J,W,ie,ae))[0],W=_[1],ie=_[2],ae=_[3]),re=ie-J+1,he=ae-W+1,l.r1=J,l.c1=W,l.r2=ie,l.c2=ae,l.rc=re,l.cc=he,l.type=l.type||I,l):void 0},select:function(){var l=this.that.iSelection,d=this._areas;return d.length&&(l.removeAll({trigger:!1}),d.forEach(function(_){l.add(_,!1)}),l.trigger()),this},style:function(l,d){return this._prop(l,d,"Style")},_prop:function(l,d,_){return this[(null!=d?"set":"get")+_](l,d)},attr:function(l,d){return this._prop(l,d,"Attr")},prop:function(l,d){return this._prop(l,d,"Prop")},toggleStyle:function(l,d){var _=this.getStyle(l);this.style(l,_=_&&_!=d[1]?d[1]:d[0])},unmerge:function(l){l=l||{};var d=this.that,_=d.options.mergeCells,p=this._areas[0];if(p){for(var v=0;v<_.length;v++){var C=_[v];if(C.r1===p.r1&&C.c1===p.c1){_.splice(v,1);break}}!1!==l.refresh&&d[_b(17)]()}},align:function(l){return this.prop("align",l)},valign:function(l){return this.prop("valign",l)},value:function(l){var d=0,_=this.that,p=_.colModel,v=[],C=this.address();if(void 0===l)return this.getValue();for(var D=0;D<C.length;D++)for(var I,P=(I=C[D]).r1,B=I.c1,U=I.r2,J=I.c2,W=P;W<=U;W++){for(var re=(he=_.normalize({rowIndx:W})).rowData,he=he.rowIndx,ie={},ae={},Me=B;Me<=J;Me++){var Ce=p[Me].dataIndx;ae[Ce]=l[d++],ie[Ce]=re[Ce]}v.push({rowData:re,rowIndx:he,newRow:ae,oldRow:ie})}return v.length&&(_[_b(182)]({updateList:v,source:"range"}),_.refresh({header:!1})),this},val2D:function(){var l,d=[],_=this.that,p={};for(l in this._areas.forEach(function(v){for(var C,D=v.c1,I=v.c2,P=v.r1;P<=v.r2;P++)C=_.Range({r1:P,rc:1,c1:D,c2:I}).value(),p[P]=p[P]?p[P].concat(C):C}),p)d.push(p[l]);return d}},pq.mixin.render);var y=pq.Selection=function(l,d){if(null==l)throw"invalid param";if(this instanceof y==0)return new y(l,d);this._areas=[],this.that=l,this.iCells=new K.paramquery.cCells(l),this._base(l,d)};pq.extend(G,y,{add:function(_,d){_=this._normal(_,!0);var p=this.iCells;0<=this.indexOf(_)||(p.addBlock(_),this._super(_),!1!==d&&this.trigger())},clearOther:function(l,d){var _=this.iCells,p=this._normal(l,!0);this.address().forEach(function(v){v.r1==p.r1&&v.c1==p.c1&&v.r2==p.r2&&v.c2==p.c2||_[_b(351)](v)}),this._super(p),d||this.trigger()},getSelection:function(){return this.iCells[_b(206)]()},isSelected:function(l){return this.iCells.isSelected(l)},removeAll:function(l){l=l||{},this._areas.length&&(this.iCells.removeAll(),!(this._areas=[])!==l.trigger&&this.trigger())},resizeOrReplace:function(l,d){this.resize(l,d)||this.replace(l,d)},replace:function(p,v){var _=this.iCells,C=(p=this._normal(p),(C=this._areas)[v=this.getIndx(v)]);_[_b(351)](C),_.addBlock(p),this._super(p,v),this.trigger()},resize:function(C,D){var _=(C=this._normal(C,!0)).r1,p=C.c1,v=C.r2;if(C=C.c2,!(B=this._areas||[]).length)return!1;D=(B=B[this.getIndx(D)]).r1;var I=B.c1,P=B.r2,B=B.c2;return D===_&&I===p&&D===_&&B===C&&P===v&&I===p&&P===v&&B===C||void 0},selectAll:function(v){var C=(v=v||{}).type,d=this.that,p=d.colModel,_=(v=v.all)?0:d.riOffset;return v=(v?d.get_p_data():d.pdata).length,p=p.length-1,v=_+v-1,d.Range(C="row"===C?{r1:_,r2:v}:{c1:0,c2:p,_type:"column",r1:0,r2:v}).select(),this},trigger:function(){var l=this.that;l._trigger("selectChange",null,{selection:this}),l.off("mousePQUp",A),l.off("keyUp",A),l.on("mousePQUp",A),l.on("keyUp",A)}})}(jQuery),function(K){var G=K.paramquery;K.widget("paramquery.pqToolbar",{options:{items:[],gridInstance:null,events:{button:"click",select:"change",checkbox:"change",textbox:"change",textarea:"change",file:"change"}},_create:function(){var A,y=this.options,l=y[_b(352)],d=y.events,_=y.bootstrap,p=_.on,v=l.colModel,C=l.options[_b(157)].timeout,D=y.items,I=this.element,P=0,B=D.length;for(I.addClass("pq-toolbar");P<B;P++){var U,J,W,re,he=D[P],ie=he.type,ae=he.value,Me=he.icon,Ce=he.options||{},Le=he.label,Ue=he.init,ce=((U=he.listener)?[U]:he.listeners)||[function(){}],lt=(lt=he.cls)||"",qe=(lt=(lt=p&&"button"==ie?_.btn+" "+lt:lt)?"class='"+lt+"'":"",(qe=he.style)?"style='"+qe+"'":""),ut=he.attr||"",De=Le?"<label "+qe+">"+Le:"",je=Le?"</label>":"",Wt=(Wt=Le&&"button"!=ie&&"file"!=ie?[lt,ut]:[lt,ut,qe]).join(" ");he.options=Ce,"textbox"==ie?re=K([De,"<input type='text' "+Wt+">",je].join("")):"textarea"==ie?re=K([De,"<textarea "+Wt+"></textarea>",je].join("")):"select"==ie?("function"==typeof Ce&&(Ce=Ce.call(l,{colModel:v})),J=G.select({options:Ce=Ce||[],attr:Wt,prepend:he.prepend,groupIndx:he.groupIndx,valueIndx:he.valueIndx,labelIndx:he.labelIndx}),re=K([De,J,je].join(""))):"file"==ie?re=K([_a(116)+(lt=Me&&Le?"ui-button-text-icon-primary":Me?"ui-button-icon-only":"ui-button-text-only")+"' "+ut+" "+qe+">",_a(117)+(he.attrFile||"")+">",Me?_a(118)+Me+"'></span>":"",_a(119)+(Le||"")+"</span>","</label>"].join("")):"checkbox"==ie?re=K([Le?"<label "+qe+">":"",_a(0),ae?"checked='checked' ":"",Wt,">",Le?Le+"</label>":""].join("")):"separator"==ie?re=K(_a(120)+[ut,qe].join(" ")+"></span>"):"button"==ie?(re=K(_a(121)+Wt+">"+(p&&Me?_a(122)+Me+"'></span>":"")+Le+"</button>"),K.extend(Ce,{label:Le||!1,icon:Me,icons:{primary:p?"":Me}}),re.button(Ce)):"string"==typeof ie?re=K(ie):"function"==typeof ie&&(J=ie.call(l,{colModel:v,cls:lt}),re=K(J)),re.appendTo(I),Ue&&Ue.call(l,re[0]),W=this.getInner(re,Le,ie),"checkbox"!==ie&&void 0!==ae&&W.val(ae);for(var Xe=0,Yn=ce.length;Xe<Yn;Xe++){var Jt={};for(A in"function"==typeof(U=ce[Xe])?Jt[d[ie]]=U:Jt=U,Jt)pq.fakeEvent(W,A,C),W.on(A,this._onEvent(l,Jt[A],he))}}}}),K.extend(G.pqToolbar.prototype,{getInner:function(A,y,l){var d=A[0];return"LABEL"==d.nodeName[_b(37)]()?K(d.children[0]):A},refresh:function(){this.element.empty(),this._create()},_onEvent:function(A,y,l){return function(d){var _=l.type;l.value="checkbox"==_?K(d.target).prop("checked"):K(d.target).val(),y.call(A,d),"file"==_&&K(this).val("")}},_destroy:function(){this.element.empty()[_b(72)]("pq-toolbar")[_b(84)]()},_disable:function(){null==this.$disable&&(this.$disable=K(_a(51)).css("opacity",.2).appendTo(this.element))},_enable:function(){this.$disable&&(this.element[0][_b(121)](this.$disable[0]),this.$disable=null)},_setOption:function(A,y){"disabled"==A&&(1==y?this._disable():this._enable())}}),pq.toolbar=function(A,y){return(A=K(A).pqToolbar(y)).data("paramqueryPqToolbar")||A.data("paramquery-pqToolbar")}}(jQuery),function(K){var G=K.paramquery,A=G.pqGrid.prototype;A.options.trackModel={on:!1,dirtyClass:"pq-cell-dirty"},G.cUCData=function(y){this.that=y,this.udata=[],this.ddata=[],this.adata=[],this.options=y.options,y.on("dataAvailable",this.onDA(this))},G.cUCData.prototype={add:function(y){for(var l=this.that,d=this.adata,_=this.ddata,p=y.rowData,v=this.options.trackModel.dirtyClass,C=l.getRecId({rowData:p}),D=0,I=d.length;D<I;D++){var P=d[D];if(null!=C&&P.recId==C)throw _a(123);if(P.rowData==p)throw _a(124)}for(D=0,I=_.length;D<I;D++)if(p==_[D].rowData)return void _.splice(D,1);var B,U=[];for(B in p)U.push(B);l[_b(72)]({rowData:p,dataIndx:U,cls:v}),d.push(y={recId:C,rowData:p})},commit:function(y){var l,d,_,p,v=this.that;null==y?(this[_b(353)](),this[_b(354)](),this[_b(355)]()):(p=y.history,l=[],d=(d=v.options).dataModel.recIndx,_=y.type,y=y.rows,p=null!=p&&p,"add"==_?y?l=this.commitAdd(y,d):this[_b(353)]():"update"==_?y?this[_b(356)](y,d):this[_b(354)]():"delete"==_&&(y?this[_b(357)](y,d):this[_b(355)]()),l.length&&(v[_b(182)]({source:"commit",checkEditable:!1,track:!1,history:p,updateList:l}),v[_b(17)]({header:!1})))},commitAdd:function(y,l){for(var d,_,p,v,C=this.that,D=C.colModel,I=D.length,P=this.adata,B=K.inArray,U=C.options.treeModel,J=null!=U.dataIndx,W=U.parentId,re=P.length,he=C[_b(65)],ie=[],ae=y.length,Me=[],Ce=0;Ce<ae;Ce++)for(p=y[Ce],De=0;De<re;De++)if(v=!0,-1==B(_=P[De].rowData,Me)){for(d=0;d<I;d++){var Le=D[d],Ue=Le.dataType,ce=Le.dataIndx;if(!(Le.hidden||ce==l||J&&ce==W)&&he(_[ce],Ue)!==he(p[ce],Ue)){v=!1;break}}if(v){let Wt=function(Xe){lt[Xe]=p[Xe],qe[Xe]=_[Xe]};var lt={},qe={};Wt(l),J&&Wt(W),ie.push({rowData:_,oldRow:qe,newRow:lt}),Me.push(_);break}}for(var ut=[],De=0;De<re;De++)-1==B(_=P[De].rowData,Me)&&ut.push(P[De]);return this.adata=ut,ie},commitDelete:function(y,l){for(var d,_,p,v,C=this.ddata,D=C.length,I=this.udata;D--&&(_=(d=C[D].rowData)[l],p=y.length);)for(;p--;)if(_==y[p][l]){for(y.splice(p,1),C.splice(D,1),v=I.length;v--;)I[v].rowData==d&&I.splice(v,1);break}},commitUpdate:function(y,l){for(var d,_=this.that,p=this.options.trackModel.dirtyClass,v=this.udata,C=v.length,D=y.length,I=[],P=0;P<C;P++){var B=v[P],U=B.rowData,J=B.oldRow;if(-1==K.inArray(U,I))for(d=0;d<D;d++)if(U[l]==y[d][l])for(var re in I.push(U),J)_[_b(72)]({rowData:U,dataIndx:re,cls:p})}var he=[];for(P=0;P<C;P++)-1==K.inArray(U=v[P].rowData,I)&&he.push(v[P]);this.udata=he},commitAddAll:function(){this.adata=[]},commitDeleteAll:function(){for(var y,l=this.ddata,d=this.udata,_=d.length,p=l.length,v=0;0<_&&v<p;v++){for(y=l[v].rowData;_--;)d[_].rowData==y&&d.splice(_,1);_=d.length}l.length=0},commitUpdateAll:function(){for(var y=this.that,l=this.options.trackModel.dirtyClass,d=this.udata,_=0,p=d.length;_<p;_++){var v,C=d[_],D=C.oldRow,I=C.rowData;for(v in D)y[_b(72)]({rowData:I,dataIndx:v,cls:l})}this.udata=[]},delete:function(y){for(var l=this.that,d=y.rowIndx,v=y[_b(75)],_=l.riOffset,p=(d=null==d?v+_:d,v=null==v?d-_:v,_="remote"==l.options.pageModel.type?v:d,this.adata),C=(v=this.ddata,l.getRowData(y)),D=0,I=p.length;D<I;D++)if(p[D].rowData==C)return void p.splice(D,1);v.push({indx:_,rowData:C,rowIndx:d})},getChangesValue:function(y){for(var l=this.that,d=(y=y||{}).all,_=this.udata,p=this.adata,v=this.ddata,C=[],D=[],I=[],P=[],B=[],U=[],J=0,W=v.length;J<W;J++){var re=(Me=v[J]).rowData,he={};for(ae in B.push(re),re)0!=ae.indexOf("pq_")&&(he[ae]=re[ae]);U.push(he)}for(J=0,W=_.length;J<W;J++){var ie=(Me=_[J]).oldRow;if(-1==K.inArray(re=Me.rowData,B)&&-1==K.inArray(re,C)){if(he={},!1!==d)for(var ae in re)0!=ae.indexOf("pq_")&&(he[ae]=re[ae]);else{for(var ae in ie)he[ae]=re[ae];he[l.options.dataModel.recIndx]=Me.recId}C.push(re),D.push(he),I.push(ie)}}for(J=0,W=p.length;J<W;J++){var Me;for(ae in he={},re=(Me=p[J]).rowData)0!=ae.indexOf("pq_")&&(he[ae]=re[ae]);P.push(he)}return{updateList:D,addList:P,deleteList:U,oldList:I}},getChanges:function(){for(var y=this.udata,l=this.adata,d=this.ddata,_=K.inArray,p=[],v=[],C=[],D=[],I=0,P=d.length;I<P;I++){var B=(J=d[I]).rowData;D.push(B)}for(I=0,P=y.length;I<P;I++){var U=(J=y[I]).oldRow;-1==_(B=J.rowData,D)&&-1==_(B,p)&&(p.push(B),v.push(U))}for(I=0,P=l.length;I<P;I++){var J;B=(J=l[I]).rowData,C.push(B)}return{updateList:p,addList:C,deleteList:D,oldList:v}},getChangesRaw:function(){var l=this.adata,d=this.ddata,_={updateList:[],addList:[],deleteList:[]};return _.updateList=this.udata,_.addList=l,_.deleteList=d,_},isDirty:function(y){var d=this.udata,_=this.adata,p=this.ddata,v=!1,C=this.that.getRowData(y);if(C){for(var D=0;D<d.length;D++)if(C==d[D].rowData){v=!0;break}}else(d.length||_.length||p.length)&&(v=!0);return v},onDA:function(y){return function(l,d){"filter"!=d.source&&(y.udata=[],y.ddata=[],y.adata=[])}},rollbackAdd:function(y,l){for(var d=this.adata,_=[],p=0,v=d.length;p<v;p++)_.push({type:"delete",rowData:d[p].rowData});return this.adata=[],_},rollbackDelete:function(y,l){for(var d=this.ddata,_=[],p=d.length-1;0<=p;p--){var C;_.push({type:"add",rowIndx:(C=d[p]).rowIndx,newRow:C=C.rowData})}return this.ddata=[],_},rollbackUpdate:function(y,l){for(var d=this.that,_=this.options.trackModel.dirtyClass,p=this.udata,v=[],C=0,D=p.length;C<D;C++){var I=(U=p[C]).recId,P=U.rowData,B={},U=U.oldRow;if(null!=I){var J,W=[];for(J in U)B[J]=P[J],W.push(J);d[_b(72)]({rowData:P,dataIndx:W,cls:_,refresh:!1}),v.push({type:"update",rowData:P,newRow:U,oldRow:B})}}return this.udata=[],v},rollback:function(p){var l=this.that,d=l.options.pageModel,_=!p||null==p.refresh||p.refresh,v=[],C=[],D=[],I=(I=l.options.dataModel).data;null!=(p=p&&null!=p.type?p.type:null)&&"update"!=p||(C=this[_b(358)](d,I)),null!=p&&"delete"!=p||(v=this[_b(359)](d,I)),null!=p&&"add"!=p||(D=this[_b(360)](d,I)),l[_b(182)]({history:!1,allowInvalid:!0,checkEditable:!1,source:"rollback",track:!1,addList:v,updateList:C,deleteList:D}),_&&l[_b(17)]({header:!1})},update:function(y){var l=this.that,d=this.options.trackModel.dirtyClass,_=y.rowData||l.getRowData(y),p=l.getRecId({rowData:_}),v=y.dataIndx,C=y.refresh,D=l.columns,I=l[_b(65)],P=y.row,B=this.udata,U=B.slice(0),J=!1;if(null!=p&&0!=(p+"").indexOf("pq_tmp_")){for(var W=0,re=B.length;W<re;W++){var he=B[W],ie=he.oldRow;if(he.rowData==_){for(var v in J=!0,P){var ae=I(P[v],Me=D[v].dataType),Me=I(ie[v],Me);ie.hasOwnProperty(v)&&Me===ae?(l[_b(72)](Ce={rowData:_,dataIndx:v,refresh:C,cls:d}),delete ie[v]):(l.addClass(Ce={rowData:_,dataIndx:v,refresh:C,cls:d}),ie.hasOwnProperty(v)||(ie[v]=_[v]))}K[_b(215)](ie)&&U.splice(W,1);break}}if(!J){for(v in ie={},P){ie[v]=_[v];var Ce={rowData:_,dataIndx:v,refresh:C,cls:d};l.addClass(Ce)}U.push(Ce={rowData:_,recId:p,oldRow:ie})}this.udata=U}}},A.getChanges=function(y){if(this.blurEditor({force:!0}),y){var l=y.format;if(l){if("byVal"==l)return this.iUCData[_b(361)](y);if("raw"==l)return this.iUCData[_b(362)]()}}return this.iUCData.getChanges()},A.rollback=function(y){this.blurEditor({force:!0}),this.iUCData.rollback(y)},A.isDirty=function(y){return this.iUCData.isDirty(y)},A.commit=function(y){this.iUCData.commit(y)},A.updateRow=function(y){var l=this,d=y.rowList||[{rowIndx:y.rowIndx,newRow:y.newRow||y.row,rowData:y.rowData,rowIndxPage:y[_b(75)]}],_=[];if(l[_b(216)](d).forEach(function(p){var v,C=p.newRow,D=p.rowData,I=p.oldRow={};if(D){for(v in C)I[v]=D[v];_.push(p)}}),_.length){if(d={source:y.source||"update",history:y.history,checkEditable:y[_b(70)],track:y.track,allowInvalid:y[_b(68)],updateList:_},!1===(y=l[_b(182)](d)))return!1;K.isArray(y)&&y.forEach(function(p){l[_b(171)]({rowIndx:p[0],colIndx:p[1],skip:!0})})}},A.getRecId=function(y){var l;return null==(y.dataIndx=(l=this.options.dataModel).recIndx,l=this[_b(363)](y))?null:l},A[_b(363)]=function(d){var l=d.rowData||this.getRowData(d);return d=d.dataIndx,l?l[d]:null},A.getRowData=function(y){if(!y)return null;var l,d=y.rowData;if(null!=d)return d;if(null==(l=y.recId))return d=null!=(d=y.rowIndx)?d:y[_b(75)]+this.riOffset,this.get_p_data()[d];for(var _,p=(y=this.options.dataModel).recIndx,v=y.data,C=0,D=v.length;C<D;C++)if((_=v[C])[p]==l)return _;return null},A.addNodes=function(y,l){l=null==l?this.options.dataModel.data.length:l,this[_b(182)]({addList:y.map(function(d){return{rowIndx:l++,newRow:d}}),source:"addNodes"}),this[_b(17)]()},A[_b(364)]=function(y){this[_b(182)]({deleteList:y.map(function(l){return{rowData:l}}),source:"deleteNodes"}),this[_b(17)]()},A.moveNodes=function(y,l){var d=this.options,_=this.riOffset,p=d.dataModel.data;l=null==l?p.length:l,this._trigger("beforeMoveNode"),y.forEach(function(v){l=pq.moveItem(v,p,p.indexOf(v),l)}),p!=this.pdata&&(this.pdata=p.slice(_,d.pageModel.rPP+_)),this.iRefresh.addRowIndx(),this.iMerge.init(),this._trigger("moveNode",null,{args:arguments}),this.refresh()},A.deleteRow=function(y){var l=this[_b(216)](y.rowList||[{rowIndx:y.rowIndx,rowIndxPage:y[_b(75)],rowData:y.rowData}]);if(!l.length)return!1;this[_b(182)]({source:y.source||"delete",history:y.history,track:y.track,deleteList:l}),!1!==y.refresh&&this[_b(17)]({header:!1})},A.addRow=function(y){var l=this.riOffset,d=(d=this.options.dataModel).data=d.data||[];return y.rowData&&(y.newRow=y.rowData),null!=y[_b(75)]&&(y.rowIndx=y[_b(75)]+l),!(!(l=y.rowList||[{rowIndx:y.rowIndx,newRow:y.newRow}]).length||!1===this[_b(182)]({source:y.source||"add",history:y.history,track:y.track,checkEditable:y[_b(70)],addList:l}))&&(!1!==y.refresh&&this[_b(17)]({header:!1}),null==(y=l[0].rowIndx)?d.length-1:y)}}(jQuery),window[_b(365)]=window[_b(365)]||window[_b(366)]||window[_b(367)]||function(K){return setTimeout(K,10)},window[_b(368)]=window[_b(368)]||window[_b(369)]||window[_b(370)]||function(K){clearTimeout(K)},function(K){var G=K.paramquery;(G[_b(309)]=function A(y){(this.that=y).on("cellClick",this[_b(371)].bind(this)).on("cellMouseDown",this[_b(372)].bind(this)).on("cellMouseEnter",this[_b(373)].bind(this))}).prototype=K.extend({onCellMouseDown:function(y,l){if(!y[_b(33)]()){var d=this.that,_=l.rowIndx,p=d.iSelection,v=l.colIndx,C=d.options[_b(104)],D=C.type,I=C.mode,P=p[_b(349)]();if(!K(y[_b(32)].target).is(_a(125))){if("cell"==D){if(null==v)return;if(-1==v){if(!C.row)return;v=void 0}y.shiftKey&&"single"!==I&&P?(this.mousedown={r1:D=P.firstR,c1:C=P.firstC},p[_b(234)]({r1:D,c1:null==v?void 0:C,r2:_,c2:v,firstR:D,firstC:C})):pq.isCtrl(y)&&"single"!==I?(this.mousedown={r1:_,c1:v},p.add(null==v?{r1:_,firstR:_,firstC:d[_b(175)]()}:{r1:_,c1:v,firstR:_,firstC:v})):(this.mousedown={r1:_,c1:v},p.clearOther({r1:_,c1:v},!0),null==v?p[_b(234)]({r1:_,firstR:_,firstC:d[_b(175)]()}):p[_b(234)]({r1:_,c1:v,firstR:_,firstC:v}))}l.nofocus=!0,d[-1==l.colIndx?"focusT":"focus"](l),d.one("mousePQUp",this[_b(374)].bind(this))}}},onCellMouseEnter:function(y,l){var d,_,p=this.that,v=(D=p.options[_b(104)]).type,C=this.mousedown,D=D.mode;C&&"single"!==D&&("cell"===v&&(D=C.r1,v=C.c1,C=l.rowIndx,d=l.colIndx,_=p.Selection(),p.scrollCell({rowIndx:C,colIndx:d}),_[_b(234)]({r1:D,c1:v,r2:C,c2:d,firstR:D,firstC:v})),l.nofocus=!0,p.focusT(l))},onCellClick:function(y,l){var d=(v=this.that).options[_b(104)],_="single"==d.mode,p=d.toggle,v=v.iRows;"row"!=d.type||!d.row&&-1==l.colIndx||(d=v.isSelected(l),_&&!d||p||!pq.isCtrl(y)?!_&&y.shiftKey?v.extend(l):!_||d&&p?(l.isFirst=!0,v[p?"toggle":"replace"](l)):d||v.replace(l):(l.isFirst=!0,v.toggle(l)))},onMousePQUp:function(){var y=this.that;window[_b(206)]().toString().length||y.focus(),this.mousedown=null}},new G.cClass)}(jQuery),function(K){var G=null,A=!1,y="pq-grid-excel",l=K.paramquery,d=l.pqGrid.prototype,_=(K.extend(d.options,{copyModel:{on:!0,render:!1,zIndex:1e4},cutModel:{on:!0},pasteModel:{on:!0,compare:"byVal",select:!0,validate:!0,allowInvalid:!0,type:"replace"}}),K.extend(d,{_setGlobalStr:function(v){_.clip=v},canPaste:function(){return!!l.cExcel.clip},clearPaste:function(){l.cExcel.clip=""},copy:function(v){return this.iSelection.copy(v)},cut:function(v){return this.iSelection.cut(v)},paste:function(v){function C(){G.paste(v),G=null}v=v||{};var D=(navigator||{}).clipboard;G=new _(this),null==v.text&&D&&D.readText?D.readText().then(function(I){v.text=I,C()}).catch(function(I){C()}):C()},clear:function(){var v=this.iSelection;(v.address().length?v:this.iRows.toRange()).clear()}}),l.cExcel=function(v){this.that=v}),p=(_.clip="",_.prototype={createClipBoard:function(){var v=this.that,C=(K("#pq-grid-excel-div"),v.options.copyModel),D=K("#"+y);0==D.length&&(C=K(_a(126)+C.zIndex+";'/>").appendTo(document.body),(D=K("<textarea id='"+y+_a(127)).appendTo(C)).css({opacity:0}).on("keyup",function(I){pq.isCtrl(I)&&v.element&&v._trigger("keyUp",I)})),D.on("focusin",function(I){I[_b(30)]()}),D.select()},destroyClipBoard:function(){this[_b(375)]();var D=this.that,v=K(window).scrollTop(),C=K(window).scrollLeft(),I=(D.focus(),D=K(window).scrollTop(),K(window).scrollLeft());v==D&&C==I||window.scrollTo(C,v)},clearClipBoard:function(){K("#"+y).val("")},copy:function(v){var C=this.that,D=C.iSelection;if(D.address().length)return D.copy(v);C.iRows.toRange().copy(v)},getRows:function(v){return(v=(v=v.replace(/\n$/,"")).replace(/(^|\t|\n)"(?=[^\t]*?[\r\n])([^"]|"")*"(?=$|\t|\n)/g,function(C){return C.replace(/(?!^(\r\n|\n))(\r\n|\n)/g,"\r").replace(/^(\t|\n)?"/,"$1").replace(/"$/,"").replace(/""/g,'"')})).split("\n")},paste:function(I){var C=this.that,D=(I=I||{}).dest,W=I.clip,P=(I=I.text||(W?W.length?W.val():"":_.clip),this.getRows(I)),B=P.length,U=C.colModel,J=C.readCell,re="row",he=!1,ie=U.length;if((W=(W=C.options).pasteModel).on&&0!=I.length&&0!=B){for(var ae=0;ae<B;ae++)P[ae]=P[ae].split("\t");var Me,Ce,Le,Ue,ce,lt,qe=W.type;if(D=((I=(D?C.Range(D):C.Selection()).address()).length?I:C.iRows.toRange().address())[0],!1===C._trigger("beforePaste",null,I={rows:P,areas:[D]}))return!1;Ue=D&&C.getRowData({rowIndx:D.r1})?(re="row"==D.type?"row":"cell",Me=D.r1,Le=D.r2,Ce=D.c1,D.c2):(re="cell",Ce=Le=Me=0),"replace"==qe?lt=Le-(ce=Me)+1<B?"extend":"repeat":"append"==qe?(ce=Le+1,lt="extend"):"prepend"==qe&&(ce=Me,lt="extend");var ut,De,je="extend"==lt?B:Le-Me+1,Wt=0,Xe=0,Yn=[],Jt=[],xn=0;for(ae=0;ae<je;ae++){var Pt=P[Wt],Lt=ae+ce,Xn="replace"==qe?C.getRowData({rowIndx:Lt}):null,ni=Xn?{}:null,en={};if(void 0===Pt&&"repeat"===lt&&(Pt=P[Wt=0]),Xn&&!1===Xn.pq_paste)je++,Xe++;else{Wt++;var gr=Pt,zi=gr.length;if(!De)if("cell"==re){if(De="extend"==(ut=Ue-Ce+1<zi?"extend":"repeat")?zi:Ue-Ce+1,isNaN(De))throw _a(128);ie<De+Ce&&(De=ie-Ce)}else De=ie,Ce=0;var En=0,ii=0,Dn=0,ji=De;for(ii=0;ii<ji;ii++){zi<=En&&(En=0);var Os=U[ii+Ce],dr=gr[En],Fe=Os.dataIndx;!1===Os.paste?(Dn++,"extend"==ut&&ji+Ce<ie&&ji++):(En++,en[Fe]=dr,ni&&(ni[Fe]=J(Xn,Os)))}0==K[_b(215)](en)&&(null==Xn?(he=!0,Yn.push({newRow:en,rowIndx:Lt})):Jt.push({newRow:en,rowIndx:Lt,rowData:Xn,oldRow:ni}),xn++)}}D={addList:Yn,updateList:Jt,source:"paste",allowInvalid:W[_b(68)],validate:W.validate},C[_b(182)](D),C[he?"refreshView":"refresh"]({header:!1}),W.select&&C.Range({r1:ce,c1:Ce,r2:ce+xn-1+Xe,c2:"extend"==ut?Ce+De-1+Dn:Ue}).select(),C._trigger("paste",null,I)}}},K(document).unbind(".pqExcel").bind("keydown.pqExcel",function(v){if(pq.isCtrl(v)){var C=K(v.target);if(C.hasClass("pq-box-focus")||C.is("#"+y)||C.hasClass("pq-body-outer")){var D=C.closest(".pq-grid");if(G||C.length&&D.length){if(!G){try{if((I=D.pqGrid("instance")).options[_b(104)].native)return!0}catch(P){return!0}(G=new _(I,C))[_b(376)]()}"67"==v.keyCode||"99"==v.keyCode?G.copy({clip:K("#"+y)}):"88"==v.keyCode?G.copy({cut:!0,clip:K("#"+y)}):"86"==v.keyCode||"118"==v.keyCode?(A=!0,G[_b(375)](),window.setTimeout(function(){G&&(G.paste({clip:K("#"+y)}),G[_b(377)](),G=null),A=!1},3)):(D=K("#"+y)).length&&document[_b(39)]==D[0]&&G.that.onKeyDown(v)}}}else{var I=v.keyCode;if(I==(D=K.ui.keyCode).UP||I==D.DOWN||I==D.LEFT||I==D.RIGHT||I==D.PAGE_UP||I==D.PAGE_DOWN){if(p)return!1;((C=K(v.target)).hasClass("pq-grid-row")||C.hasClass("pq-grid-cell"))&&(p=!0)}}}).bind("keyup.pqExcel",function(v){var C=v.keyCode;A||!G||pq.isCtrl(v)||-1==K.inArray(C,[17,91,93,224])||(G[_b(377)](),G=null),!p||(C=K(v.target)).hasClass("pq-grid-row")||C.hasClass("pq-grid-cell")||(p=!1)}),!1)}(jQuery),function(K){var G=K.paramquery,A=G.pqGrid.prototype.options;A[_b(183)]=A[_b(183)]||{on:!0,checkEditable:!0,checkEditableAdd:!1,allowInvalid:!0},(G.cHistory=function(y){var l=this;l.that=y,l.options=y.options,l.records=[],l.counter=0,l.id=0,y.on("keyDown",l.onKeyDown.bind(l)).on("dataAvailable",function(d,_){"filter"!=_.source&&l.reset()})}).prototype={onKeyDown:function(y,l){var p=pq.isCtrl(y);return p&&"90"==y.keyCode?(this.undo(),!1):p&&"89"==y.keyCode?(this.redo(),!1):void 0},resetUndo:function(){if(0==this.counter)return!1;this.counter=0,this.that._trigger("history",null,{type:"resetUndo",num_undo:0,num_redo:this.records.length-this.counter,canUndo:!1,canRedo:!0})},reset:function(){if(0==this.counter&&0==this.records.length)return!1;this.records=[],this.counter=0,this.id=0,this.that._trigger("history",null,{num_undo:0,num_redo:0,type:"reset",canUndo:!1,canRedo:!1})},increment:function(){var y=this.records,l=y.length;this.id=l?(y=y[l-1].id)+1:0},push:function(y){var l,d,_=this.canRedo(),p=this.records,v=(p.length>(v=this.counter)&&p.splice(v,p.length-v),p[v]=K.extend({id:this.id},y),this.counter++,this.that);1==this.counter&&(l=!0),_&&this.counter==p.length&&(d=!1),v._trigger("history",null,{type:"add",canUndo:l,canRedo:d,num_undo:this.counter,num_redo:0})},canUndo:function(){return 0<this.counter},canRedo:function(){return this.counter<this.records.length},undo:function(){var y=this.canRedo(),l=this.that,d=this.options[_b(183)],C=this.records;if(!(0<this.counter))return!1;this.counter--;var _,p,v,D=(C=C[this.counter]).callback;return D?D():(D=C.updateList.map(function(I){return{rowIndx:l.getRowIndx({rowData:I.rowData}).rowIndx,rowData:I.rowData,oldRow:I.newRow,newRow:I.oldRow}}),v=C.addList.map(function(I){return{rowData:I.newRow}}),C=C.deleteList.map(function(I){return{newRow:I.rowData,rowIndx:I.rowIndx}}),l[_b(182)]({history:!1,source:"undo",checkEditable:d[_b(70)],checkEditableAdd:d[_b(185)],allowInvalid:d[_b(68)],addList:C,updateList:D,deleteList:v}),l[C.length||v.length?"refreshView":"refresh"]({source:"undo",header:!1})),0==this.counter&&(p=!1),l._trigger("history",null,{canUndo:p,canRedo:_=!1===y||_,type:"undo",num_undo:this.counter,num_redo:this.records.length-this.counter}),!0},redo:function(){var y=this.canUndo(),l=this.that,d=this.options[_b(183)],_=this.records;if((D=this.counter)==_.length)return!1;var p,v,C,D,I=(D=_[D]).callback;return I?I(!0):(I=D.updateList.map(function(P){return{rowIndx:l.getRowIndx({rowData:P.rowData}).rowIndx,rowData:P.rowData,newRow:P.newRow,oldRow:P.oldRow}}),p=D.deleteList.map(function(P){return{rowData:P.rowData}}),D=D.addList.map(function(P){return{newRow:P.newRow,rowIndx:P.rowIndx}}),l[_b(182)]({history:!1,source:"redo",checkEditable:d[_b(70)],checkEditableAdd:d[_b(185)],allowInvalid:d[_b(68)],addList:D,updateList:I,deleteList:p}),l[D.length||p.length?"refreshView":"refresh"]({source:"redo",header:!1})),this.counter<_.length&&this.counter++,this.counter==this.records.length&&(C=!1),l._trigger("history",null,{canUndo:v=0==y||v,canRedo:C,type:"redo",num_undo:this.counter,num_redo:this.records.length-this.counter}),!0}},(A=G.pqGrid.prototype).history=function(y){return this.iHistory[y.method](y)},A.History=function(){return this.iHistory}}(jQuery),function(K){function G(l){(this.that=l).on("load",this.onLoad.bind(this)).on("filter clearFilter",this[_b(378)].bind(this))}var A=K.paramquery,y=(pq.filter={dpBeforeShow:function(l,d,_){return function(){var p,v,C=l[_b(322)](d);C.length&&(p=(""==C[0][d]?C[1]:C[0])[d],v=C[C.length-1][d]),K(this).datepicker("option","defaultDate",new Date(1==_?v:p))}},datepicker:function(C){var d=C.column,_=d.dataIndx,p=this,v=C.filterUI,I=(C=C.$editor,{dateFormat:v.format||d.format,changeYear:!0,changeMonth:!0});if("date"==d.dataType)return C.each(function(P,B){var U=K.extend({},I,1==P&&v.dpOptions2||v.dpOptions);U[_b(379)]||(U.beforeShow=U.beforeShow||pq.filter[_b(380)](p,_,P)),K(B).datepicker(U)}),!0},filterFnEq:function(l,d){var _=(l.column||{}).dataType;return"date"==_?this.filterFnTD(l,d):"bool"==_?{type:"checkbox"}:K.extend({maxCheck:1},this[_b(381)](l,d))},filterFnSelect:function(p,d){var _=p.column.dataIndx;return p=p.indx,{type:"select",style:"padding-"+(d&&d.options.rtl?"left":"right")+_a(129),attr:"readonly",valueIndx:_,labelIndx:_,options:this.options,init:0==p?this.rangeInit.bind(d):function(){}}},filterFnT:function(){return{type:"textbox",attr:"autocomplete='off'"}},filterFnTD:function(){return{type:"textbox",attr:"autocomplete='off'",init:pq.filter.datepicker}},getVal:function(l){return[(l=(l.crules||[])[0]||{}).value,l.value2,l.condition]},setVal:function(l,d){return(l=l.crules=l.crules||[])[0]=l[0]||{},l[0].value=d}},K.extend(pq.filter,{conditions:{begin:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT},between:{stringList:1,date:1,number:1,filter:{attr:"autocomplete='off'",type:"textbox2",init:pq.filter.datepicker}},contain:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT},equal:{string:1,bool:1,date:1,number:1,filterFn:pq.filter.filterFnEq},empty:{string:1,bool:1,date:1,number:1,nr:1},end:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT},great:{stringList:1,number:1,date:1,filterFn:pq.filter.filterFnTD},gte:{stringList:1,number:1,date:1,filterFn:pq.filter.filterFnTD},less:{stringList:1,number:1,date:1,filterFn:pq.filter.filterFnTD},lte:{stringList:1,number:1,date:1,filterFn:pq.filter.filterFnTD},notbegin:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT},notcontain:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT},notequal:{string:1,date:1,number:1,bool:1,filterFn:pq.filter.filterFnEq},notempty:{string:1,bool:1,date:1,number:1,nr:1},notend:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT},range:{cascade:1,string:1,number:1,date:1,bool:1,filterFn:pq.filter[_b(381)]},regexp:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT}},getConditionsCol:function(l,p){var C,_=p[_b(382)]||((C=(C=this)[_b(383)](pq[_b(46)](l))).sort(),C),v=(p=p[_b(384)],{});return p&&(p.forEach(function(C){v[C]=1}),_=_.filter(function(C){return!v[C]})),_},getConditionsDT:function(l){var d,_,p,v=[],C=this.conditions;for(d in C)p=(_=C[d])[l+"List"],(_[l]&&0!==p||p)&&v.push(d);return v},getFilterUI:function(l,d){var p,_=(p=l.column).filterFn,v=(C=this.conditions[l.condition]||{}).filterFn,C=C.filter||{},D=(delete(p=(0===l.indx?p.filter:{})||{}).type,_=_&&_.call(d,l)||{},v=v&&v.call(this,l,d)||{},K.extend({},C,v,p,_));return D.condition=l.condition,D.init=[],D.options=[],[_,p,v,C].forEach(function(I){I.init&&D.init.push(I.init),I.options&&D.options.push(I.options)}),D},options:function(d){var p=d.column,_=(d=d.filterUI).groupIndx;return p=p.dataIndx,this[_b(322)](p,_,d.diExtra)},getOptions:function(l,d,_){for(var p,v=d.options,C=l.dataIndx,D={column:l,dataIndx:C,filterUI:d,condition:d.condition},I=0,P=v.length;I<P;I++)if((p=v[I])&&(p="function"==typeof p?p.call(_,D):p))return p=_[_b(321)](p,C),_[_b(323)](p,d.dataIndx||C,d.groupIndx);return[]},rangeInit:function(l){var d=this,_=l.column,p=l.$editor,C=l.filterUI;l.headMenu||p.parent().off("click keydown").on("click keydown",function(D){var I,P;"keydown"==D.type&&D.keyCode!=K.ui.keyCode.DOWN||K("#"+(D=d.uuid+"_"+_.dataIndx)).length||(I=new(pq[_b(385)].select)(d,_),P=(D=K("<div id='"+D+_a(130)).appendTo(d.$header)).children(),pq.makePopup(D[0],p),D.position({my:"left top",at:"left bottom",of:l.$editor}),I.create(P,C))})},getType:function(l,d){var _=this.conditions[l]||{},p=_.filterFn;return(_.filter||{}).type||(p?p.call(this,{condition:l,column:d}):{}).type}}),(A[_b(307)]=G).conditions={equal:function(l,d){return l==d},notequal:function(){return!y.equal.apply(this,arguments)},contain:function(l,d){return-1!=(l+"").indexOf(d)},notcontain:function(){return!y.contain.apply(this,arguments)},empty:function(l){return 0==l.length},notempty:function(){return!y.empty.apply(this,arguments)},begin:function(l,d){return 0==(l+"").indexOf(d)},notbegin:function(){return!y.begin.apply(this,arguments)},end:function(l,d){var _=(l+="")[_b(386)](d+="");if(-1!=_&&_+d.length==l.length)return!0},notend:function(){return!y.end.apply(this,arguments)},regexp:function(l,d){if(d.test(l))return!(d.lastIndex=0)},great:function(l,d){return d<l},gte:function(l,d){return d<=l},between:function(l,d,_){return d<=l&&l<=_},range:function(l,d){return-1!=K.inArray(l,d)},less:function(l,d){return l<d},lte:function(l,d){return l<=d}});G.convert=function(l,d){return null==l||""===l?"":("string"==d?l=(l+"").trim()[_b(37)]():"date"==d?l=Date.parse(l):"number"==d?+l==l&&(l=+l):"bool"==d&&(l=String(l)[_b(54)]()),l)},G.convertEx=function(l,v,_,p){v=pq[_b(46)]({dataType:v});var C=pq.filter.conditions[_];return C[v]?this.convert(l,v):C.string?(p&&(l=pq.format(p,l)),"regexp"==_?l:this.convert(l,"string")):C.number?this.convert(l,"number"):void 0},G.prototype={addMissingConditions:function(l){var d=this.that;l.forEach(function(_){var p=d.getColumn({dataIndx:_.dataIndx}).filter||{};_.condition=void 0===_.condition?pq.filter.getVal(p)[2]:_.condition})},clearFilters:function(l){l.forEach(function(_){var p=pq.filter.conditions;(_=_.filter)&&(_.crules||[]).forEach(function(v){(p[v.condition]||{}).nr&&(v.condition=void 0),v.value=v.value2=void 0})})},compatibilityCheck:function(l){var d=l.data,_=_a(131);if(d)if(d=d[0]){if(d.hasOwnProperty("dataIndx")&&d.hasOwnProperty("value"))throw _}else if(!l.rules)throw _},copyRuleToColumn:function(l,p,_){p=p.filter=p.filter||{};var v=l.crules||[],C=v[0],D=(C||l).condition,I=(C||l).value,P=(C||l).value2;"remove"==_?(p.on=!1,p.crules=D?[{condition:D,value:"range"==D?[]:void 0}]:void 0):(p.on=!0,p.mode=l.mode,p.crules=C?v:[{condition:D,value:I,value2:P}])},filter:function(l){this[_b(387)](l=l||{});var d,_,p=this.that,U=p.options,v=!1,C=l.data,D=l.rules=l.rules||(l.rule?[l.rule]:[]),I=!C,P=U.dataModel.location,B=(U=U[_b(157)]).type,J=(U=l.mode||U.mode,l.oper),W="replace"==J,re=I?p.colModel:this[_b(388)](D),he=0,ie=D.length;if("remove"!=J&&this[_b(389)](D),I){if(!1===p._trigger("beforeFilter",null,l))return;for(null!=l.header&&(v=l.header),W&&this[_b(326)](re);he<ie;he++)_=p.getColumn({dataIndx:(d=D[he]).dataIndx}),this[_b(390)](d,_,J)}else for(;he<ie;he++)d=D[he],_=re[he],this[_b(390)](d,_);if(I={header:v,CM:re,data:C,rules:D,mode:U},"local"==P||"local"==B)return I.source="filter",I.trigger=!1,p[_b(147)](I);p[_b(118)](I)},hideRows:function(l,d,_){for(var p,v=0,C=d.length;v<C;v++)(p=d[v]).pq_hidden=p.pq_filter=!this.isMatchRow(p,l,_)},filterLocalData:function(l){var d=this.that,_=!(U=(l=l||{}).data),J=_?d.colModel:l.CM,p=this[_b(391)]({CM:J,apply:_}),v=(J=d.options).dataModel,C=d.iSort,D=U||v.data,I=v.dataUF=v.dataUF||[],P=[],B=[],U=J[_b(157)],W=(J={filters:p,mode:void 0,data:D},l.mode||U.mode);if(U.hideRows)!(J.hideRows=!0)!==d._trigger("customFilter",null,J)&&this.hideRows(p,D,W);else{if(_)if(I.length){for(var re=!0,he=0,ie=I.length;he<ie;he++)D.push(I[he]);I=v.dataUF=[]}else{if(!p.length)return{data:D,dataUF:I};C.saveOrder()}if(U.on&&W&&p&&p.length){if(D.length)if(!1===d._trigger("customFilter",null,J))P=J.dataTmp,B=J.dataUF;else for(he=0,ie=D.length;he<ie;he++){var ae=D[he];(this.isMatchRow(ae,p,W)?P:B).push(ae)}D=P,I=B,0==C.readSorter().length&&(D=C[_b(325)](D)),_&&(v.data=D,v.dataUF=I)}else re&&_&&(!(J={data:D=0==C.readSorter().length?C[_b(325)](D):D})===d._trigger("clearFilter",null,J)&&(D=J.data),v.data=D,d[_b(153)].filter={ui:{type:"local"}})}return _&&(d[_b(153)].filter={ui:{type:"local",rules:p}}),{data:D,dataUF:I}},_getRulesFromCM:function(l,d,_,p,v,C,D){if("between"==_)""===p||null==p?p=D(v,C,_="lte"):""===v||null==v?p=D(p,C,_="gte"):(p=D(p,C,_),v=D(v,C,_));else if("regexp"==_){if("remote"==l)p=p.toString();else if("string"==typeof p)try{var I=d.modifiers||"gi";p=new RegExp(p,I)}catch(U){p=/.*/}}else if("range"==_||K.isArray(p)){if(null==p)return;if("function"==typeof p.push){if(0===p.length)return;if("range"!=_)p=D(p[0],C,_);else for(var P=0,B=(p=p.slice()).length;P<B;P++)p[P]=D(p[P],C,_)}}else _&&(p=D(p,C,_),null!=v&&(v=D(v,C,_)));return[p,v,I="remote"==l?"":((d.conditions||{})[_]||{}).compare||pq.filter.conditions[_].compare||G.conditions[_],_]},getRulesFromCM:function(l){var d=l.CM;if(!d)throw"CM N/A";function _(Ue,ce,lt){return I?(Ue=null==Ue?"":Ue).toString():B.convertEx(Ue,ce,lt)}for(var p=this,v=d.length,C=0,D=l.location,I="remote"===D,P=[],B=A[_b(307)];C<v;C++){var U,J,W,re,he,ae,Me,Ce=d[C],Le=Ce.filter;Le&&(U=Ce.dataIndx,J=[],Me=(Me=Ce.dataType)&&"stringi"!=Me&&"function"!=typeof Me?Me:"string",(W=Le.crules||[Le]).forEach(function(Ue){re=Ue.value,he=Ue.value2,(ae=Ue.condition)&&p.isCorrect(ae,re,he)&&(ae=p[_b(392)](D,Le,ae,re,he,Me,_))&&J.push({condition:ae[3],value:re=ae[0],value2:he=ae[1],cbFn:ae[2]})}),J.length&&(W={dataIndx:U,dataType:Me},I&&1==J.length?(W.value=J[0].value,W.value2=J[0].value2,W.condition=J[0].condition):(W.crules=J,W.mode=Le.mode,I||(W.column=Ce)),P.push(W)))}return(l.apply||I)&&this[_b(393)](P),P},getCMFromRules:function(l){var d=this.that;return l.map(function(_){return _=d.getColumn({dataIndx:_.dataIndx}),pq.copyObj({},_,["parent"])})},getQueryStringFilter:function(){var _,l=this.that,d=(_=l.options).stringify,p=(_=_[_b(157)]).mode,C=l.colModel,v=_.newDI||[],D=(C=this[_b(391)]({CM:C,location:"remote"}),"");return _&&_.on&&C&&(C.length?(_={mode:p,data:C},D=d?JSON.stringify(_):_):(D="",v.length&&l._trigger("clearFilter"))),D},isCorrect:function(l,d,_){if(l=pq.filter.conditions[l])return!!(null!=d&&""!==d||null!=_&&""!==_||l.nr);throw"filter condition NA"},isMatchCell:function(l,d){for(var _,p,v,C,I=this.that,P=l.column,B=l.dataType,U=l.mode,J=[],W=l.crules,re=W.length,he=d[l.dataIndx],ie=0;ie<re;ie++)C=(v=W[ie]).condition,_=v.value,p=v.value2,v=v.cbFn,C&&(C="regexp"===C?null==he?"":he:G.convertEx(he,B,C,P),J.push(!!v.call(I,C,_,p,d,P)));if(re=J.length,"AND"===U){for(ie=0;ie<re;ie++)if(!J[ie])return!1;return!0}for(ie=0;ie<re;ie++)if(J[ie])return!0;return!1},isMatchRow:function(l,d,_){var p,v,C=0,D=d.length,I="AND"==_,P=!I;if(0==D)return!0;for(;C<D;C++){if(p=d[C],(v=this[_b(394)](p,l))&&(p.found=!0),P&&v)return!0;if(I&&!v)return!1}return I},onFilterChange:function(){var l=this.that,d=l.columns,_=(v=l.options)[_b(157)],p=_.oldDI||[],v=!v.dataModel.data.length,C="pq-col-filtered",D=(I="remote"==_.type)||v,I=(_.rules||[]).reduce(function(P,B){return(B.found||D)&&P.push(B.dataIndx),P},[]);p.forEach(function(P){var B=l[_b(27)]({dataIndx:P}),U=d[P];B.length&&(B[_b(72)](C),l[_b(209)]({dataIndx:P})[_b(72)](C)),U&&(U.clsHead=(U.clsHead||"").split(" ").filter(function(J){return J!==C}).join(" "))}),I.forEach(function(P){var B=l[_b(27)]({dataIndx:P}),U=d[P];B.length&&(B.addClass(C),l[_b(209)]({dataIndx:P}).addClass(C)),U&&(U.clsHead=(U.clsHead||"")+" "+C)}),_.oldDI=_.newDI=I},onLoad:function(){var l=this.that.options.dataModel.dataUF;l&&(l.length=0)},sortRulesAndFMIndx:function(l){var d=this.that.options[_b(157)],_=d.newDI;l.sort(function(p,v){return v=v.dataIndx,p=_.indexOf(p=p.dataIndx),v=_.indexOf(v),0<=p&&0<=v?p-v:0<=p?-1:0<=v?1:0}),d.rules=l}}}(jQuery),function(K){var G=K.paramquery,A=G.cSort=function(l){this.that=l,this.sorters=[],this.tmpPrefix="pq_tmp_",this.cancel=!1},y=(G.pqGrid.prototype.sort=function(l){if((l=l||{}).data)return this.iSort[_b(320)](l.sorter,l.data);var d,_,p,v,C,D=this,I=D.options,P=I.dataModel,B=P.data,U=P.location,J=I.sortModel.type;(B&&B.length||"local"!=J)&&(I=I.editModel,_=(d=D.iSort).getSorter(),p=l.evt,v=null==l.single?d.readSingle():l.single,C=d.readCancel(),((C=l.sorter?l.addon?(l.single=v,l.cancel=C,d.addon(l)):l.sorter:d.readSorter()).length||_.length)&&(I.indices&&D.blurEditor({force:!0}),!(I={dataIndx:C.length?C[0].dataIndx:null,oldSorter:_,sorter:C,source:l.source,single:v})===D._trigger("beforeSort",p,I)?d.cancelSort():(d.resumeSort(),"local"==J&&d.saveOrder(),d.setSorter(C),d.setSingle(v),d[_b(395)](C),d[_b(396)](v),"local"==J?(P.data=d[_b(325)](B,!l[_b(397)],B[0]==D.pdata[0]?"pq_order":"pq_gorder"),!(D[_b(153)].sort={evt:p,ui:I})!==l.refresh&&D[_b(17)]()):"remote"==J&&(D[_b(153)].sort={evt:p,ui:I},l[_b(398)]||!1!==D._trigger("customSort")&&("lazy"==U?D.iLazy.init({initBySort:!0}):D[_b(146)]({initBySort:!0,callback:function(){D[_b(147)]()}}))))))},A.prototype={addon:function(l){var d,_,p=(l=l||{}).sorter[0],v=p.dataIndx,C=p.dir,D=l.single,I=l.cancel,P=this.readSorter(),B=P[0];if(null==D)throw"sort single N/A";return null!=v&&(D&&!l[_b(399)]?(B=(P=P.length?[P[0]]:[])[0])&&B.dataIndx==p.dataIndx?""==(_="up"===(d=B.dir)?"down":I&&"down"===d?"":"up")?P.length--:B.dir=_:P[0]=K.extend({},p,{dir:_=C||"up"}):-1<(D=this.inSorters(P,v))?"up"==(d=P[D].dir)?P[D].dir="down":I&&"down"==d||1!=P.length?P.splice(D,1):P[D].dir="up":P.push(K.extend({},p,{dir:"up"}))),P},cancelSort:function(){this.cancel=!0},resumeSort:function(){this.cancel=!1},readSorter:function(){var l=(d=this.that).columns,d=(d.options.sortModel.sorter||[]).filter(function(_){return!!l[_.dataIndx]});return pq[_b(217)](d,"dataIndx")},setSingle:function(l){this.single=l},getSingle:function(){return this.single},readSingle:function(){return this.that.options.sortModel.single},setCancel:function(l){this.cancel=l},readCancel:function(){return this.that.options.sortModel.cancel},saveOrder:function(l){l=l||"pq_order";var d=this.that.get_p_data(),_=d.find(function(D){return!D.pq_gtitle&&!D[_b(9)]});if(_&&null==_[l]||!_)for(var p,v=0,C=(p=d).length;v<C;v++)(_=p[v])&&(_[l]=v)},getCancel:function(){return this.cancel},getQueryStringSort:function(){if(this.cancel)return"";var l=this.sorters,d=(d=this.that).options.stringify;return l.length?d?JSON.stringify(l):l:""},getSorter:function(){return this.sorters},setSorter:function(l){this.sorters=l.slice(0)},inSorters:function(l,d){for(var _=0;_<l.length;_++)if(l[_].dataIndx==d)return _;return-1},sortLocalData:function(l,d,_){_=_||"pq_order";var p=this.sorters;return p.length||l.length&&null!=l[0][_]&&(p=[{dataIndx:_,dir:"up",dataType:"integer"}]),this[_b(320)](p,l,d)},compileSorter:function(l,d){var p,_=(p=this.that).columns,v=[],C=[],D=[],I=this.tmpPrefix,P=(p=p.options).sortModel,B=P.useCache,U=P.ignoreCase,J=l.length;d=d||p.dataModel.data;for(var W=0;W<J;W++){var Me,re=(Me=l[W]).sortIndx||Me.dataIndx,ae=_[re]||{},he="up"==(Me.dir=Me.dir||"up")?1:-1,ie=pq.getFn(ae.sortType),Ce=(ae="string"==(ae=ae.dataType||Me.dataType||"string")&&U?"stringi":ae,(Me=B&&"date"==ae)?I+re:re);C[W]=Ce,D[W]=he,v[W]=ie?function(Le,Ue){return function(ce,lt,qe,ut){return Ue(ce,lt,qe,ut,Le)}}(ie,y[_b(400)]):"integer"==ae||"float"==ae?y[_b(401)]:"function"==typeof ae?function(Le,Ue){return function(ce,lt,qe,ut){return Ue(ce,lt,qe,ut,Le)}}(ae,y[_b(402)]):"date"==ae?y["sort_date"+(Me?"_fast":"")]:"bool"==ae?y.sort_bool:"stringi"==ae?y[_b(403)]:y[_b(404)],Me&&this.addCache(d,ae,re,Ce)}return this._composite(v,C,D,J)},_composite:function(l,d,_,p){return function(v,C){for(var D=0,I=0;I<p&&0==(D=l[I](v,C,d[I],_[I]));I++);return D}},_sortLocalData:function(l,d,_){if(!d)return[];if(!d.length)return d;var p=this.that,v=p.options.sortModel,C=this[_b(405)](l,d),D={sort_composite:C,data:d,sorter:l};return l&&l.length?(_&&!1===p._trigger("customSort",null,D)?d=D.data:d.sort(C),v.useCache&&this[_b(406)](l,d)()):p._trigger("cancelSort",null,D),d},addCache:function(l,d,_,p){for(var v=y["get_"+d],C=l.length;C--;){var D=l[C];D[p]=v(D[_])}},removeCache:function(l,d){var _=this.tmpPrefix;return function(){for(var p=l.length;p--;){var C=_+l[p].dataIndx,D=d.length;if(D&&d[0].hasOwnProperty(C))for(;D--;)delete d[D][C]}}},writeCancel:function(l){this.that.options.sortModel.cancel=l},writeSingle:function(l){this.that.options.sortModel.single=l},writeSorter:function(l){this.that.options.sortModel.sorter=l}},{get_date:function(l){return!l||isNaN(l=Date.parse(l))?0:l},sort_number:function(l,d,_,p){return((l=(l=l[_])?+l:0)-(d=(d=d[_])?+d:0))*p},sort_date:function(l,d,_,p){return d=d[_],((l=(l=l[_])?Date.parse(l):0)-(d=d?Date.parse(d):0))*p},sort_date_fast:function(l,d,_,p){return(l[_]-d[_])*p},sort_dataType:function(l,d,_,p,v){return v(l[_],d[_])*p},sort_sortType:function(l,d,_,p,v){return v(l,d,_)*p},sort_string:function(l,d,_,p){return l=l[_]||"",d=d[_]||"",_=0,d<l?_=1:l<d&&(_=-1),_*p},sort_locale:function(l,d,_,p){return d=d[_]||"",(l=l[_]||"")[_b(407)](d)*p},sort_bool:function(l,d,_,p){return l=l[_],d=d[_],_=0,l&&!d||!1===l&&null==d?_=1:(d&&!l||!1===d&&null==l)&&(_=-1),_*p}});pq.sortObj=y}(jQuery),function(K){function G(y,v,d){var _=0,p=v;for(d=(v=y.length)<d?v:d;p<d;p++)!0!==y[p].pq_hidden&&_++;return _}K.paramquery.pqGrid.prototype[_b(409)]=G,(K.paramquery.cMerge=function A(y){var l=this;l.that=y,l.mc=null,y.on(_a(132),function(d,_){y.options.mergeCells&&"pager"!==_.source&&l.init()}),y.on("colAdd colRemove",l[_b(408)].bind(l)).on("change",l.onChange.bind(l)),y.Merge=function(){return l}}).prototype={auto:function(y,l){var d=this.that,_=d.pdata;return l=l||[],y.forEach(function(p){for(var v=1,C=d.colIndxs[p],D=_.length;D--;){var P=_[D-1]?_[D-1][p]:void 0;void 0!==P&&_[D][p]==P?v++:1<v&&(l.push({r1:D,c1:C,rc:v,cc:1}),v=1)}}),l},calcVisibleColumns:function(y,l,d){var _=0,p=y.length;for(d=p<d?p:d;l<d;l++)!0!==y[l].hidden&&_++;return _},findNextVisibleColumn:function(y,l,d){for(var _,p=l;p<l+d;p++){if(!(_=y[p]))return-1;if(!_.hidden)return p}},findNextVisibleRow:function(y,l,d){for(var _,p=l;p<l+d;p++){if(!(_=y[p]))return-1;if(!_.pq_hidden)return p}},getData:function(y,l,d){var _=this.mc;if(_[y]&&(_=_[y][l]))return(y=_.data)?y[d]:null},inflateRange:function(y,l,d,_){var p=this.that,v=!1,C=p.riOffset+p.pdata.length-1,D=p.colModel.length-1,I=this.mc2;if(!I)return[y,l,d,_];for(var P=0,B=I.length;P<B;P++){var U=(re=I[P]).r1,J=re.c1,W=C<(W=U+re.rc-1)?C:W,re=D<(re=J+re.cc-1)?D:re;if((U<y&&y<=W||U<=d&&d<W)&&l<=re&&J<=_||(J<l&&l<=re||J<=_&&_<re)&&y<=W&&U<=d){v=!0,y=U<y?U:y,l=J<l?J:l,d=d<W?W:d,_=_<re?re:_;break}}return v?this[_b(350)](y,l,d,_):[y,l,d,_]},init:function(){for(var y=this.that,l=this[_b(410)],d=this[_b(411)],_=this[_b(412)],p=y.colModel,v=y.options.mergeCells||[],C=y.get_p_data(),D=[],I=[],P=0,B=v.length;P<B;P++){var U=v[P],J=U.r1,W=J,re=C[J],he=U.c1,ie=he,ae=p[he],Me=U.rc,Ce=U.cc;if(ae&&re&&(ae.hidden&&(ie=l(p,he,Ce)),ae=_(p,he,he+Ce),re.pq_hidden&&(W=d(C,J,Me)),!((re=G(C,J,J+Me))<1||ae<1))){D.push({r1:J,c1:he,rc:Me,cc:Ce}),I[W]=I[W]||[];for(var Le={show:!(I[W][ie]={show:!0,rowspan:re,colspan:ae,o_rowspan:Me,o_colspan:Ce,style:U.style,cls:U.cls,attr:U.attr,r1:J,c1:he,v_r1:W,v_c1:ie}),r1:J,c1:he,v_r1:W,v_c1:ie},Ue=J;Ue<J+Me;Ue++){I[Ue]=I[Ue]||[];for(var ce=he;ce<he+Ce;ce++)Ue==W&&ce==ie||(I[Ue][ce]=Le)}}}y[_b(413)]=0<I.length,this.mc=I,this.mc2=D},ismergedCell:function(y,l){var d,p=this.mc;return!!(p&&p[y]&&(d=p[y][l]))&&(y!=(p=d.v_r1)||l!=d.v_c1||{o_ri:d.r1,o_ci:d.c1,v_rc:d.rowspan,v_cc:d.colspan,o_rc:d.o_rowspan,o_cc:d.o_colspan})},isRootCell:function(y,l,d){var _=this.mc;if(_&&_[y]&&(p=_[y][l])){if("o"==d)return y==p.r1&&l==p.c1;d=p.v_r1;var p=p.v_c1;return d==y&&p==l?{rowspan:(y=_[d][p]).rowspan,colspan:y.colspan}:void 0}},removeData:function(y,l,d){var _=this.mc;_&&_[y]&&(_=_[y][l])&&(y=_.data)&&(y[d]=null)},getRootCell:function(y,l){var d,_=this.mc;if(_&&_[y]&&(y=_[y][l]))return{o_ri:(y=_[l=y.v_r1][d=y.v_c1]).r1,o_ci:y.c1,v_ri:l,v_ci:d,v_rc:y.rowspan,v_cc:y.colspan,o_rc:y.o_rowspan,o_cc:y.o_colspan}},getRootCellO:function(y,l,d,v){v="o"==(v=v||"o");var p,C=this[_b(230)](y,l);return C?this.that.normalize(p={rowIndx:C[v?"o_ri":"v_ri"],colIndx:C[v?"o_ci":"v_ci"]}):(p=d?{rowIndx:y,colIndx:l}:p)?this.that.normalize(p):null},getRootCellV:function(y,l,d){return this[_b(137)](y,l,d,"v")},getClsStyle:function(y,l){return this.mc[y][l]},getMergeCells:function(y,l,d){for(var _,p,v,C=this.that,D=C.options.mergeCells,I=C.riOffset,P=I+d,B=[],U=D?D.length:0,J=0;J<U;J++)p=(_=D[J]).r1,v=_.c1,(!l||I<=p&&p<P)&&(l&&(p-=I),B.push({r1:p+=y,c1:v,r2:p+_.rc-1,c2:v+_.cc-1}));return B},alterColumn:function(y,l){for(var _=(l=l.args)[1],p="number"!=typeof(v=l[0]),v=p?v.length:v,C=this.that.options.mergeCells||[],D=0,I=C.length;D<I;D++){var P=C[D],B=P.c1,U=P.cc;p?_<=B?P.c1=B+v:_<B+U&&(P.cc=U+v):_<B?P.c1=B-v:_<B+U&&0<U-v&&(P.cc=U-v),P.c2=null}this.init(C)},onChange:function(y,l){for(var d,p=l.addList,v=l.deleteList,C=this.that.options.mergeCells||[],D=0,I=C.length;D<I;D++){for(var P=C[D],B=P.r1,U=P.rc,J=0,W=p.length;J<W;J++)(d=p[J].rowIndx)<=B?(B=P.r1=B+1,P.r2=null):d<B+U&&(U=P.rc=U+1,P.r2=null);for(J=0,W=v.length;J<W;J++)(d=v[J].rowIndx)<B?(B=P.r1=B-1,P.r2=null):d<B+U&&1<U&&(U=P.rc=U-1,P.r2=null)}this.init(C)},setData:function(y,l,d){var _=this.mc;_[y]&&(_=_[y][l])&&(_.data=d)}}}(jQuery),function(K){var G=K.paramquery,A=pq.mixin,y=(G.pqGrid.defaults.groupModel={agg:{},cascade:!0,cbId:"pq_group_cb",collapsed:[],dataIndx:[],fixCols:!0,groupCols:[],header:!0,headerMenu:!0,icon:[_a(133),"ui-icon-triangle-1-e"],id:"pq_gid",parentId:"parentId",childstr:"children",menuItems:["merge","fixCols","grandSummary"],on:!1,refreshOnChange:!0,pivotColsTotal:"after",separator:"_",source:"checkboxGroup",showSummary:[],summaryInTitleRow:"collapsed",summaryEdit:!0,title:[],titleDefault:"{0} ({1})"},pq.aggregate={sum:function(l){for(var d,_=0,p=l.length;p--;)null!=(d=l[p])&&(_+=+d);return _},avg:function(l,d){try{var _=pq.formulas.AVERAGE(l)}catch(p){_=p}return isNaN(_)?null:_},flatten:function(l){return l.filter(function(d){return null!=d})},max:function(l,I){var _,p,v,C,D;if(I=pq[_b(46)](I),_=(l=this.flatten(l)).length){if("number"==I)for(p=+l[0];_--;)p=p<(v=l[_])||isNaN(p)?v:p;else if("date"==I){for(p=Date.parse(l[0]),C=l[0];_--;)(p<(D=Date.parse(l[_]))||isNaN(p))&&(p=D,C=l[_]);p=C}else l.sort(),p=l[_-1];return p}},min:function(l,D){var _,p,v,C;if(D=pq[_b(46)](D),C=(l=this.flatten(l)).length){if("number"==D)for(_=+l[0];C--;)_=(p=+l[C])<_||isNaN(_)?p:_;else if("date"==D){for(_=Date.parse(l[0]),v=l[0];C--;)((p=Date.parse(l[C]))<_||isNaN(_))&&(_=p,v=l[C]);_=v}else l.sort(),_=l[0];return _}},count:function(l){return this.flatten(l).length},stdev:function(l){try{var d=pq.formulas.STDEV(l)}catch(_){d=_}return isNaN(d)?null:d},stdevp:function(l){try{var d=pq.formulas.STDEVP(l)}catch(_){d=_}return isNaN(d)?null:d}},G.cGroup=function(l){var d=this,_=l.options,p=d.Model=_.groupModel;d.cbId=p.cbId,d.childstr=p.childstr,d.id=p.id,d.parentId=p.parentId,d.isGroup=!0,d.cache={},d.oldEditor=_.editor,d.prop="pq_group_prop",d.that=l,Object[_b(45)](p,"nodeClose",{get:function(){return d.fillState({})},set:function(v){d.nodeClose=v}}),p.on&&d.init()});y[_b(414)]=function(l,d){return function(_){return!1===d._trigger("beforeGroupExpand",l,_)}},y[_b(415)]=function(l){return function(d){var _=K(d.target),p=K(this).data("indx");_.hasClass("pq-group-remove")?l[_b(416)](p):l[_b(417)](p,d)}},y.prototype=K.extend({},A.ChkGrpTree,A.GrpTree,{addGroup:function(l,d){var _=this,p=pq.objectify(v=_.that.options.groupModel.dataIndx||[]),v=v.slice();null==l||p[l]||(null==d?v.push(l):v.splice(d,0,l),_.option({dataIndx:v},"","",function(){_[_b(418)]()}))},createHeader:function(){for(var l=this.that,d=this.$header,_=l.options,p=_.bootstrap,v=l.columns,C=p.on,D=_.groupModel,I=D.dataIndx,P=I.length;P--;)null==v[I[P]]&&I.splice(P,1);if(P=I.length,D.header&&D.on){if(d?d.empty():(d=this.$header=K(_a(134)).appendTo(l.$top)).on("click",".pq-group-item",y[_b(415)](this)),P){for(var B=[],U=0;U<P;U++){var J=I[U],W=v[J],re=(C?p.groupModel:D).icon,he=(he=D.collapsed)[U]?re[1]:re[0];B.push(_a(135),J,"' >","<span class='",this.toggleIcon,he,"' ></span>",W.pq_title||("string"==typeof W.title?W.title:J),"<span class='",this[_b(419)],"' ></span></div>")}d[0].innerHTML=B.join("")}this.initHeader(_,D)}else d&&(d.remove(),this.$header=null)},collapse:function(l){this.expand(l,!0)},collapseAll:function(l){this.expandAll(l,!0)},collapseTo:function(l){this.expandTo(l,!0)},concat:function(){var l=this.parentId,d=this.id,_=this.childstr;return function(p,v,C){var D=C[d];return v.forEach(function(I){I[l]=D,p.push(I)}),C[_]=v,p}},editorSummary:function(l,d){var _=this,p=_.oldEditor;return function(v){if((C=v.rowData)[_b(9)]||C.pq_gtitle){var D,I,C=pq.aggregate,P=(P=(U=v.column).summary)?P.edit:null,B=K.inArray,U=U.dataType,J=[""];if(-1<B(v.dataIndx,d.dataIndx)||!d[_b(420)]&&!P||!1===P)return!1;for(I in D=_[_b(421)](U),C)-1<B(I,D)&&J.push(I);return 1!=J.length&&{type:"select",prepend:d.prepend,options:d.options||J,valueIndx:d.valueIndx,labelIndx:d.labelIndx,init:d.init||_.editorInit,getData:d.getData||_[_b(422)]}}return"function"==typeof p?p.call(_.that,v):p}},editorInit:function(l){var d=l.column.summary,_=this.options.groupModel.dataIndx;_=(d=d||(l.column.summary={}))[_[l.rowData.pq_level]]||d.type,l.$cell.find("select").val(_)},editorGetData:function(C){var d=C.column,_=this.options.groupModel.dataIndx[C.rowData.pq_level],p=d.dataType,v=d.summary;return C=C.$cell.find("select").val(),v[v[_]?_:"type"]=C,this.one("beforeValidate",function(D,I){I[_b(68)]=!0,I.track=!1,I.history=!1,d.dataType="string",this.one(!0,"change",function(P,B){d.dataType=p})}),C},expandTo:function(l,d){for(var _,p=this.that,v=!!d,C=l.split(","),D=C.length,I=this.childstr,P=this.getRoots(p.pdata),B=0;B<D&&(_=P[C[B]]);)v||(_.pq_close=v),P=_[I],B++;_&&(_.pq_close=v,!1!==p._trigger("group",null,{node:_,close:v})&&this[_b(342)]())},expandAll:function(l,d){!1!==this.trigger({all:!0,close:d=!!d,level:l=l||0})&&(this.that.pdata.forEach(function(_){_.pq_level>=l&&(_.pq_close=d)}),this[_b(423)](),this[_b(342)]())},expand:function(l,d){!1!==this.trigger({close:!!d,level:l=l||0})&&(this.that.pdata.forEach(function(_){_.pq_level==l&&(_.pq_close=d)}),this[_b(423)](),this[_b(342)]())},flattenG:function(l,d,_,p){var v=_.dataIndx,C=this.id,D=this.parentId,I=this.childstr,P=_.separator,B=_.titleIndx,U=this.concat(),J=v.length,W=[];return function re(he,ie,ae,Me){if(!J)return he;var Ce=ie||0,Le=(ae=ae||{})[I],Ue=v[Ce],ce=_.collapsed[Ce];return d(he,Ue,l[Ue]).forEach(function(ut){var je,qe=ut[1],De=(Me?Me+P:"")+(ut=ut[0]);(je={pq_gtitle:!0,pq_level:Ce,pq_close:ce,pq_items:je=qe.length})[C]=De,je[D]=ae[C],je[I]=[],je[Ue]=ut,B&&(je[B]=ut),W.push(je),Le&&Le.push(je),Ce+1<J?re(qe,Ce+1,je,De):W=U(W,qe,je)}),W}},getAggOptions:function(l){return"integer"==l||"float"==l?l="number":"date"!==l&&(l="string"),this.that.options[_b(424)][l].split(",")},getVal:function(l){var d=K.trim;return function(_,p,v){return _=_[p],(p=v[_b(425)])?(p=pq.getFn(p))(_):(_=d(_),l?_[_b(37)]():_)}},getSumCols:function(){return this._sumCols},getSumDIs:function(){return this._sumDIs},group:function(l){return function(d,_,p){var v={},C=[];return d.forEach(function(D){D.pq_hidden=void 0;var I=l(D,_,p),P=v[I];null==P&&(v[I]=P=C.length,C[P]=[I,[]]),C[P][1].push(D)}),C}},groupData:function(l){var d=this.that,_=d.options.groupModel,p=this.getVal(_.ignoreCase),C=d.pdata,D=d.columns;this.setSumCols(_.dataIndx),d.pdata=this.flattenG(D,this.group(p),_,function(){})(C),d._trigger("before"+(l?"Pivot":"Group")+"Summary"),this.summaryT()},hideRows:function(l,d,_,p){for(var v,C=this.that.pdata,D=l,I=C.length;D<I;D++)if((v=C[D])[_b(9)])_||p?v.pq_level>=d&&(v.pq_hidden=!0):v.pq_level>d&&(v.pq_hidden=!0);else if(v.pq_gtitle){if(v.pq_level<=d)break;v.pq_hidden=!0}else v.pq_hidden=!0},init:function(){var l,d,_,p,v=this;v.onCMInit(),v._init||(v.mc=[],v[_b(23)]=[],l=(d=(p=v.that).options).groupModel,d=d.bootstrap.on,v[_b(419)]="pq-group-remove "+(_=d?"glyphicon ":"ui-icon ")+(d?"glyphicon-remove":"ui-icon-close"),v.toggleIcon="pq-group-toggle "+_,p.on("cellClick",v[_b(371)](v)).on("cellKeyDown",v[_b(426)](v,l)).on(!0,"cellMouseDown",v[_b(372)]()).on("change",v.onChange(v,l)).on("dataReady",v[_b(299)].bind(v)).on("beforeFilterDone",function(){v.saveState()}).on("columnDragDone",v[_b(427)](v)).on("colMove",v.onColMove.bind(v)).on(_a(136),v[_b(428)].bind(v)).on("valChange",v.onCheckbox(v,l)).on("refresh refreshRow",v.onRefresh(v,l)).on("refreshHeader",v[_b(302)].bind(v)),(l.titleIndx||l[_b(12)])&&p.on("CMInit",v.onCMInit.bind(v)),p.on("beforeCheck",v[_b(305)].bind(v)),v[_b(429)](!0),v._init=!0)},initHeadSortable:function(){this.$header.sortable({axis:"x",distance:3,tolerance:"pointer",cancel:".pq-group-menu",stop:this.onSortable(this,this.that.options)})},initHeadDroppable:function(){var l=this,d=l.that,_=l.$header;_&&(_.droppable({accept:function(p){if(p=+p.attr("pq-col-indx"),!isNaN(p)&&d.colModel[p])return l.acceptDrop},tolerance:"pointer",hoverClass:"pq-drop-hover",drop:l.onDrop(d,l)}),l.acceptDrop=!0)},initHeader:function(l,d){var _,p;this.$header&&(p=(_=this.$header).find(".pq-group-item"),_.data("uiSortable")||this[_b(430)](),p.length||_.append(_a(137)+l[_b(431)]+"</span>"),d.headerMenu&&this[_b(432)]())},initHeaderMenu:function(){for(var l,d=this,_=(v=d.that).BS_on,p=v.options,v=d.$header,C=[_a(138),_?"<span class='glyphicon glyphicon-chevron-left'></span>":_a(139),"<ul>"],D=p.groupModel,I=D.menuItems,P=0,B=I.length;P<B;P++)C.push("<li data-option='",l=I[P],_a(140),"<label>",_a(0),D[l]?"checked":"","/>",p["strGroup_"+l],"</label></li>");C.push("</ul></li></ul>"),(_=K(C.join("")).appendTo(v)).menu({icons:{submenu:"ui-icon-carat-1-w"},position:{my:"right top",at:"left top"}}),_.change(function(U){var J;"INPUT"==U.target.nodeName&&((J={})[U=K(U.target).closest("li").data("option")]=!p.groupModel[U],d.option(J))})},isOn:function(){var l=this.that.options.groupModel;return l.on&&(l.dataIndx||[]).length},getRC:function(l){var d=1,_=this;return(l[_.childstr]||[]).forEach(function(p){d+=_.getRC(p)}),d+(l[_b(11)]?1:0)},initmerge:function(){var l,d=this,_=d.that,p=_.options,v=p.groupModel,C=v.merge,D=v[_b(18)],I=v.titleIndx,P=_.colModel.length,B=[],U=v.dataIndx,J=_.pdata||[];v.on&&(C?U.forEach(function(W,re){J.forEach(function(he){he.pq_gtitle&&re==he.pq_level&&(l=d.getRC(he),B.push({r1:he.pq_ri,rc:l,c1:re,cc:1}))})}):U.length&&J.forEach(function(W){!W.pq_gtitle||D&&(W.pq_close||"collapsed"!==D)||B.push({r1:W.pq_ri,rc:1,c1:I?_.colIndxs[I]:W.pq_level,cc:P})})),B.length?(d.mc=p.mergeCells=B,_.iMerge.init()):d.mc.length&&(d.mc.length=0,_.iMerge.init())},initcollapsed:function(){var l,d,_,p,v,C=this.that,D=C.options.groupModel,I=D.merge,P=D[_b(18)],B=this.nodeClose,U=C.pdata,J=this.id;if(U){for(var W=0,re=U.length;W<re;W++)(_=U[W]).pq_gtitle&&(p=_.pq_level,v=null,B&&null!=(d=B[l=_[J]])&&(delete B[l],v=_.pq_close=d),(v=null==v?_.pq_close:v)?this.hideRows(W+1,p,I,P):I&&(_.pq_hidden=!0));C._trigger("groupHideRows")}},updateItems:function(l){var d,_,p=this,v=0,C=p.childstr;return(l||p.that.pdata).forEach(function(D){D.pq_gtitle&&(D.pq_items=(_=(d=D[C]).length)&&d[0][C]?p[_b(433)](d):_,v+=D.pq_items)}),v},removeEmptyParent:function(l){var d,_=this.that.pdata,p=this.childstr;l[p].length||(_=(p=(d=this.getParent(l))?d[p]:_).indexOf(l),p.splice(_,1),d&&this[_b(434)](d))},addNodes:function(l,d,_){this.moveNodes(l,d,_,!0)},deleteNodes:function(l){this.moveNodes(l,null,null,null,!0)},moveNodes:function(l,d,_,p,v){var C,D,I,P,B=this,U=B.that,J=B.childstr,W=U.options,re=W.groupModel,he=re.dataIndx,ie=B.getRoots(),ae=d?d[J]:ie,Me=[],Ce=B.parentId,Le=B[_b(435)](l),Ue=0,ce=ae[0],lt=ae.length;if(_=null==_||lt<=_?lt:_,I=Le.length){for(U._trigger("beforeMoveNode");Ue<I;Ue++)P=Le[Ue],p?ae.splice(_++,0,P):(D=(C=(C=B.getParent(P))?C[J]:ie).indexOf(P),v?C.splice(D,1):C==ae?_=pq.moveItem(P,ae,D,_):(ae.splice(_++,0,P),C.splice(D,1))),d&&C!=ae&&(he.slice(0,d.pq_level+1).forEach(function(qe){B.isFolder(P)?B[_b(10)](P).forEach(function(ut){ut[qe]=d[qe]}):P[qe]=ce[qe]}),P[Ce]=ce[Ce],P.pq_hidden=ce.pq_hidden);ae==ie&&(U.pdata=ae),U.iRefresh.addRT(Le),B[_b(433)](),B.summaryT(),U.pageData().forEach(function(qe){qe.pq_gtitle||qe[_b(9)]||Me.push(qe)}),W.dataModel.data=Me,B.isCascade(re)&&(B[_b(436)](),B.setValCBox()),U.iRefresh.addRowIndx(),B.initmerge(),U._trigger((p?"add":v?"delete":"move")+"Node",null,{args:arguments}),U.refresh({header:!1})}},onCellClick:function(l){return function(d,_){var p;_.rowData.pq_gtitle&&K(d[_b(32)].target).hasClass("pq-group-icon")&&(pq.isCtrl(d)?l[(p=_.rowData).pq_close?"expand":"collapse"](p.pq_level):l.toggleRow(_[_b(75)],d))}},onCellMouseDown:function(){return function(l,d){d.rowData.pq_gtitle&&K(l[_b(32)].target).hasClass("pq-group-icon")&&l[_b(29)]()}},onCellKeyDown2:function(l,d){return function(_,p){return 0!=l[_b(301)](_,p)&&(p.rowData.pq_gtitle&&0<=K.inArray(p.dataIndx,d.dataIndx)&&_.keyCode==K.ui.keyCode.ENTER?(l.toggleRow(p[_b(75)],_),!1):void 0)}},onChange:function(l,d){return function(_,p){d.source!=p.source&&"checkbox"!=p.source&&(l.summaryT(),l.that.refresh())}},onColumnDrag:function(l){return function(d,p){var v=(p=p.column).colModel;v&&v.length||!1===p.groupable||p.denyGroup?l.acceptDrop=!1:l[_b(437)]()}},onCustomSort:function(l,d){var _,p=this.that,v=p.options,C=[],D=v.groupModel,I=D.dataIndx,P=d.sorter||[],B=P.map(function(re){return re.dataIndx}),U=B[0],J=p.columns[U],W=I.indexOf(U);if("remote"!=v.sortModel.type&&D.on&&I.length&&!(0<=W&&J[_b(425)]))return"pq_order"==U||"pq_gorder"==U||0==P.length||(J.summary||{}).type?this._delaySort(d):(_=I.map(function(re){var he=B.indexOf(re);return{dataIndx:re,dir:(0<=he?P[he]:P[0]).dir}}).concat(P),_=pq[_b(217)](_,"dataIndx"),this._delaySort(d,function(re){function he(){C.length&&d[_b(15)].push(p.iSort[_b(405)](C,re)),C=[]}d[_b(15)]=[],_.forEach(D.titleIndx==U?function(ie){-1==I.indexOf(ie.dataIndx)?C.push(ie):(he(),d[_b(15)].push(p.iSort[_b(405)]([ie],re)))}:function(ie){var ae=0<=B.indexOf(ie.dataIndx),Me=0<=I.indexOf(ie.dataIndx);ae?Me?(he(),d[_b(15)].push(p.iSort[_b(405)]([ie],re))):C.push(ie):(he(),d[_b(15)].push(void 0))}),he()}))},_delaySort:function(l,d){var _=this,p=_.that,v=p.pdata;if(v&&v.length)return p.one("isSkipGroup",function(){return d&&d(v),l.data=v,_[_b(438)]({},l),p.pdata=l.data,_[_b(439)](),!1}),!1},summaryRestore:function(){var l,d=this.childstr;this.that.pdata=function _(p,v){var C=[];return p.forEach(function(D){C.push(D),_(D[d]||[],D).forEach(function(I){C.push(I)})}),v&&(l=v[_b(11)])&&!l.pq_ghidden&&C.push(l),C}(this.getRoots())},onDrop:function(l,d){return function(_,p){p=+p.draggable.attr("pq-col-indx"),d.addGroup(p=l.colModel[p].dataIndx),d.acceptDrop=!1}},onSortable:function(l,d){return function(){var _,p,v=[],C=d.groupModel.dataIndx;K(this).find(".pq-group-item").each(function(D,I){p=(p=K(I)).data("indx"),C[D]!==p&&(_=!0),v.push(p)}),_&&l.option({dataIndx:v},"","",function(){l[_b(418)]()})}},onDataReady:function(l,d){var _=this,p=_.that,v=p.iSort,C=p.options.groupModel,D=C.dataIndx.length;0!=d.group&&(d.header=null,C.on&&(D||C[_b(21)]?(!1!==p._trigger("isSkipGroup")&&(v.saveOrder(),_.groupData(),v.saveOrder("pq_gorder"),_.buildCache()),p.iRefresh.addRowIndx(),_[_b(440)](),D&&(_[_b(441)](),_.initmerge(),_.isCascade(C)&&_[_b(436)]())):_[_b(440)](),_.setValCBox()),_[_b(423)]())},onColMove:function(){var l=this.that.options.groupModel;if(l[_b(12)])return this.that[_b(17)](),!1;l.titleIndx||this.initmerge()},option:function(l,d,I,p){var v=this.that,C=(C=l.dataIndx)?C.length:0,D=v.options.groupModel,P=(I={source:I,oldGM:K.extend({},D),ui:l},D.dataIndx);0!=v._trigger("beforeGroupOption",null,I)&&(l.agg&&this.updateAgg(l.agg,D.agg),D.on&&P.length&&(!1===l.on||0===C)&&this.showRows(),K.extend(D,l),p&&p(),this.init(),this.setOption(),v._trigger("groupOption",null,I),!1!==d&&(v[_b(17)]({refresh:!1}),v.sort({header:!1})))},showRows:function(){this.that.options.dataModel.data.forEach(function(l){l.pq_hidden&&(l.pq_hidden=void 0)})},renderBodyCell:function(l,d){var _,p=this,v=d.checkbox,C=d.dataIndx.length-(p.isPivot()?1:0),D=d.titleIndx,I=D?d.indent:0,P=I*C,B="";return C&&(P+=I),function(U){var J=U.rowData,W=U.column,re=W[_b(306)];if(!U.Export)return re=re&&re.call(p.that,U)||U.formatVal||U.cellData,{text:((U=(B=v&&D&&(_=p.renderCB(v,J,d.cbId))?_[0]:B)&&(W.useLabel||d.useLabel))?"<label>":"")+B+(null==re?"":re)+(U?"</label>":""),style:"text-indent:"+P+"px;"}}},renderCell:function(l,d){var _=this[_b(442)](l,d),p=this[_b(443)](l,d),v=this[_b(444)](l);return function(C,D){C._renderG=function(I){var P=I.rowData,B=P.pq_gtitle;return D&&B?_(I):B||P[_b(9)]?v(I):d.titleIndx==I.dataIndx?p(I):void 0}}},renderSummary:function(l){var d=this.that,_=l.groupModel.dataIndx;return function(p){var v=p.rowData,C=p.column,D=C.summary;if(D&&(v=D[_[v.pq_level]]||D.type))return"function"==typeof(D=l[_b(445)][v])?D.call(d,p):("number"!=typeof(v=null==(v=p.formatVal)&&null==(v=p.cellData)?"":v)||C.format||parseInt(v)===v||(v=v.toFixed(2)),D?D.replace("{0}",v):v)}},updateformatVal:function(l,d,_){(_=this.that.columns[l=l.dataIndx[_]])&&_.format&&_!=d.column&&(d.formatVal=pq.format(_,d.cellData))},renderTitle:function(W,d){var _,p,v=this,C=v.that,D=W.rtl,I=d.checkbox,P=["pq-group-title-cell"],B=d.titleIndx,U=d.indent,J=(W=W.bootstrap).on,re=(W=(J?W.groupModel:d).icon,J?["glyphicon "+W[0],"glyphicon "+W[1]]:["ui-icon "+W[0],"ui-icon "+W[1]]);return function(he){var ie,ae,Me,Ce=he.rowData,Le=he.column,Ue=Le.useLabel;if(null!=he.cellData)return ie=Ce.pq_close,ae=Ce.pq_level,Me=d.title,v[_b(446)](d,he,ae),Me=null==(Me="function"==typeof(Me=Le[_b(306)]||Me[ae]||d[_b(447)])?Me.call(C,he):Me.replace("{0}",he.formatVal||he.cellData).replace("{1}",Ce.pq_items))?he.formatVal||he.cellData:Me,Le="pq-group-icon "+re[ie?1:0],he.Export?Me:(I&&B&&v.isCascade(d)&&(_=v.renderCB(I,Ce,d.cbId))&&(p=_[0],_[1]&&P.push(_[1])),{text:[(Ue=p&&(null!=Ue?Ue:d.useLabel))?"<label>":"","<span class='",Le,"'></span>",p,Me,Ue?"</label>":""].join(""),cls:P.join(" "),style:"text-align:"+(D?"right":"left")+";text-indent:"+U*ae+"px;"})}},triggerChange:function(){this.that._trigger("groupChange")},removeGroup:function(l){var d=this;d.option({dataIndx:d.that.options.groupModel.dataIndx.filter(function(_){return _!=l})},"","",function(){d[_b(418)]()})},refreshColumns:function(){for(var l,d,_,p=this.that,v=p.options,C=v.groupModel,D=C.on,I=C.fixCols,P=this.renderCell(v,C),B=p.columns,U=C.dataIndx,J=U.length,W=p.colModel,re=W.length;re--;)(l=W[re])._renderG&&delete l._renderG,l._nodrag&&(delete l._nodrag,delete l._nodrop),D&&(d=l.summary)&&d.type&&P(l);if(v.editor=D?this[_b(448)](v,C):void 0,D)if(C.titleIndx)P(l=B[C.titleIndx],!0);else{for(re=J-1;0<=re;re--)P(l=B[U[re]],!0);if(I&&!C[_b(12)])for(re=0;re<J;re++)(l=W[_=p.getColIndx({dataIndx:U[re]})])._nodrag=l._nodrop=!0,_!=re&&(p[_b(247)].moveColumn(_,re,!0),p.refreshCM(null,{group:!0}))}},saveState:function(){var l=this.nodeClose=this.nodeClose||{};this.fillState(l)},setSumCols:function(l){var d=[],_=[];return l=pq.objectify(l),this.that.colModel.forEach(function(p){var v=p.summary;v&&v.type&&(l[v=p.dataIndx]||(d.push(p),_.push(v)))}),this._sumCols=d,this._sumDIs=_,[d,_]},setOption:function(){this._init&&(this[_b(440)](),this[_b(23)].length=0,this.initmerge())},softRefresh:function(){var l=this.that;this.pdata=null,l.pdata.forEach(function(d){delete d.pq_hidden}),this[_b(441)](),this.initmerge(),l.refresh({header:!1})},toggleLevel:function(p,d){var _=(v=this.that.options.groupModel).collapsed,v=(p=K.inArray(p,v.dataIndx),pq.isCtrl(d)?"All":"");this[(_[p]?"expand":"collapse")+v](p)},trigger:function(P){var d,_,p,W=P.evt,v=P.rd,C=P.level,D=P.all,I=P.close,B=(J=(P=this.that).options.groupModel).dataIndx,U=J.collapsed,J=y[_b(414)](W,P);if(W={},v){if(_=v[B[d=v.pq_level]],J(W={level:d,close:I=!v.pq_close,group:_}))return!1;v.pq_close=I}else if(D){if(J(W={all:!0,close:I,level:C}))return!1;for(p=C;p<B.length;p++)U[p]=I}else if(null!=C){if(J(W={level:C,close:I}))return!1;U[C]=I}return P._trigger("group",null,W)},toggleRow:function(l,d){!1!==this.trigger({evt:d,rd:l=this.that.pdata[l]})&&this[_b(342)]()}}),G.pqGrid.prototype.Group=function(l){var d=this.iGroup;if(null==l)return d;d.expandTo(l.indx)}}(jQuery),function(K){var G=K.paramquery,A=G.pqGrid.prototype,y=A.options,l=(K(document).on("pqGrid:bootup",function(d,_){(_=_.instance).iDrag=new l(_)}),G.cDrag=function(d){var _=this,p=d.options,v=_.rtl=p.rtl,C=p.dragModel;C.on&&(_.that=d,p[_b(449)]=p[_b(449)]||-1,_.model=C,_.ns=".pq-drag",C.tmplDragN=_.rtlfy(v,C.tmplDragN),C.tmplDrag=_.rtlfy(v,C.tmplDrag),d.on("CMInit",_.onCMInit.bind(_)).on("create",_.onCreate.bind(_)))});A.Drag=function(){return this.iDrag},y.dragModel={afterDrop:function(){},beforeDrop:function(d,_){var p=this.Drag(),v=p.getUI().nodes,C=this,D=this.Tree(),I=this.Group();D.isOn()?C=D:I.isOn()&&(C=I),p.clean(),C[_b(364)](v)},diDrag:-1,dragNodes:function(d){return[d]},contentHelper:function(d,v){var p=v[0];return v=v.length,d.map(function(C){return p[C]}).join(", ")+(1<v?" ( "+v+" )":"")},clsHandle:"pq-drag-handle",clsDnD:"pq-dnd",clsNode:"pq-dnd-drag",iconAccept:_a(141),iconReject:_a(142),tmplDragN:_a(143),tmplDrag:_a(144),cssHelper:{opacity:.7,position:"absolute",height:25,width:200,overflow:"hidden",background:"#fff",border:"1px solid",boxShadow:"4px 4px 2px #aaaaaa",zIndex:1001},tmplHelper:_a(145)},l.prototype={addIcon:function(d){this.$helper.find(".pq-icon").attr("class","").addClass("pq-icon "+d)},addAcceptIcon:function(){this.addIcon(this.model.iconAccept)},addRejectIcon:function(){this.addIcon(this.model.iconReject)},getHelper:function(P){var _=this.that,p=this.model,v=p.clsNode,D=K(P.target).closest(_a(37)),C=(D=this.cellObj=_[_b(34)]({$td:D}),p.diHelper||[p.diDrag]),I=(D=D.nodes=p.dragNodes.call(_,I=D.rowData,P),p[_b(450)].call(_,C,D));return(P=this.$helper=K(p.tmplHelper)).find("span:eq(1)").html(I),D.forEach(function(B){_.addClass({rowData:B,cls:v})}),this[_b(451)](),P.addClass(_a(146)).css(p.cssHelper).data("Drag",this),P[0]},getUI:function(){return this.cellObj},grid:function(){return this.that},isSingle:function(){return 1==this.getData().length},onCMInit:function(){var d=this.that,_=this.model,p=_[_b(452)],v=d.columns[_.diDrag],C=v?_.tmplDrag:_.tmplDragN;(v||d.options.numberCell).postRender=function(D){p&&!p.call(d,D)||K(D.cell).prepend(C)}},onCreate:function(){var d=this,_=d.model,p={top:20},v=-1==_.diDrag;d.that.on(!0,"cellMouseDown",d[_b(372)].bind(d)),p[d.rtl?"right":"left"]=2,d.ele=d.that.$cont.children(":first").addClass(_.clsDnD+(v?" pq-drag-number":"")).draggable(K.extend({cursorAt:p,containment:"document",appendTo:"body"},_.options,{handle:"."+_.clsHandle,helper:d.getHelper.bind(d),revert:d.revert.bind(d)}))},onDrop:function(d,_,p){this.model[d].call(this.that,_,p)},clean:function(){var d=this;d.getUI().nodes.forEach(function(_){d.that[_b(72)]({rowData:_,cls:d.model.clsNode})})},revert:function(d){this.clean(),d||this.$helper.hide("explode",function(){K(this).remove()})},rtlfy:function(d,_){var p={left:"right",right:"left"};return d?_.replace(/left|right/g,function(v){return p[v]}):_},onCellMouseDown:function(d){var _=this.model;K(d[_b(32)].target).closest("."+_.clsHandle).length&&d[_b(29)]()},over:function(d,_){this[_b(453)]()},out:function(d,_){this[_b(451)]()}}}(jQuery),function(K){var G=K.paramquery,A=G.pqGrid.prototype,y=A.options,l=(K(document).on("pqGrid:bootup",function(d,_){(_=_.instance).iDrop=new l(_)}),A.Drop=function(){return this.iDrop},y.dropModel={accept:".pq-dnd",clsParent:"pq-dnd-parent",drop:function(d,re){function p(he,ie){var ae,Me,Ce;(J||ie)&&(ie=P.iDrop.parent,(Ce=(Me=he[_b(454)](ie)).length)&&(ae=J?J==ie?W?null:0:Me.indexOf(J)+(W?0:1):Ce),C?he.moveNodes(D,ie,ae):he.addNodes(D,ie,ae))}var v,C,D,I=re.helper.data("Drag"),P=this,B=P.Group(),U=P.Tree(),J=re.rowData,W=re.ratioY()<=.5;re=null==(re=re.rowIndx)?re:re+(W?0:1),I&&(v=I.getUI(),C=I.grid()==P,D=v.nodes,B.isOn()?p(B):U.isOn()?p(U,!0):C?P.moveNodes(D,re):P.addNodes(D,re))},getParent:function(d,_){var p,v,C=_.rowData,D=this.options,I=D.dropModel.divider,P=this.Group(),B=P.isOn(),U=this.Tree(),J=U.isOn();if(C)return J?v=I?(p=(J=this.widget()).offset().left,v=(_=_.helper).offset().left,(D.rtl?p+J.width()-v-_.width()>I:I<v-p)?C:U.getParent(C)):U.getParent(C):B&&(v=P.getParent(C)),v}},G.cDrop=function(d){var _=d.options;(this.model=_.dropModel).on&&(this.that=d,this.rtl=_.rtl,this.ns=".pq-drop",d.on("create",this.onCreate.bind(this)))});l.prototype={addUI:function(d,_,p){var v=this;d.$cell=p,d.ratioY=function(){return v.ratioY(_,p)},K.extend(d,v.that[_b(34)]({$td:p}))},callFn:function(d,_,p){if(d=this.model[d])return d.call(this.that,_,p)},feedback:function(d,_){var p,v,C;_.length&&(p=(C=this.getCellY(_))[0],v=this.that.$cont,d=this.ratioY(d,_),_=v.offset().left,C=C[1],this.$feedback=this.$feedback||this.newF(),this.$feedback.css({top:d<=.5?p-1:C-1,left:_,width:v[0][_b(63)],zIndex:1e4}),v.css("cursor","copy"))},getCell:function(d){return d.closest(_a(37))},getCellY:function(d){var _=d.offset().top;return[_,_+d[0][_b(41)]]},getDrag:function(d){return d.helper.data("Drag")},isOn:function(){return this.model.on},isOver:function(){},newF:function(){return K(_a(147)).appendTo(document.body)},onCreate:function(){this.that.$cont.droppable(K.extend({tolerance:"pointer"},this.model.options,{accept:this.model.accept,over:this.onOver.bind(this),out:this.onOut.bind(this),drop:this.onDrop.bind(this)}))},onOver:function(d,_){var p=this,v=p.model.divider,C=p.Drag=p.getDrag(_);_.draggable.on("drag.pq",p.onDrag.bind(p)),v&&(p.$left=K(_a(148)+(p.rtl?"right:":"left:")+v+_a(149)).appendTo(p.that.$cont)),C&&C.over(d,_),p.isOver=function(){return!0},p.callFn("over",d,_)},onOut:function(d,_){_.draggable.off("drag.pq"),this[_b(455)]();var p=this.getDrag(_),v=this.$left;v&&v.remove(),p&&p.out(d,_),this.isOver=function(){},this.callFn("out",d,_)},setParent:function(d){var _=this.that,p=this.model.clsParent,v=this.parent;v!=d&&(v&&_[_b(72)]({rowData:v,cls:p}),d&&_.addClass({rowData:d,cls:p})),this.parent=d},setDeny:function(d,_,p){var v=this.Drag;this.denyDrop=!1===this.callFn("isDroppable",d,_),this.denyDrop?(v&&v.out(),this[_b(455)]()):(v&&v.over(),this.feedback(d,p),this.setParent(this.callFn("getParent",d,_)))},onDrag:function(d,_){var p=pq[_b(456)](d),v=this.getCell(p);(v.length||this.that.$cont[0].contains(p[0]))&&(this.addUI(_,d,v),this.setDeny(d,_,v))},onDropX:function(d,_){function p(I){if(D&&D.grid()!=v)D.onDrop(I,d,_);else try{C.draggable("instance").options[I].call(C[0],d,_)}catch(P){}}var v=this.that,C=_.draggable,D=_.helper.data("Drag");p("beforeDrop"),this.callFn("drop",d,_),this.setParent(),p("afterDrop")},onDrop:function(d,_){var p,v=pq[_b(456)](d);this.onOut(d,_),this.denyDrop||((p=this.getCell(v)).length||this.that.$cont[0].contains(v[0]))&&(this.addUI(_,d,p),this.onDropX(d,_))},onMouseout:function(){this[_b(455)]()},onMouseup:function(){this[_b(455)](),K(document).off(this.ns),this.that.$cont.off(this.ns)},ratioY:function(d,_){if(_.length)return(d.pageY-(_=(d=this.getCellY(_))[0]))/(d[1]-_)},removeFeedback:function(){var d=this;d.$feedback&&(d.$feedback.remove(),d.$feedback=null),d.that.$cont.css("cursor",""),requestAnimationFrame(function(){d.setParent()})}}}(jQuery),function(K){var G=K.paramquery,A=(G.pqGrid.defaults[_b(457)]={preInit:function(y){if(pq.isCtrl(y))return!1},init:function(y,l){var d,_;l.$td&&(d={r1:l.rowIndx,c1:l.colIndx,rc:1,cc:1},-1==(_=this.Selection()).indexOf(d)&&(_.removeAll(),this.Range(d).select()),this.focus(l))}},K(document).on("pqGrid:bootup",function(y,l){(l=l.instance).iContext=new A(l)}),G.cContext=function(y){var l=y.options;this.model=l[_b(457)],this.that=y,this.ns=".pq-cmenu",this.rtl=l.rtl,y.on("context",this.onContext.bind(this)).on("destroy",this.removeMenu.bind(this))});A.prototype={createMenu:function(y){y=y.filter(function(p){return null!=p});var l,d=this,_="";return y.forEach(function(p,v){_+=d[_b(458)](p,v)}),(l=K("<div dir='"+(d.rtl?"rtl":"ltr")+_a(150)+_+"</table></div>").appendTo(document.body)).find(".pq-cmenu-item").each(function(p,v){K(v).data("item",y[p])}),l.on("mouseover",d[_b(459)].bind(d)).on("remove",d.onRemove(d)),l},get$Item:function(y){return K(y.target).closest(".pq-cmenu-item")},getItem:function(y){return this.get$Item(y).data("item")},getItemHtml:function(y,l){var d,_;return"separator"==y?"<tr class='pq-cmenu-item'><td colspan=4 class='pq-bg-3' style='height:1px;padding:0;'></td></td>":(d=y.style,_=y.tooltip,_a(151)+(y.disabled?"pq_disabled":"")+" "+(y.cls||"")+"' indx="+l+"><td><span class='"+(y.icon||"")+"' /></td><td "+(d?'style="'+d+'"':"")+" "+(_?'title="'+_+'"':"")+">"+y.name+"</td><td>"+(y.shortcut||"")+_a(152)+(y.subItems?_a(153)+(this.rtl?"w":"e"):"")+"' /></td></tr>")},onContext:function(y,l){if(this.model.on)return this.showMenu(y,l)},onRemove:function(y){return function(){K(this).find(".pq-cmenu-item").each(y[_b(460)])}},onMouseDown:function(y){this.getItem(y)||this.removeMenu()},onclickDoc:function(y){var l,d=this.getItem(y);d&&!d.disabled&&(l=d.action)&&!1!==l.call(this.that,y,this.ui,d)&&this.removeMenu()},onMouseOver:function(d){var l=this.rtl,_=this.getItem(d);d=this.get$Item(d),_=(_||{}).subItems,d.siblings().each(this[_b(460)]),_&&_.length&&!d[0].subMenu&&((_=this.createMenu(_)).position({my:l?"right top":"left top",at:l?"left top":"right top",of:d,collision:"flipfit"}),d[0].subMenu=_)},removeMenu:function(){this.$menu&&(this.$menu.remove(),delete this.$menu,K(document.body).off(this.ns))},removeSubMenu:function(y,l){var d="subMenu";l[d]&&(l[d].remove(),delete l[d])},showMenu:function(y,l){var d=this,_=d.rtl,p=d.model,v=d.ns,C=d.that,D=d.$menu,I="function"==typeof(I=p[(I=l.type)+"Items"]||(I?p.items:p.miscItems))?I.call(C,y,l):I;if(D&&d.removeMenu(),I&&I.length&&!1!==p.preInit.call(C,y,l))return p.init.call(C,y,l),d.ui=l,(D=d.$menu=d.createMenu(I)).position({my:(_?"right":"left")+" top",of:y,collision:"fit"}),K(document.body).on("click"+v,d.onclickDoc.bind(d)).on("mousedown"+v+" touchstart"+v,d[_b(461)].bind(d)),!1}}}(jQuery),function(K){K(document).on("pqGrid:bootup",function(d,_){(_=_.instance).iAnim=new A(_)});var G=K.paramquery,A=G.cAnim=function(d){var _=this.model=d.options.animModel;this.grid=d,this.nodes=[],_.on&&d.on(_.events,this.onBefore.bind(this))},y=G.pqGrid.prototype,l=y.options;y.Anim=function(){return this.iAnim},l.animModel={duration:290,events:_a(154),eventsH:_a(155)},G.mixAnim={cleanUp:function(){(this.data||[]).forEach(function(d){d.pq_top=d.pq_hideOld=void 0}),this.data=this.render=null},stop:function(){this.nodes.forEach(function(d){d.stop()}),this.nodes=[]}},A.prototype=K.extend({isActive:function(){return this._active},onBefore:function(d,_){if(!d[_b(33)]()&&!this.data){var p,v=this,C=(d=v.grid).iRenderB,D=v.data=C.data,I=v.render=[];try{v.htTbl=C.dims.htTbl,C.eachV(function(B,U){p=C.get$Row(U),B.pq_render=1,I.push([B,p.clone(),p.map(function(J,W){return W.parentNode})])}),D.forEach(function(B,U){B.pq_top=C.getTop(U),B.pq_hideOld=B.pq_hidden}),d.one("refresh",v.oneRefresh.bind(v)),setTimeout(function(){v.cleanUp()})}catch(B){v.data=null}}},oneRefresh:function(){var d,_,p,v,C,D,I;this.data&&(_=(d=this).grid.iRenderB,p=d.model.duration,v=K([_.$tbl_left[0],_.$tbl_right[0]]),C=d.htTbl,D=_.dims.htTbl,d.stop(),d._active=!0,D<C&&v.css("height",C),setTimeout(function(){v.css("height",_.dims.htTbl),d._active=!1},p),_.eachV(function(P,B){delete P.pq_render;var U,J=_.getTop(B),W=P.pq_top;W==J&&!P.pq_hideOld||(I=_.get$Row(B),B=null==W||P.pq_hideOld?(U={opacity:0},{opacity:1}):(U={top:W},{top:J}),I.css(U).animate(B,p),d.nodes.push(I))}),d.render.forEach(d.removeRows.bind(d)),d.cleanUp())},removeRows:function(d){var _,p=d[0],v=p.pq_ri,C=this.model.duration,D={opacity:1,top:p.pq_top};if(p.pq_render){if(delete p.pq_render,(_=d[1].each(function(I,P){K(P).removeAttr("id").appendTo(d[2][I]).children().removeAttr("id")})).css(D),null==v||p.pq_hidden)D={opacity:0};else try{D={top:this.grid.iRenderB.getTop(v)}}catch(I){D={opacity:0}}_.animate(D,C,function(){this.parentNode&&this.parentNode[_b(121)](this)}),this.nodes.push(_)}}},G.mixAnim)}(jQuery),function(K){K(document).on("pqGrid:bootup",function(y,l){(l=l.instance).iAnimH=new A(l)});var G=K.paramquery,A=G.cAnimH=function(y){var l=y.options,d=this.model=l.animModel;this.grid=y,this.rtl=l.rtl?"right":"left",this.nodes=[],d.on&&y.on(d.eventsH,this[_b(462)].bind(this))};G.pqGrid.prototype.AnimH=function(){return this.iAnimH},A.prototype=K.extend({get$Col:function(){var y=this.grid,l=y.iRenderB,d=y[_b(115)],_=y.iRenderSum,p=l[_b(463)](),v=d[_b(463)](),C=_[_b(463)]();return function(D){return l.get$Col(D,p).add(d.get$Col(D,v)).add(_.get$Col(D,C))}},onBeforeCol:function(y){if(!y[_b(33)]()&&!this.data){var l,d=this.data=(y=this.grid)[_b(176)](),_=this.get$Col(),p=y.iRenderB,v=this.render=[];try{d.forEach(function(D,I){D.pq_hideOld=D.hidden,D.pq_top=p.getLeft(I)})}catch(D){return void this.cleanUp()}p.eachH(function(D,I){l=_(I),D.pq_render=1,v.push([D,l.clone(),l.map(function(P,B){return B.parentNode.id})])}),y.one("softRefresh refresh",this[_b(464)].bind(this))}},oneRefreshCol:function(){var y,l,d,_,p;this.data&&(l=(y=this).grid.iRenderB,d=y.model.duration,_=y.get$Col(),y.stop(),l.eachH(function(v,C){delete v.pq_render;var D=l.getLeft(C),I=v.pq_top,P=y.rtl,B={opacity:0},U={opacity:1},J={};I==D&&!v.pq_hideOld||(p=_(C),null==I?p.css(B).animate(U,d):v.pq_hideOld?(B[P]=I,U[P]=D,p.css(B).animate(U,d)):(J[P]=D,p.css(P,I).animate(J,d)),y.nodes.push(p))}),y.render.forEach(y.removeCols.bind(y)),y.cleanUp())},removeCols:function(y){var l,d=y[0],_=this.model.duration,p=(v=this.grid).iRenderB,v=v.colIndxs[d.dataIndx];d.pq_render&&(delete d.pq_render,l=y[1].each(function(C,D){K(D).removeAttr("id").appendTo(document[_b(465)](y[2][C]))}),d=null==v||d.hidden?(l.css("opacity",1),{opacity:0}):{left:p.getLeft(v)},l.animate(d,_,function(){this.parentNode&&this.parentNode[_b(121)](this)}),this.nodes.push(l))}},G.mixAnim)}(jQuery),function(K){var G=K.paramquery,A=G.pqGrid.defaults,y=(K(document).on("pqGrid:bootup",function(l,d){(d=d.instance)[_b(466)]=new y(d)}),A.fillHandle="all",A.autofill=!0,G[_b(467)]=function(l){var d=this;d.that=l,d.rtl=l.options.rtl,l.on("selectChange",d[_b(468)](d)).on("selectEnd",d[_b(469)](d)).on("assignTblDims",d.onRefresh(d)).on("keyDown",d.onKeyDown.bind(d))});y.prototype={getLT:function(l,d,_,p){return Math.min((l-=d/2)+d,_["offset"+p])-d},create:function(){var l,d,_,p=this.that;this.locked||(this.remove(),1===(_=p.Selection().address()).length&&(d=(_=_[0]).r2,_=_.c2,l="parentNode",d=p.iMerge[_b(137)](d,_,!0),(_=p.getCell(d)).length&&!1!==p._trigger("beforeFillHandle",null,d)&&(l=(_=_[0][l][l])[l],p=p.iRenderB[_b(310)](d[_b(75)],d.colIndx),d=this.getLT(p[2],10,_,"Width"),p={position:"absolute",top:this.getLT(p[3],10,_,"Height"),height:10,width:10,background:"#333",cursor:"crosshair",border:"2px solid #fff",zIndex:1},_=K(_a(156)).appendTo(l),p[this.rtl?"right":"left"]=d,_.css(p),this.$wrap=_,this[_b(265)](),this[_b(470)]())))},onSelectChange:function(l){return function(){l.remove()}},onSelectEnd:function(l){return function(){this.options.fillHandle&&l.create()}},onRefresh:function(l){var d;return function(){this.options.fillHandle?(clearTimeout(d),d=setTimeout(function(){l.that.element&&l.create()},50)):l.remove()}},remove:function(){var l=this.$wrap;l&&l.remove()},setDoubleClickable:function(){var l=this.$wrap;l&&l.on("dblclick",this.onDblClick(this.that,this))},setDraggable:function(){var l=this.$wrap;l&&l.draggable({helper:function(){return _a(157)},appendTo:this.that.$cont,start:this.onStart.bind(this),drag:this.onDrag.bind(this),stop:this.onStop.bind(this)})},patternDate:function(l){var d=this;return function(_){var p=new Date(l);return p.setDate(p.getDate()+(_-1)),d.formatDate(p)}},formatDate:function(l){return l.getMonth()+1+"/"+l.getDate()+"/"+l[_b(471)]()},patternDate2:function(l,v){var _,p=new Date(l),C=(v=new Date(v),this),D=v.getDate()-p.getDate(),I=v.getMonth()-p.getMonth(),P=v[_b(471)]()-p[_b(471)]();return!I&&!P||!D&&!I||!P&&!D?function(B){var U=new Date(l);return D?U.setDate(U.getDate()+D*(B-1)):I?U.setMonth(U.getMonth()+I*(B-1)):U[_b(472)](U[_b(471)]()+P*(B-1)),C.formatDate(U)}:(p=Date.parse(p),_=Date.parse(v)-p,function(B){return B=new Date(p+_*(B-1)),C.formatDate(B)})},getDT:function(l){for(var d,_,p,v=l.length,C=0,D=pq.valid;C<v;C++){if(D.isFloat(d=l[C])?p="number":D.isDate(d)&&(p="date"),_&&_!=p)return"string";_=p}return p},pattern:function(l){if("string"==(C=this.getDT(l))||!C)return!1;var d,_,p,C,v=l.length;return(C="date"===C)||(l=l.map(function(D){return+D})),2===v?C?this[_b(473)](l[0],l[1]):(_=l[0]-(d=l[1]-l[0]),function(D){return d*D+_}):3===v&&(p=l[0]-(d=(l[2]-2*l[1]+l[0])/2)-(_=l[1]-l[0]-3*d),function(D){return d*D*D+_*D+p})},autofillVal:function(he,d,_,p){var v,C,D,I,P,B=this.that,U=he.r1,J=he.c1,W=he.r2,re=he.c2,ie=(he=d.r1,d.c1),ae=d.r2,Me=d.c2,Ce=[];if(p){for((I={r1:U,r2:W}).c1=ie<J?ie:re+1,I.c2=ie<J?J-1:Me,P=ie-J,C=ie;C<=Me;C++)if(P++,C<J||re<C)for(v=0,D=U;D<=W;D++)Ce.push(_[v](P,C)),v++}else for((I={c1:J,c2:re}).r1=he<U?he:W+1,I.r2=he<U?U-1:ae,P=he-U,C=he;C<=ae;C++)if(P++,C<U||W<C)for(v=0,D=J;D<=re;D++)Ce.push(_[v](P,C)),v++;return B.Range(I).value(Ce),B.focus(),!0},autofill:function(l,d){var _,p,v,C,D,I,P,B,U=this.that,J=U.colModel,W=U.get_p_data(),re=[],he=l.r1,ie=l.c1,ae=l.r2,Me=l.c2,Ce=d.c1!=ie||d.c2!=Me;if(Ce){for(D=he;D<=ae;D++){if(U._trigger("autofillSeries",null,P={sel:{r:D,c:ie},x:!0}),!(B=P.series))return;re.push(B)}return this[_b(474)](l,d,re,Ce)}for(I=ie;I<=Me;I++){for(p=(_=J[I]).dataType,C=_.dataIndx,v=[],D=he;D<=ae;D++)v.push(W[D][C]);if(U._trigger("autofillSeries",null,P={cells:v,sel:{r1:he,c:I,r2:ae,r:he}}),!(B=P.series||this.pattern(v,p)))return;re.push(B)}return this[_b(474)](l,d,re)},onKeyDown:function(l){var d,_;!this.oldAF&&pq.isCtrl(l)&&(_=(d=this).that.options,d.oldAF=_.autofill,_.autofill=!1,K(document.body).one("keyup",function(){_.autofill=d.oldAF,delete d.oldAF}))},onStop:function(){var l=this.that,d=l.options.autofill,_=this.sel,p=l.Selection().address()[0];_.r1==p.r1&&_.c1==p.c1&&_.r2==p.r2&&_.c2==p.c2||d&&this.autofill(_,p)||(l.Range(_).copy({dest:p}),l.focus()),this.locked=!1},onStart:function(){this.locked=!0,this.sel=this.that.Selection().address()[0]},onDrag:function(W){var d,_,p,v,C,D,I=this.that,P="all"==(U=I.options.fillHandle),B=P||"horizontal"==U,U=P||"vertical"==U,J=W.clientX-10;W=W.clientY,J=document[_b(38)](J,W),(W=K(J).closest(".pq-grid-cell")).length&&(J=I[_b(34)]({$td:W}),d=(W=this.sel).r1,v={r1:d,c1:_=W.c1,r2:p=W.r2,c2:W=W.c2},C=function(re,he){v[re]=he,I.Range(v).select()},D=J.rowIndx,J=J.colIndx,P&&D<=p&&d<=D||B&&!U?W<J?C("c2",J):J<_&&C("c1",J):U&&(p<D?C("r2",D):D<d&&C("r1",D)))},onDblClick:function(l,d){return function(){var _=l.options;if("all"==(p=_.fillHandle)||"vertical"==p){for(var v,p,C=(p=l.Selection().address()[0]).c2,D=p.r2+1,I=_.dataModel.data,P=l[_b(176)]()[C].dataIndx;v=I[D];){if(null!=v[P]&&""!==v[P]){D--;break}D++}d.onStart(),l.Range({r1:p.r1,c1:p.c1,r2:D,c2:C}).select(),d.onStop()}}}}}(jQuery),function(K){K(document).on("pqGrid:bootup",function(A,y){new G(y.instance)});var G=K.paramquery.cScroll=function(A){this.that=A,this.ns=".pqgrid-csroll",this.rtl=A.options.rtl,A.on("create",this.onCreate.bind(this))};G.prototype={onCreate:function(){var A=this.that,y=A.iDrop&&A.iDrop.isOn();K(y?document:A.$cont).on("mousedown",this[_b(461)].bind(this))},onMouseDown:function(l){var y=this.that,d=(l=K(l.target),(this.$draggable=l.closest(".ui-draggable")).length),_=this.ns;(d||l.closest(y.$cont).length)&&(y=l.closest(".pq-fill-handle").length,K(document).on("mousemove"+_,this[d&&!y?"onMouseMove":"process"].bind(this)).on("mouseup"+_,this.onMouseUp.bind(this)))},onMouseMove:function(A){var y=this.that;(this.capture||pq[_b(456)](A).closest(y.$cont).length&&y.iDrop.isOver())&&(this.capture=!0,this.process(A))},onMouseUp:function(){K(document).off(this.ns),this.capture=!1},process:function(v){var l,d=(l=this.that.$cont)[0][_b(41)],_=l[0][_b(40)],y=(l=l.offset()).top,p=v.pageY,C=p-(d=y+d),D=(v=v.pageX)-(_=(l=l.left)+_),I=y-p,P=l-v;l<v&&v<_&&(0<C||0<I)?0<C?this.scrollV(C,!0):0<I&&this.scrollV(I):y<p&&p<d&&(0<D?this.scrollH(D,!0):0<P&&this.scrollH(P))},scrollH:function(A,y){this.scroll(A,this.rtl?!y:y,!0)},scrollV:function(A,y){this.scroll(A,y)},scroll:function(A,y,l){var d=this.that.iRenderB,p=(_=d[_b(475)]()[0])[l?"scrollWidth":"scrollHeight"],_=pq[l?"scrollLeft":"scrollTop"](_);A=Math.pow(A,p<1e3?1:1+(p-1e3)/p),d[l?"scrollX":"scrollY"](p=_+(y?A:-A))}}}(jQuery),function(){var K=jQuery.paramquery;K.cFormula=function(G){var A=this;A.that=G,A.oldF=[],G.one("ready",function(){G.on("CMInit",A.onCMInit.bind(A))}).on("beforePivotSummary",A[_b(476)].bind(A)).on("dataAvailable",A.onDA.bind(A)).on(!0,"change",A.onChange.bind(A))},K.cFormula.prototype={onCMInit:function(){this[_b(477)](this.oldF,this.formulas())&&this[_b(476)]()},callRow:function(G,A,y){var l=this.that,d=0;if(G)for(;d<y;d++){var _=A[d],p=_[0];G[p.dataIndx]=_[1].call(l,G,p,_[2])}},onDA:function(){this[_b(476)]()},isFormulaChange:function(G,A){var y=!1,l=0,d=G.length;if(d==A.length){for(;l<d;l++)if(G[l][1]!=A[l][1]){y=!0;break}}else y=!0;return y},calcMainData:function(){var G=this[_b(478)](),A=this.that,y=G.length;if(y){for(var l=A.options.dataModel.data,d=l.length;d--;)this.callRow(l[d],G,y);A._trigger("formulaComputed")}},onChange:function(G,D){function y(I){d.callRow(I.rowData,p,v)}var l,d=this,_=d.that,p=d.formulas(),v=p.length,C=D.addList;D=D.updateList,v&&(C.forEach(y),D.forEach(y),1!=D.length||C.length||(l=D[0],p.forEach(function(I){_[_b(171)]({rowIndx:l.rowIndx,dataIndx:I[0].dataIndx})})))},formulas:function(){var G,A,y,l=this.that,d=[],_=l.colIndxs;return(l.options.formulas||[]).forEach(function(p){(G=l.getColumn({dataIndx:y=p[0]}))&&(A=p[1])&&d.push([G,A,_[y]])}),d},formulaSave:function(){var G=this.formulas();return this.oldF=G}}}(),function(K){var G=K.paramquery,A=(G.pqGrid.defaults.treeModel={cbId:"pq_tree_cb",source:"checkboxTree",childstr:"children",iconCollapse:[_a(133),"ui-icon-triangle-1-e"],iconFolder:["ui-icon-folder-open",_a(158)],iconFile:"ui-icon-document",id:"id",indent:18,parentId:"parentId",refreshOnChange:!0},G.pqGrid.prototype.Tree=function(){return this.iTree},K(document).on("pqGrid:bootup",function(y,l){(l=l.instance).iTree=new A(l)}),G.cTree=function(y){var l=this;l.Model=y.options.treeModel,l.that=y,l.fns={},l.init(),l.isTree=!0,l.cache={},l.chkRows=[],Object[_b(45)](l.Model,"nodeClose",{get:function(){return l.fillState({})},set:function(d){l.nodeClose=d}})});A.prototype=K.extend({},pq.mixin.ChkGrpTree,pq.mixin.GrpTree,{addNodes:function(y,l,d){var _,p,v,C,D,I=this,P=I.that,B=I.Model,U=(U=P.options.dataModel).data,J=I.parentId,W=I.childstr,re=I.id,he={},ie=[],ae=0,Me=I.cache,Ce=[];if(y.forEach(function(Le){C=Le[J],D=D||Me[C],I.eachChild(Le,function(Ue,ce){var lt=Ue[re];Me[lt]||he[lt]||(he[lt]=Ue,ce&&(Ue[J]=ce[re]),ie.push(Ue))},l||Me[C])}),ie.forEach(function(Le){he[C=Le[J]]||Me[C]||delete Le[J]}),v=(p=(y=((l=l||D)||{})[W]||I.getRoots()||[]).length)&&0!=d?null==d||p<d?y[p-1]:y[d-1]:l,_=U.indexOf(v)+1,p=ie.length){for(;ae<p;ae++)Ce.push({newRow:v=ie[ae],rowIndx:_++});P[_b(182)]({addList:Ce,checkEditable:!1,source:"addNodes",history:B.historyAdd}),I[_b(17)]()}},updateId:function(y,l){var d=this.id,_=this.parentId,p=y[d],v=this.cache;v[l]||(v[y[d]=l]=y,delete v[p],(this[_b(454)](y)||[]).forEach(function(C){C[_]=l}))},collapseAll:function(y){this[y?"expandNodes":"collapseNodes"](this.that.options.dataModel.data)},collapseNodes:function(y,l,d){for(var _,p=0,v=this.that,C=y.length,D=[],I=!d;p<C;p++)this.isFolder(_=y[p])&&this[_b(479)](_)!==I&&D.push(_);if(D.length&&!(d={close:I,nodes:D})!==v._trigger("beforeTreeExpand",l,d)){for(C=D.length,p=0;p<C;p++)(_=D[p]).pq_close=I;v._trigger("treeExpand",l,d),this[_b(429)](!1),this[_b(17)]()}},deleteNodes:function(y){var l,_=this.that,p=this.Model,v=0,C={},D=this.id,I=[];if(y){for(l=y.length;v<l;v++)this.eachChild(y[v],function(P){var B=P[D];C[B]||(C[B]=1,I.push({rowData:P}))});_[_b(182)]({deleteList:I,source:"deleteNodes",history:p[_b(480)]}),this[_b(17)]()}},makeLeaf:function(y){y[this.childstr]=y.pq_close=y[_b(11)]=void 0},expandAll:function(){this[_b(481)](!0)},expandNodes:function(y,l){this[_b(482)](y,l,!0)},expandTo:function(y){for(var l=[];y.pq_close&&l.push(y),y=this.getParent(y););this[_b(483)](l)},exportCell:function(y,l){for(var d="",_=0;_<l;_++)d+="- ";return d+(null==y?"":y)},filter:function(y,l,d,_,p,v,C){function D(ie,ae){B=ae||B,C?ie.pq_hidden=ie.pq_filter=!ae:(ae?p:v).push(ie)}for(var I,P,B,U,J=this.childstr,W=this.Model[_b(484)],re=0,he=y.length;re<he;re++){if(P=!1,U=(I=y[re])[J]){if(W&&d.isMatchRow(I,l,_)){this.eachChild(I,function(ie){D(ie,!0)}),B=!0;continue}(P=this.filter(U,l,d,_,p,v,C))&&D(I,!0)}P||D(I,d.isMatchRow(I,l,_))}return B},getFormat:function(){for(var y,l,d=this.that.options.dataModel.data,_=0,p=d.length,v=this.parentId,C=this.childstr;_<p&&null==(y=d[_])[v];_++)if((l=y[C])&&l.length)return this.getParent(l[0])==y?"flat":"nested";return"flat"},getLevel:function(y){return y.pq_level},_groupById:function(y,l,d,_,p){for(var v=this.childstr,C=0,D=d.length;C<D;C++){var I=d[C],P=I[l];I.pq_level=p,y.push(I),(P=_[P])?(I[v]=P,this._groupById(y,l,P,_,p+1)):null==I.pq_close&&!I[v]||(I[v]=[])}},groupById:function(y){for(var l,d,_,p=this.id,v=this.parentId,C={},D=[],I=0,P=y.length;I<P;I++)(d=(d=C[l=null==(l=(_=y[I])[v])?"":l])?d:C[l]=[]).push(_);return this._groupById(D,p,C[""]||[],C,0),D},init:function(){var y=this,l=y.that,d=l.options,_=y.Model,p=_.cbId,v=y.dataIndx=_.dataIndx;y.cbId=p,y.prop="pq_tree_prop",y.id=_.id,y.parentId=_.parentId,y.childstr=_.childstr,y.onCMInit(),v?y._init||(y.on("CMInit",y.onCMInit.bind(y)).on("dataAvailable",y[_b(485)].bind(y)).on("dataReadyAfter",y[_b(486)].bind(y)).on("beforeCellKeyDown",y[_b(487)].bind(y)).on("customSort",y[_b(438)].bind(y)).on("customFilter",y[_b(488)].bind(y)).on("clearFilter",y[_b(489)].bind(y)).on("change",y.onChange(y,l,_)).on("cellClick",y[_b(371)].bind(y)).on("refresh refreshRow",y.onRefresh(y,_)).on("valChange",y.onCheckbox(y,_)).on("refreshHeader",y[_b(302)].bind(y)).on("beforeCheck",y[_b(305)].bind(y)),y[_b(429)](!0),y._init=!0):y._init&&(y.off(),y._init=!1),y._init&&(d.groupModel.on=_.summary)},initData:function(){var y=this.that.options.dataModel;y.data=this["flat"==this.getFormat()?"groupById":"flatten"](y.data),this.buildCache()},isCollapsed:function(y){return!!y.pq_close},isOn:function(){return null!=this.Model.dataIndx},moveNodes:function(y,l,ut,_){var p,v,C,D,I,P,B,U=this,J=arguments,W=U.that,re=ut,he=U.parentId,ie=U.id,ae=U.childstr,Me=U.Model,Ce=(Ce=W.options).dataModel,Le=U.getRoots(),Ue=!_,ce=l?l[ae]=l[ae]||[]:Le,lt=ce.length,qe=U[_b(435)](y),De=(ut=null==ut||lt<=ut?lt:ut,ce);if(l&&(v=l[ie]),P=qe.length){if(W._trigger("beforeMoveNode",null,{args:J}),Ue&&1<P)for(p=(C=U.getParent(B=qe[0]))?C[ae]:Le,D=p.indexOf(B),I=1;I<P;I++)if(p[I+D]!=qe[I]){Ue=!1;break}for(I=0;I<P;I++)p=(C=U.getParent(B=qe[I]))?C[ae]:Le,D=p.indexOf(B),C==l?ut=pq.moveItem(B,De,D,ut):(De.splice(ut++,0,B),p.splice(D,1)),Me[_b(490)]&&C&&U.isEmpty(C)&&U.makeLeaf(C),B[he]=v;Me[_b(491)]&&Ue&&W.iHistory.push({callback:function(je){var Wt=D;l==C&&re<Wt&&(Wt+=1),U.moveNodes(y,je?l:C,je?re:Wt,!0)}}),Ce.data=U.flatten(Le),W._trigger("moveNode",null,{args:J}),W[_b(17)]()}},off:function(){var y,l=this.fns,d=this.that;for(y in l)d.off(y,l[y]);this.fns={}},on:function(y,l){return this.fns[y]=l,this.that.on(y,l),this},onCellClick:function(y,l){l.dataIndx==this.dataIndx&&K(y[_b(32)].target).hasClass("pq-group-icon")&&(pq.isCtrl(y)?this[l.rowData.pq_close?"expandAll":"collapseAll"]():this.toggleNode(l.rowData,y))},onBeforeCellKeyDown:function(C,l){var d,_=this.that,p=l.rowData,v=l.dataIndx,D=(C=C.keyCode,K.ui.keyCode);if(v==this.dataIndx)return this.isFolder(p)&&(d=p.pq_close,C==D.ENTER&&!_.isEditable({rowIndx:p.pq_ri,dataIndx:v})||!d&&C==D.LEFT||d&&C==D.RIGHT)?(this.toggleNode(p),!1):C==D.SPACE&&(v=_.getCell(l).find(_a(159))).length?(v.click(),!1):void 0},hasSummary:function(){var y=this.Model;return y.summary||y[_b(18)]},onChange:function(y,l,d){return function(_,D){var v=D.source||"",C=D.addList.length,I=(D=D.deleteList).length;-1==v.indexOf("checkbox")&&("undo"!=v&&"redo"!=v||!C&&!I?y.hasSummary()&&d[_b(492)]&&!C&&!I?(y[_b(317)](!0),l.refresh()):"addNodes"!=v&&"deleteNodes"!=v||y[_b(493)]():y[_b(493)](),d[_b(490)]&&D.forEach(function(P){(P=y.getParent(P.rowData))&&y.isEmpty(P)&&y.makeLeaf(P)}))}},clearFolderCheckbox:function(y){var l=this,d=l.cbId;y.forEach(function(_){l.isFolder(_)&&delete _[d]})},onClearFilter:function(y,l){return this[_b(494)](l.data),l.data=this.groupById(l.data),!1},onCustomFilter:function(y,l){var _=this.that,d=this.groupById(l.data),p=(_=_[_b(159)],l.filters),v=[],C=[],D=l.mode;return this.filter(this.getRoots(d),p,_,D,v,C,l.hideRows),l.dataTmp=this.groupById(v),l.dataUF=C,this[_b(494)](l.dataTmp),!1},onDataAvailable:function(){this.initData()},refreshSummary:function(y){this.summaryT(),this.that.iRefresh.addRowIndx(),y&&this[_b(495)]()},onDataReadyAfter:function(){var y=this.that.options.dataModel,l=this.Model;!this.hasSummary()||l[_b(496)]&&l[_b(18)]&&y.dataUF.length||this[_b(317)](),this[_b(495)](),this.isCascade(l)&&this[_b(436)]()},option:function(y,l){var d=this.that,_=this.Model,p=_.dataIndx;K.extend(_,y),y=_.dataIndx,this[_b(14)](),this.init(),!p&&y&&this.initData(),!1!==l&&d[_b(17)]()},renderCell:function(y,l){return function(d){var _,p,v,C,D=d.rowData,I=y.that,ae=l.indent,P=d.column,B=P[_b(306)]||l.render,U=l[_b(497)],J=l.checkbox,W=y.isFolder(D),re=y._iconCls(D,W,l),he=D.pq_level||0,Me=he*ae,ie=["pq-group-title-cell"];return ae=["text-indent:",W?Me:+ae+Me,"px;"],Me=d.formatVal||d.cellData,B&&null!=(I=I.callFn(B,d))&&("string"!=typeof I?(I.iconCls&&(re=I.iconCls),null!=I.text&&(Me=I.text),v=I.attr,ie.push(I.cls),ae.push(I.style)):Me=I),d.Export?y.exportCell(Me,he):(J&&(B=y.renderCB(J,D,l.cbId))&&(C=B[0],B[1]&&ie.push(B[1])),W&&(_=_a(160)+(D.pq_close?U[1]:U[0])+"'></span>"),re&&(p=_a(161)+re+"'></span>"),I=C&&(P.useLabel||l.useLabel),{cls:ie.join(" "),attr:v,style:ae.join(""),text:[_,p,I?"<label>":"",C,Me,I?"</label>":""].join("")})}},refreshViewFull:function(y){var l=this.that.options.dataModel;l.data=this.groupById(l.data),this.buildCache(),y&&this[_b(17)]()},_iconCls:function(y,l,d){if(d.icons)return l&&(l=d.iconFolder)?y.pq_close?l[1]:l[0]:y[_b(9)]?void 0:d.iconFile},setCellRender:function(){var y,l=this.that,d=this.Model,_=l.columns;d.summary&&l.iGroup[_b(440)](),(l=this.di_prev)&&((y=_[l])&&(y._render=null),this.di_prev=null),(l=d.dataIndx)&&((y=_[l])._render=this.renderCell(this,d),this.di_prev=l)},_showHideRows:function(y,l,d){for(var _,p,v,C,D=this.id,I=this.nodeClose,P=l||this.getRoots(),B=this.childstr,U=d||!1,J=P.length,W=0;W<J;W++)(p=P[W]).pq_filter||(p.pq_hidden=U),(C=p[B])&&(I&&null!=(_=I[v=p[D]])&&(delete I[v],p.pq_close=_),v=U||p.pq_close,this[_b(498)](y,C,v))},showHideRows:function(){var y,l,d,_=this.that,p=0,v=_.get_p_data(),C=this.Model.summary;if(this[_b(498)](v),C)for(l=(v=_.pdata).length;p<l;p++)(d=v[p])[_b(9)]&&(y=this.getParent(d))&&(d.pq_hidden=y.pq_hidden)},toggleNode:function(y,l){this[y.pq_close?"expandNodes":"collapseNodes"]([y],l)}})}(jQuery),function(){function K(y){y=(this.that=y).options,this.options=y,this.selection=[],this.hclass=" pq-state-select "+(y.bootstrap.on?"":"ui-state-highlight")}var G=jQuery.paramquery,A=G.pqGrid.prototype;G.cRows=K,A.SelectRow=function(){return this.iRows},K.prototype={_add:function(y,_){var d=this.that,v=y[_b(75)],p=(_=!_,y.rowData);return v=this.inViewRow(v),!p.pq_hidden&&v&&(v=d.getRow(y)).length&&(v[_?"addClass":"removeClass"](this.hclass),_||v.removeAttr("tabindex")),p[_b(2)]=_,y},_data:function(d){var l=this.that,_=(d=(d=d||{}).all,l.riOffset),p=(_=d?0:_,l.get_p_data());return[p,_,_+(d?p:l.pdata).length]},add:function(y){var l=y.addList=y.rows||[{rowIndx:y.rowIndx}];y.isFirst&&this.setFirst(l[0].rowIndx),this.update(y)},extend:function(v){v=v.rowIndx;var l,d,_,p,C=[],D=this.getFirst();if(null!=D&&null!=(p=this.isSelected({rowIndx:D}))){for(_=v<D?(d=D=[v,v=D][0],v-1):(d=D+1,v),l=d;l<=_;l++)C.push({rowIndx:l});this.update(p?{addList:C}:{deleteList:C})}},getFirst:function(){return this._firstR},getSelection:function(){for(var y,l=this.that.get_p_data(),d=0,_=l.length,p=[];d<_;d++)(y=l[d])&&y[_b(2)]&&p.push({rowIndx:d,rowData:y});return p},inViewCol:function(y){var l=(d=this.that).options,d=d.iRenderB;return y<l.freezeCols||y>=d.initH&&y<=d.finalH},inViewRow:function(y){var l=(d=this.that).options,d=d.iRenderB;return y<l.freezeRows||y>=d.initV&&y<=d.finalV},isSelected:function(y){return(y=y.rowData||this.that.getRowData(y))?!0===y[_b(2)]:null},isSelectedAll:function(y){for(var l,d=(y=this._data(y))[0],_=y[1],p=y[2];_<p;_++)if((l=d[_])&&!l[_b(2)])return!1;return!0},removeAll:function(y){this.selectAll(y,!0)},remove:function(y){var l=y.deleteList=y.rows||[{rowIndx:y.rowIndx}];y.isFirst&&this.setFirst(l[0].rowIndx),this.update(y)},replace:function(y){y.deleteList=this[_b(206)](),this.add(y)},selectAll:function(y,l){for(var d,_=[],p=this.that.riOffset,v=(y=this._data(y))[0],C=y[1],D=y[2];C<D;C++)(d=v[C])&&_.push({rowIndx:C,rowIndxPage:C-p,rowData:d});this.update(l?{deleteList:_}:{addList:_},!0)},setFirst:function(y){this._firstR=y},toRange:function(){for(var y,l,d=[],_=this.that,p=_.get_p_data(),v=0,C=p.length;v<C;v++)p[v][_b(2)]?null!=y?l=v:y=l=v:null!=y&&(d.push({r1:y,r2:l}),y=l=null);return null!=y&&d.push({r1:y,r2:l}),_.Range(d)},toggle:function(y){this[this.isSelected(y)?"remove":"add"](y)},toggleAll:function(y){this[this[_b(499)](y)?"removeAll":"selectAll"](y)},update:function(D,l){function d(I){return l?I:p[_b(216)](I)}var _=this,p=_.that,v={source:D.source},C=d(D.addList||[]);D=d(D.deleteList||[]),C=C.filter(function(I){return!1===_.isSelected(I)}),D=D.filter(_.isSelected.bind(_)),(C.length||D.length)&&(v.addList=C,v.deleteList=D,!1!==p._trigger("beforeRowSelect",null,v)&&(v.addList.forEach(function(I){_._add(I)}),v.deleteList.forEach(function(I){_._add(I,!0)}),p._trigger("rowSelect",null,v)))}}}(),function(K){var G=K.paramquery,A=(K(document).on("pqGrid:bootup",function(y,l){(l=l.instance).iImport=new A(l)}),G.pqGrid.prototype.importWb=function(y){return this.iImport.importWb(y)},G.cImport=function(y){this.that=y});A.prototype={fillRows:function(y,l,d){for(var _=y.length;_<l;_++)y.push(d?{}:[])},generateCols:function(y,l,P){var _,p,v=[],C=0,D=0,I=pq.excel.colWidth,B=[];for((P=P?P.cells:[]).forEach(function(U,J){B[J=U.indx||J]=U.value}),(l=l||[]).forEach(function(U,J){v[D=U.indx||J]=U}),y=Math.max(y,l.length,D+1);C<y;C++)this.copyStyle(_=v[C]||{},p={_title:B[C]||"",title:this._render,width:_.width||I,style:{},halign:"center"},p.style),_.hidden&&(p.hidden=!0),v[C]=p;return v},_render:function(y){return y.column._title||pq.toLetter(y.colIndx)},importS:function(y,l,d,_,p){var v,C,D,I,P,B,U,J,W,re,he,ie,ae,Me,Ce=y.mergeCells,Le=this,Ue=[],ce={},qe=0,ut=y.rows||[],De=y.frozenRows||0,je=0,Wt=Le.that.colModel,Xe=0,Yn=Wt&&Wt.length,Jt=G.cFormulas.shiftRC();for(null!=p&&(U=ut[p],ut=ut.slice(Xe=p+1),De=0<(De-=Xe)?De:0),je=0,v=ut.length;je<v;je++)D=(C=ut[je]).indx||je,J=(I={})[_b(129)]={},W=I[_b(244)]={},re=I[_b(213)]={},he=I[_b(242)]={},ie=I.pq_rowprop={},Le.copyStyle(C,ie,he),D!=je&&Le.fillRows(Ue,D,!0),(C.cells||[]).forEach(function(xn,Pt){P=xn.indx||Pt,I[B=_&&Yn&&Wt[P]?Wt[P].dataIndx:P]=xn.value,ae=J[B]={},Me=W[B]={},Le.copyStyle(xn,ae,Me),(ae=xn.comment)&&(re[B]={title:ae}),xn.format&&Le.copyFormat(I,B,xn.format),(Me=xn.formula)&&Le[_b(500)](I,B,Xe?Jt(Me,0,-Xe):Me),qe<=P&&(qe=P+1)}),0<=C.htFix&&(I.pq_ht=C.htFix,I.pq_htfix=!0),C.hidden&&(I.pq_hidden=!0),Ue[D]=I;return ce.title=y.name,l&&Le.fillRows(Ue,Ue.length+l,!0),ce.dataModel={data:Ue},qe+=d||0,!_&&qe&&(ce.colModel=Le[_b(501)](qe,y.columns,U)),ce.mergeCells=(Ce||[]).map(function(xn){return(xn=pq.getAddress(xn)).r1-=Xe,xn.r2-=Xe,xn}).filter(function(xn){return 0<=xn.r1}),ce.freezeRows=De,ce.freezeCols=y.frozenCols,ce.pics=y.pics,ce},copyFormula:function(y,l,d){(y.pq_fn=y.pq_fn||{})[l]=d},copyFormat:function(y,l,d){y=(y=y[_b(129)])[l]=y[l]||{},d=pq[_b(241)](d)?pq.excelToJui(d):pq.excelToNum(d),y.format=d},copyStyle:function(y,l,d){var _,p;if((_=y.font)&&(d["font-family"]=_),(_=y.fontSize)&&(d["font-size"]=_+"px"),(_=y.color)&&(d.color=_),(_=y.bgColor)&&(d["background-color"]=_),null!=(_=y.bold)&&(d["font-weight"]=_?"bold":"normal"),y.italic&&(d["font-style"]="italic"),y.underline&&(d["text-decoration"]="underline"),y.wrap&&(d["white-space"]="normal"),(_=y.align)&&(l.align=_),(_=y.valign)&&(l.valign=_),_=y.border)for(p in _)d["border-"+p]=_[p]},applyOptions:function(y,l){var d=y.options.dataModel,_=l.dataModel;if(_){for(var p in _)d[p]=_[p];delete l.dataModel}y.option(l)},importWb:function(y){function l(B){return v.importS(B,y.extraRows,y.extraCols,y.keepCM,y[_b(502)])}function d(B){v[_b(503)](I,B)}var _=y.workbook,p=_.activeId||0,v=this,C=v.that.iTab,D=C.tabs(),I=C.main(),P=y.sheet;D?(C.clear(),_.sheets.forEach(function(B,U){var J={sheet:B,extraRows:y.extraRows,extraCols:y.extraCols,name:B.name,hidden:B.hidden};D.push(J),U==p&&(J._inst=I,d(l(B)))}),C.model.activeId=p,I._trigger("tabsReady"),I.element.show(),C.refresh()):(P=P||0,(C=_.sheets.filter(function(B,U){return P==U||P&&P==B.name})[0])&&d(l(C))),I._trigger("importWb"),I[_b(118)]()}}}(jQuery),function(K){var G;pq[_b(504)]={attr:(G=new RegExp(_a(162),"gi"),function(A){A=(A=A||"").slice(0,A.indexOf(">"));var y={};return A.replace(G,function(l,d,_){y[d]=_}),y}),getComment:function(d){var y=this,l={};return(d=y.pxml(_a(163)+d+".xml.rels")).length&&(d=K(d.find(_a(164))[0]).attr("Target"))&&(d=d.split("/").pop(),(y[_b(505)]("xl/"+d).match(/<comment\s+[^>]*>([\s\S]*?)<\/comment>/g)||[]).forEach(function(v){var p=y.attr(v).ref;v=v.match(/<t(\s+[^>]*)?>([\s\S]*?)(?=<\/t>)/g),v=y.match(v[v.length-1],/[^>]*>([\s\S]*)/,1),l[p]=K.trim(v)})),l},getBase64:function(A){return _a(165)+JSZip.base64.encode(A.asBinary())},pxml:function(A){return K(K.parseXML(this[_b(505)](A)))},pxmlstr:function(A){return K(K.parseXML(K.trim(A)))},getPic:function(p,y){var l,d=[],_=this.files;if(p=this.match(p,/<drawing\s+r:id=\"([^\"]*)\"(\s*)\/>/i,1)){y=this.pxml(_a(163)+y+".xml.rels"),y=(y=K(y.find('Relationship[Id="'+p+'"]')[0]).attr("Target")).split("/").pop();var v,C,D,I={},P={},B=(p=this.pxml("xl/drawings/"+y),y=this.pxml("xl/drawings/_rels/"+y+".rels"),["col","colOff","row","rowOff"]);for(l in y.find(_a(166)).each(function(W,re){C=K(re),I[C.attr("Id")]=C.attr("Target").match(/media\/(.*)/)[1]}),_)/media\/.*/.test(l)&&(v=l.match(/media\/(.*)/)[1],P[v]=this.getBase64(_[l]));p.find(_a(167)).each(function(W,Le){var he=(ie=(Le=K(Le)).find("xdr\\:cNvPr")).attr("descr"),ie=ie.attr("id"),ae=Le.find("a\\:blip").attr("r:embed"),Me=(ae=I[ae],Le.find("xdr\\:from")),Ce=Le.find("xdr\\:to"),Ue=(Le=Le.find("xdr\\:ext"),Ce.length),ce=[],lt=Ue?[]:null;B.forEach(function(qe,ut){D=ut%2?9500:1,ce.push(Me.find("xdr\\:"+qe).text()/D),Ue&&lt.push(Ce.find("xdr\\:"+qe).text()/D)}),d.push({id:ie,name:he,src:P[ae],from:ce,to:lt,cx:Ue?0:Le.attr("cx")/9500,cy:Ue?0:Le.attr("cy")/9500})})}return d},cacheTheme:function(){var A=this.pxmlstr(this[_b(506)]("th")).find("a\\:clrScheme").children(),y=this.themeColor=[];A.each(function(l,d){0===(d=K(d).children().attr("val")).indexOf("window")&&(d=void 0),y[l]=d})},colorFromNode:function(A){for(var y,l,d=A.attributes,_=0;_<d.length;_++){var p=(v=d[_]).name,v=v.value;"indexed"==p?y=this.indexes[v]:"rgb"==p?y=v.slice(2):"theme"==p?y=this.themeColor[v]:"tint"==p&&(l=v)}if(y)return"#"+(l?pq.tint(y,l):y)},indexes:["000000","FFFFFF","FF0000","00FF00","0000FF","FFFF00","FF00FF","00FFFF","000000","FFFFFF","FF0000","00FF00","0000FF","FFFF00","FF00FF","00FFFF","800000","008000","000080","808000","800080","008080","C0C0C0","808080","9999FF","993366","FFFFCC","CCFFFF","660066","FF8080","0066CC","CCCCFF","000080","FF00FF","FFFF00","00FFFF","800080","800000","008080","0000FF","00CCFF","CCFFFF","CCFFCC","FFFF99","99CCFF","FF99CC","CC99FF","FFCC99","3366FF","33CCCC","99CC00","FFCC00","FF9900","FF6600","666699","969696","003366","339966","003300","333300","993300","993366","333399","333333","000000"],cacheStyles:function(){var A,y,l,d=this,_=d.pxmlstr(d[_b(507)]()),p=K.extend(!0,{},d[_b(508)]),v=[],C=[""],D=["",""],I=[];_.find("numFmts>numFmt").each(function(P,U){var J=(U=K(U)).attr("formatCode");p[U.attr("numFmtId")]=J}),_.find(_a(168)).each(function(P,B){D.push(d[_b(509)](B))}),_.find("borders>border").each(function(P,U){U=K(U).children();var J={},W="double";U.each(function(re,he){var ie=K(he),ae=ie.children()[0];ae&&(ie=ie.attr("style"),J[he.tagName]=(ie==W?"3px":"1px")+" "+(ie==W?W:"solid")+" "+(d[_b(509)](ae)||"#000000"))}),I.push(J)}),_.find("fonts>font").each(function(P,U){var J=+(U=K(U)).find("sz").attr("val"),W=U.find("name").attr("val"),re=U.find("color")[0],he={};if(0===P)return A=J,void(y=W[_b(37)]());U.find("b").length&&(he.bold=!0),(re=re&&d[_b(509)](re))&&(he.color=re),W&&W[_b(37)]()!=y&&(he.font=W),J&&J!=A&&(he.fontSize=J),U.find("u").length&&(he.underline=!0),U.find("i").length&&(he.italic=!0),C.push(he)}),_.find("cellXfs>xf").each(function(P,ie){var U,J=+(ie=K(ie)).attr("numFmtId"),W=+ie.attr("fillId"),re=+ie.attr("borderId"),he=ie.children("alignment"),ae=(ie=+ie.attr("fontId"))?C[ie]:{},Me={};for(U in he.length&&((ie=he.attr("horizontal"))&&(Me.align=ie),(ie=he.attr("vertical"))&&(Me.valign=ie),"1"==he.attr("wrapText")&&(Me.wrap=!0)),J&&(/(?=.*m.*)(?=.*d.*)(?=.*y.*)/i.test(l=p[J])&&(l=l.replace(/(\[.*\]|[^mdy\/\-\s])/gi,"")),Me.format=l),re&&(Me.border=I[re]),W&&D[W]&&(Me.bgColor=D[W]),ae)Me[U]=ae[U];v.push(Me)}),d.getStyle=function(P){return v[P]}},getMergeCells:function(A){var y=this;return(A.match(/<mergeCell\s+.*?(\/>|<\/mergeCell>)/g)||[]).map(function(l){return y.attr(l).ref})},getFrozen:function(y){return y=this.match(y,/<pane.*?(\/>|<\/pane>)/,0),{r:+(y=this.attr(y)).ySplit||0,c:+y.xSplit||0}},getFormula:function(A){var y={},l=K.paramquery.cFormulas.shiftRC();return function(d,_,p){var v;if("<f"===d.substr(0,2))return v=A.match(d,/^<f.*?>(.*?)<\/f>/,1),"shared"==(d=A.attr(d)).t&&(v?y[d.si]={r:_,c:p,f:v}:v=l((d=y[d.si]).f,p-d.c,_-d.r)),v}},getCols:function(A){for(var y=(A.match(/<dimension\s.*?\/>/)||[])[0],l=(y=this.attr(y||"").ref,[]),d=A.match(/<col\s.*?\/>/g)||[],_=y?pq.getAddress(y).c2+1:d.length,p=pq.excel.colRatio,v=0;v<_;v++)for(var C,D,J,I=+(J=this.attr(J=d[v])).min,P=+J.max,B=+J.hidden,U=+J.width,W=(J=J.style)?this.getStyle(J):{},re=I;re<=P;re++){for(D in C={},B?C.hidden=!0:C.width=+(U*p).toFixed(2),re!==l.length+1&&(C.indx=re-1),W)C[D]=W[D];l.push(C)}return l},getColor:function(A){return"#"+A.slice(2)},getPath:function(A){return this.paths[A]},getPathSheets:function(){return this.pathSheets},getFileTextFromKey:function(A){return this[_b(505)](this.getPath(A))},getFileText:function(A){return A&&(A=this.files[A.replace(/^\//,"")])?A.asText().replace(/\<x\:/g,"<").replace(/\<\/x\:/g,"</"):""},getSheetText:function(A){A=A||0;var y=this.pathSheets.filter(function(l,d){return l.name===A||d===A})[0].path;return this[_b(505)](y)},getStyleText:function(){return this[_b(506)]("st")},getSI:function(A){var y,l=[],d=pq[_b(510)],_=+this.attr(this.match(A,/<sst.*?>[\s\S]*?<\/sst>/,0))[_b(511)];if(A.replace(/<si>([\s\S]*?)<\/si>/g,function(p,v){y=[],v.replace(/<t.*?>([\s\S]*?)<\/t>/g,function(C,D){y.push(D)}),l.push(d(y.join("")))}),_&&_!==l.length)throw"si misatch";return l},getCsv:function(A,y){var l=[],d=Math.random()+"";return A=A.replace("\ufeff","").replace(/(?:^|[^"]+)"(([^"]|"{2})+)"(?=([^"]+|$))/g,function(_,p){var v=_.indexOf(p);return l.push(p.replace(/""/g,'"')),_.slice(0,v-1)+d+(l.length-1)+d}),y=y||new RegExp(-1==A.indexOf("\t")?",":"\t","g"),{sheets:[{rows:A.split(/\r\n|\r|\n/g).map(function(_){return{cells:_.split(y).map(function(p){var v;return 0==p.indexOf(d)?(v=p.slice(d.length,p.indexOf(d,1)),p=l[v]):'""'===p&&(p=""),{value:p}})}})}]}},getWorkBook:function(A,p,l){var d=this,_={},v=(p?_[p]=!0:"string"==typeof A&&(_.base64=!0),d.files=new JSZip(A,_).files,d.readPaths(),d.cacheTheme(),d[_b(512)](),p=this.getPath("ss"),[]),C=p?this.getSI(this[_b(505)](p)):[];return d[_b(513)]().forEach(function(D,I){var P,B;(!l||-1<l.indexOf(I)||-1<l.indexOf(D.name))&&(B=d[_b(505)](D.path),P=d.match(B,/<sheetData.*?>([\s\S]*?)<\/sheetData>/,1),B=d[_b(514)](B,P,C,D.name,I+1),D.hidden&&(B.hidden=!0),v.push(B))}),delete d.files,{sheets:v,activeId:d.activeId}},getWorkSheet:function(A,Xe,l,d,_){var p,v,C,D,I,P,B,U,J,W,re,he,ie,ae,Me,Ce,Le=this,Ue=Le.getComment(_),ce=[],lt=pq.toNumber,qe=Le.getFormula(Le),ut=pq.formulas,De=pq[_b(241)],je=Le[_b(515)](A),Wt=Xe.match(/<row[^<]*?\/>|<row.*?<\/row>/g)||[],Yn=(Xe=Le.getCols(A),{}),Jt=0,xn=Wt.length;for(Xe.forEach(function(ni,en){Yn[ni.indx||en]=ni});Jt<xn;Jt++){for(p in C={cells:[]},ae=(U=Le.attr(he=Wt[Jt])).r,U[_b(516)]&&(C.htFix=1.5*U.ht),Me=(D=U.s)?Le.getStyle(D):{})C[p]=Me[p];(ie=ae?ae-1:Jt)!==Jt&&(C.indx=ie),U.hidden&&(C.hidden=!0);for(var Pt,Lt=0,Xn=(Pt=he.match(/(<c[^<]*?\/>|<c.*?<\/c>)/g)||[]).length;Lt<Xn;Lt++){if(I=(J=Le.attr(B=Pt[Lt])).t,B=Le.match(B,/<c.*?>(.*?)(<\/c>)?$/,1),v={},"inlineStr"==I?Ce=(Ce=B.match(/<t><!\[CDATA\[(.*?)\]\]><\/t>/))?Ce[1]:(Ce=B.match(/<t>(.*?)<\/t>/),pq[_b(510)](Ce[1])):null!=(Ce=Le.match(B,/<v>(.*?)<\/v>/,1)||void 0)&&(Ce="s"==I?l[Ce]:"str"==I?pq[_b(510)](Ce):"b"==I?"1"==Ce:ut.VALUE(Ce)),(I=J.r)?P=lt(P=I.replace(/\d+/,"")):I=pq.toLetter(P=Lt)+(ie+1),Ue[I]&&(v.comment=Ue[I]),void 0!==Ce&&(v.value=Ce),P!==Lt&&(v.indx=P),(I=qe(B,ie,P))&&(v.formula=pq[_b(510)](I)),re=Yn[P],D=(D=J.s)&&this.getStyle(D)){for(p in D)W=D[p],re&&re[p]==W||C[p]!=W&&(v[p]=W);B=v.format,null!=Ce&&!I&&B&&De(B)&&(v.value=ut.TEXT(Ce,"m/d/yyyy"))}["bold","underline","italic"].forEach(function(ni){null!=D&&null!=D[ni]||((re||{})[ni]||C[ni])&&(v[ni]=!1)}),C.cells.push(v)}ce.push(C)}return d={rows:ce,name:d,pics:Le.getPic(A,_)},_=Le.getFrozen(A),je.length&&(d.mergeCells=je),Xe.length&&(d.columns=Xe),_.r&&(d.frozenRows=_.r),_.c&&(d.frozenCols=_.c),d},Import:function(A,y){function l(D,I){y(d[C?"getCsv":"getWorkBook"](D,C?A.separator:A.type||I,A.sheets))}var d=this,_=A.file,p=A.content,v=A.url,C="csv"==(v||(_||{}).name||"").slice(-3)[_b(54)]()||A.csv;v?(v+="?"+Math.random(),window.Uint8Array?pq.xmlhttp(v,C?"text":"arraybuffer",l):JSZipUtils[_b(517)](v,function(D,I){l(I,"binary")})):_?pq.fileRead(_,C?"readAsText":"readAsArrayBuffer",l):p&&l(p)},match:function(A,y,l){return(A=A.match(y))?A[l]:""},preDefFormats:{1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",5:"$#,##0_);($#,##0)",6:_a(169),7:_a(170),8:_a(171),9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yyyy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yyyy h:mm",37:"#,##0_);(#,##0)",38:"#,##0_);[Red](#,##0)",39:_a(172),40:_a(173),45:"mm:ss",46:"[h]:mm:ss",47:"mm:ss.0",48:"##0.0E+0",49:"@"},readPaths:function(){var A,y=this.pxmlstr((_=this.files)["[Content_Types].xml"].asText()),l=this.paths={wb:"sheet.main",ws:"worksheet",st:"styles",ss:"sharedStrings",th:"theme"};for(A in l)l[A]=y.find('[ContentType$="'+l[A]+'+xml"]').attr("PartName");for(A in _)if(/workbook.xml.rels$/.test(A)){l.wbrels=A;break}var d=K(this[_b(506)]("wbrels")),_=K(this[_b(506)]("wb")),p=this.pathSheets=[];this.activeId=+_.find("workbookView").attr("activeTab")||null,_.find("sheet").each(function(v,D){var I=(D=K(D)).attr("r:id"),P=D.attr("name"),B=d.find('[Id="'+I+'"]').attr("Target");B=y.find('Override[PartName$="'+B+'"]').attr("PartName"),p.push({name:P,rId:I,path:B,hidden:"hidden"==D.attr("state")})})}}}(jQuery),function(K){var G=K.paramquery,A=G._pqGrid.prototype,y=(A[_b(518)]=function(l){return(l=l||{}).format="xlsx",this.exportData(l)},A.exportCsv=function(l){return(l=l||{}).format="csv",this.exportData(l)},A.exportData=function(l){return new y(this,l).Export(l)},G.cExport=function(l){this.that=l});y.prototype=K.extend({copyStyle:function(l,d,_,p,v){function C(B){var U=d[B];if(U&&p[B]!=U)return U}function D(B){var U=_[B];if(U&&v[B]!=U)return U}var I,P;p=p||{},v=v||{},d&&(d=pq.styleObj(d),(I=C("background-color"))&&(l.bgColor=I),(I=C("font-size"))&&(l.fontSize=parseFloat(I)),(I=C("color"))&&(l.color=I),(I=C("font-family"))&&(l.font=I),(I=C("font-weight"))&&(l.bold="bold"==I),(I=C("white-space"))&&(l.wrap="normal"==I),(I=C("font-style"))&&(l.italic="italic"==I),(I=C("text-decoration"))&&(l.underline="underline"==I),P=C("border"),["left","right","top","bottom"].forEach(function(B){var U;((U=C("border-"+B))||(U=P))&&((l.border=l.border||{})[B]=U)})),_&&((I=D("align"))&&(l.align=I),(I=D("valign"))&&(l.valign=I))},getCsvHeader:function(l,d,_,p){for(var v,C,D=[],I=[],P=0;P<d;P++){for(var B=l[P],U=null,J=0,W=B.length;J<W;J++)(v=_[J]).hidden||!1===v.copy||(v=B[J],0<P&&v==l[P-1][J]||U&&0<J&&v==U?D.push(""):(C=null==(C=this.getTitle(v,J))?"":(C+"").replace(/\"/g,'""'),U=v,D.push('"'+C+'"')));I.push(D.join(p)),D=[]}return I},getCSVContent:function(l,d,_,p,v,C,D,I,P,B,U,J,W){for(var re,he=l.separator||",",ie=[],ae=W?this[_b(519)](p,v,d,he):[],Me=0;Me<D;Me++)if(!(re=C[Me]).pq_hidden){for(var Ce,Le,Ue,ce={rowIndx:Ce=I?Me+P:Me,rowIndxPage:Ce-P,rowData:re,Export:!0},lt=0;lt<_;lt++)(Ue=d[lt]).hidden||!1===Ue.copy||(Ue=(Ue=((Le=null)==(Le=B[_b(195)](Ce,lt)?B.isRootCell(Ce,lt)?((Le=B[_b(137)](Ce,lt)).Export=!0,this[_b(347)](Le,U,J)[0]):"":(ce.colIndx=lt,ce.column=Ue,ce.dataIndx=Ue.dataIndx,this[_b(347)](ce,U,J)[0]))?"":Le)+"").replace(/\"/g,'""'),ie.push('"'+Ue+'"'));ae.push(ie.join(he)),ie=[]}return"\ufeff"+ae.join("\n")},getExportCM:function(l,d){return 1<d?l:l.filter(function(_){return 0!=_.copy})},Export:function(l){var d,_,p=this.that,v=p.options.tabModel||{},C=v.tabs,D={sheets:[]};return!1!==p._trigger("beforeExport",null,l)&&("xlsx"==l.format?(C?(C.forEach(function(I,P){(_=I._inst||!(d=I.sheet)&&p.iTab.create(P))&&(_=new y(_),(d=_._Export(l).sheets[0]).name=I.name,I.hidden&&(d.hidden=!0)),D.sheets.push(d)}),D.activeId=v.activeId):D=this._Export(l),!1===p._trigger("workbookReady",null,{workbook:D})||l.workbook?D:(l.workbook=D,C=pq.excel.exportWb(l)||this[_b(520)](l),p._trigger("exportData",null,l),C)):this._Export(l))},_Export:function(l){var d=this.that,W=(he=d.options).groupModel,_="remote"==he.pageModel.type,p=d.riOffset,v=d.iRenderB,C=d.iMerge,D=d[_b(144)],I=D.length,P=d.colModel,B=P.length,U=this[_b(521)](P,I),J=U.length,re=he.treeModel,he=(W=W.on&&W.dataIndx.length||_||re.dataIndx&&re.summary?d.pdata:he.dataModel.data,re=(W=he[_b(23)]?W.concat(he[_b(23)]):W).length,l.render),ie=!l.noheader,ae=l.format;return"xlsx"==ae?this[_b(522)](U,J,D,I,W,re,_,p,C,he,v,ie,l.sheetName):(l.data="json"==ae?this[_b(523)](l,W):"csv"==ae?this[_b(524)](l,P,B,D,I,W,re,_,p,C,he,v,ie):this[_b(525)](l,P,B,D,I,W,re,_,p,C,he,v,ie),U=this[_b(520)](l),d._trigger("exportData",null,l),U)},getHtmlHeader:function(l,d){for(var _,p,v,C,D=["<thead>"],I=0;I<d;I++){var P=l[I],B=null;D.push("<tr>");for(var U=0,J=P.length;U<J;U++)_=(C=P[U]).colSpan,!C.hidden&&_&&!1!==C.copy&&(p=C.rowSpan,0<I&&C==l[I-1][U]||B&&0<U&&C==B||(v=this.getTitle(C,U),C=(B=C).halign||C.align,D.push("<th colspan=",_," rowspan=",p," ",C=C?"align="+C:"",">",v,"</th>")));D.push("</tr>")}return D.push("</thead>"),D.join("")},getHtmlBody:function(l,d,_,p,v,C,D,I,P){for(var B,U,J,W,re,he,ie,ae,Me,Ce,Le,Ue=[],ce=0;ce<p;ce++)if(!(ie=_[ce]).pq_hidden){for(he={rowIndx:ae=v?ce+C:ce,rowIndxPage:ae-C,rowData:ie,Export:!0},Ue.push("<tr>"),B=0;B<d;B++)if(!(U=l[B]).hidden&&!1!==U.copy){if(Le=null,Ce="",D[_b(195)](ae,B)){if(!(J=D.isRootCell(ae,B)))continue;(Le=D[_b(137)](ae,B)).Export=!0,Me=(W=this[_b(347)](Le,I,P))[0],re=W[1],Ce="rowspan="+J.rowspan+" colspan="+J.colspan+" "}else he.colIndx=B,he.column=U,he.dataIndx=U.dataIndx,Me=(W=this[_b(347)](he,I,P))[0],re=W[1];Ce+=(Le=U.align)?"align="+Le:"",Me=pq.newLine(Me=null==Me?"":Me),Ue.push("<td ",Ce,re?' style="'+re+'"':"",">",Me,"</td>")}Ue.push("</tr>")}return Ue.join("")},getHtmlContent:function(l,d,_,p,v,C,D,I,P,B,U,J,W){var re=(ae=this.that).options.rtl,he=l.cssRules||"",ie=(ae=ae.element.find(".pq-grid-table")).css("font-family"),ae=ae.css("font-size"),Me=[];return Me.push(_a(174),_a(175),"<title>",l.title||"ParamQuery Pro","</title>","</head><body ",re?'dir="rtl"':""," >","<style>",_a(176)+ie+";font-size:"+ae+_a(177),_a(178),he,"</style>","<table>"),Me.push(W?this[_b(526)](p,v,d):""),Me.push(this[_b(527)](d,_,C,D,I,P,B,U,J)),Me.push(_a(179)),Me.join("")},getJsonContent:function(l,d){return l[_b(528)]?d:JSON.stringify(d,l.nopqdata?function(_,p){if(0!==(_+"").indexOf("pq_"))return p}:null,l.nopretty?null:2)},getXlsMergeCells:function(l,d,_,p){l=l.concat(_[_b(515)](d,this.curPage,p));for(var v=[],C=pq.toLetter,D=l.length,I=0;I<D;I++){var P=C((P=l[I]).c1)+(P.r1+1)+":"+C(P.c2)+(P.r2+1);v.push(P)}return v},getXlsCols:function(l,d){for(var _,p,v,C=[],D=0,I=pq.excel.colWidth;D<d;D++)v=+((p=l[D])._width||I).toFixed(2),this.copyStyle(_={},p.style,p),v!==I&&(_.width=v),p.hidden&&(_.hidden=!0),pq.isEmpty(_)||(C.length!==D&&(_.indx=D),C.push(_));return C},getXlsHeader:function(l,d,_){for(var p=[],v=0;v<d;v++){for(var C=l[v],D=[],I=0,P=C.length;I<P;I++){var B,U,J,W=C[I];!1!==W.copy&&(B=W.o_colspan,U=W.rowSpan,J=this.getTitle(W,I),0<v&&W==l[v-1][I]||0<I&&W==l[v][I-1]?J="":(1<B||1<U)&&_.push({r1:v,c1:I,r2:v+U-1,c2:I+B-1}),D.push({value:J,bgColor:"#eeeeee"}))}p.push({cells:D})}return p},getXlsBody:function(l,d,_,p,v,C,D,I,P,B,U){for(var J,W,re,he,ie,ae,Me,Ce,Le,Ue,ce,lt,qe,ut,De,je,Wt,Xe,Yn,Jt,xn,Pt,Lt,Xn,ni=this.that,en=ni.options,gr=[],zi=G.cFormulas.shiftRC(ni),En=0;En<p;En++){for(Wt=(Le=_[En])[_b(213)],Jt=Le[_b(129)]||{},ut=Le.pq_rowprop||{},Pt=Le[_b(244)]||{},Ce=[],he={rowIndx:Ue=v?En+C:En,rowIndxPage:Ue-C,rowData:Le,Export:!0},J=0;J<d;J++)lt=(Xn=l[J]).style,Lt=Pt[ce=(qe=Xn).dataIndx],xn=Jt[ce]||{},W=Xe=Le[ce],re=ni.getFormula(Le,ce),je=!1,(je=!(!D[_b(195)](Ue,J)||D.isRootCell(Ue,J,"o"))||je)||re||(he.colIndx=J,he.column=Xn,he.dataIndx=ce,W=(je=this[_b(347)](he,I,P))[0],ie=je[1],Me=je[2],ae=je[3]),je={},"string"==typeof(Xn=en.format.call(ni,Le,Xn,xn,ut))&&(Xn=pq[_b(241)](Xn)?(W!==Xe&&K.datepicker.formatDate(Xn,new Date(Xe))===W&&(W=Xe),pq.juiToExcel(Xn)):(W!==Xe&&pq[_b(47)](Xe,Xn)===W&&(W=Xe),pq.numToExcel(Xn)),je.format=Xn),void 0!==W&&(je.value=W),Wt&&(Xe=Wt[ce])&&((Yn=Xe.title)&&(je.comment=Yn),(Yn=Xe.style)&&this.copyStyle(je,Yn)),this.copyStyle(je,Lt,xn,lt,qe),this.copyStyle(je,ie,Me,lt,qe),ae&&(je.comment=ae),re&&(B&&(re=zi(re,0,B)),je.formula=re),pq.isEmpty(je)||(je.dataIndx=ce,Ce.length!==J&&(je.indx=J),Ce.push(je));De={},Ce.length&&(De.cells=Ce),Le.pq_hidden&&(De.hidden=!0),Le.pq_htfix&&(De.htFix=Le.pq_ht),this.copyStyle(De,Le[_b(242)],ut),U&&(Yn=(U.call(ni,he)||{}).style)&&this.copyStyle(De,Yn),pq.isEmpty(De)||(gr.length!==En&&(De.indx=En),gr.push(De))}return gr},getWorkbook:function(l,d,Le,lt,v,C,D,I,P,B,U,ce,W){var re=this.getXlsCols(l,d),Ue=[],he=this.that,ie=he.options,ae=ie.freezeCols,Me=ce?lt:0,Ce=Me+(ie.freezeRows||0);return Le=ce?this[_b(529)](Le,lt,Ue):[],Ue=this[_b(530)](Ue,ce?lt:0,P,C),ce=this.getXlsBody(l,d,v,C,D,I,P,B,U,Me,ie.rowInit),lt={columns:re,rows:Le.concat(ce)},ie.rtl&&(lt.rtl=!0),Ue.length&&(lt.mergeCells=Ue),(l=Le.length)&&(lt.headerRows=l),Ce&&(lt.frozenRows=Ce),ae&&(lt.frozenCols=ae),(W=W||ie.title)&&(lt.name=W),lt.pics=he.iPic.pics,{sheets:[lt]}},postRequest:function(l){var d,_,p=l.format,v=l.url,C=l.filename||"pqGrid";return l.zip&&"xlsx"!=p?((_=new JSZip).file(C+"."+l.format,l.data),_=_.generate({type:"base64",compression:"DEFLATE"}),d=!0,p="zip"):(d=!!l.decodeBase,_=l.data),v&&K.ajax({url:v,type:"POST",cache:!1,data:{pq_ext:p,pq_data:_,pq_decode:d,pq_filename:C},success:function(D){v=v+(0<v.indexOf("?")?"&":"?")+"pq_filename="+D,K(document.body).append(_a(180)+v+'"></iframe>')}}),_}},pq.mixin.render)}(jQuery),function(K){var G,A=pq.excel={_tmpl:{rels:_a(181)},eachRow:function(l,d){for(var _=l.rows,p=0,v=_.length;p<v;p++)d(_[p],p)},exportWb:function(l){var d=l.workbook,_=l.replace,p=this,v=p._tmpl,C=d.sheets,D=C.length,I=[],P=[],B=new JSZip,U={},J=B.folder("xl");return B.file("_rels/.rels",v.rels),B.file(_a(182),p[_b(531)](D)),C.forEach(function(ce,Ce){var he,ie=p.getCols(ce.columns),ae=ce.pics||[],Me=ae.length,Le=(Ce+=1,p.getFrozen(ce.frozenRows,ce.frozenCols,ce.rtl)),Ue=p.getBody(ce.rows||[],ce.columns||[]);ce=p[_b(515)](ce.mergeCells),_&&(Ue=Ue.replace.apply(Ue,_)),he=!pq.isEmpty(he=p.comments),J.file("worksheets/sheet"+Ce+".xml",p.getSheet(Le,ie,Ue,ce,he,Me,Ce)),he&&(I.push(Ce),J.file("comments"+Ce+".xml",p.getComment()),J.file("drawings/vmlDrawing"+Ce+".vml",p.getVml())),Me&&(p.addPics(J,ae,Ce),ae.forEach(function(lt){U[lt.name.split(["."])[1]]=1}),P.push(Ce)),(he||Me)&&J.file(_a(183)+Ce+".xml.rels",p[_b(532)](Ce,he,Me))}),B.file("[Content_Types].xml",p[_b(533)](D,I,P,U)),J.file("workbook.xml",p.getWBook(C,d.activeId)),J.file("styles.xml",p.getStyle()),l.url?(l.data=B.generate({type:"base64",compression:"DEFLATE"}),l.decodeBase=!0,pq[_b(520)](l)):B.generate({type:l.type||"blob",compression:"DEFLATE"})},addPics:function(l,d,_){var p,v,C,D,I;d.length&&(p=[_a(184)],v=[_a(185)],C=1,D=parseInt,I=function(P){return["<xdr:col>",P[0],_a(186),D(9500*P[1]),_a(187),P[2],_a(188),D(9500*P[3]),"</xdr:rowOff>"].join("")},d.forEach(function(P,B){var U=P.from,J=P.name,W="rId"+C++,re=P.to,he=re&&!!re.length,ie=he?"two":"one",ae=D(9500*P.cx),Me=D(9500*P.cy);p.push("<xdr:",ie,"CellAnchor>","<xdr:from>",I(U),"</xdr:from>",he?"<xdr:to>"+I(re)+"</xdr:to>":'<xdr:ext cx="'+ae+'" cy="'+Me+'"/>',_a(189),P.id,'" name="Picture ',B+1,'" descr="',J,'"/>',_a(190),_a(191),W,_a(192),_a(193),_a(194),ie,"CellAnchor>"),v.push('<Relationship Id="',W,'" Target="../media/',J,_a(195)),l.file("media/"+J,P.src.split(",")[1],{base64:!0})}),p.push("</xdr:wsDr>"),v.push("</Relationships>"),l.file("drawings/drawing"+_+".xml",p.join("")),l.file(_a(196)+_+".xml.rels",v.join("")))},eachCell:function(l,d,_){l.forEach(function(p,v){var C,D;if(C=p.cells){v=p.indx||v;for(var I=0,P=C.length;I<P;I++)d(D=C[I],D.indx||I,v,_)}else(C=p.rows)&&this.eachCell(C,d,v)},this)},findIndex:function(l,d){return d=l.findIndex(d),l[d].indx||d},getArray:function(l){var d=[],_=this;return this.eachRow(l,function(p){var v=[];p.cells.forEach(function(C){v.push(_.getCell(C))}),d.push(v)}),d},getBody:function(l,d){var _,p,v,C,D,I,P,B,U,J,W,re,he,ie,ae,Me,Ce,Le,Ue,ce={},lt=pq.formulas,qe=[],ut=this.comments={},De=l.length;for((d||[]).forEach(function(je,Wt){ce[je.indx||Wt]=je}),p=0;p<De;p++){for(ae=(re=(ie=l[p]).cells||[]).length,Me=ie.hidden?'hidden="1" ':"",Ce=ie.htFix?_a(197)+ie.htFix/1.5+'" ':"",I='r="'+(C=(ie.indx||p)+1)+'"',B=this[_b(534)](ie),qe.push("<row "+Me+Ce+I+(B=B?' s="'+B+'" customFormat="1"':"")+">"),v=0;v<ae;v++)he=(W=re[v]).value,B=P="",Le=ce[D=W.indx||v]||{},I=D===v?"":'r="'+pq.toLetter(D)+C+'"',Le=K.extend({},Le,ie,W),_="@"!=(Ue=W.format),J=(J=W.formula)?"<f>"+pq.escapeXml(J)+"</f>":"",null==he?U="<v></v>":_&&"boolean"==typeof he?(U="<v>"+(he?"1":"0")+"</v>",P='t="b"'):U=_&&he==+he&&(he+"").length==(+he+"").length?"<v>"+he+"</v>":_&&Ue&&lt.isDate(he)?"<v>"+lt.VALUE(he)+"</v>":(P='t="inlineStr"',"<is><t>"+pq.escapeXml(he)+"</t></is>"),B=(B=this[_b(534)](Le))?'s="'+B+'"':"",(_=W.comment)&&(ut[pq.toLetter(D)+C]=_),qe.push("<c "+P+" "+I+" "+B+">"+J+U+"</c>");qe.push("</row>")}return qe.join("")},getCell:function(_){var d=_.format;return _=_.value,d?pq.formulas.TEXT(_,d):_},getCSV:function(l){var d=[],_=this;return this.eachRow(l,function(p){var v=[];p.cells.forEach(function(C){v.push(_.getCell(C))}),d.push(v.join(","))}),d.join("\r\n")},getColor:(G={},function(l){var d,_,p=G[l];if(p||(/^#[0-9,a,b,c,d,e,f]{6}$/i.test(l)?_=l.replace("#",""):(d=l.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/i))&&(_=y((+d[1]).toString(16))+y((+d[2]).toString(16))+y((+d[3]).toString(16))),_&&6===_.length&&(p=G[l]="ff"+_)),p)return p;throw"invalid color: "+l}),_getCol:function(l,d,_,p,v,C){C=C?' style="'+C+'"':"",p&&!v||(v=_a(198)+(v=+((v=v||this.colWidth)/this.colRatio).toFixed(2))+'"'),l.push('<col min="',d,'" max="',_,'" hidden="',p,'"',v,C,"/>")},getCols:function(l){if(!l||!l.length)return"";var d,_,p,v,C,D,I=[],P=0,B=0,U=0,J=l.length;for(I.push("<cols>");U<J;U++){var W=l[U],re=W.hidden?1:0,he=W.width,ie=this[_b(534)](W);P=(W.indx||P)+1,p===he&&v===re&&ie==C&&P==B+1?_=P:(D&&(this._getCol(I,d,_,v,p,C),d=null),_=P,null==d&&(d=P)),p=he,v=re,C=ie,B=P,D=!0}return this._getCol(I,d,_,v,p,C),I.push("</cols>"),I.join("")},getComment:function(){var l,d=[],_=this.comments;for(l in _)d.push(_a(199),l,_a(200),_[l].replace(/</g,"&lt;").replace(/>/g,"&gt;"),_a(201));return[_a(202),_a(203),_a(204),"<commentList>",d.join(""),_a(205)].join("")},getContentTypes:function(l,d,_,p){for(var v,C=[],D=1,I=[],P=[];D<=l;D++)C.push(_a(206)+D+_a(207));for(v in d.forEach(function(B){I.push(_a(208),B,_a(209))}),p)P.push('<Default Extension="'+v+_a(210)+v+'" />');return _.forEach(function(B){P.push(_a(211),B,_a(212))}),[_a(202),_a(213),_a(214),_a(215),_a(216),_a(217),C.join(""),_a(218),I.join(""),P.join(""),"</Types>"].join("")},getFillIndx:function(l){var d=this.fills=this.fills||{length:2};return this.getIndx(d,l)},getBorderIndx:function(l){var d=this.borders=this.borders||{length:1};return this.getIndx(d,JSON.stringify(l))},getFontIndx:function(l,d,_,p,v,C){var D=this.fonts=this.fonts||{length:1};return this.getIndx(D,(l||"")+"_"+(d||"")+"_"+(_||"")+"_"+(p||"")+"_"+(v||"")+"_"+(C||""))},getFormatIndx:function(l){var d=this.formats=this.formats||{length:164};return this.numFmtIds[l]||this.getIndx(d,l)},getFrozen:function(l,d,_){return[_a(219),_?'rightToLeft="1"':"",' workbookViewId="0">','<pane xSplit="',d=d||0,'" ySplit="',l=l||0,'" topLeftCell="',pq.toLetter(d)+(l+1),_a(220),_a(221)].join("")},getIndx:function(l,d){var _=l[d];return null==_&&(_=l[d]=l.length,l.length++),_},getItem:function(l,d){var _,p,v=l[d],C=0,D=0,I=v?v.indx:-1;if(null==I||d==I)return v;if(0<=(_=-1==I?l.length-1:d))for(;;){if(20<++D)throw"not found";if((I=(v=l[p=Math.floor((_+C)/2)]).indx)==d)return v;if(d<I?_=p:C=p==C?p+1:p,C==_&&p==C)break}},getMergeCells:function(l){var d=[],_=0,p=(l=l||[]).length;for(d.push('<mergeCells count="'+p+'">');_<p;_++)d.push('<mergeCell ref="',l[_],'"/>');return d.push("</mergeCells>"),p?d.join(""):""},getSheetRel:function(l,d,_){var p=[_a(185)];return d&&p.push(_a(222)+l+_a(223)+l+_a(224),_a(225)+l+_a(226)+l+_a(227)),_&&p.push(_a(228)+l+_a(229)+l+_a(230)),p.push("</Relationships>"),p.join("")},getSheet:function(l,d,_,p,v,C,D){return[_a(231),l,d,"<sheetData>",_,"</sheetData>",p,C?'<drawing r:id="rId'+D+'" />':"",v?_a(232)+D+'" />':"","</worksheet>"].join("")},getStyleIndx:function(W){var d=W.format,_=W.bgColor,p=W.color,v=W.font,C=W.fontSize,D=W.align,I=W.valign,P=W.wrap,B=W.bold,U=W.italic,J=W.underline;if(W=W.border,d||_||p||v||C||D||I||P||B||U||J||W)return d=d?this[_b(535)](d):"",_=_?this[_b(536)](_):"",W=W?this[_b(537)](W):"",d=d+"_"+_+"_"+(p||v||C||B||U||J?this[_b(538)](p,v,C,B,U,J):"")+"_"+(D||"")+"_"+(I||"")+"_"+(P||"")+"_"+W,_=this.styles=this.styles||{length:1},this.getIndx(_,d)},getStyle:function(){var l,D,I,P,B,U,J,W,re,he,ie=this,ae=ie.formats,Me=ie.fills,Ce=ie.fonts,Le=ie.borders,Ue=["left","right","top","bottom"],ce=ie.styles,lt=[],qe=[],ut=[],De=[],je=[_a(233)];if(ae){for(he in delete ae.length,ae)lt.push('<numFmt numFmtId="'+ae[he]+'" formatCode="'+he+'"/>');delete ie.formats}if(Me){for(he in delete Me.length,Me)qe.push(_a(234)+this.getColor(he)+_a(235));delete ie.fills}if(Ce){for(he in delete Ce.length,Ce)l="<color "+((D=he.split("_"))[0]?'rgb="'+this.getColor(D[0])+'"':'theme="1"')+" />",ut.push("<font>",D[3]?"<b/>":"",D[4]?"<i/>":"",D[5]?"<u/>":"",'<sz val="'+(D[2]||11)+'"/>',l,'<name val="'+(D[1]||"Calibri")+'"/>',_a(236));delete ie.fonts}if(Le){for(he in delete Le.length,Le){var Wt=JSON.parse(he);De.push("<border>"),Ue.forEach(function(Xe){Wt[Xe]&&(D=Wt[Xe].split(" "),De.push("<"+Xe+' style="'+("1px"==D[0]?"thin":"double")+'"><color rgb="'+ie.getColor(D[2])+'"/></'+Xe+">"))}),De.push("</border>")}delete ie.borders}if(ce){for(he in delete ce.length,ce)I=(D=he.split("_"))[0],P=D[1],B=D[2],U=D[3],re=D[6],J=(J=D[4])?' vertical="'+J+'" ':"",W=(W=D[5])?' wrapText="1" ':"",je.push("<xf "+(I?_a(237)+I+'"':"")+(P?_a(238)+P+'" ':"")+(B?_a(239)+B+'" ':"")+(re?_a(240)+re+'"':"")+((U=U?' horizontal="'+U+'" ':"")||J||W?_a(241)+U+J+W+"/></xf>":"/>"));delete this.styles}return lt=lt.join("\n"),je=je.join("\n"),qe=qe.join("\n"),[_a(202),_a(242),"<numFmts>",lt,"</numFmts>","<fonts>",_a(243),ut=ut.join(""),"</fonts>",_a(244),qe,"</fills>",_a(245),De=De.join("\n"),"</borders>",_a(246),"</cellStyleXfs>","<cellXfs>",je,"</cellXfs>",_a(247),_a(248),"</styleSheet>"].join("")},getVml:function(){var l,d=[];for(l in this.comments){var p=l.match(/([A-Z]+)(\d+)/),_=pq.toNumber(p[1]);p=p[2]-1,d.push(_a(249),"<x:Row>",p,"</x:Row>","<x:Column>",_,_a(250))}return[_a(251),_a(252),d.join(""),"</xml>"].join("")},getWBook:function(l,d){return[_a(253),_a(254)+(0<=d?"activeTab='"+d+"'":"")+_a(255),l.map(function(_,p){return p++,["=tiffu obnf>#".replace(/[^\s]/g,function(v){return String[_b(60)](v.charCodeAt(0)-1)}),"RctcoSwgt{ Gxcn ".replace(/[^\s]/g,function(v){return String[_b(60)](v.charCodeAt(0)-2)})+p,'" sheetId="',p,'" r:id="rId',p,'"/>'].join("")}).join(""),"</sheets></workbook>"].join("")},getWBookRels:function(l){for(var d=[],_=1;_<=l;_++)d.push(_a(228)+_+_a(256)+_+'.xml"/>');return[_a(202),_a(257),d.join(""),_a(228),_,_a(258),"</Relationships>"].join("")},importXl:function(){var l=pq[_b(504)];return l.Import.apply(l,arguments)},SpreadSheet:function(l){var d,_=A[_b(539)];if(this instanceof _==0)return new _(l);for(d in l)this[d]=l[d]}};function y(l){return 1===l.length?"0"+l:l}A.colRatio=8,A.colWidth=8.43*A.colRatio,A.numFmtIds=function(){var l,d=pq[_b(504)][_b(508)],_={};for(l in d)_[d[l]]=l;return _}(),pq[_b(520)]=function(l){var d,_,p=l.format,v=l.url,C=l.filename||"pqGrid";return l.zip&&"xlsx"!=p?((_=new JSZip).file(C+"."+l.format,l.data),_=_.generate({type:"base64",compression:"DEFLATE"}),d=!0,p="zip"):(d=!!l.decodeBase,_=l.data),v&&K.ajax({url:v,type:"POST",cache:!1,data:{pq_ext:p,pq_data:_,pq_decode:d,pq_filename:C},success:function(D){v=v+(0<v.indexOf("?")?"&":"?")+"pq_filename="+D,K(document.body).append(_a(180)+v+'"></iframe>')}}),_},A[_b(539)].prototype={getCell:function(l,d){var _=A.getItem(_=this.rows||[],l)||{cells:[]};return A.getItem(_.cells,d)}}}(jQuery),function(K){var G=K.paramquery,A=(G.pqGrid.defaults[_b(540)]={on:!0},G.pqGrid.prototype.getFormula=function(y,l){return(y=this.iFormulas.getFnW(y,l))?y.fn:void 0},K(document).on("pqGrid:bootup",function(y,_){var d;(_=_.instance).options[_b(540)].on&&(d=_.iFormulas=new A(_)),_.Formulas=function(){return d}}),G.cFormulas=function(y){var l=this;l.that=y,l.fn={},l.tabNames={},y.on("dataReadyDone",l[_b(541)].bind(l)).on(_a(259),l[_b(542)].bind(l)).on("beforeValidateDone",l[_b(543)].bind(l)).on("autofillSeries",l.onAutofill.bind(l)).on("editorBegin",l[_b(544)].bind(l)).on("editorEnd",l[_b(545)].bind(l)).on(_a(260),l[_b(546)].bind(l)).on(!0,"change",l.onChange.bind(l)).on("tabChange",l[_b(547)].bind(l)).on("tabRename",l[_b(548)].bind(l))});K.extend(A,{deString:function(y,l,d){var _=[];return y=l(y=y.replace(/(?:^|[^"]+)"(([^"]|"{2})+)"(?=([^"]+|$))/g,function(p,v){var C=p.indexOf('"'+v+'"');return _.push(v),p.slice(0,C)+"#"+(_.length-1)+"#"})),_.forEach(function(p,v){d&&(p=p.replace(/""/g,'\\"')),y=y.replace("#"+v+"#",'"'+p+'"')}),y},reSheet:_a(261),selectExp:function(y,l){var d,_=y.slice(0,l).replace(/"[^"]*"/g,"");if(!/"[^"]+$/.test(_)&&(y=y.slice(l),(l=_.match(/.*?([a-z0-9:$]+)$/i))&&(d=""===y?[]:y.match(/^([a-z0-9:$]+)?.*/i))))return(l[1]+(null==d[1]?"":d[1])).replace(/\$/g,"")[_b(37)]()},shiftRC:function(y){var l=A,d=y?y.get_p_data().length-1:0,_=y?y.colModel.length-1:0;return function(p,v,C){return v&&(p=l.shiftC(p,v,_)),C?l.shiftR(p,C,d):p}},getTab:function(y){return"'"==(y=y.slice(0,y.length-1).replace(/''/g,"'"))[0]?y.slice(1,y.length-1):y},shiftR:function(y,l,d,_){function p(I){return _[A.getTab(I)].pdata.length-1}var v=A.reSheetC,C=new RegExp(v+_a(262),"g"),D=new RegExp(v+_a(263),"g");return A.deString(y,function(I){return I.replace(C,function(P,B,U,J,W,re){return W?P:(W=+re+l-1,d=B?p(B):d,(B||"")+U+J+((W=W<0?0:d&&d<W?d:W)+1))}).replace(D,function(P,B,U,J,W,re){var he;return d=B?p(B):d,(B||"")+U+(J=U?J:(he=(he=+J+l-1)<0?0:d&&d<he?d:he)+1)+":"+W+(W?re:(he=(he=+re+l-1)<0?0:d&&d<he?d:he)+1)})})},shiftC:function(y,l,d,_){function p(I){return _[A.getTab(I)].colModel.length-1}var v=A.reSheetC,C=new RegExp(v+_a(264),"g"),D=new RegExp(v+_a(265),"g");return A.deString(y,function(I){return(I=I.replace(C,function(P,B,U,J,W,re){return U?P:(U=pq.toNumber(J)+l,d=B?p(B):d,(B||"")+pq.toLetter(U=U<0?0:d&&d<U?d:U)+W+re)})).replace(D,function(P,B,U,J,W,re){var he;return d=B?p(B):d,U||(he=(he=pq.toNumber(J)+l)<0?0:d&&d<he?d:he,J=pq.toLetter(he)),W||(he=(he=pq.toNumber(re)+l)<0?0:d&&d<he?d:he,re=pq.toLetter(he)),(B||"")+U+J+":"+W+re})})}}),A.reSheetC=A.reSheet.replace("?:",""),A.prototype={addRowIndx:function(y){y.forEach(function(l){var d,_,p=l.newRow,v=p.pq_fn;if(v)for(_ in v)(d=v[_]).ri=d.riO=p.pq_ri})},cell:function(d){return d=this.toCell(d),this.valueArr(d.r,d=d.c)[0]},check:function(y){return A.deString(y,function(l){return(l=l.replace(/[^']+(\s+)(?![^']+')/g,function(d){return d.replace(/\s/g,"")}))[_b(37)]().replace(/([A-Z]+)([0-9]+)\:([A-Z]+)([0-9]+)/g,function(d,_,p,v,C){return _=pq.toNumber(_),(v=pq.toNumber(v))<_&&(_=[v,v=_][0]),+C<+p&&(p=[C,C=p][0]),pq.toLetter(_)+p+":"+pq.toLetter(v)+C})})},computeAll:function(){var y,l=this,d=l.that;if(l.initObj(),l[_b(549)](function(_){_.clean=0,y=!0}),y)return l[_b(549)](function(_,p,v,C,D){try{var I=l[_b(550)](_)}catch(P){I="string"==typeof P?P:P.message}p[v]=I,D&&d.isValid({rowIndx:C,rowData:p,dataIndx:v,allowInvalid:!0})}),!0},eachFormula:function(y){function l(C){for(var D,I,P=(C=C||[]).length;P--;)(D=C[P])&&(I=D.pq_fn)&&v(D,P,I)}var d=!0,_=this.that,p=_.columns,v=function(C,D,I){var P,B;for(P in I)p[P]&&"string"!=typeof(B=I[P])&&y(B,C,P,D,d)};l(_.get_p_data()),d=!1,l(_.options[_b(23)])},execIfDirty:function(y,l){if(y.clean){if(.5==y.clean)return l}else y.clean=.5,y.val=this.exec(y.fn,y.ri,y.ci),y.clean=1;return y.val},replace:function(y,l,d){var _,p,v,C,D=l[_b(386)]("!"),I=y===l,P=this.obj;return 0<D?(v=(_=this.that.iTab).tabs(),C=l.substr(0,D),D=l.substr(D+1,l.length-1),"'"==C[0]&&(l=(C=(C=C.slice(1,C.length-1)).replace(/''/g,"'"))+"!"+D),0<=(p=v.findIndex(function(B){return B.name[_b(37)]().trim()==C}))&&(v=v[p],this.tabNames[C]=instance=_.grid(v)||_.create(p),P[l]=P[l]||instance.iFormulas[d](D)),l=l.replace(/'/g,"\\'")):P[l]=P[l]||this[d](l),"range"==d?"this['"+l+"']":(v=y.charAt(0),(I||"$"==v?"":v)+"this['"+l+"']")},exec:function(C,l,d){var _=this,p=_.obj,v=A.reSheet;C=A.deString(C,function(I){var P="(?:\\(|\\,|^|\\+)(("+v+_a(266);return(I=(I=(I=(I=I.replace(new RegExp(P,"g"),function(re,U){var J="SUM("+U.split("+").join(",")+")",W=re[0];return(W=W==U[0]?"":W)+J+((re=re[re.length-1])==U[U.length-1]?"":re)})).replace(/\^/g,"**")).replace(new RegExp("("+v+_a(267),"g"),function(B,U){return _.replace(B,U,"range")})).replace(new RegExp("(?:[^:A-Z']|^)("+v+_a(268),"g"),function(B,U){return _.replace(B,U,"cell")})).replace(/{/g,"[").replace(/}/g,"]").replace(/(?:[^><])(=+)/g,function(B,U){return B+(1===U.length?"==":"")}).replace(/<>/g,"!==").replace(/&/g,"+")},!0),p.getRange=function(){return{r1:l,c1:d}};try{var D=new Function("with(this){return "+C+"}").call(p);"function"==typeof D?D="#NAME?":"string"==typeof D&&A.deString(D,function(I){0<=I.indexOf("function")&&(D="#NAME?")}),D!=D&&(D=null)}catch(I){D="string"==typeof I?I:I.message}return D},initObj:function(){this.obj=K.extend({iFormula:this},pq.formulas)},onAutofill:function(y,l){var P,p=(d=l.sel).r,d=d.c,_=l.x,v=(p=(P=this.that).getRowData({rowIndx:p}),P.colModel),C=v.length-1,D=P.get_p_data().length-1,I=this.tabNames,B=this.getFnW(p,P=v[d].dataIndx);B&&(l.series=function(U){return"="+(_?A.shiftC(B.fn,U-1,C,I):A.shiftR(B.fn,U-1,D,I))})},onBeforeValidateDone:function(y,l){function d(v){v.forEach(function(C){var D,I,P,B=C.newRow,U=C.rowData;for(D in B)"string"==typeof(P=B[D])&&"="===P[0]?(l[_b(68)]=!0,P=_.check(P),(I=U?_.getFnW(U,D):null)?P!==I.fn&&(C.oldRow[D]="="+I.fn,_.save(U,D,P,C.rowIndx,p[D])):_.save(U||B,D,P,C.rowIndx,p[D])):U&&(I=_.remove(U,D))&&(C.oldRow[D]="="+I.fn)})}var _=this,p=this.that.colIndxs;d(l.addList),d(l.updateList)},onTabChange:function(y,l){!this.tabNames[l.tab.name[_b(37)]()]||l.addList.length||l.deleteList.length||(this.computeAll(),this.that.refresh())},onTabRename:function(y,l){function d(C){return C=C.replace(/'/g,"''"),(C=/[\s~!@#'\.,$%^&(\)<>]+/.test(C)?"'"+C+"'":C)+"!"}var _=this.tabNames,p=l.oldVal[_b(37)](),v=l.tab.name[_b(37)]();_[p]&&(delete _[p],_[v]=1,v=d(v),p=d(p),this[_b(549)](function(C){C.fn=C.fn.split(p).join(v)}))},onChange:function(y,l){this.addRowIndx(l.addList),l.addList.length||l.deleteList.length||this.computeAll()},onColumnAMR:function(){var y,l,d=this.that,_=A.shiftRC(d),p=d.colIndxs;this[_b(549)](function(v,C,D){v.ci!=(y=p[D])&&(l=y-v.ciO,v.ci=y,v.fn=_(v.fnOrig,l,v.ri-v.riO))}),null!=y&&this.computeAll()},onEditorBegin:function(y,l){var d=this.getFnW(l.rowData,l.dataIndx);d&&l.$editor.val("="+d.fn)},onEditorEnd:function(){pq.intel.hide()},onEditorKeyUp:function(y,d){var _=(d=d.$editor).val(),p=pq.intel,v=window[_b(206)]().getRangeAt(0)[_b(551)];_&&0===_.indexOf("=")&&(p.popup(_,v,d),this.select(_,v))},onDataReadyDone:function(){function y(D){for(var I,P,B=(D=D||[]).length;B--;)(I=D[B])&&(P=I.pq_fn)&&C(I,B,P)}var l,d=this,_=d.that,p=A.shiftRC(_),v=_.colIndxs,C=function(D,I,P){var B,U,J;for(U in P)l=!0,"string"==typeof(B=P[U])?d.save(D,U,d.check(B),I,v[U]):B.ri!=I&&(J=I-B.riO,B.ri=I,B.fn=p(B.fnOrig,B.ci-B.ciO,J))};y(_.get_p_data()),y(_.options[_b(23)]),d.initObj(),l&&d.computeAll()},getFnW:function(y,l){if(y=y.pq_fn)return y[l]},remove:function(y,l){var d,_=y.pq_fn;if(_&&(d=_[l]))return delete _[l],pq.isEmpty(_)&&delete y.pq_fn,d},range:function(v){v=v.split(":");var l=this.that,d=(_=this.toCell(v[0])).r,_=_.c,p=(v=this.toCell(v[1])).r;return v=v.c,this.valueArr(null==d?0:d,null==_?0:_,null==p?l.get_p_data().length-1:p,null==v?l.colModel.length-1:v)},save:function(y,l,d,_,p){return d={clean:0,fn:d=d.replace(/^=/,""),fnOrig:d,riO:_,ciO:p,ri:_,ci:p},(y.pq_fn=y.pq_fn||{})[l]=d},selectRange:function(p,l){var d,_;if(p=A.selectExp(p,l))return/^([a-z0-9]+):([a-z0-9]+)$/i.test(p)?(l=p.split(":"),d=this.toCell(l[0]),l=this.toCell(l[1]),_={r1:d.r,c1:d.c,r2:l.r,c2:l.c}):/^[a-z]+[0-9]+$/i.test(p)&&(_={r1:(d=this.toCell(p)).r,c1:d.c}),_},select:function(y,l){y=this[_b(552)](y,l),l=this.that,y?l.Range(y).select():l.Selection().removeAll()},toCell:function(y){return{c:(y=y.match(/\$?([A-Z]+)?\$?(\d+)?/))[1]?pq.toNumber(y[1]):null,r:y[2]?y[2]-1:null}},valueArr:function(y,l,d,_){var p,v,C,D,I,P,ie,B=(ie=this.that).colModel,U=B.length,J=[],W=[],re=[],he=ie.get_p_data();for(_=null==_?l:_,l=l<0?0:l,d=(ie=he.length)<=(d=null==d?y:d)?ie-1:d,_=U<=_?U-1:_,p=y=y<0?0:y;p<=d;p++){for(C=he[p],v=l;v<=_;v++)(I=this.getFnW(C,D=B[v].dataIndx))?P=this[_b(550)](I,C[D]):null==(P=C[D])&&(P=""),J.push(P),re.push(P);W.push(re),re=[]}return J.get2Arr=function(){return W},J.getRange=function(){return{r1:y,c1:l,r2:d,c2:_}},J}}}(jQuery),function(K){pq.intel={removeFn:function(G){return G.length===(G=G.replace(/[a-z]*\([^()]*\)/gi,"")).length?G:this.removeFn(G)},removeStrings:function(G){return(G=G.replace(/"[^"]*"/g,"")).replace(/"[^"]*$/,"")},getMatch:function(G,A){var y,l=pq.formulas,d=[];for(y in G=G[_b(37)](),l)if(A){if(y===G)return[y]}else 0===y.indexOf(G)&&d.push(y);return d},intel:function(G){var A,y;return G=this[_b(553)](G),(G=(G=this.removeFn(G)).match(/^=(.*[,+\-&*\s(><=])?([a-z]+)((\()[^)]*)?$/i))&&(A=G[2],G[4]&&(y=!0)),[A,y]},movepos:function(G){var A;return(A=G.match(/([^a-z].*)/i))?G.indexOf(A[1])+1:G.length},intel3:function(G,A){return A<G.length&&/=(.*[,+\-&*\s(><=])?[a-z]+$/i.test(G.slice(0,A))&&(A+=this.movepos(G.slice(A))),G=G.substr(0,A),this.intel(G)},item:function(G){var A=this.that.options[_b(554)];return"<div>"+((A=A?A[G]:null)?A[0]:G)+"</div>"+(A?_a(269)+A[1]+"</div>":"")},popup:function(p,A,y){var l=y.closest(".pq-grid"),d=K(".pq-intel"),_=l;p=this.intel3(p,A),this.that=l.pqGrid("instance"),d.remove(),(A=p[0])&&(l=this.getMatch(A,p[1]).map(this.item,this).join(""))&&K(_a(270)).appendTo(_).html(l).position({my:"center top",at:"center bottom",collision:"flipfit",of:y,within:_})},hide:function(){K(".pq-intel").remove()}}}(jQuery),function($){var f=pq.formulas={evalify:function(K,l){var A,y,d=(l=l.match(/([><=]{1,2})?(.*)/))[1]||"=",_=l[2],p=this;return/(\*|\?)/.test(_)?A=_.replace(/\*/g,".*").replace(/\?/g,"\\S").replace(/\(/g,"\\(").replace(/\)/g,"\\)"):(d="="===d?"==":"<>"===d?"!=":d,y=this.ISNUMBER(_)),K.map(function(v){return A?("<>"===d?"!":"")+"/^"+A+'$/i.test("'+(v=null==v?"":v)+'")':y?p.ISNUMBER(v)?v+d+_:"false":'"'+((v=null==v?"":v)+"")[_b(37)]()+'"'+d+'"'+(_+"")[_b(37)]()+'"'})},get2Arr:function(K){return K.get2Arr?K.get2Arr():K},ISNUMBER:function(K){return parseFloat(K)==K},_reduce:function(K,G){var A=[],y=G.map(function(){return[]});return K.forEach(function(l,d){null!=l&&(l=+l,isNaN(l)||(A.push(l),y.forEach(function(_,p){_.push(G[p][d])})))}),[A,y]},reduce:function(K){var A=(K=this.toArray(K)).shift(),y=K.filter(function(l,d){return d%2==0}),G=this._reduce(A,y);return y=G[1],[A=G[0]].concat(K.map(function(l,d){return d%2==0?y[d/2]:K[d]}))},strDate1:_a(271),strDate2:_a(272),strDate3:_a(273),strTime:_a(274),isDate:function(K){return this.reDate.test(K)&&Date.parse(K)||K&&K.constructor==Date},toArray:function(K){for(var G=[],A=0,y=K.length;A<y;A++)G.push(K[A]);return G},valueToDate:function(K){var G=new Date(Date.UTC(1900,0,1));return G.setUTCDate(G.getUTCDate()+K-2),G},varToDate:function(K){var G,A,y,l,d;if(this.ISNUMBER(K))G=this[_b(555)](K);else if(K.getTime)G=K;else if("string"==typeof K){if((A=(K=$.trim(K)).match(this.reDateTime))?A[12]?(d=+A[13],l=+A[15],y=+A[14]):(y=+A[2],l=+A[3],d=+A[4]):(A=K.match(this.reDate2))?(d=+A[1],l=+A[3],y=+A[2]):(A=K.match(this.reDate1))?(y=+A[1],l=+A[2],d=+A[3]):(A=K.match(this.reDate3))&&(l=+A[1],y=+A[2],d=+A[3]),!A)return K;K=Date.UTC(d,y-1,l),G=new Date(K)}return G},_IFS:function(arg,fn){for(var len=arg.length,i=0,arr=[],a=0;i<len;i+=2)arr.push(this.evalify(arg[i],arg[i+1]));for(var condsIndx=arr[0].length,lenArr=len/2,j;condsIndx--;){for(j=0;j<lenArr&&eval(arr[j][condsIndx]);j++);a+=j===lenArr?fn(condsIndx):0}return a},ABS:function(K){return Math.abs(K.map?K[0]:K)},ACOS:function(K){return Math.acos(K)},ADDRESS:function(K,G,A){return(2==A||4==A?"":"$")+pq.toLetter(G-1)+(3==A||4==A?"":"$")+K},AND:function(){var arr=this.toArray(arguments);return eval(arr.join(" && "))},ASIN:function(K){return Math.asin(K)},ATAN:function(K){return Math.atan(K)},_AVERAGE:function(K){var G=0,A=0;if(K.forEach(function(y){parseFloat(y)==y&&(A+=+y,G++)}),G)return A/G;throw"#DIV/0!"},AVERAGE:function(){return this._AVERAGE(pq.flatten(arguments))},AVERAGEIF:function(K,G,A){return this.AVERAGEIFS(A||K,K,G)},AVERAGEIFS:function(){var A=this.reduce(arguments),K=0,G=A.shift();if(A=this._IFS(A,function(y){return K++,G[y]}),K)return A/K;throw"#DIV/0!"},TRUE:!0,FALSE:!1,CEILING:function(K){return Math.ceil(K)},CHAR:function(K){return String[_b(60)](K)},CHOOSE:function(){var K=pq.flatten(arguments),G=K[0];if(0<G&&G<K.length)return K[G];throw"#VALUE!"},CODE:function(K){return(K+"").charCodeAt(0)},COLUMN:function(K){return(K||this).getRange().c1+1},COLUMNS:function(K){return(K=K.getRange()).c2-K.c1+1},CONCATENATE:function(){var K=pq.flatten(arguments),G="";return K.forEach(function(A){G+=A}),G},COS:function(K){return Math.cos(K)},_COUNT:function(G){G=pq.flatten(G);var A=this,y=0,l=0,d=0;return G.forEach(function(_){null==_||""===_?y++:(l++,A.ISNUMBER(_)&&d++)}),[y,l,d]},COUNT:function(){return this._COUNT(arguments)[2]},COUNTA:function(){return this._COUNT(arguments)[1]},COUNTBLANK:function(){return this._COUNT(arguments)[0]},COUNTIF:function(K,G){return this.COUNTIFS(K,G)},COUNTIFS:function(){return this._IFS(arguments,function(){return 1})},DATE:function(K,G,A){if(K<0||9999<K)throw"#NUM!";return K<=1899&&(K+=1900),this.VALUE(new Date(Date.UTC(K,G-1,A)))},DATEVALUE:function(K){return this.DATEDIF("1/1/1900",K,"D")+2},DATEDIF:function(d,l,A){l=this.varToDate(l),d=this.varToDate(d);var y,_=(l.getTime()-d.getTime())/864e5;if("Y"===A)return parseInt(_/365);if("M"===A)return y=l[_b(556)]()-d[_b(556)]()+12*(l[_b(557)]()-d[_b(557)]()),d.getUTCDate()>l.getUTCDate()&&y--,y;if("D"===A)return _;throw"unit N/A"},DAY:function(K){return this.varToDate(K).getUTCDate()},DAYS:function(K,G){return this.DATEDIF(G,K,"D")},DEGREES:function(K){return 180/Math.PI*K},EOMONTH:function(K,G){return G=G||0,(K=this.varToDate(K))[_b(558)](K[_b(556)]()+G+1),K.setUTCDate(0),this.VALUE(K)},EXP:function(K){return Math.exp(K)},FIND:function(K,G,A){return G.indexOf(K,A?A-1:0)+1},FLOOR:function(K,G){return K*G<0?"#NUM!":parseInt(K/G)*G},HLOOKUP:function(K,G,A,y){return null==y&&(y=!0),G=this.get2Arr(G),K=this.MATCH(K,G[0],y?1:0),this.INDEX(G,A,K)},HOUR:function(K){return Date.parse(K)?new Date(K).getHours():24*K},IF:function(K,G,A){return K?G:A},INDEX:function(K,G,A){return G=G||1,A=A||1,"function"==typeof(K=this.get2Arr(K))[0].push?K[G-1][A-1]:K[1<G?G-1:A-1]},INDIRECT:function(K){return this.iFormula[0<K.indexOf(":")?"range":"cell"](K)},ISBLANK:function(K){return""===K},LARGE:function(K,G){return K.sort(),K[K.length-(G||1)]},LEFT:function(K,G){return K.substr(0,G||1)},LEN:function(K){return 1<(K=(K.map?K:[K]).map(function(G){return G.length})).length?K:K[0]},LOOKUP:function(K,G,A){return A=A||G,K=this.MATCH(K,G,1),this.INDEX(A,1,K)},LOWER:function(K){return(K+"")[_b(559)]()},_MAXMIN:function(K,G){var A,y=this;return K.forEach(function(l){null!=l&&(l=y.VALUE(l),y.ISNUMBER(l)&&(A*G<l*G||null==A)&&(A=l))}),null!=A?A:0},MATCH:function(val,arr,type){var ISNUMBER=this.ISNUMBER(val),_isNumber,indx,_val,i=0,len=arr.length;if(null==type&&(type=1),val=ISNUMBER?val:val[_b(37)](),0===type){for(arr=this.evalify(arr,val+""),i=0;i<len;i++)if(_val=arr[i],eval(_val)){indx=i+1;break}}else{for(i=0;i<len;i++)if(_val=arr[i],_isNumber=this.ISNUMBER(_val),_val=arr[i]=_isNumber?_val:_val?_val[_b(37)]():"",val==_val){indx=i+1;break}if(!indx){for(i=0;i<len;i++)if(_val=arr[i],_isNumber=this.ISNUMBER(_val),type*(_val<val?-1:1)==1&&ISNUMBER==_isNumber){indx=i;break}indx=null==indx?i:indx}}if(indx)return indx;throw"#N/A"},MAX:function(){var K=pq.flatten(arguments);return this._MAXMIN(K,1)},MEDIAN:function(){var K=pq.flatten(arguments).filter(function(y){return+y==y}).sort(function(y,l){return l-y}),G=K.length,A=G/2;return A===parseInt(A)?(K[A-1]+K[A])/2:K[(G-1)/2]},MID:function(K,G,A){if(G<1||A<0)throw"#VALUE!";return K.substr(G-1,A)},MIN:function(){var K=pq.flatten(arguments);return this._MAXMIN(K,-1)},MODE:function(){var K,G,A=pq.flatten(arguments),y={},l=0;if(A.forEach(function(d){K=y[d]=y[d]?y[d]+1:1,l<K&&(l=K,G=d)}),l<2)throw"#N/A";return G},MONTH:function(K){return this.varToDate(K)[_b(556)]()+1},OR:function(){var arr=this.toArray(arguments);return eval(arr.join(" || "))},PI:function(){return Math.PI},POWER:function(K,G){return Math.pow(K,G)},PRODUCT:function(){var K=pq.flatten(arguments),G=1;return K.forEach(function(A){G*=A}),G},PROPER:function(K){return K.replace(/(\S+)/g,function(G){return G.charAt(0)[_b(37)]()+G.substr(1)[_b(54)]()})},RADIANS:function(K){return Math.PI/180*K},RAND:function(){return Math.random()},RANK:function(K,G,A){for(var y=JSON.stringify(G.getRange())+"_range",l=0,d=(G=this[y]||(this[y]=G).sort(function(_,p){return _-p})).length;l<d;l++)if(K===G[l])return A?l+1:d-l},RATE:function(){},REPLACE:function(K,G,A,y){return(K+="").substr(0,G-1)+y+K.substr(G+A-1)},REPT:function(K,G){for(var A="";G--;)A+=K;return A},RIGHT:function(K,G){return K.substr(-1*(G=G||1),G)},_ROUND:function(l,y,A){l*=y=Math.pow(10,y);var d=parseInt(l);return A(d,l-d)/y},ROUND:function(K,G){return this._ROUND(K,G,function(A,y){var l=Math.abs(y);return A+(.5<=l?l/y:0)})},ROUNDDOWN:function(K,G){return this._ROUND(K,G,function(A){return A})},ROUNDUP:function(K,G){return this._ROUND(K,G,function(A,y){return A+(y?Math.abs(y)/y:0)})},ROW:function(K){return(K||this).getRange().r1+1},ROWS:function(K){return(K=K.getRange()).r2-K.r1+1},SEARCH:function(K,G,A){return K=K[_b(37)](),(G=G[_b(37)]()).indexOf(K,A?A-1:0)+1},SIN:function(K){return Math.sin(K)},SMALL:function(K,G){return K.sort(),K[(G||1)-1]},SQRT:function(K){return Math.sqrt(K)},_STDEV:function(K){var G=(K=pq.flatten(K)).length,A=this._AVERAGE(K),y=0;return K.forEach(function(l){y+=(l-A)*(l-A)}),[y,G]},STDEV:function(){var K=this._STDEV(arguments);if(1===K[1])throw"#DIV/0!";return Math.sqrt(K[0]/(K[1]-1))},STDEVP:function(){var K=this._STDEV(arguments);return Math.sqrt(K[0]/K[1])},SUBSTITUTE:function(K,G,A,y){var l=0;return K.replace(new RegExp(G,"g"),function(){return l++,y&&l!==y?G:A})},SUM:function(){var K=pq.flatten(arguments),G=0,A=this;return K.forEach(function(y){y=A.VALUE(y),A.ISNUMBER(y)&&(G+=parseFloat(y))}),G},SUMIF:function(K,G,A){return this.SUMIFS(A||K,K,G)},SUMIFS:function(){var K=this.reduce(arguments),G=K.shift();return this._IFS(K,function(A){return G[A]})},SUMPRODUCT:function(){var K=(K=this.toArray(arguments))[0].map(function(G,A){var y=1;return K.forEach(function(l){l=l[A],y*=parseFloat(l)==l?l:0}),y});return pq.aggregate.sum(K)},TAN:function(K){return Math.tan(K)},TEXT:function(K,G){var A;return this.ISNUMBER(K)&&0<=G.indexOf("#")?pq[_b(47)](K,G):(A=this.varToDate(K))&&A.constructor==Date?$.datepicker.formatDate(pq.excelToJui(G),A):K},TIME:function(K,G,A){return(K+G/60+A/3600)/24},TIMEVALUE:function(d){var G,A,y,l;if(!(d=d.match(this.reTime))||null==d[1]||null==d[3]&&null==d[7]||(G=+d[1],l=+(d[3]||0),A=+(d[5]||0),y=(d[7]||"")[_b(37)](),l=G+l/60+A/3600),0<=l&&(y&&l<13||!y&&l<24))return"PM"==y&&G<12?l+=12:"AM"==y&&12==G&&(l-=12),l/24;throw"#VALUE!"},TODAY:function(){var K=new Date;return this.VALUE(new Date(Date.UTC(K[_b(471)](),K.getMonth(),K.getDate())))},TRIM:function(K){return K.replace(/^\s+|\s+$/gm,"")},TRUNC:function(K,G){return~~(K*(G=Math.pow(10,G||0)))/G},UPPER:function(K){return(K+"")[_b(560)]()},VALUE:function(K){var G,A,y;return K?parseFloat(K)==K?parseFloat(K):this.isDate(K)?this.DATEVALUE(K):(G=K.match(this.reDateTime))?(y=K.substr((A=G[1]||G[12]).length+1),this.DATEVALUE(A)+this.TIMEVALUE(y)):(G=K.match(this.reTime))?this.TIMEVALUE(K):K.replace(/[^0-9\-.]/g,"").replace(/(\.[1-9]*)0+$/,"$1").replace(/\.$/,""):0},VAR:function(){var K=this._STDEV(arguments);return K[0]/(K[1]-1)},VARP:function(){var K=this._STDEV(arguments);return K[0]/K[1]},VLOOKUP:function(d,G,A,y){null==y&&(y=!0);var l=(G=this.get2Arr(G)).map(function(_){return _[0]});return d=this.MATCH(d,l,y?1:0),this.INDEX(G,d,A)},YEAR:function(K){return this.varToDate(K)[_b(557)]()}};f.reDate1=new RegExp("^"+f.strDate1+"$"),f.reDate2=new RegExp("^"+f.strDate2+"$"),f.reDate3=new RegExp("^"+f.strDate3+"$"),f.reDate=new RegExp("^"+f.strDate1+"$|^"+f.strDate2+"$|^"+f.strDate3+"$"),f.reTime=new RegExp("^"+f.strTime+"$","i"),f.reDateTime=new RegExp("^("+f.strDate1+")\\s"+f.strTime+"$|^("+f.strDate2+")\\s"+f.strTime+"$|^("+f.strDate3+")\\s"+f.strTime+"$")}(jQuery),function(K){pq.Select=function(G,A){if(this instanceof pq.Select==0)return new pq.Select(G,A);var y=A.closest(".pq-grid"),l=K("<div/>").appendTo(y);pq.grid(l,K.extend({width:A[0][_b(40)],scrollModel:{autoFit:!0},height:"flex",autoRow:!1,numberCell:{show:!1},hoverMode:"row",fillHandle:"",stripeRows:!1,showTop:!1,showHeader:!1},G)),pq.makePopup(l[0],A[0]),l.position({my:"left top",at:"left bottom",of:A,collision:"flipfit",within:y})}}(jQuery),function(K){function G(_){this.options=_.options}G.prototype={empty:function(){for(var _ in this)0==_.indexOf("_")&&delete this[_];delete this.options.dataModel[_b(319)]},getCM:function(){return this._cm},setCM:function(_){this._cm=_},getCols:function(){return this._columns},setCols:function(_){this._columns=_},getDMData:function(){return this.options.dataModel[_b(319)]},setDMData:function(_){this.options.dataModel[_b(319)]=_},getOCM:function(){return this._ocm},setOCM:function(_){this._ocm=_}},K(document).on("pqGrid:bootup",function(_,v){var C=(v=v.instance).Group();C.primary=new G(v),v.on("beforeFilterDone",C[_b(561)].bind(C)).one("CMInit",C.oneCMInit.bind(C))});var A,y={},l={clearPivot:function(_){if(this.isPivot()){var p=this.that,v=p.options.dataModel,C=(D=this.primary).getOCM(),D=D.getDMData();if(C&&p.refreshCM(C),_){if(!D)throw"!primary.getDMData";v.data=D}else D&&(v.data=D);return this.primary.empty(),this.setPivot(!1),!0}},getColsPrimary:function(){return this.primary.getCols()||this.that.columns},getCMPrimary:function(){return this.primary.getCM()||this.that.colModel},getOCMPrimary:function(){return this.primary.getOCM()||this.that.options.colModel},getSumCols:function(){var _=")"+(this.that.options.rtl?"&lrm;":"");return(y.getSumCols.call(this)||[]).map(function(p){return[p.dataIndx,p.dataType,p.summary,p.summary.type+"("+p.title+_,p.width,p.format,p.showifOpen]})},getVal:function(){return this._pivot?function(_,p){return _[p]}:y.getVal.apply(this,arguments)},groupData:function(){var _,p,v,C,D,I,P=this.that,B=P.options.groupModel,U=B.dataIndx,J=B.groupCols,W=this.primary,re=J.length;(W=W.getDMData())&&W[0]!=P.pdata[0]||(B.pivot&&(_=U.slice(),B.dataIndx=U=U.concat(J),p=B[_b(12)],v=B.titleIndx,C=B.merge,B[_b(12)]=!1,B.titleIndx=null,B.merge=!1),y.groupData.call(this),B.pivot&&(P.pdata=P.pdata.reduce(function(he,ie){return ie.pq_gtitle&&he.push(ie),he},[]),v?(B[_b(12)]=p,B.titleIndx=v):1<_.length&&(B.merge=C),this.pivotData(U,_),B.dataIndx=_.slice(0,_.length-1),B[_b(18)]="all",re?(D=v,I=_[_.length-1],y.groupData.call(this,!0),v&&D!=I&&P.pdata.forEach(function(he){he.pq_gtitle||(he[D]=he[I])})):v&&P.pdata.forEach(function(he){he[v]=he[[U[he.pq_level]]]}),B.dataIndx=_,this.setPivot(!0)),P._trigger("groupData"))},isPivot:function(){return this._pivot},getSorter:function(_){return _[_b(562)]||("number"==pq[_b(46)](_)?function(p,v){return+p.sortby>+v.sortby?1:-1}:function(p,v){return p.sortby>v.sortby?1:-1})},nestedCM:function(_,p){var v=this,C=p.groupCols,D=p[_b(563)],I="hideifOpen"!=D&&null,P=[],B=[],U=v.that.columns;return U=C.map(function(J){return P.push(v.getSorter(J=U[J])),B.push(pq[_b(46)](J)),J}),function J(W,re,he){re=re||0,he=he||[];var ie,ae,Me,Ce,Le,Ue,ce,lt,qe=0,ut=[];if(K[_b(215)](W))for(;qe<_.length;qe++)ie=_[qe],(ae=he.slice()).push(ie[0]),Me={dataIndx:ae.join("_"),dataType:ie[1],summary:ie[2],title:ie[3],width:ie[4],format:ie[5],showifOpen:ie[6]},ut.push(Me);else{for(Le in ie=U[re],Ce=B[re],W)ce="aggr"===Le,(ae=he.slice()).push(Le),Ue=J(W[Le],re+1,ae),ce?(lt=Ue).forEach(function(De){De.showifOpen=I,De.type="aggr"}):(Me={showifOpen:!0,sortby:Le,title:pq.format(ie,Le,Ce),colModel:Ue},1<Ue.length&&!Ue.find(function(De){return!De.type}).dataIndx&&(Me[_b(90)]={on:!0,last:null}),ut.push(Me));ut.sort(P[re]),lt&&ut["before"==D?"unshift":"push"].apply(ut,lt)}return ut}},onBeforeFilterDone:function(_,p){if(this.isPivot()){for(var v=p.rules,C=this.primary.getCols(),D=0;D<v.length;D++)if(!C[v[D].dataIndx])return!1;this.clearPivot(!0),p.header=!0}},oneCMInit:function(){this.updateAgg(this.that.options.groupModel.agg)},option:function(_,p,v,C){this.isPivot()&&this.clearPivot(),y.option.call(this,_,p,v,C)},pivotData:function(he,p){var v=this.that,C=this.getSumCols(),re=this.getSumDIs(),D=v.options,I=D.groupModel,P=this.primary,W=v.pdata,B=v.columns,U=I.titleIndx,J=U?[B[U]].concat(p.reduce(function(ie,ae){return ae!=U&&ie.push(K.extend({hidden:!0},B[ae])),ie},[])):p.map(function(ie){return B[ie]});W=this[_b(564)](W,re,he,p),re=this.nestedCM(C,I)(W),(he={}).CM=J=J.concat(re),v._trigger("pivotCM",null,he),P.setOCM(D.colModel),P.setCM(v.colModel),P.setCols(v.columns),v.refreshCM(he.CM,{pivot:!0})},setPivot:function(_){this._pivot=_},transformData:function(_,p,v,C){var D,I,P,B,Me,U=this,J=[],W=this.that,re=this.primary,he={},ie=[],ae=(Me=W.options).dataModel,Ce=(Me=Me.groupModel)[_b(563)],Le=C.length,Ue={},ce=v.length;return Le==ce?(_.forEach(function(lt){lt.pq_level==Le-1&&(delete lt.children,delete lt.pq_gtitle)}),U[_b(433)](_),J=_):_.forEach(function(lt){var qe,ut,De=lt.pq_level,je=De-Le,Wt=Ue,Xe=v[De],Yn=lt[Xe];if(0<=je)for(ie[je]=Yn,qe=0;qe<1+je;qe++)Wt=Wt[ut=ie[qe]]=Wt[ut]||{};De===ce-1?p.forEach(function(Jt){(B=ie.slice()).push(Jt),P[B.join("_")]=lt[Jt]}):((!P||De<I&&De<Le)&&(P={pq_gid:U.idCount++},D=!0),De<Le&&(he[Xe]=P[Xe]=Yn),Ce&&De<=ce-2&&Le-1<=De&&p.forEach(function(Jt){(B=ie.slice(0,1+je)).push("aggr"),B.push(Jt),P[B.join("_")]=lt[Jt]})),I=De,D&&(J.push(P),C.forEach(function(Jt){void 0===P[Jt]&&(P[Jt]=he[Jt])}),D=!1)}),re.setDMData(ae.data),ae.data=W.pdata=J,Ce&&this[_b(565)](Ue,Me[_b(566)]),Ue},addAggrInCM:function(_,p){var v,C=0;for(v in _)C++,this[_b(565)](_[v],p);(p?0:1)<C&&(_.aggr={})},updateAgg:function(_,p){var v,C=this.that.columns;if(p)for(v in p)C[v].summary=null;if(_)for(v in _)C[v].summary={type:_[v]}}},d=K.paramquery.cGroup.prototype;for(A in l)y[A]=d[A],d[A]=l[A]}(jQuery),function(K){var G,A=K.paramquery;A.pqGrid.defaults.toolPanel={},A.pqGrid.prototype.ToolPanel=function(){return this.iToolPanel},K(document).on("pqGrid:bootup",function(y,l){(l=l.instance).iToolPanel=new A.cToolPanel(l)}),A.cToolPanel=function(y){this.that=y,this.panes=[],this.clsSort="pq-sortable",y.one("render",this.init.bind(this))},A.cToolPanel.prototype={getArray:function(y){return y.find(".pq-pivot-col").get().map(function(l){return l.dataset.di})},getInit:function(){return this._inited},getObj:function(y){var l={};return y.find(".pq-pivot-col").each(function(d,_){l[_.dataset.di]=_[_b(567)]("type")||"sum"}),l},getSortCancel:function(){return this[_b(568)]},_hide:function(y){this.$ele[y?"hide":"show"](),this.init(),this.that.refresh({soft:!0})},hide:function(){this._hide(!0)},disablePivotChkBox:function(y){this.$pivotChk.prop("disabled",y)},init:function(){var y,l,d,_,p,v,C,D,I,P,B,U=this,J=U.$ele=U.that.$toolPanel;U.isVisible()&&!U.getInit()&&(d=(l=(y=U.that).options).toolPanel,P=l.groupModel,_=_a(275),p=_a(276),v=U[_b(569)](),C=d[_b(570)],D=d[_b(571)],I=P.pivot?"checked":"",P=P.on?"checked":"",B=U.clsSort,J.html([_a(277),p,"'>","<div class='",B,"' style='",C?"padding-top:0;":"","'></div>",C?"":["<div class='",_,"'>",_a(278),D?"disabled":"",_a(279),I,"/>",l[_b(572)],"</label>","</div>"].join(""),"</div>",_a(280),p,"' style='display:",d[_b(573)]?"none":"",";'>",_a(281),B,"'></div>","<div class='",_,"'>",d[_b(574)]?_a(282)+l[_b(575)]:_a(283)+P+"/>"+l[_b(575)]+"</label>","</div>","</div>",_a(284),p,"' style='display:",v?"none":"",";'>",_a(285),B,"'></div>","<div class='",_,_a(286),l[_b(576)],"</div>","</div>",_a(287),p,"' style='display:",d[_b(577)]?"none":"",";'>",_a(288),B,"'></div>","<div class='",_,_a(286),l[_b(578)],"</div>","</div>"].join("")),U.$pivotChk=J.find(".pq-pivot-checkbox").on("click",U[_b(579)](U,y)),U.$groupChk=J.find(".pq-group-checkbox").on("click",U[_b(580)](U,y)),U.$colsAll=J.find(".pq-pivot-cols-all>."+B),U.$colsPane=J.find(".pq-pivot-cols"),U.$cols=J.find(".pq-pivot-cols>."+B),U.$rows=J.find(".pq-pivot-rows>."+B),U.$aggs=J.find(".pq-pivot-vals>."+B).on("click contextmenu",U.onClick.bind(U)),y.on("refreshFull",U.setHt.bind(U)).on("groupOption",U[_b(581)].bind(U)),setTimeout(function(){y.element&&(y.on("CMInit",U.onCMInit.bind(U)),U.render())}),U.setInit())},isHideColPane:function(){var y=this.that.options;return y.toolPanel[_b(582)]||!y.groupModel.pivot},isDeny:function(y,l,d){return l=l.attr("deny"),this.that.iGroup[_b(166)]()[d[0].dataset.di][l]},isVisible:function(){return this.$ele.is(":visible")},onCMInit:function(y,l){l.pivot||l.flex||l.group||this.that.Group().isPivot()||this.refresh()},onClick:function(p){var l,d=K(p.target),_=this;if(p=_.that,d.hasClass("pq-pivot-col"))return l=d[0].dataset.di,l=p.iGroup[_b(166)]()[l],p={dataModel:{data:p.iGroup[_b(421)](l.dataType).sort().map(function(v){return[v]})},cellClick:function(v,D){var I=this;d.attr("type",D=D.rowData[0]),setTimeout(function(){I.destroy(),_[_b(583)](),_.refresh()})}},pq.Select(p,d),!1},onGroupOption:function(y,l){var d;"tp"!=l.source&&((d=this.that.options.groupModel).groupCols==(l=l.oldGM).groupCols&&d.agg==l.agg&&d.dataIndx==l.dataIndx&&d.pivot==l.pivot||this.refresh())},onPivotChange:function(y,l){return function(){l.Group().option({pivot:!!this.checked},null,"tp"),y[_b(584)]()}},onGroupChange:function(y,l){return function(){l.Group().option({on:!!this.checked},null,"tp")}},ph:function(y){return _a(289)+y+"</span>"},refreshGrid:function(){var y=this,l=y.that,d=y.getArray(y.$cols),_=y.getObj(y.$aggs),p=y.getArray(y.$rows);l.Group().option({groupCols:d,dataIndx:p,agg:_},null,"tp"),setTimeout(function(){y.refresh()})},onReceive:function(y,l){if(this[_b(585)]())return this[_b(586)](!1);this[_b(583)]()},onOver:function(y){return function(l,d){var _=K(this),p=d.item,v="removeClass",C=(C=p.parent())[0]!=_[0]&&y.isDeny(C,_,p);d.helper.find(".ui-icon")[C?"addClass":v]("ui-icon-closethick")[C?v:"addClass"]("ui-icon-check")}},onStop:function(y){return function(l,p){var _=K(this),v=(p=p.item).parent();_[0]!=v[0]&&y.isDeny(_,v,p)&&(_.sortable("cancel"),y[_b(586)](!0))}},onTimer:function(y,l){clearTimeout(G);var d=this;G=setTimeout(function(){d.onReceive(y,l)})},refresh:function(){this.that.element.is(":visible")?(this.setHtml(),K(this.panes).sortable("refresh")):this[_b(587)]=!0},render:function(){var y=this,l="."+y.clsSort,d=y.that;d.element&&(y.panes=[y.$colsAll,y.$cols,y.$rows,y.$aggs],y.setHtml(),K(y.panes).sortable({appendTo:y.$ele,connectWith:l,containment:y.$ele,cursor:"move",items:_a(290),helper:function(_,p){return p.clone(!0).css({opacity:"0.8"}).prepend(_a(291))},receive:y.onTimer.bind(y),stop:y.onStop(y),over:y.onOver(y),update:y.onTimer.bind(y),tolerance:"pointer"}),d._trigger("tpRender"))},setHtml:function(){var y,l,d=this,W=d.that,_=[],p=[],v=[],C=[],D=d.template,I=d[_b(588)],P={},B=W.options,U=(W=W.iGroup)[_b(166)](),J=W[_b(177)](),re=(W=B.groupModel).dataIndx,he=W.groupCols,ie=0,ae=J.length,Me=d.$groupChk[0],Ce=d.$pivotChk[0];for(re.concat(he).forEach(function(Le){P[Le]=1}),Me&&(Me.checked=W.on),Ce&&(Ce.checked=W.pivot),d[_b(584)]();ie<ae;ie++)l=(y=J[ie]).dataIndx,y.tpHide||P[l]||(y.summary&&y.summary.type?C.push(I(l,y)):_.push(D(l,y)));re.forEach(function(Le){v.push(D(Le,U[Le]))}),he.forEach(function(Le){p.push(D(Le,U[Le]))}),d.$colsAll.html(_.join("")),d.$rows.html(v.join("")||d.ph(B[_b(589)])),d.$cols.html(p.join("")||d.ph(B[_b(590)])),d.$aggs.html(C.join("")||d.ph(B[_b(591)]))},setAttrPanes:function(){this.$ele.attr("panes",this.panes.filter(function(y){return y.is(":visible")}).length)},setHt:function(){this.$ele.height(this.$ele.parent()[0][_b(41)]),this[_b(587)]&&(this[_b(587)]=!1,this.refresh())},setSortCancel:function(y){this[_b(568)]=y},setInit:function(){this._inited=!0},show:function(){this._hide(!1)},showHideColPane:function(){this.$colsPane.css("display",this[_b(569)]()?"none":""),this[_b(592)]()},template:function(y,l){return["<div data-di='",y,_a(292),l.tpCls||"","'>",l.title,"</div>"].join("")},templateVals:function(y,l){var d=l.summary.type;return["<div data-di='",y,"' type='",d,_a(292),l.tpCls||"","'>",d,"(",l.title,")</div>"].join("")},toggle:function(){this._hide(this.isVisible())}}}(jQuery),function(K){function G(A){this.that=A,this.rtl=A.options.rtl,A.on("headerCellClick",this[_b(593)].bind(this)).on("destroy",this.onDestroy.bind(this))}K(document).on("pqGrid:bootup",function(A,y){var l=y.instance;l[_b(594)]=new G(l),l.HeaderMenu=function(){return l[_b(594)]}}),G.prototype={close:function(){this.$popup.remove(),this.$popup=null},popup:function(){return this.$popup},openFilterTab:function(){var A=this.$popup.find(_a(293)).closest("li").index();return this.$tabs.tabs("option","active",A),this.filterMenu},FilterMenu:function(){return this.filterMenu},getCM:function(){var A=this.that.options[_b(595)]||"Select All",y=this.nested;return[{editor:!1,dataIndx:"title",title:A,useLabel:!0,filter:{crules:[{condition:"contain"}]},type:y?null:"checkbox",cbId:y?null:"visible"},{hidden:!0,dataIndx:"visible",dataType:"bool",editable:function(l){return!l.rowData.pq_disable},cb:y?null:{header:!0}}]},getData:function(){var A=1,y=this,l=y.that,d=l[_b(115)];return l.Columns().reduce(function(_){var p=this.getColIndx({column:_}),v=!_.hidden,C=_.childCount;if(!_.menuInHide&&!_[_b(90)])return C&&(y.nested=!0),{visible:C?void 0:v,title:C?_.title:d.getTitle(_,p)||_.dataIndx,column:_,id:A++,pq_disable:_[_b(596)],pq_close:_[_b(597)],colModel:C?_.colModel:void 0}})},getGridObj:function(){var A=this.that;return K.extend({dataModel:{data:this.getData()},rtl:A.options.rtl,colModel:this.getCM(),check:this.onChange.bind(this),treeExpand:this[_b(598)].bind(this),treeModel:this.nested?{dataIndx:"title",childstr:"colModel",checkbox:!0,checkboxHead:!0,cbId:"visible",cascade:!0,useLabel:!0}:void 0},A.options.menuUI[_b(599)])},onChange:function(A,y){var l,d;y.init||(l=[],d=[],(y[_b(7)]?y[_b(7)]():y.rows).forEach(function(C){var p=(C=C.rowData).visible,v=(C=C.column).dataIndx;(C=C.colModel)&&C.length||(p?l:d).push(v)}),this.that.Columns().hide({diShow:l,diHide:d}))},onDestroy:function(){var A=this.$popup;A&&A.remove(),delete this.$popup},onHeadCellClick:function(A,y){var l=K(A[_b(32)].target);return l.hasClass("pq-filter-icon")?this[_b(600)](A,y,l):l.hasClass("pq-menu-icon")?this[_b(601)](A,y,l):null==this.that[_b(176)]().find(function(d){return!d.hidden})?this[_b(601)](A,y):void 0},getMenuHtml:function(d){var y={hideCols:"visible",filter:"filter"},l=d.map(function(_){return['<li><a href="#tabs-',_,_a(294),y[_],_a(295)].join("")}).join("");return d=d.map(function(_){return'<div id="tabs-'+_+'"></div>'}).join(""),[_a(296),this.rtl?"rtl":"ltr","'>",_a(297),"<ul>",l,"</ul>",d,"</div>","</div>"].join("")},getMenuH:function(A,y){return K.extend({},A.menuUI,y.menuUI)},open:function(A,y,l){var d,_,p=this,v=p.that,C=(y=y||v[_b(27)]({dataIndx:A}),A=null!=A?(p.menuH=p.getMenuH(v.options,d=v.columns[A])).tabs:["hideCols"],v=p.$popup=K(p[_b(602)](A)).appendTo(v.$header),p.$tabs=v.find(".pq-tabs"));return-1<A.indexOf("hideCols")&&(_=p.$grid=K("<div/>").appendTo(v.find("#tabs-hideCols")),p.grid=pq.grid(_,p.getGridObj())),-1<A.indexOf("filter")&&p[_b(603)](v.find("#tabs-filter"),d),pq.makePopup(p.$popup[0]),C.tabs({active:localStorage["pq-menu-tab"]||1,activate:function(D,I){localStorage["pq-menu-tab"]=K(this).tabs("option","active"),K(I.newPanel).find(".pq-grid").pqGrid("refresh")}}),v.resizable({handles:"e,w",maxWidth:600,minWidth:220}),v.position({my:"left top",at:"left bottom",of:l||y}),this},onMenuClick:function(A,y,l){return this.open(y.dataIndx,A,l),!1},onTreeExpand:function(A,y){y.nodes.forEach(function(l){l.column[_b(597)]=y.close})},appendFilter:function(p,y,D){var d=this,_=d.that,v=(p=K(_a(298)).appendTo(p),d.$popup||p),C=d.filterMenu=new(pq[_b(385)]);return D={filterRow:D,grid:_,column:y,$popup:v,menuH:this.menuH||this.getMenuH(_.options,y)},C.init(D),_=C.getHtml(),p.html(_),C.ready(p.children().get()),C.addEvents(),v.on("remove",function(){d.$popup=d.filterMenu=null}),p},onFilterClick:function(A,y,l){return y=this.$popup=this[_b(603)](this.that.$header,y.column,!0),pq.makePopup(y[0]),y.position({my:"left top",at:"left bottom",of:l}),!1}}}(jQuery),function(K){var G=pq[_b(385)]=function(){};(G.select=function(A,y){this.that=A,this.di1="selected",this.grid=null,this.column=y}).prototype={change:function(A){this.onChange(A).call(this.grid)},create:function(A,y,p){function d(C){var D=y[C];D&&D.call(_,v),_._trigger(C,null,v)}var _=this.that,v=(p=this.getGridObj(y,p),K.extend({obj:p,column:this.column},y));return d("selectGridObj"),p.rtl=_.options.rtl,v.grid=this.grid=pq.grid(A,p),d("selectGridCreated"),this.grid},getCM:function(A,y,l,d,_,C){var v=A.dataIndx;return C=K.extend({filter:{crules:[{condition:"contain"}]},align:"left",format:C.format||A.format,deFormat:A.deFormat,title:A.pq_title||A.title,dataType:A.dataType,dataIndx:v,editor:!1,useLabel:!0,renderLabel:this[_b(604)](d,v,this.that.options.strBlanks)},l?{}:{type:"checkbox",cbId:y}),l?[C,{dataIndx:y,dataType:"bool",hidden:!0},{dataIndx:l,hidden:!0}]:[C,{dataIndx:y,dataType:"bool",hidden:!0,cb:{header:!_,maxCheck:_}}]},getData:function(A,C){var l=this.that,d={},_=this.di1,p=(D=this.column).dataIndx,v=A.maxCheck,D=(C=pq.filter.getVal(C)[0],pq.filter.getOptions(D,A,l,!0));return K.isArray(C)?v&&(C=C.slice(0,v)):C=1==v?[C]:[],C.forEach(function(I){d[I]=!0}),D.forEach(C.length?function(I){I[_]=d[I[p]]}:function(I){I[_]=!v}),D},getGridObj:function(A,y){var D,l=this.column,d=this.that.options,_="gridOptions",p=A.groupIndx,v=A.maxCheck,C=this.di1,I=(D=this.getData(A,D=l.filter))&&D.length&&null!=D[0].pq_label?"pq_label":A.labelIndx;return this.filterUI=A,K.extend({colModel:this.getCM(l,C,p,I,v,A),check:this.onChange(!y),filterModel:"bool"===l.dataType?{}:void 0,groupModel:p?{on:!0,dataIndx:p?[p]:[],titleInFirstCol:!0,fixCols:!1,indent:18,checkbox:!0,select:!1,checkboxHead:!v,cascade:!v,maxCheck:v,cbId:C}:{},dataModel:{data:D}},d.menuUI[_],d[_b(157)][_],A[_])},getRenderLbl:function(A,y,l){return A===y&&(A=void 0),function(_){var p=(_=_.rowData)[A];return p||""!==_[y]?p:l}},onChange:function(A){var y=this,d=y.filterUI.condition;return function(){var _,p,v,C,D;A&&(_=!1,p=y.column.dataIndx,v=y.di1,C=y.that,D=this.getData().filter(function(I){return(I=I[v])||(_=!0),I}).map(function(I){return I[p]}),C.filter(_?{oper:"add",rule:{dataIndx:p,condition:d,value:D}}:{rule:{dataIndx:p,condition:d,value:[]}}),y[_b(605)]())}},refreshRowFilter:function(){this.that[_b(115)][_b(270)](this.column)}},G.prototype={addEvents:function(){var A=this;A.$sel0.on("change",A[_b(606)].bind(A)),A.$sel1.on("change",A[_b(607)].bind(A)),A[_b(608)].on("change",A[_b(609)].bind(A)),A.$clear.button().on("click",A.clear.bind(A)),A.$ok.button().on("click",A.ok.bind(A))},addEventsInput:function(){this.$inp&&(this.$inp.filter("[type='checkbox']").off("click").on("click",this.onInput.bind(this)),this.$inp.filter("[type='text']").off("keyup").on("keyup",this.onInput.bind(this)))},clear:function(){var A=this.that,d=this.column,y=this.cond0,l=this.getType(y);A.filter({rule:{dataIndx:d=d.dataIndx,condition:l?y:void 0},oper:"remove"}),this[_b(605)](),this.ready()},close:function(){this.$popup.remove()},filterByCond:function(A){var y,l,d,_,p,v,C,D=this,I=D.that,P=D.column.dataIndx,B=D.cond0,U=""===B,J=D.cond1,W=D.filterRow;D.showHide(B,J),W||(y=D.getModeVal(),l=D.getType(B),d=(_=D.getVal(0))[0],_=_[1],p=(v=D.getVal(1))[0],v=v[1],C=D.$gridR),"select"==l?(A&&I.filter({oper:"add",rule:{dataIndx:P,condition:B,value:[]}}),W||D.iRange.create(C,D.filterUI[0],D.btnOk)):A&&I.filter({oper:U?"remove":"add",rule:{dataIndx:P,mode:y,crules:[{condition:B,value:d,value2:_},{condition:J,value:p,value2:v}]}})},getBtnOk:function(){return this.$ok},getInp:function(A){return this["$inp"+A]},getSel:function(A){return this["$sel"+A]},getBtnClear:function(){return this.$clear},getHtmlInput:function(l){return"<input type='"+("checkbox"==(l=this.filterUI[l<2?0:1]).type?"checkbox":"text")+"' "+["name='",this.column.dataIndx,"' class='",l.cls||"","' style='width:100%;",l.style||"","display:none;' ",l.attr||""].join("")+" />"},getHtml:function(){function A(D,I){return[_a(299),y[_b(610)](D),"</div>",_a(299),y[_b(610)](I),"</div>"].join("")}var y=this,l=y.menuH,_=(p=(_=y.column.filter).crules||[])[0]||_,p=p[1]||{},d=y.that.options,v=(_=y.cond0=_.condition,p=y.cond1=p.condition,y.filterRow),C=(y[_b(611)](),pq.filter[_b(612)](this.column,y.filterUI[0]));return[_a(300),_a(299),d[_b(613)]," <select>",this[_b(614)](C,_),"</select></div>",v?"":["<div>",A(0,1),_a(301),l[_b(615)]?"":[_a(302),_a(303),_a(304),"</div>",_a(305),this[_b(614)](C,p,!0),"</select></div>",A(2,3)].join(""),"</div>"].join(""),_a(306),l.buttons.map(function(D){return"<button data-rel='"+D+_a(307)+(d["str"+pq.cap1(D)]||D)+"</button>"}).join(""),"</div>","</div>"].join("")},getMode:function(A){var y=this[_b(608)];return 0<=A?y[A]:y},getModeVal:function(){return this[_b(608)].filter(":checked").val()},getOptionStr:function(d,y,l){d=[""].concat(d);var _=this,p=_.that.options[_b(616)]||{};return(d=l?d.filter(function(v){return"select"!=_.getType(v)}):d).map(function(v){return'<option value="'+v+'" '+(y==v?"selected":"")+">"+(p[v]||v)+"</option>"}).join("")},getType:function(A){return pq.filter.getType(A,this.column)},getVal:function(C){var y,l,d=this.column,_=this["cond"+C],p=this["$inp"+(C?"2":"0")],v=p[0];return C=this["$inp"+(C?"3":"1")],p.is("[type='checkbox']")?(l=v[_b(16)],l=!!v.checked||!!l&&null):(p.is(":visible")&&(l=pq.deFormat(d,p.val(),_)),C.is(":visible")&&(y=pq.deFormat(d,C.val(),_))),[l,y]},init:function(A){var y=this.column=A.column;y.filter=y.filter||{},this.that=A.grid,this.menuH=A.menuH,this.$popup=A.$popup,this.filterRow=A.filterRow},initControls:function(){var A=this.filterUI[0],y=this.that,l={column:this.column,headMenu:!0};l.$editor=K([this.$inp0[0],this.$inp1[0]]),l.condition=this.cond0,l.type=A.type,(l.filterUI=A).init.find(function(d){return d.call(y,l)}),A=this.filterUI[1],l.$editor=K([this.$inp2[0],this.$inp3[0]]),l.condition=this.cond1,l.type=A.type,(l.filterUI=A).init.find(function(d){return d.call(y,l)})},isInputHidden:function(A){if("select"==A||!A)return!0},ok:function(){var A=this.cond0;"select"!=this.getType(A)||this.filterRow?A&&this[_b(617)](!0):this.iRange.change(!0),this.close(),this[_b(605)]()},onModeChange:function(){this[_b(617)](!this.btnOk)},onInput:function(y){y=K(y.target);var l=!this.btnOk;y.is(":checkbox")&&y.pqval({incr:!0}),this[_b(617)](l),l&&this[_b(605)]()},onSel1Change:function(){var A=!this.btnOk;this.cond0=this.getSel(0).val(),this[_b(611)](),this.filterRow||(this.$inp0[_b(314)](this[_b(610)](0)),this.$inp1[_b(314)](this[_b(610)](1)),this[_b(618)](),this[_b(619)]()),this[_b(617)](A),this[_b(605)]()},onSel2Change:function(){this.cond1=this.getSel(1).val(),this[_b(611)](),this.$inp2[_b(314)](this[_b(610)](2)),this.$inp3[_b(314)](this[_b(610)](3)),this[_b(618)](),this[_b(619)](),this[_b(617)](!this.btnOk)},ready:function(l){this.node=l=l||this.node,l=K(l);var y,d=this,_=d.that,p=d.column,v=p.filter,C=(D=v.crules||[])[0]||v,D=D[1]||{},I=d.cond0=C.condition,P=d.cond1=D.condition,B=d[_b(611)]();d.iRange=new(pq[_b(385)].select)(_,p),_=d.getType(I),p=d.getType(P),y=d.$select=l.find("select"),d.$sel0=K(y[0]).val(I),d.$sel1=K(y[1]).val(P),d[_b(608)]=l.find(_a(308)),d.$clear=l.find("[data-rel='clear']"),d.$ok=l.find("[data-rel='ok']"),d.btnOk=d.$ok.length,d.filterRow||(d[_b(618)](),d.$gridR=l.find("[data-rel='grid']"),d[_b(608)].filter("[value="+v.mode+"]").attr("checked","checked"),d[_b(620)]=l.find(".filter_mode_div"),d.showHide(I,P),"select"==_?d.iRange.create(d.$gridR,B[0],d.btnOk):d.readyInput(0,_,C),d.readyInput(1,p,D),d[_b(619)]())},readyInput:function(v,y,l){var d=this.column,_=this["cond"+v],p=this["$inp"+(v?"2":"0")];v=this["$inp"+(v?"3":"1")],p.is(":checkbox")&&p.pqval({val:l.value}),p.val(pq.formatEx(d,l.value,_)),"textbox2"==y&&v.val(pq.formatEx(d,l.value2,_))},readFilterUI:function(){var A=this.filterUI=[],y=this.that,l={column:this.column,condition:this.cond0,indx:0,headMenu:!0};return A[0]=pq.filter[_b(273)](l,y),l.condition=this.cond1,A[l.indx=1]=pq.filter[_b(273)](l,y),A},refreshInputVarsAndEvents:function(){var d=this.column,A=(d=this.$inp=K(this.node).find("input[name='"+d.dataIndx+_a(309)))[0],y=d[1],l=d[2];d=d[3],this.$inp0=K(A),this.$inp1=K(y),this.$inp2=K(l),this.$inp3=K(d),this[_b(621)]()},refreshRowFilter:function(){this.that[_b(318)]({dataIndx:this.column.dataIndx})},SelectGrid:function(){return this.$gridR.pqGrid("instance")},showHide:function(A,y){var l,d,_,p,v;this.filterRow||(d=(l=this)[_b(620)],_=l.$sel1,p=l.getType(A),v=l.$inp,"select"===p?(l.$gridR.show(),l.$gridR.hasClass("pq-grid")&&l.$gridR.pqGrid("destroy"),v.hide(),d.hide(),_.hide()):(l.$gridR.hide(),A?(l.$inp0[l[_b(622)](p)?"hide":"show"](),l.$inp1["textbox2"===p?"show":"hide"](),d.show(),_.show(),y?(A=l.getType(y),l.$inp2[l[_b(622)](A)?"hide":"show"](),l.$inp3["textbox2"===A?"show":"hide"]()):(l.$inp2.hide(),l.$inp3.hide())):(v.hide(),d.hide(),_.hide())))},updateConditions:function(){var A=this.column.filter;A.crules=A.crules||[{}],A.crules[0].condition=this.cond0,this.cond1&&(A.crules[1]=A.crules[1]||{},A.crules[1].condition=this.cond1)}}}(jQuery),function(K){var G=K.paramquery;K(document).on("pqGrid:bootup",function(A,y){new G.cEditor(y.instance)}),G.cEditor=function(A){var y=this,l=y.setDims.bind(y);(y.that=A).on("editorBeginDone",function(d,_){_.$td.addClass("pq-edited"),y.ui=_,y.setStyle(_),y.setDims();var p=_.editor.init;p&&A.callFn(p,_),"grid"!=_.editor.appendTo&&A.on("assignTblDims scroll",l)}).on("editorEnd",function(d,_){_.$td[_b(72)]("pq-edited"),A.off("assignTblDims scroll",l),delete y.ui})},G.cEditor.prototype={setStyle:function(A){var y=A.$td,l=y.children("div"),d=y.css("background-color");(d={fontSize:y.css("font-size"),fontFamily:y.css("font-family"),backgroundColor:d,color:y.css("color")}).padding=parseInt(l.css("padding-top"))+0+"px "+(parseInt(l.css("padding-right"))+0)+"px",A.$editor.css(d)},setDims:function(){var A,y,l,d,U,ce,_=this.ui,p=this.that,v=_[_b(75)],C=_.colIndx,Me=(Ce=_.$td)[0],D=p.iRenderB,J=D.wdContLeft,I=D.$cright[0],P=D[_b(168)](v,C)[0],B=0,W=(J="textarea"==("right"==(U=D[_b(343)](v,C))&&(B=J),"tr"==U&&(B=J),U=_.$editor)[0].type,"true"==U[0][_b(623)]),re=U.closest(".pq-editor-outer"),he=(D[_b(310)](v,C),Le=p.options).rtl,ie=he?"right":"left",Ce=Ce.offset(),ae=Me[_b(40)],ut=(Me=Me[_b(41)],Ce.left),qe=(Ce=Ce.top,ut+ae),Le=K.extend({},Le.editModel,(ce=_.column).editModel),De=(Ue=(ce=re.parent()).offset()).left,Ue=Ue.top,lt=(ce=ce[0])[_b(40)];lt=B<(lt=he?De+lt-qe:ut-De)?lt:B,ut=Me-2,De={minWidth:qe=ae-2},ce==p.element[0]?(A={top:y=Ce-Ue})[ie]=lt:(ae=(B=D[_b(310)](v,C))[0],y=B[1]+1-P.scrollTop,lt=ae+1-(he?-1:1)*P.scrollLeft,l=I[_b(624)]-y,d=I[_b(63)]-lt,De.maxHeight=l,De.maxWidth=d,(A={top:y})[ie]=lt),re.css(A),qe=d<qe?d:qe,De.minHeight=ut=l<ut?l:ut,De.width=qe,J&&(U.attr("rows")&&(De.maxHeight=De.minHeight=void 0),U.attr("columns")&&(De.maxWidth=De.minWidth=De.width=void 0)),U.css(K.extend(De,pq.styleObj(_.editor.style))),W&&U.pqContent(Le.saveKey!=K.ui.keyCode.ENTER)}}}(jQuery),function(K){var A=pq.grid,y=K.paramquery.cProxy=function(l){(this.that=l).options.reactive&&this.init()};K(document).on("pqGrid:bootup",function(l,d){(d=d.instance).iProxy=new y(d)}),pq.isEqual=function(l,d){if(pq.isObject(l)){for(var _ in l)if(!pq.isEqual(l[_],d[_]))return!1;return!0}return l===d},pq.grid=function(l,d){var _=A.apply(pq,arguments),p=_.iProxy,v=_.options;return v.reactive&&(_.on("filter",function(){d.dataModel&&(d.dataModel.data=v.dataModel.data),p.prxData()}),p.prxObj(d,p.onOption,!0)),_},y.prototype={init:function(){var l=this.that;this.prxData(),this.prxCM(),l.on("refresh",this.clear.bind(this)).on("dataReady",this.clearV.bind(this)).on("dataAvailable",this.clearDV.bind(this))},onOption:function(l,d){var _,p=this.that,v={},C=p.options;if(v[l]=d,p.element&&!pq.isEqual(v,C))if(this.refresh(),pq.isObject(C[l]))if("groupModel"==l)p.Group().option(d,!1),this[_b(17)]();else if("treeModel"==l)p.Tree().option(d);else if("sortModel"==l)p.sort(d);else for(_ in"dataModel"==l?(d.data&&this.prxData(d.data),this[_b(625)]()):"pageModel"!=l||!d.rPP&&null==d.type||this[_b(625)](),d)p.option(l+"."+_,d[_]);else"colModel"==l?this.prxCM(d):"mergeCells"==l&&this[_b(17)](),p.option(l,d)},onCMChange:function(){var l=this,d=l.that;clearTimeout(l.CMtimer),l.CMtimer=setTimeout(function(){d.refreshCM(),l.refresh()}),d.one("CMInit",function(){clearTimeout(l.CMtimer)})},prxCM:function(p){var d=this;(p=p||d.that.options.colModel)&&(d.prxArray(p,d.onCMChange.bind(d)),p.forEach(function(v){v.colModel&&d.prxCM(v.colModel)}))},prxData:function(p){var d=this,_=d.that;(p=p||_.options.dataModel.data)&&d.prxArray(p,function(){clearTimeout(d.datatimer),d.datatimer=setTimeout(function(){d[_b(17)]()}),_.one("dataReady",function(){clearTimeout(d.datatimer)})})},prxArray:function(l,d){var _=this,p=Array.prototype;_a(310).split(" ").forEach(function(v){l[v]=function(){var C=arguments,D="splice"==v,I=Object[_b(626)](l)[v].apply(this,C);return"push"!=v&&!D&&"unshift"!=v||_[_b(627)](D?p.slice.call(C,2):C),d.call(_),I}}),_[_b(627)](l)},prxArrayObjs:function(l){for(var d=0,_=l.length;d<_;d++)this.prxObj(l[d])},prxObj:function(l,d,_,p){if(pq.isObject(l)&&"tabModel"!=p){var v,C,D="pq_proxy";for(C in l[D]||Object[_b(45)](l,D,{value:{},enumerable:!1}),(v=l[D]).__self=this,l)"pq_"!=C.substr(0,3)&&(_&&!p&&pq.isObject(l[C])&&this.prxObj(l[C],d,_,C),v.hasOwnProperty(C)||(Object[_b(45)](v,C,Object[_b(44)](l,C)),this.defineProp(l,v,C,d,_,p)))}},defineProp:function(l,d,_,p,v,C){Object[_b(45)](l,_,{get:function(){return d[_]},set:function(D){var I,P=d.__self;v&&!C&&pq.isObject(D)&&P.prxObj(D,p,v,_),d[_]=D,p?(I=D,C&&((I={})[_]=D),p.call(P,C||_,I)):P.refresh()},enumerable:!0})},clear:function(){clearTimeout(this.timer)},clearV:function(){this.clear(),clearTimeout(this.timerV)},clearDV:function(){this.clearV(),clearTimeout(this.timerDV)},X:function(l,d){var _=this;_[d]=setTimeout(function(){_.that.element&&_.that[l]()})},refresh:function(){this.clear(),this.X("refresh","timer")},refreshView:function(){this.clearV(),this.X("refreshView","timerV")},refreshDataView:function(){this.clearDV(),this.X("refreshDataAndView","timerDV")}}}(jQuery),function(K){K.widget("pq.drag",K.ui.mouse,{_create:function(){this._mouseInit()},_mouseCapture:function(G){return this._trigger("capture",G),!0},_mouseStart:function(G){return this._trigger("start",G),!0},_mouseDrag:function(G){this._trigger("drag",G)},_mouseStop:function(G){this._trigger("stop",G)}})}(jQuery),function(K){K(document).on("pqGrid:bootup",function(A,y){var l=y.instance;l.iPic=new G(l),l.Pic=function(){return l.iPic}});var G=K.paramquery.cPic=function(A){var y=this,l=A.options,d=y.rtl=l.rtl;y.id=0,y.left=d?"right":"left",y.pics=[],(y.that=A).on("dataAvailable",function(_,p){"filter"!=p.source&&(y.reset(),A.one("refresh",function(){y.addPics(l.pics)}))}).on("assignTblDims",y.refresh.bind(y))};G.prototype={addPics:function(A){var y=this;(A||[]).forEach(function(l){y.add(l.name,l.src,l.from,l.to,l.cx,l.cy,!0)})},create:function(A,y,l,B,_,p,v,C,D){var I=this,P=new Image,U=(B={position:"absolute",top:B,zIndex:5},K(P));P.src=y,B[I.left]=l,A.append(P),(y=U.attr({draggable:!1,"pic-id":D,tabindex:1}).css({height:p,width:_,cursor:"move"}).on("focus",function(){K(C).css({outline:"2px dotted #999"})}).on("keydown",function(J){J.keyCode==K.ui.keyCode.DELETE&&I.remove(I.getId(this))}).on("blur",function(){K(C).css({outline:""})}).resizable({resize:I.onResize(I,C,v)}).parent(".ui-wrapper").css(B)).find(".ui-resizable-se")[_b(72)]("ui-icon"),l=I.drag(y,C,v),U.drag({distance:3,capture:function(){U.focus()},start:l.start,drag:l.drag,stop:l.stop}),C.push(y[0])},drag:function(A,y,l){function d(re){return parseInt(A.css(re))}var _,p=this,v=p.that,C=v.iRenderB,D=l.cx,I=l.cy,P=C.leftArr,B=C.topArr,U=P[P.length-1],J=B[B.length-1],W=C.numColWd;return{start:function(re){_={pageX:re.pageX,pageY:re.pageY,scrollX:v.scrollX(),scrollY:v.scrollY()}},drag:function(re){var he=v.scrollX(),ie=v.scrollY(),ae=(re.pageX+he-_.pageX-_.scrollX)*(p.rtl?-1:1),Me=re.pageY+ie-_.pageY-_.scrollY,Ce=d(p.left),Le=d("top"),Ue={};_.pageX=re.pageX,_.scrollX=he,_.pageY=re.pageY,_.scrollY=ie,Ce+ae-W<0?ae=W-Ce:U+W<Ce+ae+D&&(ae=U+W-Ce-D),Le+Me<0?Me=0-Le:J<Le+ae+I&&(Me=J-Le-I),Ue.top=Le+Me,Ue[p.left]=Ce+ae,K(y).css(Ue)},stop:function(){var re=d(p.left)-W,he=d("top"),ie=p.findIndx(P,re),ae=p.findIndx(B,he);l.from=[ie,re-P[ie],ae,he-B[ae]]}}},onResize:function(A,y,l){return function(d,v){var p=v.size.height,C={height:p,width:v=v.size.width};K(y).css(C),K(y).find("img").css(C),delete l.to,l.cx=v,l.cy=p}},getPos:function(A){var d;return[(d=(d=this.that.iRenderB).getCellXY(+A[2],+A[0]))[0]+A[1],d[1]+A[3]]},name:function(A){return A.replace(/[^0-9,a-z,A-Z,_\.]/g,"_")},refresh:function(){var A=this,y=A.that.widget();A.pics.forEach(function(p){var _=p.from,d=(p=p.id,(_=A.getPos(_))[0]);_={top:_[1]},p=y.find("[pic-id="+p+"]").parent(),_[A.left]=d,p.css(_)})},add:function(A,y,l,d,_,p,v){var C,D,I,P,B,U,J,W,re,he,ie,ae=this;if(y)return"data:"!=y.substr(0,5)?(A=A||y.split("/").pop(),pq.urlToBase(y,function(Me){ae.add(A,Me,l,d,_,p,v)})):(D=(C=ae.that).iRenderB,B=ae.getPos(l),I=B[0],P=B[1],W=[],re=ae.id++,ie=function(Me,Ce){(J={name:A,src:y,get from(){var Le=this._from;return[C.getColIndx({column:Le[0]}),Le[1],Le[2].pq_ri,Le[3]]},set from(Le){this._from=[C.colModel[Le[0]],Le[1],C.getRowData({rowIndx:Le[2]}),Le[3]]},cx:Me,cy:Ce,id:re}).from=l,["$cright","$cleft","$clt","$ctr"].forEach(function(Le){ae.create(D[Le],y,I,P,Me,Ce,J,W,re)}),ae.pics.push(J),v||C.iHistory.push({callback:function(Le){Le?re=ae.add(A,y,l,d,Me,Ce,!0):ae.remove(re,!0)}}),C._trigger("picAdd")},d&&d.length?(B=(U=D.getCellXY(U=d[2],B=d[0]))[0]+d[1],ie(B-I,(U=U[1]+d[3])-P)):p?ie(_,p):((he=new Image).onload=function(){ie(he.width,he.height)},he.src=y)),re},findIndx:function(A,y){return A.findIndex(function(l){return y<l})-1},getId:function(A){return K(A).attr("pic-id")},remove:function(A,y){var l,d=this,_=d.that,p=d.pics.findIndex(function(v){return v.id==A});_.widget().find("[pic-id="+A+"]").remove(),l=d.pics.splice(p,1)[0],y||_.iHistory.push({callback:function(v){v?d.remove(A,!0):A=d.add(l.name,l.src,l.from,l.to,l.cx,l.cy,!0)}})},reset:function(){this.that.widget().find("[pic-id]").remove(),this.pics.length=0,this.id=0}}}(jQuery),function(K){var G,A,y,l,d=K.fn.val;function _(){return window[_b(206)]()}function p(){return document[_b(205)]()}function C(P){var B=_().getRangeAt(0),U=p();return B[_b(630)]==P?[B[_b(551)],P]:(U[_b(207)](P),U.setEnd(B[_b(630)],B[_b(551)]),[U.toString().length])}function D(){G[++l]={indx:C(A),dom:A.cloneNode(!0)}}K.fn.val=function(P){var B,U,J,W=this[0];return W&&"true"==W[_b(623)]?arguments.length?void(null!=P&&(W.innerHTML=(P+"").replace(/\n/g,"<br>"),B=W,U=_(),J=p(),B.lastChild&&(U[_b(208)](),J[_b(629)](B.lastChild),U.addRange(J)))):(B=W.innerHTML,"html"==y?B:(B=B.replace(/<br>/g,"\n"),K("<p>").html(B).text())):d.apply(this,arguments)},K.fn.pqContent=function(P){var B=A=this[0],U="pq-content";this.hasClass(U)||(y=this.attr("dataType"),G=[],l=-1,this.addClass(U).attr("spellcheck",!1).on("keydown",function(J){var W,re,he,ie;if(G.length||D(),13!=J.keyCode||y&&0!=y.indexOf("string")&&"html"!=y?J.ctrlKey&&(90==J.keyCode?(0<l&&(l--,W=1),he=1):89==J.keyCode&&(l<G.length-1&&(l++,W=1),he=1),W&&(ie=(re=G[l]).dom.childNodes,A.innerHTML="",K(ie).toArray().forEach(function(ae){A[_b(633)](ae.cloneNode(!0))}),function ae(Me,Ce,Ue){if(Ue!=Me)return K(Me.childNodes).toArray().forEach(function(lt){var qe,ut,De;0<=Ce&&("#TEXT"==lt.nodeName[_b(37)]()?(qe=lt[_b(631)]).length>=Ce?(ut=p(),De=_(),ut.setStart(lt,Ce),ut.collapse(!0),De[_b(208)](),De.addRange(ut),Ce=-1):Ce-=qe.length:Ce=ae(lt,Ce))}),Ce;Ue=p();var ce=_();Ue.setStart(Me,Ce),Ue.collapse(!0),ce[_b(208)](),ce.addRange(Ue)}(B,re.indx[0],re.indx[1]))):((J.altKey||P)&&function v(P){function B(){var he=document[_b(628)]("br");J.insertNode(he),J[_b(629)](he)}var U=P.childNodes,J=_().getRangeAt(0),W=J[_b(630)],re=J[_b(551)];(!U.length||W==P&&3==U[re-1].nodeType||3==W.nodeType&&W[_b(631)].length==re&&null==W[_b(632)])&&B(),B()}(B),he=!0),W||function I(){!function P(B,U){var J,W;if(G[l])return B=K(B.childNodes).toArray(),J=K(U||G[l].dom.childNodes).toArray(),W=!1,B.length!=J.length||(B.forEach(function(re,he){W||(re.nodeName!=(he=J[he]).nodeName||3==re.nodeType&&re.nodeValue.split(/\s/).length!=he.nodeValue.split(/\s/).length?W=!0:re.childNodes&&re.childNodes.length&&(W=P(re,he)))}),W)}(A)?(G[l].dom=A.cloneNode(!0),G[l].indx=C(A)):D()}(),he)return!1}))}}(jQuery),function(K){K(document).on("pqGrid:bootup",function(A,y){var l=y.instance;l.iRowResize=new G(l),l.RowResize=function(){return l.iRowResize}});var G=K.paramquery.cRowResize=function(A){this.that=A,this.ht=8,A.options.rowResize&&A.on(!0,"cellMouseDown",this.onCellDown.bind(this)).on("cellMouseEnter",this[_b(634)].bind(this))};G.prototype={onCellDown:function(A,y){if(-1==y.colIndx){var l=A.pageY,d=A[_b(125)],_=K(d);if(l>=_.offset().top+d[_b(41)]-this.ht)return this.createDrag(_,y),(l=K.Event("mousedown",A)).type="mousedown",_.trigger(l),!1;_.draggable("instance")&&_.draggable("destroy")}},onCellEnter:function(A,y){-1==y.colIndx&&(y="pq-row-resize",A=K(A[_b(125)]),this.drag||A.find("."+y).length||A.append("<div class='"+y+_a(311)+(this.ht-1)+_a(312)))},createDrag:function(A,y){var l,d=this,_=d.that,p=y.rowData,v=y[_b(75)],C=_.iRenderB,D=_.$cont,I=_a(313);A.hasClass("ui-draggable")||A.on("dblclick",function(){delete p.pq_htfix,C.autoHeight({})}).draggable({axis:"y",cursor:"row-resize",cursorAt:{top:-2},start:function(P){d.drag=!0,l=P.pageY,d.$top=K("<div style='"+I+_a(314)+(C.getTop(v)-C.scrollY())+"px;'></div>").appendTo(D)},helper:function(){return K("<div style='"+I+"'></div>").appendTo(D)},stop:function(B){d.drag=!1,B=B.pageY-l;var U=C.rowhtArr;d.$top.remove(),p.pq_ht=Math.max(U[v]+B,10),p.pq_htfix=!0,_.refresh()}})}}}(jQuery),function(K){K(document).on("pqGrid:bootup",function(y,l){var d=l.instance;d.iTab=new A(d),d.Tab=function(){return d.iTab}});var G=K.paramquery,A=G.cTab=function(y){var l=this,d=y.options,_=d.tabModel||{},p=_.tabs;l.that=y,p&&(p.length||p.push({name:d.title,_inst:y}),_.byRef=!0,l.model=_,l._tbs=p,_._main||(null==(d=_.activeId)&&(d=p.findIndex(function(v){return!v.hidden})),Object[_b(45)](_,"activeId",{get:function(){return this.tabs.indexOf(this._at)},set:function(v){this._at=this.tabs[v]},configurable:!0}),_.activeId=d,(_._main=_._at._inst=y).on("destroy",l.onDestroy.bind(l)),l[_b(635)](_._at,!0)),y.on("change",l.onChange.bind(l)).on("render",l.onRender.bind(l)).on("toggle",l.onToggle.bind(l)))};G.pqGrid.defaults.tabModel={newTab:function(){return{sheet:{},extraRows:20,extraCols:10}}},A.prototype={activeTab:function(){return this.model._at},grid:function(y){return y._inst},activate:function(y){var l=this.model,d=this._tbs[y],_=d._inst,p=l.activeId,v=l._at._inst.widget();return _?p!=y&&(v.hide(),_.widget().show(),l._at=d,_.iTab.refresh(),_.refresh()):_=this.create(y,!0),this.trigger("tabActivate",null,{tab:d}),_},add:function(){var y=this.model.newTab.call(this.main());y.name=y.name||this.getTitle(),this._tbs.push(y),this.refresh()},clear:function(){var y=this._tbs,l=this.model;y.forEach(function(d){(d=d._inst)&&d!=l._main&&d.widget().remove()}),y.length=0},create:function(y,l){var d=this.model,_=(p=this._tbs)[y];if(p=_._inst)return p;var p=d._at._inst.widget(),v=this.getOptions(_),C=K("<div/>")[_b(169)](p);return delete _.sheet,C[0].style.cssText=p[0].style.cssText,l?(d.activeId=y,p.hide()):C.hide(),v.render=function(){_._inst=this},pq.grid(C,v)},findActive:function(y){var l,d,_,v,p=this._tbs;if(-1==p.indexOf(v=(v=this.model)._at)||v.hidden){for(d=y;d<p.length;d++)if(!(l=p[d]).hidden){_=d;break}if(null==_)for(d=y;0<=d;d--)if((l=p[d])&&!l.hidden){_=d;break}this.activate(_)}else this.refresh()},remove:function(y){var l=this.model,d=this._tbs,_=d[y]._inst,p=l.activeId;1<this.show().length&&(d.splice(y,1),this.findActive(p),_&&_!=l._main&&_.destroy())},rename:function(d,l){var _=(d=this._tbs[d]).name;this.isValid(l)&&(d.name=l,this.trigger("tabRename",null,{tab:d,oldVal:_}),this.refresh())},edit:function(y){var l=this,d=l._tbs[y];K(_a(315)+d.name+'">').appendTo(l.getTab(y)).on("change",function(_){var p=K.trim(this.value);l.rename(y,p)}).on("focusout",function(){l.refresh()}).focus().select()},getId:function(y){return K[_b(43)](y)?this._tbs.indexOf(y):null!=(y=K(y).attr("tabId"))?+y:null},getSheetOptions:function(y,l){var d,_=this.that,p=_.iImport,v=y.sheet,C=v?p.importS(v,y.extraRows,y.extraCols):{};return l&&(v||(d=this[_b(636)](y)))&&(K.extend(C,d),p[_b(503)](_,C)),C},getGridOptions:function(y){return"function"==typeof(y=y[_b(599)])?y.call(this.main()):y},getOptions:function(y){var l=this.that.options,d="collapsible",_=l[d],p=K.extend(!0,{},this.model._options);return K.extend(p,this[_b(635)](y),this[_b(636)](y)),["width","height","maxHeight","maxWidth","tabModel"].forEach(function(v){p[v]=l[v]}),K.extend(!0,p[d]=p[d]||{},{state:_.state,toggle:_.toggle,toggled:_.toggled}),p},getTab:function(y){return this.$tabs.find("[tabId="+y+"]")[0]},getTitle:function(){var y=this.that.options.strTabName||"{0}",l=(l=this._tbs).map(function(d){return(d=(d.name||"").match(new RegExp(y.replace("{0}","(\\d+)"),"i")))?+d[1]:0}).sort(function(d,_){return d-_});return y.replace("{0}",l.length?l.pop()+1:1)},hide:function(y){return this.show(y,!0)},isValid:function(y){if(y.length&&y.length<=31&&!this._tbs.find(function(l){return l.name[_b(37)]()==y[_b(37)]()})&&!"/\\*?:[]".split("").find(function(l){return 0<=y.indexOf(l)}))return!0},main:function(){return this.model?this.model._main:this.that},trigger:function(y,l,d){this._tbs.forEach(function(_){(_=_._inst)&&_._trigger(y,l,d)})},find:function(y,l){return this._tbs.find(function(d){return d[y]==l})},onChange:function(y,l){l.tab=this.find("_inst",this.that),this.trigger("tabChange",y,l)},onClick:function(p){var d=(p=K(p.target)).hasClass("ui-icon-close"),_=this.that.options[_b(637)]||"";null!=(p=this.getId(p.closest(".pq-tab-item")))&&(d&&1!=confirm(_.replace("{0}",this._tbs[p].name))||this[d?"remove":"activate"](p))},onDestroy:function(){this.clear()},onDblClick:function(y){y=K(y.target).closest(".pq-tab-item"),null==(y=this.getId(y))||this._tbs[y].noRename||this.edit(y)},onPlus:function(){this.add()},onLeft:function(y){var l=this.$tabs,d=l[0],_=.8*d[_b(63)],p=pq.scrollLeft(d);p=1==y?p+_:Math.max(p-_,0),l.animate({scrollLeft:pq[_b(638)](d,p)},300)},onRight:function(){this.onLeft(!0)},onRender:function(){function y(U){return function(J){"click"!=J.type&&J.keyCode!=K.ui.keyCode.ENTER||d[U](J)}}function l(U,J,W){return"<div tabindex=0 "+(W||"")+" class='"+U+_a(316)+J+_a(317)}var d=this,_=d.that,p=(B=_.options).tabModel,v=B.rtl,C="click keydown",D="ui-icon-triangle-1-w",I="ui-icon-triangle-1-e",P=d.model,B=d.$cont=K(_a(318)+(p.noAdd?"":l("pq-tab-plus","ui-icon-plus","title='"+B.strTabAdd+"'"))+l("pq-tab-w",v?I:D)+_a(319)+(p.css||"")+"'></div>"+l("pq-tab-e",v?D:I)+"</div>").appendTo(p.atTop?_.$top:_.$bottom);P._options||pq.copyObj(P._options={},_[_b(87)],["dataModel","colModel","tabModel"]),B.find(".pq-tab-plus").on(C,y("onPlus")),d.$leftBtn=B.find(".pq-tab-w").on(C,y("onLeft")),d.$rightBtn=B.find(".pq-tab-e").on(C,y("onRight")),v=d.$tabs=B.find(".pq-tabs-strip").on(C,y("onClick")),P.noSortable||v.sortable({axis:"x",distance:3,start:function(){K(_a(320)).html("a")},update:d.onMove.bind(d)}),v.on("dblclick",d.onDblClick.bind(d)).on("scroll",d.onScroll.bind(d)),d.refresh()},onMove:function(y,p){var d=this._tbs,_=this.getId(p=p.item),v=(p=this.getId(p.prev())||-1,d.splice(_,1)[0]);d.splice(p+(_<p?0:1),0,v),this.refresh()},onScroll:function(y){this.model.scrollLeft=pq.scrollLeft(y.target),this[_b(639)]()},onToggle:function(y,l){var d=this,_=d._tbs,p=d.model,v=d.that,C=v.options[_b(90)],D="max"==l.state;p.toggle||(v.one("refresh",function(){d.setBtn(),d[_b(639)]()}),p.toggle=1,_.forEach(function(B){var P;(B=B._inst)&&B.element[0]!=v.element[0]&&(P=B.options[_b(90)],B.toggle({refresh:!1}),D&&(P.state=K.extend(!0,{},C.state)),B.element.hide())}),p.toggle=0)},refresh:function(){var y,l=this,d=[],_=l._tbs,p=l.that,v=l.model,C=p.options[_b(640)]||"",D=v._at,I=v.activeId;if(D&&(v=D._inst)&&p!=v)return v.Tab().refresh();y=l.show(),_.forEach(function(P,B){P.hidden||(P.name=P.name||l.getTitle(),d.push(_a(321)+(B==I?"pq-bg-3 pq-active":"")+"' tabId='"+B+"'><div>"+pq.escapeHtml(P.name)+"</div>"+(1<y.length&&!P.noClose?"<div title='"+C+"' class='ui-icon ui-icon-close'></div>":"")+"</div>"))}),l.$tabs.html(d.join("")),l.setBtn(),l.restoreSL(),l[_b(639)]()},setBtnEnable:function(){var y={cursor:"default",opacity:.5},l={cursor:"",opacity:""},d=(_=this.$tabs[0])[_b(62)]-_[_b(63)],_=pq.scrollLeft(_);this.$leftBtn.css(_?l:y),this.$rightBtn.css(d<=_?y:l)},setBtn:function(){var y=this.$tabs,l=y[0],d=this.$leftBtn,_=this.$rightBtn;d.hide(),_.hide(),y.css("width","calc(100% - 25px)"),l[_b(62)]-l[_b(63)]&&(d.show(),_.show(),y.css("width","calc(100% - 75px)"))},restoreSL:function(){var d,y=(d=this.model).activeId,l=this.$tabs;null==(d=d.scrollLeft)&&null!=y&&(d=l.find("[tabid="+y+"]")[0].offsetLeft),pq.scrollLeft(l[0],d)},show:function(y,l){var d=this._tbs,_=[];if(!y)return d.forEach(function(p){!p.hidden==!l&&_.push(p)}),_;y.forEach(function(p){d[p].hidden=l}),this.findActive(this.model.activeId)},tabs:function(){return this._tbs}}}(jQuery),function(K){K(document).on("pqGrid:bootup",function(A,l){var d=(l=l.instance).options;"lazy"==d.dataModel.location&&(l.iLazy=new G(l,d))});var G=K.paramquery.Lazy=function(A,y){var l=this;l.grid=A,l.rpp=y.pageModel.rPP,A.on("scrollEnd",l.onScroll.bind(l)).on("customSort",l.customSort.bind(l)).on("customFilter",l[_b(641)].bind(l)).on("lazyProgress",l.progress.bind(l)).on("lazyComplete",l.onComplete.bind(l))};G.prototype={init:function(A){var y=this,l=y.grid,d=l[_b(156)](A=A||{});y.dataURL=d.dataURL,y.url=d.url,l._trigger("lazyInit",null,A),y[_b(85)]=null,y[_b(642)]=[],y.data=null,y.complete=!1,y.xhr&&y.xhr.abort(),y.bars=[],y.request(A)},customSort:function(A,y){if("local"==this.grid.option("sortModel.type")&&!this.complete)return!1},customFilter:function(A,y){var l=this.complete,d=this.grid;if("local"==d.option("filterModel.type")&&!l)return y.dataTmp=d.options.dataModel.data,y.dataUF=[],y.trigger=!1},progBar:function(){var A=this.grid,y=this.bars,l=A.iTab,d=(A=(d=A.options.dataModel)[_b(643)]?l.grid(l.activeTab()):A).widget().find(".pq-grid-pbar")[0];return-1==y.indexOf(d)&&y.push(d),K(y)},progress:function(A,y){var l=this.progBar(),d=y.percent+"%";l.show().stop().animate({width:d},{always:function(){l.css({width:d})}})},onComplete:function(A,y){var l=this.progBar();l.animate({width:"100%"},{complete:function(){l.css({width:0}).hide()}}),this.grid[_b(147)](y)},onScroll:function(){this.complete||this.request()},triggerProgress:function(){var A=0,y=this[_b(642)];y.forEach(function(l){l&&A++}),this.grid._trigger("lazyProgress",null,{percent:Math.round(100*A/y.length,2)})},triggerComplete:function(A){var y=this.grid;this.complete||(this.complete=!0,y._trigger("lazyComplete",null,A))},request:function(A){A=A||{};var y,l,d,_,p=this,v=p.grid,C=v.options.pageModel,D=v[_b(193)](),I=D.initV,P=p.dataURL,B=I,U=p.data,J=p.rpp,W=p[_b(642)],re=p.totalPages,he=D.finalV;if(U&&null!=I){for(;B<=he;B++)if(U[B]&&U[B].pq_empty){d=_=Math.floor(B/J)+1;break}if(!d)for(y=l=Math.floor(I/J)+1,B=0;B<=re;B++){if(0==W[y]){_=y;break}if(0==W[l]){_=l;break}y--,l++}}else _=1;if(!_)return p[_b(644)](A),!1;C.curPage=_,p.xhr&&p.xhr.abort(),P=K.extend(P,{pq_curpage:_,pq_rpp:C.rPP}),p.xhr=K.ajax({url:p.url,dataType:"json",data:P,success:function(qe,ae,Me){var Ce,Le=qe.data,Ue=qe[_b(85)],ce=Le.length,lt=ce,ut=(qe=qe.curPage,p.data=p.data||[]),De=(qe-1)*p.rpp;if(null==p[_b(85)]){for(Ce=!0;lt<Ue;lt++)ut[lt+De]={pq_empty:!0};for(p[_b(85)]=Ue,re=p.totalPages=Math.ceil(Ue/J),lt=1;lt<=re;lt++)W[lt]=!1;v.option("dataModel.data",ut)}for(W[qe]=!0,lt=0;lt<ce;lt++)ut[lt+De]=Le[lt],ut[lt+De].pq_empty=!1;Ce?v[_b(17)]({header:A.header,trigger:!1,triggerQueue:!1,group:!1}):d&&v.refresh({header:!1}),null!=I?0!=p.request(A)&&p[_b(645)]():p[_b(644)](A)}})}}}(jQuery),function(K){var G=pq.cVirtual=function(){this.diffH=0,this.diffV=0};G.setSBDim=function(){var A=K(_a(322)).appendTo(document.body),y=A[0];this.SBDIM=y[_b(41)]-y[_b(624)],A.remove()},G.prototype={assignTblDims:function(A){var y=this,l=y.isBody(),d=y.getTopSafe(this[A?"cols":"rows"],A,!0),_=((_=y.maxHt)<d?(y[A?"ratioH":"ratioV"]=d/_,y[A?"virtualWd":"virtualHt"]=d,d=_):(d=d||(y.isHead()?0:1),y[A?"ratioH":"ratioV"]=1),y.$tbl_right[0]),p=(p=y[A?"$tbl_tr":"$tbl_left"]).length?p[0]:{style:{}},v=A?"width":"height";_.style[v]=d+"px",p.style[v]=d+"px",_=l?"Tbl":y.isHead()?"TblHead":"TblSum",!l&&A&&y.$spacer.css(y.rtl,d),y.dims[A?"wd"+_:"ht"+_]=d,l&&y[_b(646)](100)},calInitFinal:function(A,y,l){var d,_,p,v=this[l?"cols":"rows"],C=this[l?"freezeCols":"freezeRows"],D=this[l?"leftArr":"topArr"],I=this.getTopSafe(C,l);if(0==this.that.options[l?"virtualX":"virtualY"])return[C,v-1];if(C==v)return[0,C-1];if(l&&(I-=this.numColWd),A+=I,y+=I,C<v&&D[C]<A){for(var P,B=30,U=v;B--;)if(D[P=Math.floor((C+U)/2)]>=A)U=P;else{if(C==P){p=!0;break}C=P}if(!p)throw"ri not found"}for(;C<=v;C++)if(D[C]>A){d=C&&C-1;break}for(;C<=v;C++)if(D[C]>y){_=C-1;break}return null==d&&null==_&&v&&A>D[v-1]?[null,null]:[d=null==d?0:d,_=null==_?v-1:_]},calInitFinalSuper:function(){var A=this.dims||{},y=(d=this[_b(647)]())[0],l=d[1],d=d[2],_=this[_b(647)](!0),p=_[0],v=_[1],C=(D=this[_b(648)](y,l))[0],D=D[1],I=(P=this[_b(648)](p,v,!0))[0],P=P[1];return this.isBody()&&(A.bottom=l,A.top=y,A.left=p,A.right=v),[C,I,D,P,d||_[2]]},calcTopBottom:function(A){var y,l,d,_,p,v=this,C=v.isBody(),J=v.dims,U=v.virtualWin,B=(D=v.$cright)[0],D=A?(I=pq.scrollLeft(B),d=v.sleft,_=J.wdCont,p=v.wdContLeft,v.ratioH):(U&&(W=K(window).scrollTop()-D.offset().top),I=U?v._calcTop(B,W):B.scrollTop,d=v.stop,_=v.htCont,p=v.htContTop,v.ratioV),I=I<0?0:I;if(1==D)return l=I+_-p,[I,l=0<=(l=A||!U?l:v._calcBot(I,l,W))?l:0];B=v[A?"virtualWd":"virtualHt"],U=A?J[_b(649)]:J[_b(650)];var P,W=v[J=A?"diffH":"diffV"];if(G.maxHt<=I+U?y=(l=B-p+(_-U))-_+p:l=(y=0==I?0:I*(B=null==d||Math.abs(I-d)>_?D:1)+(1==B&&W?W:0))+_-p,(U=y-I)!=W&&(P=!0,v[J]=U,C&&v[_b(646)](3e3)),!(0<=(v[A?"sleft":"stop"]=I)))throw"stop NaN";if(0<=l&&0<=y)return[y,l,P];throw"top bottom NaN"},_calcTop:function(A,y){return A.scrollTop+(0<y?y:0)},_calcBot:function(A,y,l){return(A=A+K(window).height()+(l<0?l:0))<y?A:y},getHtDetail:function(A,y){return(A=A.pq_detail)&&A.show?A.height||y:0},getTop:function(A,d){var l=this.topArr[A];if(0<=(l=(d=d?0:this.diffV)&&(l-=A>this.freezeRows?d:0)<0?0:l))return l;throw l},getTopSafe:function(A,y,l){var d=y?this.cols:this.rows;return this[y?"getLeft":"getTop"](d<A?d:A,l)},getLeft:function(_,y){var d,p;if(_=-1==(d=(d=(p=this.leftArr).length-1)<_?d:_)?0:p[d]+this.numColWd,0<=(_=(p=y?0:this.diffH)&&(_-=d>this.freezeCols?p:0)<0?0:_))return _;throw _},getHeightR:function(A,d){var l=this.topArr;if(0<=(d=l[A+(d=d||1)]-l[A]))return d;throw d},getHeightCell:function(A,_){_=_||1;var l=this.topArr,d=(d=this[_b(335)])?this[_b(651)](this.data[A+_-1],d):0;if(0<=(_=l[A+_]-l[A]-d))return _;throw _},getHeightCellM:function(A,y){return this.getTopSafe(A+y)-this.getTop(A)},getHeightCellDirty:function(A,y){return this.setTopArr(A,null,A+y),this[_b(652)](A,y)},getWidthCell:function(A){if(-1==A)return this.numColWd;if(0<=(A=this.colwdArr[A]))return A;throw A},getWidthCellM:function(A,y){return this.getTopSafe(A+y,!0)-this.getLeft(A)},initRowHtArr:function(){var A,y=this.rowHt,l=this.data,d=l.length,_=this[_b(335)],p=this.rowhtArr=[],v=(this.topArr=[],0);if(_)for(;v<d;v++)p[v]=(A=l[v]).pq_hidden?0:A.pq_ht||y+this[_b(651)](A,_);else for(;v<d;v++)p[v]=(A=l[v]).pq_hidden?0:A.pq_ht||y},initRowHtArrDetailSuper:function(A){var y,l=this.rowhtArr,d=this.data;A.forEach(function(_){l[y=_[0]]=d[y].pq_ht=l[y]+_[1]}),this.setTopArr(),this[_b(653)]()},initRowHtArrSuper:function(){this[_b(654)](),this.setTopArr(),this[_b(653)]()},refreshRowHtArr:function(A,y){var l=this.data[A],d=this[_b(335)];this.rowhtArr[A]=l.pq_hidden?0:this.rowHt+this[_b(651)](l,d),y&&(this.setTopArr(A),this[_b(653)]())},setTopArr:function(A,y,l){for(var d,_,p=A||0,v=y?(d=this.cols,_=this.colwdArr,this.leftArr):(d=this.rows,_=this.rowhtArr,this.topArr),C=l&&l<d?l:d-1,D=p?v[p]:0;p<=C;p++)v[p]=D,D+=_[p];v[p]=D,v.length=d+1},triggerTblDims:function(A){var y=this;y.setTimer(function(){y.that._trigger("assignTblDims")},"assignTblDims",A)}}}(jQuery),function(K){var G=1533910;K(document).one("pq:ready",function(){var A=K(_a(323)).appendTo(document.body),l=K(_a(324)).appendTo(A)[0],y=pq.cVirtual;l.style.top="1000000000px",16554378<(G=(l=l.offsetTop-50)<=1e4?G:l)&&(G=16554378),y.maxHt=G,A.remove(),y.setSBDim(),K(window).on("resize",y.setSBDim.bind(y))})}(jQuery),function(K){pq.cRender=function(){this.data=[]},pq.cRender.prototype=K.extend({},{_m:function(){},autoHeight:function(G){var A=this,y=A.that,l=A.isBody(),d=G.hChanged,_=A.freezeRows,p=!1,v=A.initV,C=A.finalV;A.rows&&(l&&y._trigger("beforeAutoRowHeight"),p=A[_b(655)](v,C,d),(p=A[_b(655)](0,_-1,d)||p)?(A.setTopArr(_?0:v),A[_b(653)](),A.setPanes(),A[_b(346)](!0),l&&(G.source="autoRow",A.refresh(G),y._trigger("autoRowHeight"))):A[_b(346)](!0))},autoWidth:function(p){function A(C){0<=d.indexOf(C)&&y[_b(656)](C,C)}var y=this,l=y.freezeCols,d=(p=p||{}).colIndx,_=y.initH,v=p=y.finalH;if(d){for(;_<=v;v--)A(v);for(v=l-1;0<=v;v--)A(v)}else y[_b(656)](_,p),y[_b(656)](0,l-1)},_each:function(G,A,y,l,d,_){for(var p,v=this.jump,C=0;C<=y;C++)(p=l[C=v(A,_,C)])[d]||G.call(this,p,C)},eachV:function(G){this._each(G,this.initV,this.finalV,this.data,"pq_hidden",this.freezeRows)},eachH:function(G){this._each(G,this.initH,this.finalH,this.colModel,"hidden",this.freezeCols)},saveValues:function(G){var A,y,l=[],d=this,_="value"==G;return d.eachV(function(p,v){l[v]=[],A=d[_b(340)](v),d.eachH(function(C,D){y=_?p[C.dataIndx]:d[_b(657)](v,D,p,C,d[_b(343)](v,D),A,!0),l[v][D]=y})}),l},dirtyCells:function(G,A){var y,l,d=[],_=this,p="value"==A;return _.eachV(function(v,C){y=_[_b(340)](C),_.eachH(function(D,I){l=p?v[D.dataIndx]:_[_b(657)](C,I,v,D,_[_b(343)](C,I),y,!0),G[C]&&G[C][I]!==l&&d.push([C,I,v,D])})}),d},generateCell:function(G,A,y,l,d,_,p){var v,C,D,I,P=this,ae=P.iMerge,B=P.isHead(),U=[],J=P.riOffset,W=G+J,re=[P.cellCls];if(P._m()&&(I=ae[_b(195)](W,A))){if(!I.o_rc)return(G==P._initV||A==P._initH)&&(ie=P[_b(343)](G,A),v=(C=ae[_b(230)](W,A)).v_ri-J,D=C.v_ci,v<0||(he=P[_b(343)](v,D),P.mcLaid[v+","+D+(he==ie?"":","+ie)]=!0)),"";(C=ae[_b(658)](W,A)).style&&U.push(C.style),C.cls&&re.push(C.cls),y=P.data[G=(W=I.o_ri)-J],l=P.colModel[A=I.o_ci],_=P[_b(652)](G,I.o_rc),v=P[_b(659)](A,I.o_cc),re.push("pq-merge-cell")}else if(y.pq_hidden||l.hidden)return"";if(D=P.getCellId(G,A,d),!p&&P.getById(D))return"";var he=_||P[_b(340)](G),ie=v||P.colwdArr[A];return ae=P.getLeft(A),U.push(P.rtl+":"+ae+"px;width:"+ie+"px;height:"+he+"px;"),P.renderCell({style:U,cls:re,attr:["role="+(B?"columnheader":"gridcell")+" id='"+D+"'"],rowData:y,rowIndxPage:G,rowIndx:W,colIndx:A,dataIndx:l.dataIndx,column:l})},generateRow:function(_,d){var y="pq-grid-row",l="top:"+this.getTop(_)+"px;height:"+this.getHeightR(_)+"px;width:100%;";return d="role=row id="+this.getRowId(_,d)+" aria-rowindex="+(_+1),"<div class='"+(y+=" "+(_=this[_b(660)](_))[0])+"' "+(d+=" "+_[2])+" style='"+(l+=_[1])+"'>"},getById:function(G){return document[_b(465)](G)},getCell:function(G,A,y){var l,d=this.riOffset,_=G+d;return y||(l=this.iMerge)[_b(195)](_,A)&&(l=l[_b(230)](_,A),this.isHead()&&(G=l.o_ri,A=l.o_ci),y=this[_b(343)](l.v_ri-d,l.v_ci)),this.getById(this.getCellId(G,A,y))},getCellIndx:function(G){if((G=G.id.split("-"))[3]=="u"+this.uuid)return""==G[5]?[+G[4],-1,G[7]]:[+G[4],+G[5],G[6]]},getCellId:function(G,A,y){return G>=this.data.length?"":(y=y||this[_b(343)](G,A),this.cellPrefix+G+"-"+A+"-"+y)},getCellCont:function(G,A){return this["$c"+this[_b(343)](G,A)]},getCellCoords:function(p,A){var y=this.maxHt,_=p+(d=this.riOffset),v=p,l=A,d=(this.isBody()&&(v=(_=this.that.iMerge[_b(350)](_,A,_,A))[2]-d,l=_[3]),this.getTop(p));return _=this.getTop(v)+this[_b(340)](v),p=this.getLeft(A),y<_&&(d-=_-y,_=y),y<(v=this.getLeft(l+1))&&(p-=v-y,v=y),[p,d,v,_]},getCellRegion:function(G,A){var y=this.freezeCols;return G<this.freezeRows?A<y?"lt":"tr":A<y?"left":"right"},getCellXY:function(G,A){var y=this.maxHt;return[Math.min(this.getLeft(A),y),Math.min(this.getTop(G),y)]},getContRight:function(){return this.$cright},getMergeCells:function(){return this._m()?this.$tbl.children().children(".pq-merge-cell"):K()},getRow:function(G,A){return this.getById(this.getRowId(G,A))},getAllCells:function(){return this.$ele.children().children().children().children().children(this.isHead()?".pq-grid-col":".pq-grid-cell")},get$Col:function(G,A){var y=["right","left","lt","rt"].map(function(l){return"[id$=-"+G+"-"+l+"]"}).join(",");return(A||this[_b(463)]()).filter(y)},get$Row:function(G){return this.$ele.find("[id^="+this.getRowId(G,"")+"]")},getRowClsStyleAttr:function(G){var A=this.that,y=[],l=A.options,d=l.rowInit,_=this.data[G],p=_.pq_rowcls,v=_.pq_rowattr,C=_[_b(242)],D=pq.styleStr,I="",P=[],B=G+this.riOffset;return l.stripeRows&&this.stripeArr[G]&&y.push("pq-striped"),_[_b(2)]&&y.push(A.iRows.hclass),p&&y.push(p),v&&(I+=A[_b(214)](v,P)),C&&P.push(D(C)),d&&(l=d.call(A,{rowData:_,rowIndxPage:G,rowIndx:B}))&&((p=l.cls)&&y.push(p),(p=l.attr)&&(I+=" "+p),(p=l.style)&&P.push(D(p))),[y.join(" "),P.join(""),I]},getRowId:function(G,A){if(null==A)throw"getRowId region.";return this.rowPrefix+G+"-"+A},getRowIndx:function(G){return[+(G=G.id.split("-"))[4],G[5]]},getTable:function(G,A){return this["$tbl_"+this[_b(343)](G,A)]},getTblCls:function(G){var A=this.isBody()?[]:[_a(325)];return G.rowBorders&&A.push("pq-td-border-top"),G[_b(243)]&&A.push("pq-td-border-right"),G.wrap||A.push("pq-no-wrap"),A.join(" ")},getFlexWidth:function(){return this._flexWidth},preInit:function(G){var A=this,y=A.isBody(),l=(d=A.that).options,d=d[_b(35)],_="pq-table "+A.getTblCls(l),p=["pq-cont-inner ","pq-cont-right","pq-cont-left","pq-cont-lt","pq-cont-tr"];G.empty(),G[0].innerHTML=[_a(326),y?_a(327)+l.strNoRows+"</div>":"",'<div class="',p[0]+p[1],_a(328)+_+'"></div>',y?"":_a(329),"</div>",'<div class="'+p[0]+p[2]+_a(330)+_+'"></div></div>','<div class="'+p[0]+p[4]+_a(331)+_+'"></div></div>','<div class="'+p[0]+p[3]+_a(332)+_+'"></div></div>',"</div>"].join(""),A.$cright=G.find("."+p[1]).on("scroll",A[_b(661)].bind(A)),A.virtualWin&&K(window).on("scroll"+d+" resize"+d,A[_b(661)].bind(A)),y||(A.$spacer=G.find(".pq-r-spacer")),A.$cleft=G.find("."+p[2]).on("scroll",A.onScrollL.bind(A)),A.$clt=G.find("."+p[3]).on("scroll",A.onScrollLT),A.$ctr=G.find("."+p[4]).on("scroll",A.onScrollT),A.$tbl=G.find(".pq-table").on("scroll",A.onScrollLT),A.$tbl_right=G.find(".pq-table-right"),A.$tbl_left=G.find(".pq-table-left"),A.$tbl_lt=G.find(".pq-table-lt"),A.$tbl_tr=G.find(".pq-table-tr"),y&&(A.$cleft.add(A.$ctr).add(A.$cright.find(".pq-table")).on(_a(333),A[_b(662)](A)),A.$norows=G.find(".pq-grid-norows"))},isBody:function(){},isHead:function(){},isSum:function(){},jump:function(G,A,y){return y<G&&A<=y?G:y},hasMergeCls:function(G){return G&&0<=G.className.indexOf("pq-merge-cell")},initRefreshTimer:function(G){G=this[_b(663)](this,G),this.setTimer(G,"refresh")},initStripeArr:function(){for(var G,A=this.rows,y=0,l=this.stripeArr=[],d=this.data;y<A;y++)d[y].pq_hidden||(G=l[y]=!G)},isRenderedRow:function(G){return!!this.getRow(G)},onScrollLT:function(){this.scrollTop=this.scrollLeft=0},onScrollT:function(){this.scrollTop=0},onScrollL:function(G){var A=G.target,y=this;pq.scrollLeft(A,0),y.setTimer(function(){y.$cright[0].scrollTop=A.scrollTop},"scrollL",50)},refresh:function(G){G=G||{};var A,y=this,l=y.that,d=y.isBody(),_=y.isHead(),p=y.mcLaid={},v=y.freezeCols,C=y.numColWd,D=!(!v&&!C),I=y.freezeRows,P=(Me=y[_b(664)]())[0],B=Me[1],U=Me[2],J=Me[3],W=G[_b(665)]||Me[4],re=y.initV,he=y.finalV,ie=y.initH,ae=y.finalH;for(A in W&&d&&l.blurEditor({force:!0}),y._initV=P,y._finalV=U,y._initH=B,y._finalH=J,d&&l._trigger("beforeTableView",null,{initV:P,finalV:U,pageData:y.data}),W||(null!=he&&re<=U&&P<=he&&(re<P?(y.removeView(re,P-1,ie,ae),D&&y.removeView(re,P-1,C?-1:0,v-1)):P<re&&(y.renderView(P,re-1,B,J),D&&y.renderView(P,re-1,0,v-1)),U<he?(y.removeView(U+1,he,ie,ae),D&&y.removeView(U+1,he,C?-1:0,v-1)):he<U&&(y.renderView(he+1,U,B,J),D&&y.renderView(he+1,U,0,v-1)),re=P,he=U),null!=ae&&ie<J&&B<ae&&(ie<B?(y.removeView(re,he,ie,B-1),I&&y.removeView(0,I-1,ie,B-1)):B<ie&&(y.renderView(re,he,B,ie-1),I&&y.renderView(0,I-1,B,ie-1)),J<ae?(y.removeView(re,he,J+1,ae),I&&y.removeView(0,I-1,J+1,ae)):ae<J&&(y.renderView(re,he,ae+1,J),I&&y.renderView(0,I-1,ae+1,J)),ie=B,ae=J)),W||U!==he||P!==re||B!==ie||J!==ae?(d&&l._trigger("beforeViewEmpty",null,{region:"right"}),y.$tbl_right.empty(),y.renderView(P,U,B,J),!D||U===he&&P===re||(y.$tbl_left.empty(),y.renderView(P,U,0,v-1)),I&&(B===ie&&J===ae||(l._trigger("beforeViewEmpty",null,{region:"tr"}),y.$tbl_tr.empty(),y.renderView(0,I-1,B,J)),D&&null==he&&(y.$tbl_lt.empty(),y.renderView(0,I-1,0,v-1)))):y[_b(666)](),p){var Me,Ce=+(Me=A.split(","))[0],Le=+Me[1];y.renderView(Ce,Ce,Le,Le,Me[2])}re=(C=B!=y.initH||J!=y.finalH)&&null!=y.initH,(W||U!=y.finalV||P!=y.initV||C)&&(y.initV=P,y.finalV=U,y.initH=B,y.finalH=J,d?l._trigger("refresh",null,{source:G.source,hChanged:re}):l._trigger(_?"refreshHeader":"refreshSum",null,{hChanged:re}))},refreshAllCells:function(G){this.initH=this.initV=this.finalH=this.finalV=null,(G=G||{})[_b(665)]=!0,this.refresh(G)},refreshCell:function(G,A,y,l){function d(I,P){I&&(_=!0,I.id="",K(I)[_b(314)](p[_b(657)](G,A,y,l,P)))}var _,p=this,v=p.isBody()&&p._m()?p.iMerge[_b(231)](G+p.riOffset,A):0,C=G,D=A;return v?(G=v[_b(75)],A=v.colIndx,y=v.rowData,l=v.column,["lt","tr","left","right"].forEach(function(I){d(p.getCell(C,D,I),I)})):d(p.getCell(G,A)),_},removeMergeCells:function(){for(var G,A,y,l,d,_,p,v=this,C=v.iMerge,D=v.riOffset,I=v[_b(515)](),P=v._initH,B=v._finalH,U=v._initV,J=v._finalV,W=0,re=I.length;W<re;W++)d=I[W],(_=v[_b(143)](d))&&(p=_[0],G=_[1],_=_[2],A=p+(y=C[_b(230)](p+D,G)).o_rc-1,y=G+y.o_cc-1,l=!1,J<p||B<G?l=!0:"right"==_?(A<U||y<P)&&(l=!0):"left"==_?A<U&&(l=!0):"tr"==_&&y<P&&(l=!0),p=d.parentNode,l&&K(d).remove(),p.children.length||p.parentNode[_b(121)](p))},removeView:function(G,A,y,l){for(var d,_,p,v=this[_b(343)](G,y),C=G;C<=A;C++)if(d=this.getRow(C,v)){for(_=y;_<=l;_++)!(p=this.getCell(C,_,v))||this[_b(667)](p)||K(p).remove();d.children.length||d.parentNode[_b(121)](d)}},renderNumCell:function(G,A,y){var l=this.getHeightR(G),d=this.isHead();return"<div id='"+this.getCellId(G,-1,y)+"' style='width:"+A+"px;height:"+l+"px;"+_a(334)+(this.isBody()?G+1+this.riOffset:d&&G==this.data.length-1&&this.numberCell.title||"")+"</div>"},renderRow:function(G,A,y,l,d,_){var p,v,C,D=this.getRow(y,_),I=this.numColWd,P=[],B=this[_b(340)](y),U=this.colModel;for(D||G.push(this[_b(668)](y,_)),0!=l||!I||"left"!=_&&"lt"!=_||(C=this[_b(669)](y,I,_),P.push(C)),v=l;v<=d;v++)(p=U[v])&&!p.hidden&&(C=this[_b(657)](y,v,A,p,_,B),P.push(C));I=P.join(""),D?K(D).append(I):G.push(I,"</div>")},renderView:function(G,A,y,l,d){if(null!=y&&null!=l){d=d||this[_b(343)](G,Math.min(y,l));for(var _,p=[],v=this.data,C=this["$tbl_"+d],D=G;D<=A;D++)(_=v[D])&&!_.pq_hidden&&this.renderRow(p,_,D,y,l,d);C.append(p.join(""))}},scrollX:function(G,A){var y=this.$cright[0];if(!(0<=G))return pq.scrollLeft(y);this.scrollXY(G,y.scrollTop,A)},setCellDims:function(G){for(var A,y=this,l=y.rtl,d=y.iMerge,_=y._m(),p=y.colModel,v=y.numColWd,C=y.jump,D=y.setRowDims(),I=y.riOffset,P=y.initH,B=y.finalH,U=y.freezeCols,J=(y.eachV(function(ce,lt){var qe,ut=y.get$Row(lt),De=y.getHeightR(lt),je=y.getTop(lt),Wt=y[_b(340)](lt);D(ut,De,je);for(var Xe=v?-1:0;Xe<=B;Xe++)!((Xe=C(P,U,Xe))<0)&&p[Xe].hidden||_&&(he=d[_b(195)](lt+I,Xe))||(qe=y.getCell(lt,Xe))&&((A=qe.style).height=(-1==Xe?De:Wt)+"px",G||(A.width=y[_b(670)](Xe)+"px",A[l]=y.getLeft(Xe)+"px"))}),y[_b(515)]()),W=0,re=J.length;W<re;W++){var he,ie,ae,Me,Ce,Le=J[W],Ue=y[_b(143)](Le);Ue&&(Me=Ue[0],Ue=Ue[1],Ce=(he=d[_b(230)](Me+I,Ue)).v_ri-I,ie=y.get$Row(Ce),ae=y.getHeightR(Ce),Me=y[_b(652)](Me,he.o_rc),Ce=y.getTop(Ce),D(ie,ae,Ce),(A=Le.style).height=Me+"px",G||(A.width=y[_b(659)](Ue,he.o_cc)+"px",A[l]=y.getLeft(Ue)+"px"))}},setRowDims:function(){return function(G,A,y){(A={height:A,width:"100%"}).top=y,G.css(A)}},setColWdArr:function(G,Me){var y,l,d,_,p,v,C,D,I=Me,P=this,B=P.riOffset,U=P.jump,J=P.colModel,W=P.data,re=P.freezeRows,he=P.maxHt+"px",ie=P.iMerge,ae=P.initV,Ce=(Me=P.isBody(),P.isSum()),Le=Me||Ce,Ue=P.isHead()?P.that[_b(144)].length-1:P.finalV;if(0<=Ue)for(;G<=I;I--)if(!(l=J[I]).hidden&&-1==(l.width+"").indexOf("%")&&(_=Le?l.width:l._minWidth)){for(y=0;y<=Ue;y++)if((p=W[y=U(ae,re,y)])&&!p.pq_hidden){if(p=!0,v=ie[_b(195)](y+B,I)){if(1==v)continue;if(1<(v=ie[_b(230)](y+B,I)).v_rc||1<v.v_cc){if(1<v.v_cc)continue;p=!1}d=P.getCell(v.o_ri-B,v.o_ci)}else d=P.getCell(y,I);d&&(d.parentNode.style.width=he,p&&(d.style.width="auto",(C=K(d).find(_a(335))).length&&(C.css({position:"static",float:"left",width:20}),(D=K(d).find(".pq-td-div")).css("width","auto"))),v=d[_b(40)]+1,p&&C.length&&(C.css({position:"",float:"",width:""}),D.css("width","")),_=Math.max(v,_))}if(!(0<_))throw"wd NaN";l.width=P.colwdArr[I]=_,l._resized=!0}},setRowHtArr:function(G,A,y){for(var l,d,_,p,v,C,D,I,P,B=A,U=this,J=U.jump,W=U.riOffset,re=U.rowhtArr,he=U.data,ie=U.colModel,ae=U._m(),Me=U.diffV,Ce=U.freezeCols,Le=U.rowHt,Ue=U.iMerge,ce=U[_b(335)],lt=U.initH,qe=U.finalH;G<=B;B--)if((_=he[B])&&!_.pq_hidden&&!_.pq_htfix){for(P=ce?U[_b(651)](_,ce):0,C=y?re[B]-P:Le,l=0;l<=qe;l++)if(!ie[l=J(lt,Ce,l)].hidden){if(D=ae&&Ue[_b(195)](B+W,l)){if(1==D||Me)continue;D=Ue[_b(230)](B+W,l),p=U.getCell(D.o_ri-W,D.o_ci)}else p=U.getCell(B,l);p&&(p.style.height="auto",v=p[_b(41)],D&&(I=D.o_rc-(D.v_ri-D.o_ri)-1,v-=1<D.v_rc?U[_b(671)](D.v_ri-W+1,I):0),C=Math.max(v,C))}re[B]!=(P=C+P)&&(re[B]=_.pq_ht=P,d=!0)}return d},setTimer:function(G){var A={};return!0===G?function(y){y()}:function(y,l,d){clearTimeout(A[l]);var _=this;A[l]=setTimeout(function(){_.that.element&&y.call(_)},d||300)}}},new pq.cVirtual)}(jQuery),function(K){pq[_b(96)]=function(G,v){var y=this,l=y.uuid=G.uuid,d=G.options,_=y.$ele=v.$b,p=y.$sum=v.$sum,C=(v=y.$h=v.$h,d[_b(449)]);y.that=G,y.rtl=d.rtl?"right":"left",y.virtualWin=d.virtualWin,y.setTimer=y.setTimer(l),y.cellPrefix="pq-body-cell-u"+l+"-",y.rowPrefix="pq-body-row-u"+l+"-",y.cellCls="pq-grid-cell",y.iMerge=G.iMerge,y.rowHt=d.rowHt||27,y[_b(335)]="auto"==(l=d[_b(336)].height)?1:l,y[_b(115)]=G[_b(115)]=new(pq[_b(672)])(G,v),y.iRenderSum=G.iRenderSum=new pq.cRenderSum(G,p),G.on("headHtChanged",y[_b(673)](y)),null!=C&&G.on(_a(336),function(){C<0?y[_b(674)]():y.setTimer(y[_b(674)],"postRender",C)}),y.preInit(_),G.on("refresh softRefresh",y.onRefresh.bind(y))},pq[_b(96)].prototype=K.extend({},new(K.paramquery[_b(235)]),new pq.cRender,{setHtCont:function(G){this.dims.htCont=G,this.$ele.css("height",G)},flex:function(G){var A=this.that;!1!==A._trigger("beforeFlex",null,G)&&(this[_b(115)].autoWidth(G),this.iRenderSum.autoWidth(G),this.autoWidth(G),A.refreshCM(null,{flex:!0}),A.refresh({source:"flex",soft:!0}))},init:function(G){var A,y=this,l=y.that,d=(G=G||{}).soft,_=!d,p=G.source,v=y[_b(115)],C=y.iRenderSum,D=l.options,I=D[_b(255)],P=(y.freezeCols=D.freezeCols||0,y.freezeRows=D.freezeRows,y.numberCell=D.numberCell),B=y.colModel=l.colModel;y.width=D.width,y.height=D.height,_&&(y.dims=l.dims,y.autoFit=I.autoFit,y.pauseTO=I.timeout,A=(I=l.pdata||[]).findIndex(function(U){return!U.pq_hidden}),y.$norows.css("display",0<=A?"none":""),y.data=I,y.maxHt=pq.cVirtual.maxHt,y.riOffset=l.riOffset,y.cols=B.length,y.rows=I.length,l[_b(413)]&&(y._m=function(){return!0}),y.autoRow=D.autoRow,y[_b(675)](),D.stripeRows&&y[_b(676)]()),y[_b(677)](),y.numColWd=v.numColWd=C.numColWd=P.show?P.width:0,y[_b(678)](),C.init(G),G.header?v.init(G):(y.setPanes(),v[_b(346)](),v[_b(653)](!0)),C.initPost(G),G.header&&v.initPost(G),y.$cright[0].scrollTop>y.getTop(y.rows)||(_?y[_b(679)]({source:p}):d&&(y[_b(346)](),y.refresh({source:p}),l._trigger("softRefresh")))},initColWdArr:function(){for(var G,A=this.colModel,y=A.length,l=(this.leftArr=this[_b(115)].leftArr=this.iRenderSum.leftArr=[],0),d=this.colwdArr=this[_b(115)].colwdArr=this.iRenderSum.colwdArr=[];l<y;l++)d[l]=(G=A[l]).hidden?0:G._width},initColWdArrSuper:function(){this[_b(680)](),this.setTopArr(0,!0),this[_b(653)](!0)},inViewport:function(v,D,P){P=P||this.getCell(v,D);var l=(I=this.dims).left-2,d=I.right-(I.wdCont-I[_b(649)])+2,_=I.top-2,p=I.bottom-(I.htCont-I[_b(650)])+2,C=(v=this[_b(343)](v,D),P.offsetLeft-I.wdContLeft),I=(D=(D=P.parentNode).offsetTop-I.htContTop,C+P[_b(40)]);return P=D+P[_b(41)],"right"==v?l<C&&I<d&&_<D&&P<p:"tr"==v?l<C&&I<d:"left"!=v||_<D&&P<p},isBody:function(){return!0},onHeadHtChanged:function(G){return function(A,y){G.setPanes()}},onMouseWheel:function(G){var A;return function(y){var l=this;l.style["pointer-events"]="none",clearTimeout(A),A=setTimeout(function(){l.style["pointer-events"]=""},300)}},onNativeScroll:function(){var G=this.that,A=(y=this.$cright[0]).scrollLeft,y=y.scrollTop;this.iRenderSum[_b(681)](A),this[_b(115)][_b(681)](A),this.$cleft[0].scrollTop=y,this.$ctr[0].scrollLeft=A,this.refresh(),G._trigger("scroll"),this.setTimer(function(){G._trigger("scrollStop")},"scrollStop",this.pauseTO)},onRefresh:function(G,A){"autoRow"!=A.source&&this[_b(682)](A.hChanged)},onRefreshTimer:function(G,A){return function(){var y=G.$cright[0];G.autoRow&&G.autoHeight({hChanged:A}),y.scrollTop=y.scrollTop,y.scrollLeft=y.scrollLeft}},pageDown:function(G,A){var y,l=this,d=l.topArr,_=d[G],p=G,C=l.dims,v=this.$cright[0].scrollTop,D=(C=95*Math.min(C[_b(650)]-C.htContTop,K(window).height())/100,_+C),I=G,P=d.length-1;l.scrollY(v+C,function(){for(I=G<l.initV?l.initV:G;I<=P;I++)if(_<(y=d[I])&&(_=y,p=I-1),D<y){p=I-1;break}A(p)})},pageUp:function(G,A){for(var y,l=this.topArr,d=l[G],_=this.$cright[0].scrollTop,p=this.dims,v=d-(p=9*Math.min(K(window).height(),p[_b(650)]-p.htContTop)/10),C=G,D=G;0<=D;D--)if((y=l[D])<d&&(d=y,C=D),y<v){C=D;break}this.scrollY(_-p,function(){A(C)})},postRenderAll:function(){var G,A,y,l=this,d=l.that,_=l.riOffset,p=l.iMerge,v=l.data;l.eachH(function(C,D){(y=C.postRender)&&l.eachV(function(I,P){A=p[_b(137)](P+_,D,!0),(G=l.getCell(A[_b(75)],A.colIndx))&&!G[_b(683)]&&(A.cell=G,d.callFn(y,A),G[_b(683)]=!0)})}),(y=l.numberCell.postRender)&&l.eachV(function(C,B){var I=l.getCell(B,-1),P=B+_;B={rowIndxPage:B,colIndx:-1,rowIndx:P,rowData:v[P]},I&&!I[_b(683)]&&(B.cell=I,d.callFn(y,B),I[_b(683)]=!0)})},refreshRow:function(G){var A,y,l=this,d=l.initH,_=l.finalH,p=l.freezeCols,v=l.get$Row(G),C=[];v.each(function(D,I){I=l.getRowIndx(I),C.push(I[1])}),l.that._trigger("beforeViewEmpty",null,{rowIndxPage:G}),v.remove(),C.forEach(function(D){y="left"==D||"lt"==D?(A=0,p-1):(A=d,_),l.renderView(G,G,A,y,D)})},newScrollPos:function(G,A){var y,l,d=(D=this.dims)[A?"wdContClient":"htContClient"],_=this.$cright[0],p=this[A?"colModel":"data"].length,v=this[A?"freezeCols":"freezeRows"],C=pq[A?"scrollLeft":"scrollTop"](_),D=D[A?"wdContLeft":"htContTop"];return G<v||p-1<G?C:(v=this.getTopSafe(G,A),p=this[A?"getWidthCell":"getHeightR"](G),null!=v?(!A&&this.virtualWin&&(A=(G=K(window)).scrollTop(),0<=(l=(_=v-C+K(_).offset().top-A)-G.height())?G.scrollTop(A+l+p):_<0&&G.scrollTop(A+_)),C+d<v+p+1?v<(y=v+p+1-d)+D&&(y=v-D):v<C+D&&(y=v-D),0<=(y=y<0?0:y)?y:C):void 0)},scrollColumn:function(G,A){G=this[_b(684)](G,!0),this.scrollX(G,A)},scrollRow:function(G,A){G=this[_b(684)](G),this.scrollY(G,A)},scrollCell:function(G,A,y){G=this[_b(684)](G),A=this[_b(684)](A,!0),this.scrollXY(A,G,y)},scrollY:function(G,A){var y=this.$cright[0];if(null==G)return y.scrollTop;G=0<=G?G:0,this.scrollXY(pq.scrollLeft(y),G,A)},scrollXY:function(G,A,y){var l,d=this.$cright[0],_=this.that,p=d.scrollLeft,v=d.scrollTop;if(!(0<=G))return[p,v];pq.scrollLeft(d,G),d.scrollTop=A,l=d.scrollLeft,G=d.scrollTop,y&&(l==p&&G==v?y():_.one("scroll",function(){l==p?y():_.one("scrollHead",y)}))},getSBHt:function(G){var l=pq.cVirtual.SBDIM;return!this.autoFit&&("flex"!=this.width||this.that.options.maxWidth)&&G>this.dims.wdCenter+l?l:0},getSBWd:function(){var G=this.dims,A=this.that.options[_b(685)];return!G.htCenter||A&&G.htCenter>(G.htTblHead||0)+G.htTbl+G.htTblSum?0:pq.cVirtual.SBDIM},setPanes:function(){var G=this,A=G.that.options,y=G.autoFit,l=G.dims,d=l.htCenter-l.htHead-l.htSum,_=l.wdCenter,p=G.$ele,v=G.freezeRows,C=G.$cright,D=C[0],I=G.$cleft,P=G.$clt,B=G.$ctr,U=G.getLeft(U=G.freezeCols),J=pq.cVirtual.SBDIM,W=l.wdTbl,re=Math.max(l.htTbl,30)+G.getSBHt(W),he=G.getTopSafe(v);B.css("display",v?"":"none"),I.css("display",U?"":"none"),P.css("display",U&&v?"":"none"),C.css("overflow-y",""),"flex"==G.height?(0<d&&d<re?re=Math.min(re,d):C.css("overflow-y","hidden"),G.setHtCont(re)):G.setHtCont(d),y&&G.getSBWd()&&C.css("overflow-y","scroll"),C.css("overflow-x",y?"hidden":""),"flex"==G.width?(W=parseInt(p[0].style.height)>=l.htTbl-1?W:W+J,A.maxWidth&&_<W?W=Math.min(W,_):C.css("overflow-x","hidden"),G._flexWidth=W,p.width(G._flexWidth)):p.css("width",""),G.htCont=l.htCont=C.height(),G.wdCont=l.wdCont=C.width(),l[_b(650)]=v=D[_b(624)],l[_b(649)]=re=D[_b(63)],re<U&&(C.css("overflow-x","hidden"),U=re),I.css("width",U),P.css("width",U),B.width(re),I.height(v),d=D[_b(40)],G[_b(115)].setWidth(d,re),G.iRenderSum.setWidth(d,re),v<he&&(C.css("overflow-y","hidden"),he=v),P.css("height",he),B.css("height",he),G.wdContLeft=l.wdContLeft=I.width(),G.htContTop=l.htContTop=B.height()}},new pq.cVirtual)}(jQuery),(jQuery.paramquery.cMergeHead=function K(G){this.that=G}).prototype={getRootCell:function(G,A){for(var y=this.that,l=y[_b(144)],d=l[G][A],_=(A=d.rowSpan,d.leftPos);G&&l[G-1][_]==d;)G--;return{v_ri:G,o_ri:G,v_ci:y[_b(223)](_),o_ci:_,v_rc:A,o_rc:A,v_cc:d.colSpan,o_cc:d.o_colspan}},ismergedCell:function(G,A){var y,_,l=this.that,d=l[_b(144)];if(_=(_=d[G])?_[A]:"")if(y=_.leftPos,0!=G&&d[G-1][A]===_||l[_b(223)](y)!=A){if(_.colSpan)return!0}else if(l=_.colSpan,(d=_.rowSpan)&&l&&(1<d||1<l))return{o_ri:G,o_ci:y,v_rc:d,o_rc:d,v_cc:l,o_cc:_.o_colspan}},getClsStyle:function(){return{}}},function(K){pq.cRenderHS=K.extend({},new pq.cRender,{init:function(G){var A,y=this,l=y.that,d=l.options,_=y.colModel=l.colModel,p=y.isHead(),v=y.isSum(),C=p?d[_b(686)]:d.autoRowSum,D=l[_b(144)];y.freezeCols=d.freezeCols||0,y.numberCell=d.numberCell,y.width=d.width,y.height="flex",y.freezeRows=0,y.dims=l.dims,p?A=y.data=d.showHeader?d[_b(157)].header?D.concat([[]]):D:[]:v&&(A=y.data=d[_b(23)]||[]),y.maxHt=pq.cVirtual.maxHt,y.riOffset=0,y.cols=_.length,y.rows=A.length,p?1<D.length&&(y._m=function(){return!0}):d.stripeRows&&y[_b(676)](),y.autoRow=null==C?d.autoRow:C,y[_b(675)](),y[_b(653)](!0),y.setPanes()},initPost:function(G){this.data.length&&(G||{}).soft?(this[_b(346)](),this.refresh()):this[_b(679)]()},onNativeScroll:function(){this.refresh(),this.isHead()&&this.that._trigger("scrollHead")},onRefresh:function(G,A){this[_b(682)](A.hChanged)},refreshHS:function(){this.init(),this.initPost()},setPanes:function(){var G=this,A=G.that,y=G.dims,l=G.$ele,d=G.$cright,_=d[0],p=G.$cleft,v=G.getLeft(v=G.freezeCols),C=G.isHead(),D=G.isSum(),I=G.getTopSafe(G.rows);p.css("display",v?"":"none"),l.height(I),C?(y.htHead=I,A._trigger("headHtChanged")):D&&(y.htSum=I,A._trigger("headHtChanged")),G.htCont=d.height(),G.wdCont=d.width(),p.css("width",v),p.height(_[_b(624)]),G.wdContLeft=p.width(),G.htContTop=0},setScrollLeft:function(G){var A=this.$cright;A&&this.scrollLeft!==G&&(this.scrollLeft=A[0].scrollLeft=G)},setWidth:function(G,A){this.$spacer.width(G-A)}})}(jQuery),function(K){var G=K.paramquery;(pq[_b(672)]=function(A,y){var l=A.options,d=this,_=d.uuid=A.uuid;d.that=A,d.iMerge=new G.cMergeHead(A),d.$ele=y,d.height="flex",d.scrollTop=0,d.rtl=l.rtl?"right":"left",d.rowHt=l.rowHtHead||28,d.cellCls="pq-grid-col",d.setTimer=d.setTimer(!0),d.cellPrefix="pq-head-cell-u"+_+"-",d.rowPrefix="pq-head-row-u"+_+"-",d.preInit(y),(A.$head_i=y.children(".pq-grid-cont")).on("click",d[_b(687)].bind(d)),A.on("headerKeyDown",d[_b(688)].bind(d)).on(_a(337),d.onRefresh.bind(d))}).prototype=K.extend({},pq.cRenderHS,G.mixHeader,G[_b(269)],{getRowClsStyleAttr:function(A){var y=this.that[_b(144)].length,l="";return y==A?l="pq-grid-header-search-row":A==y-1&&(l="pq-grid-title-row"),[l,"",""]},getTblCls:function(A){var y="pq-grid-header-table";return A.hwrap?y:y+" pq-no-wrap"},isHead:function(){return!0},onRefreshTimer:function(A,y){return function(){var l=A.$cright[0];A.autoRow&&A.autoHeight({timer:!1,hChanged:y}),l.scrollTop=0,l.scrollLeft=l.scrollLeft,A[_b(689)](),A[_b(690)](),A[_b(691)](),A.that._trigger("refreshHeadAsync")}},_resizeId:function(A){return"pq-resize-div-"+this.uuid+"-"+A},_resizeCls:function(){return"pq-resize-div-"+this.uuid},_resizeDiv:function(A){return this.getById(this._resizeId(A))},refreshResizeColumn:function(){var A,y,l,d=this.initH,_=this.colModel,p=this._resizeCls(),v=this.finalH,C=this.numberCell,D=this.freezeCols,I=[],P=[],B=C.show?-1:0;for(this.$ele.find("."+p).remove();B<=v;B++){if(d<=B)A=P;else{if(!(B<D))continue;A=I}(y=0<=B?_[B]:C).hidden||!1===y.resizable||this._resizeDiv(B)||(y=this.getLeft(B+1)-5,l=this._resizeId(B),A.push("<div id='",l,"' pq-col-indx='",B,"' style='",this.rtl,":",y,"px;'",_a(338)+p+"'>&nbsp;</div>"))}I.length&&this.$cleft.append(I.join("")),P.length&&this.$cright.append(P.join(""))},renderCell:function(A){var p,y=A.colIndx,l=A.attr,d=A.cls,_=A.style;return(p=(p=A.rowData)[y])?(1<p.colSpan&&_.push("z-index:3;"),A.column=p,this[_b(692)](A)):(p=this[_b(693)](A.column,y,d),"<div "+l+" class='"+d.join(" ")+"' style='"+_.join("")+"'>"+p+"</div>")}})}(jQuery),function(K){var G=K.paramquery;(pq.cRenderSum=function(A,y){var l=A.options,d=this,_=d.uuid=A.uuid;d.that=A,d.rtl=l.rtl?"right":"left",d.iMerge={ismergedCell:function(){}},d.$ele=y,d.height="flex",d.scrollTop=0,d.rowHt=l.rowHtSum||27,d.cellCls="pq-grid-cell",d.setTimer=d.setTimer(!0),d.cellPrefix="pq-sum-cell-u"+_+"-",d.rowPrefix="pq-sum-row-u"+_+"-",d.preInit(y),A.on(_a(339),d.onRefresh.bind(d))}).prototype=K.extend({},new(G[_b(235)]),pq.cRenderHS,{isSum:function(){return!0},onRefreshTimer:function(A,y){return function(){var l=A.$cright[0];A.autoRow&&A.autoHeight({timer:!1,hChanged:y}),l.scrollTop=0,l.scrollLeft=l.scrollLeft}}})}(jQuery)})(function(K){return atob(["PGlucHV0IHR5cGU9J2NoZWNrYm94JyA=","PGlucHV0IHR5cGU9J2NoZWNrYm94JyBzdHlsZT0ncG9zaXRpb246Zml4ZWQ7bGVmdDotNTBweDt0b3A6LTUwcHg7Jy8+","PGlucHV0IHR5cGU9ImNoZWNrYm94IiAvPg==","LnBxLWdyaWQtY2VsbC5wcS1oYXMtdG9vbHRpcCwucHEtZ3JpZC1jZWxsW3RpdGxlXQ==","PHNwYW4gY2xhc3M9J3VpLWljb24g","IHBxLXRvb2x0aXAtaWNvbic+PC9zcGFuPg==","LnVpLWRyYWdnYWJsZS1kcmFnZ2luZw==","Om5vdChbZGlzYWJsZWRdLFt0YWJpbmRleD0iLTEiXSk=","PGRpdiBkaXI9J3J0bCcgc3R5bGU9J3Zpc2liaWx0eTpoaWRkZW47aGVpZ2h0OjRweDt3aWR0aDo0cHg7b3ZlcmZsb3c6YXV0bzsnPnJ0bDwvZGl2Pg==","aW5jb3JyZWN0IHVzYWdlIG9mIGlzVmFsaWQgcm93SW5keDog","aW5jb3JyZWN0IHVzYWdlIG9mIGlzVmFsaWQgZGF0YUluZHg6IA==","PHRkPjxzcGFuIGNsYXNzPSdwcS1zZXBhcmF0b3InPjwvc3Bhbj48L3RkPg==","PHRkPjxzcGFuIGNsYXNzPSdwcS1wYWdlLWRpc3BsYXknPg==","PHRhYmxlIHN0eWxlPSdib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7Jz48dHI+","PHRkPjxzcGFuIGNsYXNzPSdwcS11aS1idXR0b24gdWktd2lkZ2V0LWhlYWRlciBwcS1wYWdlLQ==","JyB0YWJpbmRleD0nMCcgdGl0bGU9Jw==","Jz48c3BhbiBjbGFzcz0ndWktaWNvbiB1aS1pY29uLQ==","Jz48L3NwYW4+PC9zcGFuPjwvdGQ+","PGlucHV0IHR5cGU9J3RleHQnIHZhbHVlPSc=","JyB0YWJpbmRleD0nMCcgY2xhc3M9J3BxLXBhZ2UtY3VycmVudCB1aS1jb3JuZXItYWxsJyAvPg==","PHNwYW4gY2xhc3M9J3BxLXBhZ2UtdG90YWwnPg==","PHNlbGVjdCBjbGFzcz0ndWktY29ybmVyLWFsbCBwcS1wYWdlLXNlbGVjdCcgPg==","PHRkPjxzcGFuIGNsYXNzPSdwcS1wYWdlLXJwcG9wdGlvbnMnPg==","PGRpdiBjbGFzcz0ncHEtc3VtbWFyeS1vdXRlcicgPjwvZGl2Pg==","PGRpdiBjbGFzcz0ncHEtZ3JpZC10b3Ag","PGRpdiBjbGFzcz0ncHEtZ3JpZC10aXRsZQ==","PGRpdiBjbGFzcz0ncHEtZ3JpZC1wYmFyJyBzdHlsZT0nYmFja2dyb3VuZDpyZWQ7aGVpZ2h0OjJweDt3aWR0aDowJTtkaXNwbGF5Om5vbmU7Jz4mbmJzcDs8L2Rpdj4=","PGRpdiBjbGFzcz0ncHEtZ3JpZC1jZW50ZXItbyc+","PGRpdiBjbGFzcz0ncHEtdG9vbC1wYW5lbCcgc3R5bGU9J2Rpc3BsYXk6","PGRpdiBjbGFzcz0ncHEtdG9vbC1wYW5lbC1ydWxlcycgc3R5bGU9J2Rpc3BsYXk6","PGRpdiBjbGFzcz0ncHEtZ3JpZC1jZW50ZXInID4=","PGRpdiBjbGFzcz0ncHEtaGVhZGVyLW91dGVyIA==","JyB0YWJpbmRleD0nMCc+PC9kaXY+","PGRpdiBjbGFzcz0ncHEtYm9keS1vdXRlcicgdGFiaW5kZXg9JzAnID48L2Rpdj4=","PGRpdiBzdHlsZT0nY2xlYXI6Ym90aDsnPjwvZGl2Pg==","PGRpdiBjbGFzcz0ncHEtZ3JpZC1ib3R0b20g","PGRpdiBjbGFzcz0ncHEtZ3JpZC1mb290ZXInPjwvZGl2Pg==","LnBxLWdyaWQtY2VsbCwucHEtZ3JpZC1udW1iZXItY2VsbA==","dXNlIGdyb3VwT3B0aW9uKCkgdG8gc2V0IGdyb3VwTW9kZWwgb3B0aW9ucy4=","dXNlIHRyZWVPcHRpb24oKSB0byBzZXQgdHJlZU1vZGVsIG9wdGlvbnMu","aW5wdXQsdGV4dGFyZWEsYnV0dG9uLHNlbGVjdCxvcHRpb24sLnBxLW5vLWNhcHR1cmUsLnVpLXJlc2l6YWJsZS1oYW5kbGU=","dGFibGUgdGFibGUtc3RyaXBlZCB0YWJsZS1jb25kZW5zZWQgdGFibGUtYm9yZGVyZWQ=","dGFibGUgdGFibGUtY29uZGVuc2Vk","Z2x5cGhpY29uLXRyaWFuZ2xlLWJvdHRvbQ==","Z2x5cGhpY29uLXRyaWFuZ2xlLXJpZ2h0","dWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50","cHEtY2VsbC1yZWQtdHIgcHEtaGFzLXRvb2x0aXA=","cHEtY2VsbC1ibHVlLXRyIHBxLWhhcy10b29sdGlw","YXZnLG1heCxtaW4sc3RkZXYsc3RkZXZwLHN1bQ==","PHNwYW4gY2xhc3M9J2J0biBidG4teHMgZ2x5cGhpY29uIGdseXBoaWNvbi0=","PHNwYW4gY2xhc3M9J3VpLXdpZGdldC1oZWFkZXIgcHEtdWktYnV0dG9uJz48c3BhbiBjbGFzcz0ndWktaWNvbiB1aS1pY29uLQ==","PGRpdiBjbGFzcz0ncHEtZ3JpZC1kaXNhYmxlJz48L2Rpdj4=","cHEtZ3JpZCB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbA==","dWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtcw==","dWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtbg==","PGRpdiBjbGFzcz0ncHEtc2xpZGVyLWljb24gcHEtbm8tY2FwdHVyZScgID4=","aW5wdXQsdGV4dGFyZWEsc2VsZWN0LFtjb250ZW50ZWRpdGFibGU9dHJ1ZV0=","cHEtZ3JpZC1jZWxsLWhvdmVyIHVpLXN0YXRlLWhvdmVy","cHEtZ3JpZC1yb3ctaG92ZXIgdWktc3RhdGUtaG92ZXI=","PGRpdiBjbGFzcz0ncHEtbG9hZGluZyc+PC9kaXY+","PGRpdiBjbGFzcz0ncHEtbG9hZGluZy1iZyc+PC9kaXY+PGRpdiBjbGFzcz0ncHEtbG9hZGluZy1tYXNrIHVpLXN0YXRlLWhpZ2hsaWdodCc+PGRpdj4=","cHEtZHJhZ2dhYmxlIHBxLW5vLWNhcHR1cmU=","PGRpdiBjbGFzcz0ncHEtd3JhcHBlcicgLz4=","PGRpdiBjbGFzcz0ncHEtZWRpdG9yLW91dGVyJz4=","PGRpdiBjbGFzcz0ncHEtZWRpdG9yLWlubmVyJz4=","b2xkUm93IHJlcXVpcmVkIHdoaWxlIHVwZGF0ZQ==","IHR5cGU9Y2hlY2tib3ggbmFtZT0n","PGRpdiBjb250ZW50ZWRpdGFibGU9J3RydWUnIGRhdGFUeXBlPSc=","dWktYXV0b2NvbXBsZXRlLWlucHV0","c2F2ZUFuZE1vdmUgc2F2ZUVkaXRDZWxs","PGltZyBzdHlsZT0ibWF4LWhlaWdodDoxMDAlO21heC13aWR0aDoxMDAlOyIgc3JjID0gIg==","LnBxLWdyaWQtY29sLC5wcS1ncmlkLW51bWJlci1jZWxs","PHNwYW4gY2xhc3M9J3BxLWNvbC1jb2xsYXBzZSBwcS1pY29uLWhvdmVyIHVpLWljb24gdWktaWNvbi0=","PGRpdiBjbGFzcz0ncHEtdGQtZGl2Jz4=","PHNwYW4gY2xhc3M9J3BxLXRpdGxlLXNwYW4nPg==","PHNwYW4gY2xhc3M9J3BxLWNvbC1zb3J0LWljb24=","PHNwYW4gY2xhc3M9J3BxLWNvbC1zb3J0LWNvdW50","IGdseXBoaWNvbiBnbHlwaGljb24tYXJyb3ct","dWktaWNvbiB1aS1pY29uLXRyaWFuZ2xlLTEt","LnBxLWdyaWQtY29sLXJlc2l6ZS1oYW5kbGU=","PGRpdiBjbGFzcz0ncHEtZ3JpZC1kcmFnLWJhcicg","PGRpdiBjbGFzcz0ncHEtYXJyb3ct","PGRpdiBjbGFzcz0ncHEtY29sLWRyYWctaGVscGVyIHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwgcGFuZWwgcGFuZWwtZGVmYXVsdCcgPjxzcGFuIGNsYXNzPSdwcS1kcmFnLWljb24gdWktaWNvbiA=","IGdseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlJz48L3NwYW4+","aW5wdXQsc2VsZWN0LHRleHRhcmVh","cHEtZ3JpZC1oZWFkZXItc2VhcmNoLXJvdw==","cHEtZHJvcC1ob3ZlciB1aS1zdGF0ZS1oaWdobGlnaHQ=","Om5vdCgucHEtZ3JpZC1oZWFkZXItc2VhcmNoLXJvdyk+LnBxLWdyaWQtY29s","PGRpdiBjbGFzcz0ncHEtZnJvbS1kaXYnPg==","PHNwYW4gY2xhc3M9J3BxLWZyb20tdG8tY2VudGVyJz4tPC9zcGFuPg==","PGRpdiBjbGFzcz0ncHEtdG8tZGl2Jz4=","LnBxLWdyaWQtaGQtc2VhcmNoLWZpZWxk","cHEtZ3JpZC1oZC1zZWFyY2gtZmllbGQ=","cHEtZ3JpZC1oZC1zZWFyY2gtZmllbGQg","ID48c3BhbiBzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7","JyB0eXBlPWNoZWNrYm94IGNsYXNzPSc=","PGRpdiBjbGFzcz0ncHEtdGQtZGl2JyBzdHlsZT0nb3ZlcmZsb3c6aGlkZGVuOyc+","dWktaWNvbi10cmlhbmdsZS0xLXNlIGdseXBoaWNvbiBnbHlwaGljb24tbWludXM=","dWktaWNvbi10cmlhbmdsZS0xLWUgZ2x5cGhpY29uIGdseXBoaWNvbi1wbHVz","dWktaWNvbi1jaGVjayBnbHlwaGljb24tb2s=","dWktaWNvbi1jbG9zZXRoaWNrIGdseXBoaWNvbi1yZW1vdmU=","dWktaWNvbi1jaXJjbGUtYXJyb3ctcyBnbHlwaGljb24gZ2x5cGhpY29uLWNpcmNsZS1hcnJvdy1kb3du","dWktaWNvbi1jaXJjbGUtYXJyb3ctbiBnbHlwaGljb24gZ2x5cGhpY29uLWNpcmNsZS1hcnJvdy11cA==","PGRpdiBzdHlsZT0ncG9zaXRpb246Zml4ZWQ7Ym90dG9tOjA7cmlnaHQ6MjVweDtwYWRkaW5nOjAgMnB4O21hcmdpbjowO29wYWNpdHk6MC41O3otaW5kZXg6MTAwMDA7Ym9yZGVyOjFweCBzb2xpZCBsaWdodGdyYXk7Ym9yZGVyLXJhZGl1czo1cHg7cG9pbnRlci1ldmVudHM6bm9uZTsnPg==","PGEgc3R5bGU9J2ZvbnQtc2l6ZToxMHB4OycgaHJlZj0naHR0cDovL3BhcmFtcXVlcnkuY29tL3Bybyc+UGFyYW1RdWVyeSBQcm8gRXZhbDwvYT4=","IGNsYXNzPSdwcS1ib3gtZm9jdXMnIHN0eWxlPSdwb3NpdGlvbjphYnNvbHV0ZTtvcGFjaXR5OjA7cmVzaXplOm5vbmU7cG9pbnRlci1ldmVudHM6bm9uZTsnID48L3RleHRhcmVhPg==","cG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3RvcDo=","cHg7cGFkZGluZzo1cHg7d2lkdGg6MTAwJTtvdmVyZmxvdzpoaWRkZW47","aW5jb3JyZWN0bHkgZGV0YWNoZWQgZGV0YWls","PGRpdiByb2xlPSdncmlkY2VsbCcgaWQ9Jw==","Ym9yZGVyLWxlZnQ6MDtib3JkZXItcmlnaHQ6MDsg","Ym9yZGVyLXRvcDowO2JvcmRlci1ib3R0b206MDs=","Ym9yZGVyLXJpZ2h0OjA7Ym9yZGVyLWJvdHRvbTow","Ym9yZGVyLWxlZnQ6MDtib3JkZXItYm90dG9tOjA=","Ym9yZGVyLXJpZ2h0OjA7Ym9yZGVyLXRvcDow","Ym9yZGVyLWxlZnQ6MDtib3JkZXItdG9wOjA=","PGxhYmVsIGNsYXNzPSd1aS1idXR0b24gdWktd2lkZ2V0IHVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbCA=","PGlucHV0IHR5cGU9J2ZpbGUnIHN0eWxlPSdkaXNwbGF5Om5vbmU7JyA=","PHNwYW4gY2xhc3M9J3VpLWJ1dHRvbi1pY29uLXByaW1hcnkgdWktaWNvbiA=","PHNwYW4gY2xhc3M9J3VpLWJ1dHRvbi10ZXh0Jz4=","PHNwYW4gY2xhc3M9J3BxLXNlcGFyYXRvcicg","PGJ1dHRvbiB0eXBlPSdidXR0b24nIA==","PHNwYW4gY2xhc3M9J2dseXBoaWNvbiA=","cHJpbWFyeSBrZXkgdmlvbGF0aW9u","c2FtZSBkYXRhIGNhbid0IGJlIGFkZGVkIHR3aWNlLg==","aW5wdXQsdGV4dGFyZWEsc2VsZWN0","PGRpdiBpZD0ncHEtZ3JpZC1leGNlbC1kaXYnICBzdHlsZT0ncG9zaXRpb246Zml4ZWQ7dG9wOjIwcHg7bGVmdDoyMHB4O2hlaWdodDoxcHg7d2lkdGg6MXB4O292ZXJmbG93OmhpZGRlbjt6LWluZGV4Og==","JyBhdXRvY29tcGxldGU9J29mZicgc3BlbGxjaGVjaz0nZmFsc2UnIHN0eWxlPSdvdmVyZmxvdzpoaWRkZW47aGVpZ2h0OjEwMDAwcHg7d2lkdGg6MTAwMDBweDtvcGFjaXR5OjAnIC8+","bGVuSCBOYU4uIGFzc2VydCBmYWlsZWQu","OjE2cHg7Y3Vyc29yOmRlZmF1bHQ7","JyBzdHlsZT0nd2lkdGg6MjcwcHg7JyBjbGFzcz0ncHEtdGhlbWUnPjxkaXY+PC9kaXY+PC9kaXY+","SW5jb3JyZWN0IGZpbHRlciBwYXJhbWV0ZXJzLiBQbGVhc2UgY2hlY2sgdXBncmFkZSBndWlkZQ==","ZGF0YVJlYWR5RG9uZSBjb2xNb3ZlIGdyb3VwU2hvd0hpZGU=","dWktaWNvbi10cmlhbmdsZS0xLXNl","PGRpdiBjbGFzcz0ncHEtZ3JvdXAtaGVhZGVyIHVpLWhlbHBlci1jbGVhcmZpeCcgPjwvZGl2Pg==","PGRpdiB0YWJpbmRleD0nMCcgY2xhc3M9J3BxLWdyb3VwLWl0ZW0nIGRhdGEtaW5keD0n","Y3VzdG9tU29ydCBjYW5jZWxTb3J0","PHNwYW4gY2xhc3M9J3BxLWdyb3VwLXBsYWNlaG9sZGVyJz4=","PHVsIGNsYXNzPSdwcS1ncm91cC1tZW51Jz48bGk+","PGRpdj48c3Bhbj4mbmJzcDs8L3NwYW4+PC9kaXY+","JyBjbGFzcz0ncHEtbWVudS1pdGVtJz4=","dWktaWNvbiB1aS1pY29uLWNoZWNr","dWktaWNvbiB1aS1pY29uLWNhbmNlbA==","PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1ncmlwLWRvdHRlZC12ZXJ0aWNhbCBwcS1kcmFnLWhhbmRsZScgc3R5bGU9J2N1cnNvcjptb3ZlO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MnB4O3RvcDo0cHg7Jz4mbmJzcDs8L3NwYW4+","PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1ncmlwLWRvdHRlZC12ZXJ0aWNhbCBwcS1kcmFnLWhhbmRsZScgc3R5bGU9J2N1cnNvcjptb3ZlO3ZlcnRpY2FsLWFsaWduOnRleHQtYm90dG9tO3RvdWNoLWFjdGlvbjpub25lO2Zsb2F0OmxlZnQ7Jz4mbmJzcDs8L3NwYW4+","PGRpdiBjbGFzcz0ncHEtYm9yZGVyLTAgcHEtZ3JpZC1jZWxsJyBzdHlsZT0ncG9pbnRlci1ldmVudHM6IG5vbmU7Jz48c3BhbiBjbGFzcz0ncHEtaWNvbicgc3R5bGU9J3ZlcnRpY2FsLWFsaWduOnRleHQtYm90dG9tO21hcmdpbjowIDVweDsnPjwvc3Bhbj48c3Bhbj48L3NwYW4+PC9kaXY+","cHEtdGhlbWUgcHEtZHJhZy1oZWxwZXI=","PHN2ZyBjbGFzcz0ncHEtYm9yZGVyLTAnIHN0eWxlPSdib3gtc2l6aW5nOmJvcmRlci1ib3g7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyLXdpZHRoOjEuNXB4O2JvcmRlci1zdHlsZTpkYXNoZWQ7cG9pbnRlci1ldmVudHM6bm9uZTtoZWlnaHQ6MDsnPjwvc3ZnPg==","PHN2ZyBjbGFzcz0ncHEtYm9yZGVyLTAnIHN0eWxlPSdwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDowO2hlaWdodDoxMDAlOw==","cHg7dG9wOjA7Ym9yZGVyLXN0eWxlOmRhc2hlZDtib3JkZXItd2lkdGg6MS41cHg7cG9pbnRlci1ldmVudHM6bm9uZTsnPjwvc3ZnPg==","JyBjbGFzcz0ncHEtY21lbnUgcHEtdGhlbWUgcHEtcG9wdXAnPjx0YWJsZT4=","PHRyIGNsYXNzPSdwcS1jbWVudS1pdGVtIA==","PC90ZD48dGQ+PHNwYW4gY2xhc3M9Jw==","cHEtc3VibWVudSB1aS1pY29uIHVpLWljb24tdHJpYW5nbGUtMS0=","YmVmb3JlU29ydERvbmUgYmVmb3JlRmlsdGVyRG9uZSBiZWZvcmVSb3dFeHBhbmREb25lIGJlZm9yZUdyb3VwRXhwYW5kRG9uZSBiZWZvcmVNb3ZlTm9kZSBiZWZvcmVBdXRvUm93SGVpZ2h0IGJlZm9yZVZhbGlkYXRlRG9uZSBiZWZvcmVUcmVlRXhwYW5kRG9uZSBvblJlc2l6ZUhpZXJhcmNoeQ==","YmVmb3JlQ29sQWRkRG9uZSBiZWZvcmVDb2xSZW1vdmVEb25lIGJlZm9yZUhpZGVDb2xzRG9uZSBiZWZvcmVDb2x1bW5Db2xsYXBzZURvbmUgYmVmb3JlQ29sTW92ZURvbmUgYmVmb3JlRmxleCBjb2x1bW5SZXNpemU=","PGRpdiBjbGFzcz0ncHEtZmlsbC1oYW5kbGUnPjwvZGl2Pg==","PGRpdiBzdHlsZT0naGVpZ2h0OjEwcHg7d2lkdGg6MTBweDtjdXJzb3I6Y3Jvc3NoYWlyOyc+PC9kaXY+","dWktaWNvbi1mb2xkZXItY29sbGFwc2Vk","aW5wdXRbdHlwZT0nY2hlY2tib3gnXQ==","PHNwYW4gY2xhc3M9J3BxLWdyb3VwLWljb24gdWktaWNvbiA=","PHNwYW4gY2xhc3M9J3BxLXRyZWUtaWNvbiB1aS1pY29uIA==","KFthLXpdKylccyo9XHMqIihbXiJdKiki","eGwvd29ya3NoZWV0cy9fcmVscy9zaGVldA==","UmVsYXRpb25zaGlwW1R5cGUqPSIvY29tbWVudHMiXQ==","ZGF0YTppbWFnZS9wbmc7YmFzZTY0LA==","UmVsYXRpb25zaGlwW1R5cGUqPScvaW1hZ2UnXQ==","eGRyXDp0d29DZWxsQW5jaG9yLHhkclw6b25lQ2VsbEFuY2hvcg==","ZmlsbHM+ZmlsbD5wYXR0ZXJuRmlsbD5mZ0NvbG9y","JCMsIyMwXyk7W1JlZF0oJCMsIyMwKQ==","JCMsIyMwLjAwXyk7KCQjLCMjMC4wMCk=","JCMsIyMwLjAwXyk7W1JlZF0oJCMsIyMwLjAwKQ==","IywjIzAuMDBfKTsoIywjIzAuMDAp","IywjIzAuMDBfKTtbUmVkXSgjLCMjMC4wMCk=","PCFET0NUWVBFIGh0bWw+PGh0bWw+PGhlYWQ+","PG1ldGEgY2hhcnNldD0idXRmLTgiIC8+","dGFibGV7ZW1wdHktY2VsbHM6c2hvdztmb250LWZhbWlseTo=","O2JvcmRlci1jb2xsYXBzZTpjb2xsYXBzZTt9","dGQsdGh7cGFkZGluZzogNXB4O2JvcmRlcjoxcHggc29saWQgI2NjYzt9","PC90YWJsZT48L2JvZHk+PC9odG1sPg==","PGlmcmFtZSBoZWlnaHQ9JzAnIHdpZHRoPScwJyBmcmFtZWJvcmRlcj0nMCcgc3JjPSI=","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxSZWxhdGlvbnNoaXBzIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvcGFja2FnZS8yMDA2L3JlbGF0aW9uc2hpcHMiPjxSZWxhdGlvbnNoaXAgSWQ9InJJZDEiIFR5cGU9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMvb2ZmaWNlRG9jdW1lbnQiIFRhcmdldD0ieGwvd29ya2Jvb2sueG1sIi8+PC9SZWxhdGlvbnNoaXBzPg==","eGwvX3JlbHMvd29ya2Jvb2sueG1sLnJlbHM=","d29ya3NoZWV0cy9fcmVscy9zaGVldA==","PHhkcjp3c0RyIHhtbG5zOnhkcj0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL2RyYXdpbmdtbC8yMDA2L3NwcmVhZHNoZWV0RHJhd2luZyIgeG1sbnM6YT0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL2RyYXdpbmdtbC8yMDA2L21haW4iIHhtbG5zOnI9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMiIHhtbG5zOmM9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9kcmF3aW5nbWwvMjAwNi9jaGFydCIgeG1sbnM6Y3g9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vb2ZmaWNlL2RyYXdpbmcvMjAxNC9jaGFydGV4IiB4bWxuczpjeDE9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vb2ZmaWNlL2RyYXdpbmcvMjAxNS85LzgvY2hhcnRleCIgeG1sbnM6bWM9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9tYXJrdXAtY29tcGF0aWJpbGl0eS8yMDA2IiB4bWxuczpkZ209Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9kcmF3aW5nbWwvMjAwNi9kaWFncmFtIiB4bWxuczp4M1Vuaz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9vZmZpY2UvZHJhd2luZy8yMDEwL3NsaWNlciIgeG1sbnM6c2xlMTU9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vb2ZmaWNlL2RyYXdpbmcvMjAxMi9zbGljZXIiPg==","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxSZWxhdGlvbnNoaXBzIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvcGFja2FnZS8yMDA2L3JlbGF0aW9uc2hpcHMiPg==","PC94ZHI6Y29sPjx4ZHI6Y29sT2ZmPg==","PC94ZHI6Y29sT2ZmPjx4ZHI6cm93Pg==","PC94ZHI6cm93Pjx4ZHI6cm93T2ZmPg==","PHhkcjpwaWM+PHhkcjpudlBpY1ByPjx4ZHI6Y052UHIgaWQ9Ig==","PHhkcjpjTnZQaWNQciBwcmVmZXJSZWxhdGl2ZVJlc2l6ZT0iMCIvPjwveGRyOm52UGljUHI+","PHhkcjpibGlwRmlsbD48YTpibGlwIGNzdGF0ZT0icHJpbnQiIHI6ZW1iZWQ9Ig==","Ii8+PGE6c3RyZXRjaD48YTpmaWxsUmVjdC8+PC9hOnN0cmV0Y2g+PC94ZHI6YmxpcEZpbGw+","PHhkcjpzcFByPjxhOnByc3RHZW9tIHByc3Q9InJlY3QiPjxhOmF2THN0Lz48L2E6cHJzdEdlb20+PGE6bm9GaWxsLz48L3hkcjpzcFByPg==","PC94ZHI6cGljPjx4ZHI6Y2xpZW50RGF0YSBmTG9ja3NXaXRoU2hlZXQ9IjAiLz48L3hkcjo=","IiBUeXBlPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL2ltYWdlIiAvPg==","ZHJhd2luZ3MvX3JlbHMvZHJhd2luZw==","Y3VzdG9tSGVpZ2h0PSIxIiBodD0i","IGN1c3RvbVdpZHRoPSIxIiB3aWR0aD0i","PGNvbW1lbnQgYXV0aG9ySWQ9IjAiIHJlZj0i","Ij48dGV4dD48dCB4bWw6c3BhY2U9InByZXNlcnZlIj4=","PC90PjwvdGV4dD48L2NvbW1lbnQ+","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/Pg==","PGNvbW1lbnRzIHhtbG5zOnI9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMiIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvc3ByZWFkc2hlZXRtbC8yMDA2L21haW4iPg==","PGF1dGhvcnM+PGF1dGhvcj48L2F1dGhvcj48L2F1dGhvcnM+","PC9jb21tZW50TGlzdD48L2NvbW1lbnRzPg==","PE92ZXJyaWRlIFBhcnROYW1lPSIveGwvd29ya3NoZWV0cy9zaGVldA==","LnhtbCIgQ29udGVudFR5cGU9ImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLndvcmtzaGVldCt4bWwiLz4=","PE92ZXJyaWRlIFBhcnROYW1lPSIveGwvY29tbWVudHM=","LnhtbCIgQ29udGVudFR5cGU9ImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLmNvbW1lbnRzK3htbCIgLz4=","IiBDb250ZW50VHlwZT0iaW1hZ2Uv","PE92ZXJyaWRlIFBhcnROYW1lPSIveGwvZHJhd2luZ3MvZHJhd2luZw==","LnhtbCIgQ29udGVudFR5cGU9ImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5kcmF3aW5nK3htbCIvPg==","PFR5cGVzIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvcGFja2FnZS8yMDA2L2NvbnRlbnQtdHlwZXMiPg==","PE92ZXJyaWRlIFBhcnROYW1lPSIveGwvc3R5bGVzLnhtbCIgQ29udGVudFR5cGU9ImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnN0eWxlcyt4bWwiLz4=","PERlZmF1bHQgRXh0ZW5zaW9uPSJyZWxzIiBDb250ZW50VHlwZT0iYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLXBhY2thZ2UucmVsYXRpb25zaGlwcyt4bWwiLz4=","PERlZmF1bHQgRXh0ZW5zaW9uPSJ4bWwiIENvbnRlbnRUeXBlPSJhcHBsaWNhdGlvbi94bWwiIC8+","PE92ZXJyaWRlIFBhcnROYW1lPSIveGwvd29ya2Jvb2sueG1sIiBDb250ZW50VHlwZT0iYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQubWFpbit4bWwiLz4=","PERlZmF1bHQgRXh0ZW5zaW9uPSJ2bWwiIENvbnRlbnRUeXBlPSJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQudm1sRHJhd2luZyIgLz4=","PHNoZWV0Vmlld3M+PHNoZWV0VmlldyA=","IiBhY3RpdmVQYW5lPSJib3R0b21MZWZ0IiBzdGF0ZT0iZnJvemVuIi8+","PC9zaGVldFZpZXc+PC9zaGVldFZpZXdzPg==","PFJlbGF0aW9uc2hpcCBJZD0iY29t","IiBUYXJnZXQ9Ii4uL2NvbW1lbnRz","LnhtbCIgVHlwZT0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9jb21tZW50cyIgLz4=","PFJlbGF0aW9uc2hpcCBJZD0idm1s","IiBUYXJnZXQ9Ii4uL2RyYXdpbmdzL3ZtbERyYXdpbmc=","LnZtbCIgVHlwZT0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy92bWxEcmF3aW5nIiAvPg==","PFJlbGF0aW9uc2hpcCBJZD0icklk","IiBUYXJnZXQ9Ii4uL2RyYXdpbmdzL2RyYXdpbmc=","LnhtbCIgVHlwZT0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9kcmF3aW5nIi8+","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/Pjx3b3Jrc2hlZXQgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9zcHJlYWRzaGVldG1sLzIwMDYvbWFpbiIgeG1sbnM6cj0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcyI+","PGxlZ2FjeURyYXdpbmcgcjppZD0idm1s","PHhmIG51bUZtdElkPSIwIiBhcHBseU51bWJlckZvcm1hdD0iMSIvPg==","PGZpbGw+PHBhdHRlcm5GaWxsIHBhdHRlcm5UeXBlPSJzb2xpZCI+PGZnQ29sb3IgcmdiPSI=","Ii8+PC9wYXR0ZXJuRmlsbD48L2ZpbGw+","PGZhbWlseSB2YWw9IjIiLz48L2ZvbnQ+","IGFwcGx5TnVtYmVyRm9ybWF0PSIxIiBudW1GbXRJZD0i","IGFwcGx5RmlsbD0iMSIgZmlsbElkPSI=","IGFwcGx5Rm9udD0iMSIgZm9udElkPSI=","IGFwcGx5Qm9yZGVyPSIxIiBib3JkZXJJZD0i","IGFwcGx5QWxpZ25tZW50PSIxIj48YWxpZ25tZW50IA==","PHN0eWxlU2hlZXQgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9zcHJlYWRzaGVldG1sLzIwMDYvbWFpbiI+","PGZvbnQ+PHN6IHZhbD0iMTEiLz48Y29sb3IgdGhlbWU9IjEiLz48bmFtZSB2YWw9IkNhbGlicmkiLz48ZmFtaWx5IHZhbD0iMiIvPjxzY2hlbWUgdmFsPSJtaW5vciIvPjwvZm9udD4=","PGZpbGxzPjxmaWxsPjxwYXR0ZXJuRmlsbCBwYXR0ZXJuVHlwZT0ibm9uZSIvPjwvZmlsbD48ZmlsbD48cGF0dGVybkZpbGwgcGF0dGVyblR5cGU9ImdyYXkxMjUiLz48L2ZpbGw+","PGJvcmRlcnM+PGJvcmRlcj48bGVmdC8+PHJpZ2h0Lz48dG9wLz48Ym90dG9tLz48ZGlhZ29uYWwvPjwvYm9yZGVyPg==","PGNlbGxTdHlsZVhmcyBjb3VudD0iMSI+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjAiIGZpbGxJZD0iMCIgYm9yZGVySWQ9IjAiLz4=","PGNlbGxTdHlsZXMgY291bnQ9IjEiPjxjZWxsU3R5bGUgbmFtZT0iTm9ybWFsIiB4ZklkPSIwIiBidWlsdGluSWQ9IjAiLz48L2NlbGxTdHlsZXM+","PGR4ZnMgY291bnQ9IjAiLz48dGFibGVTdHlsZXMgY291bnQ9IjAiIGRlZmF1bHRUYWJsZVN0eWxlPSJUYWJsZVN0eWxlTWVkaXVtOSIgZGVmYXVsdFBpdm90U3R5bGU9IlBpdm90U3R5bGVMaWdodDE2Ii8+","PHY6c2hhcGUgaWQ9IjEiIHR5cGU9IiMwIiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7bWFyZ2luLWxlZnQ6MjU5LjI1cHQ7bWFyZ2luLXRvcDoxLjVwdDt3aWR0aDoxMDhwdDtoZWlnaHQ6NTkuMjVwdDt6LWluZGV4OjE7dmlzaWJpbGl0eTpoaWRkZW4iIGZpbGxjb2xvcj0iI2ZmZmZlMSIgbzppbnNldG1vZGU9ImF1dG8iPjx2OmZpbGwgY29sb3IyPSIjZmZmZmUxIi8+PHY6c2hhZG93IG9uPSJ0IiBjb2xvcj0iYmxhY2siIG9ic2N1cmVkPSJ0Ii8+PHY6cGF0aCBvOmNvbm5lY3R0eXBlPSJub25lIi8+PHY6dGV4dGJveCBzdHlsZT0ibXNvLWRpcmVjdGlvbi1hbHQ6YXV0byI+PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpyaWdodCI+PC9kaXY+PC92OnRleHRib3g+PHg6Q2xpZW50RGF0YSBPYmplY3RUeXBlPSJOb3RlIj48eDpNb3ZlV2l0aENlbGxzLz48eDpTaXplV2l0aENlbGxzLz48eDpBbmNob3I+MSwgMTUsIDAsIDIsIDMsIDMxLCA0LCAxPC94OkFuY2hvcj48eDpBdXRvRmlsbD5GYWxzZTwveDpBdXRvRmlsbD4=","PC94OkNvbHVtbj48L3g6Q2xpZW50RGF0YT48L3Y6c2hhcGU+","PHhtbCB4bWxuczp2PSJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOnZtbCIgeG1sbnM6bz0idXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTpvZmZpY2U6b2ZmaWNlIiB4bWxuczp4PSJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOm9mZmljZTpleGNlbCI+PG86c2hhcGVsYXlvdXQgdjpleHQ9ImVkaXQiPjxvOmlkbWFwIHY6ZXh0PSJlZGl0IiBkYXRhPSIxIi8+PC9vOnNoYXBlbGF5b3V0Pg==","PHY6c2hhcGV0eXBlIGlkPSIwIiBjb29yZHNpemU9IjIxNjAwLDIxNjAwIiBvOnNwdD0iMjAyIiBwYXRoPSJtLGwsMjE2MDByMjE2MDAsbDIxNjAwLHhlIj48djpzdHJva2Ugam9pbnN0eWxlPSJtaXRlciIvPjx2OnBhdGggZ3JhZGllbnRzaGFwZW9rPSJ0IiBvOmNvbm5lY3R0eXBlPSJyZWN0Ii8+PC92OnNoYXBldHlwZT4=","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/Pjx3b3JrYm9vayB4bWxucz0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3NwcmVhZHNoZWV0bWwvMjAwNi9tYWluIiB4bWxuczpyPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzIj4=","PGJvb2tWaWV3cz48d29ya2Jvb2tWaWV3IA==","IC8+PC9ib29rVmlld3M+PHNoZWV0cz4=","IiBUeXBlPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL3dvcmtzaGVldCIgVGFyZ2V0PSJ3b3Jrc2hlZXRzL3NoZWV0","PFJlbGF0aW9uc2hpcHMgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9wYWNrYWdlLzIwMDYvcmVsYXRpb25zaGlwcyI+","IiBUeXBlPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL3N0eWxlcyIgVGFyZ2V0PSJzdHlsZXMueG1sIi8+","Y29sTW92ZSBjb2xBZGQgY29sUmVtb3Zl","ZWRpdG9yS2V5VXAgZWRpdG9yQ2xpY2s=","KD86KD86KD86Jyg/OlteXCpcPzpcW1xdXCsnXXwnJykrJyl8KD86W15cKlw/OlxbXF1cKFwpXCtcLScsIV0rKSkhKT8=","KFwkPykoW0EtWl0rKShcJD8pKFtcZF0rKD8hISkp","KFwkPykoWzAtOV0rKTooXCQ/KShbMC05XSsp","KFwkPykoW0EtWl0rKShcJD8pKFtcZF0rKQ==","KFwkPykoW0EtWl0rKTooXCQ/KShbQS1aXSsp","XCQ/W0EtWl0rXCQ/WzAtOV0rXCs/KXsyLH0pKD86XCl8XCx8JHxcKyk=","XCQ/KFtBLVpdKyk/XCQ/KFswLTldKyk/XDpcJD8oW0EtWl0rKT9cJD8oWzAtOV0rKT8p","XCQ/W0EtWl0rXCQ/WzAtOV0rKSg/IVs6XGRdKyk=","PGRpdiBzdHlsZT0nZm9udC1zaXplOjAuOWVtO2NvbG9yOiM4ODg7bWFyZ2luLWJvdHRvbTo1cHg7Jz4=","PGRpdiBjbGFzcz0ncHEtaW50ZWwnIHN0eWxlPSd3aWR0aDozNTBweDttYXgtaGVpZ2h0OjMwMHB4O292ZXJmbG93OmF1dG87YmFja2dyb3VuZDojZmZmO2JvcmRlcjoxcHggc29saWQgZ3JheTtib3gtc2hhZG93OiA0cHggNHB4IDJweCAjYWFhYWFhO3BhZGRpbmc6NXB4Oyc+PC9kaXY+","KFxkezEsMn0pLyhcZHsxLDJ9KS8oXGR7Miw0fSk=","KFxkezR9KS0oXGR7MSwyfSktKFxkezEsMn0p","KFxkezEsMn0pLShcZHsxLDJ9KS0oXGR7NH0p","KFxkezEsMn0pKDooXGR7MSwyfSkpPyg6KFxkezEsMn0pKT8oXHMoQU18UE0pKT8=","IHBxLXBpdm90LWxhYmVsIHBxLWJnLTMg","IHBxLXBpdm90LXBhbmUgcHEtYm9yZGVyLTEg","PGRpdiBjbGFzcz0ncHEtcGl2b3QtY29scy1hbGw=","PGxhYmVsPjxpbnB1dCB0eXBlPSdjaGVja2JveCcg","IGNsYXNzPSdwcS1waXZvdC1jaGVja2JveCcg","PGRpdiBjbGFzcz0ncHEtcGl2b3Qtcm93cw==","PGRpdiBkZW55PSdkZW55R3JvdXAnIGNsYXNzPSc=","PHNwYW4gY2xhc3M9J3BxLWljb24nPjwvc3Bhbj4=","PGxhYmVsPjxpbnB1dCB0eXBlPSdjaGVja2JveCcgY2xhc3M9J3BxLWdyb3VwLWNoZWNrYm94JyA=","PGRpdiBjbGFzcz0ncHEtcGl2b3QtY29scw==","PGRpdiBkZW55PSdkZW55UGl2b3QnIGNsYXNzPSc=","Jz48c3BhbiBjbGFzcz0ncHEtaWNvbic+PC9zcGFuPg==","PGRpdiBjbGFzcz0ncHEtcGl2b3QtdmFscw==","PGRpdiBkZW55PSdkZW55QWdnJyBjbGFzcz0n","PHNwYW4gc3R5bGU9J2NvbG9yOiM5OTk7bWFyZ2luOjFweDtkaXNwbGF5OmlubGluZS1ibG9jazsnPg==","PiAucHEtcGl2b3QtY29sOm5vdCgnLnBxLWRlbnktZHJhZycp","PHNwYW4gY2xhc3M9J3VpLWljb24tY2hlY2sgdWktaWNvbic+PC9zcGFuPg==","JyBjbGFzcz0ncHEtcGl2b3QtY29sIHBxLWJvcmRlci0yIA==","YVtocmVmPSd0YWJzLWZpbHRlcidd","Ij48c3BhbiBjbGFzcz0icHEtdGFiLQ==","LWljb24iPiZuYnNwOzwvc3Bhbj48L2E+PC9saT4=","PGRpdiBjbGFzcz0ncHEtaGVhZC1tZW51IHBxLXRoZW1lJyBkaXI9Jw==","PGRpdiBjbGFzcz0ncHEtdGFicycgc3R5bGU9J2JvcmRlci13aWR0aDowOyc+","PGRpdiBjbGFzcz0ncHEtZmlsdGVyLW1lbnUgcHEtdGhlbWUnLz4=","PGRpdiBzdHlsZT0nbWFyZ2luOjAgYXV0byA0cHg7Jz4=","PGRpdiBzdHlsZT0ncGFkZGluZzo0cHg7Jz4=","PGRpdiBkYXRhLXJlbD0nZ3JpZCcgc3R5bGU9J2Rpc3BsYXk6bm9uZTsnPjwvZGl2Pg==","PGRpdiBjbGFzcz0nZmlsdGVyX21vZGVfZGl2JyBzdHlsZT0ndGV4dC1hbGlnbjpjZW50ZXI7ZGlzcGxheTpub25lO21hcmdpbjo0cHggMCA0cHg7Jz4=","PGxhYmVsPjxpbnB1dCB0eXBlPSdyYWRpbycgbmFtZT0ncHFfZmlsdGVyX21vZGUnIHZhbHVlPSdBTkQnLz5BTkQ8L2xhYmVsPiZuYnNwOw==","PGxhYmVsPjxpbnB1dCB0eXBlPSdyYWRpbycgbmFtZT0ncHFfZmlsdGVyX21vZGUnIHZhbHVlPSdPUicvPk9SPC9sYWJlbD4=","PGRpdiBzdHlsZT0nbWFyZ2luOjAgYXV0byA0cHg7Jz48c2VsZWN0Pg==","PGRpdiBzdHlsZT0nbWFyZ2luOjRweCAwIDA7Jz4=","JyB0eXBlPSdidXR0b24nIHN0eWxlPSd3aWR0aDpjYWxjKDUwJSAtIDRweCk7bWFyZ2luOjJweDsnID4=","W25hbWU9InBxX2ZpbHRlcl9tb2RlIl0=","J106bm90KC5wcS1zZWFyY2gtdHh0KQ==","cG9wIHB1c2ggcmV2ZXJzZSBzaGlmdCBzb3J0IHNwbGljZSB1bnNoaWZ0","JyBzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7aGVpZ2h0Og==","cHg7Ym90dG9tOjA7bGVmdDowO3dpZHRoOjEwMCU7Y3Vyc29yOnJvdy1yZXNpemU7Jz48L2Rpdj4=","d2lkdGg6MTAwJTtiYWNrZ3JvdW5kLWNvbG9yOiMwMDA7aGVpZ2h0OjFweDs=","cG9zaXRpb246YWJzb2x1dGU7dG9wOg==","PGlucHV0IGNsYXNzPSdwcS1ib3JkZXItMCcgdmFsdWU9Ig==","IHBxLXRhYi1idXR0b24gcHEtdmFsaWduLWNlbnRlciBwcS1iZy0zIHBxLWJvcmRlci0wJz48ZGl2IGNsYXNzPSc=","IHVpLWljb24nPjwvZGl2PjwvZGl2Pg==","PGRpdiBjbGFzcz0ncHEtdGFicy1jb250IHVpLXdpZGdldC1jb250ZW50Jz4=","PGRpdiBjbGFzcz0ncHEtdGFicy1zdHJpcCcgc3R5bGU9Jw==","LnVpLXNvcnRhYmxlLXBsYWNlaG9sZGVy","PGRpdiB0YWJpbmRleD0wIGNsYXNzPSdwcS10YWItaXRlbSBwcS12YWxpZ24tY2VudGVyIHBxLWJvcmRlci0wIA==","PGRpdiBzdHlsZT0nbWF4LXdpZHRoOjEwMHB4O2hlaWdodDoxMDBweDtwb3NpdGlvbjpmaXhlZDtsZWZ0OjA7dG9wOjA7b3ZlcmZsb3c6YXV0bzt2aXNpYmlsaXR5OmhpZGRlbjsnPjxkaXYgc3R5bGU9J3dpZHRoOjIwMHB4O2hlaWdodDoxMDBweDsnPjwvZGl2PjwvZGl2Pg==","PGRpdiBzdHlsZT0ncG9zaXRpb246cmVsYXRpdmU7Jz48L2Rpdj4=","PGRpdiBzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7bGVmdDowOyc+PC9kaXY+","cHEtZ3JpZC1zdW1tYXJ5LXRhYmxl","PGRpdiBjbGFzcz0icHEtZ3JpZC1jb250Ij4=","PGRpdiBjbGFzcz0icHEtZ3JpZC1ub3Jvd3MiPg==","Ij48ZGl2IGNsYXNzPSJwcS10YWJsZS1yaWdodCA=","PGRpdiBjbGFzcz0icHEtci1zcGFjZXIiIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtoZWlnaHQ6MTBweDsiPjwvZGl2Pg==","Ij48ZGl2IGNsYXNzPSJwcS10YWJsZS1sZWZ0IA==","Ij48ZGl2IGNsYXNzPSJwcS10YWJsZS10ciA=","Ij48ZGl2IGNsYXNzPSJwcS10YWJsZS1sdCA=","bW91c2V3aGVlbCBET01Nb3VzZVNjcm9sbA==","JyByb2xlPSdncmlkY2VsbCcgY2xhc3M9J3BxLWdyaWQtbnVtYmVyLWNlbGwgJz4=","LnBxLW1lbnUtaWNvbiwucHEtbWVudS1maWx0ZXItaWNvbg==","cmVmcmVzaCByZWZyZXNoUm93IHJlZnJlc2hDZWxsIHJlZnJlc2hDb2x1bW4=","cmVmcmVzaEhlYWRlciBzb2Z0UmVmcmVzaA==","IGNsYXNzPSdwcS1ncmlkLWNvbC1yZXNpemUtaGFuZGxlIA==","cmVmcmVzaFN1bSBzb2Z0UmVmcmVzaA=="][K])},function(K){return["exportRender","getCascadeInit","pq_rowselect","chkEachChild","cascadeNest","chkEachParent","eventForInit","getCascadeList","_cascadeInit","pq_gsummary","getChildrenAll","pq_child_sum","titleInFirstCol","checkboxHead","setCellRender","sort_composite","indeterminate","refreshView","summaryInTitleRow","showSummary","skipSingleSummary","grandSummary","pq_grandsummary","summaryData","getCheckedNodes","refreshHeadVal","hasCboxHead","getCellHeader","onHeaderChange","preventDefault","stopPropagation","isImmediatePropagationStopped","originalEvent","isDefaultPrevented","getCellIndices","eventNamespace","pq_celldata","toUpperCase","elementFromPoint","activeElement","offsetWidth","offsetHeight","getFocusEle","isPlainObject","getOwnPropertyDescriptor","defineProperty","getDataType","formatNumber","attachEvent","ResizeObserver","addResizeListener","responseType","deFormatNumber","triggerHandler","toLowerCase","pq_disabled","pq_selected","pq_disabled_group","tableToArray","formatCurrency","fromCharCode","generateData","scrollWidth","clientWidth","validations","getValueFromDataType","getEditCell","focusInvalid","allowInvalid","invalidClass","checkEditable","_isValidCell","removeClass","onScrollCell","isValidCell","rowIndxPage","strFirstPage","strNextPage","strPrevPage","strLastPage","getRppOptions","onChangeSelect","$totalPages","bindCurPage","enableSelection","totalRecords","_createWidget","origOptions","roundCorners","summaryOnTop","collapsible","toolPanelRules","$toolPanelRules","$grid_center","onfocusHeader","_onGCMouseDown","cRenderBody","_onClickCell","_onDblClickCell","_onMouseDown","_onCellMouseEnter","_onRowMouseEnter","_onCellMouseLeave","_onRowMouseLeave","selectionModel","disableSelection","_refreshTitle","generateLoading","_refreshResizable","_refreshDraggable","iResizeColumns","cResizeColumns","addEventListener","changedTouches","_blurEditMode","iRenderHead","_refreshLoadingString","_createCollapse","refreshDataAndView","_destroyResizable","uiResizable","removeChild","_destroyDraggable","bodyKeyDown","refreshAfterExpand","currentTarget","clicksToEdit","isValidChange","isEditableCell","pq_cellprop","isEditableRow","_onMouseDownCont","setAttribute","_mousePQUpDelegate","_onMouseDownCell","isPropagationStopped","_onMouseDownRow","getRootCellO","highlightCell","highlightRow","unHighlightCell","unHighlightRow","getHeadIndices","getCellIndx","headerCells","_getCreateEventData","remoteRequest","_onDataAvailable","showLoading","showLoadingCounter","hideLoading","getTotalRows","refreshDataFromDataModel","_queueATriggers","backwardCompat","triggerQueue","getQueryString","filterModel","getQueryStringSort","iFilterData","getQueryStringFilter","postDataOnce","contentType","onRemoteSuccess","_refreshPager","getInstance","getColsPrimary","_generateEditorOutline","getCellCont","insertAfter","_removeEditOutline","refreshCell","scrollColumn","blurIfFocus","setSelection","getFirstVisibleCI","getColModel","getCMPrimary","getOCMPrimary","saveEditCell","getEditCellData","_digestNewRow","_digestData","historyModel","refreshCompareBy","checkEditableAdd","_digestUpdate","_digestDelete","refreshColumn","refreshHeaderCell","quitEditMode","_quitEditMode","getViewPortRowsIndx","getViewPortIndx","getRIOffset","ismergedCell","getFirstEditableColIndx","editFirstCellInRow","keyDownInEdit","keyPressInEdit","keyUpInEdit","cancelBlurCls","autocomplete","preventClose","_deleteBlurEditMode","createRange","getSelection","selectNodeContents","removeAllRanges","getCellFilter","getEditorIndices","getRowsByClass","getCellsByClass","pq_cellattr","processAttr","isEmptyObject","normalizeList","arrayUnique","_removeClass","_getFirstRC","getFirstVisibleRIP","getLastVisibleRIP","getLastVisibleCI","getNextVisibleCI","getPrevVisibleCI","getPrevVisibleRIP","getNextVisibleRIP","calcWidthCols","incrRowIndx","pressToEdit","getRootCell","getRootCellV","saveAndMove","setDataMergeCell","resizeOrReplace","cGenerateView","minColWidth","maxColWidth","percentColumn","refreshWidth","autoFitCols","isDateFormat","pq_rowstyle","columnBorders","pq_cellstyle","addDisableCls","getHeadCell","iDragColumns","colCollapse","onHeaderCellClick","getSortSpaceSpans","header_active","pq_composed","setDraggables","doubleClick","scrollModel","_setDragLimits","_getDragHelper","outerHeight","columnResize","cDragColumns","dragColumns","$drag_helper","$arrowBottom","onColMouseDown","setDraggable","setDroppables","updateDragHelper","showFeedback","mixHeaderFilter","postRenderCell","createListener","bindListener","getFilterUI","betweenTmpl","getControlStr","onWindowResize","mozFullScreen","webkitIsFullScreen","innerHeight","rowTemplate","maxWidthPixel","getFlexWidth","dimsRelativeTo","_calcOffset","isFullScreen","isReactiveDims","setResizeTimer","getParentDims","_autoResizeTimeout","refreshAfterResize","autoSizeInterval","refreshToolbar","refreshGridWidthAndHeight","setCenterHeight","setGridAndCenterHeightForFlex","setGridWidthForFlex","cCheckBoxColumn","oneDataReady","onDataReady","onCheckBoxChange","onCellKeyDown","onRefreshHeader","onRowSelect","onBeforeRowSelect","onBeforeCheck","renderLabel","cFilterData","iMouseSelection","cMouseSelection","getCellCoords","rowInvalidate","rowCollapse","stateColKeys","replaceWith","showToolbar","refreshHeader","refreshSummary","refreshHeaderFilter","dataPrimary","_sortLocalData","getPlainOptions","getDataCascade","removeNullOptions","filterLocalData","sortLocalData","clearFilters","groupOption","columnTemplate","autoGenColumns","getHeaderCells","assignRowSpan","cacheIndices","initTypeColumns","refreshComplete","rowHtDetail","detailModel","onBeforeViewEmpty","onAutoRowHeight","onColumnResize","getHeightCell","detachCells","softRefresh","getCellRegion","collapseIcon","initRowHtArrDetailSuper","setCellDims","getRenderVal","_setGlobalStr","addressLast","inflateRange","removeBlock","gridInstance","commitAddAll","commitUpdateAll","commitDeleteAll","commitUpdate","commitDelete","rollbackUpdate","rollbackDelete","rollbackAdd","getChangesValue","getChangesRaw","getCellData","deleteNodes","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","onCellClick","onCellMouseDown","onCellMouseEnter","onMousePQUp","clearClipBoard","createClipBoard","destroyClipBoard","onFilterChange","defaultDate","dpBeforeShow","filterFnSelect","conditionList","getConditionsDT","conditionExclude","cFilterMenu","lastIndexOf","compatibilityCheck","getCMFromRules","addMissingConditions","copyRuleToColumn","getRulesFromCM","_getRulesFromCM","sortRulesAndFMIndx","isMatchCell","writeSorter","writeSingle","skipCustomSort","initByRemote","tempMultiple","sort_sortType","sort_number","sort_dataType","sort_locale","sort_string","compileSorter","removeCache","localeCompare","alterColumn","calcVisibleRows","findNextVisibleColumn","findNextVisibleRow","calcVisibleColumns","_mergeCells","beforeTrigger","onGroupItemClick","removeGroup","toggleLevel","triggerChange","groupRemoveIcon","summaryEdit","getAggOptions","editorGetData","createHeader","summaryOptions","groupChange","onCellKeyDown2","onColumnDrag","onCustomSort","setCascadeInit","initHeadSortable","strGroup_header","initHeaderMenu","updateItems","removeEmptyParent","getUniqueNodes","cascadeInit","initHeadDroppable","onCustomSortTree","summaryRestore","refreshColumns","initcollapsed","renderTitle","renderBodyCell","renderSummary","summaryTitle","updateformatVal","titleDefault","editorSummary","postRenderInterval","contentHelper","addRejectIcon","isDraggable","addAcceptIcon","getChildren","removeFeedback","elementFromXY","contextMenu","getItemHtml","onMouseOver","removeSubMenu","onMouseDown","onBeforeCol","getAllCells","oneRefreshCol","getElementById","iFillHandle","cFillHandle","onSelectChange","onSelectEnd","setDoubleClickable","getFullYear","setFullYear","patternDate2","autofillVal","getContRight","calcMainData","isFormulaChange","formulaSave","isCollapsed","historyDelete","collapseAll","collapseNodes","expandNodes","filterShowChildren","onDataAvailable","onDataReadyAfter","onBeforeCellKeyDown","onCustomFilter","onClearFilter","leafIfEmpty","historyMove","refreshOnChange","refreshViewFull","clearFolderCheckbox","showHideRows","filterLockSummary","iconCollapse","_showHideRows","isSelectedAll","copyFormula","generateCols","headerRowIndx","applyOptions","excelImport","getFileText","getFileTextFromKey","getStyleText","preDefFormats","colorFromNode","unescapeXml","uniqueCount","cacheStyles","getPathSheets","getWorkSheet","getMergeCells","customHeight","getBinaryContent","exportExcel","getCsvHeader","postRequest","getExportCM","getWorkbook","getJsonContent","getCSVContent","getHtmlContent","getHtmlHeader","getHtmlBody","nostringify","getXlsHeader","getXlsMergeCells","getWBookRels","getSheetRel","getContentTypes","getStyleIndx","getFormatIndx","getFillIndx","getBorderIndx","getFontIndx","SpreadSheet","formulasModel","onDataReadyDone","onColumnAMR","onBeforeValidateDone","onEditorBegin","onEditorEnd","onEditorKeyUp","onTabChange","onTabRename","eachFormula","execIfDirty","startOffset","selectRange","removeStrings","strFormulas","valueToDate","getUTCMonth","getUTCFullYear","setUTCMonth","toLocaleLowerCase","toLocaleUpperCase","onBeforeFilterDone","pivotSortFn","pivotColsTotal","transformData","addAggrInCM","pivotTotalForSingle","getAttribute","_sortCancel","isHideColPane","hidePivotChkBox","disablePivotChkBox","strTP_pivot","hideRowPane","hideGroupChkBox","strTP_rowPane","strTP_colPane","hideAggPane","strTP_aggPane","onPivotChange","onGroupChange","onGroupOption","hideColPane","refreshGrid","showHideColPane","getSortCancel","setSortCancel","pendingRefresh","templateVals","strTP_rowPH","strTP_colPH","strTP_aggPH","setAttrPanes","onHeadCellClick","iHeaderMenu","strSelectAll","menuInDisable","menuInClose","onTreeExpand","gridOptions","onFilterClick","onMenuClick","getMenuHtml","appendFilter","getRenderLbl","refreshRowFilter","onSel1Change","onSel2Change","$filter_mode","onModeChange","getHtmlInput","readFilterUI","getConditionsCol","strCondition","getOptionStr","singleFilter","strConditions","filterByCond","refreshInputVarsAndEvents","initControls","$filter_mode_div","addEventsInput","isInputHidden","contentEditable","clientHeight","refreshDataView","getPrototypeOf","prxArrayObjs","createElement","setStartAfter","startContainer","textContent","nextSibling","appendChild","onCellEnter","getSheetOptions","getGridOptions","strTabRemove","scrollLeftVal","setBtnEnable","strTabClose","customFilter","cachedPages","progressAcrossTabs","triggerComplete","triggerProgress","triggerTblDims","calcTopBottom","calInitFinal","wdContClient","htContClient","getHtDetail","getHeightCellM","assignTblDims","initRowHtArr","setRowHtArr","setColWdArr","generateCell","getClsStyle","getWidthCellM","getRowClsStyleAttr","onNativeScroll","onMouseWheel","onRefreshTimer","calInitFinalSuper","fullRefresh","removeMergeCells","hasMergeCls","generateRow","renderNumCell","getWidthCell","getHeightCellDirty","cRenderHead","onHeadHtChanged","postRenderAll","initRowHtArrSuper","initStripeArr","refreshColumnWidths","initColWdArrSuper","refreshAllCells","initColWdArr","setScrollLeft","initRefreshTimer","_postRender","newScrollPos","hideVScroll","autoRowHead","onHeaderClick","onHeaderKeyDown","onCreateHeader","refreshResizeColumn","setSortIcons","createHeaderCell","renderFilterCell"][K]})},200:K=>{"use strict";K.exports="/*! jQuery UI - v1.12.1 - 2017-03-19\n* http://jqueryui.com\n* Includes: draggable.css, core.css, resizable.css, selectable.css, sortable.css, accordion.css, autocomplete.css, menu.css, button.css, controlgroup.css, checkboxradio.css, datepicker.css, dialog.css, progressbar.css, selectmenu.css, slider.css, spinner.css, tabs.css, tooltip.css, theme.css\n* To view and modify this theme, visit http://jqueryui.com/themeroller/?scope=&folderName=base&cornerRadiusShadow=8px&offsetLeftShadow=0px&offsetTopShadow=0px&thicknessShadow=5px&opacityShadow=30&bgImgOpacityShadow=0&bgTextureShadow=flat&bgColorShadow=666666&opacityOverlay=30&bgImgOpacityOverlay=0&bgTextureOverlay=flat&bgColorOverlay=aaaaaa&iconColorError=cc0000&fcError=5f3f3f&borderColorError=f1a899&bgTextureError=flat&bgColorError=fddfdf&iconColorHighlight=777620&fcHighlight=777620&borderColorHighlight=dad55e&bgTextureHighlight=flat&bgColorHighlight=fffa90&iconColorActive=ffffff&fcActive=ffffff&borderColorActive=003eff&bgTextureActive=flat&bgColorActive=007fff&iconColorHover=555555&fcHover=2b2b2b&borderColorHover=cccccc&bgTextureHover=flat&bgColorHover=ededed&iconColorDefault=777777&fcDefault=454545&borderColorDefault=c5c5c5&bgTextureDefault=flat&bgColorDefault=f6f6f6&iconColorContent=444444&fcContent=333333&borderColorContent=dddddd&bgTextureContent=flat&bgColorContent=ffffff&iconColorHeader=444444&fcHeader=333333&borderColorHeader=dddddd&bgTextureHeader=flat&bgColorHeader=e9e9e9&cornerRadius=3px&fwDefault=normal&fsDefault=1em&ffDefault=Arial%2CHelvetica%2Csans-serif\n* Copyright jQuery Foundation and other contributors; Licensed MIT */\n\n.ui-draggable-handle {\n\ttouch-action: none;\n}\n\n/* Layout helpers\n----------------------------------*/\n\n.ui-helper-hidden {\n\tdisplay: none;\n}\n\n.ui-helper-hidden-accessible {\n\tborder: 0;\n\tclip: rect(0 0 0 0);\n\theight: 1px;\n\tmargin: -1px;\n\toverflow: hidden;\n\tpadding: 0;\n\tposition: absolute;\n\twidth: 1px;\n}\n\n.ui-helper-reset {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\toutline: 0;\n\tline-height: 1.3;\n\ttext-decoration: none;\n\tfont-size: 100%;\n\tlist-style: none;\n}\n\n.ui-helper-clearfix:before,\n.ui-helper-clearfix:after {\n\tcontent: \"\";\n\tdisplay: table;\n\tborder-collapse: collapse;\n}\n\n.ui-helper-clearfix:after {\n\tclear: both;\n}\n\n.ui-helper-zfix {\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n\tposition: absolute;\n\topacity: 0;\n\tfilter:Alpha(Opacity=0); /* support: IE8 */\n}\n\n.ui-front {\n\tz-index: 100;\n}\n\n/* Interaction Cues\n----------------------------------*/\n\n.ui-state-disabled {\n\tcursor: default !important;\n\tpointer-events: none;\n}\n\n/* Icons\n----------------------------------*/\n\n.ui-icon {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tmargin-top: -.25em;\n\tposition: relative;\n\ttext-indent: -99999px;\n\toverflow: hidden;\n\tbackground-repeat: no-repeat;\n}\n\n.ui-widget-icon-block {\n\tleft: 50%;\n\tmargin-left: -8px;\n\tdisplay: block;\n}\n\n/* Misc visuals\n----------------------------------*/\n\n/* Overlays */\n\n.ui-widget-overlay {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.ui-resizable {\n\tposition: relative;\n}\n\n.ui-resizable-handle {\n\tposition: absolute;\n\tfont-size: 0.1px;\n\tdisplay: block;\n\ttouch-action: none;\n}\n\n.ui-resizable-disabled .ui-resizable-handle,\n.ui-resizable-autohide .ui-resizable-handle {\n\tdisplay: none;\n}\n\n.ui-resizable-n {\n\tcursor: n-resize;\n\theight: 7px;\n\twidth: 100%;\n\ttop: -5px;\n\tleft: 0;\n}\n\n.ui-resizable-s {\n\tcursor: s-resize;\n\theight: 7px;\n\twidth: 100%;\n\tbottom: -5px;\n\tleft: 0;\n}\n\n.ui-resizable-e {\n\tcursor: e-resize;\n\twidth: 7px;\n\tright: -5px;\n\ttop: 0;\n\theight: 100%;\n}\n\n.ui-resizable-w {\n\tcursor: w-resize;\n\twidth: 7px;\n\tleft: -5px;\n\ttop: 0;\n\theight: 100%;\n}\n\n.ui-resizable-se {\n\tcursor: se-resize;\n\twidth: 12px;\n\theight: 12px;\n\tright: 1px;\n\tbottom: 1px;\n}\n\n.ui-resizable-sw {\n\tcursor: sw-resize;\n\twidth: 9px;\n\theight: 9px;\n\tleft: -5px;\n\tbottom: -5px;\n}\n\n.ui-resizable-nw {\n\tcursor: nw-resize;\n\twidth: 9px;\n\theight: 9px;\n\tleft: -5px;\n\ttop: -5px;\n}\n\n.ui-resizable-ne {\n\tcursor: ne-resize;\n\twidth: 9px;\n\theight: 9px;\n\tright: -5px;\n\ttop: -5px;\n}\n\n.ui-selectable {\n\ttouch-action: none;\n}\n\n.ui-selectable-helper {\n\tposition: absolute;\n\tz-index: 100;\n\tborder: 1px dotted black;\n}\n\n.ui-sortable-handle {\n\ttouch-action: none;\n}\n\n.ui-accordion .ui-accordion-header {\n\tdisplay: block;\n\tcursor: pointer;\n\tposition: relative;\n\tmargin: 2px 0 0 0;\n\tpadding: .5em .5em .5em .7em;\n\tfont-size: 100%;\n}\n\n.ui-accordion .ui-accordion-content {\n\tpadding: 1em 2.2em;\n\tborder-top: 0;\n\toverflow: auto;\n}\n\n.ui-autocomplete {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tcursor: default;\n}\n\n.ui-menu {\n\tlist-style: none;\n\tpadding: 0;\n\tmargin: 0;\n\tdisplay: block;\n\toutline: 0;\n}\n\n.ui-menu .ui-menu {\n\tposition: absolute;\n}\n\n.ui-menu .ui-menu-item {\n\tmargin: 0;\n\tcursor: pointer;\n\t/* support: IE10, see #8844 */\n\tlist-style-image: url(\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\");\n}\n\n.ui-menu .ui-menu-item-wrapper {\n\tposition: relative;\n\tpadding: 3px 1em 3px .4em;\n}\n\n.ui-menu .ui-menu-divider {\n\tmargin: 5px 0;\n\theight: 0;\n\tfont-size: 0;\n\tline-height: 0;\n\tborder-width: 1px 0 0 0;\n}\n\n.ui-menu .ui-state-focus,\n.ui-menu .ui-state-active {\n\tmargin: -1px;\n}\n\n/* icon support */\n\n.ui-menu-icons {\n\tposition: relative;\n}\n\n.ui-menu-icons .ui-menu-item-wrapper {\n\tpadding-left: 2em;\n}\n\n/* left-aligned */\n\n.ui-menu .ui-icon {\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: .2em;\n\tmargin: auto 0;\n}\n\n/* right-aligned */\n\n.ui-menu .ui-menu-icon {\n\tleft: auto;\n\tright: 0;\n}\n\n.ui-button {\n\tpadding: .4em 1em;\n\tdisplay: inline-block;\n\tposition: relative;\n\tline-height: normal;\n\tmargin-right: .1em;\n\tcursor: pointer;\n\tvertical-align: middle;\n\ttext-align: center;\n\t-webkit-user-select: none;\n\tuser-select: none;\n\n\t/* Support: IE <= 11 */\n\toverflow: visible;\n}\n\n.ui-button,\n.ui-button:link,\n.ui-button:visited,\n.ui-button:hover,\n.ui-button:active {\n\ttext-decoration: none;\n}\n\n/* to make room for the icon, a width needs to be set here */\n\n.ui-button-icon-only {\n\twidth: 2em;\n\tbox-sizing: border-box;\n\ttext-indent: -9999px;\n\twhite-space: nowrap;\n}\n\n/* no icon support for input elements */\n\ninput.ui-button.ui-button-icon-only {\n\ttext-indent: 0;\n}\n\n/* button icon element(s) */\n\n.ui-button-icon-only .ui-icon {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\tmargin-top: -8px;\n\tmargin-left: -8px;\n}\n\n.ui-button.ui-icon-notext .ui-icon {\n\tpadding: 0;\n\twidth: 2.1em;\n\theight: 2.1em;\n\ttext-indent: -9999px;\n\twhite-space: nowrap;\n\n}\n\ninput.ui-button.ui-icon-notext .ui-icon {\n\twidth: auto;\n\theight: auto;\n\ttext-indent: 0;\n\twhite-space: normal;\n\tpadding: .4em 1em;\n}\n\n/* workarounds */\n\n/* Support: Firefox 5 - 40 */\n\ninput.ui-button::-moz-focus-inner,\nbutton.ui-button::-moz-focus-inner {\n\tborder: 0;\n\tpadding: 0;\n}\n\n.ui-controlgroup {\n\tvertical-align: middle;\n\tdisplay: inline-block;\n}\n\n.ui-controlgroup > .ui-controlgroup-item {\n\tfloat: left;\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.ui-controlgroup > .ui-controlgroup-item:focus,\n.ui-controlgroup > .ui-controlgroup-item.ui-visual-focus {\n\tz-index: 9999;\n}\n\n.ui-controlgroup-vertical > .ui-controlgroup-item {\n\tdisplay: block;\n\tfloat: none;\n\twidth: 100%;\n\tmargin-top: 0;\n\tmargin-bottom: 0;\n\ttext-align: left;\n}\n\n.ui-controlgroup-vertical .ui-controlgroup-item {\n\tbox-sizing: border-box;\n}\n\n.ui-controlgroup .ui-controlgroup-label {\n\tpadding: .4em 1em;\n}\n\n.ui-controlgroup .ui-controlgroup-label span {\n\tfont-size: 80%;\n}\n\n.ui-controlgroup-horizontal .ui-controlgroup-label + .ui-controlgroup-item {\n\tborder-left: none;\n}\n\n.ui-controlgroup-vertical .ui-controlgroup-label + .ui-controlgroup-item {\n\tborder-top: none;\n}\n\n.ui-controlgroup-horizontal .ui-controlgroup-label.ui-widget-content {\n\tborder-right: none;\n}\n\n.ui-controlgroup-vertical .ui-controlgroup-label.ui-widget-content {\n\tborder-bottom: none;\n}\n\n/* Spinner specific style fixes */\n\n.ui-controlgroup-vertical .ui-spinner-input {\n\n\t/* Support: IE8 only, Android < 4.4 only */\n\twidth: 75%;\n\twidth: calc( 100% - 2.4em );\n}\n\n.ui-controlgroup-vertical .ui-spinner .ui-spinner-up {\n\tborder-top-style: solid;\n}\n\n.ui-checkboxradio-label .ui-icon-background {\n\tbox-shadow: inset 1px 1px 1px #ccc;\n\tborder-radius: .12em;\n\tborder: none;\n}\n\n.ui-checkboxradio-radio-label .ui-icon-background {\n\twidth: 16px;\n\theight: 16px;\n\tborder-radius: 1em;\n\toverflow: visible;\n\tborder: none;\n}\n\n.ui-checkboxradio-radio-label.ui-checkboxradio-checked .ui-icon,\n.ui-checkboxradio-radio-label.ui-checkboxradio-checked:hover .ui-icon {\n\tbackground-image: none;\n\twidth: 8px;\n\theight: 8px;\n\tborder-width: 4px;\n\tborder-style: solid;\n}\n\n.ui-checkboxradio-disabled {\n\tpointer-events: none;\n}\n\n.ui-datepicker {\n\twidth: 17em;\n\tpadding: .2em .2em 0;\n\tdisplay: none;\n}\n\n.ui-datepicker .ui-datepicker-header {\n\tposition: relative;\n\tpadding: .2em 0;\n}\n\n.ui-datepicker .ui-datepicker-prev,\n.ui-datepicker .ui-datepicker-next {\n\tposition: absolute;\n\ttop: 2px;\n\twidth: 1.8em;\n\theight: 1.8em;\n}\n\n.ui-datepicker .ui-datepicker-prev-hover,\n.ui-datepicker .ui-datepicker-next-hover {\n\ttop: 1px;\n}\n\n.ui-datepicker .ui-datepicker-prev {\n\tleft: 2px;\n}\n\n.ui-datepicker .ui-datepicker-next {\n\tright: 2px;\n}\n\n.ui-datepicker .ui-datepicker-prev-hover {\n\tleft: 1px;\n}\n\n.ui-datepicker .ui-datepicker-next-hover {\n\tright: 1px;\n}\n\n.ui-datepicker .ui-datepicker-prev span,\n.ui-datepicker .ui-datepicker-next span {\n\tdisplay: block;\n\tposition: absolute;\n\tleft: 50%;\n\tmargin-left: -8px;\n\ttop: 50%;\n\tmargin-top: -8px;\n}\n\n.ui-datepicker .ui-datepicker-title {\n\tmargin: 0 2.3em;\n\tline-height: 1.8em;\n\ttext-align: center;\n}\n\n.ui-datepicker .ui-datepicker-title select {\n\tfont-size: 1em;\n\tmargin: 1px 0;\n}\n\n.ui-datepicker select.ui-datepicker-month,\n.ui-datepicker select.ui-datepicker-year {\n\twidth: 45%;\n}\n\n.ui-datepicker table {\n\twidth: 100%;\n\tfont-size: .9em;\n\tborder-collapse: collapse;\n\tmargin: 0 0 .4em;\n}\n\n.ui-datepicker th {\n\tpadding: .7em .3em;\n\ttext-align: center;\n\tfont-weight: bold;\n\tborder: 0;\n}\n\n.ui-datepicker td {\n\tborder: 0;\n\tpadding: 1px;\n}\n\n.ui-datepicker td span,\n.ui-datepicker td a {\n\tdisplay: block;\n\tpadding: .2em;\n\ttext-align: right;\n\ttext-decoration: none;\n}\n\n.ui-datepicker .ui-datepicker-buttonpane {\n\tbackground-image: none;\n\tmargin: .7em 0 0 0;\n\tpadding: 0 .2em;\n\tborder-left: 0;\n\tborder-right: 0;\n\tborder-bottom: 0;\n}\n\n.ui-datepicker .ui-datepicker-buttonpane button {\n\tfloat: right;\n\tmargin: .5em .2em .4em;\n\tcursor: pointer;\n\tpadding: .2em .6em .3em .6em;\n\twidth: auto;\n\toverflow: visible;\n}\n\n.ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current {\n\tfloat: left;\n}\n\n/* with multiple calendars */\n\n.ui-datepicker.ui-datepicker-multi {\n\twidth: auto;\n}\n\n.ui-datepicker-multi .ui-datepicker-group {\n\tfloat: left;\n}\n\n.ui-datepicker-multi .ui-datepicker-group table {\n\twidth: 95%;\n\tmargin: 0 auto .4em;\n}\n\n.ui-datepicker-multi-2 .ui-datepicker-group {\n\twidth: 50%;\n}\n\n.ui-datepicker-multi-3 .ui-datepicker-group {\n\twidth: 33.3%;\n}\n\n.ui-datepicker-multi-4 .ui-datepicker-group {\n\twidth: 25%;\n}\n\n.ui-datepicker-multi .ui-datepicker-group-last .ui-datepicker-header,\n.ui-datepicker-multi .ui-datepicker-group-middle .ui-datepicker-header {\n\tborder-left-width: 0;\n}\n\n.ui-datepicker-multi .ui-datepicker-buttonpane {\n\tclear: left;\n}\n\n.ui-datepicker-row-break {\n\tclear: both;\n\twidth: 100%;\n\tfont-size: 0;\n}\n\n/* RTL support */\n\n.ui-datepicker-rtl {\n\tdirection: rtl;\n}\n\n.ui-datepicker-rtl .ui-datepicker-prev {\n\tright: 2px;\n\tleft: auto;\n}\n\n.ui-datepicker-rtl .ui-datepicker-next {\n\tleft: 2px;\n\tright: auto;\n}\n\n.ui-datepicker-rtl .ui-datepicker-prev:hover {\n\tright: 1px;\n\tleft: auto;\n}\n\n.ui-datepicker-rtl .ui-datepicker-next:hover {\n\tleft: 1px;\n\tright: auto;\n}\n\n.ui-datepicker-rtl .ui-datepicker-buttonpane {\n\tclear: right;\n}\n\n.ui-datepicker-rtl .ui-datepicker-buttonpane button {\n\tfloat: left;\n}\n\n.ui-datepicker-rtl .ui-datepicker-buttonpane button.ui-datepicker-current,\n.ui-datepicker-rtl .ui-datepicker-group {\n\tfloat: right;\n}\n\n.ui-datepicker-rtl .ui-datepicker-group-last .ui-datepicker-header,\n.ui-datepicker-rtl .ui-datepicker-group-middle .ui-datepicker-header {\n\tborder-right-width: 0;\n\tborder-left-width: 1px;\n}\n\n/* Icons */\n\n.ui-datepicker .ui-icon {\n\tdisplay: block;\n\ttext-indent: -99999px;\n\toverflow: hidden;\n\tbackground-repeat: no-repeat;\n\tleft: .5em;\n\ttop: .3em;\n}\n\n.ui-dialog {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tpadding: .2em;\n\toutline: 0;\n}\n\n.ui-dialog .ui-dialog-titlebar {\n\tpadding: .4em 1em;\n\tposition: relative;\n}\n\n.ui-dialog .ui-dialog-title {\n\tfloat: left;\n\tmargin: .1em 0;\n\twhite-space: nowrap;\n\twidth: 90%;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n\n.ui-dialog .ui-dialog-titlebar-close {\n\tposition: absolute;\n\tright: .3em;\n\ttop: 50%;\n\twidth: 20px;\n\tmargin: -10px 0 0 0;\n\tpadding: 1px;\n\theight: 20px;\n}\n\n.ui-dialog .ui-dialog-content {\n\tposition: relative;\n\tborder: 0;\n\tpadding: .5em 1em;\n\tbackground: none;\n\toverflow: auto;\n}\n\n.ui-dialog .ui-dialog-buttonpane {\n\ttext-align: left;\n\tborder-width: 1px 0 0 0;\n\tbackground-image: none;\n\tmargin-top: .5em;\n\tpadding: .3em 1em .5em .4em;\n}\n\n.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset {\n\tfloat: right;\n}\n\n.ui-dialog .ui-dialog-buttonpane button {\n\tmargin: .5em .4em .5em 0;\n\tcursor: pointer;\n}\n\n.ui-dialog .ui-resizable-n {\n\theight: 2px;\n\ttop: 0;\n}\n\n.ui-dialog .ui-resizable-e {\n\twidth: 2px;\n\tright: 0;\n}\n\n.ui-dialog .ui-resizable-s {\n\theight: 2px;\n\tbottom: 0;\n}\n\n.ui-dialog .ui-resizable-w {\n\twidth: 2px;\n\tleft: 0;\n}\n\n.ui-dialog .ui-resizable-se,\n.ui-dialog .ui-resizable-sw,\n.ui-dialog .ui-resizable-ne,\n.ui-dialog .ui-resizable-nw {\n\twidth: 7px;\n\theight: 7px;\n}\n\n.ui-dialog .ui-resizable-se {\n\tright: 0;\n\tbottom: 0;\n}\n\n.ui-dialog .ui-resizable-sw {\n\tleft: 0;\n\tbottom: 0;\n}\n\n.ui-dialog .ui-resizable-ne {\n\tright: 0;\n\ttop: 0;\n}\n\n.ui-dialog .ui-resizable-nw {\n\tleft: 0;\n\ttop: 0;\n}\n\n.ui-draggable .ui-dialog-titlebar {\n\tcursor: move;\n}\n\n.ui-progressbar {\n\theight: 2em;\n\ttext-align: left;\n\toverflow: hidden;\n}\n\n.ui-progressbar .ui-progressbar-value {\n\tmargin: -1px;\n\theight: 100%;\n}\n\n.ui-progressbar .ui-progressbar-overlay {\n\tbackground: url(\"data:image/gif;base64,R0lGODlhKAAoAIABAAAAAP///yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJAQABACwAAAAAKAAoAAACkYwNqXrdC52DS06a7MFZI+4FHBCKoDeWKXqymPqGqxvJrXZbMx7Ttc+w9XgU2FB3lOyQRWET2IFGiU9m1frDVpxZZc6bfHwv4c1YXP6k1Vdy292Fb6UkuvFtXpvWSzA+HycXJHUXiGYIiMg2R6W459gnWGfHNdjIqDWVqemH2ekpObkpOlppWUqZiqr6edqqWQAAIfkECQEAAQAsAAAAACgAKAAAApSMgZnGfaqcg1E2uuzDmmHUBR8Qil95hiPKqWn3aqtLsS18y7G1SzNeowWBENtQd+T1JktP05nzPTdJZlR6vUxNWWjV+vUWhWNkWFwxl9VpZRedYcflIOLafaa28XdsH/ynlcc1uPVDZxQIR0K25+cICCmoqCe5mGhZOfeYSUh5yJcJyrkZWWpaR8doJ2o4NYq62lAAACH5BAkBAAEALAAAAAAoACgAAAKVDI4Yy22ZnINRNqosw0Bv7i1gyHUkFj7oSaWlu3ovC8GxNso5fluz3qLVhBVeT/Lz7ZTHyxL5dDalQWPVOsQWtRnuwXaFTj9jVVh8pma9JjZ4zYSj5ZOyma7uuolffh+IR5aW97cHuBUXKGKXlKjn+DiHWMcYJah4N0lYCMlJOXipGRr5qdgoSTrqWSq6WFl2ypoaUAAAIfkECQEAAQAsAAAAACgAKAAAApaEb6HLgd/iO7FNWtcFWe+ufODGjRfoiJ2akShbueb0wtI50zm02pbvwfWEMWBQ1zKGlLIhskiEPm9R6vRXxV4ZzWT2yHOGpWMyorblKlNp8HmHEb/lCXjcW7bmtXP8Xt229OVWR1fod2eWqNfHuMjXCPkIGNileOiImVmCOEmoSfn3yXlJWmoHGhqp6ilYuWYpmTqKUgAAIfkECQEAAQAsAAAAACgAKAAAApiEH6kb58biQ3FNWtMFWW3eNVcojuFGfqnZqSebuS06w5V80/X02pKe8zFwP6EFWOT1lDFk8rGERh1TTNOocQ61Hm4Xm2VexUHpzjymViHrFbiELsefVrn6XKfnt2Q9G/+Xdie499XHd2g4h7ioOGhXGJboGAnXSBnoBwKYyfioubZJ2Hn0RuRZaflZOil56Zp6iioKSXpUAAAh+QQJAQABACwAAAAAKAAoAAACkoQRqRvnxuI7kU1a1UU5bd5tnSeOZXhmn5lWK3qNTWvRdQxP8qvaC+/yaYQzXO7BMvaUEmJRd3TsiMAgswmNYrSgZdYrTX6tSHGZO73ezuAw2uxuQ+BbeZfMxsexY35+/Qe4J1inV0g4x3WHuMhIl2jXOKT2Q+VU5fgoSUI52VfZyfkJGkha6jmY+aaYdirq+lQAACH5BAkBAAEALAAAAAAoACgAAAKWBIKpYe0L3YNKToqswUlvznigd4wiR4KhZrKt9Upqip61i9E3vMvxRdHlbEFiEXfk9YARYxOZZD6VQ2pUunBmtRXo1Lf8hMVVcNl8JafV38aM2/Fu5V16Bn63r6xt97j09+MXSFi4BniGFae3hzbH9+hYBzkpuUh5aZmHuanZOZgIuvbGiNeomCnaxxap2upaCZsq+1kAACH5BAkBAAEALAAAAAAoACgAAAKXjI8By5zf4kOxTVrXNVlv1X0d8IGZGKLnNpYtm8Lr9cqVeuOSvfOW79D9aDHizNhDJidFZhNydEahOaDH6nomtJjp1tutKoNWkvA6JqfRVLHU/QUfau9l2x7G54d1fl995xcIGAdXqMfBNadoYrhH+Mg2KBlpVpbluCiXmMnZ2Sh4GBqJ+ckIOqqJ6LmKSllZmsoq6wpQAAAh+QQJAQABACwAAAAAKAAoAAAClYx/oLvoxuJDkU1a1YUZbJ59nSd2ZXhWqbRa2/gF8Gu2DY3iqs7yrq+xBYEkYvFSM8aSSObE+ZgRl1BHFZNr7pRCavZ5BW2142hY3AN/zWtsmf12p9XxxFl2lpLn1rseztfXZjdIWIf2s5dItwjYKBgo9yg5pHgzJXTEeGlZuenpyPmpGQoKOWkYmSpaSnqKileI2FAAACH5BAkBAAEALAAAAAAoACgAAAKVjB+gu+jG4kORTVrVhRlsnn2dJ3ZleFaptFrb+CXmO9OozeL5VfP99HvAWhpiUdcwkpBH3825AwYdU8xTqlLGhtCosArKMpvfa1mMRae9VvWZfeB2XfPkeLmm18lUcBj+p5dnN8jXZ3YIGEhYuOUn45aoCDkp16hl5IjYJvjWKcnoGQpqyPlpOhr3aElaqrq56Bq7VAAAOw==\");\n\theight: 100%;\n\tfilter: alpha(opacity=25); /* support: IE8 */\n\topacity: 0.25;\n}\n\n.ui-progressbar-indeterminate .ui-progressbar-value {\n\tbackground-image: none;\n}\n\n.ui-selectmenu-menu {\n\tpadding: 0;\n\tmargin: 0;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tdisplay: none;\n}\n\n.ui-selectmenu-menu .ui-menu {\n\toverflow: auto;\n\toverflow-x: hidden;\n\tpadding-bottom: 1px;\n}\n\n.ui-selectmenu-menu .ui-menu .ui-selectmenu-optgroup {\n\tfont-size: 1em;\n\tfont-weight: bold;\n\tline-height: 1.5;\n\tpadding: 2px 0.4em;\n\tmargin: 0.5em 0 0 0;\n\theight: auto;\n\tborder: 0;\n}\n\n.ui-selectmenu-open {\n\tdisplay: block;\n}\n\n.ui-selectmenu-text {\n\tdisplay: block;\n\tmargin-right: 20px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n\n.ui-selectmenu-button.ui-button {\n\ttext-align: left;\n\twhite-space: nowrap;\n\twidth: 14em;\n}\n\n.ui-selectmenu-icon.ui-icon {\n\tfloat: right;\n\tmargin-top: 0;\n}\n\n.ui-slider {\n\tposition: relative;\n\ttext-align: left;\n}\n\n.ui-slider .ui-slider-handle {\n\tposition: absolute;\n\tz-index: 2;\n\twidth: 1.2em;\n\theight: 1.2em;\n\tcursor: default;\n\ttouch-action: none;\n}\n\n.ui-slider .ui-slider-range {\n\tposition: absolute;\n\tz-index: 1;\n\tfont-size: .7em;\n\tdisplay: block;\n\tborder: 0;\n\tbackground-position: 0 0;\n}\n\n/* support: IE8 - See #6727 */\n\n.ui-slider.ui-state-disabled .ui-slider-handle,\n.ui-slider.ui-state-disabled .ui-slider-range {\n\tfilter: inherit;\n}\n\n.ui-slider-horizontal {\n\theight: .8em;\n}\n\n.ui-slider-horizontal .ui-slider-handle {\n\ttop: -.3em;\n\tmargin-left: -.6em;\n}\n\n.ui-slider-horizontal .ui-slider-range {\n\ttop: 0;\n\theight: 100%;\n}\n\n.ui-slider-horizontal .ui-slider-range-min {\n\tleft: 0;\n}\n\n.ui-slider-horizontal .ui-slider-range-max {\n\tright: 0;\n}\n\n.ui-slider-vertical {\n\twidth: .8em;\n\theight: 100px;\n}\n\n.ui-slider-vertical .ui-slider-handle {\n\tleft: -.3em;\n\tmargin-left: 0;\n\tmargin-bottom: -.6em;\n}\n\n.ui-slider-vertical .ui-slider-range {\n\tleft: 0;\n\twidth: 100%;\n}\n\n.ui-slider-vertical .ui-slider-range-min {\n\tbottom: 0;\n}\n\n.ui-slider-vertical .ui-slider-range-max {\n\ttop: 0;\n}\n\n.ui-spinner {\n\tposition: relative;\n\tdisplay: inline-block;\n\toverflow: hidden;\n\tpadding: 0;\n\tvertical-align: middle;\n}\n\n.ui-spinner-input {\n\tborder: none;\n\tbackground: none;\n\tcolor: inherit;\n\tpadding: .222em 0;\n\tmargin: .2em 0;\n\tvertical-align: middle;\n\tmargin-left: .4em;\n\tmargin-right: 2em;\n}\n\n.ui-spinner-button {\n\twidth: 1.6em;\n\theight: 50%;\n\tfont-size: .5em;\n\tpadding: 0;\n\tmargin: 0;\n\ttext-align: center;\n\tposition: absolute;\n\tcursor: default;\n\tdisplay: block;\n\toverflow: hidden;\n\tright: 0;\n}\n\n/* more specificity required here to override default borders */\n\n.ui-spinner a.ui-spinner-button {\n\tborder-top-style: none;\n\tborder-bottom-style: none;\n\tborder-right-style: none;\n}\n\n.ui-spinner-up {\n\ttop: 0;\n}\n\n.ui-spinner-down {\n\tbottom: 0;\n}\n\n.ui-tabs {\n\tposition: relative;/* position: relative prevents IE scroll bug (element with position: relative inside container with overflow: auto appear as \"fixed\") */\n\tpadding: .2em;\n}\n\n.ui-tabs .ui-tabs-nav {\n\tmargin: 0;\n\tpadding: .2em .2em 0;\n}\n\n.ui-tabs .ui-tabs-nav li {\n\tlist-style: none;\n\tfloat: left;\n\tposition: relative;\n\ttop: 0;\n\tmargin: 1px .2em 0 0;\n\tborder-bottom-width: 0;\n\tpadding: 0;\n\twhite-space: nowrap;\n}\n\n.ui-tabs .ui-tabs-nav .ui-tabs-anchor {\n\tfloat: left;\n\tpadding: .5em 1em;\n\ttext-decoration: none;\n}\n\n.ui-tabs .ui-tabs-nav li.ui-tabs-active {\n\tmargin-bottom: -1px;\n\tpadding-bottom: 1px;\n}\n\n.ui-tabs .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor,\n.ui-tabs .ui-tabs-nav li.ui-state-disabled .ui-tabs-anchor,\n.ui-tabs .ui-tabs-nav li.ui-tabs-loading .ui-tabs-anchor {\n\tcursor: text;\n}\n\n.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor {\n\tcursor: pointer;\n}\n\n.ui-tabs .ui-tabs-panel {\n\tdisplay: block;\n\tborder-width: 0;\n\tpadding: 1em 1.4em;\n\tbackground: none;\n}\n\n.ui-tooltip {\n\tpadding: 8px;\n\tposition: absolute;\n\tz-index: 9999;\n\tmax-width: 300px;\n}\n\nbody .ui-tooltip {\n\tborder-width: 2px;\n}\n\n/* Component containers\n----------------------------------*/\n\n.ui-widget {\n\tfont-family: Arial,Helvetica,sans-serif;\n\tfont-size: 1em;\n}\n\n.ui-widget .ui-widget {\n\tfont-size: 1em;\n}\n\n.ui-widget input,\n.ui-widget select,\n.ui-widget textarea,\n.ui-widget button {\n\tfont-family: Arial,Helvetica,sans-serif;\n\tfont-size: 1em;\n}\n\n.ui-widget.ui-widget-content {\n\tborder: 1px solid #c5c5c5;\n}\n\n.ui-widget-content {\n\tborder: 1px solid #dddddd;\n\tbackground: #ffffff;\n\tcolor: #333333;\n}\n\n.ui-widget-content a {\n\tcolor: #333333;\n}\n\n.ui-widget-header {\n\tborder: 1px solid #dddddd;\n\tbackground: #e9e9e9;\n\tcolor: #333333;\n\tfont-weight: bold;\n}\n\n.ui-widget-header a {\n\tcolor: #333333;\n}\n\n/* Interaction states\n----------------------------------*/\n\n.ui-state-default,\n.ui-widget-content .ui-state-default,\n.ui-widget-header .ui-state-default,\n.ui-button,\n\n/* We use html here because we need a greater specificity to make sure disabled\nworks properly when clicked or hovered */\nhtml .ui-button.ui-state-disabled:hover,\nhtml .ui-button.ui-state-disabled:active {\n\tborder: 1px solid #c5c5c5;\n\tbackground: #f6f6f6;\n\tfont-weight: normal;\n\tcolor: #454545;\n}\n\n.ui-state-default a,\n.ui-state-default a:link,\n.ui-state-default a:visited,\na.ui-button,\na:link.ui-button,\na:visited.ui-button,\n.ui-button {\n\tcolor: #454545;\n\ttext-decoration: none;\n}\n\n.ui-state-hover,\n.ui-widget-content .ui-state-hover,\n.ui-widget-header .ui-state-hover,\n.ui-state-focus,\n.ui-widget-content .ui-state-focus,\n.ui-widget-header .ui-state-focus,\n.ui-button:hover,\n.ui-button:focus {\n\tborder: 1px solid #cccccc;\n\tbackground: #ededed;\n\tfont-weight: normal;\n\tcolor: #2b2b2b;\n}\n\n.ui-state-hover a,\n.ui-state-hover a:hover,\n.ui-state-hover a:link,\n.ui-state-hover a:visited,\n.ui-state-focus a,\n.ui-state-focus a:hover,\n.ui-state-focus a:link,\n.ui-state-focus a:visited,\na.ui-button:hover,\na.ui-button:focus {\n\tcolor: #2b2b2b;\n\ttext-decoration: none;\n}\n\n.ui-visual-focus {\n\tbox-shadow: 0 0 3px 1px rgb(94, 158, 214);\n}\n\n.ui-state-active,\n.ui-widget-content .ui-state-active,\n.ui-widget-header .ui-state-active,\na.ui-button:active,\n.ui-button:active,\n.ui-button.ui-state-active:hover {\n\tborder: 1px solid #003eff;\n\tbackground: #007fff;\n\tfont-weight: normal;\n\tcolor: #ffffff;\n}\n\n.ui-icon-background,\n.ui-state-active .ui-icon-background {\n\tborder: #003eff;\n\tbackground-color: #ffffff;\n}\n\n.ui-state-active a,\n.ui-state-active a:link,\n.ui-state-active a:visited {\n\tcolor: #ffffff;\n\ttext-decoration: none;\n}\n\n/* Interaction Cues\n----------------------------------*/\n\n.ui-state-highlight,\n.ui-widget-content .ui-state-highlight,\n.ui-widget-header .ui-state-highlight {\n\tborder: 1px solid #dad55e;\n\tbackground: #fffa90;\n\tcolor: #777620;\n}\n\n.ui-state-checked {\n\tborder: 1px solid #dad55e;\n\tbackground: #fffa90;\n}\n\n.ui-state-highlight a,\n.ui-widget-content .ui-state-highlight a,\n.ui-widget-header .ui-state-highlight a {\n\tcolor: #777620;\n}\n\n.ui-state-error,\n.ui-widget-content .ui-state-error,\n.ui-widget-header .ui-state-error {\n\tborder: 1px solid #f1a899;\n\tbackground: #fddfdf;\n\tcolor: #5f3f3f;\n}\n\n.ui-state-error a,\n.ui-widget-content .ui-state-error a,\n.ui-widget-header .ui-state-error a {\n\tcolor: #5f3f3f;\n}\n\n.ui-state-error-text,\n.ui-widget-content .ui-state-error-text,\n.ui-widget-header .ui-state-error-text {\n\tcolor: #5f3f3f;\n}\n\n.ui-priority-primary,\n.ui-widget-content .ui-priority-primary,\n.ui-widget-header .ui-priority-primary {\n\tfont-weight: bold;\n}\n\n.ui-priority-secondary,\n.ui-widget-content .ui-priority-secondary,\n.ui-widget-header .ui-priority-secondary {\n\topacity: .7;\n\tfilter:Alpha(Opacity=70); /* support: IE8 */\n\tfont-weight: normal;\n}\n\n.ui-state-disabled,\n.ui-widget-content .ui-state-disabled,\n.ui-widget-header .ui-state-disabled {\n\topacity: .35;\n\tfilter:Alpha(Opacity=35); /* support: IE8 */\n\tbackground-image: none;\n}\n\n.ui-state-disabled .ui-icon {\n\tfilter:Alpha(Opacity=35); /* support: IE8 - See #6059 */\n}\n\n/* Icons\n----------------------------------*/\n\n/* states and images */\n\n.ui-icon {\n\twidth: 16px;\n\theight: 16px;\n}\n\n.ui-icon,\n.ui-widget-content .ui-icon {\n\tbackground-image: url('ui-icons_444444_256x240.0e0a9e65144a9bf9.png');\n}\n\n.ui-widget-header .ui-icon {\n\tbackground-image: url('ui-icons_444444_256x240.0e0a9e65144a9bf9.png');\n}\n\n.ui-state-hover .ui-icon,\n.ui-state-focus .ui-icon,\n.ui-button:hover .ui-icon,\n.ui-button:focus .ui-icon {\n\tbackground-image: url('ui-icons_555555_256x240.8adbd261678281ce.png');\n}\n\n.ui-state-active .ui-icon,\n.ui-button:active .ui-icon {\n\tbackground-image: url('ui-icons_ffffff_256x240.7b3b65cee7d59ccd.png');\n}\n\n.ui-state-highlight .ui-icon,\n.ui-button .ui-state-highlight.ui-icon {\n\tbackground-image: url('ui-icons_777620_256x240.4298d92e10bb13dc.png');\n}\n\n.ui-state-error .ui-icon,\n.ui-state-error-text .ui-icon {\n\tbackground-image: url('ui-icons_cc0000_256x240.3cc6f93e0fbdd6f0.png');\n}\n\n.ui-button .ui-icon {\n\tbackground-image: url('ui-icons_777777_256x240.0e3e40c4a518e818.png');\n}\n\n/* positioning */\n\n.ui-icon-blank { background-position: 16px 16px; }\n\n.ui-icon-caret-1-n { background-position: 0 0; }\n\n.ui-icon-caret-1-ne { background-position: -16px 0; }\n\n.ui-icon-caret-1-e { background-position: -32px 0; }\n\n.ui-icon-caret-1-se { background-position: -48px 0; }\n\n.ui-icon-caret-1-s { background-position: -65px 0; }\n\n.ui-icon-caret-1-sw { background-position: -80px 0; }\n\n.ui-icon-caret-1-w { background-position: -96px 0; }\n\n.ui-icon-caret-1-nw { background-position: -112px 0; }\n\n.ui-icon-caret-2-n-s { background-position: -128px 0; }\n\n.ui-icon-caret-2-e-w { background-position: -144px 0; }\n\n.ui-icon-triangle-1-n { background-position: 0 -16px; }\n\n.ui-icon-triangle-1-ne { background-position: -16px -16px; }\n\n.ui-icon-triangle-1-e { background-position: -32px -16px; }\n\n.ui-icon-triangle-1-se { background-position: -48px -16px; }\n\n.ui-icon-triangle-1-s { background-position: -65px -16px; }\n\n.ui-icon-triangle-1-sw { background-position: -80px -16px; }\n\n.ui-icon-triangle-1-w { background-position: -96px -16px; }\n\n.ui-icon-triangle-1-nw { background-position: -112px -16px; }\n\n.ui-icon-triangle-2-n-s { background-position: -128px -16px; }\n\n.ui-icon-triangle-2-e-w { background-position: -144px -16px; }\n\n.ui-icon-arrow-1-n { background-position: 0 -32px; }\n\n.ui-icon-arrow-1-ne { background-position: -16px -32px; }\n\n.ui-icon-arrow-1-e { background-position: -32px -32px; }\n\n.ui-icon-arrow-1-se { background-position: -48px -32px; }\n\n.ui-icon-arrow-1-s { background-position: -65px -32px; }\n\n.ui-icon-arrow-1-sw { background-position: -80px -32px; }\n\n.ui-icon-arrow-1-w { background-position: -96px -32px; }\n\n.ui-icon-arrow-1-nw { background-position: -112px -32px; }\n\n.ui-icon-arrow-2-n-s { background-position: -128px -32px; }\n\n.ui-icon-arrow-2-ne-sw { background-position: -144px -32px; }\n\n.ui-icon-arrow-2-e-w { background-position: -160px -32px; }\n\n.ui-icon-arrow-2-se-nw { background-position: -176px -32px; }\n\n.ui-icon-arrowstop-1-n { background-position: -192px -32px; }\n\n.ui-icon-arrowstop-1-e { background-position: -208px -32px; }\n\n.ui-icon-arrowstop-1-s { background-position: -224px -32px; }\n\n.ui-icon-arrowstop-1-w { background-position: -240px -32px; }\n\n.ui-icon-arrowthick-1-n { background-position: 1px -48px; }\n\n.ui-icon-arrowthick-1-ne { background-position: -16px -48px; }\n\n.ui-icon-arrowthick-1-e { background-position: -32px -48px; }\n\n.ui-icon-arrowthick-1-se { background-position: -48px -48px; }\n\n.ui-icon-arrowthick-1-s { background-position: -64px -48px; }\n\n.ui-icon-arrowthick-1-sw { background-position: -80px -48px; }\n\n.ui-icon-arrowthick-1-w { background-position: -96px -48px; }\n\n.ui-icon-arrowthick-1-nw { background-position: -112px -48px; }\n\n.ui-icon-arrowthick-2-n-s { background-position: -128px -48px; }\n\n.ui-icon-arrowthick-2-ne-sw { background-position: -144px -48px; }\n\n.ui-icon-arrowthick-2-e-w { background-position: -160px -48px; }\n\n.ui-icon-arrowthick-2-se-nw { background-position: -176px -48px; }\n\n.ui-icon-arrowthickstop-1-n { background-position: -192px -48px; }\n\n.ui-icon-arrowthickstop-1-e { background-position: -208px -48px; }\n\n.ui-icon-arrowthickstop-1-s { background-position: -224px -48px; }\n\n.ui-icon-arrowthickstop-1-w { background-position: -240px -48px; }\n\n.ui-icon-arrowreturnthick-1-w { background-position: 0 -64px; }\n\n.ui-icon-arrowreturnthick-1-n { background-position: -16px -64px; }\n\n.ui-icon-arrowreturnthick-1-e { background-position: -32px -64px; }\n\n.ui-icon-arrowreturnthick-1-s { background-position: -48px -64px; }\n\n.ui-icon-arrowreturn-1-w { background-position: -64px -64px; }\n\n.ui-icon-arrowreturn-1-n { background-position: -80px -64px; }\n\n.ui-icon-arrowreturn-1-e { background-position: -96px -64px; }\n\n.ui-icon-arrowreturn-1-s { background-position: -112px -64px; }\n\n.ui-icon-arrowrefresh-1-w { background-position: -128px -64px; }\n\n.ui-icon-arrowrefresh-1-n { background-position: -144px -64px; }\n\n.ui-icon-arrowrefresh-1-e { background-position: -160px -64px; }\n\n.ui-icon-arrowrefresh-1-s { background-position: -176px -64px; }\n\n.ui-icon-arrow-4 { background-position: 0 -80px; }\n\n.ui-icon-arrow-4-diag { background-position: -16px -80px; }\n\n.ui-icon-extlink { background-position: -32px -80px; }\n\n.ui-icon-newwin { background-position: -48px -80px; }\n\n.ui-icon-refresh { background-position: -64px -80px; }\n\n.ui-icon-shuffle { background-position: -80px -80px; }\n\n.ui-icon-transfer-e-w { background-position: -96px -80px; }\n\n.ui-icon-transferthick-e-w { background-position: -112px -80px; }\n\n.ui-icon-folder-collapsed { background-position: 0 -96px; }\n\n.ui-icon-folder-open { background-position: -16px -96px; }\n\n.ui-icon-document { background-position: -32px -96px; }\n\n.ui-icon-document-b { background-position: -48px -96px; }\n\n.ui-icon-note { background-position: -64px -96px; }\n\n.ui-icon-mail-closed { background-position: -80px -96px; }\n\n.ui-icon-mail-open { background-position: -96px -96px; }\n\n.ui-icon-suitcase { background-position: -112px -96px; }\n\n.ui-icon-comment { background-position: -128px -96px; }\n\n.ui-icon-person { background-position: -144px -96px; }\n\n.ui-icon-print { background-position: -160px -96px; }\n\n.ui-icon-trash { background-position: -176px -96px; }\n\n.ui-icon-locked { background-position: -192px -96px; }\n\n.ui-icon-unlocked { background-position: -208px -96px; }\n\n.ui-icon-bookmark { background-position: -224px -96px; }\n\n.ui-icon-tag { background-position: -240px -96px; }\n\n.ui-icon-home { background-position: 0 -112px; }\n\n.ui-icon-flag { background-position: -16px -112px; }\n\n.ui-icon-calendar { background-position: -32px -112px; }\n\n.ui-icon-cart { background-position: -48px -112px; }\n\n.ui-icon-pencil { background-position: -64px -112px; }\n\n.ui-icon-clock { background-position: -80px -112px; }\n\n.ui-icon-disk { background-position: -96px -112px; }\n\n.ui-icon-calculator { background-position: -112px -112px; }\n\n.ui-icon-zoomin { background-position: -128px -112px; }\n\n.ui-icon-zoomout { background-position: -144px -112px; }\n\n.ui-icon-search { background-position: -160px -112px; }\n\n.ui-icon-wrench { background-position: -176px -112px; }\n\n.ui-icon-gear { background-position: -192px -112px; }\n\n.ui-icon-heart { background-position: -208px -112px; }\n\n.ui-icon-star { background-position: -224px -112px; }\n\n.ui-icon-link { background-position: -240px -112px; }\n\n.ui-icon-cancel { background-position: 0 -128px; }\n\n.ui-icon-plus { background-position: -16px -128px; }\n\n.ui-icon-plusthick { background-position: -32px -128px; }\n\n.ui-icon-minus { background-position: -48px -128px; }\n\n.ui-icon-minusthick { background-position: -64px -128px; }\n\n.ui-icon-close { background-position: -80px -128px; }\n\n.ui-icon-closethick { background-position: -96px -128px; }\n\n.ui-icon-key { background-position: -112px -128px; }\n\n.ui-icon-lightbulb { background-position: -128px -128px; }\n\n.ui-icon-scissors { background-position: -144px -128px; }\n\n.ui-icon-clipboard { background-position: -160px -128px; }\n\n.ui-icon-copy { background-position: -176px -128px; }\n\n.ui-icon-contact { background-position: -192px -128px; }\n\n.ui-icon-image { background-position: -208px -128px; }\n\n.ui-icon-video { background-position: -224px -128px; }\n\n.ui-icon-script { background-position: -240px -128px; }\n\n.ui-icon-alert { background-position: 0 -144px; }\n\n.ui-icon-info { background-position: -16px -144px; }\n\n.ui-icon-notice { background-position: -32px -144px; }\n\n.ui-icon-help { background-position: -48px -144px; }\n\n.ui-icon-check { background-position: -64px -144px; }\n\n.ui-icon-bullet { background-position: -80px -144px; }\n\n.ui-icon-radio-on { background-position: -96px -144px; }\n\n.ui-icon-radio-off { background-position: -112px -144px; }\n\n.ui-icon-pin-w { background-position: -128px -144px; }\n\n.ui-icon-pin-s { background-position: -144px -144px; }\n\n.ui-icon-play { background-position: 0 -160px; }\n\n.ui-icon-pause { background-position: -16px -160px; }\n\n.ui-icon-seek-next { background-position: -32px -160px; }\n\n.ui-icon-seek-prev { background-position: -48px -160px; }\n\n.ui-icon-seek-end { background-position: -64px -160px; }\n\n.ui-icon-seek-start { background-position: -80px -160px; }\n\n/* ui-icon-seek-first is deprecated, use ui-icon-seek-start instead */\n\n.ui-icon-seek-first { background-position: -80px -160px; }\n\n.ui-icon-stop { background-position: -96px -160px; }\n\n.ui-icon-eject { background-position: -112px -160px; }\n\n.ui-icon-volume-off { background-position: -128px -160px; }\n\n.ui-icon-volume-on { background-position: -144px -160px; }\n\n.ui-icon-power { background-position: 0 -176px; }\n\n.ui-icon-signal-diag { background-position: -16px -176px; }\n\n.ui-icon-signal { background-position: -32px -176px; }\n\n.ui-icon-battery-0 { background-position: -48px -176px; }\n\n.ui-icon-battery-1 { background-position: -64px -176px; }\n\n.ui-icon-battery-2 { background-position: -80px -176px; }\n\n.ui-icon-battery-3 { background-position: -96px -176px; }\n\n.ui-icon-circle-plus { background-position: 0 -192px; }\n\n.ui-icon-circle-minus { background-position: -16px -192px; }\n\n.ui-icon-circle-close { background-position: -32px -192px; }\n\n.ui-icon-circle-triangle-e { background-position: -48px -192px; }\n\n.ui-icon-circle-triangle-s { background-position: -64px -192px; }\n\n.ui-icon-circle-triangle-w { background-position: -80px -192px; }\n\n.ui-icon-circle-triangle-n { background-position: -96px -192px; }\n\n.ui-icon-circle-arrow-e { background-position: -112px -192px; }\n\n.ui-icon-circle-arrow-s { background-position: -128px -192px; }\n\n.ui-icon-circle-arrow-w { background-position: -144px -192px; }\n\n.ui-icon-circle-arrow-n { background-position: -160px -192px; }\n\n.ui-icon-circle-zoomin { background-position: -176px -192px; }\n\n.ui-icon-circle-zoomout { background-position: -192px -192px; }\n\n.ui-icon-circle-check { background-position: -208px -192px; }\n\n.ui-icon-circlesmall-plus { background-position: 0 -208px; }\n\n.ui-icon-circlesmall-minus { background-position: -16px -208px; }\n\n.ui-icon-circlesmall-close { background-position: -32px -208px; }\n\n.ui-icon-squaresmall-plus { background-position: -48px -208px; }\n\n.ui-icon-squaresmall-minus { background-position: -64px -208px; }\n\n.ui-icon-squaresmall-close { background-position: -80px -208px; }\n\n.ui-icon-grip-dotted-vertical { background-position: 0 -224px; }\n\n.ui-icon-grip-dotted-horizontal { background-position: -16px -224px; }\n\n.ui-icon-grip-solid-vertical { background-position: -32px -224px; }\n\n.ui-icon-grip-solid-horizontal { background-position: -48px -224px; }\n\n.ui-icon-gripsmall-diagonal-se { background-position: -64px -224px; }\n\n.ui-icon-grip-diagonal-se { background-position: -80px -224px; }\n\n/* Misc visuals\n----------------------------------*/\n\n/* Corner radius */\n\n.ui-corner-all,\n.ui-corner-top,\n.ui-corner-left,\n.ui-corner-tl {\n\tborder-top-left-radius: 3px;\n}\n\n.ui-corner-all,\n.ui-corner-top,\n.ui-corner-right,\n.ui-corner-tr {\n\tborder-top-right-radius: 3px;\n}\n\n.ui-corner-all,\n.ui-corner-bottom,\n.ui-corner-left,\n.ui-corner-bl {\n\tborder-bottom-left-radius: 3px;\n}\n\n.ui-corner-all,\n.ui-corner-bottom,\n.ui-corner-right,\n.ui-corner-br {\n\tborder-bottom-right-radius: 3px;\n}\n\n/* Overlays */\n\n.ui-widget-overlay {\n\tbackground: #aaaaaa;\n\topacity: .3;\n\tfilter: Alpha(Opacity=30); /* support: IE8 */\n}\n\n.ui-widget-shadow {\n\tbox-shadow: 0px 0px 5px #666666;\n}\n"},879:K=>{"use strict";K.exports='/*!\n * jQuery UI CSS Framework 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/theming/\n */\n.ui-draggable-handle {\n\ttouch-action: none;\n}\n/* Layout helpers\n----------------------------------*/\n.ui-helper-hidden {\n\tdisplay: none;\n}\n.ui-helper-hidden-accessible {\n\tborder: 0;\n\tclip: rect(0 0 0 0);\n\theight: 1px;\n\tmargin: -1px;\n\toverflow: hidden;\n\tpadding: 0;\n\tposition: absolute;\n\twidth: 1px;\n}\n.ui-helper-reset {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\toutline: 0;\n\tline-height: 1.3;\n\ttext-decoration: none;\n\tfont-size: 100%;\n\tlist-style: none;\n}\n.ui-helper-clearfix:before,\n.ui-helper-clearfix:after {\n\tcontent: "";\n\tdisplay: table;\n\tborder-collapse: collapse;\n}\n.ui-helper-clearfix:after {\n\tclear: both;\n}\n.ui-helper-zfix {\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n\tposition: absolute;\n\topacity: 0;\n\tfilter:Alpha(Opacity=0); /* support: IE8 */\n}\n.ui-front {\n\tz-index: 100;\n}\n/* Interaction Cues\n----------------------------------*/\n.ui-state-disabled {\n\tcursor: default !important;\n\tpointer-events: none;\n}\n/* Icons\n----------------------------------*/\n.ui-icon {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tmargin-top: -.25em;\n\tposition: relative;\n\ttext-indent: -99999px;\n\toverflow: hidden;\n\tbackground-repeat: no-repeat;\n}\n.ui-widget-icon-block {\n\tleft: 50%;\n\tmargin-left: -8px;\n\tdisplay: block;\n}\n/* Misc visuals\n----------------------------------*/\n/* Overlays */\n.ui-widget-overlay {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n.ui-resizable {\n\tposition: relative;\n}\n.ui-resizable-handle {\n\tposition: absolute;\n\tfont-size: 0.1px;\n\tdisplay: block;\n\ttouch-action: none;\n}\n.ui-resizable-disabled .ui-resizable-handle,\n.ui-resizable-autohide .ui-resizable-handle {\n\tdisplay: none;\n}\n.ui-resizable-n {\n\tcursor: n-resize;\n\theight: 7px;\n\twidth: 100%;\n\ttop: -5px;\n\tleft: 0;\n}\n.ui-resizable-s {\n\tcursor: s-resize;\n\theight: 7px;\n\twidth: 100%;\n\tbottom: -5px;\n\tleft: 0;\n}\n.ui-resizable-e {\n\tcursor: e-resize;\n\twidth: 7px;\n\tright: -5px;\n\ttop: 0;\n\theight: 100%;\n}\n.ui-resizable-w {\n\tcursor: w-resize;\n\twidth: 7px;\n\tleft: -5px;\n\ttop: 0;\n\theight: 100%;\n}\n.ui-resizable-se {\n\tcursor: se-resize;\n\twidth: 12px;\n\theight: 12px;\n\tright: 1px;\n\tbottom: 1px;\n}\n.ui-resizable-sw {\n\tcursor: sw-resize;\n\twidth: 9px;\n\theight: 9px;\n\tleft: -5px;\n\tbottom: -5px;\n}\n.ui-resizable-nw {\n\tcursor: nw-resize;\n\twidth: 9px;\n\theight: 9px;\n\tleft: -5px;\n\ttop: -5px;\n}\n.ui-resizable-ne {\n\tcursor: ne-resize;\n\twidth: 9px;\n\theight: 9px;\n\tright: -5px;\n\ttop: -5px;\n}\n.ui-selectable {\n\ttouch-action: none;\n}\n.ui-selectable-helper {\n\tposition: absolute;\n\tz-index: 100;\n\tborder: 1px dotted black;\n}\n.ui-sortable-handle {\n\ttouch-action: none;\n}\n.ui-accordion .ui-accordion-header {\n\tdisplay: block;\n\tcursor: pointer;\n\tposition: relative;\n\tmargin: 2px 0 0 0;\n\tpadding: .5em .5em .5em .7em;\n\tfont-size: 100%;\n}\n.ui-accordion .ui-accordion-content {\n\tpadding: 1em 2.2em;\n\tborder-top: 0;\n\toverflow: auto;\n}\n.ui-autocomplete {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tcursor: default;\n}\n.ui-menu {\n\tlist-style: none;\n\tpadding: 0;\n\tmargin: 0;\n\tdisplay: block;\n\toutline: 0;\n}\n.ui-menu .ui-menu {\n\tposition: absolute;\n}\n.ui-menu .ui-menu-item {\n\tmargin: 0;\n\tcursor: pointer;\n\t/* support: IE10, see #8844 */\n\tlist-style-image: url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");\n}\n.ui-menu .ui-menu-item-wrapper {\n\tposition: relative;\n\tpadding: 3px 1em 3px .4em;\n}\n.ui-menu .ui-menu-divider {\n\tmargin: 5px 0;\n\theight: 0;\n\tfont-size: 0;\n\tline-height: 0;\n\tborder-width: 1px 0 0 0;\n}\n.ui-menu .ui-state-focus,\n.ui-menu .ui-state-active {\n\tmargin: -1px;\n}\n/* icon support */\n.ui-menu-icons {\n\tposition: relative;\n}\n.ui-menu-icons .ui-menu-item-wrapper {\n\tpadding-left: 2em;\n}\n/* left-aligned */\n.ui-menu .ui-icon {\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: .2em;\n\tmargin: auto 0;\n}\n/* right-aligned */\n.ui-menu .ui-menu-icon {\n\tleft: auto;\n\tright: 0;\n}\n.ui-button {\n\tpadding: .4em 1em;\n\tdisplay: inline-block;\n\tposition: relative;\n\tline-height: normal;\n\tmargin-right: .1em;\n\tcursor: pointer;\n\tvertical-align: middle;\n\ttext-align: center;\n\t-webkit-user-select: none;\n\tuser-select: none;\n\n\t/* Support: IE <= 11 */\n\toverflow: visible;\n}\n.ui-button,\n.ui-button:link,\n.ui-button:visited,\n.ui-button:hover,\n.ui-button:active {\n\ttext-decoration: none;\n}\n/* to make room for the icon, a width needs to be set here */\n.ui-button-icon-only {\n\twidth: 2em;\n\tbox-sizing: border-box;\n\ttext-indent: -9999px;\n\twhite-space: nowrap;\n}\n/* no icon support for input elements */\ninput.ui-button.ui-button-icon-only {\n\ttext-indent: 0;\n}\n/* button icon element(s) */\n.ui-button-icon-only .ui-icon {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\tmargin-top: -8px;\n\tmargin-left: -8px;\n}\n.ui-button.ui-icon-notext .ui-icon {\n\tpadding: 0;\n\twidth: 2.1em;\n\theight: 2.1em;\n\ttext-indent: -9999px;\n\twhite-space: nowrap;\n\n}\ninput.ui-button.ui-icon-notext .ui-icon {\n\twidth: auto;\n\theight: auto;\n\ttext-indent: 0;\n\twhite-space: normal;\n\tpadding: .4em 1em;\n}\n/* workarounds */\n/* Support: Firefox 5 - 40 */\ninput.ui-button::-moz-focus-inner,\nbutton.ui-button::-moz-focus-inner {\n\tborder: 0;\n\tpadding: 0;\n}\n.ui-controlgroup {\n\tvertical-align: middle;\n\tdisplay: inline-block;\n}\n.ui-controlgroup > .ui-controlgroup-item {\n\tfloat: left;\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n.ui-controlgroup > .ui-controlgroup-item:focus,\n.ui-controlgroup > .ui-controlgroup-item.ui-visual-focus {\n\tz-index: 9999;\n}\n.ui-controlgroup-vertical > .ui-controlgroup-item {\n\tdisplay: block;\n\tfloat: none;\n\twidth: 100%;\n\tmargin-top: 0;\n\tmargin-bottom: 0;\n\ttext-align: left;\n}\n.ui-controlgroup-vertical .ui-controlgroup-item {\n\tbox-sizing: border-box;\n}\n.ui-controlgroup .ui-controlgroup-label {\n\tpadding: .4em 1em;\n}\n.ui-controlgroup .ui-controlgroup-label span {\n\tfont-size: 80%;\n}\n.ui-controlgroup-horizontal .ui-controlgroup-label + .ui-controlgroup-item {\n\tborder-left: none;\n}\n.ui-controlgroup-vertical .ui-controlgroup-label + .ui-controlgroup-item {\n\tborder-top: none;\n}\n.ui-controlgroup-horizontal .ui-controlgroup-label.ui-widget-content {\n\tborder-right: none;\n}\n.ui-controlgroup-vertical .ui-controlgroup-label.ui-widget-content {\n\tborder-bottom: none;\n}\n/* Spinner specific style fixes */\n.ui-controlgroup-vertical .ui-spinner-input {\n\n\t/* Support: IE8 only, Android < 4.4 only */\n\twidth: 75%;\n\twidth: calc( 100% - 2.4em );\n}\n.ui-controlgroup-vertical .ui-spinner .ui-spinner-up {\n\tborder-top-style: solid;\n}\n.ui-checkboxradio-label .ui-icon-background {\n\tbox-shadow: inset 1px 1px 1px #ccc;\n\tborder-radius: .12em;\n\tborder: none;\n}\n.ui-checkboxradio-radio-label .ui-icon-background {\n\twidth: 16px;\n\theight: 16px;\n\tborder-radius: 1em;\n\toverflow: visible;\n\tborder: none;\n}\n.ui-checkboxradio-radio-label.ui-checkboxradio-checked .ui-icon,\n.ui-checkboxradio-radio-label.ui-checkboxradio-checked:hover .ui-icon {\n\tbackground-image: none;\n\twidth: 8px;\n\theight: 8px;\n\tborder-width: 4px;\n\tborder-style: solid;\n}\n.ui-checkboxradio-disabled {\n\tpointer-events: none;\n}\n.ui-datepicker {\n\twidth: 17em;\n\tpadding: .2em .2em 0;\n\tdisplay: none;\n}\n.ui-datepicker .ui-datepicker-header {\n\tposition: relative;\n\tpadding: .2em 0;\n}\n.ui-datepicker .ui-datepicker-prev,\n.ui-datepicker .ui-datepicker-next {\n\tposition: absolute;\n\ttop: 2px;\n\twidth: 1.8em;\n\theight: 1.8em;\n}\n.ui-datepicker .ui-datepicker-prev-hover,\n.ui-datepicker .ui-datepicker-next-hover {\n\ttop: 1px;\n}\n.ui-datepicker .ui-datepicker-prev {\n\tleft: 2px;\n}\n.ui-datepicker .ui-datepicker-next {\n\tright: 2px;\n}\n.ui-datepicker .ui-datepicker-prev-hover {\n\tleft: 1px;\n}\n.ui-datepicker .ui-datepicker-next-hover {\n\tright: 1px;\n}\n.ui-datepicker .ui-datepicker-prev span,\n.ui-datepicker .ui-datepicker-next span {\n\tdisplay: block;\n\tposition: absolute;\n\tleft: 50%;\n\tmargin-left: -8px;\n\ttop: 50%;\n\tmargin-top: -8px;\n}\n.ui-datepicker .ui-datepicker-title {\n\tmargin: 0 2.3em;\n\tline-height: 1.8em;\n\ttext-align: center;\n}\n.ui-datepicker .ui-datepicker-title select {\n\tfont-size: 1em;\n\tmargin: 1px 0;\n}\n.ui-datepicker select.ui-datepicker-month,\n.ui-datepicker select.ui-datepicker-year {\n\twidth: 45%;\n}\n.ui-datepicker table {\n\twidth: 100%;\n\tfont-size: .9em;\n\tborder-collapse: collapse;\n\tmargin: 0 0 .4em;\n}\n.ui-datepicker th {\n\tpadding: .7em .3em;\n\ttext-align: center;\n\tfont-weight: bold;\n\tborder: 0;\n}\n.ui-datepicker td {\n\tborder: 0;\n\tpadding: 1px;\n}\n.ui-datepicker td span,\n.ui-datepicker td a {\n\tdisplay: block;\n\tpadding: .2em;\n\ttext-align: right;\n\ttext-decoration: none;\n}\n.ui-datepicker .ui-datepicker-buttonpane {\n\tbackground-image: none;\n\tmargin: .7em 0 0 0;\n\tpadding: 0 .2em;\n\tborder-left: 0;\n\tborder-right: 0;\n\tborder-bottom: 0;\n}\n.ui-datepicker .ui-datepicker-buttonpane button {\n\tfloat: right;\n\tmargin: .5em .2em .4em;\n\tcursor: pointer;\n\tpadding: .2em .6em .3em .6em;\n\twidth: auto;\n\toverflow: visible;\n}\n.ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current {\n\tfloat: left;\n}\n/* with multiple calendars */\n.ui-datepicker.ui-datepicker-multi {\n\twidth: auto;\n}\n.ui-datepicker-multi .ui-datepicker-group {\n\tfloat: left;\n}\n.ui-datepicker-multi .ui-datepicker-group table {\n\twidth: 95%;\n\tmargin: 0 auto .4em;\n}\n.ui-datepicker-multi-2 .ui-datepicker-group {\n\twidth: 50%;\n}\n.ui-datepicker-multi-3 .ui-datepicker-group {\n\twidth: 33.3%;\n}\n.ui-datepicker-multi-4 .ui-datepicker-group {\n\twidth: 25%;\n}\n.ui-datepicker-multi .ui-datepicker-group-last .ui-datepicker-header,\n.ui-datepicker-multi .ui-datepicker-group-middle .ui-datepicker-header {\n\tborder-left-width: 0;\n}\n.ui-datepicker-multi .ui-datepicker-buttonpane {\n\tclear: left;\n}\n.ui-datepicker-row-break {\n\tclear: both;\n\twidth: 100%;\n\tfont-size: 0;\n}\n/* RTL support */\n.ui-datepicker-rtl {\n\tdirection: rtl;\n}\n.ui-datepicker-rtl .ui-datepicker-prev {\n\tright: 2px;\n\tleft: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-next {\n\tleft: 2px;\n\tright: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-prev:hover {\n\tright: 1px;\n\tleft: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-next:hover {\n\tleft: 1px;\n\tright: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane {\n\tclear: right;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane button {\n\tfloat: left;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane button.ui-datepicker-current,\n.ui-datepicker-rtl .ui-datepicker-group {\n\tfloat: right;\n}\n.ui-datepicker-rtl .ui-datepicker-group-last .ui-datepicker-header,\n.ui-datepicker-rtl .ui-datepicker-group-middle .ui-datepicker-header {\n\tborder-right-width: 0;\n\tborder-left-width: 1px;\n}\n/* Icons */\n.ui-datepicker .ui-icon {\n\tdisplay: block;\n\ttext-indent: -99999px;\n\toverflow: hidden;\n\tbackground-repeat: no-repeat;\n\tleft: .5em;\n\ttop: .3em;\n}\n.ui-dialog {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tpadding: .2em;\n\toutline: 0;\n}\n.ui-dialog .ui-dialog-titlebar {\n\tpadding: .4em 1em;\n\tposition: relative;\n}\n.ui-dialog .ui-dialog-title {\n\tfloat: left;\n\tmargin: .1em 0;\n\twhite-space: nowrap;\n\twidth: 90%;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n.ui-dialog .ui-dialog-titlebar-close {\n\tposition: absolute;\n\tright: .3em;\n\ttop: 50%;\n\twidth: 20px;\n\tmargin: -10px 0 0 0;\n\tpadding: 1px;\n\theight: 20px;\n}\n.ui-dialog .ui-dialog-content {\n\tposition: relative;\n\tborder: 0;\n\tpadding: .5em 1em;\n\tbackground: none;\n\toverflow: auto;\n}\n.ui-dialog .ui-dialog-buttonpane {\n\ttext-align: left;\n\tborder-width: 1px 0 0 0;\n\tbackground-image: none;\n\tmargin-top: .5em;\n\tpadding: .3em 1em .5em .4em;\n}\n.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset {\n\tfloat: right;\n}\n.ui-dialog .ui-dialog-buttonpane button {\n\tmargin: .5em .4em .5em 0;\n\tcursor: pointer;\n}\n.ui-dialog .ui-resizable-n {\n\theight: 2px;\n\ttop: 0;\n}\n.ui-dialog .ui-resizable-e {\n\twidth: 2px;\n\tright: 0;\n}\n.ui-dialog .ui-resizable-s {\n\theight: 2px;\n\tbottom: 0;\n}\n.ui-dialog .ui-resizable-w {\n\twidth: 2px;\n\tleft: 0;\n}\n.ui-dialog .ui-resizable-se,\n.ui-dialog .ui-resizable-sw,\n.ui-dialog .ui-resizable-ne,\n.ui-dialog .ui-resizable-nw {\n\twidth: 7px;\n\theight: 7px;\n}\n.ui-dialog .ui-resizable-se {\n\tright: 0;\n\tbottom: 0;\n}\n.ui-dialog .ui-resizable-sw {\n\tleft: 0;\n\tbottom: 0;\n}\n.ui-dialog .ui-resizable-ne {\n\tright: 0;\n\ttop: 0;\n}\n.ui-dialog .ui-resizable-nw {\n\tleft: 0;\n\ttop: 0;\n}\n.ui-draggable .ui-dialog-titlebar {\n\tcursor: move;\n}\n.ui-progressbar {\n\theight: 2em;\n\ttext-align: left;\n\toverflow: hidden;\n}\n.ui-progressbar .ui-progressbar-value {\n\tmargin: -1px;\n\theight: 100%;\n}\n.ui-progressbar .ui-progressbar-overlay {\n\tbackground: url("data:image/gif;base64,R0lGODlhKAAoAIABAAAAAP///yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJAQABACwAAAAAKAAoAAACkYwNqXrdC52DS06a7MFZI+4FHBCKoDeWKXqymPqGqxvJrXZbMx7Ttc+w9XgU2FB3lOyQRWET2IFGiU9m1frDVpxZZc6bfHwv4c1YXP6k1Vdy292Fb6UkuvFtXpvWSzA+HycXJHUXiGYIiMg2R6W459gnWGfHNdjIqDWVqemH2ekpObkpOlppWUqZiqr6edqqWQAAIfkECQEAAQAsAAAAACgAKAAAApSMgZnGfaqcg1E2uuzDmmHUBR8Qil95hiPKqWn3aqtLsS18y7G1SzNeowWBENtQd+T1JktP05nzPTdJZlR6vUxNWWjV+vUWhWNkWFwxl9VpZRedYcflIOLafaa28XdsH/ynlcc1uPVDZxQIR0K25+cICCmoqCe5mGhZOfeYSUh5yJcJyrkZWWpaR8doJ2o4NYq62lAAACH5BAkBAAEALAAAAAAoACgAAAKVDI4Yy22ZnINRNqosw0Bv7i1gyHUkFj7oSaWlu3ovC8GxNso5fluz3qLVhBVeT/Lz7ZTHyxL5dDalQWPVOsQWtRnuwXaFTj9jVVh8pma9JjZ4zYSj5ZOyma7uuolffh+IR5aW97cHuBUXKGKXlKjn+DiHWMcYJah4N0lYCMlJOXipGRr5qdgoSTrqWSq6WFl2ypoaUAAAIfkECQEAAQAsAAAAACgAKAAAApaEb6HLgd/iO7FNWtcFWe+ufODGjRfoiJ2akShbueb0wtI50zm02pbvwfWEMWBQ1zKGlLIhskiEPm9R6vRXxV4ZzWT2yHOGpWMyorblKlNp8HmHEb/lCXjcW7bmtXP8Xt229OVWR1fod2eWqNfHuMjXCPkIGNileOiImVmCOEmoSfn3yXlJWmoHGhqp6ilYuWYpmTqKUgAAIfkECQEAAQAsAAAAACgAKAAAApiEH6kb58biQ3FNWtMFWW3eNVcojuFGfqnZqSebuS06w5V80/X02pKe8zFwP6EFWOT1lDFk8rGERh1TTNOocQ61Hm4Xm2VexUHpzjymViHrFbiELsefVrn6XKfnt2Q9G/+Xdie499XHd2g4h7ioOGhXGJboGAnXSBnoBwKYyfioubZJ2Hn0RuRZaflZOil56Zp6iioKSXpUAAAh+QQJAQABACwAAAAAKAAoAAACkoQRqRvnxuI7kU1a1UU5bd5tnSeOZXhmn5lWK3qNTWvRdQxP8qvaC+/yaYQzXO7BMvaUEmJRd3TsiMAgswmNYrSgZdYrTX6tSHGZO73ezuAw2uxuQ+BbeZfMxsexY35+/Qe4J1inV0g4x3WHuMhIl2jXOKT2Q+VU5fgoSUI52VfZyfkJGkha6jmY+aaYdirq+lQAACH5BAkBAAEALAAAAAAoACgAAAKWBIKpYe0L3YNKToqswUlvznigd4wiR4KhZrKt9Upqip61i9E3vMvxRdHlbEFiEXfk9YARYxOZZD6VQ2pUunBmtRXo1Lf8hMVVcNl8JafV38aM2/Fu5V16Bn63r6xt97j09+MXSFi4BniGFae3hzbH9+hYBzkpuUh5aZmHuanZOZgIuvbGiNeomCnaxxap2upaCZsq+1kAACH5BAkBAAEALAAAAAAoACgAAAKXjI8By5zf4kOxTVrXNVlv1X0d8IGZGKLnNpYtm8Lr9cqVeuOSvfOW79D9aDHizNhDJidFZhNydEahOaDH6nomtJjp1tutKoNWkvA6JqfRVLHU/QUfau9l2x7G54d1fl995xcIGAdXqMfBNadoYrhH+Mg2KBlpVpbluCiXmMnZ2Sh4GBqJ+ckIOqqJ6LmKSllZmsoq6wpQAAAh+QQJAQABACwAAAAAKAAoAAAClYx/oLvoxuJDkU1a1YUZbJ59nSd2ZXhWqbRa2/gF8Gu2DY3iqs7yrq+xBYEkYvFSM8aSSObE+ZgRl1BHFZNr7pRCavZ5BW2142hY3AN/zWtsmf12p9XxxFl2lpLn1rseztfXZjdIWIf2s5dItwjYKBgo9yg5pHgzJXTEeGlZuenpyPmpGQoKOWkYmSpaSnqKileI2FAAACH5BAkBAAEALAAAAAAoACgAAAKVjB+gu+jG4kORTVrVhRlsnn2dJ3ZleFaptFrb+CXmO9OozeL5VfP99HvAWhpiUdcwkpBH3825AwYdU8xTqlLGhtCosArKMpvfa1mMRae9VvWZfeB2XfPkeLmm18lUcBj+p5dnN8jXZ3YIGEhYuOUn45aoCDkp16hl5IjYJvjWKcnoGQpqyPlpOhr3aElaqrq56Bq7VAAAOw==");\n\theight: 100%;\n\tfilter: alpha(opacity=25); /* support: IE8 */\n\topacity: 0.25;\n}\n.ui-progressbar-indeterminate .ui-progressbar-value {\n\tbackground-image: none;\n}\n.ui-selectmenu-menu {\n\tpadding: 0;\n\tmargin: 0;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tdisplay: none;\n}\n.ui-selectmenu-menu .ui-menu {\n\toverflow: auto;\n\toverflow-x: hidden;\n\tpadding-bottom: 1px;\n}\n.ui-selectmenu-menu .ui-menu .ui-selectmenu-optgroup {\n\tfont-size: 1em;\n\tfont-weight: bold;\n\tline-height: 1.5;\n\tpadding: 2px 0.4em;\n\tmargin: 0.5em 0 0 0;\n\theight: auto;\n\tborder: 0;\n}\n.ui-selectmenu-open {\n\tdisplay: block;\n}\n.ui-selectmenu-text {\n\tdisplay: block;\n\tmargin-right: 20px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n.ui-selectmenu-button.ui-button {\n\ttext-align: left;\n\twhite-space: nowrap;\n\twidth: 14em;\n}\n.ui-selectmenu-icon.ui-icon {\n\tfloat: right;\n\tmargin-top: 0;\n}\n.ui-slider {\n\tposition: relative;\n\ttext-align: left;\n}\n.ui-slider .ui-slider-handle {\n\tposition: absolute;\n\tz-index: 2;\n\twidth: 1.2em;\n\theight: 1.2em;\n\tcursor: default;\n\ttouch-action: none;\n}\n.ui-slider .ui-slider-range {\n\tposition: absolute;\n\tz-index: 1;\n\tfont-size: .7em;\n\tdisplay: block;\n\tborder: 0;\n\tbackground-position: 0 0;\n}\n/* support: IE8 - See #6727 */\n.ui-slider.ui-state-disabled .ui-slider-handle,\n.ui-slider.ui-state-disabled .ui-slider-range {\n\tfilter: inherit;\n}\n.ui-slider-horizontal {\n\theight: .8em;\n}\n.ui-slider-horizontal .ui-slider-handle {\n\ttop: -.3em;\n\tmargin-left: -.6em;\n}\n.ui-slider-horizontal .ui-slider-range {\n\ttop: 0;\n\theight: 100%;\n}\n.ui-slider-horizontal .ui-slider-range-min {\n\tleft: 0;\n}\n.ui-slider-horizontal .ui-slider-range-max {\n\tright: 0;\n}\n.ui-slider-vertical {\n\twidth: .8em;\n\theight: 100px;\n}\n.ui-slider-vertical .ui-slider-handle {\n\tleft: -.3em;\n\tmargin-left: 0;\n\tmargin-bottom: -.6em;\n}\n.ui-slider-vertical .ui-slider-range {\n\tleft: 0;\n\twidth: 100%;\n}\n.ui-slider-vertical .ui-slider-range-min {\n\tbottom: 0;\n}\n.ui-slider-vertical .ui-slider-range-max {\n\ttop: 0;\n}\n.ui-spinner {\n\tposition: relative;\n\tdisplay: inline-block;\n\toverflow: hidden;\n\tpadding: 0;\n\tvertical-align: middle;\n}\n.ui-spinner-input {\n\tborder: none;\n\tbackground: none;\n\tcolor: inherit;\n\tpadding: .222em 0;\n\tmargin: .2em 0;\n\tvertical-align: middle;\n\tmargin-left: .4em;\n\tmargin-right: 2em;\n}\n.ui-spinner-button {\n\twidth: 1.6em;\n\theight: 50%;\n\tfont-size: .5em;\n\tpadding: 0;\n\tmargin: 0;\n\ttext-align: center;\n\tposition: absolute;\n\tcursor: default;\n\tdisplay: block;\n\toverflow: hidden;\n\tright: 0;\n}\n/* more specificity required here to override default borders */\n.ui-spinner a.ui-spinner-button {\n\tborder-top-style: none;\n\tborder-bottom-style: none;\n\tborder-right-style: none;\n}\n.ui-spinner-up {\n\ttop: 0;\n}\n.ui-spinner-down {\n\tbottom: 0;\n}\n.ui-tabs {\n\tposition: relative;/* position: relative prevents IE scroll bug (element with position: relative inside container with overflow: auto appear as "fixed") */\n\tpadding: .2em;\n}\n.ui-tabs .ui-tabs-nav {\n\tmargin: 0;\n\tpadding: .2em .2em 0;\n}\n.ui-tabs .ui-tabs-nav li {\n\tlist-style: none;\n\tfloat: left;\n\tposition: relative;\n\ttop: 0;\n\tmargin: 1px .2em 0 0;\n\tborder-bottom-width: 0;\n\tpadding: 0;\n\twhite-space: nowrap;\n}\n.ui-tabs .ui-tabs-nav .ui-tabs-anchor {\n\tfloat: left;\n\tpadding: .5em 1em;\n\ttext-decoration: none;\n}\n.ui-tabs .ui-tabs-nav li.ui-tabs-active {\n\tmargin-bottom: -1px;\n\tpadding-bottom: 1px;\n}\n.ui-tabs .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor,\n.ui-tabs .ui-tabs-nav li.ui-state-disabled .ui-tabs-anchor,\n.ui-tabs .ui-tabs-nav li.ui-tabs-loading .ui-tabs-anchor {\n\tcursor: text;\n}\n.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor {\n\tcursor: pointer;\n}\n.ui-tabs .ui-tabs-panel {\n\tdisplay: block;\n\tborder-width: 0;\n\tpadding: 1em 1.4em;\n\tbackground: none;\n}\n.ui-tooltip {\n\tpadding: 8px;\n\tposition: absolute;\n\tz-index: 9999;\n\tmax-width: 300px;\n}\nbody .ui-tooltip {\n\tborder-width: 2px;\n}\n'},378:K=>{"use strict";K.exports="/*!\n * jQuery UI CSS Framework 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/theming/\n *\n * To view and modify this theme, visit http://jqueryui.com/themeroller/?scope=&folderName=base&cornerRadiusShadow=8px&offsetLeftShadow=0px&offsetTopShadow=0px&thicknessShadow=5px&opacityShadow=30&bgImgOpacityShadow=0&bgTextureShadow=flat&bgColorShadow=666666&opacityOverlay=30&bgImgOpacityOverlay=0&bgTextureOverlay=flat&bgColorOverlay=aaaaaa&iconColorError=cc0000&fcError=5f3f3f&borderColorError=f1a899&bgTextureError=flat&bgColorError=fddfdf&iconColorHighlight=777620&fcHighlight=777620&borderColorHighlight=dad55e&bgTextureHighlight=flat&bgColorHighlight=fffa90&iconColorActive=ffffff&fcActive=ffffff&borderColorActive=003eff&bgTextureActive=flat&bgColorActive=007fff&iconColorHover=555555&fcHover=2b2b2b&borderColorHover=cccccc&bgTextureHover=flat&bgColorHover=ededed&iconColorDefault=777777&fcDefault=454545&borderColorDefault=c5c5c5&bgTextureDefault=flat&bgColorDefault=f6f6f6&iconColorContent=444444&fcContent=333333&borderColorContent=dddddd&bgTextureContent=flat&bgColorContent=ffffff&iconColorHeader=444444&fcHeader=333333&borderColorHeader=dddddd&bgTextureHeader=flat&bgColorHeader=e9e9e9&cornerRadius=3px&fwDefault=normal&fsDefault=1em&ffDefault=Arial%2CHelvetica%2Csans-serif\n */\n\n\n/* Component containers\n----------------------------------*/\n\n\n.ui-widget {\n\tfont-family: Arial,Helvetica,sans-serif;\n\tfont-size: 1em;\n}\n\n\n.ui-widget .ui-widget {\n\tfont-size: 1em;\n}\n\n\n.ui-widget input,\n.ui-widget select,\n.ui-widget textarea,\n.ui-widget button {\n\tfont-family: Arial,Helvetica,sans-serif;\n\tfont-size: 1em;\n}\n\n\n.ui-widget.ui-widget-content {\n\tborder: 1px solid #c5c5c5;\n}\n\n\n.ui-widget-content {\n\tborder: 1px solid #dddddd;\n\tbackground: #ffffff;\n\tcolor: #333333;\n}\n\n\n.ui-widget-content a {\n\tcolor: #333333;\n}\n\n\n.ui-widget-header {\n\tborder: 1px solid #dddddd;\n\tbackground: #e9e9e9;\n\tcolor: #333333;\n\tfont-weight: bold;\n}\n\n\n.ui-widget-header a {\n\tcolor: #333333;\n}\n\n\n/* Interaction states\n----------------------------------*/\n\n\n.ui-state-default,\n.ui-widget-content .ui-state-default,\n.ui-widget-header .ui-state-default,\n.ui-button,\n\n/* We use html here because we need a greater specificity to make sure disabled\nworks properly when clicked or hovered */\nhtml .ui-button.ui-state-disabled:hover,\nhtml .ui-button.ui-state-disabled:active {\n\tborder: 1px solid #c5c5c5;\n\tbackground: #f6f6f6;\n\tfont-weight: normal;\n\tcolor: #454545;\n}\n\n\n.ui-state-default a,\n.ui-state-default a:link,\n.ui-state-default a:visited,\na.ui-button,\na:link.ui-button,\na:visited.ui-button,\n.ui-button {\n\tcolor: #454545;\n\ttext-decoration: none;\n}\n\n\n.ui-state-hover,\n.ui-widget-content .ui-state-hover,\n.ui-widget-header .ui-state-hover,\n.ui-state-focus,\n.ui-widget-content .ui-state-focus,\n.ui-widget-header .ui-state-focus,\n.ui-button:hover,\n.ui-button:focus {\n\tborder: 1px solid #cccccc;\n\tbackground: #ededed;\n\tfont-weight: normal;\n\tcolor: #2b2b2b;\n}\n\n\n.ui-state-hover a,\n.ui-state-hover a:hover,\n.ui-state-hover a:link,\n.ui-state-hover a:visited,\n.ui-state-focus a,\n.ui-state-focus a:hover,\n.ui-state-focus a:link,\n.ui-state-focus a:visited,\na.ui-button:hover,\na.ui-button:focus {\n\tcolor: #2b2b2b;\n\ttext-decoration: none;\n}\n\n\n.ui-visual-focus {\n\tbox-shadow: 0 0 3px 1px rgb(94, 158, 214);\n}\n\n\n.ui-state-active,\n.ui-widget-content .ui-state-active,\n.ui-widget-header .ui-state-active,\na.ui-button:active,\n.ui-button:active,\n.ui-button.ui-state-active:hover {\n\tborder: 1px solid #003eff;\n\tbackground: #007fff;\n\tfont-weight: normal;\n\tcolor: #ffffff;\n}\n\n\n.ui-icon-background,\n.ui-state-active .ui-icon-background {\n\tborder: #003eff;\n\tbackground-color: #ffffff;\n}\n\n\n.ui-state-active a,\n.ui-state-active a:link,\n.ui-state-active a:visited {\n\tcolor: #ffffff;\n\ttext-decoration: none;\n}\n\n\n/* Interaction Cues\n----------------------------------*/\n\n\n.ui-state-highlight,\n.ui-widget-content .ui-state-highlight,\n.ui-widget-header .ui-state-highlight {\n\tborder: 1px solid #dad55e;\n\tbackground: #fffa90;\n\tcolor: #777620;\n}\n\n\n.ui-state-checked {\n\tborder: 1px solid #dad55e;\n\tbackground: #fffa90;\n}\n\n\n.ui-state-highlight a,\n.ui-widget-content .ui-state-highlight a,\n.ui-widget-header .ui-state-highlight a {\n\tcolor: #777620;\n}\n\n\n.ui-state-error,\n.ui-widget-content .ui-state-error,\n.ui-widget-header .ui-state-error {\n\tborder: 1px solid #f1a899;\n\tbackground: #fddfdf;\n\tcolor: #5f3f3f;\n}\n\n\n.ui-state-error a,\n.ui-widget-content .ui-state-error a,\n.ui-widget-header .ui-state-error a {\n\tcolor: #5f3f3f;\n}\n\n\n.ui-state-error-text,\n.ui-widget-content .ui-state-error-text,\n.ui-widget-header .ui-state-error-text {\n\tcolor: #5f3f3f;\n}\n\n\n.ui-priority-primary,\n.ui-widget-content .ui-priority-primary,\n.ui-widget-header .ui-priority-primary {\n\tfont-weight: bold;\n}\n\n\n.ui-priority-secondary,\n.ui-widget-content .ui-priority-secondary,\n.ui-widget-header .ui-priority-secondary {\n\topacity: .7;\n\tfilter:Alpha(Opacity=70); /* support: IE8 */\n\tfont-weight: normal;\n}\n\n\n.ui-state-disabled,\n.ui-widget-content .ui-state-disabled,\n.ui-widget-header .ui-state-disabled {\n\topacity: .35;\n\tfilter:Alpha(Opacity=35); /* support: IE8 */\n\tbackground-image: none;\n}\n\n\n.ui-state-disabled .ui-icon {\n\tfilter:Alpha(Opacity=35); /* support: IE8 - See #6059 */\n}\n\n\n/* Icons\n----------------------------------*/\n\n\n/* states and images */\n\n\n.ui-icon {\n\twidth: 16px;\n\theight: 16px;\n}\n\n\n.ui-icon,\n.ui-widget-content .ui-icon {\n\tbackground-image: url('ui-icons_444444_256x240.0e0a9e65144a9bf9.png');\n}\n\n\n.ui-widget-header .ui-icon {\n\tbackground-image: url('ui-icons_444444_256x240.0e0a9e65144a9bf9.png');\n}\n\n\n.ui-state-hover .ui-icon,\n.ui-state-focus .ui-icon,\n.ui-button:hover .ui-icon,\n.ui-button:focus .ui-icon {\n\tbackground-image: url('ui-icons_555555_256x240.8adbd261678281ce.png');\n}\n\n\n.ui-state-active .ui-icon,\n.ui-button:active .ui-icon {\n\tbackground-image: url('ui-icons_ffffff_256x240.7b3b65cee7d59ccd.png');\n}\n\n\n.ui-state-highlight .ui-icon,\n.ui-button .ui-state-highlight.ui-icon {\n\tbackground-image: url('ui-icons_777620_256x240.4298d92e10bb13dc.png');\n}\n\n\n.ui-state-error .ui-icon,\n.ui-state-error-text .ui-icon {\n\tbackground-image: url('ui-icons_cc0000_256x240.3cc6f93e0fbdd6f0.png');\n}\n\n\n.ui-button .ui-icon {\n\tbackground-image: url('ui-icons_777777_256x240.0e3e40c4a518e818.png');\n}\n\n\n/* positioning */\n\n\n.ui-icon-blank { background-position: 16px 16px; }\n\n\n.ui-icon-caret-1-n { background-position: 0 0; }\n\n\n.ui-icon-caret-1-ne { background-position: -16px 0; }\n\n\n.ui-icon-caret-1-e { background-position: -32px 0; }\n\n\n.ui-icon-caret-1-se { background-position: -48px 0; }\n\n\n.ui-icon-caret-1-s { background-position: -65px 0; }\n\n\n.ui-icon-caret-1-sw { background-position: -80px 0; }\n\n\n.ui-icon-caret-1-w { background-position: -96px 0; }\n\n\n.ui-icon-caret-1-nw { background-position: -112px 0; }\n\n\n.ui-icon-caret-2-n-s { background-position: -128px 0; }\n\n\n.ui-icon-caret-2-e-w { background-position: -144px 0; }\n\n\n.ui-icon-triangle-1-n { background-position: 0 -16px; }\n\n\n.ui-icon-triangle-1-ne { background-position: -16px -16px; }\n\n\n.ui-icon-triangle-1-e { background-position: -32px -16px; }\n\n\n.ui-icon-triangle-1-se { background-position: -48px -16px; }\n\n\n.ui-icon-triangle-1-s { background-position: -65px -16px; }\n\n\n.ui-icon-triangle-1-sw { background-position: -80px -16px; }\n\n\n.ui-icon-triangle-1-w { background-position: -96px -16px; }\n\n\n.ui-icon-triangle-1-nw { background-position: -112px -16px; }\n\n\n.ui-icon-triangle-2-n-s { background-position: -128px -16px; }\n\n\n.ui-icon-triangle-2-e-w { background-position: -144px -16px; }\n\n\n.ui-icon-arrow-1-n { background-position: 0 -32px; }\n\n\n.ui-icon-arrow-1-ne { background-position: -16px -32px; }\n\n\n.ui-icon-arrow-1-e { background-position: -32px -32px; }\n\n\n.ui-icon-arrow-1-se { background-position: -48px -32px; }\n\n\n.ui-icon-arrow-1-s { background-position: -65px -32px; }\n\n\n.ui-icon-arrow-1-sw { background-position: -80px -32px; }\n\n\n.ui-icon-arrow-1-w { background-position: -96px -32px; }\n\n\n.ui-icon-arrow-1-nw { background-position: -112px -32px; }\n\n\n.ui-icon-arrow-2-n-s { background-position: -128px -32px; }\n\n\n.ui-icon-arrow-2-ne-sw { background-position: -144px -32px; }\n\n\n.ui-icon-arrow-2-e-w { background-position: -160px -32px; }\n\n\n.ui-icon-arrow-2-se-nw { background-position: -176px -32px; }\n\n\n.ui-icon-arrowstop-1-n { background-position: -192px -32px; }\n\n\n.ui-icon-arrowstop-1-e { background-position: -208px -32px; }\n\n\n.ui-icon-arrowstop-1-s { background-position: -224px -32px; }\n\n\n.ui-icon-arrowstop-1-w { background-position: -240px -32px; }\n\n\n.ui-icon-arrowthick-1-n { background-position: 1px -48px; }\n\n\n.ui-icon-arrowthick-1-ne { background-position: -16px -48px; }\n\n\n.ui-icon-arrowthick-1-e { background-position: -32px -48px; }\n\n\n.ui-icon-arrowthick-1-se { background-position: -48px -48px; }\n\n\n.ui-icon-arrowthick-1-s { background-position: -64px -48px; }\n\n\n.ui-icon-arrowthick-1-sw { background-position: -80px -48px; }\n\n\n.ui-icon-arrowthick-1-w { background-position: -96px -48px; }\n\n\n.ui-icon-arrowthick-1-nw { background-position: -112px -48px; }\n\n\n.ui-icon-arrowthick-2-n-s { background-position: -128px -48px; }\n\n\n.ui-icon-arrowthick-2-ne-sw { background-position: -144px -48px; }\n\n\n.ui-icon-arrowthick-2-e-w { background-position: -160px -48px; }\n\n\n.ui-icon-arrowthick-2-se-nw { background-position: -176px -48px; }\n\n\n.ui-icon-arrowthickstop-1-n { background-position: -192px -48px; }\n\n\n.ui-icon-arrowthickstop-1-e { background-position: -208px -48px; }\n\n\n.ui-icon-arrowthickstop-1-s { background-position: -224px -48px; }\n\n\n.ui-icon-arrowthickstop-1-w { background-position: -240px -48px; }\n\n\n.ui-icon-arrowreturnthick-1-w { background-position: 0 -64px; }\n\n\n.ui-icon-arrowreturnthick-1-n { background-position: -16px -64px; }\n\n\n.ui-icon-arrowreturnthick-1-e { background-position: -32px -64px; }\n\n\n.ui-icon-arrowreturnthick-1-s { background-position: -48px -64px; }\n\n\n.ui-icon-arrowreturn-1-w { background-position: -64px -64px; }\n\n\n.ui-icon-arrowreturn-1-n { background-position: -80px -64px; }\n\n\n.ui-icon-arrowreturn-1-e { background-position: -96px -64px; }\n\n\n.ui-icon-arrowreturn-1-s { background-position: -112px -64px; }\n\n\n.ui-icon-arrowrefresh-1-w { background-position: -128px -64px; }\n\n\n.ui-icon-arrowrefresh-1-n { background-position: -144px -64px; }\n\n\n.ui-icon-arrowrefresh-1-e { background-position: -160px -64px; }\n\n\n.ui-icon-arrowrefresh-1-s { background-position: -176px -64px; }\n\n\n.ui-icon-arrow-4 { background-position: 0 -80px; }\n\n\n.ui-icon-arrow-4-diag { background-position: -16px -80px; }\n\n\n.ui-icon-extlink { background-position: -32px -80px; }\n\n\n.ui-icon-newwin { background-position: -48px -80px; }\n\n\n.ui-icon-refresh { background-position: -64px -80px; }\n\n\n.ui-icon-shuffle { background-position: -80px -80px; }\n\n\n.ui-icon-transfer-e-w { background-position: -96px -80px; }\n\n\n.ui-icon-transferthick-e-w { background-position: -112px -80px; }\n\n\n.ui-icon-folder-collapsed { background-position: 0 -96px; }\n\n\n.ui-icon-folder-open { background-position: -16px -96px; }\n\n\n.ui-icon-document { background-position: -32px -96px; }\n\n\n.ui-icon-document-b { background-position: -48px -96px; }\n\n\n.ui-icon-note { background-position: -64px -96px; }\n\n\n.ui-icon-mail-closed { background-position: -80px -96px; }\n\n\n.ui-icon-mail-open { background-position: -96px -96px; }\n\n\n.ui-icon-suitcase { background-position: -112px -96px; }\n\n\n.ui-icon-comment { background-position: -128px -96px; }\n\n\n.ui-icon-person { background-position: -144px -96px; }\n\n\n.ui-icon-print { background-position: -160px -96px; }\n\n\n.ui-icon-trash { background-position: -176px -96px; }\n\n\n.ui-icon-locked { background-position: -192px -96px; }\n\n\n.ui-icon-unlocked { background-position: -208px -96px; }\n\n\n.ui-icon-bookmark { background-position: -224px -96px; }\n\n\n.ui-icon-tag { background-position: -240px -96px; }\n\n\n.ui-icon-home { background-position: 0 -112px; }\n\n\n.ui-icon-flag { background-position: -16px -112px; }\n\n\n.ui-icon-calendar { background-position: -32px -112px; }\n\n\n.ui-icon-cart { background-position: -48px -112px; }\n\n\n.ui-icon-pencil { background-position: -64px -112px; }\n\n\n.ui-icon-clock { background-position: -80px -112px; }\n\n\n.ui-icon-disk { background-position: -96px -112px; }\n\n\n.ui-icon-calculator { background-position: -112px -112px; }\n\n\n.ui-icon-zoomin { background-position: -128px -112px; }\n\n\n.ui-icon-zoomout { background-position: -144px -112px; }\n\n\n.ui-icon-search { background-position: -160px -112px; }\n\n\n.ui-icon-wrench { background-position: -176px -112px; }\n\n\n.ui-icon-gear { background-position: -192px -112px; }\n\n\n.ui-icon-heart { background-position: -208px -112px; }\n\n\n.ui-icon-star { background-position: -224px -112px; }\n\n\n.ui-icon-link { background-position: -240px -112px; }\n\n\n.ui-icon-cancel { background-position: 0 -128px; }\n\n\n.ui-icon-plus { background-position: -16px -128px; }\n\n\n.ui-icon-plusthick { background-position: -32px -128px; }\n\n\n.ui-icon-minus { background-position: -48px -128px; }\n\n\n.ui-icon-minusthick { background-position: -64px -128px; }\n\n\n.ui-icon-close { background-position: -80px -128px; }\n\n\n.ui-icon-closethick { background-position: -96px -128px; }\n\n\n.ui-icon-key { background-position: -112px -128px; }\n\n\n.ui-icon-lightbulb { background-position: -128px -128px; }\n\n\n.ui-icon-scissors { background-position: -144px -128px; }\n\n\n.ui-icon-clipboard { background-position: -160px -128px; }\n\n\n.ui-icon-copy { background-position: -176px -128px; }\n\n\n.ui-icon-contact { background-position: -192px -128px; }\n\n\n.ui-icon-image { background-position: -208px -128px; }\n\n\n.ui-icon-video { background-position: -224px -128px; }\n\n\n.ui-icon-script { background-position: -240px -128px; }\n\n\n.ui-icon-alert { background-position: 0 -144px; }\n\n\n.ui-icon-info { background-position: -16px -144px; }\n\n\n.ui-icon-notice { background-position: -32px -144px; }\n\n\n.ui-icon-help { background-position: -48px -144px; }\n\n\n.ui-icon-check { background-position: -64px -144px; }\n\n\n.ui-icon-bullet { background-position: -80px -144px; }\n\n\n.ui-icon-radio-on { background-position: -96px -144px; }\n\n\n.ui-icon-radio-off { background-position: -112px -144px; }\n\n\n.ui-icon-pin-w { background-position: -128px -144px; }\n\n\n.ui-icon-pin-s { background-position: -144px -144px; }\n\n\n.ui-icon-play { background-position: 0 -160px; }\n\n\n.ui-icon-pause { background-position: -16px -160px; }\n\n\n.ui-icon-seek-next { background-position: -32px -160px; }\n\n\n.ui-icon-seek-prev { background-position: -48px -160px; }\n\n\n.ui-icon-seek-end { background-position: -64px -160px; }\n\n\n.ui-icon-seek-start { background-position: -80px -160px; }\n\n\n/* ui-icon-seek-first is deprecated, use ui-icon-seek-start instead */\n\n\n.ui-icon-seek-first { background-position: -80px -160px; }\n\n\n.ui-icon-stop { background-position: -96px -160px; }\n\n\n.ui-icon-eject { background-position: -112px -160px; }\n\n\n.ui-icon-volume-off { background-position: -128px -160px; }\n\n\n.ui-icon-volume-on { background-position: -144px -160px; }\n\n\n.ui-icon-power { background-position: 0 -176px; }\n\n\n.ui-icon-signal-diag { background-position: -16px -176px; }\n\n\n.ui-icon-signal { background-position: -32px -176px; }\n\n\n.ui-icon-battery-0 { background-position: -48px -176px; }\n\n\n.ui-icon-battery-1 { background-position: -64px -176px; }\n\n\n.ui-icon-battery-2 { background-position: -80px -176px; }\n\n\n.ui-icon-battery-3 { background-position: -96px -176px; }\n\n\n.ui-icon-circle-plus { background-position: 0 -192px; }\n\n\n.ui-icon-circle-minus { background-position: -16px -192px; }\n\n\n.ui-icon-circle-close { background-position: -32px -192px; }\n\n\n.ui-icon-circle-triangle-e { background-position: -48px -192px; }\n\n\n.ui-icon-circle-triangle-s { background-position: -64px -192px; }\n\n\n.ui-icon-circle-triangle-w { background-position: -80px -192px; }\n\n\n.ui-icon-circle-triangle-n { background-position: -96px -192px; }\n\n\n.ui-icon-circle-arrow-e { background-position: -112px -192px; }\n\n\n.ui-icon-circle-arrow-s { background-position: -128px -192px; }\n\n\n.ui-icon-circle-arrow-w { background-position: -144px -192px; }\n\n\n.ui-icon-circle-arrow-n { background-position: -160px -192px; }\n\n\n.ui-icon-circle-zoomin { background-position: -176px -192px; }\n\n\n.ui-icon-circle-zoomout { background-position: -192px -192px; }\n\n\n.ui-icon-circle-check { background-position: -208px -192px; }\n\n\n.ui-icon-circlesmall-plus { background-position: 0 -208px; }\n\n\n.ui-icon-circlesmall-minus { background-position: -16px -208px; }\n\n\n.ui-icon-circlesmall-close { background-position: -32px -208px; }\n\n\n.ui-icon-squaresmall-plus { background-position: -48px -208px; }\n\n\n.ui-icon-squaresmall-minus { background-position: -64px -208px; }\n\n\n.ui-icon-squaresmall-close { background-position: -80px -208px; }\n\n\n.ui-icon-grip-dotted-vertical { background-position: 0 -224px; }\n\n\n.ui-icon-grip-dotted-horizontal { background-position: -16px -224px; }\n\n\n.ui-icon-grip-solid-vertical { background-position: -32px -224px; }\n\n\n.ui-icon-grip-solid-horizontal { background-position: -48px -224px; }\n\n\n.ui-icon-gripsmall-diagonal-se { background-position: -64px -224px; }\n\n\n.ui-icon-grip-diagonal-se { background-position: -80px -224px; }\n\n\n/* Misc visuals\n----------------------------------*/\n\n\n/* Corner radius */\n\n\n.ui-corner-all,\n.ui-corner-top,\n.ui-corner-left,\n.ui-corner-tl {\n\tborder-top-left-radius: 3px;\n}\n\n\n.ui-corner-all,\n.ui-corner-top,\n.ui-corner-right,\n.ui-corner-tr {\n\tborder-top-right-radius: 3px;\n}\n\n\n.ui-corner-all,\n.ui-corner-bottom,\n.ui-corner-left,\n.ui-corner-bl {\n\tborder-bottom-left-radius: 3px;\n}\n\n\n.ui-corner-all,\n.ui-corner-bottom,\n.ui-corner-right,\n.ui-corner-br {\n\tborder-bottom-right-radius: 3px;\n}\n\n\n/* Overlays */\n\n\n.ui-widget-overlay {\n\tbackground: #aaaaaa;\n\topacity: .3;\n\tfilter: Alpha(Opacity=30); /* support: IE8 */\n}\n\n\n.ui-widget-shadow {\n\tbox-shadow: 0px 0px 5px #666666;\n}\n"},861:(K,G,A)=>{"use strict";function y(d,_,p,v,C,D,I){try{var P=d[D](I),B=P.value}catch(U){return void p(U)}P.done?_(B):Promise.resolve(B).then(v,C)}function l(d){return function(){var _=this,p=arguments;return new Promise(function(v,C){var D=d.apply(_,p);function I(B){y(D,v,C,I,P,"next",B)}function P(B){y(D,v,C,I,P,"throw",B)}I(void 0)})}}A.d(G,{Z:()=>l})}},K=>{K(K.s=8)}]);