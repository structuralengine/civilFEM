var eU=Math.pow;(self.webpackChunkCQ_editor=self.webpackChunkCQ_editor||[]).push([[179],{421:(K,U,D)=>{"use strict";function y(n){return"function"==typeof n}function o(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const d=o(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,s)=>`${s+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function g(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class p{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const c of t)c.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(y(r))try{r()}catch(c){e=c instanceof d?c.errors:[c]}const{_finalizers:s}=this;if(s){this._finalizers=null;for(const c of s)try{T(c)}catch(h){e=null!=e?e:[],h instanceof d?e=[...e,...h.errors]:e.push(h)}}if(e)throw new d(e)}}add(e){var t;if(e&&e!==this)if(this.closed)T(e);else{if(e instanceof p){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&g(t,e)}remove(e){const{_finalizers:t}=this;t&&g(t,e),e instanceof p&&e._removeParent(this)}}p.EMPTY=(()=>{const n=new p;return n.closed=!0,n})();const v=p.EMPTY;function M(n){return n instanceof p||n&&"closed"in n&&y(n.remove)&&y(n.add)&&y(n.unsubscribe)}function T(n){y(n)?n():n.unsubscribe()}const I={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},P={setTimeout(n,e,...t){const{delegate:r}=P;return(null==r?void 0:r.setTimeout)?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=P;return((null==e?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function N(n){P.setTimeout(()=>{const{onUnhandledError:e}=I;if(!e)throw n;e(n)})}function V(){}const J=ce("C",void 0,void 0);function ce(n,e,t){return{kind:n,value:e,error:t}}let ie=null;function ae(n){if(I.useDeprecatedSynchronousErrorHandling){const e=!ie;if(e&&(ie={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=ie;if(ie=null,t)throw r}}else n()}class Me extends p{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,M(e)&&e.add(this)):this.destination=qe}static create(e,t,r){return new st(e,t,r)}next(e){this.isStopped?Te(function re(n){return ce("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Te(function W(n){return ce("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Te(J,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Pe=Function.prototype.bind;function Ve(n,e){return Pe.call(n,e)}class le{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){We(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){We(r)}else We(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){We(t)}}}class st extends Me{constructor(e,t,r){let s;if(super(),y(e)||!e)s={next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=r?r:void 0};else{let c;this&&I.useDeprecatedNextContext?(c=Object.create(e),c.unsubscribe=()=>this.unsubscribe(),s={next:e.next&&Ve(e.next,c),error:e.error&&Ve(e.error,c),complete:e.complete&&Ve(e.complete,c)}):s=e}this.destination=new le(s)}}function We(n){I.useDeprecatedSynchronousErrorHandling?function we(n){I.useDeprecatedSynchronousErrorHandling&&ie&&(ie.errorThrown=!0,ie.error=n)}(n):N(n)}function Te(n,e){const{onStoppedNotification:t}=I;t&&P.setTimeout(()=>t(n,e))}const qe={closed:!0,next:V,error:function at(n){throw n},complete:V},Bt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ze(n){return n}let _n=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,s){const c=function Yn(n){return n&&n instanceof Me||function It(n){return n&&y(n.next)&&y(n.error)&&y(n.complete)}(n)&&M(n)}(t)?t:new st(t,r,s);return ae(()=>{const{operator:h,source:_}=this;c.add(h?h.call(c,_):_?this._subscribe(c):this._trySubscribe(c))}),c}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Dt(r))((s,c)=>{const h=new st({next:_=>{try{t(_)}catch(S){c(S),h.unsubscribe()}},error:c,complete:s});this.subscribe(h)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Bt](){return this}pipe(...t){return function jt(n){return 0===n.length?Ze:1===n.length?n[0]:function(t){return n.reduce((r,s)=>s(r),t)}}(t)(this)}toPromise(t){return new(t=Dt(t))((r,s)=>{let c;this.subscribe(h=>c=h,h=>s(h),()=>r(c))})}}return n.create=e=>new n(e),n})();function Dt(n){var e;return null!==(e=null!=n?n:I.Promise)&&void 0!==e?e:Promise}const ei=o(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Xt=(()=>{class n extends _n{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new pr(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ei}next(t){ae(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){ae(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ae(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:s,observers:c}=this;return r||s?v:(this.currentObservers=null,c.push(t),new p(()=>{this.currentObservers=null,g(c,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:s,isStopped:c}=this;r?t.error(s):c&&t.complete()}asObservable(){const t=new _n;return t.source=this,t}}return n.create=(e,t)=>new pr(e,t),n})();class pr extends Xt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:v}}function Li(n){return y(null==n?void 0:n.lift)}function Mn(n){return e=>{if(Li(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Sn(n,e,t,r,s){return new zi(n,e,t,r,s)}class zi extends Me{constructor(e,t,r,s,c,h){super(e),this.onFinalize=c,this.shouldUnsubscribe=h,this._next=t?function(_){try{t(_)}catch(S){e.error(S)}}:super._next,this._error=s?function(_){try{s(_)}catch(S){e.error(S)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(_){e.error(_)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ti(n,e){return Mn((t,r)=>{let s=0;t.subscribe(Sn(r,c=>{r.next(n.call(e,c,s++))}))})}function wr(n){return this instanceof wr?(this.v=n,this):new wr(n)}function ro(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,r=t.apply(n,e||[]),c=[];return s={},h("next"),h("throw"),h("return"),s[Symbol.asyncIterator]=function(){return this},s;function h(X){r[X]&&(s[X]=function(te){return new Promise(function(ue,ve){c.push([X,te,ue,ve])>1||_(X,te)})})}function _(X,te){try{!function S(X){X.value instanceof wr?Promise.resolve(X.value.v).then(A,O):G(c[0][2],X)}(r[X](te))}catch(ue){G(c[0][3],ue)}}function A(X){_("next",X)}function O(X){_("throw",X)}function G(X,te){X(te),c.shift(),c.length&&_(c[0][0],c[0][1])}}function Qo(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function ui(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(c){t[c]=n[c]&&function(h){return new Promise(function(_,S){!function s(c,h,_,S){Promise.resolve(S).then(function(A){c({value:A,done:_})},h)}(_,S,(h=n[c](h)).done,h.value)})}}}const Xi=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Ds(n){return y(null==n?void 0:n.then)}function b(n){return y(n[Bt])}function k(n){return Symbol.asyncIterator&&y(null==n?void 0:n[Symbol.asyncIterator])}function H(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ne=function Z(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function fe(n){return y(null==n?void 0:n[ne])}function De(n){return ro(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:s}=yield wr(t.read());if(s)return yield wr(void 0);yield yield wr(r)}}finally{t.releaseLock()}})}function Ue(n){return y(null==n?void 0:n.getReader)}function Qe(n){if(n instanceof _n)return n;if(null!=n){if(b(n))return function gt(n){return new _n(e=>{const t=n[Bt]();if(y(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Xi(n))return function xt(n){return new _n(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Ds(n))return function Jt(n){return new _n(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,N)})}(n);if(k(n))return Ht(n);if(fe(n))return function Ct(n){return new _n(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Ue(n))return function en(n){return Ht(De(n))}(n)}throw H(n)}function Ht(n){return new _n(e=>{(function St(n,e){var t,r,s,c;return function Lt(n,e,t,r){return new(t||(t=Promise))(function(c,h){function _(O){try{A(r.next(O))}catch(G){h(G)}}function S(O){try{A(r.throw(O))}catch(G){h(G)}}function A(O){O.done?c(O.value):function s(c){return c instanceof t?c:new t(function(h){h(c)})}(O.value).then(_,S)}A((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Qo(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(h){s={error:h}}finally{try{r&&!r.done&&(c=t.return)&&(yield c.call(t))}finally{if(s)throw s.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Kt(n,e,t,r=0,s=!1){const c=e.schedule(function(){t(),s?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(c),!s)return c}function sn(n,e,t=1/0){return y(e)?sn((r,s)=>ti((c,h)=>e(r,c,s,h))(Qe(n(r,s))),t):("number"==typeof e&&(t=e),Mn((r,s)=>function gn(n,e,t,r,s,c,h,_){const S=[];let A=0,O=0,G=!1;const X=()=>{G&&!S.length&&!A&&e.complete()},te=ve=>A<r?ue(ve):S.push(ve),ue=ve=>{c&&e.next(ve),A++;let Ie=!1;Qe(t(ve,O++)).subscribe(Sn(e,ye=>{null==s||s(ye),c?te(ye):e.next(ye)},()=>{Ie=!0},void 0,()=>{if(Ie)try{for(A--;S.length&&A<r;){const ye=S.shift();h?Kt(e,h,()=>ue(ye)):ue(ye)}X()}catch(ye){e.error(ye)}}))};return n.subscribe(Sn(e,te,()=>{G=!0,X()})),()=>{null==_||_()}}(r,s,n,t)))}function Wn(n=1/0){return sn(Ze,n)}const Qn=new _n(n=>n.complete());function Si(n){return n&&y(n.schedule)}function Ei(n){return n[n.length-1]}function Mr(n){return y(Ei(n))?n.pop():void 0}function Oi(n){return Si(Ei(n))?n.pop():void 0}function Br(n,e=0){return Mn((t,r)=>{t.subscribe(Sn(r,s=>Kt(r,n,()=>r.next(s),e),()=>Kt(r,n,()=>r.complete(),e),s=>Kt(r,n,()=>r.error(s),e)))})}function ia(n,e=0){return Mn((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Os(n,e){if(!n)throw new Error("Iterable cannot be null");return new _n(t=>{Kt(t,e,()=>{const r=n[Symbol.asyncIterator]();Kt(t,e,()=>{r.next().then(s=>{s.done?t.complete():t.next(s.value)})},0,!0)})})}function Ws(n,e){return e?function ts(n,e){if(null!=n){if(b(n))return function rl(n,e){return Qe(n).pipe(ia(e),Br(e))}(n,e);if(Xi(n))return function Ni(n,e){return new _n(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Ds(n))return function Qs(n,e){return Qe(n).pipe(ia(e),Br(e))}(n,e);if(k(n))return Os(n,e);if(fe(n))return function So(n,e){return new _n(t=>{let r;return Kt(t,e,()=>{r=n[ne](),Kt(t,e,()=>{let s,c;try{({value:s,done:c}=r.next())}catch(h){return void t.error(h)}c?t.complete():t.next(s)},0,!0)}),()=>y(null==r?void 0:r.return)&&r.return()})}(n,e);if(Ue(n))return function la(n,e){return Os(De(n),e)}(n,e)}throw H(n)}(n,e):Qe(n)}function Eo(...n){const e=Oi(n),t=function Yr(n,e){return"number"==typeof Ei(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Qe(r[0]):Wn(t)(Ws(r,e)):Qn}function ka(n={}){const{connector:e=(()=>new Xt),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:s=!0}=n;return c=>{let h,_,S,A=0,O=!1,G=!1;const X=()=>{null==_||_.unsubscribe(),_=void 0},te=()=>{X(),h=S=void 0,O=G=!1},ue=()=>{const ve=h;te(),null==ve||ve.unsubscribe()};return Mn((ve,Ie)=>{A++,!G&&!O&&X();const ye=S=null!=S?S:e();Ie.add(()=>{A--,0===A&&!G&&!O&&(_=ke(ue,s))}),ye.subscribe(Ie),!h&&A>0&&(h=new st({next:de=>ye.next(de),error:de=>{G=!0,X(),_=ke(te,t,de),ye.error(de)},complete:()=>{O=!0,X(),_=ke(te,r),ye.complete()}}),Qe(ve).subscribe(h))})(c)}}function ke(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new st({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function Je(n){for(let e in n)if(n[e]===Je)return e;throw Error("Could not find renamed property on target object.")}function mn(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function En(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(En).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Dr(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const ps=Je({__forward_ref__:Je});function Vi(n){return n.__forward_ref__=Vi,n.toString=function(){return En(this())},n}function Xn(n){return Pa(n)?n():n}function Pa(n){return"function"==typeof n&&n.hasOwnProperty(ps)&&n.__forward_ref__===Vi}class Bi extends Error{constructor(e,t){super(function La(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function or(n){return"string"==typeof n?n:null==n?"":String(n)}function ws(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():or(n)}function pc(n,e){const t=e?` in ${e}`:"";throw new Bi(-201,`No provider for ${ws(n)} found${t}`)}function Ql(n,e){null==n&&function xo(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Ai(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ms(n){return{providers:n.providers||[],imports:n.imports||[]}}function au(n){return lh(n,mc)||lh(n,Hh)}function lh(n,e){return n.hasOwnProperty(e)?n[e]:null}function sl(n){return n&&(n.hasOwnProperty(Bh)||n.hasOwnProperty(Ac))?n[Bh]:null}const mc=Je({\u0275prov:Je}),Bh=Je({\u0275inj:Je}),Hh=Je({ngInjectableDef:Je}),Ac=Je({ngInjectorDef:Je});var Fr=(()=>((Fr=Fr||{})[Fr.Default=0]="Default",Fr[Fr.Host=1]="Host",Fr[Fr.Self=2]="Self",Fr[Fr.SkipSelf=4]="SkipSelf",Fr[Fr.Optional=8]="Optional",Fr))();let zh;function lu(n){const e=zh;return zh=n,e}function cu(n,e,t){const r=au(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Fr.Optional?null:void 0!==e?e:void pc(En(n),"Injector")}function q(n){return{toString:n}.toString()}var se=(()=>((se=se||{})[se.OnPush=0]="OnPush",se[se.Default=1]="Default",se))(),Ne=(()=>{return(n=Ne||(Ne={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ne;var n})();const ze="undefined"!=typeof globalThis&&globalThis,Ye="undefined"!=typeof window&&window,Et="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Rt=ze||"undefined"!=typeof global&&global||Ye||Et,on={},un=[],mr=Je({\u0275cmp:Je}),ns=Je({\u0275dir:Je}),gr=Je({\u0275pipe:Je}),ko=Je({\u0275mod:Je}),Ls=Je({\u0275fac:Je}),fl=Je({__NG_ELEMENT_ID__:Je});let To=0;function rr(n){return q(()=>{const t={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===se.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||un,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Ne.Emulated,id:"c",styles:n.styles||un,_:null,setInput:null,schemas:n.schemas||null,tView:null},s=n.directives,c=n.features,h=n.pipes;return r.id+=To++,r.inputs=pl(n.inputs,t),r.outputs=pl(n.outputs),c&&c.forEach(_=>_(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(Or):null,r.pipeDefs=h?()=>("function"==typeof h?h():h).map(ra):null,r})}function Or(n){return Ui(n)||function Bn(n){return n[ns]||null}(n)}function ra(n){return function oo(n){return n[gr]||null}(n)}const uh={};function ys(n){return q(()=>{const e={type:n.type,bootstrap:n.bootstrap||un,declarations:n.declarations||un,imports:n.imports||un,exports:n.exports||un,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(uh[n.id]=n.type),e})}function pl(n,e){if(null==n)return on;const t={};for(const r in n)if(n.hasOwnProperty(r)){let s=n[r],c=s;Array.isArray(s)&&(c=s[1],s=s[0]),t[s]=r,e&&(e[s]=c)}return t}const mi=rr;function Ui(n){return n[mr]||null}function Za(n,e){const t=n[ko]||null;if(!t&&!0===e)throw new Error(`Type ${En(n)} does not have '\u0275mod' property.`);return t}function al(n){return Array.isArray(n)&&"object"==typeof n[1]}function wo(n){return Array.isArray(n)&&!0===n[1]}function Vh(n){return 0!=(8&n.flags)}function Eu(n){return 2==(2&n.flags)}function Tu(n){return 1==(1&n.flags)}function ea(n){return null!==n.template}function hr(n){return 0!=(512&n[2])}function Xs(n,e){return n.hasOwnProperty(Ls)?n[Ls]:null}class Nr{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function xi(){return Na}function Na(n){return n.type.prototype.ngOnChanges&&(n.setInput=Wo),Bl}function Bl(){const n=Ka(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===on)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Wo(n,e,t,r){const s=Ka(n)||function fa(n,e){return n[wa]=e}(n,{previous:on,current:null}),c=s.current||(s.current={}),h=s.previous,_=this.declaredInputs[t],S=h[_];c[_]=new Nr(S&&S.currentValue,e,h===on),n[r]=e}xi.ngInherit=!0;const wa="__ngSimpleChanges__";function Ka(n){return n[wa]||null}let Ma;function ho(n){return!!n.listen}const Du={createRenderer:(n,e)=>function qo(){return void 0!==Ma?Ma:"undefined"!=typeof document?document:void 0}()};function jo(n){for(;Array.isArray(n);)n=n[0];return n}function qc(n,e){return jo(e[n])}function Js(n,e){return jo(e[n.index])}function zr(n,e){return n.data[e]}function Ca(n,e){const t=e[n];return al(t)?t:t[0]}function bf(n){return 4==(4&n[2])}function Id(n){return 128==(128&n[2])}function uu(n,e){return null==e?null:n[e]}function qh(n){n[18]=0}function kd(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const Fn={lFrame:F_(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function _y(){return Fn.bindingsEnabled}function Jn(){return Fn.lFrame.lView}function ls(){return Fn.lFrame.tView}function nc(n){return Fn.lFrame.contextLView=n,n[8]}function $s(){let n=yr();for(;null!==n&&64===n.type;)n=n.parent;return n}function yr(){return Fn.lFrame.currentTNode}function Vl(n,e){const t=Fn.lFrame;t.currentTNode=n,t.isParent=e}function Pd(){return Fn.lFrame.isParent}function Au(){Fn.lFrame.isParent=!1}function Ld(){return Fn.isInCheckNoChangesMode}function Xu(n){Fn.isInCheckNoChangesMode=n}function Ul(){const n=Fn.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Ju(){return Fn.lFrame.bindingIndex++}function hu(n){const e=Fn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function ao(n,e){const t=Fn.lFrame;t.bindingIndex=t.bindingRootIndex=n,to(e)}function to(n){Fn.lFrame.currentDirectiveIndex=n}function Ku(n){const e=Fn.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function wf(){return Fn.lFrame.currentQueryIndex}function Iu(n){Fn.lFrame.currentQueryIndex=n}function Fd(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Wl(n,e,t){if(t&Fr.SkipSelf){let s=e,c=n;for(;!(s=s.parent,null!==s||t&Fr.Host||(s=Fd(c),null===s||(c=c[15],10&s.type))););if(null===s)return!1;e=s,n=c}const r=Fn.lFrame=Mf();return r.currentTNode=e,r.lView=n,!0}function Od(n){const e=Mf(),t=n[1];Fn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Mf(){const n=Fn.lFrame,e=null===n?null:n.child;return null===e?F_(n):e}function F_(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function ql(){const n=Fn.lFrame;return Fn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ic=ql;function pa(){const n=ql();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Qa(){return Fn.lFrame.selectedIndex}function yc(n){Fn.lFrame.selectedIndex=n}function sa(){const n=Fn.lFrame;return zr(n.tView,n.selectedIndex)}function Zh(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const c=n.data[t].type.prototype,{ngAfterContentInit:h,ngAfterContentChecked:_,ngAfterViewInit:S,ngAfterViewChecked:A,ngOnDestroy:O}=c;h&&(n.contentHooks||(n.contentHooks=[])).push(-t,h),_&&((n.contentHooks||(n.contentHooks=[])).push(t,_),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,_)),S&&(n.viewHooks||(n.viewHooks=[])).push(-t,S),A&&((n.viewHooks||(n.viewHooks=[])).push(t,A),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,A)),null!=O&&(n.destroyHooks||(n.destroyHooks=[])).push(t,O)}}function eg(n,e,t){tg(n,e,3,t)}function Op(n,e,t,r){(3&n[2])===t&&tg(n,e,t,r)}function Yh(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function tg(n,e,t,r){const c=null!=r?r:-1,h=e.length-1;let _=0;for(let S=void 0!==r?65535&n[18]:0;S<h;S++)if("number"==typeof e[S+1]){if(_=e[S],null!=r&&_>=r)break}else e[S]<0&&(n[18]+=65536),(_<c||-1==c)&&(ng(n,t,e,S),n[18]=(4294901760&n[18])+S+2),S++}function ng(n,e,t,r){const s=t[r]<0,c=t[r+1],_=n[s?-t[r]:t[r]];if(s){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{c.call(_)}finally{}}}else try{c.call(_)}finally{}}class zd{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function ph(n,e,t){const r=ho(n);let s=0;for(;s<t.length;){const c=t[s];if("number"==typeof c){if(0!==c)break;s++;const h=t[s++],_=t[s++],S=t[s++];r?n.setAttribute(e,_,S,h):e.setAttributeNS(h,_,S)}else{const h=c,_=t[++s];rg(h)?r&&n.setProperty(e,h,_):r?n.setAttribute(e,h,_):e.setAttribute(h,_),s++}}return s}function Np(n){return 3===n||4===n||6===n}function rg(n){return 64===n.charCodeAt(0)}function Bp(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const s=e[r];"number"==typeof s?t=s:0===t||O_(n,t,s,null,-1===t||2===t?e[++r]:null)}}return n}function O_(n,e,t,r,s){let c=0,h=n.length;if(-1===e)h=-1;else for(;c<n.length;){const _=n[c++];if("number"==typeof _){if(_===e){h=-1;break}if(_>e){h=c-1;break}}}for(;c<n.length;){const _=n[c];if("number"==typeof _)break;if(_===t){if(null===r)return void(null!==s&&(n[c+1]=s));if(r===n[c+1])return void(n[c+2]=s)}c++,null!==r&&c++,null!==s&&c++}-1!==h&&(n.splice(h,0,e),c=h+1),n.splice(c++,0,t),null!==r&&n.splice(c++,0,r),null!==s&&n.splice(c++,0,s)}function Vd(n){return-1!==n}function Ud(n){return 32767&n}function Gd(n,e){let t=function sg(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let Wd=!0;function og(n){const e=Wd;return Wd=n,e}let xy=0;function mh(n,e){const t=jd(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,qd(r.data,n),qd(e,null),qd(r.blueprint,null));const s=Vp(n,e),c=n.injectorIndex;if(Vd(s)){const h=Ud(s),_=Gd(s,e),S=_[1].data;for(let A=0;A<8;A++)e[c+A]=_[h+A]|S[h+A]}return e[c+8]=s,c}function qd(n,e){n.push(0,0,0,0,0,0,0,0,e)}function jd(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Vp(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,s=e;for(;null!==s;){const c=s[1],h=c.type;if(r=2===h?c.declTNode:1===h?s[6]:null,null===r)return-1;if(t++,s=s[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function ag(n,e,t){!function zp(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(fl)&&(r=t[fl]),null==r&&(r=t[fl]=xy++);const s=255&r;e.data[n+(s>>5)]|=1<<s}(n,e,t)}function gh(n,e,t){if(t&Fr.Optional)return n;pc(e,"NodeInjector")}function Zd(n,e,t,r){if(t&Fr.Optional&&void 0===r&&(r=null),0==(t&(Fr.Self|Fr.Host))){const s=n[9],c=lu(void 0);try{return s?s.get(e,r,t&Fr.Optional):cu(e,r,t&Fr.Optional)}finally{lu(c)}}return gh(r,e,t)}function Ef(n,e,t,r=Fr.Default,s){if(null!==n){const c=function bc(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(fl)?n[fl]:void 0;return"number"==typeof e?e>=0?255&e:Cy:e}(t);if("function"==typeof c){if(!Wl(e,n,r))return r&Fr.Host?gh(s,t,r):Zd(e,t,r,s);try{const h=c(r);if(null!=h||r&Fr.Optional)return h;pc(t)}finally{ic()}}else if("number"==typeof c){let h=null,_=jd(n,e),S=-1,A=r&Fr.Host?e[16][6]:null;for((-1===_||r&Fr.SkipSelf)&&(S=-1===_?Vp(n,e):e[_+8],-1!==S&&Sy(r,!1)?(h=e[1],_=Ud(S),e=Gd(S,e)):_=-1);-1!==_;){const O=e[1];if(H_(c,_,O.data)){const G=tx(_,e,t,h,r,A);if(G!==My)return G}S=e[_+8],-1!==S&&Sy(r,e[1].data[_+8]===A)&&H_(c,_,e)?(h=O,_=Ud(S),e=Gd(S,e)):_=-1}}}return Zd(e,t,r,s)}const My={};function Cy(){return new Tf($s(),Jn())}function tx(n,e,t,r,s,c){const h=e[1],_=h.data[n+8],O=lg(_,h,t,null==r?Eu(_)&&Wd:r!=h&&0!=(3&_.type),s&Fr.Host&&c===_);return null!==O?Up(e,h,O,_):My}function lg(n,e,t,r,s){const c=n.providerIndexes,h=e.data,_=1048575&c,S=n.directiveStart,O=c>>20,X=s?_+O:n.directiveEnd;for(let te=r?_:_+O;te<X;te++){const ue=h[te];if(te<S&&t===ue||te>=S&&ue.type===t)return te}if(s){const te=h[S];if(te&&ea(te)&&te.type===t)return S}return null}function Up(n,e,t,r){let s=n[t];const c=e.data;if(function yy(n){return n instanceof zd}(s)){const h=s;h.resolving&&function Uo(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Bi(-200,`Circular dependency in DI detected for ${n}${t}`)}(ws(c[t]));const _=og(h.canSeeViewProviders);h.resolving=!0;const S=h.injectImpl?lu(h.injectImpl):null;Wl(n,r,Fr.Default);try{s=n[t]=h.factory(void 0,c,n,r),e.firstCreatePass&&t>=r.directiveStart&&function vy(n,e,t){const{ngOnChanges:r,ngOnInit:s,ngDoCheck:c}=e.type.prototype;if(r){const h=Na(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,h),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,h)}s&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,s),c&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,c),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,c))}(t,c[t],e)}finally{null!==S&&lu(S),og(_),h.resolving=!1,ic()}}return s}function H_(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Sy(n,e){return!(n&Fr.Self||n&Fr.Host&&e)}class Tf{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Ef(this._tNode,this._lView,e,r,t)}}function Sa(n){return q(()=>{const e=n.prototype.constructor,t=e[Ls]||cg(e),r=Object.prototype;let s=Object.getPrototypeOf(n.prototype).constructor;for(;s&&s!==r;){const c=s[Ls]||cg(s);if(c&&c!==t)return c;s=Object.getPrototypeOf(s)}return c=>new c})}function cg(n){return Pa(n)?()=>{const e=cg(Xn(n));return e&&e()}:Xs(n)}function Xh(n){return function wy(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let s=0;for(;s<r;){const c=t[s];if(Np(c))break;if(0===c)s+=2;else if("number"==typeof c)for(s++;s<r&&"string"==typeof t[s];)s++;else{if(c===e)return t[s+1];s+=2}}}return null}($s(),n)}const Df="__parameters__";function $u(n,e,t){return q(()=>{const r=function Qu(n){return function(...t){if(n){const r=n(...t);for(const s in r)this[s]=r[s]}}}(e);function s(...c){if(this instanceof s)return r.apply(this,c),this;const h=new s(...c);return _.annotation=h,_;function _(S,A,O){const G=S.hasOwnProperty(Df)?S[Df]:Object.defineProperty(S,Df,{value:[]})[Df];for(;G.length<=O;)G.push(null);return(G[O]=G[O]||[]).push(h),S}}return t&&(s.prototype=Object.create(t.prototype)),s.prototype.ngMetadataName=n,s.annotationCls=s,s})}class bi{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ai({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const nx=new bi("AnalyzeForEntryComponents");function du(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),du(r,e)):e!==n&&e.push(r)}return e}function Ru(n,e){n.forEach(t=>Array.isArray(t)?Ru(t,e):e(t))}function Zp(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function hg(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Yp(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function Yc(n,e,t){let r=Xd(n,e);return r>=0?n[1|r]=t:(r=~r,function Iy(n,e,t,r){let s=n.length;if(s==e)n.push(t,r);else if(1===s)n.push(r,n[0]),n[0]=t;else{for(s--,n.push(n[s-1],n[s]);s>e;)n[s]=n[s-2],s--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function dg(n,e){const t=Xd(n,e);if(t>=0)return n[1|t]}function Xd(n,e){return function fg(n,e,t){let r=0,s=n.length>>t;for(;s!==r;){const c=r+(s-r>>1),h=n[c<<t];if(e===h)return c<<t;h>e?s=c:r=c+1}return~(s<<t)}(n,e,1)}const Kp={},W_="__NG_DI_FLAG__",Qp="ngTempTokenPath",Ly=/\n/gm,j_="__source",Rf=Je({provide:String,useValue:Je});let kf;function $p(n){const e=kf;return kf=n,e}function ux(n,e=Fr.Default){if(void 0===kf)throw new Bi(203,"");return null===kf?cu(n,void 0,e):kf.get(n,e&Fr.Optional?null:void 0,e)}function wn(n,e=Fr.Default){return(function ch(){return zh}()||ux)(Xn(n),e)}const Zo=wn;function Z_(n){const e=[];for(let t=0;t<n.length;t++){const r=Xn(n[t]);if(Array.isArray(r)){if(0===r.length)throw new Bi(900,"");let s,c=Fr.Default;for(let h=0;h<r.length;h++){const _=r[h],S=em(_);"number"==typeof S?-1===S?s=_.token:c|=S:s=_}e.push(wn(s,c))}else e.push(wn(r))}return e}function Jd(n,e){return n[W_]=e,n.prototype[W_]=e,n}function em(n){return n[W_]}const Pf=Jd($u("Inject",n=>({token:n})),-1),Xc=Jd($u("Optional"),8),Jh=Jd($u("SkipSelf"),4);let m;function F(n){var e;return(null===(e=function C(){if(void 0===m&&(m=null,Rt.trustedTypes))try{m=Rt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return m}())||void 0===e?void 0:e.createHTML(n))||n}class dt{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Vt extends dt{getTypeName(){return"HTML"}}class Pt extends dt{getTypeName(){return"Style"}}class bn extends dt{getTypeName(){return"Script"}}class Hn extends dt{getTypeName(){return"URL"}}class hi extends dt{getTypeName(){return"ResourceURL"}}function li(n){return n instanceof dt?n.changingThisBreaksApplicationSecurity:n}function di(n,e){const t=fi(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}function fi(n){return n instanceof dt&&n.getTypeName()||null}class ma{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(F(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class Rc{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=F(e),t;const r=this.inertDocument.createElement("body");return r.innerHTML=F(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const t=e.attributes;for(let s=t.length-1;0<s;s--){const h=t.item(s).name;("xmlns:ns1"===h||0===h.indexOf("ns1:"))&&e.removeAttribute(h)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const el=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Tl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ga(n){return(n=String(n)).match(el)||n.match(Tl)?n:"unsafe:"+n}function go(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function vl(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const Kd=go("area,br,col,hr,img,wbr"),_h=go("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Dl=go("rp,rt"),Pu=vl(Kd,vl(_h,go("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vl(Dl,go("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),vl(Dl,_h)),yh=go("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),bh=go("srcset"),_g=vl(yh,bh,go("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),go("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),aD=go("script,style,template");class lD{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=this.checkClobberedElement(t,t.nextSibling);if(s){t=s;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Pu.hasOwnProperty(t))return this.sanitizedSomething=!0,!aD.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let s=0;s<r.length;s++){const c=r.item(s),h=c.name,_=h.toLowerCase();if(!_g.hasOwnProperty(_)){this.sanitizedSomething=!0;continue}let S=c.value;yh[_]&&(S=ga(S)),bh[_]&&(n=S,S=(n=String(n)).split(",").map(e=>ga(e.trim())).join(", ")),this.buf.push(" ",h,'="',wM(S),'"')}var n;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Pu.hasOwnProperty(t)&&!Kd.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(wM(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const cD=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,uD=/([^\#-~ |!])/g;function wM(n){return n.replace(/&/g,"&amp;").replace(cD,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(uD,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let $_;function px(n,e){let t=null;try{$_=$_||function cl(n){const e=new Rc(n);return function xc(){try{return!!(new window.DOMParser).parseFromString(F(""),"text/html")}catch(n){return!1}}()?new ma(e):e}(n);let r=e?String(e):"";t=$_.getInertBodyElement(r);let s=5,c=r;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,r=c,c=t.innerHTML,t=$_.getInertBodyElement(r)}while(r!==c);return F((new lD).sanitizeChildren(ev(t)||t))}finally{if(t){const r=ev(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function ev(n){return"content"in n&&function MM(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Lo=(()=>((Lo=Lo||{})[Lo.NONE=0]="NONE",Lo[Lo.HTML=1]="HTML",Lo[Lo.STYLE=2]="STYLE",Lo[Lo.SCRIPT=3]="SCRIPT",Lo[Lo.URL=4]="URL",Lo[Lo.RESOURCE_URL=5]="RESOURCE_URL",Lo))();const DM="__ngContext__";function rc(n,e){n[DM]=e}function _x(n){const e=function iv(n){return n[DM]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function bx(n){return n.ngOriginalError}function PM(n,...e){n.error(...e)}class Of{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),r=function yD(n){return n&&n.ngErrorLogger||PM}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&bx(e);for(;t&&bx(t);)t=bx(t);return t||null}}const TD=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Rt))();function wx(n){return n.ownerDocument.defaultView}function Lu(n){return n instanceof Function?n():n}var Fu=(()=>((Fu=Fu||{})[Fu.Important=1]="Important",Fu[Fu.DashCase=2]="DashCase",Fu))();function Gy(n,e){return undefined(n,e)}function Nf(n){const e=n[3];return wo(e)?e[3]:e}function Kh(n){return im(n[13])}function bg(n){return im(n[4])}function im(n){for(;null!==n&&!wo(n);)n=n[4];return n}function xh(n,e,t,r,s){if(null!=r){let c,h=!1;wo(r)?c=r:al(r)&&(h=!0,r=r[0]);const _=jo(r);0===n&&null!==t?null==s?Dx(e,t,_):sm(e,t,_,s||null,!0):1===n&&null!==t?sm(e,t,_,s||null,!0):2===n?function kx(n,e,t){const r=uv(n,e);r&&function cv(n,e,t,r){ho(n)?n.removeChild(e,t,r):e.removeChild(t)}(n,r,e,t)}(e,_,h):3===n&&e.destroyNode(_),null!=c&&function NM(n,e,t,r,s){const c=t[7];c!==jo(t)&&xh(e,n,r,c,s);for(let _=10;_<t.length;_++){const S=t[_];zf(S[1],S,n,e,r,c)}}(e,n,c,t,s)}}function qy(n,e,t){if(ho(n))return n.createElement(e,t);{const r=null!==t?function Td(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(t):null;return null===r?n.createElement(e):n.createElementNS(r,e)}}function av(n,e){const t=n[9],r=t.indexOf(e),s=e[3];1024&e[2]&&(e[2]&=-1025,kd(s,-1)),t.splice(r,1)}function xg(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const s=r[17];null!==s&&s!==n&&av(s,r),e>0&&(n[t-1][4]=r[4]);const c=hg(n,10+e);!function jy(n,e){zf(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const h=c[19];null!==h&&h.detachView(c[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function lv(n,e){if(!(256&e[2])){const t=e[11];ho(t)&&t.destroyNode&&zf(n,e,t,3,null,null),function LM(n){let e=n[13];if(!e)return Yy(n[1],n);for(;e;){let t=null;if(al(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)al(e)&&Yy(e[1],e),e=e[3];null===e&&(e=n),al(e)&&Yy(e[1],e),t=e&&e[4]}e=t}}(e)}}function Yy(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function OM(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const s=e[t[r]];if(!(s instanceof zd)){const c=t[r+1];if(Array.isArray(c))for(let h=0;h<c.length;h+=2){const _=s[c[h]],S=c[h+1];try{S.call(_)}finally{}}else try{c.call(s)}finally{}}}}(n,e),function Sx(n,e){const t=n.cleanup,r=e[7];let s=-1;if(null!==t)for(let c=0;c<t.length-1;c+=2)if("string"==typeof t[c]){const h=t[c+1],_="function"==typeof h?h(e):jo(e[h]),S=r[s=t[c+2]],A=t[c+3];"boolean"==typeof A?_.removeEventListener(t[c],S,A):A>=0?r[s=A]():r[s=-A].unsubscribe(),c+=2}else{const h=r[s=t[c+1]];t[c].call(h)}if(null!==r){for(let c=s+1;c<r.length;c++)r[c]();e[7]=null}}(n,e),1===e[1].type&&ho(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&wo(e[3])){t!==e[3]&&av(t,e);const r=e[19];null!==r&&r.detachView(n)}}}function Ex(n,e,t){return function Tx(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const s=n.data[r.directiveStart].encapsulation;if(s===Ne.None||s===Ne.Emulated)return null}return Js(r,t)}(n,e.parent,t)}function sm(n,e,t,r,s){ho(n)?n.insertBefore(e,t,r,s):e.insertBefore(t,r,s)}function Dx(n,e,t){ho(n)?n.appendChild(e,t):e.appendChild(t)}function wg(n,e,t,r,s){null!==r?sm(n,e,t,r,s):Dx(n,e,t)}function uv(n,e){return ho(n)?n.parentNode(e):e.parentNode}function Mg(n,e,t){return Ix(n,e,t)}let Ix=function Ax(n,e,t){return 40&n.type?Js(n,t):null};function om(n,e,t,r){const s=Ex(n,r,e),c=e[11],_=Mg(r.parent||e[6],r,e);if(null!=s)if(Array.isArray(t))for(let S=0;S<t.length;S++)wg(c,s,t[S],_,!1);else wg(c,s,t,_,!1)}function yl(n,e){if(null!==e){const t=e.type;if(3&t)return Js(e,n);if(4&t)return Xy(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return yl(n,r);{const s=n[e.index];return wo(s)?Xy(-1,s):jo(s)}}if(32&t)return Gy(e,n)()||jo(n[e.index]);{const r=Rx(n,e);return null!==r?Array.isArray(r)?r[0]:yl(Nf(n[16]),r):yl(n,e.next)}}return null}function Rx(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Xy(n,e){const t=10+n+1;if(t<e.length){const r=e[t],s=r[1].firstChild;if(null!==s)return yl(r,s)}return e[7]}function hv(n,e,t,r,s,c,h){for(;null!=t;){const _=r[t.index],S=t.type;if(h&&0===e&&(_&&rc(jo(_),r),t.flags|=4),64!=(64&t.flags))if(8&S)hv(n,e,t.child,r,s,c,!1),xh(e,n,s,_,c);else if(32&S){const A=Gy(t,r);let O;for(;O=A();)xh(e,n,s,O,c);xh(e,n,s,_,c)}else 16&S?Px(n,e,r,t,s,c):xh(e,n,s,_,c);t=h?t.projectionNext:t.next}}function zf(n,e,t,r,s,c){hv(t,r,n.firstChild,e,s,c,!1)}function Px(n,e,t,r,s,c){const h=t[16],S=h[6].projection[r.projection];if(Array.isArray(S))for(let A=0;A<S.length;A++)xh(e,n,s,S[A],c);else hv(n,e,S,h[3],s,c,!0)}function Jy(n,e,t){ho(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function Qd(n,e,t){ho(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function Lx(n,e,t){let r=n.length;for(;;){const s=n.indexOf(e,t);if(-1===s)return s;if(0===s||n.charCodeAt(s-1)<=32){const c=e.length;if(s+c===r||n.charCodeAt(s+c)<=32)return s}t=s+1}}const dv="ng-template";function Ky(n,e,t){let r=0;for(;r<n.length;){let s=n[r++];if(t&&"class"===s){if(s=n[r],-1!==Lx(s.toLowerCase(),e,0))return!0}else if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}}return!1}function am(n){return 4===n.type&&n.value!==dv}function HM(n,e,t){return e===(4!==n.type||t?n.value:dv)}function zM(n,e,t){let r=4;const s=n.attrs||[],c=function Eg(n){for(let e=0;e<n.length;e++)if(Np(n[e]))return e;return n.length}(s);let h=!1;for(let _=0;_<e.length;_++){const S=e[_];if("number"!=typeof S){if(!h)if(4&r){if(r=2|1&r,""!==S&&!HM(n,S,t)||""===S&&1===e.length){if(Ou(r))return!1;h=!0}}else{const A=8&r?S:e[++_];if(8&r&&null!==n.attrs){if(!Ky(n.attrs,A,t)){if(Ou(r))return!1;h=!0}continue}const G=VM(8&r?"class":S,s,am(n),t);if(-1===G){if(Ou(r))return!1;h=!0;continue}if(""!==A){let X;X=G>c?"":s[G+1].toLowerCase();const te=8&r?X:null;if(te&&-1!==Lx(te,A,0)||2&r&&A!==X){if(Ou(r))return!1;h=!0}}}}else{if(!h&&!Ou(r)&&!Ou(S))return!1;if(h&&Ou(S))continue;h=!1,r=S|1&r}}return Ou(r)||h}function Ou(n){return 0==(1&n)}function VM(n,e,t,r){if(null===e)return-1;let s=0;if(r||!t){let c=!1;for(;s<e.length;){const h=e[s];if(h===n)return s;if(3===h||6===h)c=!0;else{if(1===h||2===h){let _=e[++s];for(;"string"==typeof _;)_=e[++s];continue}if(4===h)break;if(0===h){s+=4;continue}}s+=c?1:2}return-1}return function $y(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Fx(n,e,t=!1){for(let r=0;r<e.length;r++)if(zM(n,e[r],t))return!0;return!1}function Vf(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let s=0;s<n.length;s++)if(n[s]!==r[s])continue e;return!0}}return!1}function fv(n,e){return n?":not("+e.trim()+")":e}function eb(n){let e=n[0],t=1,r=2,s="",c=!1;for(;t<n.length;){let h=n[t];if("string"==typeof h)if(2&r){const _=n[++t];s+="["+h+(_.length>0?'="'+_+'"':"")+"]"}else 8&r?s+="."+h:4&r&&(s+=" "+h);else""!==s&&!Ou(h)&&(e+=fv(c,s),s=""),r=h,c=c||!Ou(r);t++}return""!==s&&(e+=fv(c,s)),e}const gs={};function Vr(n){UM(ls(),Jn(),Qa()+n,Ld())}function UM(n,e,t,r){if(!r)if(3==(3&e[2])){const c=n.preOrderCheckHooks;null!==c&&eg(e,c,t)}else{const c=n.preOrderHooks;null!==c&&Op(e,c,0,t)}yc(t)}function Mh(n,e){return n<<17|e<<2}function Qc(n){return n>>17&32767}function Bx(n){return 2|n}function $d(n){return(131068&n)>>2}function Hx(n,e){return-131069&n|e<<2}function zx(n){return 1|n}function Eh(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r],c=t[r+1];if(-1!==c){const h=n.data[c];Iu(s),h.contentQueries(2,e[c],c)}}}function cm(n,e,t,r,s,c,h,_,S,A){const O=e.blueprint.slice();return O[0]=s,O[2]=140|r,qh(O),O[3]=O[15]=n,O[8]=t,O[10]=h||n&&n[10],O[11]=_||n&&n[11],O[12]=S||n&&n[12]||null,O[9]=A||n&&n[9]||null,O[6]=c,O[16]=2==e.type?n[16]:O,O}function jf(n,e,t,r,s){let c=n.data[e];if(null===c)c=function gv(n,e,t,r,s){const c=yr(),h=Pd(),S=n.data[e]=function vv(n,e,t,r,s,c){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:s,attrs:c,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,h?c:c&&c.parent,t,e,r,s);return null===n.firstChild&&(n.firstChild=S),null!==c&&(h?null==c.child&&null!==S.parent&&(c.child=S):null===c.next&&(c.next=S)),S}(n,e,t,r,s),function Pp(){return Fn.lFrame.inI18n}()&&(c.flags|=64);else if(64&c.type){c.type=t,c.value=r,c.attrs=s;const h=function xf(){const n=Fn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();c.injectorIndex=null===h?-1:h.injectorIndex}return Vl(c,!0),c}function Zf(n,e,t,r){if(0===t)return-1;const s=e.length;for(let c=0;c<t;c++)e.push(r),n.blueprint.push(r),n.data.push(null);return s}function um(n,e,t){Od(e);try{const r=n.viewQuery;null!==r&&ed(1,r,t);const s=n.template;null!==s&&fu(n,e,s,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Eh(n,e),n.staticViewQueries&&ed(2,n.viewQuery,t);const c=n.components;null!==c&&function ub(n,e){for(let t=0;t<e.length;t++)yb(n,e[t])}(e,c)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,pa()}}function Lg(n,e,t,r){const s=e[2];if(256==(256&s))return;Od(e);const c=Ld();try{qh(e),function Zc(n){return Fn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&fu(n,e,t,2,r);const h=3==(3&s);if(!c)if(h){const A=n.preOrderCheckHooks;null!==A&&eg(e,A,null)}else{const A=n.preOrderHooks;null!==A&&Op(e,A,0,null),Yh(e,0)}if(function UD(n){for(let e=Kh(n);null!==e;e=bg(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const s=t[r],c=s[3];0==(1024&s[2])&&kd(c,1),s[2]|=1024}}}(e),function VD(n){for(let e=Kh(n);null!==e;e=bg(e))for(let t=10;t<e.length;t++){const r=e[t],s=r[1];Id(r)&&Lg(s,r,s.template,r[8])}}(e),null!==n.contentQueries&&Eh(n,e),!c)if(h){const A=n.contentCheckHooks;null!==A&&eg(e,A)}else{const A=n.contentHooks;null!==A&&Op(e,A,1),Yh(e,1)}!function Pg(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const s=t[r];if(s<0)yc(~s);else{const c=s,h=t[++r],_=t[++r];ao(h,c),_(2,e[c])}}}finally{yc(-1)}}(n,e);const _=n.components;null!==_&&function qf(n,e){for(let t=0;t<e.length;t++)GD(n,e[t])}(e,_);const S=n.viewQuery;if(null!==S&&ed(2,S,r),!c)if(h){const A=n.viewCheckHooks;null!==A&&eg(e,A)}else{const A=n.viewHooks;null!==A&&Op(e,A,2),Yh(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),c||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,kd(e[3],-1))}finally{pa()}}function Ea(n,e,t,r){const s=e[10],c=!Ld(),h=bf(e);try{c&&!h&&s.begin&&s.begin(),h&&um(n,e,r),Lg(n,e,t,r)}finally{c&&!h&&s.end&&s.end()}}function fu(n,e,t,r,s){const c=Qa(),h=2&r;try{yc(-1),h&&e.length>20&&UM(n,e,20,Ld()),t(r,s)}finally{yc(c)}}function _v(n,e,t){if(Vh(e)){const s=e.directiveEnd;for(let c=e.directiveStart;c<s;c++){const h=n.data[c];h.contentQueries&&h.contentQueries(1,t[c],c)}}}function hm(n,e,t){!_y()||(function db(n,e,t,r){const s=t.directiveStart,c=t.directiveEnd;n.firstCreatePass||mh(t,e),rc(r,e);const h=t.initialInputs;for(let _=s;_<c;_++){const S=n.data[_],A=ea(S);A&&tw(e,t,S);const O=Up(e,n,_,t);rc(O,e),null!==h&&HD(0,_-s,O,S,0,h),A&&(Ca(t.index,e)[8]=O)}}(n,e,t,Js(t,e)),128==(128&t.flags)&&function eu(n,e,t){const r=t.directiveStart,s=t.directiveEnd,h=t.index,_=function Ic(){return Fn.lFrame.currentDirectiveIndex}();try{yc(h);for(let S=r;S<s;S++){const A=n.data[S],O=e[S];to(S),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Hg(A,O)}}finally{yc(-1),to(_)}}(n,e,t))}function Fg(n,e,t=Js){const r=e.localNames;if(null!==r){let s=e.index+1;for(let c=0;c<r.length;c+=2){const h=r[c+1],_=-1===h?t(e,n):n[h];n[s++]=_}}}function th(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Qh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Qh(n,e,t,r,s,c,h,_,S,A){const O=20+r,G=O+s,X=function Yx(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:gs);return t}(O,G),te="function"==typeof A?A():A;return X[1]={type:n,blueprint:X,template:t,queries:null,viewQuery:_,declTNode:e,data:X.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:G,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof c?c():c,pipeRegistry:"function"==typeof h?h():h,firstChild:null,schemas:S,consts:te,incompleteFirstPass:!1}}function Yf(n,e,t,r){const s=sw(e);null===t?s.push(r):(s.push(t),n.firstCreatePass&&ow(n).push(r,s.length-1))}function Ng(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const s=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,s):t[r]=[e,s]}return t}function Zl(n,e,t,r,s,c,h,_){const S=Js(e,t);let O,A=e.inputs;!_&&null!=A&&(O=A[r])?(lw(n,t,O,r,s),Eu(e)&&function Jx(n,e){const t=Ca(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(r=function BD(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),s=null!=h?h(s,e.value||"",r):s,ho(c)?c.setProperty(S,r,s):rg(r)||(S.setProperty?S.setProperty(r,s):S[r]=s))}function Bg(n,e,t,r){let s=!1;if(_y()){const c=function $x(n,e,t){const r=n.directiveRegistry;let s=null;if(r)for(let c=0;c<r.length;c++){const h=r[c];Fx(t,h.selectors,!1)&&(s||(s=[]),ag(mh(t,e),n,h.type),ea(h)?(fb(n,t),s.unshift(h)):s.push(h))}return s}(n,e,t),h=null===r?null:{"":-1};if(null!==c){s=!0,mb(t,n.data.length,c.length);for(let O=0;O<c.length;O++){const G=c[O];G.providersResolver&&G.providersResolver(G)}let _=!1,S=!1,A=Zf(n,e,c.length,null);for(let O=0;O<c.length;O++){const G=c[O];t.mergedAttrs=Bp(t.mergedAttrs,G.hostAttrs),gb(n,t,e,A,G),ew(A,G,h),null!==G.contentQueries&&(t.flags|=8),(null!==G.hostBindings||null!==G.hostAttrs||0!==G.hostVars)&&(t.flags|=128);const X=G.type.prototype;!_&&(X.ngOnChanges||X.ngOnInit||X.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),_=!0),!S&&(X.ngOnChanges||X.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),S=!0),A++}!function ND(n,e){const r=e.directiveEnd,s=n.data,c=e.attrs,h=[];let _=null,S=null;for(let A=e.directiveStart;A<r;A++){const O=s[A],G=O.inputs,X=null===c||am(e)?null:zD(G,c);h.push(X),_=Ng(G,A,_),S=Ng(O.outputs,A,S)}null!==_&&(_.hasOwnProperty("class")&&(e.flags|=16),_.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=h,e.inputs=_,e.outputs=S}(n,t)}h&&function pb(n,e,t){if(e){const r=n.localNames=[];for(let s=0;s<e.length;s+=2){const c=t[e[s+1]];if(null==c)throw new Bi(-301,!1);r.push(e[s],c)}}}(t,r,h)}return t.mergedAttrs=Bp(t.mergedAttrs,t.attrs),s}function Qx(n,e,t,r,s,c){const h=c.hostBindings;if(h){let _=n.hostBindingOpCodes;null===_&&(_=n.hostBindingOpCodes=[]);const S=~e.index;(function hb(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(_)!=S&&_.push(S),_.push(r,s,h)}}function Hg(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function fb(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function ew(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ea(e)&&(t[""]=n)}}function mb(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function gb(n,e,t,r,s){n.data[r]=s;const c=s.factory||(s.factory=Xs(s.type)),h=new zd(c,ea(s),null);n.blueprint[r]=h,t[r]=h,Qx(n,e,0,r,Zf(n,t,s.hostVars,gs),s)}function tw(n,e,t){const r=Js(e,n),s=th(t),c=n[10],h=Xf(n,cm(n,s,null,t.onPush?64:16,r,e,c,c.createRenderer(r,t),null,null));n[e.index]=h}function Th(n,e,t,r,s,c){const h=Js(n,e);!function nw(n,e,t,r,s,c,h){if(null==c)ho(n)?n.removeAttribute(e,s,t):e.removeAttribute(s);else{const _=null==h?or(c):h(c,r||"",s);ho(n)?n.setAttribute(e,s,_,t):t?e.setAttributeNS(t,s,_):e.setAttribute(s,_)}}(e[11],h,c,n.value,t,r,s)}function HD(n,e,t,r,s,c){const h=c[e];if(null!==h){const _=r.setInput;for(let S=0;S<h.length;){const A=h[S++],O=h[S++],G=h[S++];null!==_?r.setInput(t,G,A,O):t[O]=G}}}function zD(n,e){let t=null,r=0;for(;r<e.length;){const s=e[r];if(0!==s)if(5!==s){if("number"==typeof s)break;n.hasOwnProperty(s)&&(null===t&&(t=[]),t.push(s,n[s],e[r+1])),r+=2}else r+=2;else r+=4}return t}function XM(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function GD(n,e){const t=Ca(e,n);if(Id(t)){const r=t[1];80&t[2]?Lg(r,t,r.template,t[8]):t[5]>0&&fm(t)}}function fm(n){for(let r=Kh(n);null!==r;r=bg(r))for(let s=10;s<r.length;s++){const c=r[s];if(1024&c[2]){const h=c[1];Lg(h,c,h.template,c[8])}else c[5]>0&&fm(c)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const s=Ca(t[r],n);Id(s)&&s[5]>0&&fm(s)}}function yb(n,e){const t=Ca(e,n),r=t[1];(function iw(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),um(r,t,t[8])}function Xf(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function bb(n){for(;n;){n[2]|=64;const e=Nf(n);if(hr(n)&&!e)return n;n=e}return null}function zg(n,e,t){const r=e[10];r.begin&&r.begin();try{Lg(n,e,n.template,t)}catch(s){throw Mb(e,s),s}finally{r.end&&r.end()}}function wb(n){!function yv(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],r=_x(t),s=r[1];Ea(s,r,s.template,t)}}(n[8])}function ed(n,e,t){Iu(0),e(n,t)}const rw=(()=>Promise.resolve(null))();function sw(n){return n[7]||(n[7]=[])}function ow(n){return n.cleanup||(n.cleanup=[])}function aw(n,e,t){return(null===n||ea(n))&&(t=function Ad(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function Mb(n,e){const t=n[9],r=t?t.get(Of,null):null;r&&r.handleError(e)}function lw(n,e,t,r,s){for(let c=0;c<t.length;){const h=t[c++],_=t[c++],S=e[h],A=n.data[h];null!==A.setInput?A.setInput(S,s,r,_):S[_]=s}}function Dh(n,e,t){const r=qc(e,n);!function rm(n,e,t){ho(n)?n.setValue(e,t):e.textContent=t}(n[11],r,t)}function xv(n,e,t){let r=t?n.styles:null,s=t?n.classes:null,c=0;if(null!==e)for(let h=0;h<e.length;h++){const _=e[h];"number"==typeof _?c=_:1==c?s=Dr(s,_):2==c&&(r=Dr(r,_+": "+e[++h]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=s:n.classesWithoutHost=s}const Mv=new bi("INJECTOR",-1);class Vg{get(e,t=Kp){if(t===Kp){const r=new Error(`NullInjectorError: No provider for ${En(e)}!`);throw r.name="NullInjectorError",r}return t}}const Cb=new bi("Set Injector scope."),pm={},uw={};let Cv;function Sb(){return void 0===Cv&&(Cv=new Vg),Cv}function Ug(n,e=null,t=null,r){const s=hw(n,e,t,r);return s._resolveInjectorDefTypes(),s}function hw(n,e=null,t=null,r){return new dw(n,t,e||Sb(),r)}class dw{constructor(e,t,r,s=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const c=[];t&&Ru(t,_=>this.processProvider(_,e,t)),Ru([e],_=>this.processInjectorType(_,[],c)),this.records.set(Mv,Gg(void 0,this));const h=this.records.get(Cb);this.scope=null!=h?h.value:null,this.source=s||("object"==typeof e?null:En(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Kp,r=Fr.Default){this.assertNotDestroyed();const s=$p(this),c=lu(void 0);try{if(!(r&Fr.SkipSelf)){let _=this.records.get(e);if(void 0===_){const S=function ZD(n){return"function"==typeof n||"object"==typeof n&&n instanceof bi}(e)&&au(e);_=S&&this.injectableDefInScope(S)?Gg(mm(e),pm):null,this.records.set(e,_)}if(null!=_)return this.hydrate(e,_)}return(r&Fr.Self?Sb():this.parent).get(e,t=r&Fr.Optional&&t===Kp?null:t)}catch(h){if("NullInjectorError"===h.name){if((h[Qp]=h[Qp]||[]).unshift(En(e)),s)throw h;return function ku(n,e,t,r){const s=n[Qp];throw e[j_]&&s.unshift(e[j_]),n.message=function mg(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let s=En(e);if(Array.isArray(e))s=e.map(En).join(" -> ");else if("object"==typeof e){let c=[];for(let h in e)if(e.hasOwnProperty(h)){let _=e[h];c.push(h+":"+("string"==typeof _?JSON.stringify(_):En(_)))}s=`{${c.join(", ")}}`}return`${t}${r?"("+r+")":""}[${s}]: ${n.replace(Ly,"\n  ")}`}("\n"+n.message,s,t,r),n.ngTokenPath=s,n[Qp]=null,n}(h,e,"R3InjectorError",this.source)}throw h}finally{lu(c),$p(s)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,s)=>e.push(En(s))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Bi(205,!1)}processInjectorType(e,t,r){if(!(e=Xn(e)))return!1;let s=sl(e);const c=null==s&&e.ngModule||void 0,h=void 0===c?e:c,_=-1!==r.indexOf(h);if(void 0!==c&&(s=sl(c)),null==s)return!1;if(null!=s.imports&&!_){let O;r.push(h);try{Ru(s.imports,G=>{this.processInjectorType(G,t,r)&&(void 0===O&&(O=[]),O.push(G))})}finally{}if(void 0!==O)for(let G=0;G<O.length;G++){const{ngModule:X,providers:te}=O[G];Ru(te,ue=>this.processProvider(ue,X,te||un))}}this.injectorDefTypes.add(h);const S=Xs(h)||(()=>new h);this.records.set(h,Gg(S,pm));const A=s.providers;if(null!=A&&!_){const O=e;Ru(A,G=>this.processProvider(G,O,A))}return void 0!==c&&void 0!==e.providers}processProvider(e,t,r){let s=gm(e=Xn(e))?e:Xn(e&&e.provide);const c=function KM(n,e,t){return fw(n)?Gg(void 0,n.useValue):Gg(QM(n),pm)}(e);if(gm(e)||!0!==e.multi)this.records.get(s);else{let h=this.records.get(s);h||(h=Gg(void 0,pm,!0),h.factory=()=>Z_(h.multi),this.records.set(s,h)),s=e,h.multi.push(e)}this.records.set(s,c)}hydrate(e,t){return t.value===pm&&(t.value=uw,t.value=t.factory()),"object"==typeof t.value&&t.value&&function jD(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Xn(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function mm(n){const e=au(n),t=null!==e?e.factory:Xs(n);if(null!==t)return t;if(n instanceof bi)throw new Bi(204,!1);if(n instanceof Function)return function Eb(n){const e=n.length;if(e>0)throw Yp(e,"?"),new Bi(204,!1);const t=function Md(n){const e=n&&(n[mc]||n[Hh]);if(e){const t=function Dp(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Bi(204,!1)}function QM(n,e,t){let r;if(gm(n)){const s=Xn(n);return Xs(s)||mm(s)}if(fw(n))r=()=>Xn(n.useValue);else if(function pw(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Z_(n.deps||[]));else if(function $M(n){return!(!n||!n.useExisting)}(n))r=()=>wn(Xn(n.useExisting));else{const s=Xn(n&&(n.useClass||n.provide));if(!function qD(n){return!!n.deps}(n))return Xs(s)||mm(s);r=()=>new s(...Z_(n.deps))}return r}function Gg(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function fw(n){return null!==n&&"object"==typeof n&&Rf in n}function gm(n){return"function"==typeof n}let Ta=(()=>{class n{static create(t,r){var s;if(Array.isArray(t))return Ug({name:""},r,t,"");{const c=null!==(s=t.name)&&void 0!==s?s:"";return Ug({name:c},t.parent,t.providers,c)}}}return n.THROW_IF_NOT_FOUND=Kp,n.NULL=new Vg,n.\u0275prov=Ai({token:n,providedIn:"any",factory:()=>wn(Mv)}),n.__NG_ELEMENT_ID__=-1,n})();function $D(n,e){Zh(_x(n)[1],$s())}function cs(n){let e=function cC(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let s;if(ea(n))s=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Bi(903,"");s=e.\u0275dir}if(s){if(t){r.push(s);const h=n;h.inputs=Ab(n.inputs),h.declaredInputs=Ab(n.declaredInputs),h.outputs=Ab(n.outputs);const _=s.hostBindings;_&&tA(n,_);const S=s.viewQuery,A=s.contentQueries;if(S&&Pc(n,S),A&&uC(n,A),mn(n.inputs,s.inputs),mn(n.declaredInputs,s.declaredInputs),mn(n.outputs,s.outputs),ea(s)&&s.data.animation){const O=n.data;O.animation=(O.animation||[]).concat(s.data.animation)}}const c=s.features;if(c)for(let h=0;h<c.length;h++){const _=c[h];_&&_.ngInherit&&_(n),_===cs&&(t=!1)}}e=Object.getPrototypeOf(e)}!function eA(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const s=n[r];s.hostVars=e+=s.hostVars,s.hostAttrs=Bp(s.hostAttrs,t=Bp(t,s.hostAttrs))}}(r)}function Ab(n){return n===on?{}:n===un?[]:n}function Pc(n,e){const t=n.viewQuery;n.viewQuery=t?(r,s)=>{e(r,s),t(r,s)}:e}function uC(n,e){const t=n.contentQueries;n.contentQueries=t?(r,s,c)=>{e(r,s,c),t(r,s,c)}:e}function tA(n,e){const t=n.hostBindings;n.hostBindings=t?(r,s)=>{e(r,s),t(r,s)}:e}let qg=null;function Qf(){if(!qg){const n=Rt.Symbol;if(n&&n.iterator)qg=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(qg=r)}}}return qg}function vm(n){return!!Rb(n)&&(Array.isArray(n)||!(n instanceof Map)&&Qf()in n)}function Rb(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function tu(n,e,t){return n[e]=t}function Yl(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Da(n,e,t,r){const s=Jn();return Yl(s,Ju(),e)&&(ls(),Th(sa(),s,n,e,t,r)),Da}function ef(n,e,t,r){return Yl(n,Ju(),t)?e+or(t)+r:gs}function bs(n,e,t,r,s,c,h,_){const S=Jn(),A=ls(),O=n+20,G=A.firstCreatePass?function rA(n,e,t,r,s,c,h,_,S){const A=e.consts,O=jf(e,n,4,h||null,uu(A,_));Bg(e,t,O,uu(A,S)),Zh(e,O);const G=O.tViews=Qh(2,O,r,s,c,e.directiveRegistry,e.pipeRegistry,null,e.schemas,A);return null!==e.queries&&(e.queries.template(e,O),G.queries=e.queries.embeddedTView(O)),O}(O,A,S,e,t,r,s,c,h):A.data[O];Vl(G,!1);const X=S[11].createComment("");om(A,S,X,G),rc(X,S),Xf(S,S[O]=XM(X,S,X,G)),Tu(G)&&hm(A,S,G),null!=h&&Fg(S,G,_)}function Xg(n){return function tc(n,e){return n[e]}(function Yu(){return Fn.lFrame.contextLView}(),20+n)}function Ot(n,e=Fr.Default){const t=Jn();return null===t?wn(n,e):Ef($s(),t,Xn(n),e)}function Pv(){throw new Error("invalid")}function is(n,e,t){const r=Jn();return Yl(r,Ju(),e)&&Zl(ls(),sa(),r,n,e,r[11],t,!1),is}function Iw(n,e,t,r,s){const h=s?"class":"style";lw(n,t,e.inputs[h],h,r)}function Kr(n,e,t,r){const s=Jn(),c=ls(),h=20+n,_=s[11],S=s[h]=qy(_,e,function Fp(){return Fn.lFrame.currentNamespace}()),A=c.firstCreatePass?function pA(n,e,t,r,s,c,h){const _=e.consts,A=jf(e,n,2,s,uu(_,c));return Bg(e,t,A,uu(_,h)),null!==A.attrs&&xv(A,A.attrs,!1),null!==A.mergedAttrs&&xv(A,A.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,A),A}(h,c,s,0,e,t,r):c.data[h];Vl(A,!0);const O=A.mergedAttrs;null!==O&&ph(_,S,O);const G=A.classes;null!==G&&Qd(_,S,G);const X=A.styles;return null!==X&&Jy(_,S,X),64!=(64&A.flags)&&om(c,s,S,A),0===function zl(){return Fn.lFrame.elementDepthCount}()&&rc(S,s),function gl(){Fn.lFrame.elementDepthCount++}(),Tu(A)&&(hm(c,s,A),_v(c,A,s)),null!==r&&Fg(s,A),Kr}function us(){let n=$s();Pd()?Au():(n=n.parent,Vl(n,!1));const e=n;!function dh(){Fn.lFrame.elementDepthCount--}();const t=ls();return t.firstCreatePass&&(Zh(t,n),Vh(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function ig(n){return 0!=(16&n.flags)}(e)&&Iw(t,e,Jn(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function by(n){return 0!=(32&n.flags)}(e)&&Iw(t,e,Jn(),e.stylesWithoutHost,!1),us}function sc(n,e,t,r){return Kr(n,e,t,r),us(),sc}function rp(n,e,t){const r=Jn(),s=ls(),c=n+20,h=s.firstCreatePass?function mA(n,e,t,r,s){const c=e.consts,h=uu(c,r),_=jf(e,n,8,"ng-container",h);return null!==h&&xv(_,h,!0),Bg(e,t,_,uu(c,s)),null!==e.queries&&e.queries.elementStart(e,_),_}(c,s,r,e,t):s.data[c];Vl(h,!0);const _=r[c]=r[11].createComment("");return om(s,r,_,h),rc(_,r),Tu(h)&&(hm(s,r,h),_v(s,h,r)),null!=t&&Fg(r,h),rp}function sp(){let n=$s();const e=ls();return Pd()?Au():(n=n.parent,Vl(n,!1)),e.firstCreatePass&&(Zh(e,n),Vh(n)&&e.queries.elementEnd(n)),sp}function op(n,e,t){return rp(n,e,t),sp(),op}function Kg(){return Jn()}function Lv(n){return!!n&&"function"==typeof n.then}const Rw=function EC(n){return!!n&&"function"==typeof n.subscribe};function Fo(n,e,t,r){const s=Jn(),c=ls(),h=$s();return TC(c,s,s[11],h,n,e,!!t,r),Fo}function kw(n,e){const t=$s(),r=Jn(),s=ls();return TC(s,r,aw(Ku(s.data),t,r),t,n,e,!1),kw}function TC(n,e,t,r,s,c,h,_){const S=Tu(r),O=n.firstCreatePass&&ow(n),G=e[8],X=sw(e);let te=!0;if(3&r.type||_){const Ie=Js(r,e),ye=_?_(Ie):Ie,de=X.length,Ge=_?Oe=>_(jo(Oe[r.index])):r.index;if(ho(t)){let Oe=null;if(!_&&S&&(Oe=function gA(n,e,t,r){const s=n.cleanup;if(null!=s)for(let c=0;c<s.length-1;c+=2){const h=s[c];if(h===t&&s[c+1]===r){const _=e[7],S=s[c+2];return _.length>S?_[S]:null}"string"==typeof h&&(c+=2)}return null}(n,e,s,r.index)),null!==Oe)(Oe.__ngLastListenerFn__||Oe).__ngNextListenerFn__=c,Oe.__ngLastListenerFn__=c,te=!1;else{c=Pw(r,e,G,c,!1);const $e=t.listen(ye,s,c);X.push(c,$e),O&&O.push(s,Ge,de,de+1)}}else c=Pw(r,e,G,c,!0),ye.addEventListener(s,c,h),X.push(c),O&&O.push(s,Ge,de,h)}else c=Pw(r,e,G,c,!1);const ue=r.outputs;let ve;if(te&&null!==ue&&(ve=ue[s])){const Ie=ve.length;if(Ie)for(let ye=0;ye<Ie;ye+=2){const ht=e[ve[ye]][ve[ye+1]].subscribe(c),vt=X.length;X.push(c,ht),O&&O.push(s,r.index,vt,-(vt+1))}}}function DC(n,e,t,r){try{return!1!==t(r)}catch(s){return Mb(n,s),!1}}function Pw(n,e,t,r,s){return function c(h){if(h===Function)return r;const _=2&n.flags?Ca(n.index,e):e;0==(32&e[2])&&bb(_);let S=DC(e,0,r,h),A=c.__ngNextListenerFn__;for(;A;)S=DC(e,0,A,h)&&S,A=A.__ngNextListenerFn__;return s&&!1===S&&(h.preventDefault(),h.returnValue=!1),S}}function oa(n=1){return function Nd(n){return(Fn.lFrame.contextLView=function Cf(n,e){for(;n>0;)e=e[15],n--;return e}(n,Fn.lFrame.contextLView))[8]}(n)}function _A(n,e){let t=null;const r=function Qy(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let s=0;s<e.length;s++){const c=e[s];if("*"!==c){if(null===r?Fx(n,c,!0):Vf(r,c))return s}else t=s}return t}function tf(n){const e=Jn()[16][6];if(!e.projection){const r=e.projection=Yp(n?n.length:1,null),s=r.slice();let c=e.child;for(;null!==c;){const h=n?_A(c,n):0;null!==h&&(s[h]?s[h].projectionNext=c:r[h]=c,s[h]=c),c=c.next}}}function ad(n,e=0,t){const r=Jn(),s=ls(),c=jf(s,20+n,16,null,t||null);null===c.projection&&(c.projection=e),Au(),64!=(64&c.flags)&&function wh(n,e,t){Px(e[11],0,e,t,Ex(n,t,e),Mg(t.parent||e[6],t,e))}(s,r,c)}function Q(n,e,t,r,s){const c=n[t+1],h=null===e;let _=r?Qc(c):$d(c),S=!1;for(;0!==_&&(!1===S||h);){const O=n[_+1];ee(n[_],e)&&(S=!0,n[_+1]=r?zx(O):Bx(O)),_=r?Qc(O):$d(O)}S&&(n[t+1]=r?Bx(c):zx(c))}function ee(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Xd(n,e)>=0}const pe={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function he(n){return n.substring(pe.key,pe.keyEnd)}function Ee(n,e){const t=pe.textEnd;return t===e?-1:(e=pe.keyEnd=function rt(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,pe.key=e,t),Se(n,e,t))}function Se(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Gt(n,e){return function an(n,e,t,r){const s=Jn(),c=ls(),h=hu(2);c.firstUpdatePass&&Gi(c,n,h,r),e!==gs&&Yl(s,h,e)&&_o(c,c.data[Qa()],s,s[11],n,s[h+1]=function No(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=En(li(n)))),n}(e,t),r,h)}(n,e,null,!0),Gt}function Wt(n,e){for(let t=function be(n){return function Re(n){pe.key=0,pe.keyEnd=0,pe.value=0,pe.valueEnd=0,pe.textEnd=n.length}(n),Ee(n,Se(n,0,pe.textEnd))}(e);t>=0;t=Ee(e,t))Yc(n,he(e),!0)}function vi(n,e){return e>=n.expandoStartIndex}function Gi(n,e,t,r){const s=n.data;if(null===s[t+1]){const c=s[Qa()],h=vi(n,t);_i(c,r)&&null===e&&!h&&(e=!1),e=function $i(n,e,t,r){const s=Ku(n);let c=r?e.residualClasses:e.residualStyles;if(null===s)0===(r?e.classBindings:e.styleBindings)&&(t=Oo(t=_s(null,n,e,t,r),e.attrs,r),c=null);else{const h=e.directiveStylingLast;if(-1===h||n[h]!==s)if(t=_s(s,n,e,t,r),null===c){let S=function Tr(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==$d(r))return n[Qc(r)]}(n,e,r);void 0!==S&&Array.isArray(S)&&(S=_s(null,n,e,S[1],r),S=Oo(S,e.attrs,r),function br(n,e,t,r){n[Qc(t?e.classBindings:e.styleBindings)]=r}(n,e,r,S))}else c=function no(n,e,t){let r;const s=e.directiveEnd;for(let c=1+e.directiveStylingLast;c<s;c++)r=Oo(r,n[c].hostAttrs,t);return Oo(r,e.attrs,t)}(n,e,r)}return void 0!==c&&(r?e.residualClasses=c:e.residualStyles=c),t}(s,c,e,r),function z(n,e,t,r,s,c){let h=c?e.classBindings:e.styleBindings,_=Qc(h),S=$d(h);n[r]=t;let O,A=!1;if(Array.isArray(t)){const G=t;O=G[1],(null===O||Xd(G,O)>0)&&(A=!0)}else O=t;if(s)if(0!==S){const X=Qc(n[_+1]);n[r+1]=Mh(X,_),0!==X&&(n[X+1]=Hx(n[X+1],r)),n[_+1]=function RD(n,e){return 131071&n|e<<17}(n[_+1],r)}else n[r+1]=Mh(_,0),0!==_&&(n[_+1]=Hx(n[_+1],r)),_=r;else n[r+1]=Mh(S,0),0===_?_=r:n[S+1]=Hx(n[S+1],r),S=r;A&&(n[r+1]=Bx(n[r+1])),Q(n,O,r,!0),Q(n,O,r,!1),function Y(n,e,t,r,s){const c=s?n.residualClasses:n.residualStyles;null!=c&&"string"==typeof e&&Xd(c,e)>=0&&(t[r+1]=zx(t[r+1]))}(e,O,n,r,c),h=Mh(_,S),c?e.classBindings=h:e.styleBindings=h}(s,c,e,t,h,r)}}function _s(n,e,t,r,s){let c=null;const h=t.directiveEnd;let _=t.directiveStylingLast;for(-1===_?_=t.directiveStart:_++;_<h&&(c=e[_],r=Oo(r,c.hostAttrs,s),c!==n);)_++;return null!==n&&(t.directiveStylingLast=_),r}function Oo(n,e,t){const r=t?1:2;let s=-1;if(null!==e)for(let c=0;c<e.length;c++){const h=e[c];"number"==typeof h?s=h:s===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Yc(n,h,!!t||e[++c]))}return void 0===n?null:n}function _o(n,e,t,r,s,c,h,_){if(!(3&e.type))return;const S=n.data,A=S[_+1];ss(function WM(n){return 1==(1&n)}(A)?Mo(S,e,t,s,$d(A),h):void 0)||(ss(c)||function GM(n){return 2==(2&n)}(A)&&(c=Mo(S,null,t,s,_,h)),function Kc(n,e,t,r,s){const c=ho(n);if(e)s?c?n.addClass(t,r):t.classList.add(r):c?n.removeClass(t,r):t.classList.remove(r);else{let h=-1===r.indexOf("-")?void 0:Fu.DashCase;if(null==s)c?n.removeStyle(t,r,h):t.style.removeProperty(r);else{const _="string"==typeof s&&s.endsWith("!important");_&&(s=s.slice(0,-10),h|=Fu.Important),c?n.setStyle(t,r,s,h):t.style.setProperty(r,s,_?"important":"")}}}(r,h,qc(Qa(),t),s,c))}function Mo(n,e,t,r,s,c){const h=null===e;let _;for(;s>0;){const S=n[s],A=Array.isArray(S),O=A?S[1]:S,G=null===O;let X=t[s+1];X===gs&&(X=G?un:void 0);let te=G?dg(X,r):O===r?X:void 0;if(A&&!ss(te)&&(te=dg(S,r)),ss(te)&&(_=te,h))return _;const ue=n[s+1];s=h?Qc(ue):$d(ue)}if(null!==e){let S=c?e.residualClasses:e.residualStyles;null!=S&&(_=dg(S,r))}return _}function ss(n){return void 0!==n}function _i(n,e){return 0!=(n.flags&(e?16:32))}function ni(n,e=""){const t=Jn(),r=ls(),s=n+20,c=r.firstCreatePass?jf(r,s,1,e,null):r.data[s],h=t[s]=function Hf(n,e){return ho(n)?n.createText(e):n.createTextNode(e)}(t[11],e);om(r,t,h,c),Vl(c,!1)}function Ri(n){return kr("",n,""),Ri}function kr(n,e,t){const r=Jn(),s=ef(r,n,e,t);return s!==gs&&Dh(r,Qa(),s),kr}function _r(n,e,t){!function Tn(n,e,t,r){const s=ls(),c=hu(2);s.firstUpdatePass&&Gi(s,null,c,r);const h=Jn();if(t!==gs&&Yl(h,c,t)){const _=s.data[Qa()];if(_i(_,r)&&!vi(s,c)){let S=r?_.classesWithoutHost:_.stylesWithoutHost;null!==S&&(t=Dr(S,t||"")),Iw(s,_,h,t,r)}else!function Aa(n,e,t,r,s,c,h,_){s===gs&&(s=un);let S=0,A=0,O=0<s.length?s[0]:null,G=0<c.length?c[0]:null;for(;null!==O||null!==G;){const X=S<s.length?s[S+1]:void 0,te=A<c.length?c[A+1]:void 0;let ve,ue=null;O===G?(S+=2,A+=2,X!==te&&(ue=G,ve=te)):null===G||null!==O&&O<G?(S+=2,ue=O):(A+=2,ue=G,ve=te),null!==ue&&_o(n,e,t,r,ue,ve,h,_),O=S<s.length?s[S]:null,G=A<c.length?c[A]:null}}(s,_,h,h[11],h[c+1],h[c+1]=function Io(n,e,t){if(null==t||""===t)return un;const r=[],s=li(t);if(Array.isArray(s))for(let c=0;c<s.length;c++)n(r,s[c],!0);else if("object"==typeof s)for(const c in s)s.hasOwnProperty(c)&&n(r,c,s[c]);else"string"==typeof s&&e(r,s);return r}(n,e,t),r,c)}}(Yc,Wt,ef(Jn(),n,e,t),!0)}function zn(n,e,t){const r=Jn();return Yl(r,Ju(),e)&&Zl(ls(),sa(),r,n,e,r[11],t,!0),zn}function Wi(n,e,t){const r=Jn();if(Yl(r,Ju(),e)){const c=ls(),h=sa();Zl(c,h,r,n,e,aw(Ku(c.data),h,r),t,!0)}return Wi}const ap="en-US";let IP=ap;function MA(n,e,t,r,s){if(n=Xn(n),Array.isArray(n))for(let c=0;c<n.length;c++)MA(n[c],e,t,r,s);else{const c=ls(),h=Jn();let _=gm(n)?n:Xn(n.provide),S=QM(n);const A=$s(),O=1048575&A.providerIndexes,G=A.directiveStart,X=A.providerIndexes>>20;if(gm(n)||!n.multi){const te=new zd(S,s,Ot),ue=SA(_,e,s?O:O+X,G);-1===ue?(ag(mh(A,h),c,_),CA(c,n,e.length),e.push(_),A.directiveStart++,A.directiveEnd++,s&&(A.providerIndexes+=1048576),t.push(te),h.push(te)):(t[ue]=te,h[ue]=te)}else{const te=SA(_,e,O+X,G),ue=SA(_,e,O,O+X),ve=te>=0&&t[te],Ie=ue>=0&&t[ue];if(s&&!Ie||!s&&!ve){ag(mh(A,h),c,_);const ye=function XU(n,e,t,r,s){const c=new zd(n,t,Ot);return c.multi=[],c.index=e,c.componentProviders=0,eL(c,s,r&&!t),c}(s?YU:ZU,t.length,s,r,S);!s&&Ie&&(t[ue].providerFactory=ye),CA(c,n,e.length,0),e.push(_),A.directiveStart++,A.directiveEnd++,s&&(A.providerIndexes+=1048576),t.push(ye),h.push(ye)}else CA(c,n,te>-1?te:ue,eL(t[s?ue:te],S,!s&&r));!s&&r&&Ie&&t[ue].componentProviders++}}}function CA(n,e,t,r){const s=gm(e),c=function mw(n){return!!n.useClass}(e);if(s||c){const S=(c?Xn(e.useClass):e).prototype.ngOnDestroy;if(S){const A=n.destroyHooks||(n.destroyHooks=[]);if(!s&&e.multi){const O=A.indexOf(t);-1===O?A.push(t,[r,S]):A[O+1].push(r,S)}else A.push(t,S)}}}function eL(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function SA(n,e,t,r){for(let s=t;s<r;s++)if(e[s]===n)return s;return-1}function ZU(n,e,t,r){return EA(this.multi,[])}function YU(n,e,t,r){const s=this.multi;let c;if(this.providerFactory){const h=this.providerFactory.componentProviders,_=Up(t,t[1],this.providerFactory.index,r);c=_.slice(0,h),EA(s,c);for(let S=h;S<_.length;S++)c.push(_[S])}else c=[],EA(s,c);return c}function EA(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function va(n,e=[]){return t=>{t.providersResolver=(r,s)=>function jU(n,e,t){const r=ls();if(r.firstCreatePass){const s=ea(n);MA(t,r.data,r.blueprint,s,!0),MA(e,r.data,r.blueprint,s,!1)}}(r,s?s(n):n,e)}}class tL{}class QU{resolveComponentFactory(e){throw function KU(n){const e=Error(`No component factory found for ${En(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Ov=(()=>{class n{}return n.NULL=new QU,n})();function $U(){return Fb($s(),Jn())}function Fb(n,e){return new Jo(Js(n,e))}let Jo=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=$U,n})();function e5(n){return n instanceof Jo?n.nativeElement:n}class Ww{}let Mm=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function n5(){const n=Jn(),t=Ca($s().index,n);return function t5(n){return n[11]}(al(t)?t:n)}(),n})(),r5=(()=>{class n{}return n.\u0275prov=Ai({token:n,providedIn:"root",factory:()=>null}),n})();class Nv{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const s5=new Nv("13.2.7"),TA={};function UC(n,e,t,r,s=!1){for(;null!==t;){const c=e[t.index];if(null!==c&&r.push(jo(c)),wo(c))for(let _=10;_<c.length;_++){const S=c[_],A=S[1].firstChild;null!==A&&UC(S[1],S,A,r)}const h=t.type;if(8&h)UC(n,e,t.child,r);else if(32&h){const _=Gy(t,e);let S;for(;S=_();)r.push(S)}else if(16&h){const _=Rx(e,t);if(Array.isArray(_))r.push(..._);else{const S=Nf(e[16]);UC(S[1],S,_,r,!0)}}t=s?t.projectionNext:t.next}return r}class qw{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return UC(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(wo(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(xg(e,r),hg(t,r))}this._attachedToViewContainer=!1}lv(this._lView[1],this._lView)}onDestroy(e){Yf(this._lView[1],this._lView,null,e)}markForCheck(){bb(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){zg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function JM(n,e,t){Xu(!0);try{zg(n,e,t)}finally{Xu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Bi(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Zy(n,e){zf(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Bi(902,"");this._appRef=e}}class o5 extends qw{constructor(e){super(e),this._view=e}detectChanges(){wb(this._view)}checkNoChanges(){!function bv(n){Xu(!0);try{wb(n)}finally{Xu(!1)}}(this._view)}get context(){return null}}class iL extends Ov{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Ui(e);return new DA(t,this.ngModule)}}function rL(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class DA extends tL{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function tb(n){return n.map(eb).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return rL(this.componentDef.inputs)}get outputs(){return rL(this.componentDef.outputs)}create(e,t,r,s){const c=(s=s||this.ngModule)?function l5(n,e){return{get:(t,r,s)=>{const c=n.get(t,TA,s);return c!==TA||r===TA?c:e.get(t,r,s)}}}(e,s.injector):e,h=c.get(Ww,Du),_=c.get(r5,null),S=h.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",O=r?function dm(n,e,t){if(ho(n))return n.selectRootElement(e,t===Ne.ShadowDom);let r="string"==typeof e?n.querySelector(e):e;return r.textContent="",r}(S,r,this.componentDef.encapsulation):qy(h.createRenderer(null,this.componentDef),A,function a5(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(A)),G=this.componentDef.onPush?576:528,X=function lC(n,e){return{components:[],scheduler:n||TD,clean:rw,playerHandler:e||null,flags:0}}(),te=Qh(0,null,null,1,0,null,null,null,null,null),ue=cm(null,te,X,G,null,null,h,S,_,c);let ve,Ie;Od(ue);try{const ye=function Db(n,e,t,r,s,c){const h=t[1];t[20]=n;const S=jf(h,20,2,"#host",null),A=S.mergedAttrs=e.hostAttrs;null!==A&&(xv(S,A,!0),null!==n&&(ph(s,n,A),null!==S.classes&&Qd(s,n,S.classes),null!==S.styles&&Jy(s,n,S.styles)));const O=r.createRenderer(n,e),G=cm(t,th(e),null,e.onPush?64:16,t[20],S,r,O,c||null,null);return h.firstCreatePass&&(ag(mh(S,t),h,e.type),fb(h,S),mb(S,t.length,1)),Xf(t,G),t[20]=G}(O,this.componentDef,ue,h,S);if(O)if(r)ph(S,O,["ng-version",s5.full]);else{const{attrs:de,classes:Ge}=function Ox(n){const e=[],t=[];let r=1,s=2;for(;r<n.length;){let c=n[r];if("string"==typeof c)2===s?""!==c&&e.push(c,n[++r]):8===s&&t.push(c);else{if(!Ou(s))break;s=c}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);de&&ph(S,O,de),Ge&&Ge.length>0&&Qd(S,O,Ge.join(" "))}if(Ie=zr(te,20),void 0!==t){const de=Ie.projection=[];for(let Ge=0;Ge<this.ngContentSelectors.length;Ge++){const Oe=t[Ge];de.push(null!=Oe?Array.from(Oe):null)}}ve=function aC(n,e,t,r,s){const c=t[1],h=function Kx(n,e,t){const r=$s();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),gb(n,r,e,Zf(n,e,1,null),t));const s=Up(e,n,r.directiveStart,r);rc(s,e);const c=Js(r,e);return c&&rc(c,e),s}(c,t,e);if(r.components.push(h),n[8]=h,s&&s.forEach(S=>S(h,e)),e.contentQueries){const S=$s();e.contentQueries(1,h,S.directiveStart)}const _=$s();return!c.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(yc(_.index),Qx(t[1],_,0,_.directiveStart,_.directiveEnd,e),Hg(e,h)),h}(ye,this.componentDef,ue,X,[$D]),um(te,ue,null)}finally{pa()}return new u5(this.componentType,ve,Fb(Ie,ue),ue,Ie)}}class u5 extends class JU{}{constructor(e,t,r,s,c){super(),this.location=r,this._rootLView=s,this._tNode=c,this.instance=t,this.hostView=this.changeDetectorRef=new o5(s),this.componentType=e}get injector(){return new Tf(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class Cm{}class sL{}const Ob=new Map;class lL extends Cm{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new iL(this);const r=Za(e);this._bootstrapComponents=Lu(r.bootstrap),this._r3Injector=hw(e,t,[{provide:Cm,useValue:this},{provide:Ov,useValue:this.componentFactoryResolver}],En(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Ta.THROW_IF_NOT_FOUND,r=Fr.Default){return e===Ta||e===Cm||e===Mv?this:this._r3Injector.get(e,t,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class AA extends sL{constructor(e){super(),this.moduleType=e,null!==Za(e)&&function d5(n){const e=new Set;!function t(r){const s=Za(r,!0),c=s.id;null!==c&&(function oL(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${En(e)} vs ${En(e.name)}`)}(c,Ob.get(c),r),Ob.set(c,r));const h=Lu(s.imports);for(const _ of h)e.has(_)||(e.add(_),t(_))}(n)}(e)}create(e){return new lL(this.moduleType,e)}}function cL(n,e,t,r){return function uL(n,e,t,r,s,c){const h=e+t;return Yl(n,h,s)?tu(n,h+1,c?r.call(c,s):r(s)):jw(n,h+1)}(Jn(),Ul(),n,e,t,r)}function IA(n,e,t,r,s){return function hL(n,e,t,r,s,c,h){const _=e+t;return function $f(n,e,t,r){const s=Yl(n,e,t);return Yl(n,e+1,r)||s}(n,_,s,c)?tu(n,_+2,h?r.call(h,s,c):r(s,c)):jw(n,_+2)}(Jn(),Ul(),n,e,t,r,s)}function jw(n,e){const t=n[e];return t===gs?void 0:t}function RA(n){return e=>{setTimeout(n,void 0,e)}}const Ho=class D5 extends Xt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){var s,c,h;let _=e,S=t||(()=>null),A=r;if(e&&"object"==typeof e){const G=e;_=null===(s=G.next)||void 0===s?void 0:s.bind(G),S=null===(c=G.error)||void 0===c?void 0:c.bind(G),A=null===(h=G.complete)||void 0===h?void 0:h.bind(G)}this.__isAsync&&(S=RA(S),_&&(_=RA(_)),A&&(A=RA(A)));const O=super.subscribe({next:_,error:S,complete:A});return e instanceof p&&e.add(O),O}};function A5(){return this._results[Qf()]()}class Sm{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Qf(),r=Sm.prototype;r[t]||(r[t]=A5)}get changes(){return this._changes||(this._changes=new Ho)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const s=du(e);(this._changesDetected=!function Dy(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let s=n[r],c=e[r];if(t&&(s=t(s),c=t(c)),c!==s)return!1}return!0}(r._results,s,t))&&(r._results=s,r.length=s.length,r.last=s[this.length-1],r.first=s[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let zu=(()=>{class n{}return n.__NG_ELEMENT_ID__=k5,n})();const I5=zu,R5=class extends I5{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e){const t=this._declarationTContainer.tViews,r=cm(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const c=this._declarationLView[19];return null!==c&&(r[19]=c.createEmbeddedView(t)),um(t,r,e),new qw(r)}};function k5(){return GC($s(),Jn())}function GC(n,e){return 4&n.type?new R5(e,n,Fb(n,e)):null}let rh=(()=>{class n{}return n.__NG_ELEMENT_ID__=P5,n})();function P5(){return _L($s(),Jn())}const L5=rh,mL=class extends L5{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Fb(this._hostTNode,this._hostLView)}get injector(){return new Tf(this._hostTNode,this._hostLView)}get parentInjector(){const e=Vp(this._hostTNode,this._hostLView);if(Vd(e)){const t=Gd(e,this._hostLView),r=Ud(e);return new Tf(t[1].data[r+8],t)}return new Tf(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=gL(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){const s=e.createEmbeddedView(t||{});return this.insert(s,r),s}createComponent(e,t,r,s,c){const h=e&&!function jp(n){return"function"==typeof n}(e);let _;if(h)_=t;else{const G=t||{};_=G.index,r=G.injector,s=G.projectableNodes,c=G.ngModuleRef}const S=h?e:new DA(Ui(e)),A=r||this.parentInjector;if(!c&&null==S.ngModule){const X=(h?A:this.parentInjector).get(Cm,null);X&&(c=X)}const O=S.create(A,s,void 0,c);return this.insert(O.hostView,_),O}insert(e,t){const r=e._lView,s=r[1];if(function Rd(n){return wo(n[3])}(r)){const O=this.indexOf(e);if(-1!==O)this.detach(O);else{const G=r[3],X=new mL(G,G[6],G[3]);X.detach(X.indexOf(e))}}const c=this._adjustIndex(t),h=this._lContainer;!function Cx(n,e,t,r){const s=10+r,c=t.length;r>0&&(t[s-1][4]=e),r<c-10?(e[4]=t[s],Zp(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const h=e[17];null!==h&&t!==h&&function FM(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(h,e);const _=e[19];null!==_&&_.insertView(n),e[2]|=128}(s,r,h,c);const _=Xy(c,h),S=r[11],A=uv(S,h[7]);return null!==A&&function ov(n,e,t,r,s,c){r[0]=s,r[6]=e,zf(n,r,t,1,s,c)}(s,h[6],S,r,A,_),e.attachToViewContainerRef(),Zp(kA(h),c,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=gL(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=xg(this._lContainer,t);r&&(hg(kA(this._lContainer),t),lv(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=xg(this._lContainer,t);return r&&null!=hg(kA(this._lContainer),t)?new qw(r):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function gL(n){return n[8]}function kA(n){return n[8]||(n[8]=[])}function _L(n,e){let t;const r=e[n.index];if(wo(r))t=r;else{let s;if(8&n.type)s=jo(r);else{const c=e[11];s=c.createComment("");const h=Js(n,e);sm(c,uv(c,h),s,function ID(n,e){return ho(n)?n.nextSibling(e):e.nextSibling}(c,h),!1)}e[n.index]=t=XM(r,e,s,n),Xf(e,t)}return new mL(t,n,e)}class PA{constructor(e){this.queryList=e,this.matches=null}clone(){return new PA(this.queryList)}setDirty(){this.queryList.setDirty()}}class LA{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,s=[];for(let c=0;c<r;c++){const h=t.getByIndex(c);s.push(this.queries[h.indexInDeclarationView].clone())}return new LA(s)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==wL(e,t).matches&&this.queries[t].setDirty()}}class vL{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class FA{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const s=null!==t?t.length:0,c=this.getByIndex(r).embeddedTView(e,s);c&&(c.indexInDeclarationView=r,null!==t?t.push(c):t=[c])}return null!==t?new FA(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class OA{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new OA(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let s=0;s<r.length;s++){const c=r[s];this.matchTNodeWithReadOption(e,t,N5(t,c)),this.matchTNodeWithReadOption(e,t,lg(t,e,c,!1,!1))}else r===zu?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,lg(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const s=this.metadata.read;if(null!==s)if(s===Jo||s===rh||s===zu&&4&t.type)this.addMatch(t.index,-2);else{const c=lg(t,e,s,!1,!1);null!==c&&this.addMatch(t.index,c)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function N5(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function H5(n,e,t,r){return-1===t?function B5(n,e){return 11&n.type?Fb(n,e):4&n.type?GC(n,e):null}(e,n):-2===t?function z5(n,e,t){return t===Jo?Fb(e,n):t===zu?GC(e,n):t===rh?_L(e,n):void 0}(n,e,r):Up(n,n[1],t,e)}function yL(n,e,t,r){const s=e[19].queries[r];if(null===s.matches){const c=n.data,h=t.matches,_=[];for(let S=0;S<h.length;S+=2){const A=h[S];_.push(A<0?null:H5(e,c[A],h[S+1],t.metadata.read))}s.matches=_}return s.matches}function NA(n,e,t,r){const s=n.queries.getByIndex(t),c=s.matches;if(null!==c){const h=yL(n,e,s,t);for(let _=0;_<c.length;_+=2){const S=c[_];if(S>0)r.push(h[_/2]);else{const A=c[_+1],O=e[-S];for(let G=10;G<O.length;G++){const X=O[G];X[17]===X[3]&&NA(X[1],X,A,r)}if(null!==O[9]){const G=O[9];for(let X=0;X<G.length;X++){const te=G[X];NA(te[1],te,A,r)}}}}}return r}function Va(n){const e=Jn(),t=ls(),r=wf();Iu(r+1);const s=wL(t,r);if(n.dirty&&bf(e)===(2==(2&s.metadata.flags))){if(null===s.matches)n.reset([]);else{const c=s.crossesNgTemplate?NA(t,e,r,[]):yL(t,e,s,r);n.reset(c,e5),n.notifyOnChanges()}return!0}return!1}function cd(n,e,t){const r=ls();r.firstCreatePass&&(xL(r,new vL(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),bL(r,Jn(),e)}function Vu(n,e,t,r){const s=ls();if(s.firstCreatePass){const c=$s();xL(s,new vL(e,t,r),c.index),function U5(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(s,n),2==(2&t)&&(s.staticContentQueries=!0)}bL(s,Jn(),t)}function Ua(){return function V5(n,e){return n[19].queries[e].queryList}(Jn(),wf())}function bL(n,e,t){const r=new Sm(4==(4&t));Yf(n,e,r,r.destroy),null===e[19]&&(e[19]=new LA),e[19].queries.push(new PA(r))}function xL(n,e,t){null===n.queries&&(n.queries=new FA),n.queries.track(new OA(e,t))}function wL(n,e){return n.queries.getByIndex(e)}function ML(n,e){return GC(n,e)}function jC(...n){}const GA=new bi("Application Initializer");let WA=(()=>{class n{constructor(t){this.appInits=t,this.resolve=jC,this.reject=jC,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,s)=>{this.resolve=r,this.reject=s})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let s=0;s<this.appInits.length;s++){const c=this.appInits[s]();if(Lv(c))t.push(c);else if(Rw(c)){const h=new Promise((_,S)=>{c.subscribe({complete:_,error:S})});t.push(h)}}Promise.all(t).then(()=>{r()}).catch(s=>{this.reject(s)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(wn(GA,8))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xw=new bi("AppId",{providedIn:"root",factory:function zL(){return`${qA()}${qA()}${qA()}`}});function qA(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const VL=new bi("Platform Initializer"),Jw=new bi("Platform ID"),UL=new bi("appBootstrapListener");let GL=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})();const Em=new bi("LocaleId",{providedIn:"root",factory:()=>Zo(Em,Fr.Optional|Fr.SkipSelf)||function sG(){return"undefined"!=typeof $localize&&$localize.locale||ap}()});class aG{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let WL=(()=>{class n{compileModuleSync(t){return new AA(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),c=Lu(Za(t).declarations).reduce((h,_)=>{const S=Ui(_);return S&&h.push(new DA(S)),h},[]);return new aG(r,c)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cG=(()=>Promise.resolve(0))();function jA(n){"undefined"==typeof Zone?cG.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class vo{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ho(!1),this.onMicrotaskEmpty=new Ho(!1),this.onStable=new Ho(!1),this.onError=new Ho(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&t,s.shouldCoalesceRunChangeDetection=r,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function uG(){let n=Rt.requestAnimationFrame,e=Rt.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function fG(n){const e=()=>{!function dG(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Rt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,YA(n),n.isCheckStableRunning=!0,ZA(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),YA(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,s,c,h,_)=>{try{return qL(n),t.invokeTask(s,c,h,_)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===c.type||n.shouldCoalesceRunChangeDetection)&&e(),jL(n)}},onInvoke:(t,r,s,c,h,_,S)=>{try{return qL(n),t.invoke(s,c,h,_,S)}finally{n.shouldCoalesceRunChangeDetection&&e(),jL(n)}},onHasTask:(t,r,s,c)=>{t.hasTask(s,c),r===s&&("microTask"==c.change?(n._hasPendingMicrotasks=c.microTask,YA(n),ZA(n)):"macroTask"==c.change&&(n.hasPendingMacrotasks=c.macroTask))},onHandleError:(t,r,s,c)=>(t.handleError(s,c),n.runOutsideAngular(()=>n.onError.emit(c)),!1)})}(s)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(vo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,s){const c=this._inner,h=c.scheduleEventTask("NgZoneEvent: "+s,e,hG,jC,jC);try{return c.runTask(h,t,r)}finally{c.cancelTask(h)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const hG={};function ZA(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function YA(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function qL(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function jL(n){n._nesting--,ZA(n)}class pG{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ho,this.onMicrotaskEmpty=new Ho,this.onStable=new Ho,this.onError=new Ho}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,s){return e.apply(t,r)}}let XA=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vo.assertNotInAngularZone(),jA(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())jA(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,s){let c=-1;r&&r>0&&(c=setTimeout(()=>{this._callbacks=this._callbacks.filter(h=>h.timeoutId!==c),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:c,updateCb:s})}whenStable(t,r,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,r,s){return[]}}return n.\u0275fac=function(t){return new(t||n)(wn(vo))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})(),ZL=(()=>{class n{constructor(){this._applications=new Map,JA.addToWindow(this)}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return JA.findTestabilityInTree(this,t,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})();class mG{addToWindow(e){}findTestabilityInTree(e,t,r){return null}}let nf,JA=new mG;const YL=new bi("AllowMultipleToken");class XL{constructor(e,t){this.name=e,this.token=t}}function JL(n,e,t=[]){const r=`Platform: ${e}`,s=new bi(r);return(c=[])=>{let h=KL();if(!h||h.injector.get(YL,!1))if(n)n(t.concat(c).concat({provide:s,useValue:!0}));else{const _=t.concat(c).concat({provide:s,useValue:!0},{provide:Cb,useValue:"platform"});!function yG(n){if(nf&&!nf.destroyed&&!nf.injector.get(YL,!1))throw new Bi(400,"");nf=n.get(QL);const e=n.get(VL,null);e&&e.forEach(t=>t())}(Ta.create({providers:_,name:r}))}return function bG(n){const e=KL();if(!e)throw new Bi(401,"");return e}()}}function KL(){return nf&&!nf.destroyed?nf:null}let QL=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const _=function xG(n,e){let t;return t="noop"===n?new pG:("zone.js"===n?void 0:n)||new vo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),S=[{provide:vo,useValue:_}];return _.run(()=>{const A=Ta.create({providers:S,parent:this.injector,name:t.moduleType.name}),O=t.create(A),G=O.injector.get(Of,null);if(!G)throw new Bi(402,"");return _.runOutsideAngular(()=>{const X=_.onError.subscribe({next:te=>{G.handleError(te)}});O.onDestroy(()=>{KA(this._modules,O),X.unsubscribe()})}),function wG(n,e,t){try{const r=t();return Lv(r)?r.catch(s=>{throw e.runOutsideAngular(()=>n.handleError(s)),s}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(G,_,()=>{const X=O.injector.get(WA);return X.runInitializers(),X.donePromise.then(()=>(function tU(n){Ql(n,"Expected localeId to be defined"),"string"==typeof n&&(IP=n.toLowerCase().replace(/_/g,"-"))}(O.injector.get(Em,ap)||ap),this._moduleDoBootstrap(O),O))})})}bootstrapModule(t,r=[]){const s=$L({},r);return function _G(n,e,t){const r=new AA(t);return Promise.resolve(r)}(0,0,t).then(c=>this.bootstrapModuleFactory(c,s))}_moduleDoBootstrap(t){const r=t.injector.get(ZC);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(s=>r.bootstrap(s));else{if(!t.instance.ngDoBootstrap)throw new Bi(403,"");t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Bi(404,"");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(wn(Ta))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})();function $L(n,e){return Array.isArray(e)?e.reduce($L,n):Object.assign(Object.assign({},n),e)}let ZC=(()=>{class n{constructor(t,r,s,c,h){this._zone=t,this._injector=r,this._exceptionHandler=s,this._componentFactoryResolver=c,this._initStatus=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new _n(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),S=new _n(A=>{let O;this._zone.runOutsideAngular(()=>{O=this._zone.onStable.subscribe(()=>{vo.assertNotInAngularZone(),jA(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const G=this._zone.onUnstable.subscribe(()=>{vo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{O.unsubscribe(),G.unsubscribe()}});this.isStable=Eo(_,S.pipe(ka()))}bootstrap(t,r){if(!this._initStatus.done)throw new Bi(405,"");let s;s=t instanceof tL?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(s.componentType);const c=function vG(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Cm),_=s.create(Ta.NULL,[],r||s.selector,c),S=_.location.nativeElement,A=_.injector.get(XA,null),O=A&&_.injector.get(ZL);return A&&O&&O.registerApplication(S,A),_.onDestroy(()=>{this.detachView(_.hostView),KA(this.components,_),O&&O.unregisterApplication(S)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new Bi(101,"");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;KA(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(UL,[]).concat(this._bootstrapListeners).forEach(s=>s(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(wn(vo),wn(Ta),wn(Of),wn(Ov),wn(WA))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function KA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let tF=!0,Ah=(()=>{class n{}return n.__NG_ELEMENT_ID__=SG,n})();function SG(n){return function EG(n,e,t){if(Eu(n)&&!t){const r=Ca(n.index,e);return new qw(r,r)}return 47&n.type?new qw(e[16],e):null}($s(),Jn(),16==(16&n))}class oF{constructor(){}supports(e){return vm(e)}create(e){return new kG(e)}}const RG=(n,e)=>e;class kG{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||RG}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,s=0,c=null;for(;t||r;){const h=!r||t&&t.currentIndex<lF(r,s,c)?t:r,_=lF(h,s,c),S=h.currentIndex;if(h===r)s--,r=r._nextRemoved;else if(t=t._next,null==h.previousIndex)s++;else{c||(c=[]);const A=_-s,O=S-s;if(A!=O){for(let X=0;X<A;X++){const te=X<c.length?c[X]:c[X]=0,ue=te+X;O<=ue&&ue<A&&(c[X]=te+1)}c[h.previousIndex]=O-A}}_!==S&&e(h,_,S)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!vm(e))throw new Bi(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let s,c,h,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let _=0;_<this.length;_++)c=e[_],h=this._trackByFn(_,c),null!==t&&Object.is(t.trackById,h)?(r&&(t=this._verifyReinsertion(t,c,h,_)),Object.is(t.item,c)||this._addIdentityChange(t,c)):(t=this._mismatch(t,c,h,_),r=!0),t=t._next}else s=0,function iA(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Qf()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,_=>{h=this._trackByFn(s,_),null!==t&&Object.is(t.trackById,h)?(r&&(t=this._verifyReinsertion(t,_,h,s)),Object.is(t.item,_)||this._addIdentityChange(t,_)):(t=this._mismatch(t,_,h,s),r=!0),t=t._next,s++}),this.length=s;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,s){let c;return null===e?c=this._itTail:(c=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,c,s)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,s))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,c,s)):e=this._addAfter(new PG(t,r),c,s),e}_verifyReinsertion(e,t,r,s){let c=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==c?e=this._reinsertAfter(c,e._prev,s):e.currentIndex!=s&&(e.currentIndex=s,this._addToMoves(e,s)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const s=e._prevRemoved,c=e._nextRemoved;return null===s?this._removalsHead=c:s._nextRemoved=c,null===c?this._removalsTail=s:c._prevRemoved=s,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const s=null===t?this._itHead:t._next;return e._next=s,e._prev=t,null===s?this._itTail=e:s._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new aF),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new aF),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class PG{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class LG{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class aF{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new LG,this.map.set(t,r)),r.add(e)}get(e,t){const s=this.map.get(e);return s?s.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lF(n,e,t){const r=n.previousIndex;if(null===r)return r;let s=0;return t&&r<t.length&&(s=t[r]),r+e+s}class cF{constructor(){}supports(e){return e instanceof Map||Rb(e)}create(){return new FG}}class FG{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Rb(e)))throw new Bi(900,"")}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,s)=>{if(t&&t.key===s)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const c=this._getOrCreateRecordForKey(s,r);t=this._insertBeforeOrAppend(t,c)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const s=this._records.get(e);this._maybeAddToChanges(s,t);const c=s._prev,h=s._next;return c&&(c._next=h),h&&(h._prev=c),s._next=null,s._prev=null,s}const r=new OG(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class OG{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function uF(){return new JC([new oF])}let JC=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const s=r.factories.slice();t=t.concat(s)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||uF()),deps:[[n,new Jh,new Xc]]}}find(t){const r=this.factories.find(s=>s.supports(t));if(null!=r)return r;throw new Bi(901,"")}}return n.\u0275prov=Ai({token:n,providedIn:"root",factory:uF}),n})();function hF(){return new Kw([new cF])}let Kw=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const s=r.factories.slice();t=t.concat(s)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||hF()),deps:[[n,new Jh,new Xc]]}}find(t){const r=this.factories.find(c=>c.supports(t));if(r)return r;throw new Bi(901,"")}}return n.\u0275prov=Ai({token:n,providedIn:"root",factory:hF}),n})();const HG=JL(null,"core",[{provide:Jw,useValue:"unknown"},{provide:QL,deps:[Ta]},{provide:ZL,deps:[]},{provide:GL,deps:[]}]);let zG=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(wn(ZC))},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({}),n})(),KC=null;function cp(){return KC}const js=new bi("DocumentToken");let Hv=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ai({token:n,factory:function(){return function WG(){return wn(dF)}()},providedIn:"platform"}),n})();const qG=new bi("Location Initialized");let dF=(()=>{class n extends Hv{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return cp().getBaseHref(this._doc)}onPopState(t){const r=cp().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=cp().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){fF()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){fF()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(wn(js))},n.\u0275prov=Ai({token:n,factory:function(){return function jG(){return new dF(wn(js))}()},providedIn:"platform"}),n})();function fF(){return!!window.history.pushState}function nI(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function pF(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Tm(n){return n&&"?"!==n[0]?"?"+n:n}let Bb=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ai({token:n,factory:function(){return function ZG(n){const e=wn(js).location;return new mF(wn(Hv),e&&e.origin||"")}()},providedIn:"root"}),n})();const iI=new bi("appBaseHref");let mF=(()=>{class n extends Bb{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return nI(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Tm(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,c){const h=this.prepareExternalUrl(s+Tm(c));this._platformLocation.pushState(t,r,h)}replaceState(t,r,s,c){const h=this.prepareExternalUrl(s+Tm(c));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(wn(Hv),wn(iI,8))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})(),YG=(()=>{class n extends Bb{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=nI(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,c){let h=this.prepareExternalUrl(s+Tm(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,s,c){let h=this.prepareExternalUrl(s+Tm(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(wn(Hv),wn(iI,8))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})(),Qw=(()=>{class n{constructor(t,r){this._subject=new Ho,this._urlChangeListeners=[],this._platformStrategy=t;const s=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=pF(gF(s)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Tm(r))}normalize(t){return n.stripTrailingSlash(function JG(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,gF(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._platformStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Tm(r)),s)}replaceState(t,r="",s=null){this._platformStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Tm(r)),s)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformStrategy).historyGo)||void 0===s||s.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=Tm,n.joinWithSlash=nI,n.stripTrailingSlash=pF,n.\u0275fac=function(t){return new(t||n)(wn(Bb),wn(Hv))},n.\u0275prov=Ai({token:n,factory:function(){return function XG(){return new Qw(wn(Bb),wn(Hv))}()},providedIn:"root"}),n})();function gF(n){return n.replace(/\/index.html$/,"")}function SF(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,c]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(c)}return null}let EF=(()=>{class n{constructor(t,r,s,c){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=s,this._renderer=c,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(vm(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${En(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return n.\u0275fac=function(t){return new(t||n)(Ot(JC),Ot(Kw),Ot(Jo),Ot(Mm))},n.\u0275dir=mi({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class LW{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let fI=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,c,h)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new LW(s.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===c?void 0:c);else if(null!==c){const _=r.get(c);r.move(_,h),TF(_,s)}});for(let s=0,c=r.length;s<c;s++){const _=r.get(s).context;_.index=s,_.count=c,_.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{TF(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(Ot(rh),Ot(zu),Ot(JC))},n.\u0275dir=mi({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function TF(n,e){n.context.$implicit=e.item}let t1=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new FW,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){DF("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){DF("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(Ot(rh),Ot(zu))},n.\u0275dir=mi({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class FW{constructor(){this.$implicit=null,this.ngIf=null}}function DF(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${En(e)}'.`)}class pI{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let n1=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=mi({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),mI=(()=>{class n{constructor(t,r,s){this.ngSwitch=s,s._addCase(),this._view=new pI(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(Ot(rh),Ot(zu),Ot(n1,9))},n.\u0275dir=mi({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),AF=(()=>{class n{constructor(t,r,s){s._addDefault(new pI(t,r))}}return n.\u0275fac=function(t){return new(t||n)(Ot(rh),Ot(zu),Ot(n1,9))},n.\u0275dir=mi({type:n,selectors:[["","ngSwitchDefault",""]]}),n})(),gI=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(t.ngTemplateOutlet){const r=this._viewContainerRef;this._viewRef&&r.remove(r.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?r.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(Ot(rh))},n.\u0275dir=mi({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[xi]}),n})(),aS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({}),n})();const kF="browser";let c6=(()=>{class n{}return n.\u0275prov=Ai({token:n,providedIn:"root",factory:()=>new u6(wn(js),window)}),n})();class u6{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function h6(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const c=s.shadowRoot;if(c){const h=c.getElementById(e)||c.querySelector(`[name="${e}"]`);if(h)return h}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(r-c[0],s-c[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=PF(this.window.history)||PF(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function PF(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class LF{}class yI extends class d6 extends class GG{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function UG(n){KC||(KC=n)}(new yI)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function f6(){return r1=r1||document.querySelector("base"),r1?r1.getAttribute("href"):null}();return null==t?null:function p6(n){lS=lS||document.createElement("a"),lS.setAttribute("href",n);const e=lS.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){r1=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return SF(document.cookie,e)}}let lS,r1=null;const FF=new bi("TRANSITION_ID"),g6=[{provide:GA,useFactory:function m6(n,e,t){return()=>{t.get(WA).donePromise.then(()=>{const r=cp(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<s.length;c++)r.remove(s[c])})}},deps:[FF,js,Ta],multi:!0}];class bI{static init(){!function gG(n){JA=n}(new bI)}addToWindow(e){Rt.getAngularTestability=(r,s=!0)=>{const c=e.findTestabilityInTree(r,s);if(null==c)throw new Error("Could not find testability for element.");return c},Rt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Rt.getAllAngularRootElements=()=>e.getAllRootElements(),Rt.frameworkStabilizers||(Rt.frameworkStabilizers=[]),Rt.frameworkStabilizers.push(r=>{const s=Rt.getAllAngularTestabilities();let c=s.length,h=!1;const _=function(S){h=h||S,c--,0==c&&r(h)};s.forEach(function(S){S.whenStable(_)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const s=e.getTestability(t);return null!=s?s:r?cp().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let _6=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})();const cS=new bi("EventManagerPlugins");let uS=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let c=0;c<s.length;c++){const h=s[c];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(wn(cS),wn(vo))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})();class OF{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=cp().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let NF=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})(),s1=(()=>{class n extends NF{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(c=>{const h=this._doc.createElement("style");h.textContent=c,s.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(BF),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(BF))}}return n.\u0275fac=function(t){return new(t||n)(wn(js))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})();function BF(n){cp().remove(n)}const xI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},wI=/%COMP%/g;function hS(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?hS(n,s,t):(s=s.replace(wI,n),t.push(s))}return t}function VF(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let dS=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new MI(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Ne.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new M6(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case Ne.ShadowDom:return new C6(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=hS(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(wn(uS),wn(s1),wn(Xw))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})();class MI{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(xI[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const c=xI[s];c?e.setAttributeNS(c,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=xI[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(Fu.DashCase|Fu.Important)?e.style.setProperty(t,r,s&Fu.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Fu.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,VF(r)):this.eventManager.addEventListener(e,t,VF(r))}}class M6 extends MI{constructor(e,t,r,s){super(e),this.component=r;const c=hS(s+"-"+r.id,r.styles,[]);t.addStyles(c),this.contentAttr=function b6(n){return"_ngcontent-%COMP%".replace(wI,n)}(s+"-"+r.id),this.hostAttr=function x6(n){return"_nghost-%COMP%".replace(wI,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class C6 extends MI{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=hS(s.id,s.styles,[]);for(let h=0;h<c.length;h++){const _=document.createElement("style");_.textContent=c[h],this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let S6=(()=>{class n extends OF{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(wn(js))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})();const GF=["alt","control","meta","shift"],T6={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},WF={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},D6={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let A6=(()=>{class n extends OF{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const c=n.parseEventName(r),h=n.eventCallback(c.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>cp().onAndCancel(t,c.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const c=n._normalizeKey(r.pop());let h="";if(GF.forEach(S=>{const A=r.indexOf(S);A>-1&&(r.splice(A,1),h+=S+".")}),h+=c,0!=r.length||0===c.length)return null;const _={};return _.domEventName=s,_.fullKey=h,_}static getEventFullKey(t){let r="",s=function I6(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&WF.hasOwnProperty(e)&&(e=WF[e]))}return T6[e]||e}(t);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),GF.forEach(c=>{c!=s&&D6[c](t)&&(r+=c+".")}),r+=s,r}static eventCallback(t,r,s){return c=>{n.getEventFullKey(c)===t&&s.runGuarded(()=>r(c))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(wn(js))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})();const L6=JL(HG,"browser",[{provide:Jw,useValue:kF},{provide:VL,useValue:function R6(){yI.makeCurrent(),bI.init()},multi:!0},{provide:js,useFactory:function P6(){return function Qm(n){Ma=n}(document),document},deps:[]}]),F6=[{provide:Cb,useValue:"root"},{provide:Of,useFactory:function k6(){return new Of},deps:[]},{provide:cS,useClass:S6,multi:!0,deps:[js,vo,Jw]},{provide:cS,useClass:A6,multi:!0,deps:[js]},{provide:dS,useClass:dS,deps:[uS,s1,Xw]},{provide:Ww,useExisting:dS},{provide:NF,useExisting:s1},{provide:s1,useClass:s1,deps:[js]},{provide:XA,useClass:XA,deps:[vo]},{provide:uS,useClass:uS,deps:[cS,vo]},{provide:LF,useClass:_6,deps:[]}];let qF=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:Xw,useValue:t.appId},{provide:FF,useExisting:Xw},g6]}}}return n.\u0275fac=function(t){return new(t||n)(wn(n,12))},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({providers:F6,imports:[aS,zG]}),n})();"undefined"!=typeof window&&window;let SI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ai({token:n,factory:function(t){let r=null;return r=t?new(t||n):wn(YF),r},providedIn:"root"}),n})(),YF=(()=>{class n extends SI{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Lo.NONE:return r;case Lo.HTML:return di(r,"HTML")?li(r):px(this._doc,String(r)).toString();case Lo.STYLE:return di(r,"Style")?li(r):r;case Lo.SCRIPT:if(di(r,"Script"))return li(r);throw new Error("unsafe value used in a script context");case Lo.URL:return fi(r),di(r,"URL")?li(r):ga(String(r));case Lo.RESOURCE_URL:if(di(r,"ResourceURL"))return li(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function ji(n){return new Vt(n)}(t)}bypassSecurityTrustStyle(t){return function Ir(n){return new Pt(n)}(t)}bypassSecurityTrustScript(t){return function Cr(n){return new bn(n)}(t)}bypassSecurityTrustUrl(t){return function Rs(n){return new Hn(n)}(t)}bypassSecurityTrustResourceUrl(t){return function Yo(n){return new hi(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(wn(js))},n.\u0275prov=Ai({token:n,factory:function(t){let r=null;return r=t?new t:function q6(n){return new YF(n.get(js))}(wn(Ta)),r},providedIn:"root"}),n})();const{isArray:j6}=Array,{getPrototypeOf:Z6,prototype:Y6,keys:X6}=Object;function XF(n){if(1===n.length){const e=n[0];if(j6(e))return{args:e,keys:null};if(function J6(n){return n&&"object"==typeof n&&Z6(n)===Y6}(e)){const t=X6(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:K6}=Array;function EI(n){return ti(e=>function Q6(n,e){return K6(e)?n(...e):n(e)}(n,e))}function JF(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}function KF(...n){const e=Mr(n),{args:t,keys:r}=XF(n),s=new _n(c=>{const{length:h}=t;if(!h)return void c.complete();const _=new Array(h);let S=h,A=h;for(let O=0;O<h;O++){let G=!1;Qe(t[O]).subscribe(Sn(c,X=>{G||(G=!0,A--),_[O]=X},()=>S--,void 0,()=>{(!S||!G)&&(A||c.next(r?JF(r,_):_),c.complete())}))}});return e?s.pipe(EI(e)):s}let QF=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(Ot(Mm),Ot(Jo))},n.\u0275dir=mi({type:n}),n})(),zv=(()=>{class n extends QF{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Sa(n)))(r||n)}}(),n.\u0275dir=mi({type:n,features:[cs]}),n})();const af=new bi("NgValueAccessor"),e8={provide:af,useExisting:Vi(()=>TI),multi:!0},n8=new bi("CompositionEventMode");let TI=(()=>{class n extends QF{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function t8(){const n=cp()?cp().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(Ot(Mm),Ot(Jo),Ot(n8,8))},n.\u0275dir=mi({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&Fo("input",function(c){return r._handleInput(c.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(c){return r._compositionEnd(c.target.value)})},features:[va([e8]),cs]}),n})();function e_(n){return null==n||0===n.length}function eO(n){return null!=n&&"number"==typeof n.length}const gu=new bi("NgValidators"),t_=new bi("NgAsyncValidators"),i8=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class r8{static min(e){return function tO(n){return e=>{if(e_(e.value)||e_(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function nO(n){return e=>{if(e_(e.value)||e_(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function iO(n){return e_(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function rO(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function sO(n){return e_(n.value)||i8.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function oO(n){return e=>e_(e.value)||!eO(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function aO(n){return e=>eO(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function lO(n){if(!n)return fS;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(e_(r.value))return null;const s=r.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}(e)}static nullValidator(e){return null}static compose(e){return pO(e)}static composeAsync(e){return mO(e)}}function fS(n){return null}function cO(n){return null!=n}function uO(n){const e=Lv(n)?Ws(n):n;return Rw(e),e}function hO(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function dO(n,e){return e.map(t=>t(n))}function fO(n){return n.map(e=>function s8(n){return!n.validate}(e)?e:t=>e.validate(t))}function pO(n){if(!n)return null;const e=n.filter(cO);return 0==e.length?null:function(t){return hO(dO(t,e))}}function DI(n){return null!=n?pO(fO(n)):null}function mO(n){if(!n)return null;const e=n.filter(cO);return 0==e.length?null:function(t){return KF(dO(t,e).map(uO)).pipe(ti(hO))}}function AI(n){return null!=n?mO(fO(n)):null}function gO(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function II(n){return n?Array.isArray(n)?n:[n]:[]}function pS(n,e){return Array.isArray(n)?n.includes(e):n===e}function yO(n,e){const t=II(e);return II(n).forEach(s=>{pS(t,s)||t.push(s)}),t}function bO(n,e){return II(e).filter(t=>!pS(n,t))}class xO{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=DI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=AI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class n_ extends xO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Gu extends xO{get formDirective(){return null}get path(){return null}}let MO=(()=>{class n extends class wO{constructor(e){this._cd=e}is(e){var t,r,s;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(s=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===s?void 0:s[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(Ot(n_,2))},n.\u0275dir=mi({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&Gt("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[cs]}),n})();function o1(n,e){(function PI(n,e){const t=function _O(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(gO(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function vO(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(gO(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();vS(e._rawValidators,s),vS(e._rawAsyncValidators,s)})(n,e),e.valueAccessor.writeValue(n.value),function p8(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&SO(n,e)})}(n,e),function g8(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function m8(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&SO(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function f8(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function vS(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function SO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function OI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const a1="VALID",bS="INVALID",Hb="PENDING",l1="DISABLED";function BI(n){return(xS(n)?n.validators:n)||null}function AO(n){return Array.isArray(n)?DI(n):n||null}function HI(n,e){return(xS(e)?e.asyncValidators:n)||null}function IO(n){return Array.isArray(n)?AI(n):n||null}function xS(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const zI=n=>n instanceof UI,wS=n=>n instanceof MS,RO=n=>n instanceof FO;function kO(n){return zI(n)?n.value:n.getRawValue()}function PO(n,e){const t=wS(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new Bi(1e3,"");if(!r[e])throw new Bi(1001,"")}function LO(n,e){wS(n),n._forEachChild((r,s)=>{if(void 0===e[s])throw new Bi(1002,"")})}class VI{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=AO(this._rawValidators),this._composedAsyncValidatorFn=IO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===a1}get invalid(){return this.status===bS}get pending(){return this.status==Hb}get disabled(){return this.status===l1}get enabled(){return this.status!==l1}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=AO(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=IO(e)}addValidators(e){this.setValidators(yO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(yO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(bO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(bO(e,this._rawAsyncValidators))}hasValidator(e){return pS(this._rawValidators,e)}hasAsyncValidator(e){return pS(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Hb,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=l1,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=a1,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===a1||this.status===Hb)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?l1:a1}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Hb,this._hasOwnPendingAsyncValidator=!0;const t=uO(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function b8(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(s=>{r=wS(r)?r.controls.hasOwnProperty(s)?r.controls[s]:null:RO(r)&&r.at(s)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ho,this.statusChanges=new Ho}_calculateStatus(){return this._allControlsDisabled()?l1:this.errors?bS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hb)?Hb:this._anyControlsHaveStatus(bS)?bS:a1}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){xS(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class UI extends VI{constructor(e=null,t,r){super(BI(t),HI(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),xS(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){OI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){OI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class MS extends VI{constructor(e,t,r){super(BI(t),HI(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){LO(this,e),Object.keys(e).forEach(r=>{PO(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=kO(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,c)=>{r=t(r,s,c)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class FO extends VI{constructor(e,t,r){super(BI(t),HI(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){LO(this,e),e.forEach((r,s)=>{PO(this,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>kO(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const M8={provide:n_,useExisting:Vi(()=>WI)},BO=(()=>Promise.resolve(null))();let WI=(()=>{class n extends n_{constructor(t,r,s,c,h){super(),this._changeDetectorRef=h,this.control=new UI,this._registered=!1,this.update=new Ho,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function FI(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(c=>{c.constructor===TI?t=c:function y8(n){return Object.getPrototypeOf(n.constructor)===zv}(c)?r=c:s=c}),s||r||t||null}(0,c)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function LI(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){o1(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){BO.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=""===r||r&&"false"!==r;BO.then(()=>{var c;s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),null===(c=this._changeDetectorRef)||void 0===c||c.markForCheck()})}_getPath(t){return this._parent?function gS(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(Ot(Gu,9),Ot(gu,10),Ot(t_,10),Ot(af,10),Ot(Ah,8))},n.\u0275dir=mi({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[va([M8]),cs,xi]}),n})(),zO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({}),n})();const qI=new bi("NgModelWithFormControlWarning");let QI,r3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({imports:[[zO]]}),n})(),X8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({imports:[r3]}),n})(),s3=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:qI,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({imports:[r3]}),n})(),K8=(()=>{class n{group(t,r=null){const s=this._reduceControls(t);let _,c=null,h=null;return null!=r&&(function J8(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(c=null!=r.validators?r.validators:null,h=null!=r.asyncValidators?r.asyncValidators:null,_=null!=r.updateOn?r.updateOn:void 0):(c=null!=r.validator?r.validator:null,h=null!=r.asyncValidator?r.asyncValidator:null)),new MS(s,{asyncValidators:h,updateOn:_,validators:c})}control(t,r,s){return new UI(t,r,s)}array(t,r,s){const c=t.map(h=>this._createControl(h));return new FO(c,r,s)}_reduceControls(t){const r={};return Object.keys(t).forEach(s=>{r[s]=this._createControl(t[s])}),r}_createControl(t){return zI(t)||wS(t)||RO(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:s3}),n})();try{QI="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){QI=!1}let u1,Uv,$I,lf=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function l6(n){return n===kF}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!QI)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(wn(Jw))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function i_(n){return function Q8(){if(null==u1&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>u1=!0}))}finally{u1=u1||!1}return u1}()?n:!!n.capture}function $8(){if(null==Uv){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Uv=!1,Uv;if("scrollBehavior"in document.documentElement.style)Uv=!0;else{const n=Element.prototype.scrollTo;Uv=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Uv}function eR(n){if(function eq(){if(null==$I){const n="undefined"!=typeof document?document.head:null;$I=!(!n||!n.createShadowRoot&&!n.attachShadow)}return $I}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function SS(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function cf(n){return n.composedPath?n.composedPath()[0]:n.target}function tR(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}function _u(n){return null!=n&&"false"!=`${n}`}function nR(n,e=0){return function tq(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function a3(n){return Array.isArray(n)?n:[n]}function cc(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Lc(n){return n instanceof Jo?n.nativeElement:n}class dd extends Xt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function $r(...n){return Ws(n,Oi(n))}function ES(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function nu(n,e,t){const r=y(n)||e||t?{next:n,error:e,complete:t}:n;return r?Mn((s,c)=>{var h;null===(h=r.subscribe)||void 0===h||h.call(r);let _=!0;s.subscribe(Sn(c,S=>{var A;null===(A=r.next)||void 0===A||A.call(r,S),c.next(S)},()=>{var S;_=!1,null===(S=r.complete)||void 0===S||S.call(r),c.complete()},S=>{var A;_=!1,null===(A=r.error)||void 0===A||A.call(r,S),c.error(S)},()=>{var S,A;_&&(null===(S=r.unsubscribe)||void 0===S||S.call(r)),null===(A=r.finalize)||void 0===A||A.call(r)}))}):Ze}class mq extends p{constructor(e,t){super()}schedule(e,t=0){return this}}const TS={setInterval(n,e,...t){const{delegate:r}=TS;return(null==r?void 0:r.setInterval)?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=TS;return((null==e?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0};class sR extends mq{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const s=this.id,c=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(c,s,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(c,this.id,t),this}requestAsyncId(e,t,r=0){return TS.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&TS.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let s,r=!1;try{this.work(e)}catch(c){r=!0,s=c||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,g(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const f3={now:()=>(f3.delegate||Date).now(),delegate:void 0};class h1{constructor(e,t=h1.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}h1.now=f3.now;class oR extends h1{constructor(e,t=h1.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const d1=new oR(sR),gq=d1;function Fc(n,e){return Mn((t,r)=>{let s=0;t.subscribe(Sn(r,c=>n.call(e,c,s++)&&r.next(c)))})}function oh(n){return n<=0?()=>Qn:Mn((e,t)=>{let r=0;e.subscribe(Sn(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function p3(n,e=Ze){return n=null!=n?n:yq,Mn((t,r)=>{let s,c=!0;t.subscribe(Sn(r,h=>{const _=e(h);(c||!n(s,_))&&(c=!1,s=_,r.next(h))}))})}function yq(n,e){return n===e}function uf(n){return Mn((e,t)=>{Qe(n).subscribe(Sn(t,()=>t.complete(),V)),!t.closed&&e.subscribe(t)})}class _3 extends class wq{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Xt,this._typeaheadSubscription=p.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Xt,this.change=new Xt,e instanceof Sm&&e.changes.subscribe(t=>{if(this._activeItem){const s=t.toArray().indexOf(this._activeItem);s>-1&&s!==this._activeItemIndex&&(this._activeItemIndex=s)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(nu(t=>this._pressedLetters.push(t)),function _q(n,e=d1){return Mn((t,r)=>{let s=null,c=null,h=null;const _=()=>{if(s){s.unsubscribe(),s=null;const A=c;c=null,r.next(A)}};function S(){const A=h+n,O=e.now();if(O<A)return s=this.schedule(void 0,A-O),void r.add(s);_()}t.subscribe(Sn(r,A=>{c=A,h=e.now(),s||(s=e.schedule(S,n),r.add(s))},()=>{_(),r.complete()},void 0,()=>{c=s=null}))})}(e),Fc(()=>this._pressedLetters.length>0),ti(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let s=1;s<r.length+1;s++){const c=(this._activeItemIndex+s)%r.length,h=r[c];if(!this._skipPredicateFn(h)&&0===h.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(c);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,s=["altKey","ctrlKey","metaKey","shiftKey"].every(c=>!e[c]||this._allowedModifierKeys.indexOf(c)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&s){this.setNextItemActive();break}return;case 38:if(this._vertical&&s){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&s){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&s){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&s){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&s){this.setLastItemActive();break}return;default:return void((s||ES(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e),s=t[r];this._activeItem=null==s?null:s,this._activeItemIndex=r}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const s=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[s]))return void this.setActiveItem(s)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof Sm?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let v3=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Cq(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function Mq(n){try{return n.frameElement}catch(e){return null}}(function kq(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===b3(r)||!this.isVisible(r)))return!1;let s=t.nodeName.toLowerCase(),c=b3(t);return t.hasAttribute("contenteditable")?-1!==c:!("iframe"===s||"object"===s||this._platform.WEBKIT&&this._platform.IOS&&!function Iq(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===s?!!t.hasAttribute("controls")&&-1!==c:"video"===s?-1!==c&&(null!==c||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function Rq(n){return!function Eq(n){return function Dq(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Sq(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function Tq(n){return function Aq(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||y3(n))}(t)&&!this.isDisabled(t)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(wn(lf))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function y3(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function b3(n){if(!y3(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Pq{constructor(e,t,r,s,c=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=s,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,c||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return null==r||r.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const s=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(s)return s}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const s=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(s)return s}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(oh(1)).subscribe(e)}}let Lq=(()=>{class n{constructor(t,r,s){this._checker=t,this._ngZone=r,this._document=s}create(t,r=!1){return new Pq(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(wn(v3),wn(vo),wn(js))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function DS(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function AS(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Fq=new bi("cdk-input-modality-detector-options"),Oq={ignoreKeys:[18,17,224,91,16]},Vb=i_({passive:!0,capture:!0});let Nq=(()=>{class n{constructor(t,r,s,c){this._platform=t,this._mostRecentTarget=null,this._modality=new dd(null),this._lastTouchMs=0,this._onKeydown=h=>{var _,S;(null===(S=null===(_=this._options)||void 0===_?void 0:_.ignoreKeys)||void 0===S?void 0:S.some(A=>A===h.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=cf(h))},this._onMousedown=h=>{Date.now()-this._lastTouchMs<650||(this._modality.next(DS(h)?"keyboard":"mouse"),this._mostRecentTarget=cf(h))},this._onTouchstart=h=>{AS(h)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=cf(h))},this._options=Object.assign(Object.assign({},Oq),c),this.modalityDetected=this._modality.pipe(function vq(n){return Fc((e,t)=>n<=t)}(1)),this.modalityChanged=this.modalityDetected.pipe(p3()),t.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Vb),s.addEventListener("mousedown",this._onMousedown,Vb),s.addEventListener("touchstart",this._onTouchstart,Vb)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Vb),document.removeEventListener("mousedown",this._onMousedown,Vb),document.removeEventListener("touchstart",this._onTouchstart,Vb))}}return n.\u0275fac=function(t){return new(t||n)(wn(lf),wn(vo),wn(js),wn(Fq,8))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Hq=new bi("cdk-focus-monitor-default-options"),IS=i_({passive:!0,capture:!0});let Ub=(()=>{class n{constructor(t,r,s,c,h){this._ngZone=t,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Xt,this._rootNodeFocusAndBlurListener=_=>{const S=cf(_),A="focus"===_.type?this._onFocus:this._onBlur;for(let O=S;O;O=O.parentElement)A.call(this,_,O)},this._document=c,this._detectionMode=(null==h?void 0:h.detectionMode)||0}monitor(t,r=!1){const s=Lc(t);if(!this._platform.isBrowser||1!==s.nodeType)return $r(null);const c=eR(s)||this._getDocument(),h=this._elementInfo.get(s);if(h)return r&&(h.checkChildren=!0),h.subject;const _={checkChildren:r,subject:new Xt,rootNode:c};return this._elementInfo.set(s,_),this._registerGlobalListeners(_),_.subject}stopMonitoring(t){const r=Lc(t),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(t,r,s){const c=Lc(t);c===this._getDocument().activeElement?this._getClosestElementsInfo(c).forEach(([_,S])=>this._originChanged(_,r,S)):(this._setOrigin(r),"function"==typeof c.focus&&c.focus(s))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const s=this._elementInfo.get(r),c=cf(t);!s||!s.checkChildren&&r!==c||this._originChanged(r,this._getFocusOrigin(c),s)}_onBlur(t,r){const s=this._elementInfo.get(r);!s||s.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(s.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,IS),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,IS)}),this._rootNodeFocusListenerCount.set(r,s+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(uf(this._stopInputModalityDetector)).subscribe(c=>{this._setOrigin(c,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,IS),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,IS),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,s){this._setClasses(t,r),this._emitOrigin(s.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((s,c)=>{(c===t||s.checkChildren&&c.contains(t))&&r.push([c,s])}),r}}return n.\u0275fac=function(t){return new(t||n)(wn(vo),wn(lf),wn(Nq),wn(js,8),wn(Hq,8))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const w3="cdk-high-contrast-black-on-white",M3="cdk-high-contrast-white-on-black",aR="cdk-high-contrast-active";let zq=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(t):null,c=(s&&s.backgroundColor||"").replace(/ /g,"");switch(t.remove(),c){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(aR),t.remove(w3),t.remove(M3),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(aR),t.add(w3)):2===r&&(t.add(aR),t.add(M3))}}}return n.\u0275fac=function(t){return new(t||n)(wn(lf),wn(js))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lR(n=0,e,t=gq){let r=-1;return null!=e&&(Si(e)?t=e:r=e),new _n(s=>{let c=function Vq(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;c<0&&(c=0);let h=0;return t.schedule(function(){s.closed||(s.next(h++),0<=r?this.schedule(void 0,r):s.complete())},c)})}const f1={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=f1;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const s=e(c=>{t=void 0,n(c)});return new p(()=>null==t?void 0:t(s))},requestAnimationFrame(...n){const{delegate:e}=f1;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=f1;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0},C3=new class Wq extends oR{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let s;e=e||r.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,s){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw s}}}(class Gq extends sR{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=f1.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var s;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:c}=e;null!=t&&(null===(s=c[c.length-1])||void 0===s?void 0:s.id)!==t&&(f1.cancelAnimationFrame(t),e._scheduled=void 0)}}),qq=["addListener","removeListener"],jq=["addEventListener","removeEventListener"],Zq=["on","off"];function cR(n,e,t,r){if(y(t)&&(r=t,t=void 0),r)return cR(n,e,t).pipe(EI(r));const[s,c]=function Jq(n){return y(n.addEventListener)&&y(n.removeEventListener)}(n)?jq.map(h=>_=>n[h](e,_,t)):function Yq(n){return y(n.addListener)&&y(n.removeListener)}(n)?qq.map(S3(n,e)):function Xq(n){return y(n.on)&&y(n.off)}(n)?Zq.map(S3(n,e)):[];if(!s&&Xi(n))return sn(h=>cR(h,e,t))(Qe(n));if(!s)throw new TypeError("Invalid event target");return new _n(h=>{const _=(...S)=>h.next(1<S.length?S:S[0]);return s(_),()=>c(_)})}function S3(n,e){return t=>r=>n[t](e,r)}let uR,Kq=1;const RS={};function E3(n){return n in RS&&(delete RS[n],!0)}const Qq={setImmediate(n){const e=Kq++;return RS[e]=!0,uR||(uR=Promise.resolve()),uR.then(()=>E3(e)&&n()),e},clearImmediate(n){E3(n)}},{setImmediate:$q,clearImmediate:e9}=Qq,kS={setImmediate(...n){const{delegate:e}=kS;return((null==e?void 0:e.setImmediate)||$q)(...n)},clearImmediate(n){const{delegate:e}=kS;return((null==e?void 0:e.clearImmediate)||e9)(n)},delegate:void 0},hR=new class n9 extends oR{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let s;e=e||r.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,s){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw s}}}(class t9 extends sR{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=kS.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var s;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:c}=e;null!=t&&(null===(s=c[c.length-1])||void 0===s?void 0:s.id)!==t&&(kS.clearImmediate(t),e._scheduled=void 0)}});function T3(n,e=d1){return function i9(n){return Mn((e,t)=>{let r=!1,s=null,c=null,h=!1;const _=()=>{if(null==c||c.unsubscribe(),c=null,r){r=!1;const A=s;s=null,t.next(A)}h&&t.complete()},S=()=>{c=null,h&&t.complete()};e.subscribe(Sn(t,A=>{r=!0,s=A,c||Qe(n(A)).subscribe(c=Sn(t,_,S))},()=>{h=!0,(!r||!c||c.closed)&&t.complete()}))})}(()=>lR(n,e))}const r9=new bi("cdk-dir-doc",{providedIn:"root",factory:function s9(){return Zo(js)}}),o9=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Gb=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new Ho,t){const s=t.documentElement?t.documentElement.dir:null;this.value=function a9(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?o9.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||s||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(wn(r9,8))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({}),n})(),c9=(()=>{class n{constructor(t,r,s){this._ngZone=t,this._platform=r,this._scrolled=new Xt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new _n(r=>{this._globalSubscription||this._addGlobalListener();const s=t>0?this._scrolled.pipe(T3(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):$r()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const s=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Fc(c=>!c||s.indexOf(c)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((s,c)=>{this._scrollableContainsElement(c,t)&&r.push(c)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let s=Lc(r),c=t.getElementRef().nativeElement;do{if(s==c)return!0}while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>cR(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(wn(vo),wn(lf),wn(js,8))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dR=(()=>{class n{constructor(t,r,s){this._platform=t,this._change=new Xt,this._changeListener=c=>{this._change.next(c)},this._document=s,r.runOutsideAngular(()=>{if(t.isBrowser){const c=this._getWindow();c.addEventListener("resize",this._changeListener),c.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+s,right:t.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),s=t.documentElement,c=s.getBoundingClientRect();return{top:-c.top||t.body.scrollTop||r.scrollY||s.scrollTop||0,left:-c.left||t.body.scrollLeft||r.scrollX||s.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(T3(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(wn(lf),wn(vo),wn(js,8))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),PS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({}),n})(),D3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({imports:[[Wb,PS],Wb,PS]}),n})();function fR(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){const s=e[r];s?n.setProperty(r,s,(null==t?void 0:t.has(r))?"important":""):n.removeProperty(r)}return n}function qb(n,e){const t=e?"":"none";fR(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function A3(n,e,t){fR(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function LS(n,e){return e&&"none"!=e?n+" "+e:n}function I3(n){const e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function pR(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}function mR(n){const e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function gR(n,e,t){const{top:r,bottom:s,left:c,right:h}=n;return t>=r&&t<=s&&e>=c&&e<=h}function p1(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function R3(n,e,t,r){const{top:s,right:c,bottom:h,left:_,width:S,height:A}=n,O=S*e,G=A*e;return r>s-G&&r<h+G&&t>_-O&&t<c+O}class k3{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:mR(t)})})}handleScroll(e){const t=cf(e),r=this.positions.get(t);if(!r)return null;const s=r.scrollPosition;let c,h;if(t===this._document){const A=this.getViewportScrollPosition();c=A.top,h=A.left}else c=t.scrollTop,h=t.scrollLeft;const _=s.top-c,S=s.left-h;return this.positions.forEach((A,O)=>{A.clientRect&&t!==O&&t.contains(O)&&p1(A.clientRect,_,S)}),s.top=c,s.left=h,{top:_,left:S}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function P3(n){const e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let s=0;s<t.length;s++)t[s].removeAttribute("id");return"canvas"===r?O3(n,e):("input"===r||"select"===r||"textarea"===r)&&F3(n,e),L3("canvas",n,e,O3),L3("input, textarea, select",n,e,F3),e}function L3(n,e,t,r){const s=e.querySelectorAll(n);if(s.length){const c=t.querySelectorAll(n);for(let h=0;h<s.length;h++)r(s[h],c[h])}}let d9=0;function F3(n,e){"file"!==e.type&&(e.value=n.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${d9++}`)}function O3(n,e){const t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch(r){}}const N3=i_({passive:!0}),FS=i_({passive:!1}),_R=new Set(["position"]);class p9{constructor(e,t,r,s,c,h){this._config=t,this._document=r,this._ngZone=s,this._viewportRuler=c,this._dragDropRegistry=h,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new Xt,this._pointerMoveSubscription=p.EMPTY,this._pointerUpSubscription=p.EMPTY,this._scrollSubscription=p.EMPTY,this._resizeSubscription=p.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new Xt,this.started=new Xt,this.released=new Xt,this.ended=new Xt,this.entered=new Xt,this.exited=new Xt,this.dropped=new Xt,this.moved=this._moveEvents,this._pointerDown=_=>{if(this.beforeStarted.next(),this._handles.length){const S=this._getTargetHandle(_);S&&!this._disabledHandles.has(S)&&!this.disabled&&this._initializeDragSequence(S,_)}else this.disabled||this._initializeDragSequence(this._rootElement,_)},this._pointerMove=_=>{const S=this._getPointerPositionOnPage(_);if(!this._hasStartedDragging){if(Math.abs(S.x-this._pickupPositionOnPage.x)+Math.abs(S.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const te=Date.now()>=this._dragStartTime+this._getDragStartDelay(_),ue=this._dropContainer;if(!te)return void this._endDragSequence(_);(!ue||!ue.isDragging()&&!ue.isReceiving())&&(_.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(_)))}return}_.preventDefault();const A=this._getConstrainedPointerPosition(S);if(this._hasMoved=!0,this._lastKnownPointerPosition=S,this._updatePointerDirectionDelta(A),this._dropContainer)this._updateActiveDropContainer(A,S);else{const O=this._activeTransform;O.x=A.x-this._pickupPositionOnPage.x+this._passiveTransform.x,O.y=A.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(O.x,O.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:A,event:_,distance:this._getDragDistance(A),delta:this._pointerDirectionDelta})})},this._pointerUp=_=>{this._endDragSequence(_)},this._nativeDragStart=_=>{if(this._handles.length){const S=this._getTargetHandle(_);S&&!this._disabledHandles.has(S)&&!this.disabled&&_.preventDefault()}else this.disabled||_.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new k3(r),h.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=_u(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(r=>qb(r,t)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>Lc(r)),this._handles.forEach(r=>qb(r,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=Lc(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,FS),t.addEventListener("touchstart",this._pointerDown,N3),t.addEventListener("dragstart",this._nativeDragStart,FS)}),this._initialTransform=void 0,this._rootElement=t),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Lc(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){var e,t;this._removeRootElementListeners(this._rootElement),this.isDragging()&&(null===(e=this._rootElement)||void 0===e||e.remove()),null===(t=this._anchor)||void 0===t||t.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),qb(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),qb(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){var e,t;null===(e=this._preview)||void 0===e||e.remove(),null===(t=this._previewRef)||void 0===t||t.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){var e,t;null===(e=this._placeholder)||void 0===e||e.remove(),null===(t=this._placeholderRef)||void 0===t||t.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){m1(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const r=this._rootElement,s=r.parentNode,c=this._placeholder=this._createPlaceholderElement(),h=this._anchor=this._anchor||this._document.createComment(""),_=this._getShadowRoot();s.insertBefore(h,r),this._initialTransform=r.style.transform||"",this._preview=this._createPreviewElement(),A3(r,!1,_R),this._document.body.appendChild(s.replaceChild(c,r)),this._getPreviewInsertionPoint(s,_).appendChild(this._preview),this.started.next({source:this}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const r=this.isDragging(),s=m1(t),c=!s&&0!==t.button,h=this._rootElement,_=cf(t),S=!s&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),A=s?AS(t):DS(t);if(_&&_.draggable&&"mousedown"===t.type&&t.preventDefault(),r||c||S||A)return;if(this._handles.length){const X=h.style;this._rootElementTapHighlight=X.webkitTapHighlightColor||"",X.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(X=>this._updateOnScroll(X)),this._boundaryElement&&(this._boundaryRect=mR(this._boundaryElement));const O=this._previewTemplate;this._pickupPositionInElement=O&&O.template&&!O.matchSize?{x:0,y:0}:this._getPointerPositionInElement(e,t);const G=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:G.x,y:G.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){A3(this._rootElement,!0,_R),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,r=t.getItemIndex(this),s=this._getPointerPositionOnPage(e),c=this._getDragDistance(s),h=t._isOverContainer(s.x,s.y);this.ended.next({source:this,distance:c,dropPoint:s}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:h,distance:c,dropPoint:s}),t.drop(this,r,this._initialIndex,this._initialContainer,h,c,s),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:s}){let c=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!c&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(c=this._initialContainer),c&&c!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=c,this._dropContainer.enter(this,e,t,c===this._initialContainer&&c.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:c,currentIndex:c.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,s),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,r=e?e.template:null;let s;if(r&&e){const c=e.matchSize?this._rootElement.getBoundingClientRect():null,h=e.viewContainer.createEmbeddedView(r,e.context);h.detectChanges(),s=H3(h,this._document),this._previewRef=h,e.matchSize?z3(s,c):s.style.transform=OS(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const c=this._rootElement;s=P3(c),z3(s,c.getBoundingClientRect()),this._initialTransform&&(s.style.transform=this._initialTransform)}return fR(s.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},_R),qb(s,!1),s.classList.add("cdk-drag-preview"),s.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(c=>s.classList.add(c)):s.classList.add(t)),s}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function h9(n){const e=getComputedStyle(n),t=pR(e,"transition-property"),r=t.find(_=>"transform"===_||"all"===_);if(!r)return 0;const s=t.indexOf(r),c=pR(e,"transition-duration"),h=pR(e,"transition-delay");return I3(c[s])+I3(h[s])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{const s=h=>{var _;(!h||cf(h)===this._preview&&"transform"===h.propertyName)&&(null===(_=this._preview)||void 0===_||_.removeEventListener("transitionend",s),r(),clearTimeout(c))},c=setTimeout(s,1.5*t);this._preview.addEventListener("transitionend",s)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=H3(this._placeholderRef,this._document)):r=P3(this._rootElement),r.style.pointerEvents="none",r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(e,t){const r=this._rootElement.getBoundingClientRect(),s=e===this._rootElement?null:e,c=s?s.getBoundingClientRect():r,h=m1(t)?t.targetTouches[0]:t,_=this._getViewportScrollPosition();return{x:c.left-r.left+(h.pageX-c.left-_.left),y:c.top-r.top+(h.pageY-c.top-_.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),r=m1(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,s=r.pageX-t.left,c=r.pageY-t.top;if(this._ownerSVGElement){const h=this._ownerSVGElement.getScreenCTM();if(h){const _=this._ownerSVGElement.createSVGPoint();return _.x=s,_.y=c,_.matrixTransform(h.inverse())}}return{x:s,y:c}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:r,y:s}=this.constrainPosition?this.constrainPosition(e,this):e;if("x"===this.lockAxis||"x"===t?s=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(r=this._pickupPositionOnPage.x),this._boundaryRect){const{x:c,y:h}=this._pickupPositionInElement,_=this._boundaryRect,{width:S,height:A}=this._getPreviewRect(),O=_.top+h,G=_.bottom-(A-h);r=B3(r,_.left+c,_.right-(S-c)),s=B3(s,O,G)}return{x:r,y:s}}_updatePointerDirectionDelta(e){const{x:t,y:r}=e,s=this._pointerDirectionDelta,c=this._pointerPositionAtLastDirectionChange,h=Math.abs(t-c.x),_=Math.abs(r-c.y);return h>this._config.pointerDirectionChangeThreshold&&(s.x=t>c.x?1:-1,c.x=t),_>this._config.pointerDirectionChangeThreshold&&(s.y=r>c.y?1:-1,c.y=r),s}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,qb(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,FS),e.removeEventListener("touchstart",this._pointerDown,N3),e.removeEventListener("dragstart",this._nativeDragStart,FS)}_applyRootElementTransform(e,t){const r=OS(e,t),s=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=s.transform&&"none"!=s.transform?s.transform:""),s.transform=LS(r,this._initialTransform)}_applyPreviewTransform(e,t){var r;const s=(null===(r=this._previewTemplate)||void 0===r?void 0:r.template)?void 0:this._initialTransform,c=OS(e,t);this._preview.style.transform=LS(c,s)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const r=this._boundaryElement.getBoundingClientRect(),s=this._rootElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===s.width&&0===s.height)return;const c=r.left-s.left,h=s.right-r.right,_=r.top-s.top,S=s.bottom-r.bottom;r.width>s.width?(c>0&&(e+=c),h>0&&(e-=h)):e=0,r.height>s.height?(_>0&&(t+=_),S>0&&(t-=S)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:m1(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const r=cf(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&p1(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){var e;return(null===(e=this._parentPositions.positions.get(this._document))||void 0===e?void 0:e.scrollPosition)||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=eR(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const r=this._previewContainer||"global";if("parent"===r)return e;if("global"===r){const s=this._document;return t||s.fullscreenElement||s.webkitFullscreenElement||s.mozFullScreenElement||s.msFullscreenElement||s.body}return Lc(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function OS(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function B3(n,e,t){return Math.max(e,Math.min(t,n))}function m1(n){return"t"===n.type[0]}function H3(n,e){const t=n.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const r=e.createElement("div");return t.forEach(s=>r.appendChild(s)),r}function z3(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=OS(e.left,e.top)}function g1(n,e){return Math.max(0,Math.min(e,n))}class g9{constructor(e,t,r,s,c){this._dragDropRegistry=t,this._ngZone=s,this._viewportRuler=c,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new Xt,this.entered=new Xt,this.exited=new Xt,this.dropped=new Xt,this.sorted=new Xt,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=p.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new Xt,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function Uq(n=0,e=d1){return n<0&&(n=0),lR(n,n,e)}(0,C3).pipe(uf(this._stopScrollTimers)).subscribe(()=>{const h=this._scrollNode,_=this.autoScrollStep;1===this._verticalScrollDirection?h.scrollBy(0,-_):2===this._verticalScrollDirection&&h.scrollBy(0,_),1===this._horizontalScrollDirection?h.scrollBy(-_,0):2===this._horizontalScrollDirection&&h.scrollBy(_,0)})},this.element=Lc(e),this._document=r,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new k3(r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,s){let c;this._draggingStarted(),null==s?(c=this.sortingDisabled?this._draggables.indexOf(e):-1,-1===c&&(c=this._getItemIndexFromPointerPosition(e,t,r))):c=s;const h=this._activeDraggables,_=h.indexOf(e),S=e.getPlaceholderElement();let A=h[c];if(A===e&&(A=h[c+1]),!A&&(null==c||-1===c||c<h.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(A=h[0]),_>-1&&h.splice(_,1),A&&!this._dragDropRegistry.isDragging(A)){const O=A.getRootElement();O.parentElement.insertBefore(S,O),h.splice(c,0,e)}else Lc(this.element).appendChild(S),h.push(e);S.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,s,c,h,_){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:s,isPointerOverContainer:c,distance:h,dropPoint:_})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(s=>s.isDragging()).every(s=>-1===e.indexOf(s))?this._reset():this._cacheItems()),this}withDirection(e){return this._direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._orientation=e,this}withScrollableParents(e){const t=Lc(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(r=>r.drag===e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,s){if(this.sortingDisabled||!this._clientRect||!R3(this._clientRect,.05,t,r))return;const c=this._itemPositions,h=this._getItemIndexFromPointerPosition(e,t,r,s);if(-1===h&&c.length>0)return;const _="horizontal"===this._orientation,S=c.findIndex(Ie=>Ie.drag===e),A=c[h],G=A.clientRect,X=S>h?1:-1,te=this._getItemOffsetPx(c[S].clientRect,G,X),ue=this._getSiblingOffsetPx(S,c,X),ve=c.slice();(function m9(n,e,t){const r=g1(e,n.length-1),s=g1(t,n.length-1);if(r===s)return;const c=n[r],h=s<r?-1:1;for(let _=r;_!==s;_+=h)n[_]=n[_+h];n[s]=c})(c,S,h),this.sorted.next({previousIndex:S,currentIndex:h,container:this,item:e}),c.forEach((Ie,ye)=>{if(ve[ye]===Ie)return;const de=Ie.drag===e,Ge=de?te:ue,Oe=de?e.getPlaceholderElement():Ie.drag.getRootElement();Ie.offset+=Ge,_?(Oe.style.transform=LS(`translate3d(${Math.round(Ie.offset)}px, 0, 0)`,Ie.initialTransform),p1(Ie.clientRect,0,Ge)):(Oe.style.transform=LS(`translate3d(0, ${Math.round(Ie.offset)}px, 0)`,Ie.initialTransform),p1(Ie.clientRect,Ge,0))}),this._previousSwap.overlaps=gR(G,t,r),this._previousSwap.drag=A.drag,this._previousSwap.delta=_?s.x:s.y}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,s=0,c=0;if(this._parentPositions.positions.forEach((h,_)=>{_===this._document||!h.clientRect||r||R3(h.clientRect,.05,e,t)&&([s,c]=function _9(n,e,t,r){const s=G3(e,r),c=W3(e,t);let h=0,_=0;if(s){const S=n.scrollTop;1===s?S>0&&(h=1):n.scrollHeight-S>n.clientHeight&&(h=2)}if(c){const S=n.scrollLeft;1===c?S>0&&(_=1):n.scrollWidth-S>n.clientWidth&&(_=2)}return[h,_]}(_,h.clientRect,e,t),(s||c)&&(r=_))}),!s&&!c){const{width:h,height:_}=this._viewportRuler.getViewportSize(),S={width:h,height:_,top:0,right:h,bottom:_,left:0};s=G3(S,t),c=W3(S,e),r=window}r&&(s!==this._verticalScrollDirection||c!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=s,this._horizontalScrollDirection=c,this._scrollNode=r,(s||c)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=Lc(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=Lc(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_cacheItemPositions(){const e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(t=>{const r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:mR(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_reset(){this._isDragging=!1;const e=Lc(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(t=>{var r;const s=t.getRootElement();if(s){const c=null===(r=this._itemPositions.find(h=>h.drag===t))||void 0===r?void 0:r.initialTransform;s.style.transform=c||""}}),this._siblings.forEach(t=>t._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(e,t,r){const s="horizontal"===this._orientation,c=t[e].clientRect,h=t[e+-1*r];let _=c[s?"width":"height"]*r;if(h){const S=s?"left":"top",A=s?"right":"bottom";-1===r?_-=h.clientRect[S]-c[A]:_+=c[S]-h.clientRect[A]}return _}_getItemOffsetPx(e,t,r){const s="horizontal"===this._orientation;let c=s?t.left-e.left:t.top-e.top;return-1===r&&(c+=s?t.width-e.width:t.height-e.height),c}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const r=this._itemPositions,s="horizontal"===this._orientation;if(r[0].drag!==this._activeDraggables[0]){const h=r[r.length-1].clientRect;return s?e>=h.right:t>=h.bottom}{const h=r[0].clientRect;return s?e<=h.left:t<=h.top}}_getItemIndexFromPointerPosition(e,t,r,s){const c="horizontal"===this._orientation,h=this._itemPositions.findIndex(({drag:_,clientRect:S})=>{if(_===e)return!1;if(s){const A=c?s.x:s.y;if(_===this._previousSwap.drag&&this._previousSwap.overlaps&&A===this._previousSwap.delta)return!1}return c?t>=Math.floor(S.left)&&t<Math.floor(S.right):r>=Math.floor(S.top)&&r<Math.floor(S.bottom)});return-1!==h&&this.sortPredicate(h,e,this)?h:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(e,t){return null!=this._clientRect&&gR(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(s=>s._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._clientRect||!gR(this._clientRect,t,r)||!this.enterPredicate(e,this))return!1;const s=this._getShadowRoot().elementFromPoint(t,r);if(!s)return!1;const c=Lc(this.element);return s===c||c.contains(s)}_startReceiving(e,t){const r=this._activeSiblings;!r.has(e)&&t.every(s=>this.enterPredicate(s,this)||this._draggables.indexOf(s)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&(this._itemPositions.forEach(({clientRect:r})=>{p1(r,t.top,t.left)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=eR(Lc(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._activeDraggables.filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function G3(n,e){const{top:t,bottom:r,height:s}=n,c=.05*s;return e>=t-c&&e<=t+c?1:e>=r-c&&e<=r+c?2:0}function W3(n,e){const{left:t,right:r,width:s}=n,c=.05*s;return e>=t-c&&e<=t+c?1:e>=r-c&&e<=r+c?2:0}const NS=i_({passive:!1,capture:!0});let v9=(()=>{class n{constructor(t,r){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=s=>s.isDragging(),this.pointerMove=new Xt,this.pointerUp=new Xt,this.scroll=new Xt,this._preventDefaultWhileDragging=s=>{this._activeDragInstances.length>0&&s.preventDefault()},this._persistentTouchmoveListener=s=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&s.preventDefault(),this.pointerMove.next(s))},this._document=r}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,NS)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,NS)}startDragging(t,r){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const s=r.type.startsWith("touch");this._globalListeners.set(s?"touchend":"mouseup",{handler:c=>this.pointerUp.next(c),options:!0}).set("scroll",{handler:c=>this.scroll.next(c),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:NS}),s||this._globalListeners.set("mousemove",{handler:c=>this.pointerMove.next(c),options:NS}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((c,h)=>{this._document.addEventListener(h,c.handler,c.options)})})}}stopDragging(t){const r=this._activeDragInstances.indexOf(t);r>-1&&(this._activeDragInstances.splice(r,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const r=[this.scroll];return t&&t!==this._document&&r.push(new _n(s=>this._ngZone.runOutsideAngular(()=>{const h=_=>{this._activeDragInstances.length&&s.next(_)};return t.addEventListener("scroll",h,!0),()=>{t.removeEventListener("scroll",h,!0)}}))),Eo(...r)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,r)=>{this._document.removeEventListener(r,t.handler,t.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(t){return new(t||n)(wn(vo),wn(js))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const y9={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let b9=(()=>{class n{constructor(t,r,s,c){this._document=t,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=c}createDrag(t,r=y9){return new p9(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new g9(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(t){return new(t||n)(wn(js),wn(vo),wn(dR),wn(v9))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),x9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({providers:[b9],imports:[PS]}),n})();class q3{}const Am="*";function jb(n,e){return{type:7,name:n,definitions:e,options:{}}}function r_(n,e=null){return{type:4,styles:e,timings:n}}function j3(n,e=null){return{type:3,steps:n,options:e}}function Z3(n,e=null){return{type:2,steps:n,options:e}}function Cc(n){return{type:6,styles:n,offset:null}}function hf(n,e,t){return{type:0,name:n,styles:e,options:t}}function s_(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Y3(n=null){return{type:9,options:n}}function X3(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function J3(n){Promise.resolve(null).then(n)}class _1{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){J3(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class K3{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,s=0;const c=this.players.length;0==c?J3(()=>this._onFinish()):this.players.forEach(h=>{h.onDone(()=>{++t==c&&this._onFinish()}),h.onDestroy(()=>{++r==c&&this._onDestroy()}),h.onStart(()=>{++s==c&&this._onStart()})}),this.totalTime=this.players.reduce((h,_)=>Math.max(h,_.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const s=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(s)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const yo=!1;function Q3(n){return new Bi(3e3,yo)}function nj(){return"undefined"!=typeof window&&void 0!==window.document}function yR(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function o_(n){switch(n.length){case 0:return new _1;case 1:return n[0];default:return new K3(n)}}function $3(n,e,t,r,s={},c={}){const h=[],_=[];let S=-1,A=null;if(r.forEach(O=>{const G=O.offset,X=G==S,te=X&&A||{};Object.keys(O).forEach(ue=>{let ve=ue,Ie=O[ue];if("offset"!==ue)switch(ve=e.normalizePropertyName(ve,h),Ie){case"!":Ie=s[ue];break;case Am:Ie=c[ue];break;default:Ie=e.normalizeStyleValue(ue,ve,Ie,h)}te[ve]=Ie}),X||_.push(te),A=te,S=G}),h.length)throw function q9(n){return new Bi(3502,yo)}();return _}function bR(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&xR(t,"start",n)));break;case"done":n.onDone(()=>r(t&&xR(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&xR(t,"destroy",n)))}}function xR(n,e,t){const r=t.totalTime,c=wR(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),h=n._data;return null!=h&&(c._data=h),c}function wR(n,e,t,r,s="",c=0,h){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:s,totalTime:c,disabled:!!h}}function Ih(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function eN(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let MR=(n,e)=>!1,tN=(n,e,t)=>[],nN=null;function CR(n){const e=n.parentNode||n.host;return e===nN?null:e}(yR()||"undefined"!=typeof Element)&&(nj()?(nN=(()=>document.documentElement)(),MR=(n,e)=>{for(;e;){if(e===n)return!0;e=CR(e)}return!1}):MR=(n,e)=>n.contains(e),tN=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Gv=null,iN=!1;function rN(n){Gv||(Gv=function rj(){return"undefined"!=typeof document?document.body:null}()||{},iN=!!Gv.style&&"WebkitAppearance"in Gv.style);let e=!0;return Gv.style&&!function ij(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Gv.style,!e&&iN&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Gv.style)),e}const sN=MR,oN=tN;let aN=(()=>{class n{validateStyleProperty(t){return rN(t)}matchesElement(t,r){return!1}containsElement(t,r){return sN(t,r)}getParentElement(t){return CR(t)}query(t,r,s){return oN(t,r,s)}computeStyle(t,r,s){return s||""}animate(t,r,s,c,h,_=[],S){return new _1(s,c)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})(),SR=(()=>{class n{}return n.NOOP=new aN,n})();const ER="ng-enter",HS="ng-leave",zS="ng-trigger",VS=".ng-trigger",cN="ng-animating",TR=".ng-animating";function Wv(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:DR(parseFloat(e[1]),e[2])}function DR(n,e){return"s"===e?1e3*n:n}function US(n,e,t){return n.hasOwnProperty("duration")?n:function aj(n,e,t){let s,c=0,h="";if("string"==typeof n){const _=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===_)return e.push(Q3()),{duration:0,delay:0,easing:""};s=DR(parseFloat(_[1]),_[2]);const S=_[3];null!=S&&(c=DR(parseFloat(S),_[4]));const A=_[5];A&&(h=A)}else s=n;if(!t){let _=!1,S=e.length;s<0&&(e.push(function M9(){return new Bi(3100,yo)}()),_=!0),c<0&&(e.push(function C9(){return new Bi(3101,yo)}()),_=!0),_&&e.splice(S,0,Q3())}return{duration:s,delay:c,easing:h}}(n,e,t)}function Zb(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function a_(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Zb(n,t);return t}function hN(n,e,t){return t?e+":"+t+";":""}function dN(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=hN(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=hN(0,uj(t),n.style[t]));n.setAttribute("style",e)}function up(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const s=IR(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[s]),n.style[s]=e[r]}),yR()&&dN(n))}function qv(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=IR(t);n.style[r]=""}),yR()&&dN(n))}function v1(n){return Array.isArray(n)?1==n.length?n[0]:Z3(n):n}const AR=new RegExp("{{\\s*(.+?)\\s*}}","g");function fN(n){let e=[];if("string"==typeof n){let t;for(;t=AR.exec(n);)e.push(t[1]);AR.lastIndex=0}return e}function GS(n,e,t){const r=n.toString(),s=r.replace(AR,(c,h)=>{let _=e[h];return e.hasOwnProperty(h)||(t.push(function E9(n){return new Bi(3003,yo)}()),_=""),_.toString()});return s==r?n:s}function WS(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const cj=/-+([a-z0-9])/g;function IR(n){return n.replace(cj,(...e)=>e[1].toUpperCase())}function uj(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Rh(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function T9(n){return new Bi(3004,yo)}()}}function pN(n,e){return window.getComputedStyle(n)[e]}function gj(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function _j(n,e,t){if(":"==n[0]){const S=function vj(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function V9(n){return new Bi(3016,yo)}()),"* => *"}}(n,t);if("function"==typeof S)return void e.push(S);n=S}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function z9(n){return new Bi(3015,yo)}()),e;const s=r[1],c=r[2],h=r[3];e.push(mN(s,h));"<"==c[0]&&!("*"==s&&"*"==h)&&e.push(mN(h,s))}(r,t,e)):t.push(n),t}const YS=new Set(["true","1"]),XS=new Set(["false","0"]);function mN(n,e){const t=YS.has(n)||XS.has(n),r=YS.has(e)||XS.has(e);return(s,c)=>{let h="*"==n||n==s,_="*"==e||e==c;return!h&&t&&"boolean"==typeof s&&(h=s?YS.has(n):XS.has(n)),!_&&r&&"boolean"==typeof c&&(_=c?YS.has(e):XS.has(e)),h&&_}}const yj=new RegExp("s*:selfs*,?","g");function RR(n,e,t,r){return new bj(n).build(e,t,r)}class bj{constructor(e){this._driver=e}build(e,t,r){const s=new Mj(t);this._resetContextStyleTimingState(s);const c=Rh(this,v1(e),s);return s.unsupportedCSSPropertiesFound.size&&s.unsupportedCSSPropertiesFound.keys(),c}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,s=t.depCount=0;const c=[],h=[];return"@"==e.name.charAt(0)&&t.errors.push(function A9(){return new Bi(3006,yo)}()),e.definitions.forEach(_=>{if(this._resetContextStyleTimingState(t),0==_.type){const S=_,A=S.name;A.toString().split(/\s*,\s*/).forEach(O=>{S.name=O,c.push(this.visitState(S,t))}),S.name=A}else if(1==_.type){const S=this.visitTransition(_,t);r+=S.queryCount,s+=S.depCount,h.push(S)}else t.errors.push(function I9(){return new Bi(3007,yo)}())}),{type:7,name:e.name,states:c,transitions:h,queryCount:r,depCount:s,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(r.containsDynamicStyles){const c=new Set,h=s||{};r.styles.forEach(_=>{if(JS(_)){const S=_;Object.keys(S).forEach(A=>{fN(S[A]).forEach(O=>{h.hasOwnProperty(O)||c.add(O)})})}}),c.size&&(WS(c.values()),t.errors.push(function R9(n,e){return new Bi(3008,yo)}()))}return{type:0,name:e.name,style:r,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Rh(this,v1(e.animation),t);return{type:1,matchers:gj(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:jv(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Rh(this,r,t)),options:jv(e.options)}}visitGroup(e,t){const r=t.currentTime;let s=0;const c=e.steps.map(h=>{t.currentTime=r;const _=Rh(this,h,t);return s=Math.max(s,t.currentTime),_});return t.currentTime=s,{type:3,steps:c,options:jv(e.options)}}visitAnimate(e,t){const r=function Sj(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return kR(US(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(c=>"{"==c.charAt(0)&&"{"==c.charAt(1))){const c=kR(0,0,"");return c.dynamic=!0,c.strValue=r,c}return t=t||US(r,e),kR(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let s,c=e.styles?e.styles:Cc({});if(5==c.type)s=this.visitKeyframes(c,t);else{let h=e.styles,_=!1;if(!h){_=!0;const A={};r.easing&&(A.easing=r.easing),h=Cc(A)}t.currentTime+=r.duration+r.delay;const S=this.visitStyle(h,t);S.isEmptyStep=_,s=S}return t.currentAnimateTimings=null,{type:4,timings:r,style:s,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(h=>{"string"==typeof h?h==Am?r.push(h):t.errors.push(function k9(n){return new Bi(3002,yo)}()):r.push(h)}):r.push(e.styles);let s=!1,c=null;return r.forEach(h=>{if(JS(h)){const _=h,S=_.easing;if(S&&(c=S,delete _.easing),!s)for(let A in _)if(_[A].toString().indexOf("{{")>=0){s=!0;break}}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let s=t.currentTime,c=t.currentTime;r&&c>0&&(c-=r.duration+r.delay),e.styles.forEach(h=>{"string"!=typeof h&&Object.keys(h).forEach(_=>{if(!this._driver.validateStyleProperty(_))return delete h[_],void t.unsupportedCSSPropertiesFound.add(_);const S=t.collectedStyles[t.currentQuerySelector],A=S[_];let O=!0;A&&(c!=s&&c>=A.startTime&&s<=A.endTime&&(t.errors.push(function P9(n,e,t,r,s){return new Bi(3010,yo)}()),O=!1),c=A.startTime),O&&(S[_]={startTime:c,endTime:s}),t.options&&function lj(n,e,t){const r=e.params||{},s=fN(n);s.length&&s.forEach(c=>{r.hasOwnProperty(c)||t.push(function S9(n){return new Bi(3001,yo)}())})}(h[_],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function L9(){return new Bi(3011,yo)}()),r;let c=0;const h=[];let _=!1,S=!1,A=0;const O=e.steps.map(ye=>{const de=this._makeStyleAst(ye,t);let Ge=null!=de.offset?de.offset:function Cj(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(JS(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(JS(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(de.styles),Oe=0;return null!=Ge&&(c++,Oe=de.offset=Ge),S=S||Oe<0||Oe>1,_=_||Oe<A,A=Oe,h.push(Oe),de});S&&t.errors.push(function F9(){return new Bi(3012,yo)}()),_&&t.errors.push(function O9(){return new Bi(3200,yo)}());const G=e.steps.length;let X=0;c>0&&c<G?t.errors.push(function N9(){return new Bi(3202,yo)}()):0==c&&(X=1/(G-1));const te=G-1,ue=t.currentTime,ve=t.currentAnimateTimings,Ie=ve.duration;return O.forEach((ye,de)=>{const Ge=X>0?de==te?1:X*de:h[de],Oe=Ge*Ie;t.currentTime=ue+ve.delay+Oe,ve.duration=Oe,this._validateStyleAst(ye,t),ye.offset=Ge,r.styles.push(ye)}),r}visitReference(e,t){return{type:8,animation:Rh(this,v1(e.animation),t),options:jv(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:jv(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:jv(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;const[c,h]=function xj(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(yj,"")),n=n.replace(/@\*/g,VS).replace(/@\w+/g,t=>VS+"-"+t.substr(1)).replace(/:animating/g,TR),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+c:c,Ih(t.collectedStyles,t.currentQuerySelector,{});const _=Rh(this,v1(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:c,limit:s.limit||0,optional:!!s.optional,includeSelf:h,animation:_,originalSelector:e.selector,options:jv(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function B9(){return new Bi(3013,yo)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:US(e.timings,t.errors,!0);return{type:12,animation:Rh(this,v1(e.animation),t),timings:r,options:null}}}class Mj{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function JS(n){return!Array.isArray(n)&&"object"==typeof n}function jv(n){return n?(n=Zb(n)).params&&(n.params=function wj(n){return n?Zb(n):null}(n.params)):n={},n}function kR(n,e,t){return{duration:n,delay:e,easing:t}}function PR(n,e,t,r,s,c,h=null,_=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:s,delay:c,totalTime:s+c,easing:h,subTimeline:_}}class KS{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Dj=new RegExp(":enter","g"),Ij=new RegExp(":leave","g");function LR(n,e,t,r,s,c={},h={},_,S,A=[]){return(new Rj).buildKeyframes(n,e,t,r,s,c,h,_,S,A)}class Rj{buildKeyframes(e,t,r,s,c,h,_,S,A,O=[]){A=A||new KS;const G=new FR(e,t,A,s,c,O,[]);G.options=S,G.currentTimeline.setStyles([h],null,G.errors,S),Rh(this,r,G);const X=G.timelines.filter(te=>te.containsAnimation());if(Object.keys(_).length){let te;for(let ue=X.length-1;ue>=0;ue--){const ve=X[ue];if(ve.element===t){te=ve;break}}te&&!te.allowOnlyTimelineStyles()&&te.setStyles([_],null,G.errors,S)}return X.length?X.map(te=>te.buildKeyframes()):[PR(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const s=t.createSubContext(e.options),c=t.currentTimeline.currentTime,h=this._visitSubInstructions(r,s,s.options);c!=h&&t.transformIntoNewTimeline(h)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let c=t.currentTimeline.currentTime;const h=null!=r.duration?Wv(r.duration):null,_=null!=r.delay?Wv(r.delay):null;return 0!==h&&e.forEach(S=>{const A=t.appendInstructionToTimeline(S,h,_);c=Math.max(c,A.duration+A.delay)}),c}visitReference(e,t){t.updateOptions(e.options,!0),Rh(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let s=t;const c=e.options;if(c&&(c.params||c.delay)&&(s=t.createSubContext(c),s.transformIntoNewTimeline(),null!=c.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=QS);const h=Wv(c.delay);s.delayNextStep(h)}e.steps.length&&(e.steps.forEach(h=>Rh(this,h,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>r&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let s=t.currentTimeline.currentTime;const c=e.options&&e.options.delay?Wv(e.options.delay):0;e.steps.forEach(h=>{const _=t.createSubContext(e.options);c&&_.delayNextStep(c),Rh(this,h,_),s=Math.max(s,_.currentTimeline.currentTime),r.push(_.currentTimeline)}),r.forEach(h=>t.currentTimeline.mergeTimelineCollectedStyles(h)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return US(t.params?GS(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),s.snapshotCurrentStyles());const c=e.style;5==c.type?this.visitKeyframes(c,t):(t.incrementTime(r.duration),this.visitStyle(c,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,s=t.currentAnimateTimings;!s&&r.getCurrentStyleProperties().length&&r.forwardFrame();const c=s&&s.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(c):r.setStyles(e.styles,c,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,s=t.currentTimeline.duration,c=r.duration,_=t.createSubContext().currentTimeline;_.easing=r.easing,e.styles.forEach(S=>{_.forwardTime((S.offset||0)*c),_.setStyles(S.styles,S.easing,t.errors,t.options),_.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(_),t.transformIntoNewTimeline(s+c),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,s=e.options||{},c=s.delay?Wv(s.delay):0;c&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=QS);let h=r;const _=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=_.length;let S=null;_.forEach((A,O)=>{t.currentQueryIndex=O;const G=t.createSubContext(e.options,A);c&&G.delayNextStep(c),A===t.element&&(S=G.currentTimeline),Rh(this,e.animation,G),G.currentTimeline.applyStylesToKeyframe(),h=Math.max(h,G.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(h),S&&(t.currentTimeline.mergeTimelineCollectedStyles(S),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,s=t.currentTimeline,c=e.timings,h=Math.abs(c.duration),_=h*(t.currentQueryTotal-1);let S=h*t.currentQueryIndex;switch(c.duration<0?"reverse":c.easing){case"reverse":S=_-S;break;case"full":S=r.currentStaggerTime}const O=t.currentTimeline;S&&O.delayNextStep(S);const G=O.currentTime;Rh(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=s.currentTime-G+(s.startTime-r.currentTimeline.startTime)}}const QS={};class FR{constructor(e,t,r,s,c,h,_,S){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=s,this._leaveClassName=c,this.errors=h,this.timelines=_,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=QS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=S||new $S(this._driver,t,0),_.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let s=this.options;null!=r.duration&&(s.duration=Wv(r.duration)),null!=r.delay&&(s.delay=Wv(r.delay));const c=r.params;if(c){let h=s.params;h||(h=this.options.params={}),Object.keys(c).forEach(_=>{(!t||!h.hasOwnProperty(_))&&(h[_]=GS(c[_],h,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(s=>{r[s]=t[s]})}}return e}createSubContext(e=null,t,r){const s=t||this.element,c=new FR(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,r||0));return c.previousNode=this.previousNode,c.currentAnimateTimings=this.currentAnimateTimings,c.options=this._copyOptions(),c.updateOptions(e),c.currentQueryIndex=this.currentQueryIndex,c.currentQueryTotal=this.currentQueryTotal,c.parentContext=this,this.subContextCount++,c}transformIntoNewTimeline(e){return this.previousNode=QS,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const s={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},c=new kj(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(c),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,s,c,h){let _=[];if(s&&_.push(this.element),e.length>0){e=(e=e.replace(Dj,"."+this._enterClassName)).replace(Ij,"."+this._leaveClassName);let A=this._driver.query(this.element,e,1!=r);0!==r&&(A=r<0?A.slice(A.length+r,A.length):A.slice(0,r)),_.push(...A)}return!c&&0==_.length&&h.push(function H9(n){return new Bi(3014,yo)}()),_}}class $S{constructor(e,t,r,s){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=s,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new $S(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Am,this._currentKeyframe[t]=Am}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,s){t&&(this._previousKeyframe.easing=t);const c=s&&s.params||{},h=function Pj(n,e){const t={};let r;return n.forEach(s=>{"*"===s?(r=r||Object.keys(e),r.forEach(c=>{t[c]=Am})):a_(s,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(h).forEach(_=>{const S=GS(h[_],c,r);this._pendingStyles[_]=S,this._localTimelineStyles.hasOwnProperty(_)||(this._backFill[_]=this._globalTimelineStyles.hasOwnProperty(_)?this._globalTimelineStyles[_]:Am),this._updateStyle(_,S)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],s=e._styleSummary[t];(!r||s.time>r.time)&&this._updateStyle(t,s.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((_,S)=>{const A=a_(_,!0);Object.keys(A).forEach(O=>{const G=A[O];"!"==G?e.add(O):G==Am&&t.add(O)}),r||(A.offset=S/this.duration),s.push(A)});const c=e.size?WS(e.values()):[],h=t.size?WS(t.values()):[];if(r){const _=s[0],S=Zb(_);_.offset=0,S.offset=1,s=[_,S]}return PR(this.element,s,c,h,this.duration,this.startTime,this.easing,!1)}}class kj extends $S{constructor(e,t,r,s,c,h,_=!1){super(e,t,h.delay),this.keyframes=r,this.preStyleProps=s,this.postStyleProps=c,this._stretchStartingKeyframe=_,this.timings={duration:h.duration,delay:h.delay,easing:h.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){const c=[],h=r+t,_=t/h,S=a_(e[0],!1);S.offset=0,c.push(S);const A=a_(e[0],!1);A.offset=vN(_),c.push(A);const O=e.length-1;for(let G=1;G<=O;G++){let X=a_(e[G],!1);X.offset=vN((t+X.offset*r)/h),c.push(X)}r=h,t=0,s="",e=c}return PR(this.element,e,this.preStyleProps,this.postStyleProps,r,t,s,!0)}}function vN(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class OR{}class Lj extends OR{normalizePropertyName(e,t){return IR(e)}normalizeStyleValue(e,t,r,s){let c="";const h=r.toString().trim();if(Fj[t]&&0!==r&&"0"!==r)if("number"==typeof r)c="px";else{const _=r.match(/^[+-]?[\d\.]+([a-z]*)$/);_&&0==_[1].length&&s.push(function D9(n,e){return new Bi(3005,yo)}())}return h+c}}const Fj=(()=>function Oj(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function yN(n,e,t,r,s,c,h,_,S,A,O,G,X){return{type:0,element:n,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:c,toState:r,toStyles:h,timelines:_,queriedElements:S,preStyleProps:A,postStyleProps:O,totalTime:G,errors:X}}const NR={};class bN{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,s){return function Nj(n,e,t,r,s){return n.some(c=>c(e,t,r,s))}(this.ast.matchers,e,t,r,s)}buildStyles(e,t,r){const s=this._stateStyles["*"],c=this._stateStyles[e],h=s?s.buildStyles(t,r):{};return c?c.buildStyles(t,r):h}build(e,t,r,s,c,h,_,S,A,O){const G=[],X=this.ast.options&&this.ast.options.params||NR,ue=this.buildStyles(r,_&&_.params||NR,G),ve=S&&S.params||NR,Ie=this.buildStyles(s,ve,G),ye=new Set,de=new Map,Ge=new Map,Oe="void"===s,$e={params:Object.assign(Object.assign({},X),ve)},ht=O?[]:LR(e,t,this.ast.animation,c,h,ue,Ie,$e,A,G);let vt=0;if(ht.forEach(Cn=>{vt=Math.max(Cn.duration+Cn.delay,vt)}),G.length)return yN(t,this._triggerName,r,s,Oe,ue,Ie,[],[],de,Ge,vt,G);ht.forEach(Cn=>{const hn=Cn.element,Xe=Ih(de,hn,{});Cn.preStyleProps.forEach(Zt=>Xe[Zt]=!0);const At=Ih(Ge,hn,{});Cn.postStyleProps.forEach(Zt=>At[Zt]=!0),hn!==t&&ye.add(hn)});const Nt=WS(ye.values());return yN(t,this._triggerName,r,s,Oe,ue,Ie,ht,Nt,de,Ge,vt)}}class Bj{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},s=Zb(this.defaultParams);return Object.keys(e).forEach(c=>{const h=e[c];null!=h&&(s[c]=h)}),this.styles.styles.forEach(c=>{if("string"!=typeof c){const h=c;Object.keys(h).forEach(_=>{let S=h[_];S.length>1&&(S=GS(S,s,t));const A=this.normalizer.normalizePropertyName(_,t);S=this.normalizer.normalizeStyleValue(_,A,S,t),r[A]=S})}}),r}}class zj{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(s=>{this.states[s.name]=new Bj(s.style,s.options&&s.options.params||{},r)}),xN(this.states,"true","1"),xN(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new bN(e,s,this.states))}),this.fallbackTransition=function Vj(n,e,t){return new bN(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(h,_)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,s){return this.transitionFactories.find(h=>h.match(e,t,r,s))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function xN(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const Uj=new KS;class Gj{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],c=RR(this._driver,t,r,[]);if(r.length)throw function j9(n){return new Bi(3503,yo)}();this._animations[e]=c}_buildPlayer(e,t,r){const s=e.element,c=$3(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(s,c,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const s=[],c=this._animations[e];let h;const _=new Map;if(c?(h=LR(this._driver,t,c,ER,HS,{},{},r,Uj,s),h.forEach(O=>{const G=Ih(_,O.element,{});O.postStyleProps.forEach(X=>G[X]=null)})):(s.push(function Z9(){return new Bi(3300,yo)}()),h=[]),s.length)throw function Y9(n){return new Bi(3504,yo)}();_.forEach((O,G)=>{Object.keys(O).forEach(X=>{O[X]=this._driver.computeStyle(G,X,Am)})});const A=o_(h.map(O=>{const G=_.get(O.element);return this._buildPlayer(O,{},G)}));return this._playersById[e]=A,A.onDestroy(()=>this.destroy(e)),this.players.push(A),A}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function X9(n){return new Bi(3301,yo)}();return t}listen(e,t,r,s){const c=wR(t,"","","");return bR(this._getPlayer(e),r,c,s),()=>{}}command(e,t,r,s){if("register"==r)return void this.register(e,s[0]);if("create"==r)return void this.create(e,t,s[0]||{});const c=this._getPlayer(e);switch(r){case"play":c.play();break;case"pause":c.pause();break;case"reset":c.reset();break;case"restart":c.restart();break;case"finish":c.finish();break;case"init":c.init();break;case"setPosition":c.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e)}}}const wN="ng-animate-queued",BR="ng-animate-disabled",Yj=[],MN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Xj={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},fd="__ng_removed";class HR{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function $j(n){return null!=n?n:null}(r?e.value:e),r){const c=Zb(e);delete c.value,this.options=c}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(s=>{null==r[s]&&(r[s]=t[s])})}}}const y1="void",zR=new HR(y1);class Jj{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,pd(t,this._hostClassName)}listen(e,t,r,s){if(!this._triggers.hasOwnProperty(t))throw function J9(n,e){return new Bi(3302,yo)}();if(null==r||0==r.length)throw function K9(n){return new Bi(3303,yo)}();if(!function e7(n){return"start"==n||"done"==n}(r))throw function Q9(n,e){return new Bi(3400,yo)}();const c=Ih(this._elementListeners,e,[]),h={name:t,phase:r,callback:s};c.push(h);const _=Ih(this._engine.statesByElement,e,{});return _.hasOwnProperty(t)||(pd(e,zS),pd(e,zS+"-"+t),_[t]=zR),()=>{this._engine.afterFlush(()=>{const S=c.indexOf(h);S>=0&&c.splice(S,1),this._triggers[t]||delete _[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function $9(n){return new Bi(3401,yo)}();return t}trigger(e,t,r,s=!0){const c=this._getTrigger(t),h=new VR(this.id,t,e);let _=this._engine.statesByElement.get(e);_||(pd(e,zS),pd(e,zS+"-"+t),this._engine.statesByElement.set(e,_={}));let S=_[t];const A=new HR(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&S&&A.absorbOptions(S.options),_[t]=A,S||(S=zR),A.value!==y1&&S.value===A.value){if(!function i7(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let s=0;s<t.length;s++){const c=t[s];if(!e.hasOwnProperty(c)||n[c]!==e[c])return!1}return!0}(S.params,A.params)){const ve=[],Ie=c.matchStyles(S.value,S.params,ve),ye=c.matchStyles(A.value,A.params,ve);ve.length?this._engine.reportError(ve):this._engine.afterFlush(()=>{qv(e,Ie),up(e,ye)})}return}const X=Ih(this._engine.playersByElement,e,[]);X.forEach(ve=>{ve.namespaceId==this.id&&ve.triggerName==t&&ve.queued&&ve.destroy()});let te=c.matchTransition(S.value,A.value,e,A.params),ue=!1;if(!te){if(!s)return;te=c.fallbackTransition,ue=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:te,fromState:S,toState:A,player:h,isFallbackTransition:ue}),ue||(pd(e,wN),h.onStart(()=>{Yb(e,wN)})),h.onDone(()=>{let ve=this.players.indexOf(h);ve>=0&&this.players.splice(ve,1);const Ie=this._engine.playersByElement.get(e);if(Ie){let ye=Ie.indexOf(h);ye>=0&&Ie.splice(ye,1)}}),this.players.push(h),X.push(h),h}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,VS,!0);r.forEach(s=>{if(s[fd])return;const c=this._engine.fetchNamespacesByElement(s);c.size?c.forEach(h=>h.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,r,s){const c=this._engine.statesByElement.get(e),h=new Map;if(c){const _=[];if(Object.keys(c).forEach(S=>{if(h.set(S,c[S].value),this._triggers[S]){const A=this.trigger(e,S,y1,s);A&&_.push(A)}}),_.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,h),r&&o_(_).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const s=new Set;t.forEach(c=>{const h=c.name;if(s.has(h))return;s.add(h);const S=this._triggers[h].fallbackTransition,A=r[h]||zR,O=new HR(y1),G=new VR(this.id,h,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:h,transition:S,fromState:A,toState:O,player:G,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(r.totalAnimations){const c=r.players.length?r.playersByQueriedElement.get(e):[];if(c&&c.length)s=!0;else{let h=e;for(;h=h.parentNode;)if(r.statesByElement.get(h)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)r.markElementAsRemoved(this.id,e,!1,t);else{const c=e[fd];(!c||c===MN)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){pd(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const s=r.player;if(s.destroyed)return;const c=r.element,h=this._elementListeners.get(c);h&&h.forEach(_=>{if(_.name==r.triggerName){const S=wR(c,r.triggerName,r.fromState.value,r.toState.value);S._data=e,bR(r.player,_.phase,S,_.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(r)}),this._queue=[],t.sort((r,s)=>{const c=r.transition.ast.depCount,h=s.transition.ast.depCount;return 0==c||0==h?c-h:this._engine.driver.containsElement(r.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class Kj{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,c)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Jj(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,s=this.namespacesByHostElement,c=r.length-1;if(c>=0){let h=!1;if(void 0!==this.driver.getParentElement){let _=this.driver.getParentElement(t);for(;_;){const S=s.get(_);if(S){const A=r.indexOf(S);r.splice(A+1,0,e),h=!0;break}_=this.driver.getParentElement(_)}}else for(let _=c;_>=0;_--)if(this.driver.containsElement(r[_].hostElement,t)){r.splice(_+1,0,e),h=!0;break}h||r.unshift(e)}else r.push(e);return s.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let s=this._namespaceLookup[e];s&&s.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const s=this._namespaceList.indexOf(r);s>=0&&this._namespaceList.splice(s,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const s=Object.keys(r);for(let c=0;c<s.length;c++){const h=r[s[c]].namespaceId;if(h){const _=this._fetchNamespace(h);_&&t.add(_)}}}return t}trigger(e,t,r,s){if(eE(t)){const c=this._fetchNamespace(e);if(c)return c.trigger(t,r,s),!0}return!1}insertNode(e,t,r,s){if(!eE(t))return;const c=t[fd];if(c&&c.setForRemoval){c.setForRemoval=!1,c.setForMove=!0;const h=this.collectedLeaveElements.indexOf(t);h>=0&&this.collectedLeaveElements.splice(h,1)}if(e){const h=this._fetchNamespace(e);h&&h.insertNode(t,r)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),pd(e,BR)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Yb(e,BR))}removeNode(e,t,r,s){if(eE(t)){const c=e?this._fetchNamespace(e):null;if(c?c.removeNode(t,s):this.markElementAsRemoved(e,t,!1,s),r){const h=this.namespacesByHostElement.get(t);h&&h.id!==e&&h.removeNode(t,s)}}else this._onRemovalComplete(t,s)}markElementAsRemoved(e,t,r,s,c){this.collectedLeaveElements.push(t),t[fd]={namespaceId:e,setForRemoval:s,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:c}}listen(e,t,r,s,c){return eE(t)?this._fetchNamespace(e).listen(t,r,s,c):()=>{}}_buildInstruction(e,t,r,s,c){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,s,e.fromState.options,e.toState.options,t,c)}destroyInnerAnimations(e){let t=this.driver.query(e,VS,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,TR,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return o_(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[fd];if(r&&r.setForRemoval){if(e[fd]=MN,r.namespaceId){this.destroyInnerAnimations(e);const s=this._fetchNamespace(r.namespaceId);s&&s.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(BR))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(s=>{this.markElementAsDisabled(s,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,s)=>this._balanceNamespaceList(r,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)pd(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let s=0;s<r.length;s++)r[s]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?o_(t).onDone(()=>{r.forEach(s=>s())}):r.forEach(s=>s())}}reportError(e){throw function ej(n){return new Bi(3402,yo)}()}_flushAnimations(e,t){const r=new KS,s=[],c=new Map,h=[],_=new Map,S=new Map,A=new Map,O=new Set;this.disabledNodes.forEach(_t=>{O.add(_t);const Ut=this.driver.query(_t,".ng-animate-queued",!0);for(let ln=0;ln<Ut.length;ln++)O.add(Ut[ln])});const G=this.bodyNode,X=Array.from(this.statesByElement.keys()),te=EN(X,this.collectedEnterElements),ue=new Map;let ve=0;te.forEach((_t,Ut)=>{const ln=ER+ve++;ue.set(Ut,ln),_t.forEach(Gn=>pd(Gn,ln))});const Ie=[],ye=new Set,de=new Set;for(let _t=0;_t<this.collectedLeaveElements.length;_t++){const Ut=this.collectedLeaveElements[_t],ln=Ut[fd];ln&&ln.setForRemoval&&(Ie.push(Ut),ye.add(Ut),ln.hasAnimation?this.driver.query(Ut,".ng-star-inserted",!0).forEach(Gn=>ye.add(Gn)):de.add(Ut))}const Ge=new Map,Oe=EN(X,Array.from(ye));Oe.forEach((_t,Ut)=>{const ln=HS+ve++;Ge.set(Ut,ln),_t.forEach(Gn=>pd(Gn,ln))}),e.push(()=>{te.forEach((_t,Ut)=>{const ln=ue.get(Ut);_t.forEach(Gn=>Yb(Gn,ln))}),Oe.forEach((_t,Ut)=>{const ln=Ge.get(Ut);_t.forEach(Gn=>Yb(Gn,ln))}),Ie.forEach(_t=>{this.processLeaveNode(_t)})});const $e=[],ht=[];for(let _t=this._namespaceList.length-1;_t>=0;_t--)this._namespaceList[_t].drainQueuedTransitions(t).forEach(ln=>{const Gn=ln.player,vn=ln.element;if($e.push(Gn),this.collectedEnterElements.length){const ir=vn[fd];if(ir&&ir.setForMove){if(ir.previousTriggersValues&&ir.previousTriggersValues.has(ln.triggerName)){const Jr=ir.previousTriggersValues.get(ln.triggerName),tr=this.statesByElement.get(ln.element);tr&&tr[ln.triggerName]&&(tr[ln.triggerName].value=Jr)}return void Gn.destroy()}}const Un=!G||!this.driver.containsElement(G,vn),Ti=Ge.get(vn),fr=ue.get(vn),qi=this._buildInstruction(ln,r,fr,Ti,Un);if(qi.errors&&qi.errors.length)return void ht.push(qi);if(Un)return Gn.onStart(()=>qv(vn,qi.fromStyles)),Gn.onDestroy(()=>up(vn,qi.toStyles)),void s.push(Gn);if(ln.isFallbackTransition)return Gn.onStart(()=>qv(vn,qi.fromStyles)),Gn.onDestroy(()=>up(vn,qi.toStyles)),void s.push(Gn);const Vn=[];qi.timelines.forEach(ir=>{ir.stretchStartingKeyframe=!0,this.disabledNodes.has(ir.element)||Vn.push(ir)}),qi.timelines=Vn,r.append(vn,qi.timelines),h.push({instruction:qi,player:Gn,element:vn}),qi.queriedElements.forEach(ir=>Ih(_,ir,[]).push(Gn)),qi.preStyleProps.forEach((ir,Jr)=>{const tr=Object.keys(ir);if(tr.length){let Ss=S.get(Jr);Ss||S.set(Jr,Ss=new Set),tr.forEach(ds=>Ss.add(ds))}}),qi.postStyleProps.forEach((ir,Jr)=>{const tr=Object.keys(ir);let Ss=A.get(Jr);Ss||A.set(Jr,Ss=new Set),tr.forEach(ds=>Ss.add(ds))})});if(ht.length){const _t=[];ht.forEach(Ut=>{_t.push(function tj(n,e){return new Bi(3505,yo)}())}),$e.forEach(Ut=>Ut.destroy()),this.reportError(_t)}const vt=new Map,Nt=new Map;h.forEach(_t=>{const Ut=_t.element;r.has(Ut)&&(Nt.set(Ut,Ut),this._beforeAnimationBuild(_t.player.namespaceId,_t.instruction,vt))}),s.forEach(_t=>{const Ut=_t.element;this._getPreviousPlayers(Ut,!1,_t.namespaceId,_t.triggerName,null).forEach(Gn=>{Ih(vt,Ut,[]).push(Gn),Gn.destroy()})});const Cn=Ie.filter(_t=>DN(_t,S,A)),hn=new Map;SN(hn,this.driver,de,A,Am).forEach(_t=>{DN(_t,S,A)&&Cn.push(_t)});const At=new Map;te.forEach((_t,Ut)=>{SN(At,this.driver,new Set(_t),S,"!")}),Cn.forEach(_t=>{const Ut=hn.get(_t),ln=At.get(_t);hn.set(_t,Object.assign(Object.assign({},Ut),ln))});const Zt=[],$t=[],tn={};h.forEach(_t=>{const{element:Ut,player:ln,instruction:Gn}=_t;if(r.has(Ut)){if(O.has(Ut))return ln.onDestroy(()=>up(Ut,Gn.toStyles)),ln.disabled=!0,ln.overrideTotalTime(Gn.totalTime),void s.push(ln);let vn=tn;if(Nt.size>1){let Ti=Ut;const fr=[];for(;Ti=Ti.parentNode;){const qi=Nt.get(Ti);if(qi){vn=qi;break}fr.push(Ti)}fr.forEach(qi=>Nt.set(qi,vn))}const Un=this._buildAnimation(ln.namespaceId,Gn,vt,c,At,hn);if(ln.setRealPlayer(Un),vn===tn)Zt.push(ln);else{const Ti=this.playersByElement.get(vn);Ti&&Ti.length&&(ln.parentPlayer=o_(Ti)),s.push(ln)}}else qv(Ut,Gn.fromStyles),ln.onDestroy(()=>up(Ut,Gn.toStyles)),$t.push(ln),O.has(Ut)&&s.push(ln)}),$t.forEach(_t=>{const Ut=c.get(_t.element);if(Ut&&Ut.length){const ln=o_(Ut);_t.setRealPlayer(ln)}}),s.forEach(_t=>{_t.parentPlayer?_t.syncPlayerEvents(_t.parentPlayer):_t.destroy()});for(let _t=0;_t<Ie.length;_t++){const Ut=Ie[_t],ln=Ut[fd];if(Yb(Ut,HS),ln&&ln.hasAnimation)continue;let Gn=[];if(_.size){let Un=_.get(Ut);Un&&Un.length&&Gn.push(...Un);let Ti=this.driver.query(Ut,TR,!0);for(let fr=0;fr<Ti.length;fr++){let qi=_.get(Ti[fr]);qi&&qi.length&&Gn.push(...qi)}}const vn=Gn.filter(Un=>!Un.destroyed);vn.length?t7(this,Ut,vn):this.processLeaveNode(Ut)}return Ie.length=0,Zt.forEach(_t=>{this.players.push(_t),_t.onDone(()=>{_t.destroy();const Ut=this.players.indexOf(_t);this.players.splice(Ut,1)}),_t.play()}),Zt}elementContainsData(e,t){let r=!1;const s=t[fd];return s&&s.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,s,c){let h=[];if(t){const _=this.playersByQueriedElement.get(e);_&&(h=_)}else{const _=this.playersByElement.get(e);if(_){const S=!c||c==y1;_.forEach(A=>{A.queued||!S&&A.triggerName!=s||h.push(A)})}}return(r||s)&&(h=h.filter(_=>!(r&&r!=_.namespaceId||s&&s!=_.triggerName))),h}_beforeAnimationBuild(e,t,r){const c=t.element,h=t.isRemovalTransition?void 0:e,_=t.isRemovalTransition?void 0:t.triggerName;for(const S of t.timelines){const A=S.element,O=A!==c,G=Ih(r,A,[]);this._getPreviousPlayers(A,O,h,_,t.toState).forEach(te=>{const ue=te.getRealPlayer();ue.beforeDestroy&&ue.beforeDestroy(),te.destroy(),G.push(te)})}qv(c,t.fromStyles)}_buildAnimation(e,t,r,s,c,h){const _=t.triggerName,S=t.element,A=[],O=new Set,G=new Set,X=t.timelines.map(ue=>{const ve=ue.element;O.add(ve);const Ie=ve[fd];if(Ie&&Ie.removedBeforeQueried)return new _1(ue.duration,ue.delay);const ye=ve!==S,de=function n7(n){const e=[];return TN(n,e),e}((r.get(ve)||Yj).map(vt=>vt.getRealPlayer())).filter(vt=>!!vt.element&&vt.element===ve),Ge=c.get(ve),Oe=h.get(ve),$e=$3(0,this._normalizer,0,ue.keyframes,Ge,Oe),ht=this._buildPlayer(ue,$e,de);if(ue.subTimeline&&s&&G.add(ve),ye){const vt=new VR(e,_,ve);vt.setRealPlayer(ht),A.push(vt)}return ht});A.forEach(ue=>{Ih(this.playersByQueriedElement,ue.element,[]).push(ue),ue.onDone(()=>function Qj(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const s=r.indexOf(t);r.splice(s,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const s=r.indexOf(t);r.splice(s,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,ue.element,ue))}),O.forEach(ue=>pd(ue,cN));const te=o_(X);return te.onDestroy(()=>{O.forEach(ue=>Yb(ue,cN)),up(S,t.toStyles)}),G.forEach(ue=>{Ih(s,ue,[]).push(te)}),te}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new _1(e.duration,e.delay)}}class VR{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new _1,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>bR(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ih(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function eE(n){return n&&1===n.nodeType}function CN(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function SN(n,e,t,r,s){const c=[];t.forEach(S=>c.push(CN(S)));const h=[];r.forEach((S,A)=>{const O={};S.forEach(G=>{const X=O[G]=e.computeStyle(A,G,s);(!X||0==X.length)&&(A[fd]=Xj,h.push(A))}),n.set(A,O)});let _=0;return t.forEach(S=>CN(S,c[_++])),h}function EN(n,e){const t=new Map;if(n.forEach(_=>t.set(_,[])),0==e.length)return t;const s=new Set(e),c=new Map;function h(_){if(!_)return 1;let S=c.get(_);if(S)return S;const A=_.parentNode;return S=t.has(A)?A:s.has(A)?1:h(A),c.set(_,S),S}return e.forEach(_=>{const S=h(_);1!==S&&t.get(S).push(_)}),t}function pd(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Yb(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function t7(n,e,t){o_(t).onDone(()=>n.processLeaveNode(e))}function TN(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof K3?TN(r.players,e):e.push(r)}}function DN(n,e,t){const r=t.get(n);if(!r)return!1;let s=e.get(n);return s?r.forEach(c=>s.add(c)):e.set(n,r),t.delete(n),!0}class tE{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(s,c)=>{},this._transitionEngine=new Kj(e,t,r),this._timelineEngine=new Gj(e,t,r),this._transitionEngine.onRemovalComplete=(s,c)=>this.onRemovalComplete(s,c)}registerTrigger(e,t,r,s,c){const h=e+"-"+s;let _=this._triggerCache[h];if(!_){const S=[],O=RR(this._driver,c,S,[]);if(S.length)throw function W9(n,e){return new Bi(3404,yo)}();_=function Hj(n,e,t){return new zj(n,e,t)}(s,O,this._normalizer),this._triggerCache[h]=_}this._transitionEngine.registerTrigger(t,s,_)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,s){this._transitionEngine.insertNode(e,t,r,s)}onRemove(e,t,r,s){this._transitionEngine.removeNode(e,t,s||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,s){if("@"==r.charAt(0)){const[c,h]=eN(r);this._timelineEngine.command(c,t,h,s)}else this._transitionEngine.trigger(e,t,r,s)}listen(e,t,r,s,c){if("@"==r.charAt(0)){const[h,_]=eN(r);return this._timelineEngine.listen(h,t,_,c)}return this._transitionEngine.listen(e,t,r,s,c)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let s7=(()=>{class n{constructor(t,r,s){this._element=t,this._startStyles=r,this._endStyles=s,this._state=0;let c=n.initialStylesByElement.get(t);c||n.initialStylesByElement.set(t,c={}),this._initialStyles=c}start(){this._state<1&&(this._startStyles&&up(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(up(this._element,this._initialStyles),this._endStyles&&(up(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(qv(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(qv(this._element,this._endStyles),this._endStyles=null),up(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function UR(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const s=t[r];o7(s)&&(e=e||{},e[s]=n[s])}return e}function o7(n){return"display"===n||"position"===n}class AN{constructor(e,t,r,s){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:pN(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class a7{validateStyleProperty(e){return rN(e)}matchesElement(e,t){return!1}containsElement(e,t){return sN(e,t)}getParentElement(e){return CR(e)}query(e,t,r){return oN(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,s,c,h=[]){const S={duration:r,delay:s,fill:0==s?"both":"forwards"};c&&(S.easing=c);const A={},O=h.filter(X=>X instanceof AN);(function hj(n,e){return 0===n||0===e})(r,s)&&O.forEach(X=>{let te=X.currentSnapshot;Object.keys(te).forEach(ue=>A[ue]=te[ue])}),t=function dj(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let c=e[0],h=[];if(r.forEach(_=>{c.hasOwnProperty(_)||h.push(_),c[_]=t[_]}),h.length)for(var s=1;s<e.length;s++){let _=e[s];h.forEach(function(S){_[S]=pN(n,S)})}}return e}(e,t=t.map(X=>a_(X,!1)),A);const G=function r7(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=UR(e[0]),e.length>1&&(r=UR(e[e.length-1]))):e&&(t=UR(e)),t||r?new s7(n,t,r):null}(e,t);return new AN(e,t,S,G)}}let l7=(()=>{class n extends q3{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Ne.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(t)?Z3(t):t;return IN(this._renderer,null,r,"register",[s]),new c7(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(wn(Ww),wn(js))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})();class c7 extends class w9{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new u7(this._id,e,t||{},this._renderer)}}class u7{constructor(e,t,r,s){this.id=e,this.element=t,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return IN(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function IN(n,e,t,r,s){return n.setProperty(e,`@@${t}:${r}`,s)}const RN="@.disabled";let h7=(()=>{class n{constructor(t,r,s){this.delegate=t,this.engine=r,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(c,h)=>{const _=null==h?void 0:h.parentNode(c);_&&h.removeChild(_,c)}}createRenderer(t,r){const c=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let O=this._rendererCache.get(c);return O||(O=new kN("",c,this.engine),this._rendererCache.set(c,O)),O}const h=r.id,_=r.id+"-"+this._currentId;this._currentId++,this.engine.register(_,t);const S=O=>{Array.isArray(O)?O.forEach(S):this.engine.registerTrigger(h,_,t,O.name,O)};return r.data.animation.forEach(S),new d7(this,_,c,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,s){t>=0&&t<this._microtaskId?this._zone.run(()=>r(s)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(c=>{const[h,_]=c;h(_)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(wn(Ww),wn(tE),wn(vo))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})();class kN{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,s=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,s){this.delegate.setAttribute(e,t,r,s)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,s){this.delegate.setStyle(e,t,r,s)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==RN?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class d7 extends kN{constructor(e,t,r,s){super(t,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==RN?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const s=function f7(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let c=t.substr(1),h="";return"@"!=c.charAt(0)&&([c,h]=function p7(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(c)),this.engine.listen(this.namespaceId,s,c,h,_=>{this.factory.scheduleListenerCallback(_._data||-1,r,_)})}return this.delegate.listen(e,t,r)}}let m7=(()=>{class n extends tE{constructor(t,r,s){super(t.body,r,s)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(wn(js),wn(SR),wn(OR))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})();const Xb=new bi("AnimationModuleType"),PN=[{provide:q3,useClass:l7},{provide:OR,useFactory:function g7(){return new Lj}},{provide:tE,useClass:m7},{provide:Ww,useFactory:function _7(n,e,t){return new h7(n,e,t)},deps:[dS,tE,vo]}],LN=[{provide:SR,useFactory:()=>new a7},{provide:Xb,useValue:"BrowserAnimations"},...PN],v7=[{provide:SR,useClass:aN},{provide:Xb,useValue:"NoopAnimations"},...PN];let y7=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?v7:LN}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({providers:LN,imports:[qF]}),n})();function Jb(n,e){return y(e)?sn(n,e,1):sn(n,1)}class FN{}class ON{}class Im{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),c=s.toLowerCase(),h=t.slice(r+1).trim();this.maybeSetNormalizedName(s,c),this.headers.has(c)?this.headers.get(c).push(h):this.headers.set(c,[h])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const s=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(s,r),this.maybeSetNormalizedName(t,s))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Im?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Im;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Im?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const c=e.value;if(c){let h=this.headers.get(t);if(!h)return;h=h.filter(_=>-1===c.indexOf(_)),0===h.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,h)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class b7{encodeKey(e){return NN(e)}encodeValue(e){return NN(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const w7=/%(\d[a-f0-9])/gi,M7={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function NN(n){return encodeURIComponent(n).replace(w7,(e,t)=>{var r;return null!==(r=M7[t])&&void 0!==r?r:e})}function BN(n){return`${n}`}class l_{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new b7,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function x7(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const c=s.indexOf("="),[h,_]=-1==c?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,c)),e.decodeValue(s.slice(c+1))],S=t.get(h)||[];S.push(_),t.set(h,S)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(c=>{t.push({param:r,value:c,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new l_({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(BN(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(BN(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class C7{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function HN(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function zN(n){return"undefined"!=typeof Blob&&n instanceof Blob}function VN(n){return"undefined"!=typeof FormData&&n instanceof FormData}class b1{constructor(e,t,r,s){let c;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function S7(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,c=s):c=r,c&&(this.reportProgress=!!c.reportProgress,this.withCredentials=!!c.withCredentials,c.responseType&&(this.responseType=c.responseType),c.headers&&(this.headers=c.headers),c.context&&(this.context=c.context),c.params&&(this.params=c.params)),this.headers||(this.headers=new Im),this.context||(this.context=new C7),this.params){const h=this.params.toString();if(0===h.length)this.urlWithParams=t;else{const _=t.indexOf("?");this.urlWithParams=t+(-1===_?"?":_<t.length-1?"&":"")+h}}else this.params=new l_,this.urlWithParams=t}serializeBody(){return null===this.body?null:HN(this.body)||zN(this.body)||VN(this.body)||function E7(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof l_?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||VN(this.body)?null:zN(this.body)?this.body.type||null:HN(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof l_?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,s=e.url||this.url,c=e.responseType||this.responseType,h=void 0!==e.body?e.body:this.body,_=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,S=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let A=e.headers||this.headers,O=e.params||this.params;const G=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(A=Object.keys(e.setHeaders).reduce((X,te)=>X.set(te,e.setHeaders[te]),A)),e.setParams&&(O=Object.keys(e.setParams).reduce((X,te)=>X.set(te,e.setParams[te]),O)),new b1(r,s,h,{params:O,headers:A,context:G,reportProgress:S,responseType:c,withCredentials:_})}}var uc=(()=>((uc=uc||{})[uc.Sent=0]="Sent",uc[uc.UploadProgress=1]="UploadProgress",uc[uc.ResponseHeader=2]="ResponseHeader",uc[uc.DownloadProgress=3]="DownloadProgress",uc[uc.Response=4]="Response",uc[uc.User=5]="User",uc))();class GR{constructor(e,t=200,r="OK"){this.headers=e.headers||new Im,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class WR extends GR{constructor(e={}){super(e),this.type=uc.ResponseHeader}clone(e={}){return new WR({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class iE extends GR{constructor(e={}){super(e),this.type=uc.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new iE({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class UN extends GR{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function qR(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let x1=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let c;if(t instanceof b1)c=t;else{let S,A;S=s.headers instanceof Im?s.headers:new Im(s.headers),s.params&&(A=s.params instanceof l_?s.params:new l_({fromObject:s.params})),c=new b1(t,r,void 0!==s.body?s.body:null,{headers:S,context:s.context,params:A,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const h=$r(c).pipe(Jb(S=>this.handler.handle(S)));if(t instanceof b1||"events"===s.observe)return h;const _=h.pipe(Fc(S=>S instanceof iE));switch(s.observe||"body"){case"body":switch(c.responseType){case"arraybuffer":return _.pipe(ti(S=>{if(null!==S.body&&!(S.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return S.body}));case"blob":return _.pipe(ti(S=>{if(null!==S.body&&!(S.body instanceof Blob))throw new Error("Response is not a Blob.");return S.body}));case"text":return _.pipe(ti(S=>{if(null!==S.body&&"string"!=typeof S.body)throw new Error("Response is not a string.");return S.body}));default:return _.pipe(ti(S=>S.body))}case"response":return _;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new l_).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,qR(s,r))}post(t,r,s={}){return this.request("POST",t,qR(s,r))}put(t,r,s={}){return this.request("PUT",t,qR(s,r))}}return n.\u0275fac=function(t){return new(t||n)(wn(FN))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})();class GN{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const WN=new bi("HTTP_INTERCEPTORS");let T7=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})();const D7=/^\)\]\}',?\n/;let qN=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new _n(r=>{const s=this.xhrFactory.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((te,ue)=>s.setRequestHeader(te,ue.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const te=t.detectContentTypeHeader();null!==te&&s.setRequestHeader("Content-Type",te)}if(t.responseType){const te=t.responseType.toLowerCase();s.responseType="json"!==te?te:"text"}const c=t.serializeBody();let h=null;const _=()=>{if(null!==h)return h;const te=s.statusText||"OK",ue=new Im(s.getAllResponseHeaders()),ve=function A7(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return h=new WR({headers:ue,status:s.status,statusText:te,url:ve}),h},S=()=>{let{headers:te,status:ue,statusText:ve,url:Ie}=_(),ye=null;204!==ue&&(ye=void 0===s.response?s.responseText:s.response),0===ue&&(ue=ye?200:0);let de=ue>=200&&ue<300;if("json"===t.responseType&&"string"==typeof ye){const Ge=ye;ye=ye.replace(D7,"");try{ye=""!==ye?JSON.parse(ye):null}catch(Oe){ye=Ge,de&&(de=!1,ye={error:Oe,text:ye})}}de?(r.next(new iE({body:ye,headers:te,status:ue,statusText:ve,url:Ie||void 0})),r.complete()):r.error(new UN({error:ye,headers:te,status:ue,statusText:ve,url:Ie||void 0}))},A=te=>{const{url:ue}=_(),ve=new UN({error:te,status:s.status||0,statusText:s.statusText||"Unknown Error",url:ue||void 0});r.error(ve)};let O=!1;const G=te=>{O||(r.next(_()),O=!0);let ue={type:uc.DownloadProgress,loaded:te.loaded};te.lengthComputable&&(ue.total=te.total),"text"===t.responseType&&!!s.responseText&&(ue.partialText=s.responseText),r.next(ue)},X=te=>{let ue={type:uc.UploadProgress,loaded:te.loaded};te.lengthComputable&&(ue.total=te.total),r.next(ue)};return s.addEventListener("load",S),s.addEventListener("error",A),s.addEventListener("timeout",A),s.addEventListener("abort",A),t.reportProgress&&(s.addEventListener("progress",G),null!==c&&s.upload&&s.upload.addEventListener("progress",X)),s.send(c),r.next({type:uc.Sent}),()=>{s.removeEventListener("error",A),s.removeEventListener("abort",A),s.removeEventListener("load",S),s.removeEventListener("timeout",A),t.reportProgress&&(s.removeEventListener("progress",G),null!==c&&s.upload&&s.upload.removeEventListener("progress",X)),s.readyState!==s.DONE&&s.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(wn(LF))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})();const jR=new bi("XSRF_COOKIE_NAME"),ZR=new bi("XSRF_HEADER_NAME");class jN{}let I7=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=SF(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(wn(js),wn(Jw),wn(jR))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})(),YR=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const s=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||s.startsWith("http://")||s.startsWith("https://"))return r.handle(t);const c=this.tokenService.getToken();return null!==c&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,c)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(wn(jN),wn(ZR))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})(),R7=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(WN,[]);this.chain=r.reduceRight((s,c)=>new GN(s,c),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(wn(ON),wn(Ta))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})(),k7=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:YR,useClass:T7}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:jR,useValue:t.cookieName}:[],t.headerName?{provide:ZR,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({providers:[YR,{provide:WN,useExisting:YR,multi:!0},{provide:jN,useClass:I7},{provide:jR,useValue:"XSRF-TOKEN"},{provide:ZR,useValue:"X-XSRF-TOKEN"}]}),n})(),P7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({providers:[x1,{provide:FN,useClass:R7},qN,{provide:ON,useExisting:qN}],imports:[[k7.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();class XR{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class JR extends XR{constructor(e,t,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=s}}class rE extends XR{constructor(e,t,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class L7 extends XR{constructor(e){super(),this.element=e instanceof Jo?e.nativeElement:e}}class KR{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof JR?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof rE?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof L7?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class F7 extends KR{constructor(e,t,r,s,c){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=s,this.attachDomPortal=h=>{const _=h.element,S=this._document.createComment("dom-portal");_.parentNode.insertBefore(S,_),this.outletElement.appendChild(_),this._attachedPortal=h,super.setDisposeFn(()=>{S.parentNode&&S.parentNode.replaceChild(_,S)})},this._document=c}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let s;return e.viewContainerRef?(s=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>s.destroy())):(s=r.create(e.injector||this._defaultInjector||Ta.NULL),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(s.hostView),s.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(s)),this._attachedPortal=e,s}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context);return r.rootNodes.forEach(s=>this.outletElement.appendChild(s)),r.detectChanges(),this.setDisposeFn(()=>{let s=t.indexOf(r);-1!==s&&t.remove(s)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let QR=(()=>{class n extends KR{constructor(t,r,s){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new Ho,this.attachDomPortal=c=>{const h=c.element,_=this._document.createComment("dom-portal");c.setAttachedHost(this),h.parentNode.insertBefore(_,h),this._getRootNode().appendChild(h),this._attachedPortal=c,super.setDisposeFn(()=>{_.parentNode&&_.parentNode.replaceChild(h,_)})},this._document=s}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,c=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),h=r.createComponent(c,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(h.hostView.rootNodes[0]),super.setDisposeFn(()=>h.destroy()),this._attachedPortal=t,this._attachedRef=h,this.attached.emit(h),h}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(Ot(Ov),Ot(rh),Ot(js))},n.\u0275dir=mi({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[cs]}),n})(),$R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({}),n})();const ZN=$8();class O7{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=cc(-this._previousScrollPosition.left),e.style.top=cc(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,s=this._document.body.style,c=r.scrollBehavior||"",h=s.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),ZN&&(r.scrollBehavior=s.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),ZN&&(r.scrollBehavior=c,s.scrollBehavior=h)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class N7{constructor(e,t,r,s){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=s,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class YN{enable(){}disable(){}attach(){}}function e2(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function XN(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class B7{constructor(e,t,r,s){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=s,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:s}=this._viewportRuler.getViewportSize();e2(t,[{width:r,height:s,bottom:s,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let H7=(()=>{class n{constructor(t,r,s,c){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new YN,this.close=h=>new N7(this._scrollDispatcher,this._ngZone,this._viewportRuler,h),this.block=()=>new O7(this._viewportRuler,this._document),this.reposition=h=>new B7(this._scrollDispatcher,this._viewportRuler,this._ngZone,h),this._document=c}}return n.\u0275fac=function(t){return new(t||n)(wn(c9),wn(dR),wn(vo),wn(js))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class t2{constructor(e){if(this.scrollStrategy=new YN,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class z7{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class V7{constructor(e,t,r,s,c,h,_,S,A){this._portalOutlet=e,this._host=t,this._pane=r,this._config=s,this._ngZone=c,this._keyboardDispatcher=h,this._document=_,this._location=S,this._outsideClickDispatcher=A,this._backdropElement=null,this._backdropClick=new Xt,this._attachments=new Xt,this._detachments=new Xt,this._locationChanges=p.EMPTY,this._backdropClickHandler=O=>this._backdropClick.next(O),this._backdropTransitionendHandler=O=>{this._disposeBackdrop(O.target)},this._keydownEvents=new Xt,this._outsidePointerEvents=new Xt,s.scrollStrategy&&(this._scrollStrategy=s.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=s.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(oh(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=cc(this._config.width),e.height=cc(this._config.height),e.minWidth=cc(this._config.minWidth),e.minHeight=cc(this._config.minHeight),e.maxWidth=cc(this._config.maxWidth),e.maxHeight=cc(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,r){const s=a3(t||[]).filter(c=>!!c);s.length&&(r?e.classList.add(...s):e.classList.remove(...s))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(uf(Eo(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let n2=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||tR()){const s=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let c=0;c<s.length;c++)s[c].remove()}const r=this._document.createElement("div");r.classList.add(t),tR()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(wn(js),wn(lf))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const JN="cdk-overlay-connected-position-bounding-box",U7=/([A-Za-z%]+)$/;class G7{constructor(e,t,r,s,c){this._viewportRuler=t,this._document=r,this._platform=s,this._overlayContainer=c,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Xt,this._resizeSubscription=p.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(JN),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,s=this._containerRect,c=[];let h;for(let _ of this._preferredPositions){let S=this._getOriginPoint(e,s,_),A=this._getOverlayPoint(S,t,_),O=this._getOverlayFit(A,t,r,_);if(O.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(_,S);this._canFitWithFlexibleDimensions(O,A,r)?c.push({position:_,origin:S,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(S,_)}):(!h||h.overlayFit.visibleArea<O.visibleArea)&&(h={overlayFit:O,overlayPoint:A,originPoint:S,position:_,overlayRect:t})}if(c.length){let _=null,S=-1;for(const A of c){const O=A.boundingBoxRect.width*A.boundingBoxRect.height*(A.position.weight||1);O>S&&(S=O,_=A)}return this._isPushed=!1,void this._applyPosition(_.position,_.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(h.position,h.originPoint);this._applyPosition(h.position,h.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Zv(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(JN),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let s,c;if("center"==r.originX)s=e.left+e.width/2;else{const h=this._isRtl()?e.right:e.left,_=this._isRtl()?e.left:e.right;s="start"==r.originX?h:_}return t.left<0&&(s-=t.left),c="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(c-=t.top),{x:s,y:c}}_getOverlayPoint(e,t,r){let s,c;return s="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,c="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+s,y:e.y+c}}_getOverlayFit(e,t,r,s){const c=QN(t);let{x:h,y:_}=e,S=this._getOffset(s,"x"),A=this._getOffset(s,"y");S&&(h+=S),A&&(_+=A);let X=0-_,te=_+c.height-r.height,ue=this._subtractOverflows(c.width,0-h,h+c.width-r.width),ve=this._subtractOverflows(c.height,X,te),Ie=ue*ve;return{visibleArea:Ie,isCompletelyWithinViewport:c.width*c.height===Ie,fitsInViewportVertically:ve===c.height,fitsInViewportHorizontally:ue==c.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const s=r.bottom-t.y,c=r.right-t.x,h=KN(this._overlayRef.getConfig().minHeight),_=KN(this._overlayRef.getConfig().minWidth),A=e.fitsInViewportHorizontally||null!=_&&_<=c;return(e.fitsInViewportVertically||null!=h&&h<=s)&&A}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const s=QN(t),c=this._viewportRect,h=Math.max(e.x+s.width-c.width,0),_=Math.max(e.y+s.height-c.height,0),S=Math.max(c.top-r.top-e.y,0),A=Math.max(c.left-r.left-e.x,0);let O=0,G=0;return O=s.width<=c.width?A||-h:e.x<this._viewportMargin?c.left-r.left-e.x:0,G=s.height<=c.height?S||-_:e.y<this._viewportMargin?c.top-r.top-e.y:0,this._previousPushAmount={x:O,y:G},{x:e.x+O,y:e.y+G}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),s=new z7(e,r);this._positionChanges.next(s)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,s=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let c=0;c<t.length;c++)t[c].style.transformOrigin=`${r} ${s}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,s=this._isRtl();let c,h,_,O,G,X;if("top"===t.overlayY)h=e.y,c=r.height-h+this._viewportMargin;else if("bottom"===t.overlayY)_=r.height-e.y+2*this._viewportMargin,c=r.height-_+this._viewportMargin;else{const te=Math.min(r.bottom-e.y+r.top,e.y),ue=this._lastBoundingBoxSize.height;c=2*te,h=e.y-te,c>ue&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.y-ue/2)}if("end"===t.overlayX&&!s||"start"===t.overlayX&&s)X=r.width-e.x+this._viewportMargin,O=e.x-this._viewportMargin;else if("start"===t.overlayX&&!s||"end"===t.overlayX&&s)G=e.x,O=r.right-e.x;else{const te=Math.min(r.right-e.x+r.left,e.x),ue=this._lastBoundingBoxSize.width;O=2*te,G=e.x-te,O>ue&&!this._isInitialRender&&!this._growAfterOpen&&(G=e.x-ue/2)}return{top:h,left:G,bottom:_,right:X,width:O,height:c}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const s={};if(this._hasExactPosition())s.top=s.left="0",s.bottom=s.right=s.maxHeight=s.maxWidth="",s.width=s.height="100%";else{const c=this._overlayRef.getConfig().maxHeight,h=this._overlayRef.getConfig().maxWidth;s.height=cc(r.height),s.top=cc(r.top),s.bottom=cc(r.bottom),s.width=cc(r.width),s.left=cc(r.left),s.right=cc(r.right),s.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",s.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",c&&(s.maxHeight=cc(c)),h&&(s.maxWidth=cc(h))}this._lastBoundingBoxSize=r,Zv(this._boundingBox.style,s)}_resetBoundingBoxStyles(){Zv(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Zv(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},s=this._hasExactPosition(),c=this._hasFlexibleDimensions,h=this._overlayRef.getConfig();if(s){const O=this._viewportRuler.getViewportScrollPosition();Zv(r,this._getExactOverlayY(t,e,O)),Zv(r,this._getExactOverlayX(t,e,O))}else r.position="static";let _="",S=this._getOffset(t,"x"),A=this._getOffset(t,"y");S&&(_+=`translateX(${S}px) `),A&&(_+=`translateY(${A}px)`),r.transform=_.trim(),h.maxHeight&&(s?r.maxHeight=cc(h.maxHeight):c&&(r.maxHeight="")),h.maxWidth&&(s?r.maxWidth=cc(h.maxWidth):c&&(r.maxWidth="")),Zv(this._pane.style,r)}_getExactOverlayY(e,t,r){let s={top:"",bottom:""},c=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(c=this._pushOverlayOnScreen(c,this._overlayRect,r)),"bottom"===e.overlayY?s.bottom=this._document.documentElement.clientHeight-(c.y+this._overlayRect.height)+"px":s.top=cc(c.y),s}_getExactOverlayX(e,t,r){let h,s={left:"",right:""},c=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(c=this._pushOverlayOnScreen(c,this._overlayRect,r)),h=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===h?s.right=this._document.documentElement.clientWidth-(c.x+this._overlayRect.width)+"px":s.left=cc(c.x),s}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(s=>s.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:XN(e,r),isOriginOutsideView:e2(e,r),isOverlayClipped:XN(t,r),isOverlayOutsideView:e2(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,s)=>r-Math.max(s,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&a3(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Jo)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Zv(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function KN(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(U7);return t&&"px"!==t?null:parseFloat(e)}return n||null}function QN(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const $N="cdk-global-overlay-wrapper";class W7{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add($N),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:s,height:c,maxWidth:h,maxHeight:_}=r,S=!("100%"!==s&&"100vw"!==s||h&&"100%"!==h&&"100vw"!==h),A=!("100%"!==c&&"100vh"!==c||_&&"100%"!==_&&"100vh"!==_);e.position=this._cssPosition,e.marginLeft=S?"0":this._leftOffset,e.marginTop=A?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,S?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=A?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove($N),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let q7=(()=>{class n{constructor(t,r,s,c){this._viewportRuler=t,this._document=r,this._platform=s,this._overlayContainer=c}global(){return new W7}flexibleConnectedTo(t){return new G7(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(wn(dR),wn(js),wn(lf),wn(n2))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eB=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(wn(js))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),j7=(()=>{class n extends eB{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=s=>{const c=this._attachedOverlays;for(let h=c.length-1;h>-1;h--)if(c[h]._keydownEvents.observers.length>0){const _=c[h]._keydownEvents;this._ngZone?this._ngZone.run(()=>_.next(s)):_.next(s);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(wn(js),wn(vo,8))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Z7=(()=>{class n extends eB{constructor(t,r,s){super(t),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=c=>{this._pointerDownEventTarget=cf(c)},this._clickListener=c=>{const h=cf(c),_="click"===c.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:h;this._pointerDownEventTarget=null;const S=this._attachedOverlays.slice();for(let A=S.length-1;A>-1;A--){const O=S[A];if(O._outsidePointerEvents.observers.length<1||!O.hasAttached())continue;if(O.overlayElement.contains(h)||O.overlayElement.contains(_))break;const G=O._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>G.next(c)):G.next(c)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(wn(js),wn(lf),wn(vo,8))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Y7=0,Kb=(()=>{class n{constructor(t,r,s,c,h,_,S,A,O,G,X){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=c,this._keyboardDispatcher=h,this._injector=_,this._ngZone=S,this._document=A,this._directionality=O,this._location=G,this._outsideClickDispatcher=X}create(t){const r=this._createHostElement(),s=this._createPaneElement(r),c=this._createPortalOutlet(s),h=new t2(t);return h.direction=h.direction||this._directionality.value,new V7(c,r,s,h,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+Y7++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(ZC)),new F7(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(wn(H7),wn(n2),wn(Ov),wn(q7),wn(j7),wn(Ta),wn(vo),wn(js),wn(Gb),wn(Qw),wn(Z7))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})();const K7={provide:new bi("cdk-connected-overlay-scroll-strategy"),deps:[Kb],useFactory:function J7(n){return()=>n.scrollStrategies.reposition()}};let tB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({providers:[Kb,K7],imports:[[Wb,$R,D3],D3]}),n})();const $7=new bi("mat-sanity-checks",{providedIn:"root",factory:function Q7(){return!0}});let Sc=(()=>{class n{constructor(t,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!tR()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(wn(zq),wn($7,8),wn(js))},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({imports:[[Wb],Wb]}),n})();function rB(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=_u(e)}}}function sE(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function r2(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=_u(e)}}}function eZ(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?nR(t):this.defaultTabIndex}}}let oE=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class nZ{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const sB={enterDuration:225,exitDuration:150},s2=i_({passive:!0}),oB=["mousedown","touchstart"],aB=["mouseup","mouseleave","touchend","touchcancel"];class rZ{constructor(e,t,r,s){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,s.isBrowser&&(this._containerElement=Lc(r))}fadeInRipple(e,t,r={}){const s=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),c=Object.assign(Object.assign({},sB),r.animation);r.centered&&(e=s.left+s.width/2,t=s.top+s.height/2);const h=r.radius||function oZ(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),s=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+s*s)}(e,t,s),_=e-s.left,S=t-s.top,A=c.enterDuration,O=document.createElement("div");O.classList.add("mat-ripple-element"),O.style.left=_-h+"px",O.style.top=S-h+"px",O.style.height=2*h+"px",O.style.width=2*h+"px",null!=r.color&&(O.style.backgroundColor=r.color),O.style.transitionDuration=`${A}ms`,this._containerElement.appendChild(O),function sZ(n){window.getComputedStyle(n).getPropertyValue("opacity")}(O),O.style.transform="scale(1)";const G=new nZ(this,O,r);return G.state=0,this._activeRipples.add(G),r.persistent||(this._mostRecentTransientRipple=G),this._runTimeoutOutsideZone(()=>{const X=G===this._mostRecentTransientRipple;G.state=1,!r.persistent&&(!X||!this._isPointerDown)&&G.fadeOut()},A),G}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,s=Object.assign(Object.assign({},sB),e.config.animation);r.style.transitionDuration=`${s.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.remove()},s.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Lc(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(oB))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(aB),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=DS(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!AS(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,s2)})})}_removeTriggerEvents(){this._triggerElement&&(oB.forEach(e=>{this._triggerElement.removeEventListener(e,this,s2)}),this._pointerUpEventsRegistered&&aB.forEach(e=>{this._triggerElement.removeEventListener(e,this,s2)}))}}const aZ=new bi("mat-ripple-global-options");let M1=(()=>{class n{constructor(t,r,s,c,h){this._elementRef=t,this._animationMode=h,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=c||{},this._rippleRenderer=new rZ(this,r,t,s)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,s){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,Object.assign(Object.assign({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(Ot(Jo),Ot(vo),Ot(lf),Ot(aZ,8),Ot(Xb,8))},n.\u0275dir=mi({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&Gt("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),aE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({imports:[[Sc],Sc]}),n})();function o2(n){return new _n(e=>{Qe(n()).subscribe(e)})}function lE(...n){return function lZ(){return Wn(1)}()(Ws(n,Oi(n)))}function Rm(...n){const e=Oi(n);return Mn((t,r)=>{(e?lE(n,t,e):lE(n,t)).subscribe(r)})}function cZ(n,e){}class a2{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const uZ={dialogContainer:jb("dialogContainer",[hf("void, exit",Cc({opacity:0,transform:"scale(0.7)"})),hf("enter",Cc({transform:"none"})),s_("* => enter",j3([r_("150ms cubic-bezier(0, 0, 0.2, 1)",Cc({transform:"none",opacity:1})),X3("@*",Y3(),{optional:!0})])),s_("* => void, * => exit",j3([r_("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Cc({opacity:0})),X3("@*",Y3(),{optional:!0})]))])};let hZ=(()=>{class n extends KR{constructor(t,r,s,c,h,_,S,A){super(),this._elementRef=t,this._focusTrapFactory=r,this._changeDetectorRef=s,this._config=h,this._interactivityChecker=_,this._ngZone=S,this._focusMonitor=A,this._animationStateChanged=new Ho,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=O=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(O)),this._ariaLabelledBy=h.ariaLabelledBy||null,this._document=c}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=SS())}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const s=()=>{t.removeEventListener("blur",s),t.removeEventListener("mousedown",s),t.removeAttribute("tabindex")};t.addEventListener("blur",s),t.addEventListener("mousedown",s)})),t.focus(r)}_focusByCssSelector(t,r){let s=this._elementRef.nativeElement.querySelector(t);s&&this._forceFocus(s,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const r=SS(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=SS();return t===r||t.contains(r)}}return n.\u0275fac=function(t){return new(t||n)(Ot(Jo),Ot(Lq),Ot(Ah),Ot(js,8),Ot(a2),Ot(v3),Ot(vo),Ot(Ub))},n.\u0275dir=mi({type:n,viewQuery:function(t,r){if(1&t&&cd(QR,7),2&t){let s;Va(s=Ua())&&(r._portalOutlet=s.first)}},features:[cs]}),n})(),dZ=(()=>{class n extends hZ{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:r}){"enter"===t?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:r}))}_onAnimationStart({toState:t,totalTime:r}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:r}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:r})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Sa(n)))(r||n)}}(),n.\u0275cmp=rr({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,r){1&t&&kw("@dialogContainer.start",function(c){return r._onAnimationStart(c)})("@dialogContainer.done",function(c){return r._onAnimationDone(c)}),2&t&&(zn("id",r._id),Da("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Wi("@dialogContainer",r._state))},features:[cs],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&bs(0,cZ,0,0,"ng-template",0)},directives:[QR],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[uZ.dialogContainer]}}),n})(),fZ=0;class C1{constructor(e,t,r="mat-dialog-"+fZ++){this._overlayRef=e,this._containerInstance=t,this.id=r,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new Xt,this._afterClosed=new Xt,this._beforeClosed=new Xt,this._state=0,t._id=r,t._animationStateChanged.pipe(Fc(s=>"opened"===s.state),oh(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(Fc(s=>"closed"===s.state),oh(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),e.keydownEvents().pipe(Fc(s=>27===s.keyCode&&!this.disableClose&&!ES(s))).subscribe(s=>{s.preventDefault(),l2(this,"keyboard")}),e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():l2(this,"mouse")})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Fc(t=>"closing"===t.state),oh(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(e){let t=this._getPositionStrategy();return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(e="",t=""){return this._overlayRef.updateSize({width:e,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(e){return this._overlayRef.addPanelClass(e),this}removePanelClass(e){return this._overlayRef.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function l2(n,e,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=e),n.close(t)}const pZ=new bi("MatDialogData"),mZ=new bi("mat-dialog-default-options"),lB=new bi("mat-dialog-scroll-strategy"),_Z={provide:lB,deps:[Kb],useFactory:function gZ(n){return()=>n.scrollStrategies.block()}};let vZ=(()=>{class n{constructor(t,r,s,c,h,_,S,A,O,G){this._overlay=t,this._injector=r,this._defaultOptions=s,this._parentDialog=c,this._overlayContainer=h,this._dialogRefConstructor=S,this._dialogContainerType=A,this._dialogDataToken=O,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Xt,this._afterOpenedAtThisLevel=new Xt,this._ariaHiddenElements=new Map,this.afterAllClosed=o2(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Rm(void 0))),this._scrollStrategy=_}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,r){r=function yZ(n,e){return Object.assign(Object.assign({},e),n)}(r,this._defaultOptions||new a2),r.id&&this.getDialogById(r.id);const s=this._createOverlay(r),c=this._attachDialogContainer(s,r),h=this._attachDialogContent(t,c,s,r);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(h),h.afterClosed().subscribe(()=>this._removeOpenDialog(h)),this.afterOpened.next(h),c._initializeWithAttachedContent(),h}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const r=this._getOverlayConfig(t);return this._overlay.create(r)}_getOverlayConfig(t){const r=new t2({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachDialogContainer(t,r){const c=Ta.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:a2,useValue:r}]}),h=new JR(this._dialogContainerType,r.viewContainerRef,c,r.componentFactoryResolver);return t.attach(h).instance}_attachDialogContent(t,r,s,c){const h=new this._dialogRefConstructor(s,r,c.id);if(t instanceof zu)r.attachTemplatePortal(new rE(t,null,{$implicit:c.data,dialogRef:h}));else{const _=this._createInjector(c,h,r),S=r.attachComponentPortal(new JR(t,c.viewContainerRef,_,c.componentFactoryResolver));h.componentInstance=S.instance}return h.updateSize(c.width,c.height).updatePosition(c.position),h}_createInjector(t,r,s){const c=t&&t.viewContainerRef&&t.viewContainerRef.injector,h=[{provide:this._dialogContainerType,useValue:s},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:r}];return t.direction&&(!c||!c.get(Gb,null,Fr.Optional))&&h.push({provide:Gb,useValue:{value:t.direction,change:$r()}}),Ta.create({parent:c||this._injector,providers:h})}_removeOpenDialog(t){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,c)=>{s?c.setAttribute("aria-hidden",s):c.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let s=r.length-1;s>-1;s--){let c=r[s];c!==t&&"SCRIPT"!==c.nodeName&&"STYLE"!==c.nodeName&&!c.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(c,c.getAttribute("aria-hidden")),c.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}}return n.\u0275fac=function(t){Pv()},n.\u0275dir=mi({type:n}),n})(),cE=(()=>{class n extends vZ{constructor(t,r,s,c,h,_,S,A){super(t,r,c,_,S,h,C1,dZ,pZ,A)}}return n.\u0275fac=function(t){return new(t||n)(wn(Kb),wn(Ta),wn(Qw,8),wn(mZ,8),wn(lB),wn(n,12),wn(n2),wn(Xb,8))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})(),bZ=0,c2=(()=>{class n{constructor(t,r,s){this.dialogRef=t,this._elementRef=r,this._dialog=s,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=cB(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const r=t._matDialogClose||t._matDialogCloseResult;r&&(this.dialogResult=r.currentValue)}_onButtonClick(t){l2(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(t){return new(t||n)(Ot(C1,8),Ot(Jo),Ot(cE))},n.\u0275dir=mi({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,r){1&t&&Fo("click",function(c){return r._onButtonClick(c)}),2&t&&Da("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[xi]}),n})(),u2=(()=>{class n{constructor(t,r,s){this._dialogRef=t,this._elementRef=r,this._dialog=s,this.id="mat-dialog-title-"+bZ++}ngOnInit(){this._dialogRef||(this._dialogRef=cB(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(Ot(C1,8),Ot(Jo),Ot(cE))},n.\u0275dir=mi({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,r){2&t&&zn("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),h2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=mi({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})(),d2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=mi({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),n})();function cB(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(r=>r.id===t.id):null}let xZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({providers:[cE,_Z],imports:[[tB,$R,Sc],Sc]}),n})();function S1(n,e){const t=y(n)?n:()=>n,r=s=>s.error(t());return new _n(e?s=>e.schedule(r,0,s):r)}function km(n){return Mn((e,t)=>{let c,r=null,s=!1;r=e.subscribe(Sn(t,void 0,void 0,h=>{c=Qe(n(h,km(n)(e))),r?(r.unsubscribe(),r=null,c.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,c.subscribe(t))})}function uB(n){return Mn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const wZ=["*"];let uE;function E1(n){var e;return(null===(e=function MZ(){if(void 0===uE&&(uE=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(uE=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return uE}())||void 0===e?void 0:e.createHTML(n))||n}function hB(n){return Error(`Unable to find icon with the name "${n}"`)}function dB(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function fB(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Yv{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let hE=(()=>{class n{constructor(t,r,s,c){this._httpClient=t,this._sanitizer=r,this._errorHandler=c,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=s}addSvgIcon(t,r,s){return this.addSvgIconInNamespace("",t,r,s)}addSvgIconLiteral(t,r,s){return this.addSvgIconLiteralInNamespace("",t,r,s)}addSvgIconInNamespace(t,r,s,c){return this._addSvgIconConfig(t,r,new Yv(s,null,c))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,s,c){const h=this._sanitizer.sanitize(Lo.HTML,s);if(!h)throw fB(s);const _=E1(h);return this._addSvgIconConfig(t,r,new Yv("",_,c))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,s){return this._addSvgIconSetConfig(t,new Yv(r,null,s))}addSvgIconSetLiteralInNamespace(t,r,s){const c=this._sanitizer.sanitize(Lo.HTML,r);if(!c)throw fB(r);const h=E1(c);return this._addSvgIconSetConfig(t,new Yv("",h,s))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(Lo.RESOURCE_URL,t);if(!r)throw dB(t);const s=this._cachedIconsByUrl.get(r);return s?$r(dE(s)):this._loadSvgIconFromConfig(new Yv(t,null)).pipe(nu(c=>this._cachedIconsByUrl.set(r,c)),ti(c=>dE(c)))}getNamedSvgIcon(t,r=""){const s=pB(r,t);let c=this._svgIconConfigs.get(s);if(c)return this._getSvgFromConfig(c);if(c=this._getIconConfigFromResolvers(r,t),c)return this._svgIconConfigs.set(s,c),this._getSvgFromConfig(c);const h=this._iconSetConfigs.get(r);return h?this._getSvgFromIconSetConfigs(t,h):S1(hB(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?$r(dE(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(ti(r=>dE(r)))}_getSvgFromIconSetConfigs(t,r){const s=this._extractIconWithNameFromAnySet(t,r);return s?$r(s):KF(r.filter(h=>!h.svgText).map(h=>this._loadSvgIconSetFromConfig(h).pipe(km(_=>{const A=`Loading icon set URL: ${this._sanitizer.sanitize(Lo.RESOURCE_URL,h.url)} failed: ${_.message}`;return this._errorHandler.handleError(new Error(A)),$r(null)})))).pipe(ti(()=>{const h=this._extractIconWithNameFromAnySet(t,r);if(!h)throw hB(t);return h}))}_extractIconWithNameFromAnySet(t,r){for(let s=r.length-1;s>=0;s--){const c=r[s];if(c.svgText&&c.svgText.toString().indexOf(t)>-1){const h=this._svgElementFromConfig(c),_=this._extractSvgIconFromSet(h,t,c.options);if(_)return _}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(nu(r=>t.svgText=r),ti(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?$r(null):this._fetchIcon(t).pipe(nu(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,s){const c=t.querySelector(`[id="${r}"]`);if(!c)return null;const h=c.cloneNode(!0);if(h.removeAttribute("id"),"svg"===h.nodeName.toLowerCase())return this._setSvgAttributes(h,s);if("symbol"===h.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(h),s);const _=this._svgElementFromString(E1("<svg></svg>"));return _.appendChild(h),this._setSvgAttributes(_,s)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const s=r.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(t){const r=this._svgElementFromString(E1("<svg></svg>")),s=t.attributes;for(let c=0;c<s.length;c++){const{name:h,value:_}=s[c];"id"!==h&&r.setAttribute(h,_)}for(let c=0;c<t.childNodes.length;c++)t.childNodes[c].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[c].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){var r;const{url:s,options:c}=t,h=null!==(r=null==c?void 0:c.withCredentials)&&void 0!==r&&r;if(!this._httpClient)throw function CZ(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==s)throw Error(`Cannot fetch icon from URL "${s}".`);const _=this._sanitizer.sanitize(Lo.RESOURCE_URL,s);if(!_)throw dB(s);const S=this._inProgressUrlFetches.get(_);if(S)return S;const A=this._httpClient.get(_,{responseType:"text",withCredentials:h}).pipe(ti(O=>E1(O)),uB(()=>this._inProgressUrlFetches.delete(_)),ka());return this._inProgressUrlFetches.set(_,A),A}_addSvgIconConfig(t,r,s){return this._svgIconConfigs.set(pB(t,r),s),this}_addSvgIconSetConfig(t,r){const s=this._iconSetConfigs.get(t);return s?s.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let s=0;s<this._resolvers.length;s++){const c=this._resolvers[s](r,t);if(c)return EZ(c)?new Yv(c.url,null,c.options):new Yv(c,null)}}}return n.\u0275fac=function(t){return new(t||n)(wn(x1,8),wn(SI),wn(js,8),wn(Of))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dE(n){return n.cloneNode(!0)}function pB(n,e){return n+":"+e}function EZ(n){return!(!n.url||!n.options)}const TZ=sE(class{constructor(n){this._elementRef=n}}),DZ=new bi("mat-icon-location",{providedIn:"root",factory:function AZ(){const n=Zo(js),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),mB=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],IZ=mB.map(n=>`[${n}]`).join(", "),RZ=/^url\(['"]?#(.*?)['"]?\)$/;let gB=(()=>{class n extends TZ{constructor(t,r,s,c,h){super(t),this._iconRegistry=r,this._location=c,this._errorHandler=h,this._inline=!1,this._currentIconFetch=p.EMPTY,s||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=_u(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const s=t.childNodes[r];(1!==s.nodeType||"svg"===s.nodeName.toLowerCase())&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),r&&t.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((s,c)=>{s.forEach(h=>{c.setAttribute(h.name,`url('${t}#${h.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(IZ),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let c=0;c<r.length;c++)mB.forEach(h=>{const _=r[c],S=_.getAttribute(h),A=S?S.match(RZ):null;if(A){let O=s.get(_);O||(O=[],s.set(_,O)),O.push({name:h,value:A[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,s]=this._splitIconName(t);r&&(this._svgNamespace=r),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,r).pipe(oh(1)).subscribe(c=>this._setSvgElement(c),c=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${s}! ${c.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(Ot(Jo),Ot(hE),Xh("aria-hidden"),Ot(DZ),Ot(Of))},n.\u0275cmp=rr({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(Da("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),Gt("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[cs],ngContentSelectors:wZ,decls:1,vars:0,template:function(t,r){1&t&&(tf(),ad(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),_B=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({imports:[[Sc],Sc]}),n})();const kZ=["mat-button",""],PZ=["*"],FZ=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],OZ=sE(rB(r2(class{constructor(n){this._elementRef=n}})));let fE=(()=>{class n extends OZ{constructor(t,r,s){super(t),this._focusMonitor=r,this._animationMode=s,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const c of FZ)this._hasHostAttributes(c)&&this._getHostElement().classList.add(c);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(Ot(Jo),Ot(Ub),Ot(Xb,8))},n.\u0275cmp=rr({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&cd(M1,5),2&t){let s;Va(s=Ua())&&(r.ripple=s.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(Da("disabled",r.disabled||null),Gt("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[cs],attrs:kZ,ngContentSelectors:PZ,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(tf(),Kr(0,"span",0),ad(1),us(),sc(2,"span",1)(3,"span",2)),2&t&&(Vr(2),Gt("mat-button-ripple-round",r.isRoundButton||r.isIconButton),is("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[M1],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),vB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({imports:[[aE,Sc],Sc]}),n})();function NZ(n,e){1&n&&ad(0)}const BZ=["*"];let yB=(()=>{class n{constructor(t){this._elementRef=t}focus(){this._elementRef.nativeElement.focus()}}return n.\u0275fac=function(t){return new(t||n)(Ot(Jo))},n.\u0275dir=mi({type:n,selectors:[["","cdkStepHeader",""]],hostAttrs:["role","tab"]}),n})(),bB=(()=>{class n{constructor(t){this.template=t}}return n.\u0275fac=function(t){return new(t||n)(Ot(zu))},n.\u0275dir=mi({type:n,selectors:[["","cdkStepLabel",""]]}),n})(),HZ=0;const xB=new bi("STEPPER_GLOBAL_OPTIONS");let f2=(()=>{class n{constructor(t,r){this._stepper=t,this.interacted=!1,this.interactedStream=new Ho,this._editable=!0,this._optional=!1,this._completedOverride=null,this._customError=null,this._stepperOptions=r||{},this._displayDefaultIndicatorType=!1!==this._stepperOptions.displayDefaultIndicatorType}get editable(){return this._editable}set editable(t){this._editable=_u(t)}get optional(){return this._optional}set optional(t){this._optional=_u(t)}get completed(){return null==this._completedOverride?this._getDefaultCompleted():this._completedOverride}set completed(t){this._completedOverride=_u(t)}_getDefaultCompleted(){return this.stepControl?this.stepControl.valid&&this.interacted:this.interacted}get hasError(){return null==this._customError?this._getDefaultError():this._customError}set hasError(t){this._customError=_u(t)}_getDefaultError(){return this.stepControl&&this.stepControl.invalid&&this.interacted}select(){this._stepper.selected=this}reset(){this.interacted=!1,null!=this._completedOverride&&(this._completedOverride=!1),null!=this._customError&&(this._customError=!1),this.stepControl&&this.stepControl.reset()}ngOnChanges(){this._stepper._stateChanged()}_markAsInteracted(){this.interacted||(this.interacted=!0,this.interactedStream.emit(this))}_showError(){var t;return null!==(t=this._stepperOptions.showError)&&void 0!==t?t:null!=this._customError}}return n.\u0275fac=function(t){return new(t||n)(Ot(Vi(()=>pE)),Ot(xB,8))},n.\u0275cmp=rr({type:n,selectors:[["cdk-step"]],contentQueries:function(t,r,s){if(1&t&&Vu(s,bB,5),2&t){let c;Va(c=Ua())&&(r.stepLabel=c.first)}},viewQuery:function(t,r){if(1&t&&cd(zu,7),2&t){let s;Va(s=Ua())&&(r.content=s.first)}},inputs:{stepControl:"stepControl",label:"label",errorMessage:"errorMessage",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],state:"state",editable:"editable",optional:"optional",completed:"completed",hasError:"hasError"},outputs:{interactedStream:"interacted"},exportAs:["cdkStep"],features:[xi],ngContentSelectors:BZ,decls:1,vars:0,template:function(t,r){1&t&&(tf(),bs(0,NZ,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),n})(),pE=(()=>{class n{constructor(t,r,s,c){this._dir=t,this._changeDetectorRef=r,this._elementRef=s,this._destroyed=new Xt,this.steps=new Sm,this._sortedHeaders=new Sm,this._linear=!1,this._selectedIndex=0,this.selectionChange=new Ho,this._orientation="horizontal",this._groupId=HZ++}get linear(){return this._linear}set linear(t){this._linear=_u(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){var r;const s=nR(t);this.steps&&this._steps?(this._isValidIndex(s),null===(r=this.selected)||void 0===r||r._markAsInteracted(),this._selectedIndex!==s&&!this._anyControlsInvalidOrPending(s)&&(s>=this._selectedIndex||this.steps.toArray()[s].editable)&&this._updateSelectedItemIndex(s)):this._selectedIndex=s}get selected(){return this.steps?this.steps.toArray()[this.selectedIndex]:void 0}set selected(t){this.selectedIndex=t&&this.steps?this.steps.toArray().indexOf(t):-1}get orientation(){return this._orientation}set orientation(t){this._orientation=t,this._keyManager&&this._keyManager.withVerticalOrientation("vertical"===t)}ngAfterContentInit(){this._steps.changes.pipe(Rm(this._steps),uf(this._destroyed)).subscribe(t=>{this.steps.reset(t.filter(r=>r._stepper===this)),this.steps.notifyOnChanges()})}ngAfterViewInit(){this._stepHeader.changes.pipe(Rm(this._stepHeader),uf(this._destroyed)).subscribe(t=>{this._sortedHeaders.reset(t.toArray().sort((r,s)=>r._elementRef.nativeElement.compareDocumentPosition(s._elementRef.nativeElement)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)),this._sortedHeaders.notifyOnChanges()}),this._keyManager=new _3(this._sortedHeaders).withWrap().withHomeAndEnd().withVerticalOrientation("vertical"===this._orientation),(this._dir?this._dir.change:$r()).pipe(Rm(this._layoutDirection()),uf(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.updateActiveItem(this._selectedIndex),this.steps.changes.subscribe(()=>{this.selected||(this._selectedIndex=Math.max(this._selectedIndex-1,0))}),this._isValidIndex(this._selectedIndex)||(this._selectedIndex=0)}ngOnDestroy(){this.steps.destroy(),this._sortedHeaders.destroy(),this._destroyed.next(),this._destroyed.complete()}next(){this.selectedIndex=Math.min(this._selectedIndex+1,this.steps.length-1)}previous(){this.selectedIndex=Math.max(this._selectedIndex-1,0)}reset(){this._updateSelectedItemIndex(0),this.steps.forEach(t=>t.reset()),this._stateChanged()}_getStepLabelId(t){return`cdk-step-label-${this._groupId}-${t}`}_getStepContentId(t){return`cdk-step-content-${this._groupId}-${t}`}_stateChanged(){this._changeDetectorRef.markForCheck()}_getAnimationDirection(t){const r=t-this._selectedIndex;return r<0?"rtl"===this._layoutDirection()?"next":"previous":r>0?"rtl"===this._layoutDirection()?"previous":"next":"current"}_getIndicatorType(t,r="number"){const s=this.steps.toArray()[t],c=this._isCurrentStep(t);return s._displayDefaultIndicatorType?this._getDefaultIndicatorLogic(s,c):this._getGuidelineLogic(s,c,r)}_getDefaultIndicatorLogic(t,r){return t._showError()&&t.hasError&&!r?"error":!t.completed||r?"number":t.editable?"edit":"done"}_getGuidelineLogic(t,r,s="number"){return t._showError()&&t.hasError&&!r?"error":t.completed&&!r?"done":t.completed&&r?s:t.editable&&r?"edit":s}_isCurrentStep(t){return this._selectedIndex===t}_getFocusIndex(){return this._keyManager?this._keyManager.activeItemIndex:this._selectedIndex}_updateSelectedItemIndex(t){const r=this.steps.toArray();this.selectionChange.emit({selectedIndex:t,previouslySelectedIndex:this._selectedIndex,selectedStep:r[t],previouslySelectedStep:r[this._selectedIndex]}),this._containsFocus()?this._keyManager.setActiveItem(t):this._keyManager.updateActiveItem(t),this._selectedIndex=t,this._stateChanged()}_onKeydown(t){const r=ES(t),s=t.keyCode,c=this._keyManager;null==c.activeItemIndex||r||32!==s&&13!==s?c.onKeydown(t):(this.selectedIndex=c.activeItemIndex,t.preventDefault())}_anyControlsInvalidOrPending(t){return!!(this._linear&&t>=0)&&this.steps.toArray().slice(0,t).some(r=>{const s=r.stepControl;return(s?s.invalid||s.pending||!r.interacted:!r.completed)&&!r.optional&&!r._completedOverride})}_layoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_containsFocus(){const t=this._elementRef.nativeElement,r=SS();return t===r||t.contains(r)}_isValidIndex(t){return t>-1&&(!this.steps||t<this.steps.length)}}return n.\u0275fac=function(t){return new(t||n)(Ot(Gb,8),Ot(Ah),Ot(Jo),Ot(js))},n.\u0275dir=mi({type:n,selectors:[["","cdkStepper",""]],contentQueries:function(t,r,s){if(1&t&&(Vu(s,f2,5),Vu(s,yB,5)),2&t){let c;Va(c=Ua())&&(r._steps=c),Va(c=Ua())&&(r._stepHeader=c)}},inputs:{linear:"linear",selectedIndex:"selectedIndex",selected:"selected",orientation:"orientation"},outputs:{selectionChange:"selectionChange"},exportAs:["cdkStepper"]}),n})(),zZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({imports:[[Wb]]}),n})();function hp(n,e){return Mn((t,r)=>{let s=null,c=0,h=!1;const _=()=>h&&!s&&r.complete();t.subscribe(Sn(r,S=>{null==s||s.unsubscribe();let A=0;const O=c++;Qe(n(S,O)).subscribe(s=Sn(r,G=>r.next(e?e(S,G,O,A++):G),()=>{s=null,_()}))},()=>{h=!0,_()}))})}function VZ(n,e){if(1&n&&op(0,8),2&n){const t=oa();is("ngTemplateOutlet",t.iconOverrides[t.state])("ngTemplateOutletContext",t._getIconContext())}}function UZ(n,e){if(1&n&&(Kr(0,"span",13),ni(1),us()),2&n){const t=oa(2);Vr(1),Ri(t._getDefaultTextForState(t.state))}}function GZ(n,e){if(1&n&&(Kr(0,"span",14),ni(1),us()),2&n){const t=oa(2);Vr(1),Ri(t._intl.completedLabel)}}function WZ(n,e){if(1&n&&(Kr(0,"span",14),ni(1),us()),2&n){const t=oa(2);Vr(1),Ri(t._intl.editableLabel)}}function qZ(n,e){if(1&n&&(Kr(0,"mat-icon",13),ni(1),us()),2&n){const t=oa(2);Vr(1),Ri(t._getDefaultTextForState(t.state))}}function jZ(n,e){if(1&n&&(rp(0,9),bs(1,UZ,2,1,"span",10),bs(2,GZ,2,1,"span",11),bs(3,WZ,2,1,"span",11),bs(4,qZ,2,1,"mat-icon",12),sp()),2&n){const t=oa();is("ngSwitch",t.state),Vr(1),is("ngSwitchCase","number"),Vr(1),is("ngIf","done"===t.state),Vr(1),is("ngIf","edit"===t.state)}}function ZZ(n,e){if(1&n&&(Kr(0,"div",15),op(1,16),us()),2&n){const t=oa();Vr(1),is("ngTemplateOutlet",t._templateLabel().template)}}function YZ(n,e){if(1&n&&(Kr(0,"div",15),ni(1),us()),2&n){const t=oa();Vr(1),Ri(t.label)}}function XZ(n,e){if(1&n&&(Kr(0,"div",17),ni(1),us()),2&n){const t=oa();Vr(1),Ri(t._intl.optionalLabel)}}function JZ(n,e){if(1&n&&(Kr(0,"div",18),ni(1),us()),2&n){const t=oa();Vr(1),Ri(t.errorMessage)}}function KZ(n,e){}function QZ(n,e){if(1&n&&(ad(0),bs(1,KZ,0,0,"ng-template",0)),2&n){const t=oa();Vr(1),is("cdkPortalOutlet",t._portal)}}const $Z=["*"];function eY(n,e){1&n&&sc(0,"div",9)}const wB=function(n,e){return{step:n,i:e}};function tY(n,e){if(1&n&&(rp(0),op(1,7),bs(2,eY,1,0,"div",8),sp()),2&n){const t=e.$implicit,r=e.index,s=e.last;oa(2);const c=Xg(4);Vr(1),is("ngTemplateOutlet",c)("ngTemplateOutletContext",IA(3,wB,t,r)),Vr(1),is("ngIf",!s)}}function nY(n,e){if(1&n){const t=Kg();Kr(0,"div",10),Fo("@horizontalStepTransition.done",function(s){return nc(t),oa(2)._animationDone.next(s)}),op(1,11),us()}if(2&n){const t=e.$implicit,r=e.index,s=oa(2);is("@horizontalStepTransition",s._getAnimationDirection(r))("id",s._getStepContentId(r)),Da("aria-labelledby",s._getStepLabelId(r))("aria-expanded",s.selectedIndex===r),Vr(1),is("ngTemplateOutlet",t.content)}}function iY(n,e){if(1&n&&(rp(0),Kr(1,"div",3),bs(2,tY,3,6,"ng-container",4),us(),Kr(3,"div",5),bs(4,nY,2,5,"div",6),us(),sp()),2&n){const t=oa();Vr(2),is("ngForOf",t.steps),Vr(2),is("ngForOf",t.steps)}}function rY(n,e){if(1&n){const t=Kg();Kr(0,"div",13),op(1,7),Kr(2,"div",14)(3,"div",15),Fo("@verticalStepTransition.done",function(s){return nc(t),oa(2)._animationDone.next(s)}),Kr(4,"div",16),op(5,11),us()()()()}if(2&n){const t=e.$implicit,r=e.index,s=e.last,c=oa(2),h=Xg(4);Vr(1),is("ngTemplateOutlet",h)("ngTemplateOutletContext",IA(9,wB,t,r)),Vr(1),Gt("mat-stepper-vertical-line",!s),Vr(1),is("@verticalStepTransition",c._getAnimationDirection(r))("id",c._getStepContentId(r)),Da("aria-labelledby",c._getStepLabelId(r))("aria-expanded",c.selectedIndex===r),Vr(2),is("ngTemplateOutlet",t.content)}}function sY(n,e){if(1&n&&(rp(0),bs(1,rY,6,12,"div",12),sp()),2&n){const t=oa();Vr(1),is("ngForOf",t.steps)}}function oY(n,e){if(1&n){const t=Kg();Kr(0,"mat-step-header",17),Fo("click",function(){return nc(t).step.select()})("keydown",function(s){return nc(t),oa()._onKeydown(s)}),us()}if(2&n){const t=e.step,r=e.i,s=oa();Gt("mat-horizontal-stepper-header","horizontal"===s.orientation)("mat-vertical-stepper-header","vertical"===s.orientation),is("tabIndex",s._getFocusIndex()===r?0:-1)("id",s._getStepLabelId(r))("index",r)("state",s._getIndicatorType(r,t.state))("label",t.stepLabel||t.label)("selected",s.selectedIndex===r)("active",s._stepIsNavigable(r,t))("optional",t.optional)("errorMessage",t.errorMessage)("iconOverrides",s._iconOverrides)("disableRipple",s.disableRipple||!s._stepIsNavigable(r,t))("color",t.color||s.color),Da("aria-posinset",r+1)("aria-setsize",s.steps.length)("aria-controls",s._getStepContentId(r))("aria-selected",s.selectedIndex==r)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null)("aria-disabled",!s._stepIsNavigable(r,t)||null)}}let p2=(()=>{class n extends bB{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Sa(n)))(r||n)}}(),n.\u0275dir=mi({type:n,selectors:[["","matStepLabel",""]],features:[cs]}),n})(),mE=(()=>{class n{constructor(){this.changes=new Xt,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lY={provide:mE,deps:[[new Xc,new Jh,mE]],useFactory:function aY(n){return n||new mE}},cY=sE(class extends yB{constructor(e){super(e)}},"primary");let MB=(()=>{class n extends cY{constructor(t,r,s,c){super(s),this._intl=t,this._focusMonitor=r,this._intlSubscription=t.changes.subscribe(()=>c.markForCheck())}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._intlSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._elementRef,t,r):this._elementRef.nativeElement.focus(r)}_stringLabel(){return this.label instanceof p2?null:this.label}_templateLabel(){return this.label instanceof p2?this.label:null}_getHostElement(){return this._elementRef.nativeElement}_getIconContext(){return{index:this.index,active:this.active,optional:this.optional}}_getDefaultTextForState(t){return"number"==t?`${this.index+1}`:"edit"==t?"create":"error"==t?"warning":t}}return n.\u0275fac=function(t){return new(t||n)(Ot(mE),Ot(Ub),Ot(Jo),Ot(Ah))},n.\u0275cmp=rr({type:n,selectors:[["mat-step-header"]],hostAttrs:["role","tab",1,"mat-step-header"],inputs:{color:"color",state:"state",label:"label",errorMessage:"errorMessage",iconOverrides:"iconOverrides",index:"index",selected:"selected",active:"active",optional:"optional",disableRipple:"disableRipple"},features:[cs],decls:10,vars:19,consts:[["matRipple","",1,"mat-step-header-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-step-icon-content",3,"ngSwitch"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngSwitchCase"],[3,"ngSwitch",4,"ngSwitchDefault"],[1,"mat-step-label"],["class","mat-step-text-label",4,"ngIf"],["class","mat-step-optional",4,"ngIf"],["class","mat-step-sub-label-error",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch"],["aria-hidden","true",4,"ngSwitchCase"],["class","cdk-visually-hidden",4,"ngIf"],["aria-hidden","true",4,"ngSwitchDefault"],["aria-hidden","true"],[1,"cdk-visually-hidden"],[1,"mat-step-text-label"],[3,"ngTemplateOutlet"],[1,"mat-step-optional"],[1,"mat-step-sub-label-error"]],template:function(t,r){1&t&&(sc(0,"div",0),Kr(1,"div")(2,"div",1),bs(3,VZ,1,2,"ng-container",2),bs(4,jZ,5,4,"ng-container",3),us()(),Kr(5,"div",4),bs(6,ZZ,2,1,"div",5),bs(7,YZ,2,1,"div",5),bs(8,XZ,2,1,"div",6),bs(9,JZ,2,1,"div",7),us()),2&t&&(is("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disableRipple),Vr(1),_r("mat-step-icon-state-",r.state," mat-step-icon"),Gt("mat-step-icon-selected",r.selected),Vr(1),is("ngSwitch",!(!r.iconOverrides||!r.iconOverrides[r.state])),Vr(1),is("ngSwitchCase",!0),Vr(2),Gt("mat-step-label-active",r.active)("mat-step-label-selected",r.selected)("mat-step-label-error","error"==r.state),Vr(1),is("ngIf",r._templateLabel()),Vr(1),is("ngIf",r._stringLabel()),Vr(1),is("ngIf",r.optional&&"error"!=r.state),Vr(1),is("ngIf","error"==r.state))},directives:[gB,M1,n1,mI,gI,AF,t1],styles:[".mat-step-header{overflow:hidden;outline:none;cursor:pointer;position:relative;box-sizing:content-box;-webkit-tap-highlight-color:transparent}.cdk-high-contrast-active .mat-step-header{outline:solid 1px}.cdk-high-contrast-active .mat-step-header.cdk-keyboard-focused,.cdk-high-contrast-active .mat-step-header.cdk-program-focused{outline:solid 3px}.cdk-high-contrast-active .mat-step-header[aria-selected=true] .mat-step-label{text-decoration:underline}.mat-step-optional,.mat-step-sub-label-error{font-size:12px}.mat-step-icon{border-radius:50%;height:24px;width:24px;flex-shrink:0;position:relative}.mat-step-icon-content{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);display:flex}.mat-step-icon .mat-icon{font-size:16px;height:16px;width:16px}.mat-step-icon-state-error .mat-icon{font-size:24px;height:24px;width:24px}.mat-step-label{display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:50px;vertical-align:middle}.mat-step-text-label{text-overflow:ellipsis;overflow:hidden}.mat-step-header .mat-step-header-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,changeDetection:0}),n})();const CB={horizontalStepTransition:jb("horizontalStepTransition",[hf("previous",Cc({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"})),hf("current",Cc({transform:"none",visibility:"inherit"})),hf("next",Cc({transform:"translate3d(100%, 0, 0)",visibility:"hidden"})),s_("* => *",r_("500ms cubic-bezier(0.35, 0, 0.25, 1)"))]),verticalStepTransition:jb("verticalStepTransition",[hf("previous",Cc({height:"0px",visibility:"hidden"})),hf("next",Cc({height:"0px",visibility:"hidden"})),hf("current",Cc({height:"*",visibility:"inherit"})),s_("* <=> current",r_("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])};let uY=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(Ot(zu))},n.\u0275dir=mi({type:n,selectors:[["ng-template","matStepperIcon",""]],inputs:{name:["matStepperIcon","name"]}}),n})(),hY=(()=>{class n{constructor(t){this._template=t}}return n.\u0275fac=function(t){return new(t||n)(Ot(zu))},n.\u0275dir=mi({type:n,selectors:[["ng-template","matStepContent",""]]}),n})(),SB=(()=>{class n extends f2{constructor(t,r,s,c){super(t,c),this._errorStateMatcher=r,this._viewContainerRef=s,this._isSelected=p.EMPTY}ngAfterContentInit(){this._isSelected=this._stepper.steps.changes.pipe(hp(()=>this._stepper.selectionChange.pipe(ti(t=>t.selectedStep===this),Rm(this._stepper.selected===this)))).subscribe(t=>{t&&this._lazyContent&&!this._portal&&(this._portal=new rE(this._lazyContent._template,this._viewContainerRef))})}ngOnDestroy(){this._isSelected.unsubscribe()}isErrorState(t,r){return this._errorStateMatcher.isErrorState(t,r)||!!(t&&t.invalid&&this.interacted)}}return n.\u0275fac=function(t){return new(t||n)(Ot(Vi(()=>TB)),Ot(oE,4),Ot(rh),Ot(xB,8))},n.\u0275cmp=rr({type:n,selectors:[["mat-step"]],contentQueries:function(t,r,s){if(1&t&&(Vu(s,p2,5),Vu(s,hY,5)),2&t){let c;Va(c=Ua())&&(r.stepLabel=c.first),Va(c=Ua())&&(r._lazyContent=c.first)}},inputs:{color:"color"},exportAs:["matStep"],features:[va([{provide:oE,useExisting:n},{provide:f2,useExisting:n}]),cs],ngContentSelectors:$Z,decls:1,vars:0,consts:[[3,"cdkPortalOutlet"]],template:function(t,r){1&t&&(tf(),bs(0,QZ,2,1,"ng-template"))},directives:[QR],encapsulation:2,changeDetection:0}),n})(),EB=(()=>{class n extends pE{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Sa(n)))(r||n)}}(),n.\u0275dir=mi({type:n,features:[cs]}),n})(),dY=(()=>{class n extends EB{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Sa(n)))(r||n)}}(),n.\u0275dir=mi({type:n,selectors:[["mat-horizontal-stepper"]],features:[cs]}),n})(),fY=(()=>{class n extends EB{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Sa(n)))(r||n)}}(),n.\u0275dir=mi({type:n,selectors:[["mat-vertical-stepper"]],features:[cs]}),n})(),TB=(()=>{class n extends pE{constructor(t,r,s,c){super(t,r,s,c),this.steps=new Sm,this.animationDone=new Ho,this.labelPosition="end",this._iconOverrides={},this._animationDone=new Xt;const h=s.nativeElement.nodeName.toLowerCase();this.orientation="mat-vertical-stepper"===h?"vertical":"horizontal"}ngAfterContentInit(){super.ngAfterContentInit(),this._icons.forEach(({name:t,templateRef:r})=>this._iconOverrides[t]=r),this.steps.changes.pipe(uf(this._destroyed)).subscribe(()=>{this._stateChanged()}),this._animationDone.pipe(p3((t,r)=>t.fromState===r.fromState&&t.toState===r.toState),uf(this._destroyed)).subscribe(t=>{"current"===t.toState&&this.animationDone.emit()})}_stepIsNavigable(t,r){return r.completed||this.selectedIndex===t||!this.linear}}return n.\u0275fac=function(t){return new(t||n)(Ot(Gb,8),Ot(Ah),Ot(Jo),Ot(js))},n.\u0275cmp=rr({type:n,selectors:[["mat-stepper"],["mat-vertical-stepper"],["mat-horizontal-stepper"],["","matStepper",""]],contentQueries:function(t,r,s){if(1&t&&(Vu(s,SB,5),Vu(s,uY,5)),2&t){let c;Va(c=Ua())&&(r._steps=c),Va(c=Ua())&&(r._icons=c)}},viewQuery:function(t,r){if(1&t&&cd(MB,5),2&t){let s;Va(s=Ua())&&(r._stepHeader=s)}},hostAttrs:["role","tablist"],hostVars:9,hostBindings:function(t,r){2&t&&(Da("aria-orientation",r.orientation),Gt("mat-stepper-horizontal","horizontal"===r.orientation)("mat-stepper-vertical","vertical"===r.orientation)("mat-stepper-label-position-end","horizontal"===r.orientation&&"end"==r.labelPosition)("mat-stepper-label-position-bottom","horizontal"===r.orientation&&"bottom"==r.labelPosition))},inputs:{selectedIndex:"selectedIndex",disableRipple:"disableRipple",color:"color",labelPosition:"labelPosition"},outputs:{animationDone:"animationDone"},exportAs:["matStepper","matVerticalStepper","matHorizontalStepper"],features:[va([{provide:pE,useExisting:n},{provide:dY,useExisting:n},{provide:fY,useExisting:n}]),cs],decls:5,vars:3,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],["stepTemplate",""],[1,"mat-horizontal-stepper-header-container"],[4,"ngFor","ngForOf"],[1,"mat-horizontal-content-container"],["class","mat-horizontal-stepper-content","role","tabpanel",3,"id",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","mat-stepper-horizontal-line",4,"ngIf"],[1,"mat-stepper-horizontal-line"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id"],[3,"ngTemplateOutlet"],["class","mat-step",4,"ngFor","ngForOf"],[1,"mat-step"],[1,"mat-vertical-content-container"],["role","tabpanel",1,"mat-vertical-stepper-content",3,"id"],[1,"mat-vertical-content"],[3,"tabIndex","id","index","state","label","selected","active","optional","errorMessage","iconOverrides","disableRipple","color","click","keydown"]],template:function(t,r){1&t&&(rp(0,0),bs(1,iY,5,2,"ng-container",1),bs(2,sY,2,1,"ng-container",1),sp(),bs(3,oY,1,23,"ng-template",null,2,ML)),2&t&&(is("ngSwitch",r.orientation),Vr(1),is("ngSwitchCase","horizontal"),Vr(1),is("ngSwitchCase","vertical"))},directives:[MB,n1,mI,fI,gI,t1],styles:['.mat-stepper-vertical,.mat-stepper-horizontal{display:block}.mat-horizontal-stepper-header-container{white-space:nowrap;display:flex;align-items:center}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header-container{align-items:flex-start}.mat-stepper-horizontal-line{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin:0 -16px;min-width:32px}.mat-stepper-label-position-bottom .mat-stepper-horizontal-line{margin:0;min-width:0;position:relative}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{border-top-width:1px;border-top-style:solid;content:"";display:inline-block;height:0;position:absolute;width:calc(50% - 20px)}.mat-horizontal-stepper-header{display:flex;height:72px;overflow:hidden;align-items:center;padding:0 24px}.mat-horizontal-stepper-header .mat-step-icon{margin-right:8px;flex:none}[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:8px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{box-sizing:border-box;flex-direction:column;height:auto}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{right:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before{left:0}[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:last-child::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:first-child::after{display:none}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-label{padding:16px 0 0 0;text-align:center;width:100%}.mat-vertical-stepper-header{display:flex;align-items:center;height:24px}.mat-vertical-stepper-header .mat-step-icon{margin-right:12px}[dir=rtl] .mat-vertical-stepper-header .mat-step-icon{margin-right:0;margin-left:12px}.mat-horizontal-stepper-content{outline:0}.mat-horizontal-stepper-content[aria-expanded=false]{height:0;overflow:hidden}.mat-horizontal-content-container{overflow:hidden;padding:0 24px 24px 24px}.cdk-high-contrast-active .mat-horizontal-content-container{outline:solid 1px}.mat-vertical-content-container{margin-left:36px;border:0;position:relative}.cdk-high-contrast-active .mat-vertical-content-container{outline:solid 1px}[dir=rtl] .mat-vertical-content-container{margin-left:0;margin-right:36px}.mat-stepper-vertical-line::before{content:"";position:absolute;left:0;border-left-width:1px;border-left-style:solid}[dir=rtl] .mat-stepper-vertical-line::before{left:auto;right:0}.mat-vertical-stepper-content{overflow:hidden;outline:0}.mat-vertical-content{padding:0 24px 24px 24px}.mat-step:last-child .mat-vertical-content-container{border:none}\n'],encapsulation:2,data:{animation:[CB.horizontalStepTransition,CB.verticalStepTransition]},changeDetection:0}),n})(),pY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({providers:[lY,oE],imports:[[Sc,aS,$R,vB,zZ,_B,aE],Sc]}),n})(),mY=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({providers:[mY]}),n})(),m2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({imports:[[aS,Sc,gY],Sc]}),n})(),DB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({}),n})(),xY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({providers:[oE],imports:[[DB,m2,Sc],DB,m2]}),n})();function AB(n,e){return e?t=>lE(e.pipe(oh(1),function wY(){return Mn((n,e)=>{n.subscribe(Sn(e,V))})}()),t.pipe(AB(n))):sn((t,r)=>n(t,r).pipe(oh(1),function MY(n){return ti(()=>n)}(t)))}function IB(n,e=d1){const t=lR(n,e);return AB(()=>t)}const CY=["mat-menu-item",""];function SY(n,e){1&n&&(function Bd(){Fn.lFrame.currentNamespace="svg"}(),Kr(0,"svg",2),sc(1,"polygon",3),us())}const RB=["*"];function EY(n,e){if(1&n){const t=Kg();Kr(0,"div",0),Fo("keydown",function(s){return nc(t),oa()._handleKeydown(s)})("click",function(){return nc(t),oa().closed.emit("click")})("@transformMenu.start",function(s){return nc(t),oa()._onAnimationStart(s)})("@transformMenu.done",function(s){return nc(t),oa()._onAnimationDone(s)}),Kr(1,"div",1),ad(2),us()()}if(2&n){const t=oa();is("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),Da("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const gE={transformMenu:jb("transformMenu",[hf("void",Cc({opacity:0,transform:"scale(0.8)"})),s_("void => enter",r_("120ms cubic-bezier(0, 0, 0.2, 1)",Cc({opacity:1,transform:"scale(1)"}))),s_("* => void",r_("100ms 25ms linear",Cc({opacity:0})))]),fadeInItems:jb("fadeInItems",[hf("showing",Cc({opacity:1})),s_("void => *",[Cc({opacity:0}),r_("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},TY=new bi("MatMenuContent"),g2=new bi("MAT_MENU_PANEL"),DY=r2(rB(class{}));let _E=(()=>{class n extends DY{constructor(t,r,s,c,h){var _;super(),this._elementRef=t,this._document=r,this._focusMonitor=s,this._parentMenu=c,this._changeDetectorRef=h,this.role="menuitem",this._hovered=new Xt,this._focused=new Xt,this._highlighted=!1,this._triggersSubmenu=!1,null===(_=null==c?void 0:c.addItem)||void 0===_||_.call(c,this)}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var t;const r=this._elementRef.nativeElement.cloneNode(!0),s=r.querySelectorAll("mat-icon, .material-icons");for(let c=0;c<s.length;c++)s[c].remove();return(null===(t=r.textContent)||void 0===t?void 0:t.trim())||""}_setHighlighted(t){var r;this._highlighted=t,null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(t){return new(t||n)(Ot(Jo),Ot(js),Ot(Ub),Ot(g2,8),Ot(Ah))},n.\u0275cmp=rr({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,r){1&t&&Fo("click",function(c){return r._checkDisabled(c)})("mouseenter",function(){return r._handleMouseEnter()}),2&t&&(Da("role",r.role)("tabindex",r._getTabIndex())("aria-disabled",r.disabled.toString())("disabled",r.disabled||null),Gt("mat-menu-item",!0)("mat-menu-item-highlighted",r._highlighted)("mat-menu-item-submenu-trigger",r._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[cs],attrs:CY,ngContentSelectors:RB,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,r){1&t&&(tf(),ad(0),sc(1,"div",0),bs(2,SY,2,0,"svg",1)),2&t&&(Vr(1),is("matRippleDisabled",r.disableRipple||r.disabled)("matRippleTrigger",r._getHostElement()),Vr(1),is("ngIf",r._triggersSubmenu))},directives:[M1,t1],encapsulation:2,changeDetection:0}),n})();const kB=new bi("mat-menu-default-options",{providedIn:"root",factory:function AY(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let IY=0,T1=(()=>{class n{constructor(t,r,s,c){this._elementRef=t,this._ngZone=r,this._defaultOptions=s,this._changeDetectorRef=c,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new Sm,this._tabSubscription=p.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new Xt,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new Ho,this.close=this.closed,this.panelId="mat-menu-panel-"+IY++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=_u(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=_u(t)}set panelClass(t){const r=this._previousPanelClass;r&&r.length&&r.split(" ").forEach(s=>{this._classList[s]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(s=>{this._classList[s]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new _3(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Rm(this._directDescendantItems),hp(t=>Eo(...t.map(r=>r._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{var r;const s=this._keyManager;if("enter"===this._panelAnimationState&&(null===(r=s.activeItem)||void 0===r?void 0:r._hasFocus())){const c=t.toArray(),h=Math.max(0,Math.min(c.length-1,s.activeItemIndex||0));c[h]&&!c[h].disabled?s.setActiveItem(h):s.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(Rm(this._directDescendantItems),hp(r=>Eo(...r.map(s=>s._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const r=t.keyCode,s=this._keyManager;switch(r){case 27:ES(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===r||40===r)&&s.setFocusOrigin("keyboard"),void s.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._ngZone.onStable.pipe(oh(1)).subscribe(()=>{let r=null;if(this._directDescendantItems.length&&(r=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!r||!r.contains(document.activeElement)){const s=this._keyManager;s.setFocusOrigin(t).setFirstItemActive(),!s.activeItem&&r&&r.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const r=Math.min(this._baseElevation+t,24),s=`${this._elevationPrefix}${r}`,c=Object.keys(this._classList).find(h=>h.startsWith(this._elevationPrefix));(!c||c===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[s]=!0,this._previousElevation=s)}setPositionClasses(t=this.xPosition,r=this.yPosition){var s;const c=this._classList;c["mat-menu-before"]="before"===t,c["mat-menu-after"]="after"===t,c["mat-menu-above"]="above"===r,c["mat-menu-below"]="below"===r,null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Rm(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(r=>r._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(t){return new(t||n)(Ot(Jo),Ot(vo),Ot(kB),Ot(Ah))},n.\u0275dir=mi({type:n,contentQueries:function(t,r,s){if(1&t&&(Vu(s,TY,5),Vu(s,_E,5),Vu(s,_E,4)),2&t){let c;Va(c=Ua())&&(r.lazyContent=c.first),Va(c=Ua())&&(r._allItems=c),Va(c=Ua())&&(r.items=c)}},viewQuery:function(t,r){if(1&t&&cd(zu,5),2&t){let s;Va(s=Ua())&&(r.templateRef=s.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),RY=(()=>{class n extends T1{constructor(t,r,s,c){super(t,r,s,c),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(t){return new(t||n)(Ot(Jo),Ot(vo),Ot(kB),Ot(Ah))},n.\u0275cmp=rr({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,r){2&t&&Da("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[va([{provide:g2,useExisting:n}]),cs],ngContentSelectors:RB,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,r){1&t&&(tf(),bs(0,EY,3,6,"ng-template"))},directives:[EF],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::before{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[gE.transformMenu,gE.fadeInItems]},changeDetection:0}),n})();const PB=new bi("mat-menu-scroll-strategy"),PY={provide:PB,deps:[Kb],useFactory:function kY(n){return()=>n.scrollStrategies.reposition()}},FB=i_({passive:!0});let LY=(()=>{class n{constructor(t,r,s,c,h,_,S,A,O){this._overlay=t,this._element=r,this._viewContainerRef=s,this._menuItemInstance=_,this._dir=S,this._focusMonitor=A,this._ngZone=O,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=p.EMPTY,this._hoverSubscription=p.EMPTY,this._menuCloseSubscription=p.EMPTY,this._handleTouchStart=G=>{AS(G)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new Ho,this.onMenuOpen=this.menuOpened,this.menuClosed=new Ho,this.onMenuClose=this.menuClosed,this._scrollStrategy=c,this._parentMaterialMenu=h instanceof T1?h:void 0,r.nativeElement.addEventListener("touchstart",this._handleTouchStart,FB),_&&(_._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(r=>{this._destroyMenu(r),("click"===r||"tab"===r)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(r)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,FB),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const t=this._createOverlay(),r=t.getConfig(),s=r.positionStrategy;this._setPosition(s),r.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,t.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof T1&&(this.menu._startAnimation(),this.menu._directDescendantItems.changes.pipe(uf(this.menu.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu.close.emit()}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,r):this._element.nativeElement.focus(r)}updatePosition(){var t;null===(t=this._overlayRef)||void 0===t||t.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const r=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,r instanceof T1?(r._resetAnimation(),r.lazyContent?r._animationDone.pipe(Fc(s=>"void"===s.toState),oh(1),uf(r.lazyContent._attached)).subscribe({next:()=>r.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),r.lazyContent&&r.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let t=0,r=this.menu.parentMenu;for(;r;)t++,r=r.parentMenu;this.menu.setElevation(t)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new t2({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t){this.menu.setPositionClasses&&t.positionChanges.subscribe(r=>{const s="start"===r.connectionPair.overlayX?"after":"before",c="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>this.menu.setPositionClasses(s,c)):this.menu.setPositionClasses(s,c)})}_setPosition(t){let[r,s]="before"===this.menu.xPosition?["end","start"]:["start","end"],[c,h]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[_,S]=[c,h],[A,O]=[r,s],G=0;this.triggersSubmenu()?(O=r="before"===this.menu.xPosition?"start":"end",s=A="end"===r?"start":"end",G="bottom"===c?8:-8):this.menu.overlapTrigger||(_="top"===c?"bottom":"top",S="top"===h?"bottom":"top"),t.withPositions([{originX:r,originY:_,overlayX:A,overlayY:c,offsetY:G},{originX:s,originY:_,overlayX:O,overlayY:c,offsetY:G},{originX:r,originY:S,overlayX:A,overlayY:h,offsetY:-G},{originX:s,originY:S,overlayX:O,overlayY:h,offsetY:-G}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),r=this._overlayRef.detachments();return Eo(t,this._parentMaterialMenu?this._parentMaterialMenu.closed:$r(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Fc(h=>h!==this._menuItemInstance),Fc(()=>this._menuOpen)):$r(),r)}_handleMousedown(t){DS(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const r=t.keyCode;(13===r||32===r)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===r&&"ltr"===this.dir||37===r&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Fc(t=>t===this._menuItemInstance&&!t.disabled),IB(0,hR)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof T1&&this.menu._isAnimating?this.menu._animationDone.pipe(oh(1),IB(0,hR),uf(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new rE(this.menu.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(t){return new(t||n)(Ot(Kb),Ot(Jo),Ot(rh),Ot(PB),Ot(g2,8),Ot(_E,10),Ot(Gb,8),Ot(Ub),Ot(vo))},n.\u0275dir=mi({type:n,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(t,r){1&t&&Fo("click",function(c){return r._handleClick(c)})("mousedown",function(c){return r._handleMousedown(c)})("keydown",function(c){return r._handleKeydown(c)}),2&t&&Da("aria-expanded",r.menuOpen||null)("aria-controls",r.menuOpen?r.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),FY=(()=>{class n extends LY{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Sa(n)))(r||n)}}(),n.\u0275dir=mi({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[cs]}),n})(),OY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({providers:[PY],imports:[[aS,Sc,aE,tB],PS,Sc]}),n})();const NY=["*",[["mat-toolbar-row"]]],BY=["*","mat-toolbar-row"],HY=sE(class{constructor(n){this._elementRef=n}});let zY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=mi({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),VY=(()=>{class n extends HY{constructor(t,r,s){super(t),this._platform=r,this._document=s}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(Ot(Jo),Ot(lf),Ot(js))},n.\u0275cmp=rr({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,s){if(1&t&&Vu(s,zY,5),2&t){let c;Va(c=Ua())&&(r._toolbarRows=c)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&Gt("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[cs],ngContentSelectors:BY,decls:2,vars:0,template:function(t,r){1&t&&(tf(NY),ad(0),ad(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),UY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({imports:[[Sc],Sc]}),n})(),GY=(()=>{class n{constructor(){this._listeners=[]}notify(t,r){for(let s of this._listeners)s(t,r)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(r=>t!==r)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const WY=["input"],qY=function(n){return{enterDuration:n}},jY=["*"],ZY=new bi("mat-radio-default-options",{providedIn:"root",factory:function YY(){return{color:"accent"}}});let OB=0;const XY={provide:af,useExisting:Vi(()=>_2),multi:!0};class NB{constructor(e,t){this.source=e,this.value=t}}const BB=new bi("MatRadioGroup");let JY=(()=>{class n{constructor(t){this._changeDetector=t,this._value=null,this._name="mat-radio-group-"+OB++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new Ho}get name(){return this._name}set name(t){this._name=t,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(t){this._labelPosition="before"===t?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(t){this._selected=t,this.value=t?t.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(t){this._disabled=_u(t),this._markRadiosForCheck()}get required(){return this._required}set required(t){this._required=_u(t),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(t=>{t.name=this.name,t._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(r=>{r.checked=this.value===r.value,r.checked&&(this._selected=r)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new NB(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(t=>t._markForCheck())}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetector.markForCheck()}}return n.\u0275fac=function(t){return new(t||n)(Ot(Ah))},n.\u0275dir=mi({type:n,inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required"},outputs:{change:"change"}}),n})(),_2=(()=>{class n extends JY{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Sa(n)))(r||n)}}(),n.\u0275dir=mi({type:n,selectors:[["mat-radio-group"]],contentQueries:function(t,r,s){if(1&t&&Vu(s,v2,5),2&t){let c;Va(c=Ua())&&(r._radios=c)}},hostAttrs:["role","radiogroup",1,"mat-radio-group"],exportAs:["matRadioGroup"],features:[va([XY,{provide:BB,useExisting:n}]),cs]}),n})();class KY{constructor(e){this._elementRef=e}}const QY=r2(eZ(KY));let $Y=(()=>{class n extends QY{constructor(t,r,s,c,h,_,S,A){super(r),this._changeDetector=s,this._focusMonitor=c,this._radioDispatcher=h,this._providerOverride=S,this._uniqueId="mat-radio-"+ ++OB,this.id=this._uniqueId,this.change=new Ho,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=t,this._noopAnimations="NoopAnimations"===_,A&&(this.tabIndex=nR(A,0)),this._removeUniqueSelectionListener=h.listen((O,G)=>{O!==this.id&&G===this.name&&(this.checked=!1)})}get checked(){return this._checked}set checked(t){const r=_u(t);this._checked!==r&&(this._checked=r,r&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!r&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),r&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===t),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(t){this._labelPosition=t}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(t){this._setDisabled(_u(t))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(t){this._required=_u(t)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(t){this._color=t}get inputId(){return`${this.id||this._uniqueId}-input`}focus(t,r){r?this._focusMonitor.focusVia(this._inputElement,r,t):this._inputElement.nativeElement.focus(t)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name)}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{!t&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new NB(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(t){t.stopPropagation()}_onInputInteraction(t){if(t.stopPropagation(),!this.checked&&!this.disabled){const r=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),r&&this.radioGroup._emitChangeEvent())}}_setDisabled(t){this._disabled!==t&&(this._disabled=t,this._changeDetector.markForCheck())}_updateTabIndex(){var t;const r=this.radioGroup;let s;if(s=r&&r.selected&&!this.disabled?r.selected===this?this.tabIndex:-1:this.tabIndex,s!==this._previousTabIndex){const c=null===(t=this._inputElement)||void 0===t?void 0:t.nativeElement;c&&(c.setAttribute("tabindex",s+""),this._previousTabIndex=s)}}}return n.\u0275fac=function(t){Pv()},n.\u0275dir=mi({type:n,viewQuery:function(t,r){if(1&t&&cd(WY,5),2&t){let s;Va(s=Ua())&&(r._inputElement=s.first)}},inputs:{id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"},features:[cs]}),n})(),v2=(()=>{class n extends $Y{constructor(t,r,s,c,h,_,S,A){super(t,r,s,c,h,_,S,A)}}return n.\u0275fac=function(t){return new(t||n)(Ot(BB,8),Ot(Jo),Ot(Ah),Ot(Ub),Ot(GY),Ot(Xb,8),Ot(ZY,8),Xh("tabindex"))},n.\u0275cmp=rr({type:n,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(t,r){1&t&&Fo("focus",function(){return r._inputElement.nativeElement.focus()}),2&t&&(Da("tabindex",null)("id",r.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),Gt("mat-radio-checked",r.checked)("mat-radio-disabled",r.disabled)("_mat-animation-noopable",r._noopAnimations)("mat-primary","primary"===r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[cs],ngContentSelectors:jY,decls:13,vars:19,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input",3,"id","checked","disabled","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(t,r){if(1&t&&(tf(),Kr(0,"label",0,1)(2,"span",2),sc(3,"span",3)(4,"span",4),Kr(5,"input",5,6),Fo("change",function(c){return r._onInputInteraction(c)})("click",function(c){return r._onInputClick(c)}),us(),Kr(7,"span",7),sc(8,"span",8),us()(),Kr(9,"span",9)(10,"span",10),ni(11,"\xa0"),us(),ad(12),us()()),2&t){const s=Xg(1);Da("for",r.inputId),Vr(5),is("id",r.inputId)("checked",r.checked)("disabled",r.disabled)("required",r.required),Da("name",r.name)("value",r.value)("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedby),Vr(2),is("matRippleTrigger",s)("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",cL(17,qY,r._noopAnimations?0:150)),Vr(2),Gt("mat-radio-label-before","before"==r.labelPosition)}},directives:[M1],styles:[".mat-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.mat-radio-label{-webkit-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;opacity:0;transition:transform ease 280ms,background-color ease 280ms,opacity linear 1ms 280ms;width:20px;transform:scale(0.001);-webkit-print-color-adjust:exact;color-adjust:exact}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5);opacity:1;transition:transform ease 280ms,background-color ease 280ms}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-label-content{-webkit-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none;top:0;left:0}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{opacity:0;position:absolute;top:0;left:0;margin:0;width:100%;height:100%;cursor:inherit;z-index:-1}.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-ripple,.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-ripple{outline:solid 3px}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}\n"],encapsulation:2,changeDetection:0}),n})(),eX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({imports:[[aE,Sc],Sc]}),n})(),tX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({}),n})();function HB(n,e,t){n?Kt(t,n,e):e()}const vE=o(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function zB(){return Mn((n,e)=>{let t=null;n._refCount++;const r=Sn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,c=t;t=null,s&&(!c||s===c)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class rX extends _n{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Li(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new p;const t=this.getSubject();e.add(this.source.subscribe(Sn(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=p.EMPTY)}return e}refCount(){return zB()(this)}}function sX(n,e,t,r,s){return(c,h)=>{let _=t,S=e,A=0;c.subscribe(Sn(h,O=>{const G=A++;S=_?n(S,O,G):(_=!0,O),r&&h.next(S)},s&&(()=>{_&&h.next(S),h.complete()})))}}function VB(n,e){return Mn(sX(n,e,arguments.length>=2,!0))}function y2(n){return n<=0?()=>Qn:Mn((e,t)=>{let r=[];e.subscribe(Sn(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function UB(n=oX){return Mn((e,t)=>{let r=!1;e.subscribe(Sn(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function oX(){return new vE}function GB(n){return Mn((e,t)=>{let r=!1;e.subscribe(Sn(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Qb(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Fc((s,c)=>n(s,c,r)):Ze,oh(1),t?GB(e):UB(()=>new vE))}class Lm{constructor(e,t){this.id=e,this.url=t}}class b2 extends Lm{constructor(e,t,r="imperative",s=null){super(e,t),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class D1 extends Lm{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class WB extends Lm{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class lX extends Lm{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class cX extends Lm{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uX extends Lm{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hX extends Lm{constructor(e,t,r,s,c){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class dX extends Lm{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fX extends Lm{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qB{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class jB{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class pX{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mX{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gX{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _X{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZB{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const lo="primary";class vX{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function $b(n){return new vX(n)}const YB="ngNavigationCancelingError";function x2(n){const e=Error("NavigationCancelingError: "+n);return e[YB]=!0,e}function bX(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let c=0;c<r.length;c++){const h=r[c],_=n[c];if(h.startsWith(":"))s[h.substring(1)]=_;else if(h!==_.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function dp(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let c=0;c<t.length;c++)if(s=t[c],!XB(n[s],e[s]))return!1;return!0}function XB(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,c)=>r[c]===s)}return n===e}function JB(n){return Array.prototype.concat.apply([],n)}function KB(n){return n.length>0?n[n.length-1]:null}function iu(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function fp(n){return Rw(n)?n:Lv(n)?Ws(Promise.resolve(n)):$r(n)}const MX={exact:function eH(n,e,t){if(!Jv(n.segments,e.segments)||!yE(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!eH(n.children[r],e.children[r],t))return!1;return!0},subset:tH},QB={exact:function CX(n,e){return dp(n,e)},subset:function SX(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>XB(n[t],e[t]))},ignored:()=>!0};function $B(n,e,t){return MX[t.paths](n.root,e.root,t.matrixParams)&&QB[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function tH(n,e,t){return nH(n,e,e.segments,t)}function nH(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Jv(s,t)||e.hasChildren()||!yE(s,t,r))}if(n.segments.length===t.length){if(!Jv(n.segments,t)||!yE(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!tH(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),c=t.slice(n.segments.length);return!!(Jv(n.segments,s)&&yE(n.segments,s,r)&&n.children[lo])&&nH(n.children[lo],e,c,r)}}function yE(n,e,t){return e.every((r,s)=>QB[t](n[s].parameters,r.parameters))}class Xv{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$b(this.queryParams)),this._queryParamMap}toString(){return DX.serialize(this)}}class bo{constructor(e,t){this.segments=e,this.children=t,this.parent=null,iu(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bE(this)}}class A1{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=$b(this.parameters)),this._parameterMap}toString(){return aH(this)}}function Jv(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class iH{}class rH{parse(e){const t=new NX(e);return new Xv(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${I1(e.root,!0)}`,r=function RX(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${xE(t)}=${xE(s)}`).join("&"):`${xE(t)}=${xE(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function AX(n){return encodeURI(n)}(e.fragment)}`:""}`}}const DX=new rH;function bE(n){return n.segments.map(e=>aH(e)).join("/")}function I1(n,e){if(!n.hasChildren())return bE(n);if(e){const t=n.children[lo]?I1(n.children[lo],!1):"",r=[];return iu(n.children,(s,c)=>{c!==lo&&r.push(`${c}:${I1(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function TX(n,e){let t=[];return iu(n.children,(r,s)=>{s===lo&&(t=t.concat(e(r,s)))}),iu(n.children,(r,s)=>{s!==lo&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===lo?[I1(n.children[lo],!1)]:[`${s}:${I1(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[lo]?`${bE(n)}/${t[0]}`:`${bE(n)}/(${t.join("//")})`}}function sH(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xE(n){return sH(n).replace(/%3B/gi,";")}function w2(n){return sH(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wE(n){return decodeURIComponent(n)}function oH(n){return wE(n.replace(/\+/g,"%20"))}function aH(n){return`${w2(n.path)}${function IX(n){return Object.keys(n).map(e=>`;${w2(e)}=${w2(n[e])}`).join("")}(n.parameters)}`}const kX=/^[^\/()?;=#]+/;function ME(n){const e=n.match(kX);return e?e[0]:""}const PX=/^[^=?&#]+/,FX=/^[^&#]+/;class NX{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new bo([],{}):new bo([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[lo]=new bo(e,t)),r}parseSegment(){const e=ME(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new A1(wE(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ME(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=ME(this.remaining);s&&(r=s,this.capture(r))}e[wE(t)]=wE(r)}parseQueryParam(e){const t=function LX(n){const e=n.match(PX);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function OX(n){const e=n.match(FX);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const s=oH(t),c=oH(r);if(e.hasOwnProperty(s)){let h=e[s];Array.isArray(h)||(h=[h],e[s]=h),h.push(c)}else e[s]=c}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ME(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let c;r.indexOf(":")>-1?(c=r.substr(0,r.indexOf(":")),this.capture(c),this.capture(":")):e&&(c=lo);const h=this.parseChildren();t[c]=1===Object.keys(h).length?h[lo]:new bo([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class lH{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=M2(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=M2(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=C2(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return C2(e,this._root).map(t=>t.value)}}function M2(n,e){if(n===e.value)return e;for(const t of e.children){const r=M2(n,t);if(r)return r}return null}function C2(n,e){if(n===e.value)return[e];for(const t of e.children){const r=C2(n,t);if(r.length)return r.unshift(e),r}return[]}class Fm{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function e0(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class cH extends lH{constructor(e,t){super(e),this.snapshot=t,S2(this,e)}toString(){return this.snapshot.toString()}}function uH(n,e){const t=function BX(n,e){const h=new CE([],{},{},"",{},lo,e,null,n.root,-1,{});return new dH("",new Fm(h,[]))}(n,e),r=new dd([new A1("",{})]),s=new dd({}),c=new dd({}),h=new dd({}),_=new dd(""),S=new t0(r,s,h,_,c,lo,e,t.root);return S.snapshot=t.root,new cH(new Fm(S,[]),t)}class t0{constructor(e,t,r,s,c,h,_,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=c,this.outlet=h,this.component=_,this._futureSnapshot=S}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ti(e=>$b(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ti(e=>$b(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function hH(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],c=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(c.component)break;r--}}return function HX(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class CE{constructor(e,t,r,s,c,h,_,S,A,O,G){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=c,this.outlet=h,this.component=_,this.routeConfig=S,this._urlSegment=A,this._lastPathIndex=O,this._resolve=G}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=$b(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$b(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class dH extends lH{constructor(e,t){super(t),this.url=e,S2(this,t)}toString(){return fH(this._root)}}function S2(n,e){e.value._routerState=n,e.children.forEach(t=>S2(n,t))}function fH(n){const e=n.children.length>0?` { ${n.children.map(fH).join(", ")} } `:"";return`${n.value}${e}`}function E2(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,dp(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),dp(e.params,t.params)||n.params.next(t.params),function xX(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!dp(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),dp(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function T2(n,e){const t=dp(n.params,e.params)&&function EX(n,e){return Jv(n,e)&&n.every((t,r)=>dp(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||T2(n.parent,e.parent))}function R1(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function VX(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return R1(n,r,s);return R1(n,r)})}(n,e,t);return new Fm(r,s)}{if(n.shouldAttach(e.value)){const c=n.retrieve(e.value);if(null!==c){const h=c.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(_=>R1(n,_)),h}}const r=function UX(n){return new t0(new dd(n.url),new dd(n.params),new dd(n.queryParams),new dd(n.fragment),new dd(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(c=>R1(n,c));return new Fm(r,s)}}function SE(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function k1(n){return"object"==typeof n&&null!=n&&n.outlets}function D2(n,e,t,r,s){let c={};if(r&&iu(r,(_,S)=>{c[S]=Array.isArray(_)?_.map(A=>`${A}`):`${_}`}),n===e)return new Xv(t,c,s);const h=pH(n,e,t);return new Xv(h,c,s)}function pH(n,e,t){const r={};return iu(n.children,(s,c)=>{r[c]=s===e?t:pH(s,e,t)}),new bo(n.segments,r)}class mH{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&SE(r[0]))throw new Error("Root segment cannot have matrix parameters");const s=r.find(k1);if(s&&s!==KB(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class A2{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function gH(n,e,t){if(n||(n=new bo([],{})),0===n.segments.length&&n.hasChildren())return EE(n,e,t);const r=function YX(n,e,t){let r=0,s=e;const c={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return c;const h=n.segments[s],_=t[r];if(k1(_))break;const S=`${_}`,A=r<t.length-1?t[r+1]:null;if(s>0&&void 0===S)break;if(S&&A&&"object"==typeof A&&void 0===A.outlets){if(!vH(S,A,h))return c;r+=2}else{if(!vH(S,{},h))return c;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const c=new bo(n.segments.slice(0,r.pathIndex),{});return c.children[lo]=new bo(n.segments.slice(r.pathIndex),n.children),EE(c,0,s)}return r.match&&0===s.length?new bo(n.segments,{}):r.match&&!n.hasChildren()?I2(n,e,t):r.match?EE(n,0,s):I2(n,e,t)}function EE(n,e,t){if(0===t.length)return new bo(n.segments,{});{const r=function ZX(n){return k1(n[0])?n[0].outlets:{[lo]:n}}(t),s={};return iu(r,(c,h)=>{"string"==typeof c&&(c=[c]),null!==c&&(s[h]=gH(n.children[h],e,c))}),iu(n.children,(c,h)=>{void 0===r[h]&&(s[h]=c)}),new bo(n.segments,s)}}function I2(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const c=t[s];if(k1(c)){const S=XX(c.outlets);return new bo(r,S)}if(0===s&&SE(t[0])){r.push(new A1(n.segments[e].path,_H(t[0]))),s++;continue}const h=k1(c)?c.outlets[lo]:`${c}`,_=s<t.length-1?t[s+1]:null;h&&_&&SE(_)?(r.push(new A1(h,_H(_))),s+=2):(r.push(new A1(h,{})),s++)}return new bo(r,{})}function XX(n){const e={};return iu(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=I2(new bo([],{}),0,t))}),e}function _H(n){const e={};return iu(n,(t,r)=>e[r]=`${t}`),e}function vH(n,e,t){return n==t.path&&dp(e,t.parameters)}class KX{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),E2(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=e0(t);e.children.forEach(c=>{const h=c.value.outlet;this.deactivateRoutes(c,s[h],r),delete s[h]}),iu(s,(c,h)=>{this.deactivateRouteAndItsChildren(c,r)})}deactivateRoutes(e,t,r){const s=e.value,c=t?t.value:null;if(s===c)if(s.component){const h=r.getContext(s.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else c&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,c=e0(e);for(const h of Object.keys(c))this.deactivateRouteAndItsChildren(c[h],s);if(r&&r.outlet){const h=r.outlet.detach(),_=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:_})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,c=e0(e);for(const h of Object.keys(c))this.deactivateRouteAndItsChildren(c[h],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=e0(t);e.children.forEach(c=>{this.activateRoutes(c,s[c.value.outlet],r),this.forwardEvent(new _X(c.value.snapshot))}),e.children.length&&this.forwardEvent(new mX(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,c=t?t.value:null;if(E2(s),s===c)if(s.component){const h=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const h=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const _=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),h.children.onOutletReAttached(_.contexts),h.attachRef=_.componentRef,h.route=_.route.value,h.outlet&&h.outlet.attach(_.componentRef,_.route.value),E2(_.route.value),this.activateChildRoutes(e,null,h.children)}else{const _=function QX(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(s.snapshot),S=_?_.module.componentFactoryResolver:null;h.attachRef=null,h.route=s,h.resolver=S,h.outlet&&h.outlet.activateWith(s,S),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class R2{constructor(e,t){this.routes=e,this.module=t}}function c_(n){return"function"==typeof n}function Kv(n){return n instanceof Xv}const P1=Symbol("INITIAL_VALUE");function L1(){return hp(n=>function nX(...n){const e=Oi(n),t=Mr(n),{args:r,keys:s}=XF(n);if(0===r.length)return Ws([],e);const c=new _n(function iX(n,e,t=Ze){return r=>{HB(e,()=>{const{length:s}=n,c=new Array(s);let h=s,_=s;for(let S=0;S<s;S++)HB(e,()=>{const A=Ws(n[S],e);let O=!1;A.subscribe(Sn(r,G=>{c[S]=G,O||(O=!0,_--),_||r.next(t(c.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,s?h=>JF(s,h):Ze));return t?c.pipe(EI(t)):c}(n.map(e=>e.pipe(oh(1),Rm(P1)))).pipe(VB((e,t)=>{let r=!1;return t.reduce((s,c,h)=>s!==P1?s:(c===P1&&(r=!0),r||!1!==c&&h!==t.length-1&&!Kv(c)?s:c),e)},P1),Fc(e=>e!==P1),ti(e=>Kv(e)?e:!0===e),oh(1)))}class rJ{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new F1,this.attachRef=null}}class F1{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new rJ,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let yH=(()=>{class n{constructor(t,r,s,c,h){this.parentContexts=t,this.location=r,this.resolver=s,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ho,this.deactivateEvents=new Ho,this.attachEvents=new Ho,this.detachEvents=new Ho,this.name=c||lo,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),_=this.parentContexts.getOrCreateContext(this.name).children,S=new sJ(t,_,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,S),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(Ot(F1),Ot(rh),Ot(Ov),Xh("name"),Ot(Ah))},n.\u0275dir=mi({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class sJ{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===t0?this.route:e===F1?this.childContexts:this.parent.get(e,t)}}let bH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rr({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&sc(0,"router-outlet")},directives:[yH],encapsulation:2}),n})();function xH(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];oJ(r,aJ(e,r))}}function oJ(n,e){n.children&&xH(n.children,e)}function aJ(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function k2(n){const e=n.children&&n.children.map(k2),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==lo&&(t.component=bH),t}function md(n){return n.outlet||lo}function wH(n,e){const t=n.filter(r=>md(r)===e);return t.push(...n.filter(r=>md(r)!==e)),t}const MH={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function TE(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},MH):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const c=(e.matcher||bX)(t,n,e);if(!c)return Object.assign({},MH);const h={};iu(c.posParams,(S,A)=>{h[A]=S.path});const _=c.consumed.length>0?Object.assign(Object.assign({},h),c.consumed[c.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:c.consumed,remainingSegments:t.slice(c.consumed.length),parameters:_,positionalParamSegments:null!==(r=c.posParams)&&void 0!==r?r:{}}}function DE(n,e,t,r,s="corrected"){if(t.length>0&&function uJ(n,e,t){return t.some(r=>AE(n,e,r)&&md(r)!==lo)}(n,t,r)){const h=new bo(e,function cJ(n,e,t,r){const s={};s[lo]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const c of t)if(""===c.path&&md(c)!==lo){const h=new bo([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,s[md(c)]=h}return s}(n,e,r,new bo(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function hJ(n,e,t){return t.some(r=>AE(n,e,r))}(n,t,r)){const h=new bo(n.segments,function lJ(n,e,t,r,s,c){const h={};for(const _ of r)if(AE(n,t,_)&&!s[md(_)]){const S=new bo([],{});S._sourceSegment=n,S._segmentIndexShift="legacy"===c?n.segments.length:e.length,h[md(_)]=S}return Object.assign(Object.assign({},s),h)}(n,e,t,r,n.children,s));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const c=new bo(n.segments,n.children);return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}function AE(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function CH(n,e,t,r){return!!(md(n)===r||r!==lo&&AE(e,t,n))&&("**"===n.path||TE(e,n,t).matched)}function SH(n,e,t){return 0===e.length&&!n.children[t]}class IE{constructor(e){this.segmentGroup=e||null}}class EH{constructor(e){this.urlTree=e}}function O1(n){return S1(new IE(n))}function TH(n){return S1(new EH(n))}class mJ{constructor(e,t,r,s,c){this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=c,this.allowRedirects=!0,this.ngModule=e.get(Cm)}apply(){const e=DE(this.urlTree.root,[],[],this.config).segmentGroup,t=new bo(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,lo).pipe(ti(c=>this.createUrlTree(P2(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(km(c=>{if(c instanceof EH)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof IE?this.noMatchError(c):c}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,lo).pipe(ti(s=>this.createUrlTree(P2(s),e.queryParams,e.fragment))).pipe(km(s=>{throw s instanceof IE?this.noMatchError(s):s}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const s=e.segments.length>0?new bo([],{[lo]:e}):e;return new Xv(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(ti(c=>new bo([],c))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const c of Object.keys(r.children))"primary"===c?s.unshift(c):s.push(c);return Ws(s).pipe(Jb(c=>{const h=r.children[c],_=wH(t,c);return this.expandSegmentGroup(e,_,h,c).pipe(ti(S=>({segment:S,outlet:c})))}),VB((c,h)=>(c[h.outlet]=h.segment,c),{}),function aX(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Fc((s,c)=>n(s,c,r)):Ze,y2(1),t?GB(e):UB(()=>new vE))}())}expandSegment(e,t,r,s,c,h){return Ws(r).pipe(Jb(_=>this.expandSegmentAgainstRoute(e,t,r,_,s,c,h).pipe(km(A=>{if(A instanceof IE)return $r(null);throw A}))),Qb(_=>!!_),km((_,S)=>{if(_ instanceof vE||"EmptyError"===_.name)return SH(t,s,c)?$r(new bo([],{})):O1(t);throw _}))}expandSegmentAgainstRoute(e,t,r,s,c,h,_){return CH(s,t,c,h)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,c,h):_&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,c,h):O1(t):O1(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,c,h){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,c,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const c=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?TH(c):this.lineralizeSegments(r,c).pipe(sn(h=>{const _=new bo(h,{});return this.expandSegment(e,_,t,h,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,c,h){const{matched:_,consumedSegments:S,remainingSegments:A,positionalParamSegments:O}=TE(t,s,c);if(!_)return O1(t);const G=this.applyRedirectCommands(S,s.redirectTo,O);return s.redirectTo.startsWith("/")?TH(G):this.lineralizeSegments(s,G).pipe(sn(X=>this.expandSegment(e,t,r,X.concat(A),h,!1)))}matchSegmentAgainstRoute(e,t,r,s,c){if("**"===r.path)return r.loadChildren?(r._loadedConfig?$r(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe(ti(G=>(r._loadedConfig=G,new bo(s,{})))):$r(new bo(s,{}));const{matched:h,consumedSegments:_,remainingSegments:S}=TE(t,r,s);return h?this.getChildConfig(e,r,s).pipe(sn(O=>{const G=O.module,X=O.routes,{segmentGroup:te,slicedSegments:ue}=DE(t,_,S,X),ve=new bo(te.segments,te.children);if(0===ue.length&&ve.hasChildren())return this.expandChildren(G,X,ve).pipe(ti(Ge=>new bo(_,Ge)));if(0===X.length&&0===ue.length)return $r(new bo(_,{}));const Ie=md(r)===c;return this.expandSegment(G,ve,X,ue,Ie?lo:c,!0).pipe(ti(de=>new bo(_.concat(de.segments),de.children)))})):O1(t)}getChildConfig(e,t,r){return t.children?$r(new R2(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?$r(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe(sn(s=>s?this.configLoader.load(e.injector,t).pipe(ti(c=>(t._loadedConfig=c,c))):function fJ(n){return S1(x2(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):$r(new R2([],e))}runCanLoadGuards(e,t,r){const s=t.canLoad;return s&&0!==s.length?$r(s.map(h=>{const _=e.get(h);let S;if(function eJ(n){return n&&c_(n.canLoad)}(_))S=_.canLoad(t,r);else{if(!c_(_))throw new Error("Invalid CanLoad guard");S=_(t,r)}return fp(S)})).pipe(L1(),nu(h=>{if(!Kv(h))return;const _=x2(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw _.url=h,_}),ti(h=>!0===h)):$r(!0)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return $r(r);if(s.numberOfChildren>1||!s.children[lo])return S1(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));s=s.children[lo]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,s){const c=this.createSegmentGroup(e,t.root,r,s);return new Xv(c,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return iu(e,(s,c)=>{if("string"==typeof s&&s.startsWith(":")){const _=s.substring(1);r[c]=t[_]}else r[c]=s}),r}createSegmentGroup(e,t,r,s){const c=this.createSegments(e,t.segments,r,s);let h={};return iu(t.children,(_,S)=>{h[S]=this.createSegmentGroup(e,_,r,s)}),new bo(c,h)}createSegments(e,t,r,s){return t.map(c=>c.path.startsWith(":")?this.findPosParam(e,c,s):this.findOrReturn(c,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}function P2(n){const e={};for(const r of Object.keys(n.children)){const c=P2(n.children[r]);(c.segments.length>0||c.hasChildren())&&(e[r]=c)}return function gJ(n){if(1===n.numberOfChildren&&n.children[lo]){const e=n.children[lo];return new bo(n.segments.concat(e.segments),e.children)}return n}(new bo(n.segments,e))}class DH{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class RE{constructor(e,t){this.component=e,this.route=t}}function vJ(n,e,t){const r=n._root;return N1(r,e?e._root:null,t,[r.value])}function kE(n,e,t){const r=function bJ(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function N1(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const c=e0(e);return n.children.forEach(h=>{(function xJ(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const c=n.value,h=e?e.value:null,_=t?t.getContext(n.value.outlet):null;if(h&&c.routeConfig===h.routeConfig){const S=function wJ(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Jv(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Jv(n.url,e.url)||!dp(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!T2(n,e)||!dp(n.queryParams,e.queryParams);default:return!T2(n,e)}}(h,c,c.routeConfig.runGuardsAndResolvers);S?s.canActivateChecks.push(new DH(r)):(c.data=h.data,c._resolvedData=h._resolvedData),N1(n,e,c.component?_?_.children:null:t,r,s),S&&_&&_.outlet&&_.outlet.isActivated&&s.canDeactivateChecks.push(new RE(_.outlet.component,h))}else h&&B1(e,_,s),s.canActivateChecks.push(new DH(r)),N1(n,null,c.component?_?_.children:null:t,r,s)})(h,c[h.value.outlet],t,r.concat([h.value]),s),delete c[h.value.outlet]}),iu(c,(h,_)=>B1(h,t.getContext(_),s)),s}function B1(n,e,t){const r=e0(n),s=n.value;iu(r,(c,h)=>{B1(c,s.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new RE(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}class RJ{}function AH(n){return new _n(e=>e.error(n))}class PJ{constructor(e,t,r,s,c,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h}recognize(){const e=DE(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,lo);if(null===t)return null;const r=new CE([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},lo,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new Fm(r,t),c=new dH(this.url,s);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(e){const t=e.value,r=hH(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const c of Object.keys(t.children)){const h=t.children[c],_=wH(e,c),S=this.processSegmentGroup(_,h,c);if(null===S)return null;r.push(...S)}const s=IH(r);return function LJ(n){n.sort((e,t)=>e.value.outlet===lo?-1:t.value.outlet===lo?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}processSegment(e,t,r,s){for(const c of e){const h=this.processSegmentAgainstRoute(c,t,r,s);if(null!==h)return h}return SH(t,r,s)?[]:null}processSegmentAgainstRoute(e,t,r,s){if(e.redirectTo||!CH(e,t,r,s))return null;let c,h=[],_=[];if("**"===e.path){const te=r.length>0?KB(r).parameters:{};c=new CE(r,te,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,PH(e),md(e),e.component,e,RH(t),kH(t)+r.length,LH(e))}else{const te=TE(t,e,r);if(!te.matched)return null;h=te.consumedSegments,_=te.remainingSegments,c=new CE(h,te.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,PH(e),md(e),e.component,e,RH(t),kH(t)+h.length,LH(e))}const S=function FJ(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:A,slicedSegments:O}=DE(t,h,_,S.filter(te=>void 0===te.redirectTo),this.relativeLinkResolution);if(0===O.length&&A.hasChildren()){const te=this.processChildren(S,A);return null===te?null:[new Fm(c,te)]}if(0===S.length&&0===O.length)return[new Fm(c,[])];const G=md(e)===s,X=this.processSegment(S,A,O,G?lo:s);return null===X?null:[new Fm(c,X)]}}function OJ(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function IH(n){const e=[],t=new Set;for(const r of n){if(!OJ(r)){e.push(r);continue}const s=e.find(c=>r.value.routeConfig===c.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=IH(r.children);e.push(new Fm(r.value,s))}return e.filter(r=>!t.has(r))}function RH(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function kH(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function PH(n){return n.data||{}}function LH(n){return n.resolve||{}}function FH(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function L2(n){return hp(e=>{const t=n(e);return t?Ws(t).pipe(ti(()=>e)):$r(e)})}class WJ extends class GJ{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const F2=new bi("ROUTES");class OH{constructor(e,t,r,s){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=s}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const s=this.loadModuleFactory(t.loadChildren).pipe(ti(c=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=c.create(e);return new R2(JB(h.injector.get(F2,void 0,Fr.Self|Fr.Optional)).map(k2),h)}),km(c=>{throw t._loader$=void 0,c}));return t._loader$=new rX(s,()=>new Xt).pipe(zB()),t._loader$}loadModuleFactory(e){return fp(e()).pipe(sn(t=>t instanceof sL?$r(t):Ws(this.compiler.compileModuleAsync(t))))}}class jJ{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ZJ(n){throw n}function YJ(n,e,t){return e.parse("/")}function NH(n,e){return $r(null)}const XJ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JJ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let kh=(()=>{class n{constructor(t,r,s,c,h,_,S){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=c,this.config=S,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Xt,this.errorHandler=ZJ,this.malformedUriErrorHandler=YJ,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:NH,afterPreactivation:NH},this.urlHandlingStrategy=new jJ,this.routeReuseStrategy=new WJ,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(Cm),this.console=h.get(GL);const G=h.get(vo);this.isNgZoneEnabled=G instanceof vo&&vo.isInAngularZone(),this.resetConfig(S),this.currentUrlTree=function wX(){return new Xv(new bo([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new OH(h,_,X=>this.triggerEvent(new qB(X)),X=>this.triggerEvent(new jB(X))),this.routerState=uH(this.currentUrlTree,this.rootComponentType),this.transitions=new dd({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Fc(s=>0!==s.id),ti(s=>Object.assign(Object.assign({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),hp(s=>{let c=!1,h=!1;return $r(s).pipe(nu(_=>{this.currentNavigation={id:_.id,initialUrl:_.currentRawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),hp(_=>{const S=this.browserUrlTree.toString(),A=!this.navigated||_.extractedUrl.toString()!==S||S!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||A)&&this.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return BH(_.source)&&(this.browserUrlTree=_.extractedUrl),$r(_).pipe(hp(G=>{const X=this.transitions.getValue();return r.next(new b2(G.id,this.serializeUrl(G.extractedUrl),G.source,G.restoredState)),X!==this.transitions.getValue()?Qn:Promise.resolve(G)}),function _J(n,e,t,r){return hp(s=>function pJ(n,e,t,r,s){return new mJ(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe(ti(c=>Object.assign(Object.assign({},s),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),nu(G=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:G.urlAfterRedirects})}),function NJ(n,e,t,r,s){return sn(c=>function kJ(n,e,t,r,s="emptyOnly",c="legacy"){try{const h=new PJ(n,e,t,r,s,c).recognize();return null===h?AH(new RJ):$r(h)}catch(h){return AH(h)}}(n,e,c.urlAfterRedirects,t(c.urlAfterRedirects),r,s).pipe(ti(h=>Object.assign(Object.assign({},c),{targetSnapshot:h}))))}(this.rootComponentType,this.config,G=>this.serializeUrl(G),this.paramsInheritanceStrategy,this.relativeLinkResolution),nu(G=>{if("eager"===this.urlUpdateStrategy){if(!G.extras.skipLocationChange){const te=this.urlHandlingStrategy.merge(G.urlAfterRedirects,G.rawUrl);this.setBrowserUrl(te,G)}this.browserUrlTree=G.urlAfterRedirects}const X=new cX(G.id,this.serializeUrl(G.extractedUrl),this.serializeUrl(G.urlAfterRedirects),G.targetSnapshot);r.next(X)}));if(A&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:X,extractedUrl:te,source:ue,restoredState:ve,extras:Ie}=_,ye=new b2(X,this.serializeUrl(te),ue,ve);r.next(ye);const de=uH(te,this.rootComponentType).snapshot;return $r(Object.assign(Object.assign({},_),{targetSnapshot:de,urlAfterRedirects:te,extras:Object.assign(Object.assign({},Ie),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=_.rawUrl,_.resolve(null),Qn}),L2(_=>{const{targetSnapshot:S,id:A,extractedUrl:O,rawUrl:G,extras:{skipLocationChange:X,replaceUrl:te}}=_;return this.hooks.beforePreactivation(S,{navigationId:A,appliedUrlTree:O,rawUrlTree:G,skipLocationChange:!!X,replaceUrl:!!te})}),nu(_=>{const S=new uX(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(S)}),ti(_=>Object.assign(Object.assign({},_),{guards:vJ(_.targetSnapshot,_.currentSnapshot,this.rootContexts)})),function MJ(n,e){return sn(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:c,canDeactivateChecks:h}}=t;return 0===h.length&&0===c.length?$r(Object.assign(Object.assign({},t),{guardsResult:!0})):function CJ(n,e,t,r){return Ws(n).pipe(sn(s=>function IJ(n,e,t,r,s){const c=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return c&&0!==c.length?$r(c.map(_=>{const S=kE(_,e,s);let A;if(function iJ(n){return n&&c_(n.canDeactivate)}(S))A=fp(S.canDeactivate(n,e,t,r));else{if(!c_(S))throw new Error("Invalid CanDeactivate guard");A=fp(S(n,e,t,r))}return A.pipe(Qb())})).pipe(L1()):$r(!0)}(s.component,s.route,t,e,r)),Qb(s=>!0!==s,!0))}(h,r,s,n).pipe(sn(_=>_&&function $X(n){return"boolean"==typeof n}(_)?function SJ(n,e,t,r){return Ws(e).pipe(Jb(s=>lE(function TJ(n,e){return null!==n&&e&&e(new pX(n)),$r(!0)}(s.route.parent,r),function EJ(n,e){return null!==n&&e&&e(new gX(n)),$r(!0)}(s.route,r),function AJ(n,e,t){const r=e[e.length-1],c=e.slice(0,e.length-1).reverse().map(h=>function yJ(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>o2(()=>$r(h.guards.map(S=>{const A=kE(S,h.node,t);let O;if(function nJ(n){return n&&c_(n.canActivateChild)}(A))O=fp(A.canActivateChild(r,n));else{if(!c_(A))throw new Error("Invalid CanActivateChild guard");O=fp(A(r,n))}return O.pipe(Qb())})).pipe(L1())));return $r(c).pipe(L1())}(n,s.path,t),function DJ(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return $r(!0);const s=r.map(c=>o2(()=>{const h=kE(c,e,t);let _;if(function tJ(n){return n&&c_(n.canActivate)}(h))_=fp(h.canActivate(e,n));else{if(!c_(h))throw new Error("Invalid CanActivate guard");_=fp(h(e,n))}return _.pipe(Qb())}));return $r(s).pipe(L1())}(n,s.route,t))),Qb(s=>!0!==s,!0))}(r,c,n,e):$r(_)),ti(_=>Object.assign(Object.assign({},t),{guardsResult:_})))})}(this.ngModule.injector,_=>this.triggerEvent(_)),nu(_=>{if(Kv(_.guardsResult)){const A=x2(`Redirecting to "${this.serializeUrl(_.guardsResult)}"`);throw A.url=_.guardsResult,A}const S=new hX(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.triggerEvent(S)}),Fc(_=>!!_.guardsResult||(this.restoreHistory(_),this.cancelNavigationTransition(_,""),!1)),L2(_=>{if(_.guards.canActivateChecks.length)return $r(_).pipe(nu(S=>{const A=new dX(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);this.triggerEvent(A)}),hp(S=>{let A=!1;return $r(S).pipe(function BJ(n,e){return sn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return $r(t);let c=0;return Ws(s).pipe(Jb(h=>function HJ(n,e,t,r){return function zJ(n,e,t,r){const s=FH(n);if(0===s.length)return $r({});const c={};return Ws(s).pipe(sn(h=>function VJ(n,e,t,r){const s=kE(n,e,r);return fp(s.resolve?s.resolve(e,t):s(e,t))}(n[h],e,t,r).pipe(nu(_=>{c[h]=_}))),y2(1),sn(()=>FH(c).length===s.length?$r(c):Qn))}(n._resolve,n,e,r).pipe(ti(c=>(n._resolvedData=c,n.data=Object.assign(Object.assign({},n.data),hH(n,t).resolve),null)))}(h.route,r,n,e)),nu(()=>c++),y2(1),sn(h=>c===s.length?$r(t):Qn))})}(this.paramsInheritanceStrategy,this.ngModule.injector),nu({next:()=>A=!0,complete:()=>{A||(this.restoreHistory(S),this.cancelNavigationTransition(S,"At least one route resolver didn't emit any value."))}}))}),nu(S=>{const A=new fX(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);this.triggerEvent(A)}))}),L2(_=>{const{targetSnapshot:S,id:A,extractedUrl:O,rawUrl:G,extras:{skipLocationChange:X,replaceUrl:te}}=_;return this.hooks.afterPreactivation(S,{navigationId:A,appliedUrlTree:O,rawUrlTree:G,skipLocationChange:!!X,replaceUrl:!!te})}),ti(_=>{const S=function zX(n,e,t){const r=R1(n,e._root,t?t._root:void 0);return new cH(r,e)}(this.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return Object.assign(Object.assign({},_),{targetRouterState:S})}),nu(_=>{this.currentUrlTree=_.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(_.urlAfterRedirects,_.rawUrl),this.routerState=_.targetRouterState,"deferred"===this.urlUpdateStrategy&&(_.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,_),this.browserUrlTree=_.urlAfterRedirects)}),((n,e,t)=>ti(r=>(new KX(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,_=>this.triggerEvent(_)),nu({next(){c=!0},complete(){c=!0}}),uB(()=>{var _;c||h||this.cancelNavigationTransition(s,`Navigation ID ${s.id} is not equal to the current navigation id ${this.navigationId}`),(null===(_=this.currentNavigation)||void 0===_?void 0:_.id)===s.id&&(this.currentNavigation=null)}),km(_=>{if(h=!0,function yX(n){return n&&n[YB]}(_)){const S=Kv(_.url);S||(this.navigated=!0,this.restoreHistory(s,!0));const A=new WB(s.id,this.serializeUrl(s.extractedUrl),_.message);r.next(A),S?setTimeout(()=>{const O=this.urlHandlingStrategy.merge(_.url,this.rawUrlTree),G={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||BH(s.source)};this.scheduleNavigation(O,"imperative",null,G,{resolve:s.resolve,reject:s.reject,promise:s.promise})},0):s.resolve(!1)}else{this.restoreHistory(s,!0);const S=new lX(s.id,this.serializeUrl(s.extractedUrl),_);r.next(S);try{s.resolve(this.errorHandler(_))}catch(A){s.reject(A)}}return Qn}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var s;const c={replaceUrl:!0},h=(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null;if(h){const S=Object.assign({},h);delete S.navigationId,delete S.\u0275routerPageId,0!==Object.keys(S).length&&(c.state=S)}const _=this.parseUrl(t.url);this.scheduleNavigation(_,r,h,c)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){xH(t),this.config=t.map(k2),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:c,fragment:h,queryParamsHandling:_,preserveFragment:S}=r,A=s||this.routerState.root,O=S?this.currentUrlTree.fragment:h;let G=null;switch(_){case"merge":G=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":G=this.currentUrlTree.queryParams;break;default:G=c||null}return null!==G&&(G=this.removeEmptyProps(G)),function GX(n,e,t,r,s){if(0===t.length)return D2(e.root,e.root,e.root,r,s);const c=function WX(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new mH(!0,0,n);let e=0,t=!1;const r=n.reduce((s,c,h)=>{if("object"==typeof c&&null!=c){if(c.outlets){const _={};return iu(c.outlets,(S,A)=>{_[A]="string"==typeof S?S.split("/"):S}),[...s,{outlets:_}]}if(c.segmentPath)return[...s,c.segmentPath]}return"string"!=typeof c?[...s,c]:0===h?(c.split("/").forEach((_,S)=>{0==S&&"."===_||(0==S&&""===_?t=!0:".."===_?e++:""!=_&&s.push(_))}),s):[...s,c]},[]);return new mH(t,e,r)}(t);if(c.toRoot())return D2(e.root,e.root,new bo([],{}),r,s);const h=function qX(n,e,t){if(n.isAbsolute)return new A2(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const c=t.snapshot._urlSegment;return new A2(c,c===e.root,0)}const r=SE(n.commands[0])?0:1;return function jX(n,e,t){let r=n,s=e,c=t;for(;c>s;){if(c-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new A2(r,!1,s-c)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(c,e,n),_=h.processChildren?EE(h.segmentGroup,h.index,c.commands):gH(h.segmentGroup,h.index,c.commands);return D2(e.root,h.segmentGroup,_,r,s)}(A,this.currentUrlTree,t,G,null!=O?O:null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=Kv(t)?t:this.parseUrl(t),c=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function KJ(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?Object.assign({},XJ):!1===r?Object.assign({},JJ):r,Kv(t))return $B(this.currentUrlTree,t,s);const c=this.parseUrl(t);return $B(this.currentUrlTree,c,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const c=t[s];return null!=c&&(r[s]=c),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new D1(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,c,h){var _,S;if(this.disposed)return Promise.resolve(!1);let A,O,G;h?(A=h.resolve,O=h.reject,G=h.promise):G=new Promise((ue,ve)=>{A=ue,O=ve});const X=++this.navigationId;let te;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),te=s&&s.\u0275routerPageId?s.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(S=this.browserPageId)&&void 0!==S?S:0)+1):te=0,this.setTransition({id:X,targetPageId:te,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:c,resolve:A,reject:O,promise:G,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),G.catch(ue=>Promise.reject(ue))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),c=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",c):this.location.go(s,"",c)}restoreHistory(t,r=!1){var s,c;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)||0===h?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const s=new WB(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){Pv()},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})();function BH(n){return"imperative"!==n}class HH{}class zH{preload(e,t){return $r(null)}}let VH=(()=>{class n{constructor(t,r,s,c){this.router=t,this.injector=s,this.preloadingStrategy=c,this.loader=new OH(s,r,S=>t.triggerEvent(new qB(S)),S=>t.triggerEvent(new jB(S)))}setUpPreloading(){this.subscription=this.router.events.pipe(Fc(t=>t instanceof D1),Jb(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Cm);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const c of r)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const h=c._loadedConfig;s.push(this.processRoutes(h.module,h.routes))}else c.loadChildren&&!c.canLoad?s.push(this.preloadConfig(t,c)):c.children&&s.push(this.processRoutes(t,c.children));return Ws(s).pipe(Wn(),ti(c=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?$r(r._loadedConfig):this.loader.load(t.injector,r)).pipe(sn(c=>(r._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(wn(kh),wn(WL),wn(Ta),wn(HH))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})(),B2=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof b2?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof D1&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ZB&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new ZB(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){Pv()},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})();const Qv=new bi("ROUTER_CONFIGURATION"),UH=new bi("ROUTER_FORROOT_GUARD"),tK=[Qw,{provide:iH,useClass:rH},{provide:kh,useFactory:function oK(n,e,t,r,s,c,h={},_,S){const A=new kh(null,n,e,t,r,s,JB(c));return _&&(A.urlHandlingStrategy=_),S&&(A.routeReuseStrategy=S),function aK(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,A),h.enableTracing&&A.events.subscribe(O=>{var G,X;null===(G=console.group)||void 0===G||G.call(console,`Router Event: ${O.constructor.name}`),console.log(O.toString()),console.log(O),null===(X=console.groupEnd)||void 0===X||X.call(console)}),A},deps:[iH,F1,Qw,Ta,WL,F2,Qv,[class qJ{},new Xc],[class UJ{},new Xc]]},F1,{provide:t0,useFactory:function lK(n){return n.routerState.root},deps:[kh]},VH,zH,class eK{preload(e,t){return t().pipe(km(()=>$r(null)))}},{provide:Qv,useValue:{enableTracing:!1}}];function nK(){return new XL("Router",kh)}let GH=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[tK,WH(t),{provide:UH,useFactory:sK,deps:[[kh,new Xc,new Jh]]},{provide:Qv,useValue:r||{}},{provide:Bb,useFactory:rK,deps:[Hv,[new Pf(iI),new Xc],Qv]},{provide:B2,useFactory:iK,deps:[kh,c6,Qv]},{provide:HH,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:zH},{provide:XL,multi:!0,useFactory:nK},[H2,{provide:GA,multi:!0,useFactory:cK,deps:[H2]},{provide:qH,useFactory:uK,deps:[H2]},{provide:UL,multi:!0,useExisting:qH}]]}}static forChild(t){return{ngModule:n,providers:[WH(t)]}}}return n.\u0275fac=function(t){return new(t||n)(wn(UH,8),wn(kh,8))},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({}),n})();function iK(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new B2(n,e,t)}function rK(n,e,t={}){return t.useHash?new YG(n,e):new mF(n,e)}function sK(n){return"guarded"}function WH(n){return[{provide:nx,multi:!0,useValue:n},{provide:F2,multi:!0,useValue:n}]}let H2=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Xt}appInitializer(){return this.injector.get(qG,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const s=new Promise(_=>r=_),c=this.injector.get(kh),h=this.injector.get(Qv);return"disabled"===h.initialNavigation?(c.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?$r(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),c.initialNavigation()):r(!0),s})}bootstrapListener(t){const r=this.injector.get(Qv),s=this.injector.get(VH),c=this.injector.get(B2),h=this.injector.get(kh),_=this.injector.get(ZC);t===_.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),s.setUpPreloading(),c.init(),h.resetRootComponentType(_.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(wn(Ta))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac}),n})();function cK(n){return n.appInitializer.bind(n)}function uK(n){return n.bootstrapListener.bind(n)}const qH=new bi("Router Initializer"),dK=[];let fK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n}),n.\u0275inj=Ms({imports:[[GH.forRoot(dK)],GH]}),n})(),PE=(()=>{class n{constructor(){this.body=[["NumPiers_x",2],["NumPiers_y",3],["Width",10],["Length",35],["Height",12],["PierThickness",1],["Divisions_x",3],["Divisions_y",3],["Divisions_z",3],["GirderWidth",11],["GirderThickness",.3],["GirderEdgeHeight",1],["GirderEdgeThickness",.25]],this.vtk=null,this.pre=[["Young's modulus (kPa)",1e7],["Poisson's ratio",.3],["Density (t/m^3)",1.8],["Ground level (m)",.1],["Fixed boundary (x-min) (m)",-1e5],["Fixed boundary (x-max) (m)",1e5],["Fixed boundary (y-min) (m)",-1e5],["Fixed boundary (y-max) (m)",31e5]],this.isCalcrated=!1,this.result_vtk=new Array}getPlantFEMJson(){const t={};for(const r of this.body){const s=r[0];let c=r[1];if("string"==typeof c){const h=[];for(const _ of c.split(","))h.push(parseFloat(_));t[s]=h}else t[s]=c}return JSON.stringify(t,null,2)}get_vtk(){return this.vtk}set_vtk(t){this.vtk=t}get_calc_url(t){let r="https://plantfem.org:5555/static_analysis/uploadfile/";return r+="?YoungModulus="+this.pre[0][1],r+="&PoissonRatio="+this.pre[1][1],r+="&Density="+this.pre[2][1],r+="&ground_level="+this.pre[3][1],r+="&fix_boundary_xmin="+this.pre[4][1],r+="&fix_boundary_xmax="+this.pre[5][1],r+="&fix_boundary_ymin="+this.pre[6][1],r+="&fix_boundary_ymax="+this.pre[7][1],r+="&filename="+t,r}get_result_vtk(t){return this.result_vtk[t]}set_result_vtk(t,r){this.result_vtk[r]=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var pK=D(861);const vu=1001,dc=1003,Rl=1006,d_=1009,U1=1012,f_=1015,u0=1016,h0=1020,yu=1023,$v=1026,d0=1027,f0=2400,p0=2401,p_=3e3,hl=3001,G1=35044,W1=35048;class ey{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const s=this._listeners[e];if(void 0!==s){const c=s.indexOf(t);-1!==c&&s.splice(c,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const r=this._listeners[e.type];if(void 0!==r){e.target=this;const s=r.slice(0);for(let c=0,h=s.length;c<h;c++)s[c].call(this,e);e.target=null}}}const ru=[];for(let n=0;n<256;n++)ru[n]=(n<16?"0":"")+n.toString(16);const ty=Math.PI/180,q1=180/Math.PI;function Ph(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(ru[255&n]+ru[n>>8&255]+ru[n>>16&255]+ru[n>>24&255]+"-"+ru[255&e]+ru[e>>8&255]+"-"+ru[e>>16&15|64]+ru[e>>24&255]+"-"+ru[63&t|128]+ru[t>>8&255]+"-"+ru[t>>16&255]+ru[t>>24&255]+ru[255&r]+ru[r>>8&255]+ru[r>>16&255]+ru[r>>24&255]).toUpperCase()}function su(n,e,t){return Math.max(e,Math.min(t,n))}function j1(n,e,t){return(1-t)*n+t*e}function ek(n){return 0==(n&n-1)&&0!==n}function Tz(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}class ci{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6],this.y=s[1]*t+s[4]*r+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),s=Math.sin(t),c=this.x-e.x,h=this.y-e.y;return this.x=c*r-h*s+e.x,this.y=c*s+h*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}ci.prototype.isVector2=!0;class Oc{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,s,c,h,_,S,A){const O=this.elements;return O[0]=e,O[1]=s,O[2]=_,O[3]=t,O[4]=c,O[5]=S,O[6]=r,O[7]=h,O[8]=A,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,s=t.elements,c=this.elements,h=r[0],_=r[3],S=r[6],A=r[1],O=r[4],G=r[7],X=r[2],te=r[5],ue=r[8],ve=s[0],Ie=s[3],ye=s[6],de=s[1],Ge=s[4],Oe=s[7],$e=s[2],ht=s[5],vt=s[8];return c[0]=h*ve+_*de+S*$e,c[3]=h*Ie+_*Ge+S*ht,c[6]=h*ye+_*Oe+S*vt,c[1]=A*ve+O*de+G*$e,c[4]=A*Ie+O*Ge+G*ht,c[7]=A*ye+O*Oe+G*vt,c[2]=X*ve+te*de+ue*$e,c[5]=X*Ie+te*Ge+ue*ht,c[8]=X*ye+te*Oe+ue*vt,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],s=e[2],c=e[3],h=e[4],_=e[5],S=e[6],A=e[7],O=e[8];return t*h*O-t*_*A-r*c*O+r*_*S+s*c*A-s*h*S}invert(){const e=this.elements,t=e[0],r=e[1],s=e[2],c=e[3],h=e[4],_=e[5],S=e[6],A=e[7],O=e[8],G=O*h-_*A,X=_*S-O*c,te=A*c-h*S,ue=t*G+r*X+s*te;if(0===ue)return this.set(0,0,0,0,0,0,0,0,0);const ve=1/ue;return e[0]=G*ve,e[1]=(s*A-O*r)*ve,e[2]=(_*r-s*h)*ve,e[3]=X*ve,e[4]=(O*t-s*S)*ve,e[5]=(s*c-_*t)*ve,e[6]=te*ve,e[7]=(r*S-A*t)*ve,e[8]=(h*t-r*c)*ve,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,s,c,h,_){const S=Math.cos(c),A=Math.sin(c);return this.set(r*S,r*A,-r*(S*h+A*_)+h+e,-s*A,s*S,-s*(-A*h+S*_)+_+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),s=this.elements,c=s[0],h=s[3],_=s[6],S=s[1],A=s[4],O=s[7];return s[0]=t*c+r*S,s[3]=t*h+r*A,s[6]=t*_+r*O,s[1]=-r*c+t*S,s[4]=-r*h+t*A,s[7]=-r*_+t*O,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let s=0;s<9;s++)if(t[s]!==r[s])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function Dz(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}function Z1(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}Oc.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Az={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},df={h:0,s:0,l:0},qE={h:0,s:0,l:0};function tk(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function _0(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function nk(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let v0,er=(()=>{class n{constructor(t,r,s){return void 0===r&&void 0===s?this.set(t):this.setRGB(t,r,s)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,r,s){return this.r=t,this.g=r,this.b=s,this}setHSL(t,r,s){if(t=function $2(n,e){return(n%e+e)%e}(t,1),r=su(r,0,1),s=su(s,0,1),0===r)this.r=this.g=this.b=s;else{const c=s<=.5?s*(1+r):s+r-s*r,h=2*s-c;this.r=tk(h,c,t+1/3),this.g=tk(h,c,t),this.b=tk(h,c,t-1/3)}return this}setStyle(t){function r(c){void 0!==c&&parseFloat(c)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let c;const _=s[2];switch(s[1]){case"rgb":case"rgba":if(c=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(_))return this.r=Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,r(c[4]),this;if(c=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(_))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,r(c[4]),this;break;case"hsl":case"hsla":if(c=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(_)){const S=parseFloat(c[1])/360,A=parseInt(c[2],10)/100,O=parseInt(c[3],10)/100;return r(c[4]),this.setHSL(S,A,O)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const c=s[1],h=c.length;if(3===h)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===h)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const r=Az[t.toLowerCase()];return void 0!==r?this.setHex(r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=_0(t.r),this.g=_0(t.g),this.b=_0(t.b),this}copyLinearToSRGB(t){return this.r=nk(t.r),this.g=nk(t.g),this.b=nk(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const r=this.r,s=this.g,c=this.b,h=Math.max(r,s,c),_=Math.min(r,s,c);let S,A;const O=(_+h)/2;if(_===h)S=0,A=0;else{const G=h-_;switch(A=O<=.5?G/(h+_):G/(2-h-_),h){case r:S=(s-c)/G+(s<c?6:0);break;case s:S=(c-r)/G+2;break;case c:S=(r-s)/G+4}S/=6}return t.h=S,t.s=A,t.l=O,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,r,s){return this.getHSL(df),df.h+=t,df.s+=r,df.l+=s,this.setHSL(df.h,df.s,df.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,s){return this.r=t.r+(r.r-t.r)*s,this.g=t.g+(r.g-t.g)*s,this.b=t.b+(r.b-t.b)*s,this}lerpHSL(t,r){this.getHSL(df),t.getHSL(qE);const s=j1(df.h,qE.h,r),c=j1(df.s,qE.s,r),h=j1(df.l,qE.l,r);return this.setHSL(s,c,h),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return n.NAMES=Az,n})();er.prototype.isColor=!0,er.prototype.r=1,er.prototype.g=1,er.prototype.b=1;class ny{static getDataURL(e){if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===v0&&(v0=Z1("canvas")),v0.width=e.width,v0.height=e.height;const r=v0.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=v0}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=Z1("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const s=r.getImageData(0,0,e.width,e.height),c=s.data;for(let h=0;h<c.length;h++)c[h]=255*_0(c[h]/255);return r.putImageData(s,0,0),t}if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t[r]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*_0(t[r]/255)):_0(t[r]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let TQ=0;class Ec extends ey{constructor(e=Ec.DEFAULT_IMAGE,t=Ec.DEFAULT_MAPPING,r=vu,s=vu,c=Rl,h=1008,_=yu,S=d_,A=1,O=p_){super(),Object.defineProperty(this,"id",{value:TQ++}),this.uuid=Ph(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=s,this.magFilter=c,this.minFilter=h,this.anisotropy=A,this.format=_,this.internalFormat=null,this.type=S,this.offset=new ci(0,0),this.repeat=new ci(1,1),this.center=new ci(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Oc,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=O,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const s=this.image;if(void 0===s.uuid&&(s.uuid=Ph()),!t&&void 0===e.images[s.uuid]){let c;if(Array.isArray(s)){c=[];for(let h=0,_=s.length;h<_;h++)c.push(ik(s[h].isDataTexture?s[h].image:s[h]))}else c=ik(s);e.images[s.uuid]={uuid:s.uuid,url:c}}r.image=s.uuid}return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case vu:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case vu:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function ik(n){return"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?ny.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Ec.DEFAULT_IMAGE=void 0,Ec.DEFAULT_MAPPING=300,Ec.prototype.isTexture=!0;class ya{constructor(e=0,t=0,r=0,s=1){this.x=e,this.y=t,this.z=r,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,s){return this.x=e,this.y=t,this.z=r,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,s=this.z,c=this.w,h=e.elements;return this.x=h[0]*t+h[4]*r+h[8]*s+h[12]*c,this.y=h[1]*t+h[5]*r+h[9]*s+h[13]*c,this.z=h[2]*t+h[6]*r+h[10]*s+h[14]*c,this.w=h[3]*t+h[7]*r+h[11]*s+h[15]*c,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,s,c;const S=e.elements,A=S[0],O=S[4],G=S[8],X=S[1],te=S[5],ue=S[9],ve=S[2],Ie=S[6],ye=S[10];if(Math.abs(O-X)<.01&&Math.abs(G-ve)<.01&&Math.abs(ue-Ie)<.01){if(Math.abs(O+X)<.1&&Math.abs(G+ve)<.1&&Math.abs(ue+Ie)<.1&&Math.abs(A+te+ye-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const Ge=(A+1)/2,Oe=(te+1)/2,$e=(ye+1)/2,ht=(O+X)/4,vt=(G+ve)/4,Nt=(ue+Ie)/4;return Ge>Oe&&Ge>$e?Ge<.01?(r=0,s=.707106781,c=.707106781):(r=Math.sqrt(Ge),s=ht/r,c=vt/r):Oe>$e?Oe<.01?(r=.707106781,s=0,c=.707106781):(s=Math.sqrt(Oe),r=ht/s,c=Nt/s):$e<.01?(r=.707106781,s=.707106781,c=0):(c=Math.sqrt($e),r=vt/c,s=Nt/c),this.set(r,s,c,t),this}let de=Math.sqrt((Ie-ue)*(Ie-ue)+(G-ve)*(G-ve)+(X-O)*(X-O));return Math.abs(de)<.001&&(de=1),this.x=(Ie-ue)/de,this.y=(G-ve)/de,this.z=(X-O)/de,this.w=Math.acos((A+te+ye-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}ya.prototype.isVector4=!0;class gd extends ey{constructor(e,t,r={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new ya(0,0,e,t),this.scissorTest=!1,this.viewport=new ya(0,0,e,t),this.texture=new Ec(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.internalFormat=void 0!==r.internalFormat?r.internalFormat:null,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:Rl,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0!==r.stencilBuffer&&r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}gd.prototype.isWebGLRenderTarget=!0,class DQ extends gd{constructor(e,t,r){super(e,t);const s=this.texture;this.texture=[];for(let c=0;c<r;c++)this.texture[c]=s.clone()}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let s=0,c=this.texture.length;s<c;s++)this.texture[s].image.width=e,this.texture[s].image.height=t,this.texture[s].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class rk extends gd{constructor(e,t,r={}){super(e,t,r),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===r.ignoreDepth||r.ignoreDepth,this.useRenderToTexture=void 0!==r.useRenderToTexture&&r.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(e){return super.copy.call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}rk.prototype.isWebGLMultisampleRenderTarget=!0;class bu{constructor(e=0,t=0,r=0,s=1){this._x=e,this._y=t,this._z=r,this._w=s}static slerp(e,t,r,s){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,s)}static slerpFlat(e,t,r,s,c,h,_){let S=r[s+0],A=r[s+1],O=r[s+2],G=r[s+3];const X=c[h+0],te=c[h+1],ue=c[h+2],ve=c[h+3];if(0===_)return e[t+0]=S,e[t+1]=A,e[t+2]=O,void(e[t+3]=G);if(1===_)return e[t+0]=X,e[t+1]=te,e[t+2]=ue,void(e[t+3]=ve);if(G!==ve||S!==X||A!==te||O!==ue){let Ie=1-_;const ye=S*X+A*te+O*ue+G*ve,de=ye>=0?1:-1,Ge=1-ye*ye;if(Ge>Number.EPSILON){const $e=Math.sqrt(Ge),ht=Math.atan2($e,ye*de);Ie=Math.sin(Ie*ht)/$e,_=Math.sin(_*ht)/$e}const Oe=_*de;if(S=S*Ie+X*Oe,A=A*Ie+te*Oe,O=O*Ie+ue*Oe,G=G*Ie+ve*Oe,Ie===1-_){const $e=1/Math.sqrt(S*S+A*A+O*O+G*G);S*=$e,A*=$e,O*=$e,G*=$e}}e[t]=S,e[t+1]=A,e[t+2]=O,e[t+3]=G}static multiplyQuaternionsFlat(e,t,r,s,c,h){const _=r[s],S=r[s+1],A=r[s+2],O=r[s+3],G=c[h],X=c[h+1],te=c[h+2],ue=c[h+3];return e[t]=_*ue+O*G+S*te-A*X,e[t+1]=S*ue+O*X+A*G-_*te,e[t+2]=A*ue+O*te+_*X-S*G,e[t+3]=O*ue-_*G-S*X-A*te,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,s){return this._x=e,this._y=t,this._z=r,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,s=e._y,c=e._z,h=e._order,_=Math.cos,S=Math.sin,A=_(r/2),O=_(s/2),G=_(c/2),X=S(r/2),te=S(s/2),ue=S(c/2);switch(h){case"XYZ":this._x=X*O*G+A*te*ue,this._y=A*te*G-X*O*ue,this._z=A*O*ue+X*te*G,this._w=A*O*G-X*te*ue;break;case"YXZ":this._x=X*O*G+A*te*ue,this._y=A*te*G-X*O*ue,this._z=A*O*ue-X*te*G,this._w=A*O*G+X*te*ue;break;case"ZXY":this._x=X*O*G-A*te*ue,this._y=A*te*G+X*O*ue,this._z=A*O*ue+X*te*G,this._w=A*O*G-X*te*ue;break;case"ZYX":this._x=X*O*G-A*te*ue,this._y=A*te*G+X*O*ue,this._z=A*O*ue-X*te*G,this._w=A*O*G+X*te*ue;break;case"YZX":this._x=X*O*G+A*te*ue,this._y=A*te*G+X*O*ue,this._z=A*O*ue-X*te*G,this._w=A*O*G-X*te*ue;break;case"XZY":this._x=X*O*G-A*te*ue,this._y=A*te*G-X*O*ue,this._z=A*O*ue+X*te*G,this._w=A*O*G+X*te*ue;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+h)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,s=Math.sin(r);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],s=t[4],c=t[8],h=t[1],_=t[5],S=t[9],A=t[2],O=t[6],G=t[10],X=r+_+G;if(X>0){const te=.5/Math.sqrt(X+1);this._w=.25/te,this._x=(O-S)*te,this._y=(c-A)*te,this._z=(h-s)*te}else if(r>_&&r>G){const te=2*Math.sqrt(1+r-_-G);this._w=(O-S)/te,this._x=.25*te,this._y=(s+h)/te,this._z=(c+A)/te}else if(_>G){const te=2*Math.sqrt(1+_-r-G);this._w=(c-A)/te,this._x=(s+h)/te,this._y=.25*te,this._z=(S+O)/te}else{const te=2*Math.sqrt(1+G-r-_);this._w=(h-s)/te,this._x=(c+A)/te,this._y=(S+O)/te,this._z=.25*te}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(su(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(0===r)return this;const s=Math.min(1,t/r);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,s=e._y,c=e._z,h=e._w,_=t._x,S=t._y,A=t._z,O=t._w;return this._x=r*O+h*_+s*A-c*S,this._y=s*O+h*S+c*_-r*A,this._z=c*O+h*A+r*S-s*_,this._w=h*O-r*_-s*S-c*A,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const r=this._x,s=this._y,c=this._z,h=this._w;let _=h*e._w+r*e._x+s*e._y+c*e._z;if(_<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,_=-_):this.copy(e),_>=1)return this._w=h,this._x=r,this._y=s,this._z=c,this;const S=1-_*_;if(S<=Number.EPSILON){const te=1-t;return this._w=te*h+t*this._w,this._x=te*r+t*this._x,this._y=te*s+t*this._y,this._z=te*c+t*this._z,this.normalize(),this._onChangeCallback(),this}const A=Math.sqrt(S),O=Math.atan2(A,_),G=Math.sin((1-t)*O)/A,X=Math.sin(t*O)/A;return this._w=h*G+this._w*X,this._x=r*G+this._x*X,this._y=s*G+this._y*X,this._z=c*G+this._z*X,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),s=2*Math.PI*Math.random(),c=2*Math.PI*Math.random();return this.set(t*Math.cos(s),r*Math.sin(c),r*Math.cos(c),t*Math.sin(s))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}bu.prototype.isQuaternion=!0;class ot{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}set(e,t,r){return void 0===r&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Iz.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Iz.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,s=this.z,c=e.elements;return this.x=c[0]*t+c[3]*r+c[6]*s,this.y=c[1]*t+c[4]*r+c[7]*s,this.z=c[2]*t+c[5]*r+c[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,s=this.z,c=e.elements,h=1/(c[3]*t+c[7]*r+c[11]*s+c[15]);return this.x=(c[0]*t+c[4]*r+c[8]*s+c[12])*h,this.y=(c[1]*t+c[5]*r+c[9]*s+c[13])*h,this.z=(c[2]*t+c[6]*r+c[10]*s+c[14])*h,this}applyQuaternion(e){const t=this.x,r=this.y,s=this.z,c=e.x,h=e.y,_=e.z,S=e.w,A=S*t+h*s-_*r,O=S*r+_*t-c*s,G=S*s+c*r-h*t,X=-c*t-h*r-_*s;return this.x=A*S+X*-c+O*-_-G*-h,this.y=O*S+X*-h+G*-c-A*-_,this.z=G*S+X*-_+A*-h-O*-c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,s=this.z,c=e.elements;return this.x=c[0]*t+c[4]*r+c[8]*s,this.y=c[1]*t+c[5]*r+c[9]*s,this.z=c[2]*t+c[6]*r+c[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,s=e.y,c=e.z,h=t.x,_=t.y,S=t.z;return this.x=s*S-c*_,this.y=c*h-r*S,this.z=r*_-s*h,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return sk.copy(this).projectOnVector(e),this.sub(sk)}reflect(e){return this.sub(sk.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(su(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,s=this.z-e.z;return t*t+r*r+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const s=Math.sin(t)*e;return this.x=s*Math.sin(r),this.y=Math.cos(t)*e,this.z=s*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,r=Math.sqrt(1-eU(e,2));return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}ot.prototype.isVector3=!0;const sk=new ot,Iz=new bu;class _d{constructor(e=new ot(1/0,1/0,1/0),t=new ot(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,s=1/0,c=-1/0,h=-1/0,_=-1/0;for(let S=0,A=e.length;S<A;S+=3){const O=e[S],G=e[S+1],X=e[S+2];O<t&&(t=O),G<r&&(r=G),X<s&&(s=X),O>c&&(c=O),G>h&&(h=G),X>_&&(_=X)}return this.min.set(t,r,s),this.max.set(c,h,_),this}setFromBufferAttribute(e){let t=1/0,r=1/0,s=1/0,c=-1/0,h=-1/0,_=-1/0;for(let S=0,A=e.count;S<A;S++){const O=e.getX(S),G=e.getY(S),X=e.getZ(S);O<t&&(t=O),G<r&&(r=G),X<s&&(s=X),O>c&&(c=O),G>h&&(h=G),X>_&&(_=X)}return this.min.set(t,r,s),this.max.set(c,h,_),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=iy.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(void 0!==r)if(t&&null!=r.attributes&&void 0!==r.attributes.position){const c=r.attributes.position;for(let h=0,_=c.count;h<_;h++)iy.fromBufferAttribute(c,h).applyMatrix4(e.matrixWorld),this.expandByPoint(iy)}else null===r.boundingBox&&r.computeBoundingBox(),ok.copy(r.boundingBox),ok.applyMatrix4(e.matrixWorld),this.union(ok);const s=e.children;for(let c=0,h=s.length;c<h;c++)this.expandByObject(s[c],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,iy),iy.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Y1),jE.subVectors(this.max,Y1),y0.subVectors(e.a,Y1),b0.subVectors(e.b,Y1),x0.subVectors(e.c,Y1),m_.subVectors(b0,y0),g_.subVectors(x0,b0),ry.subVectors(y0,x0);let t=[0,-m_.z,m_.y,0,-g_.z,g_.y,0,-ry.z,ry.y,m_.z,0,-m_.x,g_.z,0,-g_.x,ry.z,0,-ry.x,-m_.y,m_.x,0,-g_.y,g_.x,0,-ry.y,ry.x,0];return!(!ak(t,y0,b0,x0,jE)||(t=[1,0,0,0,1,0,0,0,1],!ak(t,y0,b0,x0,jE)))&&(ZE.crossVectors(m_,g_),t=[ZE.x,ZE.y,ZE.z],ak(t,y0,b0,x0,jE))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return iy.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(iy).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Om[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Om[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Om[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Om[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Om[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Om[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Om[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Om[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Om)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}_d.prototype.isBox3=!0;const Om=[new ot,new ot,new ot,new ot,new ot,new ot,new ot,new ot],iy=new ot,ok=new _d,y0=new ot,b0=new ot,x0=new ot,m_=new ot,g_=new ot,ry=new ot,Y1=new ot,jE=new ot,ZE=new ot,sy=new ot;function ak(n,e,t,r,s){for(let c=0,h=n.length-3;c<=h;c+=3){sy.fromArray(n,c);const _=s.x*Math.abs(sy.x)+s.y*Math.abs(sy.y)+s.z*Math.abs(sy.z),S=e.dot(sy),A=t.dot(sy),O=r.dot(sy);if(Math.max(-Math.max(S,A,O),Math.min(S,A,O))>_)return!1}return!0}const AQ=new _d,Rz=new ot,YE=new ot,lk=new ot;class oy{constructor(e=new ot,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;void 0!==t?r.copy(t):AQ.setFromPoints(e).getCenter(r);let s=0;for(let c=0,h=e.length;c<h;c++)s=Math.max(s,r.distanceToSquared(e[c]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){lk.subVectors(e,this.center);const t=lk.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),s=.5*(r-this.radius);this.center.add(lk.multiplyScalar(s/r)),this.radius+=s}return this}union(e){return!0===this.center.equals(e.center)?YE.set(0,0,1).multiplyScalar(e.radius):YE.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Rz.copy(e.center).add(YE)),this.expandByPoint(Rz.copy(e.center).sub(YE)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Nm=new ot,ck=new ot,XE=new ot,__=new ot,uk=new ot,JE=new ot,hk=new ot;class ay{constructor(e=new ot,t=new ot(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Nm)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Nm.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Nm.copy(this.direction).multiplyScalar(t).add(this.origin),Nm.distanceToSquared(e))}distanceSqToSegment(e,t,r,s){ck.copy(e).add(t).multiplyScalar(.5),XE.copy(t).sub(e).normalize(),__.copy(this.origin).sub(ck);const c=.5*e.distanceTo(t),h=-this.direction.dot(XE),_=__.dot(this.direction),S=-__.dot(XE),A=__.lengthSq(),O=Math.abs(1-h*h);let G,X,te,ue;if(O>0)if(G=h*S-_,X=h*_-S,ue=c*O,G>=0)if(X>=-ue)if(X<=ue){const ve=1/O;G*=ve,X*=ve,te=G*(G+h*X+2*_)+X*(h*G+X+2*S)+A}else X=c,G=Math.max(0,-(h*X+_)),te=-G*G+X*(X+2*S)+A;else X=-c,G=Math.max(0,-(h*X+_)),te=-G*G+X*(X+2*S)+A;else X<=-ue?(G=Math.max(0,-(-h*c+_)),X=G>0?-c:Math.min(Math.max(-c,-S),c),te=-G*G+X*(X+2*S)+A):X<=ue?(G=0,X=Math.min(Math.max(-c,-S),c),te=X*(X+2*S)+A):(G=Math.max(0,-(h*c+_)),X=G>0?c:Math.min(Math.max(-c,-S),c),te=-G*G+X*(X+2*S)+A);else X=h>0?-c:c,G=Math.max(0,-(h*X+_)),te=-G*G+X*(X+2*S)+A;return r&&r.copy(this.direction).multiplyScalar(G).add(this.origin),s&&s.copy(XE).multiplyScalar(X).add(ck),te}intersectSphere(e,t){Nm.subVectors(e.center,this.origin);const r=Nm.dot(this.direction),s=Nm.dot(Nm)-r*r,c=e.radius*e.radius;if(s>c)return null;const h=Math.sqrt(c-s),_=r-h,S=r+h;return _<0&&S<0?null:this.at(_<0?S:_,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return null===r?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,s,c,h,_,S;const A=1/this.direction.x,O=1/this.direction.y,G=1/this.direction.z,X=this.origin;return A>=0?(r=(e.min.x-X.x)*A,s=(e.max.x-X.x)*A):(r=(e.max.x-X.x)*A,s=(e.min.x-X.x)*A),O>=0?(c=(e.min.y-X.y)*O,h=(e.max.y-X.y)*O):(c=(e.max.y-X.y)*O,h=(e.min.y-X.y)*O),r>h||c>s||((c>r||r!=r)&&(r=c),(h<s||s!=s)&&(s=h),G>=0?(_=(e.min.z-X.z)*G,S=(e.max.z-X.z)*G):(_=(e.max.z-X.z)*G,S=(e.min.z-X.z)*G),r>S||_>s)||((_>r||r!=r)&&(r=_),(S<s||s!=s)&&(s=S),s<0)?null:this.at(r>=0?r:s,t)}intersectsBox(e){return null!==this.intersectBox(e,Nm)}intersectTriangle(e,t,r,s,c){uk.subVectors(t,e),JE.subVectors(r,e),hk.crossVectors(uk,JE);let _,h=this.direction.dot(hk);if(h>0){if(s)return null;_=1}else{if(!(h<0))return null;_=-1,h=-h}__.subVectors(this.origin,e);const S=_*this.direction.dot(JE.crossVectors(__,JE));if(S<0)return null;const A=_*this.direction.dot(uk.cross(__));if(A<0||S+A>h)return null;const O=-_*__.dot(hk);return O<0?null:this.at(O/h,c)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Pr{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,s,c,h,_,S,A,O,G,X,te,ue,ve,Ie){const ye=this.elements;return ye[0]=e,ye[4]=t,ye[8]=r,ye[12]=s,ye[1]=c,ye[5]=h,ye[9]=_,ye[13]=S,ye[2]=A,ye[6]=O,ye[10]=G,ye[14]=X,ye[3]=te,ye[7]=ue,ye[11]=ve,ye[15]=Ie,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Pr).fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,s=1/w0.setFromMatrixColumn(e,0).length(),c=1/w0.setFromMatrixColumn(e,1).length(),h=1/w0.setFromMatrixColumn(e,2).length();return t[0]=r[0]*s,t[1]=r[1]*s,t[2]=r[2]*s,t[3]=0,t[4]=r[4]*c,t[5]=r[5]*c,t[6]=r[6]*c,t[7]=0,t[8]=r[8]*h,t[9]=r[9]*h,t[10]=r[10]*h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,r=e.x,s=e.y,c=e.z,h=Math.cos(r),_=Math.sin(r),S=Math.cos(s),A=Math.sin(s),O=Math.cos(c),G=Math.sin(c);if("XYZ"===e.order){const X=h*O,te=h*G,ue=_*O,ve=_*G;t[0]=S*O,t[4]=-S*G,t[8]=A,t[1]=te+ue*A,t[5]=X-ve*A,t[9]=-_*S,t[2]=ve-X*A,t[6]=ue+te*A,t[10]=h*S}else if("YXZ"===e.order){const X=S*O,te=S*G,ue=A*O,ve=A*G;t[0]=X+ve*_,t[4]=ue*_-te,t[8]=h*A,t[1]=h*G,t[5]=h*O,t[9]=-_,t[2]=te*_-ue,t[6]=ve+X*_,t[10]=h*S}else if("ZXY"===e.order){const X=S*O,te=S*G,ue=A*O,ve=A*G;t[0]=X-ve*_,t[4]=-h*G,t[8]=ue+te*_,t[1]=te+ue*_,t[5]=h*O,t[9]=ve-X*_,t[2]=-h*A,t[6]=_,t[10]=h*S}else if("ZYX"===e.order){const X=h*O,te=h*G,ue=_*O,ve=_*G;t[0]=S*O,t[4]=ue*A-te,t[8]=X*A+ve,t[1]=S*G,t[5]=ve*A+X,t[9]=te*A-ue,t[2]=-A,t[6]=_*S,t[10]=h*S}else if("YZX"===e.order){const X=h*S,te=h*A,ue=_*S,ve=_*A;t[0]=S*O,t[4]=ve-X*G,t[8]=ue*G+te,t[1]=G,t[5]=h*O,t[9]=-_*O,t[2]=-A*O,t[6]=te*G+ue,t[10]=X-ve*G}else if("XZY"===e.order){const X=h*S,te=h*A,ue=_*S,ve=_*A;t[0]=S*O,t[4]=-G,t[8]=A*O,t[1]=X*G+ve,t[5]=h*O,t[9]=te*G-ue,t[2]=ue*G-te,t[6]=_*O,t[10]=ve*G+X}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(IQ,e,RQ)}lookAt(e,t,r){const s=this.elements;return Lh.subVectors(e,t),0===Lh.lengthSq()&&(Lh.z=1),Lh.normalize(),v_.crossVectors(r,Lh),0===v_.lengthSq()&&(1===Math.abs(r.z)?Lh.x+=1e-4:Lh.z+=1e-4,Lh.normalize(),v_.crossVectors(r,Lh)),v_.normalize(),KE.crossVectors(Lh,v_),s[0]=v_.x,s[4]=KE.x,s[8]=Lh.x,s[1]=v_.y,s[5]=KE.y,s[9]=Lh.y,s[2]=v_.z,s[6]=KE.z,s[10]=Lh.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,s=t.elements,c=this.elements,h=r[0],_=r[4],S=r[8],A=r[12],O=r[1],G=r[5],X=r[9],te=r[13],ue=r[2],ve=r[6],Ie=r[10],ye=r[14],de=r[3],Ge=r[7],Oe=r[11],$e=r[15],ht=s[0],vt=s[4],Nt=s[8],Cn=s[12],hn=s[1],Xe=s[5],At=s[9],Zt=s[13],$t=s[2],tn=s[6],_t=s[10],Ut=s[14],ln=s[3],Gn=s[7],vn=s[11],Un=s[15];return c[0]=h*ht+_*hn+S*$t+A*ln,c[4]=h*vt+_*Xe+S*tn+A*Gn,c[8]=h*Nt+_*At+S*_t+A*vn,c[12]=h*Cn+_*Zt+S*Ut+A*Un,c[1]=O*ht+G*hn+X*$t+te*ln,c[5]=O*vt+G*Xe+X*tn+te*Gn,c[9]=O*Nt+G*At+X*_t+te*vn,c[13]=O*Cn+G*Zt+X*Ut+te*Un,c[2]=ue*ht+ve*hn+Ie*$t+ye*ln,c[6]=ue*vt+ve*Xe+Ie*tn+ye*Gn,c[10]=ue*Nt+ve*At+Ie*_t+ye*vn,c[14]=ue*Cn+ve*Zt+Ie*Ut+ye*Un,c[3]=de*ht+Ge*hn+Oe*$t+$e*ln,c[7]=de*vt+Ge*Xe+Oe*tn+$e*Gn,c[11]=de*Nt+Ge*At+Oe*_t+$e*vn,c[15]=de*Cn+Ge*Zt+Oe*Ut+$e*Un,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],s=e[8],c=e[12],h=e[1],_=e[5],S=e[9],A=e[13],O=e[2],G=e[6],X=e[10],te=e[14];return e[3]*(+c*S*G-s*A*G-c*_*X+r*A*X+s*_*te-r*S*te)+e[7]*(+t*S*te-t*A*X+c*h*X-s*h*te+s*A*O-c*S*O)+e[11]*(+t*A*G-t*_*te-c*h*G+r*h*te+c*_*O-r*A*O)+e[15]*(-s*_*O-t*S*G+t*_*X+s*h*G-r*h*X+r*S*O)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],s=e[2],c=e[3],h=e[4],_=e[5],S=e[6],A=e[7],O=e[8],G=e[9],X=e[10],te=e[11],ue=e[12],ve=e[13],Ie=e[14],ye=e[15],de=G*Ie*A-ve*X*A+ve*S*te-_*Ie*te-G*S*ye+_*X*ye,Ge=ue*X*A-O*Ie*A-ue*S*te+h*Ie*te+O*S*ye-h*X*ye,Oe=O*ve*A-ue*G*A+ue*_*te-h*ve*te-O*_*ye+h*G*ye,$e=ue*G*S-O*ve*S-ue*_*X+h*ve*X+O*_*Ie-h*G*Ie,ht=t*de+r*Ge+s*Oe+c*$e;if(0===ht)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const vt=1/ht;return e[0]=de*vt,e[1]=(ve*X*c-G*Ie*c-ve*s*te+r*Ie*te+G*s*ye-r*X*ye)*vt,e[2]=(_*Ie*c-ve*S*c+ve*s*A-r*Ie*A-_*s*ye+r*S*ye)*vt,e[3]=(G*S*c-_*X*c-G*s*A+r*X*A+_*s*te-r*S*te)*vt,e[4]=Ge*vt,e[5]=(O*Ie*c-ue*X*c+ue*s*te-t*Ie*te-O*s*ye+t*X*ye)*vt,e[6]=(ue*S*c-h*Ie*c-ue*s*A+t*Ie*A+h*s*ye-t*S*ye)*vt,e[7]=(h*X*c-O*S*c+O*s*A-t*X*A-h*s*te+t*S*te)*vt,e[8]=Oe*vt,e[9]=(ue*G*c-O*ve*c-ue*r*te+t*ve*te+O*r*ye-t*G*ye)*vt,e[10]=(h*ve*c-ue*_*c+ue*r*A-t*ve*A-h*r*ye+t*_*ye)*vt,e[11]=(O*_*c-h*G*c-O*r*A+t*G*A+h*r*te-t*_*te)*vt,e[12]=$e*vt,e[13]=(O*ve*s-ue*G*s+ue*r*X-t*ve*X-O*r*Ie+t*G*Ie)*vt,e[14]=(ue*_*s-h*ve*s-ue*r*S+t*ve*S+h*r*Ie-t*_*Ie)*vt,e[15]=(h*G*s-O*_*s+O*r*S-t*G*S-h*r*X+t*_*X)*vt,this}scale(e){const t=this.elements,r=e.x,s=e.y,c=e.z;return t[0]*=r,t[4]*=s,t[8]*=c,t[1]*=r,t[5]*=s,t[9]*=c,t[2]*=r,t[6]*=s,t[10]*=c,t[3]*=r,t[7]*=s,t[11]*=c,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),s=Math.sin(t),c=1-r,h=e.x,_=e.y,S=e.z,A=c*h,O=c*_;return this.set(A*h+r,A*_-s*S,A*S+s*_,0,A*_+s*S,O*_+r,O*S-s*h,0,A*S-s*_,O*S+s*h,c*S*S+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,s,c,h){return this.set(1,r,c,0,e,1,h,0,t,s,1,0,0,0,0,1),this}compose(e,t,r){const s=this.elements,c=t._x,h=t._y,_=t._z,S=t._w,A=c+c,O=h+h,G=_+_,X=c*A,te=c*O,ue=c*G,ve=h*O,Ie=h*G,ye=_*G,de=S*A,Ge=S*O,Oe=S*G,$e=r.x,ht=r.y,vt=r.z;return s[0]=(1-(ve+ye))*$e,s[1]=(te+Oe)*$e,s[2]=(ue-Ge)*$e,s[3]=0,s[4]=(te-Oe)*ht,s[5]=(1-(X+ye))*ht,s[6]=(Ie+de)*ht,s[7]=0,s[8]=(ue+Ge)*vt,s[9]=(Ie-de)*vt,s[10]=(1-(X+ve))*vt,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,r){const s=this.elements;let c=w0.set(s[0],s[1],s[2]).length();const h=w0.set(s[4],s[5],s[6]).length(),_=w0.set(s[8],s[9],s[10]).length();this.determinant()<0&&(c=-c),e.x=s[12],e.y=s[13],e.z=s[14],ff.copy(this);const A=1/c,O=1/h,G=1/_;return ff.elements[0]*=A,ff.elements[1]*=A,ff.elements[2]*=A,ff.elements[4]*=O,ff.elements[5]*=O,ff.elements[6]*=O,ff.elements[8]*=G,ff.elements[9]*=G,ff.elements[10]*=G,t.setFromRotationMatrix(ff),r.x=c,r.y=h,r.z=_,this}makePerspective(e,t,r,s,c,h){void 0===h&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const _=this.elements,A=2*c/(r-s),O=(t+e)/(t-e),G=(r+s)/(r-s),X=-(h+c)/(h-c),te=-2*h*c/(h-c);return _[0]=2*c/(t-e),_[4]=0,_[8]=O,_[12]=0,_[1]=0,_[5]=A,_[9]=G,_[13]=0,_[2]=0,_[6]=0,_[10]=X,_[14]=te,_[3]=0,_[7]=0,_[11]=-1,_[15]=0,this}makeOrthographic(e,t,r,s,c,h){const _=this.elements,S=1/(t-e),A=1/(r-s),O=1/(h-c),G=(t+e)*S,X=(r+s)*A,te=(h+c)*O;return _[0]=2*S,_[4]=0,_[8]=0,_[12]=-G,_[1]=0,_[5]=2*A,_[9]=0,_[13]=-X,_[2]=0,_[6]=0,_[10]=-2*O,_[14]=-te,_[3]=0,_[7]=0,_[11]=0,_[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let s=0;s<16;s++)if(t[s]!==r[s])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}Pr.prototype.isMatrix4=!0;const w0=new ot,ff=new Pr,IQ=new ot(0,0,0),RQ=new ot(1,1,1),v_=new ot,KE=new ot,Lh=new ot,kz=new Pr,Pz=new bu;class M0{constructor(e=0,t=0,r=0,s=M0.DefaultOrder){this._x=e,this._y=t,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,s=this._order){return this._x=e,this._y=t,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const s=e.elements,c=s[0],h=s[4],_=s[8],S=s[1],A=s[5],O=s[9],G=s[2],X=s[6],te=s[10];switch(t){case"XYZ":this._y=Math.asin(su(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(-O,te),this._z=Math.atan2(-h,c)):(this._x=Math.atan2(X,A),this._z=0);break;case"YXZ":this._x=Math.asin(-su(O,-1,1)),Math.abs(O)<.9999999?(this._y=Math.atan2(_,te),this._z=Math.atan2(S,A)):(this._y=Math.atan2(-G,c),this._z=0);break;case"ZXY":this._x=Math.asin(su(X,-1,1)),Math.abs(X)<.9999999?(this._y=Math.atan2(-G,te),this._z=Math.atan2(-h,A)):(this._y=0,this._z=Math.atan2(S,c));break;case"ZYX":this._y=Math.asin(-su(G,-1,1)),Math.abs(G)<.9999999?(this._x=Math.atan2(X,te),this._z=Math.atan2(S,c)):(this._x=0,this._z=Math.atan2(-h,A));break;case"YZX":this._z=Math.asin(su(S,-1,1)),Math.abs(S)<.9999999?(this._x=Math.atan2(-O,A),this._y=Math.atan2(-G,c)):(this._x=0,this._y=Math.atan2(_,te));break;case"XZY":this._z=Math.asin(-su(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(X,A),this._y=Math.atan2(_,c)):(this._x=Math.atan2(-O,te),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return kz.makeRotationFromQuaternion(e),this.setFromRotationMatrix(kz,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Pz.setFromEuler(this),this.setFromQuaternion(Pz,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new ot(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}M0.prototype.isEuler=!0,M0.DefaultOrder="XYZ",M0.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class dk{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let kQ=0;const Lz=new ot,C0=new bu,Bm=new Pr,QE=new ot,X1=new ot,PQ=new ot,LQ=new bu,Fz=new ot(1,0,0),Oz=new ot(0,1,0),Nz=new ot(0,0,1),FQ={type:"added"},Bz={type:"removed"};class ta extends ey{constructor(){super(),Object.defineProperty(this,"id",{value:kQ++}),this.uuid=Ph(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ta.DefaultUp.clone();const e=new ot,t=new M0,r=new bu,s=new ot(1,1,1);t._onChange(function c(){r.setFromEuler(t,!1)}),r._onChange(function h(){t.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Pr},normalMatrix:{value:new Oc}}),this.matrix=new Pr,this.matrixWorld=new Pr,this.matrixAutoUpdate=ta.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new dk,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return C0.setFromAxisAngle(e,t),this.quaternion.multiply(C0),this}rotateOnWorldAxis(e,t){return C0.setFromAxisAngle(e,t),this.quaternion.premultiply(C0),this}rotateX(e){return this.rotateOnAxis(Fz,e)}rotateY(e){return this.rotateOnAxis(Oz,e)}rotateZ(e){return this.rotateOnAxis(Nz,e)}translateOnAxis(e,t){return Lz.copy(e).applyQuaternion(this.quaternion),this.position.add(Lz.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Fz,e)}translateY(e){return this.translateOnAxis(Oz,e)}translateZ(e){return this.translateOnAxis(Nz,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Bm.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?QE.copy(e):QE.set(e,t,r);const s=this.parent;this.updateWorldMatrix(!0,!1),X1.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Bm.lookAt(X1,QE,this.up):Bm.lookAt(QE,X1,this.up),this.quaternion.setFromRotationMatrix(Bm),s&&(Bm.extractRotation(s.matrixWorld),C0.setFromRotationMatrix(Bm),this.quaternion.premultiply(C0.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(FQ)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Bz)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Bz)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Bm.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Bm.multiply(e.parent.matrixWorld)),e.applyMatrix4(Bm),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,s=this.children.length;r<s;r++){const h=this.children[r].getObjectByProperty(e,t);if(void 0!==h)return h}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(X1,e,PQ),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(X1,LQ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,s=t.length;r<s;r++)t[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let r=0,s=t.length;r<s;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,s=t.length;r<s;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(!0===e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const s=this.children;for(let c=0,h=s.length;c<h;c++)s[c].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function c(_,S){return void 0===_[S.uuid]&&(_[S.uuid]=S.toJSON(e)),S.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=c(e.geometries,this.geometry);const _=this.geometry.parameters;if(void 0!==_&&void 0!==_.shapes){const S=_.shapes;if(Array.isArray(S))for(let A=0,O=S.length;A<O;A++)c(e.shapes,S[A]);else c(e.shapes,S)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(c(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const _=[];for(let S=0,A=this.material.length;S<A;S++)_.push(c(e.materials,this.material[S]));s.material=_}else s.material=c(e.materials,this.material);if(this.children.length>0){s.children=[];for(let _=0;_<this.children.length;_++)s.children.push(this.children[_].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let _=0;_<this.animations.length;_++)s.animations.push(c(e.animations,this.animations[_]))}if(t){const _=h(e.geometries),S=h(e.materials),A=h(e.textures),O=h(e.images),G=h(e.shapes),X=h(e.skeletons),te=h(e.animations);_.length>0&&(r.geometries=_),S.length>0&&(r.materials=S),A.length>0&&(r.textures=A),O.length>0&&(r.images=O),G.length>0&&(r.shapes=G),X.length>0&&(r.skeletons=X),te.length>0&&(r.animations=te)}return r.object=s,r;function h(_){const S=[];for(const A in _){const O=_[A];delete O.metadata,S.push(O)}return S}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}ta.DefaultUp=new ot(0,1,0),ta.DefaultMatrixAutoUpdate=!0,ta.prototype.isObject3D=!0;const pf=new ot,Hm=new ot,fk=new ot,zm=new ot,S0=new ot,E0=new ot,Hz=new ot,pk=new ot,mk=new ot,gk=new ot;class fc{constructor(e=new ot,t=new ot,r=new ot){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,s){s.subVectors(r,t),pf.subVectors(e,t),s.cross(pf);const c=s.lengthSq();return c>0?s.multiplyScalar(1/Math.sqrt(c)):s.set(0,0,0)}static getBarycoord(e,t,r,s,c){pf.subVectors(s,t),Hm.subVectors(r,t),fk.subVectors(e,t);const h=pf.dot(pf),_=pf.dot(Hm),S=pf.dot(fk),A=Hm.dot(Hm),O=Hm.dot(fk),G=h*A-_*_;if(0===G)return c.set(-2,-1,-1);const X=1/G,te=(A*S-_*O)*X,ue=(h*O-_*S)*X;return c.set(1-te-ue,ue,te)}static containsPoint(e,t,r,s){return this.getBarycoord(e,t,r,s,zm),zm.x>=0&&zm.y>=0&&zm.x+zm.y<=1}static getUV(e,t,r,s,c,h,_,S){return this.getBarycoord(e,t,r,s,zm),S.set(0,0),S.addScaledVector(c,zm.x),S.addScaledVector(h,zm.y),S.addScaledVector(_,zm.z),S}static isFrontFacing(e,t,r,s){return pf.subVectors(r,t),Hm.subVectors(e,t),pf.cross(Hm).dot(s)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,s){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,r,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,s),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return pf.subVectors(this.c,this.b),Hm.subVectors(this.a,this.b),.5*pf.cross(Hm).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return fc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return fc.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,s,c){return fc.getUV(e,this.a,this.b,this.c,t,r,s,c)}containsPoint(e){return fc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return fc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,s=this.b,c=this.c;let h,_;S0.subVectors(s,r),E0.subVectors(c,r),pk.subVectors(e,r);const S=S0.dot(pk),A=E0.dot(pk);if(S<=0&&A<=0)return t.copy(r);mk.subVectors(e,s);const O=S0.dot(mk),G=E0.dot(mk);if(O>=0&&G<=O)return t.copy(s);const X=S*G-O*A;if(X<=0&&S>=0&&O<=0)return h=S/(S-O),t.copy(r).addScaledVector(S0,h);gk.subVectors(e,c);const te=S0.dot(gk),ue=E0.dot(gk);if(ue>=0&&te<=ue)return t.copy(c);const ve=te*A-S*ue;if(ve<=0&&A>=0&&ue<=0)return _=A/(A-ue),t.copy(r).addScaledVector(E0,_);const Ie=O*ue-te*G;if(Ie<=0&&G-O>=0&&te-ue>=0)return Hz.subVectors(c,s),_=(G-O)/(G-O+(te-ue)),t.copy(s).addScaledVector(Hz,_);const ye=1/(Ie+ve+X);return h=ve*ye,_=X*ye,t.copy(r).addScaledVector(S0,h).addScaledVector(E0,_)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let OQ=0;class ou extends ey{constructor(){super(),Object.defineProperty(this,"id",{value:OQ++}),this.uuid=Ph(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const r=e[t];if(void 0===r){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===r;continue}const s=this[t];void 0!==s?s&&s.isColor?s.set(r):s&&s.isVector3&&r&&r.isVector3?s.copy(r):this[t]=r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function s(c){const h=[];for(const _ in c){const S=c[_];delete S.metadata,h.push(S)}return h}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),0!==this.side&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(r.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=this.flatShading),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t){const c=s(e.textures),h=s(e.images);c.length>0&&(r.textures=c),h.length>0&&(r.images=h)}return r}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(null!==t){const s=t.length;r=new Array(s);for(let c=0;c!==s;++c)r[c]=t[c].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}ou.prototype.isMaterial=!0;class Vm extends ou{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new er(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Vm.prototype.isMeshBasicMaterial=!0;const Wa=new ot,$E=new ci;class Ra{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.usage=G1,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let s=0,c=this.itemSize;s<c;s++)this.array[e+s]=t.array[r+s];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let s=0,c=e.length;s<c;s++){let h=e[s];void 0===h&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",s),h=new er),t[r++]=h.r,t[r++]=h.g,t[r++]=h.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let s=0,c=e.length;s<c;s++){let h=e[s];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",s),h=new ci),t[r++]=h.x,t[r++]=h.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let s=0,c=e.length;s<c;s++){let h=e[s];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",s),h=new ot),t[r++]=h.x,t[r++]=h.y,t[r++]=h.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let s=0,c=e.length;s<c;s++){let h=e[s];void 0===h&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",s),h=new ya),t[r++]=h.x,t[r++]=h.y,t[r++]=h.z,t[r++]=h.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,r=this.count;t<r;t++)$E.fromBufferAttribute(this,t),$E.applyMatrix3(e),this.setXY(t,$E.x,$E.y);else if(3===this.itemSize)for(let t=0,r=this.count;t<r;t++)Wa.fromBufferAttribute(this,t),Wa.applyMatrix3(e),this.setXYZ(t,Wa.x,Wa.y,Wa.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Wa.x=this.getX(t),Wa.y=this.getY(t),Wa.z=this.getZ(t),Wa.applyMatrix4(e),this.setXYZ(t,Wa.x,Wa.y,Wa.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Wa.x=this.getX(t),Wa.y=this.getY(t),Wa.z=this.getZ(t),Wa.applyNormalMatrix(e),this.setXYZ(t,Wa.x,Wa.y,Wa.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Wa.x=this.getX(t),Wa.y=this.getY(t),Wa.z=this.getZ(t),Wa.transformDirection(e),this.setXYZ(t,Wa.x,Wa.y,Wa.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this}setXYZ(e,t,r,s){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this.array[e+2]=s,this}setXYZW(e,t,r,s,c){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this.array[e+2]=s,this.array[e+3]=c,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==G1&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}Ra.prototype.isBufferAttribute=!0;class _k extends Ra{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class vk extends Ra{constructor(e,t,r){super(new Uint32Array(e),t,r)}}(class UQ extends Ra{constructor(e,t,r){super(new Uint16Array(e),t,r)}}).prototype.isFloat16BufferAttribute=!0;class vr extends Ra{constructor(e,t,r){super(new Float32Array(e),t,r)}}let WQ=0;const vd=new Pr,yk=new ta,T0=new ot,Fh=new _d,J1=new _d,Nc=new ot;class as extends ey{constructor(){super(),Object.defineProperty(this,"id",{value:WQ++}),this.uuid=Ph(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(Dz(e)?vk:_k)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(void 0!==r){const c=(new Oc).getNormalMatrix(e);r.applyNormalMatrix(c),r.needsUpdate=!0}const s=this.attributes.tangent;return void 0!==s&&(s.transformDirection(e),s.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return vd.makeRotationFromQuaternion(e),this.applyMatrix4(vd),this}rotateX(e){return vd.makeRotationX(e),this.applyMatrix4(vd),this}rotateY(e){return vd.makeRotationY(e),this.applyMatrix4(vd),this}rotateZ(e){return vd.makeRotationZ(e),this.applyMatrix4(vd),this}translate(e,t,r){return vd.makeTranslation(e,t,r),this.applyMatrix4(vd),this}scale(e,t,r){return vd.makeScale(e,t,r),this.applyMatrix4(vd),this}lookAt(e){return yk.lookAt(e),yk.updateMatrix(),this.applyMatrix4(yk.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(T0).negate(),this.translate(T0.x,T0.y,T0.z),this}setFromPoints(e){const t=[];for(let r=0,s=e.length;r<s;r++){const c=e[r];t.push(c.x,c.y,c.z||0)}return this.setAttribute("position",new vr(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new _d);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ot(-1/0,-1/0,-1/0),new ot(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,s=t.length;r<s;r++)Fh.setFromBufferAttribute(t[r]),this.morphTargetsRelative?(Nc.addVectors(this.boundingBox.min,Fh.min),this.boundingBox.expandByPoint(Nc),Nc.addVectors(this.boundingBox.max,Fh.max),this.boundingBox.expandByPoint(Nc)):(this.boundingBox.expandByPoint(Fh.min),this.boundingBox.expandByPoint(Fh.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new oy);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ot,1/0);if(e){const r=this.boundingSphere.center;if(Fh.setFromBufferAttribute(e),t)for(let c=0,h=t.length;c<h;c++)J1.setFromBufferAttribute(t[c]),this.morphTargetsRelative?(Nc.addVectors(Fh.min,J1.min),Fh.expandByPoint(Nc),Nc.addVectors(Fh.max,J1.max),Fh.expandByPoint(Nc)):(Fh.expandByPoint(J1.min),Fh.expandByPoint(J1.max));Fh.getCenter(r);let s=0;for(let c=0,h=e.count;c<h;c++)Nc.fromBufferAttribute(e,c),s=Math.max(s,r.distanceToSquared(Nc));if(t)for(let c=0,h=t.length;c<h;c++){const _=t[c],S=this.morphTargetsRelative;for(let A=0,O=_.count;A<O;A++)Nc.fromBufferAttribute(_,A),S&&(T0.fromBufferAttribute(e,A),Nc.add(T0)),s=Math.max(s,r.distanceToSquared(Nc))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const r=e.array,s=t.position.array,c=t.normal.array,h=t.uv.array,_=s.length/3;void 0===t.tangent&&this.setAttribute("tangent",new Ra(new Float32Array(4*_),4));const S=t.tangent.array,A=[],O=[];for(let hn=0;hn<_;hn++)A[hn]=new ot,O[hn]=new ot;const G=new ot,X=new ot,te=new ot,ue=new ci,ve=new ci,Ie=new ci,ye=new ot,de=new ot;function Ge(hn,Xe,At){G.fromArray(s,3*hn),X.fromArray(s,3*Xe),te.fromArray(s,3*At),ue.fromArray(h,2*hn),ve.fromArray(h,2*Xe),Ie.fromArray(h,2*At),X.sub(G),te.sub(G),ve.sub(ue),Ie.sub(ue);const Zt=1/(ve.x*Ie.y-Ie.x*ve.y);!isFinite(Zt)||(ye.copy(X).multiplyScalar(Ie.y).addScaledVector(te,-ve.y).multiplyScalar(Zt),de.copy(te).multiplyScalar(ve.x).addScaledVector(X,-Ie.x).multiplyScalar(Zt),A[hn].add(ye),A[Xe].add(ye),A[At].add(ye),O[hn].add(de),O[Xe].add(de),O[At].add(de))}let Oe=this.groups;0===Oe.length&&(Oe=[{start:0,count:r.length}]);for(let hn=0,Xe=Oe.length;hn<Xe;++hn){const At=Oe[hn],Zt=At.start;for(let tn=Zt,_t=Zt+At.count;tn<_t;tn+=3)Ge(r[tn+0],r[tn+1],r[tn+2])}const $e=new ot,ht=new ot,vt=new ot,Nt=new ot;function Cn(hn){vt.fromArray(c,3*hn),Nt.copy(vt);const Xe=A[hn];$e.copy(Xe),$e.sub(vt.multiplyScalar(vt.dot(Xe))).normalize(),ht.crossVectors(Nt,Xe);const Zt=ht.dot(O[hn])<0?-1:1;S[4*hn]=$e.x,S[4*hn+1]=$e.y,S[4*hn+2]=$e.z,S[4*hn+3]=Zt}for(let hn=0,Xe=Oe.length;hn<Xe;++hn){const At=Oe[hn],Zt=At.start;for(let tn=Zt,_t=Zt+At.count;tn<_t;tn+=3)Cn(r[tn+0]),Cn(r[tn+1]),Cn(r[tn+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let r=this.getAttribute("normal");if(void 0===r)r=new Ra(new Float32Array(3*t.count),3),this.setAttribute("normal",r);else for(let X=0,te=r.count;X<te;X++)r.setXYZ(X,0,0,0);const s=new ot,c=new ot,h=new ot,_=new ot,S=new ot,A=new ot,O=new ot,G=new ot;if(e)for(let X=0,te=e.count;X<te;X+=3){const ue=e.getX(X+0),ve=e.getX(X+1),Ie=e.getX(X+2);s.fromBufferAttribute(t,ue),c.fromBufferAttribute(t,ve),h.fromBufferAttribute(t,Ie),O.subVectors(h,c),G.subVectors(s,c),O.cross(G),_.fromBufferAttribute(r,ue),S.fromBufferAttribute(r,ve),A.fromBufferAttribute(r,Ie),_.add(O),S.add(O),A.add(O),r.setXYZ(ue,_.x,_.y,_.z),r.setXYZ(ve,S.x,S.y,S.z),r.setXYZ(Ie,A.x,A.y,A.z)}else for(let X=0,te=t.count;X<te;X+=3)s.fromBufferAttribute(t,X+0),c.fromBufferAttribute(t,X+1),h.fromBufferAttribute(t,X+2),O.subVectors(h,c),G.subVectors(s,c),O.cross(G),r.setXYZ(X+0,O.x,O.y,O.z),r.setXYZ(X+1,O.x,O.y,O.z),r.setXYZ(X+2,O.x,O.y,O.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const s in r){if(void 0===e.attributes[s])continue;const h=r[s].array,_=e.attributes[s],S=_.array,A=_.itemSize*t,O=Math.min(S.length,h.length-A);for(let G=0,X=A;G<O;G++,X++)h[X]=S[G]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Nc.fromBufferAttribute(e,t),Nc.normalize(),e.setXYZ(t,Nc.x,Nc.y,Nc.z)}toNonIndexed(){function e(_,S){const A=_.array,O=_.itemSize,G=_.normalized,X=new A.constructor(S.length*O);let te=0,ue=0;for(let ve=0,Ie=S.length;ve<Ie;ve++){te=_.isInterleavedBufferAttribute?S[ve]*_.data.stride+_.offset:S[ve]*O;for(let ye=0;ye<O;ye++)X[ue++]=A[te++]}return new Ra(X,O,G)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new as,r=this.index.array,s=this.attributes;for(const _ in s){const A=e(s[_],r);t.setAttribute(_,A)}const c=this.morphAttributes;for(const _ in c){const S=[],A=c[_];for(let O=0,G=A.length;O<G;O++){const te=e(A[O],r);S.push(te)}t.morphAttributes[_]=S}t.morphTargetsRelative=this.morphTargetsRelative;const h=this.groups;for(let _=0,S=h.length;_<S;_++){const A=h[_];t.addGroup(A.start,A.count,A.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const S=this.parameters;for(const A in S)void 0!==S[A]&&(e[A]=S[A]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const S in r)e.data.attributes[S]=r[S].toJSON(e.data);const s={};let c=!1;for(const S in this.morphAttributes){const A=this.morphAttributes[S],O=[];for(let G=0,X=A.length;G<X;G++)O.push(A[G].toJSON(e.data));O.length>0&&(s[S]=O,c=!0)}c&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const h=this.groups;h.length>0&&(e.data.groups=JSON.parse(JSON.stringify(h)));const _=this.boundingSphere;return null!==_&&(e.data.boundingSphere={center:_.center.toArray(),radius:_.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;null!==r&&this.setIndex(r.clone(t));const s=e.attributes;for(const A in s)this.setAttribute(A,s[A].clone(t));const c=e.morphAttributes;for(const A in c){const O=[],G=c[A];for(let X=0,te=G.length;X<te;X++)O.push(G[X].clone(t));this.morphAttributes[A]=O}this.morphTargetsRelative=e.morphTargetsRelative;const h=e.groups;for(let A=0,O=h.length;A<O;A++){const G=h[A];this.addGroup(G.start,G.count,G.materialIndex)}const _=e.boundingBox;null!==_&&(this.boundingBox=_.clone());const S=e.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}as.prototype.isBufferGeometry=!0;const zz=new Pr,D0=new ay,bk=new oy,y_=new ot,b_=new ot,x_=new ot,xk=new ot,wk=new ot,Mk=new ot,eT=new ot,tT=new ot,nT=new ot,iT=new ci,rT=new ci,sT=new ci,Ck=new ot,oT=new ot;class Tc extends ta{constructor(e=new as,t=new Vm){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const s=t[r[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,h=s.length;c<h;c++){const _=s[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_]=c}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const r=this.geometry,s=this.material,c=this.matrixWorld;if(void 0===s||(null===r.boundingSphere&&r.computeBoundingSphere(),bk.copy(r.boundingSphere),bk.applyMatrix4(c),!1===e.ray.intersectsSphere(bk))||(zz.copy(c).invert(),D0.copy(e.ray).applyMatrix4(zz),null!==r.boundingBox&&!1===D0.intersectsBox(r.boundingBox)))return;let h;if(r.isBufferGeometry){const _=r.index,S=r.attributes.position,A=r.morphAttributes.position,O=r.morphTargetsRelative,G=r.attributes.uv,X=r.attributes.uv2,te=r.groups,ue=r.drawRange;if(null!==_)if(Array.isArray(s))for(let ve=0,Ie=te.length;ve<Ie;ve++){const ye=te[ve],de=s[ye.materialIndex];for(let $e=Math.max(ye.start,ue.start),ht=Math.min(_.count,Math.min(ye.start+ye.count,ue.start+ue.count));$e<ht;$e+=3){const vt=_.getX($e),Nt=_.getX($e+1),Cn=_.getX($e+2);h=aT(this,de,e,D0,S,A,O,G,X,vt,Nt,Cn),h&&(h.faceIndex=Math.floor($e/3),h.face.materialIndex=ye.materialIndex,t.push(h))}}else for(let ye=Math.max(0,ue.start),de=Math.min(_.count,ue.start+ue.count);ye<de;ye+=3){const Ge=_.getX(ye),Oe=_.getX(ye+1),$e=_.getX(ye+2);h=aT(this,s,e,D0,S,A,O,G,X,Ge,Oe,$e),h&&(h.faceIndex=Math.floor(ye/3),t.push(h))}else if(void 0!==S)if(Array.isArray(s))for(let ve=0,Ie=te.length;ve<Ie;ve++){const ye=te[ve],de=s[ye.materialIndex];for(let $e=Math.max(ye.start,ue.start),ht=Math.min(S.count,Math.min(ye.start+ye.count,ue.start+ue.count));$e<ht;$e+=3)h=aT(this,de,e,D0,S,A,O,G,X,$e,$e+1,$e+2),h&&(h.faceIndex=Math.floor($e/3),h.face.materialIndex=ye.materialIndex,t.push(h))}else for(let ye=Math.max(0,ue.start),de=Math.min(S.count,ue.start+ue.count);ye<de;ye+=3)h=aT(this,s,e,D0,S,A,O,G,X,ye,ye+1,ye+2),h&&(h.faceIndex=Math.floor(ye/3),t.push(h))}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function aT(n,e,t,r,s,c,h,_,S,A,O,G){y_.fromBufferAttribute(s,A),b_.fromBufferAttribute(s,O),x_.fromBufferAttribute(s,G);const X=n.morphTargetInfluences;if(c&&X){eT.set(0,0,0),tT.set(0,0,0),nT.set(0,0,0);for(let ue=0,ve=c.length;ue<ve;ue++){const Ie=X[ue],ye=c[ue];0!==Ie&&(xk.fromBufferAttribute(ye,A),wk.fromBufferAttribute(ye,O),Mk.fromBufferAttribute(ye,G),h?(eT.addScaledVector(xk,Ie),tT.addScaledVector(wk,Ie),nT.addScaledVector(Mk,Ie)):(eT.addScaledVector(xk.sub(y_),Ie),tT.addScaledVector(wk.sub(b_),Ie),nT.addScaledVector(Mk.sub(x_),Ie)))}y_.add(eT),b_.add(tT),x_.add(nT)}n.isSkinnedMesh&&(n.boneTransform(A,y_),n.boneTransform(O,b_),n.boneTransform(G,x_));const te=function qQ(n,e,t,r,s,c,h,_){let S;if(S=1===e.side?r.intersectTriangle(h,c,s,!0,_):r.intersectTriangle(s,c,h,2!==e.side,_),null===S)return null;oT.copy(_),oT.applyMatrix4(n.matrixWorld);const A=t.ray.origin.distanceTo(oT);return A<t.near||A>t.far?null:{distance:A,point:oT.clone(),object:n}}(n,e,t,r,y_,b_,x_,Ck);if(te){_&&(iT.fromBufferAttribute(_,A),rT.fromBufferAttribute(_,O),sT.fromBufferAttribute(_,G),te.uv=fc.getUV(Ck,y_,b_,x_,iT,rT,sT,new ci)),S&&(iT.fromBufferAttribute(S,A),rT.fromBufferAttribute(S,O),sT.fromBufferAttribute(S,G),te.uv2=fc.getUV(Ck,y_,b_,x_,iT,rT,sT,new ci));const ue={a:A,b:O,c:G,normal:new ot,materialIndex:0};fc.getNormal(y_,b_,x_,ue.normal),te.face=ue}return te}Tc.prototype.isMesh=!0;class ly extends as{constructor(e=1,t=1,r=1,s=1,c=1,h=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:s,heightSegments:c,depthSegments:h};const _=this;s=Math.floor(s),c=Math.floor(c),h=Math.floor(h);const S=[],A=[],O=[],G=[];let X=0,te=0;function ue(ve,Ie,ye,de,Ge,Oe,$e,ht,vt,Nt,Cn){const hn=Oe/vt,Xe=$e/Nt,At=Oe/2,Zt=$e/2,$t=ht/2,tn=vt+1,_t=Nt+1;let Ut=0,ln=0;const Gn=new ot;for(let vn=0;vn<_t;vn++){const Un=vn*Xe-Zt;for(let Ti=0;Ti<tn;Ti++)Gn[ve]=(Ti*hn-At)*de,Gn[Ie]=Un*Ge,Gn[ye]=$t,A.push(Gn.x,Gn.y,Gn.z),Gn[ve]=0,Gn[Ie]=0,Gn[ye]=ht>0?1:-1,O.push(Gn.x,Gn.y,Gn.z),G.push(Ti/vt),G.push(1-vn/Nt),Ut+=1}for(let vn=0;vn<Nt;vn++)for(let Un=0;Un<vt;Un++){const fr=X+Un+tn*(vn+1),qi=X+(Un+1)+tn*(vn+1),Vn=X+(Un+1)+tn*vn;S.push(X+Un+tn*vn,fr,Vn),S.push(fr,qi,Vn),ln+=6}_.addGroup(te,ln,Cn),te+=ln,X+=Ut}ue("z","y","x",-1,-1,r,t,e,h,c,0),ue("z","y","x",1,-1,r,t,-e,h,c,1),ue("x","z","y",1,1,e,r,t,s,h,2),ue("x","z","y",1,-1,e,r,-t,s,h,3),ue("x","y","z",1,-1,e,t,r,s,c,4),ue("x","y","z",-1,-1,e,t,-r,s,c,5),this.setIndex(S),this.setAttribute("position",new vr(A,3)),this.setAttribute("normal",new vr(O,3)),this.setAttribute("uv",new vr(G,2))}static fromJSON(e){return new ly(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function A0(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const s=n[t][r];e[t][r]=s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.clone():Array.isArray(s)?s.slice():s}}return e}function xu(n){const e={};for(let t=0;t<n.length;t++){const r=A0(n[t]);for(const s in r)e[s]=r[s]}return e}const jQ={clone:A0,merge:xu};class w_ extends ou{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=A0(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const h=this.uniforms[s].value;t.uniforms[s]=h&&h.isTexture?{type:"t",value:h.toJSON(e).uuid}:h&&h.isColor?{type:"c",value:h.getHex()}:h&&h.isVector2?{type:"v2",value:h.toArray()}:h&&h.isVector3?{type:"v3",value:h.toArray()}:h&&h.isVector4?{type:"v4",value:h.toArray()}:h&&h.isMatrix3?{type:"m3",value:h.toArray()}:h&&h.isMatrix4?{type:"m4",value:h.toArray()}:{value:h}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const s in this.extensions)!0===this.extensions[s]&&(r[s]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}w_.prototype.isShaderMaterial=!0;class lT extends ta{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Pr,this.projectionMatrix=new Pr,this.projectionMatrixInverse=new Pr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}lT.prototype.isCamera=!0;class Bc extends lT{constructor(e=50,t=1,r=.1,s=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*q1*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*ty*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*q1*Math.atan(Math.tan(.5*ty*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,s,c,h){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=s,this.view.width=c,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*ty*this.fov)/this.zoom,r=2*t,s=this.aspect*r,c=-.5*s;const h=this.view;if(null!==this.view&&this.view.enabled){const S=h.fullWidth,A=h.fullHeight;c+=h.offsetX*s/S,t-=h.offsetY*r/A,s*=h.width/S,r*=h.height/A}const _=this.filmOffset;0!==_&&(c+=e*_/this.getFilmWidth()),this.projectionMatrix.makePerspective(c,c+s,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}Bc.prototype.isPerspectiveCamera=!0;class Sk extends ta{constructor(e,t,r){if(super(),this.type="CubeCamera",!0!==r.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=r;const s=new Bc(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new ot(1,0,0)),this.add(s);const c=new Bc(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new ot(-1,0,0)),this.add(c);const h=new Bc(90,1,e,t);h.layers=this.layers,h.up.set(0,0,1),h.lookAt(new ot(0,1,0)),this.add(h);const _=new Bc(90,1,e,t);_.layers=this.layers,_.up.set(0,0,-1),_.lookAt(new ot(0,-1,0)),this.add(_);const S=new Bc(90,1,e,t);S.layers=this.layers,S.up.set(0,-1,0),S.lookAt(new ot(0,0,1)),this.add(S);const A=new Bc(90,1,e,t);A.layers=this.layers,A.up.set(0,-1,0),A.lookAt(new ot(0,0,-1)),this.add(A)}update(e,t){null===this.parent&&this.updateMatrixWorld();const r=this.renderTarget,[s,c,h,_,S,A]=this.children,O=e.xr.enabled,G=e.getRenderTarget();e.xr.enabled=!1;const X=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,s),e.setRenderTarget(r,1),e.render(t,c),e.setRenderTarget(r,2),e.render(t,h),e.setRenderTarget(r,3),e.render(t,_),e.setRenderTarget(r,4),e.render(t,S),r.texture.generateMipmaps=X,e.setRenderTarget(r,5),e.render(t,A),e.setRenderTarget(G),e.xr.enabled=O,r.texture.needsPMREMUpdate=!0}}class K1 extends Ec{constructor(e,t,r,s,c,h,_,S,A,O){super(e=void 0!==e?e:[],t=void 0!==t?t:301,r,s,c,h,_,S,A,O),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}K1.prototype.isCubeTexture=!0;class Ek extends gd{constructor(e,t,r){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=r),super(e,e,t),this.texture=new K1(void 0,(t=t||{}).mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Rl}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=yu,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r_uniforms={tEquirect:{value:null}},r_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new ly(5,5,5),c=new w_({name:"CubemapFromEquirect",uniforms:A0(r_uniforms),vertexShader:r_vertexShader,fragmentShader:r_fragmentShader,side:1,blending:0});c.uniforms.tEquirect.value=t;const h=new Tc(s,c),_=t.minFilter;return 1008===t.minFilter&&(t.minFilter=Rl),new Sk(1,10,this).update(e,h),t.minFilter=_,h.geometry.dispose(),h.material.dispose(),this}clear(e,t,r,s){const c=e.getRenderTarget();for(let h=0;h<6;h++)e.setRenderTarget(this,h),e.clear(t,r,s);e.setRenderTarget(c)}}Ek.prototype.isWebGLCubeRenderTarget=!0;const Tk=new ot,XQ=new ot,JQ=new Oc;class Um{constructor(e=new ot(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,s){return this.normal.set(e,t,r),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const s=Tk.subVectors(r,t).cross(XQ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(Tk),s=this.normal.dot(r);if(0===s)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const c=-(e.start.dot(this.normal)+this.constant)/s;return c<0||c>1?null:t.copy(r).multiplyScalar(c).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||JQ.getNormalMatrix(e),s=this.coplanarPoint(Tk).applyMatrix4(e),c=this.normal.applyMatrix3(r).normalize();return this.constant=-s.dot(c),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Um.prototype.isPlane=!0;const k0=new oy,cT=new ot;class uT{constructor(e=new Um,t=new Um,r=new Um,s=new Um,c=new Um,h=new Um){this.planes=[e,t,r,s,c,h]}set(e,t,r,s,c,h){const _=this.planes;return _[0].copy(e),_[1].copy(t),_[2].copy(r),_[3].copy(s),_[4].copy(c),_[5].copy(h),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,s=r[0],c=r[1],h=r[2],_=r[3],S=r[4],A=r[5],O=r[6],G=r[7],X=r[8],te=r[9],ue=r[10],ve=r[11],Ie=r[12],ye=r[13],de=r[14],Ge=r[15];return t[0].setComponents(_-s,G-S,ve-X,Ge-Ie).normalize(),t[1].setComponents(_+s,G+S,ve+X,Ge+Ie).normalize(),t[2].setComponents(_+c,G+A,ve+te,Ge+ye).normalize(),t[3].setComponents(_-c,G-A,ve-te,Ge-ye).normalize(),t[4].setComponents(_-h,G-O,ve-ue,Ge-de).normalize(),t[5].setComponents(_+h,G+O,ve+ue,Ge+de).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),k0.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(k0)}intersectsSprite(e){return k0.center.set(0,0,0),k0.radius=.7071067811865476,k0.applyMatrix4(e.matrixWorld),this.intersectsSphere(k0)}intersectsSphere(e){const t=this.planes,r=e.center,s=-e.radius;for(let c=0;c<6;c++)if(t[c].distanceToPoint(r)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const s=t[r];if(cT.x=s.normal.x>0?e.max.x:e.min.x,cT.y=s.normal.y>0?e.max.y:e.min.y,cT.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(cT)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Vz(){let n=null,e=!1,t=null,r=null;function s(c,h){t(c,h),r=n.requestAnimationFrame(s)}return{start:function(){!0!==e&&null!==t&&(r=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(c){t=c},setContext:function(c){n=c}}}function KQ(n,e){const t=e.isWebGL2,r=new WeakMap;return{get:function h(A){return A.isInterleavedBufferAttribute&&(A=A.data),r.get(A)},remove:function _(A){A.isInterleavedBufferAttribute&&(A=A.data);const O=r.get(A);O&&(n.deleteBuffer(O.buffer),r.delete(A))},update:function S(A,O){if(A.isGLBufferAttribute){const X=r.get(A);return void((!X||X.version<A.version)&&r.set(A,{buffer:A.buffer,type:A.type,bytesPerElement:A.elementSize,version:A.version}))}A.isInterleavedBufferAttribute&&(A=A.data);const G=r.get(A);void 0===G?r.set(A,function s(A,O){const G=A.array,X=A.usage,te=n.createBuffer();n.bindBuffer(O,te),n.bufferData(O,G,X),A.onUploadCallback();let ue=5126;return G instanceof Float32Array?ue=5126:G instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):G instanceof Uint16Array?A.isFloat16BufferAttribute?t?ue=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):ue=5123:G instanceof Int16Array?ue=5122:G instanceof Uint32Array?ue=5125:G instanceof Int32Array?ue=5124:G instanceof Int8Array?ue=5120:(G instanceof Uint8Array||G instanceof Uint8ClampedArray)&&(ue=5121),{buffer:te,type:ue,bytesPerElement:G.BYTES_PER_ELEMENT,version:A.version}}(A,O)):G.version<A.version&&(function c(A,O,G){const X=O.array,te=O.updateRange;n.bindBuffer(G,A),-1===te.count?n.bufferSubData(G,0,X):(t?n.bufferSubData(G,te.offset*X.BYTES_PER_ELEMENT,X,te.offset,te.count):n.bufferSubData(G,te.offset*X.BYTES_PER_ELEMENT,X.subarray(te.offset,te.offset+te.count)),te.count=-1)}(G.buffer,A,O),G.version=A.version)}}}class Q1 extends as{constructor(e=1,t=1,r=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:s};const c=e/2,h=t/2,_=Math.floor(r),S=Math.floor(s),A=_+1,O=S+1,G=e/_,X=t/S,te=[],ue=[],ve=[],Ie=[];for(let ye=0;ye<O;ye++){const de=ye*X-h;for(let Ge=0;Ge<A;Ge++)ue.push(Ge*G-c,-de,0),ve.push(0,0,1),Ie.push(Ge/_),Ie.push(1-ye/S)}for(let ye=0;ye<S;ye++)for(let de=0;de<_;de++){const Oe=de+A*(ye+1),$e=de+1+A*(ye+1),ht=de+1+A*ye;te.push(de+A*ye,Oe,ht),te.push(Oe,$e,ht)}this.setIndex(te),this.setAttribute("position",new vr(ue,3)),this.setAttribute("normal",new vr(ve,3)),this.setAttribute("uv",new vr(Ie,2))}static fromJSON(e){return new Q1(e.width,e.height,e.widthSegments,e.heightSegments)}}const po={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\treturn texture2D( envMap, uv ).rgb;\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Ki={common:{diffuse:{value:new er(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Oc},uv2Transform:{value:new Oc},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ci(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new er(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new er(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Oc}},sprite:{diffuse:{value:new er(16777215)},opacity:{value:1},center:{value:new ci(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Oc}}},pp={basic:{uniforms:xu([Ki.common,Ki.specularmap,Ki.envmap,Ki.aomap,Ki.lightmap,Ki.fog]),vertexShader:po.meshbasic_vert,fragmentShader:po.meshbasic_frag},lambert:{uniforms:xu([Ki.common,Ki.specularmap,Ki.envmap,Ki.aomap,Ki.lightmap,Ki.emissivemap,Ki.fog,Ki.lights,{emissive:{value:new er(0)}}]),vertexShader:po.meshlambert_vert,fragmentShader:po.meshlambert_frag},phong:{uniforms:xu([Ki.common,Ki.specularmap,Ki.envmap,Ki.aomap,Ki.lightmap,Ki.emissivemap,Ki.bumpmap,Ki.normalmap,Ki.displacementmap,Ki.fog,Ki.lights,{emissive:{value:new er(0)},specular:{value:new er(1118481)},shininess:{value:30}}]),vertexShader:po.meshphong_vert,fragmentShader:po.meshphong_frag},standard:{uniforms:xu([Ki.common,Ki.envmap,Ki.aomap,Ki.lightmap,Ki.emissivemap,Ki.bumpmap,Ki.normalmap,Ki.displacementmap,Ki.roughnessmap,Ki.metalnessmap,Ki.fog,Ki.lights,{emissive:{value:new er(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:po.meshphysical_vert,fragmentShader:po.meshphysical_frag},toon:{uniforms:xu([Ki.common,Ki.aomap,Ki.lightmap,Ki.emissivemap,Ki.bumpmap,Ki.normalmap,Ki.displacementmap,Ki.gradientmap,Ki.fog,Ki.lights,{emissive:{value:new er(0)}}]),vertexShader:po.meshtoon_vert,fragmentShader:po.meshtoon_frag},matcap:{uniforms:xu([Ki.common,Ki.bumpmap,Ki.normalmap,Ki.displacementmap,Ki.fog,{matcap:{value:null}}]),vertexShader:po.meshmatcap_vert,fragmentShader:po.meshmatcap_frag},points:{uniforms:xu([Ki.points,Ki.fog]),vertexShader:po.points_vert,fragmentShader:po.points_frag},dashed:{uniforms:xu([Ki.common,Ki.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:po.linedashed_vert,fragmentShader:po.linedashed_frag},depth:{uniforms:xu([Ki.common,Ki.displacementmap]),vertexShader:po.depth_vert,fragmentShader:po.depth_frag},normal:{uniforms:xu([Ki.common,Ki.bumpmap,Ki.normalmap,Ki.displacementmap,{opacity:{value:1}}]),vertexShader:po.meshnormal_vert,fragmentShader:po.meshnormal_frag},sprite:{uniforms:xu([Ki.sprite,Ki.fog]),vertexShader:po.sprite_vert,fragmentShader:po.sprite_frag},background:{uniforms:{uvTransform:{value:new Oc},t2D:{value:null}},vertexShader:po.background_vert,fragmentShader:po.background_frag},cube:{uniforms:xu([Ki.envmap,{opacity:{value:1}}]),vertexShader:po.cube_vert,fragmentShader:po.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:po.equirect_vert,fragmentShader:po.equirect_frag},distanceRGBA:{uniforms:xu([Ki.common,Ki.displacementmap,{referencePosition:{value:new ot},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:po.distanceRGBA_vert,fragmentShader:po.distanceRGBA_frag},shadow:{uniforms:xu([Ki.lights,Ki.fog,{color:{value:new er(0)},opacity:{value:1}}]),vertexShader:po.shadow_vert,fragmentShader:po.shadow_frag}};function jee(n,e,t,r,s,c){const h=new er(0);let S,A,_=!0===s?0:1,O=null,G=0,X=null;function ue(ve,Ie){t.buffers.color.setClear(ve.r,ve.g,ve.b,Ie,c)}return{getClearColor:function(){return h},setClearColor:function(ve,Ie=1){h.set(ve),_=Ie,ue(h,_)},getClearAlpha:function(){return _},setClearAlpha:function(ve){_=ve,ue(h,_)},render:function te(ve,Ie){let ye=!1,de=!0===Ie.isScene?Ie.background:null;de&&de.isTexture&&(de=e.get(de));const Ge=n.xr,Oe=Ge.getSession&&Ge.getSession();Oe&&"additive"===Oe.environmentBlendMode&&(de=null),null===de?ue(h,_):de&&de.isColor&&(ue(de,1),ye=!0),(n.autoClear||ye)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),de&&(de.isCubeTexture||306===de.mapping)?(void 0===A&&(A=new Tc(new ly(1,1,1),new w_({name:"BackgroundCubeMaterial",uniforms:A0(pp.cube.uniforms),vertexShader:pp.cube.vertexShader,fragmentShader:pp.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),A.geometry.deleteAttribute("normal"),A.geometry.deleteAttribute("uv"),A.onBeforeRender=function($e,ht,vt){this.matrixWorld.copyPosition(vt.matrixWorld)},Object.defineProperty(A.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(A)),A.material.uniforms.envMap.value=de,A.material.uniforms.flipEnvMap.value=de.isCubeTexture&&!1===de.isRenderTargetTexture?-1:1,(O!==de||G!==de.version||X!==n.toneMapping)&&(A.material.needsUpdate=!0,O=de,G=de.version,X=n.toneMapping),ve.unshift(A,A.geometry,A.material,0,0,null)):de&&de.isTexture&&(void 0===S&&(S=new Tc(new Q1(2,2),new w_({name:"BackgroundMaterial",uniforms:A0(pp.background.uniforms),vertexShader:pp.background.vertexShader,fragmentShader:pp.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),S.geometry.deleteAttribute("normal"),Object.defineProperty(S.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(S)),S.material.uniforms.t2D.value=de,!0===de.matrixAutoUpdate&&de.updateMatrix(),S.material.uniforms.uvTransform.value.copy(de.matrix),(O!==de||G!==de.version||X!==n.toneMapping)&&(S.material.needsUpdate=!0,O=de,G=de.version,X=n.toneMapping),ve.unshift(S,S.geometry,S.material,0,0,null))}}}function Zee(n,e,t,r){const s=n.getParameter(34921),c=r.isWebGL2?null:e.get("OES_vertex_array_object"),h=r.isWebGL2||null!==c,_={},S=ve(null);let A=S;function X(Zt){return r.isWebGL2?n.bindVertexArray(Zt):c.bindVertexArrayOES(Zt)}function te(Zt){return r.isWebGL2?n.deleteVertexArray(Zt):c.deleteVertexArrayOES(Zt)}function ve(Zt){const $t=[],tn=[],_t=[];for(let Ut=0;Ut<s;Ut++)$t[Ut]=0,tn[Ut]=0,_t[Ut]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$t,enabledAttributes:tn,attributeDivisors:_t,object:Zt,attributes:{},index:null}}function de(){const Zt=A.newAttributes;for(let $t=0,tn=Zt.length;$t<tn;$t++)Zt[$t]=0}function Ge(Zt){Oe(Zt,0)}function Oe(Zt,$t){const _t=A.enabledAttributes,Ut=A.attributeDivisors;A.newAttributes[Zt]=1,0===_t[Zt]&&(n.enableVertexAttribArray(Zt),_t[Zt]=1),Ut[Zt]!==$t&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Zt,$t),Ut[Zt]=$t)}function $e(){const Zt=A.newAttributes,$t=A.enabledAttributes;for(let tn=0,_t=$t.length;tn<_t;tn++)$t[tn]!==Zt[tn]&&(n.disableVertexAttribArray(tn),$t[tn]=0)}function ht(Zt,$t,tn,_t,Ut,ln){!0!==r.isWebGL2||5124!==tn&&5125!==tn?n.vertexAttribPointer(Zt,$t,tn,_t,Ut,ln):n.vertexAttribIPointer(Zt,$t,tn,Ut,ln)}function Xe(){At(),A!==S&&(A=S,X(A.object))}function At(){S.geometry=null,S.program=null,S.wireframe=!1}return{setup:function O(Zt,$t,tn,_t,Ut){let ln=!1;if(h){const Gn=function ue(Zt,$t,tn){const _t=!0===tn.wireframe;let Ut=_[Zt.id];void 0===Ut&&(Ut={},_[Zt.id]=Ut);let ln=Ut[$t.id];void 0===ln&&(ln={},Ut[$t.id]=ln);let Gn=ln[_t];return void 0===Gn&&(Gn=ve(function G(){return r.isWebGL2?n.createVertexArray():c.createVertexArrayOES()}()),ln[_t]=Gn),Gn}(_t,tn,$t);A!==Gn&&(A=Gn,X(A.object)),ln=function Ie(Zt,$t){const tn=A.attributes,_t=Zt.attributes;let Ut=0;for(const ln in _t){const Gn=tn[ln],vn=_t[ln];if(void 0===Gn||Gn.attribute!==vn||Gn.data!==vn.data)return!0;Ut++}return A.attributesNum!==Ut||A.index!==$t}(_t,Ut),ln&&function ye(Zt,$t){const tn={},_t=Zt.attributes;let Ut=0;for(const ln in _t){const Gn=_t[ln],vn={};vn.attribute=Gn,Gn.data&&(vn.data=Gn.data),tn[ln]=vn,Ut++}A.attributes=tn,A.attributesNum=Ut,A.index=$t}(_t,Ut)}else{const Gn=!0===$t.wireframe;(A.geometry!==_t.id||A.program!==tn.id||A.wireframe!==Gn)&&(A.geometry=_t.id,A.program=tn.id,A.wireframe=Gn,ln=!0)}!0===Zt.isInstancedMesh&&(ln=!0),null!==Ut&&t.update(Ut,34963),ln&&(function vt(Zt,$t,tn,_t){if(!1===r.isWebGL2&&(Zt.isInstancedMesh||_t.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;de();const Ut=_t.attributes,ln=tn.getAttributes(),Gn=$t.defaultAttributeValues;for(const vn in ln){const Un=ln[vn];if(Un.location>=0){let Ti=Ut[vn];if(void 0===Ti&&("instanceMatrix"===vn&&Zt.instanceMatrix&&(Ti=Zt.instanceMatrix),"instanceColor"===vn&&Zt.instanceColor&&(Ti=Zt.instanceColor)),void 0!==Ti){const fr=Ti.normalized,qi=Ti.itemSize,Vn=t.get(Ti);if(void 0===Vn)continue;const zo=Vn.buffer,ir=Vn.type,Jr=Vn.bytesPerElement;if(Ti.isInterleavedBufferAttribute){const tr=Ti.data,Ss=tr.stride,ds=Ti.offset;if(tr&&tr.isInstancedInterleavedBuffer){for(let ii=0;ii<Un.locationSize;ii++)Oe(Un.location+ii,tr.meshPerAttribute);!0!==Zt.isInstancedMesh&&void 0===_t._maxInstanceCount&&(_t._maxInstanceCount=tr.meshPerAttribute*tr.count)}else for(let ii=0;ii<Un.locationSize;ii++)Ge(Un.location+ii);n.bindBuffer(34962,zo);for(let ii=0;ii<Un.locationSize;ii++)ht(Un.location+ii,qi/Un.locationSize,ir,fr,Ss*Jr,(ds+qi/Un.locationSize*ii)*Jr)}else{if(Ti.isInstancedBufferAttribute){for(let tr=0;tr<Un.locationSize;tr++)Oe(Un.location+tr,Ti.meshPerAttribute);!0!==Zt.isInstancedMesh&&void 0===_t._maxInstanceCount&&(_t._maxInstanceCount=Ti.meshPerAttribute*Ti.count)}else for(let tr=0;tr<Un.locationSize;tr++)Ge(Un.location+tr);n.bindBuffer(34962,zo);for(let tr=0;tr<Un.locationSize;tr++)ht(Un.location+tr,qi/Un.locationSize,ir,fr,qi*Jr,qi/Un.locationSize*tr*Jr)}}else if(void 0!==Gn){const fr=Gn[vn];if(void 0!==fr)switch(fr.length){case 2:n.vertexAttrib2fv(Un.location,fr);break;case 3:n.vertexAttrib3fv(Un.location,fr);break;case 4:n.vertexAttrib4fv(Un.location,fr);break;default:n.vertexAttrib1fv(Un.location,fr)}}}}$e()}(Zt,$t,tn,_t),null!==Ut&&n.bindBuffer(34963,t.get(Ut).buffer))},reset:Xe,resetDefaultState:At,dispose:function Nt(){Xe();for(const Zt in _){const $t=_[Zt];for(const tn in $t){const _t=$t[tn];for(const Ut in _t)te(_t[Ut].object),delete _t[Ut];delete $t[tn]}delete _[Zt]}},releaseStatesOfGeometry:function Cn(Zt){if(void 0===_[Zt.id])return;const $t=_[Zt.id];for(const tn in $t){const _t=$t[tn];for(const Ut in _t)te(_t[Ut].object),delete _t[Ut];delete $t[tn]}delete _[Zt.id]},releaseStatesOfProgram:function hn(Zt){for(const $t in _){const tn=_[$t];if(void 0===tn[Zt.id])continue;const _t=tn[Zt.id];for(const Ut in _t)te(_t[Ut].object),delete _t[Ut];delete tn[Zt.id]}},initAttributes:de,enableAttribute:Ge,disableUnusedAttributes:$e}}function Yee(n,e,t,r){const s=r.isWebGL2;let c;this.setMode=function h(A){c=A},this.render=function _(A,O){n.drawArrays(c,A,O),t.update(O,c,1)},this.renderInstances=function S(A,O,G){if(0===G)return;let X,te;if(s)X=n,te="drawArraysInstanced";else if(X=e.get("ANGLE_instanced_arrays"),te="drawArraysInstancedANGLE",null===X)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");X[te](c,A,O,G),t.update(O,c,G)}}function Xee(n,e,t){let r;function c(vt){if("highp"===vt){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";vt="mediump"}return"mediump"===vt&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const h="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&n instanceof WebGL2ComputeRenderingContext;let _=void 0!==t.precision?t.precision:"highp";const S=c(_);S!==_&&(console.warn("THREE.WebGLRenderer:",_,"not supported, using",S,"instead."),_=S);const A=h||e.has("WEBGL_draw_buffers"),O=!0===t.logarithmicDepthBuffer,G=n.getParameter(34930),X=n.getParameter(35660),te=n.getParameter(3379),ue=n.getParameter(34076),ve=n.getParameter(34921),Ie=n.getParameter(36347),ye=n.getParameter(36348),de=n.getParameter(36349),Ge=X>0,Oe=h||e.has("OES_texture_float");return{isWebGL2:h,drawBuffers:A,getMaxAnisotropy:function s(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const vt=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(vt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:c,precision:_,logarithmicDepthBuffer:O,maxTextures:G,maxVertexTextures:X,maxTextureSize:te,maxCubemapSize:ue,maxAttributes:ve,maxVertexUniforms:Ie,maxVaryings:ye,maxFragmentUniforms:de,vertexTextures:Ge,floatFragmentTextures:Oe,floatVertexTextures:Ge&&Oe,maxSamples:h?n.getParameter(36183):0}}function Jee(n){const e=this;let t=null,r=0,s=!1,c=!1;const h=new Um,_=new Oc,S={value:null,needsUpdate:!1};function A(){S.value!==t&&(S.value=t,S.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function O(G,X,te,ue){const ve=null!==G?G.length:0;let Ie=null;if(0!==ve){if(Ie=S.value,!0!==ue||null===Ie){const ye=te+4*ve,de=X.matrixWorldInverse;_.getNormalMatrix(de),(null===Ie||Ie.length<ye)&&(Ie=new Float32Array(ye));for(let Ge=0,Oe=te;Ge!==ve;++Ge,Oe+=4)h.copy(G[Ge]).applyMatrix4(de,_),h.normal.toArray(Ie,Oe),Ie[Oe+3]=h.constant}S.value=Ie,S.needsUpdate=!0}return e.numPlanes=ve,e.numIntersection=0,Ie}this.uniform=S,this.numPlanes=0,this.numIntersection=0,this.init=function(G,X,te){const ue=0!==G.length||X||0!==r||s;return s=X,t=O(G,te,0),r=G.length,ue},this.beginShadows=function(){c=!0,O(null)},this.endShadows=function(){c=!1,A()},this.setState=function(G,X,te){const ue=G.clippingPlanes,ve=G.clipIntersection,Ie=G.clipShadows,ye=n.get(G);if(!s||null===ue||0===ue.length||c&&!Ie)c?O(null):A();else{const de=c?0:r,Ge=4*de;let Oe=ye.clippingState||null;S.value=Oe,Oe=O(ue,X,Ge,te);for(let $e=0;$e!==Ge;++$e)Oe[$e]=t[$e];ye.clippingState=Oe,this.numIntersection=ve?this.numPlanes:0,this.numPlanes+=de}}}function Kee(n){let e=new WeakMap;function t(h,_){return 303===_?h.mapping=301:304===_&&(h.mapping=302),h}function s(h){const _=h.target;_.removeEventListener("dispose",s);const S=e.get(_);void 0!==S&&(e.delete(_),S.dispose())}return{get:function r(h){if(h&&h.isTexture&&!1===h.isRenderTargetTexture){const _=h.mapping;if(303===_||304===_){if(e.has(h))return t(e.get(h).texture,h.mapping);{const S=h.image;if(S&&S.height>0){const A=new Ek(S.height/2);return A.fromEquirectangularTexture(n,h),e.set(h,A),h.addEventListener("dispose",s),t(A.texture,h.mapping)}return null}}}return h},dispose:function c(){e=new WeakMap}}}pp.physical={uniforms:xu([pp.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ci(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new er(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ci},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new er(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new er(1,1,1)},specularColorMap:{value:null}}]),vertexShader:po.meshphysical_vert,fragmentShader:po.meshphysical_frag};class hT extends lT{constructor(e=-1,t=1,r=1,s=-1,c=.1,h=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=s,this.near=c,this.far=h,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,r,s,c,h){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=s,this.view.width=c,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let c=r-e,h=r+e,_=s+t,S=s-t;if(null!==this.view&&this.view.enabled){const A=(this.right-this.left)/this.view.fullWidth/this.zoom,O=(this.top-this.bottom)/this.view.fullHeight/this.zoom;c+=A*this.view.offsetX,h=c+A*this.view.width,_-=O*this.view.offsetY,S=_-O*this.view.height}this.projectionMatrix.makeOrthographic(c,h,_,S,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}hT.prototype.isOrthographicCamera=!0;class $1 extends w_{constructor(e){super(e),this.type="RawShaderMaterial"}}$1.prototype.isRawShaderMaterial=!0;const mp=Math.pow(2,8),Uz=[.125,.215,.35,.446,.526,.582],Gz=5+Uz.length,Dk=new hT,{_lodPlanes:eM,_sizeLods:Wz,_sigmas:dT}=Qee(),qz=new er;let Ak=null;const cy=(1+Math.sqrt(5))/2,F0=1/cy,jz=[new ot(1,1,1),new ot(-1,1,1),new ot(1,1,-1),new ot(-1,1,-1),new ot(0,cy,F0),new ot(0,cy,-F0),new ot(F0,0,cy),new ot(-F0,0,cy),new ot(cy,F0,0),new ot(-cy,F0,0)];class Zz{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function $ee(n){const e=new Float32Array(n),t=new ot(0,1,0);return new $1({name:"SphericalGaussianBlur",defines:{n},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,s=100){Ak=this._renderer.getRenderTarget();const c=this._allocateTargets();return this._sceneToCubeUV(e,r,s,c),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=Jz(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Xz(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<eM.length;e++)eM[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Ak),e.scissorTest=!1,fT(e,0,0,e.width,e.height)}_fromTexture(e,t){Ak=this._renderer.getRenderTarget();const r=t||this._allocateTargets(e);return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(e){const t={magFilter:Rl,minFilter:Rl,generateMipmaps:!1,type:u0,format:yu,encoding:p_,depthBuffer:!1},r=Yz(t);return r.depthBuffer=!e,null===this._pingPongRenderTarget&&(this._pingPongRenderTarget=Yz(t)),r}_compileMaterial(e){const t=new Tc(eM[0],e);this._renderer.compile(t,Dk)}_sceneToCubeUV(e,t,r,s){const _=new Bc(90,1,t,r),S=[1,-1,1,1,1,1],A=[1,1,1,-1,-1,-1],O=this._renderer,G=O.autoClear,X=O.toneMapping;O.getClearColor(qz),O.toneMapping=0,O.autoClear=!1;const te=new Vm({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),ue=new Tc(new ly,te);let ve=!1;const Ie=e.background;Ie?Ie.isColor&&(te.color.copy(Ie),e.background=null,ve=!0):(te.color.copy(qz),ve=!0);for(let ye=0;ye<6;ye++){const de=ye%3;0===de?(_.up.set(0,S[ye],0),_.lookAt(A[ye],0,0)):1===de?(_.up.set(0,0,S[ye]),_.lookAt(0,A[ye],0)):(_.up.set(0,S[ye],0),_.lookAt(0,0,A[ye])),fT(s,de*mp,ye>2?mp:0,mp,mp),O.setRenderTarget(s),ve&&O.render(ue,_),O.render(e,_)}ue.geometry.dispose(),ue.material.dispose(),O.toneMapping=X,O.autoClear=G,e.background=Ie}_textureToCubeUV(e,t){const r=this._renderer,s=301===e.mapping||302===e.mapping;s?(null===this._cubemapShader&&(this._cubemapShader=Jz()),this._cubemapShader.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectShader&&(this._equirectShader=Xz());const c=s?this._cubemapShader:this._equirectShader,h=new Tc(eM[0],c),_=c.uniforms;_.envMap.value=e,s||_.texelSize.value.set(1/e.image.width,1/e.image.height),fT(t,0,0,3*mp,2*mp),r.setRenderTarget(t),r.render(h,Dk)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let s=1;s<Gz;s++){const c=Math.sqrt(dT[s]*dT[s]-dT[s-1]*dT[s-1]);this._blur(e,s-1,s,c,jz[(s-1)%jz.length])}t.autoClear=r}_blur(e,t,r,s,c){const h=this._pingPongRenderTarget;this._halfBlur(e,h,t,r,s,"latitudinal",c),this._halfBlur(h,e,r,r,s,"longitudinal",c)}_halfBlur(e,t,r,s,c,h,_){const S=this._renderer,A=this._blurMaterial;"latitudinal"!==h&&"longitudinal"!==h&&console.error("blur direction must be either latitudinal or longitudinal!");const G=new Tc(eM[s],A),X=A.uniforms,te=Wz[r]-1,ue=isFinite(c)?Math.PI/(2*te):2*Math.PI/39,ve=c/ue,Ie=isFinite(c)?1+Math.floor(3*ve):20;Ie>20&&console.warn(`sigmaRadians, ${c}, is too large and will clip, as it requested ${Ie} samples when the maximum is set to 20`);const ye=[];let de=0;for(let ht=0;ht<20;++ht){const vt=ht/ve,Nt=Math.exp(-vt*vt/2);ye.push(Nt),0===ht?de+=Nt:ht<Ie&&(de+=2*Nt)}for(let ht=0;ht<ye.length;ht++)ye[ht]=ye[ht]/de;X.envMap.value=e.texture,X.samples.value=Ie,X.weights.value=ye,X.latitudinal.value="latitudinal"===h,_&&(X.poleAxis.value=_),X.dTheta.value=ue,X.mipInt.value=8-r;const Ge=Wz[s];fT(t,3*Math.max(0,mp-2*Ge),(0===s?0:2*mp)+2*Ge*(s>4?s-8+4:0),3*Ge,2*Ge),S.setRenderTarget(t),S.render(G,Dk)}}function Qee(){const n=[],e=[],t=[];let r=8;for(let s=0;s<Gz;s++){const c=Math.pow(2,r);e.push(c);let h=1/c;s>4?h=Uz[s-8+4-1]:0===s&&(h=0),t.push(h);const _=1/(c-1),S=-_/2,A=1+_/2,O=[S,S,A,S,A,A,S,S,A,A,S,A],G=6,X=6,te=3,ue=2,ve=1,Ie=new Float32Array(te*X*G),ye=new Float32Array(ue*X*G),de=new Float32Array(ve*X*G);for(let Oe=0;Oe<G;Oe++){const $e=Oe%3*2/3-1,ht=Oe>2?0:-1;Ie.set([$e,ht,0,$e+2/3,ht,0,$e+2/3,ht+1,0,$e,ht,0,$e+2/3,ht+1,0,$e,ht+1,0],te*X*Oe),ye.set(O,ue*X*Oe),de.set([Oe,Oe,Oe,Oe,Oe,Oe],ve*X*Oe)}const Ge=new as;Ge.setAttribute("position",new Ra(Ie,te)),Ge.setAttribute("uv",new Ra(ye,ue)),Ge.setAttribute("faceIndex",new Ra(de,ve)),n.push(Ge),r>4&&r--}return{_lodPlanes:n,_sizeLods:e,_sigmas:t}}function Yz(n){const e=new gd(3*mp,3*mp,n);return e.texture.mapping=306,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function fT(n,e,t,r,s){n.viewport.set(e,t,r,s),n.scissor.set(e,t,r,s)}function Xz(){const n=new ci(1,1);return new $1({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:n}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = texture2D ( envMap, uv ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Jz(){return new $1({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function ete(n){let e=new WeakMap,t=null;function c(_){const S=_.target;S.removeEventListener("dispose",c);const A=e.get(S);void 0!==A&&(e.delete(S),A.dispose())}return{get:function r(_){if(_&&_.isTexture){const S=_.mapping,A=303===S||304===S,O=301===S||302===S;if(A||O){if(_.isRenderTargetTexture&&!0===_.needsPMREMUpdate){_.needsPMREMUpdate=!1;let G=e.get(_);return null===t&&(t=new Zz(n)),G=A?t.fromEquirectangular(_,G):t.fromCubemap(_,G),e.set(_,G),G.texture}if(e.has(_))return e.get(_).texture;{const G=_.image;if(A&&G&&G.height>0||O&&G&&function s(_){let S=0;for(let O=0;O<6;O++)void 0!==_[O]&&S++;return 6===S}(G)){null===t&&(t=new Zz(n));const X=A?t.fromEquirectangular(_):t.fromCubemap(_);return e.set(_,X),_.addEventListener("dispose",c),X.texture}return null}}}return _},dispose:function h(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function tte(n){const e={};function t(r){if(void 0!==e[r])return e[r];let s;switch(r){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(r)}return e[r]=s,s}return{has:function(r){return null!==t(r)},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const s=t(r);return null===s&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),s}}}function nte(n,e,t,r){const s={},c=new WeakMap;function h(G){const X=G.target;null!==X.index&&e.remove(X.index);for(const ue in X.attributes)e.remove(X.attributes[ue]);X.removeEventListener("dispose",h),delete s[X.id];const te=c.get(X);te&&(e.remove(te),c.delete(X)),r.releaseStatesOfGeometry(X),!0===X.isInstancedBufferGeometry&&delete X._maxInstanceCount,t.memory.geometries--}function A(G){const X=[],te=G.index,ue=G.attributes.position;let ve=0;if(null!==te){const de=te.array;ve=te.version;for(let Ge=0,Oe=de.length;Ge<Oe;Ge+=3){const $e=de[Ge+0],ht=de[Ge+1],vt=de[Ge+2];X.push($e,ht,ht,vt,vt,$e)}}else{ve=ue.version;for(let Ge=0,Oe=ue.array.length/3-1;Ge<Oe;Ge+=3){const $e=Ge+0,ht=Ge+1,vt=Ge+2;X.push($e,ht,ht,vt,vt,$e)}}const Ie=new(Dz(X)?vk:_k)(X,1);Ie.version=ve;const ye=c.get(G);ye&&e.remove(ye),c.set(G,Ie)}return{get:function _(G,X){return!0===s[X.id]||(X.addEventListener("dispose",h),s[X.id]=!0,t.memory.geometries++),X},update:function S(G){const X=G.attributes;for(const ue in X)e.update(X[ue],34962);const te=G.morphAttributes;for(const ue in te){const ve=te[ue];for(let Ie=0,ye=ve.length;Ie<ye;Ie++)e.update(ve[Ie],34962)}},getWireframeAttribute:function O(G){const X=c.get(G);if(X){const te=G.index;null!==te&&X.version<te.version&&A(G)}else A(G);return c.get(G)}}}function ite(n,e,t,r){const s=r.isWebGL2;let c,_,S;this.setMode=function h(X){c=X},this.setIndex=function A(X){_=X.type,S=X.bytesPerElement},this.render=function O(X,te){n.drawElements(c,te,_,X*S),t.update(te,c,1)},this.renderInstances=function G(X,te,ue){if(0===ue)return;let ve,Ie;if(s)ve=n,Ie="drawElementsInstanced";else if(ve=e.get("ANGLE_instanced_arrays"),Ie="drawElementsInstancedANGLE",null===ve)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");ve[Ie](c,te,_,X*S,ue),t.update(te,c,ue)}}function rte(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function s(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function r(c,h,_){switch(t.calls++,h){case 4:t.triangles+=_*(c/3);break;case 1:t.lines+=_*(c/2);break;case 3:t.lines+=_*(c-1);break;case 2:t.lines+=_*c;break;case 0:t.points+=_*c;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",h)}}}}class Rk extends Ec{constructor(e=null,t=1,r=1,s=1){super(null),this.image={data:e,width:t,height:r,depth:s},this.magFilter=dc,this.minFilter=dc,this.wrapR=vu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}function ste(n,e){return n[0]-e[0]}function ote(n,e){return Math.abs(e[1])-Math.abs(n[1])}function Kz(n,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),n.divideScalar(t)}function ate(n,e,t){const r={},s=new Float32Array(8),c=new WeakMap,h=new ot,_=[];for(let A=0;A<8;A++)_[A]=[A,0];return{update:function S(A,O,G,X){const te=A.morphTargetInfluences;if(!0===e.isWebGL2){const ue=O.morphAttributes.position.length;let ve=c.get(O);if(void 0===ve||ve.count!==ue){let At=function(){hn.dispose(),c.delete(O),O.removeEventListener("dispose",At)};void 0!==ve&&ve.texture.dispose();const de=void 0!==O.morphAttributes.normal,Ge=O.morphAttributes.position,Oe=O.morphAttributes.normal||[],ht=!0===de?2:1;let vt=O.attributes.position.count*ht,Nt=1;vt>e.maxTextureSize&&(Nt=Math.ceil(vt/e.maxTextureSize),vt=e.maxTextureSize);const Cn=new Float32Array(vt*Nt*4*ue),hn=new Rk(Cn,vt,Nt,ue);hn.format=yu,hn.type=f_,hn.needsUpdate=!0;const Xe=4*ht;for(let Zt=0;Zt<ue;Zt++){const $t=Ge[Zt],tn=Oe[Zt],_t=vt*Nt*4*Zt;for(let Ut=0;Ut<$t.count;Ut++){h.fromBufferAttribute($t,Ut),!0===$t.normalized&&Kz(h,$t);const ln=Ut*Xe;Cn[_t+ln+0]=h.x,Cn[_t+ln+1]=h.y,Cn[_t+ln+2]=h.z,Cn[_t+ln+3]=0,!0===de&&(h.fromBufferAttribute(tn,Ut),!0===tn.normalized&&Kz(h,tn),Cn[_t+ln+4]=h.x,Cn[_t+ln+5]=h.y,Cn[_t+ln+6]=h.z,Cn[_t+ln+7]=0)}}ve={count:ue,texture:hn,size:new ci(vt,Nt)},c.set(O,ve),O.addEventListener("dispose",At)}let Ie=0;for(let de=0;de<te.length;de++)Ie+=te[de];const ye=O.morphTargetsRelative?1:1-Ie;X.getUniforms().setValue(n,"morphTargetBaseInfluence",ye),X.getUniforms().setValue(n,"morphTargetInfluences",te),X.getUniforms().setValue(n,"morphTargetsTexture",ve.texture,t),X.getUniforms().setValue(n,"morphTargetsTextureSize",ve.size)}else{const ue=void 0===te?0:te.length;let ve=r[O.id];if(void 0===ve||ve.length!==ue){ve=[];for(let Oe=0;Oe<ue;Oe++)ve[Oe]=[Oe,0];r[O.id]=ve}for(let Oe=0;Oe<ue;Oe++){const $e=ve[Oe];$e[0]=Oe,$e[1]=te[Oe]}ve.sort(ote);for(let Oe=0;Oe<8;Oe++)Oe<ue&&ve[Oe][1]?(_[Oe][0]=ve[Oe][0],_[Oe][1]=ve[Oe][1]):(_[Oe][0]=Number.MAX_SAFE_INTEGER,_[Oe][1]=0);_.sort(ste);const Ie=O.morphAttributes.position,ye=O.morphAttributes.normal;let de=0;for(let Oe=0;Oe<8;Oe++){const $e=_[Oe],ht=$e[0],vt=$e[1];ht!==Number.MAX_SAFE_INTEGER&&vt?(Ie&&O.getAttribute("morphTarget"+Oe)!==Ie[ht]&&O.setAttribute("morphTarget"+Oe,Ie[ht]),ye&&O.getAttribute("morphNormal"+Oe)!==ye[ht]&&O.setAttribute("morphNormal"+Oe,ye[ht]),s[Oe]=vt,de+=vt):(Ie&&!0===O.hasAttribute("morphTarget"+Oe)&&O.deleteAttribute("morphTarget"+Oe),ye&&!0===O.hasAttribute("morphNormal"+Oe)&&O.deleteAttribute("morphNormal"+Oe),s[Oe]=0)}const Ge=O.morphTargetsRelative?1:1-de;X.getUniforms().setValue(n,"morphTargetBaseInfluence",Ge),X.getUniforms().setValue(n,"morphTargetInfluences",s)}}}}function lte(n,e,t,r){let s=new WeakMap;function _(S){const A=S.target;A.removeEventListener("dispose",_),t.remove(A.instanceMatrix),null!==A.instanceColor&&t.remove(A.instanceColor)}return{update:function c(S){const A=r.render.frame,G=e.get(S,S.geometry);return s.get(G)!==A&&(e.update(G),s.set(G,A)),S.isInstancedMesh&&(!1===S.hasEventListener("dispose",_)&&S.addEventListener("dispose",_),t.update(S.instanceMatrix,34962),null!==S.instanceColor&&t.update(S.instanceColor,34962)),G},dispose:function h(){s=new WeakMap}}}Rk.prototype.isDataTexture2DArray=!0;class Qz extends Ec{constructor(e=null,t=1,r=1,s=1){super(null),this.image={data:e,width:t,height:r,depth:s},this.magFilter=dc,this.minFilter=dc,this.wrapR=vu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Qz.prototype.isDataTexture3D=!0;const $z=new Ec,eV=new Rk,tV=new Qz,nV=new K1,iV=[],rV=[],sV=new Float32Array(16),oV=new Float32Array(9),aV=new Float32Array(4);function O0(n,e,t){const r=n[0];if(r<=0||r>0)return n;const s=e*t;let c=iV[s];if(void 0===c&&(c=new Float32Array(s),iV[s]=c),0!==e){r.toArray(c,0);for(let h=1,_=0;h!==e;++h)_+=t,n[h].toArray(c,_)}return c}function Wu(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function wu(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function pT(n,e){let t=rV[e];void 0===t&&(t=new Int32Array(e),rV[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function cte(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function ute(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Wu(t,e))return;n.uniform2fv(this.addr,e),wu(t,e)}}function hte(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Wu(t,e))return;n.uniform3fv(this.addr,e),wu(t,e)}}function dte(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Wu(t,e))return;n.uniform4fv(this.addr,e),wu(t,e)}}function fte(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(Wu(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),wu(t,e)}else{if(Wu(t,r))return;aV.set(r),n.uniformMatrix2fv(this.addr,!1,aV),wu(t,r)}}function pte(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(Wu(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),wu(t,e)}else{if(Wu(t,r))return;oV.set(r),n.uniformMatrix3fv(this.addr,!1,oV),wu(t,r)}}function mte(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(Wu(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),wu(t,e)}else{if(Wu(t,r))return;sV.set(r),n.uniformMatrix4fv(this.addr,!1,sV),wu(t,r)}}function gte(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function _te(n,e){const t=this.cache;Wu(t,e)||(n.uniform2iv(this.addr,e),wu(t,e))}function vte(n,e){const t=this.cache;Wu(t,e)||(n.uniform3iv(this.addr,e),wu(t,e))}function yte(n,e){const t=this.cache;Wu(t,e)||(n.uniform4iv(this.addr,e),wu(t,e))}function bte(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function xte(n,e){const t=this.cache;Wu(t,e)||(n.uniform2uiv(this.addr,e),wu(t,e))}function wte(n,e){const t=this.cache;Wu(t,e)||(n.uniform3uiv(this.addr,e),wu(t,e))}function Mte(n,e){const t=this.cache;Wu(t,e)||(n.uniform4uiv(this.addr,e),wu(t,e))}function Cte(n,e,t){const r=this.cache,s=t.allocateTextureUnit();r[0]!==s&&(n.uniform1i(this.addr,s),r[0]=s),t.safeSetTexture2D(e||$z,s)}function Ste(n,e,t){const r=this.cache,s=t.allocateTextureUnit();r[0]!==s&&(n.uniform1i(this.addr,s),r[0]=s),t.setTexture3D(e||tV,s)}function Ete(n,e,t){const r=this.cache,s=t.allocateTextureUnit();r[0]!==s&&(n.uniform1i(this.addr,s),r[0]=s),t.safeSetTextureCube(e||nV,s)}function Tte(n,e,t){const r=this.cache,s=t.allocateTextureUnit();r[0]!==s&&(n.uniform1i(this.addr,s),r[0]=s),t.setTexture2DArray(e||eV,s)}function Ate(n,e){n.uniform1fv(this.addr,e)}function Ite(n,e){const t=O0(e,this.size,2);n.uniform2fv(this.addr,t)}function Rte(n,e){const t=O0(e,this.size,3);n.uniform3fv(this.addr,t)}function kte(n,e){const t=O0(e,this.size,4);n.uniform4fv(this.addr,t)}function Pte(n,e){const t=O0(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Lte(n,e){const t=O0(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Fte(n,e){const t=O0(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Ote(n,e){n.uniform1iv(this.addr,e)}function Nte(n,e){n.uniform2iv(this.addr,e)}function Bte(n,e){n.uniform3iv(this.addr,e)}function Hte(n,e){n.uniform4iv(this.addr,e)}function zte(n,e){n.uniform1uiv(this.addr,e)}function Vte(n,e){n.uniform2uiv(this.addr,e)}function Ute(n,e){n.uniform3uiv(this.addr,e)}function Gte(n,e){n.uniform4uiv(this.addr,e)}function Wte(n,e,t){const r=e.length,s=pT(t,r);n.uniform1iv(this.addr,s);for(let c=0;c!==r;++c)t.safeSetTexture2D(e[c]||$z,s[c])}function qte(n,e,t){const r=e.length,s=pT(t,r);n.uniform1iv(this.addr,s);for(let c=0;c!==r;++c)t.setTexture3D(e[c]||tV,s[c])}function jte(n,e,t){const r=e.length,s=pT(t,r);n.uniform1iv(this.addr,s);for(let c=0;c!==r;++c)t.safeSetTextureCube(e[c]||nV,s[c])}function Zte(n,e,t){const r=e.length,s=pT(t,r);n.uniform1iv(this.addr,s);for(let c=0;c!==r;++c)t.setTexture2DArray(e[c]||eV,s[c])}function Xte(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=function Dte(n){switch(n){case 5126:return cte;case 35664:return ute;case 35665:return hte;case 35666:return dte;case 35674:return fte;case 35675:return pte;case 35676:return mte;case 5124:case 35670:return gte;case 35667:case 35671:return _te;case 35668:case 35672:return vte;case 35669:case 35673:return yte;case 5125:return bte;case 36294:return xte;case 36295:return wte;case 36296:return Mte;case 35678:case 36198:case 36298:case 36306:case 35682:return Cte;case 35679:case 36299:case 36307:return Ste;case 35680:case 36300:case 36308:case 36293:return Ete;case 36289:case 36303:case 36311:case 36292:return Tte}}(e.type)}function lV(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=function Yte(n){switch(n){case 5126:return Ate;case 35664:return Ite;case 35665:return Rte;case 35666:return kte;case 35674:return Pte;case 35675:return Lte;case 35676:return Fte;case 5124:case 35670:return Ote;case 35667:case 35671:return Nte;case 35668:case 35672:return Bte;case 35669:case 35673:return Hte;case 5125:return zte;case 36294:return Vte;case 36295:return Ute;case 36296:return Gte;case 35678:case 36198:case 36298:case 36306:case 35682:return Wte;case 35679:case 36299:case 36307:return qte;case 35680:case 36300:case 36308:case 36293:return jte;case 36289:case 36303:case 36311:case 36292:return Zte}}(e.type)}function cV(n){this.id=n,this.seq=[],this.map={}}lV.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),wu(e,n)},cV.prototype.setValue=function(n,e,t){const r=this.seq;for(let s=0,c=r.length;s!==c;++s){const h=r[s];h.setValue(n,e[h.id],t)}};const kk=/(\w+)(\])?(\[|\.)?/g;function uV(n,e){n.seq.push(e),n.map[e.id]=e}function Jte(n,e,t){const r=n.name,s=r.length;for(kk.lastIndex=0;;){const c=kk.exec(r),h=kk.lastIndex;let _=c[1];const A=c[3];if("]"===c[2]&&(_|=0),void 0===A||"["===A&&h+2===s){uV(t,void 0===A?new Xte(_,n,e):new lV(_,n,e));break}{let G=t.map[_];void 0===G&&(G=new cV(_),uV(t,G)),t=G}}}function C_(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let r=0;r<t;++r){const s=n.getActiveUniform(e,r);Jte(s,n.getUniformLocation(e,s.name),this)}}function hV(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}C_.prototype.setValue=function(n,e,t,r){const s=this.map[e];void 0!==s&&s.setValue(n,t,r)},C_.prototype.setOptional=function(n,e,t){const r=e[t];void 0!==r&&this.setValue(n,t,r)},C_.upload=function(n,e,t,r){for(let s=0,c=e.length;s!==c;++s){const h=e[s],_=t[h.id];!1!==_.needsUpdate&&h.setValue(n,_.value,r)}},C_.seqWithValue=function(n,e){const t=[];for(let r=0,s=n.length;r!==s;++r){const c=n[r];c.id in e&&t.push(c)}return t};let Kte=0;function dV(n,e,t){const r=n.getShaderParameter(e,35713),s=n.getShaderInfoLog(e).trim();return r&&""===s?"":t.toUpperCase()+"\n\n"+s+"\n\n"+function Qte(n){const e=n.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(n.getShaderSource(e))}function ene(n,e){const t=function $te(n){switch(n){case p_:return["Linear","( value )"];case hl:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function tne(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function tM(n){return""!==n}function fV(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function pV(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const sne=/^[ \t]*#include +<([\w\d./]+)>/gm;function Pk(n){return n.replace(sne,one)}function one(n,e){const t=po[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return Pk(t)}const ane=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,lne=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function mV(n){return n.replace(lne,gV).replace(ane,cne)}function cne(n,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),gV(0,e,t,r)}function gV(n,e,t,r){let s="";for(let c=parseInt(e);c<parseInt(t);c++)s+=r.replace(/\[\s*i\s*\]/g,"[ "+c+" ]").replace(/UNROLLED_LOOP_INDEX/g,c);return s}function _V(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function pne(n,e,t,r){const s=n.getContext(),c=t.defines;let h=t.vertexShader,_=t.fragmentShader;const S=function une(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),A=function hne(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),O=function dne(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case 302:case 307:e="ENVMAP_MODE_REFRACTION"}return e}(t),G=function fne(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),X=t.isWebGL2?"":function nne(n){return[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(tM).join("\n")}(t),te=function ine(n){const e=[];for(const t in n){const r=n[t];!1!==r&&e.push("#define "+t+" "+r)}return e.join("\n")}(c),ue=s.createProgram();let ve,Ie,ye=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(ve=[te].filter(tM).join("\n"),ve.length>0&&(ve+="\n"),Ie=[X,te].filter(tM).join("\n"),Ie.length>0&&(Ie+="\n")):(ve=[_V(t),"#define SHADER_NAME "+t.shaderName,te,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+O:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+S:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(tM).join("\n"),Ie=[X,_V(t),"#define SHADER_NAME "+t.shaderName,te,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+A:"",t.envMap?"#define "+O:"",t.envMap?"#define "+G:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+S:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?po.tonemapping_pars_fragment:"",0!==t.toneMapping?tne("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.transparent?"":"#define OPAQUE",po.encodings_pars_fragment,ene("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(tM).join("\n")),h=Pk(h),h=fV(h,t),h=pV(h,t),_=Pk(_),_=fV(_,t),_=pV(_,t),h=mV(h),_=mV(_),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(ye="#version 300 es\n",ve=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+ve,Ie=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+Ie);const Ge=ye+Ie+_,Oe=hV(s,35633,ye+ve+h),$e=hV(s,35632,Ge);if(s.attachShader(ue,Oe),s.attachShader(ue,$e),void 0!==t.index0AttributeName?s.bindAttribLocation(ue,0,t.index0AttributeName):!0===t.morphTargets&&s.bindAttribLocation(ue,0,"position"),s.linkProgram(ue),n.debug.checkShaderErrors){const Nt=s.getProgramInfoLog(ue).trim(),Cn=s.getShaderInfoLog(Oe).trim(),hn=s.getShaderInfoLog($e).trim();let Xe=!0,At=!0;if(!1===s.getProgramParameter(ue,35714)){Xe=!1;const Zt=dV(s,Oe,"vertex"),$t=dV(s,$e,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(ue,35715)+"\n\nProgram Info Log: "+Nt+"\n"+Zt+"\n"+$t)}else""!==Nt?console.warn("THREE.WebGLProgram: Program Info Log:",Nt):(""===Cn||""===hn)&&(At=!1);At&&(this.diagnostics={runnable:Xe,programLog:Nt,vertexShader:{log:Cn,prefix:ve},fragmentShader:{log:hn,prefix:Ie}})}let ht,vt;return s.deleteShader(Oe),s.deleteShader($e),this.getUniforms=function(){return void 0===ht&&(ht=new C_(s,ue)),ht},this.getAttributes=function(){return void 0===vt&&(vt=function rne(n,e){const t={},r=n.getProgramParameter(e,35721);for(let s=0;s<r;s++){const c=n.getActiveAttrib(e,s),h=c.name;let _=1;35674===c.type&&(_=2),35675===c.type&&(_=3),35676===c.type&&(_=4),t[h]={type:c.type,location:n.getAttribLocation(e,h),locationSize:_}}return t}(s,ue)),vt},this.destroy=function(){r.releaseStatesOfProgram(this),s.deleteProgram(ue),this.program=void 0},this.name=t.shaderName,this.id=Kte++,this.cacheKey=e,this.usedTimes=1,this.program=ue,this.vertexShader=Oe,this.fragmentShader=$e,this}let mne=0;class gne{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.fragmentShader,s=this._getShaderStage(e.vertexShader),c=this._getShaderStage(r),h=this._getShaderCacheForMaterial(e);return!1===h.has(s)&&(h.add(s),s.usedTimes++),!1===h.has(c)&&(h.add(c),c.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const r=new _ne;t.set(e,r)}return t.get(e)}}class _ne{constructor(){this.id=mne++,this.usedTimes=0}}function vne(n,e,t,r,s,c,h){const _=new dk,S=new gne,A=[],O=s.isWebGL2,G=s.logarithmicDepthBuffer,X=s.floatVertexTextures,te=s.maxVertexUniforms,ue=s.vertexTextures;let ve=s.precision;const Ie={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function de(Xe,At,Zt,$t,tn){const _t=$t.fog,ln=(Xe.isMeshStandardMaterial?t:e).get(Xe.envMap||(Xe.isMeshStandardMaterial?$t.environment:null)),Gn=Ie[Xe.type],vn=tn.isSkinnedMesh?function ye(Xe){const Zt=Xe.skeleton.bones;if(X)return 1024;{const tn=Math.floor((te-20)/4),_t=Math.min(tn,Zt.length);return _t<Zt.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Zt.length+" bones. This GPU supports "+_t+"."),0):_t}}(tn):0;let Un,Ti,fr,qi;if(null!==Xe.precision&&(ve=s.getMaxPrecision(Xe.precision),ve!==Xe.precision&&console.warn("THREE.WebGLProgram.getParameters:",Xe.precision,"not supported, using",ve,"instead.")),Gn){const tr=pp[Gn];Un=tr.vertexShader,Ti=tr.fragmentShader}else Un=Xe.vertexShader,Ti=Xe.fragmentShader,S.update(Xe),fr=S.getVertexShaderID(Xe),qi=S.getFragmentShaderID(Xe);const Vn=n.getRenderTarget(),ir=Xe.clearcoat>0;return{isWebGL2:O,shaderID:Gn,shaderName:Xe.type,vertexShader:Un,fragmentShader:Ti,defines:Xe.defines,customVertexShaderID:fr,customFragmentShaderID:qi,isRawShaderMaterial:!0===Xe.isRawShaderMaterial,glslVersion:Xe.glslVersion,precision:ve,instancing:!0===tn.isInstancedMesh,instancingColor:!0===tn.isInstancedMesh&&null!==tn.instanceColor,supportsVertexTextures:ue,outputEncoding:null===Vn?n.outputEncoding:!0===Vn.isXRRenderTarget?Vn.texture.encoding:p_,map:!!Xe.map,matcap:!!Xe.matcap,envMap:!!ln,envMapMode:ln&&ln.mapping,envMapCubeUV:!!ln&&(306===ln.mapping||307===ln.mapping),lightMap:!!Xe.lightMap,aoMap:!!Xe.aoMap,emissiveMap:!!Xe.emissiveMap,bumpMap:!!Xe.bumpMap,normalMap:!!Xe.normalMap,objectSpaceNormalMap:1===Xe.normalMapType,tangentSpaceNormalMap:0===Xe.normalMapType,decodeVideoTexture:!!Xe.map&&!0===Xe.map.isVideoTexture&&Xe.map.encoding===hl,clearcoat:ir,clearcoatMap:ir&&!!Xe.clearcoatMap,clearcoatRoughnessMap:ir&&!!Xe.clearcoatRoughnessMap,clearcoatNormalMap:ir&&!!Xe.clearcoatNormalMap,displacementMap:!!Xe.displacementMap,roughnessMap:!!Xe.roughnessMap,metalnessMap:!!Xe.metalnessMap,specularMap:!!Xe.specularMap,specularIntensityMap:!!Xe.specularIntensityMap,specularColorMap:!!Xe.specularColorMap,transparent:Xe.transparent,alphaMap:!!Xe.alphaMap,alphaTest:Xe.alphaTest>0,gradientMap:!!Xe.gradientMap,sheen:Xe.sheen>0,sheenColorMap:!!Xe.sheenColorMap,sheenRoughnessMap:!!Xe.sheenRoughnessMap,transmission:Xe.transmission>0,transmissionMap:!!Xe.transmissionMap,thicknessMap:!!Xe.thicknessMap,combine:Xe.combine,vertexTangents:!!Xe.normalMap&&!!tn.geometry&&!!tn.geometry.attributes.tangent,vertexColors:Xe.vertexColors,vertexAlphas:!0===Xe.vertexColors&&!!tn.geometry&&!!tn.geometry.attributes.color&&4===tn.geometry.attributes.color.itemSize,vertexUvs:!!(Xe.map||Xe.bumpMap||Xe.normalMap||Xe.specularMap||Xe.alphaMap||Xe.emissiveMap||Xe.roughnessMap||Xe.metalnessMap||Xe.clearcoatMap||Xe.clearcoatRoughnessMap||Xe.clearcoatNormalMap||Xe.displacementMap||Xe.transmissionMap||Xe.thicknessMap||Xe.specularIntensityMap||Xe.specularColorMap||Xe.sheenColorMap||Xe.sheenRoughnessMap),uvsVertexOnly:!(Xe.map||Xe.bumpMap||Xe.normalMap||Xe.specularMap||Xe.alphaMap||Xe.emissiveMap||Xe.roughnessMap||Xe.metalnessMap||Xe.clearcoatNormalMap||Xe.transmission>0||Xe.transmissionMap||Xe.thicknessMap||Xe.specularIntensityMap||Xe.specularColorMap||Xe.sheen>0||Xe.sheenColorMap||Xe.sheenRoughnessMap||!Xe.displacementMap),fog:!!_t,useFog:Xe.fog,fogExp2:_t&&_t.isFogExp2,flatShading:!!Xe.flatShading,sizeAttenuation:Xe.sizeAttenuation,logarithmicDepthBuffer:G,skinning:!0===tn.isSkinnedMesh&&vn>0,maxBones:vn,useVertexTexture:X,morphTargets:!!tn.geometry&&!!tn.geometry.morphAttributes.position,morphNormals:!!tn.geometry&&!!tn.geometry.morphAttributes.normal,morphTargetsCount:tn.geometry&&tn.geometry.morphAttributes.position?tn.geometry.morphAttributes.position.length:0,numDirLights:At.directional.length,numPointLights:At.point.length,numSpotLights:At.spot.length,numRectAreaLights:At.rectArea.length,numHemiLights:At.hemi.length,numDirLightShadows:At.directionalShadowMap.length,numPointLightShadows:At.pointShadowMap.length,numSpotLightShadows:At.spotShadowMap.length,numClippingPlanes:h.numPlanes,numClipIntersection:h.numIntersection,dithering:Xe.dithering,shadowMapEnabled:n.shadowMap.enabled&&Zt.length>0,shadowMapType:n.shadowMap.type,toneMapping:Xe.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:Xe.premultipliedAlpha,doubleSided:2===Xe.side,flipSided:1===Xe.side,depthPacking:void 0!==Xe.depthPacking&&Xe.depthPacking,index0AttributeName:Xe.index0AttributeName,extensionDerivatives:Xe.extensions&&Xe.extensions.derivatives,extensionFragDepth:Xe.extensions&&Xe.extensions.fragDepth,extensionDrawBuffers:Xe.extensions&&Xe.extensions.drawBuffers,extensionShaderTextureLOD:Xe.extensions&&Xe.extensions.shaderTextureLOD,rendererExtensionFragDepth:O||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:O||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:O||r.has("EXT_shader_texture_lod"),customProgramCacheKey:Xe.customProgramCacheKey()}},getProgramCacheKey:function Ge(Xe){const At=[];if(Xe.shaderID?At.push(Xe.shaderID):(At.push(Xe.customVertexShaderID),At.push(Xe.customFragmentShaderID)),void 0!==Xe.defines)for(const Zt in Xe.defines)At.push(Zt),At.push(Xe.defines[Zt]);return!1===Xe.isRawShaderMaterial&&(function Oe(Xe,At){Xe.push(At.precision),Xe.push(At.outputEncoding),Xe.push(At.envMapMode),Xe.push(At.combine),Xe.push(At.vertexUvs),Xe.push(At.fogExp2),Xe.push(At.sizeAttenuation),Xe.push(At.maxBones),Xe.push(At.morphTargetsCount),Xe.push(At.numDirLights),Xe.push(At.numPointLights),Xe.push(At.numSpotLights),Xe.push(At.numHemiLights),Xe.push(At.numRectAreaLights),Xe.push(At.numDirLightShadows),Xe.push(At.numPointLightShadows),Xe.push(At.numSpotLightShadows),Xe.push(At.shadowMapType),Xe.push(At.toneMapping),Xe.push(At.numClippingPlanes),Xe.push(At.numClipIntersection)}(At,Xe),function $e(Xe,At){_.disableAll(),At.isWebGL2&&_.enable(0),At.supportsVertexTextures&&_.enable(1),At.instancing&&_.enable(2),At.instancingColor&&_.enable(3),At.map&&_.enable(4),At.matcap&&_.enable(5),At.envMap&&_.enable(6),At.envMapCubeUV&&_.enable(7),At.lightMap&&_.enable(8),At.aoMap&&_.enable(9),At.emissiveMap&&_.enable(10),At.bumpMap&&_.enable(11),At.normalMap&&_.enable(12),At.objectSpaceNormalMap&&_.enable(13),At.tangentSpaceNormalMap&&_.enable(14),At.clearcoat&&_.enable(15),At.clearcoatMap&&_.enable(16),At.clearcoatRoughnessMap&&_.enable(17),At.clearcoatNormalMap&&_.enable(18),At.displacementMap&&_.enable(19),At.specularMap&&_.enable(20),At.roughnessMap&&_.enable(21),At.metalnessMap&&_.enable(22),At.gradientMap&&_.enable(23),At.alphaMap&&_.enable(24),At.alphaTest&&_.enable(25),At.vertexColors&&_.enable(26),At.vertexAlphas&&_.enable(27),At.vertexUvs&&_.enable(28),At.vertexTangents&&_.enable(29),At.uvsVertexOnly&&_.enable(30),At.fog&&_.enable(31),Xe.push(_.mask),_.disableAll(),At.useFog&&_.enable(0),At.flatShading&&_.enable(1),At.logarithmicDepthBuffer&&_.enable(2),At.skinning&&_.enable(3),At.useVertexTexture&&_.enable(4),At.morphTargets&&_.enable(5),At.morphNormals&&_.enable(6),At.premultipliedAlpha&&_.enable(7),At.shadowMapEnabled&&_.enable(8),At.physicallyCorrectLights&&_.enable(9),At.doubleSided&&_.enable(10),At.flipSided&&_.enable(11),At.depthPacking&&_.enable(12),At.dithering&&_.enable(13),At.specularIntensityMap&&_.enable(14),At.specularColorMap&&_.enable(15),At.transmission&&_.enable(16),At.transmissionMap&&_.enable(17),At.thicknessMap&&_.enable(18),At.sheen&&_.enable(19),At.sheenColorMap&&_.enable(20),At.sheenRoughnessMap&&_.enable(21),At.decodeVideoTexture&&_.enable(22),At.transparent&&_.enable(23),Xe.push(_.mask)}(At,Xe),At.push(n.outputEncoding)),At.push(Xe.customProgramCacheKey),At.join()},getUniforms:function ht(Xe){const At=Ie[Xe.type];let Zt;return Zt=At?jQ.clone(pp[At].uniforms):Xe.uniforms,Zt},acquireProgram:function vt(Xe,At){let Zt;for(let $t=0,tn=A.length;$t<tn;$t++){const _t=A[$t];if(_t.cacheKey===At){Zt=_t,++Zt.usedTimes;break}}return void 0===Zt&&(Zt=new pne(n,At,Xe,c),A.push(Zt)),Zt},releaseProgram:function Nt(Xe){if(0==--Xe.usedTimes){const At=A.indexOf(Xe);A[At]=A[A.length-1],A.pop(),Xe.destroy()}},releaseShaderCache:function Cn(Xe){S.remove(Xe)},programs:A,dispose:function hn(){S.dispose()}}}function yne(){let n=new WeakMap;return{get:function e(c){let h=n.get(c);return void 0===h&&(h={},n.set(c,h)),h},remove:function t(c){n.delete(c)},update:function r(c,h,_){n.get(c)[h]=_},dispose:function s(){n=new WeakMap}}}function bne(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function vV(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function yV(){const n=[];let e=0;const t=[],r=[],s=[];function h(G,X,te,ue,ve,Ie){let ye=n[e];return void 0===ye?(ye={id:G.id,object:G,geometry:X,material:te,groupOrder:ue,renderOrder:G.renderOrder,z:ve,group:Ie},n[e]=ye):(ye.id=G.id,ye.object=G,ye.geometry=X,ye.material=te,ye.groupOrder=ue,ye.renderOrder=G.renderOrder,ye.z=ve,ye.group=Ie),e++,ye}return{opaque:t,transmissive:r,transparent:s,init:function c(){e=0,t.length=0,r.length=0,s.length=0},push:function _(G,X,te,ue,ve,Ie){const ye=h(G,X,te,ue,ve,Ie);te.transmission>0?r.push(ye):!0===te.transparent?s.push(ye):t.push(ye)},unshift:function S(G,X,te,ue,ve,Ie){const ye=h(G,X,te,ue,ve,Ie);te.transmission>0?r.unshift(ye):!0===te.transparent?s.unshift(ye):t.unshift(ye)},finish:function O(){for(let G=e,X=n.length;G<X;G++){const te=n[G];if(null===te.id)break;te.id=null,te.object=null,te.geometry=null,te.material=null,te.group=null}},sort:function A(G,X){t.length>1&&t.sort(G||bne),r.length>1&&r.sort(X||vV),s.length>1&&s.sort(X||vV)}}}function xne(){let n=new WeakMap;return{get:function e(r,s){let c;return!1===n.has(r)?(c=new yV,n.set(r,[c])):s>=n.get(r).length?(c=new yV,n.get(r).push(c)):c=n.get(r)[s],c},dispose:function t(){n=new WeakMap}}}function wne(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ot,color:new er};break;case"SpotLight":t={position:new ot,direction:new ot,color:new er,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ot,color:new er,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ot,skyColor:new er,groundColor:new er};break;case"RectAreaLight":t={color:new er,position:new ot,halfWidth:new ot,halfHeight:new ot}}return n[e.id]=t,t}}}let Cne=0;function Sne(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function Ene(n,e){const t=new wne,r=function Mne(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ci};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ci,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let O=0;O<9;O++)s.probe.push(new ot);const c=new ot,h=new Pr,_=new Pr;return{setup:function S(O,G){let X=0,te=0,ue=0;for(let Cn=0;Cn<9;Cn++)s.probe[Cn].set(0,0,0);let ve=0,Ie=0,ye=0,de=0,Ge=0,Oe=0,$e=0,ht=0;O.sort(Sne);const vt=!0!==G?Math.PI:1;for(let Cn=0,hn=O.length;Cn<hn;Cn++){const Xe=O[Cn],At=Xe.color,Zt=Xe.intensity,$t=Xe.distance,tn=Xe.shadow&&Xe.shadow.map?Xe.shadow.map.texture:null;if(Xe.isAmbientLight)X+=At.r*Zt*vt,te+=At.g*Zt*vt,ue+=At.b*Zt*vt;else if(Xe.isLightProbe)for(let _t=0;_t<9;_t++)s.probe[_t].addScaledVector(Xe.sh.coefficients[_t],Zt);else if(Xe.isDirectionalLight){const _t=t.get(Xe);if(_t.color.copy(Xe.color).multiplyScalar(Xe.intensity*vt),Xe.castShadow){const Ut=Xe.shadow,ln=r.get(Xe);ln.shadowBias=Ut.bias,ln.shadowNormalBias=Ut.normalBias,ln.shadowRadius=Ut.radius,ln.shadowMapSize=Ut.mapSize,s.directionalShadow[ve]=ln,s.directionalShadowMap[ve]=tn,s.directionalShadowMatrix[ve]=Xe.shadow.matrix,Oe++}s.directional[ve]=_t,ve++}else if(Xe.isSpotLight){const _t=t.get(Xe);if(_t.position.setFromMatrixPosition(Xe.matrixWorld),_t.color.copy(At).multiplyScalar(Zt*vt),_t.distance=$t,_t.coneCos=Math.cos(Xe.angle),_t.penumbraCos=Math.cos(Xe.angle*(1-Xe.penumbra)),_t.decay=Xe.decay,Xe.castShadow){const Ut=Xe.shadow,ln=r.get(Xe);ln.shadowBias=Ut.bias,ln.shadowNormalBias=Ut.normalBias,ln.shadowRadius=Ut.radius,ln.shadowMapSize=Ut.mapSize,s.spotShadow[ye]=ln,s.spotShadowMap[ye]=tn,s.spotShadowMatrix[ye]=Xe.shadow.matrix,ht++}s.spot[ye]=_t,ye++}else if(Xe.isRectAreaLight){const _t=t.get(Xe);_t.color.copy(At).multiplyScalar(Zt),_t.halfWidth.set(.5*Xe.width,0,0),_t.halfHeight.set(0,.5*Xe.height,0),s.rectArea[de]=_t,de++}else if(Xe.isPointLight){const _t=t.get(Xe);if(_t.color.copy(Xe.color).multiplyScalar(Xe.intensity*vt),_t.distance=Xe.distance,_t.decay=Xe.decay,Xe.castShadow){const Ut=Xe.shadow,ln=r.get(Xe);ln.shadowBias=Ut.bias,ln.shadowNormalBias=Ut.normalBias,ln.shadowRadius=Ut.radius,ln.shadowMapSize=Ut.mapSize,ln.shadowCameraNear=Ut.camera.near,ln.shadowCameraFar=Ut.camera.far,s.pointShadow[Ie]=ln,s.pointShadowMap[Ie]=tn,s.pointShadowMatrix[Ie]=Xe.shadow.matrix,$e++}s.point[Ie]=_t,Ie++}else if(Xe.isHemisphereLight){const _t=t.get(Xe);_t.skyColor.copy(Xe.color).multiplyScalar(Zt*vt),_t.groundColor.copy(Xe.groundColor).multiplyScalar(Zt*vt),s.hemi[Ge]=_t,Ge++}}de>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(s.rectAreaLTC1=Ki.LTC_FLOAT_1,s.rectAreaLTC2=Ki.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(s.rectAreaLTC1=Ki.LTC_HALF_1,s.rectAreaLTC2=Ki.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=X,s.ambient[1]=te,s.ambient[2]=ue;const Nt=s.hash;(Nt.directionalLength!==ve||Nt.pointLength!==Ie||Nt.spotLength!==ye||Nt.rectAreaLength!==de||Nt.hemiLength!==Ge||Nt.numDirectionalShadows!==Oe||Nt.numPointShadows!==$e||Nt.numSpotShadows!==ht)&&(s.directional.length=ve,s.spot.length=ye,s.rectArea.length=de,s.point.length=Ie,s.hemi.length=Ge,s.directionalShadow.length=Oe,s.directionalShadowMap.length=Oe,s.pointShadow.length=$e,s.pointShadowMap.length=$e,s.spotShadow.length=ht,s.spotShadowMap.length=ht,s.directionalShadowMatrix.length=Oe,s.pointShadowMatrix.length=$e,s.spotShadowMatrix.length=ht,Nt.directionalLength=ve,Nt.pointLength=Ie,Nt.spotLength=ye,Nt.rectAreaLength=de,Nt.hemiLength=Ge,Nt.numDirectionalShadows=Oe,Nt.numPointShadows=$e,Nt.numSpotShadows=ht,s.version=Cne++)},setupView:function A(O,G){let X=0,te=0,ue=0,ve=0,Ie=0;const ye=G.matrixWorldInverse;for(let de=0,Ge=O.length;de<Ge;de++){const Oe=O[de];if(Oe.isDirectionalLight){const $e=s.directional[X];$e.direction.setFromMatrixPosition(Oe.matrixWorld),c.setFromMatrixPosition(Oe.target.matrixWorld),$e.direction.sub(c),$e.direction.transformDirection(ye),X++}else if(Oe.isSpotLight){const $e=s.spot[ue];$e.position.setFromMatrixPosition(Oe.matrixWorld),$e.position.applyMatrix4(ye),$e.direction.setFromMatrixPosition(Oe.matrixWorld),c.setFromMatrixPosition(Oe.target.matrixWorld),$e.direction.sub(c),$e.direction.transformDirection(ye),ue++}else if(Oe.isRectAreaLight){const $e=s.rectArea[ve];$e.position.setFromMatrixPosition(Oe.matrixWorld),$e.position.applyMatrix4(ye),_.identity(),h.copy(Oe.matrixWorld),h.premultiply(ye),_.extractRotation(h),$e.halfWidth.set(.5*Oe.width,0,0),$e.halfHeight.set(0,.5*Oe.height,0),$e.halfWidth.applyMatrix4(_),$e.halfHeight.applyMatrix4(_),ve++}else if(Oe.isPointLight){const $e=s.point[te];$e.position.setFromMatrixPosition(Oe.matrixWorld),$e.position.applyMatrix4(ye),te++}else if(Oe.isHemisphereLight){const $e=s.hemi[Ie];$e.direction.setFromMatrixPosition(Oe.matrixWorld),$e.direction.transformDirection(ye),$e.direction.normalize(),Ie++}}},state:s}}function bV(n,e){const t=new Ene(n,e),r=[],s=[];return{init:function c(){r.length=0,s.length=0},state:{lightsArray:r,shadowsArray:s,lights:t},setupLights:function S(G){t.setup(r,G)},setupLightsView:function A(G){t.setupView(r,G)},pushLight:function h(G){r.push(G)},pushShadow:function _(G){s.push(G)}}}function Tne(n,e){let t=new WeakMap;return{get:function r(c,h=0){let _;return!1===t.has(c)?(_=new bV(n,e),t.set(c,[_])):h>=t.get(c).length?(_=new bV(n,e),t.get(c).push(_)):_=t.get(c)[h],_},dispose:function s(){t=new WeakMap}}}class Lk extends ou{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}Lk.prototype.isMeshDepthMaterial=!0;class Fk extends ou{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new ot,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function xV(n,e,t){let r=new uT;const s=new ci,c=new ci,h=new ya,_=new Lk({depthPacking:3201}),S=new Fk,A={},O=t.maxTextureSize,G={0:1,1:0,2:2},X=new w_({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ci},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),te=X.clone();te.defines.HORIZONTAL_PASS=1;const ue=new as;ue.setAttribute("position",new Ra(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const ve=new Tc(ue,X),Ie=this;function ye(Oe,$e){const ht=e.update(ve);X.defines.VSM_SAMPLES!==Oe.blurSamples&&(X.defines.VSM_SAMPLES=Oe.blurSamples,te.defines.VSM_SAMPLES=Oe.blurSamples,X.needsUpdate=!0,te.needsUpdate=!0),X.uniforms.shadow_pass.value=Oe.map.texture,X.uniforms.resolution.value=Oe.mapSize,X.uniforms.radius.value=Oe.radius,n.setRenderTarget(Oe.mapPass),n.clear(),n.renderBufferDirect($e,null,ht,X,ve,null),te.uniforms.shadow_pass.value=Oe.mapPass.texture,te.uniforms.resolution.value=Oe.mapSize,te.uniforms.radius.value=Oe.radius,n.setRenderTarget(Oe.map),n.clear(),n.renderBufferDirect($e,null,ht,te,ve,null)}function de(Oe,$e,ht,vt,Nt,Cn,hn){let Xe=null;const At=!0===vt.isPointLight?Oe.customDistanceMaterial:Oe.customDepthMaterial;if(Xe=void 0!==At?At:!0===vt.isPointLight?S:_,n.localClippingEnabled&&!0===ht.clipShadows&&0!==ht.clippingPlanes.length||ht.displacementMap&&0!==ht.displacementScale||ht.alphaMap&&ht.alphaTest>0){const Zt=Xe.uuid,$t=ht.uuid;let tn=A[Zt];void 0===tn&&(tn={},A[Zt]=tn);let _t=tn[$t];void 0===_t&&(_t=Xe.clone(),tn[$t]=_t),Xe=_t}return Xe.visible=ht.visible,Xe.wireframe=ht.wireframe,Xe.side=3===hn?null!==ht.shadowSide?ht.shadowSide:ht.side:null!==ht.shadowSide?ht.shadowSide:G[ht.side],Xe.alphaMap=ht.alphaMap,Xe.alphaTest=ht.alphaTest,Xe.clipShadows=ht.clipShadows,Xe.clippingPlanes=ht.clippingPlanes,Xe.clipIntersection=ht.clipIntersection,Xe.displacementMap=ht.displacementMap,Xe.displacementScale=ht.displacementScale,Xe.displacementBias=ht.displacementBias,Xe.wireframeLinewidth=ht.wireframeLinewidth,Xe.linewidth=ht.linewidth,!0===vt.isPointLight&&!0===Xe.isMeshDistanceMaterial&&(Xe.referencePosition.setFromMatrixPosition(vt.matrixWorld),Xe.nearDistance=Nt,Xe.farDistance=Cn),Xe}function Ge(Oe,$e,ht,vt,Nt){if(!1===Oe.visible)return;if(Oe.layers.test($e.layers)&&(Oe.isMesh||Oe.isLine||Oe.isPoints)&&(Oe.castShadow||Oe.receiveShadow&&3===Nt)&&(!Oe.frustumCulled||r.intersectsObject(Oe))){Oe.modelViewMatrix.multiplyMatrices(ht.matrixWorldInverse,Oe.matrixWorld);const Xe=e.update(Oe),At=Oe.material;if(Array.isArray(At)){const Zt=Xe.groups;for(let $t=0,tn=Zt.length;$t<tn;$t++){const _t=Zt[$t],Ut=At[_t.materialIndex];if(Ut&&Ut.visible){const ln=de(Oe,0,Ut,vt,ht.near,ht.far,Nt);n.renderBufferDirect(ht,null,Xe,ln,Oe,_t)}}}else if(At.visible){const Zt=de(Oe,0,At,vt,ht.near,ht.far,Nt);n.renderBufferDirect(ht,null,Xe,Zt,Oe,null)}}const hn=Oe.children;for(let Xe=0,At=hn.length;Xe<At;Xe++)Ge(hn[Xe],$e,ht,vt,Nt)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(Oe,$e,ht){if(!1===Ie.enabled||!1===Ie.autoUpdate&&!1===Ie.needsUpdate||0===Oe.length)return;const vt=n.getRenderTarget(),Nt=n.getActiveCubeFace(),Cn=n.getActiveMipmapLevel(),hn=n.state;hn.setBlending(0),hn.buffers.color.setClear(1,1,1,1),hn.buffers.depth.setTest(!0),hn.setScissorTest(!1);for(let Xe=0,At=Oe.length;Xe<At;Xe++){const Zt=Oe[Xe],$t=Zt.shadow;if(void 0===$t){console.warn("THREE.WebGLShadowMap:",Zt,"has no shadow.");continue}if(!1===$t.autoUpdate&&!1===$t.needsUpdate)continue;s.copy($t.mapSize);const tn=$t.getFrameExtents();if(s.multiply(tn),c.copy($t.mapSize),(s.x>O||s.y>O)&&(s.x>O&&(c.x=Math.floor(O/tn.x),s.x=c.x*tn.x,$t.mapSize.x=c.x),s.y>O&&(c.y=Math.floor(O/tn.y),s.y=c.y*tn.y,$t.mapSize.y=c.y)),null===$t.map&&!$t.isPointLightShadow&&3===this.type){const Ut={minFilter:Rl,magFilter:Rl,format:yu};$t.map=new gd(s.x,s.y,Ut),$t.map.texture.name=Zt.name+".shadowMap",$t.mapPass=new gd(s.x,s.y,Ut),$t.camera.updateProjectionMatrix()}null===$t.map&&($t.map=new gd(s.x,s.y,{minFilter:dc,magFilter:dc,format:yu}),$t.map.texture.name=Zt.name+".shadowMap",$t.camera.updateProjectionMatrix()),n.setRenderTarget($t.map),n.clear();const _t=$t.getViewportCount();for(let Ut=0;Ut<_t;Ut++){const ln=$t.getViewport(Ut);h.set(c.x*ln.x,c.y*ln.y,c.x*ln.z,c.y*ln.w),hn.viewport(h),$t.updateMatrices(Zt,Ut),r=$t.getFrustum(),Ge($e,ht,$t.camera,Zt,this.type)}!$t.isPointLightShadow&&3===this.type&&ye($t,ht),$t.needsUpdate=!1}Ie.needsUpdate=!1,n.setRenderTarget(vt,Nt,Cn)}}function Ine(n,e,t){const r=t.isWebGL2,_=new function s(){let Yt=!1;const Lr=new ya;let xr=null;const Ts=new ya(0,0,0,0);return{setMask:function(ri){xr!==ri&&!Yt&&(n.colorMask(ri,ri,ri,ri),xr=ri)},setLocked:function(ri){Yt=ri},setClear:function(ri,fs,Co,Cl,Oh){!0===Oh&&(ri*=Cl,fs*=Cl,Co*=Cl),Lr.set(ri,fs,Co,Cl),!1===Ts.equals(Lr)&&(n.clearColor(ri,fs,Co,Cl),Ts.copy(Lr))},reset:function(){Yt=!1,xr=null,Ts.set(-1,0,0,0)}}},S=new function c(){let Yt=!1,Lr=null,xr=null,Ts=null;return{setTest:function(ri){ri?Vn(2929):zo(2929)},setMask:function(ri){Lr!==ri&&!Yt&&(n.depthMask(ri),Lr=ri)},setFunc:function(ri){if(xr!==ri){if(ri)switch(ri){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}else n.depthFunc(515);xr=ri}},setLocked:function(ri){Yt=ri},setClear:function(ri){Ts!==ri&&(n.clearDepth(ri),Ts=ri)},reset:function(){Yt=!1,Lr=null,xr=null,Ts=null}}},A=new function h(){let Yt=!1,Lr=null,xr=null,Ts=null,ri=null,fs=null,Co=null,Cl=null,Oh=null;return{setTest:function(Pl){Yt||(Pl?Vn(2960):zo(2960))},setMask:function(Pl){Lr!==Pl&&!Yt&&(n.stencilMask(Pl),Lr=Pl)},setFunc:function(Pl,vp,Zm){(xr!==Pl||Ts!==vp||ri!==Zm)&&(n.stencilFunc(Pl,vp,Zm),xr=Pl,Ts=vp,ri=Zm)},setOp:function(Pl,vp,Zm){(fs!==Pl||Co!==vp||Cl!==Zm)&&(n.stencilOp(Pl,vp,Zm),fs=Pl,Co=vp,Cl=Zm)},setLocked:function(Pl){Yt=Pl},setClear:function(Pl){Oh!==Pl&&(n.clearStencil(Pl),Oh=Pl)},reset:function(){Yt=!1,Lr=null,xr=null,Ts=null,ri=null,fs=null,Co=null,Cl=null,Oh=null}}};let O={},G={},X=new WeakMap,te=[],ue=null,ve=!1,Ie=null,ye=null,de=null,Ge=null,Oe=null,$e=null,ht=null,vt=!1,Nt=null,Cn=null,hn=null,Xe=null,At=null;const Zt=n.getParameter(35661);let $t=!1,tn=0;const _t=n.getParameter(7938);-1!==_t.indexOf("WebGL")?(tn=parseFloat(/^WebGL (\d)/.exec(_t)[1]),$t=tn>=1):-1!==_t.indexOf("OpenGL ES")&&(tn=parseFloat(/^OpenGL ES (\d)/.exec(_t)[1]),$t=tn>=2);let Ut=null,ln={};const Gn=n.getParameter(3088),vn=n.getParameter(2978),Un=(new ya).fromArray(Gn),Ti=(new ya).fromArray(vn);function fr(Yt,Lr,xr){const Ts=new Uint8Array(4),ri=n.createTexture();n.bindTexture(Yt,ri),n.texParameteri(Yt,10241,9728),n.texParameteri(Yt,10240,9728);for(let fs=0;fs<xr;fs++)n.texImage2D(Lr+fs,0,6408,1,1,0,6408,5121,Ts);return ri}const qi={};function Vn(Yt){!0!==O[Yt]&&(n.enable(Yt),O[Yt]=!0)}function zo(Yt){!1!==O[Yt]&&(n.disable(Yt),O[Yt]=!1)}qi[3553]=fr(3553,3553,1),qi[34067]=fr(34067,34069,6),_.setClear(0,0,0,1),S.setClear(1),A.setClear(0),Vn(2929),S.setFunc(3),Hi(!1),Sr(1),Vn(2884),ii(0);const Ss={100:32774,101:32778,102:32779};if(r)Ss[103]=32775,Ss[104]=32776;else{const Yt=e.get("EXT_blend_minmax");null!==Yt&&(Ss[103]=Yt.MIN_EXT,Ss[104]=Yt.MAX_EXT)}const ds={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function ii(Yt,Lr,xr,Ts,ri,fs,Co,Cl){if(0!==Yt){if(!1===ve&&(Vn(3042),ve=!0),5===Yt)ri=ri||Lr,fs=fs||xr,Co=Co||Ts,(Lr!==ye||ri!==Oe)&&(n.blendEquationSeparate(Ss[Lr],Ss[ri]),ye=Lr,Oe=ri),(xr!==de||Ts!==Ge||fs!==$e||Co!==ht)&&(n.blendFuncSeparate(ds[xr],ds[Ts],ds[fs],ds[Co]),de=xr,Ge=Ts,$e=fs,ht=Co),Ie=Yt,vt=null;else if(Yt!==Ie||Cl!==vt){if((100!==ye||100!==Oe)&&(n.blendEquation(32774),ye=100,Oe=100),Cl)switch(Yt){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Yt)}else switch(Yt){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Yt)}de=null,Ge=null,$e=null,ht=null,Ie=Yt,vt=Cl}}else!0===ve&&(zo(3042),ve=!1)}function Hi(Yt){Nt!==Yt&&(n.frontFace(Yt?2304:2305),Nt=Yt)}function Sr(Yt){0!==Yt?(Vn(2884),Yt!==Cn&&n.cullFace(1===Yt?1029:2===Yt?1028:1032)):zo(2884),Cn=Yt}function Es(Yt,Lr,xr){Yt?(Vn(32823),(Xe!==Lr||At!==xr)&&(n.polygonOffset(Lr,xr),Xe=Lr,At=xr)):zo(32823)}function Ro(Yt){void 0===Yt&&(Yt=33984+Zt-1),Ut!==Yt&&(n.activeTexture(Yt),Ut=Yt)}return{buffers:{color:_,depth:S,stencil:A},enable:Vn,disable:zo,bindFramebuffer:function ir(Yt,Lr){return G[Yt]!==Lr&&(n.bindFramebuffer(Yt,Lr),G[Yt]=Lr,r&&(36009===Yt&&(G[36160]=Lr),36160===Yt&&(G[36009]=Lr)),!0)},drawBuffers:function Jr(Yt,Lr){let xr=te,Ts=!1;if(Yt)if(xr=X.get(Lr),void 0===xr&&(xr=[],X.set(Lr,xr)),Yt.isWebGLMultipleRenderTargets){const ri=Yt.texture;if(xr.length!==ri.length||36064!==xr[0]){for(let fs=0,Co=ri.length;fs<Co;fs++)xr[fs]=36064+fs;xr.length=ri.length,Ts=!0}}else 36064!==xr[0]&&(xr[0]=36064,Ts=!0);else 1029!==xr[0]&&(xr[0]=1029,Ts=!0);Ts&&(t.isWebGL2?n.drawBuffers(xr):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(xr))},useProgram:function tr(Yt){return ue!==Yt&&(n.useProgram(Yt),ue=Yt,!0)},setBlending:ii,setMaterial:function Yi(Yt,Lr){2===Yt.side?zo(2884):Vn(2884);let xr=1===Yt.side;Lr&&(xr=!xr),Hi(xr),1===Yt.blending&&!1===Yt.transparent?ii(0):ii(Yt.blending,Yt.blendEquation,Yt.blendSrc,Yt.blendDst,Yt.blendEquationAlpha,Yt.blendSrcAlpha,Yt.blendDstAlpha,Yt.premultipliedAlpha),S.setFunc(Yt.depthFunc),S.setTest(Yt.depthTest),S.setMask(Yt.depthWrite),_.setMask(Yt.colorWrite);const Ts=Yt.stencilWrite;A.setTest(Ts),Ts&&(A.setMask(Yt.stencilWriteMask),A.setFunc(Yt.stencilFunc,Yt.stencilRef,Yt.stencilFuncMask),A.setOp(Yt.stencilFail,Yt.stencilZFail,Yt.stencilZPass)),Es(Yt.polygonOffset,Yt.polygonOffsetFactor,Yt.polygonOffsetUnits),!0===Yt.alphaToCoverage?Vn(32926):zo(32926)},setFlipSided:Hi,setCullFace:Sr,setLineWidth:function lr(Yt){Yt!==hn&&($t&&n.lineWidth(Yt),hn=Yt)},setPolygonOffset:Es,setScissorTest:function ks(Yt){Yt?Vn(3089):zo(3089)},activeTexture:Ro,bindTexture:function qa(Yt,Lr){null===Ut&&Ro();let xr=ln[Ut];void 0===xr&&(xr={type:void 0,texture:void 0},ln[Ut]=xr),(xr.type!==Yt||xr.texture!==Lr)&&(n.bindTexture(Yt,Lr||qi[Yt]),xr.type=Yt,xr.texture=Lr)},unbindTexture:function ba(){const Yt=ln[Ut];void 0!==Yt&&void 0!==Yt.type&&(n.bindTexture(Yt.type,null),Yt.type=void 0,Yt.texture=void 0)},compressedTexImage2D:function Mt(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Yt){console.error("THREE.WebGLState:",Yt)}},texImage2D:function rs(){try{n.texImage2D.apply(n,arguments)}catch(Yt){console.error("THREE.WebGLState:",Yt)}},texImage3D:function Wr(){try{n.texImage3D.apply(n,arguments)}catch(Yt){console.error("THREE.WebGLState:",Yt)}},texStorage2D:function Gr(){try{n.texStorage2D.apply(n,arguments)}catch(Yt){console.error("THREE.WebGLState:",Yt)}},texStorage3D:function jn(){try{n.texStorage3D.apply(n,arguments)}catch(Yt){console.error("THREE.WebGLState:",Yt)}},texSubImage2D:function ct(){try{n.texSubImage2D.apply(n,arguments)}catch(Yt){console.error("THREE.WebGLState:",Yt)}},texSubImage3D:function Kn(){try{n.texSubImage3D.apply(n,arguments)}catch(Yt){console.error("THREE.WebGLState:",Yt)}},compressedTexSubImage2D:function Zi(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Yt){console.error("THREE.WebGLState:",Yt)}},scissor:function ar(Yt){!1===Un.equals(Yt)&&(n.scissor(Yt.x,Yt.y,Yt.z,Yt.w),Un.copy(Yt))},viewport:function sr(Yt){!1===Ti.equals(Yt)&&(n.viewport(Yt.x,Yt.y,Yt.z,Yt.w),Ti.copy(Yt))},reset:function Zs(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===r&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),O={},Ut=null,ln={},G={},X=new WeakMap,te=[],ue=null,ve=!1,Ie=null,ye=null,de=null,Ge=null,Oe=null,$e=null,ht=null,vt=!1,Nt=null,Cn=null,hn=null,Xe=null,At=null,Un.set(0,0,n.canvas.width,n.canvas.height),Ti.set(0,0,n.canvas.width,n.canvas.height),_.reset(),S.reset(),A.reset()}}}function Rne(n,e,t,r,s,c,h){const _=s.isWebGL2,S=s.maxTextures,A=s.maxCubemapSize,O=s.maxTextureSize,G=s.maxSamples,te=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):void 0,ue=new WeakMap;let ve,Ie=!1;try{Ie="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(Mt){}function ye(Mt,ct){return Ie?new OffscreenCanvas(Mt,ct):Z1("canvas")}function de(Mt,ct,Kn,Zi){let Gr=1;if((Mt.width>Zi||Mt.height>Zi)&&(Gr=Zi/Math.max(Mt.width,Mt.height)),Gr<1||!0===ct){if("undefined"!=typeof HTMLImageElement&&Mt instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&Mt instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&Mt instanceof ImageBitmap){const jn=ct?Tz:Math.floor,rs=jn(Gr*Mt.width),Wr=jn(Gr*Mt.height);void 0===ve&&(ve=ye(rs,Wr));const ar=Kn?ye(rs,Wr):ve;return ar.width=rs,ar.height=Wr,ar.getContext("2d").drawImage(Mt,0,0,rs,Wr),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Mt.width+"x"+Mt.height+") to ("+rs+"x"+Wr+")."),ar}return"data"in Mt&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Mt.width+"x"+Mt.height+")."),Mt}return Mt}function Ge(Mt){return ek(Mt.width)&&ek(Mt.height)}function $e(Mt,ct){return Mt.generateMipmaps&&ct&&Mt.minFilter!==dc&&Mt.minFilter!==Rl}function ht(Mt){n.generateMipmap(Mt)}function vt(Mt,ct,Kn,Zi,Gr=!1){if(!1===_)return ct;if(null!==Mt){if(void 0!==n[Mt])return n[Mt];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Mt+"'")}let jn=ct;return 6403===ct&&(5126===Kn&&(jn=33326),5131===Kn&&(jn=33325),5121===Kn&&(jn=33321)),33319===ct&&(5126===Kn&&(jn=33328),5131===Kn&&(jn=33327),5121===Kn&&(jn=33323)),6408===ct&&(5126===Kn&&(jn=34836),5131===Kn&&(jn=34842),5121===Kn&&(jn=Zi===hl&&!1===Gr?35907:32856),32819===Kn&&(jn=32854),32820===Kn&&(jn=32855)),(33325===jn||33326===jn||33327===jn||33328===jn||34842===jn||34836===jn)&&e.get("EXT_color_buffer_float"),jn}function Nt(Mt,ct,Kn){return!0===$e(Mt,Kn)||Mt.isFramebufferTexture&&Mt.minFilter!==dc&&Mt.minFilter!==Rl?Math.log2(Math.max(ct.width,ct.height))+1:void 0!==Mt.mipmaps&&Mt.mipmaps.length>0?Mt.mipmaps.length:Mt.isCompressedTexture&&Array.isArray(Mt.image)?ct.mipmaps.length:1}function Cn(Mt){return Mt===dc||1004===Mt||1005===Mt?9728:9729}function hn(Mt){const ct=Mt.target;ct.removeEventListener("dispose",hn),function At(Mt){const ct=r.get(Mt);void 0!==ct.__webglInit&&(n.deleteTexture(ct.__webglTexture),r.remove(Mt))}(ct),ct.isVideoTexture&&ue.delete(ct),h.memory.textures--}function Xe(Mt){const ct=Mt.target;ct.removeEventListener("dispose",Xe),function Zt(Mt){const ct=Mt.texture,Kn=r.get(Mt),Zi=r.get(ct);if(Mt){if(void 0!==Zi.__webglTexture&&(n.deleteTexture(Zi.__webglTexture),h.memory.textures--),Mt.depthTexture&&Mt.depthTexture.dispose(),Mt.isWebGLCubeRenderTarget)for(let Gr=0;Gr<6;Gr++)n.deleteFramebuffer(Kn.__webglFramebuffer[Gr]),Kn.__webglDepthbuffer&&n.deleteRenderbuffer(Kn.__webglDepthbuffer[Gr]);else n.deleteFramebuffer(Kn.__webglFramebuffer),Kn.__webglDepthbuffer&&n.deleteRenderbuffer(Kn.__webglDepthbuffer),Kn.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Kn.__webglMultisampledFramebuffer),Kn.__webglColorRenderbuffer&&n.deleteRenderbuffer(Kn.__webglColorRenderbuffer),Kn.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Kn.__webglDepthRenderbuffer);if(Mt.isWebGLMultipleRenderTargets)for(let Gr=0,jn=ct.length;Gr<jn;Gr++){const rs=r.get(ct[Gr]);rs.__webglTexture&&(n.deleteTexture(rs.__webglTexture),h.memory.textures--),r.remove(ct[Gr])}r.remove(ct),r.remove(Mt)}}(ct)}let $t=0;function Ut(Mt,ct){const Kn=r.get(Mt);if(Mt.isVideoTexture&&function lr(Mt){const ct=h.render.frame;ue.get(Mt)!==ct&&(ue.set(Mt,ct),Mt.update())}(Mt),Mt.version>0&&Kn.__version!==Mt.version){const Zi=Mt.image;if(void 0===Zi)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==Zi.complete)return void Vn(Kn,Mt,ct);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+ct),t.bindTexture(3553,Kn.__webglTexture)}function vn(Mt,ct){const Kn=r.get(Mt);Mt.version>0&&Kn.__version!==Mt.version?function zo(Mt,ct,Kn){if(6!==ct.image.length)return;qi(Mt,ct),t.activeTexture(33984+Kn),t.bindTexture(34067,Mt.__webglTexture),n.pixelStorei(37440,ct.flipY),n.pixelStorei(37441,ct.premultiplyAlpha),n.pixelStorei(3317,ct.unpackAlignment),n.pixelStorei(37443,0);const Zi=ct&&(ct.isCompressedTexture||ct.image[0].isCompressedTexture),Gr=ct.image[0]&&ct.image[0].isDataTexture,jn=[];for(let ri=0;ri<6;ri++)jn[ri]=Zi||Gr?Gr?ct.image[ri].image:ct.image[ri]:de(ct.image[ri],!1,!0,A),jn[ri]=Es(ct,jn[ri]);const rs=jn[0],Wr=Ge(rs)||_,ar=c.convert(ct.format,ct.encoding),sr=c.convert(ct.type),Zs=vt(ct.internalFormat,ar,sr,ct.encoding),Yt=_&&!0!==ct.isVideoTexture,Lr=void 0===Mt.__version;let Ts,xr=Nt(ct,rs,Wr);if(fr(34067,ct,Wr),Zi){Yt&&Lr&&t.texStorage2D(34067,xr,Zs,rs.width,rs.height);for(let ri=0;ri<6;ri++){Ts=jn[ri].mipmaps;for(let fs=0;fs<Ts.length;fs++){const Co=Ts[fs];ct.format!==yu?null!==ar?Yt?t.compressedTexSubImage2D(34069+ri,fs,0,0,Co.width,Co.height,ar,Co.data):t.compressedTexImage2D(34069+ri,fs,Zs,Co.width,Co.height,0,Co.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Yt?t.texSubImage2D(34069+ri,fs,0,0,Co.width,Co.height,ar,sr,Co.data):t.texImage2D(34069+ri,fs,Zs,Co.width,Co.height,0,ar,sr,Co.data)}}}else{Ts=ct.mipmaps,Yt&&Lr&&(Ts.length>0&&xr++,t.texStorage2D(34067,xr,Zs,jn[0].width,jn[0].height));for(let ri=0;ri<6;ri++)if(Gr){Yt?t.texSubImage2D(34069+ri,0,0,0,jn[ri].width,jn[ri].height,ar,sr,jn[ri].data):t.texImage2D(34069+ri,0,Zs,jn[ri].width,jn[ri].height,0,ar,sr,jn[ri].data);for(let fs=0;fs<Ts.length;fs++){const Cl=Ts[fs].image[ri].image;Yt?t.texSubImage2D(34069+ri,fs+1,0,0,Cl.width,Cl.height,ar,sr,Cl.data):t.texImage2D(34069+ri,fs+1,Zs,Cl.width,Cl.height,0,ar,sr,Cl.data)}}else{Yt?t.texSubImage2D(34069+ri,0,0,0,ar,sr,jn[ri]):t.texImage2D(34069+ri,0,Zs,ar,sr,jn[ri]);for(let fs=0;fs<Ts.length;fs++){const Co=Ts[fs];Yt?t.texSubImage2D(34069+ri,fs+1,0,0,ar,sr,Co.image[ri]):t.texImage2D(34069+ri,fs+1,Zs,ar,sr,Co.image[ri])}}}$e(ct,Wr)&&ht(34067),Mt.__version=ct.version,ct.onUpdate&&ct.onUpdate(ct)}(Kn,Mt,ct):(t.activeTexture(33984+ct),t.bindTexture(34067,Kn.__webglTexture))}const Un={1e3:10497,[vu]:33071,1002:33648},Ti={[dc]:9728,1004:9984,1005:9986,[Rl]:9729,1007:9985,1008:9987};function fr(Mt,ct,Kn){if(Kn?(n.texParameteri(Mt,10242,Un[ct.wrapS]),n.texParameteri(Mt,10243,Un[ct.wrapT]),(32879===Mt||35866===Mt)&&n.texParameteri(Mt,32882,Un[ct.wrapR]),n.texParameteri(Mt,10240,Ti[ct.magFilter]),n.texParameteri(Mt,10241,Ti[ct.minFilter])):(n.texParameteri(Mt,10242,33071),n.texParameteri(Mt,10243,33071),(32879===Mt||35866===Mt)&&n.texParameteri(Mt,32882,33071),(ct.wrapS!==vu||ct.wrapT!==vu)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(Mt,10240,Cn(ct.magFilter)),n.texParameteri(Mt,10241,Cn(ct.minFilter)),ct.minFilter!==dc&&ct.minFilter!==Rl&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const Zi=e.get("EXT_texture_filter_anisotropic");if(ct.type===f_&&!1===e.has("OES_texture_float_linear")||!1===_&&ct.type===u0&&!1===e.has("OES_texture_half_float_linear"))return;(ct.anisotropy>1||r.get(ct).__currentAnisotropy)&&(n.texParameterf(Mt,Zi.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ct.anisotropy,s.getMaxAnisotropy())),r.get(ct).__currentAnisotropy=ct.anisotropy)}}function qi(Mt,ct){void 0===Mt.__webglInit&&(Mt.__webglInit=!0,ct.addEventListener("dispose",hn),Mt.__webglTexture=n.createTexture(),h.memory.textures++)}function Vn(Mt,ct,Kn){let Zi=3553;ct.isDataTexture2DArray&&(Zi=35866),ct.isDataTexture3D&&(Zi=32879),qi(Mt,ct),t.activeTexture(33984+Kn),t.bindTexture(Zi,Mt.__webglTexture),n.pixelStorei(37440,ct.flipY),n.pixelStorei(37441,ct.premultiplyAlpha),n.pixelStorei(3317,ct.unpackAlignment),n.pixelStorei(37443,0);const Gr=function Oe(Mt){return!_&&(Mt.wrapS!==vu||Mt.wrapT!==vu||Mt.minFilter!==dc&&Mt.minFilter!==Rl)}(ct)&&!1===Ge(ct.image);let jn=de(ct.image,Gr,!1,O);jn=Es(ct,jn);const rs=Ge(jn)||_,Wr=c.convert(ct.format,ct.encoding);let Zs,ar=c.convert(ct.type),sr=vt(ct.internalFormat,Wr,ar,ct.encoding,ct.isVideoTexture);fr(Zi,ct,rs);const Yt=ct.mipmaps,Lr=_&&!0!==ct.isVideoTexture,xr=void 0===Mt.__version,Ts=Nt(ct,jn,rs);if(ct.isDepthTexture)sr=6402,_?sr=ct.type===f_?36012:1014===ct.type?33190:ct.type===h0?35056:33189:ct.type===f_&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ct.format===$v&&6402===sr&&ct.type!==U1&&1014!==ct.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ct.type=U1,ar=c.convert(ct.type)),ct.format===d0&&6402===sr&&(sr=34041,ct.type!==h0&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ct.type=h0,ar=c.convert(ct.type))),Lr&&xr?t.texStorage2D(3553,1,sr,jn.width,jn.height):t.texImage2D(3553,0,sr,jn.width,jn.height,0,Wr,ar,null);else if(ct.isDataTexture)if(Yt.length>0&&rs){Lr&&xr&&t.texStorage2D(3553,Ts,sr,Yt[0].width,Yt[0].height);for(let ri=0,fs=Yt.length;ri<fs;ri++)Zs=Yt[ri],Lr?t.texSubImage2D(3553,0,0,0,Zs.width,Zs.height,Wr,ar,Zs.data):t.texImage2D(3553,ri,sr,Zs.width,Zs.height,0,Wr,ar,Zs.data);ct.generateMipmaps=!1}else Lr?(xr&&t.texStorage2D(3553,Ts,sr,jn.width,jn.height),t.texSubImage2D(3553,0,0,0,jn.width,jn.height,Wr,ar,jn.data)):t.texImage2D(3553,0,sr,jn.width,jn.height,0,Wr,ar,jn.data);else if(ct.isCompressedTexture){Lr&&xr&&t.texStorage2D(3553,Ts,sr,Yt[0].width,Yt[0].height);for(let ri=0,fs=Yt.length;ri<fs;ri++)Zs=Yt[ri],ct.format!==yu?null!==Wr?Lr?t.compressedTexSubImage2D(3553,ri,0,0,Zs.width,Zs.height,Wr,Zs.data):t.compressedTexImage2D(3553,ri,sr,Zs.width,Zs.height,0,Zs.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Lr?t.texSubImage2D(3553,ri,0,0,Zs.width,Zs.height,Wr,ar,Zs.data):t.texImage2D(3553,ri,sr,Zs.width,Zs.height,0,Wr,ar,Zs.data)}else if(ct.isDataTexture2DArray)Lr?(xr&&t.texStorage3D(35866,Ts,sr,jn.width,jn.height,jn.depth),t.texSubImage3D(35866,0,0,0,0,jn.width,jn.height,jn.depth,Wr,ar,jn.data)):t.texImage3D(35866,0,sr,jn.width,jn.height,jn.depth,0,Wr,ar,jn.data);else if(ct.isDataTexture3D)Lr?(xr&&t.texStorage3D(32879,Ts,sr,jn.width,jn.height,jn.depth),t.texSubImage3D(32879,0,0,0,0,jn.width,jn.height,jn.depth,Wr,ar,jn.data)):t.texImage3D(32879,0,sr,jn.width,jn.height,jn.depth,0,Wr,ar,jn.data);else if(ct.isFramebufferTexture)Lr&&xr?t.texStorage2D(3553,Ts,sr,jn.width,jn.height):t.texImage2D(3553,0,sr,jn.width,jn.height,0,Wr,ar,null);else if(Yt.length>0&&rs){Lr&&xr&&t.texStorage2D(3553,Ts,sr,Yt[0].width,Yt[0].height);for(let ri=0,fs=Yt.length;ri<fs;ri++)Zs=Yt[ri],Lr?t.texSubImage2D(3553,ri,0,0,Wr,ar,Zs):t.texImage2D(3553,ri,sr,Wr,ar,Zs);ct.generateMipmaps=!1}else Lr?(xr&&t.texStorage2D(3553,Ts,sr,jn.width,jn.height),t.texSubImage2D(3553,0,0,0,Wr,ar,jn)):t.texImage2D(3553,0,sr,Wr,ar,jn);$e(ct,rs)&&ht(Zi),Mt.__version=ct.version,ct.onUpdate&&ct.onUpdate(ct)}function ir(Mt,ct,Kn,Zi,Gr){const jn=c.convert(Kn.format,Kn.encoding),rs=c.convert(Kn.type),Wr=vt(Kn.internalFormat,jn,rs,Kn.encoding);r.get(ct).__hasExternalTextures||(32879===Gr||35866===Gr?t.texImage3D(Gr,0,Wr,ct.width,ct.height,ct.depth,0,jn,rs,null):t.texImage2D(Gr,0,Wr,ct.width,ct.height,0,jn,rs,null)),t.bindFramebuffer(36160,Mt),ct.useRenderToTexture?te.framebufferTexture2DMultisampleEXT(36160,Zi,Gr,r.get(Kn).__webglTexture,0,Sr(ct)):n.framebufferTexture2D(36160,Zi,Gr,r.get(Kn).__webglTexture,0),t.bindFramebuffer(36160,null)}function Jr(Mt,ct,Kn){if(n.bindRenderbuffer(36161,Mt),ct.depthBuffer&&!ct.stencilBuffer){let Zi=33189;if(Kn||ct.useRenderToTexture){const Gr=ct.depthTexture;Gr&&Gr.isDepthTexture&&(Gr.type===f_?Zi=36012:1014===Gr.type&&(Zi=33190));const jn=Sr(ct);ct.useRenderToTexture?te.renderbufferStorageMultisampleEXT(36161,jn,Zi,ct.width,ct.height):n.renderbufferStorageMultisample(36161,jn,Zi,ct.width,ct.height)}else n.renderbufferStorage(36161,Zi,ct.width,ct.height);n.framebufferRenderbuffer(36160,36096,36161,Mt)}else if(ct.depthBuffer&&ct.stencilBuffer){const Zi=Sr(ct);Kn&&ct.useRenderbuffer?n.renderbufferStorageMultisample(36161,Zi,35056,ct.width,ct.height):ct.useRenderToTexture?te.renderbufferStorageMultisampleEXT(36161,Zi,35056,ct.width,ct.height):n.renderbufferStorage(36161,34041,ct.width,ct.height),n.framebufferRenderbuffer(36160,33306,36161,Mt)}else{const Zi=!0===ct.isWebGLMultipleRenderTargets?ct.texture[0]:ct.texture,Gr=c.convert(Zi.format,Zi.encoding),jn=c.convert(Zi.type),rs=vt(Zi.internalFormat,Gr,jn,Zi.encoding),Wr=Sr(ct);Kn&&ct.useRenderbuffer?n.renderbufferStorageMultisample(36161,Wr,rs,ct.width,ct.height):ct.useRenderToTexture?te.renderbufferStorageMultisampleEXT(36161,Wr,rs,ct.width,ct.height):n.renderbufferStorage(36161,rs,ct.width,ct.height)}n.bindRenderbuffer(36161,null)}function Ss(Mt){const ct=r.get(Mt),Kn=!0===Mt.isWebGLCubeRenderTarget;if(Mt.depthTexture&&!ct.__autoAllocateDepthBuffer){if(Kn)throw new Error("target.depthTexture not supported in Cube render targets");!function tr(Mt,ct){if(ct&&ct.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,Mt),!ct.depthTexture||!ct.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(ct.depthTexture).__webglTexture||ct.depthTexture.image.width!==ct.width||ct.depthTexture.image.height!==ct.height)&&(ct.depthTexture.image.width=ct.width,ct.depthTexture.image.height=ct.height,ct.depthTexture.needsUpdate=!0),Ut(ct.depthTexture,0);const Zi=r.get(ct.depthTexture).__webglTexture,Gr=Sr(ct);if(ct.depthTexture.format===$v)ct.useRenderToTexture?te.framebufferTexture2DMultisampleEXT(36160,36096,3553,Zi,0,Gr):n.framebufferTexture2D(36160,36096,3553,Zi,0);else{if(ct.depthTexture.format!==d0)throw new Error("Unknown depthTexture format");ct.useRenderToTexture?te.framebufferTexture2DMultisampleEXT(36160,33306,3553,Zi,0,Gr):n.framebufferTexture2D(36160,33306,3553,Zi,0)}}(ct.__webglFramebuffer,Mt)}else if(Kn){ct.__webglDepthbuffer=[];for(let Zi=0;Zi<6;Zi++)t.bindFramebuffer(36160,ct.__webglFramebuffer[Zi]),ct.__webglDepthbuffer[Zi]=n.createRenderbuffer(),Jr(ct.__webglDepthbuffer[Zi],Mt,!1)}else t.bindFramebuffer(36160,ct.__webglFramebuffer),ct.__webglDepthbuffer=n.createRenderbuffer(),Jr(ct.__webglDepthbuffer,Mt,!1);t.bindFramebuffer(36160,null)}function Sr(Mt){return _&&(Mt.useRenderbuffer||Mt.useRenderToTexture)?Math.min(G,Mt.samples):0}function Es(Mt,ct){const Kn=Mt.encoding,Zi=Mt.format,Gr=Mt.type;return!0===Mt.isCompressedTexture||!0===Mt.isVideoTexture||1035===Mt.format||Kn!==p_&&(Kn===hl?!1===_?!0===e.has("EXT_sRGB")&&Zi===yu?(Mt.format=1035,Mt.minFilter=Rl,Mt.generateMipmaps=!1):ct=ny.sRGBToLinear(ct):(Zi!==yu||Gr!==d_)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Kn)),ct}let ks=!1,Ro=!1;this.allocateTextureUnit=function _t(){const Mt=$t;return Mt>=S&&console.warn("THREE.WebGLTextures: Trying to use "+Mt+" texture units while this GPU supports only "+S),$t+=1,Mt},this.resetTextureUnits=function tn(){$t=0},this.setTexture2D=Ut,this.setTexture2DArray=function ln(Mt,ct){const Kn=r.get(Mt);Mt.version>0&&Kn.__version!==Mt.version?Vn(Kn,Mt,ct):(t.activeTexture(33984+ct),t.bindTexture(35866,Kn.__webglTexture))},this.setTexture3D=function Gn(Mt,ct){const Kn=r.get(Mt);Mt.version>0&&Kn.__version!==Mt.version?Vn(Kn,Mt,ct):(t.activeTexture(33984+ct),t.bindTexture(32879,Kn.__webglTexture))},this.setTextureCube=vn,this.rebindTextures=function ds(Mt,ct,Kn){const Zi=r.get(Mt);void 0!==ct&&ir(Zi.__webglFramebuffer,Mt,Mt.texture,36064,3553),void 0!==Kn&&Ss(Mt)},this.setupRenderTarget=function ii(Mt){const ct=Mt.texture,Kn=r.get(Mt),Zi=r.get(ct);Mt.addEventListener("dispose",Xe),!0!==Mt.isWebGLMultipleRenderTargets&&(void 0===Zi.__webglTexture&&(Zi.__webglTexture=n.createTexture()),Zi.__version=ct.version,h.memory.textures++);const Gr=!0===Mt.isWebGLCubeRenderTarget,jn=!0===Mt.isWebGLMultipleRenderTargets,rs=ct.isDataTexture3D||ct.isDataTexture2DArray,Wr=Ge(Mt)||_;if(Gr){Kn.__webglFramebuffer=[];for(let ar=0;ar<6;ar++)Kn.__webglFramebuffer[ar]=n.createFramebuffer()}else if(Kn.__webglFramebuffer=n.createFramebuffer(),jn)if(s.drawBuffers){const ar=Mt.texture;for(let sr=0,Zs=ar.length;sr<Zs;sr++){const Yt=r.get(ar[sr]);void 0===Yt.__webglTexture&&(Yt.__webglTexture=n.createTexture(),h.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(Mt.useRenderbuffer)if(_){Kn.__webglMultisampledFramebuffer=n.createFramebuffer(),Kn.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,Kn.__webglColorRenderbuffer);const ar=c.convert(ct.format,ct.encoding),sr=c.convert(ct.type),Zs=vt(ct.internalFormat,ar,sr,ct.encoding),Yt=Sr(Mt);n.renderbufferStorageMultisample(36161,Yt,Zs,Mt.width,Mt.height),t.bindFramebuffer(36160,Kn.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,Kn.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),Mt.depthBuffer&&(Kn.__webglDepthRenderbuffer=n.createRenderbuffer(),Jr(Kn.__webglDepthRenderbuffer,Mt,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Gr){t.bindTexture(34067,Zi.__webglTexture),fr(34067,ct,Wr);for(let ar=0;ar<6;ar++)ir(Kn.__webglFramebuffer[ar],Mt,ct,36064,34069+ar);$e(ct,Wr)&&ht(34067),t.unbindTexture()}else if(jn){const ar=Mt.texture;for(let sr=0,Zs=ar.length;sr<Zs;sr++){const Yt=ar[sr],Lr=r.get(Yt);t.bindTexture(3553,Lr.__webglTexture),fr(3553,Yt,Wr),ir(Kn.__webglFramebuffer,Mt,Yt,36064+sr,3553),$e(Yt,Wr)&&ht(3553)}t.unbindTexture()}else{let ar=3553;rs&&(_?ar=ct.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(ar,Zi.__webglTexture),fr(ar,ct,Wr),ir(Kn.__webglFramebuffer,Mt,ct,36064,ar),$e(ct,Wr)&&ht(ar),t.unbindTexture()}Mt.depthBuffer&&Ss(Mt)},this.updateRenderTargetMipmap=function Yi(Mt){const ct=Ge(Mt)||_,Kn=!0===Mt.isWebGLMultipleRenderTargets?Mt.texture:[Mt.texture];for(let Zi=0,Gr=Kn.length;Zi<Gr;Zi++){const jn=Kn[Zi];if($e(jn,ct)){const rs=Mt.isWebGLCubeRenderTarget?34067:3553,Wr=r.get(jn).__webglTexture;t.bindTexture(rs,Wr),ht(rs),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Hi(Mt){if(Mt.useRenderbuffer)if(_){const ct=Mt.width,Kn=Mt.height;let Zi=16384;const Gr=[36064],jn=Mt.stencilBuffer?33306:36096;Mt.depthBuffer&&Gr.push(jn),Mt.ignoreDepthForMultisampleCopy||(Mt.depthBuffer&&(Zi|=256),Mt.stencilBuffer&&(Zi|=1024));const rs=r.get(Mt);t.bindFramebuffer(36008,rs.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,rs.__webglFramebuffer),Mt.ignoreDepthForMultisampleCopy&&(n.invalidateFramebuffer(36008,[jn]),n.invalidateFramebuffer(36009,[jn])),n.blitFramebuffer(0,0,ct,Kn,0,0,ct,Kn,Zi,9728),n.invalidateFramebuffer(36008,Gr),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,rs.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=Ss,this.setupFrameBufferTexture=ir,this.safeSetTexture2D=function qa(Mt,ct){Mt&&Mt.isWebGLRenderTarget&&(!1===ks&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),ks=!0),Mt=Mt.texture),Ut(Mt,ct)},this.safeSetTextureCube=function ba(Mt,ct){Mt&&Mt.isWebGLCubeRenderTarget&&(!1===Ro&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Ro=!0),Mt=Mt.texture),vn(Mt,ct)}}function kne(n,e,t){const r=t.isWebGL2;return{convert:function s(c,h=null){let _;if(c===d_)return 5121;if(1017===c)return 32819;if(1018===c)return 32820;if(1010===c)return 5120;if(1011===c)return 5122;if(c===U1)return 5123;if(1013===c)return 5124;if(1014===c)return 5125;if(c===f_)return 5126;if(c===u0)return r?5131:(_=e.get("OES_texture_half_float"),null!==_?_.HALF_FLOAT_OES:null);if(1021===c)return 6406;if(c===yu)return 6408;if(1024===c)return 6409;if(1025===c)return 6410;if(c===$v)return 6402;if(c===d0)return 34041;if(1028===c)return 6403;if(1022===c)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===c)return _=e.get("EXT_sRGB"),null!==_?_.SRGB_ALPHA_EXT:null;if(1029===c)return 36244;if(1030===c)return 33319;if(1031===c)return 33320;if(1033===c)return 36249;if(33776===c||33777===c||33778===c||33779===c)if(h===hl){if(_=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===_)return null;if(33776===c)return _.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===c)return _.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===c)return _.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===c)return _.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(_=e.get("WEBGL_compressed_texture_s3tc"),null===_)return null;if(33776===c)return _.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===c)return _.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===c)return _.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===c)return _.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===c||35841===c||35842===c||35843===c){if(_=e.get("WEBGL_compressed_texture_pvrtc"),null===_)return null;if(35840===c)return _.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===c)return _.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===c)return _.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===c)return _.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===c)return _=e.get("WEBGL_compressed_texture_etc1"),null!==_?_.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===c||37496===c){if(_=e.get("WEBGL_compressed_texture_etc"),null===_)return null;if(37492===c)return h===hl?_.COMPRESSED_SRGB8_ETC2:_.COMPRESSED_RGB8_ETC2;if(37496===c)return h===hl?_.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:_.COMPRESSED_RGBA8_ETC2_EAC}if(37808===c||37809===c||37810===c||37811===c||37812===c||37813===c||37814===c||37815===c||37816===c||37817===c||37818===c||37819===c||37820===c||37821===c){if(_=e.get("WEBGL_compressed_texture_astc"),null===_)return null;if(37808===c)return h===hl?_.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:_.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===c)return h===hl?_.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:_.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===c)return h===hl?_.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:_.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===c)return h===hl?_.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:_.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===c)return h===hl?_.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:_.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===c)return h===hl?_.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:_.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===c)return h===hl?_.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:_.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===c)return h===hl?_.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:_.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===c)return h===hl?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:_.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===c)return h===hl?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:_.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===c)return h===hl?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:_.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===c)return h===hl?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:_.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===c)return h===hl?_.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:_.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===c)return h===hl?_.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:_.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===c){if(_=e.get("EXT_texture_compression_bptc"),null===_)return null;if(36492===c)return h===hl?_.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:_.COMPRESSED_RGBA_BPTC_UNORM_EXT}return c===h0?r?34042:(_=e.get("WEBGL_depth_texture"),null!==_?_.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}Fk.prototype.isMeshDistanceMaterial=!0;class wV extends Bc{constructor(e=[]){super(),this.cameras=e}}wV.prototype.isArrayCamera=!0;class N0 extends ta{constructor(){super(),this.type="Group"}}N0.prototype.isGroup=!0;const Pne={type:"move"};class Ok{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new N0,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new N0,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ot,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ot),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new N0,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ot,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ot),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,r){let s=null,c=null,h=null;const _=this._targetRay,S=this._grip,A=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==_&&(s=t.getPose(e.targetRaySpace,r),null!==s&&(_.matrix.fromArray(s.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),s.linearVelocity?(_.hasLinearVelocity=!0,_.linearVelocity.copy(s.linearVelocity)):_.hasLinearVelocity=!1,s.angularVelocity?(_.hasAngularVelocity=!0,_.angularVelocity.copy(s.angularVelocity)):_.hasAngularVelocity=!1,this.dispatchEvent(Pne))),A&&e.hand){h=!0;for(const ve of e.hand.values()){const Ie=t.getJointPose(ve,r);if(void 0===A.joints[ve.jointName]){const de=new N0;de.matrixAutoUpdate=!1,de.visible=!1,A.joints[ve.jointName]=de,A.add(de)}const ye=A.joints[ve.jointName];null!==Ie&&(ye.matrix.fromArray(Ie.transform.matrix),ye.matrix.decompose(ye.position,ye.rotation,ye.scale),ye.jointRadius=Ie.radius),ye.visible=null!==Ie}const X=A.joints["index-finger-tip"].position.distanceTo(A.joints["thumb-tip"].position),te=.02,ue=.005;A.inputState.pinching&&X>te+ue?(A.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!A.inputState.pinching&&X<=te-ue&&(A.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==S&&e.gripSpace&&(c=t.getPose(e.gripSpace,r),null!==c&&(S.matrix.fromArray(c.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),c.linearVelocity?(S.hasLinearVelocity=!0,S.linearVelocity.copy(c.linearVelocity)):S.hasLinearVelocity=!1,c.angularVelocity?(S.hasAngularVelocity=!0,S.angularVelocity.copy(c.angularVelocity)):S.hasAngularVelocity=!1));return null!==_&&(_.visible=null!==s),null!==S&&(S.visible=null!==c),null!==A&&(A.visible=null!==h),this}}class Nk extends Ec{constructor(e,t,r,s,c,h,_,S,A,O){if((O=void 0!==O?O:$v)!==$v&&O!==d0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&O===$v&&(r=U1),void 0===r&&O===d0&&(r=h0),super(null,s,c,h,_,S,O,r,A),this.image={width:e,height:t},this.magFilter=void 0!==_?_:dc,this.minFilter=void 0!==S?S:dc,this.flipY=!1,this.generateMipmaps=!1}}Nk.prototype.isDepthTexture=!0;class Lne extends ey{constructor(e,t){super();const r=this;let s=null,c=1,h=null,_="local-floor";const S=e.extensions.has("WEBGL_multisampled_render_to_texture");let A=null,O=null,G=null,X=null,te=!1,ue=null;const ve=t.getContextAttributes();let Ie=null,ye=null;const de=[],Ge=new Map,Oe=new Bc;Oe.layers.enable(1),Oe.viewport=new ya;const $e=new Bc;$e.layers.enable(2),$e.viewport=new ya;const ht=[Oe,$e],vt=new wV;vt.layers.enable(1),vt.layers.enable(2);let Nt=null,Cn=null;function hn(vn){const Un=Ge.get(vn.inputSource);Un&&Un.dispatchEvent({type:vn.type,data:vn.inputSource})}function Xe(){Ge.forEach(function(vn,Un){vn.disconnect(Un)}),Ge.clear(),Nt=null,Cn=null,e.setRenderTarget(Ie),X=null,G=null,O=null,s=null,ye=null,Gn.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}function At(vn){const Un=s.inputSources;for(let Ti=0;Ti<de.length;Ti++)Ge.set(Un[Ti],de[Ti]);for(let Ti=0;Ti<vn.removed.length;Ti++){const fr=vn.removed[Ti],qi=Ge.get(fr);qi&&(qi.dispatchEvent({type:"disconnected",data:fr}),Ge.delete(fr))}for(let Ti=0;Ti<vn.added.length;Ti++){const fr=vn.added[Ti],qi=Ge.get(fr);qi&&qi.dispatchEvent({type:"connected",data:fr})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(vn){let Un=de[vn];return void 0===Un&&(Un=new Ok,de[vn]=Un),Un.getTargetRaySpace()},this.getControllerGrip=function(vn){let Un=de[vn];return void 0===Un&&(Un=new Ok,de[vn]=Un),Un.getGripSpace()},this.getHand=function(vn){let Un=de[vn];return void 0===Un&&(Un=new Ok,de[vn]=Un),Un.getHandSpace()},this.setFramebufferScaleFactor=function(vn){c=vn,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(vn){_=vn,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h},this.getBaseLayer=function(){return null!==G?G:X},this.getBinding=function(){return O},this.getFrame=function(){return ue},this.getSession=function(){return s},this.setSession=function(){var vn=(0,pK.Z)(function*(Un){if(s=Un,null!==s){if(Ie=e.getRenderTarget(),s.addEventListener("select",hn),s.addEventListener("selectstart",hn),s.addEventListener("selectend",hn),s.addEventListener("squeeze",hn),s.addEventListener("squeezestart",hn),s.addEventListener("squeezeend",hn),s.addEventListener("end",Xe),s.addEventListener("inputsourceschange",At),!0!==ve.xrCompatible&&(yield t.makeXRCompatible()),void 0===s.renderState.layers||!1===e.capabilities.isWebGL2)X=new XRWebGLLayer(s,t,{antialias:void 0!==s.renderState.layers||ve.antialias,alpha:ve.alpha,depth:ve.depth,stencil:ve.stencil,framebufferScaleFactor:c}),s.updateRenderState({baseLayer:X}),ye=new gd(X.framebufferWidth,X.framebufferHeight,{format:yu,type:d_,encoding:e.outputEncoding});else{te=ve.antialias;let Ti=null,fr=null,qi=null;ve.depth&&(qi=ve.stencil?35056:33190,Ti=ve.stencil?d0:$v,fr=ve.stencil?h0:U1);const Vn={colorFormat:e.outputEncoding===hl?35907:32856,depthFormat:qi,scaleFactor:c};O=new XRWebGLBinding(s,t),G=O.createProjectionLayer(Vn),s.updateRenderState({layers:[G]}),ye=te?new rk(G.textureWidth,G.textureHeight,{format:yu,type:d_,depthTexture:new Nk(G.textureWidth,G.textureHeight,fr,void 0,void 0,void 0,void 0,void 0,void 0,Ti),stencilBuffer:ve.stencil,ignoreDepth:G.ignoreDepthValues,useRenderToTexture:S,encoding:e.outputEncoding}):new gd(G.textureWidth,G.textureHeight,{format:yu,type:d_,depthTexture:new Nk(G.textureWidth,G.textureHeight,fr,void 0,void 0,void 0,void 0,void 0,void 0,Ti),stencilBuffer:ve.stencil,ignoreDepth:G.ignoreDepthValues,encoding:e.outputEncoding})}ye.isXRRenderTarget=!0,this.setFoveation(1),h=yield s.requestReferenceSpace(_),Gn.setContext(s),Gn.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}});return function(Un){return vn.apply(this,arguments)}}();const Zt=new ot,$t=new ot;function _t(vn,Un){null===Un?vn.matrixWorld.copy(vn.matrix):vn.matrixWorld.multiplyMatrices(Un.matrixWorld,vn.matrix),vn.matrixWorldInverse.copy(vn.matrixWorld).invert()}this.updateCamera=function(vn){if(null===s)return;vt.near=$e.near=Oe.near=vn.near,vt.far=$e.far=Oe.far=vn.far,(Nt!==vt.near||Cn!==vt.far)&&(s.updateRenderState({depthNear:vt.near,depthFar:vt.far}),Nt=vt.near,Cn=vt.far);const Un=vn.parent,Ti=vt.cameras;_t(vt,Un);for(let qi=0;qi<Ti.length;qi++)_t(Ti[qi],Un);vt.matrixWorld.decompose(vt.position,vt.quaternion,vt.scale),vn.position.copy(vt.position),vn.quaternion.copy(vt.quaternion),vn.scale.copy(vt.scale),vn.matrix.copy(vt.matrix),vn.matrixWorld.copy(vt.matrixWorld);const fr=vn.children;for(let qi=0,Vn=fr.length;qi<Vn;qi++)fr[qi].updateMatrixWorld(!0);2===Ti.length?function tn(vn,Un,Ti){Zt.setFromMatrixPosition(Un.matrixWorld),$t.setFromMatrixPosition(Ti.matrixWorld);const fr=Zt.distanceTo($t),qi=Un.projectionMatrix.elements,Vn=Ti.projectionMatrix.elements,zo=qi[14]/(qi[10]-1),ir=qi[14]/(qi[10]+1),Jr=(qi[9]+1)/qi[5],tr=(qi[9]-1)/qi[5],Ss=(qi[8]-1)/qi[0],ds=(Vn[8]+1)/Vn[0],ii=zo*Ss,Yi=zo*ds,Hi=fr/(-Ss+ds),Sr=Hi*-Ss;Un.matrixWorld.decompose(vn.position,vn.quaternion,vn.scale),vn.translateX(Sr),vn.translateZ(Hi),vn.matrixWorld.compose(vn.position,vn.quaternion,vn.scale),vn.matrixWorldInverse.copy(vn.matrixWorld).invert();const lr=zo+Hi,Es=ir+Hi;vn.projectionMatrix.makePerspective(ii-Sr,Yi+(fr-Sr),Jr*ir/Es*lr,tr*ir/Es*lr,lr,Es)}(vt,Oe,$e):vt.projectionMatrix.copy(Oe.projectionMatrix)},this.getCamera=function(){return vt},this.getFoveation=function(){return null!==G?G.fixedFoveation:null!==X?X.fixedFoveation:void 0},this.setFoveation=function(vn){null!==G&&(G.fixedFoveation=vn),null!==X&&void 0!==X.fixedFoveation&&(X.fixedFoveation=vn)};let Ut=null;const Gn=new Vz;Gn.setAnimationLoop(function ln(vn,Un){if(A=Un.getViewerPose(h),ue=Un,null!==A){const fr=A.views;null!==X&&(e.setRenderTargetFramebuffer(ye,X.framebuffer),e.setRenderTarget(ye));let qi=!1;fr.length!==vt.cameras.length&&(vt.cameras.length=0,qi=!0);for(let Vn=0;Vn<fr.length;Vn++){const zo=fr[Vn];let ir=null;if(null!==X)ir=X.getViewport(zo);else{const tr=O.getViewSubImage(G,zo);ir=tr.viewport,0===Vn&&(e.setRenderTargetTextures(ye,tr.colorTexture,G.ignoreDepthValues?void 0:tr.depthStencilTexture),e.setRenderTarget(ye))}const Jr=ht[Vn];Jr.matrix.fromArray(zo.transform.matrix),Jr.projectionMatrix.fromArray(zo.projectionMatrix),Jr.viewport.set(ir.x,ir.y,ir.width,ir.height),0===Vn&&vt.matrix.copy(Jr.matrix),!0===qi&&vt.cameras.push(Jr)}}const Ti=s.inputSources;for(let fr=0;fr<de.length;fr++)de[fr].update(Ti[fr],Un,h);Ut&&Ut(vn,Un),ue=null}),this.setAnimationLoop=function(vn){Ut=vn},this.dispose=function(){}}}function Fne(n){function r(ye,de){ye.opacity.value=de.opacity,de.color&&ye.diffuse.value.copy(de.color),de.emissive&&ye.emissive.value.copy(de.emissive).multiplyScalar(de.emissiveIntensity),de.map&&(ye.map.value=de.map),de.alphaMap&&(ye.alphaMap.value=de.alphaMap),de.specularMap&&(ye.specularMap.value=de.specularMap),de.alphaTest>0&&(ye.alphaTest.value=de.alphaTest);const Ge=n.get(de).envMap;let Oe,$e;Ge&&(ye.envMap.value=Ge,ye.flipEnvMap.value=Ge.isCubeTexture&&!1===Ge.isRenderTargetTexture?-1:1,ye.reflectivity.value=de.reflectivity,ye.ior.value=de.ior,ye.refractionRatio.value=de.refractionRatio),de.lightMap&&(ye.lightMap.value=de.lightMap,ye.lightMapIntensity.value=de.lightMapIntensity),de.aoMap&&(ye.aoMap.value=de.aoMap,ye.aoMapIntensity.value=de.aoMapIntensity),de.map?Oe=de.map:de.specularMap?Oe=de.specularMap:de.displacementMap?Oe=de.displacementMap:de.normalMap?Oe=de.normalMap:de.bumpMap?Oe=de.bumpMap:de.roughnessMap?Oe=de.roughnessMap:de.metalnessMap?Oe=de.metalnessMap:de.alphaMap?Oe=de.alphaMap:de.emissiveMap?Oe=de.emissiveMap:de.clearcoatMap?Oe=de.clearcoatMap:de.clearcoatNormalMap?Oe=de.clearcoatNormalMap:de.clearcoatRoughnessMap?Oe=de.clearcoatRoughnessMap:de.specularIntensityMap?Oe=de.specularIntensityMap:de.specularColorMap?Oe=de.specularColorMap:de.transmissionMap?Oe=de.transmissionMap:de.thicknessMap?Oe=de.thicknessMap:de.sheenColorMap?Oe=de.sheenColorMap:de.sheenRoughnessMap&&(Oe=de.sheenRoughnessMap),void 0!==Oe&&(Oe.isWebGLRenderTarget&&(Oe=Oe.texture),!0===Oe.matrixAutoUpdate&&Oe.updateMatrix(),ye.uvTransform.value.copy(Oe.matrix)),de.aoMap?$e=de.aoMap:de.lightMap&&($e=de.lightMap),void 0!==$e&&($e.isWebGLRenderTarget&&($e=$e.texture),!0===$e.matrixAutoUpdate&&$e.updateMatrix(),ye.uv2Transform.value.copy($e.matrix))}function G(ye,de){ye.roughness.value=de.roughness,ye.metalness.value=de.metalness,de.roughnessMap&&(ye.roughnessMap.value=de.roughnessMap),de.metalnessMap&&(ye.metalnessMap.value=de.metalnessMap),de.emissiveMap&&(ye.emissiveMap.value=de.emissiveMap),de.bumpMap&&(ye.bumpMap.value=de.bumpMap,ye.bumpScale.value=de.bumpScale,1===de.side&&(ye.bumpScale.value*=-1)),de.normalMap&&(ye.normalMap.value=de.normalMap,ye.normalScale.value.copy(de.normalScale),1===de.side&&ye.normalScale.value.negate()),de.displacementMap&&(ye.displacementMap.value=de.displacementMap,ye.displacementScale.value=de.displacementScale,ye.displacementBias.value=de.displacementBias),n.get(de).envMap&&(ye.envMapIntensity.value=de.envMapIntensity)}return{refreshFogUniforms:function e(ye,de){ye.fogColor.value.copy(de.color),de.isFog?(ye.fogNear.value=de.near,ye.fogFar.value=de.far):de.isFogExp2&&(ye.fogDensity.value=de.density)},refreshMaterialUniforms:function t(ye,de,Ge,Oe,$e){de.isMeshBasicMaterial?r(ye,de):de.isMeshLambertMaterial?(r(ye,de),function S(ye,de){de.emissiveMap&&(ye.emissiveMap.value=de.emissiveMap)}(ye,de)):de.isMeshToonMaterial?(r(ye,de),function O(ye,de){de.gradientMap&&(ye.gradientMap.value=de.gradientMap),de.emissiveMap&&(ye.emissiveMap.value=de.emissiveMap),de.bumpMap&&(ye.bumpMap.value=de.bumpMap,ye.bumpScale.value=de.bumpScale,1===de.side&&(ye.bumpScale.value*=-1)),de.normalMap&&(ye.normalMap.value=de.normalMap,ye.normalScale.value.copy(de.normalScale),1===de.side&&ye.normalScale.value.negate()),de.displacementMap&&(ye.displacementMap.value=de.displacementMap,ye.displacementScale.value=de.displacementScale,ye.displacementBias.value=de.displacementBias)}(ye,de)):de.isMeshPhongMaterial?(r(ye,de),function A(ye,de){ye.specular.value.copy(de.specular),ye.shininess.value=Math.max(de.shininess,1e-4),de.emissiveMap&&(ye.emissiveMap.value=de.emissiveMap),de.bumpMap&&(ye.bumpMap.value=de.bumpMap,ye.bumpScale.value=de.bumpScale,1===de.side&&(ye.bumpScale.value*=-1)),de.normalMap&&(ye.normalMap.value=de.normalMap,ye.normalScale.value.copy(de.normalScale),1===de.side&&ye.normalScale.value.negate()),de.displacementMap&&(ye.displacementMap.value=de.displacementMap,ye.displacementScale.value=de.displacementScale,ye.displacementBias.value=de.displacementBias)}(ye,de)):de.isMeshStandardMaterial?(r(ye,de),de.isMeshPhysicalMaterial?function X(ye,de,Ge){G(ye,de),ye.ior.value=de.ior,de.sheen>0&&(ye.sheenColor.value.copy(de.sheenColor).multiplyScalar(de.sheen),ye.sheenRoughness.value=de.sheenRoughness,de.sheenColorMap&&(ye.sheenColorMap.value=de.sheenColorMap),de.sheenRoughnessMap&&(ye.sheenRoughnessMap.value=de.sheenRoughnessMap)),de.clearcoat>0&&(ye.clearcoat.value=de.clearcoat,ye.clearcoatRoughness.value=de.clearcoatRoughness,de.clearcoatMap&&(ye.clearcoatMap.value=de.clearcoatMap),de.clearcoatRoughnessMap&&(ye.clearcoatRoughnessMap.value=de.clearcoatRoughnessMap),de.clearcoatNormalMap&&(ye.clearcoatNormalScale.value.copy(de.clearcoatNormalScale),ye.clearcoatNormalMap.value=de.clearcoatNormalMap,1===de.side&&ye.clearcoatNormalScale.value.negate())),de.transmission>0&&(ye.transmission.value=de.transmission,ye.transmissionSamplerMap.value=Ge.texture,ye.transmissionSamplerSize.value.set(Ge.width,Ge.height),de.transmissionMap&&(ye.transmissionMap.value=de.transmissionMap),ye.thickness.value=de.thickness,de.thicknessMap&&(ye.thicknessMap.value=de.thicknessMap),ye.attenuationDistance.value=de.attenuationDistance,ye.attenuationColor.value.copy(de.attenuationColor)),ye.specularIntensity.value=de.specularIntensity,ye.specularColor.value.copy(de.specularColor),de.specularIntensityMap&&(ye.specularIntensityMap.value=de.specularIntensityMap),de.specularColorMap&&(ye.specularColorMap.value=de.specularColorMap)}(ye,de,$e):G(ye,de)):de.isMeshMatcapMaterial?(r(ye,de),function te(ye,de){de.matcap&&(ye.matcap.value=de.matcap),de.bumpMap&&(ye.bumpMap.value=de.bumpMap,ye.bumpScale.value=de.bumpScale,1===de.side&&(ye.bumpScale.value*=-1)),de.normalMap&&(ye.normalMap.value=de.normalMap,ye.normalScale.value.copy(de.normalScale),1===de.side&&ye.normalScale.value.negate()),de.displacementMap&&(ye.displacementMap.value=de.displacementMap,ye.displacementScale.value=de.displacementScale,ye.displacementBias.value=de.displacementBias)}(ye,de)):de.isMeshDepthMaterial?(r(ye,de),function ue(ye,de){de.displacementMap&&(ye.displacementMap.value=de.displacementMap,ye.displacementScale.value=de.displacementScale,ye.displacementBias.value=de.displacementBias)}(ye,de)):de.isMeshDistanceMaterial?(r(ye,de),function ve(ye,de){de.displacementMap&&(ye.displacementMap.value=de.displacementMap,ye.displacementScale.value=de.displacementScale,ye.displacementBias.value=de.displacementBias),ye.referencePosition.value.copy(de.referencePosition),ye.nearDistance.value=de.nearDistance,ye.farDistance.value=de.farDistance}(ye,de)):de.isMeshNormalMaterial?(r(ye,de),function Ie(ye,de){de.bumpMap&&(ye.bumpMap.value=de.bumpMap,ye.bumpScale.value=de.bumpScale,1===de.side&&(ye.bumpScale.value*=-1)),de.normalMap&&(ye.normalMap.value=de.normalMap,ye.normalScale.value.copy(de.normalScale),1===de.side&&ye.normalScale.value.negate()),de.displacementMap&&(ye.displacementMap.value=de.displacementMap,ye.displacementScale.value=de.displacementScale,ye.displacementBias.value=de.displacementBias)}(ye,de)):de.isLineBasicMaterial?(function s(ye,de){ye.diffuse.value.copy(de.color),ye.opacity.value=de.opacity}(ye,de),de.isLineDashedMaterial&&function c(ye,de){ye.dashSize.value=de.dashSize,ye.totalSize.value=de.dashSize+de.gapSize,ye.scale.value=de.scale}(ye,de)):de.isPointsMaterial?function h(ye,de,Ge,Oe){let $e;ye.diffuse.value.copy(de.color),ye.opacity.value=de.opacity,ye.size.value=de.size*Ge,ye.scale.value=.5*Oe,de.map&&(ye.map.value=de.map),de.alphaMap&&(ye.alphaMap.value=de.alphaMap),de.alphaTest>0&&(ye.alphaTest.value=de.alphaTest),de.map?$e=de.map:de.alphaMap&&($e=de.alphaMap),void 0!==$e&&(!0===$e.matrixAutoUpdate&&$e.updateMatrix(),ye.uvTransform.value.copy($e.matrix))}(ye,de,Ge,Oe):de.isSpriteMaterial?function _(ye,de){let Ge;ye.diffuse.value.copy(de.color),ye.opacity.value=de.opacity,ye.rotation.value=de.rotation,de.map&&(ye.map.value=de.map),de.alphaMap&&(ye.alphaMap.value=de.alphaMap),de.alphaTest>0&&(ye.alphaTest.value=de.alphaTest),de.map?Ge=de.map:de.alphaMap&&(Ge=de.alphaMap),void 0!==Ge&&(!0===Ge.matrixAutoUpdate&&Ge.updateMatrix(),ye.uvTransform.value.copy(Ge.matrix))}(ye,de):de.isShadowMaterial?(ye.color.value.copy(de.color),ye.opacity.value=de.opacity):de.isShaderMaterial&&(de.uniformsNeedUpdate=!1)}}}function ca(n={}){const e=void 0!==n.canvas?n.canvas:function One(){const n=Z1("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,r=void 0!==n.alpha&&n.alpha,s=void 0===n.depth||n.depth,c=void 0===n.stencil||n.stencil,h=void 0!==n.antialias&&n.antialias,_=void 0===n.premultipliedAlpha||n.premultipliedAlpha,S=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,A=void 0!==n.powerPreference?n.powerPreference:"default",O=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let G=null,X=null;const te=[],ue=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=p_,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const ve=this;let Ie=!1,ye=0,de=0,Ge=null,Oe=-1,$e=null;const ht=new ya,vt=new ya;let Nt=null,Cn=e.width,hn=e.height,Xe=1,At=null,Zt=null;const $t=new ya(0,0,Cn,hn),tn=new ya(0,0,Cn,hn);let _t=!1;const Ut=new uT;let ln=!1,Gn=!1,vn=null;const Un=new Pr,Ti=new ot,fr={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function qi(){return null===Ge?Xe:1}let ir,Jr,tr,Ss,ds,ii,Yi,Hi,Sr,lr,Es,ks,Ro,qa,ba,Mt,ct,Kn,Zi,Gr,jn,rs,Wr,Vn=t;function zo(pt,yn){for(let Nn=0;Nn<pt.length;Nn++){const ai=e.getContext(pt[Nn],yn);if(null!==ai)return ai}return null}try{const pt={alpha:!0,depth:s,stencil:c,antialias:h,premultipliedAlpha:_,preserveDrawingBuffer:S,powerPreference:A,failIfMajorPerformanceCaveat:O};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r137"),e.addEventListener("webglcontextlost",Zs,!1),e.addEventListener("webglcontextrestored",Yt,!1),null===Vn){const yn=["webgl2","webgl","experimental-webgl"];if(!0===ve.isWebGL1Renderer&&yn.shift(),Vn=zo(yn,pt),null===Vn)throw zo(yn)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Vn.getShaderPrecisionFormat&&(Vn.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(pt){throw console.error("THREE.WebGLRenderer: "+pt.message),pt}function ar(){ir=new tte(Vn),Jr=new Xee(Vn,ir,n),ir.init(Jr),rs=new kne(Vn,ir,Jr),tr=new Ine(Vn,ir,Jr),Ss=new rte(Vn),ds=new yne,ii=new Rne(Vn,ir,tr,ds,Jr,rs,Ss),Yi=new Kee(ve),Hi=new ete(ve),Sr=new KQ(Vn,Jr),Wr=new Zee(Vn,ir,Sr,Jr),lr=new nte(Vn,Sr,Ss,Wr),Es=new lte(Vn,lr,Sr,Ss),Zi=new ate(Vn,Jr,ii),Mt=new Jee(ds),ks=new vne(ve,Yi,Hi,ir,Jr,Wr,Mt),Ro=new Fne(ds),qa=new xne,ba=new Tne(ir,Jr),Kn=new jee(ve,Yi,tr,Es,r,_),ct=new xV(ve,Es,Jr),Gr=new Yee(Vn,ir,Ss,Jr),jn=new ite(Vn,ir,Ss,Jr),Ss.programs=ks.programs,ve.capabilities=Jr,ve.extensions=ir,ve.properties=ds,ve.renderLists=qa,ve.shadowMap=ct,ve.state=tr,ve.info=Ss}ar();const sr=new Lne(ve,Vn);function Zs(pt){pt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Ie=!0}function Yt(){console.log("THREE.WebGLRenderer: Context Restored."),Ie=!1;const pt=Ss.autoReset,yn=ct.enabled,Nn=ct.autoUpdate,Rn=ct.needsUpdate,ai=ct.type;ar(),Ss.autoReset=pt,ct.enabled=yn,ct.autoUpdate=Nn,ct.needsUpdate=Rn,ct.type=ai}function Lr(pt){const yn=pt.target;yn.removeEventListener("dispose",Lr),function xr(pt){(function Ts(pt){const yn=ds.get(pt).programs;void 0!==yn&&(yn.forEach(function(Nn){ks.releaseProgram(Nn)}),pt.isShaderMaterial&&ks.releaseShaderCache(pt))})(pt),ds.remove(pt)}(yn)}this.xr=sr,this.getContext=function(){return Vn},this.getContextAttributes=function(){return Vn.getContextAttributes()},this.forceContextLoss=function(){const pt=ir.get("WEBGL_lose_context");pt&&pt.loseContext()},this.forceContextRestore=function(){const pt=ir.get("WEBGL_lose_context");pt&&pt.restoreContext()},this.getPixelRatio=function(){return Xe},this.setPixelRatio=function(pt){void 0!==pt&&(Xe=pt,this.setSize(Cn,hn,!1))},this.getSize=function(pt){return pt.set(Cn,hn)},this.setSize=function(pt,yn,Nn){sr.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Cn=pt,hn=yn,e.width=Math.floor(pt*Xe),e.height=Math.floor(yn*Xe),!1!==Nn&&(e.style.width=pt+"px",e.style.height=yn+"px"),this.setViewport(0,0,pt,yn))},this.getDrawingBufferSize=function(pt){return pt.set(Cn*Xe,hn*Xe).floor()},this.setDrawingBufferSize=function(pt,yn,Nn){Cn=pt,hn=yn,Xe=Nn,e.width=Math.floor(pt*Nn),e.height=Math.floor(yn*Nn),this.setViewport(0,0,pt,yn)},this.getCurrentViewport=function(pt){return pt.copy(ht)},this.getViewport=function(pt){return pt.copy($t)},this.setViewport=function(pt,yn,Nn,Rn){pt.isVector4?$t.set(pt.x,pt.y,pt.z,pt.w):$t.set(pt,yn,Nn,Rn),tr.viewport(ht.copy($t).multiplyScalar(Xe).floor())},this.getScissor=function(pt){return pt.copy(tn)},this.setScissor=function(pt,yn,Nn,Rn){pt.isVector4?tn.set(pt.x,pt.y,pt.z,pt.w):tn.set(pt,yn,Nn,Rn),tr.scissor(vt.copy(tn).multiplyScalar(Xe).floor())},this.getScissorTest=function(){return _t},this.setScissorTest=function(pt){tr.setScissorTest(_t=pt)},this.setOpaqueSort=function(pt){At=pt},this.setTransparentSort=function(pt){Zt=pt},this.getClearColor=function(pt){return pt.copy(Kn.getClearColor())},this.setClearColor=function(){Kn.setClearColor.apply(Kn,arguments)},this.getClearAlpha=function(){return Kn.getClearAlpha()},this.setClearAlpha=function(){Kn.setClearAlpha.apply(Kn,arguments)},this.clear=function(pt,yn,Nn){let Rn=0;(void 0===pt||pt)&&(Rn|=16384),(void 0===yn||yn)&&(Rn|=256),(void 0===Nn||Nn)&&(Rn|=1024),Vn.clear(Rn)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Zs,!1),e.removeEventListener("webglcontextrestored",Yt,!1),qa.dispose(),ba.dispose(),ds.dispose(),Yi.dispose(),Hi.dispose(),Es.dispose(),Wr.dispose(),ks.dispose(),sr.dispose(),sr.removeEventListener("sessionstart",Co),sr.removeEventListener("sessionend",Cl),vn&&(vn.dispose(),vn=null),Oh.stop()},this.renderBufferDirect=function(pt,yn,Nn,Rn,ai,Us){null===yn&&(yn=fr);const Ys=ai.isMesh&&ai.matrixWorld.determinant()<0,co=function Tre(pt,yn,Nn,Rn,ai){!0!==yn.isScene&&(yn=fr),ii.resetTextureUnits();const Us=yn.fog,co=null===Ge?ve.outputEncoding:!0===Ge.isXRRenderTarget?Ge.texture.encoding:p_,io=(Rn.isMeshStandardMaterial?Hi:Yi).get(Rn.envMap||(Rn.isMeshStandardMaterial?yn.environment:null)),ua=!0===Rn.vertexColors&&!!Nn.attributes.color&&4===Nn.attributes.color.itemSize,Vo=!!Rn.normalMap&&!!Nn.attributes.tangent,Ko=!!Nn.morphAttributes.position,Ll=!!Nn.morphAttributes.normal,gy=Nn.morphAttributes.position?Nn.morphAttributes.position.length:0,K0=Rn.toneMapped?ve.toneMapping:0,na=ds.get(Rn),yp=X.state.lights;!0!==ln||!0!==Gn&&pt===$e||Mt.setState(Rn,pt,pt===$e&&Rn.id===Oe);let Dc=!1;Rn.version===na.__version?(na.needsLights&&na.lightsStateVersion!==yp.state.version||na.outputEncoding!==co||ai.isInstancedMesh&&!1===na.instancing||!ai.isInstancedMesh&&!0===na.instancing||ai.isSkinnedMesh&&!1===na.skinning||!ai.isSkinnedMesh&&!0===na.skinning||na.envMap!==io||Rn.fog&&na.fog!==Us||void 0!==na.numClippingPlanes&&(na.numClippingPlanes!==Mt.numPlanes||na.numIntersection!==Mt.numIntersection)||na.vertexAlphas!==ua||na.vertexTangents!==Vo||na.morphTargets!==Ko||na.morphNormals!==Ll||na.toneMapping!==K0||!0===Jr.isWebGL2&&na.morphTargetsCount!==gy)&&(Dc=!0):(Dc=!0,na.__version=Rn.version);let bp=na.currentProgram;!0===Dc&&(bp=mP(Rn,yn,ai));let oD=!1,xp=!1,Ym=!1;const Mu=bp.getUniforms(),_M=na.uniforms;if(tr.useProgram(bp.program)&&(oD=!0,xp=!0,Ym=!0),Rn.id!==Oe&&(Oe=Rn.id,xp=!0),oD||$e!==pt){if(Mu.setValue(Vn,"projectionMatrix",pt.projectionMatrix),Jr.logarithmicDepthBuffer&&Mu.setValue(Vn,"logDepthBufFC",2/(Math.log(pt.far+1)/Math.LN2)),$e!==pt&&($e=pt,xp=!0,Ym=!0),Rn.isShaderMaterial||Rn.isMeshPhongMaterial||Rn.isMeshToonMaterial||Rn.isMeshStandardMaterial||Rn.envMap){const mf=Mu.map.cameraPosition;void 0!==mf&&mf.setValue(Vn,Ti.setFromMatrixPosition(pt.matrixWorld))}(Rn.isMeshPhongMaterial||Rn.isMeshToonMaterial||Rn.isMeshLambertMaterial||Rn.isMeshBasicMaterial||Rn.isMeshStandardMaterial||Rn.isShaderMaterial)&&Mu.setValue(Vn,"isOrthographic",!0===pt.isOrthographicCamera),(Rn.isMeshPhongMaterial||Rn.isMeshToonMaterial||Rn.isMeshLambertMaterial||Rn.isMeshBasicMaterial||Rn.isMeshStandardMaterial||Rn.isShaderMaterial||Rn.isShadowMaterial||ai.isSkinnedMesh)&&Mu.setValue(Vn,"viewMatrix",pt.matrixWorldInverse)}if(ai.isSkinnedMesh){Mu.setOptional(Vn,ai,"bindMatrix"),Mu.setOptional(Vn,ai,"bindMatrixInverse");const mf=ai.skeleton;mf&&(Jr.floatVertexTextures?(null===mf.boneTexture&&mf.computeBoneTexture(),Mu.setValue(Vn,"boneTexture",mf.boneTexture,ii),Mu.setValue(Vn,"boneTextureSize",mf.boneTextureSize)):Mu.setOptional(Vn,mf,"boneMatrices"))}return!!Nn&&(void 0!==Nn.morphAttributes.position||void 0!==Nn.morphAttributes.normal)&&Zi.update(ai,Nn,Rn,bp),(xp||na.receiveShadow!==ai.receiveShadow)&&(na.receiveShadow=ai.receiveShadow,Mu.setValue(Vn,"receiveShadow",ai.receiveShadow)),xp&&(Mu.setValue(Vn,"toneMappingExposure",ve.toneMappingExposure),na.needsLights&&function Dre(pt,yn){pt.ambientLightColor.needsUpdate=yn,pt.lightProbe.needsUpdate=yn,pt.directionalLights.needsUpdate=yn,pt.directionalLightShadows.needsUpdate=yn,pt.pointLights.needsUpdate=yn,pt.pointLightShadows.needsUpdate=yn,pt.spotLights.needsUpdate=yn,pt.spotLightShadows.needsUpdate=yn,pt.rectAreaLights.needsUpdate=yn,pt.hemisphereLights.needsUpdate=yn}(_M,Ym),Us&&Rn.fog&&Ro.refreshFogUniforms(_M,Us),Ro.refreshMaterialUniforms(_M,Rn,Xe,hn,vn),C_.upload(Vn,na.uniformsList,_M,ii)),Rn.isShaderMaterial&&!0===Rn.uniformsNeedUpdate&&(C_.upload(Vn,na.uniformsList,_M,ii),Rn.uniformsNeedUpdate=!1),Rn.isSpriteMaterial&&Mu.setValue(Vn,"center",ai.center),Mu.setValue(Vn,"modelViewMatrix",ai.modelViewMatrix),Mu.setValue(Vn,"normalMatrix",ai.normalMatrix),Mu.setValue(Vn,"modelMatrix",ai.matrixWorld),bp}(pt,yn,Nn,Rn,ai);tr.setMaterial(Rn,Ys);let io=Nn.index;const ua=Nn.attributes.position;if(null===io){if(void 0===ua||0===ua.count)return}else if(0===io.count)return;let Vo=1;!0===Rn.wireframe&&(io=lr.getWireframeAttribute(Nn),Vo=2),Wr.setup(ai,Rn,co,Nn,io);let Ko,Ll=Gr;null!==io&&(Ko=Sr.get(io),Ll=jn,Ll.setIndex(Ko));const gy=null!==io?io.count:ua.count,K0=Nn.drawRange.start*Vo,na=Nn.drawRange.count*Vo,yp=null!==Us?Us.start*Vo:0,Dc=null!==Us?Us.count*Vo:1/0,bp=Math.max(K0,yp),oD=Math.min(gy,K0+na,yp+Dc)-1,xp=Math.max(0,oD-bp+1);if(0!==xp){if(ai.isMesh)!0===Rn.wireframe?(tr.setLineWidth(Rn.wireframeLinewidth*qi()),Ll.setMode(1)):Ll.setMode(4);else if(ai.isLine){let Ym=Rn.linewidth;void 0===Ym&&(Ym=1),tr.setLineWidth(Ym*qi()),Ll.setMode(ai.isLineSegments?1:ai.isLineLoop?2:3)}else ai.isPoints?Ll.setMode(0):ai.isSprite&&Ll.setMode(4);if(ai.isInstancedMesh)Ll.renderInstances(bp,xp,ai.count);else if(Nn.isInstancedBufferGeometry){const Ym=Math.min(Nn.instanceCount,Nn._maxInstanceCount);Ll.renderInstances(bp,xp,Ym)}else Ll.render(bp,xp)}},this.compile=function(pt,yn){X=ba.get(pt),X.init(),ue.push(X),pt.traverseVisible(function(Nn){Nn.isLight&&Nn.layers.test(yn.layers)&&(X.pushLight(Nn),Nn.castShadow&&X.pushShadow(Nn))}),X.setupLights(ve.physicallyCorrectLights),pt.traverse(function(Nn){const Rn=Nn.material;if(Rn)if(Array.isArray(Rn))for(let ai=0;ai<Rn.length;ai++)mP(Rn[ai],pt,Nn);else mP(Rn,pt,Nn)}),ue.pop(),X=null};let ri=null;function Co(){Oh.stop()}function Cl(){Oh.start()}const Oh=new Vz;function Pl(pt,yn,Nn,Rn){if(!1===pt.visible)return;if(pt.layers.test(yn.layers))if(pt.isGroup)Nn=pt.renderOrder;else if(pt.isLOD)!0===pt.autoUpdate&&pt.update(yn);else if(pt.isLight)X.pushLight(pt),pt.castShadow&&X.pushShadow(pt);else if(pt.isSprite){if(!pt.frustumCulled||Ut.intersectsSprite(pt)){Rn&&Ti.setFromMatrixPosition(pt.matrixWorld).applyMatrix4(Un);const Ys=Es.update(pt),co=pt.material;co.visible&&G.push(pt,Ys,co,Nn,Ti.z,null)}}else if((pt.isMesh||pt.isLine||pt.isPoints)&&(pt.isSkinnedMesh&&pt.skeleton.frame!==Ss.render.frame&&(pt.skeleton.update(),pt.skeleton.frame=Ss.render.frame),!pt.frustumCulled||Ut.intersectsObject(pt))){Rn&&Ti.setFromMatrixPosition(pt.matrixWorld).applyMatrix4(Un);const Ys=Es.update(pt),co=pt.material;if(Array.isArray(co)){const io=Ys.groups;for(let ua=0,Vo=io.length;ua<Vo;ua++){const Ko=io[ua],Ll=co[Ko.materialIndex];Ll&&Ll.visible&&G.push(pt,Ys,Ll,Nn,Ti.z,Ko)}}else co.visible&&G.push(pt,Ys,co,Nn,Ti.z,null)}const Us=pt.children;for(let Ys=0,co=Us.length;Ys<co;Ys++)Pl(Us[Ys],yn,Nn,Rn)}function vp(pt,yn,Nn,Rn){const ai=pt.opaque,Us=pt.transmissive,Ys=pt.transparent;X.setupLightsView(Nn),Us.length>0&&function Zm(pt,yn,Nn){null===vn&&(vn=new(!0===h&&!0===Jr.isWebGL2?rk:gd)(1024,1024,{generateMipmaps:!0,type:null!==rs.convert(u0)?u0:d_,minFilter:1008,magFilter:dc,wrapS:vu,wrapT:vu,useRenderToTexture:ir.has("WEBGL_multisampled_render_to_texture")}));const Rn=ve.getRenderTarget();ve.setRenderTarget(vn),ve.clear();const ai=ve.toneMapping;ve.toneMapping=0,sD(pt,yn,Nn),ve.toneMapping=ai,ii.updateMultisampleRenderTarget(vn),ii.updateRenderTargetMipmap(vn),ve.setRenderTarget(Rn)}(ai,yn,Nn),Rn&&tr.viewport(ht.copy(Rn)),ai.length>0&&sD(ai,yn,Nn),Us.length>0&&sD(Us,yn,Nn),Ys.length>0&&sD(Ys,yn,Nn)}function sD(pt,yn,Nn){const Rn=!0===yn.isScene?yn.overrideMaterial:null;for(let ai=0,Us=pt.length;ai<Us;ai++){const Ys=pt[ai],co=Ys.object,io=Ys.geometry,ua=null===Rn?Ys.material:Rn,Vo=Ys.group;co.layers.test(Nn.layers)&&Ere(co,yn,Nn,io,ua,Vo)}}function Ere(pt,yn,Nn,Rn,ai,Us){pt.onBeforeRender(ve,yn,Nn,Rn,ai,Us),pt.modelViewMatrix.multiplyMatrices(Nn.matrixWorldInverse,pt.matrixWorld),pt.normalMatrix.getNormalMatrix(pt.modelViewMatrix),ai.onBeforeRender(ve,yn,Nn,Rn,pt,Us),!0===ai.transparent&&2===ai.side?(ai.side=1,ai.needsUpdate=!0,ve.renderBufferDirect(Nn,yn,Rn,ai,pt,Us),ai.side=0,ai.needsUpdate=!0,ve.renderBufferDirect(Nn,yn,Rn,ai,pt,Us),ai.side=2):ve.renderBufferDirect(Nn,yn,Rn,ai,pt,Us),pt.onAfterRender(ve,yn,Nn,Rn,ai,Us)}function mP(pt,yn,Nn){!0!==yn.isScene&&(yn=fr);const Rn=ds.get(pt),ai=X.state.lights,Ys=ai.state.version,co=ks.getParameters(pt,ai.state,X.state.shadowsArray,yn,Nn),io=ks.getProgramCacheKey(co);let ua=Rn.programs;Rn.environment=pt.isMeshStandardMaterial?yn.environment:null,Rn.fog=yn.fog,Rn.envMap=(pt.isMeshStandardMaterial?Hi:Yi).get(pt.envMap||Rn.environment),void 0===ua&&(pt.addEventListener("dispose",Lr),ua=new Map,Rn.programs=ua);let Vo=ua.get(io);if(void 0!==Vo){if(Rn.currentProgram===Vo&&Rn.lightsStateVersion===Ys)return $4(pt,co),Vo}else co.uniforms=ks.getUniforms(pt),pt.onBuild(Nn,co,ve),pt.onBeforeCompile(co,ve),Vo=ks.acquireProgram(co,io),ua.set(io,Vo),Rn.uniforms=co.uniforms;const Ko=Rn.uniforms;(!pt.isShaderMaterial&&!pt.isRawShaderMaterial||!0===pt.clipping)&&(Ko.clippingPlanes=Mt.uniform),$4(pt,co),Rn.needsLights=function Are(pt){return pt.isMeshLambertMaterial||pt.isMeshToonMaterial||pt.isMeshPhongMaterial||pt.isMeshStandardMaterial||pt.isShadowMaterial||pt.isShaderMaterial&&!0===pt.lights}(pt),Rn.lightsStateVersion=Ys,Rn.needsLights&&(Ko.ambientLightColor.value=ai.state.ambient,Ko.lightProbe.value=ai.state.probe,Ko.directionalLights.value=ai.state.directional,Ko.directionalLightShadows.value=ai.state.directionalShadow,Ko.spotLights.value=ai.state.spot,Ko.spotLightShadows.value=ai.state.spotShadow,Ko.rectAreaLights.value=ai.state.rectArea,Ko.ltc_1.value=ai.state.rectAreaLTC1,Ko.ltc_2.value=ai.state.rectAreaLTC2,Ko.pointLights.value=ai.state.point,Ko.pointLightShadows.value=ai.state.pointShadow,Ko.hemisphereLights.value=ai.state.hemi,Ko.directionalShadowMap.value=ai.state.directionalShadowMap,Ko.directionalShadowMatrix.value=ai.state.directionalShadowMatrix,Ko.spotShadowMap.value=ai.state.spotShadowMap,Ko.spotShadowMatrix.value=ai.state.spotShadowMatrix,Ko.pointShadowMap.value=ai.state.pointShadowMap,Ko.pointShadowMatrix.value=ai.state.pointShadowMatrix);const Ll=Vo.getUniforms(),gy=C_.seqWithValue(Ll.seq,Ko);return Rn.currentProgram=Vo,Rn.uniformsList=gy,Vo}function $4(pt,yn){const Nn=ds.get(pt);Nn.outputEncoding=yn.outputEncoding,Nn.instancing=yn.instancing,Nn.skinning=yn.skinning,Nn.morphTargets=yn.morphTargets,Nn.morphNormals=yn.morphNormals,Nn.morphTargetsCount=yn.morphTargetsCount,Nn.numClippingPlanes=yn.numClippingPlanes,Nn.numIntersection=yn.numClipIntersection,Nn.vertexAlphas=yn.vertexAlphas,Nn.vertexTangents=yn.vertexTangents,Nn.toneMapping=yn.toneMapping}Oh.setAnimationLoop(function fs(pt){ri&&ri(pt)}),"undefined"!=typeof window&&Oh.setContext(window),this.setAnimationLoop=function(pt){ri=pt,sr.setAnimationLoop(pt),null===pt?Oh.stop():Oh.start()},sr.addEventListener("sessionstart",Co),sr.addEventListener("sessionend",Cl),this.render=function(pt,yn){if(void 0===yn||!0===yn.isCamera){if(!0!==Ie){if(!0===pt.autoUpdate&&pt.updateMatrixWorld(),null===yn.parent&&yn.updateMatrixWorld(),!0===sr.enabled&&!0===sr.isPresenting&&(!0===sr.cameraAutoUpdate&&sr.updateCamera(yn),yn=sr.getCamera()),!0===pt.isScene&&pt.onBeforeRender(ve,pt,yn,Ge),X=ba.get(pt,ue.length),X.init(),ue.push(X),Un.multiplyMatrices(yn.projectionMatrix,yn.matrixWorldInverse),Ut.setFromProjectionMatrix(Un),Gn=this.localClippingEnabled,ln=Mt.init(this.clippingPlanes,Gn,yn),G=qa.get(pt,te.length),G.init(),te.push(G),Pl(pt,yn,0,ve.sortObjects),G.finish(),!0===ve.sortObjects&&G.sort(At,Zt),!0===ln&&Mt.beginShadows(),ct.render(X.state.shadowsArray,pt,yn),!0===ln&&Mt.endShadows(),!0===this.info.autoReset&&this.info.reset(),Kn.render(G,pt),X.setupLights(ve.physicallyCorrectLights),yn.isArrayCamera){const Rn=yn.cameras;for(let ai=0,Us=Rn.length;ai<Us;ai++){const Ys=Rn[ai];vp(G,pt,Ys,Ys.viewport)}}else vp(G,pt,yn);null!==Ge&&(ii.updateMultisampleRenderTarget(Ge),ii.updateRenderTargetMipmap(Ge)),!0===pt.isScene&&pt.onAfterRender(ve,pt,yn),tr.buffers.depth.setTest(!0),tr.buffers.depth.setMask(!0),tr.buffers.color.setMask(!0),tr.setPolygonOffset(!1),Wr.resetDefaultState(),Oe=-1,$e=null,ue.pop(),X=ue.length>0?ue[ue.length-1]:null,te.pop(),G=te.length>0?te[te.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return ye},this.getActiveMipmapLevel=function(){return de},this.getRenderTarget=function(){return Ge},this.setRenderTargetTextures=function(pt,yn,Nn){ds.get(pt.texture).__webglTexture=yn,ds.get(pt.depthTexture).__webglTexture=Nn;const Rn=ds.get(pt);Rn.__hasExternalTextures=!0,Rn.__hasExternalTextures&&(Rn.__autoAllocateDepthBuffer=void 0===Nn,Rn.__autoAllocateDepthBuffer||pt.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),pt.useRenderToTexture=!1,pt.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(pt,yn){const Nn=ds.get(pt);Nn.__webglFramebuffer=yn,Nn.__useDefaultFramebuffer=void 0===yn},this.setRenderTarget=function(pt,yn=0,Nn=0){Ge=pt,ye=yn,de=Nn;let Rn=!0;if(pt){const io=ds.get(pt);void 0!==io.__useDefaultFramebuffer?(tr.bindFramebuffer(36160,null),Rn=!1):void 0===io.__webglFramebuffer?ii.setupRenderTarget(pt):io.__hasExternalTextures&&ii.rebindTextures(pt,ds.get(pt.texture).__webglTexture,ds.get(pt.depthTexture).__webglTexture)}let ai=null,Us=!1,Ys=!1;if(pt){const io=pt.texture;(io.isDataTexture3D||io.isDataTexture2DArray)&&(Ys=!0);const ua=ds.get(pt).__webglFramebuffer;pt.isWebGLCubeRenderTarget?(ai=ua[yn],Us=!0):ai=pt.useRenderbuffer?ds.get(pt).__webglMultisampledFramebuffer:ua,ht.copy(pt.viewport),vt.copy(pt.scissor),Nt=pt.scissorTest}else ht.copy($t).multiplyScalar(Xe).floor(),vt.copy(tn).multiplyScalar(Xe).floor(),Nt=_t;if(tr.bindFramebuffer(36160,ai)&&Jr.drawBuffers&&Rn&&tr.drawBuffers(pt,ai),tr.viewport(ht),tr.scissor(vt),tr.setScissorTest(Nt),Us){const io=ds.get(pt.texture);Vn.framebufferTexture2D(36160,36064,34069+yn,io.__webglTexture,Nn)}else if(Ys){const io=ds.get(pt.texture);Vn.framebufferTextureLayer(36160,36064,io.__webglTexture,Nn||0,yn||0)}Oe=-1},this.readRenderTargetPixels=function(pt,yn,Nn,Rn,ai,Us,Ys){if(!pt||!pt.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let co=ds.get(pt).__webglFramebuffer;if(pt.isWebGLCubeRenderTarget&&void 0!==Ys&&(co=co[Ys]),co){tr.bindFramebuffer(36160,co);try{const io=pt.texture,ua=io.format,Vo=io.type;if(ua!==yu&&rs.convert(ua)!==Vn.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Ko=Vo===u0&&(ir.has("EXT_color_buffer_half_float")||Jr.isWebGL2&&ir.has("EXT_color_buffer_float"));if(!(Vo===d_||rs.convert(Vo)===Vn.getParameter(35738)||Vo===f_&&(Jr.isWebGL2||ir.has("OES_texture_float")||ir.has("WEBGL_color_buffer_float"))||Ko))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===Vn.checkFramebufferStatus(36160)?yn>=0&&yn<=pt.width-Rn&&Nn>=0&&Nn<=pt.height-ai&&Vn.readPixels(yn,Nn,Rn,ai,rs.convert(ua),rs.convert(Vo),Us):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const io=null!==Ge?ds.get(Ge).__webglFramebuffer:null;tr.bindFramebuffer(36160,io)}}},this.copyFramebufferToTexture=function(pt,yn,Nn=0){if(!0!==yn.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const Rn=Math.pow(2,-Nn),ai=Math.floor(yn.image.width*Rn),Us=Math.floor(yn.image.height*Rn);ii.setTexture2D(yn,0),Vn.copyTexSubImage2D(3553,Nn,0,0,pt.x,pt.y,ai,Us),tr.unbindTexture()},this.copyTextureToTexture=function(pt,yn,Nn,Rn=0){const ai=yn.image.width,Us=yn.image.height,Ys=rs.convert(Nn.format),co=rs.convert(Nn.type);ii.setTexture2D(Nn,0),Vn.pixelStorei(37440,Nn.flipY),Vn.pixelStorei(37441,Nn.premultiplyAlpha),Vn.pixelStorei(3317,Nn.unpackAlignment),yn.isDataTexture?Vn.texSubImage2D(3553,Rn,pt.x,pt.y,ai,Us,Ys,co,yn.image.data):yn.isCompressedTexture?Vn.compressedTexSubImage2D(3553,Rn,pt.x,pt.y,yn.mipmaps[0].width,yn.mipmaps[0].height,Ys,yn.mipmaps[0].data):Vn.texSubImage2D(3553,Rn,pt.x,pt.y,Ys,co,yn.image),0===Rn&&Nn.generateMipmaps&&Vn.generateMipmap(3553),tr.unbindTexture()},this.copyTextureToTexture3D=function(pt,yn,Nn,Rn,ai=0){if(ve.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Us=pt.max.x-pt.min.x+1,Ys=pt.max.y-pt.min.y+1,co=pt.max.z-pt.min.z+1,io=rs.convert(Rn.format),ua=rs.convert(Rn.type);let Vo;if(Rn.isDataTexture3D)ii.setTexture3D(Rn,0),Vo=32879;else{if(!Rn.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ii.setTexture2DArray(Rn,0),Vo=35866}Vn.pixelStorei(37440,Rn.flipY),Vn.pixelStorei(37441,Rn.premultiplyAlpha),Vn.pixelStorei(3317,Rn.unpackAlignment);const Ko=Vn.getParameter(3314),Ll=Vn.getParameter(32878),gy=Vn.getParameter(3316),K0=Vn.getParameter(3315),na=Vn.getParameter(32877),yp=Nn.isCompressedTexture?Nn.mipmaps[0]:Nn.image;Vn.pixelStorei(3314,yp.width),Vn.pixelStorei(32878,yp.height),Vn.pixelStorei(3316,pt.min.x),Vn.pixelStorei(3315,pt.min.y),Vn.pixelStorei(32877,pt.min.z),Nn.isDataTexture||Nn.isDataTexture3D?Vn.texSubImage3D(Vo,ai,yn.x,yn.y,yn.z,Us,Ys,co,io,ua,yp.data):Nn.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Vn.compressedTexSubImage3D(Vo,ai,yn.x,yn.y,yn.z,Us,Ys,co,io,yp.data)):Vn.texSubImage3D(Vo,ai,yn.x,yn.y,yn.z,Us,Ys,co,io,ua,yp),Vn.pixelStorei(3314,Ko),Vn.pixelStorei(32878,Ll),Vn.pixelStorei(3316,gy),Vn.pixelStorei(3315,K0),Vn.pixelStorei(32877,na),0===ai&&Rn.generateMipmaps&&Vn.generateMipmap(Vo),tr.unbindTexture()},this.initTexture=function(pt){ii.setTexture2D(pt,0),tr.unbindTexture()},this.resetState=function(){ye=0,de=0,Ge=null,tr.reset(),Wr.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}ca.prototype.isWebGLRenderer=!0,class Nne extends ca{}.prototype.isWebGL1Renderer=!0;class mT{constructor(e,t=25e-5){this.name="",this.color=new er(e),this.density=t}clone(){return new mT(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}mT.prototype.isFogExp2=!0;class gT{constructor(e,t=1,r=1e3){this.name="",this.color=new er(e),this.near=t,this.far=r}clone(){return new gT(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}gT.prototype.isFog=!0;class _T extends ta{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}_T.prototype.isScene=!0;class B0{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=G1,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ph()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let s=0,c=this.stride;s<c;s++)this.array[e+s]=t.array[r+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ph()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ph()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}B0.prototype.isInterleavedBuffer=!0;const Jl=new ot;class uy{constructor(e,t,r,s=!1){this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Jl.x=this.getX(t),Jl.y=this.getY(t),Jl.z=this.getZ(t),Jl.applyMatrix4(e),this.setXYZ(t,Jl.x,Jl.y,Jl.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Jl.x=this.getX(t),Jl.y=this.getY(t),Jl.z=this.getZ(t),Jl.applyNormalMatrix(e),this.setXYZ(t,Jl.x,Jl.y,Jl.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Jl.x=this.getX(t),Jl.y=this.getY(t),Jl.z=this.getZ(t),Jl.transformDirection(e),this.setXYZ(t,Jl.x,Jl.y,Jl.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,s){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=s,this}setXYZW(e,t,r,s,c){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=s,this.data.array[e+3]=c,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let c=0;c<this.itemSize;c++)t.push(this.data.array[s+c])}return new Ra(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new uy(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const s=r*this.data.stride+this.offset;for(let c=0;c<this.itemSize;c++)t.push(this.data.array[s+c])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}uy.prototype.isInterleavedBufferAttribute=!0;class Bk extends ou{constructor(e){super(),this.type="SpriteMaterial",this.color=new er(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let H0;Bk.prototype.isSpriteMaterial=!0;const nM=new ot,z0=new ot,V0=new ot,U0=new ci,iM=new ci,MV=new Pr,vT=new ot,rM=new ot,yT=new ot,CV=new ci,Hk=new ci,SV=new ci;function bT(n,e,t,r,s,c){U0.subVectors(n,t).addScalar(.5).multiply(r),void 0!==s?(iM.x=c*U0.x-s*U0.y,iM.y=s*U0.x+c*U0.y):iM.copy(U0),n.copy(e),n.x+=iM.x,n.y+=iM.y,n.applyMatrix4(MV)}(class zk extends ta{constructor(e){if(super(),this.type="Sprite",void 0===H0){H0=new as;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new B0(t,5);H0.setIndex([0,1,2,0,2,3]),H0.setAttribute("position",new uy(r,3,0,!1)),H0.setAttribute("uv",new uy(r,2,3,!1))}this.geometry=H0,this.material=void 0!==e?e:new Bk,this.center=new ci(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),z0.setFromMatrixScale(this.matrixWorld),MV.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),V0.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&z0.multiplyScalar(-V0.z);const r=this.material.rotation;let s,c;0!==r&&(c=Math.cos(r),s=Math.sin(r));const h=this.center;bT(vT.set(-.5,-.5,0),V0,h,z0,s,c),bT(rM.set(.5,-.5,0),V0,h,z0,s,c),bT(yT.set(.5,.5,0),V0,h,z0,s,c),CV.set(0,0),Hk.set(1,0),SV.set(1,1);let _=e.ray.intersectTriangle(vT,rM,yT,!1,nM);if(null===_&&(bT(rM.set(-.5,.5,0),V0,h,z0,s,c),Hk.set(0,1),_=e.ray.intersectTriangle(vT,yT,rM,!1,nM),null===_))return;const S=e.ray.origin.distanceTo(nM);S<e.near||S>e.far||t.push({distance:S,point:nM.clone(),uv:fc.getUV(nM,vT,rM,yT,CV,Hk,SV,new ci),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const TV=new ot,DV=new ya,AV=new ya,Hne=new ot,IV=new Pr;class Vk extends Tc{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Pr,this.bindMatrixInverse=new Pr}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ya,t=this.geometry.attributes.skinWeight;for(let r=0,s=t.count;r<s;r++){e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.w=t.getW(r);const c=1/e.manhattanLength();c!==1/0?e.multiplyScalar(c):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,s=this.geometry;DV.fromBufferAttribute(s.attributes.skinIndex,e),AV.fromBufferAttribute(s.attributes.skinWeight,e),TV.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let c=0;c<4;c++){const h=AV.getComponent(c);if(0!==h){const _=DV.getComponent(c);IV.multiplyMatrices(r.bones[_].matrixWorld,r.boneInverses[_]),t.addScaledVector(Hne.copy(TV).applyMatrix4(IV),h)}}return t.applyMatrix4(this.bindMatrixInverse)}}Vk.prototype.isSkinnedMesh=!0;(class Uk extends ta{constructor(){super(),this.type="Bone"}}).prototype.isBone=!0;(class G0 extends Ec{constructor(e=null,t=1,r=1,s,c,h,_,S,A=dc,O=dc,G,X){super(null,h,_,S,A,O,s,c,G,X),this.image={data:e,width:t,height:r},this.magFilter=A,this.minFilter=O,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}).prototype.isDataTexture=!0;class W0 extends Ra{constructor(e,t,r,s=1){"number"==typeof r&&(s=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,r),this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}W0.prototype.isInstancedBufferAttribute=!0;const kV=new Pr,PV=new Pr,wT=[],sM=new Tc;(class LV extends Tc{constructor(e,t,r){super(e,t),this.instanceMatrix=new W0(new Float32Array(16*r),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const r=this.matrixWorld,s=this.count;if(sM.geometry=this.geometry,sM.material=this.material,void 0!==sM.material)for(let c=0;c<s;c++){this.getMatrixAt(c,kV),PV.multiplyMatrices(r,kV),sM.matrixWorld=PV,sM.raycast(e,wT);for(let h=0,_=wT.length;h<_;h++){const S=wT[h];S.instanceId=c,S.object=this,t.push(S)}wT.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new W0(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class Hc extends ou{constructor(e){super(),this.type="LineBasicMaterial",this.color=new er(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Hc.prototype.isLineBasicMaterial=!0;const FV=new ot,OV=new ot,NV=new Pr,Wk=new ay,MT=new oy;class S_ extends ta{constructor(e=new as,t=new Hc){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,r=[0];for(let s=1,c=t.count;s<c;s++)FV.fromBufferAttribute(t,s-1),OV.fromBufferAttribute(t,s),r[s]=r[s-1],r[s]+=FV.distanceTo(OV);e.setAttribute("lineDistance",new vr(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const r=this.geometry,s=this.matrixWorld,c=e.params.Line.threshold,h=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),MT.copy(r.boundingSphere),MT.applyMatrix4(s),MT.radius+=c,!1===e.ray.intersectsSphere(MT))return;NV.copy(s).invert(),Wk.copy(e.ray).applyMatrix4(NV);const _=c/((this.scale.x+this.scale.y+this.scale.z)/3),S=_*_,A=new ot,O=new ot,G=new ot,X=new ot,te=this.isLineSegments?2:1;if(r.isBufferGeometry){const ue=r.index,Ie=r.attributes.position;if(null!==ue)for(let Ge=Math.max(0,h.start),Oe=Math.min(ue.count,h.start+h.count)-1;Ge<Oe;Ge+=te){const $e=ue.getX(Ge),ht=ue.getX(Ge+1);if(A.fromBufferAttribute(Ie,$e),O.fromBufferAttribute(Ie,ht),Wk.distanceSqToSegment(A,O,X,G)>S)continue;X.applyMatrix4(this.matrixWorld);const Nt=e.ray.origin.distanceTo(X);Nt<e.near||Nt>e.far||t.push({distance:Nt,point:G.clone().applyMatrix4(this.matrixWorld),index:Ge,face:null,faceIndex:null,object:this})}else for(let Ge=Math.max(0,h.start),Oe=Math.min(Ie.count,h.start+h.count)-1;Ge<Oe;Ge+=te){if(A.fromBufferAttribute(Ie,Ge),O.fromBufferAttribute(Ie,Ge+1),Wk.distanceSqToSegment(A,O,X,G)>S)continue;X.applyMatrix4(this.matrixWorld);const ht=e.ray.origin.distanceTo(X);ht<e.near||ht>e.far||t.push({distance:ht,point:G.clone().applyMatrix4(this.matrixWorld),index:Ge,face:null,faceIndex:null,object:this})}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const s=t[r[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,h=s.length;c<h;c++){const _=s[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_]=c}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}S_.prototype.isLine=!0;const BV=new ot,HV=new ot;class E_ extends S_{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,r=[];for(let s=0,c=t.count;s<c;s+=2)BV.fromBufferAttribute(t,s),HV.fromBufferAttribute(t,s+1),r[s]=0===s?0:r[s-1],r[s+1]=r[s]+BV.distanceTo(HV);e.setAttribute("lineDistance",new vr(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}E_.prototype.isLineSegments=!0;(class zV extends S_{constructor(e,t){super(e,t),this.type="LineLoop"}}).prototype.isLineLoop=!0;class q0 extends ou{constructor(e){super(),this.type="PointsMaterial",this.color=new er(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}q0.prototype.isPointsMaterial=!0;const VV=new Pr,qk=new ay,CT=new oy,ST=new ot;function UV(n,e,t,r,s,c,h){const _=qk.distanceSqToPoint(n);if(_<t){const S=new ot;qk.closestPointToPoint(n,S),S.applyMatrix4(r);const A=s.ray.origin.distanceTo(S);if(A<s.near||A>s.far)return;c.push({distance:A,distanceToRay:Math.sqrt(_),point:S,index:e,face:null,object:h})}}(class ET extends ta{constructor(e=new as,t=new q0){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,s=this.matrixWorld,c=e.params.Points.threshold,h=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),CT.copy(r.boundingSphere),CT.applyMatrix4(s),CT.radius+=c,!1===e.ray.intersectsSphere(CT))return;VV.copy(s).invert(),qk.copy(e.ray).applyMatrix4(VV);const _=c/((this.scale.x+this.scale.y+this.scale.z)/3),S=_*_;if(r.isBufferGeometry){const A=r.index,G=r.attributes.position;if(null!==A)for(let ue=Math.max(0,h.start),ve=Math.min(A.count,h.start+h.count);ue<ve;ue++){const Ie=A.getX(ue);ST.fromBufferAttribute(G,Ie),UV(ST,Ie,S,s,e,t,this)}else for(let ue=Math.max(0,h.start),ve=Math.min(G.count,h.start+h.count);ue<ve;ue++)ST.fromBufferAttribute(G,ue),UV(ST,ue,S,s,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const s=t[r[0]];if(void 0!==s){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let c=0,h=s.length;c<h;c++){const _=s[c].name||String(c);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_]=c}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}).prototype.isPoints=!0,class Vne extends Ec{constructor(e,t,r,s,c,h,_,S,A){super(e,t,r,s,c,h,_,S,A),this.minFilter=void 0!==h?h:Rl,this.magFilter=void 0!==c?c:Rl,this.generateMipmaps=!1;const O=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function G(){O.needsUpdate=!0,e.requestVideoFrameCallback(G)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e==0&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class Une extends Ec{constructor(e,t,r){super({width:e,height:t}),this.format=r,this.magFilter=dc,this.minFilter=dc,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;(class GV extends Ec{constructor(e,t,r,s,c,h,_,S,A,O,G,X){super(null,h,_,S,A,O,s,c,G,X),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class Gne extends Ec{constructor(e,t,r,s,c,h,_,S,A){super(e,t,r,s,c,h,_,S,A),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0,new ot,new ot,new ot,new fc;class yd{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,s=this.getPoint(0),c=0;t.push(0);for(let h=1;h<=e;h++)r=this.getPoint(h/e),c+=r.distanceTo(s),t.push(c),s=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let s=0;const c=r.length;let h;h=t||e*r[c-1];let A,_=0,S=c-1;for(;_<=S;)if(s=Math.floor(_+(S-_)/2),A=r[s]-h,A<0)_=s+1;else{if(!(A>0)){S=s;break}S=s-1}if(s=S,r[s]===h)return s/(c-1);const O=r[s];return(s+(h-O)/(r[s+1]-O))/(c-1)}getTangent(e,t){let s=e-1e-4,c=e+1e-4;s<0&&(s=0),c>1&&(c=1);const h=this.getPoint(s),_=this.getPoint(c),S=t||(h.isVector2?new ci:new ot);return S.copy(_).sub(h).normalize(),S}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new ot,s=[],c=[],h=[],_=new ot,S=new Pr;for(let te=0;te<=e;te++)s[te]=this.getTangentAt(te/e,new ot);c[0]=new ot,h[0]=new ot;let A=Number.MAX_VALUE;const O=Math.abs(s[0].x),G=Math.abs(s[0].y),X=Math.abs(s[0].z);O<=A&&(A=O,r.set(1,0,0)),G<=A&&(A=G,r.set(0,1,0)),X<=A&&r.set(0,0,1),_.crossVectors(s[0],r).normalize(),c[0].crossVectors(s[0],_),h[0].crossVectors(s[0],c[0]);for(let te=1;te<=e;te++){if(c[te]=c[te-1].clone(),h[te]=h[te-1].clone(),_.crossVectors(s[te-1],s[te]),_.length()>Number.EPSILON){_.normalize();const ue=Math.acos(su(s[te-1].dot(s[te]),-1,1));c[te].applyMatrix4(S.makeRotationAxis(_,ue))}h[te].crossVectors(s[te],c[te])}if(!0===t){let te=Math.acos(su(c[0].dot(c[e]),-1,1));te/=e,s[0].dot(_.crossVectors(c[0],c[e]))>0&&(te=-te);for(let ue=1;ue<=e;ue++)c[ue].applyMatrix4(S.makeRotationAxis(s[ue],te*ue)),h[ue].crossVectors(s[ue],c[ue])}return{tangents:s,normals:c,binormals:h}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class PT extends yd{constructor(e=0,t=0,r=1,s=1,c=0,h=2*Math.PI,_=!1,S=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=s,this.aStartAngle=c,this.aEndAngle=h,this.aClockwise=_,this.aRotation=S}getPoint(e,t){const r=t||new ci,s=2*Math.PI;let c=this.aEndAngle-this.aStartAngle;const h=Math.abs(c)<Number.EPSILON;for(;c<0;)c+=s;for(;c>s;)c-=s;c<Number.EPSILON&&(c=h?0:s),!0===this.aClockwise&&!h&&(c===s?c=-s:c-=s);const _=this.aStartAngle+e*c;let S=this.aX+this.xRadius*Math.cos(_),A=this.aY+this.yRadius*Math.sin(_);if(0!==this.aRotation){const O=Math.cos(this.aRotation),G=Math.sin(this.aRotation),X=S-this.aX,te=A-this.aY;S=X*O-te*G+this.aX,A=X*G+te*O+this.aY}return r.set(S,A)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}PT.prototype.isEllipseCurve=!0;class qV extends PT{constructor(e,t,r,s,c,h){super(e,t,r,r,s,c,h),this.type="ArcCurve"}}function Zk(){let n=0,e=0,t=0,r=0;function s(c,h,_,S){n=c,e=_,t=-3*c+3*h-2*_-S,r=2*c-2*h+_+S}return{initCatmullRom:function(c,h,_,S,A){s(h,_,A*(_-c),A*(S-h))},initNonuniformCatmullRom:function(c,h,_,S,A,O,G){let X=(h-c)/A-(_-c)/(A+O)+(_-h)/O,te=(_-h)/O-(S-h)/(O+G)+(S-_)/G;X*=O,te*=O,s(h,_,X,te)},calc:function(c){const h=c*c;return n+e*c+t*h+r*(h*c)}}}qV.prototype.isArcCurve=!0;const LT=new ot,Yk=new Zk,Xk=new Zk,Jk=new Zk;class jV extends yd{constructor(e=[],t=!1,r="centripetal",s=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=s}getPoint(e,t=new ot){const r=t,s=this.points,c=s.length,h=(c-(this.closed?0:1))*e;let A,O,_=Math.floor(h),S=h-_;this.closed?_+=_>0?0:(Math.floor(Math.abs(_)/c)+1)*c:0===S&&_===c-1&&(_=c-2,S=1),this.closed||_>0?A=s[(_-1)%c]:(LT.subVectors(s[0],s[1]).add(s[0]),A=LT);const G=s[_%c],X=s[(_+1)%c];if(this.closed||_+2<c?O=s[(_+2)%c]:(LT.subVectors(s[c-1],s[c-2]).add(s[c-1]),O=LT),"centripetal"===this.curveType||"chordal"===this.curveType){const te="chordal"===this.curveType?.5:.25;let ue=Math.pow(A.distanceToSquared(G),te),ve=Math.pow(G.distanceToSquared(X),te),Ie=Math.pow(X.distanceToSquared(O),te);ve<1e-4&&(ve=1),ue<1e-4&&(ue=ve),Ie<1e-4&&(Ie=ve),Yk.initNonuniformCatmullRom(A.x,G.x,X.x,O.x,ue,ve,Ie),Xk.initNonuniformCatmullRom(A.y,G.y,X.y,O.y,ue,ve,Ie),Jk.initNonuniformCatmullRom(A.z,G.z,X.z,O.z,ue,ve,Ie)}else"catmullrom"===this.curveType&&(Yk.initCatmullRom(A.x,G.x,X.x,O.x,this.tension),Xk.initCatmullRom(A.y,G.y,X.y,O.y,this.tension),Jk.initCatmullRom(A.z,G.z,X.z,O.z,this.tension));return r.set(Yk.calc(S),Xk.calc(S),Jk.calc(S)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const s=e.points[t];this.points.push((new ot).fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function ZV(n,e,t,r,s){const c=.5*(r-e),h=.5*(s-t),_=n*n;return(2*t-2*r+c+h)*(n*_)+(-3*t+3*r-2*c-h)*_+c*n+t}function oM(n,e,t,r){return function Wne(n,e){const t=1-n;return t*t*e}(n,e)+function qne(n,e){return 2*(1-n)*n*e}(n,t)+function jne(n,e){return n*n*e}(n,r)}function aM(n,e,t,r,s){return function Zne(n,e){const t=1-n;return t*t*t*e}(n,e)+function Yne(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function Xne(n,e){return 3*(1-n)*n*n*e}(n,r)+function Jne(n,e){return n*n*n*e}(n,s)}jV.prototype.isCatmullRomCurve3=!0;class Kk extends yd{constructor(e=new ci,t=new ci,r=new ci,s=new ci){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=s}getPoint(e,t=new ci){const r=t,s=this.v0,c=this.v1,h=this.v2,_=this.v3;return r.set(aM(e,s.x,c.x,h.x,_.x),aM(e,s.y,c.y,h.y,_.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Kk.prototype.isCubicBezierCurve=!0;class YV extends yd{constructor(e=new ot,t=new ot,r=new ot,s=new ot){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=s}getPoint(e,t=new ot){const r=t,s=this.v0,c=this.v1,h=this.v2,_=this.v3;return r.set(aM(e,s.x,c.x,h.x,_.x),aM(e,s.y,c.y,h.y,_.y),aM(e,s.z,c.z,h.z,_.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}YV.prototype.isCubicBezierCurve3=!0;class FT extends yd{constructor(e=new ci,t=new ci){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ci){const r=t;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new ci;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}FT.prototype.isLineCurve=!0;class Qk extends yd{constructor(e=new ci,t=new ci,r=new ci){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ci){const r=t,s=this.v0,c=this.v1,h=this.v2;return r.set(oM(e,s.x,c.x,h.x),oM(e,s.y,c.y,h.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Qk.prototype.isQuadraticBezierCurve=!0;class $k extends yd{constructor(e=new ot,t=new ot,r=new ot){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ot){const r=t,s=this.v0,c=this.v1,h=this.v2;return r.set(oM(e,s.x,c.x,h.x),oM(e,s.y,c.y,h.y),oM(e,s.z,c.z,h.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}$k.prototype.isQuadraticBezierCurve3=!0;class eP extends yd{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new ci){const r=t,s=this.points,c=(s.length-1)*e,h=Math.floor(c),_=c-h,S=s[0===h?h:h-1],A=s[h],O=s[h>s.length-2?s.length-1:h+1],G=s[h>s.length-3?s.length-1:h+2];return r.set(ZV(_,S.x,A.x,O.x,G.x),ZV(_,S.y,A.y,O.y,G.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const s=e.points[t];this.points.push((new ci).fromArray(s))}return this}}eP.prototype.isSplineCurve=!0;var tP=Object.freeze({__proto__:null,ArcCurve:qV,CatmullRomCurve3:jV,CubicBezierCurve:Kk,CubicBezierCurve3:YV,EllipseCurve:PT,LineCurve:FT,LineCurve3:class Kne extends yd{constructor(e=new ot,t=new ot){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new ot){const r=t;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Qk,QuadraticBezierCurve3:$k,SplineCurve:eP});class Qne extends yd{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new FT(t,e))}getPoint(e,t){const r=e*this.getLength(),s=this.getCurveLengths();let c=0;for(;c<s.length;){if(s[c]>=r){const h=s[c]-r,_=this.curves[c],S=_.getLength();return _.getPointAt(0===S?0:1-h/S,t)}c++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,s=this.curves.length;r<s;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let s=0,c=this.curves;s<c.length;s++){const h=c[s],S=h.getPoints(h&&h.isEllipseCurve?2*e:h&&(h.isLineCurve||h.isLineCurve3)?1:h&&h.isSplineCurve?e*h.points.length:e);for(let A=0;A<S.length;A++){const O=S[A];r&&r.equals(O)||(t.push(O),r=O)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const s=e.curves[t];this.curves.push((new tP[s.type]).fromJSON(s))}return this}}class OT extends Qne{constructor(e){super(),this.type="Path",this.currentPoint=new ci,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new FT(this.currentPoint.clone(),new ci(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,s){const c=new Qk(this.currentPoint.clone(),new ci(e,t),new ci(r,s));return this.curves.push(c),this.currentPoint.set(r,s),this}bezierCurveTo(e,t,r,s,c,h){const _=new Kk(this.currentPoint.clone(),new ci(e,t),new ci(r,s),new ci(c,h));return this.curves.push(_),this.currentPoint.set(c,h),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new eP(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,s,c,h){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,r,s,c,h),this}absarc(e,t,r,s,c,h){return this.absellipse(e,t,r,r,s,c,h),this}ellipse(e,t,r,s,c,h,_,S){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,r,s,c,h,_,S),this}absellipse(e,t,r,s,c,h,_,S){const A=new PT(e,t,r,s,c,h,_,S);if(this.curves.length>0){const G=A.getPoint(0);G.equals(this.currentPoint)||this.lineTo(G.x,G.y)}this.curves.push(A);const O=A.getPoint(1);return this.currentPoint.copy(O),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Gm extends OT{constructor(e){super(e),this.uuid=Ph(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,s=this.holes.length;r<s;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const s=e.holes[t];this.holes.push((new OT).fromJSON(s))}return this}}function XV(n,e,t,r,s){let c,h;if(s===function mie(n,e,t,r){let s=0;for(let c=e,h=t-r;c<t;c+=r)s+=(n[h]-n[c])*(n[c+1]+n[h+1]),h=c;return s}(n,e,t,r)>0)for(c=e;c<t;c+=r)h=QV(c,n[c],n[c+1],h);else for(c=t-r;c>=e;c-=r)h=QV(c,n[c],n[c+1],h);return h&&NT(h,h.next)&&(uM(h),h=h.next),h}function D_(n,e){if(!n)return n;e||(e=n);let r,t=n;do{if(r=!1,t.steiner||!NT(t,t.next)&&0!==Ml(t.prev,t,t.next))t=t.next;else{if(uM(t),t=e=t.prev,t===t.next)break;r=!0}}while(r||t!==e);return e}function lM(n,e,t,r,s,c,h){if(!n)return;!h&&c&&function cie(n,e,t,r){let s=n;do{null===s.z&&(s.z=nP(s.x,s.y,e,t,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==n);s.prevZ.nextZ=null,s.prevZ=null,function uie(n){let e,t,r,s,c,h,_,S,A=1;do{for(t=n,n=null,c=null,h=0;t;){for(h++,r=t,_=0,e=0;e<A&&(_++,r=r.nextZ,r);e++);for(S=A;_>0||S>0&&r;)0!==_&&(0===S||!r||t.z<=r.z)?(s=t,t=t.nextZ,_--):(s=r,r=r.nextZ,S--),c?c.nextZ=s:n=s,s.prevZ=c,c=s;t=r}c.nextZ=null,A*=2}while(h>1)}(s)}(n,r,s,c);let S,A,_=n;for(;n.prev!==n.next;)if(S=n.prev,A=n.next,c?tie(n,r,s,c):eie(n))e.push(S.i/t),e.push(n.i/t),e.push(A.i/t),uM(n),n=A.next,_=A.next;else if((n=A)===_){h?1===h?lM(n=nie(D_(n),e,t),e,t,r,s,c,2):2===h&&iie(n,e,t,r,s,c):lM(D_(n),e,t,r,s,c,1);break}}function eie(n){const e=n.prev,t=n,r=n.next;if(Ml(e,t,r)>=0)return!1;let s=n.next.next;for(;s!==n.prev;){if(Z0(e.x,e.y,t.x,t.y,r.x,r.y,s.x,s.y)&&Ml(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function tie(n,e,t,r){const s=n.prev,c=n,h=n.next;if(Ml(s,c,h)>=0)return!1;const A=s.x>c.x?s.x>h.x?s.x:h.x:c.x>h.x?c.x:h.x,O=s.y>c.y?s.y>h.y?s.y:h.y:c.y>h.y?c.y:h.y,G=nP(s.x<c.x?s.x<h.x?s.x:h.x:c.x<h.x?c.x:h.x,s.y<c.y?s.y<h.y?s.y:h.y:c.y<h.y?c.y:h.y,e,t,r),X=nP(A,O,e,t,r);let te=n.prevZ,ue=n.nextZ;for(;te&&te.z>=G&&ue&&ue.z<=X;){if(te!==n.prev&&te!==n.next&&Z0(s.x,s.y,c.x,c.y,h.x,h.y,te.x,te.y)&&Ml(te.prev,te,te.next)>=0||(te=te.prevZ,ue!==n.prev&&ue!==n.next&&Z0(s.x,s.y,c.x,c.y,h.x,h.y,ue.x,ue.y)&&Ml(ue.prev,ue,ue.next)>=0))return!1;ue=ue.nextZ}for(;te&&te.z>=G;){if(te!==n.prev&&te!==n.next&&Z0(s.x,s.y,c.x,c.y,h.x,h.y,te.x,te.y)&&Ml(te.prev,te,te.next)>=0)return!1;te=te.prevZ}for(;ue&&ue.z<=X;){if(ue!==n.prev&&ue!==n.next&&Z0(s.x,s.y,c.x,c.y,h.x,h.y,ue.x,ue.y)&&Ml(ue.prev,ue,ue.next)>=0)return!1;ue=ue.nextZ}return!0}function nie(n,e,t){let r=n;do{const s=r.prev,c=r.next.next;!NT(s,c)&&JV(s,r,r.next,c)&&cM(s,c)&&cM(c,s)&&(e.push(s.i/t),e.push(r.i/t),e.push(c.i/t),uM(r),uM(r.next),r=n=c),r=r.next}while(r!==n);return D_(r)}function iie(n,e,t,r,s,c){let h=n;do{let _=h.next.next;for(;_!==h.prev;){if(h.i!==_.i&&die(h,_)){let S=KV(h,_);return h=D_(h,h.next),S=D_(S,S.next),lM(h,e,t,r,s,c),void lM(S,e,t,r,s,c)}_=_.next}h=h.next}while(h!==n)}function sie(n,e){return n.x-e.x}function oie(n,e){if(e=function aie(n,e){let t=e;const r=n.x,s=n.y;let h,c=-1/0;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const X=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(X<=r&&X>c){if(c=X,X===r){if(s===t.y)return t;if(s===t.next.y)return t.next}h=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!h)return null;if(r===c)return h;const _=h,S=h.x,A=h.y;let G,O=1/0;t=h;do{r>=t.x&&t.x>=S&&r!==t.x&&Z0(s<A?r:c,s,S,A,s<A?c:r,s,t.x,t.y)&&(G=Math.abs(s-t.y)/(r-t.x),cM(t,n)&&(G<O||G===O&&(t.x>h.x||t.x===h.x&&lie(h,t)))&&(h=t,O=G)),t=t.next}while(t!==_);return h}(n,e),e){const t=KV(e,n);D_(e,e.next),D_(t,t.next)}}function lie(n,e){return Ml(n.prev,n,e.prev)<0&&Ml(e.next,n,n.next)<0}function nP(n,e,t,r,s){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-t)*s)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*s)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function hie(n){let e=n,t=n;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==n);return t}function Z0(n,e,t,r,s,c,h,_){return(s-h)*(e-_)-(n-h)*(c-_)>=0&&(n-h)*(r-_)-(t-h)*(e-_)>=0&&(t-h)*(c-_)-(s-h)*(r-_)>=0}function die(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function fie(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&JV(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}(n,e)&&(cM(n,e)&&cM(e,n)&&function pie(n,e){let t=n,r=!1;const s=(n.x+e.x)/2,c=(n.y+e.y)/2;do{t.y>c!=t.next.y>c&&t.next.y!==t.y&&s<(t.next.x-t.x)*(c-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==n);return r}(n,e)&&(Ml(n.prev,n,e.prev)||Ml(n,e.prev,e))||NT(n,e)&&Ml(n.prev,n,n.next)>0&&Ml(e.prev,e,e.next)>0)}function Ml(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function NT(n,e){return n.x===e.x&&n.y===e.y}function JV(n,e,t,r){const s=HT(Ml(n,e,t)),c=HT(Ml(n,e,r)),h=HT(Ml(t,r,n)),_=HT(Ml(t,r,e));return!!(s!==c&&h!==_||0===s&&BT(n,t,e)||0===c&&BT(n,r,e)||0===h&&BT(t,n,r)||0===_&&BT(t,e,r))}function BT(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function HT(n){return n>0?1:n<0?-1:0}function cM(n,e){return Ml(n.prev,n,n.next)<0?Ml(n,e,n.next)>=0&&Ml(n,n.prev,e)>=0:Ml(n,e,n.prev)<0||Ml(n,n.next,e)<0}function KV(n,e){const t=new iP(n.i,n.x,n.y),r=new iP(e.i,e.x,e.y),s=n.next,c=e.prev;return n.next=e,e.prev=n,t.next=s,s.prev=t,r.next=t,t.prev=r,c.next=r,r.prev=c,r}function QV(n,e,t,r){const s=new iP(n,e,t);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function uM(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function iP(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Wm{static area(e){const t=e.length;let r=0;for(let s=t-1,c=0;c<t;s=c++)r+=e[s].x*e[c].y-e[c].x*e[s].y;return.5*r}static isClockWise(e){return Wm.area(e)<0}static triangulateShape(e,t){const r=[],s=[],c=[];$V(e),e4(r,e);let h=e.length;t.forEach($V);for(let S=0;S<t.length;S++)s.push(h),h+=t[S].length,e4(r,t[S]);const _=function(n,e,t=2){const r=e&&e.length,s=r?e[0]*t:n.length;let c=XV(n,0,s,t,!0);const h=[];if(!c||c.next===c.prev)return h;let _,S,A,O,G,X,te;if(r&&(c=function rie(n,e,t,r){const s=[];let c,h,_,S,A;for(c=0,h=e.length;c<h;c++)_=e[c]*r,S=c<h-1?e[c+1]*r:n.length,A=XV(n,_,S,r,!1),A===A.next&&(A.steiner=!0),s.push(hie(A));for(s.sort(sie),c=0;c<s.length;c++)oie(s[c],t),t=D_(t,t.next);return t}(n,e,c,t)),n.length>80*t){_=A=n[0],S=O=n[1];for(let ue=t;ue<s;ue+=t)G=n[ue],X=n[ue+1],G<_&&(_=G),X<S&&(S=X),G>A&&(A=G),X>O&&(O=X);te=Math.max(A-_,O-S),te=0!==te?1/te:0}return lM(c,h,t,_,S,te),h}(r,s);for(let S=0;S<_.length;S+=3)c.push(_.slice(S,S+3));return c}}function $V(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function e4(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class A_ extends as{constructor(e=new Gm([new ci(.5,.5),new ci(-.5,.5),new ci(-.5,-.5),new ci(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,s=[],c=[];for(let _=0,S=e.length;_<S;_++)h(e[_]);function h(_){const S=[],A=void 0!==t.curveSegments?t.curveSegments:12,O=void 0!==t.steps?t.steps:1;let G=void 0!==t.depth?t.depth:1,X=void 0===t.bevelEnabled||t.bevelEnabled,te=void 0!==t.bevelThickness?t.bevelThickness:.2,ue=void 0!==t.bevelSize?t.bevelSize:te-.1,ve=void 0!==t.bevelOffset?t.bevelOffset:0,Ie=void 0!==t.bevelSegments?t.bevelSegments:3;const ye=t.extrudePath,de=void 0!==t.UVGenerator?t.UVGenerator:gie;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),G=t.amount);let Ge,$e,ht,vt,Nt,Oe=!1;ye&&(Ge=ye.getSpacedPoints(O),Oe=!0,X=!1,$e=ye.computeFrenetFrames(O,!1),ht=new ot,vt=new ot,Nt=new ot),X||(Ie=0,te=0,ue=0,ve=0);const Cn=_.extractPoints(A);let hn=Cn.shape;const Xe=Cn.holes;if(!Wm.isClockWise(hn)){hn=hn.reverse();for(let ii=0,Yi=Xe.length;ii<Yi;ii++){const Hi=Xe[ii];Wm.isClockWise(Hi)&&(Xe[ii]=Hi.reverse())}}const Zt=Wm.triangulateShape(hn,Xe),$t=hn;for(let ii=0,Yi=Xe.length;ii<Yi;ii++)hn=hn.concat(Xe[ii]);function tn(ii,Yi,Hi){return Yi||console.error("THREE.ExtrudeGeometry: vec does not exist"),Yi.clone().multiplyScalar(Hi).add(ii)}const _t=hn.length,Ut=Zt.length;function ln(ii,Yi,Hi){let Sr,lr,Es;const ks=ii.x-Yi.x,Ro=ii.y-Yi.y,qa=Hi.x-ii.x,ba=Hi.y-ii.y,Mt=ks*ks+Ro*Ro;if(Math.abs(ks*ba-Ro*qa)>Number.EPSILON){const Kn=Math.sqrt(Mt),Zi=Math.sqrt(qa*qa+ba*ba),Gr=Yi.x-Ro/Kn,jn=Yi.y+ks/Kn,ar=((Hi.x-ba/Zi-Gr)*ba-(Hi.y+qa/Zi-jn)*qa)/(ks*ba-Ro*qa);Sr=Gr+ks*ar-ii.x,lr=jn+Ro*ar-ii.y;const sr=Sr*Sr+lr*lr;if(sr<=2)return new ci(Sr,lr);Es=Math.sqrt(sr/2)}else{let Kn=!1;ks>Number.EPSILON?qa>Number.EPSILON&&(Kn=!0):ks<-Number.EPSILON?qa<-Number.EPSILON&&(Kn=!0):Math.sign(Ro)===Math.sign(ba)&&(Kn=!0),Kn?(Sr=-Ro,lr=ks,Es=Math.sqrt(Mt)):(Sr=ks,lr=Ro,Es=Math.sqrt(Mt/2))}return new ci(Sr/Es,lr/Es)}const Gn=[];for(let ii=0,Yi=$t.length,Hi=Yi-1,Sr=ii+1;ii<Yi;ii++,Hi++,Sr++)Hi===Yi&&(Hi=0),Sr===Yi&&(Sr=0),Gn[ii]=ln($t[ii],$t[Hi],$t[Sr]);const vn=[];let Un,Ti=Gn.concat();for(let ii=0,Yi=Xe.length;ii<Yi;ii++){const Hi=Xe[ii];Un=[];for(let Sr=0,lr=Hi.length,Es=lr-1,ks=Sr+1;Sr<lr;Sr++,Es++,ks++)Es===lr&&(Es=0),ks===lr&&(ks=0),Un[Sr]=ln(Hi[Sr],Hi[Es],Hi[ks]);vn.push(Un),Ti=Ti.concat(Un)}for(let ii=0;ii<Ie;ii++){const Yi=ii/Ie,Hi=te*Math.cos(Yi*Math.PI/2),Sr=ue*Math.sin(Yi*Math.PI/2)+ve;for(let lr=0,Es=$t.length;lr<Es;lr++){const ks=tn($t[lr],Gn[lr],Sr);ir(ks.x,ks.y,-Hi)}for(let lr=0,Es=Xe.length;lr<Es;lr++){const ks=Xe[lr];Un=vn[lr];for(let Ro=0,qa=ks.length;Ro<qa;Ro++){const ba=tn(ks[Ro],Un[Ro],Sr);ir(ba.x,ba.y,-Hi)}}}const fr=ue+ve;for(let ii=0;ii<_t;ii++){const Yi=X?tn(hn[ii],Ti[ii],fr):hn[ii];Oe?(vt.copy($e.normals[0]).multiplyScalar(Yi.x),ht.copy($e.binormals[0]).multiplyScalar(Yi.y),Nt.copy(Ge[0]).add(vt).add(ht),ir(Nt.x,Nt.y,Nt.z)):ir(Yi.x,Yi.y,0)}for(let ii=1;ii<=O;ii++)for(let Yi=0;Yi<_t;Yi++){const Hi=X?tn(hn[Yi],Ti[Yi],fr):hn[Yi];Oe?(vt.copy($e.normals[ii]).multiplyScalar(Hi.x),ht.copy($e.binormals[ii]).multiplyScalar(Hi.y),Nt.copy(Ge[ii]).add(vt).add(ht),ir(Nt.x,Nt.y,Nt.z)):ir(Hi.x,Hi.y,G/O*ii)}for(let ii=Ie-1;ii>=0;ii--){const Yi=ii/Ie,Hi=te*Math.cos(Yi*Math.PI/2),Sr=ue*Math.sin(Yi*Math.PI/2)+ve;for(let lr=0,Es=$t.length;lr<Es;lr++){const ks=tn($t[lr],Gn[lr],Sr);ir(ks.x,ks.y,G+Hi)}for(let lr=0,Es=Xe.length;lr<Es;lr++){const ks=Xe[lr];Un=vn[lr];for(let Ro=0,qa=ks.length;Ro<qa;Ro++){const ba=tn(ks[Ro],Un[Ro],Sr);Oe?ir(ba.x,ba.y+Ge[O-1].y,Ge[O-1].x+Hi):ir(ba.x,ba.y,G+Hi)}}}function zo(ii,Yi){let Hi=ii.length;for(;--Hi>=0;){const Sr=Hi;let lr=Hi-1;lr<0&&(lr=ii.length-1);for(let Es=0,ks=O+2*Ie;Es<ks;Es++){const Ro=_t*Es,qa=_t*(Es+1);tr(Yi+Sr+Ro,Yi+lr+Ro,Yi+lr+qa,Yi+Sr+qa)}}}function ir(ii,Yi,Hi){S.push(ii),S.push(Yi),S.push(Hi)}function Jr(ii,Yi,Hi){Ss(ii),Ss(Yi),Ss(Hi);const Sr=s.length/3,lr=de.generateTopUV(r,s,Sr-3,Sr-2,Sr-1);ds(lr[0]),ds(lr[1]),ds(lr[2])}function tr(ii,Yi,Hi,Sr){Ss(ii),Ss(Yi),Ss(Sr),Ss(Yi),Ss(Hi),Ss(Sr);const lr=s.length/3,Es=de.generateSideWallUV(r,s,lr-6,lr-3,lr-2,lr-1);ds(Es[0]),ds(Es[1]),ds(Es[3]),ds(Es[1]),ds(Es[2]),ds(Es[3])}function Ss(ii){s.push(S[3*ii+0]),s.push(S[3*ii+1]),s.push(S[3*ii+2])}function ds(ii){c.push(ii.x),c.push(ii.y)}(function qi(){const ii=s.length/3;if(X){let Yi=0,Hi=_t*Yi;for(let Sr=0;Sr<Ut;Sr++){const lr=Zt[Sr];Jr(lr[2]+Hi,lr[1]+Hi,lr[0]+Hi)}Yi=O+2*Ie,Hi=_t*Yi;for(let Sr=0;Sr<Ut;Sr++){const lr=Zt[Sr];Jr(lr[0]+Hi,lr[1]+Hi,lr[2]+Hi)}}else{for(let Yi=0;Yi<Ut;Yi++){const Hi=Zt[Yi];Jr(Hi[2],Hi[1],Hi[0])}for(let Yi=0;Yi<Ut;Yi++){const Hi=Zt[Yi];Jr(Hi[0]+_t*O,Hi[1]+_t*O,Hi[2]+_t*O)}}r.addGroup(ii,s.length/3-ii,0)})(),function Vn(){const ii=s.length/3;let Yi=0;zo($t,Yi),Yi+=$t.length;for(let Hi=0,Sr=Xe.length;Hi<Sr;Hi++){const lr=Xe[Hi];zo(lr,Yi),Yi+=lr.length}r.addGroup(ii,s.length/3-ii,1)}()}this.setAttribute("position",new vr(s,3)),this.setAttribute("uv",new vr(c,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function _ie(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,s=n.length;r<s;r++)t.shapes.push(n[r].uuid);else t.shapes.push(n.uuid);return void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const r=[];for(let c=0,h=e.shapes.length;c<h;c++)r.push(t[e.shapes[c]]);const s=e.options.extrudePath;return void 0!==s&&(e.options.extrudePath=(new tP[s.type]).fromJSON(s)),new A_(r,e.options)}}const gie={generateTopUV:function(n,e,t,r,s){const _=e[3*r],S=e[3*r+1],A=e[3*s],O=e[3*s+1];return[new ci(e[3*t],e[3*t+1]),new ci(_,S),new ci(A,O)]},generateSideWallUV:function(n,e,t,r,s,c){const h=e[3*t],_=e[3*t+1],S=e[3*t+2],A=e[3*r],O=e[3*r+1],G=e[3*r+2],X=e[3*s],te=e[3*s+1],ue=e[3*s+2],ve=e[3*c],Ie=e[3*c+1],ye=e[3*c+2];return Math.abs(_-O)<Math.abs(h-A)?[new ci(h,1-S),new ci(A,1-G),new ci(X,1-ue),new ci(ve,1-ye)]:[new ci(_,1-S),new ci(O,1-G),new ci(te,1-ue),new ci(Ie,1-ye)]}};class dM extends as{constructor(e=new Gm([new ci(0,.5),new ci(-.5,-.5),new ci(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],s=[],c=[],h=[];let _=0,S=0;if(!1===Array.isArray(e))A(e);else for(let O=0;O<e.length;O++)A(e[O]),this.addGroup(_,S,O),_+=S,S=0;function A(O){const G=s.length/3,X=O.extractPoints(t);let te=X.shape;const ue=X.holes;!1===Wm.isClockWise(te)&&(te=te.reverse());for(let Ie=0,ye=ue.length;Ie<ye;Ie++){const de=ue[Ie];!0===Wm.isClockWise(de)&&(ue[Ie]=de.reverse())}const ve=Wm.triangulateShape(te,ue);for(let Ie=0,ye=ue.length;Ie<ye;Ie++)te=te.concat(ue[Ie]);for(let Ie=0,ye=te.length;Ie<ye;Ie++){const de=te[Ie];s.push(de.x,de.y,0),c.push(0,0,1),h.push(de.x,de.y)}for(let Ie=0,ye=ve.length;Ie<ye;Ie++){const de=ve[Ie];r.push(de[0]+G,de[1]+G,de[2]+G),S+=3}}this.setIndex(r),this.setAttribute("position",new vr(s,3)),this.setAttribute("normal",new vr(c,3)),this.setAttribute("uv",new vr(h,2))}toJSON(){const e=super.toJSON();return function vie(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++)e.shapes.push(n[t].uuid);else e.shapes.push(n.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const r=[];for(let s=0,c=e.shapes.length;s<c;s++)r.push(t[e.shapes[s]]);return new dM(r,e.curveSegments)}}(class s4 extends ou{constructor(e){super(),this.type="ShadowMaterial",this.color=new er(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}).prototype.isShadowMaterial=!0;class rP extends ou{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new er(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new er(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}rP.prototype.isMeshStandardMaterial=!0;(class o4 extends rP{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ci(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return su(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new er(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new er(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new er(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}).prototype.isMeshPhysicalMaterial=!0;(class a4 extends ou{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new er(16777215),this.specular=new er(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new er(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}).prototype.isMeshPhongMaterial=!0;(class l4 extends ou{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new er(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new er(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshToonMaterial=!0;(class c4 extends ou{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}).prototype.isMeshNormalMaterial=!0;(class u4 extends ou{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new er(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new er(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshLambertMaterial=!0;(class h4 extends ou{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new er(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ci(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class d4 extends Hc{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}).prototype.isLineDashedMaterial=!0;const dl={arraySlice:function(n,e,t){return dl.isTypedArray(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){const t=n.length,r=new Array(t);for(let s=0;s!==t;++s)r[s]=s;return r.sort(function e(s,c){return n[s]-n[c]}),r},sortedArray:function(n,e,t){const r=n.length,s=new n.constructor(r);for(let c=0,h=0;h!==r;++c){const _=t[c]*e;for(let S=0;S!==e;++S)s[h++]=n[_+S]}return s},flattenJSON:function(n,e,t,r){let s=1,c=n[0];for(;void 0!==c&&void 0===c[r];)c=n[s++];if(void 0===c)return;let h=c[r];if(void 0!==h)if(Array.isArray(h))do{h=c[r],void 0!==h&&(e.push(c.time),t.push.apply(t,h)),c=n[s++]}while(void 0!==c);else if(void 0!==h.toArray)do{h=c[r],void 0!==h&&(e.push(c.time),h.toArray(t,t.length)),c=n[s++]}while(void 0!==c);else do{h=c[r],void 0!==h&&(e.push(c.time),t.push(h)),c=n[s++]}while(void 0!==c)},subclip:function(n,e,t,r,s=30){const c=n.clone();c.name=e;const h=[];for(let S=0;S<c.tracks.length;++S){const A=c.tracks[S],O=A.getValueSize(),G=[],X=[];for(let te=0;te<A.times.length;++te){const ue=A.times[te]*s;if(!(ue<t||ue>=r)){G.push(A.times[te]);for(let ve=0;ve<O;++ve)X.push(A.values[te*O+ve])}}0!==G.length&&(A.times=dl.convertArray(G,A.times.constructor),A.values=dl.convertArray(X,A.values.constructor),h.push(A))}c.tracks=h;let _=1/0;for(let S=0;S<c.tracks.length;++S)_>c.tracks[S].times[0]&&(_=c.tracks[S].times[0]);for(let S=0;S<c.tracks.length;++S)c.tracks[S].shift(-1*_);return c.resetDuration(),c},makeClipAdditive:function(n,e=0,t=n,r=30){r<=0&&(r=30);const s=t.tracks.length,c=e/r;for(let h=0;h<s;++h){const _=t.tracks[h],S=_.ValueTypeName;if("bool"===S||"string"===S)continue;const A=n.tracks.find(function(ye){return ye.name===_.name&&ye.ValueTypeName===S});if(void 0===A)continue;let O=0;const G=_.getValueSize();_.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(O=G/3);let X=0;const te=A.getValueSize();A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(X=te/3);const ue=_.times.length-1;let ve;if(c<=_.times[0])ve=dl.arraySlice(_.values,O,G-O);else if(c>=_.times[ue]){const ye=ue*G+O;ve=dl.arraySlice(_.values,ye,ye+G-O)}else{const ye=_.createInterpolant(),de=O,Ge=G-O;ye.evaluate(c),ve=dl.arraySlice(ye.resultBuffer,de,Ge)}"quaternion"===S&&(new bu).fromArray(ve).normalize().conjugate().toArray(ve);const Ie=A.times.length;for(let ye=0;ye<Ie;++ye){const de=ye*te+X;if("quaternion"===S)bu.multiplyQuaternionsFlat(A.values,de,ve,0,A.values,de);else{const Ge=te-2*X;for(let Oe=0;Oe<Ge;++Oe)A.values[de+Oe]-=ve[Oe]}}}return n.blendMode=2501,n}};class I_{constructor(e,t,r,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==s?s:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,s=t[r],c=t[r-1];e:{t:{let h;n:{i:if(!(e<s)){for(let _=r+2;;){if(void 0===s){if(e<c)break i;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,c)}if(r===_)break;if(c=s,s=t[++r],e<s)break t}h=t.length;break n}if(e>=c)break e;{const _=t[1];e<_&&(r=2,c=_);for(let S=r-2;;){if(void 0===c)return this._cachedIndex=0,this.beforeStart_(0,e,s);if(r===S)break;if(s=c,c=t[--r-1],e>=c)break t}h=r,r=0}}for(;r<h;){const _=r+h>>>1;e<t[_]?h=_:r=_+1}if(s=t[r],c=t[r-1],void 0===c)return this._cachedIndex=0,this.beforeStart_(0,e,s);if(void 0===s)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,c,e)}this._cachedIndex=r,this.intervalChanged_(r,c,s)}return this.interpolate_(r,c,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,s=this.valueSize,c=e*s;for(let h=0;h!==s;++h)t[h]=r[c+h];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}I_.prototype.beforeStart_=I_.prototype.copySampleValue_,I_.prototype.afterEnd_=I_.prototype.copySampleValue_;class bie extends I_{constructor(e,t,r,s){super(e,t,r,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:f0,endingEnd:f0}}intervalChanged_(e,t,r){const s=this.parameterPositions;let c=e-2,h=e+1,_=s[c],S=s[h];if(void 0===_)switch(this.getSettings_().endingStart){case p0:c=e,_=2*t-r;break;case 2402:c=s.length-2,_=t+s[c]-s[c+1];break;default:c=e,_=r}if(void 0===S)switch(this.getSettings_().endingEnd){case p0:h=e,S=2*r-t;break;case 2402:h=1,S=r+s[1]-s[0];break;default:h=e-1,S=t}const A=.5*(r-t),O=this.valueSize;this._weightPrev=A/(t-_),this._weightNext=A/(S-r),this._offsetPrev=c*O,this._offsetNext=h*O}interpolate_(e,t,r,s){const c=this.resultBuffer,h=this.sampleValues,_=this.valueSize,S=e*_,A=S-_,O=this._offsetPrev,G=this._offsetNext,X=this._weightPrev,te=this._weightNext,ue=(r-t)/(s-t),ve=ue*ue,Ie=ve*ue,ye=-X*Ie+2*X*ve-X*ue,de=(1+X)*Ie+(-1.5-2*X)*ve+(-.5+X)*ue+1,Ge=(-1-te)*Ie+(1.5+te)*ve+.5*ue,Oe=te*Ie-te*ve;for(let $e=0;$e!==_;++$e)c[$e]=ye*h[O+$e]+de*h[A+$e]+Ge*h[S+$e]+Oe*h[G+$e];return c}}class f4 extends I_{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e,t,r,s){const c=this.resultBuffer,h=this.sampleValues,_=this.valueSize,S=e*_,A=S-_,O=(r-t)/(s-t),G=1-O;for(let X=0;X!==_;++X)c[X]=h[A+X]*G+h[S+X]*O;return c}}class xie extends I_{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class gp{constructor(e,t,r,s){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=dl.convertArray(t,this.TimeBufferType),this.values=dl.convertArray(r,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:dl.convertArray(e.times,Array),values:dl.convertArray(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(r.interpolation=s)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new xie(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new f4(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new bie(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let r=0,s=t.length;r!==s;++r)t[r]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let r=0,s=t.length;r!==s;++r)t[r]*=e}return this}trim(e,t){const r=this.times,s=r.length;let c=0,h=s-1;for(;c!==s&&r[c]<e;)++c;for(;-1!==h&&r[h]>t;)--h;if(++h,0!==c||h!==s){c>=h&&(h=Math.max(h,1),c=h-1);const _=this.getValueSize();this.times=dl.arraySlice(r,c,h),this.values=dl.arraySlice(this.values,c*_,h*_)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,s=this.values,c=r.length;0===c&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let h=null;for(let _=0;_!==c;_++){const S=r[_];if("number"==typeof S&&isNaN(S)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,_,S),e=!1;break}if(null!==h&&h>S){console.error("THREE.KeyframeTrack: Out of order keys.",this,_,S,h),e=!1;break}h=S}if(void 0!==s&&dl.isTypedArray(s))for(let _=0,S=s.length;_!==S;++_){const A=s[_];if(isNaN(A)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,_,A),e=!1;break}}return e}optimize(){const e=dl.arraySlice(this.times),t=dl.arraySlice(this.values),r=this.getValueSize(),s=2302===this.getInterpolation(),c=e.length-1;let h=1;for(let _=1;_<c;++_){let S=!1;const A=e[_];if(A!==e[_+1]&&(1!==_||A!==e[0]))if(s)S=!0;else{const G=_*r,X=G-r,te=G+r;for(let ue=0;ue!==r;++ue){const ve=t[G+ue];if(ve!==t[X+ue]||ve!==t[te+ue]){S=!0;break}}}if(S){if(_!==h){e[h]=e[_];const G=_*r,X=h*r;for(let te=0;te!==r;++te)t[X+te]=t[G+te]}++h}}if(c>0){e[h]=e[c];for(let _=c*r,S=h*r,A=0;A!==r;++A)t[S+A]=t[_+A];++h}return h!==e.length?(this.times=dl.arraySlice(e,0,h),this.values=dl.arraySlice(t,0,h*r)):(this.times=e,this.values=t),this}clone(){const e=dl.arraySlice(this.times,0),t=dl.arraySlice(this.values,0),s=new(0,this.constructor)(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}gp.prototype.TimeBufferType=Float32Array,gp.prototype.ValueBufferType=Float32Array,gp.prototype.DefaultInterpolation=2301;class Y0 extends gp{}Y0.prototype.ValueTypeName="bool",Y0.prototype.ValueBufferType=Array,Y0.prototype.DefaultInterpolation=2300,Y0.prototype.InterpolantFactoryMethodLinear=void 0,Y0.prototype.InterpolantFactoryMethodSmooth=void 0;class p4 extends gp{}p4.prototype.ValueTypeName="color";class ZT extends gp{}ZT.prototype.ValueTypeName="number";class wie extends I_{constructor(e,t,r,s){super(e,t,r,s)}interpolate_(e,t,r,s){const c=this.resultBuffer,h=this.sampleValues,_=this.valueSize,S=(r-t)/(s-t);let A=e*_;for(let O=A+_;A!==O;A+=4)bu.slerpFlat(c,0,h,A-_,h,A,S);return c}}class pM extends gp{InterpolantFactoryMethodLinear(e){return new wie(this.times,this.values,this.getValueSize(),e)}}pM.prototype.ValueTypeName="quaternion",pM.prototype.DefaultInterpolation=2301,pM.prototype.InterpolantFactoryMethodSmooth=void 0;class X0 extends gp{}X0.prototype.ValueTypeName="string",X0.prototype.ValueBufferType=Array,X0.prototype.DefaultInterpolation=2300,X0.prototype.InterpolantFactoryMethodLinear=void 0,X0.prototype.InterpolantFactoryMethodSmooth=void 0;class YT extends gp{}YT.prototype.ValueTypeName="vector";class XT{constructor(e,t=-1,r,s=2500){this.name=e,this.tracks=r,this.duration=t,this.blendMode=s,this.uuid=Ph(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,s=1/(e.fps||1);for(let h=0,_=r.length;h!==_;++h)t.push(Cie(r[h]).scale(s));const c=new this(e.name,e.duration,t,e.blendMode);return c.uuid=e.uuid,c}static toJSON(e){const t=[],r=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let c=0,h=r.length;c!==h;++c)t.push(gp.toJSON(r[c]));return s}static CreateFromMorphTargetSequence(e,t,r,s){const c=t.length,h=[];for(let _=0;_<c;_++){let S=[],A=[];S.push((_+c-1)%c,_,(_+1)%c),A.push(0,1,0);const O=dl.getKeyframeOrder(S);S=dl.sortedArray(S,1,O),A=dl.sortedArray(A,1,O),!s&&0===S[0]&&(S.push(c),A.push(A[0])),h.push(new ZT(".morphTargetInfluences["+t[_].name+"]",S,A).scale(1/r))}return new this(e,-1,h)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const s=e;r=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<r.length;s++)if(r[s].name===t)return r[s];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const s={},c=/^([\w-]*?)([\d]+)$/;for(let _=0,S=e.length;_<S;_++){const A=e[_],O=A.name.match(c);if(O&&O.length>1){const G=O[1];let X=s[G];X||(s[G]=X=[]),X.push(A)}}const h=[];for(const _ in s)h.push(this.CreateFromMorphTargetSequence(_,s[_],t,r));return h}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(G,X,te,ue,ve){if(0!==te.length){const Ie=[],ye=[];dl.flattenJSON(te,Ie,ye,ue),0!==Ie.length&&ve.push(new G(X,Ie,ye))}},s=[],c=e.name||"default",h=e.fps||30,_=e.blendMode;let S=e.length||-1;const A=e.hierarchy||[];for(let G=0;G<A.length;G++){const X=A[G].keys;if(X&&0!==X.length)if(X[0].morphTargets){const te={};let ue;for(ue=0;ue<X.length;ue++)if(X[ue].morphTargets)for(let ve=0;ve<X[ue].morphTargets.length;ve++)te[X[ue].morphTargets[ve]]=-1;for(const ve in te){const Ie=[],ye=[];for(let de=0;de!==X[ue].morphTargets.length;++de){const Ge=X[ue];Ie.push(Ge.time),ye.push(Ge.morphTarget===ve?1:0)}s.push(new ZT(".morphTargetInfluence["+ve+"]",Ie,ye))}S=te.length*(h||1)}else{const te=".bones["+t[G].name+"]";r(YT,te+".position",X,"pos",s),r(pM,te+".quaternion",X,"rot",s),r(YT,te+".scale",X,"scl",s)}}return 0===s.length?null:new this(c,S,s,_)}resetDuration(){let t=0;for(let r=0,s=this.tracks.length;r!==s;++r){const c=this.tracks[r];t=Math.max(t,c.times[c.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Cie(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function Mie(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ZT;case"vector":case"vector2":case"vector3":case"vector4":return YT;case"color":return p4;case"quaternion":return pM;case"bool":case"boolean":return Y0;case"string":return X0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],r=[];dl.flattenJSON(n.keys,t,r,"value"),n.times=t,n.values=r}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const J0={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};const Sie=new class m4{constructor(e,t,r){const s=this;let S,c=!1,h=0,_=0;const A=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(O){_++,!1===c&&void 0!==s.onStart&&s.onStart(O,h,_),c=!0},this.itemEnd=function(O){h++,void 0!==s.onProgress&&s.onProgress(O,h,_),h===_&&(c=!1,void 0!==s.onLoad&&s.onLoad())},this.itemError=function(O){void 0!==s.onError&&s.onError(O)},this.resolveURL=function(O){return S?S(O):O},this.setURLModifier=function(O){return S=O,this},this.addHandler=function(O,G){return A.push(O,G),this},this.removeHandler=function(O){const G=A.indexOf(O);return-1!==G&&A.splice(G,2),this},this.getHandler=function(O){for(let G=0,X=A.length;G<X;G+=2){const te=A[G],ue=A[G+1];if(te.global&&(te.lastIndex=0),te.test(O))return ue}return null}}};class R_{constructor(e){this.manager=void 0!==e?e:Sie,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(s,c){r.load(e,s,t,c)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const qm={};class jm extends R_{constructor(e){super(e)}load(e,t,r,s){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const c=J0.get(e);if(void 0!==c)return this.manager.itemStart(e),setTimeout(()=>{t&&t(c),this.manager.itemEnd(e)},0),c;if(void 0!==qm[e])return void qm[e].push({onLoad:t,onProgress:r,onError:s});qm[e]=[],qm[e].push({onLoad:t,onProgress:r,onError:s});const h=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),_=this.mimeType,S=this.responseType;fetch(h).then(A=>{if(200===A.status||0===A.status){if(0===A.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===A.body.getReader)return A;const O=qm[e],G=A.body.getReader(),X=A.headers.get("Content-Length"),te=X?parseInt(X):0,ue=0!==te;let ve=0;const Ie=new ReadableStream({start(ye){!function de(){G.read().then(({done:Ge,value:Oe})=>{if(Ge)ye.close();else{ve+=Oe.byteLength;const $e=new ProgressEvent("progress",{lengthComputable:ue,loaded:ve,total:te});for(let ht=0,vt=O.length;ht<vt;ht++){const Nt=O[ht];Nt.onProgress&&Nt.onProgress($e)}ye.enqueue(Oe),de()}})}()}});return new Response(Ie)}throw Error(`fetch for "${A.url}" responded with ${A.status}: ${A.statusText}`)}).then(A=>{switch(S){case"arraybuffer":return A.arrayBuffer();case"blob":return A.blob();case"document":return A.text().then(O=>(new DOMParser).parseFromString(O,_));case"json":return A.json();default:if(void 0===_)return A.text();{const G=/charset="?([^;"\s]*)"?/i.exec(_),X=G&&G[1]?G[1].toLowerCase():void 0,te=new TextDecoder(X);return A.arrayBuffer().then(ue=>te.decode(ue))}}}).then(A=>{J0.add(e,A);const O=qm[e];delete qm[e];for(let G=0,X=O.length;G<X;G++){const te=O[G];te.onLoad&&te.onLoad(A)}}).catch(A=>{const O=qm[e];if(void 0===O)throw this.manager.itemError(e),A;delete qm[e];for(let G=0,X=O.length;G<X;G++){const te=O[G];te.onError&&te.onError(A)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class JT extends R_{constructor(e){super(e)}load(e,t,r,s){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const c=this,h=J0.get(e);if(void 0!==h)return c.manager.itemStart(e),setTimeout(function(){t&&t(h),c.manager.itemEnd(e)},0),h;const _=Z1("img");function S(){O(),J0.add(e,this),t&&t(this),c.manager.itemEnd(e)}function A(G){O(),s&&s(G),c.manager.itemError(e),c.manager.itemEnd(e)}function O(){_.removeEventListener("load",S,!1),_.removeEventListener("error",A,!1)}return _.addEventListener("load",S,!1),_.addEventListener("error",A,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(_.crossOrigin=this.crossOrigin),c.manager.itemStart(e),_.src=e,_}}class Eie extends R_{constructor(e){super(e)}load(e,t,r,s){const c=new K1,h=new JT(this.manager);h.setCrossOrigin(this.crossOrigin),h.setPath(this.path);let _=0;function S(A){h.load(e[A],function(O){c.images[A]=O,_++,6===_&&(c.needsUpdate=!0,t&&t(c))},void 0,s)}for(let A=0;A<e.length;++A)S(A);return c}}class Die extends R_{constructor(e){super(e)}load(e,t,r,s){const c=new Ec,h=new JT(this.manager);return h.setCrossOrigin(this.crossOrigin),h.setPath(this.path),h.load(e,function(_){c.image=_,c.needsUpdate=!0,void 0!==t&&t(c)},r,s),c}}class _p extends ta{constructor(e,t=1){super(),this.type="Light",this.color=new er(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}_p.prototype.isLight=!0;(class g4 extends _p{constructor(e,t,r){super(e,r),this.type="HemisphereLight",this.position.copy(ta.DefaultUp),this.updateMatrix(),this.groundColor=new er(t)}copy(e){return _p.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const _4=new Pr,v4=new ot,y4=new ot;class sP{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ci(512,512),this.map=null,this.mapPass=null,this.matrix=new Pr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new uT,this._frameExtents=new ci(1,1),this._viewportCount=1,this._viewports=[new ya(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;v4.setFromMatrixPosition(e.matrixWorld),t.position.copy(v4),y4.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(y4),t.updateMatrixWorld(),_4.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_4),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class b4 extends sP{constructor(){super(new Bc(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,r=2*q1*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,c=e.distance||t.far;(r!==t.fov||s!==t.aspect||c!==t.far)&&(t.fov=r,t.aspect=s,t.far=c,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}b4.prototype.isSpotLightShadow=!0;(class x4 extends _p{constructor(e,t,r=0,s=Math.PI/3,c=0,h=1){super(e,t),this.type="SpotLight",this.position.copy(ta.DefaultUp),this.updateMatrix(),this.target=new ta,this.distance=r,this.angle=s,this.penumbra=c,this.decay=h,this.shadow=new b4}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isSpotLight=!0;const w4=new Pr,mM=new ot,oP=new ot;class M4 extends sP{constructor(){super(new Bc(90,1,.5,500)),this._frameExtents=new ci(4,2),this._viewportCount=6,this._viewports=[new ya(2,1,1,1),new ya(0,1,1,1),new ya(3,1,1,1),new ya(1,1,1,1),new ya(3,0,1,1),new ya(1,0,1,1)],this._cubeDirections=[new ot(1,0,0),new ot(-1,0,0),new ot(0,0,1),new ot(0,0,-1),new ot(0,1,0),new ot(0,-1,0)],this._cubeUps=[new ot(0,1,0),new ot(0,1,0),new ot(0,1,0),new ot(0,1,0),new ot(0,0,1),new ot(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,s=this.matrix,c=e.distance||r.far;c!==r.far&&(r.far=c,r.updateProjectionMatrix()),mM.setFromMatrixPosition(e.matrixWorld),r.position.copy(mM),oP.copy(r.position),oP.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(oP),r.updateMatrixWorld(),s.makeTranslation(-mM.x,-mM.y,-mM.z),w4.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(w4)}}M4.prototype.isPointLightShadow=!0;(class C4 extends _p{constructor(e,t,r=0,s=1){super(e,t),this.type="PointLight",this.distance=r,this.decay=s,this.shadow=new M4}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}).prototype.isPointLight=!0;class S4 extends sP{constructor(){super(new hT(-5,5,5,-5,.5,500))}}S4.prototype.isDirectionalLightShadow=!0;(class E4 extends _p{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(ta.DefaultUp),this.updateMatrix(),this.target=new ta,this.shadow=new S4}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isDirectionalLight=!0;class aP extends _p{constructor(e,t){super(e,t),this.type="AmbientLight"}}aP.prototype.isAmbientLight=!0;(class T4 extends _p{constructor(e,t,r=10,s=10){super(e,t),this.type="RectAreaLight",this.width=r,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class D4{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ot)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,s=e.y,c=e.z,h=this.coefficients;return t.copy(h[0]).multiplyScalar(.282095),t.addScaledVector(h[1],.488603*s),t.addScaledVector(h[2],.488603*c),t.addScaledVector(h[3],.488603*r),t.addScaledVector(h[4],r*s*1.092548),t.addScaledVector(h[5],s*c*1.092548),t.addScaledVector(h[6],.315392*(3*c*c-1)),t.addScaledVector(h[7],r*c*1.092548),t.addScaledVector(h[8],.546274*(r*r-s*s)),t}getIrradianceAt(e,t){const r=e.x,s=e.y,c=e.z,h=this.coefficients;return t.copy(h[0]).multiplyScalar(.886227),t.addScaledVector(h[1],1.023328*s),t.addScaledVector(h[2],1.023328*c),t.addScaledVector(h[3],1.023328*r),t.addScaledVector(h[4],.858086*r*s),t.addScaledVector(h[5],.858086*s*c),t.addScaledVector(h[6],.743125*c*c-.247708),t.addScaledVector(h[7],.858086*r*c),t.addScaledVector(h[8],.429043*(r*r-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let s=0;s<9;s++)r[s].fromArray(e,t+3*s);return this}toArray(e=[],t=0){const r=this.coefficients;for(let s=0;s<9;s++)r[s].toArray(e,t+3*s);return e}static getBasisAt(e,t){const r=e.x,s=e.y,c=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*c,t[3]=.488603*r,t[4]=1.092548*r*s,t[5]=1.092548*s*c,t[6]=.315392*(3*c*c-1),t[7]=1.092548*r*c,t[8]=.546274*(r*r-s*s)}}D4.prototype.isSphericalHarmonics3=!0;class KT extends _p{constructor(e=new D4,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}KT.prototype.isLightProbe=!0;let QT;(class A4 extends as{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0,class kie extends R_{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,s){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const c=this,h=J0.get(e);if(void 0!==h)return c.manager.itemStart(e),setTimeout(function(){t&&t(h),c.manager.itemEnd(e)},0),h;const _={};_.credentials="anonymous"===this.crossOrigin?"same-origin":"include",_.headers=this.requestHeader,fetch(e,_).then(function(S){return S.blob()}).then(function(S){return createImageBitmap(S,Object.assign(c.options,{colorSpaceConversion:"none"}))}).then(function(S){J0.add(e,S),t&&t(S),c.manager.itemEnd(e)}).catch(function(S){s&&s(S),c.manager.itemError(e),c.manager.itemEnd(e)}),c.manager.itemStart(e)}}.prototype.isImageBitmapLoader=!0;class Pie extends R_{constructor(e){super(e)}load(e,t,r,s){const c=this,h=new jm(this.manager);h.setResponseType("arraybuffer"),h.setPath(this.path),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(_){try{const S=_.slice(0);(void 0===QT&&(QT=new(window.AudioContext||window.webkitAudioContext)),QT).decodeAudioData(S,function(O){t(O)})}catch(S){s?s(S):console.error(S),c.manager.itemError(e)}},r,s)}}(class Lie extends KT{constructor(e,t,r=1){super(void 0,r);const s=(new er).set(e),c=(new er).set(t),h=new ot(s.r,s.g,s.b),_=new ot(c.r,c.g,c.b),S=Math.sqrt(Math.PI),A=S*Math.sqrt(.75);this.sh.coefficients[0].copy(h).add(_).multiplyScalar(S),this.sh.coefficients[1].copy(h).sub(_).multiplyScalar(A)}}).prototype.isHemisphereLightProbe=!0,class Fie extends KT{constructor(e,t=1){super(void 0,t);const r=(new er).set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class Vie{constructor(e,t,r){let s,c,h;switch(this.binding=e,this.valueSize=r,t){case"quaternion":s=this._slerp,c=this._slerpAdditive,h=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":s=this._select,c=this._select,h=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:s=this._lerp,c=this._lerpAdditive,h=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=c,this._setIdentity=h,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,s=this.valueSize,c=e*s+s;let h=this.cumulativeWeight;if(0===h){for(let _=0;_!==s;++_)r[c+_]=r[_];h=t}else h+=t,this._mixBufferRegion(r,c,0,t/h,s);this.cumulativeWeight=h}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,s=r*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,s=e*t+t,c=this.cumulativeWeight,h=this.cumulativeWeightAdditive,_=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,c<1&&this._mixBufferRegion(r,s,t*this._origIndex,1-c,t),h>0&&this._mixBufferRegionAdditive(r,s,this._addIndex*t,1,t);for(let S=t,A=t+t;S!==A;++S)if(r[S]!==r[S+t]){_.setValue(r,s);break}}saveOriginalState(){const t=this.buffer,r=this.valueSize,s=r*this._origIndex;this.binding.getValue(t,s);for(let c=r,h=s;c!==h;++c)t[c]=t[s+c%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,s,c){if(s>=.5)for(let h=0;h!==c;++h)e[t+h]=e[r+h]}_slerp(e,t,r,s){bu.slerpFlat(e,t,e,t,e,r,s)}_slerpAdditive(e,t,r,s,c){const h=this._workIndex*c;bu.multiplyQuaternionsFlat(e,h,e,t,e,r),bu.slerpFlat(e,t,e,t,e,h,s)}_lerp(e,t,r,s,c){const h=1-s;for(let _=0;_!==c;++_){const S=t+_;e[S]=e[S]*h+e[r+_]*s}}_lerpAdditive(e,t,r,s,c){for(let h=0;h!==c;++h){const _=t+h;e[_]=e[_]+e[r+h]*s}}}const cP="\\[\\]\\.:\\/",Uie=new RegExp("["+cP+"]","g"),uP="[^"+cP+"]",Gie="[^"+cP.replace("\\.","")+"]",Wie=/((?:WC+[\/:])*)/.source.replace("WC",uP),qie=/(WCOD+)?/.source.replace("WCOD",Gie),jie=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",uP),Zie=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",uP),Yie=new RegExp("^"+Wie+qie+jie+Zie+"$"),Xie=["material","materials","bones"];class Jie{constructor(e,t,r){const s=r||il.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const s=this._bindings[this._targetGroup.nCachedObjects_];void 0!==s&&s.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let s=this._targetGroup.nCachedObjects_,c=r.length;s!==c;++s)r[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}let il=(()=>{class n{constructor(t,r,s){this.path=r,this.parsedPath=s||n.parseTrackName(r),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,s){return t&&t.isAnimationObjectGroup?new n.Composite(t,r,s):new n(t,r,s)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Uie,"")}static parseTrackName(t){const r=Yie.exec(t);if(!r)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const s={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},c=s.nodeName&&s.nodeName.lastIndexOf(".");if(void 0!==c&&-1!==c){const h=s.nodeName.substring(c+1);-1!==Xie.indexOf(h)&&(s.nodeName=s.nodeName.substring(0,c),s.objectName=h)}if(null===s.propertyName||0===s.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return s}static findNode(t,r){if(!r||""===r||"."===r||-1===r||r===t.name||r===t.uuid)return t;if(t.skeleton){const s=t.skeleton.getBoneByName(r);if(void 0!==s)return s}if(t.children){const s=function(h){for(let _=0;_<h.length;_++){const S=h[_];if(S.name===r||S.uuid===r)return S;const A=s(S.children);if(A)return A}return null},c=s(t.children);if(c)return c}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){const s=this.resolvedProperty;for(let c=0,h=s.length;c!==h;++c)t[r++]=s[c]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){const s=this.resolvedProperty;for(let c=0,h=s.length;c!==h;++c)s[c]=t[r++]}_setValue_array_setNeedsUpdate(t,r){const s=this.resolvedProperty;for(let c=0,h=s.length;c!==h;++c)s[c]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){const s=this.resolvedProperty;for(let c=0,h=s.length;c!==h;++c)s[c]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node;const r=this.parsedPath,s=r.objectName,c=r.propertyName;let h=r.propertyIndex;if(t||(t=n.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(s){let O=r.objectIndex;switch(s){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let G=0;G<t.length;G++)if(t[G].name===O){O=G;break}break;default:if(void 0===t[s])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[s]}if(void 0!==O){if(void 0===t[O])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[O]}}const _=t[c];if(void 0===_)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+r.nodeName+"."+c+" but it wasn't found.",t);let S=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?S=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(S=this.Versioning.MatrixWorldNeedsUpdate);let A=this.BindingType.Direct;if(void 0!==h){if("morphTargetInfluences"===c){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[h]&&(h=t.morphTargetDictionary[h])}A=this.BindingType.ArrayElement,this.resolvedProperty=_,this.propertyIndex=h}else void 0!==_.fromArray&&void 0!==_.toArray?(A=this.BindingType.HasFromToArray,this.resolvedProperty=_):Array.isArray(_)?(A=this.BindingType.EntireArray,this.resolvedProperty=_):this.propertyName=c;this.getValue=this.GetterByBindingType[A],this.setValue=this.SetterByBindingTypeAndVersioning[A][S]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=Jie,n})();il.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},il.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},il.prototype.GetterByBindingType=[il.prototype._getValue_direct,il.prototype._getValue_array,il.prototype._getValue_arrayElement,il.prototype._getValue_toArray],il.prototype.SetterByBindingTypeAndVersioning=[[il.prototype._setValue_direct,il.prototype._setValue_direct_setNeedsUpdate,il.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[il.prototype._setValue_array,il.prototype._setValue_array_setNeedsUpdate,il.prototype._setValue_array_setMatrixWorldNeedsUpdate],[il.prototype._setValue_arrayElement,il.prototype._setValue_arrayElement_setNeedsUpdate,il.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[il.prototype._setValue_fromArray,il.prototype._setValue_fromArray_setNeedsUpdate,il.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Qie{constructor(e,t,r=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=s;const c=t.tracks,h=c.length,_=new Array(h),S={endingStart:f0,endingEnd:f0};for(let A=0;A!==h;++A){const O=c[A].createInterpolant(null);_[A]=O,O.settings=S}this._interpolantSettings=S,this._interpolants=_,this._propertyBindings=new Array(h),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const s=this._clip.duration,c=e._clip.duration,_=s/c;e.warp(1,c/s,t),this.warp(_,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const s=this._mixer,c=s.time,h=this.timeScale;let _=this._timeScaleInterpolant;null===_&&(_=s._lendControlInterpolant(),this._timeScaleInterpolant=_);const S=_.parameterPositions,A=_.sampleValues;return S[0]=c,S[1]=c+r,A[0]=e/h,A[1]=t/h,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,s){if(!this.enabled)return void this._updateWeight(e);const c=this._startTime;if(null!==c){const S=(e-c)*r;if(S<0||0===r)return;this._startTime=null,t=r*S}t*=this._updateTimeScale(e);const h=this._updateTime(t),_=this._updateWeight(e);if(_>0){const S=this._interpolants,A=this._propertyBindings;if(2501===this.blendMode)for(let O=0,G=S.length;O!==G;++O)S[O].evaluate(h),A[O].accumulateAdditive(_);else for(let O=0,G=S.length;O!==G;++O)S[O].evaluate(h),A[O].accumulate(s,_)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(null!==r){const s=r.evaluate(e)[0];t*=s,e>r.parameterPositions[1]&&(this.stopFading(),0===s&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;null!==r&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let s=this.time+e,c=this._loopCount;const h=2202===r;if(0===e)return-1===c?s:h&&1==(1&c)?t-s:s;if(2200===r){-1===c&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else{if(!(s<0)){this.time=s;break e}s=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===c&&(e>=0?(c=0,this._setEndings(!0,0===this.repetitions,h)):this._setEndings(0===this.repetitions,!0,h)),s>=t||s<0){const _=Math.floor(s/t);s-=t*_,c+=Math.abs(_);const S=this.repetitions-c;if(S<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===S){const A=e<0;this._setEndings(A,!A,h)}else this._setEndings(!1,!1,h);this._loopCount=c,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:_})}}else this.time=s;if(h&&1==(1&c))return t-s}return s}_setEndings(e,t,r){const s=this._interpolantSettings;r?(s.endingStart=p0,s.endingEnd=p0):(s.endingStart=e?this.zeroSlopeAtStart?p0:f0:2402,s.endingEnd=t?this.zeroSlopeAtEnd?p0:f0:2402)}_scheduleFading(e,t,r){const s=this._mixer,c=s.time;let h=this._weightInterpolant;null===h&&(h=s._lendControlInterpolant(),this._weightInterpolant=h);const _=h.parameterPositions,S=h.sampleValues;return _[0]=c,S[0]=t,_[1]=c+e,S[1]=r,this}}(class $ie extends ey{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,s=e._clip.tracks,c=s.length,h=e._propertyBindings,_=e._interpolants,S=r.uuid,A=this._bindingsByRootAndName;let O=A[S];void 0===O&&(O={},A[S]=O);for(let G=0;G!==c;++G){const X=s[G],te=X.name;let ue=O[te];if(void 0!==ue)++ue.referenceCount,h[G]=ue;else{if(ue=h[G],void 0!==ue){null===ue._cacheIndex&&(++ue.referenceCount,this._addInactiveBinding(ue,S,te));continue}ue=new Vie(il.create(r,te,t&&t._propertyBindings[G].binding.parsedPath),X.ValueTypeName,X.getValueSize()),++ue.referenceCount,this._addInactiveBinding(ue,S,te),h[G]=ue}_[G].resultBuffer=ue.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const r=(e._localRoot||this._root).uuid,s=e._clip.uuid,c=this._actionsByClip[s];this._bindAction(e,c&&c.knownActions[0]),this._addInactiveAction(e,s,r)}const t=e._propertyBindings;for(let r=0,s=t.length;r!==s;++r){const c=t[r];0==c.useCount++&&(this._lendBinding(c),c.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,s=t.length;r!==s;++r){const c=t[r];0==--c.useCount&&(c.restoreOriginalState(),this._takeBackBinding(c))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,r){const s=this._actions,c=this._actionsByClip;let h=c[t];if(void 0===h)h={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,c[t]=h;else{const _=h.knownActions;e._byClipCacheIndex=_.length,_.push(e)}e._cacheIndex=s.length,s.push(e),h.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],s=e._cacheIndex;r._cacheIndex=s,t[s]=r,t.pop(),e._cacheIndex=null;const c=e._clip.uuid,h=this._actionsByClip,_=h[c],S=_.knownActions,A=S[S.length-1],O=e._byClipCacheIndex;A._byClipCacheIndex=O,S[O]=A,S.pop(),e._byClipCacheIndex=null,delete _.actionByRoot[(e._localRoot||this._root).uuid],0===S.length&&delete h[c],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,s=t.length;r!==s;++r){const c=t[r];0==--c.referenceCount&&this._removeInactiveBinding(c)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,s=this._nActiveActions++,c=t[s];e._cacheIndex=s,t[s]=e,c._cacheIndex=r,t[r]=c}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,s=--this._nActiveActions,c=t[s];e._cacheIndex=s,t[s]=e,c._cacheIndex=r,t[r]=c}_addInactiveBinding(e,t,r){const s=this._bindingsByRootAndName,c=this._bindings;let h=s[t];void 0===h&&(h={},s[t]=h),h[r]=e,e._cacheIndex=c.length,c.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,s=r.rootNode.uuid,c=r.path,h=this._bindingsByRootAndName,_=h[s],S=t[t.length-1],A=e._cacheIndex;S._cacheIndex=A,t[A]=S,t.pop(),delete _[c],0===Object.keys(_).length&&delete h[s]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,s=this._nActiveBindings++,c=t[s];e._cacheIndex=s,t[s]=e,c._cacheIndex=r,t[r]=c}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,s=--this._nActiveBindings,c=t[s];e._cacheIndex=s,t[s]=e,c._cacheIndex=r,t[r]=c}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return void 0===r&&(r=new f4(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,s=--this._nActiveControlInterpolants,c=t[s];e.__cacheIndex=s,t[s]=e,c.__cacheIndex=r,t[r]=c}clipAction(e,t,r){const s=t||this._root,c=s.uuid;let h="string"==typeof e?XT.findByName(s,e):e;const _=null!==h?h.uuid:e,S=this._actionsByClip[_];let A=null;if(void 0===r&&(r=null!==h?h.blendMode:2500),void 0!==S){const G=S.actionByRoot[c];if(void 0!==G&&G.blendMode===r)return G;A=S.knownActions[0],null===h&&(h=A._clip)}if(null===h)return null;const O=new Qie(this,h,t,r);return this._bindAction(O,A),this._addInactiveAction(O,_,c),O}existingAction(e,t){const r=t||this._root,s=r.uuid,c="string"==typeof e?XT.findByName(r,e):e,_=this._actionsByClip[c?c.uuid:e];return void 0!==_&&_.actionByRoot[s]||null}stopAllAction(){const e=this._actions;for(let r=this._nActiveActions-1;r>=0;--r)e[r].stop();return this}update(e){const t=this._actions,r=this._nActiveActions,s=this.time+=e*=this.timeScale,c=Math.sign(e),h=this._accuIndex^=1;for(let A=0;A!==r;++A)t[A]._update(s,e,c,h);const _=this._bindings,S=this._nActiveBindings;for(let A=0;A!==S;++A)_[A].apply(h);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,s=this._actionsByClip,c=s[r];if(void 0!==c){const h=c.knownActions;for(let _=0,S=h.length;_!==S;++_){const A=h[_];this._deactivateAction(A);const O=A._cacheIndex,G=t[t.length-1];A._cacheIndex=null,A._byClipCacheIndex=null,G._cacheIndex=O,t[O]=G,t.pop(),this._removeInactiveBindingsForAction(A)}delete s[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const h in r){const S=r[h].actionByRoot[t];void 0!==S&&(this._deactivateAction(S),this._removeInactiveAction(S))}const c=this._bindingsByRootAndName[t];if(void 0!==c)for(const h in c){const _=c[h];_.restoreOriginalState(),this._removeInactiveBinding(_)}}uncacheAction(e,t){const r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class hP{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new hP(void 0===this.value.clone?this.value:this.value.clone())}}(class ere extends B0{constructor(e,t,r=1){super(e,t),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;const H4=new ci;class gM{constructor(e=new ci(1/0,1/0),t=new ci(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=H4.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return H4.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}gM.prototype.isBox2=!0;const k_=new ot,eD=new Pr,fP=new Pr;function U4(n){const e=[];n&&n.isBone&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,U4(n.children[t]));return e}class q4 extends E_{constructor(e=10,t=10,r=4473924,s=8947848){r=new er(r),s=new er(s);const c=t/2,h=e/t,_=e/2,S=[],A=[];for(let X=0,te=0,ue=-_;X<=t;X++,ue+=h){S.push(-_,0,ue,_,0,ue),S.push(ue,0,-_,ue,0,_);const ve=X===c?r:s;ve.toArray(A,te),te+=3,ve.toArray(A,te),te+=3,ve.toArray(A,te),te+=3,ve.toArray(A,te),te+=3}const O=new as;O.setAttribute("position",new vr(S,3)),O.setAttribute("color",new vr(A,3)),super(O,new Hc({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}const X4=new Float32Array(1);new Int32Array(X4.buffer),yd.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(yd.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n},OT.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)},q4.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class ire extends E_{constructor(e){const t=U4(e),r=new as,s=[],c=[],h=new er(0,0,1),_=new er(0,1,0);for(let A=0;A<t.length;A++){const O=t[A];O.parent&&O.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),c.push(h.r,h.g,h.b),c.push(_.r,_.g,_.b))}r.setAttribute("position",new vr(s,3)),r.setAttribute("color",new vr(c,3)),super(r,new Hc({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,s=r.getAttribute("position");fP.copy(this.root.matrixWorld).invert();for(let c=0,h=0;c<t.length;c++){const _=t[c];_.parent&&_.parent.isBone&&(eD.multiplyMatrices(fP,_.matrixWorld),k_.setFromMatrixPosition(eD),s.setXYZ(h,k_.x,k_.y,k_.z),eD.multiplyMatrices(fP,_.parent.matrixWorld),k_.setFromMatrixPosition(eD),s.setXYZ(h+1,k_.x,k_.y,k_.z),h+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},R_.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),class lP{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let r=0,s=e.length;r<s;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(r){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}.extractUrlBase(n)},R_.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},gM.prototype.center=function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)},gM.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},gM.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},gM.prototype.size=function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)},_d.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)},_d.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},_d.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},_d.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},_d.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)},oy.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},uT.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)},Oc.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},Oc.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},Oc.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Oc.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},Oc.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Oc.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},Pr.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)},Pr.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},Pr.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new ot).setFromMatrixColumn(this,3)},Pr.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)},Pr.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Pr.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Pr.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Pr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Pr.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)},Pr.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Pr.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Pr.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Pr.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Pr.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Pr.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Pr.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Pr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Pr.prototype.makeFrustum=function(n,e,t,r,s,c){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,r,t,s,c)},Pr.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},Um.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)},bu.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)},bu.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},ay.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},ay.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)},ay.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},fc.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},fc.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)},fc.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)},fc.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)},fc.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)},fc.barycoordFromPoint=function(n,e,t,r,s){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),fc.getBarycoord(n,e,t,r,s)},fc.normal=function(n,e,t,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),fc.getNormal(n,e,t,r)},Gm.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)},Gm.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new A_(this,n)},Gm.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new dM(this,n)},ci.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},ci.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},ci.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ot.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},ot.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},ot.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)},ot.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)},ot.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)},ot.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)},ot.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},ot.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},ot.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ya.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},ya.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ta.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)},ta.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},ta.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)},ta.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},ta.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(ta.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Tc.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Tc.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Vk.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Bc.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(n)},Object.defineProperties(_p.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}}),Object.defineProperties(Ra.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===W1},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(W1)}}}),Ra.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?W1:G1),this},Ra.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Ra.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},as.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)},as.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===n?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new Ra(arguments[1],arguments[2])))},as.prototype.addDrawCall=function(n,e,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)},as.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},as.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},as.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)},as.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(as.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),B0.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?W1:G1),this},B0.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},A_.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},A_.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},A_.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},_T.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},hP.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(ou.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new er}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(w_.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}}),ca.prototype.clearTarget=function(n,e,t,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,r)},ca.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)},ca.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},ca.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},ca.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},ca.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},ca.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},ca.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},ca.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},ca.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},ca.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},ca.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},ca.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},ca.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},ca.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)},ca.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},ca.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},ca.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},ca.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},ca.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},ca.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},ca.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},ca.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},ca.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},ca.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(ca.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===n?hl:p_}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(xV.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(gd.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}}),class Bie extends ta{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new Pie).load(n,function(r){e.setBuffer(r)}),this},Sk.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)},Sk.prototype.clear=function(n,e,t,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,r)},ny.crossOrigin=void 0,ny.loadTexture=function(n,e,t,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const s=new Die;s.setCrossOrigin(this.crossOrigin);const c=s.load(n,t,void 0,r);return e&&(c.mapping=e),c},ny.loadTextureCube=function(n,e,t,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const s=new Eie;s.setCrossOrigin(this.crossOrigin);const c=s.load(n,t,void 0,r);return e&&(c.mapping=e),c},ny.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},ny.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"137"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="137");var lre=D(181);let J4=(()=>{class n{constructor(){this.aspectRatio=0,this.Width=0,this.Height=0,this.scene=new _T,this.scene.background=new er(5396334),this.render=this.render.bind(this)}OnInit(t,r,s,c,h){this.aspectRatio=t,this.Width=c,this.Height=h,this.createCamera(t,c,h),this.add(new aP(15790320)),this.createRender(r,s,c,h),this.addControls(),this.createHelper()}createHelper(){this.GridHelper=new q4(200,20),this.GridHelper.geometry.rotateX(Math.PI/2),this.scene.add(this.GridHelper)}addControls(){new lre.OrbitControls(this.camera,this.renderer.domElement).addEventListener("change",this.render)}createCamera(t,r,s){t=null===t?this.aspectRatio:t,r=null===r?this.Width:r,s=null===s?this.Height:s,void 0!==this.scene.getObjectByName("camera")&&this.scene.remove(this.camera),this.camera=new Bc(70,t,.1,1e3),this.camera.position.set(0,-50,20),this.camera.name="camera",this.scene.add(this.camera)}createRender(t,r,s,c){this.renderer=new ca({preserveDrawingBuffer:!0,canvas:t,alpha:!0,antialias:!0}),this.renderer.setPixelRatio(r),this.renderer.setSize(s,c),this.renderer.shadowMap.enabled=!0}onResize(t,r,s){this.camera.updateProjectionMatrix(),this.renderer.setSize(r,s),this.render()}render(){this.renderer.render(this.scene,this.camera)}getBoundingClientRect(){return this.renderer.domElement.getBoundingClientRect()}add(...t){for(const r of t)this.scene.add(r)}remove(...t){for(const r of t)this.scene.remove(r)}removeByName(...t){for(const r of t){const s=this.scene.getObjectByName(r);void 0!==s&&this.scene.remove(s)}}getSettingJson(){return{camera:{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z}}}clear(){for(;this.scene.children.length>0;)this.scene.remove(this.scene.children[0]);this.createHelper()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),K4=(()=>{class n{constructor(t){this.scene=t}loadVYK(t){this.scene.clear();const r=this.parseASCII(t),s=r.box,c=new Vm({vertexColors:!0}),h=new Tc(s,c);this.scene.add(h);const _=new Hc({color:255});for(const S of r.edge){const A=new S_(S,_);this.scene.add(A)}this.scene.render()}parseASCII(t){const r=[],s=new Array,c=[],h=[],_=[],S=[];let A;const O=/^[^\d.\s-]+/,G=/^(\d+)\s+([\s\d]*)/,X=/^POINTS /,te=/^POLYGONS /,ue=/^TRIANGLE_STRIPS /,ve=/^POINT_DATA[ ]+(\d+)/,Ie=/^CELL_DATA[ ]+(\d+)/,ye=/^SCALARS[ ]+(\w+)[ ]+3/,de=/^NORMALS[ ]+(\w+)[ ]+(\w+)/;let Ge=!1,Oe=!1,$e=!1,ht=!1,vt=!1,Nt=!1,Cn=!1;const hn=t.split("\n");for(const At in hn){const Zt=hn[At].trim();if(0===Zt.indexOf("DATASET")){const $t=Zt.split(" ")[1];if("POLYDATA"!==$t&&"UNSTRUCTURED_GRID"!==$t)throw new Error("Unsupported DATASET type: "+$t)}else if(Ge){if(A=Zt.split(" "),null==O.exec(Zt)){const $t=parseFloat(A[0]),tn=parseFloat(A[1]),_t=parseFloat(A[2]);c.push($t,tn,_t)}}else if(Oe){if(null!==(A=G.exec(Zt))){const $t=parseInt(A[1]),tn=A[2].split(/\s+/);if($t>=3){const _t=parseInt(tn[0]);let Ut=1;for(let ln=0;ln<$t-2;++ln){const Gn=parseInt(tn[Ut]),vn=parseInt(tn[Ut+1]);r.push(_t,Gn,vn),Ut++}}}}else if($e){if(null!==(A=G.exec(Zt))){const $t=parseInt(A[1]),tn=A[2].split(/\s+/);if($t>=3)for(let _t=0;_t<$t-2;_t++)if(_t%2==1){const Ut=parseInt(tn[_t]),ln=parseInt(tn[_t+2]),Gn=parseInt(tn[_t+1]);r.push(Ut,ln,Gn)}else{const Ut=parseInt(tn[_t]),ln=parseInt(tn[_t+1]),Gn=parseInt(tn[_t+2]);r.push(Ut,ln,Gn)}}}else if(ht||vt)if(Nt){if(A=Zt.split(" "),null==O.exec(Zt))if(A.length<3){const $t=parseFloat(Zt);isNaN($t)||_.push($t)}else{const $t=parseFloat(A[0]),tn=parseFloat(A[1]),_t=parseFloat(A[2]);h.push($t,tn,_t)}}else if(Cn){if(A=Zt.split(" "),null==O.exec(Zt)){const $t=parseFloat(A[0]),tn=parseFloat(A[1]),_t=parseFloat(A[2]);S.push($t,tn,_t)}}else if(null!==(A=G.exec(Zt))){const $t=parseInt(A[1]),tn=A[2].split(/\s+/);if(8==$t){[0,2,1,0,3,2,0,1,5,0,5,4,1,2,6,1,6,5,2,7,6,2,3,7,3,0,7,0,4,7,4,5,6,4,6,7].forEach(Gn=>r.push(parseInt(tn[Gn])));const _t=new Array;[4,0,1,5,6,2,1,5,4,0,3,7,6,2,3,7,6,5,4,7].forEach(Gn=>{_t.push(parseInt(tn[Gn]))});const Ut=[];_t.forEach(Gn=>{Ut.push(new ot(c[3*Gn],c[3*Gn+1],c[3*Gn+2]))});const ln=(new as).setFromPoints(Ut);s.push(ln)}}null!==te.exec(Zt)?(Oe=!0,Ge=!1,$e=!1):null!==X.exec(Zt)?(Oe=!1,Ge=!0,$e=!1):null!==ue.exec(Zt)?(Oe=!1,Ge=!1,$e=!0):null!==ve.exec(Zt)?(ht=!0,Ge=!1,Oe=!1,$e=!1):Zt.toLowerCase().includes("cells")?(vt=!0,Ge=!1,Oe=!1,$e=!1,Nt=!1,Cn=!1):null!==Ie.exec(Zt)?(vt=!0,Ge=!1,Oe=!1,$e=!1):null!==ye.exec(Zt)||Zt.toLowerCase().includes("scalars")?(Nt=!0,Cn=!1,Ge=!1,Oe=!1,$e=!1):null!==de.exec(Zt)&&(Cn=!0,Nt=!1,Ge=!1,Oe=!1,$e=!1)}let Xe=new as;if(Xe.setIndex(r),Xe.setAttribute("position",new vr(c,3)),S.length===c.length&&Xe.setAttribute("normal",new vr(S,3)),h.length!==r.length)if(h.length===c.length)Xe.setAttribute("color",new vr(h,3));else if(_.length===s.length){Xe=Xe.toNonIndexed();const tn=Xe.attributes.position.count/3,_t=[],Ut=new er(15790320);for(let ln=0;ln<tn;ln++){const Gn=Ut.r,vn=Ut.g,Un=Ut.b;_t.push(Gn,vn,Un),_t.push(Gn,vn,Un),_t.push(Gn,vn,Un)}Xe.setAttribute("color",new vr(_t,3))}else{Xe=Xe.toNonIndexed();const tn=Xe.attributes.position.count/3,_t=[],Ut=new er(15790320);for(let ln=0;ln<tn;ln++){const Gn=Ut.r,vn=Ut.g,Un=Ut.b;_t.push(Gn,vn,Un),_t.push(Gn,vn,Un),_t.push(Gn,vn,Un)}Xe.setAttribute("color",new vr(_t,3))}else{Xe=Xe.toNonIndexed();const tn=Xe.attributes.position.count/3;if(h.length===3*tn){const _t=[];for(let Ut=0;Ut<tn;Ut++){const ln=h[3*Ut+0],Gn=h[3*Ut+1],vn=h[3*Ut+2];_t.push(ln,Gn,vn),_t.push(ln,Gn,vn),_t.push(ln,Gn,vn)}Xe.setAttribute("color",new vr(_t,3))}}return{box:Xe,edge:s}}}return n.\u0275fac=function(t){return new(t||n)(wn(J4))},n.\u0275prov=Ai({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var cre=D(788),ure=D.n(cre);D(853),D(405);const hre=["pqgrid"];let Q4=(()=>{class n{createGrid(){this.grid=ure().grid(this.div.nativeElement,this.options)}ngOnChanges(t){t.options.firstChange||(this.grid.destroy(),this.createGrid())}ngAfterViewInit(){this.createGrid()}refreshDataAndView(){null!==this.grid&&(this.grid.refreshDataAndView(),console.log("refreshDataAndView"))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rr({type:n,selectors:[["app-sheet"]],viewQuery:function(t,r){if(1&t&&cd(hre,5),2&t){let s;Va(s=Ua())&&(r.div=s.first)}},inputs:{options:"options"},features:[xi],decls:3,vars:0,consts:[[1,"datasheet"],["pqgrid",""]],template:function(t,r){1&t&&(Kr(0,"div",0),sc(1,"div",null,1),us())},styles:["div.pq-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 5px}button.delete_btn[_ngcontent-%COMP%]{margin:-3px 0}.pq-row-delete[_ngcontent-%COMP%]{text-decoration:line-through}.pq-row-delete[_ngcontent-%COMP%] > .pq-grid-cell[_ngcontent-%COMP%]{background-color:pink}.datasheet[_ngcontent-%COMP%]{padding:0 16px 16px;z-index:1}"]}),n})();const dre=["grid"];let fre=(()=>{class n{constructor(t,r,s,c){this.http=t,this.dialogRef=r,this.data=s,this.vtk=c,this.options={width:270,height:430,locale:"jp",showTop:!1,showHeader:!1,resizable:!1,draggable:!1,numberCell:{show:!0},stripeRows:!1,colModel:[{title:"key",width:160,editable:!1,dataType:"string"},{title:"value",width:70,dataType:"float"}],dataModel:{data:this.data.body},change:(h,_)=>{this.data.isCalcrated=!1}}}ngOnInit(){null==this.data.get_vtk()?this.get_vtk("assets/default_bridge.vtk"):this.vtk.loadVYK(this.data.get_vtk())}apply(){const t=this.data.getPlantFEMJson(),r=new window.File([t],"generate_bridge.json",{type:"application/json"}),s=new FormData;s.append("files",r,r.name),this.http.post("https://plantfem.org:5555/bridge_creator/uploadfile",s,{responseType:"text"}).subscribe(c=>{const S=(new DOMParser).parseFromString(c,"text/html").getElementsByClassName("g-3");for(let A=0;A<S.length;A++){let X="https://plantfem.org:5555/bridge_creator/downloadfile/?filename=";X+=S[A][0].value,this.get_vtk(X);break}},c=>{alert("error get_vtk_link()"),console.error(c)})}get_vtk(t){this.http.get(t,{responseType:"text"}).subscribe(r=>{this.data.set_vtk(r),this.vtk.loadVYK(r)},r=>{alert(r.message),console.error(r)})}}return n.\u0275fac=function(t){return new(t||n)(Ot(x1),Ot(C1),Ot(PE),Ot(K4))},n.\u0275cmp=rr({type:n,selectors:[["app-side-right-body"]],viewQuery:function(t,r){if(1&t&&cd(dre,5),2&t){let s;Va(s=Ua())&&(r.grid=s.first)}},decls:10,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"options"],["grid",""],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close"]],template:function(t,r){1&t&&(Kr(0,"h1",0),ni(1,"\u9ad8\u67b6\u6a4b\u30e2\u30c7\u30eb\u306e\u751f\u6210"),us(),Kr(2,"div",1),sc(3,"app-sheet",2,3),us(),Kr(5,"div",4)(6,"button",5),Fo("click",function(){return r.apply()}),ni(7,"\u66f4\u65b0"),us(),Kr(8,"button",6),ni(9,"\u89e3\u6790\u6761\u4ef6\u3078"),us()()),2&t&&(Vr(3),is("options",r.options),Vr(5),is("mat-dialog-close",2))},directives:[u2,h2,Q4,d2,fE,c2],styles:[".my-radio-group[_ngcontent-%COMP%]{margin-left:15px;margin-bottom:10px}.mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}.result-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0;align-items:flex-start}.result-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),n})();const pre=["grid"];let mre=(()=>{class n{constructor(t,r,s){this.http=t,this.dialogRef=r,this.data=s,this.options={width:270,height:430,locale:"jp",showTop:!1,showHeader:!1,resizable:!1,draggable:!1,numberCell:{show:!0},stripeRows:!1,colModel:[{title:"key",width:160,editable:!1,dataType:"string"},{title:"value",width:70,dataType:"float"}],dataModel:{data:this.data.pre},change:(c,h)=>{this.data.isCalcrated=!1}}}ngOnInit(){}create_access_token(){if(!0===this.data.isCalcrated)return;const t=this.data.get_vtk(),r=new window.File([t],"generate_bridge.vtk",{type:"text/plain"}),s=new FormData;s.append("files",r,r.name),this.http.post("https://plantfem.org:5555/upload_vtk_file/",s,{responseType:"text"}).subscribe(c=>{const S=(new DOMParser).parseFromString(c,"text/html").getElementsByClassName("g-3");for(let A=0;A<S.length;A++){this.calc_modal_analysis(S[A][0].value);break}},c=>{alert("error create_access_token()"),console.error(c)})}calc_modal_analysis(t){const r=this.data.get_calc_url(t);this.http.get(r,{responseType:"text"}).subscribe(s=>{this.parse_result_page(s)},s=>{alert(s.message),console.error(s)})}parse_result_page(t){const c=(new DOMParser).parseFromString(t,"text/html").getElementsByName("filename");for(let h=0;h<c.length;h++){let A="https://plantfem.org:5555/downloadfile/?filename=";A+=c[h].value,this.get_vtk(A,h)}this.data.isCalcrated=!0}get_vtk(t,r){this.http.get(t,{responseType:"text"}).subscribe(s=>{this.data.set_result_vtk(s,r)},s=>{alert(s.message),console.error(s)})}}return n.\u0275fac=function(t){return new(t||n)(Ot(x1),Ot(C1),Ot(PE))},n.\u0275cmp=rr({type:n,selectors:[["app-side-right-pre"]],viewQuery:function(t,r){if(1&t&&cd(pre,5),2&t){let s;Va(s=Ua())&&(r.grid=s.first)}},decls:16,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"my-radio-group"],["aria-label","Select an option"],["value","1","checked",""],["value","2","disabled","true"],[3,"options"],["grid",""],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close"],["mat-raised-button","","color","primary",3,"mat-dialog-close","click"]],template:function(t,r){1&t&&(Kr(0,"h1",0),ni(1,"\u89e3\u6790\u6761\u4ef6\u306e\u8a2d\u5b9a"),us(),Kr(2,"div",1)(3,"div",2)(4,"mat-radio-group",3)(5,"mat-radio-button",4),ni(6,"\u9759\u7684\u89e3\u6790"),us(),Kr(7,"mat-radio-button",5),ni(8,"\u30e2\u30fc\u30c9\u89e3\u6790"),us()()(),sc(9,"app-sheet",6,7),us(),Kr(11,"div",8)(12,"button",9),ni(13,"\u623b\u308b"),us(),Kr(14,"button",10),Fo("click",function(){return r.create_access_token()}),ni(15,"\u89e3\u6790\u7d50\u679c"),us()()),2&t&&(Vr(9),is("options",r.options),Vr(3),is("mat-dialog-close",1),Vr(2),is("mat-dialog-close",3))},directives:[u2,h2,_2,v2,Q4,d2,fE,c2],styles:[".my-radio-group[_ngcontent-%COMP%]{margin-left:15px;margin-bottom:10px}.mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}.result-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0;align-items:flex-start}.result-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),n})();function gre(n,e){if(1&n){const t=Kg();Kr(0,"mat-radio-button",6),Fo("change",function(){return nc(t),oa().radioChange()}),ni(1),us()}if(2&n){const t=e.$implicit;is("value",t),Vr(1),kr(" ",t," ")}}let _re=(()=>{class n{constructor(t,r){this.data=t,this.vtk=r,this.seasons=["Deformation & mean stress","Deformation & s(1,1)","Deformation & s(2,2)","Deformation & s(3,3)","Deformation & s(1,2)","Deformation & s(1,3)","Deformation & s(2,3)"]}ngOnInit(){this.favoriteSeason=this.seasons[0],this.radioChange()}radioChange(){let t=0;for(t=0;t<this.seasons.length&&this.seasons[t]!==this.favoriteSeason;t++);const r=this.data.get_result_vtk(t);this.vtk.loadVYK(r)}}return n.\u0275fac=function(t){return new(t||n)(Ot(PE),Ot(K4))},n.\u0275cmp=rr({type:n,selectors:[["app-side-right-static-result"]],decls:10,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["aria-labelledby","example-radio-group-label",1,"result-radio-group",3,"ngModel","ngModelChange"],["class","result-radio-button",3,"value","change",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-raised-button","","color","primary",3,"mat-dialog-close"],[1,"result-radio-button",3,"value","change"]],template:function(t,r){1&t&&(Kr(0,"h1",0),ni(1,"\u89e3\u6790\u7d50\u679c\u306e\u8868\u793a"),us(),Kr(2,"div",1)(3,"mat-radio-group",2),Fo("ngModelChange",function(c){return r.favoriteSeason=c}),bs(4,gre,2,2,"mat-radio-button",3),us(),Kr(5,"div"),ni(6),us()(),Kr(7,"div",4)(8,"button",5),ni(9,"\u89e3\u6790\u6761\u4ef6\u306e\u8a2d\u5b9a\u306b\u623b\u308b"),us()()),2&t&&(Vr(3),is("ngModel",r.favoriteSeason),Vr(1),is("ngForOf",r.seasons),Vr(2),kr("Your favorite season is: ",r.favoriteSeason,""),Vr(2),is("mat-dialog-close",2))},directives:[u2,h2,_2,MO,WI,fI,v2,d2,fE,c2],styles:[".my-radio-group[_ngcontent-%COMP%]{margin-left:15px;margin-bottom:10px}.mat-radio-button[_ngcontent-%COMP%] ~ .mat-radio-button[_ngcontent-%COMP%]{margin-left:16px}.result-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0;align-items:flex-start}.result-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),n})();const vre=["stepper"];function yre(n,e){1&n&&sc(0,"mat-step",13),2&n&&is("stepControl",oa().dummyFormGroup)}let bre=(()=>{class n{constructor(t,r,s){this.dialog=t,this._formBuilder=r,this.data=s,this.dummyFormGroup=this._formBuilder.group({firstCtrl:["",r8.required]})}ngOnInit(){this.openBodyDialog()}stepChange(t){this.currentDialog.close(-1*(t.selectedIndex+1))}openBodyDialog(){this.currentDialog=this.openDialog(fre),this.currentDialog.afterClosed().subscribe(t=>{2===Math.abs(t)?(t>0&&this.myStepper.next(),this.openPreDialog()):3===Math.abs(t)&&(t>0&&(this.myStepper.next(),this.myStepper.next()),this.openStaticResultDialog())})}openPreDialog(){this.currentDialog=this.openDialog(mre),this.currentDialog.afterClosed().subscribe(t=>{1===Math.abs(t)?(t>0&&this.myStepper.previous(),this.openBodyDialog()):3===Math.abs(t)&&(t>0&&this.myStepper.next(),this.openStaticResultDialog())})}openStaticResultDialog(){this.currentDialog=this.openDialog(_re),this.currentDialog.afterClosed().subscribe(t=>{2===Math.abs(t)?(t>0&&this.myStepper.previous(),this.openPreDialog()):1===Math.abs(t)&&(t>0&&(this.myStepper.previous(),this.myStepper.previous()),this.openBodyDialog())})}openDialog(t){const s=window.innerHeight-100;return this.dialog.open(t,{width:"350px",height:s+"px",position:{right:"10px",top:"70px"},hasBackdrop:!1})}open(t){const r=t.target.files[0];t.target.value="",this.fileToText(r).then(s=>{JSON.parse(s)}).catch(s=>{alert(s)})}fileToText(t){const r=new FileReader;return r.readAsText(t),new Promise((s,c)=>{r.onload=()=>{s(r.result)},r.onerror=()=>{c(r.error)}})}save(){const t=JSON.stringify({});new window.Blob([t],{type:"text/plain"})}}return n.\u0275fac=function(t){return new(t||n)(Ot(cE),Ot(K8),Ot(PE))},n.\u0275cmp=rr({type:n,selectors:[["app-menu"]],viewQuery:function(t,r){if(1&t&&cd(vre,5),2&t){let s;Va(s=Ua())&&(r.myStepper=s.first)}},decls:24,vars:4,consts:[["color","primary"],["mat-icon-button","","aria-label","Example icon-button with menu icon",1,"example-icon",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item",""],["type","file","accept","application/json",2,"display","none",3,"change"],["mat-menu-item","",3,"click"],[1,"example-spacer"],[2,"height","64px",3,"selectionChange"],["stepper",""],["label","3D\u30e2\u30c7\u30eb\u751f\u6210",3,"stepControl"],["label","\u89e3\u6790\u6761\u4ef6",3,"stepControl"],["label","\u89e3\u6790\u7d50\u679c",3,"stepControl",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon",1,"example-icon"],["label","\u89e3\u6790\u7d50\u679c",3,"stepControl"]],template:function(t,r){if(1&t&&(Kr(0,"mat-toolbar",0)(1,"button",1)(2,"mat-icon"),ni(3,"menu"),us()(),Kr(4,"mat-menu",null,2)(6,"label",3)(7,"span"),ni(8," \u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304f "),Kr(9,"input",4),Fo("change",function(c){return r.open(c)}),us()()(),Kr(10,"button",5),Fo("click",function(){return r.save()}),ni(11,"\u30d5\u30a1\u30a4\u30eb\u3092\u4fdd\u5b58"),us()(),Kr(12,"span"),ni(13,"plantFEM-\u9ad8\u67b6\u6a4bFEM\u89e3\u6790"),us(),sc(14,"span",6),Kr(15,"mat-stepper",7,8),Fo("selectionChange",function(c){return r.stepChange(c)}),sc(17,"mat-step",9)(18,"mat-step",10),bs(19,yre,1,1,"mat-step",11),us(),sc(20,"span",6),Kr(21,"button",12)(22,"mat-icon"),ni(23,"share"),us()()()),2&t){const s=Xg(5);Vr(1),is("matMenuTriggerFor",s),Vr(16),is("stepControl",r.dummyFormGroup),Vr(1),is("stepControl",r.dummyFormGroup),Vr(1),is("ngIf",r.data.isCalcrated)}},directives:[VY,fE,FY,gB,RY,_E,TB,SB,t1],styles:[".example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]}),n})();const xre=["myCanvas"];let wre=(()=>{class n{constructor(t,r){this.ngZone=t,this.scene=r,ta.DefaultUp.set(0,0,1)}get canvas(){return this.canvasRef.nativeElement}ngAfterViewInit(){this.scene.OnInit(this.getAspectRatio(),this.canvas,devicePixelRatio,window.innerWidth,window.innerHeight),this.animate()}ngOnDestroy(){}animate(){this.ngZone.runOutsideAngular(()=>{window.addEventListener("DOMContentLoaded",()=>{this.scene.render()})})}onMouseDown(t){}onMouseUp(t){}onMouseMove(t){}onResize(t){this.scene.onResize(this.getAspectRatio(),window.innerWidth,window.innerHeight)}getAspectRatio(){return 0===this.canvas.clientHeight?0:this.canvas.clientWidth/this.canvas.clientHeight}}return n.\u0275fac=function(t){return new(t||n)(Ot(vo),Ot(J4))},n.\u0275cmp=rr({type:n,selectors:[["app-three"]],viewQuery:function(t,r){if(1&t&&cd(xre,7),2&t){let s;Va(s=Ua())&&(r.canvasRef=s.first)}},hostBindings:function(t,r){1&t&&Fo("mousedown",function(c){return r.onMouseDown(c)})("mouseup",function(c){return r.onMouseUp(c)})("mousemove",function(c){return r.onMouseMove(c)})("resize",function(c){return r.onResize(c)},!1,wx)},decls:2,vars:0,consts:[["id","myCanvasS",3,"mousedown","mouseup","mousemove"],["myCanvas",""]],template:function(t,r){1&t&&(Kr(0,"canvas",0,1),Fo("mousedown",function(c){return r.onMouseDown(c)})("mouseup",function(c){return r.onMouseUp(c)})("mousemove",function(c){return r.onMouseMove(c)}),us())},styles:["canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0}"]}),n})(),Mre=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=rr({type:n,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"over-three"]],template:function(t,r){1&t&&sc(0,"app-menu",0)(1,"app-three")},directives:[bre,wre],styles:[".over-three[_ngcontent-%COMP%]{z-index:10;position:relative}app-side-left[_ngcontent-%COMP%]{width:20%;display:block}"]}),n})(),Cre=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ys({type:n,bootstrap:[Mre]}),n.\u0275inj=Ms({providers:[],imports:[[qF,fK,X8,s3,P7,x9,y7,xZ,_B,vB,pY,m2,xY,OY,UY,eX,tX]]}),n})();D(166),function CG(){tF=!1}(),L6().bootstrapModule(Cre).catch(n=>console.error(n))},181:function(K,U,D){"use strict";var I,y=this&&this.__extends||(I=function(P,N){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,J){V.__proto__=J}||function(V,J){for(var W in J)Object.prototype.hasOwnProperty.call(J,W)&&(V[W]=J[W])})(P,N)},function(P,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function V(){this.constructor=P}I(P,N),P.prototype=null===N?Object.create(N):(V.prototype=N.prototype,new V)});Object.defineProperty(U,"__esModule",{value:!0}),U.OrbitControls=void 0;var o=D(338),g={type:"change"},p={type:"start"},v={type:"end"},M=1e-6,T=function(I){function P(N,V,J){var W=I.call(this)||this;return W.object=N,W.domElement=void 0!==V?V:document,W.window=void 0!==J?J:window,W.enabled=!0,W.target=new o.Vector3,W.minDistance=0,W.maxDistance=1/0,W.minZoom=0,W.maxZoom=1/0,W.minPolarAngle=0,W.maxPolarAngle=Math.PI,W.minAzimuthAngle=-1/0,W.maxAzimuthAngle=1/0,W.enableDamping=!1,W.dampingFactor=.25,W.enableZoom=!0,W.zoomSpeed=1,W.enableRotate=!0,W.rotateSpeed=1,W.enablePan=!0,W.keyPanSpeed=7,W.autoRotate=!1,W.autoRotateSpeed=2,W.enableKeys=!0,W.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},W.mouseButtons={ORBIT:o.MOUSE.LEFT,ZOOM:o.MOUSE.MIDDLE,PAN:o.MOUSE.RIGHT},W.target0=W.target.clone(),W.position0=W.object.position.clone(),W.zoom0=W.object.zoom,W.updateOffset=new o.Vector3,W.updateQuat=(new o.Quaternion).setFromUnitVectors(N.up,new o.Vector3(0,1,0)),W.updateQuatInverse=W.updateQuat.clone().invert(),W.updateLastPosition=new o.Vector3,W.updateLastQuaternion=new o.Quaternion,W.state=-1,W.scale=1,W.spherical=new o.Spherical,W.sphericalDelta=new o.Spherical,W.panOffset=new o.Vector3,W.zoomChanged=!1,W.rotateStart=new o.Vector2,W.rotateEnd=new o.Vector2,W.rotateDelta=new o.Vector2,W.panStart=new o.Vector2,W.panEnd=new o.Vector2,W.panDelta=new o.Vector2,W.dollyStart=new o.Vector2,W.dollyEnd=new o.Vector2,W.dollyDelta=new o.Vector2,W.panLeftV=new o.Vector3,W.panUpV=new o.Vector3,W.panInternalOffset=new o.Vector3,W.onMouseDown=function(re){if(!1!==W.enabled){if(re.preventDefault(),re.button===W.mouseButtons.ORBIT){if(!1===W.enableRotate)return;W.rotateStart.set(re.clientX,re.clientY),W.state=0}else if(re.button===W.mouseButtons.ZOOM){if(!1===W.enableZoom)return;W.dollyStart.set(re.clientX,re.clientY),W.state=1}else if(re.button===W.mouseButtons.PAN){if(!1===W.enablePan)return;W.panStart.set(re.clientX,re.clientY),W.state=2}-1!==W.state&&(document.addEventListener("mousemove",W.onMouseMove,!1),document.addEventListener("mouseup",W.onMouseUp,!1),W.dispatchEvent(p))}},W.onMouseMove=function(re){if(!1!==W.enabled)if(re.preventDefault(),0===W.state){if(!1===W.enableRotate)return;W.rotateEnd.set(re.clientX,re.clientY),W.rotateDelta.subVectors(W.rotateEnd,W.rotateStart);var ce=W.domElement===document?W.domElement.body:W.domElement;W.rotateLeft(2*Math.PI*W.rotateDelta.x/ce.clientWidth*W.rotateSpeed),W.rotateUp(2*Math.PI*W.rotateDelta.y/ce.clientHeight*W.rotateSpeed),W.rotateStart.copy(W.rotateEnd),W.update()}else if(1===W.state){if(!1===W.enableZoom)return;W.dollyEnd.set(re.clientX,re.clientY),W.dollyDelta.subVectors(W.dollyEnd,W.dollyStart),W.dollyDelta.y>0?W.dollyIn(W.getZoomScale()):W.dollyDelta.y<0&&W.dollyOut(W.getZoomScale()),W.dollyStart.copy(W.dollyEnd),W.update()}else if(2===W.state){if(!1===W.enablePan)return;W.panEnd.set(re.clientX,re.clientY),W.panDelta.subVectors(W.panEnd,W.panStart),W.pan(W.panDelta.x,W.panDelta.y),W.panStart.copy(W.panEnd),W.update()}},W.onMouseUp=function(re){!1!==W.enabled&&(document.removeEventListener("mousemove",W.onMouseMove,!1),document.removeEventListener("mouseup",W.onMouseUp,!1),W.dispatchEvent(v),W.state=-1)},W.onMouseWheel=function(re){!1===W.enabled||!1===W.enableZoom||-1!==W.state&&0!==W.state||(re.preventDefault(),re.stopPropagation(),re.deltaY<0?W.dollyOut(W.getZoomScale()):re.deltaY>0&&W.dollyIn(W.getZoomScale()),W.update(),W.dispatchEvent(p),W.dispatchEvent(v))},W.onKeyDown=function(re){if(!1!==W.enabled&&!1!==W.enableKeys&&!1!==W.enablePan)switch(re.keyCode){case W.keys.UP:W.pan(0,W.keyPanSpeed),W.update();break;case W.keys.BOTTOM:W.pan(0,-W.keyPanSpeed),W.update();break;case W.keys.LEFT:W.pan(W.keyPanSpeed,0),W.update();break;case W.keys.RIGHT:W.pan(-W.keyPanSpeed,0),W.update()}},W.onTouchStart=function(re){if(!1!==W.enabled){switch(re.touches.length){case 1:if(!1===W.enableRotate)return;W.rotateStart.set(re.touches[0].pageX,re.touches[0].pageY),W.state=3;break;case 2:if(!1===W.enableZoom)return;var ce=re.touches[0].pageX-re.touches[1].pageX,ie=re.touches[0].pageY-re.touches[1].pageY,ae=Math.sqrt(ce*ce+ie*ie);W.dollyStart.set(0,ae),W.state=4;break;case 3:if(!1===W.enablePan)return;W.panStart.set(re.touches[0].pageX,re.touches[0].pageY),W.state=5;break;default:W.state=-1}-1!==W.state&&W.dispatchEvent(p)}},W.onTouchMove=function(re){if(!1!==W.enabled)switch(re.preventDefault(),re.stopPropagation(),re.touches.length){case 1:if(!1===W.enableRotate||3!==W.state)return;W.rotateEnd.set(re.touches[0].pageX,re.touches[0].pageY),W.rotateDelta.subVectors(W.rotateEnd,W.rotateStart);var ce=W.domElement===document?W.domElement.body:W.domElement;W.rotateLeft(2*Math.PI*W.rotateDelta.x/ce.clientWidth*W.rotateSpeed),W.rotateUp(2*Math.PI*W.rotateDelta.y/ce.clientHeight*W.rotateSpeed),W.rotateStart.copy(W.rotateEnd),W.update();break;case 2:if(!1===W.enableZoom||4!==W.state)return;var ie=re.touches[0].pageX-re.touches[1].pageX,ae=re.touches[0].pageY-re.touches[1].pageY,we=Math.sqrt(ie*ie+ae*ae);W.dollyEnd.set(0,we),W.dollyDelta.subVectors(W.dollyEnd,W.dollyStart),W.dollyDelta.y>0?W.dollyOut(W.getZoomScale()):W.dollyDelta.y<0&&W.dollyIn(W.getZoomScale()),W.dollyStart.copy(W.dollyEnd),W.update();break;case 3:if(!1===W.enablePan||5!==W.state)return;W.panEnd.set(re.touches[0].pageX,re.touches[0].pageY),W.panDelta.subVectors(W.panEnd,W.panStart),W.pan(W.panDelta.x,W.panDelta.y),W.panStart.copy(W.panEnd),W.update();break;default:W.state=-1}},W.onTouchEnd=function(re){!1!==W.enabled&&(W.dispatchEvent(v),W.state=-1)},W.onContextMenu=function(re){re.preventDefault()},W.domElement.addEventListener("contextmenu",W.onContextMenu,!1),W.domElement.addEventListener("mousedown",W.onMouseDown,!1),W.domElement.addEventListener("wheel",W.onMouseWheel,!1),W.domElement.addEventListener("touchstart",W.onTouchStart,!1),W.domElement.addEventListener("touchend",W.onTouchEnd,!1),W.domElement.addEventListener("touchmove",W.onTouchMove,!1),W.window.addEventListener("keydown",W.onKeyDown,!1),W.update(),W}return y(P,I),P.prototype.update=function(){var N=this.object.position;return this.updateOffset.copy(N).sub(this.target),this.updateOffset.applyQuaternion(this.updateQuat),this.spherical.setFromVector3(this.updateOffset),this.autoRotate&&-1===this.state&&this.rotateLeft(this.getAutoRotationAngle()),this.spherical.theta+=this.sphericalDelta.theta,this.spherical.phi+=this.sphericalDelta.phi,this.spherical.theta=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,this.spherical.theta)),this.spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this.spherical.phi)),this.spherical.makeSafe(),this.spherical.radius*=this.scale,this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius)),this.target.add(this.panOffset),this.updateOffset.setFromSpherical(this.spherical),this.updateOffset.applyQuaternion(this.updateQuatInverse),N.copy(this.target).add(this.updateOffset),this.object.lookAt(this.target),!0===this.enableDamping?(this.sphericalDelta.theta*=1-this.dampingFactor,this.sphericalDelta.phi*=1-this.dampingFactor):this.sphericalDelta.set(0,0,0),this.scale=1,this.panOffset.set(0,0,0),!!(this.zoomChanged||this.updateLastPosition.distanceToSquared(this.object.position)>M||8*(1-this.updateLastQuaternion.dot(this.object.quaternion))>M)&&(this.dispatchEvent(g),this.updateLastPosition.copy(this.object.position),this.updateLastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0)},P.prototype.panLeft=function(N,V){this.panLeftV.setFromMatrixColumn(V,0),this.panLeftV.multiplyScalar(-N),this.panOffset.add(this.panLeftV)},P.prototype.panUp=function(N,V){this.panUpV.setFromMatrixColumn(V,1),this.panUpV.multiplyScalar(N),this.panOffset.add(this.panUpV)},P.prototype.pan=function(N,V){var J=this.domElement===document?this.domElement.body:this.domElement;if(this._checkPerspectiveCamera(this.object)){this.panInternalOffset.copy(this.object.position).sub(this.target);var re=this.panInternalOffset.length();re*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*N*re/J.clientHeight,this.object.matrix),this.panUp(2*V*re/J.clientHeight,this.object.matrix)}else this._checkOrthographicCamera(this.object)?(this.panLeft(N*(this.object.right-this.object.left)/this.object.zoom/J.clientWidth,this.object.matrix),this.panUp(V*(this.object.top-this.object.bottom)/this.object.zoom/J.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)},P.prototype.dollyIn=function(N){this._checkPerspectiveCamera(this.object)?this.scale/=N:this._checkOrthographicCamera(this.object)?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*N)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},P.prototype.dollyOut=function(N){this._checkPerspectiveCamera(this.object)?this.scale*=N:this._checkOrthographicCamera(this.object)?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/N)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},P.prototype.getAutoRotationAngle=function(){return 2*Math.PI/60/60*this.autoRotateSpeed},P.prototype.getZoomScale=function(){return Math.pow(.95,this.zoomSpeed)},P.prototype.rotateLeft=function(N){this.sphericalDelta.theta-=N},P.prototype.rotateUp=function(N){this.sphericalDelta.phi-=N},P.prototype.getPolarAngle=function(){return this.spherical.phi},P.prototype.getAzimuthalAngle=function(){return this.spherical.theta},P.prototype.dispose=function(){this.domElement.removeEventListener("contextmenu",this.onContextMenu,!1),this.domElement.removeEventListener("mousedown",this.onMouseDown,!1),this.domElement.removeEventListener("wheel",this.onMouseWheel,!1),this.domElement.removeEventListener("touchstart",this.onTouchStart,!1),this.domElement.removeEventListener("touchend",this.onTouchEnd,!1),this.domElement.removeEventListener("touchmove",this.onTouchMove,!1),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),this.window.removeEventListener("keydown",this.onKeyDown,!1)},P.prototype.reset=function(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(g),this.update(),this.state=-1},P.prototype.saveState=function(){this.target0.copy(this.target),this.position0.copy(this.object.position),(this._checkOrthographicCamera(this.object)||this._checkPerspectiveCamera(this.object))&&(this.zoom0=this.object.zoom)},Object.defineProperty(P.prototype,"center",{get:function(){return console.warn("Three.OrbitControls: .center has been renamed to .target"),this.target},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"noZoom",{get:function(){return console.warn("Three.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(N){console.warn("Three.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!N},enumerable:!1,configurable:!0}),P.prototype._checkPerspectiveCamera=function(N){return N.isPerspectiveCamera},P.prototype._checkOrthographicCamera=function(N){return N.isOrthographicCamera},P}(o.EventDispatcher);U.OrbitControls=T},338:(K,U,D)=>{"use strict";D.r(U),D.d(U,{ACESFilmicToneMapping:()=>rn,AddEquation:()=>st,AddOperation:()=>lt,AdditiveAnimationBlendMode:()=>au,AdditiveBlending:()=>Me,AlphaFormat:()=>St,AlwaysDepth:()=>Mn,AlwaysStencilFunc:()=>gr,AmbientLight:()=>uw,AmbientLightProbe:()=>vw,AnimationClip:()=>Ng,AnimationLoader:()=>MP,AnimationMixer:()=>hC,AnimationObjectGroup:()=>uC,AnimationUtils:()=>Ea,ArcCurve:()=>$x,ArrayCamera:()=>Lu,ArrowHelper:()=>vC,Audio:()=>rC,AudioAnalyser:()=>QD,AudioContext:()=>Sv,AudioListener:()=>JD,AudioLoader:()=>gw,AxesHelper:()=>yC,AxisHelper:()=>DC,BackSide:()=>W,BasicDepthPacking:()=>lu,BasicShadowMap:()=>I,BinaryTextureLoader:()=>ad,Bone:()=>cv,BooleanKeyframeTrack:()=>Qh,BoundingBoxHelper:()=>Pw,Box2:()=>tu,Box3:()=>Po,Box3Helper:()=>gC,BoxBufferGeometry:()=>Iu,BoxGeometry:()=>Iu,BoxHelper:()=>Xg,BufferAttribute:()=>zr,BufferGeometry:()=>yr,BufferGeometryLoader:()=>KM,ByteType:()=>ne,Cache:()=>Zl,Camera:()=>ic,CameraHelper:()=>rA,CanvasRenderer:()=>Lw,CanvasTexture:()=>VM,CatmullRomCurve3:()=>tw,CineonToneMapping:()=>Ln,CircleBufferGeometry:()=>Qy,CircleGeometry:()=>Qy,ClampToEdgeWrapping:()=>es,Clock:()=>tC,Color:()=>Ji,ColorKeyframeTrack:()=>Yx,CompressedTexture:()=>Ou,CompressedTextureLoader:()=>Kx,ConeBufferGeometry:()=>$y,ConeGeometry:()=>$y,CubeCamera:()=>Qa,CubeReflectionMapping:()=>pi,CubeRefractionMapping:()=>ur,CubeTexture:()=>yc,CubeTextureLoader:()=>Qx,CubeUVReflectionMapping:()=>ro,CubeUVRefractionMapping:()=>ha,CubicBezierCurve:()=>yb,CubicBezierCurve3:()=>iw,CubicInterpolant:()=>_v,CullFaceBack:()=>v,CullFaceFront:()=>M,CullFaceFrontBack:()=>T,CullFaceNone:()=>p,Curve:()=>eu,CurvePath:()=>JM,CustomBlending:()=>le,CustomToneMapping:()=>ui,CylinderBufferGeometry:()=>Eg,CylinderGeometry:()=>Eg,Cylindrical:()=>iA,DataTexture:()=>Bd,DataTexture2DArray:()=>_e,DataTexture3D:()=>Ce,DataTextureLoader:()=>hb,DataUtils:()=>oA,DecrementStencilOp:()=>ze,DecrementWrapStencilOp:()=>Et,DefaultLoadingManager:()=>YM,DepthFormat:()=>Di,DepthStencilFormat:()=>Ci,DepthTexture:()=>Fx,DirectionalLight:()=>pm,DirectionalLightHelper:()=>mC,DiscreteInterpolant:()=>Fg,DodecahedronBufferGeometry:()=>fv,DodecahedronGeometry:()=>fv,DoubleSide:()=>re,DstAlphaFactor:()=>It,DstColorFactor:()=>ei,DynamicBufferAttribute:()=>sp,DynamicCopyUsage:()=>ra,DynamicDrawUsage:()=>Ls,DynamicReadUsage:()=>rr,EdgesGeometry:()=>Vr,EdgesHelper:()=>oa,EllipseCurve:()=>Hg,EqualDepth:()=>ti,EqualStencilFunc:()=>si,EquirectangularReflectionMapping:()=>Gs,EquirectangularRefractionMapping:()=>wr,Euler:()=>Ke,EventDispatcher:()=>pl,ExtrudeBufferGeometry:()=>Wf,ExtrudeGeometry:()=>Wf,FaceColors:()=>Ot,FileLoader:()=>Nu,FlatShading:()=>ce,Float16BufferAttribute:()=>kd,Float32Attribute:()=>gA,Float32BufferAttribute:()=>Fn,Float64Attribute:()=>TC,Float64BufferAttribute:()=>Ba,FloatType:()=>gt,Fog:()=>yg,FogExp2:()=>rv,Font:()=>mw,FontLoader:()=>ZD,FrontSide:()=>J,Frustum:()=>Lp,GLBufferAttribute:()=>qg,GLSL1:()=>ys,GLSL3:()=>Fl,GammaEncoding:()=>Bh,GreaterDepth:()=>cr,GreaterEqualDepth:()=>Fs,GreaterEqualStencilFunc:()=>ns,GreaterStencilFunc:()=>un,GridHelper:()=>xw,Group:()=>vg,HalfFloatType:()=>xt,HemisphereLight:()=>rw,HemisphereLightHelper:()=>fC,HemisphereLightProbe:()=>_w,IcosahedronBufferGeometry:()=>jx,IcosahedronGeometry:()=>jx,ImageBitmapLoader:()=>pw,ImageLoader:()=>Bg,ImageUtils:()=>ml,ImmediateRenderObject:()=>ep,IncrementStencilOp:()=>Ne,IncrementWrapStencilOp:()=>Ye,InstancedBufferAttribute:()=>Eb,InstancedBufferGeometry:()=>mm,InstancedInterleavedBuffer:()=>bw,InstancedMesh:()=>om,Int16Attribute:()=>EC,Int16BufferAttribute:()=>Id,Int32Attribute:()=>Fo,Int32BufferAttribute:()=>uu,Int8Attribute:()=>op,Int8BufferAttribute:()=>tc,IntType:()=>Ue,InterleavedBuffer:()=>Jc,InterleavedBufferAttribute:()=>Kh,Interpolant:()=>fu,InterpolateDiscrete:()=>xo,InterpolateLinear:()=>vf,InterpolateSmooth:()=>xd,InvertStencilOp:()=>yt,JSONLoader:()=>IC,KeepStencilOp:()=>ge,KeyframeTrack:()=>th,LOD:()=>Sx,LatheBufferGeometry:()=>Zx,LatheGeometry:()=>Zx,Layers:()=>bt,LensFlare:()=>kC,LessDepth:()=>Sn,LessEqualDepth:()=>zi,LessEqualStencilFunc:()=>on,LessStencilFunc:()=>xn,Light:()=>td,LightProbe:()=>Ug,Line:()=>wh,Line3:()=>$f,LineBasicMaterial:()=>yl,LineCurve:()=>Xf,LineCurve3:()=>bb,LineDashedMaterial:()=>um,LineLoop:()=>Jy,LinePieces:()=>fA,LineSegments:()=>Kc,LineStrip:()=>Aw,LinearEncoding:()=>sl,LinearFilter:()=>Xi,LinearInterpolant:()=>hm,LinearMipMapLinearFilter:()=>H,LinearMipMapNearestFilter:()=>b,LinearMipmapLinearFilter:()=>k,LinearMipmapNearestFilter:()=>Ds,LinearToneMapping:()=>Lt,Loader:()=>bl,LoaderUtils:()=>dw,LoadingManager:()=>Jx,LogLuvEncoding:()=>Ac,LoopOnce:()=>Nh,LoopPingPong:()=>Ql,LoopRepeat:()=>Tp,LuminanceAlphaFormat:()=>Wn,LuminanceFormat:()=>sn,MOUSE:()=>d,Material:()=>qo,MaterialLoader:()=>hw,Math:()=>Ui,MathUtils:()=>Ui,Matrix3:()=>oo,Matrix4:()=>hr,MaxEquation:()=>qe,Mesh:()=>to,MeshBasicMaterial:()=>qc,MeshDepthMaterial:()=>zy,MeshDistanceMaterial:()=>Vy,MeshFaceMaterial:()=>is,MeshLambertMaterial:()=>gv,MeshMatcapMaterial:()=>Zf,MeshNormalMaterial:()=>jf,MeshPhongMaterial:()=>ub,MeshPhysicalMaterial:()=>qf,MeshStandardMaterial:()=>Eh,MeshToonMaterial:()=>cm,MinEquation:()=>Te,MirroredRepeatWrapping:()=>Ps,MixOperation:()=>dn,MultiMaterial:()=>Iw,MultiplyBlending:()=>Ve,MultiplyOperation:()=>kn,NearestFilter:()=>mo,NearestMipMapLinearFilter:()=>qu,NearestMipMapNearestFilter:()=>ja,NearestMipmapLinearFilter:()=>nr,NearestMipmapNearestFilter:()=>aa,NeverDepth:()=>Li,NeverStencilFunc:()=>Rt,NoBlending:()=>ae,NoColors:()=>DP,NoToneMapping:()=>tt,NormalAnimationBlendMode:()=>Ms,NormalBlending:()=>we,NotEqualDepth:()=>Le,NotEqualStencilFunc:()=>mr,NumberKeyframeTrack:()=>Og,Object3D:()=>xi,ObjectLoader:()=>QM,ObjectSpaceNormalMap:()=>q,OctahedronBufferGeometry:()=>ab,OctahedronGeometry:()=>ab,OneFactor:()=>Ze,OneMinusDstAlphaFactor:()=>Yn,OneMinusDstColorFactor:()=>Xt,OneMinusSrcAlphaFactor:()=>Dt,OneMinusSrcColorFactor:()=>jt,OrthographicCamera:()=>Vg,PCFShadowMap:()=>P,PCFSoftShadowMap:()=>N,PMREMGenerator:()=>cA,ParametricBufferGeometry:()=>Ag,ParametricGeometry:()=>Ag,Particle:()=>Kr,ParticleBasicMaterial:()=>AP,ParticleSystem:()=>us,ParticleSystemMaterial:()=>mA,Path:()=>bv,PerspectiveCamera:()=>pa,Plane:()=>wa,PlaneBufferGeometry:()=>Zh,PlaneGeometry:()=>Zh,PlaneHelper:()=>sA,PointCloud:()=>pA,PointCloudMaterial:()=>sc,PointLight:()=>Mv,PointLightHelper:()=>Zg,Points:()=>am,PointsMaterial:()=>Qd,PolarGridHelper:()=>pC,PolyhedronBufferGeometry:()=>Vf,PolyhedronGeometry:()=>Vf,PositionalAudio:()=>sC,PropertyBinding:()=>Pc,PropertyMixer:()=>nh,QuadraticBezierCurve:()=>xb,QuadraticBezierCurve3:()=>yv,Quaternion:()=>Cs,QuaternionKeyframeTrack:()=>dm,QuaternionLinearInterpolant:()=>Xx,REVISION:()=>o,RGBADepthPacking:()=>cu,RGBAFormat:()=>gn,RGBAIntegerFormat:()=>Br,RGBA_ASTC_10x10_Format:()=>La,RGBA_ASTC_10x5_Format:()=>Pa,RGBA_ASTC_10x6_Format:()=>Cu,RGBA_ASTC_10x8_Format:()=>Bi,RGBA_ASTC_12x10_Format:()=>or,RGBA_ASTC_12x12_Format:()=>ws,RGBA_ASTC_4x4_Format:()=>ke,RGBA_ASTC_5x4_Format:()=>Je,RGBA_ASTC_5x5_Format:()=>mn,RGBA_ASTC_6x5_Format:()=>En,RGBA_ASTC_6x6_Format:()=>Dr,RGBA_ASTC_8x5_Format:()=>ps,RGBA_ASTC_8x6_Format:()=>Vi,RGBA_ASTC_8x8_Format:()=>Xn,RGBA_BPTC_Format:()=>Uo,RGBA_ETC2_EAC_Format:()=>ka,RGBA_PVRTC_2BPPV1_Format:()=>ts,RGBA_PVRTC_4BPPV1_Format:()=>la,RGBA_S3TC_DXT1_Format:()=>rl,RGBA_S3TC_DXT3_Format:()=>Qs,RGBA_S3TC_DXT5_Format:()=>Ni,RGBDEncoding:()=>ch,RGBEEncoding:()=>Hh,RGBEFormat:()=>Qn,RGBFormat:()=>Kt,RGBIntegerFormat:()=>Yr,RGBM16Encoding:()=>zh,RGBM7Encoding:()=>Fr,RGB_ETC1_Format:()=>Ws,RGB_ETC2_Format:()=>Eo,RGB_PVRTC_2BPPV1_Format:()=>Os,RGB_PVRTC_4BPPV1_Format:()=>So,RGB_S3TC_DXT1_Format:()=>ia,RGFormat:()=>Mr,RGIntegerFormat:()=>Oi,RawShaderMaterial:()=>Pg,Ray:()=>ea,Raycaster:()=>Qf,RectAreaLight:()=>Cv,RedFormat:()=>Si,RedIntegerFormat:()=>Ei,ReinhardToneMapping:()=>nn,RepeatWrapping:()=>Qo,ReplaceStencilOp:()=>xe,ReverseSubtractEquation:()=>at,RingBufferGeometry:()=>Ch,RingGeometry:()=>Ch,SRGB8_ALPHA8_ASTC_10x10_Format:()=>P_,SRGB8_ALPHA8_ASTC_10x5_Format:()=>bd,SRGB8_ALPHA8_ASTC_10x6_Format:()=>Sp,SRGB8_ALPHA8_ASTC_10x8_Format:()=>Vc,SRGB8_ALPHA8_ASTC_12x10_Format:()=>Ep,SRGB8_ALPHA8_ASTC_12x12_Format:()=>_f,SRGB8_ALPHA8_ASTC_4x4_Format:()=>wp,SRGB8_ALPHA8_ASTC_5x4_Format:()=>Xm,SRGB8_ALPHA8_ASTC_5x5_Format:()=>pc,SRGB8_ALPHA8_ASTC_6x5_Format:()=>xa,SRGB8_ALPHA8_ASTC_6x6_Format:()=>gf,SRGB8_ALPHA8_ASTC_8x5_Format:()=>Mp,SRGB8_ALPHA8_ASTC_8x6_Format:()=>Cp,SRGB8_ALPHA8_ASTC_8x8_Format:()=>zc,Scene:()=>Nf,SceneUtils:()=>RC,ShaderChunk:()=>qs,ShaderLib:()=>ll,ShaderMaterial:()=>ql,ShadowMaterial:()=>mv,Shape:()=>ed,ShapeBufferGeometry:()=>lm,ShapeGeometry:()=>lm,ShapePath:()=>gm,ShapeUtils:()=>Gf,ShortType:()=>fe,Skeleton:()=>Mg,SkeletonHelper:()=>ym,SkinnedMesh:()=>wg,SmoothShading:()=>ie,Sphere:()=>Bs,SphereBufferGeometry:()=>Ig,SphereGeometry:()=>Ig,Spherical:()=>nA,SphericalHarmonics3:()=>Sb,SplineCurve:()=>zg,SpotLight:()=>Dh,SpotLightHelper:()=>Da,Sprite:()=>av,SpriteMaterial:()=>bg,SrcAlphaFactor:()=>_n,SrcAlphaSaturateFactor:()=>pr,SrcColorFactor:()=>Zn,StaticCopyUsage:()=>Or,StaticDrawUsage:()=>ko,StaticReadUsage:()=>To,StereoCamera:()=>YD,StreamCopyUsage:()=>uh,StreamDrawUsage:()=>fl,StreamReadUsage:()=>ol,StringKeyframeTrack:()=>Yf,SubtractEquation:()=>We,SubtractiveBlending:()=>Pe,TOUCH:()=>g,TangentSpaceNormalMap:()=>ju,TetrahedronBufferGeometry:()=>Rg,TetrahedronGeometry:()=>Rg,TextBufferGeometry:()=>pv,TextGeometry:()=>pv,Texture:()=>Ar,TextureLoader:()=>db,TorusBufferGeometry:()=>kg,TorusGeometry:()=>kg,TorusKnotBufferGeometry:()=>lb,TorusKnotGeometry:()=>lb,Triangle:()=>Ma,TriangleFanDrawMode:()=>Dp,TriangleStripDrawMode:()=>Md,TrianglesDrawMode:()=>lh,TubeBufferGeometry:()=>Sh,TubeGeometry:()=>Sh,UVMapping:()=>ki,Uint16Attribute:()=>Rw,Uint16BufferAttribute:()=>Rd,Uint32Attribute:()=>kw,Uint32BufferAttribute:()=>qh,Uint8Attribute:()=>Kg,Uint8BufferAttribute:()=>Ca,Uint8ClampedAttribute:()=>Lv,Uint8ClampedBufferAttribute:()=>bf,Uniform:()=>Ib,UniformsLib:()=>Ii,UniformsUtils:()=>Od,UnsignedByteType:()=>Z,UnsignedInt248Type:()=>en,UnsignedIntType:()=>Qe,UnsignedShort4444Type:()=>Jt,UnsignedShort5551Type:()=>Ct,UnsignedShort565Type:()=>Ht,UnsignedShortType:()=>De,VSMShadowMap:()=>V,Vector2:()=>Bn,Vector3:()=>je,Vector4:()=>As,VectorKeyframeTrack:()=>vv,Vertex:()=>rp,VertexColors:()=>Pv,VideoTexture:()=>zM,WebGL1Renderer:()=>Gy,WebGLCubeRenderTarget:()=>sa,WebGLMultisampleRenderTarget:()=>Ap,WebGLRenderTarget:()=>Do,WebGLRenderTargetCube:()=>AC,WebGLRenderer:()=>Xo,WebGLUtils:()=>nm,WireframeGeometry:()=>cb,WireframeHelper:()=>_A,WrapAroundEnding:()=>wd,XHRLoader:()=>tf,ZeroCurvatureEnding:()=>ah,ZeroFactor:()=>Bt,ZeroSlopeEnding:()=>Ai,ZeroStencilOp:()=>se,sRGBEncoding:()=>mc});var y=D(861);const o="126",d={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},g={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},p=0,v=1,M=2,T=3,I=0,P=1,N=2,V=3,J=0,W=1,re=2,ce=1,ie=2,ae=0,we=1,Me=2,Pe=3,Ve=4,le=5,st=100,We=101,at=102,Te=103,qe=104,Bt=200,Ze=201,Zn=202,jt=203,_n=204,Dt=205,It=206,Yn=207,ei=208,Xt=209,pr=210,Li=0,Mn=1,Sn=2,zi=3,ti=4,Fs=5,cr=6,Le=7,kn=0,dn=1,lt=2,tt=0,Lt=1,nn=2,Ln=3,rn=4,ui=5,ki=300,pi=301,ur=302,Gs=303,wr=304,ro=306,ha=307,Qo=1e3,es=1001,Ps=1002,mo=1003,aa=1004,ja=1004,nr=1005,qu=1005,Xi=1006,Ds=1007,b=1007,k=1008,H=1008,Z=1009,ne=1010,fe=1011,De=1012,Ue=1013,Qe=1014,gt=1015,xt=1016,Jt=1017,Ct=1018,Ht=1019,en=1020,St=1021,Kt=1022,gn=1023,sn=1024,Wn=1025,Qn=gn,Di=1026,Ci=1027,Si=1028,Ei=1029,Mr=1030,Oi=1031,Yr=1032,Br=1033,ia=33776,rl=33777,Qs=33778,Ni=33779,So=35840,Os=35841,la=35842,ts=35843,Ws=36196,Eo=37492,ka=37496,ke=37808,Je=37809,mn=37810,En=37811,Dr=37812,ps=37813,Vi=37814,Xn=37815,Pa=37816,Cu=37817,Bi=37818,La=37819,or=37820,ws=37821,Uo=36492,wp=37840,Xm=37841,pc=37842,xa=37843,gf=37844,Mp=37845,Cp=37846,zc=37847,bd=37848,Sp=37849,Vc=37850,P_=37851,Ep=37852,_f=37853,Nh=2200,Tp=2201,Ql=2202,xo=2300,vf=2301,xd=2302,ah=2400,Ai=2401,wd=2402,Ms=2500,au=2501,lh=0,Md=1,Dp=2,sl=3e3,mc=3001,Bh=3007,Hh=3002,Ac=3003,Fr=3004,zh=3005,ch=3006,lu=3200,cu=3201,ju=0,q=1,se=0,ge=7680,xe=7681,Ne=7682,ze=7683,Ye=34055,Et=34056,yt=5386,Rt=512,xn=513,si=514,on=515,un=516,mr=517,ns=518,gr=519,ko=35044,Ls=35048,fl=35040,To=35045,rr=35049,ol=35041,Or=35046,ra=35050,uh=35042,ys="100",Fl="300 es";function pl(){}Object.assign(pl.prototype,{addEventListener:function(x,l){void 0===this._listeners&&(this._listeners={});const u=this._listeners;void 0===u[x]&&(u[x]=[]),-1===u[x].indexOf(l)&&u[x].push(l)},hasEventListener:function(x,l){if(void 0===this._listeners)return!1;const u=this._listeners;return void 0!==u[x]&&-1!==u[x].indexOf(l)},removeEventListener:function(x,l){if(void 0===this._listeners)return;const w=this._listeners[x];if(void 0!==w){const E=w.indexOf(l);-1!==E&&w.splice(E,1)}},dispatchEvent:function(x){if(void 0===this._listeners)return;const u=this._listeners[x.type];if(void 0!==u){x.target=this;const w=u.slice(0);for(let E=0,R=w.length;E<R;E++)w[E].call(this,x)}}});const mi=[];for(let x=0;x<256;x++)mi[x]=(x<16?"0":"")+x.toString(16);let so=1234567;const Ui={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const x=4294967295*Math.random()|0,l=4294967295*Math.random()|0,u=4294967295*Math.random()|0,w=4294967295*Math.random()|0;return(mi[255&x]+mi[x>>8&255]+mi[x>>16&255]+mi[x>>24&255]+"-"+mi[255&l]+mi[l>>8&255]+"-"+mi[l>>16&15|64]+mi[l>>24&255]+"-"+mi[63&u|128]+mi[u>>8&255]+"-"+mi[u>>16&255]+mi[u>>24&255]+mi[255&w]+mi[w>>8&255]+mi[w>>16&255]+mi[w>>24&255]).toUpperCase()},clamp:function(x,l,u){return Math.max(l,Math.min(u,x))},euclideanModulo:function(x,l){return(x%l+l)%l},mapLinear:function(x,l,u,w,E){return w+(x-l)*(E-w)/(u-l)},lerp:function(x,l,u){return(1-u)*x+u*l},damp:function(x,l,u,w){return Ui.lerp(x,l,1-Math.exp(-u*w))},pingpong:function(x,l=1){return l-Math.abs(Ui.euclideanModulo(x,2*l)-l)},smoothstep:function(x,l,u){return x<=l?0:x>=u?1:(x=(x-l)/(u-l))*x*(3-2*x)},smootherstep:function(x,l,u){return x<=l?0:x>=u?1:(x=(x-l)/(u-l))*x*x*(x*(6*x-15)+10)},randInt:function(x,l){return x+Math.floor(Math.random()*(l-x+1))},randFloat:function(x,l){return x+Math.random()*(l-x)},randFloatSpread:function(x){return x*(.5-Math.random())},seededRandom:function(x){return void 0!==x&&(so=x%2147483647),so=16807*so%2147483647,(so-1)/2147483646},degToRad:function(x){return x*Ui.DEG2RAD},radToDeg:function(x){return x*Ui.RAD2DEG},isPowerOfTwo:function(x){return 0==(x&x-1)&&0!==x},ceilPowerOfTwo:function(x){return Math.pow(2,Math.ceil(Math.log(x)/Math.LN2))},floorPowerOfTwo:function(x){return Math.pow(2,Math.floor(Math.log(x)/Math.LN2))},setQuaternionFromProperEuler:function(x,l,u,w,E){const R=Math.cos,z=Math.sin,Y=R(u/2),Q=z(u/2),ee=R((l+w)/2),pe=z((l+w)/2),he=R((l-w)/2),me=z((l-w)/2),be=R((w-l)/2),Ee=z((w-l)/2);switch(E){case"XYX":x.set(Y*pe,Q*he,Q*me,Y*ee);break;case"YZY":x.set(Q*me,Y*pe,Q*he,Y*ee);break;case"ZXZ":x.set(Q*he,Q*me,Y*pe,Y*ee);break;case"XZX":x.set(Y*pe,Q*Ee,Q*be,Y*ee);break;case"YXY":x.set(Q*be,Y*pe,Q*Ee,Y*ee);break;case"ZYZ":x.set(Q*Ee,Q*be,Y*pe,Y*ee);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+E)}}};class Bn{constructor(l=0,u=0){this.x=l,this.y=u}get width(){return this.x}set width(l){this.x=l}get height(){return this.y}set height(l){this.y=l}set(l,u){return this.x=l,this.y=u,this}setScalar(l){return this.x=l,this.y=l,this}setX(l){return this.x=l,this}setY(l){return this.y=l,this}setComponent(l,u){switch(l){case 0:this.x=u;break;case 1:this.y=u;break;default:throw new Error("index is out of range: "+l)}return this}getComponent(l){switch(l){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+l)}}clone(){return new this.constructor(this.x,this.y)}copy(l){return this.x=l.x,this.y=l.y,this}add(l,u){return void 0!==u?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(l,u)):(this.x+=l.x,this.y+=l.y,this)}addScalar(l){return this.x+=l,this.y+=l,this}addVectors(l,u){return this.x=l.x+u.x,this.y=l.y+u.y,this}addScaledVector(l,u){return this.x+=l.x*u,this.y+=l.y*u,this}sub(l,u){return void 0!==u?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(l,u)):(this.x-=l.x,this.y-=l.y,this)}subScalar(l){return this.x-=l,this.y-=l,this}subVectors(l,u){return this.x=l.x-u.x,this.y=l.y-u.y,this}multiply(l){return this.x*=l.x,this.y*=l.y,this}multiplyScalar(l){return this.x*=l,this.y*=l,this}divide(l){return this.x/=l.x,this.y/=l.y,this}divideScalar(l){return this.multiplyScalar(1/l)}applyMatrix3(l){const u=this.x,w=this.y,E=l.elements;return this.x=E[0]*u+E[3]*w+E[6],this.y=E[1]*u+E[4]*w+E[7],this}min(l){return this.x=Math.min(this.x,l.x),this.y=Math.min(this.y,l.y),this}max(l){return this.x=Math.max(this.x,l.x),this.y=Math.max(this.y,l.y),this}clamp(l,u){return this.x=Math.max(l.x,Math.min(u.x,this.x)),this.y=Math.max(l.y,Math.min(u.y,this.y)),this}clampScalar(l,u){return this.x=Math.max(l,Math.min(u,this.x)),this.y=Math.max(l,Math.min(u,this.y)),this}clampLength(l,u){const w=this.length();return this.divideScalar(w||1).multiplyScalar(Math.max(l,Math.min(u,w)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(l){return this.x*l.x+this.y*l.y}cross(l){return this.x*l.y-this.y*l.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(l){return Math.sqrt(this.distanceToSquared(l))}distanceToSquared(l){const u=this.x-l.x,w=this.y-l.y;return u*u+w*w}manhattanDistanceTo(l){return Math.abs(this.x-l.x)+Math.abs(this.y-l.y)}setLength(l){return this.normalize().multiplyScalar(l)}lerp(l,u){return this.x+=(l.x-this.x)*u,this.y+=(l.y-this.y)*u,this}lerpVectors(l,u,w){return this.x=l.x+(u.x-l.x)*w,this.y=l.y+(u.y-l.y)*w,this}equals(l){return l.x===this.x&&l.y===this.y}fromArray(l,u=0){return this.x=l[u],this.y=l[u+1],this}toArray(l=[],u=0){return l[u]=this.x,l[u+1]=this.y,l}fromBufferAttribute(l,u,w){return void 0!==w&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=l.getX(u),this.y=l.getY(u),this}rotateAround(l,u){const w=Math.cos(u),E=Math.sin(u),R=this.x-l.x,z=this.y-l.y;return this.x=R*w-z*E+l.x,this.y=R*E+z*w+l.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}Bn.prototype.isVector2=!0;class oo{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(l,u,w,E,R,z,Y,Q,ee){const pe=this.elements;return pe[0]=l,pe[1]=E,pe[2]=Y,pe[3]=u,pe[4]=R,pe[5]=Q,pe[6]=w,pe[7]=z,pe[8]=ee,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(l){const u=this.elements,w=l.elements;return u[0]=w[0],u[1]=w[1],u[2]=w[2],u[3]=w[3],u[4]=w[4],u[5]=w[5],u[6]=w[6],u[7]=w[7],u[8]=w[8],this}extractBasis(l,u,w){return l.setFromMatrix3Column(this,0),u.setFromMatrix3Column(this,1),w.setFromMatrix3Column(this,2),this}setFromMatrix4(l){const u=l.elements;return this.set(u[0],u[4],u[8],u[1],u[5],u[9],u[2],u[6],u[10]),this}multiply(l){return this.multiplyMatrices(this,l)}premultiply(l){return this.multiplyMatrices(l,this)}multiplyMatrices(l,u){const w=l.elements,E=u.elements,R=this.elements,z=w[0],Y=w[3],Q=w[6],ee=w[1],pe=w[4],he=w[7],me=w[2],be=w[5],Ee=w[8],Fe=E[0],He=E[3],Re=E[6],Se=E[1],rt=E[4],nt=E[7],ft=E[2],et=E[5],Tt=E[8];return R[0]=z*Fe+Y*Se+Q*ft,R[3]=z*He+Y*rt+Q*et,R[6]=z*Re+Y*nt+Q*Tt,R[1]=ee*Fe+pe*Se+he*ft,R[4]=ee*He+pe*rt+he*et,R[7]=ee*Re+pe*nt+he*Tt,R[2]=me*Fe+be*Se+Ee*ft,R[5]=me*He+be*rt+Ee*et,R[8]=me*Re+be*nt+Ee*Tt,this}multiplyScalar(l){const u=this.elements;return u[0]*=l,u[3]*=l,u[6]*=l,u[1]*=l,u[4]*=l,u[7]*=l,u[2]*=l,u[5]*=l,u[8]*=l,this}determinant(){const l=this.elements,u=l[0],w=l[1],E=l[2],R=l[3],z=l[4],Y=l[5],Q=l[6],ee=l[7],pe=l[8];return u*z*pe-u*Y*ee-w*R*pe+w*Y*Q+E*R*ee-E*z*Q}invert(){const l=this.elements,u=l[0],w=l[1],E=l[2],R=l[3],z=l[4],Y=l[5],Q=l[6],ee=l[7],pe=l[8],he=pe*z-Y*ee,me=Y*Q-pe*R,be=ee*R-z*Q,Ee=u*he+w*me+E*be;if(0===Ee)return this.set(0,0,0,0,0,0,0,0,0);const Fe=1/Ee;return l[0]=he*Fe,l[1]=(E*ee-pe*w)*Fe,l[2]=(Y*w-E*z)*Fe,l[3]=me*Fe,l[4]=(pe*u-E*Q)*Fe,l[5]=(E*R-Y*u)*Fe,l[6]=be*Fe,l[7]=(w*Q-ee*u)*Fe,l[8]=(z*u-w*R)*Fe,this}transpose(){let l;const u=this.elements;return l=u[1],u[1]=u[3],u[3]=l,l=u[2],u[2]=u[6],u[6]=l,l=u[5],u[5]=u[7],u[7]=l,this}getNormalMatrix(l){return this.setFromMatrix4(l).invert().transpose()}transposeIntoArray(l){const u=this.elements;return l[0]=u[0],l[1]=u[3],l[2]=u[6],l[3]=u[1],l[4]=u[4],l[5]=u[7],l[6]=u[2],l[7]=u[5],l[8]=u[8],this}setUvTransform(l,u,w,E,R,z,Y){const Q=Math.cos(R),ee=Math.sin(R);return this.set(w*Q,w*ee,-w*(Q*z+ee*Y)+z+l,-E*ee,E*Q,-E*(-ee*z+Q*Y)+Y+u,0,0,1),this}scale(l,u){const w=this.elements;return w[0]*=l,w[3]*=l,w[6]*=l,w[1]*=u,w[4]*=u,w[7]*=u,this}rotate(l){const u=Math.cos(l),w=Math.sin(l),E=this.elements,R=E[0],z=E[3],Y=E[6],Q=E[1],ee=E[4],pe=E[7];return E[0]=u*R+w*Q,E[3]=u*z+w*ee,E[6]=u*Y+w*pe,E[1]=-w*R+u*Q,E[4]=-w*z+u*ee,E[7]=-w*Y+u*pe,this}translate(l,u){const w=this.elements;return w[0]+=l*w[2],w[3]+=l*w[5],w[6]+=l*w[8],w[1]+=u*w[2],w[4]+=u*w[5],w[7]+=u*w[8],this}equals(l){const u=this.elements,w=l.elements;for(let E=0;E<9;E++)if(u[E]!==w[E])return!1;return!0}fromArray(l,u=0){for(let w=0;w<9;w++)this.elements[w]=l[w+u];return this}toArray(l=[],u=0){const w=this.elements;return l[u]=w[0],l[u+1]=w[1],l[u+2]=w[2],l[u+3]=w[3],l[u+4]=w[4],l[u+5]=w[5],l[u+6]=w[6],l[u+7]=w[7],l[u+8]=w[8],l}clone(){return(new this.constructor).fromArray(this.elements)}}let Za;oo.prototype.isMatrix3=!0;const ml={getDataURL:function(x){if(/^data:/i.test(x.src)||"undefined"==typeof HTMLCanvasElement)return x.src;let l;if(x instanceof HTMLCanvasElement)l=x;else{void 0===Za&&(Za=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Za.width=x.width,Za.height=x.height;const u=Za.getContext("2d");x instanceof ImageData?u.putImageData(x,0,0):u.drawImage(x,0,0,x.width,x.height),l=Za}return l.width>2048||l.height>2048?l.toDataURL("image/jpeg",.6):l.toDataURL("image/png")}};let Cd=0;class Ar extends pl{constructor(l=Ar.DEFAULT_IMAGE,u=Ar.DEFAULT_MAPPING,w=es,E=es,R=Xi,z=k,Y=gn,Q=Z,ee=1,pe=sl){super(),Object.defineProperty(this,"id",{value:Cd++}),this.uuid=Ui.generateUUID(),this.name="",this.image=l,this.mipmaps=[],this.mapping=u,this.wrapS=w,this.wrapT=E,this.magFilter=R,this.minFilter=z,this.anisotropy=ee,this.format=Y,this.internalFormat=null,this.type=Q,this.offset=new Bn(0,0),this.repeat=new Bn(1,1),this.center=new Bn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new oo,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=pe,this.version=0,this.onUpdate=null}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(l){return this.name=l.name,this.image=l.image,this.mipmaps=l.mipmaps.slice(0),this.mapping=l.mapping,this.wrapS=l.wrapS,this.wrapT=l.wrapT,this.magFilter=l.magFilter,this.minFilter=l.minFilter,this.anisotropy=l.anisotropy,this.format=l.format,this.internalFormat=l.internalFormat,this.type=l.type,this.offset.copy(l.offset),this.repeat.copy(l.repeat),this.center.copy(l.center),this.rotation=l.rotation,this.matrixAutoUpdate=l.matrixAutoUpdate,this.matrix.copy(l.matrix),this.generateMipmaps=l.generateMipmaps,this.premultiplyAlpha=l.premultiplyAlpha,this.flipY=l.flipY,this.unpackAlignment=l.unpackAlignment,this.encoding=l.encoding,this}toJSON(l){const u=void 0===l||"string"==typeof l;if(!u&&void 0!==l.textures[this.uuid])return l.textures[this.uuid];const w={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const E=this.image;if(void 0===E.uuid&&(E.uuid=Ui.generateUUID()),!u&&void 0===l.images[E.uuid]){let R;if(Array.isArray(E)){R=[];for(let z=0,Y=E.length;z<Y;z++)R.push(Fa(E[z].isDataTexture?E[z].image:E[z]))}else R=Fa(E);l.images[E.uuid]={uuid:E.uuid,url:R}}w.image=E.uuid}return u||(l.textures[this.uuid]=w),w}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(l){if(this.mapping!==ki)return l;if(l.applyMatrix3(this.matrix),l.x<0||l.x>1)switch(this.wrapS){case Qo:l.x=l.x-Math.floor(l.x);break;case es:l.x=l.x<0?0:1;break;case Ps:l.x=1===Math.abs(Math.floor(l.x)%2)?Math.ceil(l.x)-l.x:l.x-Math.floor(l.x)}if(l.y<0||l.y>1)switch(this.wrapT){case Qo:l.y=l.y-Math.floor(l.y);break;case es:l.y=l.y<0?0:1;break;case Ps:l.y=1===Math.abs(Math.floor(l.y)%2)?Math.ceil(l.y)-l.y:l.y-Math.floor(l.y)}return this.flipY&&(l.y=1-l.y),l}set needsUpdate(l){!0===l&&this.version++}}function Fa(x){return"undefined"!=typeof HTMLImageElement&&x instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&x instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&x instanceof ImageBitmap?ml.getDataURL(x):x.data?{data:Array.prototype.slice.call(x.data),width:x.width,height:x.height,type:x.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Ar.DEFAULT_IMAGE=void 0,Ar.DEFAULT_MAPPING=ki,Ar.prototype.isTexture=!0;class As{constructor(l=0,u=0,w=0,E=1){this.x=l,this.y=u,this.z=w,this.w=E}get width(){return this.z}set width(l){this.z=l}get height(){return this.w}set height(l){this.w=l}set(l,u,w,E){return this.x=l,this.y=u,this.z=w,this.w=E,this}setScalar(l){return this.x=l,this.y=l,this.z=l,this.w=l,this}setX(l){return this.x=l,this}setY(l){return this.y=l,this}setZ(l){return this.z=l,this}setW(l){return this.w=l,this}setComponent(l,u){switch(l){case 0:this.x=u;break;case 1:this.y=u;break;case 2:this.z=u;break;case 3:this.w=u;break;default:throw new Error("index is out of range: "+l)}return this}getComponent(l){switch(l){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+l)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(l){return this.x=l.x,this.y=l.y,this.z=l.z,this.w=void 0!==l.w?l.w:1,this}add(l,u){return void 0!==u?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(l,u)):(this.x+=l.x,this.y+=l.y,this.z+=l.z,this.w+=l.w,this)}addScalar(l){return this.x+=l,this.y+=l,this.z+=l,this.w+=l,this}addVectors(l,u){return this.x=l.x+u.x,this.y=l.y+u.y,this.z=l.z+u.z,this.w=l.w+u.w,this}addScaledVector(l,u){return this.x+=l.x*u,this.y+=l.y*u,this.z+=l.z*u,this.w+=l.w*u,this}sub(l,u){return void 0!==u?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(l,u)):(this.x-=l.x,this.y-=l.y,this.z-=l.z,this.w-=l.w,this)}subScalar(l){return this.x-=l,this.y-=l,this.z-=l,this.w-=l,this}subVectors(l,u){return this.x=l.x-u.x,this.y=l.y-u.y,this.z=l.z-u.z,this.w=l.w-u.w,this}multiply(l){return this.x*=l.x,this.y*=l.y,this.z*=l.z,this.w*=l.w,this}multiplyScalar(l){return this.x*=l,this.y*=l,this.z*=l,this.w*=l,this}applyMatrix4(l){const u=this.x,w=this.y,E=this.z,R=this.w,z=l.elements;return this.x=z[0]*u+z[4]*w+z[8]*E+z[12]*R,this.y=z[1]*u+z[5]*w+z[9]*E+z[13]*R,this.z=z[2]*u+z[6]*w+z[10]*E+z[14]*R,this.w=z[3]*u+z[7]*w+z[11]*E+z[15]*R,this}divideScalar(l){return this.multiplyScalar(1/l)}setAxisAngleFromQuaternion(l){this.w=2*Math.acos(l.w);const u=Math.sqrt(1-l.w*l.w);return u<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=l.x/u,this.y=l.y/u,this.z=l.z/u),this}setAxisAngleFromRotationMatrix(l){let u,w,E,R;const Q=l.elements,ee=Q[0],pe=Q[4],he=Q[8],me=Q[1],be=Q[5],Ee=Q[9],Fe=Q[2],He=Q[6],Re=Q[10];if(Math.abs(pe-me)<.01&&Math.abs(he-Fe)<.01&&Math.abs(Ee-He)<.01){if(Math.abs(pe+me)<.1&&Math.abs(he+Fe)<.1&&Math.abs(Ee+He)<.1&&Math.abs(ee+be+Re-3)<.1)return this.set(1,0,0,0),this;u=Math.PI;const rt=(ee+1)/2,nt=(be+1)/2,ft=(Re+1)/2,et=(pe+me)/4,Tt=(he+Fe)/4,Qt=(Ee+He)/4;return rt>nt&&rt>ft?rt<.01?(w=0,E=.707106781,R=.707106781):(w=Math.sqrt(rt),E=et/w,R=Tt/w):nt>ft?nt<.01?(w=.707106781,E=0,R=.707106781):(E=Math.sqrt(nt),w=et/E,R=Qt/E):ft<.01?(w=.707106781,E=.707106781,R=0):(R=Math.sqrt(ft),w=Tt/R,E=Qt/R),this.set(w,E,R,u),this}let Se=Math.sqrt((He-Ee)*(He-Ee)+(he-Fe)*(he-Fe)+(me-pe)*(me-pe));return Math.abs(Se)<.001&&(Se=1),this.x=(He-Ee)/Se,this.y=(he-Fe)/Se,this.z=(me-pe)/Se,this.w=Math.acos((ee+be+Re-1)/2),this}min(l){return this.x=Math.min(this.x,l.x),this.y=Math.min(this.y,l.y),this.z=Math.min(this.z,l.z),this.w=Math.min(this.w,l.w),this}max(l){return this.x=Math.max(this.x,l.x),this.y=Math.max(this.y,l.y),this.z=Math.max(this.z,l.z),this.w=Math.max(this.w,l.w),this}clamp(l,u){return this.x=Math.max(l.x,Math.min(u.x,this.x)),this.y=Math.max(l.y,Math.min(u.y,this.y)),this.z=Math.max(l.z,Math.min(u.z,this.z)),this.w=Math.max(l.w,Math.min(u.w,this.w)),this}clampScalar(l,u){return this.x=Math.max(l,Math.min(u,this.x)),this.y=Math.max(l,Math.min(u,this.y)),this.z=Math.max(l,Math.min(u,this.z)),this.w=Math.max(l,Math.min(u,this.w)),this}clampLength(l,u){const w=this.length();return this.divideScalar(w||1).multiplyScalar(Math.max(l,Math.min(u,w)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(l){return this.x*l.x+this.y*l.y+this.z*l.z+this.w*l.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(l){return this.normalize().multiplyScalar(l)}lerp(l,u){return this.x+=(l.x-this.x)*u,this.y+=(l.y-this.y)*u,this.z+=(l.z-this.z)*u,this.w+=(l.w-this.w)*u,this}lerpVectors(l,u,w){return this.x=l.x+(u.x-l.x)*w,this.y=l.y+(u.y-l.y)*w,this.z=l.z+(u.z-l.z)*w,this.w=l.w+(u.w-l.w)*w,this}equals(l){return l.x===this.x&&l.y===this.y&&l.z===this.z&&l.w===this.w}fromArray(l,u=0){return this.x=l[u],this.y=l[u+1],this.z=l[u+2],this.w=l[u+3],this}toArray(l=[],u=0){return l[u]=this.x,l[u+1]=this.y,l[u+2]=this.z,l[u+3]=this.w,l}fromBufferAttribute(l,u,w){return void 0!==w&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=l.getX(u),this.y=l.getY(u),this.z=l.getZ(u),this.w=l.getW(u),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}As.prototype.isVector4=!0;class Do extends pl{constructor(l,u,w){super(),this.width=l,this.height=u,this.depth=1,this.scissor=new As(0,0,l,u),this.scissorTest=!1,this.viewport=new As(0,0,l,u),this.texture=new Ar(void 0,(w=w||{}).mapping,w.wrapS,w.wrapT,w.magFilter,w.minFilter,w.format,w.type,w.anisotropy,w.encoding),this.texture.image={},this.texture.image.width=l,this.texture.image.height=u,this.texture.image.depth=1,this.texture.generateMipmaps=void 0!==w.generateMipmaps&&w.generateMipmaps,this.texture.minFilter=void 0!==w.minFilter?w.minFilter:Xi,this.depthBuffer=void 0===w.depthBuffer||w.depthBuffer,this.stencilBuffer=void 0!==w.stencilBuffer&&w.stencilBuffer,this.depthTexture=void 0!==w.depthTexture?w.depthTexture:null}setTexture(l){l.image={width:this.width,height:this.height,depth:this.depth},this.texture=l}setSize(l,u,w=1){(this.width!==l||this.height!==u||this.depth!==w)&&(this.width=l,this.height=u,this.depth=w,this.texture.image.width=l,this.texture.image.height=u,this.texture.image.depth=w,this.dispose()),this.viewport.set(0,0,l,u),this.scissor.set(0,0,l,u)}clone(){return(new this.constructor).copy(this)}copy(l){return this.width=l.width,this.height=l.height,this.depth=l.depth,this.viewport.copy(l.viewport),this.texture=l.texture.clone(),this.depthBuffer=l.depthBuffer,this.stencilBuffer=l.stencilBuffer,this.depthTexture=l.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Do.prototype.isWebGLRenderTarget=!0;class Ap extends Do{constructor(l,u,w){super(l,u,w),this.samples=4}copy(l){return super.copy.call(this,l),this.samples=l.samples,this}}Ap.prototype.isWebGLMultisampleRenderTarget=!0;class Cs{constructor(l=0,u=0,w=0,E=1){this._x=l,this._y=u,this._z=w,this._w=E}static slerp(l,u,w,E){return w.copy(l).slerp(u,E)}static slerpFlat(l,u,w,E,R,z,Y){let Q=w[E+0],ee=w[E+1],pe=w[E+2],he=w[E+3];const me=R[z+0],be=R[z+1],Ee=R[z+2],Fe=R[z+3];if(0===Y)return l[u+0]=Q,l[u+1]=ee,l[u+2]=pe,void(l[u+3]=he);if(1===Y)return l[u+0]=me,l[u+1]=be,l[u+2]=Ee,void(l[u+3]=Fe);if(he!==Fe||Q!==me||ee!==be||pe!==Ee){let He=1-Y;const Re=Q*me+ee*be+pe*Ee+he*Fe,Se=Re>=0?1:-1,rt=1-Re*Re;if(rt>Number.EPSILON){const ft=Math.sqrt(rt),et=Math.atan2(ft,Re*Se);He=Math.sin(He*et)/ft,Y=Math.sin(Y*et)/ft}const nt=Y*Se;if(Q=Q*He+me*nt,ee=ee*He+be*nt,pe=pe*He+Ee*nt,he=he*He+Fe*nt,He===1-Y){const ft=1/Math.sqrt(Q*Q+ee*ee+pe*pe+he*he);Q*=ft,ee*=ft,pe*=ft,he*=ft}}l[u]=Q,l[u+1]=ee,l[u+2]=pe,l[u+3]=he}static multiplyQuaternionsFlat(l,u,w,E,R,z){const Y=w[E],Q=w[E+1],ee=w[E+2],pe=w[E+3],he=R[z],me=R[z+1],be=R[z+2],Ee=R[z+3];return l[u]=Y*Ee+pe*he+Q*be-ee*me,l[u+1]=Q*Ee+pe*me+ee*he-Y*be,l[u+2]=ee*Ee+pe*be+Y*me-Q*he,l[u+3]=pe*Ee-Y*he-Q*me-ee*be,l}get x(){return this._x}set x(l){this._x=l,this._onChangeCallback()}get y(){return this._y}set y(l){this._y=l,this._onChangeCallback()}get z(){return this._z}set z(l){this._z=l,this._onChangeCallback()}get w(){return this._w}set w(l){this._w=l,this._onChangeCallback()}set(l,u,w,E){return this._x=l,this._y=u,this._z=w,this._w=E,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(l){return this._x=l.x,this._y=l.y,this._z=l.z,this._w=l.w,this._onChangeCallback(),this}setFromEuler(l,u){if(!l||!l.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const w=l._x,E=l._y,R=l._z,z=l._order,Y=Math.cos,Q=Math.sin,ee=Y(w/2),pe=Y(E/2),he=Y(R/2),me=Q(w/2),be=Q(E/2),Ee=Q(R/2);switch(z){case"XYZ":this._x=me*pe*he+ee*be*Ee,this._y=ee*be*he-me*pe*Ee,this._z=ee*pe*Ee+me*be*he,this._w=ee*pe*he-me*be*Ee;break;case"YXZ":this._x=me*pe*he+ee*be*Ee,this._y=ee*be*he-me*pe*Ee,this._z=ee*pe*Ee-me*be*he,this._w=ee*pe*he+me*be*Ee;break;case"ZXY":this._x=me*pe*he-ee*be*Ee,this._y=ee*be*he+me*pe*Ee,this._z=ee*pe*Ee+me*be*he,this._w=ee*pe*he-me*be*Ee;break;case"ZYX":this._x=me*pe*he-ee*be*Ee,this._y=ee*be*he+me*pe*Ee,this._z=ee*pe*Ee-me*be*he,this._w=ee*pe*he+me*be*Ee;break;case"YZX":this._x=me*pe*he+ee*be*Ee,this._y=ee*be*he+me*pe*Ee,this._z=ee*pe*Ee-me*be*he,this._w=ee*pe*he-me*be*Ee;break;case"XZY":this._x=me*pe*he-ee*be*Ee,this._y=ee*be*he-me*pe*Ee,this._z=ee*pe*Ee+me*be*he,this._w=ee*pe*he+me*be*Ee;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+z)}return!1!==u&&this._onChangeCallback(),this}setFromAxisAngle(l,u){const w=u/2,E=Math.sin(w);return this._x=l.x*E,this._y=l.y*E,this._z=l.z*E,this._w=Math.cos(w),this._onChangeCallback(),this}setFromRotationMatrix(l){const u=l.elements,w=u[0],E=u[4],R=u[8],z=u[1],Y=u[5],Q=u[9],ee=u[2],pe=u[6],he=u[10],me=w+Y+he;if(me>0){const be=.5/Math.sqrt(me+1);this._w=.25/be,this._x=(pe-Q)*be,this._y=(R-ee)*be,this._z=(z-E)*be}else if(w>Y&&w>he){const be=2*Math.sqrt(1+w-Y-he);this._w=(pe-Q)/be,this._x=.25*be,this._y=(E+z)/be,this._z=(R+ee)/be}else if(Y>he){const be=2*Math.sqrt(1+Y-w-he);this._w=(R-ee)/be,this._x=(E+z)/be,this._y=.25*be,this._z=(Q+pe)/be}else{const be=2*Math.sqrt(1+he-w-Y);this._w=(z-E)/be,this._x=(R+ee)/be,this._y=(Q+pe)/be,this._z=.25*be}return this._onChangeCallback(),this}setFromUnitVectors(l,u){let E=l.dot(u)+1;return E<1e-6?(E=0,Math.abs(l.x)>Math.abs(l.z)?(this._x=-l.y,this._y=l.x,this._z=0,this._w=E):(this._x=0,this._y=-l.z,this._z=l.y,this._w=E)):(this._x=l.y*u.z-l.z*u.y,this._y=l.z*u.x-l.x*u.z,this._z=l.x*u.y-l.y*u.x,this._w=E),this.normalize()}angleTo(l){return 2*Math.acos(Math.abs(Ui.clamp(this.dot(l),-1,1)))}rotateTowards(l,u){const w=this.angleTo(l);if(0===w)return this;const E=Math.min(1,u/w);return this.slerp(l,E),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(l){return this._x*l._x+this._y*l._y+this._z*l._z+this._w*l._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let l=this.length();return 0===l?(this._x=0,this._y=0,this._z=0,this._w=1):(l=1/l,this._x=this._x*l,this._y=this._y*l,this._z=this._z*l,this._w=this._w*l),this._onChangeCallback(),this}multiply(l,u){return void 0!==u?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(l,u)):this.multiplyQuaternions(this,l)}premultiply(l){return this.multiplyQuaternions(l,this)}multiplyQuaternions(l,u){const w=l._x,E=l._y,R=l._z,z=l._w,Y=u._x,Q=u._y,ee=u._z,pe=u._w;return this._x=w*pe+z*Y+E*ee-R*Q,this._y=E*pe+z*Q+R*Y-w*ee,this._z=R*pe+z*ee+w*Q-E*Y,this._w=z*pe-w*Y-E*Q-R*ee,this._onChangeCallback(),this}slerp(l,u){if(0===u)return this;if(1===u)return this.copy(l);const w=this._x,E=this._y,R=this._z,z=this._w;let Y=z*l._w+w*l._x+E*l._y+R*l._z;if(Y<0?(this._w=-l._w,this._x=-l._x,this._y=-l._y,this._z=-l._z,Y=-Y):this.copy(l),Y>=1)return this._w=z,this._x=w,this._y=E,this._z=R,this;const Q=1-Y*Y;if(Q<=Number.EPSILON){const be=1-u;return this._w=be*z+u*this._w,this._x=be*w+u*this._x,this._y=be*E+u*this._y,this._z=be*R+u*this._z,this.normalize(),this._onChangeCallback(),this}const ee=Math.sqrt(Q),pe=Math.atan2(ee,Y),he=Math.sin((1-u)*pe)/ee,me=Math.sin(u*pe)/ee;return this._w=z*he+this._w*me,this._x=w*he+this._x*me,this._y=E*he+this._y*me,this._z=R*he+this._z*me,this._onChangeCallback(),this}equals(l){return l._x===this._x&&l._y===this._y&&l._z===this._z&&l._w===this._w}fromArray(l,u=0){return this._x=l[u],this._y=l[u+1],this._z=l[u+2],this._w=l[u+3],this._onChangeCallback(),this}toArray(l=[],u=0){return l[u]=this._x,l[u+1]=this._y,l[u+2]=this._z,l[u+3]=this._w,l}fromBufferAttribute(l,u){return this._x=l.getX(u),this._y=l.getY(u),this._z=l.getZ(u),this._w=l.getW(u),this}_onChange(l){return this._onChangeCallback=l,this}_onChangeCallback(){}}Cs.prototype.isQuaternion=!0;class je{constructor(l=0,u=0,w=0){this.x=l,this.y=u,this.z=w}set(l,u,w){return void 0===w&&(w=this.z),this.x=l,this.y=u,this.z=w,this}setScalar(l){return this.x=l,this.y=l,this.z=l,this}setX(l){return this.x=l,this}setY(l){return this.y=l,this}setZ(l){return this.z=l,this}setComponent(l,u){switch(l){case 0:this.x=u;break;case 1:this.y=u;break;case 2:this.z=u;break;default:throw new Error("index is out of range: "+l)}return this}getComponent(l){switch(l){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+l)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(l){return this.x=l.x,this.y=l.y,this.z=l.z,this}add(l,u){return void 0!==u?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(l,u)):(this.x+=l.x,this.y+=l.y,this.z+=l.z,this)}addScalar(l){return this.x+=l,this.y+=l,this.z+=l,this}addVectors(l,u){return this.x=l.x+u.x,this.y=l.y+u.y,this.z=l.z+u.z,this}addScaledVector(l,u){return this.x+=l.x*u,this.y+=l.y*u,this.z+=l.z*u,this}sub(l,u){return void 0!==u?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(l,u)):(this.x-=l.x,this.y-=l.y,this.z-=l.z,this)}subScalar(l){return this.x-=l,this.y-=l,this.z-=l,this}subVectors(l,u){return this.x=l.x-u.x,this.y=l.y-u.y,this.z=l.z-u.z,this}multiply(l,u){return void 0!==u?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(l,u)):(this.x*=l.x,this.y*=l.y,this.z*=l.z,this)}multiplyScalar(l){return this.x*=l,this.y*=l,this.z*=l,this}multiplyVectors(l,u){return this.x=l.x*u.x,this.y=l.y*u.y,this.z=l.z*u.z,this}applyEuler(l){return l&&l.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion($o.setFromEuler(l))}applyAxisAngle(l,u){return this.applyQuaternion($o.setFromAxisAngle(l,u))}applyMatrix3(l){const u=this.x,w=this.y,E=this.z,R=l.elements;return this.x=R[0]*u+R[3]*w+R[6]*E,this.y=R[1]*u+R[4]*w+R[7]*E,this.z=R[2]*u+R[5]*w+R[8]*E,this}applyNormalMatrix(l){return this.applyMatrix3(l).normalize()}applyMatrix4(l){const u=this.x,w=this.y,E=this.z,R=l.elements,z=1/(R[3]*u+R[7]*w+R[11]*E+R[15]);return this.x=(R[0]*u+R[4]*w+R[8]*E+R[12])*z,this.y=(R[1]*u+R[5]*w+R[9]*E+R[13])*z,this.z=(R[2]*u+R[6]*w+R[10]*E+R[14])*z,this}applyQuaternion(l){const u=this.x,w=this.y,E=this.z,R=l.x,z=l.y,Y=l.z,Q=l.w,ee=Q*u+z*E-Y*w,pe=Q*w+Y*u-R*E,he=Q*E+R*w-z*u,me=-R*u-z*w-Y*E;return this.x=ee*Q+me*-R+pe*-Y-he*-z,this.y=pe*Q+me*-z+he*-R-ee*-Y,this.z=he*Q+me*-Y+ee*-z-pe*-R,this}project(l){return this.applyMatrix4(l.matrixWorldInverse).applyMatrix4(l.projectionMatrix)}unproject(l){return this.applyMatrix4(l.projectionMatrixInverse).applyMatrix4(l.matrixWorld)}transformDirection(l){const u=this.x,w=this.y,E=this.z,R=l.elements;return this.x=R[0]*u+R[4]*w+R[8]*E,this.y=R[1]*u+R[5]*w+R[9]*E,this.z=R[2]*u+R[6]*w+R[10]*E,this.normalize()}divide(l){return this.x/=l.x,this.y/=l.y,this.z/=l.z,this}divideScalar(l){return this.multiplyScalar(1/l)}min(l){return this.x=Math.min(this.x,l.x),this.y=Math.min(this.y,l.y),this.z=Math.min(this.z,l.z),this}max(l){return this.x=Math.max(this.x,l.x),this.y=Math.max(this.y,l.y),this.z=Math.max(this.z,l.z),this}clamp(l,u){return this.x=Math.max(l.x,Math.min(u.x,this.x)),this.y=Math.max(l.y,Math.min(u.y,this.y)),this.z=Math.max(l.z,Math.min(u.z,this.z)),this}clampScalar(l,u){return this.x=Math.max(l,Math.min(u,this.x)),this.y=Math.max(l,Math.min(u,this.y)),this.z=Math.max(l,Math.min(u,this.z)),this}clampLength(l,u){const w=this.length();return this.divideScalar(w||1).multiplyScalar(Math.max(l,Math.min(u,w)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(l){return this.x*l.x+this.y*l.y+this.z*l.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(l){return this.normalize().multiplyScalar(l)}lerp(l,u){return this.x+=(l.x-this.x)*u,this.y+=(l.y-this.y)*u,this.z+=(l.z-this.z)*u,this}lerpVectors(l,u,w){return this.x=l.x+(u.x-l.x)*w,this.y=l.y+(u.y-l.y)*w,this.z=l.z+(u.z-l.z)*w,this}cross(l,u){return void 0!==u?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(l,u)):this.crossVectors(this,l)}crossVectors(l,u){const w=l.x,E=l.y,R=l.z,z=u.x,Y=u.y,Q=u.z;return this.x=E*Q-R*Y,this.y=R*z-w*Q,this.z=w*Y-E*z,this}projectOnVector(l){const u=l.lengthSq();if(0===u)return this.set(0,0,0);const w=l.dot(this)/u;return this.copy(l).multiplyScalar(w)}projectOnPlane(l){return ms.copy(this).projectOnVector(l),this.sub(ms)}reflect(l){return this.sub(ms.copy(l).multiplyScalar(2*this.dot(l)))}angleTo(l){const u=Math.sqrt(this.lengthSq()*l.lengthSq());if(0===u)return Math.PI/2;const w=this.dot(l)/u;return Math.acos(Ui.clamp(w,-1,1))}distanceTo(l){return Math.sqrt(this.distanceToSquared(l))}distanceToSquared(l){const u=this.x-l.x,w=this.y-l.y,E=this.z-l.z;return u*u+w*w+E*E}manhattanDistanceTo(l){return Math.abs(this.x-l.x)+Math.abs(this.y-l.y)+Math.abs(this.z-l.z)}setFromSpherical(l){return this.setFromSphericalCoords(l.radius,l.phi,l.theta)}setFromSphericalCoords(l,u,w){const E=Math.sin(u)*l;return this.x=E*Math.sin(w),this.y=Math.cos(u)*l,this.z=E*Math.cos(w),this}setFromCylindrical(l){return this.setFromCylindricalCoords(l.radius,l.theta,l.y)}setFromCylindricalCoords(l,u,w){return this.x=l*Math.sin(u),this.y=w,this.z=l*Math.cos(u),this}setFromMatrixPosition(l){const u=l.elements;return this.x=u[12],this.y=u[13],this.z=u[14],this}setFromMatrixScale(l){const u=this.setFromMatrixColumn(l,0).length(),w=this.setFromMatrixColumn(l,1).length(),E=this.setFromMatrixColumn(l,2).length();return this.x=u,this.y=w,this.z=E,this}setFromMatrixColumn(l,u){return this.fromArray(l.elements,4*u)}setFromMatrix3Column(l,u){return this.fromArray(l.elements,3*u)}equals(l){return l.x===this.x&&l.y===this.y&&l.z===this.z}fromArray(l,u=0){return this.x=l[u],this.y=l[u+1],this.z=l[u+2],this}toArray(l=[],u=0){return l[u]=this.x,l[u+1]=this.y,l[u+2]=this.z,l}fromBufferAttribute(l,u,w){return void 0!==w&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=l.getX(u),this.y=l.getY(u),this.z=l.getZ(u),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}je.prototype.isVector3=!0;const ms=new je,$o=new Cs;class Po{constructor(l=new je(1/0,1/0,1/0),u=new je(-1/0,-1/0,-1/0)){this.min=l,this.max=u}set(l,u){return this.min.copy(l),this.max.copy(u),this}setFromArray(l){let u=1/0,w=1/0,E=1/0,R=-1/0,z=-1/0,Y=-1/0;for(let Q=0,ee=l.length;Q<ee;Q+=3){const pe=l[Q],he=l[Q+1],me=l[Q+2];pe<u&&(u=pe),he<w&&(w=he),me<E&&(E=me),pe>R&&(R=pe),he>z&&(z=he),me>Y&&(Y=me)}return this.min.set(u,w,E),this.max.set(R,z,Y),this}setFromBufferAttribute(l){let u=1/0,w=1/0,E=1/0,R=-1/0,z=-1/0,Y=-1/0;for(let Q=0,ee=l.count;Q<ee;Q++){const pe=l.getX(Q),he=l.getY(Q),me=l.getZ(Q);pe<u&&(u=pe),he<w&&(w=he),me<E&&(E=me),pe>R&&(R=pe),he>z&&(z=he),me>Y&&(Y=me)}return this.min.set(u,w,E),this.max.set(R,z,Y),this}setFromPoints(l){this.makeEmpty();for(let u=0,w=l.length;u<w;u++)this.expandByPoint(l[u]);return this}setFromCenterAndSize(l,u){const w=Go.copy(u).multiplyScalar(.5);return this.min.copy(l).sub(w),this.max.copy(l).add(w),this}setFromObject(l){return this.makeEmpty(),this.expandByObject(l)}clone(){return(new this.constructor).copy(this)}copy(l){return this.min.copy(l.min),this.max.copy(l.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(l){return void 0===l&&(console.warn("THREE.Box3: .getCenter() target is now required"),l=new je),this.isEmpty()?l.set(0,0,0):l.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(l){return void 0===l&&(console.warn("THREE.Box3: .getSize() target is now required"),l=new je),this.isEmpty()?l.set(0,0,0):l.subVectors(this.max,this.min)}expandByPoint(l){return this.min.min(l),this.max.max(l),this}expandByVector(l){return this.min.sub(l),this.max.add(l),this}expandByScalar(l){return this.min.addScalar(-l),this.max.addScalar(l),this}expandByObject(l){l.updateWorldMatrix(!1,!1);const u=l.geometry;void 0!==u&&(null===u.boundingBox&&u.computeBoundingBox(),Uc.copy(u.boundingBox),Uc.applyMatrix4(l.matrixWorld),this.union(Uc));const w=l.children;for(let E=0,R=w.length;E<R;E++)this.expandByObject(w[E]);return this}containsPoint(l){return!(l.x<this.min.x||l.x>this.max.x||l.y<this.min.y||l.y>this.max.y||l.z<this.min.z||l.z>this.max.z)}containsBox(l){return this.min.x<=l.min.x&&l.max.x<=this.max.x&&this.min.y<=l.min.y&&l.max.y<=this.max.y&&this.min.z<=l.min.z&&l.max.z<=this.max.z}getParameter(l,u){return void 0===u&&(console.warn("THREE.Box3: .getParameter() target is now required"),u=new je),u.set((l.x-this.min.x)/(this.max.x-this.min.x),(l.y-this.min.y)/(this.max.y-this.min.y),(l.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(l){return!(l.max.x<this.min.x||l.min.x>this.max.x||l.max.y<this.min.y||l.min.y>this.max.y||l.max.z<this.min.z||l.min.z>this.max.z)}intersectsSphere(l){return this.clampPoint(l.center,Go),Go.distanceToSquared(l.center)<=l.radius*l.radius}intersectsPlane(l){let u,w;return l.normal.x>0?(u=l.normal.x*this.min.x,w=l.normal.x*this.max.x):(u=l.normal.x*this.max.x,w=l.normal.x*this.min.x),l.normal.y>0?(u+=l.normal.y*this.min.y,w+=l.normal.y*this.max.y):(u+=l.normal.y*this.max.y,w+=l.normal.y*this.min.y),l.normal.z>0?(u+=l.normal.z*this.min.z,w+=l.normal.z*this.max.z):(u+=l.normal.z*this.max.z,w+=l.normal.z*this.min.z),u<=-l.constant&&w>=-l.constant}intersectsTriangle(l){if(this.isEmpty())return!1;this.getCenter(Nl),Gc.subVectors(this.max,Nl),uo.subVectors(l.a,Nl),Ya.subVectors(l.b,Nl),Sl.subVectors(l.c,Nl),qr.subVectors(Ya,uo),gc.subVectors(Sl,Ya),Oa.subVectors(uo,Sl);let u=[0,-qr.z,qr.y,0,-gc.z,gc.y,0,-Oa.z,Oa.y,qr.z,0,-qr.x,gc.z,0,-gc.x,Oa.z,0,-Oa.x,-qr.y,qr.x,0,-gc.y,gc.x,0,-Oa.y,Oa.x,0];return!(!Su(u,uo,Ya,Sl,Gc)||(u=[1,0,0,0,1,0,0,0,1],!Su(u,uo,Ya,Sl,Gc)))&&(Xa.crossVectors(qr,gc),u=[Xa.x,Xa.y,Xa.z],Su(u,uo,Ya,Sl,Gc))}clampPoint(l,u){return void 0===u&&(console.warn("THREE.Box3: .clampPoint() target is now required"),u=new je),u.copy(l).clamp(this.min,this.max)}distanceToPoint(l){return Go.copy(l).clamp(this.min,this.max).sub(l).length()}getBoundingSphere(l){return void 0===l&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(l.center),l.radius=.5*this.getSize(Go).length(),l}intersect(l){return this.min.max(l.min),this.max.min(l.max),this.isEmpty()&&this.makeEmpty(),this}union(l){return this.min.min(l.min),this.max.max(l.max),this}applyMatrix4(l){return this.isEmpty()||(Ol[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(l),Ol[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(l),Ol[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(l),Ol[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(l),Ol[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(l),Ol[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(l),Ol[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(l),Ol[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(l),this.setFromPoints(Ol)),this}translate(l){return this.min.add(l),this.max.add(l),this}equals(l){return l.min.equals(this.min)&&l.max.equals(this.max)}}Po.prototype.isBox3=!0;const Ol=[new je,new je,new je,new je,new je,new je,new je,new je],Go=new je,Uc=new Po,uo=new je,Ya=new je,Sl=new je,qr=new je,gc=new je,Oa=new je,Nl=new je,Gc=new je,Xa=new je,El=new je;function Su(x,l,u,w,E){for(let R=0,z=x.length-3;R<=z;R+=3){El.fromArray(x,R);const Y=E.x*Math.abs(El.x)+E.y*Math.abs(El.y)+E.z*Math.abs(El.z),Q=l.dot(El),ee=u.dot(El),pe=w.dot(El);if(Math.max(-Math.max(Q,ee,pe),Math.min(Q,ee,pe))>Y)return!1}return!0}const Ns=new Po;class Bs{constructor(l=new je,u=-1){this.center=l,this.radius=u}set(l,u){return this.center.copy(l),this.radius=u,this}setFromPoints(l,u){const w=this.center;void 0!==u?w.copy(u):Ns.setFromPoints(l).getCenter(w);let E=0;for(let R=0,z=l.length;R<z;R++)E=Math.max(E,w.distanceToSquared(l[R]));return this.radius=Math.sqrt(E),this}copy(l){return this.center.copy(l.center),this.radius=l.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(l){return l.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(l){return l.distanceTo(this.center)-this.radius}intersectsSphere(l){const u=this.radius+l.radius;return l.center.distanceToSquared(this.center)<=u*u}intersectsBox(l){return l.intersectsSphere(this)}intersectsPlane(l){return Math.abs(l.distanceToPoint(this.center))<=this.radius}clampPoint(l,u){const w=this.center.distanceToSquared(l);return void 0===u&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),u=new je),u.copy(l),w>this.radius*this.radius&&(u.sub(this.center).normalize(),u.multiplyScalar(this.radius).add(this.center)),u}getBoundingBox(l){return void 0===l&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),l=new Po),this.isEmpty()?(l.makeEmpty(),l):(l.set(this.center,this.center),l.expandByScalar(this.radius),l)}applyMatrix4(l){return this.center.applyMatrix4(l),this.radius=this.radius*l.getMaxScaleOnAxis(),this}translate(l){return this.center.add(l),this}equals(l){return l.center.equals(this.center)&&l.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const da=new je,$l=new je,al=new je,wo=new je,Vh=new je,Eu=new je,Tu=new je;class ea{constructor(l=new je,u=new je(0,0,-1)){this.origin=l,this.direction=u}set(l,u){return this.origin.copy(l),this.direction.copy(u),this}copy(l){return this.origin.copy(l.origin),this.direction.copy(l.direction),this}at(l,u){return void 0===u&&(console.warn("THREE.Ray: .at() target is now required"),u=new je),u.copy(this.direction).multiplyScalar(l).add(this.origin)}lookAt(l){return this.direction.copy(l).sub(this.origin).normalize(),this}recast(l){return this.origin.copy(this.at(l,da)),this}closestPointToPoint(l,u){void 0===u&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),u=new je),u.subVectors(l,this.origin);const w=u.dot(this.direction);return w<0?u.copy(this.origin):u.copy(this.direction).multiplyScalar(w).add(this.origin)}distanceToPoint(l){return Math.sqrt(this.distanceSqToPoint(l))}distanceSqToPoint(l){const u=da.subVectors(l,this.origin).dot(this.direction);return u<0?this.origin.distanceToSquared(l):(da.copy(this.direction).multiplyScalar(u).add(this.origin),da.distanceToSquared(l))}distanceSqToSegment(l,u,w,E){$l.copy(l).add(u).multiplyScalar(.5),al.copy(u).sub(l).normalize(),wo.copy(this.origin).sub($l);const R=.5*l.distanceTo(u),z=-this.direction.dot(al),Y=wo.dot(this.direction),Q=-wo.dot(al),ee=wo.lengthSq(),pe=Math.abs(1-z*z);let he,me,be,Ee;if(pe>0)if(he=z*Q-Y,me=z*Y-Q,Ee=R*pe,he>=0)if(me>=-Ee)if(me<=Ee){const Fe=1/pe;he*=Fe,me*=Fe,be=he*(he+z*me+2*Y)+me*(z*he+me+2*Q)+ee}else me=R,he=Math.max(0,-(z*me+Y)),be=-he*he+me*(me+2*Q)+ee;else me=-R,he=Math.max(0,-(z*me+Y)),be=-he*he+me*(me+2*Q)+ee;else me<=-Ee?(he=Math.max(0,-(-z*R+Y)),me=he>0?-R:Math.min(Math.max(-R,-Q),R),be=-he*he+me*(me+2*Q)+ee):me<=Ee?(he=0,me=Math.min(Math.max(-R,-Q),R),be=me*(me+2*Q)+ee):(he=Math.max(0,-(z*R+Y)),me=he>0?R:Math.min(Math.max(-R,-Q),R),be=-he*he+me*(me+2*Q)+ee);else me=z>0?-R:R,he=Math.max(0,-(z*me+Y)),be=-he*he+me*(me+2*Q)+ee;return w&&w.copy(this.direction).multiplyScalar(he).add(this.origin),E&&E.copy(al).multiplyScalar(me).add($l),be}intersectSphere(l,u){da.subVectors(l.center,this.origin);const w=da.dot(this.direction),E=da.dot(da)-w*w,R=l.radius*l.radius;if(E>R)return null;const z=Math.sqrt(R-E),Y=w-z,Q=w+z;return Y<0&&Q<0?null:this.at(Y<0?Q:Y,u)}intersectsSphere(l){return this.distanceSqToPoint(l.center)<=l.radius*l.radius}distanceToPlane(l){const u=l.normal.dot(this.direction);if(0===u)return 0===l.distanceToPoint(this.origin)?0:null;const w=-(this.origin.dot(l.normal)+l.constant)/u;return w>=0?w:null}intersectPlane(l,u){const w=this.distanceToPlane(l);return null===w?null:this.at(w,u)}intersectsPlane(l){const u=l.distanceToPoint(this.origin);return 0===u||l.normal.dot(this.direction)*u<0}intersectBox(l,u){let w,E,R,z,Y,Q;const ee=1/this.direction.x,pe=1/this.direction.y,he=1/this.direction.z,me=this.origin;return ee>=0?(w=(l.min.x-me.x)*ee,E=(l.max.x-me.x)*ee):(w=(l.max.x-me.x)*ee,E=(l.min.x-me.x)*ee),pe>=0?(R=(l.min.y-me.y)*pe,z=(l.max.y-me.y)*pe):(R=(l.max.y-me.y)*pe,z=(l.min.y-me.y)*pe),w>z||R>E||((R>w||w!=w)&&(w=R),(z<E||E!=E)&&(E=z),he>=0?(Y=(l.min.z-me.z)*he,Q=(l.max.z-me.z)*he):(Y=(l.max.z-me.z)*he,Q=(l.min.z-me.z)*he),w>Q||Y>E)||((Y>w||w!=w)&&(w=Y),(Q<E||E!=E)&&(E=Q),E<0)?null:this.at(w>=0?w:E,u)}intersectsBox(l){return null!==this.intersectBox(l,da)}intersectTriangle(l,u,w,E,R){Vh.subVectors(u,l),Eu.subVectors(w,l),Tu.crossVectors(Vh,Eu);let Y,z=this.direction.dot(Tu);if(z>0){if(E)return null;Y=1}else{if(!(z<0))return null;Y=-1,z=-z}wo.subVectors(this.origin,l);const Q=Y*this.direction.dot(Eu.crossVectors(wo,Eu));if(Q<0)return null;const ee=Y*this.direction.dot(Vh.cross(wo));if(ee<0||Q+ee>z)return null;const pe=-Y*wo.dot(Tu);return pe<0?null:this.at(pe/z,R)}applyMatrix4(l){return this.origin.applyMatrix4(l),this.direction.transformDirection(l),this}equals(l){return l.origin.equals(this.origin)&&l.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class hr{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(l,u,w,E,R,z,Y,Q,ee,pe,he,me,be,Ee,Fe,He){const Re=this.elements;return Re[0]=l,Re[4]=u,Re[8]=w,Re[12]=E,Re[1]=R,Re[5]=z,Re[9]=Y,Re[13]=Q,Re[2]=ee,Re[6]=pe,Re[10]=he,Re[14]=me,Re[3]=be,Re[7]=Ee,Re[11]=Fe,Re[15]=He,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new hr).fromArray(this.elements)}copy(l){const u=this.elements,w=l.elements;return u[0]=w[0],u[1]=w[1],u[2]=w[2],u[3]=w[3],u[4]=w[4],u[5]=w[5],u[6]=w[6],u[7]=w[7],u[8]=w[8],u[9]=w[9],u[10]=w[10],u[11]=w[11],u[12]=w[12],u[13]=w[13],u[14]=w[14],u[15]=w[15],this}copyPosition(l){const u=this.elements,w=l.elements;return u[12]=w[12],u[13]=w[13],u[14]=w[14],this}setFromMatrix3(l){const u=l.elements;return this.set(u[0],u[3],u[6],0,u[1],u[4],u[7],0,u[2],u[5],u[8],0,0,0,0,1),this}extractBasis(l,u,w){return l.setFromMatrixColumn(this,0),u.setFromMatrixColumn(this,1),w.setFromMatrixColumn(this,2),this}makeBasis(l,u,w){return this.set(l.x,u.x,w.x,0,l.y,u.y,w.y,0,l.z,u.z,w.z,0,0,0,0,1),this}extractRotation(l){const u=this.elements,w=l.elements,E=1/Zu.setFromMatrixColumn(l,0).length(),R=1/Zu.setFromMatrixColumn(l,1).length(),z=1/Zu.setFromMatrixColumn(l,2).length();return u[0]=w[0]*E,u[1]=w[1]*E,u[2]=w[2]*E,u[3]=0,u[4]=w[4]*R,u[5]=w[5]*R,u[6]=w[6]*R,u[7]=0,u[8]=w[8]*z,u[9]=w[9]*z,u[10]=w[10]*z,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,this}makeRotationFromEuler(l){l&&l.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const u=this.elements,w=l.x,E=l.y,R=l.z,z=Math.cos(w),Y=Math.sin(w),Q=Math.cos(E),ee=Math.sin(E),pe=Math.cos(R),he=Math.sin(R);if("XYZ"===l.order){const me=z*pe,be=z*he,Ee=Y*pe,Fe=Y*he;u[0]=Q*pe,u[4]=-Q*he,u[8]=ee,u[1]=be+Ee*ee,u[5]=me-Fe*ee,u[9]=-Y*Q,u[2]=Fe-me*ee,u[6]=Ee+be*ee,u[10]=z*Q}else if("YXZ"===l.order){const me=Q*pe,be=Q*he,Ee=ee*pe,Fe=ee*he;u[0]=me+Fe*Y,u[4]=Ee*Y-be,u[8]=z*ee,u[1]=z*he,u[5]=z*pe,u[9]=-Y,u[2]=be*Y-Ee,u[6]=Fe+me*Y,u[10]=z*Q}else if("ZXY"===l.order){const me=Q*pe,be=Q*he,Ee=ee*pe,Fe=ee*he;u[0]=me-Fe*Y,u[4]=-z*he,u[8]=Ee+be*Y,u[1]=be+Ee*Y,u[5]=z*pe,u[9]=Fe-me*Y,u[2]=-z*ee,u[6]=Y,u[10]=z*Q}else if("ZYX"===l.order){const me=z*pe,be=z*he,Ee=Y*pe,Fe=Y*he;u[0]=Q*pe,u[4]=Ee*ee-be,u[8]=me*ee+Fe,u[1]=Q*he,u[5]=Fe*ee+me,u[9]=be*ee-Ee,u[2]=-ee,u[6]=Y*Q,u[10]=z*Q}else if("YZX"===l.order){const me=z*Q,be=z*ee,Ee=Y*Q,Fe=Y*ee;u[0]=Q*pe,u[4]=Fe-me*he,u[8]=Ee*he+be,u[1]=he,u[5]=z*pe,u[9]=-Y*pe,u[2]=-ee*pe,u[6]=be*he+Ee,u[10]=me-Fe*he}else if("XZY"===l.order){const me=z*Q,be=z*ee,Ee=Y*Q,Fe=Y*ee;u[0]=Q*pe,u[4]=-he,u[8]=ee*pe,u[1]=me*he+Fe,u[5]=z*pe,u[9]=be*he-Ee,u[2]=Ee*he-be,u[6]=Y*pe,u[10]=Fe*he+me}return u[3]=0,u[7]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,this}makeRotationFromQuaternion(l){return this.compose(yf,l,Jm)}lookAt(l,u,w){const E=this.elements;return Ja.subVectors(l,u),0===Ja.lengthSq()&&(Ja.z=1),Ja.normalize(),_c.crossVectors(w,Ja),0===_c.lengthSq()&&(1===Math.abs(w.z)?Ja.x+=1e-4:Ja.z+=1e-4,Ja.normalize(),_c.crossVectors(w,Ja)),_c.normalize(),Wc.crossVectors(Ja,_c),E[0]=_c.x,E[4]=Wc.x,E[8]=Ja.x,E[1]=_c.y,E[5]=Wc.y,E[9]=Ja.y,E[2]=_c.z,E[6]=Wc.z,E[10]=Ja.z,this}multiply(l,u){return void 0!==u?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(l,u)):this.multiplyMatrices(this,l)}premultiply(l){return this.multiplyMatrices(l,this)}multiplyMatrices(l,u){const w=l.elements,E=u.elements,R=this.elements,z=w[0],Y=w[4],Q=w[8],ee=w[12],pe=w[1],he=w[5],me=w[9],be=w[13],Ee=w[2],Fe=w[6],He=w[10],Re=w[14],Se=w[3],rt=w[7],nt=w[11],ft=w[15],et=E[0],Tt=E[4],Qt=E[8],zt=E[12],Gt=E[1],cn=E[5],An=E[9],pn=E[13],Wt=E[2],an=E[6],Tn=E[10],vi=E[14],Gi=E[3],$i=E[7],Tr=E[11],br=E[15];return R[0]=z*et+Y*Gt+Q*Wt+ee*Gi,R[4]=z*Tt+Y*cn+Q*an+ee*$i,R[8]=z*Qt+Y*An+Q*Tn+ee*Tr,R[12]=z*zt+Y*pn+Q*vi+ee*br,R[1]=pe*et+he*Gt+me*Wt+be*Gi,R[5]=pe*Tt+he*cn+me*an+be*$i,R[9]=pe*Qt+he*An+me*Tn+be*Tr,R[13]=pe*zt+he*pn+me*vi+be*br,R[2]=Ee*et+Fe*Gt+He*Wt+Re*Gi,R[6]=Ee*Tt+Fe*cn+He*an+Re*$i,R[10]=Ee*Qt+Fe*An+He*Tn+Re*Tr,R[14]=Ee*zt+Fe*pn+He*vi+Re*br,R[3]=Se*et+rt*Gt+nt*Wt+ft*Gi,R[7]=Se*Tt+rt*cn+nt*an+ft*$i,R[11]=Se*Qt+rt*An+nt*Tn+ft*Tr,R[15]=Se*zt+rt*pn+nt*vi+ft*br,this}multiplyScalar(l){const u=this.elements;return u[0]*=l,u[4]*=l,u[8]*=l,u[12]*=l,u[1]*=l,u[5]*=l,u[9]*=l,u[13]*=l,u[2]*=l,u[6]*=l,u[10]*=l,u[14]*=l,u[3]*=l,u[7]*=l,u[11]*=l,u[15]*=l,this}determinant(){const l=this.elements,u=l[0],w=l[4],E=l[8],R=l[12],z=l[1],Y=l[5],Q=l[9],ee=l[13],pe=l[2],he=l[6],me=l[10],be=l[14];return l[3]*(+R*Q*he-E*ee*he-R*Y*me+w*ee*me+E*Y*be-w*Q*be)+l[7]*(+u*Q*be-u*ee*me+R*z*me-E*z*be+E*ee*pe-R*Q*pe)+l[11]*(+u*ee*he-u*Y*be-R*z*he+w*z*be+R*Y*pe-w*ee*pe)+l[15]*(-E*Y*pe-u*Q*he+u*Y*me+E*z*he-w*z*me+w*Q*pe)}transpose(){const l=this.elements;let u;return u=l[1],l[1]=l[4],l[4]=u,u=l[2],l[2]=l[8],l[8]=u,u=l[6],l[6]=l[9],l[9]=u,u=l[3],l[3]=l[12],l[12]=u,u=l[7],l[7]=l[13],l[13]=u,u=l[11],l[11]=l[14],l[14]=u,this}setPosition(l,u,w){const E=this.elements;return l.isVector3?(E[12]=l.x,E[13]=l.y,E[14]=l.z):(E[12]=l,E[13]=u,E[14]=w),this}invert(){const l=this.elements,u=l[0],w=l[1],E=l[2],R=l[3],z=l[4],Y=l[5],Q=l[6],ee=l[7],pe=l[8],he=l[9],me=l[10],be=l[11],Ee=l[12],Fe=l[13],He=l[14],Re=l[15],Se=he*He*ee-Fe*me*ee+Fe*Q*be-Y*He*be-he*Q*Re+Y*me*Re,rt=Ee*me*ee-pe*He*ee-Ee*Q*be+z*He*be+pe*Q*Re-z*me*Re,nt=pe*Fe*ee-Ee*he*ee+Ee*Y*be-z*Fe*be-pe*Y*Re+z*he*Re,ft=Ee*he*Q-pe*Fe*Q-Ee*Y*me+z*Fe*me+pe*Y*He-z*he*He,et=u*Se+w*rt+E*nt+R*ft;if(0===et)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Tt=1/et;return l[0]=Se*Tt,l[1]=(Fe*me*R-he*He*R-Fe*E*be+w*He*be+he*E*Re-w*me*Re)*Tt,l[2]=(Y*He*R-Fe*Q*R+Fe*E*ee-w*He*ee-Y*E*Re+w*Q*Re)*Tt,l[3]=(he*Q*R-Y*me*R-he*E*ee+w*me*ee+Y*E*be-w*Q*be)*Tt,l[4]=rt*Tt,l[5]=(pe*He*R-Ee*me*R+Ee*E*be-u*He*be-pe*E*Re+u*me*Re)*Tt,l[6]=(Ee*Q*R-z*He*R-Ee*E*ee+u*He*ee+z*E*Re-u*Q*Re)*Tt,l[7]=(z*me*R-pe*Q*R+pe*E*ee-u*me*ee-z*E*be+u*Q*be)*Tt,l[8]=nt*Tt,l[9]=(Ee*he*R-pe*Fe*R-Ee*w*be+u*Fe*be+pe*w*Re-u*he*Re)*Tt,l[10]=(z*Fe*R-Ee*Y*R+Ee*w*ee-u*Fe*ee-z*w*Re+u*Y*Re)*Tt,l[11]=(pe*Y*R-z*he*R-pe*w*ee+u*he*ee+z*w*be-u*Y*be)*Tt,l[12]=ft*Tt,l[13]=(pe*Fe*E-Ee*he*E+Ee*w*me-u*Fe*me-pe*w*He+u*he*He)*Tt,l[14]=(Ee*Y*E-z*Fe*E-Ee*w*Q+u*Fe*Q+z*w*He-u*Y*He)*Tt,l[15]=(z*he*E-pe*Y*E+pe*w*Q-u*he*Q-z*w*me+u*Y*me)*Tt,this}scale(l){const u=this.elements,w=l.x,E=l.y,R=l.z;return u[0]*=w,u[4]*=E,u[8]*=R,u[1]*=w,u[5]*=E,u[9]*=R,u[2]*=w,u[6]*=E,u[10]*=R,u[3]*=w,u[7]*=E,u[11]*=R,this}getMaxScaleOnAxis(){const l=this.elements;return Math.sqrt(Math.max(l[0]*l[0]+l[1]*l[1]+l[2]*l[2],l[4]*l[4]+l[5]*l[5]+l[6]*l[6],l[8]*l[8]+l[9]*l[9]+l[10]*l[10]))}makeTranslation(l,u,w){return this.set(1,0,0,l,0,1,0,u,0,0,1,w,0,0,0,1),this}makeRotationX(l){const u=Math.cos(l),w=Math.sin(l);return this.set(1,0,0,0,0,u,-w,0,0,w,u,0,0,0,0,1),this}makeRotationY(l){const u=Math.cos(l),w=Math.sin(l);return this.set(u,0,w,0,0,1,0,0,-w,0,u,0,0,0,0,1),this}makeRotationZ(l){const u=Math.cos(l),w=Math.sin(l);return this.set(u,-w,0,0,w,u,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(l,u){const w=Math.cos(u),E=Math.sin(u),R=1-w,z=l.x,Y=l.y,Q=l.z,ee=R*z,pe=R*Y;return this.set(ee*z+w,ee*Y-E*Q,ee*Q+E*Y,0,ee*Y+E*Q,pe*Y+w,pe*Q-E*z,0,ee*Q-E*Y,pe*Q+E*z,R*Q*Q+w,0,0,0,0,1),this}makeScale(l,u,w){return this.set(l,0,0,0,0,u,0,0,0,0,w,0,0,0,0,1),this}makeShear(l,u,w){return this.set(1,u,w,0,l,1,w,0,l,u,1,0,0,0,0,1),this}compose(l,u,w){const E=this.elements,R=u._x,z=u._y,Y=u._z,Q=u._w,ee=R+R,pe=z+z,he=Y+Y,me=R*ee,be=R*pe,Ee=R*he,Fe=z*pe,He=z*he,Re=Y*he,Se=Q*ee,rt=Q*pe,nt=Q*he,ft=w.x,et=w.y,Tt=w.z;return E[0]=(1-(Fe+Re))*ft,E[1]=(be+nt)*ft,E[2]=(Ee-rt)*ft,E[3]=0,E[4]=(be-nt)*et,E[5]=(1-(me+Re))*et,E[6]=(He+Se)*et,E[7]=0,E[8]=(Ee+rt)*Tt,E[9]=(He-Se)*Tt,E[10]=(1-(me+Fe))*Tt,E[11]=0,E[12]=l.x,E[13]=l.y,E[14]=l.z,E[15]=1,this}decompose(l,u,w){const E=this.elements;let R=Zu.set(E[0],E[1],E[2]).length();const z=Zu.set(E[4],E[5],E[6]).length(),Y=Zu.set(E[8],E[9],E[10]).length();this.determinant()<0&&(R=-R),l.x=E[12],l.y=E[13],l.z=E[14],ec.copy(this);const ee=1/R,pe=1/z,he=1/Y;return ec.elements[0]*=ee,ec.elements[1]*=ee,ec.elements[2]*=ee,ec.elements[4]*=pe,ec.elements[5]*=pe,ec.elements[6]*=pe,ec.elements[8]*=he,ec.elements[9]*=he,ec.elements[10]*=he,u.setFromRotationMatrix(ec),w.x=R,w.y=z,w.z=Y,this}makePerspective(l,u,w,E,R,z){void 0===z&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const Y=this.elements,ee=2*R/(w-E),pe=(u+l)/(u-l),he=(w+E)/(w-E),me=-(z+R)/(z-R),be=-2*z*R/(z-R);return Y[0]=2*R/(u-l),Y[4]=0,Y[8]=pe,Y[12]=0,Y[1]=0,Y[5]=ee,Y[9]=he,Y[13]=0,Y[2]=0,Y[6]=0,Y[10]=me,Y[14]=be,Y[3]=0,Y[7]=0,Y[11]=-1,Y[15]=0,this}makeOrthographic(l,u,w,E,R,z){const Y=this.elements,Q=1/(u-l),ee=1/(w-E),pe=1/(z-R),he=(u+l)*Q,me=(w+E)*ee,be=(z+R)*pe;return Y[0]=2*Q,Y[4]=0,Y[8]=0,Y[12]=-he,Y[1]=0,Y[5]=2*ee,Y[9]=0,Y[13]=-me,Y[2]=0,Y[6]=0,Y[10]=-2*pe,Y[14]=-be,Y[3]=0,Y[7]=0,Y[11]=0,Y[15]=1,this}equals(l){const u=this.elements,w=l.elements;for(let E=0;E<16;E++)if(u[E]!==w[E])return!1;return!0}fromArray(l,u=0){for(let w=0;w<16;w++)this.elements[w]=l[w+u];return this}toArray(l=[],u=0){const w=this.elements;return l[u]=w[0],l[u+1]=w[1],l[u+2]=w[2],l[u+3]=w[3],l[u+4]=w[4],l[u+5]=w[5],l[u+6]=w[6],l[u+7]=w[7],l[u+8]=w[8],l[u+9]=w[9],l[u+10]=w[10],l[u+11]=w[11],l[u+12]=w[12],l[u+13]=w[13],l[u+14]=w[14],l[u+15]=w[15],l}}hr.prototype.isMatrix4=!0;const Zu=new je,ec=new hr,yf=new je(0,0,0),Jm=new je(1,1,1),_c=new je,Wc=new je,Ja=new je,Sd=new hr,Ip=new Cs;class Ke{constructor(l=0,u=0,w=0,E=Ke.DefaultOrder){this._x=l,this._y=u,this._z=w,this._order=E}get x(){return this._x}set x(l){this._x=l,this._onChangeCallback()}get y(){return this._y}set y(l){this._y=l,this._onChangeCallback()}get z(){return this._z}set z(l){this._z=l,this._onChangeCallback()}get order(){return this._order}set order(l){this._order=l,this._onChangeCallback()}set(l,u,w,E){return this._x=l,this._y=u,this._z=w,this._order=E||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(l){return this._x=l._x,this._y=l._y,this._z=l._z,this._order=l._order,this._onChangeCallback(),this}setFromRotationMatrix(l,u,w){const E=Ui.clamp,R=l.elements,z=R[0],Y=R[4],Q=R[8],ee=R[1],pe=R[5],he=R[9],me=R[2],be=R[6],Ee=R[10];switch(u=u||this._order){case"XYZ":this._y=Math.asin(E(Q,-1,1)),Math.abs(Q)<.9999999?(this._x=Math.atan2(-he,Ee),this._z=Math.atan2(-Y,z)):(this._x=Math.atan2(be,pe),this._z=0);break;case"YXZ":this._x=Math.asin(-E(he,-1,1)),Math.abs(he)<.9999999?(this._y=Math.atan2(Q,Ee),this._z=Math.atan2(ee,pe)):(this._y=Math.atan2(-me,z),this._z=0);break;case"ZXY":this._x=Math.asin(E(be,-1,1)),Math.abs(be)<.9999999?(this._y=Math.atan2(-me,Ee),this._z=Math.atan2(-Y,pe)):(this._y=0,this._z=Math.atan2(ee,z));break;case"ZYX":this._y=Math.asin(-E(me,-1,1)),Math.abs(me)<.9999999?(this._x=Math.atan2(be,Ee),this._z=Math.atan2(ee,z)):(this._x=0,this._z=Math.atan2(-Y,pe));break;case"YZX":this._z=Math.asin(E(ee,-1,1)),Math.abs(ee)<.9999999?(this._x=Math.atan2(-he,pe),this._y=Math.atan2(-me,z)):(this._x=0,this._y=Math.atan2(Q,Ee));break;case"XZY":this._z=Math.asin(-E(Y,-1,1)),Math.abs(Y)<.9999999?(this._x=Math.atan2(be,pe),this._y=Math.atan2(Q,z)):(this._x=Math.atan2(-he,Ee),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+u)}return this._order=u,!1!==w&&this._onChangeCallback(),this}setFromQuaternion(l,u,w){return Sd.makeRotationFromQuaternion(l),this.setFromRotationMatrix(Sd,u,w)}setFromVector3(l,u){return this.set(l.x,l.y,l.z,u||this._order)}reorder(l){return Ip.setFromEuler(this),this.setFromQuaternion(Ip,l)}equals(l){return l._x===this._x&&l._y===this._y&&l._z===this._z&&l._order===this._order}fromArray(l){return this._x=l[0],this._y=l[1],this._z=l[2],void 0!==l[3]&&(this._order=l[3]),this._onChangeCallback(),this}toArray(l=[],u=0){return l[u]=this._x,l[u+1]=this._y,l[u+2]=this._z,l[u+3]=this._order,l}toVector3(l){return l?l.set(this._x,this._y,this._z):new je(this._x,this._y,this._z)}_onChange(l){return this._onChangeCallback=l,this}_onChangeCallback(){}}Ke.prototype.isEuler=!0,Ke.DefaultOrder="XYZ",Ke.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class bt{constructor(){this.mask=1}set(l){this.mask=1<<l|0}enable(l){this.mask|=1<<l|0}enableAll(){this.mask=-1}toggle(l){this.mask^=1<<l|0}disable(l){this.mask&=~(1<<l|0)}disableAll(){this.mask=0}test(l){return 0!=(this.mask&l.mask)}}let kt=0;const Pn=new je,Ft=new Cs,In=new hr,qn=new je,yi=new je,Fi=new je,Rr=new Cs,Er=new je(1,0,0),Hr=new je(0,1,0),Is=new je(0,0,1),Xs={type:"added"},Nr={type:"removed"};function xi(){Object.defineProperty(this,"id",{value:kt++}),this.uuid=Ui.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=xi.DefaultUp.clone();const x=new je,l=new Ke,u=new Cs,w=new je(1,1,1);l._onChange(function E(){u.setFromEuler(l,!1)}),u._onChange(function R(){l.setFromQuaternion(u,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:x},rotation:{configurable:!0,enumerable:!0,value:l},quaternion:{configurable:!0,enumerable:!0,value:u},scale:{configurable:!0,enumerable:!0,value:w},modelViewMatrix:{value:new hr},normalMatrix:{value:new oo}}),this.matrix=new hr,this.matrixWorld=new hr,this.matrixAutoUpdate=xi.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new bt,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}xi.DefaultUp=new je(0,1,0),xi.DefaultMatrixAutoUpdate=!0,xi.prototype=Object.assign(Object.create(pl.prototype),{constructor:xi,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(x){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(x),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(x){return this.quaternion.premultiply(x),this},setRotationFromAxisAngle:function(x,l){this.quaternion.setFromAxisAngle(x,l)},setRotationFromEuler:function(x){this.quaternion.setFromEuler(x,!0)},setRotationFromMatrix:function(x){this.quaternion.setFromRotationMatrix(x)},setRotationFromQuaternion:function(x){this.quaternion.copy(x)},rotateOnAxis:function(x,l){return Ft.setFromAxisAngle(x,l),this.quaternion.multiply(Ft),this},rotateOnWorldAxis:function(x,l){return Ft.setFromAxisAngle(x,l),this.quaternion.premultiply(Ft),this},rotateX:function(x){return this.rotateOnAxis(Er,x)},rotateY:function(x){return this.rotateOnAxis(Hr,x)},rotateZ:function(x){return this.rotateOnAxis(Is,x)},translateOnAxis:function(x,l){return Pn.copy(x).applyQuaternion(this.quaternion),this.position.add(Pn.multiplyScalar(l)),this},translateX:function(x){return this.translateOnAxis(Er,x)},translateY:function(x){return this.translateOnAxis(Hr,x)},translateZ:function(x){return this.translateOnAxis(Is,x)},localToWorld:function(x){return x.applyMatrix4(this.matrixWorld)},worldToLocal:function(x){return x.applyMatrix4(In.copy(this.matrixWorld).invert())},lookAt:function(x,l,u){x.isVector3?qn.copy(x):qn.set(x,l,u);const w=this.parent;this.updateWorldMatrix(!0,!1),yi.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?In.lookAt(yi,qn,this.up):In.lookAt(qn,yi,this.up),this.quaternion.setFromRotationMatrix(In),w&&(In.extractRotation(w.matrixWorld),Ft.setFromRotationMatrix(In),this.quaternion.premultiply(Ft.invert()))},add:function(x){if(arguments.length>1){for(let l=0;l<arguments.length;l++)this.add(arguments[l]);return this}return x===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",x),this):(x&&x.isObject3D?(null!==x.parent&&x.parent.remove(x),x.parent=this,this.children.push(x),x.dispatchEvent(Xs)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",x),this)},remove:function(x){if(arguments.length>1){for(let u=0;u<arguments.length;u++)this.remove(arguments[u]);return this}const l=this.children.indexOf(x);return-1!==l&&(x.parent=null,this.children.splice(l,1),x.dispatchEvent(Nr)),this},clear:function(){for(let x=0;x<this.children.length;x++){const l=this.children[x];l.parent=null,l.dispatchEvent(Nr)}return this.children.length=0,this},attach:function(x){return this.updateWorldMatrix(!0,!1),In.copy(this.matrixWorld).invert(),null!==x.parent&&(x.parent.updateWorldMatrix(!0,!1),In.multiply(x.parent.matrixWorld)),x.applyMatrix4(In),this.add(x),x.updateWorldMatrix(!1,!0),this},getObjectById:function(x){return this.getObjectByProperty("id",x)},getObjectByName:function(x){return this.getObjectByProperty("name",x)},getObjectByProperty:function(x,l){if(this[x]===l)return this;for(let u=0,w=this.children.length;u<w;u++){const R=this.children[u].getObjectByProperty(x,l);if(void 0!==R)return R}},getWorldPosition:function(x){return void 0===x&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),x=new je),this.updateWorldMatrix(!0,!1),x.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(x){return void 0===x&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),x=new Cs),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yi,x,Fi),x},getWorldScale:function(x){return void 0===x&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),x=new je),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yi,Rr,x),x},getWorldDirection:function(x){void 0===x&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),x=new je),this.updateWorldMatrix(!0,!1);const l=this.matrixWorld.elements;return x.set(l[8],l[9],l[10]).normalize()},raycast:function(){},traverse:function(x){x(this);const l=this.children;for(let u=0,w=l.length;u<w;u++)l[u].traverse(x)},traverseVisible:function(x){if(!1===this.visible)return;x(this);const l=this.children;for(let u=0,w=l.length;u<w;u++)l[u].traverseVisible(x)},traverseAncestors:function(x){const l=this.parent;null!==l&&(x(l),l.traverseAncestors(x))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(x){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||x)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,x=!0);const l=this.children;for(let u=0,w=l.length;u<w;u++)l[u].updateMatrixWorld(x)},updateWorldMatrix:function(x,l){const u=this.parent;if(!0===x&&null!==u&&u.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===l){const w=this.children;for(let E=0,R=w.length;E<R;E++)w[E].updateWorldMatrix(!1,!0)}},toJSON:function(x){const l=void 0===x||"string"==typeof x,u={};l&&(x={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},u.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const w={};function E(z,Y){return void 0===z[Y.uuid]&&(z[Y.uuid]=Y.toJSON(x)),Y.uuid}if(w.uuid=this.uuid,w.type=this.type,""!==this.name&&(w.name=this.name),!0===this.castShadow&&(w.castShadow=!0),!0===this.receiveShadow&&(w.receiveShadow=!0),!1===this.visible&&(w.visible=!1),!1===this.frustumCulled&&(w.frustumCulled=!1),0!==this.renderOrder&&(w.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(w.userData=this.userData),w.layers=this.layers.mask,w.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(w.matrixAutoUpdate=!1),this.isInstancedMesh&&(w.type="InstancedMesh",w.count=this.count,w.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){w.geometry=E(x.geometries,this.geometry);const z=this.geometry.parameters;if(void 0!==z&&void 0!==z.shapes){const Y=z.shapes;if(Array.isArray(Y))for(let Q=0,ee=Y.length;Q<ee;Q++)E(x.shapes,Y[Q]);else E(x.shapes,Y)}}if(this.isSkinnedMesh&&(w.bindMode=this.bindMode,w.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(E(x.skeletons,this.skeleton),w.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const z=[];for(let Y=0,Q=this.material.length;Y<Q;Y++)z.push(E(x.materials,this.material[Y]));w.material=z}else w.material=E(x.materials,this.material);if(this.children.length>0){w.children=[];for(let z=0;z<this.children.length;z++)w.children.push(this.children[z].toJSON(x).object)}if(this.animations.length>0){w.animations=[];for(let z=0;z<this.animations.length;z++)w.animations.push(E(x.animations,this.animations[z]))}if(l){const z=R(x.geometries),Y=R(x.materials),Q=R(x.textures),ee=R(x.images),pe=R(x.shapes),he=R(x.skeletons),me=R(x.animations);z.length>0&&(u.geometries=z),Y.length>0&&(u.materials=Y),Q.length>0&&(u.textures=Q),ee.length>0&&(u.images=ee),pe.length>0&&(u.shapes=pe),he.length>0&&(u.skeletons=he),me.length>0&&(u.animations=me)}return u.object=w,u;function R(z){const Y=[];for(const Q in z){const ee=z[Q];delete ee.metadata,Y.push(ee)}return Y}},clone:function(x){return(new this.constructor).copy(this,x)},copy:function(x,l=!0){if(this.name=x.name,this.up.copy(x.up),this.position.copy(x.position),this.rotation.order=x.rotation.order,this.quaternion.copy(x.quaternion),this.scale.copy(x.scale),this.matrix.copy(x.matrix),this.matrixWorld.copy(x.matrixWorld),this.matrixAutoUpdate=x.matrixAutoUpdate,this.matrixWorldNeedsUpdate=x.matrixWorldNeedsUpdate,this.layers.mask=x.layers.mask,this.visible=x.visible,this.castShadow=x.castShadow,this.receiveShadow=x.receiveShadow,this.frustumCulled=x.frustumCulled,this.renderOrder=x.renderOrder,this.userData=JSON.parse(JSON.stringify(x.userData)),!0===l)for(let u=0;u<x.children.length;u++)this.add(x.children[u].clone());return this}});const Na=new je,Bl=new je,Wo=new oo;class wa{constructor(l=new je(1,0,0),u=0){this.normal=l,this.constant=u}set(l,u){return this.normal.copy(l),this.constant=u,this}setComponents(l,u,w,E){return this.normal.set(l,u,w),this.constant=E,this}setFromNormalAndCoplanarPoint(l,u){return this.normal.copy(l),this.constant=-u.dot(this.normal),this}setFromCoplanarPoints(l,u,w){const E=Na.subVectors(w,u).cross(Bl.subVectors(l,u)).normalize();return this.setFromNormalAndCoplanarPoint(E,l),this}copy(l){return this.normal.copy(l.normal),this.constant=l.constant,this}normalize(){const l=1/this.normal.length();return this.normal.multiplyScalar(l),this.constant*=l,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(l){return this.normal.dot(l)+this.constant}distanceToSphere(l){return this.distanceToPoint(l.center)-l.radius}projectPoint(l,u){return void 0===u&&(console.warn("THREE.Plane: .projectPoint() target is now required"),u=new je),u.copy(this.normal).multiplyScalar(-this.distanceToPoint(l)).add(l)}intersectLine(l,u){void 0===u&&(console.warn("THREE.Plane: .intersectLine() target is now required"),u=new je);const w=l.delta(Na),E=this.normal.dot(w);if(0===E)return 0===this.distanceToPoint(l.start)?u.copy(l.start):void 0;const R=-(l.start.dot(this.normal)+this.constant)/E;return R<0||R>1?void 0:u.copy(w).multiplyScalar(R).add(l.start)}intersectsLine(l){const u=this.distanceToPoint(l.start),w=this.distanceToPoint(l.end);return u<0&&w>0||w<0&&u>0}intersectsBox(l){return l.intersectsPlane(this)}intersectsSphere(l){return l.intersectsPlane(this)}coplanarPoint(l){return void 0===l&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),l=new je),l.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(l,u){const w=u||Wo.getNormalMatrix(l),E=this.coplanarPoint(Na).applyMatrix4(l),R=this.normal.applyMatrix3(w).normalize();return this.constant=-E.dot(R),this}translate(l){return this.constant-=l.dot(this.normal),this}equals(l){return l.normal.equals(this.normal)&&l.constant===this.constant}clone(){return(new this.constructor).copy(this)}}wa.prototype.isPlane=!0;const Ka=new je,fa=new je,Uh=new je,hh=new je,Hl=new je,Gh=new je,Km=new je,Ed=new je,Wh=new je,Td=new je;class Ma{constructor(l=new je,u=new je,w=new je){this.a=l,this.b=u,this.c=w}static getNormal(l,u,w,E){void 0===E&&(console.warn("THREE.Triangle: .getNormal() target is now required"),E=new je),E.subVectors(w,u),Ka.subVectors(l,u),E.cross(Ka);const R=E.lengthSq();return R>0?E.multiplyScalar(1/Math.sqrt(R)):E.set(0,0,0)}static getBarycoord(l,u,w,E,R){Ka.subVectors(E,u),fa.subVectors(w,u),Uh.subVectors(l,u);const z=Ka.dot(Ka),Y=Ka.dot(fa),Q=Ka.dot(Uh),ee=fa.dot(fa),pe=fa.dot(Uh),he=z*ee-Y*Y;if(void 0===R&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),R=new je),0===he)return R.set(-2,-1,-1);const me=1/he,be=(ee*Q-Y*pe)*me,Ee=(z*pe-Y*Q)*me;return R.set(1-be-Ee,Ee,be)}static containsPoint(l,u,w,E){return this.getBarycoord(l,u,w,E,hh),hh.x>=0&&hh.y>=0&&hh.x+hh.y<=1}static getUV(l,u,w,E,R,z,Y,Q){return this.getBarycoord(l,u,w,E,hh),Q.set(0,0),Q.addScaledVector(R,hh.x),Q.addScaledVector(z,hh.y),Q.addScaledVector(Y,hh.z),Q}static isFrontFacing(l,u,w,E){return Ka.subVectors(w,u),fa.subVectors(l,u),Ka.cross(fa).dot(E)<0}set(l,u,w){return this.a.copy(l),this.b.copy(u),this.c.copy(w),this}setFromPointsAndIndices(l,u,w,E){return this.a.copy(l[u]),this.b.copy(l[w]),this.c.copy(l[E]),this}clone(){return(new this.constructor).copy(this)}copy(l){return this.a.copy(l.a),this.b.copy(l.b),this.c.copy(l.c),this}getArea(){return Ka.subVectors(this.c,this.b),fa.subVectors(this.a,this.b),.5*Ka.cross(fa).length()}getMidpoint(l){return void 0===l&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),l=new je),l.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(l){return Ma.getNormal(this.a,this.b,this.c,l)}getPlane(l){return void 0===l&&(console.warn("THREE.Triangle: .getPlane() target is now required"),l=new wa),l.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(l,u){return Ma.getBarycoord(l,this.a,this.b,this.c,u)}getUV(l,u,w,E,R){return Ma.getUV(l,this.a,this.b,this.c,u,w,E,R)}containsPoint(l){return Ma.containsPoint(l,this.a,this.b,this.c)}isFrontFacing(l){return Ma.isFrontFacing(this.a,this.b,this.c,l)}intersectsBox(l){return l.intersectsTriangle(this)}closestPointToPoint(l,u){void 0===u&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),u=new je);const w=this.a,E=this.b,R=this.c;let z,Y;Hl.subVectors(E,w),Gh.subVectors(R,w),Ed.subVectors(l,w);const Q=Hl.dot(Ed),ee=Gh.dot(Ed);if(Q<=0&&ee<=0)return u.copy(w);Wh.subVectors(l,E);const pe=Hl.dot(Wh),he=Gh.dot(Wh);if(pe>=0&&he<=pe)return u.copy(E);const me=Q*he-pe*ee;if(me<=0&&Q>=0&&pe<=0)return z=Q/(Q-pe),u.copy(w).addScaledVector(Hl,z);Td.subVectors(l,R);const be=Hl.dot(Td),Ee=Gh.dot(Td);if(Ee>=0&&be<=Ee)return u.copy(R);const Fe=be*ee-Q*Ee;if(Fe<=0&&ee>=0&&Ee<=0)return Y=ee/(ee-Ee),u.copy(w).addScaledVector(Gh,Y);const He=pe*Ee-be*he;if(He<=0&&he-pe>=0&&be-Ee>=0)return Km.subVectors(R,E),Y=(he-pe)/(he-pe+(be-Ee)),u.copy(E).addScaledVector(Km,Y);const Re=1/(He+Fe+me);return z=Fe*Re,Y=me*Re,u.copy(w).addScaledVector(Hl,z).addScaledVector(Gh,Y)}equals(l){return l.a.equals(this.a)&&l.b.equals(this.b)&&l.c.equals(this.c)}}let Qm=0;function qo(){Object.defineProperty(this,"id",{value:Qm++}),this.uuid=Ui.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=we,this.side=J,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=_n,this.blendDst=Dt,this.blendEquation=st,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=zi,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=gr,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ge,this.stencilZFail=ge,this.stencilZPass=ge,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}qo.prototype=Object.assign(Object.create(pl.prototype),{constructor:qo,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(x){if(void 0!==x)for(const l in x){const u=x[l];if(void 0===u){console.warn("THREE.Material: '"+l+"' parameter is undefined.");continue}if("shading"===l){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=u===ce;continue}const w=this[l];void 0!==w?w&&w.isColor?w.set(u):w&&w.isVector3&&u&&u.isVector3?w.copy(u):this[l]=u:console.warn("THREE."+this.type+": '"+l+"' is not a property of this material.")}},toJSON:function(x){const l=void 0===x||"string"==typeof x;l&&(x={textures:{},images:{}});const u={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function w(E){const R=[];for(const z in E){const Y=E[z];delete Y.metadata,R.push(Y)}return R}if(u.uuid=this.uuid,u.type=this.type,""!==this.name&&(u.name=this.name),this.color&&this.color.isColor&&(u.color=this.color.getHex()),void 0!==this.roughness&&(u.roughness=this.roughness),void 0!==this.metalness&&(u.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(u.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(u.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(u.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(u.specular=this.specular.getHex()),void 0!==this.shininess&&(u.shininess=this.shininess),void 0!==this.clearcoat&&(u.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(u.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(u.clearcoatMap=this.clearcoatMap.toJSON(x).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(u.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(x).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(u.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(x).uuid,u.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(u.map=this.map.toJSON(x).uuid),this.matcap&&this.matcap.isTexture&&(u.matcap=this.matcap.toJSON(x).uuid),this.alphaMap&&this.alphaMap.isTexture&&(u.alphaMap=this.alphaMap.toJSON(x).uuid),this.lightMap&&this.lightMap.isTexture&&(u.lightMap=this.lightMap.toJSON(x).uuid,u.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(u.aoMap=this.aoMap.toJSON(x).uuid,u.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(u.bumpMap=this.bumpMap.toJSON(x).uuid,u.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(u.normalMap=this.normalMap.toJSON(x).uuid,u.normalMapType=this.normalMapType,u.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(u.displacementMap=this.displacementMap.toJSON(x).uuid,u.displacementScale=this.displacementScale,u.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(u.roughnessMap=this.roughnessMap.toJSON(x).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(u.metalnessMap=this.metalnessMap.toJSON(x).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(u.emissiveMap=this.emissiveMap.toJSON(x).uuid),this.specularMap&&this.specularMap.isTexture&&(u.specularMap=this.specularMap.toJSON(x).uuid),this.envMap&&this.envMap.isTexture&&(u.envMap=this.envMap.toJSON(x).uuid,u.reflectivity=this.reflectivity,u.refractionRatio=this.refractionRatio,void 0!==this.combine&&(u.combine=this.combine),void 0!==this.envMapIntensity&&(u.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(u.gradientMap=this.gradientMap.toJSON(x).uuid),void 0!==this.size&&(u.size=this.size),void 0!==this.sizeAttenuation&&(u.sizeAttenuation=this.sizeAttenuation),this.blending!==we&&(u.blending=this.blending),this.side!==J&&(u.side=this.side),this.vertexColors&&(u.vertexColors=!0),this.opacity<1&&(u.opacity=this.opacity),!0===this.transparent&&(u.transparent=this.transparent),u.depthFunc=this.depthFunc,u.depthTest=this.depthTest,u.depthWrite=this.depthWrite,u.stencilWrite=this.stencilWrite,u.stencilWriteMask=this.stencilWriteMask,u.stencilFunc=this.stencilFunc,u.stencilRef=this.stencilRef,u.stencilFuncMask=this.stencilFuncMask,u.stencilFail=this.stencilFail,u.stencilZFail=this.stencilZFail,u.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(u.rotation=this.rotation),!0===this.polygonOffset&&(u.polygonOffset=!0),0!==this.polygonOffsetFactor&&(u.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(u.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(u.linewidth=this.linewidth),void 0!==this.dashSize&&(u.dashSize=this.dashSize),void 0!==this.gapSize&&(u.gapSize=this.gapSize),void 0!==this.scale&&(u.scale=this.scale),!0===this.dithering&&(u.dithering=!0),this.alphaTest>0&&(u.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(u.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(u.wireframe=this.wireframe),this.wireframeLinewidth>1&&(u.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(u.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(u.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(u.morphTargets=!0),!0===this.morphNormals&&(u.morphNormals=!0),!0===this.skinning&&(u.skinning=!0),!0===this.flatShading&&(u.flatShading=this.flatShading),!1===this.visible&&(u.visible=!1),!1===this.toneMapped&&(u.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(u.userData=this.userData),l){const E=w(x.textures),R=w(x.images);E.length>0&&(u.textures=E),R.length>0&&(u.images=R)}return u},clone:function(){return(new this.constructor).copy(this)},copy:function(x){this.name=x.name,this.fog=x.fog,this.blending=x.blending,this.side=x.side,this.vertexColors=x.vertexColors,this.opacity=x.opacity,this.transparent=x.transparent,this.blendSrc=x.blendSrc,this.blendDst=x.blendDst,this.blendEquation=x.blendEquation,this.blendSrcAlpha=x.blendSrcAlpha,this.blendDstAlpha=x.blendDstAlpha,this.blendEquationAlpha=x.blendEquationAlpha,this.depthFunc=x.depthFunc,this.depthTest=x.depthTest,this.depthWrite=x.depthWrite,this.stencilWriteMask=x.stencilWriteMask,this.stencilFunc=x.stencilFunc,this.stencilRef=x.stencilRef,this.stencilFuncMask=x.stencilFuncMask,this.stencilFail=x.stencilFail,this.stencilZFail=x.stencilZFail,this.stencilZPass=x.stencilZPass,this.stencilWrite=x.stencilWrite;const l=x.clippingPlanes;let u=null;if(null!==l){const w=l.length;u=new Array(w);for(let E=0;E!==w;++E)u[E]=l[E].clone()}return this.clippingPlanes=u,this.clipIntersection=x.clipIntersection,this.clipShadows=x.clipShadows,this.shadowSide=x.shadowSide,this.colorWrite=x.colorWrite,this.precision=x.precision,this.polygonOffset=x.polygonOffset,this.polygonOffsetFactor=x.polygonOffsetFactor,this.polygonOffsetUnits=x.polygonOffsetUnits,this.dithering=x.dithering,this.alphaTest=x.alphaTest,this.premultipliedAlpha=x.premultipliedAlpha,this.visible=x.visible,this.toneMapped=x.toneMapped,this.userData=JSON.parse(JSON.stringify(x.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(qo.prototype,"needsUpdate",{set:function(x){!0===x&&this.version++}});const Rp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ho={h:0,s:0,l:0},Du={h:0,s:0,l:0};function Dd(x,l,u){return u<0&&(u+=1),u>1&&(u-=1),u<1/6?x+6*(l-x)*u:u<.5?l:u<2/3?x+6*(l-x)*(2/3-u):x}function jo(x){return x<.04045?.0773993808*x:Math.pow(.9478672986*x+.0521327014,2.4)}function Ad(x){return x<.0031308?12.92*x:1.055*Math.pow(x,.41666)-.055}let Ji=(()=>{class x{constructor(u,w,E){return void 0===w&&void 0===E?this.set(u):this.setRGB(u,w,E)}set(u){return u&&u.isColor?this.copy(u):"number"==typeof u?this.setHex(u):"string"==typeof u&&this.setStyle(u),this}setScalar(u){return this.r=u,this.g=u,this.b=u,this}setHex(u){return u=Math.floor(u),this.r=(u>>16&255)/255,this.g=(u>>8&255)/255,this.b=(255&u)/255,this}setRGB(u,w,E){return this.r=u,this.g=w,this.b=E,this}setHSL(u,w,E){if(u=Ui.euclideanModulo(u,1),w=Ui.clamp(w,0,1),E=Ui.clamp(E,0,1),0===w)this.r=this.g=this.b=E;else{const R=E<=.5?E*(1+w):E+w-E*w,z=2*E-R;this.r=Dd(z,R,u+1/3),this.g=Dd(z,R,u),this.b=Dd(z,R,u-1/3)}return this}setStyle(u){function w(R){void 0!==R&&parseFloat(R)<1&&console.warn("THREE.Color: Alpha component of "+u+" will be ignored.")}let E;if(E=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(u)){let R;const Y=E[2];switch(E[1]){case"rgb":case"rgba":if(R=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(Y))return this.r=Math.min(255,parseInt(R[1],10))/255,this.g=Math.min(255,parseInt(R[2],10))/255,this.b=Math.min(255,parseInt(R[3],10))/255,w(R[4]),this;if(R=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(Y))return this.r=Math.min(100,parseInt(R[1],10))/100,this.g=Math.min(100,parseInt(R[2],10))/100,this.b=Math.min(100,parseInt(R[3],10))/100,w(R[4]),this;break;case"hsl":case"hsla":if(R=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(Y)){const Q=parseFloat(R[1])/360,ee=parseInt(R[2],10)/100,pe=parseInt(R[3],10)/100;return w(R[4]),this.setHSL(Q,ee,pe)}}}else if(E=/^\#([A-Fa-f\d]+)$/.exec(u)){const R=E[1],z=R.length;if(3===z)return this.r=parseInt(R.charAt(0)+R.charAt(0),16)/255,this.g=parseInt(R.charAt(1)+R.charAt(1),16)/255,this.b=parseInt(R.charAt(2)+R.charAt(2),16)/255,this;if(6===z)return this.r=parseInt(R.charAt(0)+R.charAt(1),16)/255,this.g=parseInt(R.charAt(2)+R.charAt(3),16)/255,this.b=parseInt(R.charAt(4)+R.charAt(5),16)/255,this}return u&&u.length>0?this.setColorName(u):this}setColorName(u){const w=Rp[u];return void 0!==w?this.setHex(w):console.warn("THREE.Color: Unknown color "+u),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(u){return this.r=u.r,this.g=u.g,this.b=u.b,this}copyGammaToLinear(u,w=2){return this.r=Math.pow(u.r,w),this.g=Math.pow(u.g,w),this.b=Math.pow(u.b,w),this}copyLinearToGamma(u,w=2){const E=w>0?1/w:1;return this.r=Math.pow(u.r,E),this.g=Math.pow(u.g,E),this.b=Math.pow(u.b,E),this}convertGammaToLinear(u){return this.copyGammaToLinear(this,u),this}convertLinearToGamma(u){return this.copyLinearToGamma(this,u),this}copySRGBToLinear(u){return this.r=jo(u.r),this.g=jo(u.g),this.b=jo(u.b),this}copyLinearToSRGB(u){return this.r=Ad(u.r),this.g=Ad(u.g),this.b=Ad(u.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(u){void 0===u&&(console.warn("THREE.Color: .getHSL() target is now required"),u={h:0,s:0,l:0});const w=this.r,E=this.g,R=this.b,z=Math.max(w,E,R),Y=Math.min(w,E,R);let Q,ee;const pe=(Y+z)/2;if(Y===z)Q=0,ee=0;else{const he=z-Y;switch(ee=pe<=.5?he/(z+Y):he/(2-z-Y),z){case w:Q=(E-R)/he+(E<R?6:0);break;case E:Q=(R-w)/he+2;break;case R:Q=(w-E)/he+4}Q/=6}return u.h=Q,u.s=ee,u.l=pe,u}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(u,w,E){return this.getHSL(ho),ho.h+=u,ho.s+=w,ho.l+=E,this.setHSL(ho.h,ho.s,ho.l),this}add(u){return this.r+=u.r,this.g+=u.g,this.b+=u.b,this}addColors(u,w){return this.r=u.r+w.r,this.g=u.g+w.g,this.b=u.b+w.b,this}addScalar(u){return this.r+=u,this.g+=u,this.b+=u,this}sub(u){return this.r=Math.max(0,this.r-u.r),this.g=Math.max(0,this.g-u.g),this.b=Math.max(0,this.b-u.b),this}multiply(u){return this.r*=u.r,this.g*=u.g,this.b*=u.b,this}multiplyScalar(u){return this.r*=u,this.g*=u,this.b*=u,this}lerp(u,w){return this.r+=(u.r-this.r)*w,this.g+=(u.g-this.g)*w,this.b+=(u.b-this.b)*w,this}lerpColors(u,w,E){return this.r=u.r+(w.r-u.r)*E,this.g=u.g+(w.g-u.g)*E,this.b=u.b+(w.b-u.b)*E,this}lerpHSL(u,w){this.getHSL(ho),u.getHSL(Du);const E=Ui.lerp(ho.h,Du.h,w),R=Ui.lerp(ho.s,Du.s,w),z=Ui.lerp(ho.l,Du.l,w);return this.setHSL(E,R,z),this}equals(u){return u.r===this.r&&u.g===this.g&&u.b===this.b}fromArray(u,w=0){return this.r=u[w],this.g=u[w+1],this.b=u[w+2],this}toArray(u=[],w=0){return u[w]=this.r,u[w+1]=this.g,u[w+2]=this.b,u}fromBufferAttribute(u,w){return this.r=u.getX(w),this.g=u.getY(w),this.b=u.getZ(w),!0===u.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return x.NAMES=Rp,x})();Ji.prototype.isColor=!0,Ji.prototype.r=1,Ji.prototype.g=1,Ji.prototype.b=1;class qc extends qo{constructor(l){super(),this.type="MeshBasicMaterial",this.color=new Ji(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=kn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(l)}copy(l){return super.copy(l),this.color.copy(l.color),this.map=l.map,this.lightMap=l.lightMap,this.lightMapIntensity=l.lightMapIntensity,this.aoMap=l.aoMap,this.aoMapIntensity=l.aoMapIntensity,this.specularMap=l.specularMap,this.alphaMap=l.alphaMap,this.envMap=l.envMap,this.combine=l.combine,this.reflectivity=l.reflectivity,this.refractionRatio=l.refractionRatio,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.wireframeLinecap=l.wireframeLinecap,this.wireframeLinejoin=l.wireframeLinejoin,this.skinning=l.skinning,this.morphTargets=l.morphTargets,this}}qc.prototype.isMeshBasicMaterial=!0;const Js=new je,kp=new Bn;function zr(x,l,u){if(Array.isArray(x))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=x,this.itemSize=l,this.count=void 0!==x?x.length/l:0,this.normalized=!0===u,this.usage=ko,this.updateRange={offset:0,count:-1},this.version=0}function tc(x,l,u){zr.call(this,new Int8Array(x),l,u)}function Ca(x,l,u){zr.call(this,new Uint8Array(x),l,u)}function bf(x,l,u){zr.call(this,new Uint8ClampedArray(x),l,u)}function Id(x,l,u){zr.call(this,new Int16Array(x),l,u)}function Rd(x,l,u){zr.call(this,new Uint16Array(x),l,u)}function uu(x,l,u){zr.call(this,new Int32Array(x),l,u)}function qh(x,l,u){zr.call(this,new Uint32Array(x),l,u)}function kd(x,l,u){zr.call(this,new Uint16Array(x),l,u)}function Fn(x,l,u){zr.call(this,new Float32Array(x),l,u)}function Ba(x,l,u){zr.call(this,new Float64Array(x),l,u)}function zl(x){if(0===x.length)return-1/0;let l=x[0];for(let u=1,w=x.length;u<w;++u)x[u]>l&&(l=x[u]);return l}Object.defineProperty(zr.prototype,"needsUpdate",{set:function(x){!0===x&&this.version++}}),Object.assign(zr.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(x){return this.usage=x,this},copy:function(x){return this.name=x.name,this.array=new x.array.constructor(x.array),this.itemSize=x.itemSize,this.count=x.count,this.normalized=x.normalized,this.usage=x.usage,this},copyAt:function(x,l,u){x*=this.itemSize,u*=l.itemSize;for(let w=0,E=this.itemSize;w<E;w++)this.array[x+w]=l.array[u+w];return this},copyArray:function(x){return this.array.set(x),this},copyColorsArray:function(x){const l=this.array;let u=0;for(let w=0,E=x.length;w<E;w++){let R=x[w];void 0===R&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",w),R=new Ji),l[u++]=R.r,l[u++]=R.g,l[u++]=R.b}return this},copyVector2sArray:function(x){const l=this.array;let u=0;for(let w=0,E=x.length;w<E;w++){let R=x[w];void 0===R&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",w),R=new Bn),l[u++]=R.x,l[u++]=R.y}return this},copyVector3sArray:function(x){const l=this.array;let u=0;for(let w=0,E=x.length;w<E;w++){let R=x[w];void 0===R&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",w),R=new je),l[u++]=R.x,l[u++]=R.y,l[u++]=R.z}return this},copyVector4sArray:function(x){const l=this.array;let u=0;for(let w=0,E=x.length;w<E;w++){let R=x[w];void 0===R&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",w),R=new As),l[u++]=R.x,l[u++]=R.y,l[u++]=R.z,l[u++]=R.w}return this},applyMatrix3:function(x){if(2===this.itemSize)for(let l=0,u=this.count;l<u;l++)kp.fromBufferAttribute(this,l),kp.applyMatrix3(x),this.setXY(l,kp.x,kp.y);else if(3===this.itemSize)for(let l=0,u=this.count;l<u;l++)Js.fromBufferAttribute(this,l),Js.applyMatrix3(x),this.setXYZ(l,Js.x,Js.y,Js.z);return this},applyMatrix4:function(x){for(let l=0,u=this.count;l<u;l++)Js.x=this.getX(l),Js.y=this.getY(l),Js.z=this.getZ(l),Js.applyMatrix4(x),this.setXYZ(l,Js.x,Js.y,Js.z);return this},applyNormalMatrix:function(x){for(let l=0,u=this.count;l<u;l++)Js.x=this.getX(l),Js.y=this.getY(l),Js.z=this.getZ(l),Js.applyNormalMatrix(x),this.setXYZ(l,Js.x,Js.y,Js.z);return this},transformDirection:function(x){for(let l=0,u=this.count;l<u;l++)Js.x=this.getX(l),Js.y=this.getY(l),Js.z=this.getZ(l),Js.transformDirection(x),this.setXYZ(l,Js.x,Js.y,Js.z);return this},set:function(x,l=0){return this.array.set(x,l),this},getX:function(x){return this.array[x*this.itemSize]},setX:function(x,l){return this.array[x*this.itemSize]=l,this},getY:function(x){return this.array[x*this.itemSize+1]},setY:function(x,l){return this.array[x*this.itemSize+1]=l,this},getZ:function(x){return this.array[x*this.itemSize+2]},setZ:function(x,l){return this.array[x*this.itemSize+2]=l,this},getW:function(x){return this.array[x*this.itemSize+3]},setW:function(x,l){return this.array[x*this.itemSize+3]=l,this},setXY:function(x,l,u){return this.array[0+(x*=this.itemSize)]=l,this.array[x+1]=u,this},setXYZ:function(x,l,u,w){return this.array[0+(x*=this.itemSize)]=l,this.array[x+1]=u,this.array[x+2]=w,this},setXYZW:function(x,l,u,w,E){return this.array[0+(x*=this.itemSize)]=l,this.array[x+1]=u,this.array[x+2]=w,this.array[x+3]=E,this},onUpload:function(x){return this.onUploadCallback=x,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),(tc.prototype=Object.create(zr.prototype)).constructor=tc,(Ca.prototype=Object.create(zr.prototype)).constructor=Ca,(bf.prototype=Object.create(zr.prototype)).constructor=bf,(Id.prototype=Object.create(zr.prototype)).constructor=Id,(Rd.prototype=Object.create(zr.prototype)).constructor=Rd,(uu.prototype=Object.create(zr.prototype)).constructor=uu,(qh.prototype=Object.create(zr.prototype)).constructor=qh,(kd.prototype=Object.create(zr.prototype)).constructor=kd,kd.prototype.isFloat16BufferAttribute=!0,(Fn.prototype=Object.create(zr.prototype)).constructor=Fn,(Ba.prototype=Object.create(zr.prototype)).constructor=Ba;const gl={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function dh(x,l){return new gl[x](l)}let _y=0;const jc=new hr,L_=new xi,Jn=new je,ls=new Po,nc=new Po,$s=new je;function yr(){Object.defineProperty(this,"id",{value:_y++}),this.uuid=Ui.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}yr.prototype=Object.assign(Object.create(pl.prototype),{constructor:yr,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(x){return this.index=Array.isArray(x)?new(zl(x)>65535?qh:Rd)(x,1):x,this},getAttribute:function(x){return this.attributes[x]},setAttribute:function(x,l){return this.attributes[x]=l,this},deleteAttribute:function(x){return delete this.attributes[x],this},hasAttribute:function(x){return void 0!==this.attributes[x]},addGroup:function(x,l,u=0){this.groups.push({start:x,count:l,materialIndex:u})},clearGroups:function(){this.groups=[]},setDrawRange:function(x,l){this.drawRange.start=x,this.drawRange.count=l},applyMatrix4:function(x){const l=this.attributes.position;void 0!==l&&(l.applyMatrix4(x),l.needsUpdate=!0);const u=this.attributes.normal;if(void 0!==u){const E=(new oo).getNormalMatrix(x);u.applyNormalMatrix(E),u.needsUpdate=!0}const w=this.attributes.tangent;return void 0!==w&&(w.transformDirection(x),w.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(x){return jc.makeRotationX(x),this.applyMatrix4(jc),this},rotateY:function(x){return jc.makeRotationY(x),this.applyMatrix4(jc),this},rotateZ:function(x){return jc.makeRotationZ(x),this.applyMatrix4(jc),this},translate:function(x,l,u){return jc.makeTranslation(x,l,u),this.applyMatrix4(jc),this},scale:function(x,l,u){return jc.makeScale(x,l,u),this.applyMatrix4(jc),this},lookAt:function(x){return L_.lookAt(x),L_.updateMatrix(),this.applyMatrix4(L_.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Jn).negate(),this.translate(Jn.x,Jn.y,Jn.z),this},setFromPoints:function(x){const l=[];for(let u=0,w=x.length;u<w;u++){const E=x[u];l.push(E.x,E.y,E.z||0)}return this.setAttribute("position",new Fn(l,3)),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Po);const x=this.attributes.position,l=this.morphAttributes.position;if(x&&x.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new je(-1/0,-1/0,-1/0),new je(1/0,1/0,1/0));if(void 0!==x){if(this.boundingBox.setFromBufferAttribute(x),l)for(let u=0,w=l.length;u<w;u++)ls.setFromBufferAttribute(l[u]),this.morphTargetsRelative?($s.addVectors(this.boundingBox.min,ls.min),this.boundingBox.expandByPoint($s),$s.addVectors(this.boundingBox.max,ls.max),this.boundingBox.expandByPoint($s)):(this.boundingBox.expandByPoint(ls.min),this.boundingBox.expandByPoint(ls.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Bs);const x=this.attributes.position,l=this.morphAttributes.position;if(x&&x.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new je,1/0);if(x){const u=this.boundingSphere.center;if(ls.setFromBufferAttribute(x),l)for(let E=0,R=l.length;E<R;E++)nc.setFromBufferAttribute(l[E]),this.morphTargetsRelative?($s.addVectors(ls.min,nc.min),ls.expandByPoint($s),$s.addVectors(ls.max,nc.max),ls.expandByPoint($s)):(ls.expandByPoint(nc.min),ls.expandByPoint(nc.max));ls.getCenter(u);let w=0;for(let E=0,R=x.count;E<R;E++)$s.fromBufferAttribute(x,E),w=Math.max(w,u.distanceToSquared($s));if(l)for(let E=0,R=l.length;E<R;E++){const z=l[E],Y=this.morphTargetsRelative;for(let Q=0,ee=z.count;Q<ee;Q++)$s.fromBufferAttribute(z,Q),Y&&(Jn.fromBufferAttribute(x,Q),$s.add(Jn)),w=Math.max(w,u.distanceToSquared($s))}this.boundingSphere.radius=Math.sqrt(w),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeTangents:function(){const x=this.index,l=this.attributes;if(null===x||void 0===l.position||void 0===l.normal||void 0===l.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const u=x.array,w=l.position.array,E=l.normal.array,R=l.uv.array,z=w.length/3;void 0===l.tangent&&this.setAttribute("tangent",new zr(new Float32Array(4*z),4));const Y=l.tangent.array,Q=[],ee=[];for(let zt=0;zt<z;zt++)Q[zt]=new je,ee[zt]=new je;const pe=new je,he=new je,me=new je,be=new Bn,Ee=new Bn,Fe=new Bn,He=new je,Re=new je;function Se(zt,Gt,cn){pe.fromArray(w,3*zt),he.fromArray(w,3*Gt),me.fromArray(w,3*cn),be.fromArray(R,2*zt),Ee.fromArray(R,2*Gt),Fe.fromArray(R,2*cn),he.sub(pe),me.sub(pe),Ee.sub(be),Fe.sub(be);const An=1/(Ee.x*Fe.y-Fe.x*Ee.y);!isFinite(An)||(He.copy(he).multiplyScalar(Fe.y).addScaledVector(me,-Ee.y).multiplyScalar(An),Re.copy(me).multiplyScalar(Ee.x).addScaledVector(he,-Fe.x).multiplyScalar(An),Q[zt].add(He),Q[Gt].add(He),Q[cn].add(He),ee[zt].add(Re),ee[Gt].add(Re),ee[cn].add(Re))}let rt=this.groups;0===rt.length&&(rt=[{start:0,count:u.length}]);for(let zt=0,Gt=rt.length;zt<Gt;++zt){const cn=rt[zt],An=cn.start;for(let Wt=An,an=An+cn.count;Wt<an;Wt+=3)Se(u[Wt+0],u[Wt+1],u[Wt+2])}const nt=new je,ft=new je,et=new je,Tt=new je;function Qt(zt){et.fromArray(E,3*zt),Tt.copy(et);const Gt=Q[zt];nt.copy(Gt),nt.sub(et.multiplyScalar(et.dot(Gt))).normalize(),ft.crossVectors(Tt,Gt);const An=ft.dot(ee[zt])<0?-1:1;Y[4*zt]=nt.x,Y[4*zt+1]=nt.y,Y[4*zt+2]=nt.z,Y[4*zt+3]=An}for(let zt=0,Gt=rt.length;zt<Gt;++zt){const cn=rt[zt],An=cn.start;for(let Wt=An,an=An+cn.count;Wt<an;Wt+=3)Qt(u[Wt+0]),Qt(u[Wt+1]),Qt(u[Wt+2])}},computeVertexNormals:function(){const x=this.index,l=this.getAttribute("position");if(void 0!==l){let u=this.getAttribute("normal");if(void 0===u)u=new zr(new Float32Array(3*l.count),3),this.setAttribute("normal",u);else for(let he=0,me=u.count;he<me;he++)u.setXYZ(he,0,0,0);const w=new je,E=new je,R=new je,z=new je,Y=new je,Q=new je,ee=new je,pe=new je;if(x)for(let he=0,me=x.count;he<me;he+=3){const be=x.getX(he+0),Ee=x.getX(he+1),Fe=x.getX(he+2);w.fromBufferAttribute(l,be),E.fromBufferAttribute(l,Ee),R.fromBufferAttribute(l,Fe),ee.subVectors(R,E),pe.subVectors(w,E),ee.cross(pe),z.fromBufferAttribute(u,be),Y.fromBufferAttribute(u,Ee),Q.fromBufferAttribute(u,Fe),z.add(ee),Y.add(ee),Q.add(ee),u.setXYZ(be,z.x,z.y,z.z),u.setXYZ(Ee,Y.x,Y.y,Y.z),u.setXYZ(Fe,Q.x,Q.y,Q.z)}else for(let he=0,me=l.count;he<me;he+=3)w.fromBufferAttribute(l,he+0),E.fromBufferAttribute(l,he+1),R.fromBufferAttribute(l,he+2),ee.subVectors(R,E),pe.subVectors(w,E),ee.cross(pe),u.setXYZ(he+0,ee.x,ee.y,ee.z),u.setXYZ(he+1,ee.x,ee.y,ee.z),u.setXYZ(he+2,ee.x,ee.y,ee.z);this.normalizeNormals(),u.needsUpdate=!0}},merge:function(x,l){if(!x||!x.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",x);void 0===l&&(l=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const u=this.attributes;for(const w in u){if(void 0===x.attributes[w])continue;const R=u[w].array,z=x.attributes[w],Y=z.array,Q=z.itemSize*l,ee=Math.min(Y.length,R.length-Q);for(let pe=0,he=Q;pe<ee;pe++,he++)R[he]=Y[pe]}return this},normalizeNormals:function(){const x=this.attributes.normal;for(let l=0,u=x.count;l<u;l++)$s.fromBufferAttribute(x,l),$s.normalize(),x.setXYZ(l,$s.x,$s.y,$s.z)},toNonIndexed:function(){function x(z,Y){const Q=z.array,ee=z.itemSize,pe=z.normalized,he=new Q.constructor(Y.length*ee);let me=0,be=0;for(let Ee=0,Fe=Y.length;Ee<Fe;Ee++){me=Y[Ee]*ee;for(let He=0;He<ee;He++)he[be++]=Q[me++]}return new zr(he,ee,pe)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const l=new yr,u=this.index.array,w=this.attributes;for(const z in w){const Q=x(w[z],u);l.setAttribute(z,Q)}const E=this.morphAttributes;for(const z in E){const Y=[],Q=E[z];for(let ee=0,pe=Q.length;ee<pe;ee++){const me=x(Q[ee],u);Y.push(me)}l.morphAttributes[z]=Y}l.morphTargetsRelative=this.morphTargetsRelative;const R=this.groups;for(let z=0,Y=R.length;z<Y;z++){const Q=R[z];l.addGroup(Q.start,Q.count,Q.materialIndex)}return l},toJSON:function(){const x={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(x.uuid=this.uuid,x.type=this.type,""!==this.name&&(x.name=this.name),Object.keys(this.userData).length>0&&(x.userData=this.userData),void 0!==this.parameters){const Y=this.parameters;for(const Q in Y)void 0!==Y[Q]&&(x[Q]=Y[Q]);return x}x.data={attributes:{}};const l=this.index;null!==l&&(x.data.index={type:l.array.constructor.name,array:Array.prototype.slice.call(l.array)});const u=this.attributes;for(const Y in u){const Q=u[Y],ee=Q.toJSON(x.data);""!==Q.name&&(ee.name=Q.name),x.data.attributes[Y]=ee}const w={};let E=!1;for(const Y in this.morphAttributes){const Q=this.morphAttributes[Y],ee=[];for(let pe=0,he=Q.length;pe<he;pe++){const me=Q[pe],be=me.toJSON(x.data);""!==me.name&&(be.name=me.name),ee.push(be)}ee.length>0&&(w[Y]=ee,E=!0)}E&&(x.data.morphAttributes=w,x.data.morphTargetsRelative=this.morphTargetsRelative);const R=this.groups;R.length>0&&(x.data.groups=JSON.parse(JSON.stringify(R)));const z=this.boundingSphere;return null!==z&&(x.data.boundingSphere={center:z.center.toArray(),radius:z.radius}),x},clone:function(){return(new yr).copy(this)},copy:function(x){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const l={};this.name=x.name;const u=x.index;null!==u&&this.setIndex(u.clone(l));const w=x.attributes;for(const Q in w)this.setAttribute(Q,w[Q].clone(l));const E=x.morphAttributes;for(const Q in E){const ee=[],pe=E[Q];for(let he=0,me=pe.length;he<me;he++)ee.push(pe[he].clone(l));this.morphAttributes[Q]=ee}this.morphTargetsRelative=x.morphTargetsRelative;const R=x.groups;for(let Q=0,ee=R.length;Q<ee;Q++){const pe=R[Q];this.addGroup(pe.start,pe.count,pe.materialIndex)}const z=x.boundingBox;null!==z&&(this.boundingBox=z.clone());const Y=x.boundingSphere;return null!==Y&&(this.boundingSphere=Y.clone()),this.drawRange.start=x.drawRange.start,this.drawRange.count=x.drawRange.count,this.userData=x.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const xf=new hr,Vl=new ea,Pd=new Bs,Au=new je,jh=new je,Yu=new je,Ld=new je,Xu=new je,Ul=new je,vc=new je,Zc=new je,Ju=new je,hu=new Bn,Pp=new Bn,Gl=new Bn,ao=new je,Ic=new je;function to(x=new yr,l=new qc){xi.call(this),this.type="Mesh",this.geometry=x,this.material=l,this.updateMorphTargets()}function wf(x,l,u,w,E,R,z,Y,Q,ee,pe,he){Au.fromBufferAttribute(E,ee),jh.fromBufferAttribute(E,pe),Yu.fromBufferAttribute(E,he);const me=x.morphTargetInfluences;if(l.morphTargets&&R&&me){vc.set(0,0,0),Zc.set(0,0,0),Ju.set(0,0,0);for(let Ee=0,Fe=R.length;Ee<Fe;Ee++){const He=me[Ee],Re=R[Ee];0!==He&&(Ld.fromBufferAttribute(Re,ee),Xu.fromBufferAttribute(Re,pe),Ul.fromBufferAttribute(Re,he),z?(vc.addScaledVector(Ld,He),Zc.addScaledVector(Xu,He),Ju.addScaledVector(Ul,He)):(vc.addScaledVector(Ld.sub(Au),He),Zc.addScaledVector(Xu.sub(jh),He),Ju.addScaledVector(Ul.sub(Yu),He)))}Au.add(vc),jh.add(Zc),Yu.add(Ju)}x.isSkinnedMesh&&l.skinning&&(x.boneTransform(ee,Au),x.boneTransform(pe,jh),x.boneTransform(he,Yu));const be=function Ku(x,l,u,w,E,R,z,Y){let Q;if(Q=l.side===W?w.intersectTriangle(z,R,E,!0,Y):w.intersectTriangle(E,R,z,l.side!==re,Y),null===Q)return null;Ic.copy(Y),Ic.applyMatrix4(x.matrixWorld);const ee=u.ray.origin.distanceTo(Ic);return ee<u.near||ee>u.far?null:{distance:ee,point:Ic.clone(),object:x}}(x,l,u,w,Au,jh,Yu,ao);if(be){Y&&(hu.fromBufferAttribute(Y,ee),Pp.fromBufferAttribute(Y,pe),Gl.fromBufferAttribute(Y,he),be.uv=Ma.getUV(ao,Au,jh,Yu,hu,Pp,Gl,new Bn)),Q&&(hu.fromBufferAttribute(Q,ee),Pp.fromBufferAttribute(Q,pe),Gl.fromBufferAttribute(Q,he),be.uv2=Ma.getUV(ao,Au,jh,Yu,hu,Pp,Gl,new Bn));const Ee={a:ee,b:pe,c:he,normal:new je,materialIndex:0};Ma.getNormal(Au,jh,Yu,Ee.normal),be.face=Ee}return be}to.prototype=Object.assign(Object.create(xi.prototype),{constructor:to,isMesh:!0,copy:function(x){return xi.prototype.copy.call(this,x),void 0!==x.morphTargetInfluences&&(this.morphTargetInfluences=x.morphTargetInfluences.slice()),void 0!==x.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},x.morphTargetDictionary)),this.material=x.material,this.geometry=x.geometry,this},updateMorphTargets:function(){const x=this.geometry;if(x.isBufferGeometry){const l=x.morphAttributes,u=Object.keys(l);if(u.length>0){const w=l[u[0]];if(void 0!==w){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let E=0,R=w.length;E<R;E++){const z=w[E].name||String(E);this.morphTargetInfluences.push(0),this.morphTargetDictionary[z]=E}}}}else{const l=x.morphTargets;void 0!==l&&l.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(x,l){const u=this.geometry,w=this.material,E=this.matrixWorld;if(void 0===w||(null===u.boundingSphere&&u.computeBoundingSphere(),Pd.copy(u.boundingSphere),Pd.applyMatrix4(E),!1===x.ray.intersectsSphere(Pd))||(xf.copy(E).invert(),Vl.copy(x.ray).applyMatrix4(xf),null!==u.boundingBox&&!1===Vl.intersectsBox(u.boundingBox)))return;let R;if(u.isBufferGeometry){const z=u.index,Y=u.attributes.position,Q=u.morphAttributes.position,ee=u.morphTargetsRelative,pe=u.attributes.uv,he=u.attributes.uv2,me=u.groups,be=u.drawRange;if(null!==z)if(Array.isArray(w))for(let Ee=0,Fe=me.length;Ee<Fe;Ee++){const He=me[Ee],Re=w[He.materialIndex];for(let nt=Math.max(He.start,be.start),ft=Math.min(He.start+He.count,be.start+be.count);nt<ft;nt+=3){const et=z.getX(nt),Tt=z.getX(nt+1),Qt=z.getX(nt+2);R=wf(this,Re,x,Vl,Y,Q,ee,pe,he,et,Tt,Qt),R&&(R.faceIndex=Math.floor(nt/3),R.face.materialIndex=He.materialIndex,l.push(R))}}else for(let He=Math.max(0,be.start),Re=Math.min(z.count,be.start+be.count);He<Re;He+=3){const Se=z.getX(He),rt=z.getX(He+1),nt=z.getX(He+2);R=wf(this,w,x,Vl,Y,Q,ee,pe,he,Se,rt,nt),R&&(R.faceIndex=Math.floor(He/3),l.push(R))}else if(void 0!==Y)if(Array.isArray(w))for(let Ee=0,Fe=me.length;Ee<Fe;Ee++){const He=me[Ee],Re=w[He.materialIndex];for(let nt=Math.max(He.start,be.start),ft=Math.min(He.start+He.count,be.start+be.count);nt<ft;nt+=3)R=wf(this,Re,x,Vl,Y,Q,ee,pe,he,nt,nt+1,nt+2),R&&(R.faceIndex=Math.floor(nt/3),R.face.materialIndex=He.materialIndex,l.push(R))}else for(let He=Math.max(0,be.start),Re=Math.min(Y.count,be.start+be.count);He<Re;He+=3)R=wf(this,w,x,Vl,Y,Q,ee,pe,he,He,He+1,He+2),R&&(R.faceIndex=Math.floor(He/3),l.push(R))}else u.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}});class Iu extends yr{constructor(l=1,u=1,w=1,E=1,R=1,z=1){super(),this.type="BoxGeometry",this.parameters={width:l,height:u,depth:w,widthSegments:E,heightSegments:R,depthSegments:z};const Y=this;E=Math.floor(E),R=Math.floor(R),z=Math.floor(z);const Q=[],ee=[],pe=[],he=[];let me=0,be=0;function Ee(Fe,He,Re,Se,rt,nt,ft,et,Tt,Qt,zt){const Gt=nt/Tt,cn=ft/Qt,An=nt/2,pn=ft/2,Wt=et/2,an=Tt+1,Tn=Qt+1;let vi=0,Gi=0;const $i=new je;for(let Tr=0;Tr<Tn;Tr++){const br=Tr*cn-pn;for(let no=0;no<an;no++)$i[Fe]=(no*Gt-An)*Se,$i[He]=br*rt,$i[Re]=Wt,ee.push($i.x,$i.y,$i.z),$i[Fe]=0,$i[He]=0,$i[Re]=et>0?1:-1,pe.push($i.x,$i.y,$i.z),he.push(no/Tt),he.push(1-Tr/Qt),vi+=1}for(let Tr=0;Tr<Qt;Tr++)for(let br=0;br<Tt;br++){const _s=me+br+an*(Tr+1),Oo=me+(br+1)+an*(Tr+1),Io=me+(br+1)+an*Tr;Q.push(me+br+an*Tr,_s,Io),Q.push(_s,Oo,Io),Gi+=6}Y.addGroup(be,Gi,zt),be+=Gi,me+=vi}Ee("z","y","x",-1,-1,w,u,l,z,R,0),Ee("z","y","x",1,-1,w,u,-l,z,R,1),Ee("x","z","y",1,1,l,w,u,E,z,2),Ee("x","z","y",1,-1,l,w,-u,E,z,3),Ee("x","y","z",1,-1,l,u,w,E,R,4),Ee("x","y","z",-1,-1,l,u,-w,E,R,5),this.setIndex(Q),this.setAttribute("position",new Fn(ee,3)),this.setAttribute("normal",new Fn(pe,3)),this.setAttribute("uv",new Fn(he,2))}}function Fd(x){const l={};for(const u in x){l[u]={};for(const w in x[u]){const E=x[u][w];l[u][w]=E&&(E.isColor||E.isMatrix3||E.isMatrix4||E.isVector2||E.isVector3||E.isVector4||E.isTexture||E.isQuaternion)?E.clone():Array.isArray(E)?E.slice():E}}return l}function Wl(x){const l={};for(let u=0;u<x.length;u++){const w=Fd(x[u]);for(const E in w)l[E]=w[E]}return l}const Od={clone:Fd,merge:Wl};function ql(x){qo.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==x&&(void 0!==x.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(x))}function ic(){xi.call(this),this.type="Camera",this.matrixWorldInverse=new hr,this.projectionMatrix=new hr,this.projectionMatrixInverse=new hr}function pa(x=50,l=1,u=.1,w=2e3){ic.call(this),this.type="PerspectiveCamera",this.fov=x,this.zoom=1,this.near=u,this.far=w,this.focus=10,this.aspect=l,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}(ql.prototype=Object.create(qo.prototype)).constructor=ql,ql.prototype.isShaderMaterial=!0,ql.prototype.copy=function(x){return qo.prototype.copy.call(this,x),this.fragmentShader=x.fragmentShader,this.vertexShader=x.vertexShader,this.uniforms=Fd(x.uniforms),this.defines=Object.assign({},x.defines),this.wireframe=x.wireframe,this.wireframeLinewidth=x.wireframeLinewidth,this.lights=x.lights,this.clipping=x.clipping,this.skinning=x.skinning,this.morphTargets=x.morphTargets,this.morphNormals=x.morphNormals,this.extensions=Object.assign({},x.extensions),this.glslVersion=x.glslVersion,this},ql.prototype.toJSON=function(x){const l=qo.prototype.toJSON.call(this,x);l.glslVersion=this.glslVersion,l.uniforms={};for(const w in this.uniforms){const R=this.uniforms[w].value;l.uniforms[w]=R&&R.isTexture?{type:"t",value:R.toJSON(x).uuid}:R&&R.isColor?{type:"c",value:R.getHex()}:R&&R.isVector2?{type:"v2",value:R.toArray()}:R&&R.isVector3?{type:"v3",value:R.toArray()}:R&&R.isVector4?{type:"v4",value:R.toArray()}:R&&R.isMatrix3?{type:"m3",value:R.toArray()}:R&&R.isMatrix4?{type:"m4",value:R.toArray()}:{value:R}}Object.keys(this.defines).length>0&&(l.defines=this.defines),l.vertexShader=this.vertexShader,l.fragmentShader=this.fragmentShader;const u={};for(const w in this.extensions)!0===this.extensions[w]&&(u[w]=!0);return Object.keys(u).length>0&&(l.extensions=u),l},ic.prototype=Object.assign(Object.create(xi.prototype),{constructor:ic,isCamera:!0,copy:function(x,l){return xi.prototype.copy.call(this,x,l),this.matrixWorldInverse.copy(x.matrixWorldInverse),this.projectionMatrix.copy(x.projectionMatrix),this.projectionMatrixInverse.copy(x.projectionMatrixInverse),this},getWorldDirection:function(x){void 0===x&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),x=new je),this.updateWorldMatrix(!0,!1);const l=this.matrixWorld.elements;return x.set(-l[8],-l[9],-l[10]).normalize()},updateMatrixWorld:function(x){xi.prototype.updateMatrixWorld.call(this,x),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(x,l){xi.prototype.updateWorldMatrix.call(this,x,l),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return(new this.constructor).copy(this)}}),pa.prototype=Object.assign(Object.create(ic.prototype),{constructor:pa,isPerspectiveCamera:!0,copy:function(x,l){return ic.prototype.copy.call(this,x,l),this.fov=x.fov,this.zoom=x.zoom,this.near=x.near,this.far=x.far,this.focus=x.focus,this.aspect=x.aspect,this.view=null===x.view?null:Object.assign({},x.view),this.filmGauge=x.filmGauge,this.filmOffset=x.filmOffset,this},setFocalLength:function(x){const l=.5*this.getFilmHeight()/x;this.fov=2*Ui.RAD2DEG*Math.atan(l),this.updateProjectionMatrix()},getFocalLength:function(){const x=Math.tan(.5*Ui.DEG2RAD*this.fov);return.5*this.getFilmHeight()/x},getEffectiveFOV:function(){return 2*Ui.RAD2DEG*Math.atan(Math.tan(.5*Ui.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(x,l,u,w,E,R){this.aspect=x/l,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=x,this.view.fullHeight=l,this.view.offsetX=u,this.view.offsetY=w,this.view.width=E,this.view.height=R,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const x=this.near;let l=x*Math.tan(.5*Ui.DEG2RAD*this.fov)/this.zoom,u=2*l,w=this.aspect*u,E=-.5*w;const R=this.view;if(null!==this.view&&this.view.enabled){const Y=R.fullWidth,Q=R.fullHeight;E+=R.offsetX*w/Y,l-=R.offsetY*u/Q,w*=R.width/Y,u*=R.height/Q}const z=this.filmOffset;0!==z&&(E+=x*z/this.getFilmWidth()),this.projectionMatrix.makePerspective(E,E+w,l,l-u,x,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(x){const l=xi.prototype.toJSON.call(this,x);return l.object.fov=this.fov,l.object.zoom=this.zoom,l.object.near=this.near,l.object.far=this.far,l.object.focus=this.focus,l.object.aspect=this.aspect,null!==this.view&&(l.object.view=Object.assign({},this.view)),l.object.filmGauge=this.filmGauge,l.object.filmOffset=this.filmOffset,l}});class Qa extends xi{constructor(l,u,w){if(super(),this.type="CubeCamera",!0!==w.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=w;const E=new pa(90,1,l,u);E.layers=this.layers,E.up.set(0,-1,0),E.lookAt(new je(1,0,0)),this.add(E);const R=new pa(90,1,l,u);R.layers=this.layers,R.up.set(0,-1,0),R.lookAt(new je(-1,0,0)),this.add(R);const z=new pa(90,1,l,u);z.layers=this.layers,z.up.set(0,0,1),z.lookAt(new je(0,1,0)),this.add(z);const Y=new pa(90,1,l,u);Y.layers=this.layers,Y.up.set(0,0,-1),Y.lookAt(new je(0,-1,0)),this.add(Y);const Q=new pa(90,1,l,u);Q.layers=this.layers,Q.up.set(0,-1,0),Q.lookAt(new je(0,0,1)),this.add(Q);const ee=new pa(90,1,l,u);ee.layers=this.layers,ee.up.set(0,-1,0),ee.lookAt(new je(0,0,-1)),this.add(ee)}update(l,u){null===this.parent&&this.updateMatrixWorld();const w=this.renderTarget,[E,R,z,Y,Q,ee]=this.children,pe=l.xr.enabled,he=l.getRenderTarget();l.xr.enabled=!1;const me=w.texture.generateMipmaps;w.texture.generateMipmaps=!1,l.setRenderTarget(w,0),l.render(u,E),l.setRenderTarget(w,1),l.render(u,R),l.setRenderTarget(w,2),l.render(u,z),l.setRenderTarget(w,3),l.render(u,Y),l.setRenderTarget(w,4),l.render(u,Q),w.texture.generateMipmaps=me,l.setRenderTarget(w,5),l.render(u,ee),l.setRenderTarget(he),l.xr.enabled=pe}}class yc extends Ar{constructor(l,u,w,E,R,z,Y,Q,ee,pe){super(l=void 0!==l?l:[],u=void 0!==u?u:pi,w,E,R,z,Y=void 0!==Y?Y:Kt,Q,ee,pe),this._needsFlipEnvMap=!0,this.flipY=!1}get images(){return this.image}set images(l){this.image=l}}yc.prototype.isCubeTexture=!0;class sa extends Do{constructor(l,u,w){Number.isInteger(u)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),u=w),super(l,l,u),this.texture=new yc(void 0,(u=u||{}).mapping,u.wrapS,u.wrapT,u.magFilter,u.minFilter,u.format,u.type,u.anisotropy,u.encoding),this.texture.generateMipmaps=void 0!==u.generateMipmaps&&u.generateMipmaps,this.texture.minFilter=void 0!==u.minFilter?u.minFilter:Xi,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(l,u){this.texture.type=u.type,this.texture.format=gn,this.texture.encoding=u.encoding,this.texture.generateMipmaps=u.generateMipmaps,this.texture.minFilter=u.minFilter,this.texture.magFilter=u.magFilter;const w_uniforms={tEquirect:{value:null}},w_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",w_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",E=new Iu(5,5,5),R=new ql({name:"CubemapFromEquirect",uniforms:Fd(w_uniforms),vertexShader:w_vertexShader,fragmentShader:w_fragmentShader,side:W,blending:ae});R.uniforms.tEquirect.value=u;const z=new to(E,R),Y=u.minFilter;return u.minFilter===k&&(u.minFilter=Xi),new Qa(1,10,this).update(l,z),u.minFilter=Y,z.geometry.dispose(),z.material.dispose(),this}clear(l,u,w,E){const R=l.getRenderTarget();for(let z=0;z<6;z++)l.setRenderTarget(this,z),l.clear(u,w,E);l.setRenderTarget(R)}}sa.prototype.isWebGLCubeRenderTarget=!0;class Bd extends Ar{constructor(l,u,w,E,R,z,Y,Q,ee,pe,he,me){super(null,z,Y,Q,ee,pe,E,R,he,me),this.image={data:l||null,width:u||1,height:w||1},this.magFilter=void 0!==ee?ee:mo,this.minFilter=void 0!==pe?pe:mo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Bd.prototype.isDataTexture=!0;const Hd=new Bs,$m=new je;class Lp{constructor(l=new wa,u=new wa,w=new wa,E=new wa,R=new wa,z=new wa){this.planes=[l,u,w,E,R,z]}set(l,u,w,E,R,z){const Y=this.planes;return Y[0].copy(l),Y[1].copy(u),Y[2].copy(w),Y[3].copy(E),Y[4].copy(R),Y[5].copy(z),this}copy(l){const u=this.planes;for(let w=0;w<6;w++)u[w].copy(l.planes[w]);return this}setFromProjectionMatrix(l){const u=this.planes,w=l.elements,E=w[0],R=w[1],z=w[2],Y=w[3],Q=w[4],ee=w[5],pe=w[6],he=w[7],me=w[8],be=w[9],Ee=w[10],Fe=w[11],He=w[12],Re=w[13],Se=w[14],rt=w[15];return u[0].setComponents(Y-E,he-Q,Fe-me,rt-He).normalize(),u[1].setComponents(Y+E,he+Q,Fe+me,rt+He).normalize(),u[2].setComponents(Y+R,he+ee,Fe+be,rt+Re).normalize(),u[3].setComponents(Y-R,he-ee,Fe-be,rt-Re).normalize(),u[4].setComponents(Y-z,he-pe,Fe-Ee,rt-Se).normalize(),u[5].setComponents(Y+z,he+pe,Fe+Ee,rt+Se).normalize(),this}intersectsObject(l){const u=l.geometry;return null===u.boundingSphere&&u.computeBoundingSphere(),Hd.copy(u.boundingSphere).applyMatrix4(l.matrixWorld),this.intersectsSphere(Hd)}intersectsSprite(l){return Hd.center.set(0,0,0),Hd.radius=.7071067811865476,Hd.applyMatrix4(l.matrixWorld),this.intersectsSphere(Hd)}intersectsSphere(l){const u=this.planes,w=l.center,E=-l.radius;for(let R=0;R<6;R++)if(u[R].distanceToPoint(w)<E)return!1;return!0}intersectsBox(l){const u=this.planes;for(let w=0;w<6;w++){const E=u[w];if($m.x=E.normal.x>0?l.max.x:l.min.x,$m.y=E.normal.y>0?l.max.y:l.min.y,$m.z=E.normal.z>0?l.max.z:l.min.z,E.distanceToPoint($m)<0)return!1}return!0}containsPoint(l){const u=this.planes;for(let w=0;w<6;w++)if(u[w].distanceToPoint(l)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Fp(){let x=null,l=!1,u=null,w=null;function E(R,z){u(R,z),w=x.requestAnimationFrame(E)}return{start:function(){!0!==l&&null!==u&&(w=x.requestAnimationFrame(E),l=!0)},stop:function(){x.cancelAnimationFrame(w),l=!1},setAnimationLoop:function(R){u=R},setContext:function(R){x=R}}}function vy(x,l){const u=l.isWebGL2,w=new WeakMap;return{get:function z(ee){return ee.isInterleavedBufferAttribute&&(ee=ee.data),w.get(ee)},remove:function Y(ee){ee.isInterleavedBufferAttribute&&(ee=ee.data);const pe=w.get(ee);pe&&(x.deleteBuffer(pe.buffer),w.delete(ee))},update:function Q(ee,pe){if(ee.isGLBufferAttribute){const me=w.get(ee);return void((!me||me.version<ee.version)&&w.set(ee,{buffer:ee.buffer,type:ee.type,bytesPerElement:ee.elementSize,version:ee.version}))}ee.isInterleavedBufferAttribute&&(ee=ee.data);const he=w.get(ee);void 0===he?w.set(ee,function E(ee,pe){const he=ee.array,me=ee.usage,be=x.createBuffer();x.bindBuffer(pe,be),x.bufferData(pe,he,me),ee.onUploadCallback();let Ee=5126;return he instanceof Float32Array?Ee=5126:he instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):he instanceof Uint16Array?ee.isFloat16BufferAttribute?u?Ee=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):Ee=5123:he instanceof Int16Array?Ee=5122:he instanceof Uint32Array?Ee=5125:he instanceof Int32Array?Ee=5124:he instanceof Int8Array?Ee=5120:he instanceof Uint8Array&&(Ee=5121),{buffer:be,type:Ee,bytesPerElement:he.BYTES_PER_ELEMENT,version:ee.version}}(ee,pe)):he.version<ee.version&&(function R(ee,pe,he){const me=pe.array,be=pe.updateRange;x.bindBuffer(he,ee),-1===be.count?x.bufferSubData(he,0,me):(u?x.bufferSubData(he,be.offset*me.BYTES_PER_ELEMENT,me,be.offset,be.count):x.bufferSubData(he,be.offset*me.BYTES_PER_ELEMENT,me.subarray(be.offset,be.offset+be.count)),be.count=-1)}(he.buffer,ee,pe),he.version=ee.version)}}}class Zh extends yr{constructor(l=1,u=1,w=1,E=1){super(),this.type="PlaneGeometry",this.parameters={width:l,height:u,widthSegments:w,heightSegments:E};const R=l/2,z=u/2,Y=Math.floor(w),Q=Math.floor(E),ee=Y+1,pe=Q+1,he=l/Y,me=u/Q,be=[],Ee=[],Fe=[],He=[];for(let Re=0;Re<pe;Re++){const Se=Re*me-z;for(let rt=0;rt<ee;rt++)Ee.push(rt*he-R,-Se,0),Fe.push(0,0,1),He.push(rt/Y),He.push(1-Re/Q)}for(let Re=0;Re<Q;Re++)for(let Se=0;Se<Y;Se++){const nt=Se+ee*(Re+1),ft=Se+1+ee*(Re+1),et=Se+1+ee*Re;be.push(Se+ee*Re,nt,et),be.push(nt,ft,et)}this.setIndex(be),this.setAttribute("position",new Fn(Ee,3)),this.setAttribute("normal",new Fn(Fe,3)),this.setAttribute("uv",new Fn(He,2))}}const qs={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Ii={common:{diffuse:{value:new Ji(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new oo},uv2Transform:{value:new oo},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Bn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ji(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ji(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new oo}},sprite:{diffuse:{value:new Ji(15658734)},opacity:{value:1},center:{value:new Bn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new oo}}},ll={basic:{uniforms:Wl([Ii.common,Ii.specularmap,Ii.envmap,Ii.aomap,Ii.lightmap,Ii.fog]),vertexShader:qs.meshbasic_vert,fragmentShader:qs.meshbasic_frag},lambert:{uniforms:Wl([Ii.common,Ii.specularmap,Ii.envmap,Ii.aomap,Ii.lightmap,Ii.emissivemap,Ii.fog,Ii.lights,{emissive:{value:new Ji(0)}}]),vertexShader:qs.meshlambert_vert,fragmentShader:qs.meshlambert_frag},phong:{uniforms:Wl([Ii.common,Ii.specularmap,Ii.envmap,Ii.aomap,Ii.lightmap,Ii.emissivemap,Ii.bumpmap,Ii.normalmap,Ii.displacementmap,Ii.fog,Ii.lights,{emissive:{value:new Ji(0)},specular:{value:new Ji(1118481)},shininess:{value:30}}]),vertexShader:qs.meshphong_vert,fragmentShader:qs.meshphong_frag},standard:{uniforms:Wl([Ii.common,Ii.envmap,Ii.aomap,Ii.lightmap,Ii.emissivemap,Ii.bumpmap,Ii.normalmap,Ii.displacementmap,Ii.roughnessmap,Ii.metalnessmap,Ii.fog,Ii.lights,{emissive:{value:new Ji(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:qs.meshphysical_vert,fragmentShader:qs.meshphysical_frag},toon:{uniforms:Wl([Ii.common,Ii.aomap,Ii.lightmap,Ii.emissivemap,Ii.bumpmap,Ii.normalmap,Ii.displacementmap,Ii.gradientmap,Ii.fog,Ii.lights,{emissive:{value:new Ji(0)}}]),vertexShader:qs.meshtoon_vert,fragmentShader:qs.meshtoon_frag},matcap:{uniforms:Wl([Ii.common,Ii.bumpmap,Ii.normalmap,Ii.displacementmap,Ii.fog,{matcap:{value:null}}]),vertexShader:qs.meshmatcap_vert,fragmentShader:qs.meshmatcap_frag},points:{uniforms:Wl([Ii.points,Ii.fog]),vertexShader:qs.points_vert,fragmentShader:qs.points_frag},dashed:{uniforms:Wl([Ii.common,Ii.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:qs.linedashed_vert,fragmentShader:qs.linedashed_frag},depth:{uniforms:Wl([Ii.common,Ii.displacementmap]),vertexShader:qs.depth_vert,fragmentShader:qs.depth_frag},normal:{uniforms:Wl([Ii.common,Ii.bumpmap,Ii.normalmap,Ii.displacementmap,{opacity:{value:1}}]),vertexShader:qs.normal_vert,fragmentShader:qs.normal_frag},sprite:{uniforms:Wl([Ii.sprite,Ii.fog]),vertexShader:qs.sprite_vert,fragmentShader:qs.sprite_frag},background:{uniforms:{uvTransform:{value:new oo},t2D:{value:null}},vertexShader:qs.background_vert,fragmentShader:qs.background_frag},cube:{uniforms:Wl([Ii.envmap,{opacity:{value:1}}]),vertexShader:qs.cube_vert,fragmentShader:qs.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:qs.equirect_vert,fragmentShader:qs.equirect_frag},distanceRGBA:{uniforms:Wl([Ii.common,Ii.displacementmap,{referencePosition:{value:new je},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:qs.distanceRGBA_vert,fragmentShader:qs.distanceRGBA_frag},shadow:{uniforms:Wl([Ii.lights,Ii.fog,{color:{value:new Ji(0)},opacity:{value:1}}]),vertexShader:qs.shadow_vert,fragmentShader:qs.shadow_frag}};function hx(x,l,u,w,E){const R=new Ji(0);let Y,Q,z=0,ee=null,pe=0,he=null;function be(Ee,Fe){u.buffers.color.setClear(Ee.r,Ee.g,Ee.b,Fe,E)}return{getClearColor:function(){return R},setClearColor:function(Ee,Fe=1){R.set(Ee),z=Fe,be(R,z)},getClearAlpha:function(){return z},setClearAlpha:function(Ee){z=Ee,be(R,z)},render:function me(Ee,Fe,He,Re){let Se=!0===Fe.isScene?Fe.background:null;Se&&Se.isTexture&&(Se=l.get(Se));const rt=x.xr,nt=rt.getSession&&rt.getSession();nt&&"additive"===nt.environmentBlendMode&&(Se=null),null===Se?be(R,z):Se&&Se.isColor&&(be(Se,1),Re=!0),(x.autoClear||Re)&&x.clear(x.autoClearColor,x.autoClearDepth,x.autoClearStencil),Se&&(Se.isCubeTexture||Se.isWebGLCubeRenderTarget||Se.mapping===ro)?(void 0===Q&&(Q=new to(new Iu(1,1,1),new ql({name:"BackgroundCubeMaterial",uniforms:Fd(ll.cube.uniforms),vertexShader:ll.cube.vertexShader,fragmentShader:ll.cube.fragmentShader,side:W,depthTest:!1,depthWrite:!1,fog:!1})),Q.geometry.deleteAttribute("normal"),Q.geometry.deleteAttribute("uv"),Q.onBeforeRender=function(ft,et,Tt){this.matrixWorld.copyPosition(Tt.matrixWorld)},Object.defineProperty(Q.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),w.update(Q)),Se.isWebGLCubeRenderTarget&&(Se=Se.texture),Q.material.uniforms.envMap.value=Se,Q.material.uniforms.flipEnvMap.value=Se.isCubeTexture&&Se._needsFlipEnvMap?-1:1,(ee!==Se||pe!==Se.version||he!==x.toneMapping)&&(Q.material.needsUpdate=!0,ee=Se,pe=Se.version,he=x.toneMapping),Ee.unshift(Q,Q.geometry,Q.material,0,0,null)):Se&&Se.isTexture&&(void 0===Y&&(Y=new to(new Zh(2,2),new ql({name:"BackgroundMaterial",uniforms:Fd(ll.background.uniforms),vertexShader:ll.background.vertexShader,fragmentShader:ll.background.fragmentShader,side:J,depthTest:!1,depthWrite:!1,fog:!1})),Y.geometry.deleteAttribute("normal"),Object.defineProperty(Y.material,"map",{get:function(){return this.uniforms.t2D.value}}),w.update(Y)),Y.material.uniforms.t2D.value=Se,!0===Se.matrixAutoUpdate&&Se.updateMatrix(),Y.material.uniforms.uvTransform.value.copy(Se.matrix),(ee!==Se||pe!==Se.version||he!==x.toneMapping)&&(Y.material.needsUpdate=!0,ee=Se,pe=Se.version,he=x.toneMapping),Ee.unshift(Y,Y.geometry,Y.material,0,0,null))}}}function Q_(x,l,u,w){const E=x.getParameter(34921),R=w.isWebGL2?null:l.get("OES_vertex_array_object"),z=w.isWebGL2||null!==R,Y={},Q=Fe(null);let ee=Q;function me(pn){return w.isWebGL2?x.bindVertexArray(pn):R.bindVertexArrayOES(pn)}function be(pn){return w.isWebGL2?x.deleteVertexArray(pn):R.deleteVertexArrayOES(pn)}function Fe(pn){const Wt=[],an=[],Tn=[];for(let vi=0;vi<E;vi++)Wt[vi]=0,an[vi]=0,Tn[vi]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Wt,enabledAttributes:an,attributeDivisors:Tn,object:pn,attributes:{},index:null}}function Se(){const pn=ee.newAttributes;for(let Wt=0,an=pn.length;Wt<an;Wt++)pn[Wt]=0}function rt(pn){nt(pn,0)}function nt(pn,Wt){const Tn=ee.enabledAttributes,vi=ee.attributeDivisors;ee.newAttributes[pn]=1,0===Tn[pn]&&(x.enableVertexAttribArray(pn),Tn[pn]=1),vi[pn]!==Wt&&((w.isWebGL2?x:l.get("ANGLE_instanced_arrays"))[w.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](pn,Wt),vi[pn]=Wt)}function ft(){const pn=ee.newAttributes,Wt=ee.enabledAttributes;for(let an=0,Tn=Wt.length;an<Tn;an++)Wt[an]!==pn[an]&&(x.disableVertexAttribArray(an),Wt[an]=0)}function et(pn,Wt,an,Tn,vi,Gi){!0!==w.isWebGL2||5124!==an&&5125!==an?x.vertexAttribPointer(pn,Wt,an,Tn,vi,Gi):x.vertexAttribIPointer(pn,Wt,an,vi,Gi)}function cn(){An(),ee!==Q&&(ee=Q,me(ee.object))}function An(){Q.geometry=null,Q.program=null,Q.wireframe=!1}return{setup:function pe(pn,Wt,an,Tn,vi){let Gi=!1;if(z){const $i=function Ee(pn,Wt,an){const Tn=!0===an.wireframe;let vi=Y[pn.id];void 0===vi&&(vi={},Y[pn.id]=vi);let Gi=vi[Wt.id];void 0===Gi&&(Gi={},vi[Wt.id]=Gi);let $i=Gi[Tn];return void 0===$i&&($i=Fe(function he(){return w.isWebGL2?x.createVertexArray():R.createVertexArrayOES()}()),Gi[Tn]=$i),$i}(Tn,an,Wt);ee!==$i&&(ee=$i,me(ee.object)),Gi=function He(pn,Wt){const an=ee.attributes,Tn=pn.attributes;let vi=0;for(const Gi in Tn){const $i=an[Gi],Tr=Tn[Gi];if(void 0===$i||$i.attribute!==Tr||$i.data!==Tr.data)return!0;vi++}return ee.attributesNum!==vi||ee.index!==Wt}(Tn,vi),Gi&&function Re(pn,Wt){const an={},Tn=pn.attributes;let vi=0;for(const Gi in Tn){const $i=Tn[Gi],Tr={};Tr.attribute=$i,$i.data&&(Tr.data=$i.data),an[Gi]=Tr,vi++}ee.attributes=an,ee.attributesNum=vi,ee.index=Wt}(Tn,vi)}else{const $i=!0===Wt.wireframe;(ee.geometry!==Tn.id||ee.program!==an.id||ee.wireframe!==$i)&&(ee.geometry=Tn.id,ee.program=an.id,ee.wireframe=$i,Gi=!0)}!0===pn.isInstancedMesh&&(Gi=!0),null!==vi&&u.update(vi,34963),Gi&&(function Tt(pn,Wt,an,Tn){if(!1===w.isWebGL2&&(pn.isInstancedMesh||Tn.isInstancedBufferGeometry)&&null===l.get("ANGLE_instanced_arrays"))return;Se();const vi=Tn.attributes,Gi=an.getAttributes(),$i=Wt.defaultAttributeValues;for(const Tr in Gi){const br=Gi[Tr];if(br>=0){const no=vi[Tr];if(void 0!==no){const _s=no.normalized,Oo=no.itemSize,Io=u.get(no);if(void 0===Io)continue;const $n=Io.buffer,Aa=Io.type,_o=Io.bytesPerElement;if(no.isInterleavedBufferAttribute){const Mo=no.data,ss=Mo.stride,No=no.offset;Mo&&Mo.isInstancedInterleavedBuffer?(nt(br,Mo.meshPerAttribute),void 0===Tn._maxInstanceCount&&(Tn._maxInstanceCount=Mo.meshPerAttribute*Mo.count)):rt(br),x.bindBuffer(34962,$n),et(br,Oo,Aa,_s,ss*_o,No*_o)}else no.isInstancedBufferAttribute?(nt(br,no.meshPerAttribute),void 0===Tn._maxInstanceCount&&(Tn._maxInstanceCount=no.meshPerAttribute*no.count)):rt(br),x.bindBuffer(34962,$n),et(br,Oo,Aa,_s,0,0)}else if("instanceMatrix"===Tr){const _s=u.get(pn.instanceMatrix);if(void 0===_s)continue;const Oo=_s.buffer,Io=_s.type;nt(br+0,1),nt(br+1,1),nt(br+2,1),nt(br+3,1),x.bindBuffer(34962,Oo),x.vertexAttribPointer(br+0,4,Io,!1,64,0),x.vertexAttribPointer(br+1,4,Io,!1,64,16),x.vertexAttribPointer(br+2,4,Io,!1,64,32),x.vertexAttribPointer(br+3,4,Io,!1,64,48)}else if("instanceColor"===Tr){const _s=u.get(pn.instanceColor);if(void 0===_s)continue;const Oo=_s.buffer,Io=_s.type;nt(br,1),x.bindBuffer(34962,Oo),x.vertexAttribPointer(br,3,Io,!1,12,0)}else if(void 0!==$i){const _s=$i[Tr];if(void 0!==_s)switch(_s.length){case 2:x.vertexAttrib2fv(br,_s);break;case 3:x.vertexAttrib3fv(br,_s);break;case 4:x.vertexAttrib4fv(br,_s);break;default:x.vertexAttrib1fv(br,_s)}}}}ft()}(pn,Wt,an,Tn),null!==vi&&x.bindBuffer(34963,u.get(vi).buffer))},reset:cn,resetDefaultState:An,dispose:function Qt(){cn();for(const pn in Y){const Wt=Y[pn];for(const an in Wt){const Tn=Wt[an];for(const vi in Tn)be(Tn[vi].object),delete Tn[vi];delete Wt[an]}delete Y[pn]}},releaseStatesOfGeometry:function zt(pn){if(void 0===Y[pn.id])return;const Wt=Y[pn.id];for(const an in Wt){const Tn=Wt[an];for(const vi in Tn)be(Tn[vi].object),delete Tn[vi];delete Wt[an]}delete Y[pn.id]},releaseStatesOfProgram:function Gt(pn){for(const Wt in Y){const an=Y[Wt];if(void 0===an[pn.id])continue;const Tn=an[pn.id];for(const vi in Tn)be(Tn[vi].object),delete Tn[vi];delete an[pn.id]}},initAttributes:Se,enableAttribute:rt,disableUnusedAttributes:ft}}function Ny(x,l,u,w){const E=w.isWebGL2;let R;this.setMode=function z(ee){R=ee},this.render=function Y(ee,pe){x.drawArrays(R,ee,pe),u.update(pe,R,1)},this.renderInstances=function Q(ee,pe,he){if(0===he)return;let me,be;if(E)me=x,be="drawArraysInstanced";else if(me=l.get("ANGLE_instanced_arrays"),be="drawArraysInstancedANGLE",null===me)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");me[be](R,ee,pe,he),u.update(pe,R,he)}}function Ha(x,l,u){let w;function R(et){if("highp"===et){if(x.getShaderPrecisionFormat(35633,36338).precision>0&&x.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";et="mediump"}return"mediump"===et&&x.getShaderPrecisionFormat(35633,36337).precision>0&&x.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const z="undefined"!=typeof WebGL2RenderingContext&&x instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&x instanceof WebGL2ComputeRenderingContext;let Y=void 0!==u.precision?u.precision:"highp";const Q=R(Y);Q!==Y&&(console.warn("THREE.WebGLRenderer:",Y,"not supported, using",Q,"instead."),Y=Q);const ee=!0===u.logarithmicDepthBuffer,pe=x.getParameter(34930),he=x.getParameter(35660),me=x.getParameter(3379),be=x.getParameter(34076),Ee=x.getParameter(34921),Fe=x.getParameter(36347),He=x.getParameter(36348),Re=x.getParameter(36349),Se=he>0,rt=z||l.has("OES_texture_float");return{isWebGL2:z,getMaxAnisotropy:function E(){if(void 0!==w)return w;if(!0===l.has("EXT_texture_filter_anisotropic")){const et=l.get("EXT_texture_filter_anisotropic");w=x.getParameter(et.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else w=0;return w},getMaxPrecision:R,precision:Y,logarithmicDepthBuffer:ee,maxTextures:pe,maxVertexTextures:he,maxTextureSize:me,maxCubemapSize:be,maxAttributes:Ee,maxVertexUniforms:Fe,maxVaryings:He,maxFragmentUniforms:Re,vertexTextures:Se,floatFragmentTextures:rt,floatVertexTextures:Se&&rt,maxSamples:z?x.getParameter(36183):0}}function xM(x){const l=this;let u=null,w=0,E=!1,R=!1;const z=new wa,Y=new oo,Q={value:null,needsUpdate:!1};function ee(){Q.value!==u&&(Q.value=u,Q.needsUpdate=w>0),l.numPlanes=w,l.numIntersection=0}function pe(he,me,be,Ee){const Fe=null!==he?he.length:0;let He=null;if(0!==Fe){if(He=Q.value,!0!==Ee||null===He){const Re=be+4*Fe,Se=me.matrixWorldInverse;Y.getNormalMatrix(Se),(null===He||He.length<Re)&&(He=new Float32Array(Re));for(let rt=0,nt=be;rt!==Fe;++rt,nt+=4)z.copy(he[rt]).applyMatrix4(Se,Y),z.normal.toArray(He,nt),He[nt+3]=z.constant}Q.value=He,Q.needsUpdate=!0}return l.numPlanes=Fe,l.numIntersection=0,He}this.uniform=Q,this.numPlanes=0,this.numIntersection=0,this.init=function(he,me,be){const Ee=0!==he.length||me||0!==w||E;return E=me,u=pe(he,be,0),w=he.length,Ee},this.beginShadows=function(){R=!0,pe(null)},this.endShadows=function(){R=!1,ee()},this.setState=function(he,me,be){const Ee=he.clippingPlanes,Fe=he.clipIntersection,He=he.clipShadows,Re=x.get(he);if(!E||null===Ee||0===Ee.length||R&&!He)R?pe(null):ee();else{const Se=R?0:w,rt=4*Se;let nt=Re.clippingState||null;Q.value=nt,nt=pe(Ee,me,rt,be);for(let ft=0;ft!==rt;++ft)nt[ft]=u[ft];Re.clippingState=nt,this.numIntersection=Fe?this.numPlanes:0,this.numPlanes+=Se}}}function dx(x){let l=new WeakMap;function u(z,Y){return Y===Gs?z.mapping=pi:Y===wr&&(z.mapping=ur),z}function E(z){const Y=z.target;Y.removeEventListener("dispose",E);const Q=l.get(Y);void 0!==Q&&(l.delete(Y),Q.dispose())}return{get:function w(z){if(z&&z.isTexture){const Y=z.mapping;if(Y===Gs||Y===wr){if(l.has(z))return u(l.get(z).texture,z.mapping);{const Q=z.image;if(Q&&Q.height>0){const ee=x.getRenderTarget(),pe=new sa(Q.height/2);return pe.fromEquirectangularTexture(x,z),l.set(z,pe),x.setRenderTarget(ee),z.addEventListener("dispose",E),u(pe.texture,z.mapping)}return null}}}return z},dispose:function R(){l=new WeakMap}}}function fx(x){const l={};function u(w){if(void 0!==l[w])return l[w];let E;switch(w){case"WEBGL_depth_texture":E=x.getExtension("WEBGL_depth_texture")||x.getExtension("MOZ_WEBGL_depth_texture")||x.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":E=x.getExtension("EXT_texture_filter_anisotropic")||x.getExtension("MOZ_EXT_texture_filter_anisotropic")||x.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":E=x.getExtension("WEBGL_compressed_texture_s3tc")||x.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||x.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":E=x.getExtension("WEBGL_compressed_texture_pvrtc")||x.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:E=x.getExtension(w)}return l[w]=E,E}return{has:function(w){return null!==u(w)},init:function(w){w.isWebGL2?u("EXT_color_buffer_float"):(u("WEBGL_depth_texture"),u("OES_texture_float"),u("OES_texture_half_float"),u("OES_texture_half_float_linear"),u("OES_standard_derivatives"),u("OES_element_index_uint"),u("OES_vertex_array_object"),u("ANGLE_instanced_arrays")),u("OES_texture_float_linear"),u("EXT_color_buffer_half_float")},get:function(w){const E=u(w);return null===E&&console.warn("THREE.WebGLRenderer: "+w+" extension not supported."),E}}}function gg(x,l,u,w){const E={},R=new WeakMap;function z(he){const me=he.target;null!==me.index&&l.remove(me.index);for(const Ee in me.attributes)l.remove(me.attributes[Ee]);me.removeEventListener("dispose",z),delete E[me.id];const be=R.get(me);be&&(l.remove(be),R.delete(me)),w.releaseStatesOfGeometry(me),!0===me.isInstancedBufferGeometry&&delete me._maxInstanceCount,u.memory.geometries--}function ee(he){const me=[],be=he.index,Ee=he.attributes.position;let Fe=0;if(null!==be){const Se=be.array;Fe=be.version;for(let rt=0,nt=Se.length;rt<nt;rt+=3){const ft=Se[rt+0],et=Se[rt+1],Tt=Se[rt+2];me.push(ft,et,et,Tt,Tt,ft)}}else{Fe=Ee.version;for(let rt=0,nt=Ee.array.length/3-1;rt<nt;rt+=3){const ft=rt+0,et=rt+1,Tt=rt+2;me.push(ft,et,et,Tt,Tt,ft)}}const He=new(zl(me)>65535?qh:Rd)(me,1);He.version=Fe;const Re=R.get(he);Re&&l.remove(Re),R.set(he,He)}return{get:function Y(he,me){return!0===E[me.id]||(me.addEventListener("dispose",z),E[me.id]=!0,u.memory.geometries++),me},update:function Q(he){const me=he.attributes;for(const Ee in me)l.update(me[Ee],34962);const be=he.morphAttributes;for(const Ee in be){const Fe=be[Ee];for(let He=0,Re=Fe.length;He<Re;He++)l.update(Fe[He],34962)}},getWireframeAttribute:function pe(he){const me=R.get(he);if(me){const be=he.index;null!==be&&me.version<be.version&&ee(he)}else ee(he);return R.get(he)}}}function m(x,l,u,w){const E=w.isWebGL2;let R,Y,Q;this.setMode=function z(me){R=me},this.setIndex=function ee(me){Y=me.type,Q=me.bytesPerElement},this.render=function pe(me,be){x.drawElements(R,be,Y,me*Q),u.update(be,R,1)},this.renderInstances=function he(me,be,Ee){if(0===Ee)return;let Fe,He;if(E)Fe=x,He="drawElementsInstanced";else if(Fe=l.get("ANGLE_instanced_arrays"),He="drawElementsInstancedANGLE",null===Fe)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");Fe[He](R,be,Y,me*Q,Ee),u.update(be,R,Ee)}}function C(x){const u={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:u,programs:null,autoReset:!0,reset:function E(){u.frame++,u.calls=0,u.triangles=0,u.points=0,u.lines=0},update:function w(R,z,Y){switch(u.calls++,z){case 4:u.triangles+=Y*(R/3);break;case 1:u.lines+=Y*(R/2);break;case 3:u.lines+=Y*(R-1);break;case 2:u.lines+=Y*R;break;case 0:u.points+=Y*R;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",z)}}}}function F(x,l){return x[0]-l[0]}function L(x,l){return Math.abs(l[1])-Math.abs(x[1])}function B(x){const l={},u=new Float32Array(8),w=[];for(let R=0;R<8;R++)w[R]=[R,0];return{update:function E(R,z,Y,Q){const ee=R.morphTargetInfluences,pe=void 0===ee?0:ee.length;let he=l[z.id];if(void 0===he){he=[];for(let He=0;He<pe;He++)he[He]=[He,0];l[z.id]=he}for(let He=0;He<pe;He++){const Re=he[He];Re[0]=He,Re[1]=ee[He]}he.sort(L);for(let He=0;He<8;He++)He<pe&&he[He][1]?(w[He][0]=he[He][0],w[He][1]=he[He][1]):(w[He][0]=Number.MAX_SAFE_INTEGER,w[He][1]=0);w.sort(F);const me=Y.morphTargets&&z.morphAttributes.position,be=Y.morphNormals&&z.morphAttributes.normal;let Ee=0;for(let He=0;He<8;He++){const Re=w[He],Se=Re[0],rt=Re[1];Se!==Number.MAX_SAFE_INTEGER&&rt?(me&&z.getAttribute("morphTarget"+He)!==me[Se]&&z.setAttribute("morphTarget"+He,me[Se]),be&&z.getAttribute("morphNormal"+He)!==be[Se]&&z.setAttribute("morphNormal"+He,be[Se]),u[He]=rt,Ee+=rt):(me&&!0===z.hasAttribute("morphTarget"+He)&&z.deleteAttribute("morphTarget"+He),be&&!0===z.hasAttribute("morphNormal"+He)&&z.deleteAttribute("morphNormal"+He),u[He]=0)}const Fe=z.morphTargetsRelative?1:1-Ee;Q.getUniforms().setValue(x,"morphTargetBaseInfluence",Fe),Q.getUniforms().setValue(x,"morphTargetInfluences",u)}}}function oe(x,l,u,w){let E=new WeakMap;function Y(Q){const ee=Q.target;ee.removeEventListener("dispose",Y),u.remove(ee.instanceMatrix),null!==ee.instanceColor&&u.remove(ee.instanceColor)}return{update:function R(Q){const ee=w.render.frame,he=l.get(Q,Q.geometry);return E.get(he)!==ee&&(l.update(he),E.set(he,ee)),Q.isInstancedMesh&&(!1===Q.hasEventListener("dispose",Y)&&Q.addEventListener("dispose",Y),u.update(Q.instanceMatrix,34962),null!==Q.instanceColor&&u.update(Q.instanceColor,34962)),he},dispose:function z(){E=new WeakMap}}}ll.physical={uniforms:Wl([ll.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Bn(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Ji(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:qs.meshphysical_vert,fragmentShader:qs.meshphysical_frag};class _e extends Ar{constructor(l=null,u=1,w=1,E=1){super(null),this.image={data:l,width:u,height:w,depth:E},this.magFilter=mo,this.minFilter=mo,this.wrapR=es,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}}_e.prototype.isDataTexture2DArray=!0;class Ce extends Ar{constructor(l=null,u=1,w=1,E=1){super(null),this.image={data:l,width:u,height:w,depth:E},this.magFilter=mo,this.minFilter=mo,this.wrapR=es,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}}Ce.prototype.isDataTexture3D=!0;const Ae=new Ar,Be=new _e,it=new Ce,dt=new yc,Vt=[],Pt=[],bn=new Float32Array(16),Hn=new Float32Array(9),hi=new Float32Array(4);function li(x,l,u){const w=x[0];if(w<=0||w>0)return x;const E=l*u;let R=Vt[E];if(void 0===R&&(R=new Float32Array(E),Vt[E]=R),0!==l){w.toArray(R,0);for(let z=1,Y=0;z!==l;++z)Y+=u,x[z].toArray(R,Y)}return R}function di(x,l){if(x.length!==l.length)return!1;for(let u=0,w=x.length;u<w;u++)if(x[u]!==l[u])return!1;return!0}function fi(x,l){for(let u=0,w=l.length;u<w;u++)x[u]=l[u]}function ji(x,l){let u=Pt[l];void 0===u&&(u=new Int32Array(l),Pt[l]=u);for(let w=0;w!==l;++w)u[w]=x.allocateTextureUnit();return u}function Ir(x,l){const u=this.cache;u[0]!==l&&(x.uniform1f(this.addr,l),u[0]=l)}function Cr(x,l){const u=this.cache;if(void 0!==l.x)(u[0]!==l.x||u[1]!==l.y)&&(x.uniform2f(this.addr,l.x,l.y),u[0]=l.x,u[1]=l.y);else{if(di(u,l))return;x.uniform2fv(this.addr,l),fi(u,l)}}function Rs(x,l){const u=this.cache;if(void 0!==l.x)(u[0]!==l.x||u[1]!==l.y||u[2]!==l.z)&&(x.uniform3f(this.addr,l.x,l.y,l.z),u[0]=l.x,u[1]=l.y,u[2]=l.z);else if(void 0!==l.r)(u[0]!==l.r||u[1]!==l.g||u[2]!==l.b)&&(x.uniform3f(this.addr,l.r,l.g,l.b),u[0]=l.r,u[1]=l.g,u[2]=l.b);else{if(di(u,l))return;x.uniform3fv(this.addr,l),fi(u,l)}}function Yo(x,l){const u=this.cache;if(void 0!==l.x)(u[0]!==l.x||u[1]!==l.y||u[2]!==l.z||u[3]!==l.w)&&(x.uniform4f(this.addr,l.x,l.y,l.z,l.w),u[0]=l.x,u[1]=l.y,u[2]=l.z,u[3]=l.w);else{if(di(u,l))return;x.uniform4fv(this.addr,l),fi(u,l)}}function cl(x,l){const u=this.cache,w=l.elements;if(void 0===w){if(di(u,l))return;x.uniformMatrix2fv(this.addr,!1,l),fi(u,l)}else{if(di(u,w))return;hi.set(w),x.uniformMatrix2fv(this.addr,!1,hi),fi(u,w)}}function ma(x,l){const u=this.cache,w=l.elements;if(void 0===w){if(di(u,l))return;x.uniformMatrix3fv(this.addr,!1,l),fi(u,l)}else{if(di(u,w))return;Hn.set(w),x.uniformMatrix3fv(this.addr,!1,Hn),fi(u,w)}}function Rc(x,l){const u=this.cache,w=l.elements;if(void 0===w){if(di(u,l))return;x.uniformMatrix4fv(this.addr,!1,l),fi(u,l)}else{if(di(u,w))return;bn.set(w),x.uniformMatrix4fv(this.addr,!1,bn),fi(u,w)}}function xc(x,l,u){const w=this.cache,E=u.allocateTextureUnit();w[0]!==E&&(x.uniform1i(this.addr,E),w[0]=E),u.safeSetTexture2D(l||Ae,E)}function el(x,l,u){const w=this.cache,E=u.allocateTextureUnit();w[0]!==E&&(x.uniform1i(this.addr,E),w[0]=E),u.setTexture2DArray(l||Be,E)}function kc(x,l,u){const w=this.cache,E=u.allocateTextureUnit();w[0]!==E&&(x.uniform1i(this.addr,E),w[0]=E),u.setTexture3D(l||it,E)}function Tl(x,l,u){const w=this.cache,E=u.allocateTextureUnit();w[0]!==E&&(x.uniform1i(this.addr,E),w[0]=E),u.safeSetTextureCube(l||dt,E)}function ga(x,l){const u=this.cache;u[0]!==l&&(x.uniform1i(this.addr,l),u[0]=l)}function za(x,l){const u=this.cache;di(u,l)||(x.uniform2iv(this.addr,l),fi(u,l))}function go(x,l){const u=this.cache;di(u,l)||(x.uniform3iv(this.addr,l),fi(u,l))}function vl(x,l){const u=this.cache;di(u,l)||(x.uniform4iv(this.addr,l),fi(u,l))}function Kd(x,l){const u=this.cache;u[0]!==l&&(x.uniform1ui(this.addr,l),u[0]=l)}function Dl(x,l){x.uniform1fv(this.addr,l)}function vh(x,l){x.uniform1iv(this.addr,l)}function Al(x,l){x.uniform2iv(this.addr,l)}function By(x,l){x.uniform3iv(this.addr,l)}function Pu(x,l){x.uniform4iv(this.addr,l)}function yh(x,l){const u=li(l,this.size,2);x.uniform2fv(this.addr,u)}function bh(x,l){const u=li(l,this.size,3);x.uniform3fv(this.addr,u)}function wc(x,l){const u=li(l,this.size,4);x.uniform4fv(this.addr,u)}function tm(x,l){const u=li(l,this.size,4);x.uniformMatrix2fv(this.addr,!1,u)}function _g(x,l){const u=li(l,this.size,9);x.uniformMatrix3fv(this.addr,!1,u)}function aD(x,l){const u=li(l,this.size,16);x.uniformMatrix4fv(this.addr,!1,u)}function lD(x,l,u){const w=l.length,E=ji(u,w);x.uniform1iv(this.addr,E);for(let R=0;R!==w;++R)u.safeSetTexture2D(l[R]||Ae,E[R])}function cD(x,l,u){const w=l.length,E=ji(u,w);x.uniform1iv(this.addr,E);for(let R=0;R!==w;++R)u.safeSetTextureCube(l[R]||dt,E[R])}function wM(x,l,u){this.id=x,this.addr=u,this.cache=[],this.setValue=function _h(x){switch(x){case 5126:return Ir;case 35664:return Cr;case 35665:return Rs;case 35666:return Yo;case 35674:return cl;case 35675:return ma;case 35676:return Rc;case 5124:case 35670:return ga;case 35667:case 35671:return za;case 35668:case 35672:return go;case 35669:case 35673:return vl;case 5125:return Kd;case 35678:case 36198:case 36298:case 36306:case 35682:return xc;case 35679:case 36299:case 36307:return kc;case 35680:case 36300:case 36308:case 36293:return Tl;case 36289:case 36303:case 36311:case 36292:return el}}(l.type)}function $_(x,l,u){this.id=x,this.addr=u,this.cache=[],this.size=l.size,this.setValue=function uD(x){switch(x){case 5126:return Dl;case 35664:return yh;case 35665:return bh;case 35666:return wc;case 35674:return tm;case 35675:return _g;case 35676:return aD;case 5124:case 35670:return vh;case 35667:case 35671:return Al;case 35668:case 35672:return By;case 35669:case 35673:return Pu;case 35678:case 36198:case 36298:case 36306:case 35682:return lD;case 35680:case 36300:case 36308:case 36293:return cD}}(l.type)}function px(x){this.id=x,this.seq=[],this.map={}}$_.prototype.updateCache=function(x){const l=this.cache;x instanceof Float32Array&&l.length!==x.length&&(this.cache=new Float32Array(x.length)),fi(l,x)},px.prototype.setValue=function(x,l,u){const w=this.seq;for(let E=0,R=w.length;E!==R;++E){const z=w[E];z.setValue(x,l[z.id],u)}};const ev=/(\w+)(\])?(\[|\.)?/g;function MM(x,l){x.seq.push(l),x.map[l.id]=l}function Lo(x,l,u){const w=x.name,E=w.length;for(ev.lastIndex=0;;){const R=ev.exec(w),z=ev.lastIndex;let Y=R[1];const ee=R[3];if("]"===R[2]&&(Y|=0),void 0===ee||"["===ee&&z+2===E){MM(u,void 0===ee?new wM(Y,x,l):new $_(Y,x,l));break}{let he=u.map[Y];void 0===he&&(he=new px(Y),MM(u,he)),u=he}}}function Ff(x,l){this.seq=[],this.map={};const u=x.getProgramParameter(l,35718);for(let w=0;w<u;++w){const E=x.getActiveUniform(l,w);Lo(E,x.getUniformLocation(l,E.name),this)}}function CM(x,l,u){const w=x.createShader(l);return x.shaderSource(w,u),x.compileShader(w),w}Ff.prototype.setValue=function(x,l,u,w){const E=this.map[l];void 0!==E&&E.setValue(x,u,w)},Ff.prototype.setOptional=function(x,l,u){const w=l[u];void 0!==w&&this.setValue(x,u,w)},Ff.upload=function(x,l,u,w){for(let E=0,R=l.length;E!==R;++E){const z=l[E],Y=u[z.id];!1!==Y.needsUpdate&&z.setValue(x,Y.value,w)}},Ff.seqWithValue=function(x,l){const u=[];for(let w=0,E=x.length;w!==E;++w){const R=x[w];R.id in l&&u.push(R)}return u};let mx=0;function EM(x){switch(x){case sl:return["Linear","( value )"];case mc:return["sRGB","( value )"];case Hh:return["RGBE","( value )"];case Fr:return["RGBM","( value, 7.0 )"];case zh:return["RGBM","( value, 16.0 )"];case ch:return["RGBD","( value, 256.0 )"];case Bh:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Ac:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",x),["Linear","( value )"]}}function TM(x,l,u){const w=x.getShaderParameter(l,35713),E=x.getShaderInfoLog(l).trim();return w&&""===E?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+u+"\n"+E+function SM(x){const l=x.split("\n");for(let u=0;u<l.length;u++)l[u]=u+1+": "+l[u];return l.join("\n")}(x.getShaderSource(l))}function tv(x,l){const u=EM(l);return"vec4 "+x+"( vec4 value ) { return "+u[0]+"ToLinear"+u[1]+"; }"}function hD(x,l){const u=EM(l);return"vec4 "+x+"( vec4 value ) { return LinearTo"+u[0]+u[1]+"; }"}function dD(x,l){let u;switch(l){case Lt:u="Linear";break;case nn:u="Reinhard";break;case Ln:u="OptimizedCineon";break;case rn:u="ACESFilmic";break;case ui:u="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",l),u="Linear"}return"vec3 "+x+"( vec3 color ) { return "+u+"ToneMapping( color ); }"}function jl(x){return""!==x}function Hy(x,l){return x.replace(/NUM_DIR_LIGHTS/g,l.numDirLights).replace(/NUM_SPOT_LIGHTS/g,l.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,l.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,l.numPointLights).replace(/NUM_HEMI_LIGHTS/g,l.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,l.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,l.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,l.numPointLightShadows)}function gx(x,l){return x.replace(/NUM_CLIPPING_PLANES/g,l.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,l.numClippingPlanes-l.numClipIntersection)}const DM=/^[ \t]*#include +<([\w\d./]+)>/gm;function rc(x){return x.replace(DM,iv)}function iv(x,l){const u=qs[l];if(void 0===u)throw new Error("Can not resolve #include <"+l+">");return rc(u)}const _x=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,fD=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function AM(x){return x.replace(fD,RM).replace(_x,IM)}function IM(x,l,u,w){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),RM(0,l,u,w)}function RM(x,l,u,w){let E="";for(let R=parseInt(l);R<parseInt(u);R++)E+=w.replace(/\[\s*i\s*\]/g,"[ "+R+" ]").replace(/UNROLLED_LOOP_INDEX/g,R);return E}function vx(x){let l="precision "+x.precision+" float;\nprecision "+x.precision+" int;";return"highp"===x.precision?l+="\n#define HIGH_PRECISION":"mediump"===x.precision?l+="\n#define MEDIUM_PRECISION":"lowp"===x.precision&&(l+="\n#define LOW_PRECISION"),l}function yx(x,l,u,w){const E=x.getContext(),R=u.defines;let z=u.vertexShader,Y=u.fragmentShader;const Q=function pD(x){let l="SHADOWMAP_TYPE_BASIC";return x.shadowMapType===P?l="SHADOWMAP_TYPE_PCF":x.shadowMapType===N?l="SHADOWMAP_TYPE_PCF_SOFT":x.shadowMapType===V&&(l="SHADOWMAP_TYPE_VSM"),l}(u),ee=function kM(x){let l="ENVMAP_TYPE_CUBE";if(x.envMap)switch(x.envMapMode){case pi:case ur:l="ENVMAP_TYPE_CUBE";break;case ro:case ha:l="ENVMAP_TYPE_CUBE_UV"}return l}(u),pe=function mD(x){let l="ENVMAP_MODE_REFLECTION";if(x.envMap)switch(x.envMapMode){case ur:case ha:l="ENVMAP_MODE_REFRACTION"}return l}(u),he=function gD(x){let l="ENVMAP_BLENDING_NONE";if(x.envMap)switch(x.combine){case kn:l="ENVMAP_BLENDING_MULTIPLY";break;case dn:l="ENVMAP_BLENDING_MIX";break;case lt:l="ENVMAP_BLENDING_ADD"}return l}(u),me=x.gammaFactor>0?x.gammaFactor:1,be=u.isWebGL2?"":function gP(x){return[x.extensionDerivatives||x.envMapCubeUV||x.bumpMap||x.tangentSpaceNormalMap||x.clearcoatNormalMap||x.flatShading||"physical"===x.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(x.extensionFragDepth||x.logarithmicDepthBuffer)&&x.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",x.extensionDrawBuffers&&x.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(x.extensionShaderTextureLOD||x.envMap)&&x.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(jl).join("\n")}(u),Ee=function _P(x){const l=[];for(const u in x){const w=x[u];!1!==w&&l.push("#define "+u+" "+w)}return l.join("\n")}(R),Fe=E.createProgram();let He,Re,Se=u.glslVersion?"#version "+u.glslVersion+"\n":"";u.isRawShaderMaterial?(He=[Ee].filter(jl).join("\n"),He.length>0&&(He+="\n"),Re=[be,Ee].filter(jl).join("\n"),Re.length>0&&(Re+="\n")):(He=[vx(u),"#define SHADER_NAME "+u.shaderName,Ee,u.instancing?"#define USE_INSTANCING":"",u.instancingColor?"#define USE_INSTANCING_COLOR":"",u.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+me,"#define MAX_BONES "+u.maxBones,u.useFog&&u.fog?"#define USE_FOG":"",u.useFog&&u.fogExp2?"#define FOG_EXP2":"",u.map?"#define USE_MAP":"",u.envMap?"#define USE_ENVMAP":"",u.envMap?"#define "+pe:"",u.lightMap?"#define USE_LIGHTMAP":"",u.aoMap?"#define USE_AOMAP":"",u.emissiveMap?"#define USE_EMISSIVEMAP":"",u.bumpMap?"#define USE_BUMPMAP":"",u.normalMap?"#define USE_NORMALMAP":"",u.normalMap&&u.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",u.normalMap&&u.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",u.clearcoatMap?"#define USE_CLEARCOATMAP":"",u.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",u.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",u.displacementMap&&u.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",u.specularMap?"#define USE_SPECULARMAP":"",u.roughnessMap?"#define USE_ROUGHNESSMAP":"",u.metalnessMap?"#define USE_METALNESSMAP":"",u.alphaMap?"#define USE_ALPHAMAP":"",u.transmissionMap?"#define USE_TRANSMISSIONMAP":"",u.vertexTangents?"#define USE_TANGENT":"",u.vertexColors?"#define USE_COLOR":"",u.vertexUvs?"#define USE_UV":"",u.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",u.flatShading?"#define FLAT_SHADED":"",u.skinning?"#define USE_SKINNING":"",u.useVertexTexture?"#define BONE_TEXTURE":"",u.morphTargets?"#define USE_MORPHTARGETS":"",u.morphNormals&&!1===u.flatShading?"#define USE_MORPHNORMALS":"",u.doubleSided?"#define DOUBLE_SIDED":"",u.flipSided?"#define FLIP_SIDED":"",u.shadowMapEnabled?"#define USE_SHADOWMAP":"",u.shadowMapEnabled?"#define "+Q:"",u.sizeAttenuation?"#define USE_SIZEATTENUATION":"",u.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",u.logarithmicDepthBuffer&&u.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(jl).join("\n"),Re=[be,vx(u),"#define SHADER_NAME "+u.shaderName,Ee,u.alphaTest?"#define ALPHATEST "+u.alphaTest+(u.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+me,u.useFog&&u.fog?"#define USE_FOG":"",u.useFog&&u.fogExp2?"#define FOG_EXP2":"",u.map?"#define USE_MAP":"",u.matcap?"#define USE_MATCAP":"",u.envMap?"#define USE_ENVMAP":"",u.envMap?"#define "+ee:"",u.envMap?"#define "+pe:"",u.envMap?"#define "+he:"",u.lightMap?"#define USE_LIGHTMAP":"",u.aoMap?"#define USE_AOMAP":"",u.emissiveMap?"#define USE_EMISSIVEMAP":"",u.bumpMap?"#define USE_BUMPMAP":"",u.normalMap?"#define USE_NORMALMAP":"",u.normalMap&&u.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",u.normalMap&&u.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",u.clearcoatMap?"#define USE_CLEARCOATMAP":"",u.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",u.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",u.specularMap?"#define USE_SPECULARMAP":"",u.roughnessMap?"#define USE_ROUGHNESSMAP":"",u.metalnessMap?"#define USE_METALNESSMAP":"",u.alphaMap?"#define USE_ALPHAMAP":"",u.sheen?"#define USE_SHEEN":"",u.transmissionMap?"#define USE_TRANSMISSIONMAP":"",u.vertexTangents?"#define USE_TANGENT":"",u.vertexColors||u.instancingColor?"#define USE_COLOR":"",u.vertexUvs?"#define USE_UV":"",u.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",u.gradientMap?"#define USE_GRADIENTMAP":"",u.flatShading?"#define FLAT_SHADED":"",u.doubleSided?"#define DOUBLE_SIDED":"",u.flipSided?"#define FLIP_SIDED":"",u.shadowMapEnabled?"#define USE_SHADOWMAP":"",u.shadowMapEnabled?"#define "+Q:"",u.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",u.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",u.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",u.logarithmicDepthBuffer&&u.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(u.extensionShaderTextureLOD||u.envMap)&&u.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",u.toneMapping!==tt?"#define TONE_MAPPING":"",u.toneMapping!==tt?qs.tonemapping_pars_fragment:"",u.toneMapping!==tt?dD("toneMapping",u.toneMapping):"",u.dithering?"#define DITHERING":"",qs.encodings_pars_fragment,u.map?tv("mapTexelToLinear",u.mapEncoding):"",u.matcap?tv("matcapTexelToLinear",u.matcapEncoding):"",u.envMap?tv("envMapTexelToLinear",u.envMapEncoding):"",u.emissiveMap?tv("emissiveMapTexelToLinear",u.emissiveMapEncoding):"",u.lightMap?tv("lightMapTexelToLinear",u.lightMapEncoding):"",hD("linearToOutputTexel",u.outputEncoding),u.depthPacking?"#define DEPTH_PACKING "+u.depthPacking:"","\n"].filter(jl).join("\n")),z=rc(z),z=Hy(z,u),z=gx(z,u),Y=rc(Y),Y=Hy(Y,u),Y=gx(Y,u),z=AM(z),Y=AM(Y),u.isWebGL2&&!0!==u.isRawShaderMaterial&&(Se="#version 300 es\n",He=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+He,Re=["#define varying in",u.glslVersion===Fl?"":"out highp vec4 pc_fragColor;",u.glslVersion===Fl?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+Re);const nt=Se+Re+Y,ft=CM(E,35633,Se+He+z),et=CM(E,35632,nt);if(E.attachShader(Fe,ft),E.attachShader(Fe,et),void 0!==u.index0AttributeName?E.bindAttribLocation(Fe,0,u.index0AttributeName):!0===u.morphTargets&&E.bindAttribLocation(Fe,0,"position"),E.linkProgram(Fe),x.debug.checkShaderErrors){const zt=E.getProgramInfoLog(Fe).trim(),Gt=E.getShaderInfoLog(ft).trim(),cn=E.getShaderInfoLog(et).trim();let An=!0,pn=!0;if(!1===E.getProgramParameter(Fe,35714)){An=!1;const Wt=TM(E,ft,"vertex"),an=TM(E,et,"fragment");console.error("THREE.WebGLProgram: shader error: ",E.getError(),"35715",E.getProgramParameter(Fe,35715),"gl.getProgramInfoLog",zt,Wt,an)}else""!==zt?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",zt):(""===Gt||""===cn)&&(pn=!1);pn&&(this.diagnostics={runnable:An,programLog:zt,vertexShader:{log:Gt,prefix:He},fragmentShader:{log:cn,prefix:Re}})}let Tt,Qt;return E.deleteShader(ft),E.deleteShader(et),this.getUniforms=function(){return void 0===Tt&&(Tt=new Ff(E,Fe)),Tt},this.getAttributes=function(){return void 0===Qt&&(Qt=function nv(x,l){const u={},w=x.getProgramParameter(l,35721);for(let E=0;E<w;E++){const z=x.getActiveAttrib(l,E).name;u[z]=x.getAttribLocation(l,z)}return u}(E,Fe)),Qt},this.destroy=function(){w.releaseStatesOfProgram(this),E.deleteProgram(Fe),this.program=void 0},this.name=u.shaderName,this.id=mx++,this.cacheKey=l,this.usedTimes=1,this.program=Fe,this.vertexShader=ft,this.fragmentShader=et,this}function _D(x,l,u,w,E,R){const z=[],Y=w.isWebGL2,Q=w.logarithmicDepthBuffer,ee=w.floatVertexTextures,pe=w.maxVertexUniforms,he=w.vertexTextures;let me=w.precision;const be={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},Ee=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function He(et){let Tt;return et&&et.isTexture?Tt=et.encoding:et&&et.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),Tt=et.texture.encoding):Tt=sl,Tt}return{getParameters:function Re(et,Tt,Qt,zt,Gt){const cn=zt.fog,pn=l.get(et.envMap||(et.isMeshStandardMaterial?zt.environment:null)),Wt=be[et.type],an=Gt.isSkinnedMesh?function Fe(et){const Qt=et.skeleton.bones;if(ee)return 1024;{const Gt=Math.floor((pe-20)/4),cn=Math.min(Gt,Qt.length);return cn<Qt.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Qt.length+" bones. This GPU supports "+cn+"."),0):cn}}(Gt):0;let Tn,vi;if(null!==et.precision&&(me=w.getMaxPrecision(et.precision),me!==et.precision&&console.warn("THREE.WebGLProgram.getParameters:",et.precision,"not supported, using",me,"instead.")),Wt){const Tr=ll[Wt];Tn=Tr.vertexShader,vi=Tr.fragmentShader}else Tn=et.vertexShader,vi=et.fragmentShader;const Gi=x.getRenderTarget();return{isWebGL2:Y,shaderID:Wt,shaderName:et.type,vertexShader:Tn,fragmentShader:vi,defines:et.defines,isRawShaderMaterial:!0===et.isRawShaderMaterial,glslVersion:et.glslVersion,precision:me,instancing:!0===Gt.isInstancedMesh,instancingColor:!0===Gt.isInstancedMesh&&null!==Gt.instanceColor,supportsVertexTextures:he,outputEncoding:null!==Gi?He(Gi.texture):x.outputEncoding,map:!!et.map,mapEncoding:He(et.map),matcap:!!et.matcap,matcapEncoding:He(et.matcap),envMap:!!pn,envMapMode:pn&&pn.mapping,envMapEncoding:He(pn),envMapCubeUV:!!pn&&(pn.mapping===ro||pn.mapping===ha),lightMap:!!et.lightMap,lightMapEncoding:He(et.lightMap),aoMap:!!et.aoMap,emissiveMap:!!et.emissiveMap,emissiveMapEncoding:He(et.emissiveMap),bumpMap:!!et.bumpMap,normalMap:!!et.normalMap,objectSpaceNormalMap:et.normalMapType===q,tangentSpaceNormalMap:et.normalMapType===ju,clearcoatMap:!!et.clearcoatMap,clearcoatRoughnessMap:!!et.clearcoatRoughnessMap,clearcoatNormalMap:!!et.clearcoatNormalMap,displacementMap:!!et.displacementMap,roughnessMap:!!et.roughnessMap,metalnessMap:!!et.metalnessMap,specularMap:!!et.specularMap,alphaMap:!!et.alphaMap,gradientMap:!!et.gradientMap,sheen:!!et.sheen,transmissionMap:!!et.transmissionMap,combine:et.combine,vertexTangents:et.normalMap&&et.vertexTangents,vertexColors:et.vertexColors,vertexUvs:!!(et.map||et.bumpMap||et.normalMap||et.specularMap||et.alphaMap||et.emissiveMap||et.roughnessMap||et.metalnessMap||et.clearcoatMap||et.clearcoatRoughnessMap||et.clearcoatNormalMap||et.displacementMap||et.transmissionMap),uvsVertexOnly:!(et.map||et.bumpMap||et.normalMap||et.specularMap||et.alphaMap||et.emissiveMap||et.roughnessMap||et.metalnessMap||et.clearcoatNormalMap||et.transmissionMap||!et.displacementMap),fog:!!cn,useFog:et.fog,fogExp2:cn&&cn.isFogExp2,flatShading:!!et.flatShading,sizeAttenuation:et.sizeAttenuation,logarithmicDepthBuffer:Q,skinning:et.skinning&&an>0,maxBones:an,useVertexTexture:ee,morphTargets:et.morphTargets,morphNormals:et.morphNormals,maxMorphTargets:x.maxMorphTargets,maxMorphNormals:x.maxMorphNormals,numDirLights:Tt.directional.length,numPointLights:Tt.point.length,numSpotLights:Tt.spot.length,numRectAreaLights:Tt.rectArea.length,numHemiLights:Tt.hemi.length,numDirLightShadows:Tt.directionalShadowMap.length,numPointLightShadows:Tt.pointShadowMap.length,numSpotLightShadows:Tt.spotShadowMap.length,numClippingPlanes:R.numPlanes,numClipIntersection:R.numIntersection,dithering:et.dithering,shadowMapEnabled:x.shadowMap.enabled&&Qt.length>0,shadowMapType:x.shadowMap.type,toneMapping:et.toneMapped?x.toneMapping:tt,physicallyCorrectLights:x.physicallyCorrectLights,premultipliedAlpha:et.premultipliedAlpha,alphaTest:et.alphaTest,doubleSided:et.side===re,flipSided:et.side===W,depthPacking:void 0!==et.depthPacking&&et.depthPacking,index0AttributeName:et.index0AttributeName,extensionDerivatives:et.extensions&&et.extensions.derivatives,extensionFragDepth:et.extensions&&et.extensions.fragDepth,extensionDrawBuffers:et.extensions&&et.extensions.drawBuffers,extensionShaderTextureLOD:et.extensions&&et.extensions.shaderTextureLOD,rendererExtensionFragDepth:Y||u.has("EXT_frag_depth"),rendererExtensionDrawBuffers:Y||u.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:Y||u.has("EXT_shader_texture_lod"),customProgramCacheKey:et.customProgramCacheKey()}},getProgramCacheKey:function Se(et){const Tt=[];if(et.shaderID?Tt.push(et.shaderID):(Tt.push(et.fragmentShader),Tt.push(et.vertexShader)),void 0!==et.defines)for(const Qt in et.defines)Tt.push(Qt),Tt.push(et.defines[Qt]);if(!1===et.isRawShaderMaterial){for(let Qt=0;Qt<Ee.length;Qt++)Tt.push(et[Ee[Qt]]);Tt.push(x.outputEncoding),Tt.push(x.gammaFactor)}return Tt.push(et.customProgramCacheKey),Tt.join()},getUniforms:function rt(et){const Tt=be[et.type];let Qt;return Qt=Tt?Od.clone(ll[Tt].uniforms):et.uniforms,Qt},acquireProgram:function nt(et,Tt){let Qt;for(let zt=0,Gt=z.length;zt<Gt;zt++){const cn=z[zt];if(cn.cacheKey===Tt){Qt=cn,++Qt.usedTimes;break}}return void 0===Qt&&(Qt=new yx(x,Tt,et,E),z.push(Qt)),Qt},releaseProgram:function ft(et){if(0==--et.usedTimes){const Tt=z.indexOf(et);z[Tt]=z[z.length-1],z.pop(),et.destroy()}},programs:z}}function vD(){let x=new WeakMap;return{get:function l(R){let z=x.get(R);return void 0===z&&(z={},x.set(R,z)),z},remove:function u(R){x.delete(R)},update:function w(R,z,Y){x.get(R)[z]=Y},dispose:function E(){x=new WeakMap}}}function bx(x,l){return x.groupOrder!==l.groupOrder?x.groupOrder-l.groupOrder:x.renderOrder!==l.renderOrder?x.renderOrder-l.renderOrder:x.program!==l.program?x.program.id-l.program.id:x.material.id!==l.material.id?x.material.id-l.material.id:x.z!==l.z?x.z-l.z:x.id-l.id}function yD(x,l){return x.groupOrder!==l.groupOrder?x.groupOrder-l.groupOrder:x.renderOrder!==l.renderOrder?x.renderOrder-l.renderOrder:x.z!==l.z?l.z-x.z:x.id-l.id}function PM(x){const l=[];let u=0;const w=[],E=[],R={id:-1};function Y(me,be,Ee,Fe,He,Re){let Se=l[u];const rt=x.get(Ee);return void 0===Se?(Se={id:me.id,object:me,geometry:be,material:Ee,program:rt.program||R,groupOrder:Fe,renderOrder:me.renderOrder,z:He,group:Re},l[u]=Se):(Se.id=me.id,Se.object=me,Se.geometry=be,Se.material=Ee,Se.program=rt.program||R,Se.groupOrder=Fe,Se.renderOrder=me.renderOrder,Se.z=He,Se.group=Re),u++,Se}return{opaque:w,transparent:E,init:function z(){u=0,w.length=0,E.length=0},push:function Q(me,be,Ee,Fe,He,Re){const Se=Y(me,be,Ee,Fe,He,Re);(!0===Ee.transparent?E:w).push(Se)},unshift:function ee(me,be,Ee,Fe,He,Re){const Se=Y(me,be,Ee,Fe,He,Re);(!0===Ee.transparent?E:w).unshift(Se)},finish:function he(){for(let me=u,be=l.length;me<be;me++){const Ee=l[me];if(null===Ee.id)break;Ee.id=null,Ee.object=null,Ee.geometry=null,Ee.material=null,Ee.program=null,Ee.group=null}},sort:function pe(me,be){w.length>1&&w.sort(me||bx),E.length>1&&E.sort(be||yD)}}}function Of(x){let l=new WeakMap;return{get:function u(E,R){let z;return!1===l.has(E)?(z=new PM(x),l.set(E,[z])):R>=l.get(E).length?(z=new PM(x),l.get(E).push(z)):z=l.get(E)[R],z},dispose:function w(){l=new WeakMap}}}function bD(){const x={};return{get:function(l){if(void 0!==x[l.id])return x[l.id];let u;switch(l.type){case"DirectionalLight":u={direction:new je,color:new Ji};break;case"SpotLight":u={position:new je,direction:new je,color:new Ji,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":u={position:new je,color:new Ji,distance:0,decay:0};break;case"HemisphereLight":u={direction:new je,skyColor:new Ji,groundColor:new Ji};break;case"RectAreaLight":u={color:new Ji,position:new je,halfWidth:new je,halfHeight:new je}}return x[l.id]=u,u}}}let wD=0;function MD(x,l){return(l.castShadow?1:0)-(x.castShadow?1:0)}function CD(x,l){const u=new bD,w=function xD(){const x={};return{get:function(l){if(void 0!==x[l.id])return x[l.id];let u;switch(l.type){case"DirectionalLight":case"SpotLight":u={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Bn};break;case"PointLight":u={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Bn,shadowCameraNear:1,shadowCameraFar:1e3}}return x[l.id]=u,u}}}(),E={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let pe=0;pe<9;pe++)E.probe.push(new je);const R=new je,z=new hr,Y=new hr;return{setup:function Q(pe){let he=0,me=0,be=0;for(let Tt=0;Tt<9;Tt++)E.probe[Tt].set(0,0,0);let Ee=0,Fe=0,He=0,Re=0,Se=0,rt=0,nt=0,ft=0;pe.sort(MD);for(let Tt=0,Qt=pe.length;Tt<Qt;Tt++){const zt=pe[Tt],Gt=zt.color,cn=zt.intensity,An=zt.distance,pn=zt.shadow&&zt.shadow.map?zt.shadow.map.texture:null;if(zt.isAmbientLight)he+=Gt.r*cn,me+=Gt.g*cn,be+=Gt.b*cn;else if(zt.isLightProbe)for(let Wt=0;Wt<9;Wt++)E.probe[Wt].addScaledVector(zt.sh.coefficients[Wt],cn);else if(zt.isDirectionalLight){const Wt=u.get(zt);if(Wt.color.copy(zt.color).multiplyScalar(zt.intensity),zt.castShadow){const an=zt.shadow,Tn=w.get(zt);Tn.shadowBias=an.bias,Tn.shadowNormalBias=an.normalBias,Tn.shadowRadius=an.radius,Tn.shadowMapSize=an.mapSize,E.directionalShadow[Ee]=Tn,E.directionalShadowMap[Ee]=pn,E.directionalShadowMatrix[Ee]=zt.shadow.matrix,rt++}E.directional[Ee]=Wt,Ee++}else if(zt.isSpotLight){const Wt=u.get(zt);if(Wt.position.setFromMatrixPosition(zt.matrixWorld),Wt.color.copy(Gt).multiplyScalar(cn),Wt.distance=An,Wt.coneCos=Math.cos(zt.angle),Wt.penumbraCos=Math.cos(zt.angle*(1-zt.penumbra)),Wt.decay=zt.decay,zt.castShadow){const an=zt.shadow,Tn=w.get(zt);Tn.shadowBias=an.bias,Tn.shadowNormalBias=an.normalBias,Tn.shadowRadius=an.radius,Tn.shadowMapSize=an.mapSize,E.spotShadow[He]=Tn,E.spotShadowMap[He]=pn,E.spotShadowMatrix[He]=zt.shadow.matrix,ft++}E.spot[He]=Wt,He++}else if(zt.isRectAreaLight){const Wt=u.get(zt);Wt.color.copy(Gt).multiplyScalar(cn),Wt.halfWidth.set(.5*zt.width,0,0),Wt.halfHeight.set(0,.5*zt.height,0),E.rectArea[Re]=Wt,Re++}else if(zt.isPointLight){const Wt=u.get(zt);if(Wt.color.copy(zt.color).multiplyScalar(zt.intensity),Wt.distance=zt.distance,Wt.decay=zt.decay,zt.castShadow){const an=zt.shadow,Tn=w.get(zt);Tn.shadowBias=an.bias,Tn.shadowNormalBias=an.normalBias,Tn.shadowRadius=an.radius,Tn.shadowMapSize=an.mapSize,Tn.shadowCameraNear=an.camera.near,Tn.shadowCameraFar=an.camera.far,E.pointShadow[Fe]=Tn,E.pointShadowMap[Fe]=pn,E.pointShadowMatrix[Fe]=zt.shadow.matrix,nt++}E.point[Fe]=Wt,Fe++}else if(zt.isHemisphereLight){const Wt=u.get(zt);Wt.skyColor.copy(zt.color).multiplyScalar(cn),Wt.groundColor.copy(zt.groundColor).multiplyScalar(cn),E.hemi[Se]=Wt,Se++}}Re>0&&(l.isWebGL2||!0===x.has("OES_texture_float_linear")?(E.rectAreaLTC1=Ii.LTC_FLOAT_1,E.rectAreaLTC2=Ii.LTC_FLOAT_2):!0===x.has("OES_texture_half_float_linear")?(E.rectAreaLTC1=Ii.LTC_HALF_1,E.rectAreaLTC2=Ii.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),E.ambient[0]=he,E.ambient[1]=me,E.ambient[2]=be;const et=E.hash;(et.directionalLength!==Ee||et.pointLength!==Fe||et.spotLength!==He||et.rectAreaLength!==Re||et.hemiLength!==Se||et.numDirectionalShadows!==rt||et.numPointShadows!==nt||et.numSpotShadows!==ft)&&(E.directional.length=Ee,E.spot.length=He,E.rectArea.length=Re,E.point.length=Fe,E.hemi.length=Se,E.directionalShadow.length=rt,E.directionalShadowMap.length=rt,E.pointShadow.length=nt,E.pointShadowMap.length=nt,E.spotShadow.length=ft,E.spotShadowMap.length=ft,E.directionalShadowMatrix.length=rt,E.pointShadowMatrix.length=nt,E.spotShadowMatrix.length=ft,et.directionalLength=Ee,et.pointLength=Fe,et.spotLength=He,et.rectAreaLength=Re,et.hemiLength=Se,et.numDirectionalShadows=rt,et.numPointShadows=nt,et.numSpotShadows=ft,E.version=wD++)},setupView:function ee(pe,he){let me=0,be=0,Ee=0,Fe=0,He=0;const Re=he.matrixWorldInverse;for(let Se=0,rt=pe.length;Se<rt;Se++){const nt=pe[Se];if(nt.isDirectionalLight){const ft=E.directional[me];ft.direction.setFromMatrixPosition(nt.matrixWorld),R.setFromMatrixPosition(nt.target.matrixWorld),ft.direction.sub(R),ft.direction.transformDirection(Re),me++}else if(nt.isSpotLight){const ft=E.spot[Ee];ft.position.setFromMatrixPosition(nt.matrixWorld),ft.position.applyMatrix4(Re),ft.direction.setFromMatrixPosition(nt.matrixWorld),R.setFromMatrixPosition(nt.target.matrixWorld),ft.direction.sub(R),ft.direction.transformDirection(Re),Ee++}else if(nt.isRectAreaLight){const ft=E.rectArea[Fe];ft.position.setFromMatrixPosition(nt.matrixWorld),ft.position.applyMatrix4(Re),Y.identity(),z.copy(nt.matrixWorld),z.premultiply(Re),Y.extractRotation(z),ft.halfWidth.set(.5*nt.width,0,0),ft.halfHeight.set(0,.5*nt.height,0),ft.halfWidth.applyMatrix4(Y),ft.halfHeight.applyMatrix4(Y),Fe++}else if(nt.isPointLight){const ft=E.point[be];ft.position.setFromMatrixPosition(nt.matrixWorld),ft.position.applyMatrix4(Re),be++}else if(nt.isHemisphereLight){const ft=E.hemi[He];ft.direction.setFromMatrixPosition(nt.matrixWorld),ft.direction.transformDirection(Re),ft.direction.normalize(),He++}}},state:E}}function xx(x,l){const u=new CD(x,l),w=[],E=[];return{init:function R(){w.length=0,E.length=0},state:{lightsArray:w,shadowsArray:E,lights:u},setupLights:function Q(){u.setup(w)},setupLightsView:function ee(he){u.setupView(w,he)},pushLight:function z(he){w.push(he)},pushShadow:function Y(he){E.push(he)}}}function SD(x,l){let u=new WeakMap;return{get:function w(R,z=0){let Y;return!1===u.has(R)?(Y=new xx(x,l),u.set(R,[Y])):z>=u.get(R).length?(Y=new xx(x,l),u.get(R).push(Y)):Y=u.get(R)[z],Y},dispose:function E(){u=new WeakMap}}}class zy extends qo{constructor(l){super(),this.type="MeshDepthMaterial",this.depthPacking=lu,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(l)}copy(l){return super.copy(l),this.depthPacking=l.depthPacking,this.skinning=l.skinning,this.morphTargets=l.morphTargets,this.map=l.map,this.alphaMap=l.alphaMap,this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this}}zy.prototype.isMeshDepthMaterial=!0;class Vy extends qo{constructor(l){super(),this.type="MeshDistanceMaterial",this.referencePosition=new je,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(l)}copy(l){return super.copy(l),this.referencePosition.copy(l.referencePosition),this.nearDistance=l.nearDistance,this.farDistance=l.farDistance,this.skinning=l.skinning,this.morphTargets=l.morphTargets,this.map=l.map,this.alphaMap=l.alphaMap,this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this}}function wx(x,l,u){let w=new Lp;const E=new Bn,R=new Bn,z=new As,Y=[],Q=[],ee={},pe={0:W,1:J,2:re},he=new ql({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Bn},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),me=he.clone();me.defines.HORIZONTAL_PASS=1;const be=new yr;be.setAttribute("position",new zr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const Ee=new to(be,he),Fe=this;function He(ft,et){const Tt=l.update(Ee);he.uniforms.shadow_pass.value=ft.map.texture,he.uniforms.resolution.value=ft.mapSize,he.uniforms.radius.value=ft.radius,x.setRenderTarget(ft.mapPass),x.clear(),x.renderBufferDirect(et,null,Tt,he,Ee,null),me.uniforms.shadow_pass.value=ft.mapPass.texture,me.uniforms.resolution.value=ft.mapSize,me.uniforms.radius.value=ft.radius,x.setRenderTarget(ft.map),x.clear(),x.renderBufferDirect(et,null,Tt,me,Ee,null)}function Re(ft,et,Tt){const Qt=ft<<0|et<<1|Tt<<2;let zt=Y[Qt];return void 0===zt&&(zt=new zy({depthPacking:cu,morphTargets:ft,skinning:et}),Y[Qt]=zt),zt}function Se(ft,et,Tt){const Qt=ft<<0|et<<1|Tt<<2;let zt=Q[Qt];return void 0===zt&&(zt=new Vy({morphTargets:ft,skinning:et}),Q[Qt]=zt),zt}function rt(ft,et,Tt,Qt,zt,Gt,cn){let An=null,pn=Re,Wt=ft.customDepthMaterial;if(!0===Qt.isPointLight&&(pn=Se,Wt=ft.customDistanceMaterial),void 0===Wt){let an=!1;!0===Tt.morphTargets&&(an=et.morphAttributes&&et.morphAttributes.position&&et.morphAttributes.position.length>0);let Tn=!1;!0===ft.isSkinnedMesh&&(!0===Tt.skinning?Tn=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",ft)),An=pn(an,Tn,!0===ft.isInstancedMesh)}else An=Wt;if(x.localClippingEnabled&&!0===Tt.clipShadows&&0!==Tt.clippingPlanes.length){const an=An.uuid,Tn=Tt.uuid;let vi=ee[an];void 0===vi&&(vi={},ee[an]=vi);let Gi=vi[Tn];void 0===Gi&&(Gi=An.clone(),vi[Tn]=Gi),An=Gi}return An.visible=Tt.visible,An.wireframe=Tt.wireframe,An.side=cn===V?null!==Tt.shadowSide?Tt.shadowSide:Tt.side:null!==Tt.shadowSide?Tt.shadowSide:pe[Tt.side],An.clipShadows=Tt.clipShadows,An.clippingPlanes=Tt.clippingPlanes,An.clipIntersection=Tt.clipIntersection,An.wireframeLinewidth=Tt.wireframeLinewidth,An.linewidth=Tt.linewidth,!0===Qt.isPointLight&&!0===An.isMeshDistanceMaterial&&(An.referencePosition.setFromMatrixPosition(Qt.matrixWorld),An.nearDistance=zt,An.farDistance=Gt),An}function nt(ft,et,Tt,Qt,zt){if(!1===ft.visible)return;if(ft.layers.test(et.layers)&&(ft.isMesh||ft.isLine||ft.isPoints)&&(ft.castShadow||ft.receiveShadow&&zt===V)&&(!ft.frustumCulled||w.intersectsObject(ft))){ft.modelViewMatrix.multiplyMatrices(Tt.matrixWorldInverse,ft.matrixWorld);const An=l.update(ft),pn=ft.material;if(Array.isArray(pn)){const Wt=An.groups;for(let an=0,Tn=Wt.length;an<Tn;an++){const vi=Wt[an],Gi=pn[vi.materialIndex];if(Gi&&Gi.visible){const $i=rt(ft,An,Gi,Qt,Tt.near,Tt.far,zt);x.renderBufferDirect(Tt,null,An,$i,ft,vi)}}}else if(pn.visible){const Wt=rt(ft,An,pn,Qt,Tt.near,Tt.far,zt);x.renderBufferDirect(Tt,null,An,Wt,ft,null)}}const cn=ft.children;for(let An=0,pn=cn.length;An<pn;An++)nt(cn[An],et,Tt,Qt,zt)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=P,this.render=function(ft,et,Tt){if(!1===Fe.enabled||!1===Fe.autoUpdate&&!1===Fe.needsUpdate||0===ft.length)return;const Qt=x.getRenderTarget(),zt=x.getActiveCubeFace(),Gt=x.getActiveMipmapLevel(),cn=x.state;cn.setBlending(ae),cn.buffers.color.setClear(1,1,1,1),cn.buffers.depth.setTest(!0),cn.setScissorTest(!1);for(let An=0,pn=ft.length;An<pn;An++){const Wt=ft[An],an=Wt.shadow;if(void 0===an){console.warn("THREE.WebGLShadowMap:",Wt,"has no shadow.");continue}if(!1===an.autoUpdate&&!1===an.needsUpdate)continue;E.copy(an.mapSize);const Tn=an.getFrameExtents();if(E.multiply(Tn),R.copy(an.mapSize),(E.x>u||E.y>u)&&(E.x>u&&(R.x=Math.floor(u/Tn.x),E.x=R.x*Tn.x,an.mapSize.x=R.x),E.y>u&&(R.y=Math.floor(u/Tn.y),E.y=R.y*Tn.y,an.mapSize.y=R.y)),null===an.map&&!an.isPointLightShadow&&this.type===V){const Gi={minFilter:Xi,magFilter:Xi,format:gn};an.map=new Do(E.x,E.y,Gi),an.map.texture.name=Wt.name+".shadowMap",an.mapPass=new Do(E.x,E.y,Gi),an.camera.updateProjectionMatrix()}null===an.map&&(an.map=new Do(E.x,E.y,{minFilter:mo,magFilter:mo,format:gn}),an.map.texture.name=Wt.name+".shadowMap",an.camera.updateProjectionMatrix()),x.setRenderTarget(an.map),x.clear();const vi=an.getViewportCount();for(let Gi=0;Gi<vi;Gi++){const $i=an.getViewport(Gi);z.set(R.x*$i.x,R.y*$i.y,R.x*$i.z,R.y*$i.w),cn.viewport(z),an.updateMatrices(Wt,Gi),w=an.getFrustum(),nt(et,Tt,an.camera,Wt,this.type)}!an.isPointLightShadow&&this.type===V&&He(an,Tt),an.needsUpdate=!1}Fe.needsUpdate=!1,x.setRenderTarget(Qt,zt,Gt)}}function DD(x,l,u){const w=u.isWebGL2,Y=new function E(){let qt=!1;const Mi=new As;let Qi=null;const _r=new As(0,0,0,0);return{setMask:function(wi){Qi!==wi&&!qt&&(x.colorMask(wi,wi,wi,wi),Qi=wi)},setLocked:function(wi){qt=wi},setClear:function(wi,Xr,Qr,Ur,jr){!0===jr&&(wi*=Ur,Xr*=Ur,Qr*=Ur),Mi.set(wi,Xr,Qr,Ur),!1===_r.equals(Mi)&&(x.clearColor(wi,Xr,Qr,Ur),_r.copy(Mi))},reset:function(){qt=!1,Qi=null,_r.set(-1,0,0,0)}}},Q=new function R(){let qt=!1,Mi=null,Qi=null,_r=null;return{setTest:function(wi){wi?Tr(2929):br(2929)},setMask:function(wi){Mi!==wi&&!qt&&(x.depthMask(wi),Mi=wi)},setFunc:function(wi){if(Qi!==wi){if(wi)switch(wi){case Li:x.depthFunc(512);break;case Mn:x.depthFunc(519);break;case Sn:x.depthFunc(513);break;case zi:x.depthFunc(515);break;case ti:x.depthFunc(514);break;case Fs:x.depthFunc(518);break;case cr:x.depthFunc(516);break;case Le:x.depthFunc(517);break;default:x.depthFunc(515)}else x.depthFunc(515);Qi=wi}},setLocked:function(wi){qt=wi},setClear:function(wi){_r!==wi&&(x.clearDepth(wi),_r=wi)},reset:function(){qt=!1,Mi=null,Qi=null,_r=null}}},ee=new function z(){let qt=!1,Mi=null,Qi=null,_r=null,wi=null,Xr=null,Qr=null,Ur=null,jr=null;return{setTest:function(Zr){qt||(Zr?Tr(2960):br(2960))},setMask:function(Zr){Mi!==Zr&&!qt&&(x.stencilMask(Zr),Mi=Zr)},setFunc:function(Zr,nl,pu){(Qi!==Zr||_r!==nl||wi!==pu)&&(x.stencilFunc(Zr,nl,pu),Qi=Zr,_r=nl,wi=pu)},setOp:function(Zr,nl,pu){(Xr!==Zr||Qr!==nl||Ur!==pu)&&(x.stencilOp(Zr,nl,pu),Xr=Zr,Qr=nl,Ur=pu)},setLocked:function(Zr){qt=Zr},setClear:function(Zr){jr!==Zr&&(x.clearStencil(Zr),jr=Zr)},reset:function(){qt=!1,Mi=null,Qi=null,_r=null,wi=null,Xr=null,Qr=null,Ur=null,jr=null}}};let pe={},he=null,me=!1,be=null,Ee=null,Fe=null,He=null,Re=null,Se=null,rt=null,nt=!1,ft=null,et=null,Tt=null,Qt=null,zt=null;const Gt=x.getParameter(35661);let cn=!1,An=0;const pn=x.getParameter(7938);-1!==pn.indexOf("WebGL")?(An=parseFloat(/^WebGL (\d)/.exec(pn)[1]),cn=An>=1):-1!==pn.indexOf("OpenGL ES")&&(An=parseFloat(/^OpenGL ES (\d)/.exec(pn)[1]),cn=An>=2);let Wt=null,an={};const Tn=new As,vi=new As;function Gi(qt,Mi,Qi){const _r=new Uint8Array(4),wi=x.createTexture();x.bindTexture(qt,wi),x.texParameteri(qt,10241,9728),x.texParameteri(qt,10240,9728);for(let Xr=0;Xr<Qi;Xr++)x.texImage2D(Mi+Xr,0,6408,1,1,0,6408,5121,_r);return wi}const $i={};function Tr(qt){!0!==pe[qt]&&(x.enable(qt),pe[qt]=!0)}function br(qt){!1!==pe[qt]&&(x.disable(qt),pe[qt]=!1)}$i[3553]=Gi(3553,3553,1),$i[34067]=Gi(34067,34069,6),Y.setClear(0,0,0,1),Q.setClear(1),ee.setClear(0),Tr(2929),Q.setFunc(zi),Aa(!1),_o(v),Tr(2884),Io(ae);const _s={[st]:32774,[We]:32778,[at]:32779};if(w)_s[Te]=32775,_s[qe]=32776;else{const qt=l.get("EXT_blend_minmax");null!==qt&&(_s[Te]=qt.MIN_EXT,_s[qe]=qt.MAX_EXT)}const Oo={[Bt]:0,[Ze]:1,[Zn]:768,[_n]:770,[pr]:776,[ei]:774,[It]:772,[jt]:769,[Dt]:771,[Xt]:775,[Yn]:773};function Io(qt,Mi,Qi,_r,wi,Xr,Qr,Ur){if(qt!==ae){if(!1===me&&(Tr(3042),me=!0),qt===le)wi=wi||Mi,Xr=Xr||Qi,Qr=Qr||_r,(Mi!==Ee||wi!==Re)&&(x.blendEquationSeparate(_s[Mi],_s[wi]),Ee=Mi,Re=wi),(Qi!==Fe||_r!==He||Xr!==Se||Qr!==rt)&&(x.blendFuncSeparate(Oo[Qi],Oo[_r],Oo[Xr],Oo[Qr]),Fe=Qi,He=_r,Se=Xr,rt=Qr),be=qt,nt=null;else if(qt!==be||Ur!==nt){if((Ee!==st||Re!==st)&&(x.blendEquation(32774),Ee=st,Re=st),Ur)switch(qt){case we:x.blendFuncSeparate(1,771,1,771);break;case Me:x.blendFunc(1,1);break;case Pe:x.blendFuncSeparate(0,0,769,771);break;case Ve:x.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",qt)}else switch(qt){case we:x.blendFuncSeparate(770,771,1,771);break;case Me:x.blendFunc(770,1);break;case Pe:x.blendFunc(0,769);break;case Ve:x.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",qt)}Fe=null,He=null,Se=null,rt=null,be=qt,nt=Ur}}else!0===me&&(br(3042),me=!1)}function Aa(qt){ft!==qt&&(x.frontFace(qt?2304:2305),ft=qt)}function _o(qt){qt!==p?(Tr(2884),qt!==et&&x.cullFace(qt===v?1029:qt===M?1028:1032)):br(2884),et=qt}function ss(qt,Mi,Qi){qt?(Tr(32823),(Qt!==Mi||zt!==Qi)&&(x.polygonOffset(Mi,Qi),Qt=Mi,zt=Qi)):br(32823)}function _i(qt){void 0===qt&&(qt=33984+Gt-1),Wt!==qt&&(x.activeTexture(qt),Wt=qt)}return{buffers:{color:Y,depth:Q,stencil:ee},enable:Tr,disable:br,useProgram:function no(qt){return he!==qt&&(x.useProgram(qt),he=qt,!0)},setBlending:Io,setMaterial:function $n(qt,Mi){qt.side===re?br(2884):Tr(2884);let Qi=qt.side===W;Mi&&(Qi=!Qi),Aa(Qi),qt.blending===we&&!1===qt.transparent?Io(ae):Io(qt.blending,qt.blendEquation,qt.blendSrc,qt.blendDst,qt.blendEquationAlpha,qt.blendSrcAlpha,qt.blendDstAlpha,qt.premultipliedAlpha),Q.setFunc(qt.depthFunc),Q.setTest(qt.depthTest),Q.setMask(qt.depthWrite),Y.setMask(qt.colorWrite);const _r=qt.stencilWrite;ee.setTest(_r),_r&&(ee.setMask(qt.stencilWriteMask),ee.setFunc(qt.stencilFunc,qt.stencilRef,qt.stencilFuncMask),ee.setOp(qt.stencilFail,qt.stencilZFail,qt.stencilZPass)),ss(qt.polygonOffset,qt.polygonOffsetFactor,qt.polygonOffsetUnits)},setFlipSided:Aa,setCullFace:_o,setLineWidth:function Mo(qt){qt!==Tt&&(cn&&x.lineWidth(qt),Tt=qt)},setPolygonOffset:ss,setScissorTest:function No(qt){qt?Tr(3089):br(3089)},activeTexture:_i,bindTexture:function ni(qt,Mi){null===Wt&&_i();let Qi=an[Wt];void 0===Qi&&(Qi={type:void 0,texture:void 0},an[Wt]=Qi),(Qi.type!==qt||Qi.texture!==Mi)&&(x.bindTexture(qt,Mi||$i[qt]),Qi.type=qt,Qi.texture=Mi)},unbindTexture:function Ri(){const qt=an[Wt];void 0!==qt&&void 0!==qt.type&&(x.bindTexture(qt.type,null),qt.type=void 0,qt.texture=void 0)},compressedTexImage2D:function kr(){try{x.compressedTexImage2D.apply(x,arguments)}catch(qt){console.error("THREE.WebGLState:",qt)}},texImage2D:function dr(){try{x.texImage2D.apply(x,arguments)}catch(qt){console.error("THREE.WebGLState:",qt)}},texImage3D:function wt(){try{x.texImage3D.apply(x,arguments)}catch(qt){console.error("THREE.WebGLState:",qt)}},scissor:function mt(qt){!1===Tn.equals(qt)&&(x.scissor(qt.x,qt.y,qt.z,qt.w),Tn.copy(qt))},viewport:function oi(qt){!1===vi.equals(qt)&&(x.viewport(qt.x,qt.y,qt.z,qt.w),vi.copy(qt))},reset:function gi(){x.disable(3042),x.disable(2884),x.disable(2929),x.disable(32823),x.disable(3089),x.disable(2960),x.blendEquation(32774),x.blendFunc(1,0),x.blendFuncSeparate(1,0,1,0),x.colorMask(!0,!0,!0,!0),x.clearColor(0,0,0,0),x.depthMask(!0),x.depthFunc(513),x.clearDepth(1),x.stencilMask(4294967295),x.stencilFunc(519,0,4294967295),x.stencilOp(7680,7680,7680),x.clearStencil(0),x.cullFace(1029),x.frontFace(2305),x.polygonOffset(0,0),x.activeTexture(33984),x.useProgram(null),x.lineWidth(1),x.scissor(0,0,x.canvas.width,x.canvas.height),x.viewport(0,0,x.canvas.width,x.canvas.height),pe={},Wt=null,an={},he=null,me=!1,be=null,Ee=null,Fe=null,He=null,Re=null,Se=null,rt=null,nt=!1,ft=null,et=null,Tt=null,Qt=null,zt=null,Y.reset(),Q.reset(),ee.reset()}}}function AD(x,l,u,w,E,R,z){const Y=E.isWebGL2,Q=E.maxTextures,ee=E.maxCubemapSize,pe=E.maxTextureSize,he=E.maxSamples,me=new WeakMap;let be,Ee=!1;try{Ee="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(wt){}function Fe(wt,mt){return Ee?new OffscreenCanvas(wt,mt):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function He(wt,mt,oi,gi){let qt=1;if((wt.width>gi||wt.height>gi)&&(qt=gi/Math.max(wt.width,wt.height)),qt<1||!0===mt){if("undefined"!=typeof HTMLImageElement&&wt instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&wt instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&wt instanceof ImageBitmap){const Mi=mt?Ui.floorPowerOfTwo:Math.floor,Qi=Mi(qt*wt.width),_r=Mi(qt*wt.height);void 0===be&&(be=Fe(Qi,_r));const wi=oi?Fe(Qi,_r):be;return wi.width=Qi,wi.height=_r,wi.getContext("2d").drawImage(wt,0,0,Qi,_r),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+wt.width+"x"+wt.height+") to ("+Qi+"x"+_r+")."),wi}return"data"in wt&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+wt.width+"x"+wt.height+")."),wt}return wt}function Re(wt){return Ui.isPowerOfTwo(wt.width)&&Ui.isPowerOfTwo(wt.height)}function rt(wt,mt){return wt.generateMipmaps&&mt&&wt.minFilter!==mo&&wt.minFilter!==Xi}function nt(wt,mt,oi,gi){x.generateMipmap(wt),w.get(mt).__maxMipLevel=Math.log2(Math.max(oi,gi))}function ft(wt,mt,oi){if(!1===Y)return mt;if(null!==wt){if(void 0!==x[wt])return x[wt];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+wt+"'")}let gi=mt;return 6403===mt&&(5126===oi&&(gi=33326),5131===oi&&(gi=33325),5121===oi&&(gi=33321)),6407===mt&&(5126===oi&&(gi=34837),5131===oi&&(gi=34843),5121===oi&&(gi=32849)),6408===mt&&(5126===oi&&(gi=34836),5131===oi&&(gi=34842),5121===oi&&(gi=32856)),(33325===gi||33326===gi||34842===gi||34836===gi)&&l.get("EXT_color_buffer_float"),gi}function et(wt){return wt===mo||wt===aa||wt===nr?9728:9729}function Tt(wt){const mt=wt.target;mt.removeEventListener("dispose",Tt),function zt(wt){const mt=w.get(wt);void 0!==mt.__webglInit&&(x.deleteTexture(mt.__webglTexture),w.remove(wt))}(mt),mt.isVideoTexture&&me.delete(mt),z.memory.textures--}function Qt(wt){const mt=wt.target;mt.removeEventListener("dispose",Qt),function Gt(wt){const mt=wt.texture,oi=w.get(wt),gi=w.get(mt);if(wt){if(void 0!==gi.__webglTexture&&x.deleteTexture(gi.__webglTexture),wt.depthTexture&&wt.depthTexture.dispose(),wt.isWebGLCubeRenderTarget)for(let qt=0;qt<6;qt++)x.deleteFramebuffer(oi.__webglFramebuffer[qt]),oi.__webglDepthbuffer&&x.deleteRenderbuffer(oi.__webglDepthbuffer[qt]);else x.deleteFramebuffer(oi.__webglFramebuffer),oi.__webglDepthbuffer&&x.deleteRenderbuffer(oi.__webglDepthbuffer),oi.__webglMultisampledFramebuffer&&x.deleteFramebuffer(oi.__webglMultisampledFramebuffer),oi.__webglColorRenderbuffer&&x.deleteRenderbuffer(oi.__webglColorRenderbuffer),oi.__webglDepthRenderbuffer&&x.deleteRenderbuffer(oi.__webglDepthRenderbuffer);w.remove(mt),w.remove(wt)}}(mt),z.memory.textures--}let cn=0;function Wt(wt,mt){const oi=w.get(wt);if(wt.isVideoTexture&&function _i(wt){const mt=z.render.frame;me.get(wt)!==mt&&(me.set(wt,mt),wt.update())}(wt),wt.version>0&&oi.__version!==wt.version){const gi=wt.image;if(void 0===gi)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==gi.complete)return void no(oi,wt,mt);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}u.activeTexture(33984+mt),u.bindTexture(3553,oi.__webglTexture)}function vi(wt,mt){const oi=w.get(wt);wt.version>0&&oi.__version!==wt.version?function _s(wt,mt,oi){if(6!==mt.image.length)return;br(wt,mt),u.activeTexture(33984+oi),u.bindTexture(34067,wt.__webglTexture),x.pixelStorei(37440,mt.flipY),x.pixelStorei(37441,mt.premultiplyAlpha),x.pixelStorei(3317,mt.unpackAlignment),x.pixelStorei(37443,0);const gi=mt&&(mt.isCompressedTexture||mt.image[0].isCompressedTexture),qt=mt.image[0]&&mt.image[0].isDataTexture,Mi=[];for(let jr=0;jr<6;jr++)Mi[jr]=gi||qt?qt?mt.image[jr].image:mt.image[jr]:He(mt.image[jr],!1,!0,ee);const Qi=Mi[0],_r=Re(Qi)||Y,wi=R.convert(mt.format),Xr=R.convert(mt.type),Qr=ft(mt.internalFormat,wi,Xr);let Ur;if(Tr(34067,mt,_r),gi){for(let jr=0;jr<6;jr++){Ur=Mi[jr].mipmaps;for(let Zr=0;Zr<Ur.length;Zr++){const nl=Ur[Zr];mt.format!==gn&&mt.format!==Kt?null!==wi?u.compressedTexImage2D(34069+jr,Zr,Qr,nl.width,nl.height,0,nl.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):u.texImage2D(34069+jr,Zr,Qr,nl.width,nl.height,0,wi,Xr,nl.data)}}wt.__maxMipLevel=Ur.length-1}else{Ur=mt.mipmaps;for(let jr=0;jr<6;jr++)if(qt){u.texImage2D(34069+jr,0,Qr,Mi[jr].width,Mi[jr].height,0,wi,Xr,Mi[jr].data);for(let Zr=0;Zr<Ur.length;Zr++){const pu=Ur[Zr].image[jr].image;u.texImage2D(34069+jr,Zr+1,Qr,pu.width,pu.height,0,wi,Xr,pu.data)}}else{u.texImage2D(34069+jr,0,Qr,wi,Xr,Mi[jr]);for(let Zr=0;Zr<Ur.length;Zr++)u.texImage2D(34069+jr,Zr+1,Qr,wi,Xr,Ur[Zr].image[jr])}wt.__maxMipLevel=Ur.length}rt(mt,_r)&&nt(34067,mt,Qi.width,Qi.height),wt.__version=mt.version,mt.onUpdate&&mt.onUpdate(mt)}(oi,wt,mt):(u.activeTexture(33984+mt),u.bindTexture(34067,oi.__webglTexture))}const Gi={[Qo]:10497,[es]:33071,[Ps]:33648},$i={[mo]:9728,[aa]:9984,[nr]:9986,[Xi]:9729,[Ds]:9985,[k]:9987};function Tr(wt,mt,oi){if(oi?(x.texParameteri(wt,10242,Gi[mt.wrapS]),x.texParameteri(wt,10243,Gi[mt.wrapT]),(32879===wt||35866===wt)&&x.texParameteri(wt,32882,Gi[mt.wrapR]),x.texParameteri(wt,10240,$i[mt.magFilter]),x.texParameteri(wt,10241,$i[mt.minFilter])):(x.texParameteri(wt,10242,33071),x.texParameteri(wt,10243,33071),(32879===wt||35866===wt)&&x.texParameteri(wt,32882,33071),(mt.wrapS!==es||mt.wrapT!==es)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),x.texParameteri(wt,10240,et(mt.magFilter)),x.texParameteri(wt,10241,et(mt.minFilter)),mt.minFilter!==mo&&mt.minFilter!==Xi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===l.has("EXT_texture_filter_anisotropic")){const gi=l.get("EXT_texture_filter_anisotropic");if(mt.type===gt&&!1===l.has("OES_texture_float_linear")||!1===Y&&mt.type===xt&&!1===l.has("OES_texture_half_float_linear"))return;(mt.anisotropy>1||w.get(mt).__currentAnisotropy)&&(x.texParameterf(wt,gi.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(mt.anisotropy,E.getMaxAnisotropy())),w.get(mt).__currentAnisotropy=mt.anisotropy)}}function br(wt,mt){void 0===wt.__webglInit&&(wt.__webglInit=!0,mt.addEventListener("dispose",Tt),wt.__webglTexture=x.createTexture(),z.memory.textures++)}function no(wt,mt,oi){let gi=3553;mt.isDataTexture2DArray&&(gi=35866),mt.isDataTexture3D&&(gi=32879),br(wt,mt),u.activeTexture(33984+oi),u.bindTexture(gi,wt.__webglTexture),x.pixelStorei(37440,mt.flipY),x.pixelStorei(37441,mt.premultiplyAlpha),x.pixelStorei(3317,mt.unpackAlignment),x.pixelStorei(37443,0);const qt=function Se(wt){return!Y&&(wt.wrapS!==es||wt.wrapT!==es||wt.minFilter!==mo&&wt.minFilter!==Xi)}(mt)&&!1===Re(mt.image),Mi=He(mt.image,qt,!1,pe),Qi=Re(Mi)||Y,_r=R.convert(mt.format);let Qr,wi=R.convert(mt.type),Xr=ft(mt.internalFormat,_r,wi);Tr(gi,mt,Qi);const Ur=mt.mipmaps;if(mt.isDepthTexture)Xr=6402,Y?Xr=mt.type===gt?36012:mt.type===Qe?33190:mt.type===en?35056:33189:mt.type===gt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),mt.format===Di&&6402===Xr&&mt.type!==De&&mt.type!==Qe&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),mt.type=De,wi=R.convert(mt.type)),mt.format===Ci&&6402===Xr&&(Xr=34041,mt.type!==en&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),mt.type=en,wi=R.convert(mt.type))),u.texImage2D(3553,0,Xr,Mi.width,Mi.height,0,_r,wi,null);else if(mt.isDataTexture)if(Ur.length>0&&Qi){for(let jr=0,Zr=Ur.length;jr<Zr;jr++)Qr=Ur[jr],u.texImage2D(3553,jr,Xr,Qr.width,Qr.height,0,_r,wi,Qr.data);mt.generateMipmaps=!1,wt.__maxMipLevel=Ur.length-1}else u.texImage2D(3553,0,Xr,Mi.width,Mi.height,0,_r,wi,Mi.data),wt.__maxMipLevel=0;else if(mt.isCompressedTexture){for(let jr=0,Zr=Ur.length;jr<Zr;jr++)Qr=Ur[jr],mt.format!==gn&&mt.format!==Kt?null!==_r?u.compressedTexImage2D(3553,jr,Xr,Qr.width,Qr.height,0,Qr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):u.texImage2D(3553,jr,Xr,Qr.width,Qr.height,0,_r,wi,Qr.data);wt.__maxMipLevel=Ur.length-1}else if(mt.isDataTexture2DArray)u.texImage3D(35866,0,Xr,Mi.width,Mi.height,Mi.depth,0,_r,wi,Mi.data),wt.__maxMipLevel=0;else if(mt.isDataTexture3D)u.texImage3D(32879,0,Xr,Mi.width,Mi.height,Mi.depth,0,_r,wi,Mi.data),wt.__maxMipLevel=0;else if(Ur.length>0&&Qi){for(let jr=0,Zr=Ur.length;jr<Zr;jr++)Qr=Ur[jr],u.texImage2D(3553,jr,Xr,_r,wi,Qr);mt.generateMipmaps=!1,wt.__maxMipLevel=Ur.length-1}else u.texImage2D(3553,0,Xr,_r,wi,Mi),wt.__maxMipLevel=0;rt(mt,Qi)&&nt(gi,mt,Mi.width,Mi.height),wt.__version=mt.version,mt.onUpdate&&mt.onUpdate(mt)}function Oo(wt,mt,oi,gi){const qt=mt.texture,Mi=R.convert(qt.format),Qi=R.convert(qt.type),_r=ft(qt.internalFormat,Mi,Qi);32879===gi||35866===gi?u.texImage3D(gi,0,_r,mt.width,mt.height,mt.depth,0,Mi,Qi,null):u.texImage2D(gi,0,_r,mt.width,mt.height,0,Mi,Qi,null),x.bindFramebuffer(36160,wt),x.framebufferTexture2D(36160,oi,gi,w.get(qt).__webglTexture,0),x.bindFramebuffer(36160,null)}function Io(wt,mt,oi){if(x.bindRenderbuffer(36161,wt),mt.depthBuffer&&!mt.stencilBuffer){let gi=33189;if(oi){const qt=mt.depthTexture;qt&&qt.isDepthTexture&&(qt.type===gt?gi=36012:qt.type===Qe&&(gi=33190));const Mi=No(mt);x.renderbufferStorageMultisample(36161,Mi,gi,mt.width,mt.height)}else x.renderbufferStorage(36161,gi,mt.width,mt.height);x.framebufferRenderbuffer(36160,36096,36161,wt)}else if(mt.depthBuffer&&mt.stencilBuffer){if(oi){const gi=No(mt);x.renderbufferStorageMultisample(36161,gi,35056,mt.width,mt.height)}else x.renderbufferStorage(36161,34041,mt.width,mt.height);x.framebufferRenderbuffer(36160,33306,36161,wt)}else{const gi=mt.texture,qt=R.convert(gi.format),Mi=R.convert(gi.type),Qi=ft(gi.internalFormat,qt,Mi);if(oi){const _r=No(mt);x.renderbufferStorageMultisample(36161,_r,Qi,mt.width,mt.height)}else x.renderbufferStorage(36161,Qi,mt.width,mt.height)}x.bindRenderbuffer(36161,null)}function No(wt){return Y&&wt.isWebGLMultisampleRenderTarget?Math.min(he,wt.samples):0}let ni=!1,Ri=!1;this.allocateTextureUnit=function pn(){const wt=cn;return wt>=Q&&console.warn("THREE.WebGLTextures: Trying to use "+wt+" texture units while this GPU supports only "+Q),cn+=1,wt},this.resetTextureUnits=function An(){cn=0},this.setTexture2D=Wt,this.setTexture2DArray=function an(wt,mt){const oi=w.get(wt);wt.version>0&&oi.__version!==wt.version?no(oi,wt,mt):(u.activeTexture(33984+mt),u.bindTexture(35866,oi.__webglTexture))},this.setTexture3D=function Tn(wt,mt){const oi=w.get(wt);wt.version>0&&oi.__version!==wt.version?no(oi,wt,mt):(u.activeTexture(33984+mt),u.bindTexture(32879,oi.__webglTexture))},this.setTextureCube=vi,this.setupRenderTarget=function _o(wt){const mt=wt.texture,oi=w.get(wt),gi=w.get(mt);wt.addEventListener("dispose",Qt),gi.__webglTexture=x.createTexture(),z.memory.textures++;const qt=!0===wt.isWebGLCubeRenderTarget,Mi=!0===wt.isWebGLMultisampleRenderTarget,Qi=mt.isDataTexture3D||mt.isDataTexture2DArray,_r=Re(wt)||Y;if(Y&&mt.format===Kt&&(mt.type===gt||mt.type===xt)&&(mt.format=gn,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),qt){oi.__webglFramebuffer=[];for(let wi=0;wi<6;wi++)oi.__webglFramebuffer[wi]=x.createFramebuffer()}else if(oi.__webglFramebuffer=x.createFramebuffer(),Mi)if(Y){oi.__webglMultisampledFramebuffer=x.createFramebuffer(),oi.__webglColorRenderbuffer=x.createRenderbuffer(),x.bindRenderbuffer(36161,oi.__webglColorRenderbuffer);const wi=R.convert(mt.format),Xr=R.convert(mt.type),Qr=ft(mt.internalFormat,wi,Xr),Ur=No(wt);x.renderbufferStorageMultisample(36161,Ur,Qr,wt.width,wt.height),x.bindFramebuffer(36160,oi.__webglMultisampledFramebuffer),x.framebufferRenderbuffer(36160,36064,36161,oi.__webglColorRenderbuffer),x.bindRenderbuffer(36161,null),wt.depthBuffer&&(oi.__webglDepthRenderbuffer=x.createRenderbuffer(),Io(oi.__webglDepthRenderbuffer,wt,!0)),x.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(qt){u.bindTexture(34067,gi.__webglTexture),Tr(34067,mt,_r);for(let wi=0;wi<6;wi++)Oo(oi.__webglFramebuffer[wi],wt,36064,34069+wi);rt(mt,_r)&&nt(34067,mt,wt.width,wt.height),u.bindTexture(34067,null)}else{let wi=3553;Qi&&(Y?wi=mt.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),u.bindTexture(wi,gi.__webglTexture),Tr(wi,mt,_r),Oo(oi.__webglFramebuffer,wt,36064,wi),rt(mt,_r)&&nt(3553,mt,wt.width,wt.height),u.bindTexture(3553,null)}wt.depthBuffer&&function Aa(wt){const mt=w.get(wt),oi=!0===wt.isWebGLCubeRenderTarget;if(wt.depthTexture){if(oi)throw new Error("target.depthTexture not supported in Cube render targets");!function $n(wt,mt){if(mt&&mt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(x.bindFramebuffer(36160,wt),!mt.depthTexture||!mt.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!w.get(mt.depthTexture).__webglTexture||mt.depthTexture.image.width!==mt.width||mt.depthTexture.image.height!==mt.height)&&(mt.depthTexture.image.width=mt.width,mt.depthTexture.image.height=mt.height,mt.depthTexture.needsUpdate=!0),Wt(mt.depthTexture,0);const gi=w.get(mt.depthTexture).__webglTexture;if(mt.depthTexture.format===Di)x.framebufferTexture2D(36160,36096,3553,gi,0);else{if(mt.depthTexture.format!==Ci)throw new Error("Unknown depthTexture format");x.framebufferTexture2D(36160,33306,3553,gi,0)}}(mt.__webglFramebuffer,wt)}else if(oi){mt.__webglDepthbuffer=[];for(let gi=0;gi<6;gi++)x.bindFramebuffer(36160,mt.__webglFramebuffer[gi]),mt.__webglDepthbuffer[gi]=x.createRenderbuffer(),Io(mt.__webglDepthbuffer[gi],wt,!1)}else x.bindFramebuffer(36160,mt.__webglFramebuffer),mt.__webglDepthbuffer=x.createRenderbuffer(),Io(mt.__webglDepthbuffer,wt,!1);x.bindFramebuffer(36160,null)}(wt)},this.updateRenderTargetMipmap=function Mo(wt){const mt=wt.texture;if(rt(mt,Re(wt)||Y)){const gi=wt.isWebGLCubeRenderTarget?34067:3553,qt=w.get(mt).__webglTexture;u.bindTexture(gi,qt),nt(gi,mt,wt.width,wt.height),u.bindTexture(gi,null)}},this.updateMultisampleRenderTarget=function ss(wt){if(wt.isWebGLMultisampleRenderTarget)if(Y){const mt=w.get(wt);x.bindFramebuffer(36008,mt.__webglMultisampledFramebuffer),x.bindFramebuffer(36009,mt.__webglFramebuffer);const oi=wt.width,gi=wt.height;let qt=16384;wt.depthBuffer&&(qt|=256),wt.stencilBuffer&&(qt|=1024),x.blitFramebuffer(0,0,oi,gi,0,0,oi,gi,qt,9728),x.bindFramebuffer(36160,mt.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function kr(wt,mt){wt&&wt.isWebGLRenderTarget&&(!1===ni&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),ni=!0),wt=wt.texture),Wt(wt,mt)},this.safeSetTextureCube=function dr(wt,mt){wt&&wt.isWebGLCubeRenderTarget&&(!1===Ri&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Ri=!0),wt=wt.texture),vi(wt,mt)}}function nm(x,l,u){const w=u.isWebGL2;return{convert:function E(R){let z;if(R===Z)return 5121;if(R===Jt)return 32819;if(R===Ct)return 32820;if(R===Ht)return 33635;if(R===ne)return 5120;if(R===fe)return 5122;if(R===De)return 5123;if(R===Ue)return 5124;if(R===Qe)return 5125;if(R===gt)return 5126;if(R===xt)return w?5131:(z=l.get("OES_texture_half_float"),null!==z?z.HALF_FLOAT_OES:null);if(R===St)return 6406;if(R===Kt)return 6407;if(R===gn)return 6408;if(R===sn)return 6409;if(R===Wn)return 6410;if(R===Di)return 6402;if(R===Ci)return 34041;if(R===Si)return 6403;if(R===Ei)return 36244;if(R===Mr)return 33319;if(R===Oi)return 33320;if(R===Yr)return 36248;if(R===Br)return 36249;if(R===ia||R===rl||R===Qs||R===Ni){if(z=l.get("WEBGL_compressed_texture_s3tc"),null===z)return null;if(R===ia)return z.COMPRESSED_RGB_S3TC_DXT1_EXT;if(R===rl)return z.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(R===Qs)return z.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(R===Ni)return z.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(R===So||R===Os||R===la||R===ts){if(z=l.get("WEBGL_compressed_texture_pvrtc"),null===z)return null;if(R===So)return z.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(R===Os)return z.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(R===la)return z.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(R===ts)return z.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(R===Ws)return z=l.get("WEBGL_compressed_texture_etc1"),null!==z?z.COMPRESSED_RGB_ETC1_WEBGL:null;if((R===Eo||R===ka)&&(z=l.get("WEBGL_compressed_texture_etc"),null!==z)){if(R===Eo)return z.COMPRESSED_RGB8_ETC2;if(R===ka)return z.COMPRESSED_RGBA8_ETC2_EAC}return R===ke||R===Je||R===mn||R===En||R===Dr||R===ps||R===Vi||R===Xn||R===Pa||R===Cu||R===Bi||R===La||R===or||R===ws||R===wp||R===Xm||R===pc||R===xa||R===gf||R===Mp||R===Cp||R===zc||R===bd||R===Sp||R===Vc||R===P_||R===Ep||R===_f?(z=l.get("WEBGL_compressed_texture_astc"),null!==z?R:null):R===Uo?(z=l.get("EXT_texture_compression_bptc"),null!==z?R:null):R===en?w?34042:(z=l.get("WEBGL_depth_texture"),null!==z?z.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}function Lu(x=[]){pa.call(this),this.cameras=x}Vy.prototype.isMeshDistanceMaterial=!0,Lu.prototype=Object.assign(Object.create(pa.prototype),{constructor:Lu,isArrayCamera:!0});class vg extends xi{constructor(){super(),this.type="Group"}}function Uy(){this._targetRay=null,this._grip=null,this._hand=null}function Mx(x,l){const u=this;let w=null,E=1,R=null,z="local-floor",Y=null;const Q=[],ee=new Map,pe=new pa;pe.layers.enable(1),pe.viewport=new As;const he=new pa;he.layers.enable(2),he.viewport=new As;const me=[pe,he],be=new Lu;be.layers.enable(1),be.layers.enable(2);let Ee=null,Fe=null;function He(Gt){const cn=ee.get(Gt.inputSource);cn&&cn.dispatchEvent({type:Gt.type,data:Gt.inputSource})}function Re(){ee.forEach(function(Gt,cn){Gt.disconnect(cn)}),ee.clear(),Ee=null,Fe=null,x.setFramebuffer(null),x.setRenderTarget(x.getRenderTarget()),zt.stop(),u.isPresenting=!1,u.dispatchEvent({type:"sessionend"})}function Se(Gt){const cn=w.inputSources;for(let An=0;An<Q.length;An++)ee.set(cn[An],Q[An]);for(let An=0;An<Gt.removed.length;An++){const pn=Gt.removed[An],Wt=ee.get(pn);Wt&&(Wt.dispatchEvent({type:"disconnected",data:pn}),ee.delete(pn))}for(let An=0;An<Gt.added.length;An++){const pn=Gt.added[An],Wt=ee.get(pn);Wt&&Wt.dispatchEvent({type:"connected",data:pn})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(Gt){let cn=Q[Gt];return void 0===cn&&(cn=new Uy,Q[Gt]=cn),cn.getTargetRaySpace()},this.getControllerGrip=function(Gt){let cn=Q[Gt];return void 0===cn&&(cn=new Uy,Q[Gt]=cn),cn.getGripSpace()},this.getHand=function(Gt){let cn=Q[Gt];return void 0===cn&&(cn=new Uy,Q[Gt]=cn),cn.getHandSpace()},this.setFramebufferScaleFactor=function(Gt){E=Gt,!0===u.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Gt){z=Gt,!0===u.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return R},this.getSession=function(){return w},this.setSession=function(){var Gt=(0,y.Z)(function*(cn){if(w=cn,null!==w){w.addEventListener("select",He),w.addEventListener("selectstart",He),w.addEventListener("selectend",He),w.addEventListener("squeeze",He),w.addEventListener("squeezestart",He),w.addEventListener("squeezeend",He),w.addEventListener("end",Re),w.addEventListener("inputsourceschange",Se);const An=l.getContextAttributes();!0!==An.xrCompatible&&(yield l.makeXRCompatible());const Wt=new XRWebGLLayer(w,l,{antialias:An.antialias,alpha:An.alpha,depth:An.depth,stencil:An.stencil,framebufferScaleFactor:E});w.updateRenderState({baseLayer:Wt}),R=yield w.requestReferenceSpace(z),zt.setContext(w),zt.start(),u.isPresenting=!0,u.dispatchEvent({type:"sessionstart"})}});return function(cn){return Gt.apply(this,arguments)}}();const rt=new je,nt=new je;function et(Gt,cn){null===cn?Gt.matrixWorld.copy(Gt.matrix):Gt.matrixWorld.multiplyMatrices(cn.matrixWorld,Gt.matrix),Gt.matrixWorldInverse.copy(Gt.matrixWorld).invert()}this.getCamera=function(Gt){be.near=he.near=pe.near=Gt.near,be.far=he.far=pe.far=Gt.far,(Ee!==be.near||Fe!==be.far)&&(w.updateRenderState({depthNear:be.near,depthFar:be.far}),Ee=be.near,Fe=be.far);const cn=Gt.parent,An=be.cameras;et(be,cn);for(let Wt=0;Wt<An.length;Wt++)et(An[Wt],cn);Gt.matrixWorld.copy(be.matrixWorld),Gt.matrix.copy(be.matrix),Gt.matrix.decompose(Gt.position,Gt.quaternion,Gt.scale);const pn=Gt.children;for(let Wt=0,an=pn.length;Wt<an;Wt++)pn[Wt].updateMatrixWorld(!0);return 2===An.length?function ft(Gt,cn,An){rt.setFromMatrixPosition(cn.matrixWorld),nt.setFromMatrixPosition(An.matrixWorld);const pn=rt.distanceTo(nt),Wt=cn.projectionMatrix.elements,an=An.projectionMatrix.elements,Tn=Wt[14]/(Wt[10]-1),vi=Wt[14]/(Wt[10]+1),Gi=(Wt[9]+1)/Wt[5],$i=(Wt[9]-1)/Wt[5],Tr=(Wt[8]-1)/Wt[0],br=(an[8]+1)/an[0],no=Tn*Tr,_s=Tn*br,Oo=pn/(-Tr+br),Io=Oo*-Tr;cn.matrixWorld.decompose(Gt.position,Gt.quaternion,Gt.scale),Gt.translateX(Io),Gt.translateZ(Oo),Gt.matrixWorld.compose(Gt.position,Gt.quaternion,Gt.scale),Gt.matrixWorldInverse.copy(Gt.matrixWorld).invert();const $n=Tn+Oo,Aa=vi+Oo;Gt.projectionMatrix.makePerspective(no-Io,_s+(pn-Io),Gi*vi/Aa*$n,$i*vi/Aa*$n,$n,Aa)}(be,pe,he):be.projectionMatrix.copy(pe.projectionMatrix),be};let Tt=null;const zt=new Fp;zt.setAnimationLoop(function Qt(Gt,cn){if(Y=cn.getViewerPose(R),null!==Y){const pn=Y.views,Wt=w.renderState.baseLayer;x.setFramebuffer(Wt.framebuffer);let an=!1;pn.length!==be.cameras.length&&(be.cameras.length=0,an=!0);for(let Tn=0;Tn<pn.length;Tn++){const vi=pn[Tn],Gi=Wt.getViewport(vi),$i=me[Tn];$i.matrix.fromArray(vi.transform.matrix),$i.projectionMatrix.fromArray(vi.projectionMatrix),$i.viewport.set(Gi.x,Gi.y,Gi.width,Gi.height),0===Tn&&be.matrix.copy($i.matrix),!0===an&&be.cameras.push($i)}}const An=w.inputSources;for(let pn=0;pn<Q.length;pn++)Q[pn].update(An[pn],cn,R);Tt&&Tt(Gt,cn)}),this.setAnimationLoop=function(Gt){Tt=Gt},this.dispose=function(){}}function vP(x){function w(Re,Se){Re.opacity.value=Se.opacity,Se.color&&Re.diffuse.value.copy(Se.color),Se.emissive&&Re.emissive.value.copy(Se.emissive).multiplyScalar(Se.emissiveIntensity),Se.map&&(Re.map.value=Se.map),Se.alphaMap&&(Re.alphaMap.value=Se.alphaMap),Se.specularMap&&(Re.specularMap.value=Se.specularMap);const rt=x.get(Se).envMap;if(rt){Re.envMap.value=rt,Re.flipEnvMap.value=rt.isCubeTexture&&rt._needsFlipEnvMap?-1:1,Re.reflectivity.value=Se.reflectivity,Re.refractionRatio.value=Se.refractionRatio;const et=x.get(rt).__maxMipLevel;void 0!==et&&(Re.maxMipLevel.value=et)}let nt,ft;Se.lightMap&&(Re.lightMap.value=Se.lightMap,Re.lightMapIntensity.value=Se.lightMapIntensity),Se.aoMap&&(Re.aoMap.value=Se.aoMap,Re.aoMapIntensity.value=Se.aoMapIntensity),Se.map?nt=Se.map:Se.specularMap?nt=Se.specularMap:Se.displacementMap?nt=Se.displacementMap:Se.normalMap?nt=Se.normalMap:Se.bumpMap?nt=Se.bumpMap:Se.roughnessMap?nt=Se.roughnessMap:Se.metalnessMap?nt=Se.metalnessMap:Se.alphaMap?nt=Se.alphaMap:Se.emissiveMap?nt=Se.emissiveMap:Se.clearcoatMap?nt=Se.clearcoatMap:Se.clearcoatNormalMap?nt=Se.clearcoatNormalMap:Se.clearcoatRoughnessMap&&(nt=Se.clearcoatRoughnessMap),void 0!==nt&&(nt.isWebGLRenderTarget&&(nt=nt.texture),!0===nt.matrixAutoUpdate&&nt.updateMatrix(),Re.uvTransform.value.copy(nt.matrix)),Se.aoMap?ft=Se.aoMap:Se.lightMap&&(ft=Se.lightMap),void 0!==ft&&(ft.isWebGLRenderTarget&&(ft=ft.texture),!0===ft.matrixAutoUpdate&&ft.updateMatrix(),Re.uv2Transform.value.copy(ft.matrix))}function he(Re,Se){Re.roughness.value=Se.roughness,Re.metalness.value=Se.metalness,Se.roughnessMap&&(Re.roughnessMap.value=Se.roughnessMap),Se.metalnessMap&&(Re.metalnessMap.value=Se.metalnessMap),Se.emissiveMap&&(Re.emissiveMap.value=Se.emissiveMap),Se.bumpMap&&(Re.bumpMap.value=Se.bumpMap,Re.bumpScale.value=Se.bumpScale,Se.side===W&&(Re.bumpScale.value*=-1)),Se.normalMap&&(Re.normalMap.value=Se.normalMap,Re.normalScale.value.copy(Se.normalScale),Se.side===W&&Re.normalScale.value.negate()),Se.displacementMap&&(Re.displacementMap.value=Se.displacementMap,Re.displacementScale.value=Se.displacementScale,Re.displacementBias.value=Se.displacementBias),x.get(Se).envMap&&(Re.envMapIntensity.value=Se.envMapIntensity)}return{refreshFogUniforms:function l(Re,Se){Re.fogColor.value.copy(Se.color),Se.isFog?(Re.fogNear.value=Se.near,Re.fogFar.value=Se.far):Se.isFogExp2&&(Re.fogDensity.value=Se.density)},refreshMaterialUniforms:function u(Re,Se,rt,nt){Se.isMeshBasicMaterial?w(Re,Se):Se.isMeshLambertMaterial?(w(Re,Se),function Q(Re,Se){Se.emissiveMap&&(Re.emissiveMap.value=Se.emissiveMap)}(Re,Se)):Se.isMeshToonMaterial?(w(Re,Se),function pe(Re,Se){Se.gradientMap&&(Re.gradientMap.value=Se.gradientMap),Se.emissiveMap&&(Re.emissiveMap.value=Se.emissiveMap),Se.bumpMap&&(Re.bumpMap.value=Se.bumpMap,Re.bumpScale.value=Se.bumpScale,Se.side===W&&(Re.bumpScale.value*=-1)),Se.normalMap&&(Re.normalMap.value=Se.normalMap,Re.normalScale.value.copy(Se.normalScale),Se.side===W&&Re.normalScale.value.negate()),Se.displacementMap&&(Re.displacementMap.value=Se.displacementMap,Re.displacementScale.value=Se.displacementScale,Re.displacementBias.value=Se.displacementBias)}(Re,Se)):Se.isMeshPhongMaterial?(w(Re,Se),function ee(Re,Se){Re.specular.value.copy(Se.specular),Re.shininess.value=Math.max(Se.shininess,1e-4),Se.emissiveMap&&(Re.emissiveMap.value=Se.emissiveMap),Se.bumpMap&&(Re.bumpMap.value=Se.bumpMap,Re.bumpScale.value=Se.bumpScale,Se.side===W&&(Re.bumpScale.value*=-1)),Se.normalMap&&(Re.normalMap.value=Se.normalMap,Re.normalScale.value.copy(Se.normalScale),Se.side===W&&Re.normalScale.value.negate()),Se.displacementMap&&(Re.displacementMap.value=Se.displacementMap,Re.displacementScale.value=Se.displacementScale,Re.displacementBias.value=Se.displacementBias)}(Re,Se)):Se.isMeshStandardMaterial?(w(Re,Se),Se.isMeshPhysicalMaterial?function me(Re,Se){he(Re,Se),Re.reflectivity.value=Se.reflectivity,Re.clearcoat.value=Se.clearcoat,Re.clearcoatRoughness.value=Se.clearcoatRoughness,Se.sheen&&Re.sheen.value.copy(Se.sheen),Se.clearcoatMap&&(Re.clearcoatMap.value=Se.clearcoatMap),Se.clearcoatRoughnessMap&&(Re.clearcoatRoughnessMap.value=Se.clearcoatRoughnessMap),Se.clearcoatNormalMap&&(Re.clearcoatNormalScale.value.copy(Se.clearcoatNormalScale),Re.clearcoatNormalMap.value=Se.clearcoatNormalMap,Se.side===W&&Re.clearcoatNormalScale.value.negate()),Re.transmission.value=Se.transmission,Se.transmissionMap&&(Re.transmissionMap.value=Se.transmissionMap)}(Re,Se):he(Re,Se)):Se.isMeshMatcapMaterial?(w(Re,Se),function be(Re,Se){Se.matcap&&(Re.matcap.value=Se.matcap),Se.bumpMap&&(Re.bumpMap.value=Se.bumpMap,Re.bumpScale.value=Se.bumpScale,Se.side===W&&(Re.bumpScale.value*=-1)),Se.normalMap&&(Re.normalMap.value=Se.normalMap,Re.normalScale.value.copy(Se.normalScale),Se.side===W&&Re.normalScale.value.negate()),Se.displacementMap&&(Re.displacementMap.value=Se.displacementMap,Re.displacementScale.value=Se.displacementScale,Re.displacementBias.value=Se.displacementBias)}(Re,Se)):Se.isMeshDepthMaterial?(w(Re,Se),function Ee(Re,Se){Se.displacementMap&&(Re.displacementMap.value=Se.displacementMap,Re.displacementScale.value=Se.displacementScale,Re.displacementBias.value=Se.displacementBias)}(Re,Se)):Se.isMeshDistanceMaterial?(w(Re,Se),function Fe(Re,Se){Se.displacementMap&&(Re.displacementMap.value=Se.displacementMap,Re.displacementScale.value=Se.displacementScale,Re.displacementBias.value=Se.displacementBias),Re.referencePosition.value.copy(Se.referencePosition),Re.nearDistance.value=Se.nearDistance,Re.farDistance.value=Se.farDistance}(Re,Se)):Se.isMeshNormalMaterial?(w(Re,Se),function He(Re,Se){Se.bumpMap&&(Re.bumpMap.value=Se.bumpMap,Re.bumpScale.value=Se.bumpScale,Se.side===W&&(Re.bumpScale.value*=-1)),Se.normalMap&&(Re.normalMap.value=Se.normalMap,Re.normalScale.value.copy(Se.normalScale),Se.side===W&&Re.normalScale.value.negate()),Se.displacementMap&&(Re.displacementMap.value=Se.displacementMap,Re.displacementScale.value=Se.displacementScale,Re.displacementBias.value=Se.displacementBias)}(Re,Se)):Se.isLineBasicMaterial?(function E(Re,Se){Re.diffuse.value.copy(Se.color),Re.opacity.value=Se.opacity}(Re,Se),Se.isLineDashedMaterial&&function R(Re,Se){Re.dashSize.value=Se.dashSize,Re.totalSize.value=Se.dashSize+Se.gapSize,Re.scale.value=Se.scale}(Re,Se)):Se.isPointsMaterial?function z(Re,Se,rt,nt){let ft;Re.diffuse.value.copy(Se.color),Re.opacity.value=Se.opacity,Re.size.value=Se.size*rt,Re.scale.value=.5*nt,Se.map&&(Re.map.value=Se.map),Se.alphaMap&&(Re.alphaMap.value=Se.alphaMap),Se.map?ft=Se.map:Se.alphaMap&&(ft=Se.alphaMap),void 0!==ft&&(!0===ft.matrixAutoUpdate&&ft.updateMatrix(),Re.uvTransform.value.copy(ft.matrix))}(Re,Se,rt,nt):Se.isSpriteMaterial?function Y(Re,Se){let rt;Re.diffuse.value.copy(Se.color),Re.opacity.value=Se.opacity,Re.rotation.value=Se.rotation,Se.map&&(Re.map.value=Se.map),Se.alphaMap&&(Re.alphaMap.value=Se.alphaMap),Se.map?rt=Se.map:Se.alphaMap&&(rt=Se.alphaMap),void 0!==rt&&(!0===rt.matrixAutoUpdate&&rt.updateMatrix(),Re.uvTransform.value.copy(rt.matrix))}(Re,Se):Se.isShadowMaterial?(Re.color.value.copy(Se.color),Re.opacity.value=Se.opacity):Se.isShaderMaterial&&(Se.uniformsNeedUpdate=!1)}}}function Xo(x){const l=void 0!==(x=x||{}).canvas?x.canvas:function Fu(){const x=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return x.style.display="block",x}(),u=void 0!==x.context?x.context:null,w=void 0!==x.alpha&&x.alpha,E=void 0===x.depth||x.depth,R=void 0===x.stencil||x.stencil,z=void 0!==x.antialias&&x.antialias,Y=void 0===x.premultipliedAlpha||x.premultipliedAlpha,Q=void 0!==x.preserveDrawingBuffer&&x.preserveDrawingBuffer,ee=void 0!==x.powerPreference?x.powerPreference:"default",pe=void 0!==x.failIfMajorPerformanceCaveat&&x.failIfMajorPerformanceCaveat;let he=null,me=null;const be=[],Ee=[];this.domElement=l,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=sl,this.physicallyCorrectLights=!1,this.toneMapping=tt,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const Fe=this;let He=!1,Re=null,Se=0,rt=0,nt=null,ft=null,et=-1,Tt=null;const Qt=new As,zt=new As;let Gt=null,cn=l.width,An=l.height,pn=1,Wt=null,an=null;const Tn=new As(0,0,cn,An),vi=new As(0,0,cn,An);let Gi=!1;const $i=new Lp;let Tr=!1,br=!1;const no=new hr,_s=new je,Oo={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Io(){return null===nt?pn:1}let _o,Mo,ss,No,_i,ni,Ri,kr,dr,wt,mt,oi,gi,qt,Mi,Qi,_r,wi,Xr,Qr,Ur,$n=u;function Aa(ut,On){for(let Dn=0;Dn<ut.length;Dn++){const Wi=l.getContext(ut[Dn],On);if(null!==Wi)return Wi}return null}try{const ut={alpha:w,depth:E,stencil:R,antialias:z,premultipliedAlpha:Y,preserveDrawingBuffer:Q,powerPreference:ee,failIfMajorPerformanceCaveat:pe};if(l.addEventListener("webglcontextlost",pu,!1),l.addEventListener("webglcontextrestored",PC,!1),null===$n){const On=["webgl2","webgl","experimental-webgl"];if(!0===Fe.isWebGL1Renderer&&On.shift(),$n=Aa(On,ut),null===$n)throw Aa(On)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===$n.getShaderPrecisionFormat&&($n.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ut){throw console.error("THREE.WebGLRenderer: "+ut.message),ut}function jr(){_o=new fx($n),Mo=new Ha($n,_o,x),_o.init(Mo),Qr=new nm($n,_o,Mo),ss=new DD($n,_o,Mo),ss.scissor(zt.copy(vi).multiplyScalar(pn).floor()),ss.viewport(Qt.copy(Tn).multiplyScalar(pn).floor()),No=new C($n),_i=new vD,ni=new AD($n,_o,ss,_i,Mo,Qr,No),Ri=new dx(Fe),kr=new vy($n,Mo),Ur=new Q_($n,_o,kr,Mo),dr=new gg($n,kr,No,Ur),wt=new oe($n,dr,kr,No),_r=new B($n),Mi=new xM(_i),mt=new _D(Fe,Ri,_o,Mo,Ur,Mi),oi=new vP(_i),gi=new Of(_i),qt=new SD(_o,Mo),Qi=new hx(Fe,Ri,ss,wt,Y),wi=new Ny($n,_o,No,Mo),Xr=new m($n,_o,No,Mo),No.programs=mt.programs,Fe.capabilities=Mo,Fe.extensions=_o,Fe.properties=_i,Fe.renderLists=gi,Fe.state=ss,Fe.info=No}jr();const Zr=new Mx(Fe,$n);this.xr=Zr;const nl=new wx(Fe,wt,Mo.maxTextureSize);function pu(ut){ut.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),He=!0}function PC(){console.log("THREE.WebGLRenderer: Context Restored."),He=!1,jr()}function LC(ut){const On=ut.target;On.removeEventListener("dispose",LC),function vA(ut){FC(ut),_i.remove(ut)}(On)}function FC(ut){const On=_i.get(ut).program;void 0!==On&&mt.releaseProgram(On)}this.shadowMap=nl,this.getContext=function(){return $n},this.getContextAttributes=function(){return $n.getContextAttributes()},this.forceContextLoss=function(){const ut=_o.get("WEBGL_lose_context");ut&&ut.loseContext()},this.forceContextRestore=function(){const ut=_o.get("WEBGL_lose_context");ut&&ut.restoreContext()},this.getPixelRatio=function(){return pn},this.setPixelRatio=function(ut){void 0!==ut&&(pn=ut,this.setSize(cn,An,!1))},this.getSize=function(ut){return void 0===ut&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),ut=new Bn),ut.set(cn,An)},this.setSize=function(ut,On,Dn){Zr.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(cn=ut,An=On,l.width=Math.floor(ut*pn),l.height=Math.floor(On*pn),!1!==Dn&&(l.style.width=ut+"px",l.style.height=On+"px"),this.setViewport(0,0,ut,On))},this.getDrawingBufferSize=function(ut){return void 0===ut&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),ut=new Bn),ut.set(cn*pn,An*pn).floor()},this.setDrawingBufferSize=function(ut,On,Dn){cn=ut,An=On,pn=Dn,l.width=Math.floor(ut*Dn),l.height=Math.floor(On*Dn),this.setViewport(0,0,ut,On)},this.getCurrentViewport=function(ut){return void 0===ut&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),ut=new As),ut.copy(Qt)},this.getViewport=function(ut){return ut.copy(Tn)},this.setViewport=function(ut,On,Dn,zn){ut.isVector4?Tn.set(ut.x,ut.y,ut.z,ut.w):Tn.set(ut,On,Dn,zn),ss.viewport(Qt.copy(Tn).multiplyScalar(pn).floor())},this.getScissor=function(ut){return ut.copy(vi)},this.setScissor=function(ut,On,Dn,zn){ut.isVector4?vi.set(ut.x,ut.y,ut.z,ut.w):vi.set(ut,On,Dn,zn),ss.scissor(zt.copy(vi).multiplyScalar(pn).floor())},this.getScissorTest=function(){return Gi},this.setScissorTest=function(ut){ss.setScissorTest(Gi=ut)},this.setOpaqueSort=function(ut){Wt=ut},this.setTransparentSort=function(ut){an=ut},this.getClearColor=function(ut){return void 0===ut&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),ut=new Ji),ut.copy(Qi.getClearColor())},this.setClearColor=function(){Qi.setClearColor.apply(Qi,arguments)},this.getClearAlpha=function(){return Qi.getClearAlpha()},this.setClearAlpha=function(){Qi.setClearAlpha.apply(Qi,arguments)},this.clear=function(ut,On,Dn){let zn=0;(void 0===ut||ut)&&(zn|=16384),(void 0===On||On)&&(zn|=256),(void 0===Dn||Dn)&&(zn|=1024),$n.clear(zn)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){l.removeEventListener("webglcontextlost",pu,!1),l.removeEventListener("webglcontextrestored",PC,!1),gi.dispose(),qt.dispose(),_i.dispose(),Ri.dispose(),wt.dispose(),Ur.dispose(),Zr.dispose(),Fv.stop()},this.renderBufferImmediate=function(ut,On){Ur.initAttributes();const Dn=_i.get(ut);ut.hasPositions&&!Dn.position&&(Dn.position=$n.createBuffer()),ut.hasNormals&&!Dn.normal&&(Dn.normal=$n.createBuffer()),ut.hasUvs&&!Dn.uv&&(Dn.uv=$n.createBuffer()),ut.hasColors&&!Dn.color&&(Dn.color=$n.createBuffer());const zn=On.getAttributes();ut.hasPositions&&($n.bindBuffer(34962,Dn.position),$n.bufferData(34962,ut.positionArray,35048),Ur.enableAttribute(zn.position),$n.vertexAttribPointer(zn.position,3,5126,!1,0,0)),ut.hasNormals&&($n.bindBuffer(34962,Dn.normal),$n.bufferData(34962,ut.normalArray,35048),Ur.enableAttribute(zn.normal),$n.vertexAttribPointer(zn.normal,3,5126,!1,0,0)),ut.hasUvs&&($n.bindBuffer(34962,Dn.uv),$n.bufferData(34962,ut.uvArray,35048),Ur.enableAttribute(zn.uv),$n.vertexAttribPointer(zn.uv,2,5126,!1,0,0)),ut.hasColors&&($n.bindBuffer(34962,Dn.color),$n.bufferData(34962,ut.colorArray,35048),Ur.enableAttribute(zn.color),$n.vertexAttribPointer(zn.color,3,5126,!1,0,0)),Ur.disableUnusedAttributes(),$n.drawArrays(4,0,ut.count),ut.count=0},this.renderBufferDirect=function(ut,On,Dn,zn,Wi,Hs){null===On&&(On=Oo);const hs=Wi.isMesh&&Wi.matrixWorld.determinant()<0,zs=Bw(ut,On,zn,Wi);ss.setMaterial(zn,hs);let xs=Dn.index;const xl=Dn.attributes.position;if(null===xs){if(void 0===xl||0===xl.count)return}else if(0===xs.count)return;let Ks=1;!0===zn.wireframe&&(xs=dr.getWireframeAttribute(Dn),Ks=2),(zn.morphTargets||zn.morphNormals)&&_r.update(Wi,Dn,zn,zs),Ur.setup(Wi,zn,zs,Dn,xs);let Vs,Bo=wi;null!==xs&&(Vs=kr.get(xs),Bo=Xr,Bo.setIndex(Vs));const ih=null!==xs?xs.count:xl.count,Ia=Dn.drawRange.start*Ks,Pi=Dn.drawRange.count*Ks,oc=null!==Hs?Hs.start*Ks:0,Hw=null!==Hs?Hs.count*Ks:1/0,mu=Math.max(Ia,oc),ap=Math.min(ih,Ia+Pi,oc+Hw)-1,Qg=Math.max(0,ap-mu+1);if(0!==Qg){if(Wi.isMesh)!0===zn.wireframe?(ss.setLineWidth(zn.wireframeLinewidth*Io()),Bo.setMode(1)):Bo.setMode(4);else if(Wi.isLine){let lp=zn.linewidth;void 0===lp&&(lp=1),ss.setLineWidth(lp*Io()),Bo.setMode(Wi.isLineSegments?1:Wi.isLineLoop?2:3)}else Wi.isPoints?Bo.setMode(0):Wi.isSprite&&Bo.setMode(4);if(Wi.isInstancedMesh)Bo.renderInstances(mu,Qg,Wi.count);else if(Dn.isInstancedBufferGeometry){const lp=Math.min(Dn.instanceCount,Dn._maxInstanceCount);Bo.renderInstances(mu,Qg,lp)}else Bo.render(mu,Qg)}},this.compile=function(ut,On){me=qt.get(ut),me.init(),ut.traverseVisible(function(zn){zn.isLight&&zn.layers.test(On.layers)&&(me.pushLight(zn),zn.castShadow&&me.pushShadow(zn))}),me.setupLights();const Dn=new WeakMap;ut.traverse(function(zn){const Wi=zn.material;if(Wi)if(Array.isArray(Wi))for(let Hs=0;Hs<Wi.length;Hs++){const hs=Wi[Hs];!1===Dn.has(hs)&&(ld(hs,ut,zn),Dn.set(hs))}else!1===Dn.has(Wi)&&(ld(Wi,ut,zn),Dn.set(Wi))})};let Fw=null;const Fv=new Fp;function OC(ut,On,Dn,zn){if(!1===ut.visible)return;if(ut.layers.test(On.layers))if(ut.isGroup)Dn=ut.renderOrder;else if(ut.isLOD)!0===ut.autoUpdate&&ut.update(On);else if(ut.isLight)me.pushLight(ut),ut.castShadow&&me.pushShadow(ut);else if(ut.isSprite){if(!ut.frustumCulled||$i.intersectsSprite(ut)){zn&&_s.setFromMatrixPosition(ut.matrixWorld).applyMatrix4(no);const hs=wt.update(ut),zs=ut.material;zs.visible&&he.push(ut,hs,zs,Dn,_s.z,null)}}else if(ut.isImmediateRenderObject)zn&&_s.setFromMatrixPosition(ut.matrixWorld).applyMatrix4(no),he.push(ut,null,ut.material,Dn,_s.z,null);else if((ut.isMesh||ut.isLine||ut.isPoints)&&(ut.isSkinnedMesh&&ut.skeleton.frame!==No.render.frame&&(ut.skeleton.update(),ut.skeleton.frame=No.render.frame),!ut.frustumCulled||$i.intersectsObject(ut))){zn&&_s.setFromMatrixPosition(ut.matrixWorld).applyMatrix4(no);const hs=wt.update(ut),zs=ut.material;if(Array.isArray(zs)){const xs=hs.groups;for(let xl=0,Ks=xs.length;xl<Ks;xl++){const Vs=xs[xl],Bo=zs[Vs.materialIndex];Bo&&Bo.visible&&he.push(ut,hs,Bo,Dn,_s.z,Vs)}}else zs.visible&&he.push(ut,hs,zs,Dn,_s.z,null)}const Hs=ut.children;for(let hs=0,zs=Hs.length;hs<zs;hs++)OC(Hs[hs],On,Dn,zn)}function Ow(ut,On,Dn){const zn=!0===On.isScene?On.overrideMaterial:null;for(let Wi=0,Hs=ut.length;Wi<Hs;Wi++){const hs=ut[Wi],zs=hs.object,xs=hs.geometry,xl=null===zn?hs.material:zn,Ks=hs.group;if(Dn.isArrayCamera){const Vs=Dn.cameras;for(let Bo=0,ih=Vs.length;Bo<ih;Bo++){const Ia=Vs[Bo];zs.layers.test(Ia.layers)&&(ss.viewport(Qt.copy(Ia.viewport)),me.setupLightsView(Ia),Nw(zs,On,Ia,xs,xl,Ks))}}else Nw(zs,On,Dn,xs,xl,Ks)}}function Nw(ut,On,Dn,zn,Wi,Hs){if(ut.onBeforeRender(Fe,On,Dn,zn,Wi,Hs),ut.modelViewMatrix.multiplyMatrices(Dn.matrixWorldInverse,ut.matrixWorld),ut.normalMatrix.getNormalMatrix(ut.modelViewMatrix),ut.isImmediateRenderObject){const hs=Bw(Dn,On,Wi,ut);ss.setMaterial(Wi),Ur.reset(),function yA(ut,On){ut.render(function(Dn){Fe.renderBufferImmediate(Dn,On)})}(ut,hs)}else Fe.renderBufferDirect(Dn,On,zn,Wi,ut,Hs);ut.onAfterRender(Fe,On,Dn,zn,Wi,Hs)}function ld(ut,On,Dn){!0!==On.isScene&&(On=Oo);const zn=_i.get(ut),Wi=me.state.lights,hs=Wi.state.version,zs=mt.getParameters(ut,Wi.state,me.state.shadowsArray,On,Dn),xs=mt.getProgramCacheKey(zs);let xl=zn.program,Ks=!0;if(zn.environment=ut.isMeshStandardMaterial?On.environment:null,zn.fog=On.fog,zn.envMap=Ri.get(ut.envMap||zn.environment),void 0===xl)ut.addEventListener("dispose",LC);else if(xl.cacheKey!==xs)FC(ut);else if(zn.lightsStateVersion!==hs)Ks=!1;else{if(void 0!==zs.shaderID)return;Ks=!1}Ks&&(zs.uniforms=mt.getUniforms(ut),ut.onBeforeCompile(zs,Fe),xl=mt.acquireProgram(zs,xs),zn.program=xl,zn.uniforms=zs.uniforms,zn.outputEncoding=zs.outputEncoding);const Vs=zn.uniforms;(!ut.isShaderMaterial&&!ut.isRawShaderMaterial||!0===ut.clipping)&&(zn.numClippingPlanes=Mi.numPlanes,zn.numIntersection=Mi.numIntersection,Vs.clippingPlanes=Mi.uniform),zn.needsLights=function BC(ut){return ut.isMeshLambertMaterial||ut.isMeshToonMaterial||ut.isMeshPhongMaterial||ut.isMeshStandardMaterial||ut.isShadowMaterial||ut.isShaderMaterial&&!0===ut.lights}(ut),zn.lightsStateVersion=hs,zn.needsLights&&(Vs.ambientLightColor.value=Wi.state.ambient,Vs.lightProbe.value=Wi.state.probe,Vs.directionalLights.value=Wi.state.directional,Vs.directionalLightShadows.value=Wi.state.directionalShadow,Vs.spotLights.value=Wi.state.spot,Vs.spotLightShadows.value=Wi.state.spotShadow,Vs.rectAreaLights.value=Wi.state.rectArea,Vs.ltc_1.value=Wi.state.rectAreaLTC1,Vs.ltc_2.value=Wi.state.rectAreaLTC2,Vs.pointLights.value=Wi.state.point,Vs.pointLightShadows.value=Wi.state.pointShadow,Vs.hemisphereLights.value=Wi.state.hemi,Vs.directionalShadowMap.value=Wi.state.directionalShadowMap,Vs.directionalShadowMatrix.value=Wi.state.directionalShadowMatrix,Vs.spotShadowMap.value=Wi.state.spotShadowMap,Vs.spotShadowMatrix.value=Wi.state.spotShadowMatrix,Vs.pointShadowMap.value=Wi.state.pointShadowMap,Vs.pointShadowMatrix.value=Wi.state.pointShadowMatrix);const Bo=zn.program.getUniforms(),ih=Ff.seqWithValue(Bo.seq,Vs);zn.uniformsList=ih}function Bw(ut,On,Dn,zn){!0!==On.isScene&&(On=Oo),ni.resetTextureUnits();const Wi=On.fog,Hs=Dn.isMeshStandardMaterial?On.environment:null,hs=null===nt?Fe.outputEncoding:nt.texture.encoding,zs=Ri.get(Dn.envMap||Hs),xs=_i.get(Dn),xl=me.state.lights;!0!==Tr||!0!==br&&ut===Tt||Mi.setState(Dn,ut,ut===Tt&&Dn.id===et),Dn.version===xs.__version?(Dn.fog&&xs.fog!==Wi||xs.environment!==Hs||xs.needsLights&&xs.lightsStateVersion!==xl.state.version||void 0!==xs.numClippingPlanes&&(xs.numClippingPlanes!==Mi.numPlanes||xs.numIntersection!==Mi.numIntersection)||xs.outputEncoding!==hs||xs.envMap!==zs)&&ld(Dn,On,zn):(ld(Dn,On,zn),xs.__version=Dn.version);let Ks=!1,Vs=!1,Bo=!1;const ih=xs.program,Ia=ih.getUniforms(),Pi=xs.uniforms;if(ss.useProgram(ih.program)&&(Ks=!0,Vs=!0,Bo=!0),Dn.id!==et&&(et=Dn.id,Vs=!0),Ks||Tt!==ut){if(Ia.setValue($n,"projectionMatrix",ut.projectionMatrix),Mo.logarithmicDepthBuffer&&Ia.setValue($n,"logDepthBufFC",2/(Math.log(ut.far+1)/Math.LN2)),Tt!==ut&&(Tt=ut,Vs=!0,Bo=!0),Dn.isShaderMaterial||Dn.isMeshPhongMaterial||Dn.isMeshToonMaterial||Dn.isMeshStandardMaterial||Dn.envMap){const oc=Ia.map.cameraPosition;void 0!==oc&&oc.setValue($n,_s.setFromMatrixPosition(ut.matrixWorld))}(Dn.isMeshPhongMaterial||Dn.isMeshToonMaterial||Dn.isMeshLambertMaterial||Dn.isMeshBasicMaterial||Dn.isMeshStandardMaterial||Dn.isShaderMaterial)&&Ia.setValue($n,"isOrthographic",!0===ut.isOrthographicCamera),(Dn.isMeshPhongMaterial||Dn.isMeshToonMaterial||Dn.isMeshLambertMaterial||Dn.isMeshBasicMaterial||Dn.isMeshStandardMaterial||Dn.isShaderMaterial||Dn.isShadowMaterial||Dn.skinning)&&Ia.setValue($n,"viewMatrix",ut.matrixWorldInverse)}if(Dn.skinning){Ia.setOptional($n,zn,"bindMatrix"),Ia.setOptional($n,zn,"bindMatrixInverse");const oc=zn.skeleton;if(oc){const Hw=oc.bones;if(Mo.floatVertexTextures){if(null===oc.boneTexture){let mu=Math.sqrt(4*Hw.length);mu=Ui.ceilPowerOfTwo(mu),mu=Math.max(mu,4);const ap=new Float32Array(mu*mu*4);ap.set(oc.boneMatrices);const Qg=new Bd(ap,mu,mu,gn,gt);oc.boneMatrices=ap,oc.boneTexture=Qg,oc.boneTextureSize=mu}Ia.setValue($n,"boneTexture",oc.boneTexture,ni),Ia.setValue($n,"boneTextureSize",oc.boneTextureSize)}else Ia.setOptional($n,oc,"boneMatrices")}}return(Vs||xs.receiveShadow!==zn.receiveShadow)&&(xs.receiveShadow=zn.receiveShadow,Ia.setValue($n,"receiveShadow",zn.receiveShadow)),Vs&&(Ia.setValue($n,"toneMappingExposure",Fe.toneMappingExposure),xs.needsLights&&function NC(ut,On){ut.ambientLightColor.needsUpdate=On,ut.lightProbe.needsUpdate=On,ut.directionalLights.needsUpdate=On,ut.directionalLightShadows.needsUpdate=On,ut.pointLights.needsUpdate=On,ut.pointLightShadows.needsUpdate=On,ut.spotLights.needsUpdate=On,ut.spotLightShadows.needsUpdate=On,ut.rectAreaLights.needsUpdate=On,ut.hemisphereLights.needsUpdate=On}(Pi,Bo),Wi&&Dn.fog&&oi.refreshFogUniforms(Pi,Wi),oi.refreshMaterialUniforms(Pi,Dn,pn,An),Ff.upload($n,xs.uniformsList,Pi,ni)),Dn.isShaderMaterial&&!0===Dn.uniformsNeedUpdate&&(Ff.upload($n,xs.uniformsList,Pi,ni),Dn.uniformsNeedUpdate=!1),Dn.isSpriteMaterial&&Ia.setValue($n,"center",zn.center),Ia.setValue($n,"modelViewMatrix",zn.modelViewMatrix),Ia.setValue($n,"normalMatrix",zn.normalMatrix),Ia.setValue($n,"modelMatrix",zn.matrixWorld),ih}Fv.setAnimationLoop(function bA(ut){Zr.isPresenting||Fw&&Fw(ut)}),"undefined"!=typeof window&&Fv.setContext(window),this.setAnimationLoop=function(ut){Fw=ut,Zr.setAnimationLoop(ut),null===ut?Fv.stop():Fv.start()},this.render=function(ut,On){let Dn,zn;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),Dn=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),zn=arguments[3]),void 0!==On&&!0!==On.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===He)return;Ur.resetDefaultState(),et=-1,Tt=null,!0===ut.autoUpdate&&ut.updateMatrixWorld(),null===On.parent&&On.updateMatrixWorld(),!0===Zr.enabled&&!0===Zr.isPresenting&&(On=Zr.getCamera(On)),!0===ut.isScene&&ut.onBeforeRender(Fe,ut,On,Dn||nt),me=qt.get(ut,Ee.length),me.init(),Ee.push(me),no.multiplyMatrices(On.projectionMatrix,On.matrixWorldInverse),$i.setFromProjectionMatrix(no),br=this.localClippingEnabled,Tr=Mi.init(this.clippingPlanes,br,On),he=gi.get(ut,be.length),he.init(),be.push(he),OC(ut,On,0,Fe.sortObjects),he.finish(),!0===Fe.sortObjects&&he.sort(Wt,an),!0===Tr&&Mi.beginShadows();const Wi=me.state.shadowsArray;nl.render(Wi,ut,On),me.setupLights(),me.setupLightsView(On),!0===Tr&&Mi.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==Dn&&this.setRenderTarget(Dn),Qi.render(he,ut,On,zn);const Hs=he.opaque,hs=he.transparent;Hs.length>0&&Ow(Hs,ut,On),hs.length>0&&Ow(hs,ut,On),!0===ut.isScene&&ut.onAfterRender(Fe,ut,On),null!==nt&&(ni.updateRenderTargetMipmap(nt),ni.updateMultisampleRenderTarget(nt)),ss.buffers.depth.setTest(!0),ss.buffers.depth.setMask(!0),ss.buffers.color.setMask(!0),ss.setPolygonOffset(!1),Ee.pop(),me=Ee.length>0?Ee[Ee.length-1]:null,be.pop(),he=be.length>0?be[be.length-1]:null},this.setFramebuffer=function(ut){Re!==ut&&null===nt&&$n.bindFramebuffer(36160,ut),Re=ut},this.getActiveCubeFace=function(){return Se},this.getActiveMipmapLevel=function(){return rt},this.getRenderTarget=function(){return nt},this.setRenderTarget=function(ut,On=0,Dn=0){nt=ut,Se=On,rt=Dn,ut&&void 0===_i.get(ut).__webglFramebuffer&&ni.setupRenderTarget(ut);let zn=Re,Wi=!1,Hs=!1;if(ut){const hs=ut.texture;(hs.isDataTexture3D||hs.isDataTexture2DArray)&&(Hs=!0);const zs=_i.get(ut).__webglFramebuffer;ut.isWebGLCubeRenderTarget?(zn=zs[On],Wi=!0):zn=ut.isWebGLMultisampleRenderTarget?_i.get(ut).__webglMultisampledFramebuffer:zs,Qt.copy(ut.viewport),zt.copy(ut.scissor),Gt=ut.scissorTest}else Qt.copy(Tn).multiplyScalar(pn).floor(),zt.copy(vi).multiplyScalar(pn).floor(),Gt=Gi;if(ft!==zn&&($n.bindFramebuffer(36160,zn),ft=zn),ss.viewport(Qt),ss.scissor(zt),ss.setScissorTest(Gt),Wi){const hs=_i.get(ut.texture);$n.framebufferTexture2D(36160,36064,34069+On,hs.__webglTexture,Dn)}else if(Hs){const hs=_i.get(ut.texture);$n.framebufferTextureLayer(36160,36064,hs.__webglTexture,Dn||0,On||0)}},this.readRenderTargetPixels=function(ut,On,Dn,zn,Wi,Hs,hs){if(!ut||!ut.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let zs=_i.get(ut).__webglFramebuffer;if(ut.isWebGLCubeRenderTarget&&void 0!==hs&&(zs=zs[hs]),zs){let xs=!1;zs!==ft&&($n.bindFramebuffer(36160,zs),xs=!0);try{const xl=ut.texture,Ks=xl.format,Vs=xl.type;if(Ks!==gn&&Qr.convert(Ks)!==$n.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Bo=Vs===xt&&(_o.has("EXT_color_buffer_half_float")||Mo.isWebGL2&&_o.has("EXT_color_buffer_float"));if(!(Vs===Z||Qr.convert(Vs)===$n.getParameter(35738)||Vs===gt&&(Mo.isWebGL2||_o.has("OES_texture_float")||_o.has("WEBGL_color_buffer_float"))||Bo))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===$n.checkFramebufferStatus(36160)?On>=0&&On<=ut.width-zn&&Dn>=0&&Dn<=ut.height-Wi&&$n.readPixels(On,Dn,zn,Wi,Qr.convert(Ks),Qr.convert(Vs),Hs):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{xs&&$n.bindFramebuffer(36160,ft)}}},this.copyFramebufferToTexture=function(ut,On,Dn=0){const zn=Math.pow(2,-Dn),Wi=Math.floor(On.image.width*zn),Hs=Math.floor(On.image.height*zn),hs=Qr.convert(On.format);ni.setTexture2D(On,0),$n.copyTexImage2D(3553,Dn,hs,ut.x,ut.y,Wi,Hs,0),ss.unbindTexture()},this.copyTextureToTexture=function(ut,On,Dn,zn=0){const Wi=On.image.width,Hs=On.image.height,hs=Qr.convert(Dn.format),zs=Qr.convert(Dn.type);ni.setTexture2D(Dn,0),$n.pixelStorei(37440,Dn.flipY),$n.pixelStorei(37441,Dn.premultiplyAlpha),$n.pixelStorei(3317,Dn.unpackAlignment),On.isDataTexture?$n.texSubImage2D(3553,zn,ut.x,ut.y,Wi,Hs,hs,zs,On.image.data):On.isCompressedTexture?$n.compressedTexSubImage2D(3553,zn,ut.x,ut.y,On.mipmaps[0].width,On.mipmaps[0].height,hs,On.mipmaps[0].data):$n.texSubImage2D(3553,zn,ut.x,ut.y,hs,zs,On.image),0===zn&&Dn.generateMipmaps&&$n.generateMipmap(3553),ss.unbindTexture()},this.copyTextureToTexture3D=function(ut,On,Dn,zn,Wi=0){if(Fe.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const{width:Hs,height:hs,data:zs}=Dn.image,xs=Qr.convert(zn.format),xl=Qr.convert(zn.type);let Ks;if(zn.isDataTexture3D)ni.setTexture3D(zn,0),Ks=32879;else{if(!zn.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ni.setTexture2DArray(zn,0),Ks=35866}$n.pixelStorei(37440,zn.flipY),$n.pixelStorei(37441,zn.premultiplyAlpha),$n.pixelStorei(3317,zn.unpackAlignment);const Vs=$n.getParameter(3314),Bo=$n.getParameter(32878),ih=$n.getParameter(3316),Ia=$n.getParameter(3315),Pi=$n.getParameter(32877);$n.pixelStorei(3314,Hs),$n.pixelStorei(32878,hs),$n.pixelStorei(3316,ut.min.x),$n.pixelStorei(3315,ut.min.y),$n.pixelStorei(32877,ut.min.z),$n.texSubImage3D(Ks,Wi,On.x,On.y,On.z,ut.max.x-ut.min.x+1,ut.max.y-ut.min.y+1,ut.max.z-ut.min.z+1,xs,xl,zs),$n.pixelStorei(3314,Vs),$n.pixelStorei(32878,Bo),$n.pixelStorei(3316,ih),$n.pixelStorei(3315,Ia),$n.pixelStorei(32877,Pi),0===Wi&&zn.generateMipmaps&&$n.generateMipmap(Ks),ss.unbindTexture()},this.initTexture=function(ut){ni.setTexture2D(ut,0),ss.unbindTexture()},this.resetState=function(){ss.reset(),Ur.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}vg.prototype.isGroup=!0,Object.assign(Uy.prototype,{constructor:Uy,getHandSpace:function(){return null===this._hand&&(this._hand=new vg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new vg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new vg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(x){return null!==this._targetRay&&this._targetRay.dispatchEvent(x),null!==this._grip&&this._grip.dispatchEvent(x),null!==this._hand&&this._hand.dispatchEvent(x),this},disconnect:function(x){return this.dispatchEvent({type:"disconnected",data:x}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(x,l,u){let w=null,E=null,R=null;const z=this._targetRay,Y=this._grip,Q=this._hand;if(x&&"visible-blurred"!==l.session.visibilityState)if(Q&&x.hand){R=!0;for(const Ee of x.hand.values()){const Fe=l.getJointPose(Ee,u);if(void 0===Q.joints[Ee.jointName]){const Re=new vg;Re.matrixAutoUpdate=!1,Re.visible=!1,Q.joints[Ee.jointName]=Re,Q.add(Re)}const He=Q.joints[Ee.jointName];null!==Fe&&(He.matrix.fromArray(Fe.transform.matrix),He.matrix.decompose(He.position,He.rotation,He.scale),He.jointRadius=Fe.radius),He.visible=null!==Fe}const he=Q.joints["index-finger-tip"].position.distanceTo(Q.joints["thumb-tip"].position),me=.02,be=.005;Q.inputState.pinching&&he>me+be?(Q.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:x.handedness,target:this})):!Q.inputState.pinching&&he<=me-be&&(Q.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:x.handedness,target:this}))}else null!==z&&(w=l.getPose(x.targetRaySpace,u),null!==w&&(z.matrix.fromArray(w.transform.matrix),z.matrix.decompose(z.position,z.rotation,z.scale))),null!==Y&&x.gripSpace&&(E=l.getPose(x.gripSpace,u),null!==E&&(Y.matrix.fromArray(E.transform.matrix),Y.matrix.decompose(Y.position,Y.rotation,Y.scale)));return null!==z&&(z.visible=null!==w),null!==Y&&(Y.visible=null!==E),null!==Q&&(Q.visible=null!==R),this}}),Object.assign(Mx.prototype,pl.prototype);class Gy extends Xo{}Gy.prototype.isWebGL1Renderer=!0;class rv{constructor(l,u){this.name="",this.color=new Ji(l),this.density=void 0!==u?u:25e-5}clone(){return new rv(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}rv.prototype.isFogExp2=!0;class yg{constructor(l,u,w){this.name="",this.color=new Ji(l),this.near=void 0!==u?u:1,this.far=void 0!==w?w:1e3}clone(){return new yg(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}yg.prototype.isFog=!0;class Nf extends xi{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(l,u){return super.copy(l,u),null!==l.background&&(this.background=l.background.clone()),null!==l.environment&&(this.environment=l.environment.clone()),null!==l.fog&&(this.fog=l.fog.clone()),null!==l.overrideMaterial&&(this.overrideMaterial=l.overrideMaterial.clone()),this.autoUpdate=l.autoUpdate,this.matrixAutoUpdate=l.matrixAutoUpdate,this}toJSON(l){const u=super.toJSON(l);return null!==this.background&&(u.object.background=this.background.toJSON(l)),null!==this.environment&&(u.object.environment=this.environment.toJSON(l)),null!==this.fog&&(u.object.fog=this.fog.toJSON()),u}}function Jc(x,l){this.array=x,this.stride=l,this.count=void 0!==x?x.length/l:0,this.usage=ko,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ui.generateUUID()}Nf.prototype.isScene=!0,Object.defineProperty(Jc.prototype,"needsUpdate",{set:function(x){!0===x&&this.version++}}),Object.assign(Jc.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(x){return this.usage=x,this},copy:function(x){return this.array=new x.array.constructor(x.array),this.count=x.count,this.stride=x.stride,this.usage=x.usage,this},copyAt:function(x,l,u){x*=this.stride,u*=l.stride;for(let w=0,E=this.stride;w<E;w++)this.array[x+w]=l.array[u+w];return this},set:function(x,l=0){return this.array.set(x,l),this},clone:function(x){void 0===x.arrayBuffers&&(x.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ui.generateUUID()),void 0===x.arrayBuffers[this.array.buffer._uuid]&&(x.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const u=new Jc(new this.array.constructor(x.arrayBuffers[this.array.buffer._uuid]),this.stride);return u.setUsage(this.usage),u},onUpload:function(x){return this.onUploadCallback=x,this},toJSON:function(x){return void 0===x.arrayBuffers&&(x.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ui.generateUUID()),void 0===x.arrayBuffers[this.array.buffer._uuid]&&(x.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const Bf=new je;function Kh(x,l,u,w){this.name="",this.data=x,this.itemSize=l,this.offset=u,this.normalized=!0===w}Object.defineProperties(Kh.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(x){this.data.needsUpdate=x}}}),Object.assign(Kh.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(x){for(let l=0,u=this.data.count;l<u;l++)Bf.x=this.getX(l),Bf.y=this.getY(l),Bf.z=this.getZ(l),Bf.applyMatrix4(x),this.setXYZ(l,Bf.x,Bf.y,Bf.z);return this},setX:function(x,l){return this.data.array[x*this.data.stride+this.offset]=l,this},setY:function(x,l){return this.data.array[x*this.data.stride+this.offset+1]=l,this},setZ:function(x,l){return this.data.array[x*this.data.stride+this.offset+2]=l,this},setW:function(x,l){return this.data.array[x*this.data.stride+this.offset+3]=l,this},getX:function(x){return this.data.array[x*this.data.stride+this.offset]},getY:function(x){return this.data.array[x*this.data.stride+this.offset+1]},getZ:function(x){return this.data.array[x*this.data.stride+this.offset+2]},getW:function(x){return this.data.array[x*this.data.stride+this.offset+3]},setXY:function(x,l,u){return this.data.array[(x=x*this.data.stride+this.offset)+0]=l,this.data.array[x+1]=u,this},setXYZ:function(x,l,u,w){return this.data.array[(x=x*this.data.stride+this.offset)+0]=l,this.data.array[x+1]=u,this.data.array[x+2]=w,this},setXYZW:function(x,l,u,w,E){return this.data.array[(x=x*this.data.stride+this.offset)+0]=l,this.data.array[x+1]=u,this.data.array[x+2]=w,this.data.array[x+3]=E,this},clone:function(x){if(void 0===x){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const l=[];for(let u=0;u<this.count;u++){const w=u*this.data.stride+this.offset;for(let E=0;E<this.itemSize;E++)l.push(this.data.array[w+E])}return new zr(new this.array.constructor(l),this.itemSize,this.normalized)}return void 0===x.interleavedBuffers&&(x.interleavedBuffers={}),void 0===x.interleavedBuffers[this.data.uuid]&&(x.interleavedBuffers[this.data.uuid]=this.data.clone(x)),new Kh(x.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(x){if(void 0===x){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const l=[];for(let u=0;u<this.count;u++){const w=u*this.data.stride+this.offset;for(let E=0;E<this.itemSize;E++)l.push(this.data.array[w+E])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:l,normalized:this.normalized}}return void 0===x.interleavedBuffers&&(x.interleavedBuffers={}),void 0===x.interleavedBuffers[this.data.uuid]&&(x.interleavedBuffers[this.data.uuid]=this.data.toJSON(x)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});class bg extends qo{constructor(l){super(),this.type="SpriteMaterial",this.color=new Ji(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(l)}copy(l){return super.copy(l),this.color.copy(l.color),this.map=l.map,this.alphaMap=l.alphaMap,this.rotation=l.rotation,this.sizeAttenuation=l.sizeAttenuation,this}}let im;bg.prototype.isSpriteMaterial=!0;const Wy=new je,xh=new je,Hf=new je,rm=new Bn,sv=new Bn,qy=new hr,jy=new je,ov=new je,Zy=new je,LM=new Bn,Cx=new Bn,FM=new Bn;class av extends xi{constructor(l){if(super(),this.type="Sprite",void 0===im){im=new yr;const w=new Jc(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);im.setIndex([0,1,2,0,2,3]),im.setAttribute("position",new Kh(w,3,0,!1)),im.setAttribute("uv",new Kh(w,2,3,!1))}this.geometry=im,this.material=void 0!==l?l:new bg,this.center=new Bn(.5,.5)}raycast(l,u){null===l.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),xh.setFromMatrixScale(this.matrixWorld),qy.copy(l.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(l.camera.matrixWorldInverse,this.matrixWorld),Hf.setFromMatrixPosition(this.modelViewMatrix),l.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&xh.multiplyScalar(-Hf.z);const w=this.material.rotation;let E,R;0!==w&&(R=Math.cos(w),E=Math.sin(w));const z=this.center;xg(jy.set(-.5,-.5,0),Hf,z,xh,E,R),xg(ov.set(.5,-.5,0),Hf,z,xh,E,R),xg(Zy.set(.5,.5,0),Hf,z,xh,E,R),LM.set(0,0),Cx.set(1,0),FM.set(1,1);let Y=l.ray.intersectTriangle(jy,ov,Zy,!1,Wy);if(null===Y&&(xg(ov.set(-.5,.5,0),Hf,z,xh,E,R),Cx.set(0,1),Y=l.ray.intersectTriangle(jy,Zy,ov,!1,Wy),null===Y))return;const Q=l.ray.origin.distanceTo(Wy);Q<l.near||Q>l.far||u.push({distance:Q,point:Wy.clone(),uv:Ma.getUV(Wy,jy,ov,Zy,LM,Cx,FM,new Bn),face:null,object:this})}copy(l){return super.copy(l),void 0!==l.center&&this.center.copy(l.center),this.material=l.material,this}}function xg(x,l,u,w,E,R){rm.subVectors(x,u).addScalar(.5).multiply(w),void 0!==E?(sv.x=R*rm.x-E*rm.y,sv.y=E*rm.x+R*rm.y):sv.copy(rm),x.copy(l),x.x+=sv.x,x.y+=sv.y,x.applyMatrix4(qy)}av.prototype.isSprite=!0;const lv=new je,Yy=new je;class Sx extends xi{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(l){super.copy(l,!1);const u=l.levels;for(let w=0,E=u.length;w<E;w++){const R=u[w];this.addLevel(R.object.clone(),R.distance)}return this.autoUpdate=l.autoUpdate,this}addLevel(l,u=0){u=Math.abs(u);const w=this.levels;let E;for(E=0;E<w.length&&!(u<w[E].distance);E++);return w.splice(E,0,{distance:u,object:l}),this.add(l),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(l){const u=this.levels;if(u.length>0){let w,E;for(w=1,E=u.length;w<E&&!(l<u[w].distance);w++);return u[w-1].object}return null}raycast(l,u){if(this.levels.length>0){lv.setFromMatrixPosition(this.matrixWorld);const E=l.ray.origin.distanceTo(lv);this.getObjectForDistance(E).raycast(l,u)}}update(l){const u=this.levels;if(u.length>1){lv.setFromMatrixPosition(l.matrixWorld),Yy.setFromMatrixPosition(this.matrixWorld);const w=lv.distanceTo(Yy)/l.zoom;let E,R;for(u[0].object.visible=!0,E=1,R=u.length;E<R&&w>=u[E].distance;E++)u[E-1].object.visible=!1,u[E].object.visible=!0;for(this._currentLevel=E-1;E<R;E++)u[E].object.visible=!1}}toJSON(l){const u=super.toJSON(l);!1===this.autoUpdate&&(u.object.autoUpdate=!1),u.object.levels=[];const w=this.levels;for(let E=0,R=w.length;E<R;E++){const z=w[E];u.object.levels.push({object:z.object.uuid,distance:z.distance})}return u}}const OM=new je,Ex=new As,Tx=new As,sm=new je,Dx=new hr;function wg(x,l){to.call(this,x,l),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new hr,this.bindMatrixInverse=new hr}function cv(){xi.call(this),this.type="Bone"}wg.prototype=Object.assign(Object.create(to.prototype),{constructor:wg,isSkinnedMesh:!0,copy:function(x){return to.prototype.copy.call(this,x),this.bindMode=x.bindMode,this.bindMatrix.copy(x.bindMatrix),this.bindMatrixInverse.copy(x.bindMatrixInverse),this.skeleton=x.skeleton,this},bind:function(x,l){this.skeleton=x,void 0===l&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),l=this.matrixWorld),this.bindMatrix.copy(l),this.bindMatrixInverse.copy(l).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const x=new As,l=this.geometry.attributes.skinWeight;for(let u=0,w=l.count;u<w;u++){x.x=l.getX(u),x.y=l.getY(u),x.z=l.getZ(u),x.w=l.getW(u);const E=1/x.manhattanLength();E!==1/0?x.multiplyScalar(E):x.set(1,0,0,0),l.setXYZW(u,x.x,x.y,x.z,x.w)}},updateMatrixWorld:function(x){to.prototype.updateMatrixWorld.call(this,x),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(x,l){const u=this.skeleton,w=this.geometry;Ex.fromBufferAttribute(w.attributes.skinIndex,x),Tx.fromBufferAttribute(w.attributes.skinWeight,x),OM.fromBufferAttribute(w.attributes.position,x).applyMatrix4(this.bindMatrix),l.set(0,0,0);for(let E=0;E<4;E++){const R=Tx.getComponent(E);if(0!==R){const z=Ex.getComponent(E);Dx.multiplyMatrices(u.bones[z].matrixWorld,u.boneInverses[z]),l.addScaledVector(sm.copy(OM).applyMatrix4(Dx),R)}}return l.applyMatrix4(this.bindMatrixInverse)}}),cv.prototype=Object.assign(Object.create(xi.prototype),{constructor:cv,isBone:!0});const uv=new hr,ID=new hr;class Mg{constructor(l=[],u=[]){this.uuid=Ui.generateUUID(),this.bones=l.slice(0),this.boneInverses=u,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const l=this.bones,u=this.boneInverses;if(this.boneMatrices=new Float32Array(16*l.length),0===u.length)this.calculateInverses();else if(l.length!==u.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let w=0,E=this.bones.length;w<E;w++)this.boneInverses.push(new hr)}}calculateInverses(){this.boneInverses.length=0;for(let l=0,u=this.bones.length;l<u;l++){const w=new hr;this.bones[l]&&w.copy(this.bones[l].matrixWorld).invert(),this.boneInverses.push(w)}}pose(){for(let l=0,u=this.bones.length;l<u;l++){const w=this.bones[l];w&&w.matrixWorld.copy(this.boneInverses[l]).invert()}for(let l=0,u=this.bones.length;l<u;l++){const w=this.bones[l];w&&(w.parent&&w.parent.isBone?(w.matrix.copy(w.parent.matrixWorld).invert(),w.matrix.multiply(w.matrixWorld)):w.matrix.copy(w.matrixWorld),w.matrix.decompose(w.position,w.quaternion,w.scale))}}update(){const l=this.bones,u=this.boneInverses,w=this.boneMatrices,E=this.boneTexture;for(let R=0,z=l.length;R<z;R++)uv.multiplyMatrices(l[R]?l[R].matrixWorld:ID,u[R]),uv.toArray(w,16*R);null!==E&&(E.needsUpdate=!0)}clone(){return new Mg(this.bones,this.boneInverses)}getBoneByName(l){for(let u=0,w=this.bones.length;u<w;u++){const E=this.bones[u];if(E.name===l)return E}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(l,u){this.uuid=l.uuid;for(let w=0,E=l.bones.length;w<E;w++){const R=l.bones[w];let z=u[R];void 0===z&&(console.warn("THREE.Skeleton: No bone found with UUID:",R),z=new cv),this.bones.push(z),this.boneInverses.push((new hr).fromArray(l.boneInverses[w]))}return this.init(),this}toJSON(){const l={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};l.uuid=this.uuid;const u=this.bones,w=this.boneInverses;for(let E=0,R=u.length;E<R;E++)l.bones.push(u[E].uuid),l.boneInverses.push(w[E].toArray());return l}}const Ax=new hr,Ix=new hr,Cg=[],Sg=new to;function om(x,l,u){to.call(this,x,l),this.instanceMatrix=new zr(new Float32Array(16*u),16),this.instanceColor=null,this.count=u,this.frustumCulled=!1}om.prototype=Object.assign(Object.create(to.prototype),{constructor:om,isInstancedMesh:!0,copy:function(x){return to.prototype.copy.call(this,x),this.instanceMatrix.copy(x.instanceMatrix),null!==x.instanceColor&&(this.instanceColor=x.instanceColor.clone()),this.count=x.count,this},getColorAt:function(x,l){l.fromArray(this.instanceColor.array,3*x)},getMatrixAt:function(x,l){l.fromArray(this.instanceMatrix.array,16*x)},raycast:function(x,l){const u=this.matrixWorld,w=this.count;if(Sg.geometry=this.geometry,Sg.material=this.material,void 0!==Sg.material)for(let E=0;E<w;E++){this.getMatrixAt(E,Ax),Ix.multiplyMatrices(u,Ax),Sg.matrixWorld=Ix,Sg.raycast(x,Cg);for(let R=0,z=Cg.length;R<z;R++){const Y=Cg[R];Y.instanceId=E,Y.object=this,l.push(Y)}Cg.length=0}},setColorAt:function(x,l){null===this.instanceColor&&(this.instanceColor=new zr(new Float32Array(3*this.count),3)),l.toArray(this.instanceColor.array,3*x)},setMatrixAt:function(x,l){l.toArray(this.instanceMatrix.array,16*x)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}});class yl extends qo{constructor(l){super(),this.type="LineBasicMaterial",this.color=new Ji(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(l)}copy(l){return super.copy(l),this.color.copy(l.color),this.linewidth=l.linewidth,this.linecap=l.linecap,this.linejoin=l.linejoin,this.morphTargets=l.morphTargets,this}}yl.prototype.isLineBasicMaterial=!0;const Rx=new je,Xy=new je,kx=new hr,hv=new ea,zf=new Bs;function wh(x=new yr,l=new yl){xi.call(this),this.type="Line",this.geometry=x,this.material=l,this.updateMorphTargets()}wh.prototype=Object.assign(Object.create(xi.prototype),{constructor:wh,isLine:!0,copy:function(x){return xi.prototype.copy.call(this,x),this.material=x.material,this.geometry=x.geometry,this},computeLineDistances:function(){const x=this.geometry;if(x.isBufferGeometry)if(null===x.index){const l=x.attributes.position,u=[0];for(let w=1,E=l.count;w<E;w++)Rx.fromBufferAttribute(l,w-1),Xy.fromBufferAttribute(l,w),u[w]=u[w-1],u[w]+=Rx.distanceTo(Xy);x.setAttribute("lineDistance",new Fn(u,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else x.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this},raycast:function(x,l){const u=this.geometry,w=this.matrixWorld,E=x.params.Line.threshold;if(null===u.boundingSphere&&u.computeBoundingSphere(),zf.copy(u.boundingSphere),zf.applyMatrix4(w),zf.radius+=E,!1===x.ray.intersectsSphere(zf))return;kx.copy(w).invert(),hv.copy(x.ray).applyMatrix4(kx);const R=E/((this.scale.x+this.scale.y+this.scale.z)/3),z=R*R,Y=new je,Q=new je,ee=new je,pe=new je,he=this.isLineSegments?2:1;if(u.isBufferGeometry){const me=u.index,Ee=u.attributes.position;if(null!==me){const Fe=me.array;for(let He=0,Re=Fe.length-1;He<Re;He+=he){const rt=Fe[He+1];if(Y.fromBufferAttribute(Ee,Fe[He]),Q.fromBufferAttribute(Ee,rt),hv.distanceSqToSegment(Y,Q,pe,ee)>z)continue;pe.applyMatrix4(this.matrixWorld);const ft=x.ray.origin.distanceTo(pe);ft<x.near||ft>x.far||l.push({distance:ft,point:ee.clone().applyMatrix4(this.matrixWorld),index:He,face:null,faceIndex:null,object:this})}}else for(let Fe=0,He=Ee.count-1;Fe<He;Fe+=he){if(Y.fromBufferAttribute(Ee,Fe),Q.fromBufferAttribute(Ee,Fe+1),hv.distanceSqToSegment(Y,Q,pe,ee)>z)continue;pe.applyMatrix4(this.matrixWorld);const Se=x.ray.origin.distanceTo(pe);Se<x.near||Se>x.far||l.push({distance:Se,point:ee.clone().applyMatrix4(this.matrixWorld),index:Fe,face:null,faceIndex:null,object:this})}}else u.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const x=this.geometry;if(x.isBufferGeometry){const l=x.morphAttributes,u=Object.keys(l);if(u.length>0){const w=l[u[0]];if(void 0!==w){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let E=0,R=w.length;E<R;E++){const z=w[E].name||String(E);this.morphTargetInfluences.push(0),this.morphTargetDictionary[z]=E}}}}else{const l=x.morphTargets;void 0!==l&&l.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const Px=new je,NM=new je;function Kc(x,l){wh.call(this,x,l),this.type="LineSegments"}Kc.prototype=Object.assign(Object.create(wh.prototype),{constructor:Kc,isLineSegments:!0,computeLineDistances:function(){const x=this.geometry;if(x.isBufferGeometry)if(null===x.index){const l=x.attributes.position,u=[];for(let w=0,E=l.count;w<E;w+=2)Px.fromBufferAttribute(l,w),NM.fromBufferAttribute(l,w+1),u[w]=0===w?0:u[w-1],u[w+1]=u[w]+Px.distanceTo(NM);x.setAttribute("lineDistance",new Fn(u,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else x.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}});class Jy extends wh{constructor(l,u){super(l,u),this.type="LineLoop"}}Jy.prototype.isLineLoop=!0;class Qd extends qo{constructor(l){super(),this.type="PointsMaterial",this.color=new Ji(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(l)}copy(l){return super.copy(l),this.color.copy(l.color),this.map=l.map,this.alphaMap=l.alphaMap,this.size=l.size,this.sizeAttenuation=l.sizeAttenuation,this.morphTargets=l.morphTargets,this}}Qd.prototype.isPointsMaterial=!0;const Lx=new hr,BM=new ea,dv=new Bs,Ky=new je;function am(x=new yr,l=new Qd){xi.call(this),this.type="Points",this.geometry=x,this.material=l,this.updateMorphTargets()}function HM(x,l,u,w,E,R,z){const Y=BM.distanceSqToPoint(x);if(Y<u){const Q=new je;BM.closestPointToPoint(x,Q),Q.applyMatrix4(w);const ee=E.ray.origin.distanceTo(Q);if(ee<E.near||ee>E.far)return;R.push({distance:ee,distanceToRay:Math.sqrt(Y),point:Q,index:l,face:null,object:z})}}am.prototype=Object.assign(Object.create(xi.prototype),{constructor:am,isPoints:!0,copy:function(x){return xi.prototype.copy.call(this,x),this.material=x.material,this.geometry=x.geometry,this},raycast:function(x,l){const u=this.geometry,w=this.matrixWorld,E=x.params.Points.threshold;if(null===u.boundingSphere&&u.computeBoundingSphere(),dv.copy(u.boundingSphere),dv.applyMatrix4(w),dv.radius+=E,!1===x.ray.intersectsSphere(dv))return;Lx.copy(w).invert(),BM.copy(x.ray).applyMatrix4(Lx);const R=E/((this.scale.x+this.scale.y+this.scale.z)/3),z=R*R;if(u.isBufferGeometry){const Y=u.index,ee=u.attributes.position;if(null!==Y){const pe=Y.array;for(let he=0,me=pe.length;he<me;he++){const be=pe[he];Ky.fromBufferAttribute(ee,be),HM(Ky,be,z,w,x,l,this)}}else for(let pe=0,he=ee.count;pe<he;pe++)Ky.fromBufferAttribute(ee,pe),HM(Ky,pe,z,w,x,l,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const x=this.geometry;if(x.isBufferGeometry){const l=x.morphAttributes,u=Object.keys(l);if(u.length>0){const w=l[u[0]];if(void 0!==w){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let E=0,R=w.length;E<R;E++){const z=w[E].name||String(E);this.morphTargetInfluences.push(0),this.morphTargetDictionary[z]=E}}}}else{const l=x.morphTargets;void 0!==l&&l.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});class zM extends Ar{constructor(l,u,w,E,R,z,Y,Q,ee){super(l,u,w,E,R,z,Y,Q,ee),this.format=void 0!==Y?Y:Kt,this.minFilter=void 0!==z?z:Xi,this.magFilter=void 0!==R?R:Xi,this.generateMipmaps=!1;const pe=this;"requestVideoFrameCallback"in l&&l.requestVideoFrameCallback(function he(){pe.needsUpdate=!0,l.requestVideoFrameCallback(he)})}clone(){return new this.constructor(this.image).copy(this)}update(){const l=this.image;"requestVideoFrameCallback"in l==0&&l.readyState>=l.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}zM.prototype.isVideoTexture=!0;class Ou extends Ar{constructor(l,u,w,E,R,z,Y,Q,ee,pe,he,me){super(null,z,Y,Q,ee,pe,E,R,he,me),this.image={width:u,height:w},this.mipmaps=l,this.flipY=!1,this.generateMipmaps=!1}}Ou.prototype.isCompressedTexture=!0;class VM extends Ar{constructor(l,u,w,E,R,z,Y,Q,ee){super(l,u,w,E,R,z,Y,Q,ee),this.needsUpdate=!0}}VM.prototype.isCanvasTexture=!0;class Fx extends Ar{constructor(l,u,w,E,R,z,Y,Q,ee,pe){if((pe=void 0!==pe?pe:Di)!==Di&&pe!==Ci)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===w&&pe===Di&&(w=De),void 0===w&&pe===Ci&&(w=en),super(null,E,R,z,Y,Q,pe,w,ee),this.image={width:l,height:u},this.magFilter=void 0!==Y?Y:mo,this.minFilter=void 0!==Q?Q:mo,this.flipY=!1,this.generateMipmaps=!1}}Fx.prototype.isDepthTexture=!0;class Qy extends yr{constructor(l=1,u=8,w=0,E=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:l,segments:u,thetaStart:w,thetaLength:E},u=Math.max(3,u);const R=[],z=[],Y=[],Q=[],ee=new je,pe=new Bn;z.push(0,0,0),Y.push(0,0,1),Q.push(.5,.5);for(let he=0,me=3;he<=u;he++,me+=3){const be=w+he/u*E;ee.x=l*Math.cos(be),ee.y=l*Math.sin(be),z.push(ee.x,ee.y,ee.z),Y.push(0,0,1),pe.x=(z[me]/l+1)/2,pe.y=(z[me+1]/l+1)/2,Q.push(pe.x,pe.y)}for(let he=1;he<=u;he++)R.push(he,he+1,0);this.setIndex(R),this.setAttribute("position",new Fn(z,3)),this.setAttribute("normal",new Fn(Y,3)),this.setAttribute("uv",new Fn(Q,2))}}class Eg extends yr{constructor(l=1,u=1,w=1,E=8,R=1,z=!1,Y=0,Q=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:l,radiusBottom:u,height:w,radialSegments:E,heightSegments:R,openEnded:z,thetaStart:Y,thetaLength:Q};const ee=this;E=Math.floor(E),R=Math.floor(R);const pe=[],he=[],me=[],be=[];let Ee=0;const Fe=[],He=w/2;let Re=0;function rt(nt){const ft=Ee,et=new Bn,Tt=new je;let Qt=0;const zt=!0===nt?l:u,Gt=!0===nt?1:-1;for(let An=1;An<=E;An++)he.push(0,He*Gt,0),me.push(0,Gt,0),be.push(.5,.5),Ee++;const cn=Ee;for(let An=0;An<=E;An++){const Wt=An/E*Q+Y,an=Math.cos(Wt),Tn=Math.sin(Wt);Tt.x=zt*Tn,Tt.y=He*Gt,Tt.z=zt*an,he.push(Tt.x,Tt.y,Tt.z),me.push(0,Gt,0),et.x=.5*an+.5,et.y=.5*Tn*Gt+.5,be.push(et.x,et.y),Ee++}for(let An=0;An<E;An++){const pn=ft+An,Wt=cn+An;!0===nt?pe.push(Wt,Wt+1,pn):pe.push(Wt+1,Wt,pn),Qt+=3}ee.addGroup(Re,Qt,!0===nt?1:2),Re+=Qt}(function Se(){const nt=new je,ft=new je;let et=0;const Tt=(u-l)/w;for(let Qt=0;Qt<=R;Qt++){const zt=[],Gt=Qt/R,cn=Gt*(u-l)+l;for(let An=0;An<=E;An++){const pn=An/E,Wt=pn*Q+Y,an=Math.sin(Wt),Tn=Math.cos(Wt);ft.x=cn*an,ft.y=-Gt*w+He,ft.z=cn*Tn,he.push(ft.x,ft.y,ft.z),nt.set(an,Tt,Tn).normalize(),me.push(nt.x,nt.y,nt.z),be.push(pn,1-Gt),zt.push(Ee++)}Fe.push(zt)}for(let Qt=0;Qt<E;Qt++)for(let zt=0;zt<R;zt++){const cn=Fe[zt+1][Qt],An=Fe[zt+1][Qt+1],pn=Fe[zt][Qt+1];pe.push(Fe[zt][Qt],cn,pn),pe.push(cn,An,pn),et+=6}ee.addGroup(Re,et,0),Re+=et})(),!1===z&&(l>0&&rt(!0),u>0&&rt(!1)),this.setIndex(pe),this.setAttribute("position",new Fn(he,3)),this.setAttribute("normal",new Fn(me,3)),this.setAttribute("uv",new Fn(be,2))}}class $y extends Eg{constructor(l=1,u=1,w=8,E=1,R=!1,z=0,Y=2*Math.PI){super(0,l,u,w,E,R,z,Y),this.type="ConeGeometry",this.parameters={radius:l,height:u,radialSegments:w,heightSegments:E,openEnded:R,thetaStart:z,thetaLength:Y}}}class Vf extends yr{constructor(l,u,w=1,E=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:l,indices:u,radius:w,detail:E};const R=[],z=[];function Q(Se,rt,nt,ft){const et=ft+1,Tt=[];for(let Qt=0;Qt<=et;Qt++){Tt[Qt]=[];const zt=Se.clone().lerp(nt,Qt/et),Gt=rt.clone().lerp(nt,Qt/et),cn=et-Qt;for(let An=0;An<=cn;An++)Tt[Qt][An]=0===An&&Qt===et?zt:zt.clone().lerp(Gt,An/cn)}for(let Qt=0;Qt<et;Qt++)for(let zt=0;zt<2*(et-Qt)-1;zt++){const Gt=Math.floor(zt/2);zt%2==0?(me(Tt[Qt][Gt+1]),me(Tt[Qt+1][Gt]),me(Tt[Qt][Gt])):(me(Tt[Qt][Gt+1]),me(Tt[Qt+1][Gt+1]),me(Tt[Qt+1][Gt]))}}function me(Se){R.push(Se.x,Se.y,Se.z)}function be(Se,rt){const nt=3*Se;rt.x=l[nt+0],rt.y=l[nt+1],rt.z=l[nt+2]}function Fe(Se,rt,nt,ft){ft<0&&1===Se.x&&(z[rt]=Se.x-1),0===nt.x&&0===nt.z&&(z[rt]=ft/2/Math.PI+.5)}function He(Se){return Math.atan2(Se.z,-Se.x)}function Re(Se){return Math.atan2(-Se.y,Math.sqrt(Se.x*Se.x+Se.z*Se.z))}(function Y(Se){const rt=new je,nt=new je,ft=new je;for(let et=0;et<u.length;et+=3)be(u[et+0],rt),be(u[et+1],nt),be(u[et+2],ft),Q(rt,nt,ft,Se)})(E),function ee(Se){const rt=new je;for(let nt=0;nt<R.length;nt+=3)rt.x=R[nt+0],rt.y=R[nt+1],rt.z=R[nt+2],rt.normalize().multiplyScalar(Se),R[nt+0]=rt.x,R[nt+1]=rt.y,R[nt+2]=rt.z}(w),function pe(){const Se=new je;for(let rt=0;rt<R.length;rt+=3){Se.x=R[rt+0],Se.y=R[rt+1],Se.z=R[rt+2];const nt=He(Se)/2/Math.PI+.5,ft=Re(Se)/Math.PI+.5;z.push(nt,1-ft)}(function Ee(){const Se=new je,rt=new je,nt=new je,ft=new je,et=new Bn,Tt=new Bn,Qt=new Bn;for(let zt=0,Gt=0;zt<R.length;zt+=9,Gt+=6){Se.set(R[zt+0],R[zt+1],R[zt+2]),rt.set(R[zt+3],R[zt+4],R[zt+5]),nt.set(R[zt+6],R[zt+7],R[zt+8]),et.set(z[Gt+0],z[Gt+1]),Tt.set(z[Gt+2],z[Gt+3]),Qt.set(z[Gt+4],z[Gt+5]),ft.copy(Se).add(rt).add(nt).divideScalar(3);const cn=He(ft);Fe(et,Gt+0,Se,cn),Fe(Tt,Gt+2,rt,cn),Fe(Qt,Gt+4,nt,cn)}})(),function he(){for(let Se=0;Se<z.length;Se+=6){const rt=z[Se+0],nt=z[Se+2],ft=z[Se+4],et=Math.max(rt,nt,ft),Tt=Math.min(rt,nt,ft);et>.9&&Tt<.1&&(rt<.2&&(z[Se+0]+=1),nt<.2&&(z[Se+2]+=1),ft<.2&&(z[Se+4]+=1))}}()}(),this.setAttribute("position",new Fn(R,3)),this.setAttribute("normal",new Fn(R.slice(),3)),this.setAttribute("uv",new Fn(z,2)),0===E?this.computeVertexNormals():this.normalizeNormals()}}class fv extends Vf{constructor(l=1,u=0){const w=(1+Math.sqrt(5))/2,E=1/w;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-E,-w,0,-E,w,0,E,-w,0,E,w,-E,-w,0,-E,w,0,E,-w,0,E,w,0,-w,0,-E,w,0,-E,-w,0,E,w,0,E],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],l,u),this.type="DodecahedronGeometry",this.parameters={radius:l,detail:u}}}const eb=new je,tb=new je,Ox=new je,gs=new Ma;class Vr extends yr{constructor(l,u){if(super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:u},u=void 0!==u?u:1,!0===l.isGeometry)return void console.error("THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const E=Math.pow(10,4),R=Math.cos(Ui.DEG2RAD*u),z=l.getIndex(),Y=l.getAttribute("position"),Q=z?z.count:Y.count,ee=[0,0,0],pe=["a","b","c"],he=new Array(3),me={},be=[];for(let Ee=0;Ee<Q;Ee+=3){z?(ee[0]=z.getX(Ee),ee[1]=z.getX(Ee+1),ee[2]=z.getX(Ee+2)):(ee[0]=Ee,ee[1]=Ee+1,ee[2]=Ee+2);const{a:Fe,b:He,c:Re}=gs;if(Fe.fromBufferAttribute(Y,ee[0]),He.fromBufferAttribute(Y,ee[1]),Re.fromBufferAttribute(Y,ee[2]),gs.getNormal(Ox),he[0]=`${Math.round(Fe.x*E)},${Math.round(Fe.y*E)},${Math.round(Fe.z*E)}`,he[1]=`${Math.round(He.x*E)},${Math.round(He.y*E)},${Math.round(He.z*E)}`,he[2]=`${Math.round(Re.x*E)},${Math.round(Re.y*E)},${Math.round(Re.z*E)}`,he[0]!==he[1]&&he[1]!==he[2]&&he[2]!==he[0])for(let Se=0;Se<3;Se++){const rt=(Se+1)%3,nt=he[Se],ft=he[rt],et=gs[pe[Se]],Tt=gs[pe[rt]],Qt=`${nt}_${ft}`,zt=`${ft}_${nt}`;zt in me&&me[zt]?(Ox.dot(me[zt].normal)<=R&&(be.push(et.x,et.y,et.z),be.push(Tt.x,Tt.y,Tt.z)),me[zt]=null):Qt in me||(me[Qt]={index0:ee[Se],index1:ee[rt],normal:Ox.clone()})}}for(const Ee in me)if(me[Ee]){const{index0:Fe,index1:He}=me[Ee];eb.fromBufferAttribute(Y,Fe),tb.fromBufferAttribute(Y,He),be.push(eb.x,eb.y,eb.z),be.push(tb.x,tb.y,tb.z)}this.setAttribute("position",new Fn(be,3))}}function Nx(x,l,u,w,E){let R,z;if(E===function qx(x,l,u,w){let E=0;for(let R=l,z=u-w;R<u;R+=w)E+=(x[z]-x[R])*(x[R+1]+x[z+1]),z=R;return E}(x,l,u,w)>0)for(R=l;R<u;R+=w)z=Gx(R,x[R],x[R+1],z);else for(R=u-w;R>=l;R-=w)z=Gx(R,x[R],x[R+1],z);return z&&ib(z,z.next)&&(Dg(z),z=z.next),z}function Mh(x,l){if(!x)return x;l||(l=x);let w,u=x;do{if(w=!1,u.steiner||!ib(u,u.next)&&0!==ul(u.prev,u,u.next))u=u.next;else{if(Dg(u),u=l=u.prev,u===u.next)break;w=!0}}while(w||u!==l);return l}function Qc(x,l,u,w,E,R,z){if(!x)return;!z&&R&&function bP(x,l,u,w){let E=x;do{null===E.z&&(E.z=Tg(E.x,E.y,l,u,w)),E.prevZ=E.prev,E.nextZ=E.next,E=E.next}while(E!==x);E.prevZ.nextZ=null,E.prevZ=null,function nb(x){let l,u,w,E,R,z,Y,Q,ee=1;do{for(u=x,x=null,R=null,z=0;u;){for(z++,w=u,Y=0,l=0;l<ee&&(Y++,w=w.nextZ,w);l++);for(Q=ee;Y>0||Q>0&&w;)0!==Y&&(0===Q||!w||u.z<=w.z)?(E=u,u=u.nextZ,Y--):(E=w,w=w.nextZ,Q--),R?R.nextZ=E:x=E,E.prevZ=R,R=E;u=w}R.nextZ=null,ee*=2}while(z>1)}(E)}(x,w,E,R);let Q,ee,Y=x;for(;x.prev!==x.next;)if(Q=x.prev,ee=x.next,R?RD(x,w,E,R):GM(x))l.push(Q.i/u),l.push(x.i/u),l.push(ee.i/u),Dg(x),x=ee.next,Y=ee.next;else if((x=ee)===Y){z?1===z?Qc(x=Bx(Mh(x),l,u),l,u,w,E,R,2):2===z&&$d(x,l,u,w,E,R):Qc(Mh(x),l,u,w,E,R,1);break}}function GM(x){const l=x.prev,u=x,w=x.next;if(ul(l,u,w)>=0)return!1;let E=x.next.next;for(;E!==x.prev;){if(Uf(l.x,l.y,u.x,u.y,w.x,w.y,E.x,E.y)&&ul(E.prev,E,E.next)>=0)return!1;E=E.next}return!0}function RD(x,l,u,w){const E=x.prev,R=x,z=x.next;if(ul(E,R,z)>=0)return!1;const ee=E.x>R.x?E.x>z.x?E.x:z.x:R.x>z.x?R.x:z.x,pe=E.y>R.y?E.y>z.y?E.y:z.y:R.y>z.y?R.y:z.y,he=Tg(E.x<R.x?E.x<z.x?E.x:z.x:R.x<z.x?R.x:z.x,E.y<R.y?E.y<z.y?E.y:z.y:R.y<z.y?R.y:z.y,l,u,w),me=Tg(ee,pe,l,u,w);let be=x.prevZ,Ee=x.nextZ;for(;be&&be.z>=he&&Ee&&Ee.z<=me;){if(be!==x.prev&&be!==x.next&&Uf(E.x,E.y,R.x,R.y,z.x,z.y,be.x,be.y)&&ul(be.prev,be,be.next)>=0||(be=be.prevZ,Ee!==x.prev&&Ee!==x.next&&Uf(E.x,E.y,R.x,R.y,z.x,z.y,Ee.x,Ee.y)&&ul(Ee.prev,Ee,Ee.next)>=0))return!1;Ee=Ee.nextZ}for(;be&&be.z>=he;){if(be!==x.prev&&be!==x.next&&Uf(E.x,E.y,R.x,R.y,z.x,z.y,be.x,be.y)&&ul(be.prev,be,be.next)>=0)return!1;be=be.prevZ}for(;Ee&&Ee.z<=me;){if(Ee!==x.prev&&Ee!==x.next&&Uf(E.x,E.y,R.x,R.y,z.x,z.y,Ee.x,Ee.y)&&ul(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.nextZ}return!0}function Bx(x,l,u){let w=x;do{const E=w.prev,R=w.next.next;!ib(E,R)&&jM(E,w,w.next,R)&&ob(E,R)&&ob(R,E)&&(l.push(E.i/u),l.push(w.i/u),l.push(R.i/u),Dg(w),Dg(w.next),w=x=R),w=w.next}while(w!==x);return Mh(w)}function $d(x,l,u,w,E,R){let z=x;do{let Y=z.next.next;for(;Y!==z.prev;){if(z.i!==Y.i&&Ux(z,Y)){let Q=PD(z,Y);return z=Mh(z,z.next),Q=Mh(Q,Q.next),Qc(z,l,u,w,E,R),void Qc(Q,l,u,w,E,R)}Y=Y.next}z=z.next}while(z!==x)}function WM(x,l){return x.x-l.x}function zx(x,l){if(l=function yP(x,l){let u=l;const w=x.x,E=x.y;let z,R=-1/0;do{if(E<=u.y&&E>=u.next.y&&u.next.y!==u.y){const me=u.x+(E-u.y)*(u.next.x-u.x)/(u.next.y-u.y);if(me<=w&&me>R){if(R=me,me===w){if(E===u.y)return u;if(E===u.next.y)return u.next}z=u.x<u.next.x?u:u.next}}u=u.next}while(u!==l);if(!z)return null;if(w===R)return z;const Y=z,Q=z.x,ee=z.y;let he,pe=1/0;u=z;do{w>=u.x&&u.x>=Q&&w!==u.x&&Uf(E<ee?w:R,E,Q,ee,E<ee?R:w,E,u.x,u.y)&&(he=Math.abs(E-u.y)/(w-u.x),ob(u,x)&&(he<pe||he===pe&&(u.x>z.x||u.x===z.x&&qM(z,u)))&&(z=u,pe=he)),u=u.next}while(u!==Y);return z}(x,l),l){const u=PD(l,x);Mh(l,l.next),Mh(u,u.next)}}function qM(x,l){return ul(x.prev,x,l.prev)<0&&ul(l.next,x,x.next)<0}function Tg(x,l,u,w,E){return(x=1431655765&((x=858993459&((x=252645135&((x=16711935&((x=32767*(x-u)*E)|x<<8))|x<<4))|x<<2))|x<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=32767*(l-w)*E)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function Vx(x){let l=x,u=x;do{(l.x<u.x||l.x===u.x&&l.y<u.y)&&(u=l),l=l.next}while(l!==x);return u}function Uf(x,l,u,w,E,R,z,Y){return(E-z)*(l-Y)-(x-z)*(R-Y)>=0&&(x-z)*(w-Y)-(u-z)*(l-Y)>=0&&(u-z)*(R-Y)-(E-z)*(w-Y)>=0}function Ux(x,l){return x.next.i!==l.i&&x.prev.i!==l.i&&!function ZM(x,l){let u=x;do{if(u.i!==x.i&&u.next.i!==x.i&&u.i!==l.i&&u.next.i!==l.i&&jM(u,u.next,x,l))return!0;u=u.next}while(u!==x);return!1}(x,l)&&(ob(x,l)&&ob(l,x)&&function kD(x,l){let u=x,w=!1;const E=(x.x+l.x)/2,R=(x.y+l.y)/2;do{u.y>R!=u.next.y>R&&u.next.y!==u.y&&E<(u.next.x-u.x)*(R-u.y)/(u.next.y-u.y)+u.x&&(w=!w),u=u.next}while(u!==x);return w}(x,l)&&(ul(x.prev,x,l.prev)||ul(x,l.prev,l))||ib(x,l)&&ul(x.prev,x,x.next)>0&&ul(l.prev,l,l.next)>0)}function ul(x,l,u){return(l.y-x.y)*(u.x-l.x)-(l.x-x.x)*(u.y-l.y)}function ib(x,l){return x.x===l.x&&x.y===l.y}function jM(x,l,u,w){const E=sb(ul(x,l,u)),R=sb(ul(x,l,w)),z=sb(ul(u,w,x)),Y=sb(ul(u,w,l));return!!(E!==R&&z!==Y||0===E&&rb(x,u,l)||0===R&&rb(x,w,l)||0===z&&rb(u,x,w)||0===Y&&rb(u,l,w))}function rb(x,l,u){return l.x<=Math.max(x.x,u.x)&&l.x>=Math.min(x.x,u.x)&&l.y<=Math.max(x.y,u.y)&&l.y>=Math.min(x.y,u.y)}function sb(x){return x>0?1:x<0?-1:0}function ob(x,l){return ul(x.prev,x,x.next)<0?ul(x,l,x.next)>=0&&ul(x,x.prev,l)>=0:ul(x,l,x.prev)<0||ul(x,x.next,l)<0}function PD(x,l){const u=new Wx(x.i,x.x,x.y),w=new Wx(l.i,l.x,l.y),E=x.next,R=l.prev;return x.next=l,l.prev=x,u.next=E,E.prev=u,w.next=u,u.prev=w,R.next=w,w.prev=R,w}function Gx(x,l,u,w){const E=new Wx(x,l,u);return w?(E.next=w.next,E.prev=w,w.next.prev=E,w.next=E):(E.prev=E,E.next=E),E}function Dg(x){x.next.prev=x.prev,x.prev.next=x.next,x.prevZ&&(x.prevZ.nextZ=x.nextZ),x.nextZ&&(x.nextZ.prevZ=x.prevZ)}function Wx(x,l,u){this.i=x,this.x=l,this.y=u,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}const Gf={area:function(x){const l=x.length;let u=0;for(let w=l-1,E=0;E<l;w=E++)u+=x[w].x*x[E].y-x[E].x*x[w].y;return.5*u},isClockWise:function(x){return Gf.area(x)<0},triangulateShape:function(x,l){const u=[],w=[],E=[];LD(x),FD(u,x);let R=x.length;l.forEach(LD);for(let Y=0;Y<l.length;Y++)w.push(R),R+=l[Y].length,FD(u,l[Y]);const z=function(x,l,u){u=u||2;const w=l&&l.length,E=w?l[0]*u:x.length;let R=Nx(x,0,E,u,!0);const z=[];if(!R||R.next===R.prev)return z;let Y,Q,ee,pe,he,me,be;if(w&&(R=function Hx(x,l,u,w){const E=[];let R,z,Y,Q,ee;for(R=0,z=l.length;R<z;R++)Y=l[R]*w,Q=R<z-1?l[R+1]*w:x.length,ee=Nx(x,Y,Q,w,!1),ee===ee.next&&(ee.steiner=!0),E.push(Vx(ee));for(E.sort(WM),R=0;R<E.length;R++)zx(E[R],u),u=Mh(u,u.next);return u}(x,l,R,u)),x.length>80*u){Y=ee=x[0],Q=pe=x[1];for(let Ee=u;Ee<E;Ee+=u)he=x[Ee],me=x[Ee+1],he<Y&&(Y=he),me<Q&&(Q=me),he>ee&&(ee=he),me>pe&&(pe=me);be=Math.max(ee-Y,pe-Q),be=0!==be?1/be:0}return Qc(R,z,u,Y,Q,be),z}(u,w);for(let Y=0;Y<z.length;Y+=3)E.push(z.slice(Y,Y+3));return E}};function LD(x){const l=x.length;l>2&&x[l-1].equals(x[0])&&x.pop()}function FD(x,l){for(let u=0;u<l.length;u++)x.push(l[u].x),x.push(l[u].y)}class Wf extends yr{constructor(l,u){super(),this.type="ExtrudeGeometry",this.parameters={shapes:l,options:u},l=Array.isArray(l)?l:[l];const w=this,E=[],R=[];for(let Y=0,Q=l.length;Y<Q;Y++)z(l[Y]);function z(Y){const Q=[],ee=void 0!==u.curveSegments?u.curveSegments:12,pe=void 0!==u.steps?u.steps:1;let he=void 0!==u.depth?u.depth:100,me=void 0===u.bevelEnabled||u.bevelEnabled,be=void 0!==u.bevelThickness?u.bevelThickness:6,Ee=void 0!==u.bevelSize?u.bevelSize:be-2,Fe=void 0!==u.bevelOffset?u.bevelOffset:0,He=void 0!==u.bevelSegments?u.bevelSegments:3;const Re=u.extrudePath,Se=void 0!==u.UVGenerator?u.UVGenerator:xP;void 0!==u.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),he=u.amount);let rt,ft,et,Tt,Qt,nt=!1;Re&&(rt=Re.getSpacedPoints(pe),nt=!0,me=!1,ft=Re.computeFrenetFrames(pe,!1),et=new je,Tt=new je,Qt=new je),me||(He=0,be=0,Ee=0,Fe=0);const zt=Y.extractPoints(ee);let Gt=zt.shape;const cn=zt.holes;if(!Gf.isClockWise(Gt)){Gt=Gt.reverse();for(let _i=0,ni=cn.length;_i<ni;_i++){const Ri=cn[_i];Gf.isClockWise(Ri)&&(cn[_i]=Ri.reverse())}}const pn=Gf.triangulateShape(Gt,cn),Wt=Gt;for(let _i=0,ni=cn.length;_i<ni;_i++)Gt=Gt.concat(cn[_i]);function an(_i,ni,Ri){return ni||console.error("THREE.ExtrudeGeometry: vec does not exist"),ni.clone().multiplyScalar(Ri).add(_i)}const Tn=Gt.length,vi=pn.length;function Gi(_i,ni,Ri){let kr,dr,wt;const mt=_i.x-ni.x,oi=_i.y-ni.y,gi=Ri.x-_i.x,qt=Ri.y-_i.y,Mi=mt*mt+oi*oi;if(Math.abs(mt*qt-oi*gi)>Number.EPSILON){const _r=Math.sqrt(Mi),wi=Math.sqrt(gi*gi+qt*qt),Xr=ni.x-oi/_r,Qr=ni.y+mt/_r,Zr=((Ri.x-qt/wi-Xr)*qt-(Ri.y+gi/wi-Qr)*gi)/(mt*qt-oi*gi);kr=Xr+mt*Zr-_i.x,dr=Qr+oi*Zr-_i.y;const nl=kr*kr+dr*dr;if(nl<=2)return new Bn(kr,dr);wt=Math.sqrt(nl/2)}else{let _r=!1;mt>Number.EPSILON?gi>Number.EPSILON&&(_r=!0):mt<-Number.EPSILON?gi<-Number.EPSILON&&(_r=!0):Math.sign(oi)===Math.sign(qt)&&(_r=!0),_r?(kr=-oi,dr=mt,wt=Math.sqrt(Mi)):(kr=mt,dr=oi,wt=Math.sqrt(Mi/2))}return new Bn(kr/wt,dr/wt)}const $i=[];for(let _i=0,ni=Wt.length,Ri=ni-1,kr=_i+1;_i<ni;_i++,Ri++,kr++)Ri===ni&&(Ri=0),kr===ni&&(kr=0),$i[_i]=Gi(Wt[_i],Wt[Ri],Wt[kr]);const Tr=[];let br,no=$i.concat();for(let _i=0,ni=cn.length;_i<ni;_i++){const Ri=cn[_i];br=[];for(let kr=0,dr=Ri.length,wt=dr-1,mt=kr+1;kr<dr;kr++,wt++,mt++)wt===dr&&(wt=0),mt===dr&&(mt=0),br[kr]=Gi(Ri[kr],Ri[wt],Ri[mt]);Tr.push(br),no=no.concat(br)}for(let _i=0;_i<He;_i++){const ni=_i/He,Ri=be*Math.cos(ni*Math.PI/2),kr=Ee*Math.sin(ni*Math.PI/2)+Fe;for(let dr=0,wt=Wt.length;dr<wt;dr++){const mt=an(Wt[dr],$i[dr],kr);Aa(mt.x,mt.y,-Ri)}for(let dr=0,wt=cn.length;dr<wt;dr++){const mt=cn[dr];br=Tr[dr];for(let oi=0,gi=mt.length;oi<gi;oi++){const qt=an(mt[oi],br[oi],kr);Aa(qt.x,qt.y,-Ri)}}}const _s=Ee+Fe;for(let _i=0;_i<Tn;_i++){const ni=me?an(Gt[_i],no[_i],_s):Gt[_i];nt?(Tt.copy(ft.normals[0]).multiplyScalar(ni.x),et.copy(ft.binormals[0]).multiplyScalar(ni.y),Qt.copy(rt[0]).add(Tt).add(et),Aa(Qt.x,Qt.y,Qt.z)):Aa(ni.x,ni.y,0)}for(let _i=1;_i<=pe;_i++)for(let ni=0;ni<Tn;ni++){const Ri=me?an(Gt[ni],no[ni],_s):Gt[ni];nt?(Tt.copy(ft.normals[_i]).multiplyScalar(Ri.x),et.copy(ft.binormals[_i]).multiplyScalar(Ri.y),Qt.copy(rt[_i]).add(Tt).add(et),Aa(Qt.x,Qt.y,Qt.z)):Aa(Ri.x,Ri.y,he/pe*_i)}for(let _i=He-1;_i>=0;_i--){const ni=_i/He,Ri=be*Math.cos(ni*Math.PI/2),kr=Ee*Math.sin(ni*Math.PI/2)+Fe;for(let dr=0,wt=Wt.length;dr<wt;dr++){const mt=an(Wt[dr],$i[dr],kr);Aa(mt.x,mt.y,he+Ri)}for(let dr=0,wt=cn.length;dr<wt;dr++){const mt=cn[dr];br=Tr[dr];for(let oi=0,gi=mt.length;oi<gi;oi++){const qt=an(mt[oi],br[oi],kr);nt?Aa(qt.x,qt.y+rt[pe-1].y,rt[pe-1].x+Ri):Aa(qt.x,qt.y,he+Ri)}}}function $n(_i,ni){let Ri=_i.length;for(;--Ri>=0;){const kr=Ri;let dr=Ri-1;dr<0&&(dr=_i.length-1);for(let wt=0,mt=pe+2*He;wt<mt;wt++){const oi=Tn*wt,gi=Tn*(wt+1);Mo(ni+kr+oi,ni+dr+oi,ni+dr+gi,ni+kr+gi)}}}function Aa(_i,ni,Ri){Q.push(_i),Q.push(ni),Q.push(Ri)}function _o(_i,ni,Ri){ss(_i),ss(ni),ss(Ri);const kr=E.length/3,dr=Se.generateTopUV(w,E,kr-3,kr-2,kr-1);No(dr[0]),No(dr[1]),No(dr[2])}function Mo(_i,ni,Ri,kr){ss(_i),ss(ni),ss(kr),ss(ni),ss(Ri),ss(kr);const dr=E.length/3,wt=Se.generateSideWallUV(w,E,dr-6,dr-3,dr-2,dr-1);No(wt[0]),No(wt[1]),No(wt[3]),No(wt[1]),No(wt[2]),No(wt[3])}function ss(_i){E.push(Q[3*_i+0]),E.push(Q[3*_i+1]),E.push(Q[3*_i+2])}function No(_i){R.push(_i.x),R.push(_i.y)}(function Oo(){const _i=E.length/3;if(me){let ni=0,Ri=Tn*ni;for(let kr=0;kr<vi;kr++){const dr=pn[kr];_o(dr[2]+Ri,dr[1]+Ri,dr[0]+Ri)}ni=pe+2*He,Ri=Tn*ni;for(let kr=0;kr<vi;kr++){const dr=pn[kr];_o(dr[0]+Ri,dr[1]+Ri,dr[2]+Ri)}}else{for(let ni=0;ni<vi;ni++){const Ri=pn[ni];_o(Ri[2],Ri[1],Ri[0])}for(let ni=0;ni<vi;ni++){const Ri=pn[ni];_o(Ri[0]+Tn*pe,Ri[1]+Tn*pe,Ri[2]+Tn*pe)}}w.addGroup(_i,E.length/3-_i,0)})(),function Io(){const _i=E.length/3;let ni=0;$n(Wt,ni),ni+=Wt.length;for(let Ri=0,kr=cn.length;Ri<kr;Ri++){const dr=cn[Ri];$n(dr,ni),ni+=dr.length}w.addGroup(_i,E.length/3-_i,1)}()}this.setAttribute("position",new Fn(E,3)),this.setAttribute("uv",new Fn(R,2)),this.computeVertexNormals()}toJSON(){const l=yr.prototype.toJSON.call(this);return function wP(x,l,u){if(u.shapes=[],Array.isArray(x))for(let w=0,E=x.length;w<E;w++)u.shapes.push(x[w].uuid);else u.shapes.push(x.uuid);return void 0!==l.extrudePath&&(u.options.extrudePath=l.extrudePath.toJSON()),u}(this.parameters.shapes,this.parameters.options,l)}}const xP={generateTopUV:function(x,l,u,w,E){const Y=l[3*w],Q=l[3*w+1],ee=l[3*E],pe=l[3*E+1];return[new Bn(l[3*u],l[3*u+1]),new Bn(Y,Q),new Bn(ee,pe)]},generateSideWallUV:function(x,l,u,w,E,R){const z=l[3*u],Y=l[3*u+1],Q=l[3*u+2],ee=l[3*w],pe=l[3*w+1],he=l[3*w+2],me=l[3*E],be=l[3*E+1],Ee=l[3*E+2],Fe=l[3*R],He=l[3*R+1],Re=l[3*R+2];return Math.abs(Y-pe)<.01?[new Bn(z,1-Q),new Bn(ee,1-he),new Bn(me,1-Ee),new Bn(Fe,1-Re)]:[new Bn(Y,1-Q),new Bn(pe,1-he),new Bn(be,1-Ee),new Bn(He,1-Re)]}};class jx extends Vf{constructor(l=1,u=0){const w=(1+Math.sqrt(5))/2;super([-1,w,0,1,w,0,-1,-w,0,1,-w,0,0,-1,w,0,1,w,0,-1,-w,0,1,-w,w,0,-1,w,0,1,-w,0,-1,-w,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],l,u),this.type="IcosahedronGeometry",this.parameters={radius:l,detail:u}}}class Zx extends yr{constructor(l,u=12,w=0,E=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:l,segments:u,phiStart:w,phiLength:E},u=Math.floor(u),E=Ui.clamp(E,0,2*Math.PI);const R=[],z=[],Y=[],Q=1/u,ee=new je,pe=new Bn;for(let he=0;he<=u;he++){const me=w+he*Q*E,be=Math.sin(me),Ee=Math.cos(me);for(let Fe=0;Fe<=l.length-1;Fe++)ee.x=l[Fe].x*be,ee.y=l[Fe].y,ee.z=l[Fe].x*Ee,z.push(ee.x,ee.y,ee.z),pe.x=he/u,pe.y=Fe/(l.length-1),Y.push(pe.x,pe.y)}for(let he=0;he<u;he++)for(let me=0;me<l.length-1;me++){const be=me+he*l.length,Fe=be+l.length,He=be+l.length+1,Re=be+1;R.push(be,Fe,Re),R.push(Fe,He,Re)}if(this.setIndex(R),this.setAttribute("position",new Fn(z,3)),this.setAttribute("uv",new Fn(Y,2)),this.computeVertexNormals(),E===2*Math.PI){const he=this.attributes.normal.array,me=new je,be=new je,Ee=new je,Fe=u*l.length*3;for(let He=0,Re=0;He<l.length;He++,Re+=3)me.x=he[Re+0],me.y=he[Re+1],me.z=he[Re+2],be.x=he[Fe+Re+0],be.y=he[Fe+Re+1],be.z=he[Fe+Re+2],Ee.addVectors(me,be).normalize(),he[Re+0]=he[Fe+Re+0]=Ee.x,he[Re+1]=he[Fe+Re+1]=Ee.y,he[Re+2]=he[Fe+Re+2]=Ee.z}}}class ab extends Vf{constructor(l=1,u=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],l,u),this.type="OctahedronGeometry",this.parameters={radius:l,detail:u}}}function Ag(x,l,u){yr.call(this),this.type="ParametricGeometry",this.parameters={func:x,slices:l,stacks:u};const w=[],E=[],R=[],z=[],Y=1e-5,Q=new je,ee=new je,pe=new je,he=new je,me=new je;x.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const be=l+1;for(let Ee=0;Ee<=u;Ee++){const Fe=Ee/u;for(let He=0;He<=l;He++){const Re=He/l;x(Re,Fe,ee),E.push(ee.x,ee.y,ee.z),Re-Y>=0?(x(Re-Y,Fe,pe),he.subVectors(ee,pe)):(x(Re+Y,Fe,pe),he.subVectors(pe,ee)),Fe-Y>=0?(x(Re,Fe-Y,pe),me.subVectors(ee,pe)):(x(Re,Fe+Y,pe),me.subVectors(pe,ee)),Q.crossVectors(he,me).normalize(),R.push(Q.x,Q.y,Q.z),z.push(Re,Fe)}}for(let Ee=0;Ee<u;Ee++)for(let Fe=0;Fe<l;Fe++){const Re=Ee*be+Fe+1,Se=(Ee+1)*be+Fe+1,rt=(Ee+1)*be+Fe;w.push(Ee*be+Fe,Re,rt),w.push(Re,Se,rt)}this.setIndex(w),this.setAttribute("position",new Fn(E,3)),this.setAttribute("normal",new Fn(R,3)),this.setAttribute("uv",new Fn(z,2))}(Ag.prototype=Object.create(yr.prototype)).constructor=Ag;class Ch extends yr{constructor(l=.5,u=1,w=8,E=1,R=0,z=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:l,outerRadius:u,thetaSegments:w,phiSegments:E,thetaStart:R,thetaLength:z},w=Math.max(3,w);const Y=[],Q=[],ee=[],pe=[];let he=l;const me=(u-l)/(E=Math.max(1,E)),be=new je,Ee=new Bn;for(let Fe=0;Fe<=E;Fe++){for(let He=0;He<=w;He++){const Re=R+He/w*z;be.x=he*Math.cos(Re),be.y=he*Math.sin(Re),Q.push(be.x,be.y,be.z),ee.push(0,0,1),Ee.x=(be.x/u+1)/2,Ee.y=(be.y/u+1)/2,pe.push(Ee.x,Ee.y)}he+=me}for(let Fe=0;Fe<E;Fe++){const He=Fe*(w+1);for(let Re=0;Re<w;Re++){const Se=Re+He,nt=Se+w+1,ft=Se+w+2,et=Se+1;Y.push(Se,nt,et),Y.push(nt,ft,et)}}this.setIndex(Y),this.setAttribute("position",new Fn(Q,3)),this.setAttribute("normal",new Fn(ee,3)),this.setAttribute("uv",new Fn(pe,2))}}class lm extends yr{constructor(l,u=12){super(),this.type="ShapeGeometry",this.parameters={shapes:l,curveSegments:u};const w=[],E=[],R=[],z=[];let Y=0,Q=0;if(!1===Array.isArray(l))ee(l);else for(let pe=0;pe<l.length;pe++)ee(l[pe]),this.addGroup(Y,Q,pe),Y+=Q,Q=0;function ee(pe){const he=E.length/3,me=pe.extractPoints(u);let be=me.shape;const Ee=me.holes;!1===Gf.isClockWise(be)&&(be=be.reverse());for(let He=0,Re=Ee.length;He<Re;He++){const Se=Ee[He];!0===Gf.isClockWise(Se)&&(Ee[He]=Se.reverse())}const Fe=Gf.triangulateShape(be,Ee);for(let He=0,Re=Ee.length;He<Re;He++)be=be.concat(Ee[He]);for(let He=0,Re=be.length;He<Re;He++){const Se=be[He];E.push(Se.x,Se.y,0),R.push(0,0,1),z.push(Se.x,Se.y)}for(let He=0,Re=Fe.length;He<Re;He++){const Se=Fe[He];w.push(Se[0]+he,Se[1]+he,Se[2]+he),Q+=3}}this.setIndex(w),this.setAttribute("position",new Fn(E,3)),this.setAttribute("normal",new Fn(R,3)),this.setAttribute("uv",new Fn(z,2))}toJSON(){const l=yr.prototype.toJSON.call(this);return function OD(x,l){if(l.shapes=[],Array.isArray(x))for(let u=0,w=x.length;u<w;u++)l.shapes.push(x[u].uuid);else l.shapes.push(x.uuid);return l}(this.parameters.shapes,l)}}class Ig extends yr{constructor(l=1,u=8,w=6,E=0,R=2*Math.PI,z=0,Y=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:l,widthSegments:u,heightSegments:w,phiStart:E,phiLength:R,thetaStart:z,thetaLength:Y},u=Math.max(3,Math.floor(u)),w=Math.max(2,Math.floor(w));const Q=Math.min(z+Y,Math.PI);let ee=0;const pe=[],he=new je,me=new je,be=[],Ee=[],Fe=[],He=[];for(let Re=0;Re<=w;Re++){const Se=[],rt=Re/w;let nt=0;0==Re&&0==z?nt=.5/u:Re==w&&Q==Math.PI&&(nt=-.5/u);for(let ft=0;ft<=u;ft++){const et=ft/u;he.x=-l*Math.cos(E+et*R)*Math.sin(z+rt*Y),he.y=l*Math.cos(z+rt*Y),he.z=l*Math.sin(E+et*R)*Math.sin(z+rt*Y),Ee.push(he.x,he.y,he.z),me.copy(he).normalize(),Fe.push(me.x,me.y,me.z),He.push(et+nt,1-rt),Se.push(ee++)}pe.push(Se)}for(let Re=0;Re<w;Re++)for(let Se=0;Se<u;Se++){const rt=pe[Re][Se+1],nt=pe[Re][Se],ft=pe[Re+1][Se],et=pe[Re+1][Se+1];(0!==Re||z>0)&&be.push(rt,nt,et),(Re!==w-1||Q<Math.PI)&&be.push(nt,ft,et)}this.setIndex(be),this.setAttribute("position",new Fn(Ee,3)),this.setAttribute("normal",new Fn(Fe,3)),this.setAttribute("uv",new Fn(He,2))}}class Rg extends Vf{constructor(l=1,u=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],l,u),this.type="TetrahedronGeometry",this.parameters={radius:l,detail:u}}}class pv extends Wf{constructor(l,u={}){const w=u.font;if(!w||!w.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new yr;const E=w.generateShapes(l,u.size);u.depth=void 0!==u.height?u.height:50,void 0===u.bevelThickness&&(u.bevelThickness=10),void 0===u.bevelSize&&(u.bevelSize=8),void 0===u.bevelEnabled&&(u.bevelEnabled=!1),super(E,u),this.type="TextGeometry"}}class kg extends yr{constructor(l=1,u=.4,w=8,E=6,R=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:l,tube:u,radialSegments:w,tubularSegments:E,arc:R},w=Math.floor(w),E=Math.floor(E);const z=[],Y=[],Q=[],ee=[],pe=new je,he=new je,me=new je;for(let be=0;be<=w;be++)for(let Ee=0;Ee<=E;Ee++){const Fe=Ee/E*R,He=be/w*Math.PI*2;he.x=(l+u*Math.cos(He))*Math.cos(Fe),he.y=(l+u*Math.cos(He))*Math.sin(Fe),he.z=u*Math.sin(He),Y.push(he.x,he.y,he.z),pe.x=l*Math.cos(Fe),pe.y=l*Math.sin(Fe),me.subVectors(he,pe).normalize(),Q.push(me.x,me.y,me.z),ee.push(Ee/E),ee.push(be/w)}for(let be=1;be<=w;be++)for(let Ee=1;Ee<=E;Ee++){const He=(E+1)*(be-1)+Ee-1,Re=(E+1)*(be-1)+Ee,Se=(E+1)*be+Ee;z.push((E+1)*be+Ee-1,He,Se),z.push(He,Re,Se)}this.setIndex(z),this.setAttribute("position",new Fn(Y,3)),this.setAttribute("normal",new Fn(Q,3)),this.setAttribute("uv",new Fn(ee,2))}}class lb extends yr{constructor(l=1,u=.4,w=64,E=8,R=2,z=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:l,tube:u,tubularSegments:w,radialSegments:E,p:R,q:z},w=Math.floor(w),E=Math.floor(E);const Y=[],Q=[],ee=[],pe=[],he=new je,me=new je,be=new je,Ee=new je,Fe=new je,He=new je,Re=new je;for(let rt=0;rt<=w;++rt){const nt=rt/w*R*Math.PI*2;Se(nt,R,z,l,be),Se(nt+.01,R,z,l,Ee),He.subVectors(Ee,be),Re.addVectors(Ee,be),Fe.crossVectors(He,Re),Re.crossVectors(Fe,He),Fe.normalize(),Re.normalize();for(let ft=0;ft<=E;++ft){const et=ft/E*Math.PI*2,Tt=-u*Math.cos(et),Qt=u*Math.sin(et);he.x=be.x+(Tt*Re.x+Qt*Fe.x),he.y=be.y+(Tt*Re.y+Qt*Fe.y),he.z=be.z+(Tt*Re.z+Qt*Fe.z),Q.push(he.x,he.y,he.z),me.subVectors(he,be).normalize(),ee.push(me.x,me.y,me.z),pe.push(rt/w),pe.push(ft/E)}}for(let rt=1;rt<=w;rt++)for(let nt=1;nt<=E;nt++){const et=(E+1)*rt+(nt-1),Tt=(E+1)*rt+nt,Qt=(E+1)*(rt-1)+nt;Y.push((E+1)*(rt-1)+(nt-1),et,Qt),Y.push(et,Tt,Qt)}function Se(rt,nt,ft,et,Tt){const Qt=Math.cos(rt),zt=Math.sin(rt),Gt=ft/nt*rt,cn=Math.cos(Gt);Tt.x=et*(2+cn)*.5*Qt,Tt.y=et*(2+cn)*zt*.5,Tt.z=et*Math.sin(Gt)*.5}this.setIndex(Y),this.setAttribute("position",new Fn(Q,3)),this.setAttribute("normal",new Fn(ee,3)),this.setAttribute("uv",new Fn(pe,2))}}class Sh extends yr{constructor(l,u=64,w=1,E=8,R=!1){super(),this.type="TubeGeometry",this.parameters={path:l,tubularSegments:u,radius:w,radialSegments:E,closed:R};const z=l.computeFrenetFrames(u,R);this.tangents=z.tangents,this.normals=z.normals,this.binormals=z.binormals;const Y=new je,Q=new je,ee=new Bn;let pe=new je;const he=[],me=[],be=[],Ee=[];function He(rt){pe=l.getPointAt(rt/u,pe);const nt=z.normals[rt],ft=z.binormals[rt];for(let et=0;et<=E;et++){const Tt=et/E*Math.PI*2,Qt=Math.sin(Tt),zt=-Math.cos(Tt);Q.x=zt*nt.x+Qt*ft.x,Q.y=zt*nt.y+Qt*ft.y,Q.z=zt*nt.z+Qt*ft.z,Q.normalize(),me.push(Q.x,Q.y,Q.z),Y.x=pe.x+w*Q.x,Y.y=pe.y+w*Q.y,Y.z=pe.z+w*Q.z,he.push(Y.x,Y.y,Y.z)}}(function Fe(){for(let rt=0;rt<u;rt++)He(rt);He(!1===R?u:0),function Se(){for(let rt=0;rt<=u;rt++)for(let nt=0;nt<=E;nt++)ee.x=rt/u,ee.y=nt/E,be.push(ee.x,ee.y)}(),function Re(){for(let rt=1;rt<=u;rt++)for(let nt=1;nt<=E;nt++){const et=(E+1)*rt+(nt-1),Tt=(E+1)*rt+nt,Qt=(E+1)*(rt-1)+nt;Ee.push((E+1)*(rt-1)+(nt-1),et,Qt),Ee.push(et,Tt,Qt)}}()})(),this.setIndex(Ee),this.setAttribute("position",new Fn(he,3)),this.setAttribute("normal",new Fn(me,3)),this.setAttribute("uv",new Fn(be,2))}toJSON(){const l=yr.prototype.toJSON.call(this);return l.path=this.parameters.path.toJSON(),l}}class cb extends yr{constructor(l){if(super(),this.type="WireframeGeometry",!0===l.isGeometry)return void console.error("THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const u=[],w=[0,0],E={},R=new je;if(null!==l.index){const z=l.attributes.position,Y=l.index;let Q=l.groups;0===Q.length&&(Q=[{start:0,count:Y.count,materialIndex:0}]);for(let ee=0,pe=Q.length;ee<pe;++ee){const he=Q[ee],me=he.start;for(let Ee=me,Fe=me+he.count;Ee<Fe;Ee+=3)for(let He=0;He<3;He++){const Re=Y.getX(Ee+He),Se=Y.getX(Ee+(He+1)%3);w[0]=Math.min(Re,Se),w[1]=Math.max(Re,Se);const rt=w[0]+","+w[1];void 0===E[rt]&&(E[rt]={index1:w[0],index2:w[1]})}}for(const ee in E){const pe=E[ee];R.fromBufferAttribute(z,pe.index1),u.push(R.x,R.y,R.z),R.fromBufferAttribute(z,pe.index2),u.push(R.x,R.y,R.z)}}else{const z=l.attributes.position;for(let Y=0,Q=z.count/3;Y<Q;Y++)for(let ee=0;ee<3;ee++)R.fromBufferAttribute(z,3*Y+ee),u.push(R.x,R.y,R.z),R.fromBufferAttribute(z,3*Y+(ee+1)%3),u.push(R.x,R.y,R.z)}this.setAttribute("position",new Fn(u,3))}}var $c=Object.freeze({__proto__:null,BoxGeometry:Iu,BoxBufferGeometry:Iu,CircleGeometry:Qy,CircleBufferGeometry:Qy,ConeGeometry:$y,ConeBufferGeometry:$y,CylinderGeometry:Eg,CylinderBufferGeometry:Eg,DodecahedronGeometry:fv,DodecahedronBufferGeometry:fv,EdgesGeometry:Vr,ExtrudeGeometry:Wf,ExtrudeBufferGeometry:Wf,IcosahedronGeometry:jx,IcosahedronBufferGeometry:jx,LatheGeometry:Zx,LatheBufferGeometry:Zx,OctahedronGeometry:ab,OctahedronBufferGeometry:ab,ParametricGeometry:Ag,ParametricBufferGeometry:Ag,PlaneGeometry:Zh,PlaneBufferGeometry:Zh,PolyhedronGeometry:Vf,PolyhedronBufferGeometry:Vf,RingGeometry:Ch,RingBufferGeometry:Ch,ShapeGeometry:lm,ShapeBufferGeometry:lm,SphereGeometry:Ig,SphereBufferGeometry:Ig,TetrahedronGeometry:Rg,TetrahedronBufferGeometry:Rg,TextGeometry:pv,TextBufferGeometry:pv,TorusGeometry:kg,TorusBufferGeometry:kg,TorusKnotGeometry:lb,TorusKnotBufferGeometry:lb,TubeGeometry:Sh,TubeBufferGeometry:Sh,WireframeGeometry:cb});class mv extends qo{constructor(l){super(),this.type="ShadowMaterial",this.color=new Ji(0),this.transparent=!0,this.setValues(l)}copy(l){return super.copy(l),this.color.copy(l.color),this}}mv.prototype.isShadowMaterial=!0;class Pg extends ql{constructor(l){super(l),this.type="RawShaderMaterial"}}function Eh(x){qo.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ji(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ji(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ju,this.normalScale=new Bn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.vertexTangents=!1,this.setValues(x)}function qf(x){Eh.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Bn(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(l){this.reflectivity=Ui.clamp(2.5*(l-1)/(l+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(x)}Pg.prototype.isRawShaderMaterial=!0,(Eh.prototype=Object.create(qo.prototype)).constructor=Eh,Eh.prototype.isMeshStandardMaterial=!0,Eh.prototype.copy=function(x){return qo.prototype.copy.call(this,x),this.defines={STANDARD:""},this.color.copy(x.color),this.roughness=x.roughness,this.metalness=x.metalness,this.map=x.map,this.lightMap=x.lightMap,this.lightMapIntensity=x.lightMapIntensity,this.aoMap=x.aoMap,this.aoMapIntensity=x.aoMapIntensity,this.emissive.copy(x.emissive),this.emissiveMap=x.emissiveMap,this.emissiveIntensity=x.emissiveIntensity,this.bumpMap=x.bumpMap,this.bumpScale=x.bumpScale,this.normalMap=x.normalMap,this.normalMapType=x.normalMapType,this.normalScale.copy(x.normalScale),this.displacementMap=x.displacementMap,this.displacementScale=x.displacementScale,this.displacementBias=x.displacementBias,this.roughnessMap=x.roughnessMap,this.metalnessMap=x.metalnessMap,this.alphaMap=x.alphaMap,this.envMap=x.envMap,this.envMapIntensity=x.envMapIntensity,this.refractionRatio=x.refractionRatio,this.wireframe=x.wireframe,this.wireframeLinewidth=x.wireframeLinewidth,this.wireframeLinecap=x.wireframeLinecap,this.wireframeLinejoin=x.wireframeLinejoin,this.skinning=x.skinning,this.morphTargets=x.morphTargets,this.morphNormals=x.morphNormals,this.flatShading=x.flatShading,this.vertexTangents=x.vertexTangents,this},(qf.prototype=Object.create(Eh.prototype)).constructor=qf,qf.prototype.isMeshPhysicalMaterial=!0,qf.prototype.copy=function(x){return Eh.prototype.copy.call(this,x),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=x.clearcoat,this.clearcoatMap=x.clearcoatMap,this.clearcoatRoughness=x.clearcoatRoughness,this.clearcoatRoughnessMap=x.clearcoatRoughnessMap,this.clearcoatNormalMap=x.clearcoatNormalMap,this.clearcoatNormalScale.copy(x.clearcoatNormalScale),this.reflectivity=x.reflectivity,this.sheen=x.sheen?(this.sheen||new Ji).copy(x.sheen):null,this.transmission=x.transmission,this.transmissionMap=x.transmissionMap,this};class ub extends qo{constructor(l){super(),this.type="MeshPhongMaterial",this.color=new Ji(16777215),this.specular=new Ji(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ji(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ju,this.normalScale=new Bn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=kn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(l)}copy(l){return super.copy(l),this.color.copy(l.color),this.specular.copy(l.specular),this.shininess=l.shininess,this.map=l.map,this.lightMap=l.lightMap,this.lightMapIntensity=l.lightMapIntensity,this.aoMap=l.aoMap,this.aoMapIntensity=l.aoMapIntensity,this.emissive.copy(l.emissive),this.emissiveMap=l.emissiveMap,this.emissiveIntensity=l.emissiveIntensity,this.bumpMap=l.bumpMap,this.bumpScale=l.bumpScale,this.normalMap=l.normalMap,this.normalMapType=l.normalMapType,this.normalScale.copy(l.normalScale),this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this.specularMap=l.specularMap,this.alphaMap=l.alphaMap,this.envMap=l.envMap,this.combine=l.combine,this.reflectivity=l.reflectivity,this.refractionRatio=l.refractionRatio,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.wireframeLinecap=l.wireframeLinecap,this.wireframeLinejoin=l.wireframeLinejoin,this.skinning=l.skinning,this.morphTargets=l.morphTargets,this.morphNormals=l.morphNormals,this.flatShading=l.flatShading,this}}ub.prototype.isMeshPhongMaterial=!0;class cm extends qo{constructor(l){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ji(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ji(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ju,this.normalScale=new Bn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(l)}copy(l){return super.copy(l),this.color.copy(l.color),this.map=l.map,this.gradientMap=l.gradientMap,this.lightMap=l.lightMap,this.lightMapIntensity=l.lightMapIntensity,this.aoMap=l.aoMap,this.aoMapIntensity=l.aoMapIntensity,this.emissive.copy(l.emissive),this.emissiveMap=l.emissiveMap,this.emissiveIntensity=l.emissiveIntensity,this.bumpMap=l.bumpMap,this.bumpScale=l.bumpScale,this.normalMap=l.normalMap,this.normalMapType=l.normalMapType,this.normalScale.copy(l.normalScale),this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this.alphaMap=l.alphaMap,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.wireframeLinecap=l.wireframeLinecap,this.wireframeLinejoin=l.wireframeLinejoin,this.skinning=l.skinning,this.morphTargets=l.morphTargets,this.morphNormals=l.morphNormals,this}}cm.prototype.isMeshToonMaterial=!0;class jf extends qo{constructor(l){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ju,this.normalScale=new Bn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(l)}copy(l){return super.copy(l),this.bumpMap=l.bumpMap,this.bumpScale=l.bumpScale,this.normalMap=l.normalMap,this.normalMapType=l.normalMapType,this.normalScale.copy(l.normalScale),this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.skinning=l.skinning,this.morphTargets=l.morphTargets,this.morphNormals=l.morphNormals,this.flatShading=l.flatShading,this}}jf.prototype.isMeshNormalMaterial=!0;class gv extends qo{constructor(l){super(),this.type="MeshLambertMaterial",this.color=new Ji(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ji(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=kn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(l)}copy(l){return super.copy(l),this.color.copy(l.color),this.map=l.map,this.lightMap=l.lightMap,this.lightMapIntensity=l.lightMapIntensity,this.aoMap=l.aoMap,this.aoMapIntensity=l.aoMapIntensity,this.emissive.copy(l.emissive),this.emissiveMap=l.emissiveMap,this.emissiveIntensity=l.emissiveIntensity,this.specularMap=l.specularMap,this.alphaMap=l.alphaMap,this.envMap=l.envMap,this.combine=l.combine,this.reflectivity=l.reflectivity,this.refractionRatio=l.refractionRatio,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.wireframeLinecap=l.wireframeLinecap,this.wireframeLinejoin=l.wireframeLinejoin,this.skinning=l.skinning,this.morphTargets=l.morphTargets,this.morphNormals=l.morphNormals,this}}gv.prototype.isMeshLambertMaterial=!0;class Zf extends qo{constructor(l){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ji(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ju,this.normalScale=new Bn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(l)}copy(l){return super.copy(l),this.defines={MATCAP:""},this.color.copy(l.color),this.matcap=l.matcap,this.map=l.map,this.bumpMap=l.bumpMap,this.bumpScale=l.bumpScale,this.normalMap=l.normalMap,this.normalMapType=l.normalMapType,this.normalScale.copy(l.normalScale),this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this.alphaMap=l.alphaMap,this.skinning=l.skinning,this.morphTargets=l.morphTargets,this.morphNormals=l.morphNormals,this.flatShading=l.flatShading,this}}Zf.prototype.isMeshMatcapMaterial=!0;class um extends yl{constructor(l){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(l)}copy(l){return super.copy(l),this.scale=l.scale,this.dashSize=l.dashSize,this.gapSize=l.gapSize,this}}um.prototype.isLineDashedMaterial=!0;var Lg=Object.freeze({__proto__:null,ShadowMaterial:mv,SpriteMaterial:bg,RawShaderMaterial:Pg,ShaderMaterial:ql,PointsMaterial:Qd,MeshPhysicalMaterial:qf,MeshStandardMaterial:Eh,MeshPhongMaterial:ub,MeshToonMaterial:cm,MeshNormalMaterial:jf,MeshLambertMaterial:gv,MeshDepthMaterial:zy,MeshDistanceMaterial:Vy,MeshBasicMaterial:qc,MeshMatcapMaterial:Zf,LineDashedMaterial:um,LineBasicMaterial:yl,Material:qo});const Ea={arraySlice:function(x,l,u){return Ea.isTypedArray(x)?new x.constructor(x.subarray(l,void 0!==u?u:x.length)):x.slice(l,u)},convertArray:function(x,l,u){return!x||!u&&x.constructor===l?x:"number"==typeof l.BYTES_PER_ELEMENT?new l(x):Array.prototype.slice.call(x)},isTypedArray:function(x){return ArrayBuffer.isView(x)&&!(x instanceof DataView)},getKeyframeOrder:function(x){const u=x.length,w=new Array(u);for(let E=0;E!==u;++E)w[E]=E;return w.sort(function l(E,R){return x[E]-x[R]}),w},sortedArray:function(x,l,u){const w=x.length,E=new x.constructor(w);for(let R=0,z=0;z!==w;++R){const Y=u[R]*l;for(let Q=0;Q!==l;++Q)E[z++]=x[Y+Q]}return E},flattenJSON:function(x,l,u,w){let E=1,R=x[0];for(;void 0!==R&&void 0===R[w];)R=x[E++];if(void 0===R)return;let z=R[w];if(void 0!==z)if(Array.isArray(z))do{z=R[w],void 0!==z&&(l.push(R.time),u.push.apply(u,z)),R=x[E++]}while(void 0!==R);else if(void 0!==z.toArray)do{z=R[w],void 0!==z&&(l.push(R.time),z.toArray(u,u.length)),R=x[E++]}while(void 0!==R);else do{z=R[w],void 0!==z&&(l.push(R.time),u.push(z)),R=x[E++]}while(void 0!==R)},subclip:function(x,l,u,w,E=30){const R=x.clone();R.name=l;const z=[];for(let Q=0;Q<R.tracks.length;++Q){const ee=R.tracks[Q],pe=ee.getValueSize(),he=[],me=[];for(let be=0;be<ee.times.length;++be){const Ee=ee.times[be]*E;if(!(Ee<u||Ee>=w)){he.push(ee.times[be]);for(let Fe=0;Fe<pe;++Fe)me.push(ee.values[be*pe+Fe])}}0!==he.length&&(ee.times=Ea.convertArray(he,ee.times.constructor),ee.values=Ea.convertArray(me,ee.values.constructor),z.push(ee))}R.tracks=z;let Y=1/0;for(let Q=0;Q<R.tracks.length;++Q)Y>R.tracks[Q].times[0]&&(Y=R.tracks[Q].times[0]);for(let Q=0;Q<R.tracks.length;++Q)R.tracks[Q].shift(-1*Y);return R.resetDuration(),R},makeClipAdditive:function(x,l=0,u=x,w=30){w<=0&&(w=30);const E=u.tracks.length,R=l/w;for(let z=0;z<E;++z){const Y=u.tracks[z],Q=Y.ValueTypeName;if("bool"===Q||"string"===Q)continue;const ee=x.tracks.find(function(Re){return Re.name===Y.name&&Re.ValueTypeName===Q});if(void 0===ee)continue;let pe=0;const he=Y.getValueSize();Y.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(pe=he/3);let me=0;const be=ee.getValueSize();ee.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(me=be/3);const Ee=Y.times.length-1;let Fe;if(R<=Y.times[0])Fe=Ea.arraySlice(Y.values,pe,he-pe);else if(R>=Y.times[Ee]){const Re=Ee*he+pe;Fe=Ea.arraySlice(Y.values,Re,Re+he-pe)}else{const Re=Y.createInterpolant(),Se=pe,rt=he-pe;Re.evaluate(R),Fe=Ea.arraySlice(Re.resultBuffer,Se,rt)}"quaternion"===Q&&(new Cs).fromArray(Fe).normalize().conjugate().toArray(Fe);const He=ee.times.length;for(let Re=0;Re<He;++Re){const Se=Re*be+me;if("quaternion"===Q)Cs.multiplyQuaternionsFlat(ee.values,Se,Fe,0,ee.values,Se);else{const rt=be-2*me;for(let nt=0;nt<rt;++nt)ee.values[Se+nt]-=Fe[nt]}}}return x.blendMode=au,x}};function fu(x,l,u,w){this.parameterPositions=x,this._cachedIndex=0,this.resultBuffer=void 0!==w?w:new l.constructor(u),this.sampleValues=l,this.valueSize=u}function _v(x,l,u,w){fu.call(this,x,l,u,w),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function hm(x,l,u,w){fu.call(this,x,l,u,w)}function Fg(x,l,u,w){fu.call(this,x,l,u,w)}Object.assign(fu.prototype,{evaluate:function(x){const l=this.parameterPositions;let u=this._cachedIndex,w=l[u],E=l[u-1];e:{t:{let R;n:{i:if(!(x<w)){for(let z=u+2;;){if(void 0===w){if(x<E)break i;return u=l.length,this._cachedIndex=u,this.afterEnd_(u-1,x,E)}if(u===z)break;if(E=w,w=l[++u],x<w)break t}R=l.length;break n}if(x>=E)break e;{const z=l[1];x<z&&(u=2,E=z);for(let Y=u-2;;){if(void 0===E)return this._cachedIndex=0,this.beforeStart_(0,x,w);if(u===Y)break;if(w=E,E=l[--u-1],x>=E)break t}R=u,u=0}}for(;u<R;){const z=u+R>>>1;x<l[z]?R=z:u=z+1}if(w=l[u],E=l[u-1],void 0===E)return this._cachedIndex=0,this.beforeStart_(0,x,w);if(void 0===w)return u=l.length,this._cachedIndex=u,this.afterEnd_(u-1,E,x)}this._cachedIndex=u,this.intervalChanged_(u,E,w)}return this.interpolate_(u,E,x,w)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(x){const l=this.resultBuffer,u=this.sampleValues,w=this.valueSize,E=x*w;for(let R=0;R!==w;++R)l[R]=u[E+R];return l},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(fu.prototype,{beforeStart_:fu.prototype.copySampleValue_,afterEnd_:fu.prototype.copySampleValue_}),_v.prototype=Object.assign(Object.create(fu.prototype),{constructor:_v,DefaultSettings_:{endingStart:ah,endingEnd:ah},intervalChanged_:function(x,l,u){const w=this.parameterPositions;let E=x-2,R=x+1,z=w[E],Y=w[R];if(void 0===z)switch(this.getSettings_().endingStart){case Ai:E=x,z=2*l-u;break;case wd:E=w.length-2,z=l+w[E]-w[E+1];break;default:E=x,z=u}if(void 0===Y)switch(this.getSettings_().endingEnd){case Ai:R=x,Y=2*u-l;break;case wd:R=1,Y=u+w[1]-w[0];break;default:R=x-1,Y=l}const Q=.5*(u-l),ee=this.valueSize;this._weightPrev=Q/(l-z),this._weightNext=Q/(Y-u),this._offsetPrev=E*ee,this._offsetNext=R*ee},interpolate_:function(x,l,u,w){const E=this.resultBuffer,R=this.sampleValues,z=this.valueSize,Y=x*z,Q=Y-z,ee=this._offsetPrev,pe=this._offsetNext,he=this._weightPrev,me=this._weightNext,be=(u-l)/(w-l),Ee=be*be,Fe=Ee*be,He=-he*Fe+2*he*Ee-he*be,Re=(1+he)*Fe+(-1.5-2*he)*Ee+(-.5+he)*be+1,Se=(-1-me)*Fe+(1.5+me)*Ee+.5*be,rt=me*Fe-me*Ee;for(let nt=0;nt!==z;++nt)E[nt]=He*R[ee+nt]+Re*R[Q+nt]+Se*R[Y+nt]+rt*R[pe+nt];return E}}),hm.prototype=Object.assign(Object.create(fu.prototype),{constructor:hm,interpolate_:function(x,l,u,w){const E=this.resultBuffer,R=this.sampleValues,z=this.valueSize,Y=x*z,Q=Y-z,ee=(u-l)/(w-l),pe=1-ee;for(let he=0;he!==z;++he)E[he]=R[Q+he]*pe+R[Y+he]*ee;return E}}),Fg.prototype=Object.assign(Object.create(fu.prototype),{constructor:Fg,interpolate_:function(x){return this.copySampleValue_(x-1)}});class th{constructor(l,u,w,E){if(void 0===l)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===u||0===u.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+l);this.name=l,this.times=Ea.convertArray(u,this.TimeBufferType),this.values=Ea.convertArray(w,this.ValueBufferType),this.setInterpolation(E||this.DefaultInterpolation)}static toJSON(l){const u=l.constructor;let w;if(u.toJSON!==this.toJSON)w=u.toJSON(l);else{w={name:l.name,times:Ea.convertArray(l.times,Array),values:Ea.convertArray(l.values,Array)};const E=l.getInterpolation();E!==l.DefaultInterpolation&&(w.interpolation=E)}return w.type=l.ValueTypeName,w}InterpolantFactoryMethodDiscrete(l){return new Fg(this.times,this.values,this.getValueSize(),l)}InterpolantFactoryMethodLinear(l){return new hm(this.times,this.values,this.getValueSize(),l)}InterpolantFactoryMethodSmooth(l){return new _v(this.times,this.values,this.getValueSize(),l)}setInterpolation(l){let u;switch(l){case xo:u=this.InterpolantFactoryMethodDiscrete;break;case vf:u=this.InterpolantFactoryMethodLinear;break;case xd:u=this.InterpolantFactoryMethodSmooth}if(void 0===u){const w="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(l===this.DefaultInterpolation)throw new Error(w);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",w),this}return this.createInterpolant=u,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return xo;case this.InterpolantFactoryMethodLinear:return vf;case this.InterpolantFactoryMethodSmooth:return xd}}getValueSize(){return this.values.length/this.times.length}shift(l){if(0!==l){const u=this.times;for(let w=0,E=u.length;w!==E;++w)u[w]+=l}return this}scale(l){if(1!==l){const u=this.times;for(let w=0,E=u.length;w!==E;++w)u[w]*=l}return this}trim(l,u){const w=this.times,E=w.length;let R=0,z=E-1;for(;R!==E&&w[R]<l;)++R;for(;-1!==z&&w[z]>u;)--z;if(++z,0!==R||z!==E){R>=z&&(z=Math.max(z,1),R=z-1);const Y=this.getValueSize();this.times=Ea.arraySlice(w,R,z),this.values=Ea.arraySlice(this.values,R*Y,z*Y)}return this}validate(){let l=!0;const u=this.getValueSize();u-Math.floor(u)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),l=!1);const w=this.times,E=this.values,R=w.length;0===R&&(console.error("THREE.KeyframeTrack: Track is empty.",this),l=!1);let z=null;for(let Y=0;Y!==R;Y++){const Q=w[Y];if("number"==typeof Q&&isNaN(Q)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,Y,Q),l=!1;break}if(null!==z&&z>Q){console.error("THREE.KeyframeTrack: Out of order keys.",this,Y,Q,z),l=!1;break}z=Q}if(void 0!==E&&Ea.isTypedArray(E))for(let Y=0,Q=E.length;Y!==Q;++Y){const ee=E[Y];if(isNaN(ee)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,Y,ee),l=!1;break}}return l}optimize(){const l=Ea.arraySlice(this.times),u=Ea.arraySlice(this.values),w=this.getValueSize(),E=this.getInterpolation()===xd,R=l.length-1;let z=1;for(let Y=1;Y<R;++Y){let Q=!1;const ee=l[Y];if(ee!==l[Y+1]&&(1!==Y||ee!==l[0]))if(E)Q=!0;else{const he=Y*w,me=he-w,be=he+w;for(let Ee=0;Ee!==w;++Ee){const Fe=u[he+Ee];if(Fe!==u[me+Ee]||Fe!==u[be+Ee]){Q=!0;break}}}if(Q){if(Y!==z){l[z]=l[Y];const he=Y*w,me=z*w;for(let be=0;be!==w;++be)u[me+be]=u[he+be]}++z}}if(R>0){l[z]=l[R];for(let Y=R*w,Q=z*w,ee=0;ee!==w;++ee)u[Q+ee]=u[Y+ee];++z}return z!==l.length?(this.times=Ea.arraySlice(l,0,z),this.values=Ea.arraySlice(u,0,z*w)):(this.times=l,this.values=u),this}clone(){const l=Ea.arraySlice(this.times,0),u=Ea.arraySlice(this.values,0),E=new(0,this.constructor)(this.name,l,u);return E.createInterpolant=this.createInterpolant,E}}th.prototype.TimeBufferType=Float32Array,th.prototype.ValueBufferType=Float32Array,th.prototype.DefaultInterpolation=vf;class Qh extends th{}Qh.prototype.ValueTypeName="bool",Qh.prototype.ValueBufferType=Array,Qh.prototype.DefaultInterpolation=xo,Qh.prototype.InterpolantFactoryMethodLinear=void 0,Qh.prototype.InterpolantFactoryMethodSmooth=void 0;class Yx extends th{}Yx.prototype.ValueTypeName="color";class Og extends th{}function Xx(x,l,u,w){fu.call(this,x,l,u,w)}Og.prototype.ValueTypeName="number",Xx.prototype=Object.assign(Object.create(fu.prototype),{constructor:Xx,interpolate_:function(x,l,u,w){const E=this.resultBuffer,R=this.sampleValues,z=this.valueSize,Y=(u-l)/(w-l);let Q=x*z;for(let ee=Q+z;Q!==ee;Q+=4)Cs.slerpFlat(E,0,R,Q-z,R,Q,Y);return E}});class dm extends th{InterpolantFactoryMethodLinear(l){return new Xx(this.times,this.values,this.getValueSize(),l)}}dm.prototype.ValueTypeName="quaternion",dm.prototype.DefaultInterpolation=vf,dm.prototype.InterpolantFactoryMethodSmooth=void 0;class Yf extends th{}Yf.prototype.ValueTypeName="string",Yf.prototype.ValueBufferType=Array,Yf.prototype.DefaultInterpolation=xo,Yf.prototype.InterpolantFactoryMethodLinear=void 0,Yf.prototype.InterpolantFactoryMethodSmooth=void 0;class vv extends th{}vv.prototype.ValueTypeName="vector";class Ng{constructor(l,u=-1,w,E=Ms){this.name=l,this.tracks=w,this.duration=u,this.blendMode=E,this.uuid=Ui.generateUUID(),this.duration<0&&this.resetDuration()}static parse(l){const u=[],w=l.tracks,E=1/(l.fps||1);for(let z=0,Y=w.length;z!==Y;++z)u.push(BD(w[z]).scale(E));const R=new this(l.name,l.duration,u,l.blendMode);return R.uuid=l.uuid,R}static toJSON(l){const u=[],w=l.tracks,E={name:l.name,duration:l.duration,tracks:u,uuid:l.uuid,blendMode:l.blendMode};for(let R=0,z=w.length;R!==z;++R)u.push(th.toJSON(w[R]));return E}static CreateFromMorphTargetSequence(l,u,w,E){const R=u.length,z=[];for(let Y=0;Y<R;Y++){let Q=[],ee=[];Q.push((Y+R-1)%R,Y,(Y+1)%R),ee.push(0,1,0);const pe=Ea.getKeyframeOrder(Q);Q=Ea.sortedArray(Q,1,pe),ee=Ea.sortedArray(ee,1,pe),!E&&0===Q[0]&&(Q.push(R),ee.push(ee[0])),z.push(new Og(".morphTargetInfluences["+u[Y].name+"]",Q,ee).scale(1/w))}return new this(l,-1,z)}static findByName(l,u){let w=l;if(!Array.isArray(l)){const E=l;w=E.geometry&&E.geometry.animations||E.animations}for(let E=0;E<w.length;E++)if(w[E].name===u)return w[E];return null}static CreateClipsFromMorphTargetSequences(l,u,w){const E={},R=/^([\w-]*?)([\d]+)$/;for(let Y=0,Q=l.length;Y<Q;Y++){const ee=l[Y],pe=ee.name.match(R);if(pe&&pe.length>1){const he=pe[1];let me=E[he];me||(E[he]=me=[]),me.push(ee)}}const z=[];for(const Y in E)z.push(this.CreateFromMorphTargetSequence(Y,E[Y],u,w));return z}static parseAnimation(l,u){if(!l)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const w=function(he,me,be,Ee,Fe){if(0!==be.length){const He=[],Re=[];Ea.flattenJSON(be,He,Re,Ee),0!==He.length&&Fe.push(new he(me,He,Re))}},E=[],R=l.name||"default",z=l.fps||30,Y=l.blendMode;let Q=l.length||-1;const ee=l.hierarchy||[];for(let he=0;he<ee.length;he++){const me=ee[he].keys;if(me&&0!==me.length)if(me[0].morphTargets){const be={};let Ee;for(Ee=0;Ee<me.length;Ee++)if(me[Ee].morphTargets)for(let Fe=0;Fe<me[Ee].morphTargets.length;Fe++)be[me[Ee].morphTargets[Fe]]=-1;for(const Fe in be){const He=[],Re=[];for(let Se=0;Se!==me[Ee].morphTargets.length;++Se){const rt=me[Ee];He.push(rt.time),Re.push(rt.morphTarget===Fe?1:0)}E.push(new Og(".morphTargetInfluence["+Fe+"]",He,Re))}Q=be.length*(z||1)}else{const be=".bones["+u[he].name+"]";w(vv,be+".position",me,"pos",E),w(dm,be+".quaternion",me,"rot",E),w(vv,be+".scale",me,"scl",E)}}return 0===E.length?null:new this(R,Q,E,Y)}resetDuration(){let u=0;for(let w=0,E=this.tracks.length;w!==E;++w){const R=this.tracks[w];u=Math.max(u,R.times[R.times.length-1])}return this.duration=u,this}trim(){for(let l=0;l<this.tracks.length;l++)this.tracks[l].trim(0,this.duration);return this}validate(){let l=!0;for(let u=0;u<this.tracks.length;u++)l=l&&this.tracks[u].validate();return l}optimize(){for(let l=0;l<this.tracks.length;l++)this.tracks[l].optimize();return this}clone(){const l=[];for(let u=0;u<this.tracks.length;u++)l.push(this.tracks[u].clone());return new this.constructor(this.name,this.duration,l,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function BD(x){if(void 0===x.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const l=function ND(x){switch(x.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Og;case"vector":case"vector2":case"vector3":case"vector4":return vv;case"color":return Yx;case"quaternion":return dm;case"bool":case"boolean":return Qh;case"string":return Yf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+x)}(x.type);if(void 0===x.times){const u=[],w=[];Ea.flattenJSON(x.keys,u,w,"value"),x.times=u,x.values=w}return void 0!==l.parse?l.parse(x):new l(x.name,x.times,x.values,x.interpolation)}const Zl={enabled:!1,files:{},add:function(x,l){!1!==this.enabled&&(this.files[x]=l)},get:function(x){if(!1!==this.enabled)return this.files[x]},remove:function(x){delete this.files[x]},clear:function(){this.files={}}};function Jx(x,l,u){const w=this;let Y,E=!1,R=0,z=0;const Q=[];this.onStart=void 0,this.onLoad=x,this.onProgress=l,this.onError=u,this.itemStart=function(ee){z++,!1===E&&void 0!==w.onStart&&w.onStart(ee,R,z),E=!0},this.itemEnd=function(ee){R++,void 0!==w.onProgress&&w.onProgress(ee,R,z),R===z&&(E=!1,void 0!==w.onLoad&&w.onLoad())},this.itemError=function(ee){void 0!==w.onError&&w.onError(ee)},this.resolveURL=function(ee){return Y?Y(ee):ee},this.setURLModifier=function(ee){return Y=ee,this},this.addHandler=function(ee,pe){return Q.push(ee,pe),this},this.removeHandler=function(ee){const pe=Q.indexOf(ee);return-1!==pe&&Q.splice(pe,2),this},this.getHandler=function(ee){for(let pe=0,he=Q.length;pe<he;pe+=2){const me=Q[pe],be=Q[pe+1];if(me.global&&(me.lastIndex=0),me.test(ee))return be}return null}}const YM=new Jx;function bl(x){this.manager=void 0!==x?x:YM,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(bl.prototype,{load:function(){},loadAsync:function(x,l){const u=this;return new Promise(function(w,E){u.load(x,w,l,E)})},parse:function(){},setCrossOrigin:function(x){return this.crossOrigin=x,this},setWithCredentials:function(x){return this.withCredentials=x,this},setPath:function(x){return this.path=x,this},setResourcePath:function(x){return this.resourcePath=x,this},setRequestHeader:function(x){return this.requestHeader=x,this}});const $h={};function Nu(x){bl.call(this,x)}Nu.prototype=Object.assign(Object.create(bl.prototype),{constructor:Nu,load:function(x,l,u,w){void 0===x&&(x=""),void 0!==this.path&&(x=this.path+x),x=this.manager.resolveURL(x);const E=this,R=Zl.get(x);if(void 0!==R)return E.manager.itemStart(x),setTimeout(function(){l&&l(R),E.manager.itemEnd(x)},0),R;if(void 0!==$h[x])return void $h[x].push({onLoad:l,onProgress:u,onError:w});const Y=x.match(/^data:(.*?)(;base64)?,(.*)$/);let Q;if(Y){const ee=Y[1],pe=!!Y[2];let he=Y[3];he=decodeURIComponent(he),pe&&(he=atob(he));try{let me;const be=(this.responseType||"").toLowerCase();switch(be){case"arraybuffer":case"blob":const Ee=new Uint8Array(he.length);for(let He=0;He<he.length;He++)Ee[He]=he.charCodeAt(He);me="blob"===be?new Blob([Ee.buffer],{type:ee}):Ee.buffer;break;case"document":me=(new DOMParser).parseFromString(he,ee);break;case"json":me=JSON.parse(he);break;default:me=he}setTimeout(function(){l&&l(me),E.manager.itemEnd(x)},0)}catch(me){setTimeout(function(){w&&w(me),E.manager.itemError(x),E.manager.itemEnd(x)},0)}}else{$h[x]=[],$h[x].push({onLoad:l,onProgress:u,onError:w}),Q=new XMLHttpRequest,Q.open("GET",x,!0),Q.addEventListener("load",function(ee){const pe=this.response,he=$h[x];if(delete $h[x],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Zl.add(x,pe);for(let me=0,be=he.length;me<be;me++){const Ee=he[me];Ee.onLoad&&Ee.onLoad(pe)}E.manager.itemEnd(x)}else{for(let me=0,be=he.length;me<be;me++){const Ee=he[me];Ee.onError&&Ee.onError(ee)}E.manager.itemError(x),E.manager.itemEnd(x)}},!1),Q.addEventListener("progress",function(ee){const pe=$h[x];for(let he=0,me=pe.length;he<me;he++){const be=pe[he];be.onProgress&&be.onProgress(ee)}},!1),Q.addEventListener("error",function(ee){const pe=$h[x];delete $h[x];for(let he=0,me=pe.length;he<me;he++){const be=pe[he];be.onError&&be.onError(ee)}E.manager.itemError(x),E.manager.itemEnd(x)},!1),Q.addEventListener("abort",function(ee){const pe=$h[x];delete $h[x];for(let he=0,me=pe.length;he<me;he++){const be=pe[he];be.onError&&be.onError(ee)}E.manager.itemError(x),E.manager.itemEnd(x)},!1),void 0!==this.responseType&&(Q.responseType=this.responseType),void 0!==this.withCredentials&&(Q.withCredentials=this.withCredentials),Q.overrideMimeType&&Q.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const ee in this.requestHeader)Q.setRequestHeader(ee,this.requestHeader[ee]);Q.send(null)}return E.manager.itemStart(x),Q},setResponseType:function(x){return this.responseType=x,this},setMimeType:function(x){return this.mimeType=x,this}});class MP extends bl{constructor(l){super(l)}load(l,u,w,E){const R=this,z=new Nu(this.manager);z.setPath(this.path),z.setRequestHeader(this.requestHeader),z.setWithCredentials(this.withCredentials),z.load(l,function(Y){try{u(R.parse(JSON.parse(Y)))}catch(Q){E?E(Q):console.error(Q),R.manager.itemError(l)}},w,E)}parse(l){const u=[];for(let w=0;w<l.length;w++){const E=Ng.parse(l[w]);u.push(E)}return u}}function Kx(x){bl.call(this,x)}Kx.prototype=Object.assign(Object.create(bl.prototype),{constructor:Kx,load:function(x,l,u,w){const E=this,R=[],z=new Ou,Y=new Nu(this.manager);Y.setPath(this.path),Y.setResponseType("arraybuffer"),Y.setRequestHeader(this.requestHeader),Y.setWithCredentials(E.withCredentials);let Q=0;function ee(pe){Y.load(x[pe],function(he){const me=E.parse(he,!0);R[pe]={width:me.width,height:me.height,format:me.format,mipmaps:me.mipmaps},Q+=1,6===Q&&(1===me.mipmapCount&&(z.minFilter=Xi),z.image=R,z.format=me.format,z.needsUpdate=!0,l&&l(z))},u,w)}if(Array.isArray(x))for(let pe=0,he=x.length;pe<he;++pe)ee(pe);else Y.load(x,function(pe){const he=E.parse(pe,!0);if(he.isCubemap){const me=he.mipmaps.length/he.mipmapCount;for(let be=0;be<me;be++){R[be]={mipmaps:[]};for(let Ee=0;Ee<he.mipmapCount;Ee++)R[be].mipmaps.push(he.mipmaps[be*he.mipmapCount+Ee]),R[be].format=he.format,R[be].width=he.width,R[be].height=he.height}z.image=R}else z.image.width=he.width,z.image.height=he.height,z.mipmaps=he.mipmaps;1===he.mipmapCount&&(z.minFilter=Xi),z.format=he.format,z.needsUpdate=!0,l&&l(z)},u,w);return z}});class Bg extends bl{constructor(l){super(l)}load(l,u,w,E){void 0!==this.path&&(l=this.path+l),l=this.manager.resolveURL(l);const R=this,z=Zl.get(l);if(void 0!==z)return R.manager.itemStart(l),setTimeout(function(){u&&u(z),R.manager.itemEnd(l)},0),z;const Y=document.createElementNS("http://www.w3.org/1999/xhtml","img");function Q(){Y.removeEventListener("load",Q,!1),Y.removeEventListener("error",ee,!1),Zl.add(l,this),u&&u(this),R.manager.itemEnd(l)}function ee(pe){Y.removeEventListener("load",Q,!1),Y.removeEventListener("error",ee,!1),E&&E(pe),R.manager.itemError(l),R.manager.itemEnd(l)}return Y.addEventListener("load",Q,!1),Y.addEventListener("error",ee,!1),"data:"!==l.substr(0,5)&&void 0!==this.crossOrigin&&(Y.crossOrigin=this.crossOrigin),R.manager.itemStart(l),Y.src=l,Y}}class Qx extends bl{constructor(l){super(l)}load(l,u,w,E){const R=new yc,z=new Bg(this.manager);z.setCrossOrigin(this.crossOrigin),z.setPath(this.path);let Y=0;function Q(ee){z.load(l[ee],function(pe){R.images[ee]=pe,Y++,6===Y&&(R.needsUpdate=!0,u&&u(R))},void 0,E)}for(let ee=0;ee<l.length;++ee)Q(ee);return R}}function hb(x){bl.call(this,x)}function db(x){bl.call(this,x)}function eu(){this.type="Curve",this.arcLengthDivisions=200}hb.prototype=Object.assign(Object.create(bl.prototype),{constructor:hb,load:function(x,l,u,w){const E=this,R=new Bd,z=new Nu(this.manager);return z.setResponseType("arraybuffer"),z.setRequestHeader(this.requestHeader),z.setPath(this.path),z.setWithCredentials(E.withCredentials),z.load(x,function(Y){const Q=E.parse(Y);!Q||(void 0!==Q.image?R.image=Q.image:void 0!==Q.data&&(R.image.width=Q.width,R.image.height=Q.height,R.image.data=Q.data),R.wrapS=void 0!==Q.wrapS?Q.wrapS:es,R.wrapT=void 0!==Q.wrapT?Q.wrapT:es,R.magFilter=void 0!==Q.magFilter?Q.magFilter:Xi,R.minFilter=void 0!==Q.minFilter?Q.minFilter:Xi,R.anisotropy=void 0!==Q.anisotropy?Q.anisotropy:1,void 0!==Q.encoding&&(R.encoding=Q.encoding),void 0!==Q.flipY&&(R.flipY=Q.flipY),void 0!==Q.format&&(R.format=Q.format),void 0!==Q.type&&(R.type=Q.type),void 0!==Q.mipmaps&&(R.mipmaps=Q.mipmaps,R.minFilter=k),1===Q.mipmapCount&&(R.minFilter=Xi),R.needsUpdate=!0,l&&l(R,Q))},u,w),R}}),db.prototype=Object.assign(Object.create(bl.prototype),{constructor:db,load:function(x,l,u,w){const E=new Ar,R=new Bg(this.manager);return R.setCrossOrigin(this.crossOrigin),R.setPath(this.path),R.load(x,function(z){E.image=z;const Y=x.search(/\.jpe?g($|\?)/i)>0||0===x.search(/^data\:image\/jpeg/);E.format=Y?Kt:gn,E.needsUpdate=!0,void 0!==l&&l(E)},u,w),E}}),Object.assign(eu.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(x,l){const u=this.getUtoTmapping(x);return this.getPoint(u,l)},getPoints:function(x=5){const l=[];for(let u=0;u<=x;u++)l.push(this.getPoint(u/x));return l},getSpacedPoints:function(x=5){const l=[];for(let u=0;u<=x;u++)l.push(this.getPointAt(u/x));return l},getLength:function(){const x=this.getLengths();return x[x.length-1]},getLengths:function(x){if(void 0===x&&(x=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===x+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const l=[];let u,w=this.getPoint(0),E=0;l.push(0);for(let R=1;R<=x;R++)u=this.getPoint(R/x),E+=u.distanceTo(w),l.push(E),w=u;return this.cacheArcLengths=l,l},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(x,l){const u=this.getLengths();let w=0;const E=u.length;let R;R=l||x*u[E-1];let Q,z=0,Y=E-1;for(;z<=Y;)if(w=Math.floor(z+(Y-z)/2),Q=u[w]-R,Q<0)z=w+1;else{if(!(Q>0)){Y=w;break}Y=w-1}if(w=Y,u[w]===R)return w/(E-1);const ee=u[w];return(w+(R-ee)/(u[w+1]-ee))/(E-1)},getTangent:function(x,l){let w=x-1e-4,E=x+1e-4;w<0&&(w=0),E>1&&(E=1);const R=this.getPoint(w),z=this.getPoint(E),Y=l||(R.isVector2?new Bn:new je);return Y.copy(z).sub(R).normalize(),Y},getTangentAt:function(x,l){const u=this.getUtoTmapping(x);return this.getTangent(u,l)},computeFrenetFrames:function(x,l){const u=new je,w=[],E=[],R=[],z=new je,Y=new hr;for(let me=0;me<=x;me++)w[me]=this.getTangentAt(me/x,new je),w[me].normalize();E[0]=new je,R[0]=new je;let Q=Number.MAX_VALUE;const ee=Math.abs(w[0].x),pe=Math.abs(w[0].y),he=Math.abs(w[0].z);ee<=Q&&(Q=ee,u.set(1,0,0)),pe<=Q&&(Q=pe,u.set(0,1,0)),he<=Q&&u.set(0,0,1),z.crossVectors(w[0],u).normalize(),E[0].crossVectors(w[0],z),R[0].crossVectors(w[0],E[0]);for(let me=1;me<=x;me++){if(E[me]=E[me-1].clone(),R[me]=R[me-1].clone(),z.crossVectors(w[me-1],w[me]),z.length()>Number.EPSILON){z.normalize();const be=Math.acos(Ui.clamp(w[me-1].dot(w[me]),-1,1));E[me].applyMatrix4(Y.makeRotationAxis(z,be))}R[me].crossVectors(w[me],E[me])}if(!0===l){let me=Math.acos(Ui.clamp(E[0].dot(E[x]),-1,1));me/=x,w[0].dot(z.crossVectors(E[0],E[x]))>0&&(me=-me);for(let be=1;be<=x;be++)E[be].applyMatrix4(Y.makeRotationAxis(w[be],me*be)),R[be].crossVectors(w[be],E[be])}return{tangents:w,normals:E,binormals:R}},clone:function(){return(new this.constructor).copy(this)},copy:function(x){return this.arcLengthDivisions=x.arcLengthDivisions,this},toJSON:function(){const x={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return x.arcLengthDivisions=this.arcLengthDivisions,x.type=this.type,x},fromJSON:function(x){return this.arcLengthDivisions=x.arcLengthDivisions,this}});class Hg extends eu{constructor(l=0,u=0,w=1,E=1,R=0,z=2*Math.PI,Y=!1,Q=0){super(),this.type="EllipseCurve",this.aX=l,this.aY=u,this.xRadius=w,this.yRadius=E,this.aStartAngle=R,this.aEndAngle=z,this.aClockwise=Y,this.aRotation=Q}getPoint(l,u){const w=u||new Bn,E=2*Math.PI;let R=this.aEndAngle-this.aStartAngle;const z=Math.abs(R)<Number.EPSILON;for(;R<0;)R+=E;for(;R>E;)R-=E;R<Number.EPSILON&&(R=z?0:E),!0===this.aClockwise&&!z&&(R===E?R=-E:R-=E);const Y=this.aStartAngle+l*R;let Q=this.aX+this.xRadius*Math.cos(Y),ee=this.aY+this.yRadius*Math.sin(Y);if(0!==this.aRotation){const pe=Math.cos(this.aRotation),he=Math.sin(this.aRotation),me=Q-this.aX,be=ee-this.aY;Q=me*pe-be*he+this.aX,ee=me*he+be*pe+this.aY}return w.set(Q,ee)}copy(l){return super.copy(l),this.aX=l.aX,this.aY=l.aY,this.xRadius=l.xRadius,this.yRadius=l.yRadius,this.aStartAngle=l.aStartAngle,this.aEndAngle=l.aEndAngle,this.aClockwise=l.aClockwise,this.aRotation=l.aRotation,this}toJSON(){const l=super.toJSON();return l.aX=this.aX,l.aY=this.aY,l.xRadius=this.xRadius,l.yRadius=this.yRadius,l.aStartAngle=this.aStartAngle,l.aEndAngle=this.aEndAngle,l.aClockwise=this.aClockwise,l.aRotation=this.aRotation,l}fromJSON(l){return super.fromJSON(l),this.aX=l.aX,this.aY=l.aY,this.xRadius=l.xRadius,this.yRadius=l.yRadius,this.aStartAngle=l.aStartAngle,this.aEndAngle=l.aEndAngle,this.aClockwise=l.aClockwise,this.aRotation=l.aRotation,this}}Hg.prototype.isEllipseCurve=!0;class $x extends Hg{constructor(l,u,w,E,R,z){super(l,u,w,w,E,R,z),this.type="ArcCurve"}}function fb(){let x=0,l=0,u=0,w=0;function E(R,z,Y,Q){x=R,l=Y,u=-3*R+3*z-2*Y-Q,w=2*R-2*z+Y+Q}return{initCatmullRom:function(R,z,Y,Q,ee){E(z,Y,ee*(Y-R),ee*(Q-z))},initNonuniformCatmullRom:function(R,z,Y,Q,ee,pe,he){let me=(z-R)/ee-(Y-R)/(ee+pe)+(Y-z)/pe,be=(Y-z)/pe-(Q-z)/(pe+he)+(Q-Y)/he;me*=pe,be*=pe,E(z,Y,me,be)},calc:function(R){const z=R*R;return x+l*R+u*z+w*(z*R)}}}$x.prototype.isArcCurve=!0;const pb=new je,ew=new fb,mb=new fb,gb=new fb;class tw extends eu{constructor(l=[],u=!1,w="centripetal",E=.5){super(),this.type="CatmullRomCurve3",this.points=l,this.closed=u,this.curveType=w,this.tension=E}getPoint(l,u=new je){const w=u,E=this.points,R=E.length,z=(R-(this.closed?0:1))*l;let ee,pe,Y=Math.floor(z),Q=z-Y;this.closed?Y+=Y>0?0:(Math.floor(Math.abs(Y)/R)+1)*R:0===Q&&Y===R-1&&(Y=R-2,Q=1),this.closed||Y>0?ee=E[(Y-1)%R]:(pb.subVectors(E[0],E[1]).add(E[0]),ee=pb);const he=E[Y%R],me=E[(Y+1)%R];if(this.closed||Y+2<R?pe=E[(Y+2)%R]:(pb.subVectors(E[R-1],E[R-2]).add(E[R-1]),pe=pb),"centripetal"===this.curveType||"chordal"===this.curveType){const be="chordal"===this.curveType?.5:.25;let Ee=Math.pow(ee.distanceToSquared(he),be),Fe=Math.pow(he.distanceToSquared(me),be),He=Math.pow(me.distanceToSquared(pe),be);Fe<1e-4&&(Fe=1),Ee<1e-4&&(Ee=Fe),He<1e-4&&(He=Fe),ew.initNonuniformCatmullRom(ee.x,he.x,me.x,pe.x,Ee,Fe,He),mb.initNonuniformCatmullRom(ee.y,he.y,me.y,pe.y,Ee,Fe,He),gb.initNonuniformCatmullRom(ee.z,he.z,me.z,pe.z,Ee,Fe,He)}else"catmullrom"===this.curveType&&(ew.initCatmullRom(ee.x,he.x,me.x,pe.x,this.tension),mb.initCatmullRom(ee.y,he.y,me.y,pe.y,this.tension),gb.initCatmullRom(ee.z,he.z,me.z,pe.z,this.tension));return w.set(ew.calc(Q),mb.calc(Q),gb.calc(Q)),w}copy(l){super.copy(l),this.points=[];for(let u=0,w=l.points.length;u<w;u++)this.points.push(l.points[u].clone());return this.closed=l.closed,this.curveType=l.curveType,this.tension=l.tension,this}toJSON(){const l=super.toJSON();l.points=[];for(let u=0,w=this.points.length;u<w;u++)l.points.push(this.points[u].toArray());return l.closed=this.closed,l.curveType=this.curveType,l.tension=this.tension,l}fromJSON(l){super.fromJSON(l),this.points=[];for(let u=0,w=l.points.length;u<w;u++){const E=l.points[u];this.points.push((new je).fromArray(E))}return this.closed=l.closed,this.curveType=l.curveType,this.tension=l.tension,this}}function Th(x,l,u,w,E){const R=.5*(w-l),z=.5*(E-u),Y=x*x;return(2*u-2*w+R+z)*(x*Y)+(-3*u+3*w-2*R-z)*Y+R*x+u}function vb(x,l,u,w){return function nw(x,l){const u=1-x;return u*u*l}(x,l)+function HD(x,l){return 2*(1-x)*x*l}(x,u)+function zD(x,l){return x*x*l}(x,w)}function fm(x,l,u,w,E){return function XM(x,l){const u=1-x;return u*u*u*l}(x,l)+function VD(x,l){const u=1-x;return 3*u*u*x*l}(x,u)+function UD(x,l){return 3*(1-x)*x*x*l}(x,w)+function GD(x,l){return x*x*x*l}(x,E)}tw.prototype.isCatmullRomCurve3=!0;class yb extends eu{constructor(l=new Bn,u=new Bn,w=new Bn,E=new Bn){super(),this.type="CubicBezierCurve",this.v0=l,this.v1=u,this.v2=w,this.v3=E}getPoint(l,u=new Bn){const w=u,E=this.v0,R=this.v1,z=this.v2,Y=this.v3;return w.set(fm(l,E.x,R.x,z.x,Y.x),fm(l,E.y,R.y,z.y,Y.y)),w}copy(l){return super.copy(l),this.v0.copy(l.v0),this.v1.copy(l.v1),this.v2.copy(l.v2),this.v3.copy(l.v3),this}toJSON(){const l=super.toJSON();return l.v0=this.v0.toArray(),l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l.v3=this.v3.toArray(),l}fromJSON(l){return super.fromJSON(l),this.v0.fromArray(l.v0),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this.v3.fromArray(l.v3),this}}yb.prototype.isCubicBezierCurve=!0;class iw extends eu{constructor(l=new je,u=new je,w=new je,E=new je){super(),this.type="CubicBezierCurve3",this.v0=l,this.v1=u,this.v2=w,this.v3=E}getPoint(l,u=new je){const w=u,E=this.v0,R=this.v1,z=this.v2,Y=this.v3;return w.set(fm(l,E.x,R.x,z.x,Y.x),fm(l,E.y,R.y,z.y,Y.y),fm(l,E.z,R.z,z.z,Y.z)),w}copy(l){return super.copy(l),this.v0.copy(l.v0),this.v1.copy(l.v1),this.v2.copy(l.v2),this.v3.copy(l.v3),this}toJSON(){const l=super.toJSON();return l.v0=this.v0.toArray(),l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l.v3=this.v3.toArray(),l}fromJSON(l){return super.fromJSON(l),this.v0.fromArray(l.v0),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this.v3.fromArray(l.v3),this}}iw.prototype.isCubicBezierCurve3=!0;class Xf extends eu{constructor(l=new Bn,u=new Bn){super(),this.type="LineCurve",this.v1=l,this.v2=u}getPoint(l,u=new Bn){const w=u;return 1===l?w.copy(this.v2):(w.copy(this.v2).sub(this.v1),w.multiplyScalar(l).add(this.v1)),w}getPointAt(l,u){return this.getPoint(l,u)}getTangent(l,u){const w=u||new Bn;return w.copy(this.v2).sub(this.v1).normalize(),w}copy(l){return super.copy(l),this.v1.copy(l.v1),this.v2.copy(l.v2),this}toJSON(){const l=super.toJSON();return l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l}fromJSON(l){return super.fromJSON(l),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this}}Xf.prototype.isLineCurve=!0;class bb extends eu{constructor(l=new je,u=new je){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=l,this.v2=u}getPoint(l,u=new je){const w=u;return 1===l?w.copy(this.v2):(w.copy(this.v2).sub(this.v1),w.multiplyScalar(l).add(this.v1)),w}getPointAt(l,u){return this.getPoint(l,u)}copy(l){return super.copy(l),this.v1.copy(l.v1),this.v2.copy(l.v2),this}toJSON(){const l=super.toJSON();return l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l}fromJSON(l){return super.fromJSON(l),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this}}class xb extends eu{constructor(l=new Bn,u=new Bn,w=new Bn){super(),this.type="QuadraticBezierCurve",this.v0=l,this.v1=u,this.v2=w}getPoint(l,u=new Bn){const w=u,E=this.v0,R=this.v1,z=this.v2;return w.set(vb(l,E.x,R.x,z.x),vb(l,E.y,R.y,z.y)),w}copy(l){return super.copy(l),this.v0.copy(l.v0),this.v1.copy(l.v1),this.v2.copy(l.v2),this}toJSON(){const l=super.toJSON();return l.v0=this.v0.toArray(),l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l}fromJSON(l){return super.fromJSON(l),this.v0.fromArray(l.v0),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this}}xb.prototype.isQuadraticBezierCurve=!0;class yv extends eu{constructor(l=new je,u=new je,w=new je){super(),this.type="QuadraticBezierCurve3",this.v0=l,this.v1=u,this.v2=w}getPoint(l,u=new je){const w=u,E=this.v0,R=this.v1,z=this.v2;return w.set(vb(l,E.x,R.x,z.x),vb(l,E.y,R.y,z.y),vb(l,E.z,R.z,z.z)),w}copy(l){return super.copy(l),this.v0.copy(l.v0),this.v1.copy(l.v1),this.v2.copy(l.v2),this}toJSON(){const l=super.toJSON();return l.v0=this.v0.toArray(),l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l}fromJSON(l){return super.fromJSON(l),this.v0.fromArray(l.v0),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this}}yv.prototype.isQuadraticBezierCurve3=!0;class zg extends eu{constructor(l=[]){super(),this.type="SplineCurve",this.points=l}getPoint(l,u=new Bn){const w=u,E=this.points,R=(E.length-1)*l,z=Math.floor(R),Y=R-z,Q=E[0===z?z:z-1],ee=E[z],pe=E[z>E.length-2?E.length-1:z+1],he=E[z>E.length-3?E.length-1:z+2];return w.set(Th(Y,Q.x,ee.x,pe.x,he.x),Th(Y,Q.y,ee.y,pe.y,he.y)),w}copy(l){super.copy(l),this.points=[];for(let u=0,w=l.points.length;u<w;u++)this.points.push(l.points[u].clone());return this}toJSON(){const l=super.toJSON();l.points=[];for(let u=0,w=this.points.length;u<w;u++)l.points.push(this.points[u].toArray());return l}fromJSON(l){super.fromJSON(l),this.points=[];for(let u=0,w=l.points.length;u<w;u++){const E=l.points[u];this.points.push((new Bn).fromArray(E))}return this}}zg.prototype.isSplineCurve=!0;var wb=Object.freeze({__proto__:null,ArcCurve:$x,CatmullRomCurve3:tw,CubicBezierCurve:yb,CubicBezierCurve3:iw,EllipseCurve:Hg,LineCurve:Xf,LineCurve3:bb,QuadraticBezierCurve:xb,QuadraticBezierCurve3:yv,SplineCurve:zg});class JM extends eu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(l){this.curves.push(l)}closePath(){const l=this.curves[0].getPoint(0),u=this.curves[this.curves.length-1].getPoint(1);l.equals(u)||this.curves.push(new Xf(u,l))}getPoint(l){const u=l*this.getLength(),w=this.getCurveLengths();let E=0;for(;E<w.length;){if(w[E]>=u){const R=w[E]-u,z=this.curves[E],Y=z.getLength();return z.getPointAt(0===Y?0:1-R/Y)}E++}return null}getLength(){const l=this.getCurveLengths();return l[l.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const l=[];let u=0;for(let w=0,E=this.curves.length;w<E;w++)u+=this.curves[w].getLength(),l.push(u);return this.cacheLengths=l,l}getSpacedPoints(l=40){const u=[];for(let w=0;w<=l;w++)u.push(this.getPoint(w/l));return this.autoClose&&u.push(u[0]),u}getPoints(l=12){const u=[];let w;for(let E=0,R=this.curves;E<R.length;E++){const z=R[E],Q=z.getPoints(z&&z.isEllipseCurve?2*l:z&&(z.isLineCurve||z.isLineCurve3)?1:z&&z.isSplineCurve?l*z.points.length:l);for(let ee=0;ee<Q.length;ee++){const pe=Q[ee];w&&w.equals(pe)||(u.push(pe),w=pe)}}return this.autoClose&&u.length>1&&!u[u.length-1].equals(u[0])&&u.push(u[0]),u}copy(l){super.copy(l),this.curves=[];for(let u=0,w=l.curves.length;u<w;u++)this.curves.push(l.curves[u].clone());return this.autoClose=l.autoClose,this}toJSON(){const l=super.toJSON();l.autoClose=this.autoClose,l.curves=[];for(let u=0,w=this.curves.length;u<w;u++)l.curves.push(this.curves[u].toJSON());return l}fromJSON(l){super.fromJSON(l),this.autoClose=l.autoClose,this.curves=[];for(let u=0,w=l.curves.length;u<w;u++){const E=l.curves[u];this.curves.push((new wb[E.type]).fromJSON(E))}return this}}class bv extends JM{constructor(l){super(),this.type="Path",this.currentPoint=new Bn,l&&this.setFromPoints(l)}setFromPoints(l){this.moveTo(l[0].x,l[0].y);for(let u=1,w=l.length;u<w;u++)this.lineTo(l[u].x,l[u].y);return this}moveTo(l,u){return this.currentPoint.set(l,u),this}lineTo(l,u){const w=new Xf(this.currentPoint.clone(),new Bn(l,u));return this.curves.push(w),this.currentPoint.set(l,u),this}quadraticCurveTo(l,u,w,E){const R=new xb(this.currentPoint.clone(),new Bn(l,u),new Bn(w,E));return this.curves.push(R),this.currentPoint.set(w,E),this}bezierCurveTo(l,u,w,E,R,z){const Y=new yb(this.currentPoint.clone(),new Bn(l,u),new Bn(w,E),new Bn(R,z));return this.curves.push(Y),this.currentPoint.set(R,z),this}splineThru(l){const u=[this.currentPoint.clone()].concat(l),w=new zg(u);return this.curves.push(w),this.currentPoint.copy(l[l.length-1]),this}arc(l,u,w,E,R,z){return this.absarc(l+this.currentPoint.x,u+this.currentPoint.y,w,E,R,z),this}absarc(l,u,w,E,R,z){return this.absellipse(l,u,w,w,E,R,z),this}ellipse(l,u,w,E,R,z,Y,Q){return this.absellipse(l+this.currentPoint.x,u+this.currentPoint.y,w,E,R,z,Y,Q),this}absellipse(l,u,w,E,R,z,Y,Q){const ee=new Hg(l,u,w,E,R,z,Y,Q);if(this.curves.length>0){const he=ee.getPoint(0);he.equals(this.currentPoint)||this.lineTo(he.x,he.y)}this.curves.push(ee);const pe=ee.getPoint(1);return this.currentPoint.copy(pe),this}copy(l){return super.copy(l),this.currentPoint.copy(l.currentPoint),this}toJSON(){const l=super.toJSON();return l.currentPoint=this.currentPoint.toArray(),l}fromJSON(l){return super.fromJSON(l),this.currentPoint.fromArray(l.currentPoint),this}}class ed extends bv{constructor(l){super(l),this.uuid=Ui.generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(l){const u=[];for(let w=0,E=this.holes.length;w<E;w++)u[w]=this.holes[w].getPoints(l);return u}extractPoints(l){return{shape:this.getPoints(l),holes:this.getPointsHoles(l)}}copy(l){super.copy(l),this.holes=[];for(let u=0,w=l.holes.length;u<w;u++)this.holes.push(l.holes[u].clone());return this}toJSON(){const l=super.toJSON();l.uuid=this.uuid,l.holes=[];for(let u=0,w=this.holes.length;u<w;u++)l.holes.push(this.holes[u].toJSON());return l}fromJSON(l){super.fromJSON(l),this.uuid=l.uuid,this.holes=[];for(let u=0,w=l.holes.length;u<w;u++){const E=l.holes[u];this.holes.push((new bv).fromJSON(E))}return this}}class td extends xi{constructor(l,u=1){super(),this.type="Light",this.color=new Ji(l),this.intensity=u}copy(l){return super.copy(l),this.color.copy(l.color),this.intensity=l.intensity,this}toJSON(l){const u=super.toJSON(l);return u.object.color=this.color.getHex(),u.object.intensity=this.intensity,void 0!==this.groundColor&&(u.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(u.object.distance=this.distance),void 0!==this.angle&&(u.object.angle=this.angle),void 0!==this.decay&&(u.object.decay=this.decay),void 0!==this.penumbra&&(u.object.penumbra=this.penumbra),void 0!==this.shadow&&(u.object.shadow=this.shadow.toJSON()),u}}td.prototype.isLight=!0;class rw extends td{constructor(l,u,w){super(l,w),this.type="HemisphereLight",this.position.copy(xi.DefaultUp),this.updateMatrix(),this.groundColor=new Ji(u)}copy(l){return td.prototype.copy.call(this,l),this.groundColor.copy(l.groundColor),this}}rw.prototype.isHemisphereLight=!0;const sw=new hr,ow=new je,aw=new je;class Mb{constructor(l){this.camera=l,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Bn(512,512),this.map=null,this.mapPass=null,this.matrix=new hr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Lp,this._frameExtents=new Bn(1,1),this._viewportCount=1,this._viewports=[new As(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(l){const u=this.camera,w=this.matrix;ow.setFromMatrixPosition(l.matrixWorld),u.position.copy(ow),aw.setFromMatrixPosition(l.target.matrixWorld),u.lookAt(aw),u.updateMatrixWorld(),sw.multiplyMatrices(u.projectionMatrix,u.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sw),w.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),w.multiply(u.projectionMatrix),w.multiply(u.matrixWorldInverse)}getViewport(l){return this._viewports[l]}getFrameExtents(){return this._frameExtents}copy(l){return this.camera=l.camera.clone(),this.bias=l.bias,this.radius=l.radius,this.mapSize.copy(l.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const l={};return 0!==this.bias&&(l.bias=this.bias),0!==this.normalBias&&(l.normalBias=this.normalBias),1!==this.radius&&(l.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(l.mapSize=this.mapSize.toArray()),l.camera=this.camera.toJSON(!1).object,delete l.camera.matrix,l}}class lw extends Mb{constructor(){super(new pa(50,1,.5,500)),this.focus=1}updateMatrices(l){const u=this.camera,w=2*Ui.RAD2DEG*l.angle*this.focus,E=this.mapSize.width/this.mapSize.height,R=l.distance||u.far;(w!==u.fov||E!==u.aspect||R!==u.far)&&(u.fov=w,u.aspect=E,u.far=R,u.updateProjectionMatrix()),super.updateMatrices(l)}}lw.prototype.isSpotLightShadow=!0;class Dh extends td{constructor(l,u,w=0,E=Math.PI/3,R=0,z=1){super(l,u),this.type="SpotLight",this.position.copy(xi.DefaultUp),this.updateMatrix(),this.target=new xi,this.distance=w,this.angle=E,this.penumbra=R,this.decay=z,this.shadow=new lw}get power(){return this.intensity*Math.PI}set power(l){this.intensity=l/Math.PI}copy(l){return super.copy(l),this.distance=l.distance,this.angle=l.angle,this.penumbra=l.penumbra,this.decay=l.decay,this.target=l.target.clone(),this.shadow=l.shadow.clone(),this}}Dh.prototype.isSpotLight=!0;const xv=new hr,wv=new je,cw=new je;class WD extends Mb{constructor(){super(new pa(90,1,.5,500)),this._frameExtents=new Bn(4,2),this._viewportCount=6,this._viewports=[new As(2,1,1,1),new As(0,1,1,1),new As(3,1,1,1),new As(1,1,1,1),new As(3,0,1,1),new As(1,0,1,1)],this._cubeDirections=[new je(1,0,0),new je(-1,0,0),new je(0,0,1),new je(0,0,-1),new je(0,1,0),new je(0,-1,0)],this._cubeUps=[new je(0,1,0),new je(0,1,0),new je(0,1,0),new je(0,1,0),new je(0,0,1),new je(0,0,-1)]}updateMatrices(l,u=0){const w=this.camera,E=this.matrix;wv.setFromMatrixPosition(l.matrixWorld),w.position.copy(wv),cw.copy(w.position),cw.add(this._cubeDirections[u]),w.up.copy(this._cubeUps[u]),w.lookAt(cw),w.updateMatrixWorld(),E.makeTranslation(-wv.x,-wv.y,-wv.z),xv.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),this._frustum.setFromProjectionMatrix(xv)}}WD.prototype.isPointLightShadow=!0;class Mv extends td{constructor(l,u,w=0,E=1){super(l,u),this.type="PointLight",this.distance=w,this.decay=E,this.shadow=new WD}get power(){return 4*this.intensity*Math.PI}set power(l){this.intensity=l/(4*Math.PI)}copy(l){return super.copy(l),this.distance=l.distance,this.decay=l.decay,this.shadow=l.shadow.clone(),this}}Mv.prototype.isPointLight=!0;class Vg extends ic{constructor(l=-1,u=1,w=1,E=-1,R=.1,z=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=l,this.right=u,this.top=w,this.bottom=E,this.near=R,this.far=z,this.updateProjectionMatrix()}copy(l,u){return super.copy(l,u),this.left=l.left,this.right=l.right,this.top=l.top,this.bottom=l.bottom,this.near=l.near,this.far=l.far,this.zoom=l.zoom,this.view=null===l.view?null:Object.assign({},l.view),this}setViewOffset(l,u,w,E,R,z){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=l,this.view.fullHeight=u,this.view.offsetX=w,this.view.offsetY=E,this.view.width=R,this.view.height=z,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const l=(this.right-this.left)/(2*this.zoom),u=(this.top-this.bottom)/(2*this.zoom),w=(this.right+this.left)/2,E=(this.top+this.bottom)/2;let R=w-l,z=w+l,Y=E+u,Q=E-u;if(null!==this.view&&this.view.enabled){const ee=(this.right-this.left)/this.view.fullWidth/this.zoom,pe=(this.top-this.bottom)/this.view.fullHeight/this.zoom;R+=ee*this.view.offsetX,z=R+ee*this.view.width,Y-=pe*this.view.offsetY,Q=Y-pe*this.view.height}this.projectionMatrix.makeOrthographic(R,z,Y,Q,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(l){const u=xi.prototype.toJSON.call(this,l);return u.object.zoom=this.zoom,u.object.left=this.left,u.object.right=this.right,u.object.top=this.top,u.object.bottom=this.bottom,u.object.near=this.near,u.object.far=this.far,null!==this.view&&(u.object.view=Object.assign({},this.view)),u}}Vg.prototype.isOrthographicCamera=!0;class Cb extends Mb{constructor(){super(new Vg(-5,5,5,-5,.5,500))}}Cb.prototype.isDirectionalLightShadow=!0;class pm extends td{constructor(l,u){super(l,u),this.type="DirectionalLight",this.position.copy(xi.DefaultUp),this.updateMatrix(),this.target=new xi,this.shadow=new Cb}copy(l){return super.copy(l),this.target=l.target.clone(),this.shadow=l.shadow.clone(),this}}pm.prototype.isDirectionalLight=!0;class uw extends td{constructor(l,u){super(l,u),this.type="AmbientLight"}}uw.prototype.isAmbientLight=!0;class Cv extends td{constructor(l,u,w=10,E=10){super(l,u),this.type="RectAreaLight",this.width=w,this.height=E}copy(l){return super.copy(l),this.width=l.width,this.height=l.height,this}toJSON(l){const u=super.toJSON(l);return u.object.width=this.width,u.object.height=this.height,u}}Cv.prototype.isRectAreaLight=!0;class Sb{constructor(){this.coefficients=[];for(let l=0;l<9;l++)this.coefficients.push(new je)}set(l){for(let u=0;u<9;u++)this.coefficients[u].copy(l[u]);return this}zero(){for(let l=0;l<9;l++)this.coefficients[l].set(0,0,0);return this}getAt(l,u){const w=l.x,E=l.y,R=l.z,z=this.coefficients;return u.copy(z[0]).multiplyScalar(.282095),u.addScaledVector(z[1],.488603*E),u.addScaledVector(z[2],.488603*R),u.addScaledVector(z[3],.488603*w),u.addScaledVector(z[4],w*E*1.092548),u.addScaledVector(z[5],E*R*1.092548),u.addScaledVector(z[6],.315392*(3*R*R-1)),u.addScaledVector(z[7],w*R*1.092548),u.addScaledVector(z[8],.546274*(w*w-E*E)),u}getIrradianceAt(l,u){const w=l.x,E=l.y,R=l.z,z=this.coefficients;return u.copy(z[0]).multiplyScalar(.886227),u.addScaledVector(z[1],1.023328*E),u.addScaledVector(z[2],1.023328*R),u.addScaledVector(z[3],1.023328*w),u.addScaledVector(z[4],.858086*w*E),u.addScaledVector(z[5],.858086*E*R),u.addScaledVector(z[6],.743125*R*R-.247708),u.addScaledVector(z[7],.858086*w*R),u.addScaledVector(z[8],.429043*(w*w-E*E)),u}add(l){for(let u=0;u<9;u++)this.coefficients[u].add(l.coefficients[u]);return this}addScaledSH(l,u){for(let w=0;w<9;w++)this.coefficients[w].addScaledVector(l.coefficients[w],u);return this}scale(l){for(let u=0;u<9;u++)this.coefficients[u].multiplyScalar(l);return this}lerp(l,u){for(let w=0;w<9;w++)this.coefficients[w].lerp(l.coefficients[w],u);return this}equals(l){for(let u=0;u<9;u++)if(!this.coefficients[u].equals(l.coefficients[u]))return!1;return!0}copy(l){return this.set(l.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(l,u=0){const w=this.coefficients;for(let E=0;E<9;E++)w[E].fromArray(l,u+3*E);return this}toArray(l=[],u=0){const w=this.coefficients;for(let E=0;E<9;E++)w[E].toArray(l,u+3*E);return l}static getBasisAt(l,u){const w=l.x,E=l.y,R=l.z;u[0]=.282095,u[1]=.488603*E,u[2]=.488603*R,u[3]=.488603*w,u[4]=1.092548*w*E,u[5]=1.092548*E*R,u[6]=.315392*(3*R*R-1),u[7]=1.092548*w*R,u[8]=.546274*(w*w-E*E)}}Sb.prototype.isSphericalHarmonics3=!0;class Ug extends td{constructor(l=new Sb,u=1){super(void 0,u),this.sh=l}copy(l){return super.copy(l),this.sh.copy(l.sh),this}fromJSON(l){return this.intensity=l.intensity,this.sh.fromArray(l.sh),this}toJSON(l){const u=super.toJSON(l);return u.object.sh=this.sh.toArray(),u}}Ug.prototype.isLightProbe=!0;class hw extends bl{constructor(l){super(l),this.textures={}}load(l,u,w,E){const R=this,z=new Nu(R.manager);z.setPath(R.path),z.setRequestHeader(R.requestHeader),z.setWithCredentials(R.withCredentials),z.load(l,function(Y){try{u(R.parse(JSON.parse(Y)))}catch(Q){E?E(Q):console.error(Q),R.manager.itemError(l)}},w,E)}parse(l){const u=this.textures;function w(R){return void 0===u[R]&&console.warn("THREE.MaterialLoader: Undefined texture",R),u[R]}const E=new Lg[l.type];if(void 0!==l.uuid&&(E.uuid=l.uuid),void 0!==l.name&&(E.name=l.name),void 0!==l.color&&void 0!==E.color&&E.color.setHex(l.color),void 0!==l.roughness&&(E.roughness=l.roughness),void 0!==l.metalness&&(E.metalness=l.metalness),void 0!==l.sheen&&(E.sheen=(new Ji).setHex(l.sheen)),void 0!==l.emissive&&void 0!==E.emissive&&E.emissive.setHex(l.emissive),void 0!==l.specular&&void 0!==E.specular&&E.specular.setHex(l.specular),void 0!==l.shininess&&(E.shininess=l.shininess),void 0!==l.clearcoat&&(E.clearcoat=l.clearcoat),void 0!==l.clearcoatRoughness&&(E.clearcoatRoughness=l.clearcoatRoughness),void 0!==l.fog&&(E.fog=l.fog),void 0!==l.flatShading&&(E.flatShading=l.flatShading),void 0!==l.blending&&(E.blending=l.blending),void 0!==l.combine&&(E.combine=l.combine),void 0!==l.side&&(E.side=l.side),void 0!==l.opacity&&(E.opacity=l.opacity),void 0!==l.transparent&&(E.transparent=l.transparent),void 0!==l.alphaTest&&(E.alphaTest=l.alphaTest),void 0!==l.depthTest&&(E.depthTest=l.depthTest),void 0!==l.depthWrite&&(E.depthWrite=l.depthWrite),void 0!==l.colorWrite&&(E.colorWrite=l.colorWrite),void 0!==l.stencilWrite&&(E.stencilWrite=l.stencilWrite),void 0!==l.stencilWriteMask&&(E.stencilWriteMask=l.stencilWriteMask),void 0!==l.stencilFunc&&(E.stencilFunc=l.stencilFunc),void 0!==l.stencilRef&&(E.stencilRef=l.stencilRef),void 0!==l.stencilFuncMask&&(E.stencilFuncMask=l.stencilFuncMask),void 0!==l.stencilFail&&(E.stencilFail=l.stencilFail),void 0!==l.stencilZFail&&(E.stencilZFail=l.stencilZFail),void 0!==l.stencilZPass&&(E.stencilZPass=l.stencilZPass),void 0!==l.wireframe&&(E.wireframe=l.wireframe),void 0!==l.wireframeLinewidth&&(E.wireframeLinewidth=l.wireframeLinewidth),void 0!==l.wireframeLinecap&&(E.wireframeLinecap=l.wireframeLinecap),void 0!==l.wireframeLinejoin&&(E.wireframeLinejoin=l.wireframeLinejoin),void 0!==l.rotation&&(E.rotation=l.rotation),1!==l.linewidth&&(E.linewidth=l.linewidth),void 0!==l.dashSize&&(E.dashSize=l.dashSize),void 0!==l.gapSize&&(E.gapSize=l.gapSize),void 0!==l.scale&&(E.scale=l.scale),void 0!==l.polygonOffset&&(E.polygonOffset=l.polygonOffset),void 0!==l.polygonOffsetFactor&&(E.polygonOffsetFactor=l.polygonOffsetFactor),void 0!==l.polygonOffsetUnits&&(E.polygonOffsetUnits=l.polygonOffsetUnits),void 0!==l.skinning&&(E.skinning=l.skinning),void 0!==l.morphTargets&&(E.morphTargets=l.morphTargets),void 0!==l.morphNormals&&(E.morphNormals=l.morphNormals),void 0!==l.dithering&&(E.dithering=l.dithering),void 0!==l.vertexTangents&&(E.vertexTangents=l.vertexTangents),void 0!==l.visible&&(E.visible=l.visible),void 0!==l.toneMapped&&(E.toneMapped=l.toneMapped),void 0!==l.userData&&(E.userData=l.userData),void 0!==l.vertexColors&&(E.vertexColors="number"==typeof l.vertexColors?l.vertexColors>0:l.vertexColors),void 0!==l.uniforms)for(const R in l.uniforms){const z=l.uniforms[R];switch(E.uniforms[R]={},z.type){case"t":E.uniforms[R].value=w(z.value);break;case"c":E.uniforms[R].value=(new Ji).setHex(z.value);break;case"v2":E.uniforms[R].value=(new Bn).fromArray(z.value);break;case"v3":E.uniforms[R].value=(new je).fromArray(z.value);break;case"v4":E.uniforms[R].value=(new As).fromArray(z.value);break;case"m3":E.uniforms[R].value=(new oo).fromArray(z.value);break;case"m4":E.uniforms[R].value=(new hr).fromArray(z.value);break;default:E.uniforms[R].value=z.value}}if(void 0!==l.defines&&(E.defines=l.defines),void 0!==l.vertexShader&&(E.vertexShader=l.vertexShader),void 0!==l.fragmentShader&&(E.fragmentShader=l.fragmentShader),void 0!==l.extensions)for(const R in l.extensions)E.extensions[R]=l.extensions[R];if(void 0!==l.shading&&(E.flatShading=1===l.shading),void 0!==l.size&&(E.size=l.size),void 0!==l.sizeAttenuation&&(E.sizeAttenuation=l.sizeAttenuation),void 0!==l.map&&(E.map=w(l.map)),void 0!==l.matcap&&(E.matcap=w(l.matcap)),void 0!==l.alphaMap&&(E.alphaMap=w(l.alphaMap)),void 0!==l.bumpMap&&(E.bumpMap=w(l.bumpMap)),void 0!==l.bumpScale&&(E.bumpScale=l.bumpScale),void 0!==l.normalMap&&(E.normalMap=w(l.normalMap)),void 0!==l.normalMapType&&(E.normalMapType=l.normalMapType),void 0!==l.normalScale){let R=l.normalScale;!1===Array.isArray(R)&&(R=[R,R]),E.normalScale=(new Bn).fromArray(R)}return void 0!==l.displacementMap&&(E.displacementMap=w(l.displacementMap)),void 0!==l.displacementScale&&(E.displacementScale=l.displacementScale),void 0!==l.displacementBias&&(E.displacementBias=l.displacementBias),void 0!==l.roughnessMap&&(E.roughnessMap=w(l.roughnessMap)),void 0!==l.metalnessMap&&(E.metalnessMap=w(l.metalnessMap)),void 0!==l.emissiveMap&&(E.emissiveMap=w(l.emissiveMap)),void 0!==l.emissiveIntensity&&(E.emissiveIntensity=l.emissiveIntensity),void 0!==l.specularMap&&(E.specularMap=w(l.specularMap)),void 0!==l.envMap&&(E.envMap=w(l.envMap)),void 0!==l.envMapIntensity&&(E.envMapIntensity=l.envMapIntensity),void 0!==l.reflectivity&&(E.reflectivity=l.reflectivity),void 0!==l.refractionRatio&&(E.refractionRatio=l.refractionRatio),void 0!==l.lightMap&&(E.lightMap=w(l.lightMap)),void 0!==l.lightMapIntensity&&(E.lightMapIntensity=l.lightMapIntensity),void 0!==l.aoMap&&(E.aoMap=w(l.aoMap)),void 0!==l.aoMapIntensity&&(E.aoMapIntensity=l.aoMapIntensity),void 0!==l.gradientMap&&(E.gradientMap=w(l.gradientMap)),void 0!==l.clearcoatMap&&(E.clearcoatMap=w(l.clearcoatMap)),void 0!==l.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap=w(l.clearcoatRoughnessMap)),void 0!==l.clearcoatNormalMap&&(E.clearcoatNormalMap=w(l.clearcoatNormalMap)),void 0!==l.clearcoatNormalScale&&(E.clearcoatNormalScale=(new Bn).fromArray(l.clearcoatNormalScale)),void 0!==l.transmission&&(E.transmission=l.transmission),void 0!==l.transmissionMap&&(E.transmissionMap=w(l.transmissionMap)),E}setTextures(l){return this.textures=l,this}}const dw={decodeText:function(x){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(x);let l="";for(let u=0,w=x.length;u<w;u++)l+=String.fromCharCode(x[u]);try{return decodeURIComponent(escape(l))}catch(u){return l}},extractUrlBase:function(x){const l=x.lastIndexOf("/");return-1===l?"./":x.substr(0,l+1)}};function mm(){yr.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function Eb(x,l,u,w){"number"==typeof u&&(w=u,u=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),zr.call(this,x,l,u),this.meshPerAttribute=w||1}mm.prototype=Object.assign(Object.create(yr.prototype),{constructor:mm,isInstancedBufferGeometry:!0,copy:function(x){return yr.prototype.copy.call(this,x),this.instanceCount=x.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const x=yr.prototype.toJSON.call(this);return x.instanceCount=this.instanceCount,x.isInstancedBufferGeometry=!0,x}}),Eb.prototype=Object.assign(Object.create(zr.prototype),{constructor:Eb,isInstancedBufferAttribute:!0,copy:function(x){return zr.prototype.copy.call(this,x),this.meshPerAttribute=x.meshPerAttribute,this},toJSON:function(){const x=zr.prototype.toJSON.call(this);return x.meshPerAttribute=this.meshPerAttribute,x.isInstancedBufferAttribute=!0,x}});class KM extends bl{constructor(l){super(l)}load(l,u,w,E){const R=this,z=new Nu(R.manager);z.setPath(R.path),z.setRequestHeader(R.requestHeader),z.setWithCredentials(R.withCredentials),z.load(l,function(Y){try{u(R.parse(JSON.parse(Y)))}catch(Q){E?E(Q):console.error(Q),R.manager.itemError(l)}},w,E)}parse(l){const u={},w={};function E(be,Ee){if(void 0!==u[Ee])return u[Ee];const He=be.interleavedBuffers[Ee],Re=function R(be,Ee){if(void 0!==w[Ee])return w[Ee];const Re=new Uint32Array(be.arrayBuffers[Ee]).buffer;return w[Ee]=Re,Re}(be,He.buffer),rt=new Jc(dh(He.type,Re),He.stride);return rt.uuid=He.uuid,u[Ee]=rt,rt}const z=l.isInstancedBufferGeometry?new mm:new yr,Y=l.data.index;if(void 0!==Y){const be=dh(Y.type,Y.array);z.setIndex(new zr(be,1))}const Q=l.data.attributes;for(const be in Q){const Ee=Q[be];let Fe;if(Ee.isInterleavedBufferAttribute)Fe=new Kh(E(l.data,Ee.data),Ee.itemSize,Ee.offset,Ee.normalized);else{const He=dh(Ee.type,Ee.array);Fe=new(Ee.isInstancedBufferAttribute?Eb:zr)(He,Ee.itemSize,Ee.normalized)}void 0!==Ee.name&&(Fe.name=Ee.name),z.setAttribute(be,Fe)}const ee=l.data.morphAttributes;if(ee)for(const be in ee){const Ee=ee[be],Fe=[];for(let He=0,Re=Ee.length;He<Re;He++){const Se=Ee[He];let rt;rt=Se.isInterleavedBufferAttribute?new Kh(E(l.data,Se.data),Se.itemSize,Se.offset,Se.normalized):new zr(dh(Se.type,Se.array),Se.itemSize,Se.normalized),void 0!==Se.name&&(rt.name=Se.name),Fe.push(rt)}z.morphAttributes[be]=Fe}l.data.morphTargetsRelative&&(z.morphTargetsRelative=!0);const he=l.data.groups||l.data.drawcalls||l.data.offsets;if(void 0!==he)for(let be=0,Ee=he.length;be!==Ee;++be){const Fe=he[be];z.addGroup(Fe.start,Fe.count,Fe.materialIndex)}const me=l.data.boundingSphere;if(void 0!==me){const be=new je;void 0!==me.center&&be.fromArray(me.center),z.boundingSphere=new Bs(be,me.radius)}return l.name&&(z.name=l.name),l.userData&&(z.userData=l.userData),z}}class QM extends bl{constructor(l){super(l)}load(l,u,w,E){const R=this,z=""===this.path?dw.extractUrlBase(l):this.path;this.resourcePath=this.resourcePath||z;const Y=new Nu(this.manager);Y.setPath(this.path),Y.setRequestHeader(this.requestHeader),Y.setWithCredentials(this.withCredentials),Y.load(l,function(Q){let ee=null;try{ee=JSON.parse(Q)}catch(he){return void 0!==E&&E(he),void console.error("THREE:ObjectLoader: Can't parse "+l+".",he.message)}const pe=ee.metadata;void 0!==pe&&void 0!==pe.type&&"geometry"!==pe.type.toLowerCase()?R.parse(ee,u):console.error("THREE.ObjectLoader: Can't load "+l)},w,E)}parse(l,u){const w=this.parseAnimations(l.animations),E=this.parseShapes(l.shapes),R=this.parseGeometries(l.geometries,E),z=this.parseImages(l.images,function(){void 0!==u&&u(ee)}),Y=this.parseTextures(l.textures,z),Q=this.parseMaterials(l.materials,Y),ee=this.parseObject(l.object,R,Q,w),pe=this.parseSkeletons(l.skeletons,ee);if(this.bindSkeletons(ee,pe),void 0!==u){let he=!1;for(const me in z)if(z[me]instanceof HTMLImageElement){he=!0;break}!1===he&&u(ee)}return ee}parseShapes(l){const u={};if(void 0!==l)for(let w=0,E=l.length;w<E;w++){const R=(new ed).fromJSON(l[w]);u[R.uuid]=R}return u}parseSkeletons(l,u){const w={},E={};if(u.traverse(function(R){R.isBone&&(E[R.uuid]=R)}),void 0!==l)for(let R=0,z=l.length;R<z;R++){const Y=(new Mg).fromJSON(l[R],E);w[Y.uuid]=Y}return w}parseGeometries(l,u){const w={};let E;if(void 0!==l){const R=new KM;for(let z=0,Y=l.length;z<Y;z++){let Q;const ee=l[z];switch(ee.type){case"PlaneGeometry":case"PlaneBufferGeometry":Q=new $c[ee.type](ee.width,ee.height,ee.widthSegments,ee.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":Q=new $c[ee.type](ee.width,ee.height,ee.depth,ee.widthSegments,ee.heightSegments,ee.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":Q=new $c[ee.type](ee.radius,ee.segments,ee.thetaStart,ee.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":Q=new $c[ee.type](ee.radiusTop,ee.radiusBottom,ee.height,ee.radialSegments,ee.heightSegments,ee.openEnded,ee.thetaStart,ee.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":Q=new $c[ee.type](ee.radius,ee.height,ee.radialSegments,ee.heightSegments,ee.openEnded,ee.thetaStart,ee.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":Q=new $c[ee.type](ee.radius,ee.widthSegments,ee.heightSegments,ee.phiStart,ee.phiLength,ee.thetaStart,ee.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":Q=new $c[ee.type](ee.radius,ee.detail);break;case"RingGeometry":case"RingBufferGeometry":Q=new $c[ee.type](ee.innerRadius,ee.outerRadius,ee.thetaSegments,ee.phiSegments,ee.thetaStart,ee.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":Q=new $c[ee.type](ee.radius,ee.tube,ee.radialSegments,ee.tubularSegments,ee.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":Q=new $c[ee.type](ee.radius,ee.tube,ee.tubularSegments,ee.radialSegments,ee.p,ee.q);break;case"TubeGeometry":case"TubeBufferGeometry":Q=new $c[ee.type]((new wb[ee.path.type]).fromJSON(ee.path),ee.tubularSegments,ee.radius,ee.radialSegments,ee.closed);break;case"LatheGeometry":case"LatheBufferGeometry":Q=new $c[ee.type](ee.points,ee.segments,ee.phiStart,ee.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":Q=new $c[ee.type](ee.vertices,ee.indices,ee.radius,ee.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":E=[];for(let he=0,me=ee.shapes.length;he<me;he++)E.push(u[ee.shapes[he]]);Q=new $c[ee.type](E,ee.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":E=[];for(let he=0,me=ee.shapes.length;he<me;he++)E.push(u[ee.shapes[he]]);const pe=ee.options.extrudePath;void 0!==pe&&(ee.options.extrudePath=(new wb[pe.type]).fromJSON(pe)),Q=new $c[ee.type](E,ee.options);break;case"BufferGeometry":case"InstancedBufferGeometry":Q=R.parse(ee);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+ee.type+'"');continue}Q.uuid=ee.uuid,void 0!==ee.name&&(Q.name=ee.name),!0===Q.isBufferGeometry&&void 0!==ee.userData&&(Q.userData=ee.userData),w[ee.uuid]=Q}}return w}parseMaterials(l,u){const w={},E={};if(void 0!==l){const R=new hw;R.setTextures(u);for(let z=0,Y=l.length;z<Y;z++){const Q=l[z];if("MultiMaterial"===Q.type){const ee=[];for(let pe=0;pe<Q.materials.length;pe++){const he=Q.materials[pe];void 0===w[he.uuid]&&(w[he.uuid]=R.parse(he)),ee.push(w[he.uuid])}E[Q.uuid]=ee}else void 0===w[Q.uuid]&&(w[Q.uuid]=R.parse(Q)),E[Q.uuid]=w[Q.uuid]}}return E}parseAnimations(l){const u={};if(void 0!==l)for(let w=0;w<l.length;w++){const R=Ng.parse(l[w]);u[R.uuid]=R}return u}parseImages(l,u){const w=this,E={};let R;function Y(Q){if("string"==typeof Q){const ee=Q;return function z(Q){return w.manager.itemStart(Q),R.load(Q,function(){w.manager.itemEnd(Q)},void 0,function(){w.manager.itemError(Q),w.manager.itemEnd(Q)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(ee)?ee:w.resourcePath+ee)}return Q.data?{data:dh(Q.type,Q.data),width:Q.width,height:Q.height}:null}if(void 0!==l&&l.length>0){const Q=new Jx(u);R=new Bg(Q),R.setCrossOrigin(this.crossOrigin);for(let ee=0,pe=l.length;ee<pe;ee++){const he=l[ee],me=he.url;if(Array.isArray(me)){E[he.uuid]=[];for(let be=0,Ee=me.length;be<Ee;be++){const He=Y(me[be]);null!==He&&(He instanceof HTMLImageElement?E[he.uuid].push(He):E[he.uuid].push(new Bd(He.data,He.width,He.height)))}}else{const be=Y(he.url);null!==be&&(E[he.uuid]=be)}}}return E}parseTextures(l,u){function w(R,z){return"number"==typeof R?R:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",R),z[R])}const E={};if(void 0!==l)for(let R=0,z=l.length;R<z;R++){const Y=l[R];let Q;void 0===Y.image&&console.warn('THREE.ObjectLoader: No "image" specified for',Y.uuid),void 0===u[Y.image]&&console.warn("THREE.ObjectLoader: Undefined image",Y.image);const ee=u[Y.image];Array.isArray(ee)?(Q=new yc(ee),6===ee.length&&(Q.needsUpdate=!0)):(Q=ee&&ee.data?new Bd(ee.data,ee.width,ee.height):new Ar(ee),ee&&(Q.needsUpdate=!0)),Q.uuid=Y.uuid,void 0!==Y.name&&(Q.name=Y.name),void 0!==Y.mapping&&(Q.mapping=w(Y.mapping,Gg)),void 0!==Y.offset&&Q.offset.fromArray(Y.offset),void 0!==Y.repeat&&Q.repeat.fromArray(Y.repeat),void 0!==Y.center&&Q.center.fromArray(Y.center),void 0!==Y.rotation&&(Q.rotation=Y.rotation),void 0!==Y.wrap&&(Q.wrapS=w(Y.wrap[0],fw),Q.wrapT=w(Y.wrap[1],fw)),void 0!==Y.format&&(Q.format=Y.format),void 0!==Y.type&&(Q.type=Y.type),void 0!==Y.encoding&&(Q.encoding=Y.encoding),void 0!==Y.minFilter&&(Q.minFilter=w(Y.minFilter,$M)),void 0!==Y.magFilter&&(Q.magFilter=w(Y.magFilter,$M)),void 0!==Y.anisotropy&&(Q.anisotropy=Y.anisotropy),void 0!==Y.flipY&&(Q.flipY=Y.flipY),void 0!==Y.premultiplyAlpha&&(Q.premultiplyAlpha=Y.premultiplyAlpha),void 0!==Y.unpackAlignment&&(Q.unpackAlignment=Y.unpackAlignment),E[Y.uuid]=Q}return E}parseObject(l,u,w,E){let R,Q,ee;function z(pe){return void 0===u[pe]&&console.warn("THREE.ObjectLoader: Undefined geometry",pe),u[pe]}function Y(pe){if(void 0!==pe){if(Array.isArray(pe)){const he=[];for(let me=0,be=pe.length;me<be;me++){const Ee=pe[me];void 0===w[Ee]&&console.warn("THREE.ObjectLoader: Undefined material",Ee),he.push(w[Ee])}return he}return void 0===w[pe]&&console.warn("THREE.ObjectLoader: Undefined material",pe),w[pe]}}switch(l.type){case"Scene":R=new Nf,void 0!==l.background&&Number.isInteger(l.background)&&(R.background=new Ji(l.background)),void 0!==l.fog&&("Fog"===l.fog.type?R.fog=new yg(l.fog.color,l.fog.near,l.fog.far):"FogExp2"===l.fog.type&&(R.fog=new rv(l.fog.color,l.fog.density)));break;case"PerspectiveCamera":R=new pa(l.fov,l.aspect,l.near,l.far),void 0!==l.focus&&(R.focus=l.focus),void 0!==l.zoom&&(R.zoom=l.zoom),void 0!==l.filmGauge&&(R.filmGauge=l.filmGauge),void 0!==l.filmOffset&&(R.filmOffset=l.filmOffset),void 0!==l.view&&(R.view=Object.assign({},l.view));break;case"OrthographicCamera":R=new Vg(l.left,l.right,l.top,l.bottom,l.near,l.far),void 0!==l.zoom&&(R.zoom=l.zoom),void 0!==l.view&&(R.view=Object.assign({},l.view));break;case"AmbientLight":R=new uw(l.color,l.intensity);break;case"DirectionalLight":R=new pm(l.color,l.intensity);break;case"PointLight":R=new Mv(l.color,l.intensity,l.distance,l.decay);break;case"RectAreaLight":R=new Cv(l.color,l.intensity,l.width,l.height);break;case"SpotLight":R=new Dh(l.color,l.intensity,l.distance,l.angle,l.penumbra,l.decay);break;case"HemisphereLight":R=new rw(l.color,l.groundColor,l.intensity);break;case"LightProbe":R=(new Ug).fromJSON(l);break;case"SkinnedMesh":Q=z(l.geometry),ee=Y(l.material),R=new wg(Q,ee),void 0!==l.bindMode&&(R.bindMode=l.bindMode),void 0!==l.bindMatrix&&R.bindMatrix.fromArray(l.bindMatrix),void 0!==l.skeleton&&(R.skeleton=l.skeleton);break;case"Mesh":Q=z(l.geometry),ee=Y(l.material),R=new to(Q,ee);break;case"InstancedMesh":Q=z(l.geometry),ee=Y(l.material);const he=l.instanceMatrix;R=new om(Q,ee,l.count),R.instanceMatrix=new zr(new Float32Array(he.array),16);break;case"LOD":R=new Sx;break;case"Line":R=new wh(z(l.geometry),Y(l.material));break;case"LineLoop":R=new Jy(z(l.geometry),Y(l.material));break;case"LineSegments":R=new Kc(z(l.geometry),Y(l.material));break;case"PointCloud":case"Points":R=new am(z(l.geometry),Y(l.material));break;case"Sprite":R=new av(Y(l.material));break;case"Group":R=new vg;break;case"Bone":R=new cv;break;default:R=new xi}if(R.uuid=l.uuid,void 0!==l.name&&(R.name=l.name),void 0!==l.matrix?(R.matrix.fromArray(l.matrix),void 0!==l.matrixAutoUpdate&&(R.matrixAutoUpdate=l.matrixAutoUpdate),R.matrixAutoUpdate&&R.matrix.decompose(R.position,R.quaternion,R.scale)):(void 0!==l.position&&R.position.fromArray(l.position),void 0!==l.rotation&&R.rotation.fromArray(l.rotation),void 0!==l.quaternion&&R.quaternion.fromArray(l.quaternion),void 0!==l.scale&&R.scale.fromArray(l.scale)),void 0!==l.castShadow&&(R.castShadow=l.castShadow),void 0!==l.receiveShadow&&(R.receiveShadow=l.receiveShadow),l.shadow&&(void 0!==l.shadow.bias&&(R.shadow.bias=l.shadow.bias),void 0!==l.shadow.normalBias&&(R.shadow.normalBias=l.shadow.normalBias),void 0!==l.shadow.radius&&(R.shadow.radius=l.shadow.radius),void 0!==l.shadow.mapSize&&R.shadow.mapSize.fromArray(l.shadow.mapSize),void 0!==l.shadow.camera&&(R.shadow.camera=this.parseObject(l.shadow.camera))),void 0!==l.visible&&(R.visible=l.visible),void 0!==l.frustumCulled&&(R.frustumCulled=l.frustumCulled),void 0!==l.renderOrder&&(R.renderOrder=l.renderOrder),void 0!==l.userData&&(R.userData=l.userData),void 0!==l.layers&&(R.layers.mask=l.layers),void 0!==l.children){const pe=l.children;for(let he=0;he<pe.length;he++)R.add(this.parseObject(pe[he],u,w,E))}if(void 0!==l.animations){const pe=l.animations;for(let he=0;he<pe.length;he++)R.animations.push(E[pe[he]])}if("LOD"===l.type){void 0!==l.autoUpdate&&(R.autoUpdate=l.autoUpdate);const pe=l.levels;for(let he=0;he<pe.length;he++){const me=pe[he],be=R.getObjectByProperty("uuid",me.object);void 0!==be&&R.addLevel(be,me.distance)}}return R}bindSkeletons(l,u){0!==Object.keys(u).length&&l.traverse(function(w){if(!0===w.isSkinnedMesh&&void 0!==w.skeleton){const E=u[w.skeleton];void 0===E?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",w.skeleton):w.bind(E,w.bindMatrix)}})}setTexturePath(l){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(l)}}const Gg={UVMapping:ki,CubeReflectionMapping:pi,CubeRefractionMapping:ur,EquirectangularReflectionMapping:Gs,EquirectangularRefractionMapping:wr,CubeUVReflectionMapping:ro,CubeUVRefractionMapping:ha},fw={RepeatWrapping:Qo,ClampToEdgeWrapping:es,MirroredRepeatWrapping:Ps},$M={NearestFilter:mo,NearestMipmapNearestFilter:aa,NearestMipmapLinearFilter:nr,LinearFilter:Xi,LinearMipmapNearestFilter:Ds,LinearMipmapLinearFilter:k};function pw(x){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),bl.call(this,x),this.options={premultiplyAlpha:"none"}}pw.prototype=Object.assign(Object.create(bl.prototype),{constructor:pw,isImageBitmapLoader:!0,setOptions:function(l){return this.options=l,this},load:function(x,l,u,w){void 0===x&&(x=""),void 0!==this.path&&(x=this.path+x),x=this.manager.resolveURL(x);const E=this,R=Zl.get(x);if(void 0!==R)return E.manager.itemStart(x),setTimeout(function(){l&&l(R),E.manager.itemEnd(x)},0),R;const z={};z.credentials="anonymous"===this.crossOrigin?"same-origin":"include",z.headers=this.requestHeader,fetch(x,z).then(function(Y){return Y.blob()}).then(function(Y){return createImageBitmap(Y,Object.assign(E.options,{colorSpaceConversion:"none"}))}).then(function(Y){Zl.add(x,Y),l&&l(Y),E.manager.itemEnd(x)}).catch(function(Y){w&&w(Y),E.manager.itemError(x),E.manager.itemEnd(x)}),E.manager.itemStart(x)}});class gm{constructor(){this.type="ShapePath",this.color=new Ji,this.subPaths=[],this.currentPath=null}moveTo(l,u){return this.currentPath=new bv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(l,u),this}lineTo(l,u){return this.currentPath.lineTo(l,u),this}quadraticCurveTo(l,u,w,E){return this.currentPath.quadraticCurveTo(l,u,w,E),this}bezierCurveTo(l,u,w,E,R,z){return this.currentPath.bezierCurveTo(l,u,w,E,R,z),this}splineThru(l){return this.currentPath.splineThru(l),this}toShapes(l,u){function w(Se){const rt=[];for(let nt=0,ft=Se.length;nt<ft;nt++){const et=Se[nt],Tt=new ed;Tt.curves=et.curves,rt.push(Tt)}return rt}function E(Se,rt){const nt=rt.length;let ft=!1;for(let et=nt-1,Tt=0;Tt<nt;et=Tt++){let Qt=rt[et],zt=rt[Tt],Gt=zt.x-Qt.x,cn=zt.y-Qt.y;if(Math.abs(cn)>Number.EPSILON){if(cn<0&&(Qt=rt[Tt],Gt=-Gt,zt=rt[et],cn=-cn),Se.y<Qt.y||Se.y>zt.y)continue;if(Se.y===Qt.y){if(Se.x===Qt.x)return!0}else{const An=cn*(Se.x-Qt.x)-Gt*(Se.y-Qt.y);if(0===An)return!0;if(An<0)continue;ft=!ft}}else{if(Se.y!==Qt.y)continue;if(zt.x<=Se.x&&Se.x<=Qt.x||Qt.x<=Se.x&&Se.x<=zt.x)return!0}}return ft}const R=Gf.isClockWise,z=this.subPaths;if(0===z.length)return[];if(!0===u)return w(z);let Y,Q,ee;const pe=[];if(1===z.length)return Q=z[0],ee=new ed,ee.curves=Q.curves,pe.push(ee),pe;let he=!R(z[0].getPoints());he=l?!he:he;const me=[],be=[];let He,Re,Ee=[],Fe=0;be[Fe]=void 0,Ee[Fe]=[];for(let Se=0,rt=z.length;Se<rt;Se++)Q=z[Se],He=Q.getPoints(),Y=R(He),Y=l?!Y:Y,Y?(!he&&be[Fe]&&Fe++,be[Fe]={s:new ed,p:He},be[Fe].s.curves=Q.curves,he&&Fe++,Ee[Fe]=[]):Ee[Fe].push({h:Q,p:He[0]});if(!be[0])return w(z);if(be.length>1){let Se=!1;const rt=[];for(let nt=0,ft=be.length;nt<ft;nt++)me[nt]=[];for(let nt=0,ft=be.length;nt<ft;nt++){const et=Ee[nt];for(let Tt=0;Tt<et.length;Tt++){const Qt=et[Tt];let zt=!0;for(let Gt=0;Gt<be.length;Gt++)E(Qt.p,be[Gt].p)&&(nt!==Gt&&rt.push({froms:nt,tos:Gt,hole:Tt}),zt?(zt=!1,me[Gt].push(Qt)):Se=!0);zt&&me[nt].push(Qt)}}rt.length>0&&(Se||(Ee=me))}for(let Se=0,rt=be.length;Se<rt;Se++){ee=be[Se].s,pe.push(ee),Re=Ee[Se];for(let nt=0,ft=Re.length;nt<ft;nt++)ee.holes.push(Re[nt].h)}return pe}}class mw{constructor(l){this.type="Font",this.data=l}generateShapes(l,u=100){const w=[],E=function qD(x,l,u){const w=Array.from(x),E=l/u.resolution,R=(u.boundingBox.yMax-u.boundingBox.yMin+u.underlineThickness)*E,z=[];let Y=0,Q=0;for(let ee=0;ee<w.length;ee++){const pe=w[ee];if("\n"===pe)Y=0,Q-=R;else{const he=jD(pe,E,Y,Q,u);Y+=he.offsetX,z.push(he.path)}}return z}(l,u,this.data);for(let R=0,z=E.length;R<z;R++)Array.prototype.push.apply(w,E[R].toShapes());return w}}function jD(x,l,u,w,E){const R=E.glyphs[x]||E.glyphs["?"];if(!R)return void console.error('THREE.Font: character "'+x+'" does not exists in font family '+E.familyName+".");const z=new gm;let Y,Q,ee,pe,he,me,be,Ee;if(R.o){const Fe=R._cachedOutline||(R._cachedOutline=R.o.split(" "));for(let He=0,Re=Fe.length;He<Re;)switch(Fe[He++]){case"m":Y=Fe[He++]*l+u,Q=Fe[He++]*l+w,z.moveTo(Y,Q);break;case"l":Y=Fe[He++]*l+u,Q=Fe[He++]*l+w,z.lineTo(Y,Q);break;case"q":ee=Fe[He++]*l+u,pe=Fe[He++]*l+w,he=Fe[He++]*l+u,me=Fe[He++]*l+w,z.quadraticCurveTo(he,me,ee,pe);break;case"b":ee=Fe[He++]*l+u,pe=Fe[He++]*l+w,he=Fe[He++]*l+u,me=Fe[He++]*l+w,be=Fe[He++]*l+u,Ee=Fe[He++]*l+w,z.bezierCurveTo(he,me,be,Ee,ee,pe)}}return{offsetX:R.ha*l,path:z}}mw.prototype.isFont=!0;class ZD extends bl{constructor(l){super(l)}load(l,u,w,E){const R=this,z=new Nu(this.manager);z.setPath(this.path),z.setRequestHeader(this.requestHeader),z.setWithCredentials(R.withCredentials),z.load(l,function(Y){let Q;try{Q=JSON.parse(Y)}catch(pe){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),Q=JSON.parse(Y.substring(65,Y.length-2))}const ee=R.parse(Q);u&&u(ee)},w,E)}parse(l){return new mw(l)}}let Ta;const Sv={getContext:function(){return void 0===Ta&&(Ta=new(window.AudioContext||window.webkitAudioContext)),Ta},setContext:function(x){Ta=x}};class gw extends bl{constructor(l){super(l)}load(l,u,w,E){const R=this,z=new Nu(this.manager);z.setResponseType("arraybuffer"),z.setPath(this.path),z.setRequestHeader(this.requestHeader),z.setWithCredentials(this.withCredentials),z.load(l,function(Y){try{const Q=Y.slice(0);Sv.getContext().decodeAudioData(Q,function(pe){u(pe)})}catch(Q){E?E(Q):console.error(Q),R.manager.itemError(l)}},w,E)}}class _w extends Ug{constructor(l,u,w=1){super(void 0,w);const E=(new Ji).set(l),R=(new Ji).set(u),z=new je(E.r,E.g,E.b),Y=new je(R.r,R.g,R.b),Q=Math.sqrt(Math.PI),ee=Q*Math.sqrt(.75);this.sh.coefficients[0].copy(z).add(Y).multiplyScalar(Q),this.sh.coefficients[1].copy(z).sub(Y).multiplyScalar(ee)}}_w.prototype.isHemisphereLightProbe=!0;class vw extends Ug{constructor(l,u=1){super(void 0,u);const w=(new Ji).set(l);this.sh.coefficients[0].set(w.r,w.g,w.b).multiplyScalar(2*Math.sqrt(Math.PI))}}vw.prototype.isAmbientLightProbe=!0;const yw=new hr,eC=new hr;class YD{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new pa,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new pa,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(l){const u=this._cache;if(u.focus!==l.focus||u.fov!==l.fov||u.aspect!==l.aspect*this.aspect||u.near!==l.near||u.far!==l.far||u.zoom!==l.zoom||u.eyeSep!==this.eyeSep){u.focus=l.focus,u.fov=l.fov,u.aspect=l.aspect*this.aspect,u.near=l.near,u.far=l.far,u.zoom=l.zoom,u.eyeSep=this.eyeSep;const E=l.projectionMatrix.clone(),R=u.eyeSep/2,z=R*u.near/u.focus,Y=u.near*Math.tan(Ui.DEG2RAD*u.fov*.5)/u.zoom;let Q,ee;eC.elements[12]=-R,yw.elements[12]=R,Q=-Y*u.aspect+z,ee=Y*u.aspect+z,E.elements[0]=2*u.near/(ee-Q),E.elements[8]=(ee+Q)/(ee-Q),this.cameraL.projectionMatrix.copy(E),Q=-Y*u.aspect-z,ee=Y*u.aspect-z,E.elements[0]=2*u.near/(ee-Q),E.elements[8]=(ee+Q)/(ee-Q),this.cameraR.projectionMatrix.copy(E)}this.cameraL.matrixWorld.copy(l.matrixWorld).multiply(eC),this.cameraR.matrixWorld.copy(l.matrixWorld).multiply(yw)}}class tC{constructor(l){this.autoStart=void 0===l||l,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=nC(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let l=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const u=nC();l=(u-this.oldTime)/1e3,this.oldTime=u,this.elapsedTime+=l}return l}}function nC(){return("undefined"==typeof performance?Date:performance).now()}const Jf=new je,XD=new Cs,iC=new je,_m=new je;class JD extends xi{constructor(){super(),this.type="AudioListener",this.context=Sv.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new tC}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(l){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=l,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(l){return this.gain.gain.setTargetAtTime(l,this.context.currentTime,.01),this}updateMatrixWorld(l){super.updateMatrixWorld(l);const u=this.context.listener,w=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Jf,XD,iC),_m.set(0,0,-1).applyQuaternion(XD),u.positionX){const E=this.context.currentTime+this.timeDelta;u.positionX.linearRampToValueAtTime(Jf.x,E),u.positionY.linearRampToValueAtTime(Jf.y,E),u.positionZ.linearRampToValueAtTime(Jf.z,E),u.forwardX.linearRampToValueAtTime(_m.x,E),u.forwardY.linearRampToValueAtTime(_m.y,E),u.forwardZ.linearRampToValueAtTime(_m.z,E),u.upX.linearRampToValueAtTime(w.x,E),u.upY.linearRampToValueAtTime(w.y,E),u.upZ.linearRampToValueAtTime(w.z,E)}else u.setPosition(Jf.x,Jf.y,Jf.z),u.setOrientation(_m.x,_m.y,_m.z,w.x,w.y,w.z)}}class rC extends xi{constructor(l){super(),this.type="Audio",this.listener=l,this.context=l.context,this.gain=this.context.createGain(),this.gain.connect(l.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(l){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=l,this.connect(),this}setMediaElementSource(l){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(l),this.connect(),this}setMediaStreamSource(l){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(l),this.connect(),this}setBuffer(l){return this.buffer=l,this.sourceType="buffer",this.autoplay&&this.play(),this}play(l=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+l;const u=this.context.createBufferSource();return u.buffer=this.buffer,u.loop=this.loop,u.loopStart=this.loopStart,u.loopEnd=this.loopEnd,u.onended=this.onEnded.bind(this),u.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=u,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let l=1,u=this.filters.length;l<u;l++)this.filters[l-1].connect(this.filters[l]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let l=1,u=this.filters.length;l<u;l++)this.filters[l-1].disconnect(this.filters[l]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(l){return l||(l=[]),!0===this._connected?(this.disconnect(),this.filters=l.slice(),this.connect()):this.filters=l.slice(),this}setDetune(l){if(this.detune=l,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(l){return this.setFilters(l?[l]:[])}setPlaybackRate(l){if(!1!==this.hasPlaybackControl)return this.playbackRate=l,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(l){if(!1!==this.hasPlaybackControl)return this.loop=l,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(l){return this.loopStart=l,this}setLoopEnd(l){return this.loopEnd=l,this}getVolume(){return this.gain.gain.value}setVolume(l){return this.gain.gain.setTargetAtTime(l,this.context.currentTime,.01),this}}const Wg=new je,Tb=new Cs,KD=new je,Kf=new je;class sC extends rC{constructor(l){super(l),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(l){return this.panner.refDistance=l,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(l){return this.panner.rolloffFactor=l,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(l){return this.panner.distanceModel=l,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(l){return this.panner.maxDistance=l,this}setDirectionalCone(l,u,w){return this.panner.coneInnerAngle=l,this.panner.coneOuterAngle=u,this.panner.coneOuterGain=w,this}updateMatrixWorld(l){if(super.updateMatrixWorld(l),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Wg,Tb,KD),Kf.set(0,0,1).applyQuaternion(Tb);const u=this.panner;if(u.positionX){const w=this.context.currentTime+this.listener.timeDelta;u.positionX.linearRampToValueAtTime(Wg.x,w),u.positionY.linearRampToValueAtTime(Wg.y,w),u.positionZ.linearRampToValueAtTime(Wg.z,w),u.orientationX.linearRampToValueAtTime(Kf.x,w),u.orientationY.linearRampToValueAtTime(Kf.y,w),u.orientationZ.linearRampToValueAtTime(Kf.z,w)}else u.setPosition(Wg.x,Wg.y,Wg.z),u.setOrientation(Kf.x,Kf.y,Kf.z)}}class QD{constructor(l,u=2048){this.analyser=l.context.createAnalyser(),this.analyser.fftSize=u,this.data=new Uint8Array(this.analyser.frequencyBinCount),l.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let l=0;const u=this.getFrequencyData();for(let w=0;w<u.length;w++)l+=u[w];return l/u.length}}class nh{constructor(l,u,w){let E,R,z;switch(this.binding=l,this.valueSize=w,u){case"quaternion":E=this._slerp,R=this._slerpAdditive,z=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*w),this._workIndex=5;break;case"string":case"bool":E=this._select,R=this._select,z=this._setAdditiveIdentityOther,this.buffer=new Array(5*w);break;default:E=this._lerp,R=this._lerpAdditive,z=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*w)}this._mixBufferRegion=E,this._mixBufferRegionAdditive=R,this._setIdentity=z,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(l,u){const w=this.buffer,E=this.valueSize,R=l*E+E;let z=this.cumulativeWeight;if(0===z){for(let Y=0;Y!==E;++Y)w[R+Y]=w[Y];z=u}else z+=u,this._mixBufferRegion(w,R,0,u/z,E);this.cumulativeWeight=z}accumulateAdditive(l){const u=this.buffer,w=this.valueSize,E=w*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(u,E,0,l,w),this.cumulativeWeightAdditive+=l}apply(l){const u=this.valueSize,w=this.buffer,E=l*u+u,R=this.cumulativeWeight,z=this.cumulativeWeightAdditive,Y=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,R<1&&this._mixBufferRegion(w,E,u*this._origIndex,1-R,u),z>0&&this._mixBufferRegionAdditive(w,E,this._addIndex*u,1,u);for(let Q=u,ee=u+u;Q!==ee;++Q)if(w[Q]!==w[Q+u]){Y.setValue(w,E);break}}saveOriginalState(){const u=this.buffer,w=this.valueSize,E=w*this._origIndex;this.binding.getValue(u,E);for(let R=w,z=E;R!==z;++R)u[R]=u[E+R%w];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const l=this._addIndex*this.valueSize,u=l+this.valueSize;for(let w=l;w<u;w++)this.buffer[w]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const l=this._origIndex*this.valueSize,u=this._addIndex*this.valueSize;for(let w=0;w<this.valueSize;w++)this.buffer[u+w]=this.buffer[l+w]}_select(l,u,w,E,R){if(E>=.5)for(let z=0;z!==R;++z)l[u+z]=l[w+z]}_slerp(l,u,w,E){Cs.slerpFlat(l,u,l,u,l,w,E)}_slerpAdditive(l,u,w,E,R){const z=this._workIndex*R;Cs.multiplyQuaternionsFlat(l,z,l,u,l,w),Cs.slerpFlat(l,u,l,u,l,z,E)}_lerp(l,u,w,E,R){const z=1-E;for(let Y=0;Y!==R;++Y){const Q=u+Y;l[Q]=l[Q]*z+l[w+Y]*E}}_lerpAdditive(l,u,w,E,R){for(let z=0;z!==R;++z){const Y=u+z;l[Y]=l[Y]+l[w+z]*E}}}const oC="\\[\\]\\.:\\/",CP=new RegExp("["+oC+"]","g"),Db="[^"+oC+"]",aC="[^"+oC.replace("\\.","")+"]",lC=/((?:WC+[\/:])*)/.source.replace("WC",Db),$D=/(WCOD+)?/.source.replace("WCOD",aC),SP=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Db),cC=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Db),cs=new RegExp("^"+lC+$D+SP+cC+"$"),eA=["material","materials","bones"];function Ab(x,l,u){const w=u||Pc.parseTrackName(l);this._targetGroup=x,this._bindings=x.subscribe_(l,w)}function Pc(x,l,u){this.path=l,this.parsedPath=u||Pc.parseTrackName(l),this.node=Pc.findNode(x,this.parsedPath.nodeName)||x,this.rootNode=x}Object.assign(Ab.prototype,{getValue:function(x,l){this.bind();const w=this._bindings[this._targetGroup.nCachedObjects_];void 0!==w&&w.getValue(x,l)},setValue:function(x,l){const u=this._bindings;for(let w=this._targetGroup.nCachedObjects_,E=u.length;w!==E;++w)u[w].setValue(x,l)},bind:function(){const x=this._bindings;for(let l=this._targetGroup.nCachedObjects_,u=x.length;l!==u;++l)x[l].bind()},unbind:function(){const x=this._bindings;for(let l=this._targetGroup.nCachedObjects_,u=x.length;l!==u;++l)x[l].unbind()}}),Object.assign(Pc,{Composite:Ab,create:function(x,l,u){return x&&x.isAnimationObjectGroup?new Pc.Composite(x,l,u):new Pc(x,l,u)},sanitizeNodeName:function(x){return x.replace(/\s/g,"_").replace(CP,"")},parseTrackName:function(x){const l=cs.exec(x);if(!l)throw new Error("PropertyBinding: Cannot parse trackName: "+x);const u={nodeName:l[2],objectName:l[3],objectIndex:l[4],propertyName:l[5],propertyIndex:l[6]},w=u.nodeName&&u.nodeName.lastIndexOf(".");if(void 0!==w&&-1!==w){const E=u.nodeName.substring(w+1);-1!==eA.indexOf(E)&&(u.nodeName=u.nodeName.substring(0,w),u.objectName=E)}if(null===u.propertyName||0===u.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+x);return u},findNode:function(x,l){if(!l||""===l||"."===l||-1===l||l===x.name||l===x.uuid)return x;if(x.skeleton){const u=x.skeleton.getBoneByName(l);if(void 0!==u)return u}if(x.children){const u=function(E){for(let R=0;R<E.length;R++){const z=E[R];if(z.name===l||z.uuid===l)return z;const Y=u(z.children);if(Y)return Y}return null},w=u(x.children);if(w)return w}return null}}),Object.assign(Pc.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(l,u){l[u]=this.node[this.propertyName]},function(l,u){const w=this.resolvedProperty;for(let E=0,R=w.length;E!==R;++E)l[u++]=w[E]},function(l,u){l[u]=this.resolvedProperty[this.propertyIndex]},function(l,u){this.resolvedProperty.toArray(l,u)}],SetterByBindingTypeAndVersioning:[[function(l,u){this.targetObject[this.propertyName]=l[u]},function(l,u){this.targetObject[this.propertyName]=l[u],this.targetObject.needsUpdate=!0},function(l,u){this.targetObject[this.propertyName]=l[u],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(l,u){const w=this.resolvedProperty;for(let E=0,R=w.length;E!==R;++E)w[E]=l[u++]},function(l,u){const w=this.resolvedProperty;for(let E=0,R=w.length;E!==R;++E)w[E]=l[u++];this.targetObject.needsUpdate=!0},function(l,u){const w=this.resolvedProperty;for(let E=0,R=w.length;E!==R;++E)w[E]=l[u++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(l,u){this.resolvedProperty[this.propertyIndex]=l[u]},function(l,u){this.resolvedProperty[this.propertyIndex]=l[u],this.targetObject.needsUpdate=!0},function(l,u){this.resolvedProperty[this.propertyIndex]=l[u],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(l,u){this.resolvedProperty.fromArray(l,u)},function(l,u){this.resolvedProperty.fromArray(l,u),this.targetObject.needsUpdate=!0},function(l,u){this.resolvedProperty.fromArray(l,u),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(l,u){this.bind(),this.getValue(l,u)},setValue:function(l,u){this.bind(),this.setValue(l,u)},bind:function(){let x=this.node;const l=this.parsedPath,u=l.objectName,w=l.propertyName;let E=l.propertyIndex;if(x||(x=Pc.findNode(this.rootNode,l.nodeName)||this.rootNode,this.node=x),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!x)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(u){let Q=l.objectIndex;switch(u){case"materials":if(!x.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!x.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);x=x.material.materials;break;case"bones":if(!x.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);x=x.skeleton.bones;for(let ee=0;ee<x.length;ee++)if(x[ee].name===Q){Q=ee;break}break;default:if(void 0===x[u])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);x=x[u]}if(void 0!==Q){if(void 0===x[Q])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,x);x=x[Q]}}const R=x[w];if(void 0===R)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+l.nodeName+"."+w+" but it wasn't found.",x);let z=this.Versioning.None;this.targetObject=x,void 0!==x.needsUpdate?z=this.Versioning.NeedsUpdate:void 0!==x.matrixWorldNeedsUpdate&&(z=this.Versioning.MatrixWorldNeedsUpdate);let Y=this.BindingType.Direct;if(void 0!==E){if("morphTargetInfluences"===w){if(!x.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!x.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!x.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==x.morphTargetDictionary[E]&&(E=x.morphTargetDictionary[E])}Y=this.BindingType.ArrayElement,this.resolvedProperty=R,this.propertyIndex=E}else void 0!==R.fromArray&&void 0!==R.toArray?(Y=this.BindingType.HasFromToArray,this.resolvedProperty=R):Array.isArray(R)?(Y=this.BindingType.EntireArray,this.resolvedProperty=R):this.propertyName=w;this.getValue=this.GetterByBindingType[Y],this.setValue=this.SetterByBindingTypeAndVersioning[Y][z]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Pc.prototype,{_getValue_unbound:Pc.prototype.getValue,_setValue_unbound:Pc.prototype.setValue});class uC{constructor(){this.uuid=Ui.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const l={};this._indicesByUUID=l;for(let w=0,E=arguments.length;w!==E;++w)l[arguments[w].uuid]=w;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const u=this;this.stats={objects:{get total(){return u._objects.length},get inUse(){return this.total-u.nCachedObjects_}},get bindingsPerObject(){return u._bindings.length}}}add(){const l=this._objects,u=this._indicesByUUID,w=this._paths,E=this._parsedPaths,R=this._bindings,z=R.length;let Y,Q=l.length,ee=this.nCachedObjects_;for(let pe=0,he=arguments.length;pe!==he;++pe){const me=arguments[pe],be=me.uuid;let Ee=u[be];if(void 0===Ee){Ee=Q++,u[be]=Ee,l.push(me);for(let Fe=0,He=z;Fe!==He;++Fe)R[Fe].push(new Pc(me,w[Fe],E[Fe]))}else if(Ee<ee){Y=l[Ee];const Fe=--ee,He=l[Fe];u[He.uuid]=Ee,l[Ee]=He,u[be]=Fe,l[Fe]=me;for(let Re=0,Se=z;Re!==Se;++Re){const rt=R[Re];let ft=rt[Ee];rt[Ee]=rt[Fe],void 0===ft&&(ft=new Pc(me,w[Re],E[Re])),rt[Fe]=ft}}else l[Ee]!==Y&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=ee}remove(){const l=this._objects,u=this._indicesByUUID,w=this._bindings,E=w.length;let R=this.nCachedObjects_;for(let z=0,Y=arguments.length;z!==Y;++z){const Q=arguments[z],ee=Q.uuid,pe=u[ee];if(void 0!==pe&&pe>=R){const he=R++,me=l[he];u[me.uuid]=pe,l[pe]=me,u[ee]=he,l[he]=Q;for(let be=0,Ee=E;be!==Ee;++be){const Fe=w[be],Re=Fe[pe];Fe[pe]=Fe[he],Fe[he]=Re}}}this.nCachedObjects_=R}uncache(){const l=this._objects,u=this._indicesByUUID,w=this._bindings,E=w.length;let R=this.nCachedObjects_,z=l.length;for(let Y=0,Q=arguments.length;Y!==Q;++Y){const pe=arguments[Y].uuid,he=u[pe];if(void 0!==he)if(delete u[pe],he<R){const me=--R,be=l[me],Ee=--z,Fe=l[Ee];u[be.uuid]=he,l[he]=be,u[Fe.uuid]=me,l[me]=Fe,l.pop();for(let He=0,Re=E;He!==Re;++He){const Se=w[He],nt=Se[Ee];Se[he]=Se[me],Se[me]=nt,Se.pop()}}else{const me=--z,be=l[me];me>0&&(u[be.uuid]=he),l[he]=be,l.pop();for(let Ee=0,Fe=E;Ee!==Fe;++Ee){const He=w[Ee];He[he]=He[me],He.pop()}}}this.nCachedObjects_=R}subscribe_(l,u){const w=this._bindingsIndicesByPath;let E=w[l];const R=this._bindings;if(void 0!==E)return R[E];const z=this._paths,Y=this._parsedPaths,Q=this._objects,pe=this.nCachedObjects_,he=new Array(Q.length);E=R.length,w[l]=E,z.push(l),Y.push(u),R.push(he);for(let me=pe,be=Q.length;me!==be;++me)he[me]=new Pc(Q[me],l,u);return he}unsubscribe_(l){const u=this._bindingsIndicesByPath,w=u[l];if(void 0!==w){const E=this._paths,R=this._parsedPaths,z=this._bindings,Y=z.length-1,Q=z[Y];u[l[Y]]=w,z[w]=Q,z.pop(),R[w]=R[Y],R.pop(),E[w]=E[Y],E.pop()}}}uC.prototype.isAnimationObjectGroup=!0;class tA{constructor(l,u,w=null,E=u.blendMode){this._mixer=l,this._clip=u,this._localRoot=w,this.blendMode=E;const R=u.tracks,z=R.length,Y=new Array(z),Q={endingStart:ah,endingEnd:ah};for(let ee=0;ee!==z;++ee){const pe=R[ee].createInterpolant(null);Y[ee]=pe,pe.settings=Q}this._interpolantSettings=Q,this._interpolants=Y,this._propertyBindings=new Array(z),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Tp,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(l){return this._startTime=l,this}setLoop(l,u){return this.loop=l,this.repetitions=u,this}setEffectiveWeight(l){return this.weight=l,this._effectiveWeight=this.enabled?l:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(l){return this._scheduleFading(l,0,1)}fadeOut(l){return this._scheduleFading(l,1,0)}crossFadeFrom(l,u,w){if(l.fadeOut(u),this.fadeIn(u),w){const E=this._clip.duration,R=l._clip.duration,Y=E/R;l.warp(1,R/E,u),this.warp(Y,1,u)}return this}crossFadeTo(l,u,w){return l.crossFadeFrom(this,u,w)}stopFading(){const l=this._weightInterpolant;return null!==l&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(l)),this}setEffectiveTimeScale(l){return this.timeScale=l,this._effectiveTimeScale=this.paused?0:l,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(l){return this.timeScale=this._clip.duration/l,this.stopWarping()}syncWith(l){return this.time=l.time,this.timeScale=l.timeScale,this.stopWarping()}halt(l){return this.warp(this._effectiveTimeScale,0,l)}warp(l,u,w){const E=this._mixer,R=E.time,z=this.timeScale;let Y=this._timeScaleInterpolant;null===Y&&(Y=E._lendControlInterpolant(),this._timeScaleInterpolant=Y);const Q=Y.parameterPositions,ee=Y.sampleValues;return Q[0]=R,Q[1]=R+w,ee[0]=l/z,ee[1]=u/z,this}stopWarping(){const l=this._timeScaleInterpolant;return null!==l&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(l)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(l,u,w,E){if(!this.enabled)return void this._updateWeight(l);const R=this._startTime;if(null!==R){const Q=(l-R)*w;if(Q<0||0===w)return;this._startTime=null,u=w*Q}u*=this._updateTimeScale(l);const z=this._updateTime(u),Y=this._updateWeight(l);if(Y>0){const Q=this._interpolants,ee=this._propertyBindings;if(this.blendMode===au)for(let pe=0,he=Q.length;pe!==he;++pe)Q[pe].evaluate(z),ee[pe].accumulateAdditive(Y);else for(let pe=0,he=Q.length;pe!==he;++pe)Q[pe].evaluate(z),ee[pe].accumulate(E,Y)}}_updateWeight(l){let u=0;if(this.enabled){u=this.weight;const w=this._weightInterpolant;if(null!==w){const E=w.evaluate(l)[0];u*=E,l>w.parameterPositions[1]&&(this.stopFading(),0===E&&(this.enabled=!1))}}return this._effectiveWeight=u,u}_updateTimeScale(l){let u=0;if(!this.paused){u=this.timeScale;const w=this._timeScaleInterpolant;null!==w&&(u*=w.evaluate(l)[0],l>w.parameterPositions[1]&&(this.stopWarping(),0===u?this.paused=!0:this.timeScale=u))}return this._effectiveTimeScale=u,u}_updateTime(l){const u=this._clip.duration,w=this.loop;let E=this.time+l,R=this._loopCount;const z=w===Ql;if(0===l)return-1===R?E:z&&1==(1&R)?u-E:E;if(w===Nh){-1===R&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(E>=u)E=u;else{if(!(E<0)){this.time=E;break e}E=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=E,this._mixer.dispatchEvent({type:"finished",action:this,direction:l<0?-1:1})}}else{if(-1===R&&(l>=0?(R=0,this._setEndings(!0,0===this.repetitions,z)):this._setEndings(0===this.repetitions,!0,z)),E>=u||E<0){const Y=Math.floor(E/u);E-=u*Y,R+=Math.abs(Y);const Q=this.repetitions-R;if(Q<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,E=l>0?u:0,this.time=E,this._mixer.dispatchEvent({type:"finished",action:this,direction:l>0?1:-1});else{if(1===Q){const ee=l<0;this._setEndings(ee,!ee,z)}else this._setEndings(!1,!1,z);this._loopCount=R,this.time=E,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:Y})}}else this.time=E;if(z&&1==(1&R))return u-E}return E}_setEndings(l,u,w){const E=this._interpolantSettings;w?(E.endingStart=Ai,E.endingEnd=Ai):(E.endingStart=l?this.zeroSlopeAtStart?Ai:ah:wd,E.endingEnd=u?this.zeroSlopeAtEnd?Ai:ah:wd)}_scheduleFading(l,u,w){const E=this._mixer,R=E.time;let z=this._weightInterpolant;null===z&&(z=E._lendControlInterpolant(),this._weightInterpolant=z);const Y=z.parameterPositions,Q=z.sampleValues;return Y[0]=R,Q[0]=u,Y[1]=R+l,Q[1]=w,this}}class hC extends pl{constructor(l){super(),this._root=l,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(l,u){const w=l._localRoot||this._root,E=l._clip.tracks,R=E.length,z=l._propertyBindings,Y=l._interpolants,Q=w.uuid,ee=this._bindingsByRootAndName;let pe=ee[Q];void 0===pe&&(pe={},ee[Q]=pe);for(let he=0;he!==R;++he){const me=E[he],be=me.name;let Ee=pe[be];if(void 0!==Ee)z[he]=Ee;else{if(Ee=z[he],void 0!==Ee){null===Ee._cacheIndex&&(++Ee.referenceCount,this._addInactiveBinding(Ee,Q,be));continue}Ee=new nh(Pc.create(w,be,u&&u._propertyBindings[he].binding.parsedPath),me.ValueTypeName,me.getValueSize()),++Ee.referenceCount,this._addInactiveBinding(Ee,Q,be),z[he]=Ee}Y[he].resultBuffer=Ee.buffer}}_activateAction(l){if(!this._isActiveAction(l)){if(null===l._cacheIndex){const w=(l._localRoot||this._root).uuid,E=l._clip.uuid,R=this._actionsByClip[E];this._bindAction(l,R&&R.knownActions[0]),this._addInactiveAction(l,E,w)}const u=l._propertyBindings;for(let w=0,E=u.length;w!==E;++w){const R=u[w];0==R.useCount++&&(this._lendBinding(R),R.saveOriginalState())}this._lendAction(l)}}_deactivateAction(l){if(this._isActiveAction(l)){const u=l._propertyBindings;for(let w=0,E=u.length;w!==E;++w){const R=u[w];0==--R.useCount&&(R.restoreOriginalState(),this._takeBackBinding(R))}this._takeBackAction(l)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const l=this;this.stats={actions:{get total(){return l._actions.length},get inUse(){return l._nActiveActions}},bindings:{get total(){return l._bindings.length},get inUse(){return l._nActiveBindings}},controlInterpolants:{get total(){return l._controlInterpolants.length},get inUse(){return l._nActiveControlInterpolants}}}}_isActiveAction(l){const u=l._cacheIndex;return null!==u&&u<this._nActiveActions}_addInactiveAction(l,u,w){const E=this._actions,R=this._actionsByClip;let z=R[u];if(void 0===z)z={knownActions:[l],actionByRoot:{}},l._byClipCacheIndex=0,R[u]=z;else{const Y=z.knownActions;l._byClipCacheIndex=Y.length,Y.push(l)}l._cacheIndex=E.length,E.push(l),z.actionByRoot[w]=l}_removeInactiveAction(l){const u=this._actions,w=u[u.length-1],E=l._cacheIndex;w._cacheIndex=E,u[E]=w,u.pop(),l._cacheIndex=null;const R=l._clip.uuid,z=this._actionsByClip,Y=z[R],Q=Y.knownActions,ee=Q[Q.length-1],pe=l._byClipCacheIndex;ee._byClipCacheIndex=pe,Q[pe]=ee,Q.pop(),l._byClipCacheIndex=null,delete Y.actionByRoot[(l._localRoot||this._root).uuid],0===Q.length&&delete z[R],this._removeInactiveBindingsForAction(l)}_removeInactiveBindingsForAction(l){const u=l._propertyBindings;for(let w=0,E=u.length;w!==E;++w){const R=u[w];0==--R.referenceCount&&this._removeInactiveBinding(R)}}_lendAction(l){const u=this._actions,w=l._cacheIndex,E=this._nActiveActions++,R=u[E];l._cacheIndex=E,u[E]=l,R._cacheIndex=w,u[w]=R}_takeBackAction(l){const u=this._actions,w=l._cacheIndex,E=--this._nActiveActions,R=u[E];l._cacheIndex=E,u[E]=l,R._cacheIndex=w,u[w]=R}_addInactiveBinding(l,u,w){const E=this._bindingsByRootAndName,R=this._bindings;let z=E[u];void 0===z&&(z={},E[u]=z),z[w]=l,l._cacheIndex=R.length,R.push(l)}_removeInactiveBinding(l){const u=this._bindings,w=l.binding,E=w.rootNode.uuid,R=w.path,z=this._bindingsByRootAndName,Y=z[E],Q=u[u.length-1],ee=l._cacheIndex;Q._cacheIndex=ee,u[ee]=Q,u.pop(),delete Y[R],0===Object.keys(Y).length&&delete z[E]}_lendBinding(l){const u=this._bindings,w=l._cacheIndex,E=this._nActiveBindings++,R=u[E];l._cacheIndex=E,u[E]=l,R._cacheIndex=w,u[w]=R}_takeBackBinding(l){const u=this._bindings,w=l._cacheIndex,E=--this._nActiveBindings,R=u[E];l._cacheIndex=E,u[E]=l,R._cacheIndex=w,u[w]=R}_lendControlInterpolant(){const l=this._controlInterpolants,u=this._nActiveControlInterpolants++;let w=l[u];return void 0===w&&(w=new hm(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),w.__cacheIndex=u,l[u]=w),w}_takeBackControlInterpolant(l){const u=this._controlInterpolants,w=l.__cacheIndex,E=--this._nActiveControlInterpolants,R=u[E];l.__cacheIndex=E,u[E]=l,R.__cacheIndex=w,u[w]=R}clipAction(l,u,w){const E=u||this._root,R=E.uuid;let z="string"==typeof l?Ng.findByName(E,l):l;const Y=null!==z?z.uuid:l,Q=this._actionsByClip[Y];let ee=null;if(void 0===w&&(w=null!==z?z.blendMode:Ms),void 0!==Q){const he=Q.actionByRoot[R];if(void 0!==he&&he.blendMode===w)return he;ee=Q.knownActions[0],null===z&&(z=ee._clip)}if(null===z)return null;const pe=new tA(this,z,u,w);return this._bindAction(pe,ee),this._addInactiveAction(pe,Y,R),pe}existingAction(l,u){const w=u||this._root,E=w.uuid,R="string"==typeof l?Ng.findByName(w,l):l,Y=this._actionsByClip[R?R.uuid:l];return void 0!==Y&&Y.actionByRoot[E]||null}stopAllAction(){const l=this._actions;for(let w=this._nActiveActions-1;w>=0;--w)l[w].stop();return this}update(l){const u=this._actions,w=this._nActiveActions,E=this.time+=l*=this.timeScale,R=Math.sign(l),z=this._accuIndex^=1;for(let ee=0;ee!==w;++ee)u[ee]._update(E,l,R,z);const Y=this._bindings,Q=this._nActiveBindings;for(let ee=0;ee!==Q;++ee)Y[ee].apply(z);return this}setTime(l){this.time=0;for(let u=0;u<this._actions.length;u++)this._actions[u].time=0;return this.update(l)}getRoot(){return this._root}uncacheClip(l){const u=this._actions,w=l.uuid,E=this._actionsByClip,R=E[w];if(void 0!==R){const z=R.knownActions;for(let Y=0,Q=z.length;Y!==Q;++Y){const ee=z[Y];this._deactivateAction(ee);const pe=ee._cacheIndex,he=u[u.length-1];ee._cacheIndex=null,ee._byClipCacheIndex=null,he._cacheIndex=pe,u[pe]=he,u.pop(),this._removeInactiveBindingsForAction(ee)}delete E[w]}}uncacheRoot(l){const u=l.uuid,w=this._actionsByClip;for(const z in w){const Q=w[z].actionByRoot[u];void 0!==Q&&(this._deactivateAction(Q),this._removeInactiveAction(Q))}const R=this._bindingsByRootAndName[u];if(void 0!==R)for(const z in R){const Y=R[z];Y.restoreOriginalState(),this._removeInactiveBinding(Y)}}uncacheAction(l,u){const w=this.existingAction(l,u);null!==w&&(this._deactivateAction(w),this._removeInactiveAction(w))}}hC.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Ib{constructor(l){"string"==typeof l&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),l=arguments[1]),this.value=l}clone(){return new Ib(void 0===this.value.clone?this.value:this.value.clone())}}function bw(x,l,u){Jc.call(this,x,l),this.meshPerAttribute=u||1}function qg(x,l,u,w,E){this.buffer=x,this.type=l,this.itemSize=u,this.elementSize=w,this.count=E,this.version=0}function Qf(x,l,u=0,w=1/0){this.ray=new ea(x,l),this.near=u,this.far=w,this.camera=null,this.layers=new bt,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function dC(x,l){return x.distance-l.distance}function vm(x,l,u,w){if(x.layers.test(l.layers)&&x.raycast(l,u),!0===w){const E=x.children;for(let R=0,z=E.length;R<z;R++)vm(E[R],l,u,!0)}}bw.prototype=Object.assign(Object.create(Jc.prototype),{constructor:bw,isInstancedInterleavedBuffer:!0,copy:function(x){return Jc.prototype.copy.call(this,x),this.meshPerAttribute=x.meshPerAttribute,this},clone:function(x){const l=Jc.prototype.clone.call(this,x);return l.meshPerAttribute=this.meshPerAttribute,l},toJSON:function(x){const l=Jc.prototype.toJSON.call(this,x);return l.isInstancedInterleavedBuffer=!0,l.meshPerAttribute=this.meshPerAttribute,l}}),Object.defineProperty(qg.prototype,"needsUpdate",{set:function(x){!0===x&&this.version++}}),Object.assign(qg.prototype,{isGLBufferAttribute:!0,setBuffer:function(x){return this.buffer=x,this},setType:function(x,l){return this.type=x,this.elementSize=l,this},setItemSize:function(x){return this.itemSize=x,this},setCount:function(x){return this.count=x,this}}),Object.assign(Qf.prototype,{set:function(x,l){this.ray.set(x,l)},setFromCamera:function(x,l){l&&l.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(l.matrixWorld),this.ray.direction.set(x.x,x.y,.5).unproject(l).sub(this.ray.origin).normalize(),this.camera=l):l&&l.isOrthographicCamera?(this.ray.origin.set(x.x,x.y,(l.near+l.far)/(l.near-l.far)).unproject(l),this.ray.direction.set(0,0,-1).transformDirection(l.matrixWorld),this.camera=l):console.error("THREE.Raycaster: Unsupported camera type: "+l.type)},intersectObject:function(x,l=!1,u=[]){return vm(x,this,u,l),u.sort(dC),u},intersectObjects:function(x,l=!1,u=[]){for(let w=0,E=x.length;w<E;w++)vm(x[w],this,u,l);return u.sort(dC),u}});class nA{constructor(l=1,u=0,w=0){return this.radius=l,this.phi=u,this.theta=w,this}set(l,u,w){return this.radius=l,this.phi=u,this.theta=w,this}copy(l){return this.radius=l.radius,this.phi=l.phi,this.theta=l.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(l){return this.setFromCartesianCoords(l.x,l.y,l.z)}setFromCartesianCoords(l,u,w){return this.radius=Math.sqrt(l*l+u*u+w*w),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(l,w),this.phi=Math.acos(Ui.clamp(u/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class iA{constructor(l=1,u=0,w=0){return this.radius=l,this.theta=u,this.y=w,this}set(l,u,w){return this.radius=l,this.theta=u,this.y=w,this}copy(l){return this.radius=l.radius,this.theta=l.theta,this.y=l.y,this}setFromVector3(l){return this.setFromCartesianCoords(l.x,l.y,l.z)}setFromCartesianCoords(l,u,w){return this.radius=Math.sqrt(l*l+w*w),this.theta=Math.atan2(l,w),this.y=u,this}clone(){return(new this.constructor).copy(this)}}const Rb=new Bn;class tu{constructor(l=new Bn(1/0,1/0),u=new Bn(-1/0,-1/0)){this.min=l,this.max=u}set(l,u){return this.min.copy(l),this.max.copy(u),this}setFromPoints(l){this.makeEmpty();for(let u=0,w=l.length;u<w;u++)this.expandByPoint(l[u]);return this}setFromCenterAndSize(l,u){const w=Rb.copy(u).multiplyScalar(.5);return this.min.copy(l).sub(w),this.max.copy(l).add(w),this}clone(){return(new this.constructor).copy(this)}copy(l){return this.min.copy(l.min),this.max.copy(l.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(l){return void 0===l&&(console.warn("THREE.Box2: .getCenter() target is now required"),l=new Bn),this.isEmpty()?l.set(0,0):l.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(l){return void 0===l&&(console.warn("THREE.Box2: .getSize() target is now required"),l=new Bn),this.isEmpty()?l.set(0,0):l.subVectors(this.max,this.min)}expandByPoint(l){return this.min.min(l),this.max.max(l),this}expandByVector(l){return this.min.sub(l),this.max.add(l),this}expandByScalar(l){return this.min.addScalar(-l),this.max.addScalar(l),this}containsPoint(l){return!(l.x<this.min.x||l.x>this.max.x||l.y<this.min.y||l.y>this.max.y)}containsBox(l){return this.min.x<=l.min.x&&l.max.x<=this.max.x&&this.min.y<=l.min.y&&l.max.y<=this.max.y}getParameter(l,u){return void 0===u&&(console.warn("THREE.Box2: .getParameter() target is now required"),u=new Bn),u.set((l.x-this.min.x)/(this.max.x-this.min.x),(l.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(l){return!(l.max.x<this.min.x||l.min.x>this.max.x||l.max.y<this.min.y||l.min.y>this.max.y)}clampPoint(l,u){return void 0===u&&(console.warn("THREE.Box2: .clampPoint() target is now required"),u=new Bn),u.copy(l).clamp(this.min,this.max)}distanceToPoint(l){return Rb.copy(l).clamp(this.min,this.max).sub(l).length()}intersect(l){return this.min.max(l.min),this.max.min(l.max),this}union(l){return this.min.min(l.min),this.max.max(l.max),this}translate(l){return this.min.add(l),this.max.add(l),this}equals(l){return l.min.equals(this.min)&&l.max.equals(this.max)}}tu.prototype.isBox2=!0;const jg=new je,Yl=new je;class $f{constructor(l=new je,u=new je){this.start=l,this.end=u}set(l,u){return this.start.copy(l),this.end.copy(u),this}copy(l){return this.start.copy(l.start),this.end.copy(l.end),this}getCenter(l){return void 0===l&&(console.warn("THREE.Line3: .getCenter() target is now required"),l=new je),l.addVectors(this.start,this.end).multiplyScalar(.5)}delta(l){return void 0===l&&(console.warn("THREE.Line3: .delta() target is now required"),l=new je),l.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(l,u){return void 0===u&&(console.warn("THREE.Line3: .at() target is now required"),u=new je),this.delta(u).multiplyScalar(l).add(this.start)}closestPointToPointParameter(l,u){jg.subVectors(l,this.start),Yl.subVectors(this.end,this.start);const w=Yl.dot(Yl);let R=Yl.dot(jg)/w;return u&&(R=Ui.clamp(R,0,1)),R}closestPointToPoint(l,u,w){const E=this.closestPointToPointParameter(l,u);return void 0===w&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),w=new je),this.delta(w).multiplyScalar(E).add(this.start)}applyMatrix4(l){return this.start.applyMatrix4(l),this.end.applyMatrix4(l),this}equals(l){return l.start.equals(this.start)&&l.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}function ep(x){xi.call(this),this.material=x,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}(ep.prototype=Object.create(xi.prototype)).constructor=ep,ep.prototype.isImmediateRenderObject=!0;const Bu=new je;class Da extends xi{constructor(l,u){super(),this.light=l,this.light.updateMatrixWorld(),this.matrix=l.matrixWorld,this.matrixAutoUpdate=!1,this.color=u;const w=new yr,E=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let z=0,Y=1,Q=32;z<Q;z++,Y++){const ee=z/Q*Math.PI*2,pe=Y/Q*Math.PI*2;E.push(Math.cos(ee),Math.sin(ee),1,Math.cos(pe),Math.sin(pe),1)}w.setAttribute("position",new Fn(E,3));const R=new yl({fog:!1,toneMapped:!1});this.cone=new Kc(w,R),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const l=this.light.distance?this.light.distance:1e3,u=l*Math.tan(this.light.angle);this.cone.scale.set(u,u,l),Bu.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Bu),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Hu=new je,ef=new hr,tp=new hr;class ym extends Kc{constructor(l){const u=bm(l),w=new yr,E=[],R=[],z=new Ji(0,0,1),Y=new Ji(0,1,0);for(let ee=0;ee<u.length;ee++){const pe=u[ee];pe.parent&&pe.parent.isBone&&(E.push(0,0,0),E.push(0,0,0),R.push(z.r,z.g,z.b),R.push(Y.r,Y.g,Y.b))}w.setAttribute("position",new Fn(E,3)),w.setAttribute("color",new Fn(R,3)),super(w,new yl({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=l,this.bones=u,this.matrix=l.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(l){const u=this.bones,w=this.geometry,E=w.getAttribute("position");tp.copy(this.root.matrixWorld).invert();for(let R=0,z=0;R<u.length;R++){const Y=u[R];Y.parent&&Y.parent.isBone&&(ef.multiplyMatrices(tp,Y.matrixWorld),Hu.setFromMatrixPosition(ef),E.setXYZ(z,Hu.x,Hu.y,Hu.z),ef.multiplyMatrices(tp,Y.parent.matrixWorld),Hu.setFromMatrixPosition(ef),E.setXYZ(z+1,Hu.x,Hu.y,Hu.z),z+=2)}w.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(l)}}function bm(x){const l=[];x&&x.isBone&&l.push(x);for(let u=0;u<x.children.length;u++)l.push.apply(l,bm(x.children[u]));return l}class Zg extends to{constructor(l,u,w){super(new Ig(u,4,2),new qc({wireframe:!0,fog:!1,toneMapped:!1})),this.light=l,this.light.updateMatrixWorld(),this.color=w,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Yg=new je,xm=new Ji,wm=new Ji;class fC extends xi{constructor(l,u,w){super(),this.light=l,this.light.updateMatrixWorld(),this.matrix=l.matrixWorld,this.matrixAutoUpdate=!1,this.color=w;const E=new ab(u);E.rotateY(.5*Math.PI),this.material=new qc({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const R=E.getAttribute("position"),z=new Float32Array(3*R.count);E.setAttribute("color",new zr(z,3)),this.add(new to(E,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const l=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const u=l.geometry.getAttribute("color");xm.copy(this.light.color),wm.copy(this.light.groundColor);for(let w=0,E=u.count;w<E;w++){const R=w<E/2?xm:wm;u.setXYZ(w,R.r,R.g,R.b)}u.needsUpdate=!0}l.lookAt(Yg.setFromMatrixPosition(this.light.matrixWorld).negate())}}class xw extends Kc{constructor(l=10,u=10,w=4473924,E=8947848){w=new Ji(w),E=new Ji(E);const R=u/2,z=l/u,Y=l/2,Q=[],ee=[];for(let me=0,be=0,Ee=-Y;me<=u;me++,Ee+=z){Q.push(-Y,0,Ee,Y,0,Ee),Q.push(Ee,0,-Y,Ee,0,Y);const Fe=me===R?w:E;Fe.toArray(ee,be),be+=3,Fe.toArray(ee,be),be+=3,Fe.toArray(ee,be),be+=3,Fe.toArray(ee,be),be+=3}const pe=new yr;pe.setAttribute("position",new Fn(Q,3)),pe.setAttribute("color",new Fn(ee,3)),super(pe,new yl({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class pC extends Kc{constructor(l=10,u=16,w=8,E=64,R=4473924,z=8947848){R=new Ji(R),z=new Ji(z);const Y=[],Q=[];for(let he=0;he<=u;he++){const me=he/u*(2*Math.PI),be=Math.sin(me)*l,Ee=Math.cos(me)*l;Y.push(0,0,0),Y.push(be,0,Ee);const Fe=1&he?R:z;Q.push(Fe.r,Fe.g,Fe.b),Q.push(Fe.r,Fe.g,Fe.b)}for(let he=0;he<=w;he++){const me=1&he?R:z,be=l-l/w*he;for(let Ee=0;Ee<E;Ee++){let Fe=Ee/E*(2*Math.PI),He=Math.sin(Fe)*be,Re=Math.cos(Fe)*be;Y.push(He,0,Re),Q.push(me.r,me.g,me.b),Fe=(Ee+1)/E*(2*Math.PI),He=Math.sin(Fe)*be,Re=Math.cos(Fe)*be,Y.push(He,0,Re),Q.push(me.r,me.g,me.b)}}const ee=new yr;ee.setAttribute("position",new Fn(Y,3)),ee.setAttribute("color",new Fn(Q,3)),super(ee,new yl({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const ww=new je,Ev=new je,Mw=new je;class mC extends xi{constructor(l,u,w){super(),this.light=l,this.light.updateMatrixWorld(),this.matrix=l.matrixWorld,this.matrixAutoUpdate=!1,this.color=w,void 0===u&&(u=1);let E=new yr;E.setAttribute("position",new Fn([-u,u,0,u,u,0,u,-u,0,-u,-u,0,-u,u,0],3));const R=new yl({fog:!1,toneMapped:!1});this.lightPlane=new wh(E,R),this.add(this.lightPlane),E=new yr,E.setAttribute("position",new Fn([0,0,0,0,0,1],3)),this.targetLine=new wh(E,R),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){ww.setFromMatrixPosition(this.light.matrixWorld),Ev.setFromMatrixPosition(this.light.target.matrixWorld),Mw.subVectors(Ev,ww),this.lightPlane.lookAt(Ev),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ev),this.targetLine.scale.z=Mw.length()}}const Tv=new je,tl=new ic;class rA extends Kc{constructor(l){const u=new yr,w=new yl({color:16777215,vertexColors:!0,toneMapped:!1}),E=[],R=[],z={},Y=new Ji(16755200),Q=new Ji(16711680),ee=new Ji(43775),pe=new Ji(16777215),he=new Ji(3355443);function me(Ee,Fe,He){be(Ee,He),be(Fe,He)}function be(Ee,Fe){E.push(0,0,0),R.push(Fe.r,Fe.g,Fe.b),void 0===z[Ee]&&(z[Ee]=[]),z[Ee].push(E.length/3-1)}me("n1","n2",Y),me("n2","n4",Y),me("n4","n3",Y),me("n3","n1",Y),me("f1","f2",Y),me("f2","f4",Y),me("f4","f3",Y),me("f3","f1",Y),me("n1","f1",Y),me("n2","f2",Y),me("n3","f3",Y),me("n4","f4",Y),me("p","n1",Q),me("p","n2",Q),me("p","n3",Q),me("p","n4",Q),me("u1","u2",ee),me("u2","u3",ee),me("u3","u1",ee),me("c","t",pe),me("p","c",he),me("cn1","cn2",he),me("cn3","cn4",he),me("cf1","cf2",he),me("cf3","cf4",he),u.setAttribute("position",new Fn(E,3)),u.setAttribute("color",new Fn(R,3)),super(u,w),this.type="CameraHelper",this.camera=l,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=l.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=z,this.update()}update(){const l=this.geometry,u=this.pointMap;tl.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),bs("c",u,l,tl,0,0,-1),bs("t",u,l,tl,0,0,1),bs("n1",u,l,tl,-1,-1,-1),bs("n2",u,l,tl,1,-1,-1),bs("n3",u,l,tl,-1,1,-1),bs("n4",u,l,tl,1,1,-1),bs("f1",u,l,tl,-1,-1,1),bs("f2",u,l,tl,1,-1,1),bs("f3",u,l,tl,-1,1,1),bs("f4",u,l,tl,1,1,1),bs("u1",u,l,tl,.7,1.1,-1),bs("u2",u,l,tl,-.7,1.1,-1),bs("u3",u,l,tl,0,2,-1),bs("cf1",u,l,tl,-1,0,1),bs("cf2",u,l,tl,1,0,1),bs("cf3",u,l,tl,0,-1,1),bs("cf4",u,l,tl,0,1,1),bs("cn1",u,l,tl,-1,0,-1),bs("cn2",u,l,tl,1,0,-1),bs("cn3",u,l,tl,0,-1,-1),bs("cn4",u,l,tl,0,1,-1),l.getAttribute("position").needsUpdate=!0}}function bs(x,l,u,w,E,R,z){Tv.set(E,R,z).unproject(w);const Y=l[x];if(void 0!==Y){const Q=u.getAttribute("position");for(let ee=0,pe=Y.length;ee<pe;ee++)Q.setXYZ(Y[ee],Tv.x,Tv.y,Tv.z)}}const kb=new Po;class Xg extends Kc{constructor(l,u=16776960){const w=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),E=new Float32Array(24),R=new yr;R.setIndex(new zr(w,1)),R.setAttribute("position",new zr(E,3)),super(R,new yl({color:u,toneMapped:!1})),this.object=l,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(l){if(void 0!==l&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&kb.setFromObject(this.object),kb.isEmpty())return;const u=kb.min,w=kb.max,E=this.geometry.attributes.position,R=E.array;R[0]=w.x,R[1]=w.y,R[2]=w.z,R[3]=u.x,R[4]=w.y,R[5]=w.z,R[6]=u.x,R[7]=u.y,R[8]=w.z,R[9]=w.x,R[10]=u.y,R[11]=w.z,R[12]=w.x,R[13]=w.y,R[14]=u.z,R[15]=u.x,R[16]=w.y,R[17]=u.z,R[18]=u.x,R[19]=u.y,R[20]=u.z,R[21]=w.x,R[22]=u.y,R[23]=u.z,E.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(l){return this.object=l,this.update(),this}copy(l){return Kc.prototype.copy.call(this,l),this.object=l.object,this}}class gC extends Kc{constructor(l,u=16776960){const w=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),R=new yr;R.setIndex(new zr(w,1)),R.setAttribute("position",new Fn([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(R,new yl({color:u,toneMapped:!1})),this.box=l,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(l){const u=this.box;u.isEmpty()||(u.getCenter(this.position),u.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(l))}}class sA extends wh{constructor(l,u=1,w=16776960){const E=w,z=new yr;z.setAttribute("position",new Fn([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),z.computeBoundingSphere(),super(z,new yl({color:E,toneMapped:!1})),this.type="PlaneHelper",this.plane=l,this.size=u;const Q=new yr;Q.setAttribute("position",new Fn([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),Q.computeBoundingSphere(),this.add(new to(Q,new qc({color:E,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(l){let u=-this.plane.constant;Math.abs(u)<1e-8&&(u=1e-8),this.scale.set(.5*this.size,.5*this.size,u),this.children[0].material.side=u<0?W:J,this.lookAt(this.plane.normal),super.updateMatrixWorld(l)}}const _C=new je;let Dv,Cw;class vC extends xi{constructor(l=new je(0,0,1),u=new je(0,0,0),w=1,E=16776960,R=.2*w,z=.2*R){super(),this.type="ArrowHelper",void 0===Dv&&(Dv=new yr,Dv.setAttribute("position",new Fn([0,0,0,0,1,0],3)),Cw=new Eg(0,.5,1,5,1),Cw.translate(0,-.5,0)),this.position.copy(u),this.line=new wh(Dv,new yl({color:E,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new to(Cw,new qc({color:E,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(l),this.setLength(w,R,z)}setDirection(l){if(l.y>.99999)this.quaternion.set(0,0,0,1);else if(l.y<-.99999)this.quaternion.set(1,0,0,0);else{_C.set(l.z,0,-l.x).normalize();const u=Math.acos(l.y);this.quaternion.setFromAxisAngle(_C,u)}}setLength(l,u=.2*l,w=.2*u){this.line.scale.set(1,Math.max(1e-4,l-u),1),this.line.updateMatrix(),this.cone.scale.set(w,u,w),this.cone.position.y=l,this.cone.updateMatrix()}setColor(l){this.line.material.color.set(l),this.cone.material.color.set(l)}copy(l){return super.copy(l,!1),this.line.copy(l.line),this.cone.copy(l.cone),this}}class yC extends Kc{constructor(l=1){const u=[0,0,0,l,0,0,0,0,0,0,l,0,0,0,0,0,0,l],E=new yr;E.setAttribute("position",new Fn(u,3)),E.setAttribute("color",new Fn([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(E,new yl({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}}const bC=new Float32Array(1),EP=new Int32Array(bC.buffer),oA={toHalfFloat:function(x){bC[0]=x;const l=EP[0];let u=l>>16&32768,w=l>>12&2047;const E=l>>23&255;return E<103?u:E>142?(u|=31744,u|=(255==E?0:1)&&8388607&l,u):E<113?(w|=2048,u|=(w>>114-E)+(w>>113-E&1),u):(u|=E-112<<10|w>>1,u+=1&w,u)}},id=Math.pow(2,8),aA=[.125,.215,.35,.446,.526,.582],lA=5+aA.length,rd={[sl]:0,[mc]:1,[Hh]:2,[Fr]:3,[zh]:4,[ch]:5,[Bh]:6},ip=new qc({side:W,depthWrite:!1,depthTest:!1}),TP=new to(new Iu,ip),Sw=new Vg,{_lodPlanes:sd,_sizeLods:xC,_sigmas:Iv}=hA(),wC=new Ji;let Pb=null;const od=(1+Math.sqrt(5))/2,Jg=1/od,Ew=[new je(1,1,1),new je(-1,1,1),new je(1,1,-1),new je(-1,1,-1),new je(0,od,Jg),new je(0,od,-Jg),new je(Jg,0,od),new je(-Jg,0,od),new je(od,Jg,0),new je(-od,Jg,0)];function MC(x){const l=Math.max(x.r,x.g,x.b),u=Math.min(Math.max(Math.ceil(Math.log2(l)),-128),127);return x.multiplyScalar(Math.pow(2,-u)),(u+128)/255}class cA{constructor(l){this._renderer=l,this._pingPongRenderTarget=null,this._blurMaterial=function dA(x){const l=new Float32Array(x),u=new je(0,1,0);return new Pg({name:"SphericalGaussianBlur",defines:{n:x},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:l},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:u},inputEncoding:{value:rd[sl]},outputEncoding:{value:rd[sl]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:ae,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(l,u=0,w=.1,E=100){Pb=this._renderer.getRenderTarget();const R=this._allocateTargets();return this._sceneToCubeUV(l,w,E,R),u>0&&this._blur(R,0,0,u),this._applyPMREM(R),this._cleanup(R),R}fromEquirectangular(l){return this._fromTexture(l)}fromCubemap(l){return this._fromTexture(l)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=Dw(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Tw(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let l=0;l<sd.length;l++)sd[l].dispose()}_cleanup(l){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Pb),l.scissorTest=!1,Rv(l,0,0,l.width,l.height)}_fromTexture(l){Pb=this._renderer.getRenderTarget();const u=this._allocateTargets(l);return this._textureToCubeUV(l,u),this._applyPMREM(u),this._cleanup(u),u}_allocateTargets(l){const u={magFilter:mo,minFilter:mo,generateMipmaps:!1,type:Z,format:Qn,encoding:(x=l,void 0===x||x.type!==Z||x.encoding!==sl&&x.encoding!==mc&&x.encoding!==Bh?Hh:l.encoding),depthBuffer:!1},w=CC(u);var x;return w.depthBuffer=!l,this._pingPongRenderTarget=CC(u),w}_compileMaterial(l){const u=new to(sd[0],l);this._renderer.compile(u,Sw)}_sceneToCubeUV(l,u,w,E){const Y=new pa(90,1,u,w),Q=[1,-1,1,1,1,1],ee=[1,1,1,-1,-1,-1],pe=this._renderer,he=pe.autoClear,me=pe.outputEncoding,be=pe.toneMapping;pe.getClearColor(wC),pe.toneMapping=tt,pe.outputEncoding=sl,pe.autoClear=!1;let Ee=!1;const Fe=l.background;if(Fe){if(Fe.isColor){ip.color.copy(Fe).convertSRGBToLinear(),l.background=null;const He=MC(ip.color);ip.opacity=He,Ee=!0}}else{ip.color.copy(wC).convertSRGBToLinear();const He=MC(ip.color);ip.opacity=He,Ee=!0}for(let He=0;He<6;He++){const Re=He%3;0==Re?(Y.up.set(0,Q[He],0),Y.lookAt(ee[He],0,0)):1==Re?(Y.up.set(0,0,Q[He]),Y.lookAt(0,ee[He],0)):(Y.up.set(0,Q[He],0),Y.lookAt(0,0,ee[He])),Rv(E,Re*id,He>2?id:0,id,id),pe.setRenderTarget(E),Ee&&pe.render(TP,Y),pe.render(l,Y)}pe.toneMapping=be,pe.outputEncoding=me,pe.autoClear=he}_textureToCubeUV(l,u){const w=this._renderer;l.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=Dw()):null==this._equirectShader&&(this._equirectShader=Tw());const E=l.isCubeTexture?this._cubemapShader:this._equirectShader,R=new to(sd[0],E),z=E.uniforms;z.envMap.value=l,l.isCubeTexture||z.texelSize.value.set(1/l.image.width,1/l.image.height),z.inputEncoding.value=rd[l.encoding],z.outputEncoding.value=rd[u.texture.encoding],Rv(u,0,0,3*id,2*id),w.setRenderTarget(u),w.render(R,Sw)}_applyPMREM(l){const u=this._renderer,w=u.autoClear;u.autoClear=!1;for(let E=1;E<lA;E++){const R=Math.sqrt(Iv[E]*Iv[E]-Iv[E-1]*Iv[E-1]);this._blur(l,E-1,E,R,Ew[(E-1)%Ew.length])}u.autoClear=w}_blur(l,u,w,E,R){const z=this._pingPongRenderTarget;this._halfBlur(l,z,u,w,E,"latitudinal",R),this._halfBlur(z,l,w,w,E,"longitudinal",R)}_halfBlur(l,u,w,E,R,z,Y){const Q=this._renderer,ee=this._blurMaterial;"latitudinal"!==z&&"longitudinal"!==z&&console.error("blur direction must be either latitudinal or longitudinal!");const he=new to(sd[E],ee),me=ee.uniforms,be=xC[w]-1,Ee=isFinite(R)?Math.PI/(2*be):2*Math.PI/39,Fe=R/Ee,He=isFinite(R)?1+Math.floor(3*Fe):20;He>20&&console.warn(`sigmaRadians, ${R}, is too large and will clip, as it requested ${He} samples when the maximum is set to 20`);const Re=[];let Se=0;for(let et=0;et<20;++et){const Tt=et/Fe,Qt=Math.exp(-Tt*Tt/2);Re.push(Qt),0==et?Se+=Qt:et<He&&(Se+=2*Qt)}for(let et=0;et<Re.length;et++)Re[et]=Re[et]/Se;me.envMap.value=l.texture,me.samples.value=He,me.weights.value=Re,me.latitudinal.value="latitudinal"===z,Y&&(me.poleAxis.value=Y),me.dTheta.value=Ee,me.mipInt.value=8-w,me.inputEncoding.value=rd[l.texture.encoding],me.outputEncoding.value=rd[l.texture.encoding];const rt=xC[E];Rv(u,3*Math.max(0,id-2*rt),(0===E?0:2*id)+2*rt*(E>4?E-8+4:0),3*rt,2*rt),Q.setRenderTarget(u),Q.render(he,Sw)}}function hA(){const x=[],l=[],u=[];let w=8;for(let E=0;E<lA;E++){const R=Math.pow(2,w);l.push(R);let z=1/R;E>4?z=aA[E-8+4-1]:0==E&&(z=0),u.push(z);const Y=1/(R-1),Q=-Y/2,ee=1+Y/2,pe=[Q,Q,ee,Q,ee,ee,Q,Q,ee,ee,Q,ee],he=6,me=6,be=3,Ee=2,Fe=1,He=new Float32Array(be*me*he),Re=new Float32Array(Ee*me*he),Se=new Float32Array(Fe*me*he);for(let nt=0;nt<he;nt++){const ft=nt%3*2/3-1,et=nt>2?0:-1;He.set([ft,et,0,ft+2/3,et,0,ft+2/3,et+1,0,ft,et,0,ft+2/3,et+1,0,ft,et+1,0],be*me*nt),Re.set(pe,Ee*me*nt),Se.set([nt,nt,nt,nt,nt,nt],Fe*me*nt)}const rt=new yr;rt.setAttribute("position",new zr(He,be)),rt.setAttribute("uv",new zr(Re,Ee)),rt.setAttribute("faceIndex",new zr(Se,Fe)),x.push(rt),w>4&&w--}return{_lodPlanes:x,_sizeLods:l,_sigmas:u}}function CC(x){const l=new Do(3*id,3*id,x);return l.texture.mapping=ro,l.texture.name="PMREM.cubeUv",l.scissorTest=!0,l}function Rv(x,l,u,w,E){x.viewport.set(l,u,w,E),x.scissor.set(l,u,w,E)}function Tw(){const x=new Bn(1,1);return new Pg({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:x},inputEncoding:{value:rd[sl]},outputEncoding:{value:rd[sl]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:ae,depthTest:!1,depthWrite:!1})}function Dw(){return new Pg({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:rd[sl]},outputEncoding:{value:rd[sl]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:ae,depthTest:!1,depthWrite:!1})}const Aw=0,fA=1,DP=0,Ot=1,Pv=2;function is(x){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),x}function Iw(x=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),x.isMultiMaterial=!0,x.materials=x,x.clone=function(){return x.slice()},x}function pA(x,l){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new am(x,l)}function Kr(x){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new av(x)}function us(x,l){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new am(x,l)}function sc(x){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Qd(x)}function AP(x){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Qd(x)}function mA(x){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Qd(x)}function rp(x,l,u){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new je(x,l,u)}function sp(x,l){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new zr(x,l).setUsage(Ls)}function op(x,l){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new tc(x,l)}function Kg(x,l){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Ca(x,l)}function Lv(x,l){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new bf(x,l)}function EC(x,l){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Id(x,l)}function Rw(x,l){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Rd(x,l)}function Fo(x,l){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new uu(x,l)}function kw(x,l){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new qh(x,l)}function gA(x,l){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Fn(x,l)}function TC(x,l){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Ba(x,l)}function DC(x){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new yC(x)}function Pw(x,l){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Xg(x,l)}function oa(x,l){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Kc(new Vr(x.geometry),new yl({color:void 0!==l?l:16777215}))}function _A(x,l){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Kc(new cb(x.geometry),new yl({color:void 0!==l?l:16777215}))}function tf(x){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Nu(x)}function ad(x){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new hb(x)}function AC(x,l,u){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new sa(x,u)}function Lw(){console.error("THREE.CanvasRenderer has been removed")}function IC(){console.error("THREE.JSONLoader has been removed.")}eu.create=function(x,l){return console.log("THREE.Curve.create() has been deprecated"),x.prototype=Object.create(eu.prototype),x.prototype.constructor=x,x.prototype.getPoint=l,x},bv.prototype.fromPoints=function(x){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(x)},xw.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},ym.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},bl.prototype.extractUrlBase=function(x){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),dw.extractUrlBase(x)},bl.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},tu.prototype.center=function(x){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(x)},tu.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},tu.prototype.isIntersectionBox=function(x){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(x)},tu.prototype.size=function(x){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(x)},Po.prototype.center=function(x){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(x)},Po.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Po.prototype.isIntersectionBox=function(x){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(x)},Po.prototype.isIntersectionSphere=function(x){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(x)},Po.prototype.size=function(x){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(x)},Bs.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Lp.prototype.setFromMatrix=function(x){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(x)},$f.prototype.center=function(x){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(x)},Ui.random16=function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},Ui.nearestPowerOfTwo=function(x){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Ui.floorPowerOfTwo(x)},Ui.nextPowerOfTwo=function(x){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Ui.ceilPowerOfTwo(x)},oo.prototype.flattenToArrayOffset=function(x,l){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(x,l)},oo.prototype.multiplyVector3=function(x){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),x.applyMatrix3(this)},oo.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},oo.prototype.applyToBufferAttribute=function(x){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),x.applyMatrix3(this)},oo.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},oo.prototype.getInverse=function(x){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(x).invert()},hr.prototype.extractPosition=function(x){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(x)},hr.prototype.flattenToArrayOffset=function(x,l){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(x,l)},hr.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new je).setFromMatrixColumn(this,3)},hr.prototype.setRotationFromQuaternion=function(x){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(x)},hr.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},hr.prototype.multiplyVector3=function(x){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),x.applyMatrix4(this)},hr.prototype.multiplyVector4=function(x){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),x.applyMatrix4(this)},hr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},hr.prototype.rotateAxis=function(x){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),x.transformDirection(this)},hr.prototype.crossVector=function(x){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),x.applyMatrix4(this)},hr.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},hr.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},hr.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},hr.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},hr.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},hr.prototype.applyToBufferAttribute=function(x){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),x.applyMatrix4(this)},hr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},hr.prototype.makeFrustum=function(x,l,u,w,E,R){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(x,l,w,u,E,R)},hr.prototype.getInverse=function(x){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(x).invert()},wa.prototype.isIntersectionLine=function(x){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(x)},Cs.prototype.multiplyVector3=function(x){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),x.applyQuaternion(this)},Cs.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},ea.prototype.isIntersectionBox=function(x){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(x)},ea.prototype.isIntersectionPlane=function(x){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(x)},ea.prototype.isIntersectionSphere=function(x){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(x)},Ma.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Ma.prototype.barycoordFromPoint=function(x,l){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(x,l)},Ma.prototype.midpoint=function(x){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(x)},Ma.prototypenormal=function(x){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(x)},Ma.prototype.plane=function(x){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(x)},Ma.barycoordFromPoint=function(x,l,u,w,E){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Ma.getBarycoord(x,l,u,w,E)},Ma.normal=function(x,l,u,w){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Ma.getNormal(x,l,u,w)},ed.prototype.extractAllPoints=function(x){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(x)},ed.prototype.extrude=function(x){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Wf(this,x)},ed.prototype.makeGeometry=function(x){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new lm(this,x)},Bn.prototype.fromAttribute=function(x,l,u){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(x,l,u)},Bn.prototype.distanceToManhattan=function(x){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(x)},Bn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},je.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},je.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},je.prototype.getPositionFromMatrix=function(x){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(x)},je.prototype.getScaleFromMatrix=function(x){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(x)},je.prototype.getColumnFromMatrix=function(x,l){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(l,x)},je.prototype.applyProjection=function(x){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(x)},je.prototype.fromAttribute=function(x,l,u){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(x,l,u)},je.prototype.distanceToManhattan=function(x){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(x)},je.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},As.prototype.fromAttribute=function(x,l,u){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(x,l,u)},As.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},xi.prototype.getChildByName=function(x){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(x)},xi.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},xi.prototype.translate=function(x,l){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(l,x)},xi.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},xi.prototype.applyMatrix=function(x){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(x)},Object.defineProperties(xi.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(x){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=x}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),to.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(to.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),lh},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(Sx.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Mg.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),wg.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(eu.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(x){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=x}}),pa.prototype.setLens=function(x,l){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==l&&(this.filmGauge=l),this.setFocalLength(x)},Object.defineProperties(td.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(x){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=x}},shadowCameraLeft:{set:function(x){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=x}},shadowCameraRight:{set:function(x){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=x}},shadowCameraTop:{set:function(x){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=x}},shadowCameraBottom:{set:function(x){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=x}},shadowCameraNear:{set:function(x){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=x}},shadowCameraFar:{set:function(x){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=x}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(x){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=x}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(x){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=x}},shadowMapHeight:{set:function(x){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=x}}}),Object.defineProperties(zr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Ls},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Ls)}}}),zr.prototype.setDynamic=function(x){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===x?Ls:ko),this},zr.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},zr.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},yr.prototype.addIndex=function(x){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(x)},yr.prototype.addAttribute=function(x,l){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),l&&l.isBufferAttribute||l&&l.isInterleavedBufferAttribute?"index"===x?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(l),this):this.setAttribute(x,l):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(x,new zr(arguments[1],arguments[2])))},yr.prototype.addDrawCall=function(x,l,u){void 0!==u&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(x,l)},yr.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},yr.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},yr.prototype.removeAttribute=function(x){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(x)},yr.prototype.applyMatrix=function(x){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(x)},Object.defineProperties(yr.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(mm.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(x){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=x}}}),Object.defineProperties(Qf.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(x){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=x}}}),Object.defineProperties(Jc.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Ls},set:function(x){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(x)}}}),Jc.prototype.setDynamic=function(x){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===x?Ls:ko),this},Jc.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Wf.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Wf.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Wf.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Nf.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Object.defineProperties(Ib.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(qo.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ji}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(x){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=x===ce}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(x){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=x}}}),Object.defineProperties(ub.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(qf.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(x){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=x}}}),Object.defineProperties(ql.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(x){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=x}}}),Xo.prototype.clearTarget=function(x,l,u,w){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(x),this.clear(l,u,w)},Xo.prototype.animate=function(x){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(x)},Xo.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Xo.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Xo.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Xo.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Xo.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Xo.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Xo.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Xo.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Xo.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Xo.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Xo.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Xo.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Xo.prototype.enableScissorTest=function(x){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(x)},Xo.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Xo.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Xo.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Xo.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Xo.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Xo.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Xo.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Xo.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Xo.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Xo.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Xo.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(x){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=x}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(x){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=x}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(x){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===x?mc:sl}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(wx.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Do.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(x){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=x}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(x){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=x}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(x){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=x}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(x){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=x}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(x){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=x}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(x){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=x}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(x){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=x}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(x){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=x}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(x){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=x}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(x){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=x}}}),Object.defineProperties(rC.prototype,{load:{value:function(x){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const l=this;return(new gw).load(x,function(w){l.setBuffer(w)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),QD.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Qa.prototype.updateCubeMap=function(x,l){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(x,l)},Qa.prototype.clear=function(x,l,u,w){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(x,l,u,w)},ml.crossOrigin=void 0,ml.loadTexture=function(x,l,u,w){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const E=new db;E.setCrossOrigin(this.crossOrigin);const R=E.load(x,u,void 0,w);return l&&(R.mapping=l),R},ml.loadTextureCube=function(x,l,u,w){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const E=new Qx;E.setCrossOrigin(this.crossOrigin);const R=E.load(x,u,void 0,w);return l&&(R.mapping=l),R},ml.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},ml.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const RC={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function kC(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:o}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=o)},266:function(K){K.exports=function(){"use strict";var U=navigator.userAgent,D=navigator.platform,y=/gecko\/\d/i.test(U),o=/MSIE \d/.test(U),d=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(U),g=/Edge\/(\d+)/.exec(U),p=o||d||g,v=p&&(o?document.documentMode||6:+(g||d)[1]),M=!g&&/WebKit\//.test(U),T=M&&/Qt\/\d+\.\d+/.test(U),I=!g&&/Chrome\/(\d+)/.exec(U),P=I&&+I[1],N=/Opera\//.test(U),V=/Apple Computer/.test(navigator.vendor),J=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(U),W=/PhantomJS/.test(U),re=V&&(/Mobile\/\w+/.test(U)||navigator.maxTouchPoints>2),ce=/Android/.test(U),ie=re||ce||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(U),ae=re||/Mac/.test(D),we=/\bCrOS\b/.test(U),Me=/win/i.test(D),Pe=N&&U.match(/Version\/(\d*\.\d*)/);Pe&&(Pe=Number(Pe[1])),Pe&&Pe>=15&&(N=!1,M=!0);var Ve=ae&&(T||N&&(null==Pe||Pe<12.11)),le=y||p&&v>=9;function st(m){return new RegExp("(^|\\s)"+m+"(?:$|\\s)\\s*")}var Ze,We=function(m,C){var F=m.className,L=st(C).exec(F);if(L){var B=F.slice(L.index+L[0].length);m.className=F.slice(0,L.index)+(B?L[1]+B:"")}};function at(m){for(var C=m.childNodes.length;C>0;--C)m.removeChild(m.firstChild);return m}function Te(m,C){return at(m).appendChild(C)}function qe(m,C,F,L){var B=document.createElement(m);if(F&&(B.className=F),L&&(B.style.cssText=L),"string"==typeof C)B.appendChild(document.createTextNode(C));else if(C)for(var oe=0;oe<C.length;++oe)B.appendChild(C[oe]);return B}function Bt(m,C,F,L){var B=qe(m,C,F,L);return B.setAttribute("role","presentation"),B}function Zn(m,C){if(3==C.nodeType&&(C=C.parentNode),m.contains)return m.contains(C);do{if(11==C.nodeType&&(C=C.host),C==m)return!0}while(C=C.parentNode)}function jt(m){var C;try{C=m.activeElement}catch(F){C=m.body||null}for(;C&&C.shadowRoot&&C.shadowRoot.activeElement;)C=C.shadowRoot.activeElement;return C}function _n(m,C){var F=m.className;st(C).test(F)||(m.className+=(F?" ":"")+C)}function Dt(m,C){for(var F=m.split(" "),L=0;L<F.length;L++)F[L]&&!st(F[L]).test(C)&&(C+=" "+F[L]);return C}Ze=document.createRange?function(m,C,F,L){var B=document.createRange();return B.setEnd(L||m,F),B.setStart(m,C),B}:function(m,C,F){var L=document.body.createTextRange();try{L.moveToElementText(m.parentNode)}catch(B){return L}return L.collapse(!0),L.moveEnd("character",F),L.moveStart("character",C),L};var It=function(m){m.select()};function Yn(m){return m.display.wrapper.ownerDocument}function ei(m){return Yn(m).defaultView}function Xt(m){var C=Array.prototype.slice.call(arguments,1);return function(){return m.apply(null,C)}}function pr(m,C,F){for(var L in C||(C={}),m)m.hasOwnProperty(L)&&(!1!==F||!C.hasOwnProperty(L))&&(C[L]=m[L]);return C}function Li(m,C,F,L,B){null==C&&-1==(C=m.search(/[^\s\u00a0]/))&&(C=m.length);for(var oe=L||0,_e=B||0;;){var Ce=m.indexOf("\t",oe);if(Ce<0||Ce>=C)return _e+(C-oe);_e+=Ce-oe,_e+=F-_e%F,oe=Ce+1}}re?It=function(m){m.selectionStart=0,m.selectionEnd=m.value.length}:p&&(It=function(m){try{m.select()}catch(C){}});var Mn=function(){this.id=null,this.f=null,this.time=0,this.handler=Xt(this.onTimeout,this)};function Sn(m,C){for(var F=0;F<m.length;++F)if(m[F]==C)return F;return-1}Mn.prototype.onTimeout=function(m){m.id=0,m.time<=+new Date?m.f():setTimeout(m.handler,m.time-+new Date)},Mn.prototype.set=function(m,C){this.f=C;var F=+new Date+m;(!this.id||F<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,m),this.time=F)};var ti={toString:function(){return"CodeMirror.Pass"}},Fs={scroll:!1},cr={origin:"*mouse"},Le={origin:"+move"};function kn(m,C,F){for(var L=0,B=0;;){var oe=m.indexOf("\t",L);-1==oe&&(oe=m.length);var _e=oe-L;if(oe==m.length||B+_e>=C)return L+Math.min(_e,C-B);if(B+=oe-L,L=oe+1,(B+=F-B%F)>=C)return L}}var dn=[""];function lt(m){for(;dn.length<=m;)dn.push(tt(dn)+" ");return dn[m]}function tt(m){return m[m.length-1]}function Lt(m,C){for(var F=[],L=0;L<m.length;L++)F[L]=C(m[L],L);return F}function Ln(){}function rn(m,C){var F;return Object.create?F=Object.create(m):(Ln.prototype=m,F=new Ln),C&&pr(C,F),F}var ui=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ki(m){return/\w/.test(m)||m>"\x80"&&(m.toUpperCase()!=m.toLowerCase()||ui.test(m))}function pi(m,C){return C?!!(C.source.indexOf("\\w")>-1&&ki(m))||C.test(m):ki(m)}function ur(m){for(var C in m)if(m.hasOwnProperty(C)&&m[C])return!1;return!0}var Gs=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function wr(m){return m.charCodeAt(0)>=768&&Gs.test(m)}function ro(m,C,F){for(;(F<0?C>0:C<m.length)&&wr(m.charAt(C));)C+=F;return C}function ha(m,C,F){for(var L=C>F?-1:1;;){if(C==F)return C;var B=(C+F)/2,oe=L<0?Math.ceil(B):Math.floor(B);if(oe==C)return m(oe)?C:F;m(oe)?F=oe:C=oe+L}}var es=null;function Ps(m,C,F){var L;es=null;for(var B=0;B<m.length;++B){var oe=m[B];if(oe.from<C&&oe.to>C)return B;oe.to==C&&(oe.from!=oe.to&&"before"==F?L=B:es=B),oe.from==C&&(oe.from!=oe.to&&"before"!=F?L=B:es=B)}return null!=L?L:es}var mo=function(){function F(Be){return Be<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(Be):1424<=Be&&Be<=1524?"R":1536<=Be&&Be<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(Be-1536):1774<=Be&&Be<=2220?"r":8192<=Be&&Be<=8203?"w":8204==Be?"b":"L"}var L=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,B=/[stwN]/,oe=/[LRr]/,_e=/[Lb1n]/,Ce=/[1n]/;function Ae(Be,it,dt){this.level=Be,this.from=it,this.to=dt}return function(Be,it){var dt="ltr"==it?"L":"R";if(0==Be.length||"ltr"==it&&!L.test(Be))return!1;for(var Vt=Be.length,Pt=[],bn=0;bn<Vt;++bn)Pt.push(F(Be.charCodeAt(bn)));for(var Hn=0,hi=dt;Hn<Vt;++Hn){var li=Pt[Hn];"m"==li?Pt[Hn]=hi:hi=li}for(var di=0,fi=dt;di<Vt;++di){var ji=Pt[di];"1"==ji&&"r"==fi?Pt[di]="n":oe.test(ji)&&(fi=ji,"r"==ji&&(Pt[di]="R"))}for(var Ir=1,Cr=Pt[0];Ir<Vt-1;++Ir){var Rs=Pt[Ir];"+"==Rs&&"1"==Cr&&"1"==Pt[Ir+1]?Pt[Ir]="1":","==Rs&&Cr==Pt[Ir+1]&&("1"==Cr||"n"==Cr)&&(Pt[Ir]=Cr),Cr=Rs}for(var Yo=0;Yo<Vt;++Yo){var cl=Pt[Yo];if(","==cl)Pt[Yo]="N";else if("%"==cl){var ma=void 0;for(ma=Yo+1;ma<Vt&&"%"==Pt[ma];++ma);for(var Rc=Yo&&"!"==Pt[Yo-1]||ma<Vt&&"1"==Pt[ma]?"1":"N",xc=Yo;xc<ma;++xc)Pt[xc]=Rc;Yo=ma-1}}for(var el=0,kc=dt;el<Vt;++el){var Tl=Pt[el];"L"==kc&&"1"==Tl?Pt[el]="L":oe.test(Tl)&&(kc=Tl)}for(var ga=0;ga<Vt;++ga)if(B.test(Pt[ga])){var za=void 0;for(za=ga+1;za<Vt&&B.test(Pt[za]);++za);for(var go="L"==(ga?Pt[ga-1]:dt),Kd=go==("L"==(za<Vt?Pt[za]:dt))?go?"L":"R":dt,_h=ga;_h<za;++_h)Pt[_h]=Kd;ga=za-1}for(var vh,Dl=[],Al=0;Al<Vt;)if(_e.test(Pt[Al])){var By=Al;for(++Al;Al<Vt&&_e.test(Pt[Al]);++Al);Dl.push(new Ae(0,By,Al))}else{var Pu=Al,yh=Dl.length,bh="rtl"==it?1:0;for(++Al;Al<Vt&&"L"!=Pt[Al];++Al);for(var wc=Pu;wc<Al;)if(Ce.test(Pt[wc])){Pu<wc&&(Dl.splice(yh,0,new Ae(1,Pu,wc)),yh+=bh);var tm=wc;for(++wc;wc<Al&&Ce.test(Pt[wc]);++wc);Dl.splice(yh,0,new Ae(2,tm,wc)),yh+=bh,Pu=wc}else++wc;Pu<Al&&Dl.splice(yh,0,new Ae(1,Pu,Al))}return"ltr"==it&&(1==Dl[0].level&&(vh=Be.match(/^\s+/))&&(Dl[0].from=vh[0].length,Dl.unshift(new Ae(0,0,vh[0].length))),1==tt(Dl).level&&(vh=Be.match(/\s+$/))&&(tt(Dl).to-=vh[0].length,Dl.push(new Ae(0,Vt-vh[0].length,Vt)))),"rtl"==it?Dl.reverse():Dl}}();function aa(m,C){var F=m.order;return null==F&&(F=m.order=mo(m.text,C)),F}var ja=[],nr=function(m,C,F){if(m.addEventListener)m.addEventListener(C,F,!1);else if(m.attachEvent)m.attachEvent("on"+C,F);else{var L=m._handlers||(m._handlers={});L[C]=(L[C]||ja).concat(F)}};function qu(m,C){return m._handlers&&m._handlers[C]||ja}function Xi(m,C,F){if(m.removeEventListener)m.removeEventListener(C,F,!1);else if(m.detachEvent)m.detachEvent("on"+C,F);else{var L=m._handlers,B=L&&L[C];if(B){var oe=Sn(B,F);oe>-1&&(L[C]=B.slice(0,oe).concat(B.slice(oe+1)))}}}function Ds(m,C){var F=qu(m,C);if(F.length)for(var L=Array.prototype.slice.call(arguments,2),B=0;B<F.length;++B)F[B].apply(null,L)}function b(m,C,F){return"string"==typeof C&&(C={type:C,preventDefault:function(){this.defaultPrevented=!0}}),Ds(m,F||C.type,m,C),De(C)||C.codemirrorIgnore}function k(m){var C=m._handlers&&m._handlers.cursorActivity;if(C)for(var F=m.curOp.cursorActivityHandlers||(m.curOp.cursorActivityHandlers=[]),L=0;L<C.length;++L)-1==Sn(F,C[L])&&F.push(C[L])}function H(m,C){return qu(m,C).length>0}function Z(m){m.prototype.on=function(C,F){nr(this,C,F)},m.prototype.off=function(C,F){Xi(this,C,F)}}function ne(m){m.preventDefault?m.preventDefault():m.returnValue=!1}function fe(m){m.stopPropagation?m.stopPropagation():m.cancelBubble=!0}function De(m){return null!=m.defaultPrevented?m.defaultPrevented:0==m.returnValue}function Ue(m){ne(m),fe(m)}function Qe(m){return m.target||m.srcElement}function gt(m){var C=m.which;return null==C&&(1&m.button?C=1:2&m.button?C=3:4&m.button&&(C=2)),ae&&m.ctrlKey&&1==C&&(C=3),C}var Jt,Ht,xt=function(){if(p&&v<9)return!1;var m=qe("div");return"draggable"in m||"dragDrop"in m}();function Ct(m){if(null==Jt){var C=qe("span","\u200b");Te(m,qe("span",[C,document.createTextNode("x")])),0!=m.firstChild.offsetHeight&&(Jt=C.offsetWidth<=1&&C.offsetHeight>2&&!(p&&v<8))}var F=Jt?qe("span","\u200b"):qe("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return F.setAttribute("cm-text",""),F}function en(m){if(null!=Ht)return Ht;var C=Te(m,document.createTextNode("A\u062eA")),F=Ze(C,0,1).getBoundingClientRect(),L=Ze(C,1,2).getBoundingClientRect();return at(m),!(!F||F.left==F.right)&&(Ht=L.right-F.right<3)}var m,St=3!="\n\nb".split(/\n/).length?function(m){for(var C=0,F=[],L=m.length;C<=L;){var B=m.indexOf("\n",C);-1==B&&(B=m.length);var oe=m.slice(C,"\r"==m.charAt(B-1)?B-1:B),_e=oe.indexOf("\r");-1!=_e?(F.push(oe.slice(0,_e)),C+=_e+1):(F.push(oe),C=B+1)}return F}:function(m){return m.split(/\r\n?|\n/)},Kt=window.getSelection?function(m){try{return m.selectionStart!=m.selectionEnd}catch(C){return!1}}:function(m){var C;try{C=m.ownerDocument.selection.createRange()}catch(F){}return!(!C||C.parentElement()!=m)&&0!=C.compareEndPoints("StartToEnd",C)},gn="oncopy"in(m=qe("div"))||(m.setAttribute("oncopy","return;"),"function"==typeof m.oncopy),sn=null;var Qn={},Di={};function Ci(m,C){arguments.length>2&&(C.dependencies=Array.prototype.slice.call(arguments,2)),Qn[m]=C}function Ei(m){if("string"==typeof m&&Di.hasOwnProperty(m))m=Di[m];else if(m&&"string"==typeof m.name&&Di.hasOwnProperty(m.name)){var C=Di[m.name];"string"==typeof C&&(C={name:C}),(m=rn(C,m)).name=C.name}else{if("string"==typeof m&&/^[\w\-]+\/[\w\-]+\+xml$/.test(m))return Ei("application/xml");if("string"==typeof m&&/^[\w\-]+\/[\w\-]+\+json$/.test(m))return Ei("application/json")}return"string"==typeof m?{name:m}:m||{name:"null"}}function Mr(m,C){C=Ei(C);var F=Qn[C.name];if(!F)return Mr(m,"text/plain");var L=F(m,C);if(Oi.hasOwnProperty(C.name)){var B=Oi[C.name];for(var oe in B)!B.hasOwnProperty(oe)||(L.hasOwnProperty(oe)&&(L["_"+oe]=L[oe]),L[oe]=B[oe])}if(L.name=C.name,C.helperType&&(L.helperType=C.helperType),C.modeProps)for(var _e in C.modeProps)L[_e]=C.modeProps[_e];return L}var Oi={};function Yr(m,C){pr(C,Oi.hasOwnProperty(m)?Oi[m]:Oi[m]={})}function Br(m,C){if(!0===C)return C;if(m.copyState)return m.copyState(C);var F={};for(var L in C){var B=C[L];B instanceof Array&&(B=B.concat([])),F[L]=B}return F}function ia(m,C){for(var F;m.innerMode&&(F=m.innerMode(C))&&F.mode!=m;)C=F.state,m=F.mode;return F||{mode:m,state:C}}function rl(m,C,F){return!m.startState||m.startState(C,F)}var Qs=function(m,C,F){this.pos=this.start=0,this.string=m,this.tabSize=C||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=F};function Ni(m,C){if((C-=m.first)<0||C>=m.size)throw new Error("There is no line "+(C+m.first)+" in the document.");for(var F=m;!F.lines;)for(var L=0;;++L){var B=F.children[L],oe=B.chunkSize();if(C<oe){F=B;break}C-=oe}return F.lines[C]}function So(m,C,F){var L=[],B=C.line;return m.iter(C.line,F.line+1,function(oe){var _e=oe.text;B==F.line&&(_e=_e.slice(0,F.ch)),B==C.line&&(_e=_e.slice(C.ch)),L.push(_e),++B}),L}function Os(m,C,F){var L=[];return m.iter(C,F,function(B){L.push(B.text)}),L}function la(m,C){var F=C-m.height;if(F)for(var L=m;L;L=L.parent)L.height+=F}function ts(m){if(null==m.parent)return null;for(var C=m.parent,F=Sn(C.lines,m),L=C.parent;L;C=L,L=L.parent)for(var B=0;L.children[B]!=C;++B)F+=L.children[B].chunkSize();return F+C.first}function Ws(m,C){var F=m.first;e:do{for(var L=0;L<m.children.length;++L){var B=m.children[L],oe=B.height;if(C<oe){m=B;continue e}C-=oe,F+=B.chunkSize()}return F}while(!m.lines);for(var _e=0;_e<m.lines.length;++_e){var Ae=m.lines[_e].height;if(C<Ae)break;C-=Ae}return F+_e}function Eo(m,C){return C>=m.first&&C<m.first+m.size}function ka(m,C){return String(m.lineNumberFormatter(C+m.firstLineNumber))}function ke(m,C,F){if(void 0===F&&(F=null),!(this instanceof ke))return new ke(m,C,F);this.line=m,this.ch=C,this.sticky=F}function Je(m,C){return m.line-C.line||m.ch-C.ch}function mn(m,C){return m.sticky==C.sticky&&0==Je(m,C)}function En(m){return ke(m.line,m.ch)}function Dr(m,C){return Je(m,C)<0?C:m}function ps(m,C){return Je(m,C)<0?m:C}function Vi(m,C){return Math.max(m.first,Math.min(C,m.first+m.size-1))}function Xn(m,C){if(C.line<m.first)return ke(m.first,0);var F=m.first+m.size-1;return C.line>F?ke(F,Ni(m,F).text.length):function Pa(m,C){var F=m.ch;return null==F||F>C?ke(m.line,C):F<0?ke(m.line,0):m}(C,Ni(m,C.line).text.length)}function Cu(m,C){for(var F=[],L=0;L<C.length;L++)F[L]=Xn(m,C[L]);return F}Qs.prototype.eol=function(){return this.pos>=this.string.length},Qs.prototype.sol=function(){return this.pos==this.lineStart},Qs.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Qs.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Qs.prototype.eat=function(m){var C=this.string.charAt(this.pos);if("string"==typeof m?C==m:C&&(m.test?m.test(C):m(C)))return++this.pos,C},Qs.prototype.eatWhile=function(m){for(var C=this.pos;this.eat(m););return this.pos>C},Qs.prototype.eatSpace=function(){for(var m=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>m},Qs.prototype.skipToEnd=function(){this.pos=this.string.length},Qs.prototype.skipTo=function(m){var C=this.string.indexOf(m,this.pos);if(C>-1)return this.pos=C,!0},Qs.prototype.backUp=function(m){this.pos-=m},Qs.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Li(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Li(this.string,this.lineStart,this.tabSize):0)},Qs.prototype.indentation=function(){return Li(this.string,null,this.tabSize)-(this.lineStart?Li(this.string,this.lineStart,this.tabSize):0)},Qs.prototype.match=function(m,C,F){if("string"!=typeof m){var oe=this.string.slice(this.pos).match(m);return oe&&oe.index>0?null:(oe&&!1!==C&&(this.pos+=oe[0].length),oe)}var L=function(_e){return F?_e.toLowerCase():_e};if(L(this.string.substr(this.pos,m.length))==L(m))return!1!==C&&(this.pos+=m.length),!0},Qs.prototype.current=function(){return this.string.slice(this.start,this.pos)},Qs.prototype.hideFirstChars=function(m,C){this.lineStart+=m;try{return C()}finally{this.lineStart-=m}},Qs.prototype.lookAhead=function(m){var C=this.lineOracle;return C&&C.lookAhead(m)},Qs.prototype.baseToken=function(){var m=this.lineOracle;return m&&m.baseToken(this.pos)};var Bi=function(m,C){this.state=m,this.lookAhead=C},La=function(m,C,F,L){this.state=C,this.doc=m,this.line=F,this.maxLookAhead=L||0,this.baseTokens=null,this.baseTokenPos=1};function or(m,C,F,L){var B=[m.state.modeGen],oe={};Cp(m,C.text,m.doc.mode,F,function(Be,it){return B.push(Be,it)},oe,L);for(var _e=F.state,Ce=function(Be){F.baseTokens=B;var it=m.state.overlays[Be],dt=1,Vt=0;F.state=!0,Cp(m,C.text,it.mode,F,function(Pt,bn){for(var Hn=dt;Vt<Pt;){var hi=B[dt];hi>Pt&&B.splice(dt,1,Pt,B[dt+1],hi),dt+=2,Vt=Math.min(Pt,hi)}if(bn)if(it.opaque)B.splice(Hn,dt-Hn,Pt,"overlay "+bn),dt=Hn+2;else for(;Hn<dt;Hn+=2){var li=B[Hn+1];B[Hn+1]=(li?li+" ":"")+"overlay "+bn}},oe),F.state=_e,F.baseTokens=null,F.baseTokenPos=1},Ae=0;Ae<m.state.overlays.length;++Ae)Ce(Ae);return{styles:B,classes:oe.bgClass||oe.textClass?oe:null}}function ws(m,C,F){if(!C.styles||C.styles[0]!=m.state.modeGen){var L=Uo(m,ts(C)),B=C.text.length>m.options.maxHighlightLength&&Br(m.doc.mode,L.state),oe=or(m,C,L);B&&(L.state=B),C.stateAfter=L.save(!B),C.styles=oe.styles,oe.classes?C.styleClasses=oe.classes:C.styleClasses&&(C.styleClasses=null),F===m.doc.highlightFrontier&&(m.doc.modeFrontier=Math.max(m.doc.modeFrontier,++m.doc.highlightFrontier))}return C.styles}function Uo(m,C,F){var L=m.doc,B=m.display;if(!L.mode.startState)return new La(L,!0,C);var oe=function zc(m,C,F){for(var L,B,oe=m.doc,_e=F?-1:C-(m.doc.mode.innerMode?1e3:100),Ce=C;Ce>_e;--Ce){if(Ce<=oe.first)return oe.first;var Ae=Ni(oe,Ce-1),Be=Ae.stateAfter;if(Be&&(!F||Ce+(Be instanceof Bi?Be.lookAhead:0)<=oe.modeFrontier))return Ce;var it=Li(Ae.text,null,m.options.tabSize);(null==B||L>it)&&(B=Ce-1,L=it)}return B}(m,C,F),_e=oe>L.first&&Ni(L,oe-1).stateAfter,Ce=_e?La.fromSaved(L,_e,oe):new La(L,rl(L.mode),oe);return L.iter(oe,C,function(Ae){wp(m,Ae.text,Ce);var Be=Ce.line;Ae.stateAfter=Be==C-1||Be%5==0||Be>=B.viewFrom&&Be<B.viewTo?Ce.save():null,Ce.nextLine()}),F&&(L.modeFrontier=Ce.line),Ce}function wp(m,C,F,L){var B=m.doc.mode,oe=new Qs(C,m.options.tabSize,F);for(oe.start=oe.pos=L||0,""==C&&Xm(B,F.state);!oe.eol();)pc(B,oe,F.state),oe.start=oe.pos}function Xm(m,C){if(m.blankLine)return m.blankLine(C);if(m.innerMode){var F=ia(m,C);if(F.mode.blankLine)return F.mode.blankLine(F.state)}}function pc(m,C,F,L){for(var B=0;B<10;B++){L&&(L[0]=ia(m,F).mode);var oe=m.token(C,F);if(C.pos>C.start)return oe}throw new Error("Mode "+m.name+" failed to advance stream.")}La.prototype.lookAhead=function(m){var C=this.doc.getLine(this.line+m);return null!=C&&m>this.maxLookAhead&&(this.maxLookAhead=m),C},La.prototype.baseToken=function(m){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=m;)this.baseTokenPos+=2;var C=this.baseTokens[this.baseTokenPos+1];return{type:C&&C.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-m}},La.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},La.fromSaved=function(m,C,F){return C instanceof Bi?new La(m,Br(m.mode,C.state),F,C.lookAhead):new La(m,Br(m.mode,C),F)},La.prototype.save=function(m){var C=!1!==m?Br(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Bi(C,this.maxLookAhead):C};var xa=function(m,C,F){this.start=m.start,this.end=m.pos,this.string=m.current(),this.type=C||null,this.state=F};function gf(m,C,F,L){var _e,it,B=m.doc,oe=B.mode,Ce=Ni(B,(C=Xn(B,C)).line),Ae=Uo(m,C.line,F),Be=new Qs(Ce.text,m.options.tabSize,Ae);for(L&&(it=[]);(L||Be.pos<C.ch)&&!Be.eol();)Be.start=Be.pos,_e=pc(oe,Be,Ae.state),L&&it.push(new xa(Be,_e,Br(B.mode,Ae.state)));return L?it:new xa(Be,_e,Ae.state)}function Mp(m,C){if(m)for(;;){var F=m.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!F)break;m=m.slice(0,F.index)+m.slice(F.index+F[0].length);var L=F[1]?"bgClass":"textClass";null==C[L]?C[L]=F[2]:new RegExp("(?:^|\\s)"+F[2]+"(?:$|\\s)").test(C[L])||(C[L]+=" "+F[2])}return m}function Cp(m,C,F,L,B,oe,_e){var Ce=F.flattenSpans;null==Ce&&(Ce=m.options.flattenSpans);var dt,Ae=0,Be=null,it=new Qs(C,m.options.tabSize,L),Vt=m.options.addModeClass&&[null];for(""==C&&Mp(Xm(F,L.state),oe);!it.eol();){if(it.pos>m.options.maxHighlightLength?(Ce=!1,_e&&wp(m,C,L,it.pos),it.pos=C.length,dt=null):dt=Mp(pc(F,it,L.state,Vt),oe),Vt){var Pt=Vt[0].name;Pt&&(dt="m-"+(dt?Pt+" "+dt:Pt))}if(!Ce||Be!=dt){for(;Ae<it.start;)B(Ae=Math.min(it.start,Ae+5e3),Be);Be=dt}it.start=it.pos}for(;Ae<it.pos;){var bn=Math.min(it.pos,Ae+5e3);B(bn,Be),Ae=bn}}var Sp=!1,Vc=!1;function _f(m,C,F){this.marker=m,this.from=C,this.to=F}function Nh(m,C){if(m)for(var F=0;F<m.length;++F){var L=m[F];if(L.marker==C)return L}}function Tp(m,C){for(var F,L=0;L<m.length;++L)m[L]!=C&&(F||(F=[])).push(m[L]);return F}function xd(m,C){if(C.full)return null;var F=Eo(m,C.from.line)&&Ni(m,C.from.line).markedSpans,L=Eo(m,C.to.line)&&Ni(m,C.to.line).markedSpans;if(!F&&!L)return null;var B=C.from.ch,oe=C.to.ch,_e=0==Je(C.from,C.to),Ce=function xo(m,C,F){var L;if(m)for(var B=0;B<m.length;++B){var oe=m[B],_e=oe.marker;null!=oe.from&&!(_e.inclusiveLeft?oe.from<=C:oe.from<C)&&(oe.from!=C||"bookmark"!=_e.type||F&&oe.marker.insertLeft)||(L||(L=[])).push(new _f(_e,oe.from,null==oe.to||(_e.inclusiveRight?oe.to>=C:oe.to>C)?null:oe.to))}return L}(F,B,_e),Ae=function vf(m,C,F){var L;if(m)for(var B=0;B<m.length;++B){var oe=m[B],_e=oe.marker;(null==oe.to||(_e.inclusiveRight?oe.to>=C:oe.to>C)||oe.from==C&&"bookmark"==_e.type&&(!F||oe.marker.insertLeft))&&(L||(L=[])).push(new _f(_e,null==oe.from||(_e.inclusiveLeft?oe.from<=C:oe.from<C)?null:oe.from-C,null==oe.to?null:oe.to-C))}return L}(L,oe,_e),Be=1==C.text.length,it=tt(C.text).length+(Be?B:0);if(Ce)for(var dt=0;dt<Ce.length;++dt){var Vt=Ce[dt];if(null==Vt.to){var Pt=Nh(Ae,Vt.marker);Pt?Be&&(Vt.to=null==Pt.to?null:Pt.to+it):Vt.to=B}}if(Ae)for(var bn=0;bn<Ae.length;++bn){var Hn=Ae[bn];null!=Hn.to&&(Hn.to+=it),null==Hn.from?Nh(Ce,Hn.marker)||(Hn.from=it,Be&&(Ce||(Ce=[])).push(Hn)):(Hn.from+=it,Be&&(Ce||(Ce=[])).push(Hn))}Ce&&(Ce=ah(Ce)),Ae&&Ae!=Ce&&(Ae=ah(Ae));var li=[Ce];if(!Be){var fi,di=C.text.length-2;if(di>0&&Ce)for(var ji=0;ji<Ce.length;++ji)null==Ce[ji].to&&(fi||(fi=[])).push(new _f(Ce[ji].marker,null,null));for(var Ir=0;Ir<di;++Ir)li.push(fi);li.push(Ae)}return li}function ah(m){for(var C=0;C<m.length;++C){var F=m[C];null!=F.from&&F.from==F.to&&!1!==F.marker.clearWhenEmpty&&m.splice(C--,1)}return m.length?m:null}function wd(m){var C=m.markedSpans;if(C){for(var F=0;F<C.length;++F)C[F].marker.detachLine(m);m.markedSpans=null}}function Ms(m,C){if(C){for(var F=0;F<C.length;++F)C[F].marker.attachLine(m);m.markedSpans=C}}function au(m){return m.inclusiveLeft?-1:0}function lh(m){return m.inclusiveRight?1:0}function Md(m,C){var F=m.lines.length-C.lines.length;if(0!=F)return F;var L=m.find(),B=C.find(),oe=Je(L.from,B.from)||au(m)-au(C);return oe?-oe:Je(L.to,B.to)||lh(m)-lh(C)||C.id-m.id}function Dp(m,C){var L,F=Vc&&m.markedSpans;if(F)for(var B=void 0,oe=0;oe<F.length;++oe)(B=F[oe]).marker.collapsed&&null==(C?B.from:B.to)&&(!L||Md(L,B.marker)<0)&&(L=B.marker);return L}function sl(m){return Dp(m,!0)}function mc(m){return Dp(m,!1)}function Bh(m,C){var L,F=Vc&&m.markedSpans;if(F)for(var B=0;B<F.length;++B){var oe=F[B];oe.marker.collapsed&&(null==oe.from||oe.from<C)&&(null==oe.to||oe.to>C)&&(!L||Md(L,oe.marker)<0)&&(L=oe.marker)}return L}function Hh(m,C,F,L,B){var oe=Ni(m,C),_e=Vc&&oe.markedSpans;if(_e)for(var Ce=0;Ce<_e.length;++Ce){var Ae=_e[Ce];if(Ae.marker.collapsed){var Be=Ae.marker.find(0),it=Je(Be.from,F)||au(Ae.marker)-au(B),dt=Je(Be.to,L)||lh(Ae.marker)-lh(B);if(!(it>=0&&dt<=0||it<=0&&dt>=0)&&(it<=0&&(Ae.marker.inclusiveRight&&B.inclusiveLeft?Je(Be.to,F)>=0:Je(Be.to,F)>0)||it>=0&&(Ae.marker.inclusiveRight&&B.inclusiveLeft?Je(Be.from,L)<=0:Je(Be.from,L)<0)))return!0}}}function Ac(m){for(var C;C=sl(m);)m=C.find(-1,!0).line;return m}function ch(m,C){var F=Ni(m,C),L=Ac(F);return F==L?C:ts(L)}function lu(m,C){if(C>m.lastLine())return C;var L,F=Ni(m,C);if(!cu(m,F))return C;for(;L=mc(F);)F=L.find(1,!0).line;return ts(F)+1}function cu(m,C){var F=Vc&&C.markedSpans;if(F)for(var L=void 0,B=0;B<F.length;++B)if((L=F[B]).marker.collapsed){if(null==L.from)return!0;if(!L.marker.widgetNode&&0==L.from&&L.marker.inclusiveLeft&&ju(m,C,L))return!0}}function ju(m,C,F){if(null==F.to){var L=F.marker.find(1,!0);return ju(m,L.line,Nh(L.line.markedSpans,F.marker))}if(F.marker.inclusiveRight&&F.to==C.text.length)return!0;for(var B=void 0,oe=0;oe<C.markedSpans.length;++oe)if((B=C.markedSpans[oe]).marker.collapsed&&!B.marker.widgetNode&&B.from==F.to&&(null==B.to||B.to!=F.from)&&(B.marker.inclusiveLeft||F.marker.inclusiveRight)&&ju(m,C,B))return!0}function q(m){for(var C=0,F=(m=Ac(m)).parent,L=0;L<F.lines.length;++L){var B=F.lines[L];if(B==m)break;C+=B.height}for(var oe=F.parent;oe;oe=(F=oe).parent)for(var _e=0;_e<oe.children.length;++_e){var Ce=oe.children[_e];if(Ce==F)break;C+=Ce.height}return C}function se(m){if(0==m.height)return 0;for(var F,C=m.text.length,L=m;F=sl(L);){var B=F.find(0,!0);L=B.from.line,C+=B.from.ch-B.to.ch}for(L=m;F=mc(L);){var oe=F.find(0,!0);C-=L.text.length-oe.from.ch,C+=(L=oe.to.line).text.length-oe.to.ch}return C}function ge(m){var C=m.display,F=m.doc;C.maxLine=Ni(F,F.first),C.maxLineLength=se(C.maxLine),C.maxLineChanged=!0,F.iter(function(L){var B=se(L);B>C.maxLineLength&&(C.maxLineLength=B,C.maxLine=L)})}var xe=function(m,C,F){this.text=m,Ms(this,C),this.height=F?F(this):1};function ze(m){m.parent=null,wd(m)}xe.prototype.lineNo=function(){return ts(this)},Z(xe);var Ye={},Et={};function yt(m,C){if(!m||/^\s*$/.test(m))return null;var F=C.addModeClass?Et:Ye;return F[m]||(F[m]=m.replace(/\S+/g,"cm-$&"))}function Rt(m,C){var F=Bt("span",null,null,M?"padding-right: .1px":null),L={pre:Bt("pre",[F],"CodeMirror-line"),content:F,col:0,pos:0,cm:m,trailingSpace:!1,splitSpaces:m.getOption("lineWrapping")};C.measure={};for(var B=0;B<=(C.rest?C.rest.length:0);B++){var oe=B?C.rest[B-1]:C.line,_e=void 0;L.pos=0,L.addToken=si,en(m.display.measure)&&(_e=aa(oe,m.doc.direction))&&(L.addToken=un(L.addToken,_e)),L.map=[],ns(oe,L,ws(m,oe,C!=m.display.externalMeasured&&ts(oe))),oe.styleClasses&&(oe.styleClasses.bgClass&&(L.bgClass=Dt(oe.styleClasses.bgClass,L.bgClass||"")),oe.styleClasses.textClass&&(L.textClass=Dt(oe.styleClasses.textClass,L.textClass||""))),0==L.map.length&&L.map.push(0,0,L.content.appendChild(Ct(m.display.measure))),0==B?(C.measure.map=L.map,C.measure.cache={}):((C.measure.maps||(C.measure.maps=[])).push(L.map),(C.measure.caches||(C.measure.caches=[])).push({}))}if(M){var Ae=L.content.lastChild;(/\bcm-tab\b/.test(Ae.className)||Ae.querySelector&&Ae.querySelector(".cm-tab"))&&(L.content.className="cm-tab-wrap-hack")}return Ds(m,"renderLine",m,C.line,L.pre),L.pre.className&&(L.textClass=Dt(L.pre.className,L.textClass||"")),L}function xn(m){var C=qe("span","\u2022","cm-invalidchar");return C.title="\\u"+m.charCodeAt(0).toString(16),C.setAttribute("aria-label",C.title),C}function si(m,C,F,L,B,oe,_e){if(C){var it,Ce=m.splitSpaces?function on(m,C){if(m.length>1&&!/  /.test(m))return m;for(var F=C,L="",B=0;B<m.length;B++){var oe=m.charAt(B);" "==oe&&F&&(B==m.length-1||32==m.charCodeAt(B+1))&&(oe="\xa0"),L+=oe,F=" "==oe}return L}(C,m.trailingSpace):C,Ae=m.cm.state.specialChars,Be=!1;if(Ae.test(C)){it=document.createDocumentFragment();for(var dt=0;;){Ae.lastIndex=dt;var Vt=Ae.exec(C),Pt=Vt?Vt.index-dt:C.length-dt;if(Pt){var bn=document.createTextNode(Ce.slice(dt,dt+Pt));it.appendChild(p&&v<9?qe("span",[bn]):bn),m.map.push(m.pos,m.pos+Pt,bn),m.col+=Pt,m.pos+=Pt}if(!Vt)break;dt+=Pt+1;var Hn=void 0;if("\t"==Vt[0]){var hi=m.cm.options.tabSize,li=hi-m.col%hi;(Hn=it.appendChild(qe("span",lt(li),"cm-tab"))).setAttribute("role","presentation"),Hn.setAttribute("cm-text","\t"),m.col+=li}else"\r"==Vt[0]||"\n"==Vt[0]?((Hn=it.appendChild(qe("span","\r"==Vt[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",Vt[0]),m.col+=1):((Hn=m.cm.options.specialCharPlaceholder(Vt[0])).setAttribute("cm-text",Vt[0]),it.appendChild(p&&v<9?qe("span",[Hn]):Hn),m.col+=1);m.map.push(m.pos,m.pos+1,Hn),m.pos++}}else m.col+=C.length,it=document.createTextNode(Ce),m.map.push(m.pos,m.pos+C.length,it),p&&v<9&&(Be=!0),m.pos+=C.length;if(m.trailingSpace=32==Ce.charCodeAt(C.length-1),F||L||B||Be||oe||_e){var di=F||"";L&&(di+=L),B&&(di+=B);var fi=qe("span",[it],di,oe);if(_e)for(var ji in _e)_e.hasOwnProperty(ji)&&"style"!=ji&&"class"!=ji&&fi.setAttribute(ji,_e[ji]);return m.content.appendChild(fi)}m.content.appendChild(it)}}function un(m,C){return function(F,L,B,oe,_e,Ce,Ae){B=B?B+" cm-force-border":"cm-force-border";for(var Be=F.pos,it=Be+L.length;;){for(var dt=void 0,Vt=0;Vt<C.length&&!((dt=C[Vt]).to>Be&&dt.from<=Be);Vt++);if(dt.to>=it)return m(F,L,B,oe,_e,Ce,Ae);m(F,L.slice(0,dt.to-Be),B,oe,null,Ce,Ae),oe=null,L=L.slice(dt.to-Be),Be=dt.to}}}function mr(m,C,F,L){var B=!L&&F.widgetNode;B&&m.map.push(m.pos,m.pos+C,B),!L&&m.cm.display.input.needsContentAttribute&&(B||(B=m.content.appendChild(document.createElement("span"))),B.setAttribute("cm-marker",F.id)),B&&(m.cm.display.input.setUneditable(B),m.content.appendChild(B)),m.pos+=C,m.trailingSpace=!1}function ns(m,C,F){var L=m.markedSpans,B=m.text,oe=0;if(L)for(var dt,Vt,bn,Hn,hi,li,di,Ce=B.length,Ae=0,Be=1,it="",Pt=0;;){if(Pt==Ae){bn=Hn=hi=Vt="",di=null,li=null,Pt=1/0;for(var fi=[],ji=void 0,Ir=0;Ir<L.length;++Ir){var Cr=L[Ir],Rs=Cr.marker;if("bookmark"==Rs.type&&Cr.from==Ae&&Rs.widgetNode)fi.push(Rs);else if(Cr.from<=Ae&&(null==Cr.to||Cr.to>Ae||Rs.collapsed&&Cr.to==Ae&&Cr.from==Ae)){if(null!=Cr.to&&Cr.to!=Ae&&Pt>Cr.to&&(Pt=Cr.to,Hn=""),Rs.className&&(bn+=" "+Rs.className),Rs.css&&(Vt=(Vt?Vt+";":"")+Rs.css),Rs.startStyle&&Cr.from==Ae&&(hi+=" "+Rs.startStyle),Rs.endStyle&&Cr.to==Pt&&(ji||(ji=[])).push(Rs.endStyle,Cr.to),Rs.title&&((di||(di={})).title=Rs.title),Rs.attributes)for(var Yo in Rs.attributes)(di||(di={}))[Yo]=Rs.attributes[Yo];Rs.collapsed&&(!li||Md(li.marker,Rs)<0)&&(li=Cr)}else Cr.from>Ae&&Pt>Cr.from&&(Pt=Cr.from)}if(ji)for(var cl=0;cl<ji.length;cl+=2)ji[cl+1]==Pt&&(Hn+=" "+ji[cl]);if(!li||li.from==Ae)for(var ma=0;ma<fi.length;++ma)mr(C,0,fi[ma]);if(li&&(li.from||0)==Ae){if(mr(C,(null==li.to?Ce+1:li.to)-Ae,li.marker,null==li.from),null==li.to)return;li.to==Ae&&(li=!1)}}if(Ae>=Ce)break;for(var Rc=Math.min(Ce,Pt);;){if(it){var xc=Ae+it.length;if(!li){var el=xc>Rc?it.slice(0,Rc-Ae):it;C.addToken(C,el,dt?dt+bn:bn,hi,Ae+el.length==Pt?Hn:"",Vt,di)}if(xc>=Rc){it=it.slice(Rc-Ae),Ae=Rc;break}Ae=xc,hi=""}it=B.slice(oe,oe=F[Be++]),dt=yt(F[Be++],C.cm.options)}}else for(var _e=1;_e<F.length;_e+=2)C.addToken(C,B.slice(oe,oe=F[_e]),yt(F[_e+1],C.cm.options))}function gr(m,C,F){this.line=C,this.rest=function zh(m){for(var C,F;C=mc(m);)m=C.find(1,!0).line,(F||(F=[])).push(m);return F}(C),this.size=this.rest?ts(tt(this.rest))-F+1:1,this.node=this.text=null,this.hidden=cu(m,C)}function ko(m,C,F){for(var B,L=[],oe=C;oe<F;oe=B){var _e=new gr(m.doc,Ni(m.doc,oe),oe);B=oe+_e.size,L.push(_e)}return L}var Ls=null;var ol=null;function Or(m,C){var F=qu(m,C);if(F.length){var B,L=Array.prototype.slice.call(arguments,2);Ls?B=Ls.delayedCallbacks:ol?B=ol:(B=ol=[],setTimeout(ra,0));for(var oe=function(Ce){B.push(function(){return F[Ce].apply(null,L)})},_e=0;_e<F.length;++_e)oe(_e)}}function ra(){var m=ol;ol=null;for(var C=0;C<m.length;++C)m[C]()}function uh(m,C,F,L){for(var B=0;B<C.changes.length;B++){var oe=C.changes[B];"text"==oe?mi(m,C):"gutter"==oe?Ui(m,C,F,L):"class"==oe?so(m,C):"widget"==oe&&Bn(m,C,L)}C.changes=null}function ys(m){return m.node==m.text&&(m.node=qe("div",null,null,"position: relative"),m.text.parentNode&&m.text.parentNode.replaceChild(m.node,m.text),m.node.appendChild(m.text),p&&v<8&&(m.node.style.zIndex=2)),m.node}function pl(m,C){var F=m.display.externalMeasured;return F&&F.line==C.line?(m.display.externalMeasured=null,C.measure=F.measure,F.built):Rt(m,C)}function mi(m,C){var F=C.text.className,L=pl(m,C);C.text==C.node&&(C.node=L.pre),C.text.parentNode.replaceChild(L.pre,C.text),C.text=L.pre,L.bgClass!=C.bgClass||L.textClass!=C.textClass?(C.bgClass=L.bgClass,C.textClass=L.textClass,so(m,C)):F&&(C.text.className=F)}function so(m,C){(function Fl(m,C){var F=C.bgClass?C.bgClass+" "+(C.line.bgClass||""):C.line.bgClass;if(F&&(F+=" CodeMirror-linebackground"),C.background)F?C.background.className=F:(C.background.parentNode.removeChild(C.background),C.background=null);else if(F){var L=ys(C);C.background=L.insertBefore(qe("div",null,F),L.firstChild),m.display.input.setUneditable(C.background)}})(m,C),C.line.wrapClass?ys(C).className=C.line.wrapClass:C.node!=C.text&&(C.node.className=""),C.text.className=(C.textClass?C.textClass+" "+(C.line.textClass||""):C.line.textClass)||""}function Ui(m,C,F,L){if(C.gutter&&(C.node.removeChild(C.gutter),C.gutter=null),C.gutterBackground&&(C.node.removeChild(C.gutterBackground),C.gutterBackground=null),C.line.gutterClass){var B=ys(C);C.gutterBackground=qe("div",null,"CodeMirror-gutter-background "+C.line.gutterClass,"left: "+(m.options.fixedGutter?L.fixedPos:-L.gutterTotalWidth)+"px; width: "+L.gutterTotalWidth+"px"),m.display.input.setUneditable(C.gutterBackground),B.insertBefore(C.gutterBackground,C.text)}var oe=C.line.gutterMarkers;if(m.options.lineNumbers||oe){var _e=ys(C),Ce=C.gutter=qe("div",null,"CodeMirror-gutter-wrapper","left: "+(m.options.fixedGutter?L.fixedPos:-L.gutterTotalWidth)+"px");if(Ce.setAttribute("aria-hidden","true"),m.display.input.setUneditable(Ce),_e.insertBefore(Ce,C.text),C.line.gutterClass&&(Ce.className+=" "+C.line.gutterClass),m.options.lineNumbers&&(!oe||!oe["CodeMirror-linenumbers"])&&(C.lineNumber=Ce.appendChild(qe("div",ka(m.options,F),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+L.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+m.display.lineNumInnerWidth+"px"))),oe)for(var Ae=0;Ae<m.display.gutterSpecs.length;++Ae){var Be=m.display.gutterSpecs[Ae].className,it=oe.hasOwnProperty(Be)&&oe[Be];it&&Ce.appendChild(qe("div",[it],"CodeMirror-gutter-elt","left: "+L.gutterLeft[Be]+"px; width: "+L.gutterWidth[Be]+"px"))}}}function Bn(m,C,F){C.alignable&&(C.alignable=null);for(var L=st("CodeMirror-linewidget"),B=C.node.firstChild,oe=void 0;B;B=oe)oe=B.nextSibling,L.test(B.className)&&C.node.removeChild(B);Za(m,C,F)}function oo(m,C,F,L){var B=pl(m,C);return C.text=C.node=B.pre,B.bgClass&&(C.bgClass=B.bgClass),B.textClass&&(C.textClass=B.textClass),so(m,C),Ui(m,C,F,L),Za(m,C,L),C.node}function Za(m,C,F){if(ml(m,C.line,C,F,!0),C.rest)for(var L=0;L<C.rest.length;L++)ml(m,C.rest[L],C,F,!1)}function ml(m,C,F,L,B){if(C.widgets)for(var oe=ys(F),_e=0,Ce=C.widgets;_e<Ce.length;++_e){var Ae=Ce[_e],Be=qe("div",[Ae.node],"CodeMirror-linewidget"+(Ae.className?" "+Ae.className:""));Ae.handleMouseEvents||Be.setAttribute("cm-ignore-events","true"),Cd(Ae,Be,F,L),m.display.input.setUneditable(Be),B&&Ae.above?oe.insertBefore(Be,F.gutter||F.text):oe.appendChild(Be),Or(Ae,"redraw")}}function Cd(m,C,F,L){if(m.noHScroll){(F.alignable||(F.alignable=[])).push(C);var B=L.wrapperWidth;C.style.left=L.fixedPos+"px",m.coverGutter||(B-=L.gutterTotalWidth,C.style.paddingLeft=L.gutterTotalWidth+"px"),C.style.width=B+"px"}m.coverGutter&&(C.style.zIndex=5,C.style.position="relative",m.noHScroll||(C.style.marginLeft=-L.gutterTotalWidth+"px"))}function Ar(m){if(null!=m.height)return m.height;var C=m.doc.cm;if(!C)return 0;if(!Zn(document.body,m.node)){var F="position: relative;";m.coverGutter&&(F+="margin-left: -"+C.display.gutters.offsetWidth+"px;"),m.noHScroll&&(F+="width: "+C.display.wrapper.clientWidth+"px;"),Te(C.display.measure,qe("div",[m.node],null,F))}return m.height=m.node.parentNode.offsetHeight}function Fa(m,C){for(var F=Qe(C);F!=m.wrapper;F=F.parentNode)if(!F||1==F.nodeType&&"true"==F.getAttribute("cm-ignore-events")||F.parentNode==m.sizer&&F!=m.mover)return!0}function As(m){return m.lineSpace.offsetTop}function Do(m){return m.mover.offsetHeight-m.lineSpace.offsetHeight}function Ap(m){if(m.cachedPaddingH)return m.cachedPaddingH;var C=Te(m.measure,qe("pre","x","CodeMirror-line-like")),F=window.getComputedStyle?window.getComputedStyle(C):C.currentStyle,L={left:parseInt(F.paddingLeft),right:parseInt(F.paddingRight)};return!isNaN(L.left)&&!isNaN(L.right)&&(m.cachedPaddingH=L),L}function Cs(m){return 50-m.display.nativeBarWidth}function je(m){return m.display.scroller.clientWidth-Cs(m)-m.display.barWidth}function ms(m){return m.display.scroller.clientHeight-Cs(m)-m.display.barHeight}function Po(m,C,F){if(m.line==C)return{map:m.measure.map,cache:m.measure.cache};if(m.rest){for(var L=0;L<m.rest.length;L++)if(m.rest[L]==C)return{map:m.measure.maps[L],cache:m.measure.caches[L]};for(var B=0;B<m.rest.length;B++)if(ts(m.rest[B])>F)return{map:m.measure.maps[B],cache:m.measure.caches[B],before:!0}}}function Go(m,C,F,L){return Ya(m,uo(m,C),F,L)}function Uc(m,C){if(C>=m.display.viewFrom&&C<m.display.viewTo)return m.display.view[Pn(m,C)];var F=m.display.externalMeasured;return F&&C>=F.lineN&&C<F.lineN+F.size?F:void 0}function uo(m,C){var F=ts(C),L=Uc(m,F);L&&!L.text?L=null:L&&L.changes&&(uh(m,L,F,Sd(m)),m.curOp.forceUpdate=!0),L||(L=function Ol(m,C){var F=ts(C=Ac(C)),L=m.display.externalMeasured=new gr(m.doc,C,F);L.lineN=F;var B=L.built=Rt(m,L);return L.text=B.pre,Te(m.display.lineMeasure,B.pre),L}(m,C));var B=Po(L,C,F);return{line:C,view:L,rect:null,map:B.map,cache:B.cache,before:B.before,hasHeights:!1}}function Ya(m,C,F,L,B){C.before&&(F=-1);var _e,oe=F+(L||"");return C.cache.hasOwnProperty(oe)?_e=C.cache[oe]:(C.rect||(C.rect=C.view.text.getBoundingClientRect()),C.hasHeights||(function $o(m,C,F){var L=m.options.lineWrapping,B=L&&je(m);if(!C.measure.heights||L&&C.measure.width!=B){var oe=C.measure.heights=[];if(L){C.measure.width=B;for(var _e=C.text.firstChild.getClientRects(),Ce=0;Ce<_e.length-1;Ce++){var Ae=_e[Ce],Be=_e[Ce+1];Math.abs(Ae.bottom-Be.bottom)>2&&oe.push((Ae.bottom+Be.top)/2-F.top)}}oe.push(F.bottom-F.top)}}(m,C.view,C.rect),C.hasHeights=!0),(_e=function Oa(m,C,F,L){var Be,B=qr(C.map,F,L),oe=B.node,_e=B.start,Ce=B.end,Ae=B.collapse;if(3==oe.nodeType){for(var it=0;it<4;it++){for(;_e&&wr(C.line.text.charAt(B.coverStart+_e));)--_e;for(;B.coverStart+Ce<B.coverEnd&&wr(C.line.text.charAt(B.coverStart+Ce));)++Ce;if((Be=p&&v<9&&0==_e&&Ce==B.coverEnd-B.coverStart?oe.parentNode.getBoundingClientRect():gc(Ze(oe,_e,Ce).getClientRects(),L)).left||Be.right||0==_e)break;Ce=_e,_e-=1,Ae="right"}p&&v<11&&(Be=function Nl(m,C){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function Wn(m){if(null!=sn)return sn;var C=Te(m,qe("span","x")),F=C.getBoundingClientRect(),L=Ze(C,0,1).getBoundingClientRect();return sn=Math.abs(F.left-L.left)>1}(m))return C;var F=screen.logicalXDPI/screen.deviceXDPI,L=screen.logicalYDPI/screen.deviceYDPI;return{left:C.left*F,right:C.right*F,top:C.top*L,bottom:C.bottom*L}}(m.display.measure,Be))}else{var dt;_e>0&&(Ae=L="right"),Be=m.options.lineWrapping&&(dt=oe.getClientRects()).length>1?dt["right"==L?dt.length-1:0]:oe.getBoundingClientRect()}if(p&&v<9&&!_e&&(!Be||!Be.left&&!Be.right)){var Vt=oe.parentNode.getClientRects()[0];Be=Vt?{left:Vt.left,right:Vt.left+Ja(m.display),top:Vt.top,bottom:Vt.bottom}:Sl}for(var Pt=Be.top-C.rect.top,bn=Be.bottom-C.rect.top,Hn=(Pt+bn)/2,hi=C.view.measure.heights,li=0;li<hi.length-1&&!(Hn<hi[li]);li++);var ji={left:("right"==Ae?Be.right:Be.left)-C.rect.left,right:("left"==Ae?Be.left:Be.right)-C.rect.left,top:li?hi[li-1]:0,bottom:hi[li]};return!Be.left&&!Be.right&&(ji.bogus=!0),m.options.singleCursorHeightPerLine||(ji.rtop=Pt,ji.rbottom=bn),ji}(m,C,F,L)).bogus||(C.cache[oe]=_e)),{left:_e.left,right:_e.right,top:B?_e.rtop:_e.top,bottom:B?_e.rbottom:_e.bottom}}var _c,Sl={left:0,right:0,top:0,bottom:0};function qr(m,C,F){for(var L,B,oe,_e,Ce,Ae,Be=0;Be<m.length;Be+=3)if(Ae=m[Be+1],C<(Ce=m[Be])?(B=0,oe=1,_e="left"):C<Ae?oe=1+(B=C-Ce):(Be==m.length-3||C==Ae&&m[Be+3]>C)&&(B=(oe=Ae-Ce)-1,C>=Ae&&(_e="right")),null!=B){if(L=m[Be+2],Ce==Ae&&F==(L.insertLeft?"left":"right")&&(_e=F),"left"==F&&0==B)for(;Be&&m[Be-2]==m[Be-3]&&m[Be-1].insertLeft;)L=m[2+(Be-=3)],_e="left";if("right"==F&&B==Ae-Ce)for(;Be<m.length-3&&m[Be+3]==m[Be+4]&&!m[Be+5].insertLeft;)L=m[(Be+=3)+2],_e="right";break}return{node:L,start:B,end:oe,collapse:_e,coverStart:Ce,coverEnd:Ae}}function gc(m,C){var F=Sl;if("left"==C)for(var L=0;L<m.length&&(F=m[L]).left==F.right;L++);else for(var B=m.length-1;B>=0&&(F=m[B]).left==F.right;B--);return F}function Gc(m){if(m.measure&&(m.measure.cache={},m.measure.heights=null,m.rest))for(var C=0;C<m.rest.length;C++)m.measure.caches[C]={}}function Xa(m){m.display.externalMeasure=null,at(m.display.lineMeasure);for(var C=0;C<m.display.view.length;C++)Gc(m.display.view[C])}function El(m){Xa(m),m.display.cachedCharWidth=m.display.cachedTextHeight=m.display.cachedPaddingH=null,m.options.lineWrapping||(m.display.maxLineChanged=!0),m.display.lineNumChars=null}function Su(m){return I&&ce?-(m.body.getBoundingClientRect().left-parseInt(getComputedStyle(m.body).marginLeft)):m.defaultView.pageXOffset||(m.documentElement||m.body).scrollLeft}function Ns(m){return I&&ce?-(m.body.getBoundingClientRect().top-parseInt(getComputedStyle(m.body).marginTop)):m.defaultView.pageYOffset||(m.documentElement||m.body).scrollTop}function Bs(m){var F=Ac(m).widgets,L=0;if(F)for(var B=0;B<F.length;++B)F[B].above&&(L+=Ar(F[B]));return L}function da(m,C,F,L,B){if(!B){var oe=Bs(C);F.top+=oe,F.bottom+=oe}if("line"==L)return F;L||(L="local");var _e=q(C);if("local"==L?_e+=As(m.display):_e-=m.display.viewOffset,"page"==L||"window"==L){var Ce=m.display.lineSpace.getBoundingClientRect();_e+=Ce.top+("window"==L?0:Ns(Yn(m)));var Ae=Ce.left+("window"==L?0:Su(Yn(m)));F.left+=Ae,F.right+=Ae}return F.top+=_e,F.bottom+=_e,F}function $l(m,C,F){if("div"==F)return C;var L=C.left,B=C.top;if("page"==F)L-=Su(Yn(m)),B-=Ns(Yn(m));else if("local"==F||!F){var oe=m.display.sizer.getBoundingClientRect();L+=oe.left,B+=oe.top}var _e=m.display.lineSpace.getBoundingClientRect();return{left:L-_e.left,top:B-_e.top}}function al(m,C,F,L,B){return L||(L=Ni(m.doc,C.line)),da(m,L,Go(m,L,C.ch,B),F)}function wo(m,C,F,L,B,oe){function _e(bn,Hn){var hi=Ya(m,B,bn,Hn?"right":"left",oe);return Hn?hi.left=hi.right:hi.right=hi.left,da(m,L,hi,F)}L=L||Ni(m.doc,C.line),B||(B=uo(m,L));var Ce=aa(L,m.doc.direction),Ae=C.ch,Be=C.sticky;if(Ae>=L.text.length?(Ae=L.text.length,Be="before"):Ae<=0&&(Ae=0,Be="after"),!Ce)return _e("before"==Be?Ae-1:Ae,"before"==Be);function it(bn,Hn,hi){return _e(hi?bn-1:bn,1==Ce[Hn].level!=hi)}var dt=Ps(Ce,Ae,Be),Vt=es,Pt=it(Ae,dt,"before"==Be);return null!=Vt&&(Pt.other=it(Ae,Vt,"before"!=Be)),Pt}function Vh(m,C){var F=0;C=Xn(m.doc,C),m.options.lineWrapping||(F=Ja(m.display)*C.ch);var L=Ni(m.doc,C.line),B=q(L)+As(m.display);return{left:F,right:F,top:B,bottom:B+L.height}}function Eu(m,C,F,L,B){var oe=ke(m,C,F);return oe.xRel=B,L&&(oe.outside=L),oe}function Tu(m,C,F){var L=m.doc;if((F+=m.display.viewOffset)<0)return Eu(L.first,0,null,-1,-1);var B=Ws(L,F),oe=L.first+L.size-1;if(B>oe)return Eu(L.first+L.size-1,Ni(L,oe).text.length,null,1,1);C<0&&(C=0);for(var _e=Ni(L,B);;){var Ce=ec(m,_e,B,C,F),Ae=Bh(_e,Ce.ch+(Ce.xRel>0||Ce.outside>0?1:0));if(!Ae)return Ce;var Be=Ae.find(1);if(Be.line==B)return Be;_e=Ni(L,B=Be.line)}}function ea(m,C,F,L){L-=Bs(C);var B=C.text.length,oe=ha(function(_e){return Ya(m,F,_e-1).bottom<=L},B,0);return{begin:oe,end:B=ha(function(_e){return Ya(m,F,_e).top>L},oe,B)}}function hr(m,C,F,L){return F||(F=uo(m,C)),ea(m,C,F,da(m,C,Ya(m,F,L),"line").top)}function Zu(m,C,F,L){return!(m.bottom<=F)&&(m.top>F||(L?m.left:m.right)>C)}function ec(m,C,F,L,B){B-=q(C);var oe=uo(m,C),_e=Bs(C),Ce=0,Ae=C.text.length,Be=!0,it=aa(C,m.doc.direction);if(it){var dt=(m.options.lineWrapping?Jm:yf)(m,C,F,oe,it,L,B);Ce=(Be=1!=dt.level)?dt.from:dt.to-1,Ae=Be?dt.to:dt.from-1}var Hn,hi,Vt=null,Pt=null,bn=ha(function(Ir){var Cr=Ya(m,oe,Ir);return Cr.top+=_e,Cr.bottom+=_e,!!Zu(Cr,L,B,!1)&&(Cr.top<=B&&Cr.left<=L&&(Vt=Ir,Pt=Cr),!0)},Ce,Ae),li=!1;if(Pt){var di=L-Pt.left<Pt.right-L,fi=di==Be;bn=Vt+(fi?0:1),hi=fi?"after":"before",Hn=di?Pt.left:Pt.right}else{!Be&&(bn==Ae||bn==Ce)&&bn++,hi=0==bn?"after":bn==C.text.length?"before":Ya(m,oe,bn-(Be?1:0)).bottom+_e<=B==Be?"after":"before";var ji=wo(m,ke(F,bn,hi),"line",C,oe);Hn=ji.left,li=B<ji.top?-1:B>=ji.bottom?1:0}return Eu(F,bn=ro(C.text,bn,1),hi,li,L-Hn)}function yf(m,C,F,L,B,oe,_e){var Ce=ha(function(dt){var Vt=B[dt],Pt=1!=Vt.level;return Zu(wo(m,ke(F,Pt?Vt.to:Vt.from,Pt?"before":"after"),"line",C,L),oe,_e,!0)},0,B.length-1),Ae=B[Ce];if(Ce>0){var Be=1!=Ae.level,it=wo(m,ke(F,Be?Ae.from:Ae.to,Be?"after":"before"),"line",C,L);Zu(it,oe,_e,!0)&&it.top>_e&&(Ae=B[Ce-1])}return Ae}function Jm(m,C,F,L,B,oe,_e){var Ce=ea(m,C,L,_e),Ae=Ce.begin,Be=Ce.end;/\s/.test(C.text.charAt(Be-1))&&Be--;for(var it=null,dt=null,Vt=0;Vt<B.length;Vt++){var Pt=B[Vt];if(!(Pt.from>=Be||Pt.to<=Ae)){var Hn=Ya(m,L,1!=Pt.level?Math.min(Be,Pt.to)-1:Math.max(Ae,Pt.from)).right,hi=Hn<oe?oe-Hn+1e9:Hn-oe;(!it||dt>hi)&&(it=Pt,dt=hi)}}return it||(it=B[B.length-1]),it.from<Ae&&(it={from:Ae,to:it.to,level:it.level}),it.to>Be&&(it={from:it.from,to:Be,level:it.level}),it}function Wc(m){if(null!=m.cachedTextHeight)return m.cachedTextHeight;if(null==_c){_c=qe("pre",null,"CodeMirror-line-like");for(var C=0;C<49;++C)_c.appendChild(document.createTextNode("x")),_c.appendChild(qe("br"));_c.appendChild(document.createTextNode("x"))}Te(m.measure,_c);var F=_c.offsetHeight/50;return F>3&&(m.cachedTextHeight=F),at(m.measure),F||1}function Ja(m){if(null!=m.cachedCharWidth)return m.cachedCharWidth;var C=qe("span","xxxxxxxxxx"),F=qe("pre",[C],"CodeMirror-line-like");Te(m.measure,F);var L=C.getBoundingClientRect(),B=(L.right-L.left)/10;return B>2&&(m.cachedCharWidth=B),B||10}function Sd(m){for(var C=m.display,F={},L={},B=C.gutters.clientLeft,oe=C.gutters.firstChild,_e=0;oe;oe=oe.nextSibling,++_e){var Ce=m.display.gutterSpecs[_e].className;F[Ce]=oe.offsetLeft+oe.clientLeft+B,L[Ce]=oe.clientWidth}return{fixedPos:Ip(C),gutterTotalWidth:C.gutters.offsetWidth,gutterLeft:F,gutterWidth:L,wrapperWidth:C.wrapper.clientWidth}}function Ip(m){return m.scroller.getBoundingClientRect().left-m.sizer.getBoundingClientRect().left}function Ke(m){var C=Wc(m.display),F=m.options.lineWrapping,L=F&&Math.max(5,m.display.scroller.clientWidth/Ja(m.display)-3);return function(B){if(cu(m.doc,B))return 0;var oe=0;if(B.widgets)for(var _e=0;_e<B.widgets.length;_e++)B.widgets[_e].height&&(oe+=B.widgets[_e].height);return F?oe+(Math.ceil(B.text.length/L)||1)*C:oe+C}}function bt(m){var C=m.doc,F=Ke(m);C.iter(function(L){var B=F(L);B!=L.height&&la(L,B)})}function kt(m,C,F,L){var B=m.display;if(!F&&"true"==Qe(C).getAttribute("cm-not-content"))return null;var oe,_e,Ce=B.lineSpace.getBoundingClientRect();try{oe=C.clientX-Ce.left,_e=C.clientY-Ce.top}catch(dt){return null}var Be,Ae=Tu(m,oe,_e);if(L&&Ae.xRel>0&&(Be=Ni(m.doc,Ae.line).text).length==Ae.ch){var it=Li(Be,Be.length,m.options.tabSize)-Be.length;Ae=ke(Ae.line,Math.max(0,Math.round((oe-Ap(m.display).left)/Ja(m.display))-it))}return Ae}function Pn(m,C){if(C>=m.display.viewTo||(C-=m.display.viewFrom)<0)return null;for(var F=m.display.view,L=0;L<F.length;L++)if((C-=F[L].size)<0)return L}function Ft(m,C,F,L){null==C&&(C=m.doc.first),null==F&&(F=m.doc.first+m.doc.size),L||(L=0);var B=m.display;if(L&&F<B.viewTo&&(null==B.updateLineNumbers||B.updateLineNumbers>C)&&(B.updateLineNumbers=C),m.curOp.viewChanged=!0,C>=B.viewTo)Vc&&ch(m.doc,C)<B.viewTo&&qn(m);else if(F<=B.viewFrom)Vc&&lu(m.doc,F+L)>B.viewFrom?qn(m):(B.viewFrom+=L,B.viewTo+=L);else if(C<=B.viewFrom&&F>=B.viewTo)qn(m);else if(C<=B.viewFrom){var oe=yi(m,F,F+L,1);oe?(B.view=B.view.slice(oe.index),B.viewFrom=oe.lineN,B.viewTo+=L):qn(m)}else if(F>=B.viewTo){var _e=yi(m,C,C,-1);_e?(B.view=B.view.slice(0,_e.index),B.viewTo=_e.lineN):qn(m)}else{var Ce=yi(m,C,C,-1),Ae=yi(m,F,F+L,1);Ce&&Ae?(B.view=B.view.slice(0,Ce.index).concat(ko(m,Ce.lineN,Ae.lineN)).concat(B.view.slice(Ae.index)),B.viewTo+=L):qn(m)}var Be=B.externalMeasured;Be&&(F<Be.lineN?Be.lineN+=L:C<Be.lineN+Be.size&&(B.externalMeasured=null))}function In(m,C,F){m.curOp.viewChanged=!0;var L=m.display,B=m.display.externalMeasured;if(B&&C>=B.lineN&&C<B.lineN+B.size&&(L.externalMeasured=null),!(C<L.viewFrom||C>=L.viewTo)){var oe=L.view[Pn(m,C)];if(null!=oe.node){var _e=oe.changes||(oe.changes=[]);-1==Sn(_e,F)&&_e.push(F)}}}function qn(m){m.display.viewFrom=m.display.viewTo=m.doc.first,m.display.view=[],m.display.viewOffset=0}function yi(m,C,F,L){var oe,B=Pn(m,C),_e=m.display.view;if(!Vc||F==m.doc.first+m.doc.size)return{index:B,lineN:F};for(var Ce=m.display.viewFrom,Ae=0;Ae<B;Ae++)Ce+=_e[Ae].size;if(Ce!=C){if(L>0){if(B==_e.length-1)return null;oe=Ce+_e[B].size-C,B++}else oe=Ce-C;C+=oe,F+=oe}for(;ch(m.doc,F)!=F;){if(B==(L<0?0:_e.length-1))return null;F+=L*_e[B-(L<0?1:0)].size,B+=L}return{index:B,lineN:F}}function Rr(m){for(var C=m.display.view,F=0,L=0;L<C.length;L++){var B=C[L];!B.hidden&&(!B.node||B.changes)&&++F}return F}function Er(m){m.display.input.showSelection(m.display.input.prepareSelection())}function Hr(m,C){void 0===C&&(C=!0);var F=m.doc,L={},B=L.cursors=document.createDocumentFragment(),oe=L.selection=document.createDocumentFragment(),_e=m.options.$customCursor;_e&&(C=!0);for(var Ce=0;Ce<F.sel.ranges.length;Ce++)if(C||Ce!=F.sel.primIndex){var Ae=F.sel.ranges[Ce];if(!(Ae.from().line>=m.display.viewTo||Ae.to().line<m.display.viewFrom)){var Be=Ae.empty();if(_e){var it=_e(m,Ae);it&&Is(m,it,B)}else(Be||m.options.showCursorWhenSelecting)&&Is(m,Ae.head,B);Be||Nr(m,Ae,oe)}}return L}function Is(m,C,F){var L=wo(m,C,"div",null,null,!m.options.singleCursorHeightPerLine),B=F.appendChild(qe("div","\xa0","CodeMirror-cursor"));if(B.style.left=L.left+"px",B.style.top=L.top+"px",B.style.height=Math.max(0,L.bottom-L.top)*m.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(m.getWrapperElement().className)){var oe=al(m,C,"div",null,null),_e=oe.right-oe.left;B.style.width=(_e>0?_e:m.defaultCharWidth())+"px"}if(L.other){var Ce=F.appendChild(qe("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));Ce.style.display="",Ce.style.left=L.other.left+"px",Ce.style.top=L.other.top+"px",Ce.style.height=.85*(L.other.bottom-L.other.top)+"px"}}function Xs(m,C){return m.top-C.top||m.left-C.left}function Nr(m,C,F){var L=m.display,B=m.doc,oe=document.createDocumentFragment(),_e=Ap(m.display),Ce=_e.left,Ae=Math.max(L.sizerWidth,je(m)-L.sizer.offsetLeft)-_e.right,Be="ltr"==B.direction;function it(fi,ji,Ir,Cr){ji<0&&(ji=0),ji=Math.round(ji),Cr=Math.round(Cr),oe.appendChild(qe("div",null,"CodeMirror-selected","position: absolute; left: "+fi+"px;\n                             top: "+ji+"px; width: "+(null==Ir?Ae-fi:Ir)+"px;\n                             height: "+(Cr-ji)+"px"))}function dt(fi,ji,Ir){var Yo,cl,Cr=Ni(B,fi),Rs=Cr.text.length;function ma(el,kc){return al(m,ke(fi,el),"div",Cr,kc)}function Rc(el,kc,Tl){var ga=hr(m,Cr,null,el),za="ltr"==kc==("after"==Tl)?"left":"right";return ma("after"==Tl?ga.begin:ga.end-(/\s/.test(Cr.text.charAt(ga.end-1))?2:1),za)[za]}var xc=aa(Cr,B.direction);return function Qo(m,C,F,L){if(!m)return L(C,F,"ltr",0);for(var B=!1,oe=0;oe<m.length;++oe){var _e=m[oe];(_e.from<F&&_e.to>C||C==F&&_e.to==C)&&(L(Math.max(_e.from,C),Math.min(_e.to,F),1==_e.level?"rtl":"ltr",oe),B=!0)}B||L(C,F,"ltr")}(xc,ji||0,null==Ir?Rs:Ir,function(el,kc,Tl,ga){var za="ltr"==Tl,go=ma(el,za?"left":"right"),vl=ma(kc-1,za?"right":"left"),Kd=null==ji&&0==el,_h=null==Ir&&kc==Rs,Dl=0==ga,vh=!xc||ga==xc.length-1;if(vl.top-go.top<=3){var Pu=(Be?Kd:_h)&&Dl?Ce:(za?go:vl).left;it(Pu,go.top,((Be?_h:Kd)&&vh?Ae:(za?vl:go).right)-Pu,go.bottom)}else{var bh,wc,tm,_g;za?(bh=Be&&Kd&&Dl?Ce:go.left,wc=Be?Ae:Rc(el,Tl,"before"),tm=Be?Ce:Rc(kc,Tl,"after"),_g=Be&&_h&&vh?Ae:vl.right):(bh=Be?Rc(el,Tl,"before"):Ce,wc=!Be&&Kd&&Dl?Ae:go.right,tm=!Be&&_h&&vh?Ce:vl.left,_g=Be?Rc(kc,Tl,"after"):Ae),it(bh,go.top,wc-bh,go.bottom),go.bottom<vl.top&&it(Ce,go.bottom,null,vl.top),it(tm,vl.top,_g-tm,vl.bottom)}(!Yo||Xs(go,Yo)<0)&&(Yo=go),Xs(vl,Yo)<0&&(Yo=vl),(!cl||Xs(go,cl)<0)&&(cl=go),Xs(vl,cl)<0&&(cl=vl)}),{start:Yo,end:cl}}var Vt=C.from(),Pt=C.to();if(Vt.line==Pt.line)dt(Vt.line,Vt.ch,Pt.ch);else{var bn=Ni(B,Vt.line),Hn=Ni(B,Pt.line),hi=Ac(bn)==Ac(Hn),li=dt(Vt.line,Vt.ch,hi?bn.text.length+1:null).end,di=dt(Pt.line,hi?0:null,Pt.ch).start;hi&&(li.top<di.top-2?(it(li.right,li.top,null,li.bottom),it(Ce,di.top,di.left,di.bottom)):it(li.right,li.top,di.left-li.right,li.bottom)),li.bottom<di.top&&it(Ce,li.bottom,null,di.top)}F.appendChild(oe)}function xi(m){if(m.state.focused){var C=m.display;clearInterval(C.blinker);var F=!0;C.cursorDiv.style.visibility="",m.options.cursorBlinkRate>0?C.blinker=setInterval(function(){m.hasFocus()||wa(m),C.cursorDiv.style.visibility=(F=!F)?"":"hidden"},m.options.cursorBlinkRate):m.options.cursorBlinkRate<0&&(C.cursorDiv.style.visibility="hidden")}}function Na(m){m.hasFocus()||(m.display.input.focus(),m.state.focused||Wo(m))}function Bl(m){m.state.delayingBlurEvent=!0,setTimeout(function(){m.state.delayingBlurEvent&&(m.state.delayingBlurEvent=!1,m.state.focused&&wa(m))},100)}function Wo(m,C){m.state.delayingBlurEvent&&!m.state.draggingText&&(m.state.delayingBlurEvent=!1),"nocursor"!=m.options.readOnly&&(m.state.focused||(Ds(m,"focus",m,C),m.state.focused=!0,_n(m.display.wrapper,"CodeMirror-focused"),!m.curOp&&m.display.selForContextMenu!=m.doc.sel&&(m.display.input.reset(),M&&setTimeout(function(){return m.display.input.reset(!0)},20)),m.display.input.receivedFocus()),xi(m))}function wa(m,C){m.state.delayingBlurEvent||(m.state.focused&&(Ds(m,"blur",m,C),m.state.focused=!1,We(m.display.wrapper,"CodeMirror-focused")),clearInterval(m.display.blinker),setTimeout(function(){m.state.focused||(m.display.shift=!1)},150))}function Ka(m){for(var C=m.display,F=C.lineDiv.offsetTop,L=Math.max(0,C.scroller.getBoundingClientRect().top),B=C.lineDiv.getBoundingClientRect().top,oe=0,_e=0;_e<C.view.length;_e++){var Ce=C.view[_e],Ae=m.options.lineWrapping,Be=void 0,it=0;if(!Ce.hidden){if(B+=Ce.line.height,p&&v<8){var dt=Ce.node.offsetTop+Ce.node.offsetHeight;Be=dt-F,F=dt}else{var Vt=Ce.node.getBoundingClientRect();Be=Vt.bottom-Vt.top,!Ae&&Ce.text.firstChild&&(it=Ce.text.firstChild.getBoundingClientRect().right-Vt.left-1)}var Pt=Ce.line.height-Be;if((Pt>.005||Pt<-.005)&&(B<L&&(oe-=Pt),la(Ce.line,Be),fa(Ce.line),Ce.rest))for(var bn=0;bn<Ce.rest.length;bn++)fa(Ce.rest[bn]);if(it>m.display.sizerWidth){var Hn=Math.ceil(it/Ja(m.display));Hn>m.display.maxLineLength&&(m.display.maxLineLength=Hn,m.display.maxLine=Ce.line,m.display.maxLineChanged=!0)}}}Math.abs(oe)>2&&(C.scroller.scrollTop+=oe)}function fa(m){if(m.widgets)for(var C=0;C<m.widgets.length;++C){var F=m.widgets[C],L=F.node.parentNode;L&&(F.height=L.offsetHeight)}}function Uh(m,C,F){var L=F&&null!=F.top?Math.max(0,F.top):m.scroller.scrollTop;L=Math.floor(L-As(m));var B=F&&null!=F.bottom?F.bottom:L+m.wrapper.clientHeight,oe=Ws(C,L),_e=Ws(C,B);if(F&&F.ensure){var Ce=F.ensure.from.line,Ae=F.ensure.to.line;Ce<oe?(oe=Ce,_e=Ws(C,q(Ni(C,Ce))+m.wrapper.clientHeight)):Math.min(Ae,C.lastLine())>=_e&&(oe=Ws(C,q(Ni(C,Ae))-m.wrapper.clientHeight),_e=Ae)}return{from:oe,to:Math.max(_e,oe+1)}}function Km(m,C){var F=m.display,L=Wc(m.display);C.top<0&&(C.top=0);var B=m.curOp&&null!=m.curOp.scrollTop?m.curOp.scrollTop:F.scroller.scrollTop,oe=ms(m),_e={};C.bottom-C.top>oe&&(C.bottom=C.top+oe);var Ce=m.doc.height+Do(F),Be=C.bottom>Ce-L;if(C.top<B)_e.scrollTop=C.top<L?0:C.top;else if(C.bottom>B+oe){var it=Math.min(C.top,(Be?Ce:C.bottom)-oe);it!=B&&(_e.scrollTop=it)}var dt=m.options.fixedGutter?0:F.gutters.offsetWidth,Vt=m.curOp&&null!=m.curOp.scrollLeft?m.curOp.scrollLeft:F.scroller.scrollLeft-dt,Pt=je(m)-F.gutters.offsetWidth,bn=C.right-C.left>Pt;return bn&&(C.right=C.left+Pt),C.left<10?_e.scrollLeft=0:C.left<Vt?_e.scrollLeft=Math.max(0,C.left+dt-(bn?0:10)):C.right>Pt+Vt-3&&(_e.scrollLeft=C.right+(bn?0:10)-Pt),_e}function Ed(m,C){null!=C&&(Qm(m),m.curOp.scrollTop=(null==m.curOp.scrollTop?m.doc.scrollTop:m.curOp.scrollTop)+C)}function Wh(m){Qm(m);var C=m.getCursor();m.curOp.scrollToPos={from:C,to:C,margin:m.options.cursorScrollMargin}}function Td(m,C,F){(null!=C||null!=F)&&Qm(m),null!=C&&(m.curOp.scrollLeft=C),null!=F&&(m.curOp.scrollTop=F)}function Qm(m){var C=m.curOp.scrollToPos;C&&(m.curOp.scrollToPos=null,qo(m,Vh(m,C.from),Vh(m,C.to),C.margin))}function qo(m,C,F,L){var B=Km(m,{left:Math.min(C.left,F.left),top:Math.min(C.top,F.top)-L,right:Math.max(C.right,F.right),bottom:Math.max(C.bottom,F.bottom)+L});Td(m,B.scrollLeft,B.scrollTop)}function Rp(m,C){Math.abs(m.doc.scrollTop-C)<2||(y||yr(m,{top:C}),ho(m,C,!0),y&&yr(m),dh(m,100))}function ho(m,C,F){C=Math.max(0,Math.min(m.display.scroller.scrollHeight-m.display.scroller.clientHeight,C)),(m.display.scroller.scrollTop!=C||F)&&(m.doc.scrollTop=C,m.display.scrollbars.setScrollTop(C),m.display.scroller.scrollTop!=C&&(m.display.scroller.scrollTop=C))}function Du(m,C,F,L){C=Math.max(0,Math.min(C,m.display.scroller.scrollWidth-m.display.scroller.clientWidth)),(!(F?C==m.doc.scrollLeft:Math.abs(m.doc.scrollLeft-C)<2)||L)&&(m.doc.scrollLeft=C,Au(m),m.display.scroller.scrollLeft!=C&&(m.display.scroller.scrollLeft=C),m.display.scrollbars.setScrollLeft(C))}function Dd(m){var C=m.display,F=C.gutters.offsetWidth,L=Math.round(m.doc.height+Do(m.display));return{clientHeight:C.scroller.clientHeight,viewHeight:C.wrapper.clientHeight,scrollWidth:C.scroller.scrollWidth,clientWidth:C.scroller.clientWidth,viewWidth:C.wrapper.clientWidth,barLeft:m.options.fixedGutter?F:0,docHeight:L,scrollHeight:L+Cs(m)+C.barHeight,nativeBarWidth:C.nativeBarWidth,gutterWidth:F}}var jo=function(m,C,F){this.cm=F;var L=this.vert=qe("div",[qe("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),B=this.horiz=qe("div",[qe("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");L.tabIndex=B.tabIndex=-1,m(L),m(B),nr(L,"scroll",function(){L.clientHeight&&C(L.scrollTop,"vertical")}),nr(B,"scroll",function(){B.clientWidth&&C(B.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,p&&v<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};jo.prototype.update=function(m){var C=m.scrollWidth>m.clientWidth+1,F=m.scrollHeight>m.clientHeight+1,L=m.nativeBarWidth;return F?(this.vert.style.display="block",this.vert.style.bottom=C?L+"px":"0",this.vert.firstChild.style.height=Math.max(0,m.scrollHeight-m.clientHeight+(m.viewHeight-(C?L:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),C?(this.horiz.style.display="block",this.horiz.style.right=F?L+"px":"0",this.horiz.style.left=m.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,m.scrollWidth-m.clientWidth+(m.viewWidth-m.barLeft-(F?L:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&m.clientHeight>0&&(0==L&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:F?L:0,bottom:C?L:0}},jo.prototype.setScrollLeft=function(m){this.horiz.scrollLeft!=m&&(this.horiz.scrollLeft=m),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},jo.prototype.setScrollTop=function(m){this.vert.scrollTop!=m&&(this.vert.scrollTop=m),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},jo.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=ae&&!J?"12px":"18px",this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Mn,this.disableVert=new Mn},jo.prototype.enableZeroWidthBar=function(m,C,F){m.style.visibility="",C.set(1e3,function L(){var B=m.getBoundingClientRect();("vert"==F?document.elementFromPoint(B.right-1,(B.top+B.bottom)/2):document.elementFromPoint((B.right+B.left)/2,B.bottom-1))!=m?m.style.visibility="hidden":C.set(1e3,L)})},jo.prototype.clear=function(){var m=this.horiz.parentNode;m.removeChild(this.horiz),m.removeChild(this.vert)};var Ad=function(){};function Ji(m,C){C||(C=Dd(m));var F=m.display.barWidth,L=m.display.barHeight;qc(m,C);for(var B=0;B<4&&F!=m.display.barWidth||L!=m.display.barHeight;B++)F!=m.display.barWidth&&m.options.lineWrapping&&Ka(m),qc(m,Dd(m)),F=m.display.barWidth,L=m.display.barHeight}function qc(m,C){var F=m.display,L=F.scrollbars.update(C);F.sizer.style.paddingRight=(F.barWidth=L.right)+"px",F.sizer.style.paddingBottom=(F.barHeight=L.bottom)+"px",F.heightForcer.style.borderBottom=L.bottom+"px solid transparent",L.right&&L.bottom?(F.scrollbarFiller.style.display="block",F.scrollbarFiller.style.height=L.bottom+"px",F.scrollbarFiller.style.width=L.right+"px"):F.scrollbarFiller.style.display="",L.bottom&&m.options.coverGutterNextToScrollbar&&m.options.fixedGutter?(F.gutterFiller.style.display="block",F.gutterFiller.style.height=L.bottom+"px",F.gutterFiller.style.width=C.gutterWidth+"px"):F.gutterFiller.style.display=""}Ad.prototype.update=function(){return{bottom:0,right:0}},Ad.prototype.setScrollLeft=function(){},Ad.prototype.setScrollTop=function(){},Ad.prototype.clear=function(){};var Js={native:jo,null:Ad};function kp(m){m.display.scrollbars&&(m.display.scrollbars.clear(),m.display.scrollbars.addClass&&We(m.display.wrapper,m.display.scrollbars.addClass)),m.display.scrollbars=new Js[m.options.scrollbarStyle](function(C){m.display.wrapper.insertBefore(C,m.display.scrollbarFiller),nr(C,"mousedown",function(){m.state.focused&&setTimeout(function(){return m.display.input.focus()},0)}),C.setAttribute("cm-not-content","true")},function(C,F){"horizontal"==F?Du(m,C):Rp(m,C)},m),m.display.scrollbars.addClass&&_n(m.display.wrapper,m.display.scrollbars.addClass)}var zr=0;function tc(m){m.curOp={cm:m,viewChanged:!1,startHeight:m.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++zr,markArrays:null},function fl(m){Ls?Ls.ops.push(m):m.ownsGroup=Ls={ops:[m],delayedCallbacks:[]}}(m.curOp)}function Ca(m){var C=m.curOp;C&&function rr(m,C){var F=m.ownsGroup;if(F)try{!function To(m){var C=m.delayedCallbacks,F=0;do{for(;F<C.length;F++)C[F].call(null);for(var L=0;L<m.ops.length;L++){var B=m.ops[L];if(B.cursorActivityHandlers)for(;B.cursorActivityCalled<B.cursorActivityHandlers.length;)B.cursorActivityHandlers[B.cursorActivityCalled++].call(null,B.cm)}}while(F<C.length)}(F)}finally{Ls=null,C(F)}}(C,function(F){for(var L=0;L<F.ops.length;L++)F.ops[L].cm.curOp=null;!function bf(m){for(var C=m.ops,F=0;F<C.length;F++)Id(C[F]);for(var L=0;L<C.length;L++)Rd(C[L]);for(var B=0;B<C.length;B++)uu(C[B]);for(var oe=0;oe<C.length;oe++)qh(C[oe]);for(var _e=0;_e<C.length;_e++)kd(C[_e])}(F)})}function Id(m){var C=m.cm,F=C.display;(function L_(m){var C=m.display;!C.scrollbarsClipped&&C.scroller.offsetWidth&&(C.nativeBarWidth=C.scroller.offsetWidth-C.scroller.clientWidth,C.heightForcer.style.height=Cs(m)+"px",C.sizer.style.marginBottom=-C.nativeBarWidth+"px",C.sizer.style.borderRightWidth=Cs(m)+"px",C.scrollbarsClipped=!0)})(C),m.updateMaxLine&&ge(C),m.mustUpdate=m.viewChanged||m.forceUpdate||null!=m.scrollTop||m.scrollToPos&&(m.scrollToPos.from.line<F.viewFrom||m.scrollToPos.to.line>=F.viewTo)||F.maxLineChanged&&C.options.lineWrapping,m.update=m.mustUpdate&&new jc(C,m.mustUpdate&&{top:m.scrollTop,ensure:m.scrollToPos},m.forceUpdate)}function Rd(m){m.updatedDisplay=m.mustUpdate&&nc(m.cm,m.update)}function uu(m){var C=m.cm,F=C.display;m.updatedDisplay&&Ka(C),m.barMeasure=Dd(C),F.maxLineChanged&&!C.options.lineWrapping&&(m.adjustWidthTo=Go(C,F.maxLine,F.maxLine.text.length).left+3,C.display.sizerWidth=m.adjustWidthTo,m.barMeasure.scrollWidth=Math.max(F.scroller.clientWidth,F.sizer.offsetLeft+m.adjustWidthTo+Cs(C)+C.display.barWidth),m.maxScrollLeft=Math.max(0,F.sizer.offsetLeft+m.adjustWidthTo-je(C))),(m.updatedDisplay||m.selectionChanged)&&(m.preparedSelection=F.input.prepareSelection())}function qh(m){var C=m.cm;null!=m.adjustWidthTo&&(C.display.sizer.style.minWidth=m.adjustWidthTo+"px",m.maxScrollLeft<C.doc.scrollLeft&&Du(C,Math.min(C.display.scroller.scrollLeft,m.maxScrollLeft),!0),C.display.maxLineChanged=!1);var F=m.focus&&m.focus==jt(Yn(C));m.preparedSelection&&C.display.input.showSelection(m.preparedSelection,F),(m.updatedDisplay||m.startHeight!=C.doc.height)&&Ji(C,m.barMeasure),m.updatedDisplay&&Pd(C,m.barMeasure),m.selectionChanged&&xi(C),C.state.focused&&m.updateInput&&C.display.input.reset(m.typing),F&&Na(m.cm)}function kd(m){var C=m.cm,F=C.display,L=C.doc;m.updatedDisplay&&$s(C,m.update),null!=F.wheelStartX&&(null!=m.scrollTop||null!=m.scrollLeft||m.scrollToPos)&&(F.wheelStartX=F.wheelStartY=null),null!=m.scrollTop&&ho(C,m.scrollTop,m.forceScroll),null!=m.scrollLeft&&Du(C,m.scrollLeft,!0,!0),m.scrollToPos&&function hh(m,C){if(!b(m,"scrollCursorIntoView")){var F=m.display,L=F.sizer.getBoundingClientRect(),B=null,oe=F.wrapper.ownerDocument;if(C.top+L.top<0?B=!0:C.bottom+L.top>(oe.defaultView.innerHeight||oe.documentElement.clientHeight)&&(B=!1),null!=B&&!W){var _e=qe("div","\u200b",null,"position: absolute;\n                         top: "+(C.top-F.viewOffset-As(m.display))+"px;\n                         height: "+(C.bottom-C.top+Cs(m)+F.barHeight)+"px;\n                         left: "+C.left+"px; width: "+Math.max(2,C.right-C.left)+"px;");m.display.lineSpace.appendChild(_e),_e.scrollIntoView(B),m.display.lineSpace.removeChild(_e)}}}(C,function Hl(m,C,F,L){var B;null==L&&(L=0),!m.options.lineWrapping&&C==F&&(F="before"==C.sticky?ke(C.line,C.ch+1,"before"):C,C=C.ch?ke(C.line,"before"==C.sticky?C.ch-1:C.ch,"after"):C);for(var oe=0;oe<5;oe++){var _e=!1,Ce=wo(m,C),Ae=F&&F!=C?wo(m,F):Ce,Be=Km(m,B={left:Math.min(Ce.left,Ae.left),top:Math.min(Ce.top,Ae.top)-L,right:Math.max(Ce.left,Ae.left),bottom:Math.max(Ce.bottom,Ae.bottom)+L}),it=m.doc.scrollTop,dt=m.doc.scrollLeft;if(null!=Be.scrollTop&&(Rp(m,Be.scrollTop),Math.abs(m.doc.scrollTop-it)>1&&(_e=!0)),null!=Be.scrollLeft&&(Du(m,Be.scrollLeft),Math.abs(m.doc.scrollLeft-dt)>1&&(_e=!0)),!_e)break}return B}(C,Xn(L,m.scrollToPos.from),Xn(L,m.scrollToPos.to),m.scrollToPos.margin));var oe=m.maybeHiddenMarkers,_e=m.maybeUnhiddenMarkers;if(oe)for(var Ce=0;Ce<oe.length;++Ce)oe[Ce].lines.length||Ds(oe[Ce],"hide");if(_e)for(var Ae=0;Ae<_e.length;++Ae)_e[Ae].lines.length&&Ds(_e[Ae],"unhide");F.wrapper.offsetHeight&&(L.scrollTop=C.display.scroller.scrollTop),m.changeObjs&&Ds(C,"changes",C,m.changeObjs),m.update&&m.update.finish()}function Fn(m,C){if(m.curOp)return C();tc(m);try{return C()}finally{Ca(m)}}function Ba(m,C){return function(){if(m.curOp)return C.apply(m,arguments);tc(m);try{return C.apply(m,arguments)}finally{Ca(m)}}}function zl(m){return function(){if(this.curOp)return m.apply(this,arguments);tc(this);try{return m.apply(this,arguments)}finally{Ca(this)}}}function gl(m){return function(){var C=this.cm;if(!C||C.curOp)return m.apply(this,arguments);tc(C);try{return m.apply(this,arguments)}finally{Ca(C)}}}function dh(m,C){m.doc.highlightFrontier<m.display.viewTo&&m.state.highlight.set(C,Xt(_y,m))}function _y(m){var C=m.doc;if(!(C.highlightFrontier>=m.display.viewTo)){var F=+new Date+m.options.workTime,L=Uo(m,C.highlightFrontier),B=[];C.iter(L.line,Math.min(C.first+C.size,m.display.viewTo+500),function(oe){if(L.line>=m.display.viewFrom){var _e=oe.styles,Ce=oe.text.length>m.options.maxHighlightLength?Br(C.mode,L.state):null,Ae=or(m,oe,L,!0);Ce&&(L.state=Ce),oe.styles=Ae.styles;var Be=oe.styleClasses,it=Ae.classes;it?oe.styleClasses=it:Be&&(oe.styleClasses=null);for(var dt=!_e||_e.length!=oe.styles.length||Be!=it&&(!Be||!it||Be.bgClass!=it.bgClass||Be.textClass!=it.textClass),Vt=0;!dt&&Vt<_e.length;++Vt)dt=_e[Vt]!=oe.styles[Vt];dt&&B.push(L.line),oe.stateAfter=L.save(),L.nextLine()}else oe.text.length<=m.options.maxHighlightLength&&wp(m,oe.text,L),oe.stateAfter=L.line%5==0?L.save():null,L.nextLine();if(+new Date>F)return dh(m,m.options.workDelay),!0}),C.highlightFrontier=L.line,C.modeFrontier=Math.max(C.modeFrontier,L.line),B.length&&Fn(m,function(){for(var oe=0;oe<B.length;oe++)In(m,B[oe],"text")})}}var jc=function(m,C,F){var L=m.display;this.viewport=C,this.visible=Uh(L,m.doc,C),this.editorIsHidden=!L.wrapper.offsetWidth,this.wrapperHeight=L.wrapper.clientHeight,this.wrapperWidth=L.wrapper.clientWidth,this.oldDisplayWidth=je(m),this.force=F,this.dims=Sd(m),this.events=[]};function nc(m,C){var F=m.display,L=m.doc;if(C.editorIsHidden)return qn(m),!1;if(!C.force&&C.visible.from>=F.viewFrom&&C.visible.to<=F.viewTo&&(null==F.updateLineNumbers||F.updateLineNumbers>=F.viewTo)&&F.renderedView==F.view&&0==Rr(m))return!1;jh(m)&&(qn(m),C.dims=Sd(m));var B=L.first+L.size,oe=Math.max(C.visible.from-m.options.viewportMargin,L.first),_e=Math.min(B,C.visible.to+m.options.viewportMargin);F.viewFrom<oe&&oe-F.viewFrom<20&&(oe=Math.max(L.first,F.viewFrom)),F.viewTo>_e&&F.viewTo-_e<20&&(_e=Math.min(B,F.viewTo)),Vc&&(oe=ch(m.doc,oe),_e=lu(m.doc,_e));var Ce=oe!=F.viewFrom||_e!=F.viewTo||F.lastWrapHeight!=C.wrapperHeight||F.lastWrapWidth!=C.wrapperWidth;(function Fi(m,C,F){var L=m.display;0==L.view.length||C>=L.viewTo||F<=L.viewFrom?(L.view=ko(m,C,F),L.viewFrom=C):(L.viewFrom>C?L.view=ko(m,C,L.viewFrom).concat(L.view):L.viewFrom<C&&(L.view=L.view.slice(Pn(m,C))),L.viewFrom=C,L.viewTo<F?L.view=L.view.concat(ko(m,L.viewTo,F)):L.viewTo>F&&(L.view=L.view.slice(0,Pn(m,F)))),L.viewTo=F})(m,oe,_e),F.viewOffset=q(Ni(m.doc,F.viewFrom)),m.display.mover.style.top=F.viewOffset+"px";var Ae=Rr(m);if(!Ce&&0==Ae&&!C.force&&F.renderedView==F.view&&(null==F.updateLineNumbers||F.updateLineNumbers>=F.viewTo))return!1;var Be=function Jn(m){if(m.hasFocus())return null;var C=jt(Yn(m));if(!C||!Zn(m.display.lineDiv,C))return null;var F={activeElt:C};if(window.getSelection){var L=ei(m).getSelection();L.anchorNode&&L.extend&&Zn(m.display.lineDiv,L.anchorNode)&&(F.anchorNode=L.anchorNode,F.anchorOffset=L.anchorOffset,F.focusNode=L.focusNode,F.focusOffset=L.focusOffset)}return F}(m);return Ae>4&&(F.lineDiv.style.display="none"),function xf(m,C,F){var L=m.display,B=m.options.lineNumbers,oe=L.lineDiv,_e=oe.firstChild;function Ce(bn){var Hn=bn.nextSibling;return M&&ae&&m.display.currentWheelTarget==bn?bn.style.display="none":bn.parentNode.removeChild(bn),Hn}for(var Ae=L.view,Be=L.viewFrom,it=0;it<Ae.length;it++){var dt=Ae[it];if(!dt.hidden)if(dt.node&&dt.node.parentNode==oe){for(;_e!=dt.node;)_e=Ce(_e);var Pt=B&&null!=C&&C<=Be&&dt.lineNumber;dt.changes&&(Sn(dt.changes,"gutter")>-1&&(Pt=!1),uh(m,dt,Be,F)),Pt&&(at(dt.lineNumber),dt.lineNumber.appendChild(document.createTextNode(ka(m.options,Be)))),_e=dt.node.nextSibling}else{var Vt=oo(m,dt,Be,F);oe.insertBefore(Vt,_e)}Be+=dt.size}for(;_e;)_e=Ce(_e)}(m,F.updateLineNumbers,C.dims),Ae>4&&(F.lineDiv.style.display=""),F.renderedView=F.view,function ls(m){if(m&&m.activeElt&&m.activeElt!=jt(m.activeElt.ownerDocument)&&(m.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(m.activeElt.nodeName)&&m.anchorNode&&Zn(document.body,m.anchorNode)&&Zn(document.body,m.focusNode))){var C=m.activeElt.ownerDocument,F=C.defaultView.getSelection(),L=C.createRange();L.setEnd(m.anchorNode,m.anchorOffset),L.collapse(!1),F.removeAllRanges(),F.addRange(L),F.extend(m.focusNode,m.focusOffset)}}(Be),at(F.cursorDiv),at(F.selectionDiv),F.gutters.style.height=F.sizer.style.minHeight=0,Ce&&(F.lastWrapHeight=C.wrapperHeight,F.lastWrapWidth=C.wrapperWidth,dh(m,400)),F.updateLineNumbers=null,!0}function $s(m,C){for(var F=C.viewport,L=!0;;L=!1){if(L&&m.options.lineWrapping&&C.oldDisplayWidth!=je(m))L&&(C.visible=Uh(m.display,m.doc,F));else if(F&&null!=F.top&&(F={top:Math.min(m.doc.height+Do(m.display)-ms(m),F.top)}),C.visible=Uh(m.display,m.doc,F),C.visible.from>=m.display.viewFrom&&C.visible.to<=m.display.viewTo)break;if(!nc(m,C))break;Ka(m);var B=Dd(m);Er(m),Ji(m,B),Pd(m,B),C.force=!1}C.signal(m,"update",m),(m.display.viewFrom!=m.display.reportedViewFrom||m.display.viewTo!=m.display.reportedViewTo)&&(C.signal(m,"viewportChange",m,m.display.viewFrom,m.display.viewTo),m.display.reportedViewFrom=m.display.viewFrom,m.display.reportedViewTo=m.display.viewTo)}function yr(m,C){var F=new jc(m,C);if(nc(m,F)){Ka(m),$s(m,F);var L=Dd(m);Er(m),Ji(m,L),Pd(m,L),F.finish()}}function Vl(m){m.sizer.style.marginLeft=m.gutters.offsetWidth+"px",Or(m,"gutterChanged",m)}function Pd(m,C){m.display.sizer.style.minHeight=C.docHeight+"px",m.display.heightForcer.style.top=C.docHeight+"px",m.display.gutters.style.height=C.docHeight+m.display.barHeight+Cs(m)+"px"}function Au(m){var C=m.display,F=C.view;if(C.alignWidgets||C.gutters.firstChild&&m.options.fixedGutter){for(var L=Ip(C)-C.scroller.scrollLeft+m.doc.scrollLeft,B=C.gutters.offsetWidth,oe=L+"px",_e=0;_e<F.length;_e++)if(!F[_e].hidden){m.options.fixedGutter&&(F[_e].gutter&&(F[_e].gutter.style.left=oe),F[_e].gutterBackground&&(F[_e].gutterBackground.style.left=oe));var Ce=F[_e].alignable;if(Ce)for(var Ae=0;Ae<Ce.length;Ae++)Ce[Ae].style.left=oe}m.options.fixedGutter&&(C.gutters.style.left=L+B+"px")}}function jh(m){if(!m.options.lineNumbers)return!1;var C=m.doc,F=ka(m.options,C.first+C.size-1),L=m.display;if(F.length!=L.lineNumChars){var B=L.measure.appendChild(qe("div",[qe("div",F)],"CodeMirror-linenumber CodeMirror-gutter-elt")),oe=B.firstChild.offsetWidth,_e=B.offsetWidth-oe;return L.lineGutter.style.width="",L.lineNumInnerWidth=Math.max(oe,L.lineGutter.offsetWidth-_e)+1,L.lineNumWidth=L.lineNumInnerWidth+_e,L.lineNumChars=L.lineNumInnerWidth?F.length:-1,L.lineGutter.style.width=L.lineNumWidth+"px",Vl(m.display),!0}return!1}function Yu(m,C){for(var F=[],L=!1,B=0;B<m.length;B++){var oe=m[B],_e=null;if("string"!=typeof oe&&(_e=oe.style,oe=oe.className),"CodeMirror-linenumbers"==oe){if(!C)continue;L=!0}F.push({className:oe,style:_e})}return C&&!L&&F.push({className:"CodeMirror-linenumbers",style:null}),F}function Ld(m){var C=m.gutters,F=m.gutterSpecs;at(C),m.lineGutter=null;for(var L=0;L<F.length;++L){var B=F[L],oe=B.className,_e=B.style,Ce=C.appendChild(qe("div",null,"CodeMirror-gutter "+oe));_e&&(Ce.style.cssText=_e),"CodeMirror-linenumbers"==oe&&(m.lineGutter=Ce,Ce.style.width=(m.lineNumWidth||1)+"px")}C.style.display=F.length?"":"none",Vl(m)}function Xu(m){Ld(m.display),Ft(m),Au(m)}function Ul(m,C,F,L){var B=this;this.input=F,B.scrollbarFiller=qe("div",null,"CodeMirror-scrollbar-filler"),B.scrollbarFiller.setAttribute("cm-not-content","true"),B.gutterFiller=qe("div",null,"CodeMirror-gutter-filler"),B.gutterFiller.setAttribute("cm-not-content","true"),B.lineDiv=Bt("div",null,"CodeMirror-code"),B.selectionDiv=qe("div",null,null,"position: relative; z-index: 1"),B.cursorDiv=qe("div",null,"CodeMirror-cursors"),B.measure=qe("div",null,"CodeMirror-measure"),B.lineMeasure=qe("div",null,"CodeMirror-measure"),B.lineSpace=Bt("div",[B.measure,B.lineMeasure,B.selectionDiv,B.cursorDiv,B.lineDiv],null,"position: relative; outline: none");var oe=Bt("div",[B.lineSpace],"CodeMirror-lines");B.mover=qe("div",[oe],null,"position: relative"),B.sizer=qe("div",[B.mover],"CodeMirror-sizer"),B.sizerWidth=null,B.heightForcer=qe("div",null,null,"position: absolute; height: 50px; width: 1px;"),B.gutters=qe("div",null,"CodeMirror-gutters"),B.lineGutter=null,B.scroller=qe("div",[B.sizer,B.heightForcer,B.gutters],"CodeMirror-scroll"),B.scroller.setAttribute("tabIndex","-1"),B.wrapper=qe("div",[B.scrollbarFiller,B.gutterFiller,B.scroller],"CodeMirror"),I&&P>=105&&(B.wrapper.style.clipPath="inset(0px)"),B.wrapper.setAttribute("translate","no"),p&&v<8&&(B.gutters.style.zIndex=-1,B.scroller.style.paddingRight=0),!M&&!(y&&ie)&&(B.scroller.draggable=!0),m&&(m.appendChild?m.appendChild(B.wrapper):m(B.wrapper)),B.viewFrom=B.viewTo=C.first,B.reportedViewFrom=B.reportedViewTo=C.first,B.view=[],B.renderedView=null,B.externalMeasured=null,B.viewOffset=0,B.lastWrapHeight=B.lastWrapWidth=0,B.updateLineNumbers=null,B.nativeBarWidth=B.barHeight=B.barWidth=0,B.scrollbarsClipped=!1,B.lineNumWidth=B.lineNumInnerWidth=B.lineNumChars=null,B.alignWidgets=!1,B.cachedCharWidth=B.cachedTextHeight=B.cachedPaddingH=null,B.maxLine=null,B.maxLineLength=0,B.maxLineChanged=!1,B.wheelDX=B.wheelDY=B.wheelStartX=B.wheelStartY=null,B.shift=!1,B.selForContextMenu=null,B.activeTouch=null,B.gutterSpecs=Yu(L.gutters,L.lineNumbers),Ld(B),F.init(B)}jc.prototype.signal=function(m,C){H(m,C)&&this.events.push(arguments)},jc.prototype.finish=function(){for(var m=0;m<this.events.length;m++)Ds.apply(null,this.events[m])};var vc=0,Zc=null;function Ju(m){var C=m.wheelDeltaX,F=m.wheelDeltaY;return null==C&&m.detail&&m.axis==m.HORIZONTAL_AXIS&&(C=m.detail),null==F&&m.detail&&m.axis==m.VERTICAL_AXIS?F=m.detail:null==F&&(F=m.wheelDelta),{x:C,y:F}}function hu(m){var C=Ju(m);return C.x*=Zc,C.y*=Zc,C}function Pp(m,C){I&&102==P&&(null==m.display.chromeScrollHack?m.display.sizer.style.pointerEvents="none":clearTimeout(m.display.chromeScrollHack),m.display.chromeScrollHack=setTimeout(function(){m.display.chromeScrollHack=null,m.display.sizer.style.pointerEvents=""},100));var F=Ju(C),L=F.x,B=F.y,oe=Zc;0===C.deltaMode&&(L=C.deltaX,B=C.deltaY,oe=1);var _e=m.display,Ce=_e.scroller,Be=Ce.scrollHeight>Ce.clientHeight;if(L&&Ce.scrollWidth>Ce.clientWidth||B&&Be){if(B&&ae&&M)e:for(var it=C.target,dt=_e.view;it!=Ce;it=it.parentNode)for(var Vt=0;Vt<dt.length;Vt++)if(dt[Vt].node==it){m.display.currentWheelTarget=it;break e}if(L&&!y&&!N&&null!=oe)return B&&Be&&Rp(m,Math.max(0,Ce.scrollTop+B*oe)),Du(m,Math.max(0,Ce.scrollLeft+L*oe)),(!B||B&&Be)&&ne(C),void(_e.wheelStartX=null);if(B&&null!=oe){var Pt=B*oe,bn=m.doc.scrollTop,Hn=bn+_e.wrapper.clientHeight;Pt<0?bn=Math.max(0,bn+Pt-50):Hn=Math.min(m.doc.height,Hn+Pt+50),yr(m,{top:bn,bottom:Hn})}vc<20&&0!==C.deltaMode&&(null==_e.wheelStartX?(_e.wheelStartX=Ce.scrollLeft,_e.wheelStartY=Ce.scrollTop,_e.wheelDX=L,_e.wheelDY=B,setTimeout(function(){if(null!=_e.wheelStartX){var hi=Ce.scrollLeft-_e.wheelStartX,li=Ce.scrollTop-_e.wheelStartY,di=li&&_e.wheelDY&&li/_e.wheelDY||hi&&_e.wheelDX&&hi/_e.wheelDX;_e.wheelStartX=_e.wheelStartY=null,di&&(Zc=(Zc*vc+di)/(vc+1),++vc)}},200)):(_e.wheelDX+=L,_e.wheelDY+=B))}}p?Zc=-.53:y?Zc=15:I?Zc=-.7:V&&(Zc=-1/3);var Gl=function(m,C){this.ranges=m,this.primIndex=C};Gl.prototype.primary=function(){return this.ranges[this.primIndex]},Gl.prototype.equals=function(m){if(m==this)return!0;if(m.primIndex!=this.primIndex||m.ranges.length!=this.ranges.length)return!1;for(var C=0;C<this.ranges.length;C++){var F=this.ranges[C],L=m.ranges[C];if(!mn(F.anchor,L.anchor)||!mn(F.head,L.head))return!1}return!0},Gl.prototype.deepCopy=function(){for(var m=[],C=0;C<this.ranges.length;C++)m[C]=new ao(En(this.ranges[C].anchor),En(this.ranges[C].head));return new Gl(m,this.primIndex)},Gl.prototype.somethingSelected=function(){for(var m=0;m<this.ranges.length;m++)if(!this.ranges[m].empty())return!0;return!1},Gl.prototype.contains=function(m,C){C||(C=m);for(var F=0;F<this.ranges.length;F++){var L=this.ranges[F];if(Je(C,L.from())>=0&&Je(m,L.to())<=0)return F}return-1};var ao=function(m,C){this.anchor=m,this.head=C};function Ic(m,C,F){var L=m&&m.options.selectionsMayTouch,B=C[F];C.sort(function(Vt,Pt){return Je(Vt.from(),Pt.from())}),F=Sn(C,B);for(var oe=1;oe<C.length;oe++){var _e=C[oe],Ce=C[oe-1],Ae=Je(Ce.to(),_e.from());if(L&&!_e.empty()?Ae>0:Ae>=0){var Be=ps(Ce.from(),_e.from()),it=Dr(Ce.to(),_e.to()),dt=Ce.empty()?_e.from()==_e.head:Ce.from()==Ce.head;oe<=F&&--F,C.splice(--oe,2,new ao(dt?it:Be,dt?Be:it))}}return new Gl(C,F)}function to(m,C){return new Gl([new ao(m,C||m)],0)}function Ku(m){return m.text?ke(m.from.line+m.text.length-1,tt(m.text).length+(1==m.text.length?m.from.ch:0)):m.to}function wf(m,C){if(Je(m,C.from)<0)return m;if(Je(m,C.to)<=0)return Ku(C);var F=m.line+C.text.length-(C.to.line-C.from.line)-1,L=m.ch;return m.line==C.to.line&&(L+=Ku(C).ch-C.to.ch),ke(F,L)}function Iu(m,C){for(var F=[],L=0;L<m.sel.ranges.length;L++){var B=m.sel.ranges[L];F.push(new ao(wf(B.anchor,C),wf(B.head,C)))}return Ic(m.cm,F,m.sel.primIndex)}function Fd(m,C,F){return m.line==C.line?ke(F.line,m.ch-C.ch+F.ch):ke(F.line+(m.line-C.line),m.ch)}function Od(m){m.doc.mode=Mr(m.options,m.doc.modeOption),Mf(m)}function Mf(m){m.doc.iter(function(C){C.stateAfter&&(C.stateAfter=null),C.styles&&(C.styles=null)}),m.doc.modeFrontier=m.doc.highlightFrontier=m.doc.first,dh(m,100),m.state.modeGen++,m.curOp&&Ft(m)}function F_(m,C){return 0==C.from.ch&&0==C.to.ch&&""==tt(C.text)&&(!m.cm||m.cm.options.wholeLineUpdateBefore)}function ql(m,C,F,L){function B(di){return F?F[di]:null}function oe(di,fi,ji){(function Ne(m,C,F,L){m.text=C,m.stateAfter&&(m.stateAfter=null),m.styles&&(m.styles=null),null!=m.order&&(m.order=null),wd(m),Ms(m,F);var B=L?L(m):1;B!=m.height&&la(m,B)})(di,fi,ji,L),Or(di,"change",di,C)}function _e(di,fi){for(var ji=[],Ir=di;Ir<fi;++Ir)ji.push(new xe(Be[Ir],B(Ir),L));return ji}var Ce=C.from,Ae=C.to,Be=C.text,it=Ni(m,Ce.line),dt=Ni(m,Ae.line),Vt=tt(Be),Pt=B(Be.length-1),bn=Ae.line-Ce.line;if(C.full)m.insert(0,_e(0,Be.length)),m.remove(Be.length,m.size-Be.length);else if(F_(m,C)){var Hn=_e(0,Be.length-1);oe(dt,dt.text,Pt),bn&&m.remove(Ce.line,bn),Hn.length&&m.insert(Ce.line,Hn)}else if(it==dt)if(1==Be.length)oe(it,it.text.slice(0,Ce.ch)+Vt+it.text.slice(Ae.ch),Pt);else{var hi=_e(1,Be.length-1);hi.push(new xe(Vt+it.text.slice(Ae.ch),Pt,L)),oe(it,it.text.slice(0,Ce.ch)+Be[0],B(0)),m.insert(Ce.line+1,hi)}else if(1==Be.length)oe(it,it.text.slice(0,Ce.ch)+Be[0]+dt.text.slice(Ae.ch),B(0)),m.remove(Ce.line+1,bn);else{oe(it,it.text.slice(0,Ce.ch)+Be[0],B(0)),oe(dt,Vt+dt.text.slice(Ae.ch),Pt);var li=_e(1,Be.length-1);bn>1&&m.remove(Ce.line+1,bn-1),m.insert(Ce.line+1,li)}Or(m,"change",m,C)}function ic(m,C,F){!function L(B,oe,_e){if(B.linked)for(var Ce=0;Ce<B.linked.length;++Ce){var Ae=B.linked[Ce];if(Ae.doc!=oe){var Be=_e&&Ae.sharedHist;F&&!Be||(C(Ae.doc,Be),L(Ae.doc,B,Be))}}}(m,null,!0)}function pa(m,C){if(C.cm)throw new Error("This document is already in use.");m.doc=C,C.cm=m,bt(m),Od(m),Nd(m),m.options.direction=C.direction,m.options.lineWrapping||ge(m),m.options.mode=C.modeOption,Ft(m)}function Nd(m){("rtl"==m.doc.direction?_n:We)(m.display.lineDiv,"CodeMirror-rtl")}function Qa(m){this.done=[],this.undone=[],this.undoDepth=m?m.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=m?m.maxGeneration:1}function yc(m,C){var F={from:En(C.from),to:Ku(C),text:So(m,C.from,C.to)};return vy(m,F,C.from.line,C.to.line+1),ic(m,function(L){return vy(L,F,C.from.line,C.to.line+1)},!0),F}function sa(m){for(;m.length&&tt(m).ranges;)m.pop()}function Hd(m,C,F,L){var B=m.history;B.undone.length=0;var _e,Ce,oe=+new Date;if((B.lastOp==L||B.lastOrigin==C.origin&&C.origin&&("+"==C.origin.charAt(0)&&B.lastModTime>oe-(m.cm?m.cm.options.historyEventDelay:500)||"*"==C.origin.charAt(0)))&&(_e=function Bd(m,C){return C?(sa(m.done),tt(m.done)):m.done.length&&!tt(m.done).ranges?tt(m.done):m.done.length>1&&!m.done[m.done.length-2].ranges?(m.done.pop(),tt(m.done)):void 0}(B,B.lastOp==L)))Ce=tt(_e.changes),0==Je(C.from,C.to)&&0==Je(C.from,Ce.to)?Ce.to=Ku(C):_e.changes.push(yc(m,C));else{var Ae=tt(B.done);for((!Ae||!Ae.ranges)&&Fp(m.sel,B.done),_e={changes:[yc(m,C)],generation:B.generation},B.done.push(_e);B.done.length>B.undoDepth;)B.done.shift(),B.done[0].ranges||B.done.shift()}B.done.push(F),B.generation=++B.maxGeneration,B.lastModTime=B.lastSelTime=oe,B.lastOp=B.lastSelOp=L,B.lastOrigin=B.lastSelOrigin=C.origin,Ce||Ds(m,"historyAdded")}function Lp(m,C,F,L){var B=m.history,oe=L&&L.origin;F==B.lastSelOp||oe&&B.lastSelOrigin==oe&&(B.lastModTime==B.lastSelTime&&B.lastOrigin==oe||function $m(m,C,F,L){var B=C.charAt(0);return"*"==B||"+"==B&&F.ranges.length==L.ranges.length&&F.somethingSelected()==L.somethingSelected()&&new Date-m.history.lastSelTime<=(m.cm?m.cm.options.historyEventDelay:500)}(m,oe,tt(B.done),C))?B.done[B.done.length-1]=C:Fp(C,B.done),B.lastSelTime=+new Date,B.lastSelOrigin=oe,B.lastSelOp=F,L&&!1!==L.clearRedo&&sa(B.undone)}function Fp(m,C){var F=tt(C);F&&F.ranges&&F.equals(m)||C.push(m)}function vy(m,C,F,L){var B=C["spans_"+m.id],oe=0;m.iter(Math.max(m.first,F),Math.min(m.first+m.size,L),function(_e){_e.markedSpans&&((B||(B=C["spans_"+m.id]={}))[oe]=_e.markedSpans),++oe})}function Zh(m){if(!m)return null;for(var C,F=0;F<m.length;++F)m[F].marker.explicitlyCleared?C||(C=m.slice(0,F)):C&&C.push(m[F]);return C?C.length?C:null:m}function Op(m,C){var F=function eg(m,C){var F=C["spans_"+m.id];if(!F)return null;for(var L=[],B=0;B<C.text.length;++B)L.push(Zh(F[B]));return L}(m,C),L=xd(m,C);if(!F)return L;if(!L)return F;for(var B=0;B<F.length;++B){var oe=F[B],_e=L[B];if(oe&&_e)e:for(var Ce=0;Ce<_e.length;++Ce){for(var Ae=_e[Ce],Be=0;Be<oe.length;++Be)if(oe[Be].marker==Ae.marker)continue e;oe.push(Ae)}else _e&&(F[B]=_e)}return F}function Yh(m,C,F){for(var L=[],B=0;B<m.length;++B){var oe=m[B];if(oe.ranges)L.push(F?Gl.prototype.deepCopy.call(oe):oe);else{var _e=oe.changes,Ce=[];L.push({changes:Ce});for(var Ae=0;Ae<_e.length;++Ae){var Be=_e[Ae],it=void 0;if(Ce.push({from:Be.from,to:Be.to,text:Be.text}),C)for(var dt in Be)(it=dt.match(/^spans_(\d+)$/))&&Sn(C,Number(it[1]))>-1&&(tt(Ce)[dt]=Be[dt],delete Be[dt])}}}return L}function tg(m,C,F,L){if(L){var B=m.anchor;if(F){var oe=Je(C,B)<0;oe!=Je(F,B)<0?(B=C,C=F):oe!=Je(C,F)<0&&(C=F)}return new ao(B,C)}return new ao(F||C,C)}function ng(m,C,F,L,B){null==B&&(B=m.cm&&(m.cm.display.shift||m.extend)),_l(m,new Gl([tg(m.sel.primary(),C,F,B)],0),L)}function fh(m,C,F){for(var L=[],B=m.cm&&(m.cm.display.shift||m.extend),oe=0;oe<m.sel.ranges.length;oe++)L[oe]=tg(m.sel.ranges[oe],C[oe],null,B);_l(m,Ic(m.cm,L,m.sel.primIndex),F)}function zd(m,C,F,L){var B=m.sel.ranges.slice(0);B[C]=F,_l(m,Ic(m.cm,B,m.sel.primIndex),L)}function yy(m,C,F,L){_l(m,to(C,F),L)}function Sf(m,C,F){var L=m.history.done,B=tt(L);B&&B.ranges?(L[L.length-1]=C,ig(m,C,F)):_l(m,C,F)}function _l(m,C,F){ig(m,C,F),Lp(m,m.sel,m.cm?m.cm.curOp.id:NaN,F)}function ig(m,C,F){(H(m,"beforeSelectionChange")||m.cm&&H(m.cm,"beforeSelectionChange"))&&(C=function Q0(m,C,F){var L={ranges:C.ranges,update:function(B){this.ranges=[];for(var oe=0;oe<B.length;oe++)this.ranges[oe]=new ao(Xn(m,B[oe].anchor),Xn(m,B[oe].head))},origin:F&&F.origin};return Ds(m,"beforeSelectionChange",m,L),m.cm&&Ds(m.cm,"beforeSelectionChange",m.cm,L),L.ranges!=C.ranges?Ic(m.cm,L.ranges,L.ranges.length-1):C}(m,C,F));var L=F&&F.bias||(Je(C.primary().head,m.sel.primary().head)<0?-1:1);by(m,ex(m,C,L,!0)),(!F||!1!==F.scroll)&&m.cm&&"nocursor"!=m.cm.getOption("readOnly")&&Wh(m.cm)}function by(m,C){C.equals(m.sel)||(m.sel=C,m.cm&&(m.cm.curOp.updateInput=1,m.cm.curOp.selectionChanged=!0,k(m.cm)),Or(m,"cursorActivity",m))}function $0(m){by(m,ex(m,m.sel,null,!1))}function ex(m,C,F,L){for(var B,oe=0;oe<C.ranges.length;oe++){var _e=C.ranges[oe],Ce=C.ranges.length==m.sel.ranges.length&&m.sel.ranges[oe],Ae=Np(m,_e.anchor,Ce&&Ce.anchor,F,L),Be=_e.head==_e.anchor?Ae:Np(m,_e.head,Ce&&Ce.head,F,L);(B||Ae!=_e.anchor||Be!=_e.head)&&(B||(B=C.ranges.slice(0,oe)),B[oe]=new ao(Ae,Be))}return B?Ic(m.cm,B,C.primIndex):C}function ph(m,C,F,L,B){var oe=Ni(m,C.line);if(oe.markedSpans)for(var _e=0;_e<oe.markedSpans.length;++_e){var Ce=oe.markedSpans[_e],Ae=Ce.marker,Be="selectLeft"in Ae?!Ae.selectLeft:Ae.inclusiveLeft,it="selectRight"in Ae?!Ae.selectRight:Ae.inclusiveRight;if((null==Ce.from||(Be?Ce.from<=C.ch:Ce.from<C.ch))&&(null==Ce.to||(it?Ce.to>=C.ch:Ce.to>C.ch))){if(B&&(Ds(Ae,"beforeCursorEnter"),Ae.explicitlyCleared)){if(oe.markedSpans){--_e;continue}break}if(!Ae.atomic)continue;if(F){var dt=Ae.find(L<0?1:-1),Vt=void 0;if((L<0?it:Be)&&(dt=rg(m,dt,-L,dt&&dt.line==C.line?oe:null)),dt&&dt.line==C.line&&(Vt=Je(dt,F))&&(L<0?Vt<0:Vt>0))return ph(m,dt,C,L,B)}var Pt=Ae.find(L<0?-1:1);return(L<0?Be:it)&&(Pt=rg(m,Pt,L,Pt.line==C.line?oe:null)),Pt?ph(m,Pt,C,L,B):null}}return C}function Np(m,C,F,L,B){var oe=L||1;return ph(m,C,F,oe,B)||!B&&ph(m,C,F,oe,!0)||ph(m,C,F,-oe,B)||!B&&ph(m,C,F,-oe,!0)||(m.cantEdit=!0,ke(m.first,0))}function rg(m,C,F,L){return F<0&&0==C.ch?C.line>m.first?Xn(m,ke(C.line-1)):null:F>0&&C.ch==(L||Ni(m,C.line)).text.length?C.line<m.first+m.size-1?ke(C.line+1,0):null:new ke(C.line,C.ch+F)}function Bp(m){m.setSelection(ke(m.firstLine(),0),ke(m.lastLine()),Fs)}function O_(m,C,F){var L={canceled:!1,from:C.from,to:C.to,text:C.text,origin:C.origin,cancel:function(){return L.canceled=!0}};return F&&(L.update=function(B,oe,_e,Ce){B&&(L.from=Xn(m,B)),oe&&(L.to=Xn(m,oe)),_e&&(L.text=_e),void 0!==Ce&&(L.origin=Ce)}),Ds(m,"beforeChange",m,L),m.cm&&Ds(m.cm,"beforeChange",m.cm,L),L.canceled?(m.cm&&(m.cm.curOp.updateInput=2),null):{from:L.from,to:L.to,text:L.text,origin:L.origin}}function Vd(m,C,F){if(m.cm){if(!m.cm.curOp)return Ba(m.cm,Vd)(m,C,F);if(m.cm.state.suppressEdits)return}if(!(H(m,"beforeChange")||m.cm&&H(m.cm,"beforeChange"))||(C=O_(m,C,!0))){var L=Sp&&!F&&function Ai(m,C,F){var L=null;if(m.iter(C.line,F.line+1,function(Pt){if(Pt.markedSpans)for(var bn=0;bn<Pt.markedSpans.length;++bn){var Hn=Pt.markedSpans[bn].marker;Hn.readOnly&&(!L||-1==Sn(L,Hn))&&(L||(L=[])).push(Hn)}}),!L)return null;for(var B=[{from:C,to:F}],oe=0;oe<L.length;++oe)for(var _e=L[oe],Ce=_e.find(0),Ae=0;Ae<B.length;++Ae){var Be=B[Ae];if(!(Je(Be.to,Ce.from)<0||Je(Be.from,Ce.to)>0)){var it=[Ae,1],dt=Je(Be.from,Ce.from),Vt=Je(Be.to,Ce.to);(dt<0||!_e.inclusiveLeft&&!dt)&&it.push({from:Be.from,to:Ce.from}),(Vt>0||!_e.inclusiveRight&&!Vt)&&it.push({from:Ce.to,to:Be.to}),B.splice.apply(B,it),Ae+=it.length-3}}return B}(m,C.from,C.to);if(L)for(var B=L.length-1;B>=0;--B)Ud(m,{from:L[B].from,to:L[B].to,text:B?[""]:C.text,origin:C.origin});else Ud(m,C)}}function Ud(m,C){if(1!=C.text.length||""!=C.text[0]||0!=Je(C.from,C.to)){var F=Iu(m,C);Hd(m,C,F,m.cm?m.cm.curOp.id:NaN),Wd(m,C,F,xd(m,C));var L=[];ic(m,function(B,oe){!oe&&-1==Sn(L,B.history)&&(xy(B.history,C),L.push(B.history)),Wd(B,C,null,xd(B,C))})}}function sg(m,C,F){var L=m.cm&&m.cm.state.suppressEdits;if(!L||F){for(var oe,B=m.history,_e=m.sel,Ce="undo"==C?B.done:B.undone,Ae="undo"==C?B.undone:B.done,Be=0;Be<Ce.length&&(oe=Ce[Be],!(F?oe.ranges&&!oe.equals(m.sel):!oe.ranges));Be++);if(Be!=Ce.length){for(B.lastOrigin=B.lastSelOrigin=null;;){if(!(oe=Ce.pop()).ranges){if(L)return void Ce.push(oe);break}if(Fp(oe,Ae),F&&!oe.equals(m.sel))return void _l(m,oe,{clearRedo:!1});_e=oe}var it=[];Fp(_e,Ae),Ae.push({changes:it,generation:B.generation}),B.generation=oe.generation||++B.maxGeneration;for(var dt=H(m,"beforeChange")||m.cm&&H(m.cm,"beforeChange"),Vt=function(Hn){var hi=oe.changes[Hn];if(hi.origin=C,dt&&!O_(m,hi,!1))return Ce.length=0,{};it.push(yc(m,hi));var li=Hn?Iu(m,hi):tt(Ce);Wd(m,hi,li,Op(m,hi)),!Hn&&m.cm&&m.cm.scrollIntoView({from:hi.from,to:Ku(hi)});var di=[];ic(m,function(fi,ji){!ji&&-1==Sn(di,fi.history)&&(xy(fi.history,hi),di.push(fi.history)),Wd(fi,hi,null,Op(fi,hi))})},Pt=oe.changes.length-1;Pt>=0;--Pt){var bn=Vt(Pt);if(bn)return bn.v}}}}function Gd(m,C){if(0!=C&&(m.first+=C,m.sel=new Gl(Lt(m.sel.ranges,function(B){return new ao(ke(B.anchor.line+C,B.anchor.ch),ke(B.head.line+C,B.head.ch))}),m.sel.primIndex),m.cm)){Ft(m.cm,m.first,m.first-C,C);for(var F=m.cm.display,L=F.viewFrom;L<F.viewTo;L++)In(m.cm,L,"gutter")}}function Wd(m,C,F,L){if(m.cm&&!m.cm.curOp)return Ba(m.cm,Wd)(m,C,F,L);if(C.to.line<m.first)Gd(m,C.text.length-1-(C.to.line-C.from.line));else if(!(C.from.line>m.lastLine())){if(C.from.line<m.first){var B=C.text.length-1-(m.first-C.from.line);Gd(m,B),C={from:ke(m.first,0),to:ke(C.to.line+B,C.to.ch),text:[tt(C.text)],origin:C.origin}}var oe=m.lastLine();C.to.line>oe&&(C={from:C.from,to:ke(oe,Ni(m,oe).text.length),text:[C.text[0]],origin:C.origin}),C.removed=So(m,C.from,C.to),F||(F=Iu(m,C)),m.cm?function og(m,C,F){var L=m.doc,B=m.display,oe=C.from,_e=C.to,Ce=!1,Ae=oe.line;m.options.lineWrapping||(Ae=ts(Ac(Ni(L,oe.line))),L.iter(Ae,_e.line+1,function(Pt){if(Pt==B.maxLine)return Ce=!0,!0})),L.sel.contains(C.from,C.to)>-1&&k(m),ql(L,C,F,Ke(m)),m.options.lineWrapping||(L.iter(Ae,oe.line+C.text.length,function(Pt){var bn=se(Pt);bn>B.maxLineLength&&(B.maxLine=Pt,B.maxLineLength=bn,B.maxLineChanged=!0,Ce=!1)}),Ce&&(m.curOp.updateMaxLine=!0)),function bd(m,C){if(m.modeFrontier=Math.min(m.modeFrontier,C),!(m.highlightFrontier<C-10)){for(var F=m.first,L=C-1;L>F;L--){var B=Ni(m,L).stateAfter;if(B&&(!(B instanceof Bi)||L+B.lookAhead<C)){F=L+1;break}}m.highlightFrontier=Math.min(m.highlightFrontier,F)}}(L,oe.line),dh(m,400);var Be=C.text.length-(_e.line-oe.line)-1;C.full?Ft(m):oe.line!=_e.line||1!=C.text.length||F_(m.doc,C)?Ft(m,oe.line,_e.line+1,Be):In(m,oe.line,"text");var it=H(m,"changes"),dt=H(m,"change");if(dt||it){var Vt={from:oe,to:_e,text:C.text,removed:C.removed,origin:C.origin};dt&&Or(m,"change",m,Vt),it&&(m.curOp.changeObjs||(m.curOp.changeObjs=[])).push(Vt)}m.display.selForContextMenu=null}(m.cm,C,L):ql(m,C,L),ig(m,F,Fs),m.cantEdit&&Np(m,ke(m.firstLine(),0))&&(m.cantEdit=!1)}}function Hp(m,C,F,L,B){var oe;L||(L=F),Je(L,F)<0&&(F=(oe=[L,F])[0],L=oe[1]),"string"==typeof C&&(C=m.splitLines(C)),Vd(m,{from:F,to:L,text:C,origin:B})}function N_(m,C,F,L){F<m.line?m.line+=L:C<m.line&&(m.line=C,m.ch=0)}function B_(m,C,F,L){for(var B=0;B<m.length;++B){var oe=m[B],_e=!0;if(oe.ranges){oe.copied||((oe=m[B]=oe.deepCopy()).copied=!0);for(var Ce=0;Ce<oe.ranges.length;Ce++)N_(oe.ranges[Ce].anchor,C,F,L),N_(oe.ranges[Ce].head,C,F,L)}else{for(var Ae=0;Ae<oe.changes.length;++Ae){var Be=oe.changes[Ae];if(F<Be.from.line)Be.from=ke(Be.from.line+L,Be.from.ch),Be.to=ke(Be.to.line+L,Be.to.ch);else if(C<=Be.to.line){_e=!1;break}}_e||(m.splice(0,B+1),B=0)}}}function xy(m,C){var F=C.from.line,L=C.to.line,B=C.text.length-(L-F)-1;B_(m.done,F,L,B),B_(m.undone,F,L,B)}function zp(m,C,F,L){var B=C,oe=C;return"number"==typeof C?oe=Ni(m,Vi(m,C)):B=ts(C),null==B?null:(L(oe,B)&&m.cm&&In(m.cm,B,F),oe)}function mh(m){this.lines=m,this.parent=null;for(var C=0,F=0;F<m.length;++F)m[F].parent=this,C+=m[F].height;this.height=C}function qd(m){this.children=m;for(var C=0,F=0,L=0;L<m.length;++L){var B=m[L];C+=B.chunkSize(),F+=B.height,B.parent=this}this.size=C,this.height=F,this.parent=null}ao.prototype.from=function(){return ps(this.anchor,this.head)},ao.prototype.to=function(){return Dr(this.anchor,this.head)},ao.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},mh.prototype={chunkSize:function(){return this.lines.length},removeInner:function(m,C){for(var F=m,L=m+C;F<L;++F){var B=this.lines[F];this.height-=B.height,ze(B),Or(B,"delete")}this.lines.splice(m,C)},collapse:function(m){m.push.apply(m,this.lines)},insertInner:function(m,C,F){this.height+=F,this.lines=this.lines.slice(0,m).concat(C).concat(this.lines.slice(m));for(var L=0;L<C.length;++L)C[L].parent=this},iterN:function(m,C,F){for(var L=m+C;m<L;++m)if(F(this.lines[m]))return!0}},qd.prototype={chunkSize:function(){return this.size},removeInner:function(m,C){this.size-=C;for(var F=0;F<this.children.length;++F){var L=this.children[F],B=L.chunkSize();if(m<B){var oe=Math.min(C,B-m),_e=L.height;if(L.removeInner(m,oe),this.height-=_e-L.height,B==oe&&(this.children.splice(F--,1),L.parent=null),0==(C-=oe))break;m=0}else m-=B}if(this.size-C<25&&(this.children.length>1||!(this.children[0]instanceof mh))){var Ce=[];this.collapse(Ce),this.children=[new mh(Ce)],this.children[0].parent=this}},collapse:function(m){for(var C=0;C<this.children.length;++C)this.children[C].collapse(m)},insertInner:function(m,C,F){this.size+=C.length,this.height+=F;for(var L=0;L<this.children.length;++L){var B=this.children[L],oe=B.chunkSize();if(m<=oe){if(B.insertInner(m,C,F),B.lines&&B.lines.length>50){for(var _e=B.lines.length%25+25,Ce=_e;Ce<B.lines.length;){var Ae=new mh(B.lines.slice(Ce,Ce+=25));B.height-=Ae.height,this.children.splice(++L,0,Ae),Ae.parent=this}B.lines=B.lines.slice(0,_e),this.maybeSpill()}break}m-=oe}},maybeSpill:function(){if(!(this.children.length<=10)){var m=this;do{var F=new qd(m.children.splice(m.children.length-5,5));if(m.parent){m.size-=F.size,m.height-=F.height;var B=Sn(m.parent.children,m);m.parent.children.splice(B+1,0,F)}else{var L=new qd(m.children);L.parent=m,m.children=[L,F],m=L}F.parent=m.parent}while(m.children.length>10);m.parent.maybeSpill()}},iterN:function(m,C,F){for(var L=0;L<this.children.length;++L){var B=this.children[L],oe=B.chunkSize();if(m<oe){var _e=Math.min(C,oe-m);if(B.iterN(m,_e,F))return!0;if(0==(C-=_e))break;m=0}else m-=oe}}};var jd=function(m,C,F){if(F)for(var L in F)F.hasOwnProperty(L)&&(this[L]=F[L]);this.doc=m,this.node=C};function Vp(m,C,F){q(C)<(m.curOp&&m.curOp.scrollTop||m.doc.scrollTop)&&Ed(m,F)}jd.prototype.clear=function(){var m=this.doc.cm,C=this.line.widgets,F=this.line,L=ts(F);if(null!=L&&C){for(var B=0;B<C.length;++B)C[B]==this&&C.splice(B--,1);C.length||(F.widgets=null);var oe=Ar(this);la(F,Math.max(0,F.height-oe)),m&&(Fn(m,function(){Vp(m,F,-oe),In(m,L,"widget")}),Or(m,"lineWidgetCleared",m,this,L))}},jd.prototype.changed=function(){var m=this,C=this.height,F=this.doc.cm,L=this.line;this.height=null;var B=Ar(this)-C;!B||(cu(this.doc,L)||la(L,L.height+B),F&&Fn(F,function(){F.curOp.forceUpdate=!0,Vp(F,L,B),Or(F,"lineWidgetChanged",F,m,ts(L))}))},Z(jd);var wy=0,gh=function(m,C){this.lines=[],this.type=C,this.doc=m,this.id=++wy};function Zd(m,C,F,L,B){if(L&&L.shared)return function My(m,C,F,L,B){(L=pr(L)).shared=!1;var oe=[Zd(m,C,F,L,B)],_e=oe[0],Ce=L.widgetNode;return ic(m,function(Ae){Ce&&(L.widgetNode=Ce.cloneNode(!0)),oe.push(Zd(Ae,Xn(Ae,C),Xn(Ae,F),L,B));for(var Be=0;Be<Ae.linked.length;++Be)if(Ae.linked[Be].isParent)return;_e=tt(oe)}),new Ef(oe,_e)}(m,C,F,L,B);if(m.cm&&!m.cm.curOp)return Ba(m.cm,Zd)(m,C,F,L,B);var oe=new gh(m,B),_e=Je(C,F);if(L&&pr(L,oe,!1),_e>0||0==_e&&!1!==oe.clearWhenEmpty)return oe;if(oe.replacedWith&&(oe.collapsed=!0,oe.widgetNode=Bt("span",[oe.replacedWith],"CodeMirror-widget"),L.handleMouseEvents||oe.widgetNode.setAttribute("cm-ignore-events","true"),L.insertLeft&&(oe.widgetNode.insertLeft=!0)),oe.collapsed){if(Hh(m,C.line,C,F,oe)||C.line!=F.line&&Hh(m,F.line,C,F,oe))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function Ep(){Vc=!0}()}oe.addToHistory&&Hd(m,{from:C,to:F,origin:"markText"},m.sel,NaN);var Be,Ce=C.line,Ae=m.cm;if(m.iter(Ce,F.line+1,function(dt){Ae&&oe.collapsed&&!Ae.options.lineWrapping&&Ac(dt)==Ae.display.maxLine&&(Be=!0),oe.collapsed&&Ce!=C.line&&la(dt,0),function Ql(m,C,F){var L=F&&window.WeakSet&&(F.markedSpans||(F.markedSpans=new WeakSet));L&&m.markedSpans&&L.has(m.markedSpans)?m.markedSpans.push(C):(m.markedSpans=m.markedSpans?m.markedSpans.concat([C]):[C],L&&L.add(m.markedSpans)),C.marker.attachLine(m)}(dt,new _f(oe,Ce==C.line?C.ch:null,Ce==F.line?F.ch:null),m.cm&&m.cm.curOp),++Ce}),oe.collapsed&&m.iter(C.line,F.line+1,function(dt){cu(m,dt)&&la(dt,0)}),oe.clearOnEnter&&nr(oe,"beforeCursorEnter",function(){return oe.clear()}),oe.readOnly&&(function P_(){Sp=!0}(),(m.history.done.length||m.history.undone.length)&&m.clearHistory()),oe.collapsed&&(oe.id=++wy,oe.atomic=!0),Ae){if(Be&&(Ae.curOp.updateMaxLine=!0),oe.collapsed)Ft(Ae,C.line,F.line+1);else if(oe.className||oe.startStyle||oe.endStyle||oe.css||oe.attributes||oe.title)for(var it=C.line;it<=F.line;it++)In(Ae,it,"text");oe.atomic&&$0(Ae.doc),Or(Ae,"markerAdded",Ae,oe)}return oe}gh.prototype.clear=function(){if(!this.explicitlyCleared){var m=this.doc.cm,C=m&&!m.curOp;if(C&&tc(m),H(this,"clear")){var F=this.find();F&&Or(this,"clear",F.from,F.to)}for(var L=null,B=null,oe=0;oe<this.lines.length;++oe){var _e=this.lines[oe],Ce=Nh(_e.markedSpans,this);m&&!this.collapsed?In(m,ts(_e),"text"):m&&(null!=Ce.to&&(B=ts(_e)),null!=Ce.from&&(L=ts(_e))),_e.markedSpans=Tp(_e.markedSpans,Ce),null==Ce.from&&this.collapsed&&!cu(this.doc,_e)&&m&&la(_e,Wc(m.display))}if(m&&this.collapsed&&!m.options.lineWrapping)for(var Ae=0;Ae<this.lines.length;++Ae){var Be=Ac(this.lines[Ae]),it=se(Be);it>m.display.maxLineLength&&(m.display.maxLine=Be,m.display.maxLineLength=it,m.display.maxLineChanged=!0)}null!=L&&m&&this.collapsed&&Ft(m,L,B+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,m&&$0(m.doc)),m&&Or(m,"markerCleared",m,this,L,B),C&&Ca(m),this.parent&&this.parent.clear()}},gh.prototype.find=function(m,C){null==m&&"bookmark"==this.type&&(m=1);for(var F,L,B=0;B<this.lines.length;++B){var oe=this.lines[B],_e=Nh(oe.markedSpans,this);if(null!=_e.from&&(F=ke(C?oe:ts(oe),_e.from),-1==m))return F;if(null!=_e.to&&(L=ke(C?oe:ts(oe),_e.to),1==m))return L}return F&&{from:F,to:L}},gh.prototype.changed=function(){var m=this,C=this.find(-1,!0),F=this,L=this.doc.cm;!C||!L||Fn(L,function(){var B=C.line,oe=ts(C.line),_e=Uc(L,oe);if(_e&&(Gc(_e),L.curOp.selectionChanged=L.curOp.forceUpdate=!0),L.curOp.updateMaxLine=!0,!cu(F.doc,B)&&null!=F.height){var Ce=F.height;F.height=null;var Ae=Ar(F)-Ce;Ae&&la(B,B.height+Ae)}Or(L,"markerChanged",L,m)})},gh.prototype.attachLine=function(m){if(!this.lines.length&&this.doc.cm){var C=this.doc.cm.curOp;(!C.maybeHiddenMarkers||-1==Sn(C.maybeHiddenMarkers,this))&&(C.maybeUnhiddenMarkers||(C.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(m)},gh.prototype.detachLine=function(m){if(this.lines.splice(Sn(this.lines,m),1),!this.lines.length&&this.doc.cm){var C=this.doc.cm.curOp;(C.maybeHiddenMarkers||(C.maybeHiddenMarkers=[])).push(this)}},Z(gh);var Ef=function(m,C){this.markers=m,this.primary=C;for(var F=0;F<m.length;++F)m[F].parent=this};function Cy(m){return m.findMarks(ke(m.first,0),m.clipPos(ke(m.lastLine())),function(C){return C.parent})}function lg(m){for(var C=function(L){var B=m[L],oe=[B.primary.doc];ic(B.primary.doc,function(Ae){return oe.push(Ae)});for(var _e=0;_e<B.markers.length;_e++){var Ce=B.markers[_e];-1==Sn(oe,Ce.doc)&&(Ce.parent=null,B.markers.splice(_e--,1))}},F=0;F<m.length;F++)C(F)}Ef.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var m=0;m<this.markers.length;++m)this.markers[m].clear();Or(this,"clear")}},Ef.prototype.find=function(m,C){return this.primary.find(m,C)},Z(Ef);var Up=0,bc=function(m,C,F,L,B){if(!(this instanceof bc))return new bc(m,C,F,L,B);null==F&&(F=0),qd.call(this,[new mh([new xe("",null)])]),this.first=F,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=F;var oe=ke(F,0);this.sel=to(oe),this.history=new Qa(null),this.id=++Up,this.modeOption=C,this.lineSep=L,this.direction="rtl"==B?"rtl":"ltr",this.extend=!1,"string"==typeof m&&(m=this.splitLines(m)),ql(this,{from:oe,to:oe,text:m}),_l(this,to(oe),Fs)};bc.prototype=rn(qd.prototype,{constructor:bc,iter:function(m,C,F){F?this.iterN(m-this.first,C-m,F):this.iterN(this.first,this.first+this.size,m)},insert:function(m,C){for(var F=0,L=0;L<C.length;++L)F+=C[L].height;this.insertInner(m-this.first,C,F)},remove:function(m,C){this.removeInner(m-this.first,C)},getValue:function(m){var C=Os(this,this.first,this.first+this.size);return!1===m?C:C.join(m||this.lineSeparator())},setValue:gl(function(m){var C=ke(this.first,0),F=this.first+this.size-1;Vd(this,{from:C,to:ke(F,Ni(this,F).text.length),text:this.splitLines(m),origin:"setValue",full:!0},!0),this.cm&&Td(this.cm,0,0),_l(this,to(C),Fs)}),replaceRange:function(m,C,F,L){Hp(this,m,C=Xn(this,C),F=F?Xn(this,F):C,L)},getRange:function(m,C,F){var L=So(this,Xn(this,m),Xn(this,C));return!1===F?L:L.join(""===F?"":F||this.lineSeparator())},getLine:function(m){var C=this.getLineHandle(m);return C&&C.text},getLineHandle:function(m){if(Eo(this,m))return Ni(this,m)},getLineNumber:function(m){return ts(m)},getLineHandleVisualStart:function(m){return"number"==typeof m&&(m=Ni(this,m)),Ac(m)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(m){return Xn(this,m)},getCursor:function(m){var C=this.sel.primary();return null==m||"head"==m?C.head:"anchor"==m?C.anchor:"end"==m||"to"==m||!1===m?C.to():C.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:gl(function(m,C,F){yy(this,Xn(this,"number"==typeof m?ke(m,C||0):m),null,F)}),setSelection:gl(function(m,C,F){yy(this,Xn(this,m),Xn(this,C||m),F)}),extendSelection:gl(function(m,C,F){ng(this,Xn(this,m),C&&Xn(this,C),F)}),extendSelections:gl(function(m,C){fh(this,Cu(this,m),C)}),extendSelectionsBy:gl(function(m,C){fh(this,Cu(this,Lt(this.sel.ranges,m)),C)}),setSelections:gl(function(m,C,F){if(m.length){for(var L=[],B=0;B<m.length;B++)L[B]=new ao(Xn(this,m[B].anchor),Xn(this,m[B].head||m[B].anchor));null==C&&(C=Math.min(m.length-1,this.sel.primIndex)),_l(this,Ic(this.cm,L,C),F)}}),addSelection:gl(function(m,C,F){var L=this.sel.ranges.slice(0);L.push(new ao(Xn(this,m),Xn(this,C||m))),_l(this,Ic(this.cm,L,L.length-1),F)}),getSelection:function(m){for(var F,C=this.sel.ranges,L=0;L<C.length;L++){var B=So(this,C[L].from(),C[L].to());F=F?F.concat(B):B}return!1===m?F:F.join(m||this.lineSeparator())},getSelections:function(m){for(var C=[],F=this.sel.ranges,L=0;L<F.length;L++){var B=So(this,F[L].from(),F[L].to());!1!==m&&(B=B.join(m||this.lineSeparator())),C[L]=B}return C},replaceSelection:function(m,C,F){for(var L=[],B=0;B<this.sel.ranges.length;B++)L[B]=m;this.replaceSelections(L,C,F||"+input")},replaceSelections:gl(function(m,C,F){for(var L=[],B=this.sel,oe=0;oe<B.ranges.length;oe++){var _e=B.ranges[oe];L[oe]={from:_e.from(),to:_e.to(),text:this.splitLines(m[oe]),origin:F}}for(var Ce=C&&"end"!=C&&function Wl(m,C,F){for(var L=[],B=ke(m.first,0),oe=B,_e=0;_e<C.length;_e++){var Ce=C[_e],Ae=Fd(Ce.from,B,oe),Be=Fd(Ku(Ce),B,oe);if(B=Ce.to,oe=Be,"around"==F){var it=m.sel.ranges[_e],dt=Je(it.head,it.anchor)<0;L[_e]=new ao(dt?Be:Ae,dt?Ae:Be)}else L[_e]=new ao(Ae,Ae)}return new Gl(L,m.sel.primIndex)}(this,L,C),Ae=L.length-1;Ae>=0;Ae--)Vd(this,L[Ae]);Ce?Sf(this,Ce):this.cm&&Wh(this.cm)}),undo:gl(function(){sg(this,"undo")}),redo:gl(function(){sg(this,"redo")}),undoSelection:gl(function(){sg(this,"undo",!0)}),redoSelection:gl(function(){sg(this,"redo",!0)}),setExtending:function(m){this.extend=m},getExtending:function(){return this.extend},historySize:function(){for(var m=this.history,C=0,F=0,L=0;L<m.done.length;L++)m.done[L].ranges||++C;for(var B=0;B<m.undone.length;B++)m.undone[B].ranges||++F;return{undo:C,redo:F}},clearHistory:function(){var m=this;this.history=new Qa(this.history),ic(this,function(C){return C.history=m.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(m){return m&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(m){return this.history.generation==(m||this.cleanGeneration)},getHistory:function(){return{done:Yh(this.history.done),undone:Yh(this.history.undone)}},setHistory:function(m){var C=this.history=new Qa(this.history);C.done=Yh(m.done.slice(0),null,!0),C.undone=Yh(m.undone.slice(0),null,!0)},setGutterMarker:gl(function(m,C,F){return zp(this,m,"gutter",function(L){var B=L.gutterMarkers||(L.gutterMarkers={});return B[C]=F,!F&&ur(B)&&(L.gutterMarkers=null),!0})}),clearGutter:gl(function(m){var C=this;this.iter(function(F){F.gutterMarkers&&F.gutterMarkers[m]&&zp(C,F,"gutter",function(){return F.gutterMarkers[m]=null,ur(F.gutterMarkers)&&(F.gutterMarkers=null),!0})})}),lineInfo:function(m){var C;if("number"==typeof m){if(!(Eo(this,m)&&(C=m,m=Ni(this,m))))return null}else if(null==(C=ts(m)))return null;return{line:C,handle:m,text:m.text,gutterMarkers:m.gutterMarkers,textClass:m.textClass,bgClass:m.bgClass,wrapClass:m.wrapClass,widgets:m.widgets}},addLineClass:gl(function(m,C,F){return zp(this,m,"gutter"==C?"gutter":"class",function(L){var B="text"==C?"textClass":"background"==C?"bgClass":"gutter"==C?"gutterClass":"wrapClass";if(L[B]){if(st(F).test(L[B]))return!1;L[B]+=" "+F}else L[B]=F;return!0})}),removeLineClass:gl(function(m,C,F){return zp(this,m,"gutter"==C?"gutter":"class",function(L){var B="text"==C?"textClass":"background"==C?"bgClass":"gutter"==C?"gutterClass":"wrapClass",oe=L[B];if(!oe)return!1;if(null==F)L[B]=null;else{var _e=oe.match(st(F));if(!_e)return!1;var Ce=_e.index+_e[0].length;L[B]=oe.slice(0,_e.index)+(_e.index&&Ce!=oe.length?" ":"")+oe.slice(Ce)||null}return!0})}),addLineWidget:gl(function(m,C,F){return function ag(m,C,F,L){var B=new jd(m,F,L),oe=m.cm;return oe&&B.noHScroll&&(oe.display.alignWidgets=!0),zp(m,C,"widget",function(_e){var Ce=_e.widgets||(_e.widgets=[]);if(null==B.insertAt?Ce.push(B):Ce.splice(Math.min(Ce.length,Math.max(0,B.insertAt)),0,B),B.line=_e,oe&&!cu(m,_e)){var Ae=q(_e)<m.scrollTop;la(_e,_e.height+Ar(B)),Ae&&Ed(oe,B.height),oe.curOp.forceUpdate=!0}return!0}),oe&&Or(oe,"lineWidgetAdded",oe,B,"number"==typeof C?C:ts(C)),B}(this,m,C,F)}),removeLineWidget:function(m){m.clear()},markText:function(m,C,F){return Zd(this,Xn(this,m),Xn(this,C),F,F&&F.type||"range")},setBookmark:function(m,C){var F={replacedWith:C&&(null==C.nodeType?C.widget:C),insertLeft:C&&C.insertLeft,clearWhenEmpty:!1,shared:C&&C.shared,handleMouseEvents:C&&C.handleMouseEvents};return Zd(this,m=Xn(this,m),m,F,"bookmark")},findMarksAt:function(m){var C=[],F=Ni(this,(m=Xn(this,m)).line).markedSpans;if(F)for(var L=0;L<F.length;++L){var B=F[L];(null==B.from||B.from<=m.ch)&&(null==B.to||B.to>=m.ch)&&C.push(B.marker.parent||B.marker)}return C},findMarks:function(m,C,F){m=Xn(this,m),C=Xn(this,C);var L=[],B=m.line;return this.iter(m.line,C.line+1,function(oe){var _e=oe.markedSpans;if(_e)for(var Ce=0;Ce<_e.length;Ce++){var Ae=_e[Ce];!(null!=Ae.to&&B==m.line&&m.ch>=Ae.to||null==Ae.from&&B!=m.line||null!=Ae.from&&B==C.line&&Ae.from>=C.ch)&&(!F||F(Ae.marker))&&L.push(Ae.marker.parent||Ae.marker)}++B}),L},getAllMarks:function(){var m=[];return this.iter(function(C){var F=C.markedSpans;if(F)for(var L=0;L<F.length;++L)null!=F[L].from&&m.push(F[L].marker)}),m},posFromIndex:function(m){var C,F=this.first,L=this.lineSeparator().length;return this.iter(function(B){var oe=B.text.length+L;if(oe>m)return C=m,!0;m-=oe,++F}),Xn(this,ke(F,C))},indexFromPos:function(m){var C=(m=Xn(this,m)).ch;if(m.line<this.first||m.ch<0)return 0;var F=this.lineSeparator().length;return this.iter(this.first,m.line,function(L){C+=L.text.length+F}),C},copy:function(m){var C=new bc(Os(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return C.scrollTop=this.scrollTop,C.scrollLeft=this.scrollLeft,C.sel=this.sel,C.extend=!1,m&&(C.history.undoDepth=this.history.undoDepth,C.setHistory(this.getHistory())),C},linkedDoc:function(m){m||(m={});var C=this.first,F=this.first+this.size;null!=m.from&&m.from>C&&(C=m.from),null!=m.to&&m.to<F&&(F=m.to);var L=new bc(Os(this,C,F),m.mode||this.modeOption,C,this.lineSep,this.direction);return m.sharedHist&&(L.history=this.history),(this.linked||(this.linked=[])).push({doc:L,sharedHist:m.sharedHist}),L.linked=[{doc:this,isParent:!0,sharedHist:m.sharedHist}],function tx(m,C){for(var F=0;F<C.length;F++){var L=C[F],B=L.find(),oe=m.clipPos(B.from),_e=m.clipPos(B.to);if(Je(oe,_e)){var Ce=Zd(m,oe,_e,L.primary,L.primary.type);L.markers.push(Ce),Ce.parent=L}}}(L,Cy(this)),L},unlinkDoc:function(m){if(m instanceof Zo&&(m=m.doc),this.linked)for(var C=0;C<this.linked.length;++C)if(this.linked[C].doc==m){this.linked.splice(C,1),m.unlinkDoc(this),lg(Cy(this));break}if(m.history==this.history){var L=[m.id];ic(m,function(B){return L.push(B.id)},!0),m.history=new Qa(null),m.history.done=Yh(this.history.done,L),m.history.undone=Yh(this.history.undone,L)}},iterLinkedDocs:function(m){ic(this,m)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(m){return this.lineSep?m.split(this.lineSep):St(m)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:gl(function(m){"rtl"!=m&&(m="ltr"),m!=this.direction&&(this.direction=m,this.iter(function(C){return C.order=null}),this.cm&&function Cf(m){Fn(m,function(){Nd(m),Ft(m)})}(this.cm))})}),bc.prototype.eachLine=bc.prototype.iter;var H_=0;function Sy(m){var C=this;if(cg(C),!b(C,m)&&!Fa(C.display,m)){ne(m),p&&(H_=+new Date);var F=kt(C,m,!0),L=m.dataTransfer.files;if(F&&!C.isReadOnly())if(L&&L.length&&window.FileReader&&window.File)for(var B=L.length,oe=Array(B),_e=0,Ce=function(){++_e==B&&Ba(C,function(){var Pt={from:F=Xn(C.doc,F),to:F,text:C.doc.splitLines(oe.filter(function(bn){return null!=bn}).join(C.doc.lineSeparator())),origin:"paste"};Vd(C.doc,Pt),Sf(C.doc,to(Xn(C.doc,F),Xn(C.doc,Ku(Pt))))})()},Ae=function(Pt,bn){if(C.options.allowDropFileTypes&&-1==Sn(C.options.allowDropFileTypes,Pt.type))Ce();else{var Hn=new FileReader;Hn.onerror=function(){return Ce()},Hn.onload=function(){var hi=Hn.result;/[\x00-\x08\x0e-\x1f]{2}/.test(hi)||(oe[bn]=hi),Ce()},Hn.readAsText(Pt)}},Be=0;Be<L.length;Be++)Ae(L[Be],Be);else{if(C.state.draggingText&&C.doc.sel.contains(F)>-1)return C.state.draggingText(m),void setTimeout(function(){return C.display.input.focus()},20);try{var it=m.dataTransfer.getData("Text");if(it){var dt;if(C.state.draggingText&&!C.state.draggingText.copy&&(dt=C.listSelections()),ig(C.doc,to(F,F)),dt)for(var Vt=0;Vt<dt.length;++Vt)Hp(C.doc,"",dt[Vt].anchor,dt[Vt].head,"drag");C.replaceSelection(it,"around","paste"),C.display.input.focus()}}catch(Pt){}}}}function cg(m){m.display.dragCursor&&(m.display.lineSpace.removeChild(m.display.dragCursor),m.display.dragCursor=null)}function Xh(m){if(document.getElementsByClassName){for(var C=document.getElementsByClassName("CodeMirror"),F=[],L=0;L<C.length;L++){var B=C[L].CodeMirror;B&&F.push(B)}F.length&&F[0].operation(function(){for(var oe=0;oe<F.length;oe++)m(F[oe])})}}var Yd=!1;function Df(){Yd||(function Af(){var m;nr(window,"resize",function(){null==m&&(m=setTimeout(function(){m=null,Xh(Ey)},100))}),nr(window,"blur",function(){return Xh(wa)})}(),Yd=!0)}function Ey(m){var C=m.display;C.cachedCharWidth=C.cachedTextHeight=C.cachedPaddingH=null,C.scrollbarsClipped=!1,m.setSize()}for(var Qu={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},$u=0;$u<10;$u++)Qu[$u+48]=Qu[$u+96]=String($u);for(var z_=65;z_<=90;z_++)Qu[z_]=String.fromCharCode(z_);for(var Gp=1;Gp<=12;Gp++)Qu[Gp+111]=Qu[Gp+63235]="F"+Gp;var bi={};function nx(m){var C=m.split(/-(?!$)/);m=C[C.length-1];for(var F,L,B,oe,_e=0;_e<C.length-1;_e++){var Ce=C[_e];if(/^(cmd|meta|m)$/i.test(Ce))oe=!0;else if(/^a(lt)?$/i.test(Ce))F=!0;else if(/^(c|ctrl|control)$/i.test(Ce))L=!0;else{if(!/^s(hift)?$/i.test(Ce))throw new Error("Unrecognized modifier name: "+Ce);B=!0}}return F&&(m="Alt-"+m),L&&(m="Ctrl-"+m),oe&&(m="Cmd-"+m),B&&(m="Shift-"+m),m}function vM(m){var C={};for(var F in m)if(m.hasOwnProperty(F)){var L=m[F];if(/^(name|fallthrough|(de|at)tach)$/.test(F))continue;if("..."==L){delete m[F];continue}for(var B=Lt(F.split(" "),nx),oe=0;oe<B.length;oe++){var _e=void 0,Ce=void 0;oe==B.length-1?(Ce=B.join(" "),_e=L):(Ce=B.slice(0,oe+1).join(" "),_e="...");var Ae=C[Ce];if(Ae){if(Ae!=_e)throw new Error("Inconsistent bindings for "+Ce)}else C[Ce]=_e}delete m[F]}for(var Be in C)m[Be]=C[Be];return m}function Wp(m,C,F,L){var B=(C=V_(C)).call?C.call(m,L):C[m];if(!1===B)return"nothing";if("..."===B)return"multi";if(null!=B&&F(B))return"handled";if(C.fallthrough){if("[object Array]"!=Object.prototype.toString.call(C.fallthrough))return Wp(m,C.fallthrough,F,L);for(var oe=0;oe<C.fallthrough.length;oe++){var _e=Wp(m,C.fallthrough[oe],F,L);if(_e)return _e}}}function ix(m){var C="string"==typeof m?m:Qu[m.keyCode];return"Ctrl"==C||"Alt"==C||"Shift"==C||"Mod"==C}function rx(m,C,F){var L=m;return C.altKey&&"Alt"!=L&&(m="Alt-"+m),(Ve?C.metaKey:C.ctrlKey)&&"Ctrl"!=L&&(m="Ctrl-"+m),(Ve?C.ctrlKey:C.metaKey)&&"Mod"!=L&&(m="Cmd-"+m),!F&&C.shiftKey&&"Shift"!=L&&(m="Shift-"+m),m}function sx(m,C){if(N&&34==m.keyCode&&m.char)return!1;var F=Qu[m.keyCode];return null!=F&&!m.altGraphKey&&(3==m.keyCode&&m.code&&(F=m.code),rx(F,m,C))}function V_(m){return"string"==typeof m?bi[m]:m}function eh(m,C){for(var F=m.doc.sel.ranges,L=[],B=0;B<F.length;B++){for(var oe=C(F[B]);L.length&&Je(oe.from,tt(L).to)<=0;){var _e=L.pop();if(Je(_e.from,oe.from)<0){oe.from=_e.from;break}}L.push(oe)}Fn(m,function(){for(var Ce=L.length-1;Ce>=0;Ce--)Hp(m.doc,"",L[Ce].from,L[Ce].to,"+delete");Wh(m)})}function Ty(m,C,F){var L=ro(m.text,C+F,F);return L<0||L>m.text.length?null:L}function $a(m,C,F){var L=Ty(m,C.ch,F);return null==L?null:new ke(C.line,L,F<0?"after":"before")}function qp(m,C,F,L,B){if(m){"rtl"==C.doc.direction&&(B=-B);var oe=aa(F,C.doc.direction);if(oe){var Be,_e=B<0?tt(oe):oe[0],Ae=B<0==(1==_e.level)?"after":"before";if(_e.level>0||"rtl"==C.doc.direction){var it=uo(C,F),dt=Ya(C,it,Be=B<0?F.text.length-1:0).top;Be=ha(function(Vt){return Ya(C,it,Vt).top==dt},B<0==(1==_e.level)?_e.from:_e.to-1,Be),"before"==Ae&&(Be=Ty(F,Be,1))}else Be=B<0?_e.to:_e.from;return new ke(L,Be,Ae)}}return new ke(L,B<0?F.text.length:0,B<0?"before":"after")}bi.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},bi.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},bi.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},bi.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},bi.default=ae?bi.macDefault:bi.pcDefault;var ug={selectAll:Bp,singleSelection:function(m){return m.setSelection(m.getCursor("anchor"),m.getCursor("head"),Fs)},killLine:function(m){return eh(m,function(C){if(C.empty()){var F=Ni(m.doc,C.head.line).text.length;return C.head.ch==F&&C.head.line<m.lastLine()?{from:C.head,to:ke(C.head.line+1,0)}:{from:C.head,to:ke(C.head.line,F)}}return{from:C.from(),to:C.to()}})},deleteLine:function(m){return eh(m,function(C){return{from:ke(C.from().line,0),to:Xn(m.doc,ke(C.to().line+1,0))}})},delLineLeft:function(m){return eh(m,function(C){return{from:ke(C.from().line,0),to:C.from()}})},delWrappedLineLeft:function(m){return eh(m,function(C){var F=m.charCoords(C.head,"div").top+5;return{from:m.coordsChar({left:0,top:F},"div"),to:C.from()}})},delWrappedLineRight:function(m){return eh(m,function(C){var F=m.charCoords(C.head,"div").top+5,L=m.coordsChar({left:m.display.lineDiv.offsetWidth+100,top:F},"div");return{from:C.from(),to:L}})},undo:function(m){return m.undo()},redo:function(m){return m.redo()},undoSelection:function(m){return m.undoSelection()},redoSelection:function(m){return m.redoSelection()},goDocStart:function(m){return m.extendSelection(ke(m.firstLine(),0))},goDocEnd:function(m){return m.extendSelection(ke(m.lastLine()))},goLineStart:function(m){return m.extendSelectionsBy(function(C){return Dy(m,C.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(m){return m.extendSelectionsBy(function(C){return Ru(m,C.head)},{origin:"+move",bias:1})},goLineEnd:function(m){return m.extendSelectionsBy(function(C){return function du(m,C){var F=Ni(m.doc,C),L=function Fr(m){for(var C;C=mc(m);)m=C.find(1,!0).line;return m}(F);return L!=F&&(C=ts(L)),qp(!0,m,F,C,-1)}(m,C.head.line)},{origin:"+move",bias:-1})},goLineRight:function(m){return m.extendSelectionsBy(function(C){var F=m.cursorCoords(C.head,"div").top+5;return m.coordsChar({left:m.display.lineDiv.offsetWidth+100,top:F},"div")},Le)},goLineLeft:function(m){return m.extendSelectionsBy(function(C){var F=m.cursorCoords(C.head,"div").top+5;return m.coordsChar({left:0,top:F},"div")},Le)},goLineLeftSmart:function(m){return m.extendSelectionsBy(function(C){var F=m.cursorCoords(C.head,"div").top+5,L=m.coordsChar({left:0,top:F},"div");return L.ch<m.getLine(L.line).search(/\S/)?Ru(m,C.head):L},Le)},goLineUp:function(m){return m.moveV(-1,"line")},goLineDown:function(m){return m.moveV(1,"line")},goPageUp:function(m){return m.moveV(-1,"page")},goPageDown:function(m){return m.moveV(1,"page")},goCharLeft:function(m){return m.moveH(-1,"char")},goCharRight:function(m){return m.moveH(1,"char")},goColumnLeft:function(m){return m.moveH(-1,"column")},goColumnRight:function(m){return m.moveH(1,"column")},goWordLeft:function(m){return m.moveH(-1,"word")},goGroupRight:function(m){return m.moveH(1,"group")},goGroupLeft:function(m){return m.moveH(-1,"group")},goWordRight:function(m){return m.moveH(1,"word")},delCharBefore:function(m){return m.deleteH(-1,"codepoint")},delCharAfter:function(m){return m.deleteH(1,"char")},delWordBefore:function(m){return m.deleteH(-1,"word")},delWordAfter:function(m){return m.deleteH(1,"word")},delGroupBefore:function(m){return m.deleteH(-1,"group")},delGroupAfter:function(m){return m.deleteH(1,"group")},indentAuto:function(m){return m.indentSelection("smart")},indentMore:function(m){return m.indentSelection("add")},indentLess:function(m){return m.indentSelection("subtract")},insertTab:function(m){return m.replaceSelection("\t")},insertSoftTab:function(m){for(var C=[],F=m.listSelections(),L=m.options.tabSize,B=0;B<F.length;B++){var oe=F[B].from(),_e=Li(m.getLine(oe.line),oe.ch,L);C.push(lt(L-_e%L))}m.replaceSelections(C)},defaultTab:function(m){m.somethingSelected()?m.indentSelection("add"):m.execCommand("insertTab")},transposeChars:function(m){return Fn(m,function(){for(var C=m.listSelections(),F=[],L=0;L<C.length;L++)if(C[L].empty()){var B=C[L].head,oe=Ni(m.doc,B.line).text;if(oe)if(B.ch==oe.length&&(B=new ke(B.line,B.ch-1)),B.ch>0)B=new ke(B.line,B.ch+1),m.replaceRange(oe.charAt(B.ch-1)+oe.charAt(B.ch-2),ke(B.line,B.ch-2),B,"+transpose");else if(B.line>m.doc.first){var _e=Ni(m.doc,B.line-1).text;_e&&(B=new ke(B.line,1),m.replaceRange(oe.charAt(0)+m.doc.lineSeparator()+_e.charAt(_e.length-1),ke(B.line-1,_e.length-1),B,"+transpose"))}F.push(new ao(B,B))}m.setSelections(F)})},newlineAndIndent:function(m){return Fn(m,function(){for(var C=m.listSelections(),F=C.length-1;F>=0;F--)m.replaceRange(m.doc.lineSeparator(),C[F].anchor,C[F].head,"+input");C=m.listSelections();for(var L=0;L<C.length;L++)m.indentLine(C[L].from().line,null,!0);Wh(m)})},openLine:function(m){return m.replaceSelection("\n","start")},toggleOverwrite:function(m){return m.toggleOverwrite()}};function Dy(m,C){var F=Ni(m.doc,C),L=Ac(F);return L!=F&&(C=ts(L)),qp(!0,m,L,C,1)}function Ru(m,C){var F=Dy(m,C.line),L=Ni(m.doc,F.line),B=aa(L,m.doc.direction);if(!B||0==B[0].level){var oe=Math.max(F.ch,L.text.search(/\S/));return ke(F.line,C.line==F.line&&C.ch<=oe&&C.ch?0:oe,F.sticky)}return F}function Zp(m,C,F){if("string"==typeof C&&!(C=ug[C]))return!1;m.display.input.ensurePolled();var L=m.display.shift,B=!1;try{m.isReadOnly()&&(m.state.suppressEdits=!0),F&&(m.display.shift=!1),B=C(m)!=ti}finally{m.display.shift=L,m.state.suppressEdits=!1}return B}var Yp=new Mn;function If(m,C,F,L){var B=m.state.keySeq;if(B){if(ix(C))return"handled";if(/\'$/.test(C)?m.state.keySeq=null:Yp.set(50,function(){m.state.keySeq==B&&(m.state.keySeq=null,m.display.input.reset())}),Ay(m,B+" "+C,F,L))return!0}return Ay(m,C,F,L)}function Ay(m,C,F,L){var B=function hg(m,C,F){for(var L=0;L<m.state.keyMaps.length;L++){var B=Wp(C,m.state.keyMaps[L],F,m);if(B)return B}return m.options.extraKeys&&Wp(C,m.options.extraKeys,F,m)||Wp(C,m.options.keyMap,F,m)}(m,C,L);return"multi"==B&&(m.state.keySeq=C),"handled"==B&&Or(m,"keyHandled",m,C,F),("handled"==B||"multi"==B)&&(ne(F),xi(m)),!!B}function Iy(m,C){var F=sx(C,!0);return!!F&&(C.shiftKey&&!m.state.keySeq?If(m,"Shift-"+F,C,function(L){return Zp(m,L,!0)})||If(m,F,C,function(L){if("string"==typeof L?/^go[A-Z]/.test(L):L.motion)return Zp(m,L)}):If(m,F,C,function(L){return Zp(m,L)}))}var Ry=null;function U_(m){var C=this;if(!(m.target&&m.target!=C.display.input.getField()||(C.curOp.focus=jt(Yn(C)),b(C,m)))){p&&v<11&&27==m.keyCode&&(m.returnValue=!1);var F=m.keyCode;C.display.shift=16==F||m.shiftKey;var L=Iy(C,m);N&&(Ry=L?F:null,!L&&88==F&&!gn&&(ae?m.metaKey:m.ctrlKey)&&C.replaceSelection("",null,"cut")),y&&!ae&&!L&&46==F&&m.shiftKey&&!m.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==F&&!/\bCodeMirror-crosshair\b/.test(C.display.lineDiv.className)&&function Yc(m){var C=m.display.lineDiv;function F(L){(18==L.keyCode||!L.altKey)&&(We(C,"CodeMirror-crosshair"),Xi(document,"keyup",F),Xi(document,"mouseover",F))}_n(C,"CodeMirror-crosshair"),nr(document,"keyup",F),nr(document,"mouseover",F)}(C)}}function dg(m){16==m.keyCode&&(this.doc.sel.shift=!1),b(this,m)}function Xd(m){var C=this;if(!(m.target&&m.target!=C.display.input.getField()||Fa(C.display,m)||b(C,m)||m.ctrlKey&&!m.altKey||ae&&m.metaKey)){var F=m.keyCode,L=m.charCode;if(N&&F==Ry)return Ry=null,void ne(m);if(!N||m.which&&!(m.which<10)||!Iy(C,m)){var B=String.fromCharCode(null==L?F:L);"\b"!=B&&(function yM(m,C,F){return If(m,"'"+F+"'",C,function(L){return Zp(m,L,!0)})}(C,m,B)||C.display.input.onKeyPress(m))}}}var Xp,Jp,fg=function(m,C,F){this.time=m,this.pos=C,this.button=F};function ky(m){var C=this,F=C.display;if(!(b(C,m)||F.activeTouch&&F.input.supportsTouch())){if(F.input.ensurePolled(),F.shift=m.shiftKey,Fa(F,m))return void(M||(F.scroller.draggable=!1,setTimeout(function(){return F.scroller.draggable=!0},100)));if(!q_(C,m)){var L=kt(C,m),B=gt(m),oe=L?function ox(m,C){var F=+new Date;return Jp&&Jp.compare(F,m,C)?(Xp=Jp=null,"triple"):Xp&&Xp.compare(F,m,C)?(Jp=new fg(F,m,C),Xp=null,"double"):(Xp=new fg(F,m,C),Jp=null,"single")}(L,B):"single";ei(C).focus(),1==B&&C.state.selectingText&&C.state.selectingText(m),(!L||!function ax(m,C,F,L,B){var oe="Click";return"double"==L?oe="Double"+oe:"triple"==L&&(oe="Triple"+oe),If(m,rx(oe=(1==C?"Left":2==C?"Middle":"Right")+oe,B),B,function(_e){if("string"==typeof _e&&(_e=ug[_e]),!_e)return!1;var Ce=!1;try{m.isReadOnly()&&(m.state.suppressEdits=!0),Ce=_e(m,F)!=ti}finally{m.state.suppressEdits=!1}return Ce})}(C,B,L,oe,m))&&(1==B?L?function G_(m,C,F,L){p?setTimeout(Xt(Na,m),0):m.curOp.focus=jt(Yn(m));var _e,B=function Py(m,C,F){var L=m.getOption("configureMouse"),B=L?L(m,C,F):{};return null==B.unit&&(B.unit=(we?F.shiftKey&&F.metaKey:F.altKey)?"rectangle":"single"==C?"char":"double"==C?"word":"line"),(null==B.extend||m.doc.extend)&&(B.extend=m.doc.extend||F.shiftKey),null==B.addNew&&(B.addNew=ae?F.metaKey:F.ctrlKey),null==B.moveOnDrag&&(B.moveOnDrag=!(ae?F.altKey:F.ctrlKey)),B}(m,F,L),oe=m.doc.sel;m.options.dragDrop&&xt&&!m.isReadOnly()&&"single"==F&&(_e=oe.contains(C))>-1&&(Je((_e=oe.ranges[_e]).from(),C)<0||C.xRel>0)&&(Je(_e.to(),C)>0||C.xRel<0)?function pg(m,C,F,L){var B=m.display,oe=!1,_e=Ba(m,function(Be){M&&(B.scroller.draggable=!1),m.state.draggingText=!1,m.state.delayingBlurEvent&&(m.hasFocus()?m.state.delayingBlurEvent=!1:Bl(m)),Xi(B.wrapper.ownerDocument,"mouseup",_e),Xi(B.wrapper.ownerDocument,"mousemove",Ce),Xi(B.scroller,"dragstart",Ae),Xi(B.scroller,"drop",_e),oe||(ne(Be),L.addNew||ng(m.doc,F,null,null,L.extend),M&&!V||p&&9==v?setTimeout(function(){B.wrapper.ownerDocument.body.focus({preventScroll:!0}),B.input.focus()},20):B.input.focus())}),Ce=function(Be){oe=oe||Math.abs(C.clientX-Be.clientX)+Math.abs(C.clientY-Be.clientY)>=10},Ae=function(){return oe=!0};M&&(B.scroller.draggable=!0),m.state.draggingText=_e,_e.copy=!L.moveOnDrag,nr(B.wrapper.ownerDocument,"mouseup",_e),nr(B.wrapper.ownerDocument,"mousemove",Ce),nr(B.scroller,"dragstart",Ae),nr(B.scroller,"drop",_e),m.state.delayingBlurEvent=!0,setTimeout(function(){return B.input.focus()},20),B.scroller.dragDrop&&B.scroller.dragDrop()}(m,L,C,B):function Kp(m,C,F,L){p&&Bl(m);var B=m.display,oe=m.doc;ne(C);var _e,Ce,Ae=oe.sel,Be=Ae.ranges;if(L.addNew&&!L.extend?(Ce=oe.sel.contains(F),_e=Ce>-1?Be[Ce]:new ao(F,F)):(_e=oe.sel.primary(),Ce=oe.sel.primIndex),"rectangle"==L.unit)L.addNew||(_e=new ao(F,F)),F=kt(m,C,!0,!0),Ce=-1;else{var it=lx(m,F,L.unit);_e=L.extend?tg(_e,it.anchor,it.head,L.extend):it}L.addNew?-1==Ce?(Ce=Be.length,_l(oe,Ic(m,Be.concat([_e]),Ce),{scroll:!1,origin:"*mouse"})):Be.length>1&&Be[Ce].empty()&&"char"==L.unit&&!L.extend?(_l(oe,Ic(m,Be.slice(0,Ce).concat(Be.slice(Ce+1)),0),{scroll:!1,origin:"*mouse"}),Ae=oe.sel):zd(oe,Ce,_e,cr):(Ce=0,_l(oe,new Gl([_e],0),cr),Ae=oe.sel);var dt=F;function Vt(fi){if(0!=Je(dt,fi))if(dt=fi,"rectangle"==L.unit){for(var ji=[],Ir=m.options.tabSize,Cr=Li(Ni(oe,F.line).text,F.ch,Ir),Rs=Li(Ni(oe,fi.line).text,fi.ch,Ir),Yo=Math.min(Cr,Rs),cl=Math.max(Cr,Rs),ma=Math.min(F.line,fi.line),Rc=Math.min(m.lastLine(),Math.max(F.line,fi.line));ma<=Rc;ma++){var xc=Ni(oe,ma).text,el=kn(xc,Yo,Ir);Yo==cl?ji.push(new ao(ke(ma,el),ke(ma,el))):xc.length>el&&ji.push(new ao(ke(ma,el),ke(ma,kn(xc,cl,Ir))))}ji.length||ji.push(new ao(F,F)),_l(oe,Ic(m,Ae.ranges.slice(0,Ce).concat(ji),Ce),{origin:"*mouse",scroll:!1}),m.scrollIntoView(fi)}else{var za,kc=_e,Tl=lx(m,fi,L.unit),ga=kc.anchor;Je(Tl.anchor,ga)>0?(za=Tl.head,ga=ps(kc.from(),Tl.anchor)):(za=Tl.anchor,ga=Dr(kc.to(),Tl.head));var go=Ae.ranges.slice(0);go[Ce]=function W_(m,C){var F=C.anchor,L=C.head,B=Ni(m.doc,F.line);if(0==Je(F,L)&&F.sticky==L.sticky)return C;var oe=aa(B);if(!oe)return C;var _e=Ps(oe,F.ch,F.sticky),Ce=oe[_e];if(Ce.from!=F.ch&&Ce.to!=F.ch)return C;var Be,Ae=_e+(Ce.from==F.ch==(1!=Ce.level)?0:1);if(0==Ae||Ae==oe.length)return C;if(L.line!=F.line)Be=(L.line-F.line)*("ltr"==m.doc.direction?1:-1)>0;else{var it=Ps(oe,L.ch,L.sticky),dt=it-_e||(L.ch-F.ch)*(1==Ce.level?-1:1);Be=it==Ae-1||it==Ae?dt<0:dt>0}var Vt=oe[Ae+(Be?-1:0)],Pt=Be==(1==Vt.level),bn=Pt?Vt.from:Vt.to,Hn=Pt?"after":"before";return F.ch==bn&&F.sticky==Hn?C:new ao(new ke(F.line,bn,Hn),L)}(m,new ao(Xn(oe,ga),za)),_l(oe,Ic(m,go,Ce),cr)}}var Pt=B.wrapper.getBoundingClientRect(),bn=0;function Hn(fi){var ji=++bn,Ir=kt(m,fi,!0,"rectangle"==L.unit);if(Ir)if(0!=Je(Ir,dt)){m.curOp.focus=jt(Yn(m)),Vt(Ir);var Cr=Uh(B,oe);(Ir.line>=Cr.to||Ir.line<Cr.from)&&setTimeout(Ba(m,function(){bn==ji&&Hn(fi)}),150)}else{var Rs=fi.clientY<Pt.top?-20:fi.clientY>Pt.bottom?20:0;Rs&&setTimeout(Ba(m,function(){bn==ji&&(B.scroller.scrollTop+=Rs,Hn(fi))}),50)}}function hi(fi){m.state.selectingText=!1,bn=1/0,fi&&(ne(fi),B.input.focus()),Xi(B.wrapper.ownerDocument,"mousemove",li),Xi(B.wrapper.ownerDocument,"mouseup",di),oe.history.lastSelOrigin=null}var li=Ba(m,function(fi){0!==fi.buttons&&gt(fi)?Hn(fi):hi(fi)}),di=Ba(m,hi);m.state.selectingText=di,nr(B.wrapper.ownerDocument,"mousemove",li),nr(B.wrapper.ownerDocument,"mouseup",di)}(m,L,C,B)}(C,L,oe,m):Qe(m)==F.scroller&&ne(m):2==B?(L&&ng(C.doc,L),setTimeout(function(){return F.input.focus()},20)):3==B&&(le?C.display.input.onContextMenu(m):Bl(C)))}}}function lx(m,C,F){if("char"==F)return new ao(C,C);if("word"==F)return m.findWordAt(C);if("line"==F)return new ao(ke(C.line,0),Xn(m.doc,ke(C.line+1,0)));var L=F(m,C);return new ao(L.from,L.to)}function Qp(m,C,F,L){var B,oe;if(C.touches)B=C.touches[0].clientX,oe=C.touches[0].clientY;else try{B=C.clientX,oe=C.clientY}catch(Vt){return!1}if(B>=Math.floor(m.display.gutters.getBoundingClientRect().right))return!1;L&&ne(C);var _e=m.display,Ce=_e.lineDiv.getBoundingClientRect();if(oe>Ce.bottom||!H(m,F))return De(C);oe-=Ce.top-_e.viewOffset;for(var Ae=0;Ae<m.display.gutterSpecs.length;++Ae){var Be=_e.gutters.childNodes[Ae];if(Be&&Be.getBoundingClientRect().right>=B)return Ds(m,F,m,Ws(m.doc,oe),m.display.gutterSpecs[Ae].className,C),De(C)}}function q_(m,C){return Qp(m,C,"gutterClick",!0)}function Ly(m,C){Fa(m.display,C)||function cx(m,C){return!!H(m,"gutterContextMenu")&&Qp(m,C,"gutterContextMenu",!1)}(m,C)||b(m,C,"contextmenu")||le||m.display.input.onContextMenu(C)}function j_(m){m.display.wrapper.className=m.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+m.options.theme.replace(/(^|\s)\s*/g," cm-s-"),El(m)}fg.prototype.compare=function(m,C,F){return this.time+400>m&&0==Je(C,this.pos)&&F==this.button};var Rf={toString:function(){return"CodeMirror.Init"}},kf={},$p={};function wn(m,C,F){if(!C!=!(F&&F!=Rf)){var B=m.display.dragFunctions,oe=C?nr:Xi;oe(m.display.scroller,"dragstart",B.start),oe(m.display.scroller,"dragenter",B.enter),oe(m.display.scroller,"dragover",B.over),oe(m.display.scroller,"dragleave",B.leave),oe(m.display.scroller,"drop",B.drop)}}function Fy(m){m.options.lineWrapping?(_n(m.display.wrapper,"CodeMirror-wrap"),m.display.sizer.style.minWidth="",m.display.sizerWidth=null):(We(m.display.wrapper,"CodeMirror-wrap"),ge(m)),bt(m),Ft(m),El(m),setTimeout(function(){return Ji(m)},100)}function Zo(m,C){var F=this;if(!(this instanceof Zo))return new Zo(m,C);this.options=C=C?pr(C):{},pr(kf,C,!1);var L=C.value;"string"==typeof L?L=new bc(L,C.mode,null,C.lineSeparator,C.direction):C.mode&&(L.modeOption=C.mode),this.doc=L;var B=new Zo.inputStyles[C.inputStyle](this),oe=this.display=new Ul(m,L,B,C);for(var _e in oe.wrapper.CodeMirror=this,j_(this),C.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),kp(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Mn,keySeq:null,specialChars:null},C.autofocus&&!ie&&oe.input.focus(),p&&v<11&&setTimeout(function(){return F.display.input.reset(!0)},20),function Z_(m){var C=m.display;nr(C.scroller,"mousedown",Ba(m,ky)),nr(C.scroller,"dblclick",p&&v<11?Ba(m,function(Ae){if(!b(m,Ae)){var Be=kt(m,Ae);if(Be&&!q_(m,Ae)&&!Fa(m.display,Ae)){ne(Ae);var it=m.findWordAt(Be);ng(m.doc,it.anchor,it.head)}}}):function(Ae){return b(m,Ae)||ne(Ae)}),nr(C.scroller,"contextmenu",function(Ae){return Ly(m,Ae)}),nr(C.input.getField(),"contextmenu",function(Ae){C.scroller.contains(Ae.target)||Ly(m,Ae)});var F,L={end:0};function B(){C.activeTouch&&(F=setTimeout(function(){return C.activeTouch=null},1e3),(L=C.activeTouch).end=+new Date)}function oe(Ae){if(1!=Ae.touches.length)return!1;var Be=Ae.touches[0];return Be.radiusX<=1&&Be.radiusY<=1}function _e(Ae,Be){if(null==Be.left)return!0;var it=Be.left-Ae.left,dt=Be.top-Ae.top;return it*it+dt*dt>400}nr(C.scroller,"touchstart",function(Ae){if(!b(m,Ae)&&!oe(Ae)&&!q_(m,Ae)){C.input.ensurePolled(),clearTimeout(F);var Be=+new Date;C.activeTouch={start:Be,moved:!1,prev:Be-L.end<=300?L:null},1==Ae.touches.length&&(C.activeTouch.left=Ae.touches[0].pageX,C.activeTouch.top=Ae.touches[0].pageY)}}),nr(C.scroller,"touchmove",function(){C.activeTouch&&(C.activeTouch.moved=!0)}),nr(C.scroller,"touchend",function(Ae){var Be=C.activeTouch;if(Be&&!Fa(C,Ae)&&null!=Be.left&&!Be.moved&&new Date-Be.start<300){var dt,it=m.coordsChar(C.activeTouch,"page");dt=!Be.prev||_e(Be,Be.prev)?new ao(it,it):!Be.prev.prev||_e(Be,Be.prev.prev)?m.findWordAt(it):new ao(ke(it.line,0),Xn(m.doc,ke(it.line+1,0))),m.setSelection(dt.anchor,dt.head),m.focus(),ne(Ae)}B()}),nr(C.scroller,"touchcancel",B),nr(C.scroller,"scroll",function(){C.scroller.clientHeight&&(Rp(m,C.scroller.scrollTop),Du(m,C.scroller.scrollLeft,!0),Ds(m,"scroll",m))}),nr(C.scroller,"mousewheel",function(Ae){return Pp(m,Ae)}),nr(C.scroller,"DOMMouseScroll",function(Ae){return Pp(m,Ae)}),nr(C.wrapper,"scroll",function(){return C.wrapper.scrollTop=C.wrapper.scrollLeft=0}),C.dragFunctions={enter:function(Ae){b(m,Ae)||Ue(Ae)},over:function(Ae){b(m,Ae)||(function Sa(m,C){var F=kt(m,C);if(F){var L=document.createDocumentFragment();Is(m,F,L),m.display.dragCursor||(m.display.dragCursor=qe("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),m.display.lineSpace.insertBefore(m.display.dragCursor,m.display.cursorDiv)),Te(m.display.dragCursor,L)}}(m,Ae),Ue(Ae))},start:function(Ae){return function Tf(m,C){if(p&&(!m.state.draggingText||+new Date-H_<100))Ue(C);else if(!b(m,C)&&!Fa(m.display,C)&&(C.dataTransfer.setData("Text",m.getSelection()),C.dataTransfer.effectAllowed="copyMove",C.dataTransfer.setDragImage&&!V)){var F=qe("img",null,null,"position: fixed; left: 0; top: 0;");F.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",N&&(F.width=F.height=1,m.display.wrapper.appendChild(F),F._top=F.offsetTop),C.dataTransfer.setDragImage(F,0,0),N&&F.parentNode.removeChild(F)}}(m,Ae)},drop:Ba(m,Sy),leave:function(Ae){b(m,Ae)||cg(m)}};var Ce=C.input.getField();nr(Ce,"keyup",function(Ae){return dg.call(m,Ae)}),nr(Ce,"keydown",Ba(m,U_)),nr(Ce,"keypress",Ba(m,Xd)),nr(Ce,"focus",function(Ae){return Wo(m,Ae)}),nr(Ce,"blur",function(Ae){return wa(m,Ae)})}(this),Df(),tc(this),this.curOp.forceUpdate=!0,pa(this,L),C.autofocus&&!ie||this.hasFocus()?setTimeout(function(){F.hasFocus()&&!F.state.focused&&Wo(F)},20):wa(this),$p)$p.hasOwnProperty(_e)&&$p[_e](this,C[_e],Rf);jh(this),C.finishInit&&C.finishInit(this);for(var Ce=0;Ce<Jd.length;++Ce)Jd[Ce](this);Ca(this),M&&C.lineWrapping&&"optimizelegibility"==getComputedStyle(oe.lineDiv).textRendering&&(oe.lineDiv.style.textRendering="auto")}Zo.defaults=kf,Zo.optionHandlers=$p;var Jd=[];function em(m,C,F,L){var oe,B=m.doc;null==F&&(F="add"),"smart"==F&&(B.mode.indent?oe=Uo(m,C).state:F="prev");var _e=m.options.tabSize,Ce=Ni(B,C),Ae=Li(Ce.text,null,_e);Ce.stateAfter&&(Ce.stateAfter=null);var it,Be=Ce.text.match(/^\s*/)[0];if(L||/\S/.test(Ce.text)){if("smart"==F&&((it=B.mode.indent(oe,Ce.text.slice(Be.length),Ce.text))==ti||it>150)){if(!L)return;F="prev"}}else it=0,F="not";"prev"==F?it=C>B.first?Li(Ni(B,C-1).text,null,_e):0:"add"==F?it=Ae+m.options.indentUnit:"subtract"==F?it=Ae-m.options.indentUnit:"number"==typeof F&&(it=Ae+F),it=Math.max(0,it);var dt="",Vt=0;if(m.options.indentWithTabs)for(var Pt=Math.floor(it/_e);Pt;--Pt)Vt+=_e,dt+="\t";if(Vt<it&&(dt+=lt(it-Vt)),dt!=Be)return Hp(B,dt,ke(C,0),ke(C,Be.length),"+input"),Ce.stateAfter=null,!0;for(var bn=0;bn<B.sel.ranges.length;bn++){var Hn=B.sel.ranges[bn];if(Hn.head.line==C&&Hn.head.ch<Be.length){var hi=ke(C,Be.length);zd(B,bn,new ao(hi,hi));break}}}Zo.defineInitHook=function(m){return Jd.push(m)};var ku=null;function mg(m){ku=m}function Pf(m,C,F,L,B){var oe=m.doc;m.display.shift=!1,L||(L=oe.sel);var _e=+new Date-200,Ce="paste"==B||m.state.pasteIncoming>_e,Ae=St(C),Be=null;if(Ce&&L.ranges.length>1)if(ku&&ku.text.join("\n")==C){if(L.ranges.length%ku.text.length==0){Be=[];for(var it=0;it<ku.text.length;it++)Be.push(oe.splitLines(ku.text[it]))}}else Ae.length==L.ranges.length&&m.options.pasteLinesPerSelection&&(Be=Lt(Ae,function(li){return[li]}));for(var dt=m.curOp.updateInput,Vt=L.ranges.length-1;Vt>=0;Vt--){var Pt=L.ranges[Vt],bn=Pt.from(),Hn=Pt.to();Pt.empty()&&(F&&F>0?bn=ke(bn.line,bn.ch-F):m.state.overwrite&&!Ce?Hn=ke(Hn.line,Math.min(Ni(oe,Hn.line).text.length,Hn.ch+tt(Ae).length)):Ce&&ku&&ku.lineWise&&ku.text.join("\n")==Ae.join("\n")&&(bn=Hn=ke(bn.line,0)));var hi={from:bn,to:Hn,text:Be?Be[Vt%Be.length]:Ae,origin:B||(Ce?"paste":m.state.cutIncoming>_e?"cut":"+input")};Vd(m.doc,hi),Or(m,"inputRead",m,hi)}C&&!Ce&&Y_(m,C),Wh(m),m.curOp.updateInput<2&&(m.curOp.updateInput=dt),m.curOp.typing=!0,m.state.pasteIncoming=m.state.cutIncoming=-1}function Xc(m,C){var F=m.clipboardData&&m.clipboardData.getData("Text");if(F)return m.preventDefault(),!C.isReadOnly()&&!C.options.disableInput&&C.hasFocus()&&Fn(C,function(){return Pf(C,F,0,null,"paste")}),!0}function Y_(m,C){if(m.options.electricChars&&m.options.smartIndent)for(var F=m.doc.sel,L=F.ranges.length-1;L>=0;L--){var B=F.ranges[L];if(!(B.head.ch>100||L&&F.ranges[L-1].head.line==B.head.line)){var oe=m.getModeAt(B.head),_e=!1;if(oe.electricChars){for(var Ce=0;Ce<oe.electricChars.length;Ce++)if(C.indexOf(oe.electricChars.charAt(Ce))>-1){_e=em(m,B.head.line,"smart");break}}else oe.electricInput&&oe.electricInput.test(Ni(m.doc,B.head.line).text.slice(0,B.head.ch))&&(_e=em(m,B.head.line,"smart"));_e&&Or(m,"electricInput",m,B.head.line)}}}function Jh(m){for(var C=[],F=[],L=0;L<m.doc.sel.ranges.length;L++){var B=m.doc.sel.ranges[L].head.line,oe={anchor:ke(B,0),head:ke(B+1,0)};F.push(oe),C.push(m.getRange(oe.anchor,oe.head))}return{text:C,ranges:F}}function Oy(m,C,F,L){m.setAttribute("autocorrect",F?"":"off"),m.setAttribute("autocapitalize",L?"":"off"),m.setAttribute("spellcheck",!!C)}function X_(){var m=qe("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),C=qe("div",[m],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return M?m.style.width="1000px":m.setAttribute("wrap","off"),re&&(m.style.border="1px solid black"),Oy(m),C}function Lf(m,C,F,L,B){var oe=C,_e=F,Ce=Ni(m,C.line),Ae=B&&"rtl"==m.direction?-F:F;function it(di){var fi;if("codepoint"==L){var ji=Ce.text.charCodeAt(C.ch+(F>0?0:-1));fi=isNaN(ji)?null:new ke(C.line,Math.max(0,Math.min(Ce.text.length,C.ch+F*((F>0?ji>=55296&&ji<56320:ji>=56320&&ji<57343)?2:1))),-F)}else fi=B?function jp(m,C,F,L){var B=aa(C,m.doc.direction);if(!B)return $a(C,F,L);F.ch>=C.text.length?(F.ch=C.text.length,F.sticky="before"):F.ch<=0&&(F.ch=0,F.sticky="after");var oe=Ps(B,F.ch,F.sticky),_e=B[oe];if("ltr"==m.doc.direction&&_e.level%2==0&&(L>0?_e.to>F.ch:_e.from<F.ch))return $a(C,F,L);var Ae,Ce=function(li,di){return Ty(C,li instanceof ke?li.ch:li,di)},Be=function(li){return m.options.lineWrapping?(Ae=Ae||uo(m,C),hr(m,C,Ae,li)):{begin:0,end:C.text.length}},it=Be("before"==F.sticky?Ce(F,-1):F.ch);if("rtl"==m.doc.direction||1==_e.level){var dt=1==_e.level==L<0,Vt=Ce(F,dt?1:-1);if(null!=Vt&&(dt?Vt<=_e.to&&Vt<=it.end:Vt>=_e.from&&Vt>=it.begin))return new ke(F.line,Vt,dt?"before":"after")}var bn=function(li,di,fi){for(;li>=0&&li<B.length;li+=di){var Ir=B[li],Cr=di>0==(1!=Ir.level),Rs=Cr?fi.begin:Ce(fi.end,-1);if(Ir.from<=Rs&&Rs<Ir.to||(Rs=Cr?Ir.from:Ce(Ir.to,-1),fi.begin<=Rs&&Rs<fi.end))return Yo=Rs,Cr?new ke(F.line,Ce(Yo,1),"before"):new ke(F.line,Yo,"after")}var Yo},Hn=bn(oe+L,L,it);if(Hn)return Hn;var hi=L>0?it.end:Ce(it.begin,-1);return null==hi||L>0&&hi==C.text.length||!(Hn=bn(L>0?0:B.length-1,L,Be(hi)))?null:Hn}(m.cm,Ce,C,F):$a(Ce,C,F);if(null==fi){if(di||!function Be(){var di=C.line+Ae;return!(di<m.first||di>=m.first+m.size)&&(C=new ke(di,C.ch,C.sticky),Ce=Ni(m,di))}())return!1;C=qp(B,m.cm,Ce,C.line,Ae)}else C=fi;return!0}if("char"==L||"codepoint"==L)it();else if("column"==L)it(!0);else if("word"==L||"group"==L)for(var dt=null,Vt="group"==L,Pt=m.cm&&m.cm.getHelper(C,"wordChars"),bn=!0;!(F<0)||it(!bn);bn=!1){var Hn=Ce.text.charAt(C.ch)||"\n",hi=pi(Hn,Pt)?"w":Vt&&"\n"==Hn?"n":!Vt||/\s/.test(Hn)?null:"p";if(Vt&&!bn&&!hi&&(hi="s"),dt&&dt!=hi){F<0&&(F=1,it(),C.sticky="after");break}if(hi&&(dt=hi),F>0&&!it(!bn))break}var li=Np(m,C,oe,_e,!0);return mn(oe,li)&&(li.hitSide=!0),li}function K_(m,C,F,L){var _e,Be,B=m.doc,oe=C.left;if("page"==L){var Ce=Math.min(m.display.wrapper.clientHeight,ei(m).innerHeight||B(m).documentElement.clientHeight),Ae=Math.max(Ce-.5*Wc(m.display),3);_e=(F>0?C.bottom:C.top)+F*Ae}else"line"==L&&(_e=F>0?C.bottom+3:C.top-3);for(;(Be=Tu(m,oe,_e)).outside;){if(F<0?_e<=0:_e>=B.height){Be.hitSide=!0;break}_e+=5*F}return Be}var Ao=function(m){this.cm=m,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Mn,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function qs(m,C){var F=Uc(m,C.line);if(!F||F.hidden)return null;var L=Ni(m.doc,C.line),B=Po(F,L,C.line),oe=aa(L,m.doc.direction),_e="left";oe&&(_e=Ps(oe,C.ch)%2?"right":"left");var Ae=qr(B.map,C.ch,_e);return Ae.offset="right"==Ae.collapse?Ae.end:Ae.start,Ae}function ll(m,C){return C&&(m.bad=!0),m}function Q_(m,C,F){var L;if(C==m.display.lineDiv){if(!(L=m.display.lineDiv.childNodes[F]))return ll(m.clipPos(ke(m.display.viewTo-1)),!0);C=null,F=0}else for(L=C;;L=L.parentNode){if(!L||L==m.display.lineDiv)return null;if(L.parentNode&&L.parentNode==m.display.lineDiv)break}for(var B=0;B<m.display.view.length;B++){var oe=m.display.view[B];if(oe.node==L)return Ny(oe,C,F)}}function Ny(m,C,F){var L=m.text.firstChild,B=!1;if(!C||!Zn(L,C))return ll(ke(ts(m.line),0),!0);if(C==L&&(B=!0,C=L.childNodes[F],F=0,!C)){var oe=m.rest?tt(m.rest):m.line;return ll(ke(ts(oe),oe.text.length),B)}var _e=3==C.nodeType?C:null,Ce=C;for(!_e&&1==C.childNodes.length&&3==C.firstChild.nodeType&&(_e=C.firstChild,F&&(F=_e.nodeValue.length));Ce.parentNode!=L;)Ce=Ce.parentNode;var Ae=m.measure,Be=Ae.maps;function it(hi,li,di){for(var fi=-1;fi<(Be?Be.length:0);fi++)for(var ji=fi<0?Ae.map:Be[fi],Ir=0;Ir<ji.length;Ir+=3){var Cr=ji[Ir+2];if(Cr==hi||Cr==li){var Rs=ts(fi<0?m.line:m.rest[fi]),Yo=ji[Ir]+di;return(di<0||Cr!=hi)&&(Yo=ji[Ir+(di?1:0)]),ke(Rs,Yo)}}}var dt=it(_e,Ce,F);if(dt)return ll(dt,B);for(var Vt=Ce.nextSibling,Pt=_e?_e.nodeValue.length-F:0;Vt;Vt=Vt.nextSibling){if(dt=it(Vt,Vt.firstChild,0))return ll(ke(dt.line,dt.ch-Pt),B);Pt+=Vt.textContent.length}for(var bn=Ce.previousSibling,Hn=F;bn;bn=bn.previousSibling){if(dt=it(bn,bn.firstChild,-1))return ll(ke(dt.line,dt.ch+Hn),B);Hn+=bn.textContent.length}}Ao.prototype.init=function(m){var C=this,F=this,L=F.cm,B=F.div=m.lineDiv;function oe(Ce){for(var Ae=Ce.target;Ae;Ae=Ae.parentNode){if(Ae==B)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(Ae.className))break}return!1}function _e(Ce){if(oe(Ce)&&!b(L,Ce)){if(L.somethingSelected())mg({lineWise:!1,text:L.getSelections()}),"cut"==Ce.type&&L.replaceSelection("",null,"cut");else{if(!L.options.lineWiseCopyCut)return;var Ae=Jh(L);mg({lineWise:!0,text:Ae.text}),"cut"==Ce.type&&L.operation(function(){L.setSelections(Ae.ranges,0,Fs),L.replaceSelection("",null,"cut")})}if(Ce.clipboardData){Ce.clipboardData.clearData();var Be=ku.text.join("\n");if(Ce.clipboardData.setData("Text",Be),Ce.clipboardData.getData("Text")==Be)return void Ce.preventDefault()}var it=X_(),dt=it.firstChild;L.display.lineSpace.insertBefore(it,L.display.lineSpace.firstChild),dt.value=ku.text.join("\n");var Vt=jt(B.ownerDocument);It(dt),setTimeout(function(){L.display.lineSpace.removeChild(it),Vt.focus(),Vt==B&&F.showPrimarySelection()},50)}}B.contentEditable=!0,Oy(B,L.options.spellcheck,L.options.autocorrect,L.options.autocapitalize),nr(B,"paste",function(Ce){!oe(Ce)||b(L,Ce)||Xc(Ce,L)||v<=11&&setTimeout(Ba(L,function(){return C.updateFromDOM()}),20)}),nr(B,"compositionstart",function(Ce){C.composing={data:Ce.data,done:!1}}),nr(B,"compositionupdate",function(Ce){C.composing||(C.composing={data:Ce.data,done:!1})}),nr(B,"compositionend",function(Ce){C.composing&&(Ce.data!=C.composing.data&&C.readFromDOMSoon(),C.composing.done=!0)}),nr(B,"touchstart",function(){return F.forceCompositionEnd()}),nr(B,"input",function(){C.composing||C.readFromDOMSoon()}),nr(B,"copy",_e),nr(B,"cut",_e)},Ao.prototype.screenReaderLabelChanged=function(m){m?this.div.setAttribute("aria-label",m):this.div.removeAttribute("aria-label")},Ao.prototype.prepareSelection=function(){var m=Hr(this.cm,!1);return m.focus=jt(this.div.ownerDocument)==this.div,m},Ao.prototype.showSelection=function(m,C){!m||!this.cm.display.view.length||((m.focus||C)&&this.showPrimarySelection(),this.showMultipleSelections(m))},Ao.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ao.prototype.showPrimarySelection=function(){var m=this.getSelection(),C=this.cm,F=C.doc.sel.primary(),L=F.from(),B=F.to();if(C.display.viewTo==C.display.viewFrom||L.line>=C.display.viewTo||B.line<C.display.viewFrom)m.removeAllRanges();else{var oe=Q_(C,m.anchorNode,m.anchorOffset),_e=Q_(C,m.focusNode,m.focusOffset);if(!oe||oe.bad||!_e||_e.bad||0!=Je(ps(oe,_e),L)||0!=Je(Dr(oe,_e),B)){var Ce=C.display.view,Ae=L.line>=C.display.viewFrom&&qs(C,L)||{node:Ce[0].measure.map[2],offset:0},Be=B.line<C.display.viewTo&&qs(C,B);if(!Be){var it=Ce[Ce.length-1].measure,dt=it.maps?it.maps[it.maps.length-1]:it.map;Be={node:dt[dt.length-1],offset:dt[dt.length-2]-dt[dt.length-3]}}if(!Ae||!Be)return void m.removeAllRanges();var Pt,Vt=m.rangeCount&&m.getRangeAt(0);try{Pt=Ze(Ae.node,Ae.offset,Be.offset,Be.node)}catch(bn){}Pt&&(!y&&C.state.focused?(m.collapse(Ae.node,Ae.offset),Pt.collapsed||(m.removeAllRanges(),m.addRange(Pt))):(m.removeAllRanges(),m.addRange(Pt)),Vt&&null==m.anchorNode?m.addRange(Vt):y&&this.startGracePeriod()),this.rememberSelection()}}},Ao.prototype.startGracePeriod=function(){var m=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){m.gracePeriod=!1,m.selectionChanged()&&m.cm.operation(function(){return m.cm.curOp.selectionChanged=!0})},20)},Ao.prototype.showMultipleSelections=function(m){Te(this.cm.display.cursorDiv,m.cursors),Te(this.cm.display.selectionDiv,m.selection)},Ao.prototype.rememberSelection=function(){var m=this.getSelection();this.lastAnchorNode=m.anchorNode,this.lastAnchorOffset=m.anchorOffset,this.lastFocusNode=m.focusNode,this.lastFocusOffset=m.focusOffset},Ao.prototype.selectionInEditor=function(){var m=this.getSelection();if(!m.rangeCount)return!1;var C=m.getRangeAt(0).commonAncestorContainer;return Zn(this.div,C)},Ao.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||jt(this.div.ownerDocument)!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ao.prototype.blur=function(){this.div.blur()},Ao.prototype.getField=function(){return this.div},Ao.prototype.supportsTouch=function(){return!0},Ao.prototype.receivedFocus=function(){var m=this,C=this;this.selectionInEditor()?setTimeout(function(){return m.pollSelection()},20):Fn(this.cm,function(){return C.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function F(){C.cm.state.focused&&(C.pollSelection(),C.polling.set(C.cm.options.pollInterval,F))})},Ao.prototype.selectionChanged=function(){var m=this.getSelection();return m.anchorNode!=this.lastAnchorNode||m.anchorOffset!=this.lastAnchorOffset||m.focusNode!=this.lastFocusNode||m.focusOffset!=this.lastFocusOffset},Ao.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var m=this.getSelection(),C=this.cm;if(ce&&I&&this.cm.display.gutterSpecs.length&&function Ii(m){for(var C=m;C;C=C.parentNode)if(/CodeMirror-gutter-wrapper/.test(C.className))return!0;return!1}(m.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var F=Q_(C,m.anchorNode,m.anchorOffset),L=Q_(C,m.focusNode,m.focusOffset);F&&L&&Fn(C,function(){_l(C.doc,to(F,L),Fs),(F.bad||L.bad)&&(C.curOp.selectionChanged=!0)})}}},Ao.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var oe,_e,Ce,m=this.cm,C=m.display,F=m.doc.sel.primary(),L=F.from(),B=F.to();if(0==L.ch&&L.line>m.firstLine()&&(L=ke(L.line-1,Ni(m.doc,L.line-1).length)),B.ch==Ni(m.doc,B.line).text.length&&B.line<m.lastLine()&&(B=ke(B.line+1,0)),L.line<C.viewFrom||B.line>C.viewTo-1)return!1;L.line==C.viewFrom||0==(oe=Pn(m,L.line))?(_e=ts(C.view[0].line),Ce=C.view[0].node):(_e=ts(C.view[oe].line),Ce=C.view[oe-1].node.nextSibling);var Be,it,Ae=Pn(m,B.line);if(Ae==C.view.length-1?(Be=C.viewTo-1,it=C.lineDiv.lastChild):(Be=ts(C.view[Ae+1].line)-1,it=C.view[Ae+1].node.previousSibling),!Ce)return!1;for(var dt=m.doc.splitLines(function hx(m,C,F,L,B){var oe="",_e=!1,Ce=m.doc.lineSeparator(),Ae=!1;function it(){_e&&(oe+=Ce,Ae&&(oe+=Ce),_e=Ae=!1)}function dt(Pt){Pt&&(it(),oe+=Pt)}function Vt(Pt){if(1==Pt.nodeType){var bn=Pt.getAttribute("cm-text");if(bn)return void dt(bn);var hi,Hn=Pt.getAttribute("cm-marker");if(Hn){var li=m.findMarks(ke(L,0),ke(B+1,0),function Be(Pt){return function(bn){return bn.id==Pt}}(+Hn));return void(li.length&&(hi=li[0].find(0))&&dt(So(m.doc,hi.from,hi.to).join(Ce)))}if("false"==Pt.getAttribute("contenteditable"))return;var di=/^(pre|div|p|li|table|br)$/i.test(Pt.nodeName);if(!/^br$/i.test(Pt.nodeName)&&0==Pt.textContent.length)return;di&&it();for(var fi=0;fi<Pt.childNodes.length;fi++)Vt(Pt.childNodes[fi]);/^(pre|p)$/i.test(Pt.nodeName)&&(Ae=!0),di&&(_e=!0)}else 3==Pt.nodeType&&dt(Pt.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Vt(C),C!=F;)C=C.nextSibling,Ae=!1;return oe}(m,Ce,it,_e,Be)),Vt=So(m.doc,ke(_e,0),ke(Be,Ni(m.doc,Be).text.length));dt.length>1&&Vt.length>1;)if(tt(dt)==tt(Vt))dt.pop(),Vt.pop(),Be--;else{if(dt[0]!=Vt[0])break;dt.shift(),Vt.shift(),_e++}for(var Pt=0,bn=0,Hn=dt[0],hi=Vt[0],li=Math.min(Hn.length,hi.length);Pt<li&&Hn.charCodeAt(Pt)==hi.charCodeAt(Pt);)++Pt;for(var di=tt(dt),fi=tt(Vt),ji=Math.min(di.length-(1==dt.length?Pt:0),fi.length-(1==Vt.length?Pt:0));bn<ji&&di.charCodeAt(di.length-bn-1)==fi.charCodeAt(fi.length-bn-1);)++bn;if(1==dt.length&&1==Vt.length&&_e==L.line)for(;Pt&&Pt>L.ch&&di.charCodeAt(di.length-bn-1)==fi.charCodeAt(fi.length-bn-1);)Pt--,bn++;dt[dt.length-1]=di.slice(0,di.length-bn).replace(/^\u200b+/,""),dt[0]=dt[0].slice(Pt).replace(/\u200b+$/,"");var Ir=ke(_e,Pt),Cr=ke(Be,Vt.length?tt(Vt).length-bn:0);return dt.length>1||dt[0]||Je(Ir,Cr)?(Hp(m.doc,dt,Ir,Cr,"+input"),!0):void 0},Ao.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ao.prototype.reset=function(){this.forceCompositionEnd()},Ao.prototype.forceCompositionEnd=function(){!this.composing||(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ao.prototype.readFromDOMSoon=function(){var m=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(m.readDOMTimeout=null,m.composing){if(!m.composing.done)return;m.composing=null}m.updateFromDOM()},80))},Ao.prototype.updateFromDOM=function(){var m=this;(this.cm.isReadOnly()||!this.pollContent())&&Fn(this.cm,function(){return Ft(m.cm)})},Ao.prototype.setUneditable=function(m){m.contentEditable="false"},Ao.prototype.onKeyPress=function(m){0==m.charCode||this.composing||(m.preventDefault(),this.cm.isReadOnly()||Ba(this.cm,Pf)(this.cm,String.fromCharCode(null==m.charCode?m.keyCode:m.charCode),0))},Ao.prototype.readOnlyChanged=function(m){this.div.contentEditable=String("nocursor"!=m)},Ao.prototype.onContextMenu=function(){},Ao.prototype.resetPosition=function(){},Ao.prototype.needsContentAttribute=!0;var Ha=function(m){this.cm=m,this.prevInput="",this.pollingFast=!1,this.polling=new Mn,this.hasSelection=!1,this.composing=null,this.resetting=!1};Ha.prototype.init=function(m){var C=this,F=this,L=this.cm;this.createField(m);var B=this.textarea;function oe(_e){if(!b(L,_e)){if(L.somethingSelected())mg({lineWise:!1,text:L.getSelections()});else{if(!L.options.lineWiseCopyCut)return;var Ce=Jh(L);mg({lineWise:!0,text:Ce.text}),"cut"==_e.type?L.setSelections(Ce.ranges,null,Fs):(F.prevInput="",B.value=Ce.text.join("\n"),It(B))}"cut"==_e.type&&(L.state.cutIncoming=+new Date)}}m.wrapper.insertBefore(this.wrapper,m.wrapper.firstChild),re&&(B.style.width="0px"),nr(B,"input",function(){p&&v>=9&&C.hasSelection&&(C.hasSelection=null),F.poll()}),nr(B,"paste",function(_e){b(L,_e)||Xc(_e,L)||(L.state.pasteIncoming=+new Date,F.fastPoll())}),nr(B,"cut",oe),nr(B,"copy",oe),nr(m.scroller,"paste",function(_e){if(!Fa(m,_e)&&!b(L,_e)){if(!B.dispatchEvent)return L.state.pasteIncoming=+new Date,void F.focus();var Ce=new Event("paste");Ce.clipboardData=_e.clipboardData,B.dispatchEvent(Ce)}}),nr(m.lineSpace,"selectstart",function(_e){Fa(m,_e)||ne(_e)}),nr(B,"compositionstart",function(){var _e=L.getCursor("from");F.composing&&F.composing.range.clear(),F.composing={start:_e,range:L.markText(_e,L.getCursor("to"),{className:"CodeMirror-composing"})}}),nr(B,"compositionend",function(){F.composing&&(F.poll(),F.composing.range.clear(),F.composing=null)})},Ha.prototype.createField=function(m){this.wrapper=X_(),this.textarea=this.wrapper.firstChild},Ha.prototype.screenReaderLabelChanged=function(m){m?this.textarea.setAttribute("aria-label",m):this.textarea.removeAttribute("aria-label")},Ha.prototype.prepareSelection=function(){var m=this.cm,C=m.display,F=m.doc,L=Hr(m);if(m.options.moveInputWithCursor){var B=wo(m,F.sel.primary().head,"div"),oe=C.wrapper.getBoundingClientRect(),_e=C.lineDiv.getBoundingClientRect();L.teTop=Math.max(0,Math.min(C.wrapper.clientHeight-10,B.top+_e.top-oe.top)),L.teLeft=Math.max(0,Math.min(C.wrapper.clientWidth-10,B.left+_e.left-oe.left))}return L},Ha.prototype.showSelection=function(m){var F=this.cm.display;Te(F.cursorDiv,m.cursors),Te(F.selectionDiv,m.selection),null!=m.teTop&&(this.wrapper.style.top=m.teTop+"px",this.wrapper.style.left=m.teLeft+"px")},Ha.prototype.reset=function(m){if(!(this.contextMenuPending||this.composing&&m)){var C=this.cm;if(this.resetting=!0,C.somethingSelected()){this.prevInput="";var F=C.getSelection();this.textarea.value=F,C.state.focused&&It(this.textarea),p&&v>=9&&(this.hasSelection=F)}else m||(this.prevInput=this.textarea.value="",p&&v>=9&&(this.hasSelection=null));this.resetting=!1}},Ha.prototype.getField=function(){return this.textarea},Ha.prototype.supportsTouch=function(){return!1},Ha.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!ie||jt(this.textarea.ownerDocument)!=this.textarea))try{this.textarea.focus()}catch(m){}},Ha.prototype.blur=function(){this.textarea.blur()},Ha.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ha.prototype.receivedFocus=function(){this.slowPoll()},Ha.prototype.slowPoll=function(){var m=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){m.poll(),m.cm.state.focused&&m.slowPoll()})},Ha.prototype.fastPoll=function(){var m=!1,C=this;C.pollingFast=!0,C.polling.set(20,function F(){C.poll()||m?(C.pollingFast=!1,C.slowPoll()):(m=!0,C.polling.set(60,F))})},Ha.prototype.poll=function(){var m=this,C=this.cm,F=this.textarea,L=this.prevInput;if(this.contextMenuPending||this.resetting||!C.state.focused||Kt(F)&&!L&&!this.composing||C.isReadOnly()||C.options.disableInput||C.state.keySeq)return!1;var B=F.value;if(B==L&&!C.somethingSelected())return!1;if(p&&v>=9&&this.hasSelection===B||ae&&/[\uf700-\uf7ff]/.test(B))return C.display.input.reset(),!1;if(C.doc.sel==C.display.selForContextMenu){var oe=B.charCodeAt(0);if(8203==oe&&!L&&(L="\u200b"),8666==oe)return this.reset(),this.cm.execCommand("undo")}for(var _e=0,Ce=Math.min(L.length,B.length);_e<Ce&&L.charCodeAt(_e)==B.charCodeAt(_e);)++_e;return Fn(C,function(){Pf(C,B.slice(_e),L.length-_e,null,m.composing?"*compose":null),B.length>1e3||B.indexOf("\n")>-1?F.value=m.prevInput="":m.prevInput=B,m.composing&&(m.composing.range.clear(),m.composing.range=C.markText(m.composing.start,C.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ha.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ha.prototype.onKeyPress=function(){p&&v>=9&&(this.hasSelection=null),this.fastPoll()},Ha.prototype.onContextMenu=function(m){var C=this,F=C.cm,L=F.display,B=C.textarea;C.contextMenuPending&&C.contextMenuPending();var oe=kt(F,m),_e=L.scroller.scrollTop;if(oe&&!N){F.options.resetSelectionOnContextMenu&&-1==F.doc.sel.contains(oe)&&Ba(F,_l)(F.doc,to(oe),Fs);var dt,Ae=B.style.cssText,Be=C.wrapper.style.cssText,it=C.wrapper.offsetParent.getBoundingClientRect();if(C.wrapper.style.cssText="position: static",B.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(m.clientY-it.top-5)+"px; left: "+(m.clientX-it.left-5)+"px;\n      z-index: 1000; background: "+(p?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",M&&(dt=B.ownerDocument.defaultView.scrollY),L.input.focus(),M&&B.ownerDocument.defaultView.scrollTo(null,dt),L.input.reset(),F.somethingSelected()||(B.value=C.prevInput=" "),C.contextMenuPending=Pt,L.selForContextMenu=F.doc.sel,clearTimeout(L.detectingSelectAll),p&&v>=9&&Vt(),le){Ue(m);var bn=function(){Xi(window,"mouseup",bn),setTimeout(Pt,20)};nr(window,"mouseup",bn)}else setTimeout(Pt,50)}function Vt(){if(null!=B.selectionStart){var Hn=F.somethingSelected(),hi="\u200b"+(Hn?B.value:"");B.value="\u21da",B.value=hi,C.prevInput=Hn?"":"\u200b",B.selectionStart=1,B.selectionEnd=hi.length,L.selForContextMenu=F.doc.sel}}function Pt(){if(C.contextMenuPending==Pt&&(C.contextMenuPending=!1,C.wrapper.style.cssText=Be,B.style.cssText=Ae,p&&v<9&&L.scrollbars.setScrollTop(L.scroller.scrollTop=_e),null!=B.selectionStart)){(!p||p&&v<9)&&Vt();var Hn=0,hi=function(){L.selForContextMenu==F.doc.sel&&0==B.selectionStart&&B.selectionEnd>0&&"\u200b"==C.prevInput?Ba(F,Bp)(F):Hn++<10?L.detectingSelectAll=setTimeout(hi,500):(L.selForContextMenu=null,L.input.reset())};L.detectingSelectAll=setTimeout(hi,200)}}},Ha.prototype.readOnlyChanged=function(m){m||this.reset(),this.textarea.disabled="nocursor"==m,this.textarea.readOnly=!!m},Ha.prototype.setUneditable=function(){},Ha.prototype.needsContentAttribute=!1,function ux(m){var C=m.optionHandlers;function F(L,B,oe,_e){m.defaults[L]=B,oe&&(C[L]=_e?function(Ce,Ae,Be){Be!=Rf&&oe(Ce,Ae,Be)}:oe)}m.defineOption=F,m.Init=Rf,F("value","",function(L,B){return L.setValue(B)},!0),F("mode",null,function(L,B){L.doc.modeOption=B,Od(L)},!0),F("indentUnit",2,Od,!0),F("indentWithTabs",!1),F("smartIndent",!0),F("tabSize",4,function(L){Mf(L),El(L),Ft(L)},!0),F("lineSeparator",null,function(L,B){if(L.doc.lineSep=B,B){var oe=[],_e=L.doc.first;L.doc.iter(function(Ae){for(var Be=0;;){var it=Ae.text.indexOf(B,Be);if(-1==it)break;Be=it+B.length,oe.push(ke(_e,it))}_e++});for(var Ce=oe.length-1;Ce>=0;Ce--)Hp(L.doc,B,oe[Ce],ke(oe[Ce].line,oe[Ce].ch+B.length))}}),F("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(L,B,oe){L.state.specialChars=new RegExp(B.source+(B.test("\t")?"":"|\t"),"g"),oe!=Rf&&L.refresh()}),F("specialCharPlaceholder",xn,function(L){return L.refresh()},!0),F("electricChars",!0),F("inputStyle",ie?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),F("spellcheck",!1,function(L,B){return L.getInputField().spellcheck=B},!0),F("autocorrect",!1,function(L,B){return L.getInputField().autocorrect=B},!0),F("autocapitalize",!1,function(L,B){return L.getInputField().autocapitalize=B},!0),F("rtlMoveVisually",!Me),F("wholeLineUpdateBefore",!0),F("theme","default",function(L){j_(L),Xu(L)},!0),F("keyMap","default",function(L,B,oe){var _e=V_(B),Ce=oe!=Rf&&V_(oe);Ce&&Ce.detach&&Ce.detach(L,_e),_e.attach&&_e.attach(L,Ce||null)}),F("extraKeys",null),F("configureMouse",null),F("lineWrapping",!1,Fy,!0),F("gutters",[],function(L,B){L.display.gutterSpecs=Yu(B,L.options.lineNumbers),Xu(L)},!0),F("fixedGutter",!0,function(L,B){L.display.gutters.style.left=B?Ip(L.display)+"px":"0",L.refresh()},!0),F("coverGutterNextToScrollbar",!1,function(L){return Ji(L)},!0),F("scrollbarStyle","native",function(L){kp(L),Ji(L),L.display.scrollbars.setScrollTop(L.doc.scrollTop),L.display.scrollbars.setScrollLeft(L.doc.scrollLeft)},!0),F("lineNumbers",!1,function(L,B){L.display.gutterSpecs=Yu(L.options.gutters,B),Xu(L)},!0),F("firstLineNumber",1,Xu,!0),F("lineNumberFormatter",function(L){return L},Xu,!0),F("showCursorWhenSelecting",!1,Er,!0),F("resetSelectionOnContextMenu",!0),F("lineWiseCopyCut",!0),F("pasteLinesPerSelection",!0),F("selectionsMayTouch",!1),F("readOnly",!1,function(L,B){"nocursor"==B&&(wa(L),L.display.input.blur()),L.display.input.readOnlyChanged(B)}),F("screenReaderLabel",null,function(L,B){L.display.input.screenReaderLabelChanged(B=""===B?null:B)}),F("disableInput",!1,function(L,B){B||L.display.input.reset()},!0),F("dragDrop",!0,wn),F("allowDropFileTypes",null),F("cursorBlinkRate",530),F("cursorScrollMargin",0),F("cursorHeight",1,Er,!0),F("singleCursorHeightPerLine",!0,Er,!0),F("workTime",100),F("workDelay",100),F("flattenSpans",!0,Mf,!0),F("addModeClass",!1,Mf,!0),F("pollInterval",100),F("undoDepth",200,function(L,B){return L.doc.history.undoDepth=B}),F("historyEventDelay",1250),F("viewportMargin",10,function(L){return L.refresh()},!0),F("maxHighlightLength",1e4,Mf,!0),F("moveInputWithCursor",!0,function(L,B){B||L.display.input.resetPosition()}),F("tabindex",null,function(L,B){return L.display.input.getField().tabIndex=B||""}),F("autofocus",null),F("direction","ltr",function(L,B){return L.doc.setDirection(B)},!0),F("phrases",null)}(Zo),function J_(m){var C=m.optionHandlers,F=m.helpers={};m.prototype={constructor:m,focus:function(){ei(this).focus(),this.display.input.focus()},setOption:function(L,B){var oe=this.options,_e=oe[L];oe[L]==B&&"mode"!=L||(oe[L]=B,C.hasOwnProperty(L)&&Ba(this,C[L])(this,B,_e),Ds(this,"optionChange",this,L))},getOption:function(L){return this.options[L]},getDoc:function(){return this.doc},addKeyMap:function(L,B){this.state.keyMaps[B?"push":"unshift"](V_(L))},removeKeyMap:function(L){for(var B=this.state.keyMaps,oe=0;oe<B.length;++oe)if(B[oe]==L||B[oe].name==L)return B.splice(oe,1),!0},addOverlay:zl(function(L,B){var oe=L.token?L:m.getMode(this.options,L);if(oe.startState)throw new Error("Overlays may not be stateful.");(function nn(m,C,F){for(var L=0,B=F(C);L<m.length&&F(m[L])<=B;)L++;m.splice(L,0,C)})(this.state.overlays,{mode:oe,modeSpec:L,opaque:B&&B.opaque,priority:B&&B.priority||0},function(_e){return _e.priority}),this.state.modeGen++,Ft(this)}),removeOverlay:zl(function(L){for(var B=this.state.overlays,oe=0;oe<B.length;++oe){var _e=B[oe].modeSpec;if(_e==L||"string"==typeof L&&_e.name==L)return B.splice(oe,1),this.state.modeGen++,void Ft(this)}}),indentLine:zl(function(L,B,oe){"string"!=typeof B&&"number"!=typeof B&&(B=null==B?this.options.smartIndent?"smart":"prev":B?"add":"subtract"),Eo(this.doc,L)&&em(this,L,B,oe)}),indentSelection:zl(function(L){for(var B=this.doc.sel.ranges,oe=-1,_e=0;_e<B.length;_e++){var Ce=B[_e];if(Ce.empty())Ce.head.line>oe&&(em(this,Ce.head.line,L,!0),oe=Ce.head.line,_e==this.doc.sel.primIndex&&Wh(this));else{var Ae=Ce.from(),Be=Ce.to(),it=Math.max(oe,Ae.line);oe=Math.min(this.lastLine(),Be.line-(Be.ch?0:1))+1;for(var dt=it;dt<oe;++dt)em(this,dt,L);var Vt=this.doc.sel.ranges;0==Ae.ch&&B.length==Vt.length&&Vt[_e].from().ch>0&&zd(this.doc,_e,new ao(Ae,Vt[_e].to()),Fs)}}}),getTokenAt:function(L,B){return gf(this,L,B)},getLineTokens:function(L,B){return gf(this,ke(L),B,!0)},getTokenTypeAt:function(L){L=Xn(this.doc,L);var Ae,B=ws(this,Ni(this.doc,L.line)),oe=0,_e=(B.length-1)/2,Ce=L.ch;if(0==Ce)Ae=B[2];else for(;;){var Be=oe+_e>>1;if((Be?B[2*Be-1]:0)>=Ce)_e=Be;else{if(!(B[2*Be+1]<Ce)){Ae=B[2*Be+2];break}oe=Be+1}}var it=Ae?Ae.indexOf("overlay "):-1;return it<0?Ae:0==it?null:Ae.slice(0,it-1)},getModeAt:function(L){var B=this.doc.mode;return B.innerMode?m.innerMode(B,this.getTokenAt(L).state).mode:B},getHelper:function(L,B){return this.getHelpers(L,B)[0]},getHelpers:function(L,B){var oe=[];if(!F.hasOwnProperty(B))return oe;var _e=F[B],Ce=this.getModeAt(L);if("string"==typeof Ce[B])_e[Ce[B]]&&oe.push(_e[Ce[B]]);else if(Ce[B])for(var Ae=0;Ae<Ce[B].length;Ae++){var Be=_e[Ce[B][Ae]];Be&&oe.push(Be)}else Ce.helperType&&_e[Ce.helperType]?oe.push(_e[Ce.helperType]):_e[Ce.name]&&oe.push(_e[Ce.name]);for(var it=0;it<_e._global.length;it++){var dt=_e._global[it];dt.pred(Ce,this)&&-1==Sn(oe,dt.val)&&oe.push(dt.val)}return oe},getStateAfter:function(L,B){var oe=this.doc;return Uo(this,(L=Vi(oe,null==L?oe.first+oe.size-1:L))+1,B).state},cursorCoords:function(L,B){var _e=this.doc.sel.primary();return wo(this,null==L?_e.head:"object"==typeof L?Xn(this.doc,L):L?_e.from():_e.to(),B||"page")},charCoords:function(L,B){return al(this,Xn(this.doc,L),B||"page")},coordsChar:function(L,B){return Tu(this,(L=$l(this,L,B||"page")).left,L.top)},lineAtHeight:function(L,B){return L=$l(this,{top:L,left:0},B||"page").top,Ws(this.doc,L+this.display.viewOffset)},heightAtLine:function(L,B,oe){var Ce,_e=!1;if("number"==typeof L){var Ae=this.doc.first+this.doc.size-1;L<this.doc.first?L=this.doc.first:L>Ae&&(L=Ae,_e=!0),Ce=Ni(this.doc,L)}else Ce=L;return da(this,Ce,{top:0,left:0},B||"page",oe||_e).top+(_e?this.doc.height-q(Ce):0)},defaultTextHeight:function(){return Wc(this.display)},defaultCharWidth:function(){return Ja(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(L,B,oe,_e,Ce){var Ae=this.display,Be=(L=wo(this,Xn(this.doc,L))).bottom,it=L.left;if(B.style.position="absolute",B.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(B),Ae.sizer.appendChild(B),"over"==_e)Be=L.top;else if("above"==_e||"near"==_e){var dt=Math.max(Ae.wrapper.clientHeight,this.doc.height),Vt=Math.max(Ae.sizer.clientWidth,Ae.lineSpace.clientWidth);("above"==_e||L.bottom+B.offsetHeight>dt)&&L.top>B.offsetHeight?Be=L.top-B.offsetHeight:L.bottom+B.offsetHeight<=dt&&(Be=L.bottom),it+B.offsetWidth>Vt&&(it=Vt-B.offsetWidth)}B.style.top=Be+"px",B.style.left=B.style.right="","right"==Ce?(it=Ae.sizer.clientWidth-B.offsetWidth,B.style.right="0px"):("left"==Ce?it=0:"middle"==Ce&&(it=(Ae.sizer.clientWidth-B.offsetWidth)/2),B.style.left=it+"px"),oe&&function Gh(m,C){var F=Km(m,C);null!=F.scrollTop&&Rp(m,F.scrollTop),null!=F.scrollLeft&&Du(m,F.scrollLeft)}(this,{left:it,top:Be,right:it+B.offsetWidth,bottom:Be+B.offsetHeight})},triggerOnKeyDown:zl(U_),triggerOnKeyPress:zl(Xd),triggerOnKeyUp:dg,triggerOnMouseDown:zl(ky),execCommand:function(L){if(ug.hasOwnProperty(L))return ug[L].call(null,this)},triggerElectric:zl(function(L){Y_(this,L)}),findPosH:function(L,B,oe,_e){var Ce=1;B<0&&(Ce=-1,B=-B);for(var Ae=Xn(this.doc,L),Be=0;Be<B&&!(Ae=Lf(this.doc,Ae,Ce,oe,_e)).hitSide;++Be);return Ae},moveH:zl(function(L,B){var oe=this;this.extendSelectionsBy(function(_e){return oe.display.shift||oe.doc.extend||_e.empty()?Lf(oe.doc,_e.head,L,B,oe.options.rtlMoveVisually):L<0?_e.from():_e.to()},Le)}),deleteH:zl(function(L,B){var _e=this.doc;this.doc.sel.somethingSelected()?_e.replaceSelection("",null,"+delete"):eh(this,function(Ce){var Ae=Lf(_e,Ce.head,L,B,!1);return L<0?{from:Ae,to:Ce.head}:{from:Ce.head,to:Ae}})}),findPosV:function(L,B,oe,_e){var Ce=1,Ae=_e;B<0&&(Ce=-1,B=-B);for(var Be=Xn(this.doc,L),it=0;it<B;++it){var dt=wo(this,Be,"div");if(null==Ae?Ae=dt.left:dt.left=Ae,(Be=K_(this,dt,Ce,oe)).hitSide)break}return Be},moveV:zl(function(L,B){var oe=this,_e=this.doc,Ce=[],Ae=!this.display.shift&&!_e.extend&&_e.sel.somethingSelected();if(_e.extendSelectionsBy(function(it){if(Ae)return L<0?it.from():it.to();var dt=wo(oe,it.head,"div");null!=it.goalColumn&&(dt.left=it.goalColumn),Ce.push(dt.left);var Vt=K_(oe,dt,L,B);return"page"==B&&it==_e.sel.primary()&&Ed(oe,al(oe,Vt,"div").top-dt.top),Vt},Le),Ce.length)for(var Be=0;Be<_e.sel.ranges.length;Be++)_e.sel.ranges[Be].goalColumn=Ce[Be]}),findWordAt:function(L){var oe=Ni(this.doc,L.line).text,_e=L.ch,Ce=L.ch;if(oe){var Ae=this.getHelper(L,"wordChars");"before"!=L.sticky&&Ce!=oe.length||!_e?++Ce:--_e;for(var Be=oe.charAt(_e),it=pi(Be,Ae)?function(dt){return pi(dt,Ae)}:/\s/.test(Be)?function(dt){return/\s/.test(dt)}:function(dt){return!/\s/.test(dt)&&!pi(dt)};_e>0&&it(oe.charAt(_e-1));)--_e;for(;Ce<oe.length&&it(oe.charAt(Ce));)++Ce}return new ao(ke(L.line,_e),ke(L.line,Ce))},toggleOverwrite:function(L){null!=L&&L==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?_n(this.display.cursorDiv,"CodeMirror-overwrite"):We(this.display.cursorDiv,"CodeMirror-overwrite"),Ds(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==jt(Yn(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:zl(function(L,B){Td(this,L,B)}),getScrollInfo:function(){var L=this.display.scroller;return{left:L.scrollLeft,top:L.scrollTop,height:L.scrollHeight-Cs(this)-this.display.barHeight,width:L.scrollWidth-Cs(this)-this.display.barWidth,clientHeight:ms(this),clientWidth:je(this)}},scrollIntoView:zl(function(L,B){null==L?(L={from:this.doc.sel.primary().head,to:null},null==B&&(B=this.options.cursorScrollMargin)):"number"==typeof L?L={from:ke(L,0),to:null}:null==L.from&&(L={from:L,to:null}),L.to||(L.to=L.from),L.margin=B||0,null!=L.from.line?function Ma(m,C){Qm(m),m.curOp.scrollToPos=C}(this,L):qo(this,L.from,L.to,L.margin)}),setSize:zl(function(L,B){var oe=this,_e=function(Ae){return"number"==typeof Ae||/^\d+$/.test(String(Ae))?Ae+"px":Ae};null!=L&&(this.display.wrapper.style.width=_e(L)),null!=B&&(this.display.wrapper.style.height=_e(B)),this.options.lineWrapping&&Xa(this);var Ce=this.display.viewFrom;this.doc.iter(Ce,this.display.viewTo,function(Ae){if(Ae.widgets)for(var Be=0;Be<Ae.widgets.length;Be++)if(Ae.widgets[Be].noHScroll){In(oe,Ce,"widget");break}++Ce}),this.curOp.forceUpdate=!0,Ds(this,"refresh",this)}),operation:function(L){return Fn(this,L)},startOperation:function(){return tc(this)},endOperation:function(){return Ca(this)},refresh:zl(function(){var L=this.display.cachedTextHeight;Ft(this),this.curOp.forceUpdate=!0,El(this),Td(this,this.doc.scrollLeft,this.doc.scrollTop),Vl(this.display),(null==L||Math.abs(L-Wc(this.display))>.5||this.options.lineWrapping)&&bt(this),Ds(this,"refresh",this)}),swapDoc:zl(function(L){var B=this.doc;return B.cm=null,this.state.selectingText&&this.state.selectingText(),pa(this,L),El(this),this.display.input.reset(),Td(this,L.scrollLeft,L.scrollTop),this.curOp.forceScroll=!0,Or(this,"swapDoc",this,B),B}),phrase:function(L){var B=this.options.phrases;return B&&Object.prototype.hasOwnProperty.call(B,L)?B[L]:L},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Z(m),m.registerHelper=function(L,B,oe){F.hasOwnProperty(L)||(F[L]=m[L]={_global:[]}),F[L][B]=oe},m.registerGlobalHelper=function(L,B,oe,_e){m.registerHelper(L,B,_e),F[L]._global.push({pred:oe,val:_e})}}(Zo);var fx="iter insert remove copy getEditor constructor".split(" ");for(var gg in bc.prototype)bc.prototype.hasOwnProperty(gg)&&Sn(fx,gg)<0&&(Zo.prototype[gg]=function(m){return function(){return m.apply(this.doc,arguments)}}(bc.prototype[gg]));return Z(bc),Zo.inputStyles={textarea:Ha,contenteditable:Ao},Zo.defineMode=function(m){!Zo.defaults.mode&&"null"!=m&&(Zo.defaults.mode=m),Ci.apply(this,arguments)},Zo.defineMIME=function Si(m,C){Di[m]=C},Zo.defineMode("null",function(){return{token:function(m){return m.skipToEnd()}}}),Zo.defineMIME("text/plain","null"),Zo.defineExtension=function(m,C){Zo.prototype[m]=C},Zo.defineDocExtension=function(m,C){bc.prototype[m]=C},Zo.fromTextArea=function xM(m,C){if((C=C?pr(C):{}).value=m.value,!C.tabindex&&m.tabIndex&&(C.tabindex=m.tabIndex),!C.placeholder&&m.placeholder&&(C.placeholder=m.placeholder),null==C.autofocus){var F=jt(m.ownerDocument);C.autofocus=F==m||null!=m.getAttribute("autofocus")&&F==document.body}function L(){m.value=Ce.getValue()}var B;if(m.form&&(nr(m.form,"submit",L),!C.leaveSubmitMethodAlone)){var oe=m.form;B=oe.submit;try{var _e=oe.submit=function(){L(),oe.submit=B,oe.submit(),oe.submit=_e}}catch(Ae){}}C.finishInit=function(Ae){Ae.save=L,Ae.getTextArea=function(){return m},Ae.toTextArea=function(){Ae.toTextArea=isNaN,L(),m.parentNode.removeChild(Ae.getWrapperElement()),m.style.display="",m.form&&(Xi(m.form,"submit",L),!C.leaveSubmitMethodAlone&&"function"==typeof m.form.submit&&(m.form.submit=B))}},m.style.display="none";var Ce=Zo(function(Ae){return m.parentNode.insertBefore(Ae,m.nextSibling)},C);return Ce},function dx(m){m.off=Xi,m.on=nr,m.wheelEventPixels=hu,m.Doc=bc,m.splitLines=St,m.countColumn=Li,m.findColumn=kn,m.isWordChar=ki,m.Pass=ti,m.signal=Ds,m.Line=xe,m.changeEnd=Ku,m.scrollbarModel=Js,m.Pos=ke,m.cmpPos=Je,m.modes=Qn,m.mimeModes=Di,m.resolveMode=Ei,m.getMode=Mr,m.modeExtensions=Oi,m.extendMode=Yr,m.copyState=Br,m.startState=rl,m.innerMode=ia,m.commands=ug,m.keyMap=bi,m.keyName=sx,m.isModifierKey=ix,m.lookupKey=Wp,m.normalizeKeyMap=vM,m.StringStream=Qs,m.SharedTextMarker=Ef,m.TextMarker=gh,m.LineWidget=jd,m.e_preventDefault=ne,m.e_stopPropagation=fe,m.e_stop=Ue,m.addClass=_n,m.contains=Zn,m.rmClass=We,m.keyNames=Qu}(Zo),Zo.version="5.65.9",Zo}()},166:(K,U,D)=>{!function(y){"use strict";y.defineMode("javascript",function(o,d){var re,ce,g=o.indentUnit,p=d.statementIndent,v=d.jsonld,M=d.json||v,T=!1!==d.trackScope,I=d.typescript,P=d.wordCharacters||/[\w$\xa1-\uffff]/,N=function(){function ke(Xn){return{type:Xn,style:"keyword"}}var Je=ke("keyword a"),mn=ke("keyword b"),En=ke("keyword c"),Dr=ke("keyword d"),ps=ke("operator"),Vi={type:"atom",style:"atom"};return{if:ke("if"),while:Je,with:Je,else:mn,do:mn,try:mn,finally:mn,return:Dr,break:Dr,continue:Dr,new:ke("new"),delete:En,void:En,throw:En,debugger:ke("debugger"),var:ke("var"),const:ke("var"),let:ke("var"),function:ke("function"),catch:ke("catch"),for:ke("for"),switch:ke("switch"),case:ke("case"),default:ke("default"),in:ps,typeof:ps,instanceof:ps,true:Vi,false:Vi,null:Vi,undefined:Vi,NaN:Vi,Infinity:Vi,this:ke("this"),class:ke("class"),super:ke("atom"),yield:En,export:ke("export"),import:ke("import"),extends:En,await:En}}(),V=/[+\-*&%=<>!?|~^@]/,J=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function ie(ke,Je,mn){return re=ke,ce=mn,Je}function ae(ke,Je){var mn=ke.next();if('"'==mn||"'"==mn)return Je.tokenize=function we(ke){return function(Je,mn){var Dr,En=!1;if(v&&"@"==Je.peek()&&Je.match(J))return mn.tokenize=ae,ie("jsonld-keyword","meta");for(;null!=(Dr=Je.next())&&(Dr!=ke||En);)En=!En&&"\\"==Dr;return En||(mn.tokenize=ae),ie("string","string")}}(mn),Je.tokenize(ke,Je);if("."==mn&&ke.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return ie("number","number");if("."==mn&&ke.match(".."))return ie("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(mn))return ie(mn);if("="==mn&&ke.eat(">"))return ie("=>","operator");if("0"==mn&&ke.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return ie("number","number");if(/\d/.test(mn))return ke.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),ie("number","number");if("/"==mn)return ke.eat("*")?(Je.tokenize=Me,Me(ke,Je)):ke.eat("/")?(ke.skipToEnd(),ie("comment","comment")):ka(ke,Je,1)?(function W(ke){for(var mn,Je=!1,En=!1;null!=(mn=ke.next());){if(!Je){if("/"==mn&&!En)return;"["==mn?En=!0:En&&"]"==mn&&(En=!1)}Je=!Je&&"\\"==mn}}(ke),ke.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),ie("regexp","string-2")):(ke.eat("="),ie("operator","operator",ke.current()));if("`"==mn)return Je.tokenize=Pe,Pe(ke,Je);if("#"==mn&&"!"==ke.peek())return ke.skipToEnd(),ie("meta","meta");if("#"==mn&&ke.eatWhile(P))return ie("variable","property");if("<"==mn&&ke.match("!--")||"-"==mn&&ke.match("->")&&!/\S/.test(ke.string.slice(0,ke.start)))return ke.skipToEnd(),ie("comment","comment");if(V.test(mn))return(">"!=mn||!Je.lexical||">"!=Je.lexical.type)&&(ke.eat("=")?("!"==mn||"="==mn)&&ke.eat("="):/[<>*+\-|&?]/.test(mn)&&(ke.eat(mn),">"==mn&&ke.eat(mn))),"?"==mn&&ke.eat(".")?ie("."):ie("operator","operator",ke.current());if(P.test(mn)){ke.eatWhile(P);var En=ke.current();if("."!=Je.lastType){if(N.propertyIsEnumerable(En)){var Dr=N[En];return ie(Dr.type,Dr.style,En)}if("async"==En&&ke.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return ie("async","keyword",En)}return ie("variable","variable",En)}}function Me(ke,Je){for(var En,mn=!1;En=ke.next();){if("/"==En&&mn){Je.tokenize=ae;break}mn="*"==En}return ie("comment","comment")}function Pe(ke,Je){for(var En,mn=!1;null!=(En=ke.next());){if(!mn&&("`"==En||"$"==En&&ke.eat("{"))){Je.tokenize=ae;break}mn=!mn&&"\\"==En}return ie("quasi","string-2",ke.current())}function le(ke,Je){Je.fatArrowAt&&(Je.fatArrowAt=null);var mn=ke.string.indexOf("=>",ke.start);if(!(mn<0)){if(I){var En=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(ke.string.slice(ke.start,mn));En&&(mn=En.index)}for(var Dr=0,ps=!1,Vi=mn-1;Vi>=0;--Vi){var Xn=ke.string.charAt(Vi),Pa="([{}])".indexOf(Xn);if(Pa>=0&&Pa<3){if(!Dr){++Vi;break}if(0==--Dr){"("==Xn&&(ps=!0);break}}else if(Pa>=3&&Pa<6)++Dr;else if(P.test(Xn))ps=!0;else if(/["'\/`]/.test(Xn))for(;;--Vi){if(0==Vi)return;if(ke.string.charAt(Vi-1)==Xn&&"\\"!=ke.string.charAt(Vi-2)){Vi--;break}}else if(ps&&!Dr){++Vi;break}}ps&&!Dr&&(Je.fatArrowAt=Vi)}}var st={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function We(ke,Je,mn,En,Dr,ps){this.indented=ke,this.column=Je,this.type=mn,this.prev=Dr,this.info=ps,null!=En&&(this.align=En)}function at(ke,Je){if(!T)return!1;for(var mn=ke.localVars;mn;mn=mn.next)if(mn.name==Je)return!0;for(var En=ke.context;En;En=En.prev)for(mn=En.vars;mn;mn=mn.next)if(mn.name==Je)return!0}function Te(ke,Je,mn,En,Dr){var ps=ke.cc;for(qe.state=ke,qe.stream=Dr,qe.marked=null,qe.cc=ps,qe.style=Je,ke.lexical.hasOwnProperty("align")||(ke.lexical.align=!0);;)if((ps.length?ps.pop():M?cr:ti)(mn,En)){for(;ps.length&&ps[ps.length-1].lex;)ps.pop()();return qe.marked?qe.marked:"variable"==mn&&at(ke,En)?"variable-2":Je}}var qe={state:null,column:null,marked:null,cc:null};function Bt(){for(var ke=arguments.length-1;ke>=0;ke--)qe.cc.push(arguments[ke])}function Ze(){return Bt.apply(null,arguments),!0}function Zn(ke,Je){for(var mn=Je;mn;mn=mn.next)if(mn.name==ke)return!0;return!1}function jt(ke){var Je=qe.state;if(qe.marked="def",T){if(Je.context)if("var"==Je.lexical.info&&Je.context&&Je.context.block){var mn=_n(ke,Je.context);if(null!=mn)return void(Je.context=mn)}else if(!Zn(ke,Je.localVars))return void(Je.localVars=new Yn(ke,Je.localVars));d.globalVars&&!Zn(ke,Je.globalVars)&&(Je.globalVars=new Yn(ke,Je.globalVars))}}function _n(ke,Je){if(Je){if(Je.block){var mn=_n(ke,Je.prev);return mn?mn==Je.prev?Je:new It(mn,Je.vars,!0):null}return Zn(ke,Je.vars)?Je:new It(Je.prev,new Yn(ke,Je.vars),!1)}return null}function Dt(ke){return"public"==ke||"private"==ke||"protected"==ke||"abstract"==ke||"readonly"==ke}function It(ke,Je,mn){this.prev=ke,this.vars=Je,this.block=mn}function Yn(ke,Je){this.name=ke,this.next=Je}var ei=new Yn("this",new Yn("arguments",null));function Xt(){qe.state.context=new It(qe.state.context,qe.state.localVars,!1),qe.state.localVars=ei}function pr(){qe.state.context=new It(qe.state.context,qe.state.localVars,!0),qe.state.localVars=null}function Li(){qe.state.localVars=qe.state.context.vars,qe.state.context=qe.state.context.prev}function Mn(ke,Je){var mn=function(){var En=qe.state,Dr=En.indented;if("stat"==En.lexical.type)Dr=En.lexical.indented;else for(var ps=En.lexical;ps&&")"==ps.type&&ps.align;ps=ps.prev)Dr=ps.indented;En.lexical=new We(Dr,qe.stream.column(),ke,null,En.lexical,Je)};return mn.lex=!0,mn}function Sn(){var ke=qe.state;ke.lexical.prev&&(")"==ke.lexical.type&&(ke.indented=ke.lexical.indented),ke.lexical=ke.lexical.prev)}function zi(ke){return function Je(mn){return mn==ke?Ze():";"==ke||"}"==mn||")"==mn||"]"==mn?Bt():Ze(Je)}}function ti(ke,Je){return"var"==ke?Ze(Mn("vardef",Je),gt,zi(";"),Sn):"keyword a"==ke?Ze(Mn("form"),kn,ti,Sn):"keyword b"==ke?Ze(Mn("form"),ti,Sn):"keyword d"==ke?qe.stream.match(/^\s*$/,!1)?Ze():Ze(Mn("stat"),lt,zi(";"),Sn):"debugger"==ke?Ze(zi(";")):"{"==ke?Ze(Mn("}"),pr,mo,Sn,Li):";"==ke?Ze():"if"==ke?("else"==qe.state.lexical.info&&qe.state.cc[qe.state.cc.length-1]==Sn&&qe.state.cc.pop()(),Ze(Mn("form"),kn,ti,Sn,St)):"function"==ke?Ze(Wn):"for"==ke?Ze(Mn("form"),pr,Kt,ti,Li,Sn):"class"==ke||I&&"interface"==Je?(qe.marked="keyword",Ze(Mn("form","class"==ke?ke:Je),Ei,Sn)):"variable"==ke?I&&"declare"==Je?(qe.marked="keyword",Ze(ti)):I&&("module"==Je||"enum"==Je||"type"==Je)&&qe.stream.match(/^\s*\w/,!1)?(qe.marked="keyword","enum"==Je?Ze(ts):"type"==Je?Ze(Di,zi("operator"),Xi,zi(";")):Ze(Mn("form"),xt,zi("{"),Mn("}"),mo,Sn,Sn)):I&&"namespace"==Je?(qe.marked="keyword",Ze(Mn("form"),cr,ti,Sn)):I&&"abstract"==Je?(qe.marked="keyword",Ze(ti)):Ze(Mn("stat"),Gs):"switch"==ke?Ze(Mn("form"),kn,zi("{"),Mn("}","switch"),pr,mo,Sn,Sn,Li):"case"==ke?Ze(cr,zi(":")):"default"==ke?Ze(zi(":")):"catch"==ke?Ze(Mn("form"),Xt,Fs,ti,Sn,Li):"export"==ke?Ze(Mn("stat"),Br,Sn):"import"==ke?Ze(Mn("stat"),rl,Sn):"async"==ke?Ze(ti):"@"==Je?Ze(cr,ti):Bt(Mn("stat"),cr,zi(";"),Sn)}function Fs(ke){if("("==ke)return Ze(Ci,zi(")"))}function cr(ke,Je){return dn(ke,Je,!1)}function Le(ke,Je){return dn(ke,Je,!0)}function kn(ke){return"("!=ke?Bt():Ze(Mn(")"),lt,zi(")"),Sn)}function dn(ke,Je,mn){if(qe.state.fatArrowAt==qe.stream.start){var En=mn?ui:rn;if("("==ke)return Ze(Xt,Mn(")"),es(Ci,")"),Sn,zi("=>"),En,Li);if("variable"==ke)return Bt(Xt,xt,zi("=>"),En,Li)}var Dr=mn?Lt:tt;return st.hasOwnProperty(ke)?Ze(Dr):"function"==ke?Ze(Wn,Dr):"class"==ke||I&&"interface"==Je?(qe.marked="keyword",Ze(Mn("form"),Si,Sn)):"keyword c"==ke||"async"==ke?Ze(mn?Le:cr):"("==ke?Ze(Mn(")"),lt,zi(")"),Sn,Dr):"operator"==ke||"spread"==ke?Ze(mn?Le:cr):"["==ke?Ze(Mn("]"),la,Sn,Dr):"{"==ke?Ps(ro,"}",null,Dr):"quasi"==ke?Bt(nn,Dr):"new"==ke?Ze(function ki(ke){return function(Je){return"."==Je?Ze(ke?ur:pi):"variable"==Je&&I?Ze(De,ke?Lt:tt):Bt(ke?Le:cr)}}(mn)):Ze()}function lt(ke){return ke.match(/[;\}\)\],]/)?Bt():Bt(cr)}function tt(ke,Je){return","==ke?Ze(lt):Lt(ke,Je,!1)}function Lt(ke,Je,mn){var En=0==mn?tt:Lt,Dr=0==mn?cr:Le;if("=>"==ke)return Ze(Xt,mn?ui:rn,Li);if("operator"==ke)return/\+\+|--/.test(Je)||I&&"!"==Je?Ze(En):I&&"<"==Je&&qe.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?Ze(Mn(">"),es(Xi,">"),Sn,En):"?"==Je?Ze(cr,zi(":"),Dr):Ze(Dr);if("quasi"==ke)return Bt(nn,En);if(";"!=ke){if("("==ke)return Ps(Le,")","call",En);if("."==ke)return Ze(wr,En);if("["==ke)return Ze(Mn("]"),lt,zi("]"),Sn,En);if(I&&"as"==Je)return qe.marked="keyword",Ze(Xi,En);if("regexp"==ke)return qe.state.lastType=qe.marked="operator",qe.stream.backUp(qe.stream.pos-qe.stream.start-1),Ze(Dr)}}function nn(ke,Je){return"quasi"!=ke?Bt():"${"!=Je.slice(Je.length-2)?Ze(nn):Ze(lt,Ln)}function Ln(ke){if("}"==ke)return qe.marked="string-2",qe.state.tokenize=Pe,Ze(nn)}function rn(ke){return le(qe.stream,qe.state),Bt("{"==ke?ti:cr)}function ui(ke){return le(qe.stream,qe.state),Bt("{"==ke?ti:Le)}function pi(ke,Je){if("target"==Je)return qe.marked="keyword",Ze(tt)}function ur(ke,Je){if("target"==Je)return qe.marked="keyword",Ze(Lt)}function Gs(ke){return":"==ke?Ze(Sn,ti):Bt(tt,zi(";"),Sn)}function wr(ke){if("variable"==ke)return qe.marked="property",Ze()}function ro(ke,Je){return"async"==ke?(qe.marked="property",Ze(ro)):"variable"==ke||"keyword"==qe.style?(qe.marked="property","get"==Je||"set"==Je?Ze(ha):(I&&qe.state.fatArrowAt==qe.stream.start&&(mn=qe.stream.match(/^\s*:\s*/,!1))&&(qe.state.fatArrowAt=qe.stream.pos+mn[0].length),Ze(Qo))):"number"==ke||"string"==ke?(qe.marked=v?"property":qe.style+" property",Ze(Qo)):"jsonld-keyword"==ke?Ze(Qo):I&&Dt(Je)?(qe.marked="keyword",Ze(ro)):"["==ke?Ze(cr,aa,zi("]"),Qo):"spread"==ke?Ze(Le,Qo):"*"==Je?(qe.marked="keyword",Ze(ro)):":"==ke?Bt(Qo):void 0;var mn}function ha(ke){return"variable"!=ke?Bt(Qo):(qe.marked="property",Ze(Wn))}function Qo(ke){return":"==ke?Ze(Le):"("==ke?Bt(Wn):void 0}function es(ke,Je,mn){function En(Dr,ps){if(mn?mn.indexOf(Dr)>-1:","==Dr){var Vi=qe.state.lexical;return"call"==Vi.info&&(Vi.pos=(Vi.pos||0)+1),Ze(function(Xn,Pa){return Xn==Je||Pa==Je?Bt():Bt(ke)},En)}return Dr==Je||ps==Je?Ze():mn&&mn.indexOf(";")>-1?Bt(ke):Ze(zi(Je))}return function(Dr,ps){return Dr==Je||ps==Je?Ze():Bt(ke,En)}}function Ps(ke,Je,mn){for(var En=3;En<arguments.length;En++)qe.cc.push(arguments[En]);return Ze(Mn(Je,mn),es(ke,Je),Sn)}function mo(ke){return"}"==ke?Ze():Bt(ti,mo)}function aa(ke,Je){if(I){if(":"==ke)return Ze(Xi);if("?"==Je)return Ze(aa)}}function ja(ke,Je){if(I&&(":"==ke||"in"==Je))return Ze(Xi)}function nr(ke){if(I&&":"==ke)return qe.stream.match(/^\s*\w+\s+is\b/,!1)?Ze(cr,qu,Xi):Ze(Xi)}function qu(ke,Je){if("is"==Je)return qe.marked="keyword",Ze()}function Xi(ke,Je){return"keyof"==Je||"typeof"==Je||"infer"==Je||"readonly"==Je?(qe.marked="keyword",Ze("typeof"==Je?Le:Xi)):"variable"==ke||"void"==Je?(qe.marked="type",Ze(fe)):"|"==Je||"&"==Je?Ze(Xi):"string"==ke||"number"==ke||"atom"==ke?Ze(fe):"["==ke?Ze(Mn("]"),es(Xi,"]",","),Sn,fe):"{"==ke?Ze(Mn("}"),b,Sn,fe):"("==ke?Ze(es(ne,")"),Ds,fe):"<"==ke?Ze(es(Xi,">"),Xi):"quasi"==ke?Bt(H,fe):void 0}function Ds(ke){if("=>"==ke)return Ze(Xi)}function b(ke){return ke.match(/[\}\)\]]/)?Ze():","==ke||";"==ke?Ze(b):Bt(k,b)}function k(ke,Je){return"variable"==ke||"keyword"==qe.style?(qe.marked="property",Ze(k)):"?"==Je||"number"==ke||"string"==ke?Ze(k):":"==ke?Ze(Xi):"["==ke?Ze(zi("variable"),ja,zi("]"),k):"("==ke?Bt(Qn,k):ke.match(/[;\}\)\],]/)?void 0:Ze()}function H(ke,Je){return"quasi"!=ke?Bt():"${"!=Je.slice(Je.length-2)?Ze(H):Ze(Xi,Z)}function Z(ke){if("}"==ke)return qe.marked="string-2",qe.state.tokenize=Pe,Ze(H)}function ne(ke,Je){return"variable"==ke&&qe.stream.match(/^\s*[?:]/,!1)||"?"==Je?Ze(ne):":"==ke?Ze(Xi):"spread"==ke?Ze(ne):Bt(Xi)}function fe(ke,Je){return"<"==Je?Ze(Mn(">"),es(Xi,">"),Sn,fe):"|"==Je||"."==ke||"&"==Je?Ze(Xi):"["==ke?Ze(Xi,zi("]"),fe):"extends"==Je||"implements"==Je?(qe.marked="keyword",Ze(Xi)):"?"==Je?Ze(Xi,zi(":"),Xi):void 0}function De(ke,Je){if("<"==Je)return Ze(Mn(">"),es(Xi,">"),Sn,fe)}function Ue(){return Bt(Xi,Qe)}function Qe(ke,Je){if("="==Je)return Ze(Xi)}function gt(ke,Je){return"enum"==Je?(qe.marked="keyword",Ze(ts)):Bt(xt,aa,Ht,en)}function xt(ke,Je){return I&&Dt(Je)?(qe.marked="keyword",Ze(xt)):"variable"==ke?(jt(Je),Ze()):"spread"==ke?Ze(xt):"["==ke?Ps(Ct,"]"):"{"==ke?Ps(Jt,"}"):void 0}function Jt(ke,Je){return"variable"!=ke||qe.stream.match(/^\s*:/,!1)?("variable"==ke&&(qe.marked="property"),"spread"==ke?Ze(xt):"}"==ke?Bt():"["==ke?Ze(cr,zi("]"),zi(":"),Jt):Ze(zi(":"),xt,Ht)):(jt(Je),Ze(Ht))}function Ct(){return Bt(xt,Ht)}function Ht(ke,Je){if("="==Je)return Ze(Le)}function en(ke){if(","==ke)return Ze(gt)}function St(ke,Je){if("keyword b"==ke&&"else"==Je)return Ze(Mn("form","else"),ti,Sn)}function Kt(ke,Je){return"await"==Je?Ze(Kt):"("==ke?Ze(Mn(")"),gn,Sn):void 0}function gn(ke){return"var"==ke?Ze(gt,sn):"variable"==ke?Ze(sn):Bt(sn)}function sn(ke,Je){return")"==ke?Ze():";"==ke?Ze(sn):"in"==Je||"of"==Je?(qe.marked="keyword",Ze(cr,sn)):Bt(cr,sn)}function Wn(ke,Je){return"*"==Je?(qe.marked="keyword",Ze(Wn)):"variable"==ke?(jt(Je),Ze(Wn)):"("==ke?Ze(Xt,Mn(")"),es(Ci,")"),Sn,nr,ti,Li):I&&"<"==Je?Ze(Mn(">"),es(Ue,">"),Sn,Wn):void 0}function Qn(ke,Je){return"*"==Je?(qe.marked="keyword",Ze(Qn)):"variable"==ke?(jt(Je),Ze(Qn)):"("==ke?Ze(Xt,Mn(")"),es(Ci,")"),Sn,nr,Li):I&&"<"==Je?Ze(Mn(">"),es(Ue,">"),Sn,Qn):void 0}function Di(ke,Je){return"keyword"==ke||"variable"==ke?(qe.marked="type",Ze(Di)):"<"==Je?Ze(Mn(">"),es(Ue,">"),Sn):void 0}function Ci(ke,Je){return"@"==Je&&Ze(cr,Ci),"spread"==ke?Ze(Ci):I&&Dt(Je)?(qe.marked="keyword",Ze(Ci)):I&&"this"==ke?Ze(aa,Ht):Bt(xt,aa,Ht)}function Si(ke,Je){return"variable"==ke?Ei(ke,Je):Mr(ke,Je)}function Ei(ke,Je){if("variable"==ke)return jt(Je),Ze(Mr)}function Mr(ke,Je){return"<"==Je?Ze(Mn(">"),es(Ue,">"),Sn,Mr):"extends"==Je||"implements"==Je||I&&","==ke?("implements"==Je&&(qe.marked="keyword"),Ze(I?Xi:cr,Mr)):"{"==ke?Ze(Mn("}"),Oi,Sn):void 0}function Oi(ke,Je){return"async"==ke||"variable"==ke&&("static"==Je||"get"==Je||"set"==Je||I&&Dt(Je))&&qe.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(qe.marked="keyword",Ze(Oi)):"variable"==ke||"keyword"==qe.style?(qe.marked="property",Ze(Yr,Oi)):"number"==ke||"string"==ke?Ze(Yr,Oi):"["==ke?Ze(cr,aa,zi("]"),Yr,Oi):"*"==Je?(qe.marked="keyword",Ze(Oi)):I&&"("==ke?Bt(Qn,Oi):";"==ke||","==ke?Ze(Oi):"}"==ke?Ze():"@"==Je?Ze(cr,Oi):void 0}function Yr(ke,Je){if("!"==Je||"?"==Je)return Ze(Yr);if(":"==ke)return Ze(Xi,Ht);if("="==Je)return Ze(Le);var mn=qe.state.lexical.prev;return Bt(mn&&"interface"==mn.info?Qn:Wn)}function Br(ke,Je){return"*"==Je?(qe.marked="keyword",Ze(Os,zi(";"))):"default"==Je?(qe.marked="keyword",Ze(cr,zi(";"))):"{"==ke?Ze(es(ia,"}"),Os,zi(";")):Bt(ti)}function ia(ke,Je){return"as"==Je?(qe.marked="keyword",Ze(zi("variable"))):"variable"==ke?Bt(Le,ia):void 0}function rl(ke){return"string"==ke?Ze():"("==ke?Bt(cr):"."==ke?Bt(tt):Bt(Qs,Ni,Os)}function Qs(ke,Je){return"{"==ke?Ps(Qs,"}"):("variable"==ke&&jt(Je),"*"==Je&&(qe.marked="keyword"),Ze(So))}function Ni(ke){if(","==ke)return Ze(Qs,Ni)}function So(ke,Je){if("as"==Je)return qe.marked="keyword",Ze(Qs)}function Os(ke,Je){if("from"==Je)return qe.marked="keyword",Ze(cr)}function la(ke){return"]"==ke?Ze():Bt(es(Le,"]"))}function ts(){return Bt(Mn("form"),xt,zi("{"),Mn("}"),es(Ws,"}"),Sn,Sn)}function Ws(){return Bt(xt,Ht)}function ka(ke,Je,mn){return Je.tokenize==ae&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Je.lastType)||"quasi"==Je.lastType&&/\{\s*$/.test(ke.string.slice(0,ke.pos-(mn||0)))}return Xt.lex=pr.lex=!0,Li.lex=!0,Sn.lex=!0,{startState:function(ke){var Je={tokenize:ae,lastType:"sof",cc:[],lexical:new We((ke||0)-g,0,"block",!1),localVars:d.localVars,context:d.localVars&&new It(null,null,!1),indented:ke||0};return d.globalVars&&"object"==typeof d.globalVars&&(Je.globalVars=d.globalVars),Je},token:function(ke,Je){if(ke.sol()&&(Je.lexical.hasOwnProperty("align")||(Je.lexical.align=!1),Je.indented=ke.indentation(),le(ke,Je)),Je.tokenize!=Me&&ke.eatSpace())return null;var mn=Je.tokenize(ke,Je);return"comment"==re?mn:(Je.lastType="operator"!=re||"++"!=ce&&"--"!=ce?re:"incdec",Te(Je,mn,re,ce,ke))},indent:function(ke,Je){if(ke.tokenize==Me||ke.tokenize==Pe)return y.Pass;if(ke.tokenize!=ae)return 0;var Dr,mn=Je&&Je.charAt(0),En=ke.lexical;if(!/^\s*else\b/.test(Je))for(var ps=ke.cc.length-1;ps>=0;--ps){var Vi=ke.cc[ps];if(Vi==Sn)En=En.prev;else if(Vi!=St&&Vi!=Li)break}for(;("stat"==En.type||"form"==En.type)&&("}"==mn||(Dr=ke.cc[ke.cc.length-1])&&(Dr==tt||Dr==Lt)&&!/^[,\.=+\-*:?[\(]/.test(Je));)En=En.prev;p&&")"==En.type&&"stat"==En.prev.type&&(En=En.prev);var Xn=En.type,Pa=mn==Xn;return"vardef"==Xn?En.indented+("operator"==ke.lastType||","==ke.lastType?En.info.length+1:0):"form"==Xn&&"{"==mn?En.indented:"form"==Xn?En.indented+g:"stat"==Xn?En.indented+(function Eo(ke,Je){return"operator"==ke.lastType||","==ke.lastType||V.test(Je.charAt(0))||/[,.]/.test(Je.charAt(0))}(ke,Je)?p||g:0):"switch"!=En.info||Pa||0==d.doubleIndentSwitch?En.align?En.column+(Pa?0:1):En.indented+(Pa?0:g):En.indented+(/^(?:case|default)\b/.test(Je)?g:2*g)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:M?null:"/*",blockCommentEnd:M?null:"*/",blockCommentContinue:M?null:" * ",lineComment:M?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:M?"json":"javascript",jsonldMode:v,jsonMode:M,expressionAllowed:ka,skipExpression:function(ke){Te(ke,"atom","atom","true",new y.StringStream("",2,null))}}}),y.registerHelper("wordChars","javascript",/[\w$]/),y.defineMIME("text/javascript","javascript"),y.defineMIME("text/ecmascript","javascript"),y.defineMIME("application/javascript","javascript"),y.defineMIME("application/x-javascript","javascript"),y.defineMIME("application/ecmascript","javascript"),y.defineMIME("application/json",{name:"javascript",json:!0}),y.defineMIME("application/x-json",{name:"javascript",json:!0}),y.defineMIME("application/manifest+json",{name:"javascript",json:!0}),y.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),y.defineMIME("text/typescript",{name:"javascript",typescript:!0}),y.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(D(266))},391:(K,U,D)=>{D(200),D(879),D(378),K.exports=D(713)},713:(K,U,D)=>{var y=D(259);K.exports=y,function(o){o.ui=o.ui||{},o.ui.version="1.12.1";var b,g=0,p=Array.prototype.slice;o.cleanData=(b=o.cleanData,function(k){var H,Z,ne;for(ne=0;null!=(Z=k[ne]);ne++)try{(H=o._data(Z,"events"))&&H.remove&&o(Z).triggerHandler("remove")}catch(fe){}b(k)}),o.widget=function(b,k,H){var Z,ne,fe,De={},Ue=b.split(".")[0],Qe=Ue+"-"+(b=b.split(".")[1]);return H||(H=k,k=o.Widget),o.isArray(H)&&(H=o.extend.apply(null,[{}].concat(H))),o.expr[":"][Qe.toLowerCase()]=function(gt){return!!o.data(gt,Qe)},o[Ue]=o[Ue]||{},Z=o[Ue][b],ne=o[Ue][b]=function(gt,xt){if(!this._createWidget)return new ne(gt,xt);arguments.length&&this._createWidget(gt,xt)},o.extend(ne,Z,{version:H.version,_proto:o.extend({},H),_childConstructors:[]}),(fe=new k).options=o.widget.extend({},fe.options),o.each(H,function(gt,xt){De[gt]=o.isFunction(xt)?function(){function Jt(){return k.prototype[gt].apply(this,arguments)}function Ct(Ht){return k.prototype[gt].apply(this,Ht)}return function(){var St,Ht=this._super,en=this._superApply;return this._super=Jt,this._superApply=Ct,St=xt.apply(this,arguments),this._super=Ht,this._superApply=en,St}}():xt}),ne.prototype=o.widget.extend(fe,{widgetEventPrefix:Z&&fe.widgetEventPrefix||b},De,{constructor:ne,namespace:Ue,widgetName:b,widgetFullName:Qe}),Z?(o.each(Z._childConstructors,function(gt,xt){var Jt=xt.prototype;o.widget(Jt.namespace+"."+Jt.widgetName,ne,xt._proto)}),delete Z._childConstructors):k._childConstructors.push(ne),o.widget.bridge(b,ne),ne},o.widget.extend=function(b){for(var ne,fe,k=p.call(arguments,1),H=0,Z=k.length;H<Z;H++)for(ne in k[H])fe=k[H][ne],k[H].hasOwnProperty(ne)&&void 0!==fe&&(b[ne]=o.isPlainObject(fe)?o.isPlainObject(b[ne])?o.widget.extend({},b[ne],fe):o.widget.extend({},fe):fe);return b},o.widget.bridge=function(b,k){var H=k.prototype.widgetFullName||b;o.fn[b]=function(Z){var ne="string"==typeof Z,fe=p.call(arguments,1),De=this;return ne?this.length||"instance"!==Z?this.each(function(){var Ue,Qe=o.data(this,H);return"instance"===Z?(De=Qe,!1):Qe?o.isFunction(Qe[Z])&&"_"!==Z.charAt(0)?(Ue=Qe[Z].apply(Qe,fe))!==Qe&&void 0!==Ue?(De=Ue&&Ue.jquery?De.pushStack(Ue.get()):Ue,!1):void 0:o.error("no such method '"+Z+"' for "+b+" widget instance"):o.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+Z+"'")}):De=void 0:(fe.length&&(Z=o.widget.extend.apply(null,[Z].concat(fe))),this.each(function(){var Ue=o.data(this,H);Ue?(Ue.option(Z||{}),Ue._init&&Ue._init()):o.data(this,H,new k(Z,this))})),De}},o.Widget=function(){},o.Widget._childConstructors=[],o.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(b,k){k=o(k||this.defaultElement||this)[0],this.element=o(k),this.uuid=g++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=o(),this.hoverable=o(),this.focusable=o(),this.classesElementLookup={},k!==this&&(o.data(k,this.widgetFullName,this),this._on(!0,this.element,{remove:function(H){H.target===k&&this.destroy()}}),this.document=o(k.style?k.ownerDocument:k.document||k),this.window=o(this.document[0].defaultView||this.document[0].parentWindow)),this.options=o.widget.extend({},this.options,this._getCreateOptions(),b),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:o.noop,_create:o.noop,_init:o.noop,destroy:function(){var b=this;this._destroy(),o.each(this.classesElementLookup,function(k,H){b._removeClass(H,k)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:o.noop,widget:function(){return this.element},option:function(b,k){var Z,ne,fe,H=b;if(0===arguments.length)return o.widget.extend({},this.options);if("string"==typeof b)if(H={},Z=b.split("."),b=Z.shift(),Z.length){for(ne=H[b]=o.widget.extend({},this.options[b]),fe=0;fe<Z.length-1;fe++)ne[Z[fe]]=ne[Z[fe]]||{},ne=ne[Z[fe]];if(b=Z.pop(),1===arguments.length)return void 0===ne[b]?null:ne[b];ne[b]=k}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];H[b]=k}return this._setOptions(H),this},_setOptions:function(b){var k;for(k in b)this._setOption(k,b[k]);return this},_setOption:function(b,k){return"classes"===b&&this._setOptionClasses(k),this.options[b]=k,"disabled"===b&&this._setOptionDisabled(k),this},_setOptionClasses:function(b){var k,H,Z;for(k in b)Z=this.classesElementLookup[k],b[k]!==this.options.classes[k]&&Z&&Z.length&&(H=o(Z.get()),this._removeClass(Z,k),H.addClass(this._classes({element:H,keys:k,classes:b,add:!0})))},_setOptionDisabled:function(b){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!b),b&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(b){var k=[],H=this;function Z(ne,fe){var De,Ue;for(Ue=0;Ue<ne.length;Ue++)De=H.classesElementLookup[ne[Ue]]||o(),De=o(b.add?o.unique(De.get().concat(b.element.get())):De.not(b.element).get()),H.classesElementLookup[ne[Ue]]=De,k.push(ne[Ue]),fe&&b.classes[ne[Ue]]&&k.push(b.classes[ne[Ue]])}return b=o.extend({element:this.element,classes:this.options.classes||{}},b),this._on(b.element,{remove:"_untrackClassesElement"}),b.keys&&Z(b.keys.match(/\S+/g)||[],!0),b.extra&&Z(b.extra.match(/\S+/g)||[]),k.join(" ")},_untrackClassesElement:function(b){var k=this;o.each(k.classesElementLookup,function(H,Z){-1!==o.inArray(b.target,Z)&&(k.classesElementLookup[H]=o(Z.not(b.target).get()))})},_removeClass:function(b,k,H){return this._toggleClass(b,k,H,!1)},_addClass:function(b,k,H){return this._toggleClass(b,k,H,!0)},_toggleClass:function(b,k,H,Z){var ne="string"==typeof b||null===b,fe={extra:ne?k:H,keys:ne?b:k,element:ne?this.element:b,add:Z="boolean"==typeof Z?Z:H};return fe.element.toggleClass(this._classes(fe),Z),this},_on:function(b,k,H){var Z,ne=this;"boolean"!=typeof b&&(H=k,k=b,b=!1),H?(k=Z=o(k),this.bindings=this.bindings.add(k)):(H=k,k=this.element,Z=this.widget()),o.each(H,function(fe,De){function Ue(){if(b||!0!==ne.options.disabled&&!o(this).hasClass("ui-state-disabled"))return("string"==typeof De?ne[De]:De).apply(ne,arguments)}"string"!=typeof De&&(Ue.guid=De.guid=De.guid||Ue.guid||o.guid++);var Qe=fe.match(/^([\w:-]*)\s*(.*)$/),gt=Qe[1]+ne.eventNamespace,xt=Qe[2];xt?Z.on(gt,xt,Ue):k.on(gt,Ue)})},_off:function(b,k){k=(k||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,b.off(k).off(k),this.bindings=o(this.bindings.not(b).get()),this.focusable=o(this.focusable.not(b).get()),this.hoverable=o(this.hoverable.not(b).get())},_delay:function(b,k){var Z=this;return setTimeout(function H(){return("string"==typeof b?Z[b]:b).apply(Z,arguments)},k||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(k){this._addClass(o(k.currentTarget),null,"ui-state-hover")},mouseleave:function(k){this._removeClass(o(k.currentTarget),null,"ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(k){this._addClass(o(k.currentTarget),null,"ui-state-focus")},focusout:function(k){this._removeClass(o(k.currentTarget),null,"ui-state-focus")}})},_trigger:function(b,k,H){var Z,ne,fe=this.options[b];if(H=H||{},(k=o.Event(k)).type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),k.target=this.element[0],ne=k.originalEvent)for(Z in ne)Z in k||(k[Z]=ne[Z]);return this.element.trigger(k,H),!(o.isFunction(fe)&&!1===fe.apply(this.element[0],[k].concat(H))||k.isDefaultPrevented())}},o.each({show:"fadeIn",hide:"fadeOut"},function(b,k){o.Widget.prototype["_"+b]=function(H,Z,ne){"string"==typeof Z&&(Z={effect:Z});var fe,De=Z?!0===Z||"number"==typeof Z?k:Z.effect||k:b;"number"==typeof(Z=Z||{})&&(Z={duration:Z}),fe=!o.isEmptyObject(Z),Z.complete=ne,Z.delay&&H.delay(Z.delay),fe&&o.effects&&o.effects.effect[De]?H[b](Z):De!==b&&H[De]?H[De](Z.duration,Z.easing,ne):H.queue(function(Ue){o(this)[b](),ne&&ne.call(H[0]),Ue()})}}),function(){var b,k=Math.max,H=Math.abs,Z=/left|center|right/,ne=/top|center|bottom/,fe=/[\+\-]\d+(\.[\d]+)?%?/,De=/^\w+/,Ue=/%$/,Qe=o.fn.position;function gt(Ct,Ht,en){return[parseFloat(Ct[0])*(Ue.test(Ct[0])?Ht/100:1),parseFloat(Ct[1])*(Ue.test(Ct[1])?en/100:1)]}function xt(Ct,Ht){return parseInt(o.css(Ct,Ht),10)||0}function Jt(Ct){var Ht=Ct[0];return 9===Ht.nodeType?{width:Ct.width(),height:Ct.height(),offset:{top:0,left:0}}:o.isWindow(Ht)?{width:Ct.width(),height:Ct.height(),offset:{top:Ct.scrollTop(),left:Ct.scrollLeft()}}:Ht.preventDefault?{width:0,height:0,offset:{top:Ht.pageY,left:Ht.pageX}}:{width:Ct.outerWidth(),height:Ct.outerHeight(),offset:Ct.offset()}}o.position={scrollbarWidth:function(){if(void 0!==b)return b;var Ct,Ht,en=o("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),St=en.children()[0];return o("body").append(en),Ct=St.offsetWidth,en.css("overflow","scroll"),Ct===(Ht=St.offsetWidth)&&(Ht=en[0].clientWidth),en.remove(),b=Ct-Ht},getScrollInfo:function(Ct){var Ht=Ct.isWindow||Ct.isDocument?"":Ct.element.css("overflow-x"),en=Ct.isWindow||Ct.isDocument?"":Ct.element.css("overflow-y"),St="scroll"===Ht||"auto"===Ht&&Ct.width<Ct.element[0].scrollWidth;return{width:"scroll"===en||"auto"===en&&Ct.height<Ct.element[0].scrollHeight?o.position.scrollbarWidth():0,height:St?o.position.scrollbarWidth():0}},getWithinInfo:function(Ct){var Ht=o(Ct||window),en=o.isWindow(Ht[0]),St=!!Ht[0]&&9===Ht[0].nodeType;return{element:Ht,isWindow:en,isDocument:St,offset:en||St?{left:0,top:0}:o(Ct).offset(),scrollLeft:Ht.scrollLeft(),scrollTop:Ht.scrollTop(),width:Ht.outerWidth(),height:Ht.outerHeight()}}},o.fn.position=function(Ct){if(!Ct||!Ct.of)return Qe.apply(this,arguments);Ct=o.extend({},Ct);var Ht,en,St,Kt,gn,sn,Wn=o(Ct.of),Qn=o.position.getWithinInfo(Ct.within),Di=o.position.getScrollInfo(Qn),Ci=(Ct.collision||"flip").split(" "),Si={};return sn=Jt(Wn),Wn[0].preventDefault&&(Ct.at="left top"),en=sn.width,St=sn.height,gn=o.extend({},Kt=sn.offset),o.each(["my","at"],function(){var Mr,Oi,Ei=(Ct[this]||"").split(" ");1===Ei.length&&(Ei=Z.test(Ei[0])?Ei.concat(["center"]):ne.test(Ei[0])?["center"].concat(Ei):["center","center"]),Ei[0]=Z.test(Ei[0])?Ei[0]:"center",Ei[1]=ne.test(Ei[1])?Ei[1]:"center",Mr=fe.exec(Ei[0]),Oi=fe.exec(Ei[1]),Si[this]=[Mr?Mr[0]:0,Oi?Oi[0]:0],Ct[this]=[De.exec(Ei[0])[0],De.exec(Ei[1])[0]]}),1===Ci.length&&(Ci[1]=Ci[0]),"right"===Ct.at[0]?gn.left+=en:"center"===Ct.at[0]&&(gn.left+=en/2),"bottom"===Ct.at[1]?gn.top+=St:"center"===Ct.at[1]&&(gn.top+=St/2),Ht=gt(Si.at,en,St),gn.left+=Ht[0],gn.top+=Ht[1],this.each(function(){var Ei,Mr,Oi=o(this),Yr=Oi.outerWidth(),Br=Oi.outerHeight(),ia=xt(this,"marginLeft"),rl=xt(this,"marginTop"),Qs=Yr+ia+xt(this,"marginRight")+Di.width,Ni=Br+rl+xt(this,"marginBottom")+Di.height,So=o.extend({},gn),Os=gt(Si.my,Oi.outerWidth(),Oi.outerHeight());"right"===Ct.my[0]?So.left-=Yr:"center"===Ct.my[0]&&(So.left-=Yr/2),"bottom"===Ct.my[1]?So.top-=Br:"center"===Ct.my[1]&&(So.top-=Br/2),So.left+=Os[0],So.top+=Os[1],Ei={marginLeft:ia,marginTop:rl},o.each(["left","top"],function(la,ts){o.ui.position[Ci[la]]&&o.ui.position[Ci[la]][ts](So,{targetWidth:en,targetHeight:St,elemWidth:Yr,elemHeight:Br,collisionPosition:Ei,collisionWidth:Qs,collisionHeight:Ni,offset:[Ht[0]+Os[0],Ht[1]+Os[1]],my:Ct.my,at:Ct.at,within:Qn,elem:Oi})}),Ct.using&&(Mr=function(la){var ts=Kt.left-So.left,Ws=ts+en-Yr,Eo=Kt.top-So.top,ka=Eo+St-Br,ke={target:{element:Wn,left:Kt.left,top:Kt.top,width:en,height:St},element:{element:Oi,left:So.left,top:So.top,width:Yr,height:Br},horizontal:Ws<0?"left":ts>0?"right":"center",vertical:ka<0?"top":Eo>0?"bottom":"middle"};en<Yr&&H(ts+Ws)<en&&(ke.horizontal="center"),St<Br&&H(Eo+ka)<St&&(ke.vertical="middle"),ke.important=k(H(ts),H(Ws))>k(H(Eo),H(ka))?"horizontal":"vertical",Ct.using.call(this,la,ke)}),Oi.offset(o.extend(So,{using:Mr}))})},o.ui.position={fit:{left:function(Ct,Ht){var en=Ht.within,St=en.isWindow?en.scrollLeft:en.offset.left,Kt=en.width,gn=Ct.left-Ht.collisionPosition.marginLeft,sn=St-gn,Wn=gn+Ht.collisionWidth-Kt-St;Ht.collisionWidth>Kt?sn>0&&Wn<=0?Ct.left+=sn-(Ct.left+sn+Ht.collisionWidth-Kt-St):Ct.left=Wn>0&&sn<=0?St:sn>Wn?St+Kt-Ht.collisionWidth:St:sn>0?Ct.left+=sn:Wn>0?Ct.left-=Wn:Ct.left=k(Ct.left-gn,Ct.left)},top:function(Ct,Ht){var en=Ht.within,St=en.isWindow?en.scrollTop:en.offset.top,Kt=Ht.within.height,gn=Ct.top-Ht.collisionPosition.marginTop,sn=St-gn,Wn=gn+Ht.collisionHeight-Kt-St;Ht.collisionHeight>Kt?sn>0&&Wn<=0?Ct.top+=sn-(Ct.top+sn+Ht.collisionHeight-Kt-St):Ct.top=Wn>0&&sn<=0?St:sn>Wn?St+Kt-Ht.collisionHeight:St:sn>0?Ct.top+=sn:Wn>0?Ct.top-=Wn:Ct.top=k(Ct.top-gn,Ct.top)}},flip:{left:function(Ct,Ht){var Ei,Mr,en=Ht.within,Kt=en.width,gn=en.isWindow?en.scrollLeft:en.offset.left,sn=Ct.left-Ht.collisionPosition.marginLeft,Wn=sn-gn,Qn=sn+Ht.collisionWidth-Kt-gn,Di="left"===Ht.my[0]?-Ht.elemWidth:"right"===Ht.my[0]?Ht.elemWidth:0,Ci="left"===Ht.at[0]?Ht.targetWidth:"right"===Ht.at[0]?-Ht.targetWidth:0,Si=-2*Ht.offset[0];Wn<0?((Ei=Ct.left+Di+Ci+Si+Ht.collisionWidth-Kt-(en.offset.left+en.scrollLeft))<0||Ei<H(Wn))&&(Ct.left+=Di+Ci+Si):Qn>0&&((Mr=Ct.left-Ht.collisionPosition.marginLeft+Di+Ci+Si-gn)>0||H(Mr)<Qn)&&(Ct.left+=Di+Ci+Si)},top:function(Ct,Ht){var Mr,Oi,en=Ht.within,Kt=en.height,gn=en.isWindow?en.scrollTop:en.offset.top,sn=Ct.top-Ht.collisionPosition.marginTop,Wn=sn-gn,Qn=sn+Ht.collisionHeight-Kt-gn,Ci="top"===Ht.my[1]?-Ht.elemHeight:"bottom"===Ht.my[1]?Ht.elemHeight:0,Si="top"===Ht.at[1]?Ht.targetHeight:"bottom"===Ht.at[1]?-Ht.targetHeight:0,Ei=-2*Ht.offset[1];Wn<0?((Oi=Ct.top+Ci+Si+Ei+Ht.collisionHeight-Kt-(en.offset.top+en.scrollTop))<0||Oi<H(Wn))&&(Ct.top+=Ci+Si+Ei):Qn>0&&((Mr=Ct.top-Ht.collisionPosition.marginTop+Ci+Si+Ei-gn)>0||H(Mr)<Qn)&&(Ct.top+=Ci+Si+Ei)}},flipfit:{left:function(){o.ui.position.flip.left.apply(this,arguments),o.ui.position.fit.left.apply(this,arguments)},top:function(){o.ui.position.flip.top.apply(this,arguments),o.ui.position.fit.top.apply(this,arguments)}}}}(),o.extend(o.expr[":"],{data:o.expr.createPseudo?o.expr.createPseudo(function(b){return function(k){return!!o.data(k,b)}}):function(b,k,H){return!!o.data(b,H[3])}}),o.fn.extend({disableSelection:function(){var b="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(b+".ui-disableSelection",function(k){k.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),o.ui.focusable=function(b,k){var H,Z,ne,fe,De,Ue=b.nodeName.toLowerCase();return"area"===Ue?(Z=(H=b.parentNode).name,!(!b.href||!Z||"map"!==H.nodeName.toLowerCase())&&(ne=o("img[usemap='#"+Z+"']")).length>0&&ne.is(":visible")):(/^(input|select|textarea|button|object)$/.test(Ue)?(fe=!b.disabled)&&(De=o(b).closest("fieldset")[0])&&(fe=!De.disabled):fe="a"===Ue&&b.href||k,fe&&o(b).is(":visible")&&function P(b){for(var k=b.css("visibility");"inherit"===k;)k=(b=b.parent()).css("visibility");return"hidden"!==k}(o(b)))},o.extend(o.expr[":"],{focusable:function(b){return o.ui.focusable(b,null!=o.attr(b,"tabindex"))}}),o.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):o(this[0].form)},o.ui.formResetMixin={_formResetHandler:function(){var b=o(this);setTimeout(function(){var k=b.data("ui-form-reset-instances");o.each(k,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var b=this.form.data("ui-form-reset-instances")||[];b.length||this.form.on("reset.ui-form-reset",this._formResetHandler),b.push(this),this.form.data("ui-form-reset-instances",b)}},_unbindFormResetHandler:function(){if(this.form.length){var b=this.form.data("ui-form-reset-instances");b.splice(o.inArray(this,b),1),b.length?this.form.data("ui-form-reset-instances",b):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}},"1.7"===o.fn.jquery.substring(0,3)&&(o.each(["Width","Height"],function(b,k){var H="Width"===k?["Left","Right"]:["Top","Bottom"],Z=k.toLowerCase(),ne={innerWidth:o.fn.innerWidth,innerHeight:o.fn.innerHeight,outerWidth:o.fn.outerWidth,outerHeight:o.fn.outerHeight};function fe(De,Ue,Qe,gt){return o.each(H,function(){Ue-=parseFloat(o.css(De,"padding"+this))||0,Qe&&(Ue-=parseFloat(o.css(De,"border"+this+"Width"))||0),gt&&(Ue-=parseFloat(o.css(De,"margin"+this))||0)}),Ue}o.fn["inner"+k]=function(De){return void 0===De?ne["inner"+k].call(this):this.each(function(){o(this).css(Z,fe(this,De)+"px")})},o.fn["outer"+k]=function(De,Ue){return"number"!=typeof De?ne["outer"+k].call(this,De):this.each(function(){o(this).css(Z,fe(this,De,!0,Ue)+"px")})}}),o.fn.addBack=function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))}),o.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},o.ui.escapeSelector=function(){var b=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g;return function(k){return k.replace(b,"\\$1")}}(),o.fn.labels=function(){var b,k,H,Z,ne;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(Z=this.eq(0).parents("label"),(H=this.attr("id"))&&(ne=(b=this.eq(0).parents().last()).add(b.length?b.siblings():this.siblings()),k="label[for='"+o.ui.escapeSelector(H)+"']",Z=Z.add(ne.find(k).addBack(k))),this.pushStack(Z))},o.fn.scrollParent=function(b){var k=this.css("position"),H="absolute"===k,Z=b?/(auto|scroll|hidden)/:/(auto|scroll)/,ne=this.parents().filter(function(){var fe=o(this);return(!H||"static"!==fe.css("position"))&&Z.test(fe.css("overflow")+fe.css("overflow-y")+fe.css("overflow-x"))}).eq(0);return"fixed"!==k&&ne.length?ne:o(this[0].ownerDocument||document)},o.extend(o.expr[":"],{tabbable:function(b){var k=o.attr(b,"tabindex"),H=null!=k;return(!H||k>=0)&&o.ui.focusable(b,H)}}),o.fn.extend({uniqueId:function(){var b=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++b)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&o(this).removeAttr("id")})}}),o.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var Pe=!1;o(document).on("mouseup",function(){Pe=!1}),o.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.on("mousedown."+this.widgetName,function(k){return b._mouseDown(k)}).on("click."+this.widgetName,function(k){if(!0===o.data(k.target,b.widgetName+".preventClickEvent"))return o.removeData(k.target,b.widgetName+".preventClickEvent"),k.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!Pe){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var k=this,H=1===b.which,Z=!("string"!=typeof this.options.cancel||!b.target.nodeName)&&o(b.target).closest(this.options.cancel).length;return!(H&&!Z&&this._mouseCapture(b)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){k.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted)?(b.preventDefault(),0):(!0===o.data(b.target,this.widgetName+".preventClickEvent")&&o.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(ne){return k._mouseMove(ne)},this._mouseUpDelegate=function(ne){return k._mouseUp(ne)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),Pe=!0,0)))}},_mouseMove:function(b){if(this._mouseMoved){if(o.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button)return this._mouseUp(b);if(!b.which)if(b.originalEvent.altKey||b.originalEvent.ctrlKey||b.originalEvent.metaKey||b.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(b)}return(b.which||b.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b),this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&o.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,Pe=!1,b.preventDefault()},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),o.ui.plugin={add:function(b,k,H){var Z,ne=o.ui[b].prototype;for(Z in H)ne.plugins[Z]=ne.plugins[Z]||[],ne.plugins[Z].push([k,H[Z]])},call:function(b,k,H,Z){var ne,fe=b.plugins[k];if(fe&&(Z||b.element[0].parentNode&&11!==b.element[0].parentNode.nodeType))for(ne=0;ne<fe.length;ne++)b.options[fe[ne][0]]&&fe[ne][1].apply(b.element,H)}},o.ui.safeActiveElement=function(b){var k;try{k=b.activeElement}catch(H){k=b.body}return k||(k=b.body),k.nodeName||(k=b.body),k},o.ui.safeBlur=function(b){b&&"body"!==b.nodeName.toLowerCase()&&o(b).trigger("blur")},o.widget("ui.draggable",o.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(b,k){this._super(b,k),"handle"===b&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(b){var k=this.options;return!(this.helper||k.disabled||o(b.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(b),!this.handle)||(this._blurActiveElement(b),this._blockFrames(!0===k.iframeFix?"iframe":k.iframeFix),0))},_blockFrames:function(b){this.iframeBlocks=this.document.find(b).map(function(){var k=o(this);return o("<div>").css("position","absolute").appendTo(k.parent()).outerWidth(k.outerWidth()).outerHeight(k.outerHeight()).offset(k.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(b){var k=o.ui.safeActiveElement(this.document[0]);o(b.target).closest(k).length||o.ui.safeBlur(k)},_mouseStart:function(b){var k=this.options;return this.helper=this._createHelper(b),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),o.ui.ddmanager&&(o.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===o(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(b),this.originalPosition=this.position=this._generatePosition(b,!1),this.originalPageX=b.pageX,this.originalPageY=b.pageY,k.cursorAt&&this._adjustOffsetFromHelper(k.cursorAt),this._setContainment(),!1===this._trigger("start",b)?(this._clear(),!1):(this._cacheHelperProportions(),o.ui.ddmanager&&!k.dropBehaviour&&o.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),o.ui.ddmanager&&o.ui.ddmanager.dragStart(this,b),!0)},_refreshOffsets:function(b){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:b.pageX-this.offset.left,top:b.pageY-this.offset.top}},_mouseDrag:function(b,k){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b,!0),this.positionAbs=this._convertPositionTo("absolute"),!k){var H=this._uiHash();if(!1===this._trigger("drag",b,H))return this._mouseUp(new o.Event("mouseup",b)),!1;this.position=H.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",o.ui.ddmanager&&o.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var k=this,H=!1;return o.ui.ddmanager&&!this.options.dropBehaviour&&(H=o.ui.ddmanager.drop(this,b)),this.dropped&&(H=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!H||"valid"===this.options.revert&&H||!0===this.options.revert||o.isFunction(this.options.revert)&&this.options.revert.call(this.element,H)?o(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==k._trigger("stop",b)&&k._clear()}):!1!==this._trigger("stop",b)&&this._clear(),!1},_mouseUp:function(b){return this._unblockFrames(),o.ui.ddmanager&&o.ui.ddmanager.dragStop(this,b),this.handleElement.is(b.target)&&this.element.trigger("focus"),o.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new o.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(b){return!this.options.handle||!!o(b.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(b){var k=this.options,H=o.isFunction(k.helper),Z=H?o(k.helper.apply(this.element[0],[b])):"clone"===k.helper?this.element.clone().removeAttr("id"):this.element;return Z.parents("body").length||Z.appendTo("parent"===k.appendTo?this.element[0].parentNode:k.appendTo),H&&Z[0]===this.element[0]&&this._setPositionRelative(),Z[0]!==this.element[0]&&!/(fixed|absolute)/.test(Z.css("position"))&&Z.css("position","absolute"),Z},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),o.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(b){return/(html|body)/i.test(b.tagName)||b===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&o.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var b=this.element.position(),k=this._isRootNode(this.scrollParent[0]);return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+(k?0:this.scrollParent.scrollTop()),left:b.left-(parseInt(this.helper.css("left"),10)||0)+(k?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,k,H,Z=this.options,ne=this.document[0];this.relativeContainer=null,Z.containment?"window"!==Z.containment?"document"!==Z.containment?Z.containment.constructor!==Array?("parent"===Z.containment&&(Z.containment=this.helper[0].parentNode),(H=(k=o(Z.containment))[0])&&(b=/(scroll|auto)/.test(k.css("overflow")),this.containment=[(parseInt(k.css("borderLeftWidth"),10)||0)+(parseInt(k.css("paddingLeft"),10)||0),(parseInt(k.css("borderTopWidth"),10)||0)+(parseInt(k.css("paddingTop"),10)||0),(b?Math.max(H.scrollWidth,H.offsetWidth):H.offsetWidth)-(parseInt(k.css("borderRightWidth"),10)||0)-(parseInt(k.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(H.scrollHeight,H.offsetHeight):H.offsetHeight)-(parseInt(k.css("borderBottomWidth"),10)||0)-(parseInt(k.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=k)):this.containment=Z.containment:this.containment=[0,0,o(ne).width()-this.helperProportions.width-this.margins.left,(o(ne).height()||ne.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[o(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,o(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,o(window).scrollLeft()+o(window).width()-this.helperProportions.width-this.margins.left,o(window).scrollTop()+(o(window).height()||ne.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(b,k){k||(k=this.position);var H="absolute"===b?1:-1,Z=this._isRootNode(this.scrollParent[0]);return{top:k.top+this.offset.relative.top*H+this.offset.parent.top*H-("fixed"===this.cssPosition?-this.offset.scroll.top:Z?0:this.offset.scroll.top)*H,left:k.left+this.offset.relative.left*H+this.offset.parent.left*H-("fixed"===this.cssPosition?-this.offset.scroll.left:Z?0:this.offset.scroll.left)*H}},_generatePosition:function(b,k){var H,Z,ne,fe,De=this.options,Ue=this._isRootNode(this.scrollParent[0]),Qe=b.pageX,gt=b.pageY;return(!Ue||!this.offset.scroll)&&(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),k&&(this.containment&&(this.relativeContainer?(Z=this.relativeContainer.offset(),H=[this.containment[0]+Z.left,this.containment[1]+Z.top,this.containment[2]+Z.left,this.containment[3]+Z.top]):H=this.containment,b.pageX-this.offset.click.left<H[0]&&(Qe=H[0]+this.offset.click.left),b.pageY-this.offset.click.top<H[1]&&(gt=H[1]+this.offset.click.top),b.pageX-this.offset.click.left>H[2]&&(Qe=H[2]+this.offset.click.left),b.pageY-this.offset.click.top>H[3]&&(gt=H[3]+this.offset.click.top)),De.grid&&(ne=De.grid[1]?this.originalPageY+Math.round((gt-this.originalPageY)/De.grid[1])*De.grid[1]:this.originalPageY,gt=H?ne-this.offset.click.top>=H[1]||ne-this.offset.click.top>H[3]?ne:ne-this.offset.click.top>=H[1]?ne-De.grid[1]:ne+De.grid[1]:ne,fe=De.grid[0]?this.originalPageX+Math.round((Qe-this.originalPageX)/De.grid[0])*De.grid[0]:this.originalPageX,Qe=H?fe-this.offset.click.left>=H[0]||fe-this.offset.click.left>H[2]?fe:fe-this.offset.click.left>=H[0]?fe-De.grid[0]:fe+De.grid[0]:fe),"y"===De.axis&&(Qe=this.originalPageX),"x"===De.axis&&(gt=this.originalPageY)),{top:gt-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:Ue?0:this.offset.scroll.top),left:Qe-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:Ue?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(b,k,H){return H=H||this._uiHash(),o.ui.plugin.call(this,b,[k,H,this],!0),/^(drag|start|stop)/.test(b)&&(this.positionAbs=this._convertPositionTo("absolute"),H.offset=this.positionAbs),o.Widget.prototype._trigger.call(this,b,k,H)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),o.ui.plugin.add("draggable","connectToSortable",{start:function(b,k,H){var Z=o.extend({},k,{item:H.element});H.sortables=[],o(H.options.connectToSortable).each(function(){var ne=o(this).sortable("instance");ne&&!ne.options.disabled&&(H.sortables.push(ne),ne.refreshPositions(),ne._trigger("activate",b,Z))})},stop:function(b,k,H){var Z=o.extend({},k,{item:H.element});H.cancelHelperRemoval=!1,o.each(H.sortables,function(){var ne=this;ne.isOver?(ne.isOver=0,H.cancelHelperRemoval=!0,ne.cancelHelperRemoval=!1,ne._storedCSS={position:ne.placeholder.css("position"),top:ne.placeholder.css("top"),left:ne.placeholder.css("left")},ne._mouseStop(b),ne.options.helper=ne.options._helper):(ne.cancelHelperRemoval=!0,ne._trigger("deactivate",b,Z))})},drag:function(b,k,H){o.each(H.sortables,function(){var Z=!1,ne=this;ne.positionAbs=H.positionAbs,ne.helperProportions=H.helperProportions,ne.offset.click=H.offset.click,ne._intersectsWith(ne.containerCache)&&(Z=!0,o.each(H.sortables,function(){return this.positionAbs=H.positionAbs,this.helperProportions=H.helperProportions,this.offset.click=H.offset.click,this!==ne&&this._intersectsWith(this.containerCache)&&o.contains(ne.element[0],this.element[0])&&(Z=!1),Z})),Z?(ne.isOver||(ne.isOver=1,H._parent=k.helper.parent(),ne.currentItem=k.helper.appendTo(ne.element).data("ui-sortable-item",!0),ne.options._helper=ne.options.helper,ne.options.helper=function(){return k.helper[0]},b.target=ne.currentItem[0],ne._mouseCapture(b,!0),ne._mouseStart(b,!0,!0),ne.offset.click.top=H.offset.click.top,ne.offset.click.left=H.offset.click.left,ne.offset.parent.left-=H.offset.parent.left-ne.offset.parent.left,ne.offset.parent.top-=H.offset.parent.top-ne.offset.parent.top,H._trigger("toSortable",b),H.dropped=ne.element,o.each(H.sortables,function(){this.refreshPositions()}),H.currentItem=H.element,ne.fromOutside=H),ne.currentItem&&(ne._mouseDrag(b),k.position=ne.position)):ne.isOver&&(ne.isOver=0,ne.cancelHelperRemoval=!0,ne.options._revert=ne.options.revert,ne.options.revert=!1,ne._trigger("out",b,ne._uiHash(ne)),ne._mouseStop(b,!0),ne.options.revert=ne.options._revert,ne.options.helper=ne.options._helper,ne.placeholder&&ne.placeholder.remove(),k.helper.appendTo(H._parent),H._refreshOffsets(b),k.position=H._generatePosition(b,!0),H._trigger("fromSortable",b),H.dropped=!1,o.each(H.sortables,function(){this.refreshPositions()}))})}}),o.ui.plugin.add("draggable","cursor",{start:function(b,k,H){var Z=o("body"),ne=H.options;Z.css("cursor")&&(ne._cursor=Z.css("cursor")),Z.css("cursor",ne.cursor)},stop:function(b,k,H){var Z=H.options;Z._cursor&&o("body").css("cursor",Z._cursor)}}),o.ui.plugin.add("draggable","opacity",{start:function(b,k,H){var Z=o(k.helper),ne=H.options;Z.css("opacity")&&(ne._opacity=Z.css("opacity")),Z.css("opacity",ne.opacity)},stop:function(b,k,H){var Z=H.options;Z._opacity&&o(k.helper).css("opacity",Z._opacity)}}),o.ui.plugin.add("draggable","scroll",{start:function(b,k,H){H.scrollParentNotHidden||(H.scrollParentNotHidden=H.helper.scrollParent(!1)),H.scrollParentNotHidden[0]!==H.document[0]&&"HTML"!==H.scrollParentNotHidden[0].tagName&&(H.overflowOffset=H.scrollParentNotHidden.offset())},drag:function(b,k,H){var Z=H.options,ne=!1,fe=H.scrollParentNotHidden[0],De=H.document[0];fe!==De&&"HTML"!==fe.tagName?((!Z.axis||"x"!==Z.axis)&&(H.overflowOffset.top+fe.offsetHeight-b.pageY<Z.scrollSensitivity?fe.scrollTop=ne=fe.scrollTop+Z.scrollSpeed:b.pageY-H.overflowOffset.top<Z.scrollSensitivity&&(fe.scrollTop=ne=fe.scrollTop-Z.scrollSpeed)),(!Z.axis||"y"!==Z.axis)&&(H.overflowOffset.left+fe.offsetWidth-b.pageX<Z.scrollSensitivity?fe.scrollLeft=ne=fe.scrollLeft+Z.scrollSpeed:b.pageX-H.overflowOffset.left<Z.scrollSensitivity&&(fe.scrollLeft=ne=fe.scrollLeft-Z.scrollSpeed))):((!Z.axis||"x"!==Z.axis)&&(b.pageY-o(De).scrollTop()<Z.scrollSensitivity?ne=o(De).scrollTop(o(De).scrollTop()-Z.scrollSpeed):o(window).height()-(b.pageY-o(De).scrollTop())<Z.scrollSensitivity&&(ne=o(De).scrollTop(o(De).scrollTop()+Z.scrollSpeed))),(!Z.axis||"y"!==Z.axis)&&(b.pageX-o(De).scrollLeft()<Z.scrollSensitivity?ne=o(De).scrollLeft(o(De).scrollLeft()-Z.scrollSpeed):o(window).width()-(b.pageX-o(De).scrollLeft())<Z.scrollSensitivity&&(ne=o(De).scrollLeft(o(De).scrollLeft()+Z.scrollSpeed)))),!1!==ne&&o.ui.ddmanager&&!Z.dropBehaviour&&o.ui.ddmanager.prepareOffsets(H,b)}}),o.ui.plugin.add("draggable","snap",{start:function(b,k,H){var Z=H.options;H.snapElements=[],o(Z.snap.constructor!==String?Z.snap.items||":data(ui-draggable)":Z.snap).each(function(){var ne=o(this),fe=ne.offset();this!==H.element[0]&&H.snapElements.push({item:this,width:ne.outerWidth(),height:ne.outerHeight(),top:fe.top,left:fe.left})})},drag:function(b,k,H){var Z,ne,fe,De,Ue,Qe,gt,xt,Jt,Ct,Ht=H.options,en=Ht.snapTolerance,St=k.offset.left,Kt=St+H.helperProportions.width,gn=k.offset.top,sn=gn+H.helperProportions.height;for(Jt=H.snapElements.length-1;Jt>=0;Jt--)Qe=(Ue=H.snapElements[Jt].left-H.margins.left)+H.snapElements[Jt].width,xt=(gt=H.snapElements[Jt].top-H.margins.top)+H.snapElements[Jt].height,Kt<Ue-en||St>Qe+en||sn<gt-en||gn>xt+en||!o.contains(H.snapElements[Jt].item.ownerDocument,H.snapElements[Jt].item)?(H.snapElements[Jt].snapping&&H.options.snap.release&&H.options.snap.release.call(H.element,b,o.extend(H._uiHash(),{snapItem:H.snapElements[Jt].item})),H.snapElements[Jt].snapping=!1):("inner"!==Ht.snapMode&&(Z=Math.abs(gt-sn)<=en,ne=Math.abs(xt-gn)<=en,fe=Math.abs(Ue-Kt)<=en,De=Math.abs(Qe-St)<=en,Z&&(k.position.top=H._convertPositionTo("relative",{top:gt-H.helperProportions.height,left:0}).top),ne&&(k.position.top=H._convertPositionTo("relative",{top:xt,left:0}).top),fe&&(k.position.left=H._convertPositionTo("relative",{top:0,left:Ue-H.helperProportions.width}).left),De&&(k.position.left=H._convertPositionTo("relative",{top:0,left:Qe}).left)),Ct=Z||ne||fe||De,"outer"!==Ht.snapMode&&(Z=Math.abs(gt-gn)<=en,ne=Math.abs(xt-sn)<=en,fe=Math.abs(Ue-St)<=en,De=Math.abs(Qe-Kt)<=en,Z&&(k.position.top=H._convertPositionTo("relative",{top:gt,left:0}).top),ne&&(k.position.top=H._convertPositionTo("relative",{top:xt-H.helperProportions.height,left:0}).top),fe&&(k.position.left=H._convertPositionTo("relative",{top:0,left:Ue}).left),De&&(k.position.left=H._convertPositionTo("relative",{top:0,left:Qe-H.helperProportions.width}).left)),!H.snapElements[Jt].snapping&&(Z||ne||fe||De||Ct)&&H.options.snap.snap&&H.options.snap.snap.call(H.element,b,o.extend(H._uiHash(),{snapItem:H.snapElements[Jt].item})),H.snapElements[Jt].snapping=Z||ne||fe||De||Ct)}}),o.ui.plugin.add("draggable","stack",{start:function(b,k,H){var Z,fe=o.makeArray(o(H.options.stack)).sort(function(De,Ue){return(parseInt(o(De).css("zIndex"),10)||0)-(parseInt(o(Ue).css("zIndex"),10)||0)});!fe.length||(Z=parseInt(o(fe[0]).css("zIndex"),10)||0,o(fe).each(function(De){o(this).css("zIndex",Z+De)}),this.css("zIndex",Z+fe.length))}}),o.ui.plugin.add("draggable","zIndex",{start:function(b,k,H){var Z=o(k.helper),ne=H.options;Z.css("zIndex")&&(ne._zIndex=Z.css("zIndex")),Z.css("zIndex",ne.zIndex)},stop:function(b,k,H){var Z=H.options;Z._zIndex&&o(k.helper).css("zIndex",Z._zIndex)}}),o.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b,k=this.options,H=k.accept;this.isover=!1,this.isout=!0,this.accept=o.isFunction(H)?H:function(Z){return Z.is(H)},this.proportions=function(){if(!arguments.length)return b||(b={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});b=arguments[0]},this._addToManager(k.scope),k.addClasses&&this._addClass("ui-droppable")},_addToManager:function(b){o.ui.ddmanager.droppables[b]=o.ui.ddmanager.droppables[b]||[],o.ui.ddmanager.droppables[b].push(this)},_splice:function(b){for(var k=0;k<b.length;k++)b[k]===this&&b.splice(k,1)},_destroy:function(){this._splice(o.ui.ddmanager.droppables[this.options.scope])},_setOption:function(b,k){"accept"===b?this.accept=o.isFunction(k)?k:function(Z){return Z.is(k)}:"scope"===b&&(this._splice(o.ui.ddmanager.droppables[this.options.scope]),this._addToManager(k)),this._super(b,k)},_activate:function(b){var k=o.ui.ddmanager.current;this._addActiveClass(),k&&this._trigger("activate",b,this.ui(k))},_deactivate:function(b){var k=o.ui.ddmanager.current;this._removeActiveClass(),k&&this._trigger("deactivate",b,this.ui(k))},_over:function(b){var k=o.ui.ddmanager.current;!k||(k.currentItem||k.element)[0]===this.element[0]||this.accept.call(this.element[0],k.currentItem||k.element)&&(this._addHoverClass(),this._trigger("over",b,this.ui(k)))},_out:function(b){var k=o.ui.ddmanager.current;!k||(k.currentItem||k.element)[0]===this.element[0]||this.accept.call(this.element[0],k.currentItem||k.element)&&(this._removeHoverClass(),this._trigger("out",b,this.ui(k)))},_drop:function(b,k){var H=k||o.ui.ddmanager.current,Z=!1;return!(!H||(H.currentItem||H.element)[0]===this.element[0]||(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var ne=o(this).droppable("instance");if(ne.options.greedy&&!ne.options.disabled&&ne.options.scope===H.options.scope&&ne.accept.call(ne.element[0],H.currentItem||H.element)&&Te(H,o.extend(ne,{offset:ne.element.offset()}),ne.options.tolerance,b))return Z=!0,!1}),Z))&&!!this.accept.call(this.element[0],H.currentItem||H.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",b,this.ui(H)),this.element)},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var Te=o.ui.intersect=function(){function b(k,H,Z){return k>=H&&k<H+Z}return function(k,H,Z,ne){if(!H.offset)return!1;var fe=(k.positionAbs||k.position.absolute).left+k.margins.left,De=(k.positionAbs||k.position.absolute).top+k.margins.top,Ue=fe+k.helperProportions.width,Qe=De+k.helperProportions.height,gt=H.offset.left,xt=H.offset.top,Jt=gt+H.proportions().width,Ct=xt+H.proportions().height;switch(Z){case"fit":return gt<=fe&&Ue<=Jt&&xt<=De&&Qe<=Ct;case"intersect":return gt<fe+k.helperProportions.width/2&&Ue-k.helperProportions.width/2<Jt&&xt<De+k.helperProportions.height/2&&Qe-k.helperProportions.height/2<Ct;case"pointer":return b(ne.pageY,xt,H.proportions().height)&&b(ne.pageX,gt,H.proportions().width);case"touch":return(De>=xt&&De<=Ct||Qe>=xt&&Qe<=Ct||De<xt&&Qe>Ct)&&(fe>=gt&&fe<=Jt||Ue>=gt&&Ue<=Jt||fe<gt&&Ue>Jt);default:return!1}}}();o.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(b,k){var H,Z,ne=o.ui.ddmanager.droppables[b.options.scope]||[],fe=k?k.type:null,De=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();e:for(H=0;H<ne.length;H++)if(!(ne[H].options.disabled||b&&!ne[H].accept.call(ne[H].element[0],b.currentItem||b.element))){for(Z=0;Z<De.length;Z++)if(De[Z]===ne[H].element[0]){ne[H].proportions().height=0;continue e}ne[H].visible="none"!==ne[H].element.css("display"),ne[H].visible&&("mousedown"===fe&&ne[H]._activate.call(ne[H],k),ne[H].offset=ne[H].element.offset(),ne[H].proportions({width:ne[H].element[0].offsetWidth,height:ne[H].element[0].offsetHeight}))}},drop:function(b,k){var H=!1;return o.each((o.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){!this.options||(!this.options.disabled&&this.visible&&Te(b,this,this.options.tolerance,k)&&(H=this._drop.call(this,k)||H),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,k)))}),H},dragStart:function(b,k){b.element.parentsUntil("body").on("scroll.droppable",function(){b.options.refreshPositions||o.ui.ddmanager.prepareOffsets(b,k)})},drag:function(b,k){b.options.refreshPositions&&o.ui.ddmanager.prepareOffsets(b,k),o.each(o.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var H,Z,ne,fe=Te(b,this,this.options.tolerance,k),De=!fe&&this.isover?"isout":fe&&!this.isover?"isover":null;!De||(this.options.greedy&&(Z=this.options.scope,(ne=this.element.parents(":data(ui-droppable)").filter(function(){return o(this).droppable("instance").options.scope===Z})).length&&((H=o(ne[0]).droppable("instance")).greedyChild="isover"===De)),H&&"isover"===De&&(H.isover=!1,H.isout=!0,H._out.call(H,k)),this[De]=!0,this["isout"===De?"isover":"isout"]=!1,this["isover"===De?"_over":"_out"].call(this,k),H&&"isout"===De&&(H.isout=!1,H.isover=!0,H._over.call(H,k)))}})},dragStop:function(b,k){b.element.parentsUntil("body").off("scroll.droppable"),b.options.refreshPositions||o.ui.ddmanager.prepareOffsets(b,k)}},!1!==o.uiBackCompat&&o.widget("ui.droppable",o.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),o.widget("ui.resizable",o.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(b){return parseFloat(b)||0},_isNumber:function(b){return!isNaN(parseFloat(b))},_hasScroll:function(b,k){if("hidden"===o(b).css("overflow"))return!1;var H=k&&"left"===k?"scrollLeft":"scrollTop",Z=!1;return b[H]>0||(b[H]=1,Z=b[H]>0,b[H]=0,Z)},_create:function(){var b,k=this.options,H=this;this._addClass("ui-resizable"),o.extend(this,{_aspectRatio:!!k.aspectRatio,aspectRatio:k.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:k.helper||k.ghost||k.animate?k.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(o("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,b={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(b),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(b),this._proportionallyResize()),this._setupHandles(),k.autoHide&&o(this.element).on("mouseenter",function(){k.disabled||(H._removeClass("ui-resizable-autohide"),H._handles.show())}).on("mouseleave",function(){k.disabled||H.resizing||(H._addClass("ui-resizable-autohide"),H._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,k=function(H){o(H).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(k(this.element),this.originalElement.css({position:(b=this.element).css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),k(this.originalElement),this},_setOption:function(b,k){"handles"===(this._super(b,k),b)&&(this._removeHandles(),this._setupHandles())},_setupHandles:function(){var k,H,Z,ne,fe,b=this.options,De=this;if(this.handles=b.handles||(o(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=o(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),Z=this.handles.split(","),this.handles={},H=0;H<Z.length;H++)ne="ui-resizable-"+(k=o.trim(Z[H])),fe=o("<div>"),this._addClass(fe,"ui-resizable-handle "+ne),fe.css({zIndex:b.zIndex}),this.handles[k]=".ui-resizable-"+k,this.element.append(fe);this._renderAxis=function(Ue){var Qe,gt,xt,Jt;for(Qe in Ue=Ue||this.element,this.handles)this.handles[Qe].constructor===String?this.handles[Qe]=this.element.children(this.handles[Qe]).first().show():(this.handles[Qe].jquery||this.handles[Qe].nodeType)&&(this.handles[Qe]=o(this.handles[Qe]),this._on(this.handles[Qe],{mousedown:De._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(gt=o(this.handles[Qe],this.element),Jt=/sw|ne|nw|se|n|s/.test(Qe)?gt.outerHeight():gt.outerWidth(),xt=["padding",/ne|nw|n/.test(Qe)?"Top":/se|sw|s/.test(Qe)?"Bottom":/^e$/.test(Qe)?"Right":"Left"].join(""),Ue.css(xt,Jt),this._proportionallyResize()),this._handles=this._handles.add(this.handles[Qe])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){De.resizing||(this.className&&(fe=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),De.axis=fe&&fe[1]?fe[1]:"se")}),b.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(b){var k,H,Z=!1;for(k in this.handles)((H=o(this.handles[k])[0])===b.target||o.contains(H,b.target))&&(Z=!0);return!this.options.disabled&&Z},_mouseStart:function(b){var k,H,Z,ne=this.options,fe=this.element;return this.resizing=!0,this._renderProxy(),k=this._num(this.helper.css("left")),H=this._num(this.helper.css("top")),ne.containment&&(k+=o(ne.containment).scrollLeft()||0,H+=o(ne.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:k,top:H},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:fe.width(),height:fe.height()},this.originalSize=this._helper?{width:fe.outerWidth(),height:fe.outerHeight()}:{width:fe.width(),height:fe.height()},this.sizeDiff={width:fe.outerWidth()-fe.width(),height:fe.outerHeight()-fe.height()},this.originalPosition={left:k,top:H},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof ne.aspectRatio?ne.aspectRatio:this.originalSize.width/this.originalSize.height||1,Z=o(".ui-resizable-"+this.axis).css("cursor"),o("body").css("cursor","auto"===Z?this.axis+"-resize":Z),this._addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var k,H,Z=this.originalMousePosition,fe=b.pageX-Z.left||0,De=b.pageY-Z.top||0,Ue=this._change[this.axis];return this._updatePrevProperties(),Ue&&(k=Ue.apply(this,[b,fe,De]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(k=this._updateRatio(k,b)),k=this._respectSize(k,b),this._updateCache(k),this._propagate("resize",b),H=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),o.isEmptyObject(H)||(this._updatePrevProperties(),this._trigger("resize",b,this.ui()),this._applyChanges())),!1},_mouseStop:function(b){this.resizing=!1;var k,H,Z,ne,fe,De,Ue,Qe=this.options,gt=this;return this._helper&&(Z=(H=(k=this._proportionallyResizeElements).length&&/textarea/i.test(k[0].nodeName))&&this._hasScroll(k[0],"left")?0:gt.sizeDiff.height,ne=H?0:gt.sizeDiff.width,fe={width:gt.helper.width()-ne,height:gt.helper.height()-Z},De=parseFloat(gt.element.css("left"))+(gt.position.left-gt.originalPosition.left)||null,Ue=parseFloat(gt.element.css("top"))+(gt.position.top-gt.originalPosition.top)||null,Qe.animate||this.element.css(o.extend(fe,{top:Ue,left:De})),gt.helper.height(gt.size.height),gt.helper.width(gt.size.width),this._helper&&!Qe.animate&&this._proportionallyResize()),o("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var b={};return this.position.top!==this.prevPosition.top&&(b.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(b.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(b.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(b.height=this.size.height+"px"),this.helper.css(b),b},_updateVirtualBoundaries:function(b){var k,H,Z,ne,fe,De=this.options;fe={minWidth:this._isNumber(De.minWidth)?De.minWidth:0,maxWidth:this._isNumber(De.maxWidth)?De.maxWidth:1/0,minHeight:this._isNumber(De.minHeight)?De.minHeight:0,maxHeight:this._isNumber(De.maxHeight)?De.maxHeight:1/0},(this._aspectRatio||b)&&(Z=fe.minWidth/this.aspectRatio,H=fe.maxHeight*this.aspectRatio,ne=fe.maxWidth/this.aspectRatio,(k=fe.minHeight*this.aspectRatio)>fe.minWidth&&(fe.minWidth=k),Z>fe.minHeight&&(fe.minHeight=Z),H<fe.maxWidth&&(fe.maxWidth=H),ne<fe.maxHeight&&(fe.maxHeight=ne)),this._vBoundaries=fe},_updateCache:function(b){this.offset=this.helper.offset(),this._isNumber(b.left)&&(this.position.left=b.left),this._isNumber(b.top)&&(this.position.top=b.top),this._isNumber(b.height)&&(this.size.height=b.height),this._isNumber(b.width)&&(this.size.width=b.width)},_updateRatio:function(b){var k=this.position,H=this.size,Z=this.axis;return this._isNumber(b.height)?b.width=b.height*this.aspectRatio:this._isNumber(b.width)&&(b.height=b.width/this.aspectRatio),"sw"===Z&&(b.left=k.left+(H.width-b.width),b.top=null),"nw"===Z&&(b.top=k.top+(H.height-b.height),b.left=k.left+(H.width-b.width)),b},_respectSize:function(b){var k=this._vBoundaries,H=this.axis,Z=this._isNumber(b.width)&&k.maxWidth&&k.maxWidth<b.width,ne=this._isNumber(b.height)&&k.maxHeight&&k.maxHeight<b.height,fe=this._isNumber(b.width)&&k.minWidth&&k.minWidth>b.width,De=this._isNumber(b.height)&&k.minHeight&&k.minHeight>b.height,Ue=this.originalPosition.left+this.originalSize.width,Qe=this.originalPosition.top+this.originalSize.height,gt=/sw|nw|w/.test(H),xt=/nw|ne|n/.test(H);return fe&&(b.width=k.minWidth),De&&(b.height=k.minHeight),Z&&(b.width=k.maxWidth),ne&&(b.height=k.maxHeight),fe&&gt&&(b.left=Ue-k.minWidth),Z&&gt&&(b.left=Ue-k.maxWidth),De&&xt&&(b.top=Qe-k.minHeight),ne&&xt&&(b.top=Qe-k.maxHeight),b.width||b.height||b.left||!b.top?!b.width&&!b.height&&!b.top&&b.left&&(b.left=null):b.top=null,b},_getPaddingPlusBorderDimensions:function(b){for(var k=0,H=[],Z=[b.css("borderTopWidth"),b.css("borderRightWidth"),b.css("borderBottomWidth"),b.css("borderLeftWidth")],ne=[b.css("paddingTop"),b.css("paddingRight"),b.css("paddingBottom"),b.css("paddingLeft")];k<4;k++)H[k]=parseFloat(Z[k])||0,H[k]+=parseFloat(ne[k])||0;return{height:H[0]+H[2],width:H[1]+H[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b,k=0,H=this.helper||this.element;k<this._proportionallyResizeElements.length;k++)b=this._proportionallyResizeElements[k],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(b)),b.css({height:H.height()-this.outerDimensions.height||0,width:H.width()-this.outerDimensions.width||0})},_renderProxy:function(){var k=this.options;this.elementOffset=this.element.offset(),this._helper?(this.helper=this.helper||o("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++k.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(b,k){return{width:this.originalSize.width+k}},w:function(b,k){return{left:this.originalPosition.left+k,width:this.originalSize.width-k}},n:function(b,k,H){return{top:this.originalPosition.top+H,height:this.originalSize.height-H}},s:function(b,k,H){return{height:this.originalSize.height+H}},se:function(b,k,H){return o.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,k,H]))},sw:function(b,k,H){return o.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,k,H]))},ne:function(b,k,H){return o.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,k,H]))},nw:function(b,k,H){return o.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,k,H]))}},_propagate:function(b,k){o.ui.plugin.call(this,b,[k,this.ui()]),"resize"!==b&&this._trigger(b,k,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),o.ui.plugin.add("resizable","animate",{stop:function(b){var k=o(this).resizable("instance"),H=k.options,Z=k._proportionallyResizeElements,ne=Z.length&&/textarea/i.test(Z[0].nodeName),fe=ne&&k._hasScroll(Z[0],"left")?0:k.sizeDiff.height,Ue={width:k.size.width-(ne?0:k.sizeDiff.width),height:k.size.height-fe},Qe=parseFloat(k.element.css("left"))+(k.position.left-k.originalPosition.left)||null,gt=parseFloat(k.element.css("top"))+(k.position.top-k.originalPosition.top)||null;k.element.animate(o.extend(Ue,gt&&Qe?{top:gt,left:Qe}:{}),{duration:H.animateDuration,easing:H.animateEasing,step:function(){var xt={width:parseFloat(k.element.css("width")),height:parseFloat(k.element.css("height")),top:parseFloat(k.element.css("top")),left:parseFloat(k.element.css("left"))};Z&&Z.length&&o(Z[0]).css({width:xt.width,height:xt.height}),k._updateCache(xt),k._propagate("resize",b)}})}}),o.ui.plugin.add("resizable","containment",{start:function(){var b,k,H,Z,ne,fe,De,Ue=o(this).resizable("instance"),gt=Ue.element,xt=Ue.options.containment,Jt=xt instanceof o?xt.get(0):/parent/.test(xt)?gt.parent().get(0):xt;!Jt||(Ue.containerElement=o(Jt),/document/.test(xt)||xt===document?(Ue.containerOffset={left:0,top:0},Ue.containerPosition={left:0,top:0},Ue.parentData={element:o(document),left:0,top:0,width:o(document).width(),height:o(document).height()||document.body.parentNode.scrollHeight}):(b=o(Jt),k=[],o(["Top","Right","Left","Bottom"]).each(function(Ct,Ht){k[Ct]=Ue._num(b.css("padding"+Ht))}),Ue.containerOffset=b.offset(),Ue.containerPosition=b.position(),Ue.containerSize={height:b.innerHeight()-k[3],width:b.innerWidth()-k[1]},H=Ue.containerOffset,Z=Ue.containerSize.height,ne=Ue.containerSize.width,fe=Ue._hasScroll(Jt,"left")?Jt.scrollWidth:ne,De=Ue._hasScroll(Jt)?Jt.scrollHeight:Z,Ue.parentData={element:Jt,left:H.left,top:H.top,width:fe,height:De}))},resize:function(b){var k,H,Z,ne,fe=o(this).resizable("instance"),De=fe.options,Ue=fe.containerOffset,Qe=fe.position,gt=fe._aspectRatio||b.shiftKey,xt={top:0,left:0},Jt=fe.containerElement,Ct=!0;Jt[0]!==document&&/static/.test(Jt.css("position"))&&(xt=Ue),Qe.left<(fe._helper?Ue.left:0)&&(fe.size.width=fe.size.width+(fe._helper?fe.position.left-Ue.left:fe.position.left-xt.left),gt&&(fe.size.height=fe.size.width/fe.aspectRatio,Ct=!1),fe.position.left=De.helper?Ue.left:0),Qe.top<(fe._helper?Ue.top:0)&&(fe.size.height=fe.size.height+(fe._helper?fe.position.top-Ue.top:fe.position.top),gt&&(fe.size.width=fe.size.height*fe.aspectRatio,Ct=!1),fe.position.top=fe._helper?Ue.top:0),Z=fe.containerElement.get(0)===fe.element.parent().get(0),ne=/relative|absolute/.test(fe.containerElement.css("position")),Z&&ne?(fe.offset.left=fe.parentData.left+fe.position.left,fe.offset.top=fe.parentData.top+fe.position.top):(fe.offset.left=fe.element.offset().left,fe.offset.top=fe.element.offset().top),k=Math.abs(fe.sizeDiff.width+(fe._helper?fe.offset.left-xt.left:fe.offset.left-Ue.left)),H=Math.abs(fe.sizeDiff.height+(fe._helper?fe.offset.top-xt.top:fe.offset.top-Ue.top)),k+fe.size.width>=fe.parentData.width&&(fe.size.width=fe.parentData.width-k,gt&&(fe.size.height=fe.size.width/fe.aspectRatio,Ct=!1)),H+fe.size.height>=fe.parentData.height&&(fe.size.height=fe.parentData.height-H,gt&&(fe.size.width=fe.size.height*fe.aspectRatio,Ct=!1)),Ct||(fe.position.left=fe.prevPosition.left,fe.position.top=fe.prevPosition.top,fe.size.width=fe.prevSize.width,fe.size.height=fe.prevSize.height)},stop:function(){var b=o(this).resizable("instance"),k=b.options,H=b.containerOffset,Z=b.containerPosition,ne=b.containerElement,fe=o(b.helper),De=fe.offset(),Ue=fe.outerWidth()-b.sizeDiff.width,Qe=fe.outerHeight()-b.sizeDiff.height;b._helper&&!k.animate&&/relative/.test(ne.css("position"))&&o(this).css({left:De.left-Z.left-H.left,width:Ue,height:Qe}),b._helper&&!k.animate&&/static/.test(ne.css("position"))&&o(this).css({left:De.left-Z.left-H.left,width:Ue,height:Qe})}}),o.ui.plugin.add("resizable","alsoResize",{start:function(){var b=o(this).resizable("instance");o(b.options.alsoResize).each(function(){var H=o(this);H.data("ui-resizable-alsoresize",{width:parseFloat(H.width()),height:parseFloat(H.height()),left:parseFloat(H.css("left")),top:parseFloat(H.css("top"))})})},resize:function(b,k){var H=o(this).resizable("instance"),ne=H.originalSize,fe=H.originalPosition,De={height:H.size.height-ne.height||0,width:H.size.width-ne.width||0,top:H.position.top-fe.top||0,left:H.position.left-fe.left||0};o(H.options.alsoResize).each(function(){var Ue=o(this),Qe=o(this).data("ui-resizable-alsoresize"),gt={},xt=Ue.parents(k.originalElement[0]).length?["width","height"]:["width","height","top","left"];o.each(xt,function(Jt,Ct){var Ht=(Qe[Ct]||0)+(De[Ct]||0);Ht&&Ht>=0&&(gt[Ct]=Ht||null)}),Ue.css(gt)})},stop:function(){o(this).removeData("ui-resizable-alsoresize")}}),o.ui.plugin.add("resizable","ghost",{start:function(){var b=o(this).resizable("instance"),k=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:k.height,width:k.width,margin:0,left:0,top:0}),b._addClass(b.ghost,"ui-resizable-ghost"),!1!==o.uiBackCompat&&"string"==typeof b.options.ghost&&b.ghost.addClass(this.options.ghost),b.ghost.appendTo(b.helper)},resize:function(){var b=o(this).resizable("instance");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=o(this).resizable("instance");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),o.ui.plugin.add("resizable","grid",{resize:function(){var b,k=o(this).resizable("instance"),H=k.options,Z=k.size,ne=k.originalSize,fe=k.originalPosition,De=k.axis,Ue="number"==typeof H.grid?[H.grid,H.grid]:H.grid,Qe=Ue[0]||1,gt=Ue[1]||1,xt=Math.round((Z.width-ne.width)/Qe)*Qe,Jt=Math.round((Z.height-ne.height)/gt)*gt,Ct=ne.width+xt,Ht=ne.height+Jt,en=H.maxWidth&&H.maxWidth<Ct,St=H.maxHeight&&H.maxHeight<Ht,Kt=H.minWidth&&H.minWidth>Ct,gn=H.minHeight&&H.minHeight>Ht;H.grid=Ue,Kt&&(Ct+=Qe),gn&&(Ht+=gt),en&&(Ct-=Qe),St&&(Ht-=gt),/^(se|s|e)$/.test(De)?(k.size.width=Ct,k.size.height=Ht):/^(ne)$/.test(De)?(k.size.width=Ct,k.size.height=Ht,k.position.top=fe.top-Jt):/^(sw)$/.test(De)?(k.size.width=Ct,k.size.height=Ht,k.position.left=fe.left-xt):((Ht-gt<=0||Ct-Qe<=0)&&(b=k._getPaddingPlusBorderDimensions(this)),Ht-gt>0?(k.size.height=Ht,k.position.top=fe.top-Jt):(k.size.height=Ht=gt-b.height,k.position.top=fe.top+ne.height-Ht),Ct-Qe>0?(k.size.width=Ct,k.position.left=fe.left-xt):(k.size.width=Ct=Qe-b.width,k.position.left=fe.left+ne.width-Ct))}}),o.widget("ui.selectable",o.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){b.elementPos=o(b.element[0]).offset(),b.selectees=o(b.options.filter,b.element[0]),b._addClass(b.selectees,"ui-selectee"),b.selectees.each(function(){var k=o(this),H=k.offset(),Z={left:H.left-b.elementPos.left,top:H.top-b.elementPos.top};o.data(this,"selectable-item",{element:this,$element:k,left:Z.left,top:Z.top,right:Z.left+k.outerWidth(),bottom:Z.top+k.outerHeight(),startselected:!1,selected:k.hasClass("ui-selected"),selecting:k.hasClass("ui-selecting"),unselecting:k.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=o("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(b){var k=this,H=this.options;this.opos=[b.pageX,b.pageY],this.elementPos=o(this.element[0]).offset(),!this.options.disabled&&(this.selectees=o(H.filter,this.element[0]),this._trigger("start",b),o(H.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),H.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var Z=o.data(this,"selectable-item");Z.startselected=!0,!b.metaKey&&!b.ctrlKey&&(k._removeClass(Z.$element,"ui-selected"),Z.selected=!1,k._addClass(Z.$element,"ui-unselecting"),Z.unselecting=!0,k._trigger("unselecting",b,{unselecting:Z.element}))}),o(b.target).parents().addBack().each(function(){var Z,ne=o.data(this,"selectable-item");if(ne)return Z=!b.metaKey&&!b.ctrlKey||!ne.$element.hasClass("ui-selected"),k._removeClass(ne.$element,Z?"ui-unselecting":"ui-selected")._addClass(ne.$element,Z?"ui-selecting":"ui-unselecting"),ne.unselecting=!Z,ne.selecting=Z,ne.selected=Z,Z?k._trigger("selecting",b,{selecting:ne.element}):k._trigger("unselecting",b,{unselecting:ne.element}),!1}))},_mouseDrag:function(b){if(this.dragged=!0,!this.options.disabled){var k,H=this,Z=this.options,ne=this.opos[0],fe=this.opos[1],De=b.pageX,Ue=b.pageY;return ne>De&&(k=De,De=ne,ne=k),fe>Ue&&(k=Ue,Ue=fe,fe=k),this.helper.css({left:ne,top:fe,width:De-ne,height:Ue-fe}),this.selectees.each(function(){var Qe=o.data(this,"selectable-item"),gt=!1,xt={};!Qe||Qe.element===H.element[0]||(xt.left=Qe.left+H.elementPos.left,xt.right=Qe.right+H.elementPos.left,xt.top=Qe.top+H.elementPos.top,xt.bottom=Qe.bottom+H.elementPos.top,"touch"===Z.tolerance?gt=!(xt.left>De||xt.right<ne||xt.top>Ue||xt.bottom<fe):"fit"===Z.tolerance&&(gt=xt.left>ne&&xt.right<De&&xt.top>fe&&xt.bottom<Ue),gt?(Qe.selected&&(H._removeClass(Qe.$element,"ui-selected"),Qe.selected=!1),Qe.unselecting&&(H._removeClass(Qe.$element,"ui-unselecting"),Qe.unselecting=!1),Qe.selecting||(H._addClass(Qe.$element,"ui-selecting"),Qe.selecting=!0,H._trigger("selecting",b,{selecting:Qe.element}))):(Qe.selecting&&((b.metaKey||b.ctrlKey)&&Qe.startselected?(H._removeClass(Qe.$element,"ui-selecting"),Qe.selecting=!1,H._addClass(Qe.$element,"ui-selected"),Qe.selected=!0):(H._removeClass(Qe.$element,"ui-selecting"),Qe.selecting=!1,Qe.startselected&&(H._addClass(Qe.$element,"ui-unselecting"),Qe.unselecting=!0),H._trigger("unselecting",b,{unselecting:Qe.element}))),Qe.selected&&!b.metaKey&&!b.ctrlKey&&!Qe.startselected&&(H._removeClass(Qe.$element,"ui-selected"),Qe.selected=!1,H._addClass(Qe.$element,"ui-unselecting"),Qe.unselecting=!0,H._trigger("unselecting",b,{unselecting:Qe.element}))))}),!1}},_mouseStop:function(b){var k=this;return this.dragged=!1,o(".ui-unselecting",this.element[0]).each(function(){var H=o.data(this,"selectable-item");k._removeClass(H.$element,"ui-unselecting"),H.unselecting=!1,H.startselected=!1,k._trigger("unselected",b,{unselected:H.element})}),o(".ui-selecting",this.element[0]).each(function(){var H=o.data(this,"selectable-item");k._removeClass(H.$element,"ui-selecting")._addClass(H.$element,"ui-selected"),H.selecting=!1,H.selected=!0,H.startselected=!0,k._trigger("selected",b,{selected:H.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),o.widget("ui.sortable",o.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(b,k,H){return b>=k&&b<k+H},_isFloating:function(b){return/left|right/.test(b.css("float"))||/inline|table-cell/.test(b.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(b,k){this._super(b,k),"handle"===b&&this._setHandleClassName()},_setHandleClassName:function(){var b=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),o.each(this.items,function(){b._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(b,k){var H=null,Z=!1,ne=this;return!(this.reverting||this.options.disabled||"static"===this.options.type||(this._refreshItems(b),o(b.target).parents().each(function(){if(o.data(this,ne.widgetName+"-item")===ne)return H=o(this),!1}),o.data(b.target,ne.widgetName+"-item")===ne&&(H=o(b.target)),!H)||this.options.handle&&!k&&(o(this.options.handle,H).find("*").addBack().each(function(){this===b.target&&(Z=!0)}),!Z)||(this.currentItem=H,this._removeCurrentsFromItems(),0))},_mouseStart:function(b,k,H){var Z,ne,fe=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},o.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,fe.cursorAt&&this._adjustOffsetFromHelper(fe.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),fe.containment&&this._setContainment(),fe.cursor&&"auto"!==fe.cursor&&(ne=this.document.find("body"),this.storedCursor=ne.css("cursor"),ne.css("cursor",fe.cursor),this.storedStylesheet=o("<style>*{ cursor: "+fe.cursor+" !important; }</style>").appendTo(ne)),fe.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",fe.opacity)),fe.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",fe.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!H)for(Z=this.containers.length-1;Z>=0;Z--)this.containers[Z]._trigger("activate",b,this._uiHash(this));return o.ui.ddmanager&&(o.ui.ddmanager.current=this),o.ui.ddmanager&&!fe.dropBehaviour&&o.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var k,H,Z,ne,fe=this.options,De=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<fe.scrollSensitivity?this.scrollParent[0].scrollTop=De=this.scrollParent[0].scrollTop+fe.scrollSpeed:b.pageY-this.overflowOffset.top<fe.scrollSensitivity&&(this.scrollParent[0].scrollTop=De=this.scrollParent[0].scrollTop-fe.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<fe.scrollSensitivity?this.scrollParent[0].scrollLeft=De=this.scrollParent[0].scrollLeft+fe.scrollSpeed:b.pageX-this.overflowOffset.left<fe.scrollSensitivity&&(this.scrollParent[0].scrollLeft=De=this.scrollParent[0].scrollLeft-fe.scrollSpeed)):(b.pageY-this.document.scrollTop()<fe.scrollSensitivity?De=this.document.scrollTop(this.document.scrollTop()-fe.scrollSpeed):this.window.height()-(b.pageY-this.document.scrollTop())<fe.scrollSensitivity&&(De=this.document.scrollTop(this.document.scrollTop()+fe.scrollSpeed)),b.pageX-this.document.scrollLeft()<fe.scrollSensitivity?De=this.document.scrollLeft(this.document.scrollLeft()-fe.scrollSpeed):this.window.width()-(b.pageX-this.document.scrollLeft())<fe.scrollSensitivity&&(De=this.document.scrollLeft(this.document.scrollLeft()+fe.scrollSpeed))),!1!==De&&o.ui.ddmanager&&!fe.dropBehaviour&&o.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),(!this.options.axis||"y"!==this.options.axis)&&(this.helper[0].style.left=this.position.left+"px"),(!this.options.axis||"x"!==this.options.axis)&&(this.helper[0].style.top=this.position.top+"px"),k=this.items.length-1;k>=0;k--)if(Z=(H=this.items[k]).item[0],(ne=this._intersectsWithPointer(H))&&H.instance===this.currentContainer&&Z!==this.currentItem[0]&&this.placeholder[1===ne?"next":"prev"]()[0]!==Z&&!o.contains(this.placeholder[0],Z)&&("semi-dynamic"!==this.options.type||!o.contains(this.element[0],Z))){if(this.direction=1===ne?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(H))break;this._rearrange(b,H),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),o.ui.ddmanager&&o.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,k){if(b){if(o.ui.ddmanager&&!this.options.dropBehaviour&&o.ui.ddmanager.drop(this,b),this.options.revert){var H=this,Z=this.placeholder.offset(),ne=this.options.axis,fe={};(!ne||"x"===ne)&&(fe.left=Z.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),(!ne||"y"===ne)&&(fe.top=Z.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,o(this.helper).animate(fe,parseInt(this.options.revert,10)||500,function(){H._clear(b)})}else this._clear(b,k);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new o.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),o.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?o(this.domPosition.prev).after(this.currentItem):o(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var k=this._getItemsAsjQuery(b&&b.connected),H=[];return b=b||{},o(k).each(function(){var Z=(o(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);Z&&H.push((b.key||Z[1]+"[]")+"="+(b.key&&b.expression?Z[1]:Z[2]))}),!H.length&&b.key&&H.push(b.key+"="),H.join("&")},toArray:function(b){var k=this._getItemsAsjQuery(b&&b.connected),H=[];return b=b||{},k.each(function(){H.push(o(b.item||this).attr(b.attribute||"id")||"")}),H},_intersectsWith:function(b){var k=this.positionAbs.left,Z=this.positionAbs.top,fe=b.left,De=fe+b.width,Ue=b.top,Qe=Ue+b.height,gt=this.offset.click.top,xt=this.offset.click.left;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>b[this.floating?"width":"height"]?("x"===this.options.axis||Z+gt>Ue&&Z+gt<Qe)&&("y"===this.options.axis||k+xt>fe&&k+xt<De):fe<k+this.helperProportions.width/2&&k+this.helperProportions.width-this.helperProportions.width/2<De&&Ue<Z+this.helperProportions.height/2&&Z+this.helperProportions.height-this.helperProportions.height/2<Qe},_intersectsWithPointer:function(b){var k,H,Z="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),ne="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width);return!(!Z||!ne)&&(k=this._getDragVerticalDirection(),H=this._getDragHorizontalDirection(),this.floating?"right"===H||"down"===k?2:1:k&&("down"===k?2:1))},_intersectsWithSides:function(b){var k=this._isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),H=this._isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),Z=this._getDragVerticalDirection(),ne=this._getDragHorizontalDirection();return this.floating&&ne?"right"===ne&&H||"left"===ne&&!H:Z&&("down"===Z&&k||"up"===Z&&!k)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return 0!==b&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return 0!==b&&(b>0?"right":"left")},refresh:function(b){return this._refreshItems(b),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var b=this.options;return b.connectWith.constructor===String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(b){var k,H,Z,ne,fe=[],De=[],Ue=this._connectWith();if(Ue&&b)for(k=Ue.length-1;k>=0;k--)for(H=(Z=o(Ue[k],this.document[0])).length-1;H>=0;H--)(ne=o.data(Z[H],this.widgetFullName))&&ne!==this&&!ne.options.disabled&&De.push([o.isFunction(ne.options.items)?ne.options.items.call(ne.element):o(ne.options.items,ne.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),ne]);function Qe(){fe.push(this)}for(De.push([o.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):o(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),k=De.length-1;k>=0;k--)De[k][0].each(Qe);return o(fe)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=o.grep(this.items,function(k){for(var H=0;H<b.length;H++)if(b[H]===k.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var k,H,Z,ne,fe,De,Ue,Qe,gt=this.items,xt=[[o.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):o(this.options.items,this.element),this]],Jt=this._connectWith();if(Jt&&this.ready)for(k=Jt.length-1;k>=0;k--)for(H=(Z=o(Jt[k],this.document[0])).length-1;H>=0;H--)(ne=o.data(Z[H],this.widgetFullName))&&ne!==this&&!ne.options.disabled&&(xt.push([o.isFunction(ne.options.items)?ne.options.items.call(ne.element[0],b,{item:this.currentItem}):o(ne.options.items,ne.element),ne]),this.containers.push(ne));for(k=xt.length-1;k>=0;k--)for(fe=xt[k][1],H=0,Qe=(De=xt[k][0]).length;H<Qe;H++)(Ue=o(De[H])).data(this.widgetName+"-item",fe),gt.push({item:Ue,instance:fe,width:0,height:0,left:0,top:0})},refreshPositions:function(b){var k,H,Z,ne;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),k=this.items.length-1;k>=0;k--)((H=this.items[k]).instance===this.currentContainer||!this.currentContainer||H.item[0]===this.currentItem[0])&&(Z=this.options.toleranceElement?o(this.options.toleranceElement,H.item):H.item,b||(H.width=Z.outerWidth(),H.height=Z.outerHeight()),ne=Z.offset(),H.left=ne.left,H.top=ne.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(k=this.containers.length-1;k>=0;k--)ne=this.containers[k].element.offset(),this.containers[k].containerCache.left=ne.left,this.containers[k].containerCache.top=ne.top,this.containers[k].containerCache.width=this.containers[k].element.outerWidth(),this.containers[k].containerCache.height=this.containers[k].element.outerHeight();return this},_createPlaceholder:function(b){var k,H=(b=b||this).options;(!H.placeholder||H.placeholder.constructor===String)&&(k=H.placeholder,H.placeholder={element:function(){var Z=b.currentItem[0].nodeName.toLowerCase(),ne=o("<"+Z+">",b.document[0]);return b._addClass(ne,"ui-sortable-placeholder",k||b.currentItem[0].className)._removeClass(ne,"ui-sortable-helper"),"tbody"===Z?b._createTrPlaceholder(b.currentItem.find("tr").eq(0),o("<tr>",b.document[0]).appendTo(ne)):"tr"===Z?b._createTrPlaceholder(b.currentItem,ne):"img"===Z&&ne.attr("src",b.currentItem.attr("src")),k||ne.css("visibility","hidden"),ne},update:function(Z,ne){k&&!H.forcePlaceholderSize||(ne.height()||ne.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),ne.width()||ne.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=o(H.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),H.placeholder.update(b,b.placeholder)},_createTrPlaceholder:function(b,k){var H=this;b.children().each(function(){o("<td>&#160;</td>",H.document[0]).attr("colspan",o(this).attr("colspan")||1).appendTo(k)})},_contactContainers:function(b){var k,H,Z,ne,fe,De,Ue,Qe,gt,xt,Jt=null,Ct=null;for(k=this.containers.length-1;k>=0;k--)if(!o.contains(this.currentItem[0],this.containers[k].element[0]))if(this._intersectsWith(this.containers[k].containerCache)){if(Jt&&o.contains(this.containers[k].element[0],Jt.element[0]))continue;Jt=this.containers[k],Ct=k}else this.containers[k].containerCache.over&&(this.containers[k]._trigger("out",b,this._uiHash(this)),this.containers[k].containerCache.over=0);if(Jt)if(1===this.containers.length)this.containers[Ct].containerCache.over||(this.containers[Ct]._trigger("over",b,this._uiHash(this)),this.containers[Ct].containerCache.over=1);else{for(Z=1e4,ne=null,fe=(gt=Jt.floating||this._isFloating(this.currentItem))?"left":"top",De=gt?"width":"height",xt=gt?"pageX":"pageY",H=this.items.length-1;H>=0;H--)!o.contains(this.containers[Ct].element[0],this.items[H].item[0])||this.items[H].item[0]!==this.currentItem[0]&&(Ue=this.items[H].item.offset()[fe],Qe=!1,b[xt]-Ue>this.items[H][De]/2&&(Qe=!0),Math.abs(b[xt]-Ue)<Z&&(Z=Math.abs(b[xt]-Ue),ne=this.items[H],this.direction=Qe?"up":"down"));if(!ne&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[Ct])return void(this.currentContainer.containerCache.over||(this.containers[Ct]._trigger("over",b,this._uiHash()),this.currentContainer.containerCache.over=1));ne?this._rearrange(b,ne,null,!0):this._rearrange(b,null,this.containers[Ct].element,!0),this._trigger("change",b,this._uiHash()),this.containers[Ct]._trigger("change",b,this._uiHash(this)),this.currentContainer=this.containers[Ct],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[Ct]._trigger("over",b,this._uiHash(this)),this.containers[Ct].containerCache.over=1}},_createHelper:function(b){var k=this.options,H=o.isFunction(k.helper)?o(k.helper.apply(this.element[0],[b,this.currentItem])):"clone"===k.helper?this.currentItem.clone():this.currentItem;return H.parents("body").length||o("parent"!==k.appendTo?k.appendTo:this.currentItem[0].parentNode)[0].appendChild(H[0]),H[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!H[0].style.width||k.forceHelperSize)&&H.width(this.currentItem.width()),(!H[0].style.height||k.forceHelperSize)&&H.height(this.currentItem.height()),H},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),o.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&o.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&o.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,k,H,Z=this.options;"parent"===Z.containment&&(Z.containment=this.helper[0].parentNode),("document"===Z.containment||"window"===Z.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===Z.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===Z.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(Z.containment)||(b=o(Z.containment)[0],k=o(Z.containment).offset(),H="hidden"!==o(b).css("overflow"),this.containment=[k.left+(parseInt(o(b).css("borderLeftWidth"),10)||0)+(parseInt(o(b).css("paddingLeft"),10)||0)-this.margins.left,k.top+(parseInt(o(b).css("borderTopWidth"),10)||0)+(parseInt(o(b).css("paddingTop"),10)||0)-this.margins.top,k.left+(H?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(o(b).css("borderLeftWidth"),10)||0)-(parseInt(o(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,k.top+(H?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(o(b).css("borderTopWidth"),10)||0)-(parseInt(o(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,k){k||(k=this.position);var H="absolute"===b?1:-1,Z="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&o.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,ne=/(html|body)/i.test(Z[0].tagName);return{top:k.top+this.offset.relative.top*H+this.offset.parent.top*H-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():ne?0:Z.scrollTop())*H,left:k.left+this.offset.relative.left*H+this.offset.parent.left*H-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():ne?0:Z.scrollLeft())*H}},_generatePosition:function(b){var k,H,Z=this.options,ne=b.pageX,fe=b.pageY,De="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&o.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,Ue=/(html|body)/i.test(De[0].tagName);return"relative"===this.cssPosition&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(ne=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(fe=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(ne=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(fe=this.containment[3]+this.offset.click.top)),Z.grid&&(k=this.originalPageY+Math.round((fe-this.originalPageY)/Z.grid[1])*Z.grid[1],fe=this.containment?k-this.offset.click.top>=this.containment[1]&&k-this.offset.click.top<=this.containment[3]?k:k-this.offset.click.top>=this.containment[1]?k-Z.grid[1]:k+Z.grid[1]:k,H=this.originalPageX+Math.round((ne-this.originalPageX)/Z.grid[0])*Z.grid[0],ne=this.containment?H-this.offset.click.left>=this.containment[0]&&H-this.offset.click.left<=this.containment[2]?H:H-this.offset.click.left>=this.containment[0]?H-Z.grid[0]:H+Z.grid[0]:H)),{top:fe-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():Ue?0:De.scrollTop()),left:ne-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():Ue?0:De.scrollLeft())}},_rearrange:function(b,k,H,Z){H?H[0].appendChild(this.placeholder[0]):k.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?k.item[0]:k.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var ne=this.counter;this._delay(function(){ne===this.counter&&this.refreshPositions(!Z)})},_clear:function(b,k){this.reverting=!1;var H,Z=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(H in this._storedCSS)("auto"===this._storedCSS[H]||"static"===this._storedCSS[H])&&(this._storedCSS[H]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function ne(fe,De,Ue){return function(Qe){Ue._trigger(fe,Qe,De._uiHash(De))}}for(this.fromOutside&&!k&&Z.push(function(fe){this._trigger("receive",fe,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!k&&Z.push(function(fe){this._trigger("update",fe,this._uiHash())}),this!==this.currentContainer&&(k||(Z.push(function(fe){this._trigger("remove",fe,this._uiHash())}),Z.push(function(fe){return function(De){fe._trigger("receive",De,this._uiHash(this))}}.call(this,this.currentContainer)),Z.push(function(fe){return function(De){fe._trigger("update",De,this._uiHash(this))}}.call(this,this.currentContainer)))),H=this.containers.length-1;H>=0;H--)k||Z.push(ne("deactivate",this,this.containers[H])),this.containers[H].containerCache.over&&(Z.push(ne("out",this,this.containers[H])),this.containers[H].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,k||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!k){for(H=0;H<Z.length;H++)Z[H].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===o.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var k=b||this;return{helper:k.helper,placeholder:k.placeholder||o([]),position:k.position,originalPosition:k.originalPosition,offset:k.positionAbs,item:k.currentItem,sender:b?b.element:null}}}),o.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var b=this.options;this.prevShow=this.prevHide=o(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),!b.collapsible&&(!1===b.active||null==b.active)&&(b.active=0),this._processPanels(),b.active<0&&(b.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():o()}},_createIcons:function(){var b,k,H=this.options.icons;H&&(b=o("<span>"),this._addClass(b,"ui-accordion-header-icon","ui-icon "+H.header),b.prependTo(this.headers),k=this.active.children(".ui-accordion-header-icon"),this._removeClass(k,H.header)._addClass(k,null,H.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var b;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),b=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&b.css("height","")},_setOption:function(b,k){"active"!==b?("event"===b&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(k)),this._super(b,k),"collapsible"===b&&!k&&!1===this.options.active&&this._activate(0),"icons"===b&&(this._destroyIcons(),k&&this._createIcons())):this._activate(k)},_setOptionDisabled:function(b){this._super(b),this.element.attr("aria-disabled",b),this._toggleClass(null,"ui-state-disabled",!!b),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!b)},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var k=o.ui.keyCode,H=this.headers.length,Z=this.headers.index(b.target),ne=!1;switch(b.keyCode){case k.RIGHT:case k.DOWN:ne=this.headers[(Z+1)%H];break;case k.LEFT:case k.UP:ne=this.headers[(Z-1+H)%H];break;case k.SPACE:case k.ENTER:this._eventHandler(b);break;case k.HOME:ne=this.headers[0];break;case k.END:ne=this.headers[H-1]}ne&&(o(b.target).attr("tabIndex",-1),o(ne).attr("tabIndex",0),o(ne).trigger("focus"),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===o.ui.keyCode.UP&&b.ctrlKey&&o(b.currentTarget).prev().trigger("focus")},refresh:function(){var b=this.options;this._processPanels(),!1===b.active&&!0===b.collapsible||!this.headers.length?(b.active=!1,this.active=o()):!1===b.active?this._activate(0):this.active.length&&!o.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(b.active=!1,this.active=o()):this._activate(Math.max(0,b.active-1)):b.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var b=this.headers,k=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),k&&(this._off(b.not(this.headers)),this._off(k.not(this.panels)))},_refresh:function(){var b,k=this.options,H=k.heightStyle,Z=this.element.parent();this.active=this._findActive(k.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var ne=o(this),fe=ne.uniqueId().attr("id"),De=ne.next(),Ue=De.uniqueId().attr("id");ne.attr("aria-controls",Ue),De.attr("aria-labelledby",fe)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(k.event),"fill"===H?(b=Z.height(),this.element.siblings(":visible").each(function(){var ne=o(this),fe=ne.css("position");"absolute"===fe||"fixed"===fe||(b-=ne.outerHeight(!0))}),this.headers.each(function(){b-=o(this).outerHeight(!0)}),this.headers.next().each(function(){o(this).height(Math.max(0,b-o(this).innerHeight()+o(this).height()))}).css("overflow","auto")):"auto"===H&&(b=0,this.headers.next().each(function(){var ne=o(this).is(":visible");ne||o(this).show(),b=Math.max(b,o(this).css("height","").height()),ne||o(this).hide()}).height(b))},_activate:function(b){var k=this._findActive(b)[0];k!==this.active[0]&&this._eventHandler({target:k=k||this.active[0],currentTarget:k,preventDefault:o.noop})},_findActive:function(b){return"number"==typeof b?this.headers.eq(b):o()},_setupEvents:function(b){var k={keydown:"_keydown"};b&&o.each(b.split(" "),function(H,Z){k[Z]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,k),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(b){var k,H,Z=this.options,ne=this.active,fe=o(b.currentTarget),De=fe[0]===ne[0],Ue=De&&Z.collapsible,Qe=Ue?o():fe.next(),gt=ne.next(),xt={oldHeader:ne,oldPanel:gt,newHeader:Ue?o():fe,newPanel:Qe};b.preventDefault(),(!De||Z.collapsible)&&!1!==this._trigger("beforeActivate",b,xt)&&(Z.active=!Ue&&this.headers.index(fe),this.active=De?o():fe,this._toggle(xt),this._removeClass(ne,"ui-accordion-header-active","ui-state-active"),Z.icons&&(k=ne.children(".ui-accordion-header-icon"),this._removeClass(k,null,Z.icons.activeHeader)._addClass(k,null,Z.icons.header)),De||(this._removeClass(fe,"ui-accordion-header-collapsed")._addClass(fe,"ui-accordion-header-active","ui-state-active"),Z.icons&&(H=fe.children(".ui-accordion-header-icon"),this._removeClass(H,null,Z.icons.header)._addClass(H,null,Z.icons.activeHeader)),this._addClass(fe.next(),"ui-accordion-content-active")))},_toggle:function(b){var k=b.newPanel,H=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=k,this.prevHide=H,this.options.animate?this._animate(k,H,b):(H.hide(),k.show(),this._toggleComplete(b)),H.attr({"aria-hidden":"true"}),H.prev().attr({"aria-selected":"false","aria-expanded":"false"}),k.length&&H.length?H.prev().attr({tabIndex:-1,"aria-expanded":"false"}):k.length&&this.headers.filter(function(){return 0===parseInt(o(this).attr("tabIndex"),10)}).attr("tabIndex",-1),k.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(b,k,H){var Z,ne,fe,De=this,Ue=0,Qe=b.css("box-sizing"),gt=b.length&&(!k.length||b.index()<k.index()),xt=this.options.animate||{},Jt=gt&&xt.down||xt,Ct=function(){De._toggleComplete(H)};return"number"==typeof Jt&&(fe=Jt),"string"==typeof Jt&&(ne=Jt),ne=ne||Jt.easing||xt.easing,fe=fe||Jt.duration||xt.duration,k.length?b.length?(Z=b.show().outerHeight(),k.animate(this.hideProps,{duration:fe,easing:ne,step:function(Ht,en){en.now=Math.round(Ht)}}),void b.hide().animate(this.showProps,{duration:fe,easing:ne,complete:Ct,step:function(Ht,en){en.now=Math.round(Ht),"height"!==en.prop?"content-box"===Qe&&(Ue+=en.now):"content"!==De.options.heightStyle&&(en.now=Math.round(Z-k.outerHeight()-Ue),Ue=0)}})):k.animate(this.hideProps,fe,ne,Ct):b.animate(this.showProps,fe,ne,Ct)},_toggleComplete:function(b){var k=b.oldPanel,H=k.prev();this._removeClass(k,"ui-accordion-content-active"),this._removeClass(H,"ui-accordion-header-active")._addClass(H,"ui-accordion-header-collapsed"),k.length&&(k.parent()[0].className=k.parent()[0].className),this._trigger("activate",null,b)}}),o.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(b){b.preventDefault()},"click .ui-menu-item":function(b){var k=o(b.target),H=o(o.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&k.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),k.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&H.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){if(!this.previousFilter){var k=o(b.target).closest(".ui-menu-item"),H=o(b.currentTarget);k[0]===H[0]&&(this._removeClass(H.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(b,H))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(b,k){var H=this.active||this.element.find(this.options.items).eq(0);k||this.focus(b,H)},blur:function(b){this._delay(function(){!o.contains(this.element[0],o.ui.safeActiveElement(this.document[0]))&&this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(b){this._closeOnDocumentClick(b)&&this.collapseAll(b),this.mouseHandled=!1}})},_destroy:function(){var k=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),k.children().each(function(){var H=o(this);H.data("ui-menu-submenu-caret")&&H.remove()})},_keydown:function(b){var k,H,Z,ne,fe=!0;switch(b.keyCode){case o.ui.keyCode.PAGE_UP:this.previousPage(b);break;case o.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case o.ui.keyCode.HOME:this._move("first","first",b);break;case o.ui.keyCode.END:this._move("last","last",b);break;case o.ui.keyCode.UP:this.previous(b);break;case o.ui.keyCode.DOWN:this.next(b);break;case o.ui.keyCode.LEFT:this.collapse(b);break;case o.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case o.ui.keyCode.ENTER:case o.ui.keyCode.SPACE:this._activate(b);break;case o.ui.keyCode.ESCAPE:this.collapse(b);break;default:fe=!1,H=this.previousFilter||"",ne=!1,Z=b.keyCode>=96&&b.keyCode<=105?(b.keyCode-96).toString():String.fromCharCode(b.keyCode),clearTimeout(this.filterTimer),Z===H?ne=!0:Z=H+Z,k=this._filterMenuItems(Z),(k=ne&&-1!==k.index(this.active.next())?this.active.nextAll(".ui-menu-item"):k).length||(Z=String.fromCharCode(b.keyCode),k=this._filterMenuItems(Z)),k.length?(this.focus(b,k),this.previousFilter=Z,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}fe&&b.preventDefault()},_activate:function(b){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(b):this.select(b))},refresh:function(){var k,H,Z,ne,fe=this,De=this.options.icons.submenu,Ue=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),H=Ue.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var Qe=o(this),gt=Qe.prev(),xt=o("<span>").data("ui-menu-submenu-caret",!0);fe._addClass(xt,"ui-menu-icon","ui-icon "+De),gt.attr("aria-haspopup","true").prepend(xt),Qe.attr("aria-labelledby",gt.attr("id"))}),this._addClass(H,"ui-menu","ui-widget ui-widget-content ui-front"),(k=Ue.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var Qe=o(this);fe._isDivider(Qe)&&fe._addClass(Qe,"ui-menu-divider","ui-widget-content")}),ne=(Z=k.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(Z,"ui-menu-item")._addClass(ne,"ui-menu-item-wrapper"),k.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!o.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(b,k){if("icons"===b){var H=this.element.find(".ui-menu-icon");this._removeClass(H,null,this.options.icons.submenu)._addClass(H,null,k.submenu)}this._super(b,k)},_setOptionDisabled:function(b){this._super(b),this.element.attr("aria-disabled",String(b)),this._toggleClass(null,"ui-state-disabled",!!b)},focus:function(b,k){var H,Z,ne;this.blur(b,b&&"focus"===b.type),this._scrollIntoView(k),this.active=k.first(),Z=this.active.children(".ui-menu-item-wrapper"),this._addClass(Z,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",Z.attr("id")),ne=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(ne,null,"ui-state-active"),b&&"keydown"===b.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(H=k.children(".ui-menu")).length&&b&&/^mouse/.test(b.type)&&this._startOpening(H),this.activeMenu=k.parent(),this._trigger("focus",b,{item:k})},_scrollIntoView:function(b){var k,H,Z,ne,fe,De;this._hasScroll()&&(k=parseFloat(o.css(this.activeMenu[0],"borderTopWidth"))||0,H=parseFloat(o.css(this.activeMenu[0],"paddingTop"))||0,Z=b.offset().top-this.activeMenu.offset().top-k-H,ne=this.activeMenu.scrollTop(),fe=this.activeMenu.height(),De=b.outerHeight(),Z<0?this.activeMenu.scrollTop(ne+Z):Z+De>fe&&this.activeMenu.scrollTop(ne+Z-fe+De))},blur:function(b,k){k||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",b,{item:this.active}),this.active=null)},_startOpening:function(b){clearTimeout(this.timer),"true"===b.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(b)},this.delay))},_open:function(b){var k=o.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(k)},collapseAll:function(b,k){clearTimeout(this.timer),this.timer=this._delay(function(){var H=k?this.element:o(b&&b.target).closest(this.element.find(".ui-menu"));H.length||(H=this.element),this._close(H),this.blur(b),this._removeClass(H.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=H},this.delay)},_close:function(b){b||(b=this.active?this.active.parent():this.element),b.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(b){return!o(b.target).closest(".ui-menu").length},_isDivider:function(b){return!/[^\-\u2014\u2013\s]/.test(b.text())},collapse:function(b){var k=this.active&&this.active.parent().closest(".ui-menu-item",this.element);k&&k.length&&(this._close(),this.focus(b,k))},expand:function(b){var k=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();k&&k.length&&(this._open(k.parent()),this._delay(function(){this.focus(b,k)}))},next:function(b){this._move("next","first",b)},previous:function(b){this._move("prev","last",b)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(b,k,H){var Z;this.active&&(Z="first"===b||"last"===b?this.active["first"===b?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[b+"All"](".ui-menu-item").eq(0)),(!Z||!Z.length||!this.active)&&(Z=this.activeMenu.find(this.options.items)[k]()),this.focus(H,Z)},nextPage:function(b){var k,H,Z;this.active?this.isLastItem()||(this._hasScroll()?(H=this.active.offset().top,Z=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(k=o(this)).offset().top-H-Z<0}),this.focus(b,k)):this.focus(b,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(b)},previousPage:function(b){var k,H,Z;this.active?this.isFirstItem()||(this._hasScroll()?(H=this.active.offset().top,Z=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return(k=o(this)).offset().top-H+Z>0}),this.focus(b,k)):this.focus(b,this.activeMenu.find(this.options.items).first())):this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||o(b.target).closest(".ui-menu-item");var k={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,k)},_filterMenuItems:function(b){var k=b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),H=new RegExp("^"+k,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return H.test(o.trim(o(this).children(".ui-menu-item-wrapper").text()))})}}),o.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var b,k,H,Z=this.element[0].nodeName.toLowerCase(),ne="textarea"===Z,fe="input"===Z;this.isMultiLine=ne||!fe&&this._isContentEditable(this.element),this.valueMethod=this.element[ne||fe?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(De){if(this.element.prop("readOnly"))return b=!0,H=!0,void(k=!0);b=!1,H=!1,k=!1;var Ue=o.ui.keyCode;switch(De.keyCode){case Ue.PAGE_UP:b=!0,this._move("previousPage",De);break;case Ue.PAGE_DOWN:b=!0,this._move("nextPage",De);break;case Ue.UP:b=!0,this._keyEvent("previous",De);break;case Ue.DOWN:b=!0,this._keyEvent("next",De);break;case Ue.ENTER:this.menu.active&&(b=!0,De.preventDefault(),this.menu.select(De));break;case Ue.TAB:this.menu.active&&this.menu.select(De);break;case Ue.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(De),De.preventDefault());break;default:k=!0,this._searchTimeout(De)}},keypress:function(De){if(b)return b=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&De.preventDefault());if(!k){var Ue=o.ui.keyCode;switch(De.keyCode){case Ue.PAGE_UP:this._move("previousPage",De);break;case Ue.PAGE_DOWN:this._move("nextPage",De);break;case Ue.UP:this._keyEvent("previous",De);break;case Ue.DOWN:this._keyEvent("next",De)}}},input:function(De){if(H)return H=!1,void De.preventDefault();this._searchTimeout(De)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(De){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(De),this._change(De))}}),this._initSource(),this.menu=o("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(De){De.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==o.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(De,Ue){var Qe,gt;if(this.isNewMenu&&(this.isNewMenu=!1,De.originalEvent&&/^mouse/.test(De.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){o(De.target).trigger(De.originalEvent)});gt=Ue.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",De,{item:gt})&&De.originalEvent&&/^key/.test(De.originalEvent.type)&&this._value(gt.value),(Qe=Ue.item.attr("aria-label")||gt.value)&&o.trim(Qe).length&&(this.liveRegion.children().hide(),o("<div>").text(Qe).appendTo(this.liveRegion))},menuselect:function(De,Ue){var Qe=Ue.item.data("ui-autocomplete-item"),gt=this.previous;this.element[0]!==o.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=gt,this._delay(function(){this.previous=gt,this.selectedItem=Qe})),!1!==this._trigger("select",De,{item:Qe})&&this._value(Qe.value),this.term=this._value(),this.close(De),this.selectedItem=Qe}}),this.liveRegion=o("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(b,k){this._super(b,k),"source"===b&&this._initSource(),"appendTo"===b&&this.menu.element.appendTo(this._appendTo()),"disabled"===b&&k&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(b){var k=this.menu.element[0];return b.target===this.element[0]||b.target===k||o.contains(k,b.target)},_closeOnClickOutside:function(b){this._isEventTargetInWidget(b)||this.close()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?o(b):this.document.find(b).eq(0)),(!b||!b[0])&&(b=this.element.closest(".ui-front, dialog")),b.length||(b=this.document[0].body),b},_initSource:function(){var b,k,H=this;o.isArray(this.options.source)?(b=this.options.source,this.source=function(Z,ne){ne(o.ui.autocomplete.filter(b,Z.term))}):"string"==typeof this.options.source?(k=this.options.source,this.source=function(Z,ne){H.xhr&&H.xhr.abort(),H.xhr=o.ajax({url:k,data:Z,dataType:"json",success:function(fe){ne(fe)},error:function(){ne([])}})}):this.source=this.options.source},_searchTimeout:function(b){clearTimeout(this.searching),this.searching=this._delay(function(){var k=this.term===this._value(),H=this.menu.element.is(":visible");(!k||k&&!H&&!(b.altKey||b.ctrlKey||b.metaKey||b.shiftKey))&&(this.selectedItem=null,this.search(null,b))},this.options.delay)},search:function(b,k){return b=null!=b?b:this._value(),this.term=this._value(),b.length<this.options.minLength?this.close(k):!1!==this._trigger("search",k)?this._search(b):void 0},_search:function(b){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:b},this._response())},_response:function(){var b=++this.requestIndex;return o.proxy(function(k){b===this.requestIndex&&this.__response(k),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(b){b&&(b=this._normalize(b)),this._trigger("response",null,{content:b}),!this.options.disabled&&b&&b.length&&!this.cancelSearch?(this._suggest(b),this._trigger("open")):this._close()},close:function(b){this.cancelSearch=!0,this._close(b)},_close:function(b){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",b))},_change:function(b){this.previous!==this._value()&&this._trigger("change",b,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:o.map(b,function(k){return"string"==typeof k?{label:k,value:k}:o.extend({},k,{label:k.label||k.value,value:k.value||k.label})})},_suggest:function(b){var k=this.menu.element.empty();this._renderMenu(k,b),this.isNewMenu=!0,this.menu.refresh(),k.show(),this._resizeMenu(),k.position(o.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var b=this.menu.element;b.outerWidth(Math.max(b.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,k){var H=this;o.each(k,function(Z,ne){H._renderItemData(b,ne)})},_renderItemData:function(b,k){return this._renderItem(b,k).data("ui-autocomplete-item",k)},_renderItem:function(b,k){return o("<li>").append(o("<div>").text(k.label)).appendTo(b)},_move:function(b,k){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(b)||this.menu.isLastItem()&&/^next/.test(b)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[b](k);this.search(null,k)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(b,k){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(b,k),k.preventDefault())},_isContentEditable:function(b){if(!b.length)return!1;var k=b.prop("contentEditable");return"inherit"===k?this._isContentEditable(b.parent()):"true"===k}}),o.extend(o.ui.autocomplete,{escapeRegex:function(b){return b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,k){var H=new RegExp(o.ui.autocomplete.escapeRegex(k),"i");return o.grep(b,function(Z){return H.test(Z.label||Z.value||Z)})}}),o.widget("ui.autocomplete",o.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(b){return b+(b>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(b){var k;this._superApply(arguments),!this.options.disabled&&!this.cancelSearch&&(k=b&&b.length?this.options.messages.results(b.length):this.options.messages.noResults,this.liveRegion.children().hide(),o("<div>").text(k).appendTo(this.liveRegion))}});var pr,It=/ui-corner-([a-z]){2,6}/g;function Mn(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},o.extend(this._defaults,this.regional[""]),this.regional.en=o.extend(!0,{},this.regional[""]),this.regional["en-US"]=o.extend(!0,{},this.regional.en),this.dpDiv=Sn(o("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function Sn(b){var k="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.on("mouseout",k,function(){o(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&o(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&o(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",k,zi)}function zi(){o.datepicker._isDisabledDatepicker(pr.inline?pr.dpDiv.parent()[0]:pr.input[0])||(o(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),o(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&o(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&o(this).addClass("ui-datepicker-next-hover"))}function ti(b,k){for(var H in o.extend(b,k),k)null==k[H]&&(b[H]=k[H]);return b}function lt(b){return function(){var k=this.element.val();b.apply(this,arguments),this._refresh(),k!==this.element.val()&&this._trigger("change")}}o.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var b=this,k=[];o.each(this.options.items,function(H,Z){var ne,fe={};if(Z){if("controlgroupLabel"===H)return(ne=b.element.find(Z)).each(function(){var De=o(this);De.children(".ui-controlgroup-label-contents").length||De.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),b._addClass(ne,null,"ui-widget ui-widget-content ui-state-default"),void(k=k.concat(ne.get()));!o.fn[H]||(fe=b["_"+H+"Options"]?b["_"+H+"Options"]("middle"):{classes:{}},b.element.find(Z).each(function(){var De=o(this),Ue=De[H]("instance"),Qe=o.widget.extend({},fe);if("button"!==H||!De.parent(".ui-spinner").length){Ue||(Ue=De[H]()[H]("instance")),Ue&&(Qe.classes=b._resolveClassesValues(Qe.classes,Ue)),De[H](Qe);var gt=De[H]("widget");o.data(gt[0],"ui-controlgroup-data",Ue||De[H]("instance")),k.push(gt[0])}}))}}),this.childWidgets=o(o.unique(k)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(b){this.childWidgets.each(function(){var H=o(this).data("ui-controlgroup-data");H&&H[b]&&H[b]()})},_updateCornerClass:function(b,k){var Z=this._buildSimpleOptions(k,"label").classes.label;this._removeClass(b,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(b,null,Z)},_buildSimpleOptions:function(b,k){var H="vertical"===this.options.direction,Z={classes:{}};return Z.classes[k]={middle:"",first:"ui-corner-"+(H?"top":"left"),last:"ui-corner-"+(H?"bottom":"right"),only:"ui-corner-all"}[b],Z},_spinnerOptions:function(b){var k=this._buildSimpleOptions(b,"ui-spinner");return k.classes["ui-spinner-up"]="",k.classes["ui-spinner-down"]="",k},_buttonOptions:function(b){return this._buildSimpleOptions(b,"ui-button")},_checkboxradioOptions:function(b){return this._buildSimpleOptions(b,"ui-checkboxradio-label")},_selectmenuOptions:function(b){var k="vertical"===this.options.direction;return{width:!!k&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(k?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(k?"top":"left")},last:{"ui-selectmenu-button-open":k?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(k?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[b]}},_resolveClassesValues:function(b,k){var H={};return o.each(b,function(Z){var ne=k.options.classes[Z]||"";ne=o.trim(ne.replace(It,"")),H[Z]=(ne+" "+b[Z]).replace(/\s+/g," ")}),H},_setOption:function(b,k){"direction"===b&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(b,k),"disabled"!==b?this.refresh():this._callChildMethod(k?"disable":"enable")},refresh:function(){var b,k=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),b=this.childWidgets,this.options.onlyVisible&&(b=b.filter(":visible")),b.length&&(o.each(["first","last"],function(H,Z){var ne=b[Z]().data("ui-controlgroup-data");if(ne&&k["_"+ne.widgetName+"Options"]){var fe=k["_"+ne.widgetName+"Options"](1===b.length?"only":Z);fe.classes=k._resolveClassesValues(fe.classes,ne),ne.element[ne.widgetName](fe)}else k._updateCornerClass(b[Z](),Z)}),this._callChildMethod("refresh"))}}),o.widget("ui.checkboxradio",[o.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var b,k,H=this,Z=this._super()||{};return this._readType(),k=this.element.labels(),this.label=o(k[k.length-1]),this.label.length||o.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){H.originalLabel+=3===this.nodeType?o(this).text():this.outerHTML}),this.originalLabel&&(Z.label=this.originalLabel),null!=(b=this.element[0].disabled)&&(Z.disabled=b),Z},_create:function(){var b=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),b&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var b=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,("input"!==b||!/radio|checkbox/.test(this.type))&&o.error("Can't create checkboxradio on element.nodeName="+b+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var k=this.element[0].name,H="input[name='"+o.ui.escapeSelector(k)+"']";return k?(this.form.length?o(this.form[0].elements).filter(H):o(H).filter(function(){return 0===o(this).form().length})).not(this.element):o([])},_toggleClasses:function(){var b=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",b),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",b)._toggleClass(this.icon,null,"ui-icon-blank",!b),"radio"===this.type&&this._getRadioGroup().each(function(){var k=o(this).checkboxradio("instance");k&&k._removeClass(k.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(b,k){if("label"!==b||k){if(this._super(b,k),"disabled"===b)return this._toggleClass(this.label,null,"ui-state-disabled",k),void(this.element[0].disabled=k);this.refresh()}},_updateIcon:function(b){var k="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=o("<span>"),this.iconSpace=o("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(k+=b?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,b?"ui-icon-blank":"ui-icon-check")):k+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",k),b||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var b=this.label.contents().not(this.element[0]);this.icon&&(b=b.not(this.icon[0])),this.iconSpace&&(b=b.not(this.iconSpace[0])),b.remove(),this.label.append(this.options.label)},refresh:function(){var b=this.element[0].checked,k=this.element[0].disabled;this._updateIcon(b),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",b),null!==this.options.label&&this._updateLabel(),k!==this.options.disabled&&this._setOptions({disabled:k})}}]),o.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var b,k=this._super()||{};return this.isInput=this.element.is("input"),null!=(b=this.element[0].disabled)&&(k.disabled=b),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(k.label=this.originalLabel),k},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(b){b.keyCode===o.ui.keyCode.SPACE&&(b.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),!this.options.showLabel&&!this.title&&this.element.attr("title",this.options.label)},_updateIcon:function(b,k){var H="iconPosition"!==b,Z=H?this.options.iconPosition:k,ne="top"===Z||"bottom"===Z;this.icon?H&&this._removeClass(this.icon,null,this.options.icon):(this.icon=o("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),H&&this._addClass(this.icon,null,k),this._attachIcon(Z),ne?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=o("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(Z))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(b){this.icon[/^(?:end|bottom)/.test(b)?"before":"after"](this.iconSpace)},_attachIcon:function(b){this.element[/^(?:end|bottom)/.test(b)?"append":"prepend"](this.icon)},_setOptions:function(b){!(void 0===b.showLabel?this.options.showLabel:b.showLabel)&&!(void 0===b.icon?this.options.icon:b.icon)&&(b.showLabel=!0),this._super(b)},_setOption:function(b,k){"icon"===b&&(k?this._updateIcon(b,k):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===b&&this._updateIcon(b,k),"showLabel"===b&&(this._toggleClass("ui-button-icon-only",null,!k),this._updateTooltip()),"label"===b&&(this.isInput?this.element.val(k):(this.element.html(k),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(b,k),"disabled"===b&&(this._toggleClass(null,"ui-state-disabled",k),this.element[0].disabled=k,k&&this.element.blur())},refresh:function(){var b=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOptions({disabled:b}),this._updateTooltip()}}),!1!==o.uiBackCompat&&(o.widget("ui.button",o.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(b,k){"text"!==b?("showLabel"===b&&(this.options.text=k),"icon"===b&&(this.options.icons.primary=k),"icons"===b&&(k.primary?(this._super("icon",k.primary),this._super("iconPosition","beginning")):k.secondary&&(this._super("icon",k.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",k)}}),o.fn.button=function(b){return function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?b.apply(this,arguments):(o.ui.checkboxradio||o.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(o.fn.button),o.fn.buttonset=function(){return o.ui.controlgroup||o.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),o.extend(o.ui,{datepicker:{version:"1.12.1"}}),o.extend(Mn.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(b){return ti(this._defaults,b||{}),this},_attachDatepicker:function(b,k){var H,Z,ne;Z="div"===(H=b.nodeName.toLowerCase())||"span"===H,b.id||(this.uuid+=1,b.id="dp"+this.uuid),(ne=this._newInst(o(b),Z)).settings=o.extend({},k||{}),"input"===H?this._connectDatepicker(b,ne):Z&&this._inlineDatepicker(b,ne)},_newInst:function(b,k){return{id:b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:k,dpDiv:k?Sn(o("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,k){var H=o(b);k.append=o([]),k.trigger=o([]),!H.hasClass(this.markerClassName)&&(this._attachments(H,k),H.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(k),o.data(b,"datepicker",k),k.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,k){var H,Z,ne,fe=this._get(k,"appendText"),De=this._get(k,"isRTL");k.append&&k.append.remove(),fe&&(k.append=o("<span class='"+this._appendClass+"'>"+fe+"</span>"),b[De?"before":"after"](k.append)),b.off("focus",this._showDatepicker),k.trigger&&k.trigger.remove(),("focus"===(H=this._get(k,"showOn"))||"both"===H)&&b.on("focus",this._showDatepicker),("button"===H||"both"===H)&&(Z=this._get(k,"buttonText"),ne=this._get(k,"buttonImage"),k.trigger=o(this._get(k,"buttonImageOnly")?o("<img/>").addClass(this._triggerClass).attr({src:ne,alt:Z,title:Z}):o("<button type='button'></button>").addClass(this._triggerClass).html(ne?o("<img/>").attr({src:ne,alt:Z,title:Z}):Z)),b[De?"before":"after"](k.trigger),k.trigger.on("click",function(){return o.datepicker._datepickerShowing&&o.datepicker._lastInput===b[0]?o.datepicker._hideDatepicker():(o.datepicker._datepickerShowing&&o.datepicker._lastInput!==b[0]&&o.datepicker._hideDatepicker(),o.datepicker._showDatepicker(b[0])),!1}))},_autoSize:function(b){if(this._get(b,"autoSize")&&!b.inline){var k,H,Z,ne,fe=new Date(2009,11,20),De=this._get(b,"dateFormat");De.match(/[DM]/)&&(fe.setMonth((k=function(Ue){for(H=0,Z=0,ne=0;ne<Ue.length;ne++)Ue[ne].length>H&&(H=Ue[ne].length,Z=ne);return Z})(this._get(b,De.match(/MM/)?"monthNames":"monthNamesShort"))),fe.setDate(k(this._get(b,De.match(/DD/)?"dayNames":"dayNamesShort"))+20-fe.getDay())),b.input.attr("size",this._formatDate(b,fe).length)}},_inlineDatepicker:function(b,k){var H=o(b);H.hasClass(this.markerClassName)||(H.addClass(this.markerClassName).append(k.dpDiv),o.data(b,"datepicker",k),this._setDate(k,this._getDefaultDate(k),!0),this._updateDatepicker(k),this._updateAlternate(k),k.settings.disabled&&this._disableDatepicker(b),k.dpDiv.css("display","block"))},_dialogDatepicker:function(b,k,H,Z,ne){var De,Ue,Qe,gt,xt=this._dialogInst;return xt||(this.uuid+=1,this._dialogInput=o("<input type='text' id='dp"+this.uuid+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),o("body").append(this._dialogInput),(xt=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},o.data(this._dialogInput[0],"datepicker",xt)),ti(xt.settings,Z||{}),k=k&&k.constructor===Date?this._formatDate(xt,k):k,this._dialogInput.val(k),this._pos=ne?ne.length?ne:[ne.pageX,ne.pageY]:null,this._pos||(De=document.documentElement.clientWidth,Ue=document.documentElement.clientHeight,Qe=document.documentElement.scrollLeft||document.body.scrollLeft,gt=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[De/2-100+Qe,Ue/2-150+gt]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),xt.settings.onSelect=H,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),o.blockUI&&o.blockUI(this.dpDiv),o.data(this._dialogInput[0],"datepicker",xt),this},_destroyDatepicker:function(b){var k,H=o(b),Z=o.data(b,"datepicker");!H.hasClass(this.markerClassName)||(k=b.nodeName.toLowerCase(),o.removeData(b,"datepicker"),"input"===k?(Z.append.remove(),Z.trigger.remove(),H.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):("div"===k||"span"===k)&&H.removeClass(this.markerClassName).empty(),pr===Z&&(pr=null))},_enableDatepicker:function(b){var k,H,Z=o(b),ne=o.data(b,"datepicker");!Z.hasClass(this.markerClassName)||("input"===(k=b.nodeName.toLowerCase())?(b.disabled=!1,ne.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===k||"span"===k)&&((H=Z.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),H.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=o.map(this._disabledInputs,function(fe){return fe===b?null:fe}))},_disableDatepicker:function(b){var k,H,Z=o(b),ne=o.data(b,"datepicker");!Z.hasClass(this.markerClassName)||("input"===(k=b.nodeName.toLowerCase())?(b.disabled=!0,ne.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===k||"span"===k)&&((H=Z.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),H.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=o.map(this._disabledInputs,function(fe){return fe===b?null:fe}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(b){if(!b)return!1;for(var k=0;k<this._disabledInputs.length;k++)if(this._disabledInputs[k]===b)return!0;return!1},_getInst:function(b){try{return o.data(b,"datepicker")}catch(k){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(b,k,H){var Z,ne,fe,De,Ue=this._getInst(b);if(2===arguments.length&&"string"==typeof k)return"defaults"===k?o.extend({},o.datepicker._defaults):Ue?"all"===k?o.extend({},Ue.settings):this._get(Ue,k):null;Z=k||{},"string"==typeof k&&((Z={})[k]=H),Ue&&(this._curInst===Ue&&this._hideDatepicker(),ne=this._getDateDatepicker(b,!0),fe=this._getMinMaxDate(Ue,"min"),De=this._getMinMaxDate(Ue,"max"),ti(Ue.settings,Z),null!==fe&&void 0!==Z.dateFormat&&void 0===Z.minDate&&(Ue.settings.minDate=this._formatDate(Ue,fe)),null!==De&&void 0!==Z.dateFormat&&void 0===Z.maxDate&&(Ue.settings.maxDate=this._formatDate(Ue,De)),"disabled"in Z&&(Z.disabled?this._disableDatepicker(b):this._enableDatepicker(b)),this._attachments(o(b),Ue),this._autoSize(Ue),this._setDate(Ue,ne),this._updateAlternate(Ue),this._updateDatepicker(Ue))},_changeDatepicker:function(b,k,H){this._optionDatepicker(b,k,H)},_refreshDatepicker:function(b){var k=this._getInst(b);k&&this._updateDatepicker(k)},_setDateDatepicker:function(b,k){var H=this._getInst(b);H&&(this._setDate(H,k),this._updateDatepicker(H),this._updateAlternate(H))},_getDateDatepicker:function(b,k){var H=this._getInst(b);return H&&!H.inline&&this._setDateFromField(H,k),H?this._getDate(H):null},_doKeyDown:function(b){var k,H,Z,ne=o.datepicker._getInst(b.target),fe=!0,De=ne.dpDiv.is(".ui-datepicker-rtl");if(ne._keyEvent=!0,o.datepicker._datepickerShowing)switch(b.keyCode){case 9:o.datepicker._hideDatepicker(),fe=!1;break;case 13:return(Z=o("td."+o.datepicker._dayOverClass+":not(."+o.datepicker._currentClass+")",ne.dpDiv))[0]&&o.datepicker._selectDay(b.target,ne.selectedMonth,ne.selectedYear,Z[0]),(k=o.datepicker._get(ne,"onSelect"))?(H=o.datepicker._formatDate(ne),k.apply(ne.input?ne.input[0]:null,[H,ne])):o.datepicker._hideDatepicker(),!1;case 27:o.datepicker._hideDatepicker();break;case 33:o.datepicker._adjustDate(b.target,b.ctrlKey?-o.datepicker._get(ne,"stepBigMonths"):-o.datepicker._get(ne,"stepMonths"),"M");break;case 34:o.datepicker._adjustDate(b.target,b.ctrlKey?+o.datepicker._get(ne,"stepBigMonths"):+o.datepicker._get(ne,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&o.datepicker._clearDate(b.target),fe=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&o.datepicker._gotoToday(b.target),fe=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&o.datepicker._adjustDate(b.target,De?1:-1,"D"),fe=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&o.datepicker._adjustDate(b.target,b.ctrlKey?-o.datepicker._get(ne,"stepBigMonths"):-o.datepicker._get(ne,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&o.datepicker._adjustDate(b.target,-7,"D"),fe=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&o.datepicker._adjustDate(b.target,De?-1:1,"D"),fe=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&o.datepicker._adjustDate(b.target,b.ctrlKey?+o.datepicker._get(ne,"stepBigMonths"):+o.datepicker._get(ne,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&o.datepicker._adjustDate(b.target,7,"D"),fe=b.ctrlKey||b.metaKey;break;default:fe=!1}else 36===b.keyCode&&b.ctrlKey?o.datepicker._showDatepicker(this):fe=!1;fe&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(b){var k,H,Z=o.datepicker._getInst(b.target);if(o.datepicker._get(Z,"constrainInput"))return k=o.datepicker._possibleChars(o.datepicker._get(Z,"dateFormat")),H=String.fromCharCode(null==b.charCode?b.keyCode:b.charCode),b.ctrlKey||b.metaKey||H<" "||!k||k.indexOf(H)>-1},_doKeyUp:function(b){var H=o.datepicker._getInst(b.target);if(H.input.val()!==H.lastVal)try{o.datepicker.parseDate(o.datepicker._get(H,"dateFormat"),H.input?H.input.val():null,o.datepicker._getFormatConfig(H))&&(o.datepicker._setDateFromField(H),o.datepicker._updateAlternate(H),o.datepicker._updateDatepicker(H))}catch(Z){}return!0},_showDatepicker:function(b){var k,H,Z,ne,fe,De,Ue;"input"!==(b=b.target||b).nodeName.toLowerCase()&&(b=o("input",b.parentNode)[0]),o.datepicker._isDisabledDatepicker(b)||o.datepicker._lastInput===b||(k=o.datepicker._getInst(b),o.datepicker._curInst&&o.datepicker._curInst!==k&&(o.datepicker._curInst.dpDiv.stop(!0,!0),k&&o.datepicker._datepickerShowing&&o.datepicker._hideDatepicker(o.datepicker._curInst.input[0])),!1!==(Z=(H=o.datepicker._get(k,"beforeShow"))?H.apply(b,[b,k]):{})&&(ti(k.settings,Z),k.lastVal=null,o.datepicker._lastInput=b,o.datepicker._setDateFromField(k),o.datepicker._inDialog&&(b.value=""),o.datepicker._pos||(o.datepicker._pos=o.datepicker._findPos(b),o.datepicker._pos[1]+=b.offsetHeight),ne=!1,o(b).parents().each(function(){return!(ne|="fixed"===o(this).css("position"))}),fe={left:o.datepicker._pos[0],top:o.datepicker._pos[1]},o.datepicker._pos=null,k.dpDiv.empty(),k.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),o.datepicker._updateDatepicker(k),fe=o.datepicker._checkOffset(k,fe,ne),k.dpDiv.css({position:o.datepicker._inDialog&&o.blockUI?"static":ne?"fixed":"absolute",display:"none",left:fe.left+"px",top:fe.top+"px"}),k.inline||(De=o.datepicker._get(k,"showAnim"),Ue=o.datepicker._get(k,"duration"),k.dpDiv.css("z-index",function Li(b){for(var k,H;b.length&&b[0]!==document;){if(("absolute"===(k=b.css("position"))||"relative"===k||"fixed"===k)&&(H=parseInt(b.css("zIndex"),10),!isNaN(H)&&0!==H))return H;b=b.parent()}return 0}(o(b))+1),o.datepicker._datepickerShowing=!0,o.effects&&o.effects.effect[De]?k.dpDiv.show(De,o.datepicker._get(k,"showOptions"),Ue):k.dpDiv[De||"show"](De?Ue:null),o.datepicker._shouldFocusInput(k)&&k.input.trigger("focus"),o.datepicker._curInst=k)))},_updateDatepicker:function(b){this.maxRows=4,pr=b,b.dpDiv.empty().append(this._generateHTML(b)),this._attachHandlers(b);var k,H=this._getNumberOfMonths(b),Z=H[1],fe=b.dpDiv.find("."+this._dayOverClass+" a");fe.length>0&&zi.apply(fe.get(0)),b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),Z>1&&b.dpDiv.addClass("ui-datepicker-multi-"+Z).css("width",17*Z+"em"),b.dpDiv[(1!==H[0]||1!==H[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),b===o.datepicker._curInst&&o.datepicker._datepickerShowing&&o.datepicker._shouldFocusInput(b)&&b.input.trigger("focus"),b.yearshtml&&(k=b.yearshtml,setTimeout(function(){k===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml),k=b.yearshtml=null},0))},_shouldFocusInput:function(b){return b.input&&b.input.is(":visible")&&!b.input.is(":disabled")&&!b.input.is(":focus")},_checkOffset:function(b,k,H){var Z=b.dpDiv.outerWidth(),ne=b.dpDiv.outerHeight(),fe=b.input?b.input.outerWidth():0,De=b.input?b.input.outerHeight():0,Ue=document.documentElement.clientWidth+(H?0:o(document).scrollLeft()),Qe=document.documentElement.clientHeight+(H?0:o(document).scrollTop());return k.left-=this._get(b,"isRTL")?Z-fe:0,k.left-=H&&k.left===b.input.offset().left?o(document).scrollLeft():0,k.top-=H&&k.top===b.input.offset().top+De?o(document).scrollTop():0,k.left-=Math.min(k.left,k.left+Z>Ue&&Ue>Z?Math.abs(k.left+Z-Ue):0),k.top-=Math.min(k.top,k.top+ne>Qe&&Qe>ne?Math.abs(ne+De):0),k},_findPos:function(b){for(var k,H=this._getInst(b),Z=this._get(H,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||o.expr.filters.hidden(b));)b=b[Z?"previousSibling":"nextSibling"];return[(k=o(b).offset()).left,k.top]},_hideDatepicker:function(b){var k,H,Z,ne,fe=this._curInst;!fe||b&&fe!==o.data(b,"datepicker")||this._datepickerShowing&&(k=this._get(fe,"showAnim"),H=this._get(fe,"duration"),Z=function(){o.datepicker._tidyDialog(fe)},o.effects&&(o.effects.effect[k]||o.effects[k])?fe.dpDiv.hide(k,o.datepicker._get(fe,"showOptions"),H,Z):fe.dpDiv["slideDown"===k?"slideUp":"fadeIn"===k?"fadeOut":"hide"](k?H:null,Z),k||Z(),this._datepickerShowing=!1,(ne=this._get(fe,"onClose"))&&ne.apply(fe.input?fe.input[0]:null,[fe.input?fe.input.val():"",fe]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),o.blockUI&&(o.unblockUI(),o("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(b){b.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(o.datepicker._curInst){var k=o(b.target),H=o.datepicker._getInst(k[0]);(k[0].id!==o.datepicker._mainDivId&&0===k.parents("#"+o.datepicker._mainDivId).length&&!k.hasClass(o.datepicker.markerClassName)&&!k.closest("."+o.datepicker._triggerClass).length&&o.datepicker._datepickerShowing&&(!o.datepicker._inDialog||!o.blockUI)||k.hasClass(o.datepicker.markerClassName)&&o.datepicker._curInst!==H)&&o.datepicker._hideDatepicker()}},_adjustDate:function(b,k,H){var Z=o(b),ne=this._getInst(Z[0]);this._isDisabledDatepicker(Z[0])||(this._adjustInstDate(ne,k+("M"===H?this._get(ne,"showCurrentAtPos"):0),H),this._updateDatepicker(ne))},_gotoToday:function(b){var k,H=o(b),Z=this._getInst(H[0]);this._get(Z,"gotoCurrent")&&Z.currentDay?(Z.selectedDay=Z.currentDay,Z.drawMonth=Z.selectedMonth=Z.currentMonth,Z.drawYear=Z.selectedYear=Z.currentYear):(k=new Date,Z.selectedDay=k.getDate(),Z.drawMonth=Z.selectedMonth=k.getMonth(),Z.drawYear=Z.selectedYear=k.getFullYear()),this._notifyChange(Z),this._adjustDate(H)},_selectMonthYear:function(b,k,H){var Z=o(b),ne=this._getInst(Z[0]);ne["selected"+("M"===H?"Month":"Year")]=ne["draw"+("M"===H?"Month":"Year")]=parseInt(k.options[k.selectedIndex].value,10),this._notifyChange(ne),this._adjustDate(Z)},_selectDay:function(b,k,H,Z){var ne,fe=o(b);o(Z).hasClass(this._unselectableClass)||this._isDisabledDatepicker(fe[0])||((ne=this._getInst(fe[0])).selectedDay=ne.currentDay=o("a",Z).html(),ne.selectedMonth=ne.currentMonth=k,ne.selectedYear=ne.currentYear=H,this._selectDate(b,this._formatDate(ne,ne.currentDay,ne.currentMonth,ne.currentYear)))},_clearDate:function(b){var k=o(b);this._selectDate(k,"")},_selectDate:function(b,k){var H,Z=o(b),ne=this._getInst(Z[0]);k=null!=k?k:this._formatDate(ne),ne.input&&ne.input.val(k),this._updateAlternate(ne),(H=this._get(ne,"onSelect"))?H.apply(ne.input?ne.input[0]:null,[k,ne]):ne.input&&ne.input.trigger("change"),ne.inline?this._updateDatepicker(ne):(this._hideDatepicker(),this._lastInput=ne.input[0],"object"!=typeof ne.input[0]&&ne.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(b){var k,H,Z,ne=this._get(b,"altField");ne&&(k=this._get(b,"altFormat")||this._get(b,"dateFormat"),H=this._getDate(b),Z=this.formatDate(k,H,this._getFormatConfig(b)),o(ne).val(Z))},noWeekends:function(b){var k=b.getDay();return[k>0&&k<6,""]},iso8601Week:function(b){var k,H=new Date(b.getTime());return H.setDate(H.getDate()+4-(H.getDay()||7)),k=H.getTime(),H.setMonth(0),H.setDate(1),Math.floor(Math.round((k-H)/864e5)/7)+1},parseDate:function(b,k,H){if(null==b||null==k)throw"Invalid arguments";if(""===(k="object"==typeof k?k.toString():k+""))return null;var Z,ne,fe,sn,De=0,Ue=(H?H.shortYearCutoff:null)||this._defaults.shortYearCutoff,Qe="string"!=typeof Ue?Ue:(new Date).getFullYear()%100+parseInt(Ue,10),gt=(H?H.dayNamesShort:null)||this._defaults.dayNamesShort,xt=(H?H.dayNames:null)||this._defaults.dayNames,Jt=(H?H.monthNamesShort:null)||this._defaults.monthNamesShort,Ct=(H?H.monthNames:null)||this._defaults.monthNames,Ht=-1,en=-1,St=-1,Kt=-1,gn=!1,Wn=function(Si){var Ei=Z+1<b.length&&b.charAt(Z+1)===Si;return Ei&&Z++,Ei},Qn=function(Si){var Ei=Wn(Si),Mr="@"===Si?14:"!"===Si?20:"y"===Si&&Ei?4:"o"===Si?3:2,Yr=new RegExp("^\\d{"+("y"===Si?Mr:1)+","+Mr+"}"),Br=k.substring(De).match(Yr);if(!Br)throw"Missing number at position "+De;return De+=Br[0].length,parseInt(Br[0],10)},Di=function(Si,Ei,Mr){var Oi=-1,Yr=o.map(Wn(Si)?Mr:Ei,function(Br,ia){return[[ia,Br]]}).sort(function(Br,ia){return-(Br[1].length-ia[1].length)});if(o.each(Yr,function(Br,ia){var rl=ia[1];if(k.substr(De,rl.length).toLowerCase()===rl.toLowerCase())return Oi=ia[0],De+=rl.length,!1}),-1!==Oi)return Oi+1;throw"Unknown name at position "+De},Ci=function(){if(k.charAt(De)!==b.charAt(Z))throw"Unexpected literal at position "+De;De++};for(Z=0;Z<b.length;Z++)if(gn)"'"!==b.charAt(Z)||Wn("'")?Ci():gn=!1;else switch(b.charAt(Z)){case"d":St=Qn("d");break;case"D":Di("D",gt,xt);break;case"o":Kt=Qn("o");break;case"m":en=Qn("m");break;case"M":en=Di("M",Jt,Ct);break;case"y":Ht=Qn("y");break;case"@":Ht=(sn=new Date(Qn("@"))).getFullYear(),en=sn.getMonth()+1,St=sn.getDate();break;case"!":Ht=(sn=new Date((Qn("!")-this._ticksTo1970)/1e4)).getFullYear(),en=sn.getMonth()+1,St=sn.getDate();break;case"'":Wn("'")?Ci():gn=!0;break;default:Ci()}if(De<k.length&&(fe=k.substr(De),!/^\s+/.test(fe)))throw"Extra/unparsed characters found in date: "+fe;if(-1===Ht?Ht=(new Date).getFullYear():Ht<100&&(Ht+=(new Date).getFullYear()-(new Date).getFullYear()%100+(Ht<=Qe?0:-100)),Kt>-1)for(en=1,St=Kt;!(St<=(ne=this._getDaysInMonth(Ht,en-1)));)en++,St-=ne;if((sn=this._daylightSavingAdjust(new Date(Ht,en-1,St))).getFullYear()!==Ht||sn.getMonth()+1!==en||sn.getDate()!==St)throw"Invalid date";return sn},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(b,k,H){if(!k)return"";var Z,ne=(H?H.dayNamesShort:null)||this._defaults.dayNamesShort,fe=(H?H.dayNames:null)||this._defaults.dayNames,De=(H?H.monthNamesShort:null)||this._defaults.monthNamesShort,Ue=(H?H.monthNames:null)||this._defaults.monthNames,Qe=function(Ht){var en=Z+1<b.length&&b.charAt(Z+1)===Ht;return en&&Z++,en},gt=function(Ht,en,St){var Kt=""+en;if(Qe(Ht))for(;Kt.length<St;)Kt="0"+Kt;return Kt},xt=function(Ht,en,St,Kt){return Qe(Ht)?Kt[en]:St[en]},Jt="",Ct=!1;if(k)for(Z=0;Z<b.length;Z++)if(Ct)"'"!==b.charAt(Z)||Qe("'")?Jt+=b.charAt(Z):Ct=!1;else switch(b.charAt(Z)){case"d":Jt+=gt("d",k.getDate(),2);break;case"D":Jt+=xt("D",k.getDay(),ne,fe);break;case"o":Jt+=gt("o",Math.round((new Date(k.getFullYear(),k.getMonth(),k.getDate()).getTime()-new Date(k.getFullYear(),0,0).getTime())/864e5),3);break;case"m":Jt+=gt("m",k.getMonth()+1,2);break;case"M":Jt+=xt("M",k.getMonth(),De,Ue);break;case"y":Jt+=Qe("y")?k.getFullYear():(k.getFullYear()%100<10?"0":"")+k.getFullYear()%100;break;case"@":Jt+=k.getTime();break;case"!":Jt+=1e4*k.getTime()+this._ticksTo1970;break;case"'":Qe("'")?Jt+="'":Ct=!0;break;default:Jt+=b.charAt(Z)}return Jt},_possibleChars:function(b){var k,H="",Z=!1,ne=function(fe){var De=k+1<b.length&&b.charAt(k+1)===fe;return De&&k++,De};for(k=0;k<b.length;k++)if(Z)"'"!==b.charAt(k)||ne("'")?H+=b.charAt(k):Z=!1;else switch(b.charAt(k)){case"d":case"m":case"y":case"@":H+="0123456789";break;case"D":case"M":return null;case"'":ne("'")?H+="'":Z=!0;break;default:H+=b.charAt(k)}return H},_get:function(b,k){return void 0!==b.settings[k]?b.settings[k]:this._defaults[k]},_setDateFromField:function(b,k){if(b.input.val()!==b.lastVal){var H=this._get(b,"dateFormat"),Z=b.lastVal=b.input?b.input.val():null,ne=this._getDefaultDate(b),fe=ne,De=this._getFormatConfig(b);try{fe=this.parseDate(H,Z,De)||ne}catch(Ue){Z=k?"":Z}b.selectedDay=fe.getDate(),b.drawMonth=b.selectedMonth=fe.getMonth(),b.drawYear=b.selectedYear=fe.getFullYear(),b.currentDay=Z?fe.getDate():0,b.currentMonth=Z?fe.getMonth():0,b.currentYear=Z?fe.getFullYear():0,this._adjustInstDate(b)}},_getDefaultDate:function(b){return this._restrictMinMax(b,this._determineDate(b,this._get(b,"defaultDate"),new Date))},_determineDate:function(b,k,H){var De,Ue,fe=null==k||""===k?H:"string"==typeof k?function(De){try{return o.datepicker.parseDate(o.datepicker._get(b,"dateFormat"),De,o.datepicker._getFormatConfig(b))}catch(Ht){}for(var Ue=(De.toLowerCase().match(/^c/)?o.datepicker._getDate(b):null)||new Date,Qe=Ue.getFullYear(),gt=Ue.getMonth(),xt=Ue.getDate(),Jt=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,Ct=Jt.exec(De);Ct;){switch(Ct[2]||"d"){case"d":case"D":xt+=parseInt(Ct[1],10);break;case"w":case"W":xt+=7*parseInt(Ct[1],10);break;case"m":case"M":gt+=parseInt(Ct[1],10),xt=Math.min(xt,o.datepicker._getDaysInMonth(Qe,gt));break;case"y":case"Y":Qe+=parseInt(Ct[1],10),xt=Math.min(xt,o.datepicker._getDaysInMonth(Qe,gt))}Ct=Jt.exec(De)}return new Date(Qe,gt,xt)}(k):"number"==typeof k?isNaN(k)?H:(De=k,(Ue=new Date).setDate(Ue.getDate()+De),Ue):new Date(k.getTime());return(fe=fe&&"Invalid Date"===fe.toString()?H:fe)&&(fe.setHours(0),fe.setMinutes(0),fe.setSeconds(0),fe.setMilliseconds(0)),this._daylightSavingAdjust(fe)},_daylightSavingAdjust:function(b){return b?(b.setHours(b.getHours()>12?b.getHours()+2:0),b):null},_setDate:function(b,k,H){var Z=!k,ne=b.selectedMonth,fe=b.selectedYear,De=this._restrictMinMax(b,this._determineDate(b,k,new Date));b.selectedDay=b.currentDay=De.getDate(),b.drawMonth=b.selectedMonth=b.currentMonth=De.getMonth(),b.drawYear=b.selectedYear=b.currentYear=De.getFullYear(),(ne!==b.selectedMonth||fe!==b.selectedYear)&&!H&&this._notifyChange(b),this._adjustInstDate(b),b.input&&b.input.val(Z?"":this._formatDate(b))},_getDate:function(b){return!b.currentYear||b.input&&""===b.input.val()?null:this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay))},_attachHandlers:function(b){var k=this._get(b,"stepMonths"),H="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){var Z={prev:function(){o.datepicker._adjustDate(H,-k,"M")},next:function(){o.datepicker._adjustDate(H,+k,"M")},hide:function(){o.datepicker._hideDatepicker()},today:function(){o.datepicker._gotoToday(H)},selectDay:function(){return o.datepicker._selectDay(H,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return o.datepicker._selectMonthYear(H,this,"M"),!1},selectYear:function(){return o.datepicker._selectMonthYear(H,this,"Y"),!1}};o(this).on(this.getAttribute("data-event"),Z[this.getAttribute("data-handler")])})},_generateHTML:function(b){var k,H,Z,ne,fe,De,Ue,Qe,gt,xt,Jt,Ct,Ht,en,St,Kt,gn,sn,Wn,Qn,Di,Ci,Si,Ei,Mr,Oi,Yr,Br,ia,rl,Qs,Ni,So,Os,la,ts,Ws,Eo,ka,ke=new Date,Je=this._daylightSavingAdjust(new Date(ke.getFullYear(),ke.getMonth(),ke.getDate())),mn=this._get(b,"isRTL"),En=this._get(b,"showButtonPanel"),Dr=this._get(b,"hideIfNoPrevNext"),ps=this._get(b,"navigationAsDateFormat"),Vi=this._getNumberOfMonths(b),Xn=this._get(b,"showCurrentAtPos"),Pa=this._get(b,"stepMonths"),Cu=1!==Vi[0]||1!==Vi[1],Bi=this._daylightSavingAdjust(b.currentDay?new Date(b.currentYear,b.currentMonth,b.currentDay):new Date(9999,9,9)),La=this._getMinMaxDate(b,"min"),or=this._getMinMaxDate(b,"max"),ws=b.drawMonth-Xn,Uo=b.drawYear;if(ws<0&&(ws+=12,Uo--),or)for(k=this._daylightSavingAdjust(new Date(or.getFullYear(),or.getMonth()-Vi[0]*Vi[1]+1,or.getDate())),k=La&&k<La?La:k;this._daylightSavingAdjust(new Date(Uo,ws,1))>k;)--ws<0&&(ws=11,Uo--);for(b.drawMonth=ws,b.drawYear=Uo,H=this._get(b,"prevText"),H=ps?this.formatDate(H,this._daylightSavingAdjust(new Date(Uo,ws-Pa,1)),this._getFormatConfig(b)):H,Z=this._canAdjustMonth(b,-1,Uo,ws)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+H+"'><span class='ui-icon ui-icon-circle-triangle-"+(mn?"e":"w")+"'>"+H+"</span></a>":Dr?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+H+"'><span class='ui-icon ui-icon-circle-triangle-"+(mn?"e":"w")+"'>"+H+"</span></a>",ne=this._get(b,"nextText"),ne=ps?this.formatDate(ne,this._daylightSavingAdjust(new Date(Uo,ws+Pa,1)),this._getFormatConfig(b)):ne,fe=this._canAdjustMonth(b,1,Uo,ws)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+ne+"'><span class='ui-icon ui-icon-circle-triangle-"+(mn?"w":"e")+"'>"+ne+"</span></a>":Dr?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+ne+"'><span class='ui-icon ui-icon-circle-triangle-"+(mn?"w":"e")+"'>"+ne+"</span></a>",De=this._get(b,"currentText"),Ue=this._get(b,"gotoCurrent")&&b.currentDay?Bi:Je,De=ps?this.formatDate(De,Ue,this._getFormatConfig(b)):De,Qe=b.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(b,"closeText")+"</button>",gt=En?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(mn?Qe:"")+(this._isInRange(b,Ue)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+De+"</button>":"")+(mn?"":Qe)+"</div>":"",xt=parseInt(this._get(b,"firstDay"),10),xt=isNaN(xt)?0:xt,Jt=this._get(b,"showWeek"),Ct=this._get(b,"dayNames"),Ht=this._get(b,"dayNamesMin"),en=this._get(b,"monthNames"),St=this._get(b,"monthNamesShort"),Kt=this._get(b,"beforeShowDay"),gn=this._get(b,"showOtherMonths"),sn=this._get(b,"selectOtherMonths"),Wn=this._getDefaultDate(b),Qn="",Ci=0;Ci<Vi[0];Ci++){for(Si="",this.maxRows=4,Ei=0;Ei<Vi[1];Ei++){if(Mr=this._daylightSavingAdjust(new Date(Uo,ws,b.selectedDay)),Oi=" ui-corner-all",Yr="",Cu){if(Yr+="<div class='ui-datepicker-group",Vi[1]>1)switch(Ei){case 0:Yr+=" ui-datepicker-group-first",Oi=" ui-corner-"+(mn?"right":"left");break;case Vi[1]-1:Yr+=" ui-datepicker-group-last",Oi=" ui-corner-"+(mn?"left":"right");break;default:Yr+=" ui-datepicker-group-middle",Oi=""}Yr+="'>"}for(Yr+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+Oi+"'>"+(/all|left/.test(Oi)&&0===Ci?mn?fe:Z:"")+(/all|right/.test(Oi)&&0===Ci?mn?Z:fe:"")+this._generateMonthYearHeader(b,ws,Uo,La,or,Ci>0||Ei>0,en,St)+"</div><table class='ui-datepicker-calendar'><thead><tr>",Br=Jt?"<th class='ui-datepicker-week-col'>"+this._get(b,"weekHeader")+"</th>":"",Di=0;Di<7;Di++)Br+="<th scope='col'"+((Di+xt+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+Ct[ia=(Di+xt)%7]+"'>"+Ht[ia]+"</span></th>";for(Yr+=Br+"</tr></thead><tbody>",rl=this._getDaysInMonth(Uo,ws),Uo===b.selectedYear&&ws===b.selectedMonth&&(b.selectedDay=Math.min(b.selectedDay,rl)),Qs=(this._getFirstDayOfMonth(Uo,ws)-xt+7)%7,Ni=Math.ceil((Qs+rl)/7),this.maxRows=So=Cu&&this.maxRows>Ni?this.maxRows:Ni,Os=this._daylightSavingAdjust(new Date(Uo,ws,1-Qs)),la=0;la<So;la++){for(Yr+="<tr>",ts=Jt?"<td class='ui-datepicker-week-col'>"+this._get(b,"calculateWeek")(Os)+"</td>":"",Di=0;Di<7;Di++)Ws=Kt?Kt.apply(b.input?b.input[0]:null,[Os]):[!0,""],ka=(Eo=Os.getMonth()!==ws)&&!sn||!Ws[0]||La&&Os<La||or&&Os>or,ts+="<td class='"+((Di+xt+6)%7>=5?" ui-datepicker-week-end":"")+(Eo?" ui-datepicker-other-month":"")+(Os.getTime()===Mr.getTime()&&ws===b.selectedMonth&&b._keyEvent||Wn.getTime()===Os.getTime()&&Wn.getTime()===Mr.getTime()?" "+this._dayOverClass:"")+(ka?" "+this._unselectableClass+" ui-state-disabled":"")+(Eo&&!gn?"":" "+Ws[1]+(Os.getTime()===Bi.getTime()?" "+this._currentClass:"")+(Os.getTime()===Je.getTime()?" ui-datepicker-today":""))+"'"+(Eo&&!gn||!Ws[2]?"":" title='"+Ws[2].replace(/'/g,"&#39;")+"'")+(ka?"":" data-handler='selectDay' data-event='click' data-month='"+Os.getMonth()+"' data-year='"+Os.getFullYear()+"'")+">"+(Eo&&!gn?"&#xa0;":ka?"<span class='ui-state-default'>"+Os.getDate()+"</span>":"<a class='ui-state-default"+(Os.getTime()===Je.getTime()?" ui-state-highlight":"")+(Os.getTime()===Bi.getTime()?" ui-state-active":"")+(Eo?" ui-priority-secondary":"")+"' href='#'>"+Os.getDate()+"</a>")+"</td>",Os.setDate(Os.getDate()+1),Os=this._daylightSavingAdjust(Os);Yr+=ts+"</tr>"}++ws>11&&(ws=0,Uo++),Si+=Yr+="</tbody></table>"+(Cu?"</div>"+(Vi[0]>0&&Ei===Vi[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}Qn+=Si}return Qn+=gt,b._keyEvent=!1,Qn},_generateMonthYearHeader:function(b,k,H,Z,ne,fe,De,Ue){var Qe,gt,xt,Jt,Ct,Ht,en,St,Kt=this._get(b,"changeMonth"),gn=this._get(b,"changeYear"),sn=this._get(b,"showMonthAfterYear"),Wn="<div class='ui-datepicker-title'>",Qn="";if(fe||!Kt)Qn+="<span class='ui-datepicker-month'>"+De[k]+"</span>";else{for(Qe=Z&&Z.getFullYear()===H,gt=ne&&ne.getFullYear()===H,Qn+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",xt=0;xt<12;xt++)(!Qe||xt>=Z.getMonth())&&(!gt||xt<=ne.getMonth())&&(Qn+="<option value='"+xt+"'"+(xt===k?" selected='selected'":"")+">"+Ue[xt]+"</option>");Qn+="</select>"}if(sn||(Wn+=Qn+(!fe&&Kt&&gn?"":"&#xa0;")),!b.yearshtml)if(b.yearshtml="",fe||!gn)Wn+="<span class='ui-datepicker-year'>"+H+"</span>";else{for(Jt=this._get(b,"yearRange").split(":"),Ct=(new Date).getFullYear(),en=(Ht=function(Di){var Ci=Di.match(/c[+\-].*/)?H+parseInt(Di.substring(1),10):Di.match(/[+\-].*/)?Ct+parseInt(Di,10):parseInt(Di,10);return isNaN(Ci)?Ct:Ci})(Jt[0]),St=Math.max(en,Ht(Jt[1]||"")),en=Z?Math.max(en,Z.getFullYear()):en,St=ne?Math.min(St,ne.getFullYear()):St,b.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";en<=St;en++)b.yearshtml+="<option value='"+en+"'"+(en===H?" selected='selected'":"")+">"+en+"</option>";b.yearshtml+="</select>",Wn+=b.yearshtml,b.yearshtml=null}return Wn+=this._get(b,"yearSuffix"),sn&&(Wn+=(!fe&&Kt&&gn?"":"&#xa0;")+Qn),Wn+"</div>"},_adjustInstDate:function(b,k,H){var Z=b.selectedYear+("Y"===H?k:0),ne=b.selectedMonth+("M"===H?k:0),fe=Math.min(b.selectedDay,this._getDaysInMonth(Z,ne))+("D"===H?k:0),De=this._restrictMinMax(b,this._daylightSavingAdjust(new Date(Z,ne,fe)));b.selectedDay=De.getDate(),b.drawMonth=b.selectedMonth=De.getMonth(),b.drawYear=b.selectedYear=De.getFullYear(),("M"===H||"Y"===H)&&this._notifyChange(b)},_restrictMinMax:function(b,k){var H=this._getMinMaxDate(b,"min"),Z=this._getMinMaxDate(b,"max"),ne=H&&k<H?H:k;return Z&&ne>Z?Z:ne},_notifyChange:function(b){var k=this._get(b,"onChangeMonthYear");k&&k.apply(b.input?b.input[0]:null,[b.selectedYear,b.selectedMonth+1,b])},_getNumberOfMonths:function(b){var k=this._get(b,"numberOfMonths");return null==k?[1,1]:"number"==typeof k?[1,k]:k},_getMinMaxDate:function(b,k){return this._determineDate(b,this._get(b,k+"Date"),null)},_getDaysInMonth:function(b,k){return 32-this._daylightSavingAdjust(new Date(b,k,32)).getDate()},_getFirstDayOfMonth:function(b,k){return new Date(b,k,1).getDay()},_canAdjustMonth:function(b,k,H,Z){var ne=this._getNumberOfMonths(b),fe=this._daylightSavingAdjust(new Date(H,Z+(k<0?k:ne[0]*ne[1]),1));return k<0&&fe.setDate(this._getDaysInMonth(fe.getFullYear(),fe.getMonth())),this._isInRange(b,fe)},_isInRange:function(b,k){var H,Z,ne=this._getMinMaxDate(b,"min"),fe=this._getMinMaxDate(b,"max"),De=null,Ue=null,Qe=this._get(b,"yearRange");return Qe&&(H=Qe.split(":"),Z=(new Date).getFullYear(),De=parseInt(H[0],10),Ue=parseInt(H[1],10),H[0].match(/[+\-].*/)&&(De+=Z),H[1].match(/[+\-].*/)&&(Ue+=Z)),(!ne||k.getTime()>=ne.getTime())&&(!fe||k.getTime()<=fe.getTime())&&(!De||k.getFullYear()>=De)&&(!Ue||k.getFullYear()<=Ue)},_getFormatConfig:function(b){var k=this._get(b,"shortYearCutoff");return{shortYearCutoff:k="string"!=typeof k?k:(new Date).getFullYear()%100+parseInt(k,10),dayNamesShort:this._get(b,"dayNamesShort"),dayNames:this._get(b,"dayNames"),monthNamesShort:this._get(b,"monthNamesShort"),monthNames:this._get(b,"monthNames")}},_formatDate:function(b,k,H,Z){k||(b.currentDay=b.selectedDay,b.currentMonth=b.selectedMonth,b.currentYear=b.selectedYear);var ne=k?"object"==typeof k?k:this._daylightSavingAdjust(new Date(Z,H,k)):this._daylightSavingAdjust(new Date(b.currentYear,b.currentMonth,b.currentDay));return this.formatDate(this._get(b,"dateFormat"),ne,this._getFormatConfig(b))}}),o.fn.datepicker=function(b){if(!this.length)return this;o.datepicker.initialized||(o(document).on("mousedown",o.datepicker._checkExternalClick),o.datepicker.initialized=!0),0===o("#"+o.datepicker._mainDivId).length&&o("body").append(o.datepicker.dpDiv);var k=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&"string"==typeof arguments[1]?o.datepicker["_"+b+"Datepicker"].apply(o.datepicker,[this[0]].concat(k)):this.each(function(){"string"==typeof b?o.datepicker["_"+b+"Datepicker"].apply(o.datepicker,[this].concat(k)):o.datepicker._attachDatepicker(this,b)}):o.datepicker["_"+b+"Datepicker"].apply(o.datepicker,[this[0]].concat(k))},o.datepicker=new Mn,o.datepicker.initialized=!1,o.datepicker.uuid=(new Date).getTime(),o.datepicker.version="1.12.1",o.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var k=o(this).css(b).offset().top;k<0&&o(this).css("top",b.top-k)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&o.fn.draggable&&this._makeDraggable(),this.options.resizable&&o.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;return b&&(b.jquery||b.nodeType)?o(b):this.document.find(b||"body").eq(0)},_destroy:function(){var b,k=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(b=k.parent.children().eq(k.index)).length&&b[0]!==this.element[0]?b.before(this.element):k.parent.append(this.element)},widget:function(){return this.uiDialog},disable:o.noop,enable:o.noop,close:function(b){var k=this;!this._isOpen||!1===this._trigger("beforeClose",b)||(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||o.ui.safeBlur(o.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){k._trigger("close",b)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(b,k){var H=!1,Z=this.uiDialog.siblings(".ui-front:visible").map(function(){return+o(this).css("z-index")}).get(),ne=Math.max.apply(null,Z);return ne>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",ne+1),H=!0),H&&!k&&this._trigger("focus",b),H},open:function(){var b=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=o(o.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){b._focusTabbable(),b._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var b=this._focusedElement;b||(b=this.element.find("[autofocus]")),b.length||(b=this.element.find(":tabbable")),b.length||(b=this.uiDialogButtonPane.find(":tabbable")),b.length||(b=this.uiDialogTitlebarClose.filter(":tabbable")),b.length||(b=this.uiDialog),b.eq(0).trigger("focus")},_keepFocus:function(b){function k(){var H=o.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===H||o.contains(this.uiDialog[0],H)||this._focusTabbable()}b.preventDefault(),k.call(this),this._delay(k)},_createWrapper:function(){this.uiDialog=o("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===o.ui.keyCode.ESCAPE)return b.preventDefault(),void this.close(b);if(b.keyCode===o.ui.keyCode.TAB&&!b.isDefaultPrevented()){var k=this.uiDialog.find(":tabbable"),H=k.filter(":first"),Z=k.filter(":last");b.target!==Z[0]&&b.target!==this.uiDialog[0]||b.shiftKey?(b.target===H[0]||b.target===this.uiDialog[0])&&b.shiftKey&&(this._delay(function(){Z.trigger("focus")}),b.preventDefault()):(this._delay(function(){H.trigger("focus")}),b.preventDefault())}},mousedown:function(b){this._moveToTop(b)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var b;this.uiDialogTitlebar=o("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(k){o(k.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=o("<button type='button'></button>").button({label:o("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(k){k.preventDefault(),this.close(k)}}),b=o("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(b,"ui-dialog-title"),this._title(b),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(b){this.options.title?b.text(this.options.title):b.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=o("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=o("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var b=this,k=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),o.isEmptyObject(k)||o.isArray(k)&&!k.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(o.each(k,function(H,Z){var ne,fe;Z=o.isFunction(Z)?{click:Z,text:H}:Z,Z=o.extend({type:"button"},Z),ne=Z.click,fe={icon:Z.icon,iconPosition:Z.iconPosition,showLabel:Z.showLabel,icons:Z.icons,text:Z.text},delete Z.click,delete Z.icon,delete Z.iconPosition,delete Z.showLabel,delete Z.icons,"boolean"==typeof Z.text&&delete Z.text,o("<button></button>",Z).button(fe).appendTo(b.uiButtonSet).on("click",function(){ne.apply(b.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var b=this,k=this.options;function H(Z){return{position:Z.position,offset:Z.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(Z,ne){b._addClass(o(this),"ui-dialog-dragging"),b._blockFrames(),b._trigger("dragStart",Z,H(ne))},drag:function(Z,ne){b._trigger("drag",Z,H(ne))},stop:function(Z,ne){var fe=ne.offset.left-b.document.scrollLeft(),De=ne.offset.top-b.document.scrollTop();k.position={my:"left top",at:"left"+(fe>=0?"+":"")+fe+" top"+(De>=0?"+":"")+De,of:b.window},b._removeClass(o(this),"ui-dialog-dragging"),b._unblockFrames(),b._trigger("dragStop",Z,H(ne))}})},_makeResizable:function(){var b=this,k=this.options,H=k.resizable,Z=this.uiDialog.css("position"),ne="string"==typeof H?H:"n,e,s,w,se,sw,ne,nw";function fe(De){return{originalPosition:De.originalPosition,originalSize:De.originalSize,position:De.position,size:De.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:k.maxWidth,maxHeight:k.maxHeight,minWidth:k.minWidth,minHeight:this._minHeight(),handles:ne,start:function(De,Ue){b._addClass(o(this),"ui-dialog-resizing"),b._blockFrames(),b._trigger("resizeStart",De,fe(Ue))},resize:function(De,Ue){b._trigger("resize",De,fe(Ue))},stop:function(De,Ue){var Qe=b.uiDialog.offset(),gt=Qe.left-b.document.scrollLeft(),xt=Qe.top-b.document.scrollTop();k.height=b.uiDialog.height(),k.width=b.uiDialog.width(),k.position={my:"left top",at:"left"+(gt>=0?"+":"")+gt+" top"+(xt>=0?"+":"")+xt,of:b.window},b._removeClass(o(this),"ui-dialog-resizing"),b._unblockFrames(),b._trigger("resizeStop",De,fe(Ue))}}).css("position",Z)},_trackFocus:function(){this._on(this.widget(),{focusin:function(b){this._makeFocusTarget(),this._focusedElement=o(b.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var b=this._trackingInstances(),k=o.inArray(this,b);-1!==k&&b.splice(k,1)},_trackingInstances:function(){var b=this.document.data("ui-dialog-instances");return b||this.document.data("ui-dialog-instances",b=[]),b},_minHeight:function(){var b=this.options;return"auto"===b.height?b.minHeight:Math.min(b.minHeight,b.height)},_position:function(){var b=this.uiDialog.is(":visible");b||this.uiDialog.show(),this.uiDialog.position(this.options.position),b||this.uiDialog.hide()},_setOptions:function(b){var k=this,H=!1,Z={};o.each(b,function(ne,fe){k._setOption(ne,fe),ne in k.sizeRelatedOptions&&(H=!0),ne in k.resizableRelatedOptions&&(Z[ne]=fe)}),H&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",Z)},_setOption:function(b,k){var H,Z,ne=this.uiDialog;"disabled"!==b&&(this._super(b,k),"appendTo"===b&&this.uiDialog.appendTo(this._appendTo()),"buttons"===b&&this._createButtons(),"closeText"===b&&this.uiDialogTitlebarClose.button({label:o("<a>").text(""+this.options.closeText).html()}),"draggable"===b&&((H=ne.is(":data(ui-draggable)"))&&!k&&ne.draggable("destroy"),!H&&k&&this._makeDraggable()),"position"===b&&this._position(),"resizable"===b&&((Z=ne.is(":data(ui-resizable)"))&&!k&&ne.resizable("destroy"),Z&&"string"==typeof k&&ne.resizable("option","handles",k),!Z&&!1!==k&&this._makeResizable()),"title"===b&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var b,k,H,Z=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),Z.minWidth>Z.width&&(Z.width=Z.minWidth),b=this.uiDialog.css({height:"auto",width:Z.width}).outerHeight(),k=Math.max(0,Z.minHeight-b),H="number"==typeof Z.maxHeight?Math.max(0,Z.maxHeight-b):"none","auto"===Z.height?this.element.css({minHeight:k,maxHeight:H,height:"auto"}):this.element.height(Math.max(0,Z.height-b)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=o(this);return o("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){return!!o(b.target).closest(".ui-dialog").length||!!o(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var b=!0;this._delay(function(){b=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(k){b||this._allowInteraction(k)||(k.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=o("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var b=this.document.data("ui-dialog-overlays")-1;b?this.document.data("ui-dialog-overlays",b):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==o.uiBackCompat&&o.widget("ui.dialog",o.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(b,k){"dialogClass"===b&&this.uiDialog.removeClass(this.options.dialogClass).addClass(k),this._superApply(arguments)}}),o.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=o("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(b){if(void 0===b)return this.options.value;this.options.value=this._constrainedValue(b),this._refreshValue()},_constrainedValue:function(b){return void 0===b&&(b=this.options.value),this.indeterminate=!1===b,"number"!=typeof b&&(b=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,b))},_setOptions:function(b){var k=b.value;delete b.value,this._super(b),this.options.value=this._constrainedValue(k),this._refreshValue()},_setOption:function(b,k){"max"===b&&(k=Math.max(this.min,k)),this._super(b,k)},_setOptionDisabled:function(b){this._super(b),this.element.attr("aria-disabled",b),this._toggleClass(null,"ui-state-disabled",!!b)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var b=this.options.value,k=this._percentage();this.valueDiv.toggle(this.indeterminate||b>this.min).width(k.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,b===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=o("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":b}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==b&&(this.oldValue=b,this._trigger("change")),b===this.options.max&&this._trigger("complete")}}),o.widget("ui.selectmenu",[o.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var b=this.element.uniqueId().attr("id");this.ids={element:b,button:b+"-button",menu:b+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=o()},_drawButton:function(){var b,k=this,H=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(Z){this.button.focus(),Z.preventDefault()}}),this.element.hide(),this.button=o("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),b=o("<span>").appendTo(this.button),this._addClass(b,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(H).appendTo(this.button),!1!==this.options.width&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){k._rendered||k._refreshMenu()})},_drawMenu:function(){var b=this;this.menu=o("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=o("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(k,H){k.preventDefault(),b._setSelection(),b._select(H.item.data("ui-selectmenu-item"),k)},focus:function(k,H){var Z=H.item.data("ui-selectmenu-item");null!=b.focusIndex&&Z.index!==b.focusIndex&&(b._trigger("focus",k,{item:Z}),b.isOpen||b._select(Z,k)),b.focusIndex=Z.index,b.button.attr("aria-activedescendant",b.menuItems.eq(Z.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var b,k=this.element.find("option");this.menu.empty(),this._parseOptions(k),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,k.length&&(b=this._getSelectedItem(),this.menuInstance.focus(null,b),this._setAria(b.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(b){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",b)))},_position:function(){this.menuWrap.position(o.extend({of:this.button},this.options.position))},close:function(b){!this.isOpen||(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",b))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(b){var k=o("<span>");return this._setText(k,b.label),this._addClass(k,"ui-selectmenu-text"),k},_renderMenu:function(b,k){var H=this,Z="";o.each(k,function(ne,fe){var De;fe.optgroup!==Z&&(De=o("<li>",{text:fe.optgroup}),H._addClass(De,"ui-selectmenu-optgroup","ui-menu-divider"+(fe.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),De.appendTo(b),Z=fe.optgroup),H._renderItemData(b,fe)})},_renderItemData:function(b,k){return this._renderItem(b,k).data("ui-selectmenu-item",k)},_renderItem:function(b,k){var H=o("<li>"),Z=o("<div>",{title:k.element.attr("title")});return k.disabled&&this._addClass(H,null,"ui-state-disabled"),this._setText(Z,k.label),H.append(Z).appendTo(b)},_setText:function(b,k){k?b.text(k):b.html("&#160;")},_move:function(b,k){var H,Z,ne=".ui-menu-item";this.isOpen?H=this.menuItems.eq(this.focusIndex).parent("li"):(H=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),ne+=":not(.ui-state-disabled)"),(Z="first"===b||"last"===b?H["first"===b?"prevAll":"nextAll"](ne).eq(-1):H[b+"All"](ne).eq(0)).length&&this.menuInstance.focus(k,Z)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(b){this[this.isOpen?"close":"open"](b)},_setSelection:function(){var b;!this.range||(window.getSelection?((b=window.getSelection()).removeAllRanges(),b.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(b){!this.isOpen||o(b.target).closest(".ui-selectmenu-menu, #"+o.ui.escapeSelector(this.ids.button)).length||this.close(b)}},_buttonEvents:{mousedown:function(){var b;window.getSelection?(b=window.getSelection()).rangeCount&&(this.range=b.getRangeAt(0)):this.range=document.selection.createRange()},click:function(b){this._setSelection(),this._toggle(b)},keydown:function(b){var k=!0;switch(b.keyCode){case o.ui.keyCode.TAB:case o.ui.keyCode.ESCAPE:this.close(b),k=!1;break;case o.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(b);break;case o.ui.keyCode.UP:b.altKey?this._toggle(b):this._move("prev",b);break;case o.ui.keyCode.DOWN:b.altKey?this._toggle(b):this._move("next",b);break;case o.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(b):this._toggle(b);break;case o.ui.keyCode.LEFT:this._move("prev",b);break;case o.ui.keyCode.RIGHT:this._move("next",b);break;case o.ui.keyCode.HOME:case o.ui.keyCode.PAGE_UP:this._move("first",b);break;case o.ui.keyCode.END:case o.ui.keyCode.PAGE_DOWN:this._move("last",b);break;default:this.menu.trigger(b),k=!1}k&&b.preventDefault()}},_selectFocusedItem:function(b){var k=this.menuItems.eq(this.focusIndex).parent("li");k.hasClass("ui-state-disabled")||this._select(k.data("ui-selectmenu-item"),b)},_select:function(b,k){var H=this.element[0].selectedIndex;this.element[0].selectedIndex=b.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(b)),this._setAria(b),this._trigger("select",k,{item:b}),b.index!==H&&this._trigger("change",k,{item:b}),this.close(k)},_setAria:function(b){var k=this.menuItems.eq(b.index).attr("id");this.button.attr({"aria-labelledby":k,"aria-activedescendant":k}),this.menu.attr("aria-activedescendant",k)},_setOption:function(b,k){if("icons"===b){var H=this.button.find("span.ui-icon");this._removeClass(H,null,this.options.icons.button)._addClass(H,null,k.button)}this._super(b,k),"appendTo"===b&&this.menuWrap.appendTo(this._appendTo()),"width"===b&&this._resizeButton()},_setOptionDisabled:function(b){this._super(b),this.menuInstance.option("disabled",b),this.button.attr("aria-disabled",b),this._toggleClass(this.button,null,"ui-state-disabled",b),this.element.prop("disabled",b),b?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?o(b):this.document.find(b).eq(0)),(!b||!b[0])&&(b=this.element.closest(".ui-front, dialog")),b.length||(b=this.document[0].body),b},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var b=this.options.width;!1!==b?(null===b&&(b=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(b)):this.button.css("width","")},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var b=this._super();return b.disabled=this.element.prop("disabled"),b},_parseOptions:function(b){var k=this,H=[];b.each(function(Z,ne){H.push(k._parseOption(o(ne),Z))}),this.items=H},_parseOption:function(b,k){var H=b.parent("optgroup");return{element:b,index:k,value:b.val(),label:b.text(),optgroup:H.attr("label")||"",disabled:H.prop("disabled")||b.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),o.widget("ui.slider",o.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var b,k,H=this.options,Z=this.element.find(".ui-slider-handle"),fe=[];for(Z.length>(k=H.values&&H.values.length||1)&&(Z.slice(k).remove(),Z=Z.slice(0,k)),b=Z.length;b<k;b++)fe.push("<span tabindex='0'></span>");this.handles=Z.add(o(fe.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(De){o(this).data("ui-slider-handle-index",De).attr("tabIndex",0)})},_createRange:function(){var b=this.options;b.range?(!0===b.range&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:o.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=o("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),("min"===b.range||"max"===b.range)&&this._addClass(this.range,"ui-slider-range-"+b.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(b){var H,Z,ne,fe,Ue,Qe,gt=this,xt=this.options;return!xt.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),H=this._normValueFromMouse({x:b.pageX,y:b.pageY}),Z=this._valueMax()-this._valueMin()+1,this.handles.each(function(Jt){var Ct=Math.abs(H-gt.values(Jt));(Z>Ct||Z===Ct&&(Jt===gt._lastChangedValue||gt.values(Jt)===xt.min))&&(Z=Ct,ne=o(this),fe=Jt)}),!1!==this._start(b,fe))&&(this._mouseSliding=!0,this._handleIndex=fe,this._addClass(ne,null,"ui-state-active"),ne.trigger("focus"),Ue=ne.offset(),Qe=!o(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=Qe?{left:0,top:0}:{left:b.pageX-Ue.left-ne.width()/2,top:b.pageY-Ue.top-ne.height()/2-(parseInt(ne.css("borderTopWidth"),10)||0)-(parseInt(ne.css("borderBottomWidth"),10)||0)+(parseInt(ne.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,fe,H),this._animateOff=!0,!0)},_mouseStart:function(){return!0},_mouseDrag:function(b){var H=this._normValueFromMouse({x:b.pageX,y:b.pageY});return this._slide(b,this._handleIndex,H),!1},_mouseStop:function(b){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(b,this._handleIndex),this._change(b,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(b){var k,H,Z,ne,fe;return"horizontal"===this.orientation?(k=this.elementSize.width,H=b.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(k=this.elementSize.height,H=b.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(Z=H/k)>1&&(Z=1),Z<0&&(Z=0),"vertical"===this.orientation&&(Z=1-Z),ne=this._valueMax()-this._valueMin(),fe=this._valueMin()+Z*ne,this._trimAlignValue(fe)},_uiHash:function(b,k,H){var Z={handle:this.handles[b],handleIndex:b,value:void 0!==k?k:this.value()};return this._hasMultipleValues()&&(Z.value=void 0!==k?k:this.values(b),Z.values=H||this.values()),Z},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(b,k){return this._trigger("start",b,this._uiHash(k))},_slide:function(b,k,H){var ne,fe=this.value(),De=this.values();this._hasMultipleValues()&&(ne=this.values(k?0:1),fe=this.values(k),2===this.options.values.length&&!0===this.options.range&&(H=0===k?Math.min(ne,H):Math.max(ne,H)),De[k]=H),H!==fe&&!1!==this._trigger("slide",b,this._uiHash(k,H,De))&&(this._hasMultipleValues()?this.values(k,H):this.value(H))},_stop:function(b,k){this._trigger("stop",b,this._uiHash(k))},_change:function(b,k){!this._keySliding&&!this._mouseSliding&&(this._lastChangedValue=k,this._trigger("change",b,this._uiHash(k)))},value:function(b){return arguments.length?(this.options.value=this._trimAlignValue(b),this._refreshValue(),void this._change(null,0)):this._value()},values:function(b,k){var H,Z,ne;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(k),this._refreshValue(),void this._change(null,b);if(!arguments.length)return this._values();if(!o.isArray(arguments[0]))return this._hasMultipleValues()?this._values(b):this.value();for(H=this.options.values,Z=arguments[0],ne=0;ne<H.length;ne+=1)H[ne]=this._trimAlignValue(Z[ne]),this._change(null,ne);this._refreshValue()},_setOption:function(b,k){var H,Z=0;switch("range"===b&&!0===this.options.range&&("min"===k?(this.options.value=this._values(0),this.options.values=null):"max"===k&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),o.isArray(this.options.values)&&(Z=this.options.values.length),this._super(b,k),b){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(k),this.handles.css("horizontal"===k?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),H=Z-1;H>=0;H--)this._change(null,H);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(b){this._super(b),this._toggleClass(null,"ui-state-disabled",!!b)},_value:function(){var b=this.options.value;return this._trimAlignValue(b)},_values:function(b){var H,Z;if(arguments.length)return this._trimAlignValue(this.options.values[b]);if(this._hasMultipleValues()){for(H=this.options.values.slice(),Z=0;Z<H.length;Z+=1)H[Z]=this._trimAlignValue(H[Z]);return H}return[]},_trimAlignValue:function(b){if(b<=this._valueMin())return this._valueMin();if(b>=this._valueMax())return this._valueMax();var k=this.options.step>0?this.options.step:1,H=(b-this._valueMin())%k,Z=b-H;return 2*Math.abs(H)>=k&&(Z+=H>0?k:-k),parseFloat(Z.toFixed(5))},_calculateNewMax:function(){var b=this.options.max,k=this._valueMin(),H=this.options.step;(b=Math.round((b-k)/H)*H+k)>this.options.max&&(b-=H),this.max=parseFloat(b.toFixed(this._precision()))},_precision:function(){var b=this._precisionOf(this.options.step);return null!==this.options.min&&(b=Math.max(b,this._precisionOf(this.options.min))),b},_precisionOf:function(b){var k=b.toString(),H=k.indexOf(".");return-1===H?0:k.length-H-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(b){"vertical"===b&&this.range.css({width:"",left:""}),"horizontal"===b&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var b,k,H,Z,ne,fe=this.options.range,De=this.options,Ue=this,Qe=!this._animateOff&&De.animate,gt={};this._hasMultipleValues()?this.handles.each(function(xt){k=(Ue.values(xt)-Ue._valueMin())/(Ue._valueMax()-Ue._valueMin())*100,gt["horizontal"===Ue.orientation?"left":"bottom"]=k+"%",o(this).stop(1,1)[Qe?"animate":"css"](gt,De.animate),!0===Ue.options.range&&("horizontal"===Ue.orientation?(0===xt&&Ue.range.stop(1,1)[Qe?"animate":"css"]({left:k+"%"},De.animate),1===xt&&Ue.range[Qe?"animate":"css"]({width:k-b+"%"},{queue:!1,duration:De.animate})):(0===xt&&Ue.range.stop(1,1)[Qe?"animate":"css"]({bottom:k+"%"},De.animate),1===xt&&Ue.range[Qe?"animate":"css"]({height:k-b+"%"},{queue:!1,duration:De.animate}))),b=k}):(H=this.value(),Z=this._valueMin(),ne=this._valueMax(),gt["horizontal"===this.orientation?"left":"bottom"]=(k=ne!==Z?(H-Z)/(ne-Z)*100:0)+"%",this.handle.stop(1,1)[Qe?"animate":"css"](gt,De.animate),"min"===fe&&"horizontal"===this.orientation&&this.range.stop(1,1)[Qe?"animate":"css"]({width:k+"%"},De.animate),"max"===fe&&"horizontal"===this.orientation&&this.range.stop(1,1)[Qe?"animate":"css"]({width:100-k+"%"},De.animate),"min"===fe&&"vertical"===this.orientation&&this.range.stop(1,1)[Qe?"animate":"css"]({height:k+"%"},De.animate),"max"===fe&&"vertical"===this.orientation&&this.range.stop(1,1)[Qe?"animate":"css"]({height:100-k+"%"},De.animate))},_handleEvents:{keydown:function(b){var H,Z,ne,fe=o(b.target).data("ui-slider-handle-index");switch(b.keyCode){case o.ui.keyCode.HOME:case o.ui.keyCode.END:case o.ui.keyCode.PAGE_UP:case o.ui.keyCode.PAGE_DOWN:case o.ui.keyCode.UP:case o.ui.keyCode.RIGHT:case o.ui.keyCode.DOWN:case o.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(o(b.target),null,"ui-state-active"),!1===this._start(b,fe)))return}switch(ne=this.options.step,H=Z=this._hasMultipleValues()?this.values(fe):this.value(),b.keyCode){case o.ui.keyCode.HOME:Z=this._valueMin();break;case o.ui.keyCode.END:Z=this._valueMax();break;case o.ui.keyCode.PAGE_UP:Z=this._trimAlignValue(H+(this._valueMax()-this._valueMin())/this.numPages);break;case o.ui.keyCode.PAGE_DOWN:Z=this._trimAlignValue(H-(this._valueMax()-this._valueMin())/this.numPages);break;case o.ui.keyCode.UP:case o.ui.keyCode.RIGHT:if(H===this._valueMax())return;Z=this._trimAlignValue(H+ne);break;case o.ui.keyCode.DOWN:case o.ui.keyCode.LEFT:if(H===this._valueMin())return;Z=this._trimAlignValue(H-ne)}this._slide(b,fe,Z)},keyup:function(b){var k=o(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,k),this._change(b,k),this._removeClass(o(b.target),null,"ui-state-active"))}}}),o.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b=this._super(),k=this.element;return o.each(["min","max","step"],function(H,Z){var ne=k.attr(Z);null!=ne&&ne.length&&(b[Z]=ne)}),b},_events:{keydown:function(b){this._start(b)&&this._keydown(b)&&b.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(b){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",b))},mousewheel:function(b,k){if(k){if(!this.spinning&&!this._start(b))return!1;this._spin((k>0?1:-1)*this.options.step,b),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(b)},100),b.preventDefault()}},"mousedown .ui-spinner-button":function(b){var k;function H(){this.element[0]===o.ui.safeActiveElement(this.document[0])||(this.element.trigger("focus"),this.previous=k,this._delay(function(){this.previous=k}))}k=this.element[0]===o.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),b.preventDefault(),H.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,H.call(this)}),!1!==this._start(b)&&this._repeat(null,o(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){if(o(b.currentTarget).hasClass("ui-state-active")){if(!1===this._start(b))return!1;this._repeat(null,o(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)}},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(b){var k=this.options,H=o.ui.keyCode;switch(b.keyCode){case H.UP:return this._repeat(null,1,b),!0;case H.DOWN:return this._repeat(null,-1,b),!0;case H.PAGE_UP:return this._repeat(null,k.page,b),!0;case H.PAGE_DOWN:return this._repeat(null,-k.page,b),!0}return!1},_start:function(b){return!(!this.spinning&&!1===this._trigger("start",b)||(this.counter||(this.counter=1),this.spinning=!0,0))},_repeat:function(b,k,H){b=b||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,k,H)},b),this._spin(k*this.options.step,H)},_spin:function(b,k){var H=this.value()||0;this.counter||(this.counter=1),H=this._adjustValue(H+b*this._increment(this.counter)),(!this.spinning||!1!==this._trigger("spin",k,{value:H}))&&(this._value(H),this.counter++)},_increment:function(b){var k=this.options.incremental;return k?o.isFunction(k)?k(b):Math.floor(b*b*b/5e4-b*b/500+17*b/200+1):1},_precision:function(){var b=this._precisionOf(this.options.step);return null!==this.options.min&&(b=Math.max(b,this._precisionOf(this.options.min))),b},_precisionOf:function(b){var k=b.toString(),H=k.indexOf(".");return-1===H?0:k.length-H-1},_adjustValue:function(b){var k,H,Z=this.options;return H=b-(k=null!==Z.min?Z.min:0),b=k+(H=Math.round(H/Z.step)*Z.step),b=parseFloat(b.toFixed(this._precision())),null!==Z.max&&b>Z.max?Z.max:null!==Z.min&&b<Z.min?Z.min:b},_stop:function(b){!this.spinning||(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",b))},_setOption:function(b,k){var H,Z,ne;if("culture"===b||"numberFormat"===b)return H=this._parse(this.element.val()),this.options[b]=k,void this.element.val(this._format(H));("max"===b||"min"===b||"step"===b)&&"string"==typeof k&&(k=this._parse(k)),"icons"===b&&(Z=this.buttons.first().find(".ui-icon"),this._removeClass(Z,null,this.options.icons.up),this._addClass(Z,null,k.up),ne=this.buttons.last().find(".ui-icon"),this._removeClass(ne,null,this.options.icons.down),this._addClass(ne,null,k.down)),this._super(b,k)},_setOptionDisabled:function(b){this._super(b),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!b),this.element.prop("disabled",!!b),this.buttons.button(b?"disable":"enable")},_setOptions:lt(function(b){this._super(b)}),_parse:function(b){return"string"==typeof b&&""!==b&&(b=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(b,10,this.options.culture):+b),""===b||isNaN(b)?null:b},_format:function(b){return""===b?"":window.Globalize&&this.options.numberFormat?Globalize.format(b,this.options.numberFormat,this.options.culture):b},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var b=this.value();return null!==b&&b===this._adjustValue(b)},_value:function(b,k){var H;""!==b&&null!==(H=this._parse(b))&&(k||(H=this._adjustValue(H)),b=this._format(H)),this.element.val(b),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:lt(function(b){this._stepUp(b)}),_stepUp:function(b){this._start()&&(this._spin((b||1)*this.options.step),this._stop())},stepDown:lt(function(b){this._stepDown(b)}),_stepDown:function(b){this._start()&&(this._spin((b||1)*-this.options.step),this._stop())},pageUp:lt(function(b){this._stepUp((b||1)*this.options.page)}),pageDown:lt(function(b){this._stepDown((b||1)*this.options.page)}),value:function(b){if(!arguments.length)return this._parse(this.element.val());lt(this._value).call(this,b)},widget:function(){return this.uiSpinner}}),!1!==o.uiBackCompat&&o.widget("ui.spinner",o.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),o.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var b=/#.*$/;return function(k){var H,Z;H=k.href.replace(b,""),Z=location.href.replace(b,"");try{H=decodeURIComponent(H)}catch(ne){}try{Z=decodeURIComponent(Z)}catch(ne){}return k.hash.length>1&&H===Z}}(),_create:function(){var b=this,k=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,k.collapsible),this._processTabs(),k.active=this._initialActive(),o.isArray(k.disabled)&&(k.disabled=o.unique(k.disabled.concat(o.map(this.tabs.filter(".ui-state-disabled"),function(H){return b.tabs.index(H)}))).sort()),this.active=!1!==this.options.active&&this.anchors.length?this._findActive(k.active):o(),this._refresh(),this.active.length&&this.load(k.active)},_initialActive:function(){var b=this.options.active,k=this.options.collapsible,H=location.hash.substring(1);return null===b&&(H&&this.tabs.each(function(Z,ne){if(o(ne).attr("aria-controls")===H)return b=Z,!1}),null===b&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===b||-1===b)&&(b=!!this.tabs.length&&0)),!1!==b&&-1===(b=this.tabs.index(this.tabs.eq(b)))&&(b=!k&&0),!k&&!1===b&&this.anchors.length&&(b=0),b},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):o()}},_tabKeydown:function(b){var k=o(o.ui.safeActiveElement(this.document[0])).closest("li"),H=this.tabs.index(k),Z=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case o.ui.keyCode.RIGHT:case o.ui.keyCode.DOWN:H++;break;case o.ui.keyCode.UP:case o.ui.keyCode.LEFT:Z=!1,H--;break;case o.ui.keyCode.END:H=this.anchors.length-1;break;case o.ui.keyCode.HOME:H=0;break;case o.ui.keyCode.SPACE:return b.preventDefault(),clearTimeout(this.activating),void this._activate(H);case o.ui.keyCode.ENTER:return b.preventDefault(),clearTimeout(this.activating),void this._activate(H!==this.options.active&&H);default:return}b.preventDefault(),clearTimeout(this.activating),H=this._focusNextTab(H,Z),!b.ctrlKey&&!b.metaKey&&(k.attr("aria-selected","false"),this.tabs.eq(H).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",H)},this.delay))}},_panelKeydown:function(b){this._handlePageNav(b)||b.ctrlKey&&b.keyCode===o.ui.keyCode.UP&&(b.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(b){return b.altKey&&b.keyCode===o.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):b.altKey&&b.keyCode===o.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(b,k){for(var H=this.tabs.length-1;-1!==o.inArray((b>H&&(b=0),b<0&&(b=H),b),this.options.disabled);)b=k?b+1:b-1;return b},_focusNextTab:function(b,k){return b=this._findNextTab(b,k),this.tabs.eq(b).trigger("focus"),b},_setOption:function(b,k){"active"!==b?(this._super(b,k),"collapsible"===b&&(this._toggleClass("ui-tabs-collapsible",null,k),!k&&!1===this.options.active&&this._activate(0)),"event"===b&&this._setupEvents(k),"heightStyle"===b&&this._setupHeightStyle(k)):this._activate(k)},_sanitizeSelector:function(b){return b?b.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,k=this.tablist.children(":has(a[href])");b.disabled=o.map(k.filter(".ui-state-disabled"),function(H){return k.index(H)}),this._processTabs(),!1!==b.active&&this.anchors.length?this.active.length&&!o.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=o()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=o()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this,k=this.tabs,H=this.anchors,Z=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(ne){o(this).is(".ui-state-disabled")&&ne.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){o(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return o("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=o(),this.anchors.each(function(ne,fe){var De,Ue,Qe,gt=o(fe).uniqueId().attr("id"),xt=o(fe).closest("li"),Jt=xt.attr("aria-controls");b._isLocal(fe)?(Qe=(De=fe.hash).substring(1),Ue=b.element.find(b._sanitizeSelector(De))):(Qe=xt.attr("aria-controls")||o({}).uniqueId()[0].id,(Ue=b.element.find(De="#"+Qe)).length||(Ue=b._createPanel(Qe)).insertAfter(b.panels[ne-1]||b.tablist),Ue.attr("aria-live","polite")),Ue.length&&(b.panels=b.panels.add(Ue)),Jt&&xt.data("ui-tabs-aria-controls",Jt),xt.attr({"aria-controls":Qe,"aria-labelledby":gt}),Ue.attr("aria-labelledby",gt)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),k&&(this._off(k.not(this.tabs)),this._off(H.not(this.anchors)),this._off(Z.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(b){return o("<div>").attr("id",b).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(b){var k,H,Z;for(o.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1),Z=0;H=this.tabs[Z];Z++)k=o(H),!0===b||-1!==o.inArray(Z,b)?(k.attr("aria-disabled","true"),this._addClass(k,null,"ui-state-disabled")):(k.removeAttr("aria-disabled"),this._removeClass(k,null,"ui-state-disabled"));this.options.disabled=b,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===b)},_setupEvents:function(b){var k={};b&&o.each(b.split(" "),function(H,Z){k[Z]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(H){H.preventDefault()}}),this._on(this.anchors,k),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(b){var k,H=this.element.parent();"fill"===b?(k=H.height(),k-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var Z=o(this),ne=Z.css("position");"absolute"===ne||"fixed"===ne||(k-=Z.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){k-=o(this).outerHeight(!0)}),this.panels.each(function(){o(this).height(Math.max(0,k-o(this).innerHeight()+o(this).height()))}).css("overflow","auto")):"auto"===b&&(k=0,this.panels.each(function(){k=Math.max(k,o(this).height("").height())}).height(k))},_eventHandler:function(b){var k=this.options,H=this.active,ne=o(b.currentTarget).closest("li"),fe=ne[0]===H[0],De=fe&&k.collapsible,Ue=De?o():this._getPanelForTab(ne),Qe=H.length?this._getPanelForTab(H):o(),gt={oldTab:H,oldPanel:Qe,newTab:De?o():ne,newPanel:Ue};b.preventDefault(),!(ne.hasClass("ui-state-disabled")||ne.hasClass("ui-tabs-loading")||this.running||fe&&!k.collapsible||!1===this._trigger("beforeActivate",b,gt))&&(k.active=!De&&this.tabs.index(ne),this.active=fe?o():ne,this.xhr&&this.xhr.abort(),!Qe.length&&!Ue.length&&o.error("jQuery UI Tabs: Mismatching fragment identifier."),Ue.length&&this.load(this.tabs.index(ne),b),this._toggle(b,gt))},_toggle:function(b,k){var H=this,Z=k.newPanel,ne=k.oldPanel;function fe(){H.running=!1,H._trigger("activate",b,k)}function De(){H._addClass(k.newTab.closest("li"),"ui-tabs-active","ui-state-active"),Z.length&&H.options.show?H._show(Z,H.options.show,fe):(Z.show(),fe())}this.running=!0,ne.length&&this.options.hide?this._hide(ne,this.options.hide,function(){H._removeClass(k.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),De()}):(this._removeClass(k.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),ne.hide(),De()),ne.attr("aria-hidden","true"),k.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),Z.length&&ne.length?k.oldTab.attr("tabIndex",-1):Z.length&&this.tabs.filter(function(){return 0===o(this).attr("tabIndex")}).attr("tabIndex",-1),Z.attr("aria-hidden","false"),k.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(b){var k,H=this._findActive(b);H[0]!==this.active[0]&&(H.length||(H=this.active),k=H.find(".ui-tabs-anchor")[0],this._eventHandler({target:k,currentTarget:k,preventDefault:o.noop}))},_findActive:function(b){return!1===b?o():this.tabs.eq(b)},_getIndex:function(b){return"string"==typeof b&&(b=this.anchors.index(this.anchors.filter("[href$='"+o.ui.escapeSelector(b)+"']"))),b},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){o.data(this,"ui-tabs-destroy")?o(this).remove():o(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var b=o(this),k=b.data("ui-tabs-aria-controls");k?b.attr("aria-controls",k).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(b){var k=this.options.disabled;!1!==k&&(void 0===b?k=!1:(b=this._getIndex(b),k=o.isArray(k)?o.map(k,function(H){return H!==b?H:null}):o.map(this.tabs,function(H,Z){return Z!==b?Z:null})),this._setOptionDisabled(k))},disable:function(b){var k=this.options.disabled;if(!0!==k){if(void 0===b)k=!0;else{if(b=this._getIndex(b),-1!==o.inArray(b,k))return;k=o.isArray(k)?o.merge([b],k).sort():[b]}this._setOptionDisabled(k)}},load:function(b,k){b=this._getIndex(b);var H=this,Z=this.tabs.eq(b),ne=Z.find(".ui-tabs-anchor"),fe=this._getPanelForTab(Z),De={tab:Z,panel:fe},Ue=function(Qe,gt){"abort"===gt&&H.panels.stop(!1,!0),H._removeClass(Z,"ui-tabs-loading"),fe.removeAttr("aria-busy"),Qe===H.xhr&&delete H.xhr};this._isLocal(ne[0])||(this.xhr=o.ajax(this._ajaxSettings(ne,k,De)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(Z,"ui-tabs-loading"),fe.attr("aria-busy","true"),this.xhr.done(function(Qe,gt,xt){setTimeout(function(){fe.html(Qe),H._trigger("load",k,De),Ue(xt,gt)},1)}).fail(function(Qe,gt){setTimeout(function(){Ue(Qe,gt)},1)})))},_ajaxSettings:function(b,k,H){var Z=this;return{url:b.attr("href").replace(/#.*$/,""),beforeSend:function(ne,fe){return Z._trigger("beforeLoad",k,o.extend({jqXHR:ne,ajaxSettings:fe},H))}}},_getPanelForTab:function(b){var k=o(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+k))}}),!1!==o.uiBackCompat&&o.widget("ui.tabs",o.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),o.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var b=o(this).attr("title")||"";return o("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(b,k){var H=(b.attr("aria-describedby")||"").split(/\s+/);H.push(k),b.data("ui-tooltip-id",k).attr("aria-describedby",o.trim(H.join(" ")))},_removeDescribedBy:function(b){var k=b.data("ui-tooltip-id"),H=(b.attr("aria-describedby")||"").split(/\s+/),Z=o.inArray(k,H);-1!==Z&&H.splice(Z,1),b.removeData("ui-tooltip-id"),(H=o.trim(H.join(" ")))?b.attr("aria-describedby",H):b.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=o("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=o([])},_setOption:function(b,k){var H=this;this._super(b,k),"content"===b&&o.each(this.tooltips,function(Z,ne){H._updateContent(ne.element)})},_setOptionDisabled:function(b){this[b?"_disable":"_enable"]()},_disable:function(){var b=this;o.each(this.tooltips,function(k,H){var Z=o.Event("blur");Z.target=Z.currentTarget=H.element[0],b.close(Z,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var k=o(this);if(k.is("[title]"))return k.data("ui-tooltip-title",k.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var b=o(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))}),this.disabledTitles=o([])},open:function(b){var k=this,H=o(b?b.target:this.element).closest(this.options.items);!H.length||H.data("ui-tooltip-id")||(H.attr("title")&&H.data("ui-tooltip-title",H.attr("title")),H.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&H.parents().each(function(){var ne,Z=o(this);Z.data("ui-tooltip-open")&&((ne=o.Event("blur")).target=ne.currentTarget=this,k.close(ne,!0)),Z.attr("title")&&(Z.uniqueId(),k.parents[this.id]={element:this,title:Z.attr("title")},Z.attr("title",""))}),this._registerCloseHandlers(b,H),this._updateContent(H,b))},_updateContent:function(b,k){var H,Z=this.options.content,ne=this,fe=k?k.type:null;if("string"==typeof Z||Z.nodeType||Z.jquery)return this._open(k,b,Z);(H=Z.call(b[0],function(De){ne._delay(function(){!b.data("ui-tooltip-open")||(k&&(k.type=fe),this._open(k,b,De))})}))&&this._open(k,b,H)},_open:function(b,k,H){var Z,ne,fe,De,Ue=o.extend({},this.options.position);function Qe(gt){Ue.of=gt,!ne.is(":hidden")&&ne.position(Ue)}H&&((Z=this._find(k))?Z.tooltip.find(".ui-tooltip-content").html(H):(k.is("[title]")&&(b&&"mouseover"===b.type?k.attr("title",""):k.removeAttr("title")),Z=this._tooltip(k),this._addDescribedBy(k,(ne=Z.tooltip).attr("id")),ne.find(".ui-tooltip-content").html(H),this.liveRegion.children().hide(),(De=o("<div>").html(ne.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"),De.removeAttr("id").find("[id]").removeAttr("id"),De.appendTo(this.liveRegion),this.options.track&&b&&/^mouse/.test(b.type)?(this._on(this.document,{mousemove:Qe}),Qe(b)):ne.position(o.extend({of:k},this.options.position)),ne.hide(),this._show(ne,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(fe=this.delayedShow=setInterval(function(){ne.is(":visible")&&(Qe(Ue.of),clearInterval(fe))},o.fx.interval)),this._trigger("open",b,{tooltip:ne})))},_registerCloseHandlers:function(b,k){var H={keyup:function(Z){if(Z.keyCode===o.ui.keyCode.ESCAPE){var ne=o.Event(Z);ne.currentTarget=k[0],this.close(ne,!0)}}};k[0]!==this.element[0]&&(H.remove=function(){this._removeTooltip(this._find(k).tooltip)}),(!b||"mouseover"===b.type)&&(H.mouseleave="close"),(!b||"focusin"===b.type)&&(H.focusout="close"),this._on(!0,k,H)},close:function(b){var k,H=this,Z=o(b?b.currentTarget:this.element),ne=this._find(Z);ne?(k=ne.tooltip,!ne.closing&&(clearInterval(this.delayedShow),Z.data("ui-tooltip-title")&&!Z.attr("title")&&Z.attr("title",Z.data("ui-tooltip-title")),this._removeDescribedBy(Z),ne.hiding=!0,k.stop(!0),this._hide(k,this.options.hide,function(){H._removeTooltip(o(this))}),Z.removeData("ui-tooltip-open"),this._off(Z,"mouseleave focusout keyup"),Z[0]!==this.element[0]&&this._off(Z,"remove"),this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&o.each(this.parents,function(fe,De){o(De.element).attr("title",De.title),delete H.parents[fe]}),ne.closing=!0,this._trigger("close",b,{tooltip:k}),ne.hiding||(ne.closing=!1))):Z.removeData("ui-tooltip-open")},_tooltip:function(b){var k=o("<div>").attr("role","tooltip"),H=o("<div>").appendTo(k),Z=k.uniqueId().attr("id");return this._addClass(H,"ui-tooltip-content"),this._addClass(k,"ui-tooltip","ui-widget ui-widget-content"),k.appendTo(this._appendTo(b)),this.tooltips[Z]={element:b,tooltip:k}},_find:function(b){var k=b.data("ui-tooltip-id");return k?this.tooltips[k]:null},_removeTooltip:function(b){b.remove(),delete this.tooltips[b.attr("id")]},_appendTo:function(b){var k=b.closest(".ui-front, dialog");return k.length||(k=this.document[0].body),k},_destroy:function(){var b=this;o.each(this.tooltips,function(k,H){var Z=o.Event("blur"),ne=H.element;Z.target=Z.currentTarget=ne[0],b.close(Z,!0),o("#"+k).remove(),ne.data("ui-tooltip-title")&&(ne.attr("title")||ne.attr("title",ne.data("ui-tooltip-title")),ne.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),!1!==o.uiBackCompat&&o.widget("ui.tooltip",o.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var b=this._superApply(arguments);return this.options.tooltipClass&&b.tooltip.addClass(this.options.tooltipClass),b}});var Ln="ui-effects-",rn="ui-effects-style",ui="ui-effects-animated",ki=o;o.effects={effect:{}},function(b,k){var xt,Z=/^([\-+])=\s*(\d+\.?\d*)/,ne=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(St){return[St[1],St[2],St[3],St[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(St){return[2.55*St[1],2.55*St[2],2.55*St[3],St[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(St){return[parseInt(St[1],16),parseInt(St[2],16),parseInt(St[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(St){return[parseInt(St[1]+St[1],16),parseInt(St[2]+St[2],16),parseInt(St[3]+St[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(St){return[St[1],St[2]/100,St[3]/100,St[4]]}}],fe=b.Color=function(St,Kt,gn,sn){return new b.Color.fn.parse(St,Kt,gn,sn)},De={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},Ue={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},Qe=fe.support={},gt=b("<p>")[0],Jt=b.each;function Ct(St,Kt,gn){var sn=Ue[Kt.type]||{};return null==St?gn||!Kt.def?null:Kt.def:(St=sn.floor?~~St:parseFloat(St),isNaN(St)?Kt.def:sn.mod?(St+sn.mod)%sn.mod:0>St?0:sn.max<St?sn.max:St)}function Ht(St){var Kt=fe(),gn=Kt._rgba=[];return St=St.toLowerCase(),Jt(ne,function(sn,Wn){var Qn,Di=Wn.re.exec(St),Ci=Di&&Wn.parse(Di),Si=Wn.space||"rgba";if(Ci)return Qn=Kt[Si](Ci),Kt[De[Si].cache]=Qn[De[Si].cache],gn=Kt._rgba=Qn._rgba,!1}),gn.length?("0,0,0,0"===gn.join()&&b.extend(gn,xt.transparent),Kt):xt[St]}function en(St,Kt,gn){return 6*(gn=(gn+1)%1)<1?St+(Kt-St)*gn*6:2*gn<1?Kt:3*gn<2?St+(Kt-St)*(2/3-gn)*6:St}gt.style.cssText="background-color:rgba(1,1,1,.5)",Qe.rgba=gt.style.backgroundColor.indexOf("rgba")>-1,Jt(De,function(St,Kt){Kt.cache="_"+St,Kt.props.alpha={idx:3,type:"percent",def:1}}),fe.fn=b.extend(fe.prototype,{parse:function(St,Kt,gn,sn){if(St===k)return this._rgba=[null,null,null,null],this;(St.jquery||St.nodeType)&&(St=b(St).css(Kt),Kt=k);var Wn=this,Qn=b.type(St),Di=this._rgba=[];return Kt!==k&&(St=[St,Kt,gn,sn],Qn="array"),"string"===Qn?this.parse(Ht(St)||xt._default):"array"===Qn?(Jt(De.rgba.props,function(Ci,Si){Di[Si.idx]=Ct(St[Si.idx],Si)}),this):"object"===Qn?(Jt(De,St instanceof fe?function(Ci,Si){St[Si.cache]&&(Wn[Si.cache]=St[Si.cache].slice())}:function(Ci,Si){var Ei=Si.cache;Jt(Si.props,function(Mr,Oi){if(!Wn[Ei]&&Si.to){if("alpha"===Mr||null==St[Mr])return;Wn[Ei]=Si.to(Wn._rgba)}Wn[Ei][Oi.idx]=Ct(St[Mr],Oi,!0)}),Wn[Ei]&&b.inArray(null,Wn[Ei].slice(0,3))<0&&(Wn[Ei][3]=1,Si.from&&(Wn._rgba=Si.from(Wn[Ei])))}),this):void 0},is:function(St){var Kt=fe(St),gn=!0,sn=this;return Jt(De,function(Wn,Qn){var Di,Ci=Kt[Qn.cache];return Ci&&(Di=sn[Qn.cache]||Qn.to&&Qn.to(sn._rgba)||[],Jt(Qn.props,function(Si,Ei){if(null!=Ci[Ei.idx])return gn=Ci[Ei.idx]===Di[Ei.idx]})),gn}),gn},_space:function(){var St=[],Kt=this;return Jt(De,function(gn,sn){Kt[sn.cache]&&St.push(gn)}),St.pop()},transition:function(St,Kt){var gn=fe(St),sn=gn._space(),Wn=De[sn],Qn=0===this.alpha()?fe("transparent"):this,Di=Qn[Wn.cache]||Wn.to(Qn._rgba),Ci=Di.slice();return gn=gn[Wn.cache],Jt(Wn.props,function(Si,Ei){var Mr=Ei.idx,Oi=Di[Mr],Yr=gn[Mr],Br=Ue[Ei.type]||{};null!==Yr&&(null===Oi?Ci[Mr]=Yr:(Br.mod&&(Yr-Oi>Br.mod/2?Oi+=Br.mod:Oi-Yr>Br.mod/2&&(Oi-=Br.mod)),Ci[Mr]=Ct((Yr-Oi)*Kt+Oi,Ei)))}),this[sn](Ci)},blend:function(St){if(1===this._rgba[3])return this;var Kt=this._rgba.slice(),gn=Kt.pop(),sn=fe(St)._rgba;return fe(b.map(Kt,function(Wn,Qn){return(1-gn)*sn[Qn]+gn*Wn}))},toRgbaString:function(){var St="rgba(",Kt=b.map(this._rgba,function(gn,sn){return null==gn?sn>2?1:0:gn});return 1===Kt[3]&&(Kt.pop(),St="rgb("),St+Kt.join()+")"},toHslaString:function(){var St="hsla(",Kt=b.map(this.hsla(),function(gn,sn){return null==gn&&(gn=sn>2?1:0),sn&&sn<3&&(gn=Math.round(100*gn)+"%"),gn});return 1===Kt[3]&&(Kt.pop(),St="hsl("),St+Kt.join()+")"},toHexString:function(St){var Kt=this._rgba.slice(),gn=Kt.pop();return St&&Kt.push(~~(255*gn)),"#"+b.map(Kt,function(sn){return 1===(sn=(sn||0).toString(16)).length?"0"+sn:sn}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),fe.fn.parse.prototype=fe.fn,De.hsla.to=function(St){if(null==St[0]||null==St[1]||null==St[2])return[null,null,null,St[3]];var Oi,Kt=St[0]/255,gn=St[1]/255,sn=St[2]/255,Wn=St[3],Qn=Math.max(Kt,gn,sn),Di=Math.min(Kt,gn,sn),Ci=Qn-Di,Si=Qn+Di,Ei=.5*Si;return Oi=0===Ci?0:Ei<=.5?Ci/Si:Ci/(2-Si),[Math.round(Di===Qn?0:Kt===Qn?60*(gn-sn)/Ci+360:gn===Qn?60*(sn-Kt)/Ci+120:60*(Kt-gn)/Ci+240)%360,Oi,Ei,null==Wn?1:Wn]},De.hsla.from=function(St){if(null==St[0]||null==St[1]||null==St[2])return[null,null,null,St[3]];var Kt=St[0]/360,gn=St[1],sn=St[2],Wn=St[3],Qn=sn<=.5?sn*(1+gn):sn+gn-sn*gn,Di=2*sn-Qn;return[Math.round(255*en(Di,Qn,Kt+1/3)),Math.round(255*en(Di,Qn,Kt)),Math.round(255*en(Di,Qn,Kt-1/3)),Wn]},Jt(De,function(St,Kt){var gn=Kt.props,sn=Kt.cache,Wn=Kt.to,Qn=Kt.from;fe.fn[St]=function(Di){if(Wn&&!this[sn]&&(this[sn]=Wn(this._rgba)),Di===k)return this[sn].slice();var Ci,Si=b.type(Di),Ei="array"===Si||"object"===Si?Di:arguments,Mr=this[sn].slice();return Jt(gn,function(Oi,Yr){var Br=Ei["object"===Si?Oi:Yr.idx];null==Br&&(Br=Mr[Yr.idx]),Mr[Yr.idx]=Ct(Br,Yr)}),Qn?((Ci=fe(Qn(Mr)))[sn]=Mr,Ci):fe(Mr)},Jt(gn,function(Di,Ci){fe.fn[Di]||(fe.fn[Di]=function(Si){var Br,Ei=b.type(Si),Mr="alpha"===Di?this._hsla?"hsla":"rgba":St,Oi=this[Mr](),Yr=Oi[Ci.idx];return"undefined"===Ei?Yr:("function"===Ei&&(Si=Si.call(this,Yr),Ei=b.type(Si)),null==Si&&Ci.empty?this:("string"===Ei&&(Br=Z.exec(Si))&&(Si=Yr+parseFloat(Br[2])*("+"===Br[1]?1:-1)),Oi[Ci.idx]=Si,this[Mr](Oi)))})})}),fe.hook=function(St){var Kt=St.split(" ");Jt(Kt,function(gn,sn){b.cssHooks[sn]={set:function(Wn,Qn){var Di,Ci,Si="";if("transparent"!==Qn&&("string"!==b.type(Qn)||(Di=Ht(Qn)))){if(Qn=fe(Di||Qn),!Qe.rgba&&1!==Qn._rgba[3]){for(Ci="backgroundColor"===sn?Wn.parentNode:Wn;(""===Si||"transparent"===Si)&&Ci&&Ci.style;)try{Si=b.css(Ci,"backgroundColor"),Ci=Ci.parentNode}catch(Ei){}Qn=Qn.blend(Si&&"transparent"!==Si?Si:"_default")}Qn=Qn.toRgbaString()}try{Wn.style[sn]=Qn}catch(Ei){}}},b.fx.step[sn]=function(Wn){Wn.colorInit||(Wn.start=fe(Wn.elem,sn),Wn.end=fe(Wn.end),Wn.colorInit=!0),b.cssHooks[sn].set(Wn.elem,Wn.start.transition(Wn.end,Wn.pos))}})},fe.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),b.cssHooks.borderColor={expand:function(St){var Kt={};return Jt(["Top","Right","Bottom","Left"],function(gn,sn){Kt["border"+sn+"Color"]=St}),Kt}},xt=b.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(ki),function(){var ne,b=["add","remove","toggle"],k={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function H(ne){var fe,De,Ue=ne.ownerDocument.defaultView?ne.ownerDocument.defaultView.getComputedStyle(ne,null):ne.currentStyle,Qe={};if(Ue&&Ue.length&&Ue[0]&&Ue[Ue[0]])for(De=Ue.length;De--;)"string"==typeof Ue[fe=Ue[De]]&&(Qe[o.camelCase(fe)]=Ue[fe]);else for(fe in Ue)"string"==typeof Ue[fe]&&(Qe[fe]=Ue[fe]);return Qe}o.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(ne,fe){o.fx.step[fe]=function(De){("none"!==De.end&&!De.setAttr||1===De.pos&&!De.setAttr)&&(ki.style(De.elem,fe,De.end),De.setAttr=!0)}}),o.fn.addBack||(o.fn.addBack=function(ne){return this.add(null==ne?this.prevObject:this.prevObject.filter(ne))}),o.effects.animateClass=function(ne,fe,De,Ue){var Qe=o.speed(fe,De,Ue);return this.queue(function(){var Jt,gt=o(this),xt=gt.attr("class")||"",Ct=Qe.children?gt.find("*").addBack():gt;Ct=Ct.map(function(){return{el:o(this),start:H(this)}}),(Jt=function(){o.each(b,function(Ht,en){ne[en]&&gt[en+"Class"](ne[en])})})(),Ct=Ct.map(function(){return this.end=H(this.el[0]),this.diff=function Z(ne,fe){var Ue,Qe,De={};for(Ue in fe)ne[Ue]!==(Qe=fe[Ue])&&(k[Ue]||(o.fx.step[Ue]||!isNaN(parseFloat(Qe)))&&(De[Ue]=Qe));return De}(this.start,this.end),this}),gt.attr("class",xt),Ct=Ct.map(function(){var Ht=this,en=o.Deferred(),St=o.extend({},Qe,{queue:!1,complete:function(){en.resolve(Ht)}});return this.el.animate(this.diff,St),en.promise()}),o.when.apply(o,Ct.get()).done(function(){Jt(),o.each(arguments,function(){var Ht=this.el;o.each(this.diff,function(en){Ht.css(en,"")})}),Qe.complete.call(gt[0])})})},o.fn.extend({addClass:(ne=o.fn.addClass,function(fe,De,Ue,Qe){return De?o.effects.animateClass.call(this,{add:fe},De,Ue,Qe):ne.apply(this,arguments)}),removeClass:function(ne){return function(fe,De,Ue,Qe){return arguments.length>1?o.effects.animateClass.call(this,{remove:fe},De,Ue,Qe):ne.apply(this,arguments)}}(o.fn.removeClass),toggleClass:function(ne){return function(fe,De,Ue,Qe,gt){return"boolean"==typeof De||void 0===De?Ue?o.effects.animateClass.call(this,De?{add:fe}:{remove:fe},Ue,Qe,gt):ne.apply(this,arguments):o.effects.animateClass.call(this,{toggle:fe},De,Ue,Qe)}}(o.fn.toggleClass),switchClass:function(ne,fe,De,Ue,Qe){return o.effects.animateClass.call(this,{add:fe,remove:ne},De,Ue,Qe)}})}(),function(){var Z;function b(Z,ne,fe,De){return o.isPlainObject(Z)&&(ne=Z,Z=Z.effect),Z={effect:Z},null==ne&&(ne={}),o.isFunction(ne)&&(De=ne,fe=null,ne={}),("number"==typeof ne||o.fx.speeds[ne])&&(De=fe,fe=ne,ne={}),o.isFunction(fe)&&(De=fe,fe=null),ne&&o.extend(Z,ne),fe=fe||ne.duration,Z.duration=o.fx.off?0:"number"==typeof fe?fe:fe in o.fx.speeds?o.fx.speeds[fe]:o.fx.speeds._default,Z.complete=De||ne.complete,Z}function k(Z){return!!(!Z||"number"==typeof Z||o.fx.speeds[Z]||"string"==typeof Z&&!o.effects.effect[Z]||o.isFunction(Z)||"object"==typeof Z&&!Z.effect)}function H(Z,ne){var fe=ne.outerWidth(),De=ne.outerHeight(),Qe=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(Z)||["",0,fe,De,0];return{top:parseFloat(Qe[1])||0,right:"auto"===Qe[2]?fe:parseFloat(Qe[2]),bottom:"auto"===Qe[3]?De:parseFloat(Qe[3]),left:parseFloat(Qe[4])||0}}o.expr&&o.expr.filters&&o.expr.filters.animated&&(o.expr.filters.animated=(Z=o.expr.filters.animated,function(ne){return!!o(ne).data(ui)||Z(ne)})),!1!==o.uiBackCompat&&o.extend(o.effects,{save:function(Z,ne){for(var fe=0,De=ne.length;fe<De;fe++)null!==ne[fe]&&Z.data(Ln+ne[fe],Z[0].style[ne[fe]])},restore:function(Z,ne){for(var fe,De=0,Ue=ne.length;De<Ue;De++)null!==ne[De]&&(fe=Z.data(Ln+ne[De]),Z.css(ne[De],fe))},setMode:function(Z,ne){return"toggle"===ne&&(ne=Z.is(":hidden")?"show":"hide"),ne},createWrapper:function(Z){if(Z.parent().is(".ui-effects-wrapper"))return Z.parent();var ne={width:Z.outerWidth(!0),height:Z.outerHeight(!0),float:Z.css("float")},fe=o("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),De={width:Z.width(),height:Z.height()},Ue=document.activeElement;return Z.wrap(fe),(Z[0]===Ue||o.contains(Z[0],Ue))&&o(Ue).trigger("focus"),fe=Z.parent(),"static"===Z.css("position")?(fe.css({position:"relative"}),Z.css({position:"relative"})):(o.extend(ne,{position:Z.css("position"),zIndex:Z.css("z-index")}),o.each(["top","left","bottom","right"],function(Qe,gt){ne[gt]=Z.css(gt),isNaN(parseInt(ne[gt],10))&&(ne[gt]="auto")}),Z.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),Z.css(De),fe.css(ne).show()},removeWrapper:function(Z){var ne=document.activeElement;return Z.parent().is(".ui-effects-wrapper")&&(Z.parent().replaceWith(Z),(Z[0]===ne||o.contains(Z[0],ne))&&o(ne).trigger("focus")),Z}}),o.extend(o.effects,{version:"1.12.1",define:function(Z,ne,fe){return fe||(fe=ne,ne="effect"),o.effects.effect[Z]=fe,o.effects.effect[Z].mode=ne,fe},scaledDimensions:function(Z,ne,fe){if(0===ne)return{height:0,width:0,outerHeight:0,outerWidth:0};var De="horizontal"!==fe?(ne||100)/100:1,Ue="vertical"!==fe?(ne||100)/100:1;return{height:Z.height()*Ue,width:Z.width()*De,outerHeight:Z.outerHeight()*Ue,outerWidth:Z.outerWidth()*De}},clipToBox:function(Z){return{width:Z.clip.right-Z.clip.left,height:Z.clip.bottom-Z.clip.top,left:Z.clip.left,top:Z.clip.top}},unshift:function(Z,ne,fe){var De=Z.queue();ne>1&&De.splice.apply(De,[1,0].concat(De.splice(ne,fe))),Z.dequeue()},saveStyle:function(Z){Z.data(rn,Z[0].style.cssText)},restoreStyle:function(Z){Z[0].style.cssText=Z.data(rn)||"",Z.removeData(rn)},mode:function(Z,ne){var fe=Z.is(":hidden");return"toggle"===ne&&(ne=fe?"show":"hide"),(fe?"hide"===ne:"show"===ne)&&(ne="none"),ne},getBaseline:function(Z,ne){var fe,De;switch(Z[0]){case"top":fe=0;break;case"middle":fe=.5;break;case"bottom":fe=1;break;default:fe=Z[0]/ne.height}switch(Z[1]){case"left":De=0;break;case"center":De=.5;break;case"right":De=1;break;default:De=Z[1]/ne.width}return{x:De,y:fe}},createPlaceholder:function(Z){var ne,fe=Z.css("position"),De=Z.position();return Z.css({marginTop:Z.css("marginTop"),marginBottom:Z.css("marginBottom"),marginLeft:Z.css("marginLeft"),marginRight:Z.css("marginRight")}).outerWidth(Z.outerWidth()).outerHeight(Z.outerHeight()),/^(static|relative)/.test(fe)&&(fe="absolute",ne=o("<"+Z[0].nodeName+">").insertAfter(Z).css({display:/^(inline|ruby)/.test(Z.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:Z.css("marginTop"),marginBottom:Z.css("marginBottom"),marginLeft:Z.css("marginLeft"),marginRight:Z.css("marginRight"),float:Z.css("float")}).outerWidth(Z.outerWidth()).outerHeight(Z.outerHeight()).addClass("ui-effects-placeholder"),Z.data(Ln+"placeholder",ne)),Z.css({position:fe,left:De.left,top:De.top}),ne},removePlaceholder:function(Z){var ne=Ln+"placeholder",fe=Z.data(ne);fe&&(fe.remove(),Z.removeData(ne))},cleanUp:function(Z){o.effects.restoreStyle(Z),o.effects.removePlaceholder(Z)},setTransition:function(Z,ne,fe,De){return De=De||{},o.each(ne,function(Ue,Qe){var gt=Z.cssUnit(Qe);gt[0]>0&&(De[Qe]=gt[0]*fe+gt[1])}),De}}),o.fn.extend({effect:function(){var Z=b.apply(this,arguments),ne=o.effects.effect[Z.effect],fe=ne.mode,De=Z.queue,Ue=De||"fx",Qe=Z.complete,gt=Z.mode,xt=[],Jt=function(Ht){var en=o(this),St=o.effects.mode(en,gt)||fe;en.data(ui,!0),xt.push(St),fe&&("show"===St||St===fe&&"hide"===St)&&en.show(),(!fe||"none"!==St)&&o.effects.saveStyle(en),o.isFunction(Ht)&&Ht()};if(o.fx.off||!ne)return gt?this[gt](Z.duration,Qe):this.each(function(){Qe&&Qe.call(this)});function Ct(Ht){var en=o(this);function Kt(){o.isFunction(Qe)&&Qe.call(en[0]),o.isFunction(Ht)&&Ht()}Z.mode=xt.shift(),!1===o.uiBackCompat||fe?"none"===Z.mode?(en[gt](),Kt()):ne.call(en[0],Z,function St(){en.removeData(ui),o.effects.cleanUp(en),"hide"===Z.mode&&en.hide(),Kt()}):(en.is(":hidden")?"hide"===gt:"show"===gt)?(en[gt](),Kt()):ne.call(en[0],Z,Kt)}return!1===De?this.each(Jt).each(Ct):this.queue(Ue,Jt).queue(Ue,Ct)},show:function(Z){return function(ne){if(k(ne))return Z.apply(this,arguments);var fe=b.apply(this,arguments);return fe.mode="show",this.effect.call(this,fe)}}(o.fn.show),hide:function(Z){return function(ne){if(k(ne))return Z.apply(this,arguments);var fe=b.apply(this,arguments);return fe.mode="hide",this.effect.call(this,fe)}}(o.fn.hide),toggle:function(Z){return function(ne){if(k(ne)||"boolean"==typeof ne)return Z.apply(this,arguments);var fe=b.apply(this,arguments);return fe.mode="toggle",this.effect.call(this,fe)}}(o.fn.toggle),cssUnit:function(Z){var ne=this.css(Z),fe=[];return o.each(["em","px","%","pt"],function(De,Ue){ne.indexOf(Ue)>0&&(fe=[parseFloat(ne),Ue])}),fe},cssClip:function(Z){return Z?this.css("clip","rect("+Z.top+"px "+Z.right+"px "+Z.bottom+"px "+Z.left+"px)"):H(this.css("clip"),this)},transfer:function(Z,ne){var fe=o(this),De=o(Z.to),Ue="fixed"===De.css("position"),Qe=o("body"),gt=Ue?Qe.scrollTop():0,xt=Ue?Qe.scrollLeft():0,Jt=De.offset(),Ct={top:Jt.top-gt,left:Jt.left-xt,height:De.innerHeight(),width:De.innerWidth()},Ht=fe.offset(),en=o("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(Z.className).css({top:Ht.top-gt,left:Ht.left-xt,height:fe.innerHeight(),width:fe.innerWidth(),position:Ue?"fixed":"absolute"}).animate(Ct,Z.duration,Z.easing,function(){en.remove(),o.isFunction(ne)&&ne()})}}),o.fx.step.clip=function(Z){Z.clipInit||(Z.start=o(Z.elem).cssClip(),"string"==typeof Z.end&&(Z.end=H(Z.end,Z.elem)),Z.clipInit=!0),o(Z.elem).cssClip({top:Z.pos*(Z.end.top-Z.start.top)+Z.start.top,right:Z.pos*(Z.end.right-Z.start.right)+Z.start.right,bottom:Z.pos*(Z.end.bottom-Z.start.bottom)+Z.start.bottom,left:Z.pos*(Z.end.left-Z.start.left)+Z.start.left})}}(),function(){var b={};o.each(["Quad","Cubic","Quart","Quint","Expo"],function(k,H){b[H]=function(Z){return Math.pow(Z,k+2)}}),o.extend(b,{Sine:function(k){return 1-Math.cos(k*Math.PI/2)},Circ:function(k){return 1-Math.sqrt(1-k*k)},Elastic:function(k){return 0===k||1===k?k:-Math.pow(2,8*(k-1))*Math.sin((80*(k-1)-7.5)*Math.PI/15)},Back:function(k){return k*k*(3*k-2)},Bounce:function(k){for(var H,Z=4;k<((H=Math.pow(2,--Z))-1)/11;);return 1/Math.pow(4,3-Z)-7.5625*Math.pow((3*H-2)/22-k,2)}}),o.each(b,function(k,H){o.easing["easeIn"+k]=H,o.easing["easeOut"+k]=function(Z){return 1-H(1-Z)},o.easing["easeInOut"+k]=function(Z){return Z<.5?H(2*Z)/2:1-H(-2*Z+2)/2}})}(),o.effects.define("blind","hide",function(b,k){var H={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},Z=o(this),ne=b.direction||"up",fe=Z.cssClip(),De={clip:o.extend({},fe)},Ue=o.effects.createPlaceholder(Z);De.clip[H[ne][0]]=De.clip[H[ne][1]],"show"===b.mode&&(Z.cssClip(De.clip),Ue&&Ue.css(o.effects.clipToBox(De)),De.clip=fe),Ue&&Ue.animate(o.effects.clipToBox(De),b.duration,b.easing),Z.animate(De,{queue:!1,duration:b.duration,easing:b.easing,complete:k})}),o.effects.define("bounce",function(b,k){var H,Z,ne,fe=o(this),De=b.mode,Ue="hide"===De,Qe="show"===De,gt=b.direction||"up",xt=b.distance,Jt=b.times||5,Ct=2*Jt+(Qe||Ue?1:0),Ht=b.duration/Ct,en=b.easing,St="up"===gt||"down"===gt?"top":"left",Kt="up"===gt||"left"===gt,gn=0,sn=fe.queue().length;for(o.effects.createPlaceholder(fe),ne=fe.css(St),xt||(xt=fe["top"===St?"outerHeight":"outerWidth"]()/3),Qe&&((Z={opacity:1})[St]=ne,fe.css("opacity",0).css(St,Kt?2*-xt:2*xt).animate(Z,Ht,en)),Ue&&(xt/=Math.pow(2,Jt-1)),(Z={})[St]=ne;gn<Jt;gn++)(H={})[St]=(Kt?"-=":"+=")+xt,fe.animate(H,Ht,en).animate(Z,Ht,en),xt=Ue?2*xt:xt/2;Ue&&((H={opacity:0})[St]=(Kt?"-=":"+=")+xt,fe.animate(H,Ht,en)),fe.queue(k),o.effects.unshift(fe,sn,Ct+1)}),o.effects.define("clip","hide",function(b,k){var H,Z={},ne=o(this),fe=b.direction||"vertical",De="both"===fe,Ue=De||"horizontal"===fe,Qe=De||"vertical"===fe;H=ne.cssClip(),Z.clip={top:Qe?(H.bottom-H.top)/2:H.top,right:Ue?(H.right-H.left)/2:H.right,bottom:Qe?(H.bottom-H.top)/2:H.bottom,left:Ue?(H.right-H.left)/2:H.left},o.effects.createPlaceholder(ne),"show"===b.mode&&(ne.cssClip(Z.clip),Z.clip=H),ne.animate(Z,{queue:!1,duration:b.duration,easing:b.easing,complete:k})}),o.effects.define("drop","hide",function(b,k){var H,Z=o(this),fe="show"===b.mode,De=b.direction||"left",Ue="up"===De||"down"===De?"top":"left",Qe="up"===De||"left"===De?"-=":"+=",gt="+="===Qe?"-=":"+=",xt={opacity:0};o.effects.createPlaceholder(Z),H=b.distance||Z["top"===Ue?"outerHeight":"outerWidth"](!0)/2,xt[Ue]=Qe+H,fe&&(Z.css(xt),xt[Ue]=gt+H,xt.opacity=1),Z.animate(xt,{queue:!1,duration:b.duration,easing:b.easing,complete:k})}),o.effects.define("explode","hide",function(b,k){var H,Z,ne,fe,De,Ue,Qe=b.pieces?Math.round(Math.sqrt(b.pieces)):3,gt=Qe,xt=o(this),Ct="show"===b.mode,Ht=xt.show().css("visibility","hidden").offset(),en=Math.ceil(xt.outerWidth()/gt),St=Math.ceil(xt.outerHeight()/Qe),Kt=[];function gn(){Kt.push(this),Kt.length===Qe*gt&&function sn(){xt.css({visibility:"visible"}),o(Kt).remove(),k()}()}for(H=0;H<Qe;H++)for(fe=Ht.top+H*St,Ue=H-(Qe-1)/2,Z=0;Z<gt;Z++)ne=Ht.left+Z*en,De=Z-(gt-1)/2,xt.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-Z*en,top:-H*St}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:en,height:St,left:ne+(Ct?De*en:0),top:fe+(Ct?Ue*St:0),opacity:Ct?0:1}).animate({left:ne+(Ct?0:De*en),top:fe+(Ct?0:Ue*St),opacity:Ct?1:0},b.duration||500,b.easing,gn)}),o.effects.define("fade","toggle",function(b,k){var H="show"===b.mode;o(this).css("opacity",H?0:1).animate({opacity:H?1:0},{queue:!1,duration:b.duration,easing:b.easing,complete:k})}),o.effects.define("fold","hide",function(b,k){var H=o(this),Z=b.mode,ne="show"===Z,fe="hide"===Z,De=b.size||15,Ue=/([0-9]+)%/.exec(De),gt=b.horizFirst?["right","bottom"]:["bottom","right"],xt=b.duration/2,Jt=o.effects.createPlaceholder(H),Ct=H.cssClip(),Ht={clip:o.extend({},Ct)},en={clip:o.extend({},Ct)},St=[Ct[gt[0]],Ct[gt[1]]],Kt=H.queue().length;Ue&&(De=parseInt(Ue[1],10)/100*St[fe?0:1]),Ht.clip[gt[0]]=De,en.clip[gt[0]]=De,en.clip[gt[1]]=0,ne&&(H.cssClip(en.clip),Jt&&Jt.css(o.effects.clipToBox(en)),en.clip=Ct),H.queue(function(gn){Jt&&Jt.animate(o.effects.clipToBox(Ht),xt,b.easing).animate(o.effects.clipToBox(en),xt,b.easing),gn()}).animate(Ht,xt,b.easing).animate(en,xt,b.easing).queue(k),o.effects.unshift(H,Kt,4)}),o.effects.define("highlight","show",function(b,k){var H=o(this),Z={backgroundColor:H.css("backgroundColor")};"hide"===b.mode&&(Z.opacity=0),o.effects.saveStyle(H),H.css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(Z,{queue:!1,duration:b.duration,easing:b.easing,complete:k})}),o.effects.define("size",function(b,k){var H,Z,ne,fe=o(this),De=["fontSize"],Ue=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],Qe=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],gt=b.mode,xt="effect"!==gt,Jt=b.scale||"both",Ct=b.origin||["middle","center"],Ht=fe.css("position"),en=fe.position(),St=o.effects.scaledDimensions(fe),Kt=b.from||St,gn=b.to||o.effects.scaledDimensions(fe,0);o.effects.createPlaceholder(fe),"show"===gt&&(ne=Kt,Kt=gn,gn=ne),Z={from:{y:Kt.height/St.height,x:Kt.width/St.width},to:{y:gn.height/St.height,x:gn.width/St.width}},("box"===Jt||"both"===Jt)&&(Z.from.y!==Z.to.y&&(Kt=o.effects.setTransition(fe,Ue,Z.from.y,Kt),gn=o.effects.setTransition(fe,Ue,Z.to.y,gn)),Z.from.x!==Z.to.x&&(Kt=o.effects.setTransition(fe,Qe,Z.from.x,Kt),gn=o.effects.setTransition(fe,Qe,Z.to.x,gn))),("content"===Jt||"both"===Jt)&&Z.from.y!==Z.to.y&&(Kt=o.effects.setTransition(fe,De,Z.from.y,Kt),gn=o.effects.setTransition(fe,De,Z.to.y,gn)),Ct&&(H=o.effects.getBaseline(Ct,St),Kt.top=(St.outerHeight-Kt.outerHeight)*H.y+en.top,Kt.left=(St.outerWidth-Kt.outerWidth)*H.x+en.left,gn.top=(St.outerHeight-gn.outerHeight)*H.y+en.top,gn.left=(St.outerWidth-gn.outerWidth)*H.x+en.left),fe.css(Kt),("content"===Jt||"both"===Jt)&&(Ue=Ue.concat(["marginTop","marginBottom"]).concat(De),Qe=Qe.concat(["marginLeft","marginRight"]),fe.find("*[width]").each(function(){var sn=o(this),Wn=o.effects.scaledDimensions(sn),Qn={height:Wn.height*Z.from.y,width:Wn.width*Z.from.x,outerHeight:Wn.outerHeight*Z.from.y,outerWidth:Wn.outerWidth*Z.from.x},Di={height:Wn.height*Z.to.y,width:Wn.width*Z.to.x,outerHeight:Wn.height*Z.to.y,outerWidth:Wn.width*Z.to.x};Z.from.y!==Z.to.y&&(Qn=o.effects.setTransition(sn,Ue,Z.from.y,Qn),Di=o.effects.setTransition(sn,Ue,Z.to.y,Di)),Z.from.x!==Z.to.x&&(Qn=o.effects.setTransition(sn,Qe,Z.from.x,Qn),Di=o.effects.setTransition(sn,Qe,Z.to.x,Di)),xt&&o.effects.saveStyle(sn),sn.css(Qn),sn.animate(Di,b.duration,b.easing,function(){xt&&o.effects.restoreStyle(sn)})})),fe.animate(gn,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){var sn=fe.offset();0===gn.opacity&&fe.css("opacity",Kt.opacity),xt||(fe.css("position","static"===Ht?"relative":Ht).offset(sn),o.effects.saveStyle(fe)),k()}})}),o.effects.define("scale",function(b,k){var H=o(this),Z=b.mode,ne=parseInt(b.percent,10)||(0===parseInt(b.percent,10)||"effect"!==Z?0:100),fe=o.extend(!0,{from:o.effects.scaledDimensions(H),to:o.effects.scaledDimensions(H,ne,b.direction||"both"),origin:b.origin||["middle","center"]},b);b.fade&&(fe.from.opacity=1,fe.to.opacity=0),o.effects.effect.size.call(this,fe,k)}),o.effects.define("puff","hide",function(b,k){var H=o.extend(!0,{},b,{fade:!0,percent:parseInt(b.percent,10)||150});o.effects.effect.scale.call(this,H,k)}),o.effects.define("pulsate","show",function(b,k){var H=o(this),Z=b.mode,ne="show"===Z,Ue=2*(b.times||5)+(ne||"hide"===Z?1:0),Qe=b.duration/Ue,gt=0,xt=1,Jt=H.queue().length;for((ne||!H.is(":visible"))&&(H.css("opacity",0).show(),gt=1);xt<Ue;xt++)H.animate({opacity:gt},Qe,b.easing),gt=1-gt;H.animate({opacity:gt},Qe,b.easing),H.queue(k),o.effects.unshift(H,Jt,Ue+1)}),o.effects.define("shake",function(b,k){var H=1,Z=o(this),ne=b.direction||"left",fe=b.distance||20,De=b.times||3,Ue=2*De+1,Qe=Math.round(b.duration/Ue),gt="up"===ne||"down"===ne?"top":"left",xt="up"===ne||"left"===ne,Jt={},Ct={},Ht={},en=Z.queue().length;for(o.effects.createPlaceholder(Z),Jt[gt]=(xt?"-=":"+=")+fe,Ct[gt]=(xt?"+=":"-=")+2*fe,Ht[gt]=(xt?"-=":"+=")+2*fe,Z.animate(Jt,Qe,b.easing);H<De;H++)Z.animate(Ct,Qe,b.easing).animate(Ht,Qe,b.easing);Z.animate(Ct,Qe,b.easing).animate(Jt,Qe/2,b.easing).queue(k),o.effects.unshift(Z,en,Ue+1)}),o.effects.define("slide","show",function(b,k){var H,Z,ne=o(this),fe={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},De=b.mode,Ue=b.direction||"left",Qe="up"===Ue||"down"===Ue?"top":"left",gt="up"===Ue||"left"===Ue,xt=b.distance||ne["top"===Qe?"outerHeight":"outerWidth"](!0),Jt={};o.effects.createPlaceholder(ne),H=ne.cssClip(),Z=ne.position()[Qe],Jt[Qe]=(gt?-1:1)*xt+Z,Jt.clip=ne.cssClip(),Jt.clip[fe[Ue][1]]=Jt.clip[fe[Ue][0]],"show"===De&&(ne.cssClip(Jt.clip),ne.css(Qe,Jt[Qe]),Jt.clip=H,Jt[Qe]=Z),ne.animate(Jt,{queue:!1,duration:b.duration,easing:b.easing,complete:k})}),!1!==o.uiBackCompat&&o.effects.define("transfer",function(b,k){o(this).transfer(b,k)})}(y)},259:function(K,U){var y;!function(o,d){"use strict";"object"==typeof K.exports?K.exports=o.document?d(o,!0):function(g){if(!g.document)throw new Error("jQuery requires a window with a document");return d(g)}:d(o)}("undefined"!=typeof window?window:this,function(o,d){"use strict";var g=[],p=Object.getPrototypeOf,v=g.slice,M=g.flat?function(q){return g.flat.call(q)}:function(q){return g.concat.apply([],q)},T=g.push,I=g.indexOf,P={},N=P.toString,V=P.hasOwnProperty,J=V.toString,W=J.call(Object),re={},ce=function(se){return"function"==typeof se&&"number"!=typeof se.nodeType&&"function"!=typeof se.item},ie=function(se){return null!=se&&se===se.window},ae=o.document,we={type:!0,src:!0,nonce:!0,noModule:!0};function Me(q,se,ge){var xe,Ne,ze=(ge=ge||ae).createElement("script");if(ze.text=q,se)for(xe in we)(Ne=se[xe]||se.getAttribute&&se.getAttribute(xe))&&ze.setAttribute(xe,Ne);ge.head.appendChild(ze).parentNode.removeChild(ze)}function Pe(q){return null==q?q+"":"object"==typeof q||"function"==typeof q?P[N.call(q)]||"object":typeof q}var le=function(q,se){return new le.fn.init(q,se)};function st(q){var se=!!q&&"length"in q&&q.length,ge=Pe(q);return!ce(q)&&!ie(q)&&("array"===ge||0===se||"number"==typeof se&&se>0&&se-1 in q)}le.fn=le.prototype={jquery:"3.6.1",constructor:le,length:0,toArray:function(){return v.call(this)},get:function(q){return null==q?v.call(this):q<0?this[q+this.length]:this[q]},pushStack:function(q){var se=le.merge(this.constructor(),q);return se.prevObject=this,se},each:function(q){return le.each(this,q)},map:function(q){return this.pushStack(le.map(this,function(se,ge){return q.call(se,ge,se)}))},slice:function(){return this.pushStack(v.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(le.grep(this,function(q,se){return(se+1)%2}))},odd:function(){return this.pushStack(le.grep(this,function(q,se){return se%2}))},eq:function(q){var se=this.length,ge=+q+(q<0?se:0);return this.pushStack(ge>=0&&ge<se?[this[ge]]:[])},end:function(){return this.prevObject||this.constructor()},push:T,sort:g.sort,splice:g.splice},le.extend=le.fn.extend=function(){var q,se,ge,xe,Ne,ze,Ye=arguments[0]||{},Et=1,yt=arguments.length,Rt=!1;for("boolean"==typeof Ye&&(Rt=Ye,Ye=arguments[Et]||{},Et++),"object"!=typeof Ye&&!ce(Ye)&&(Ye={}),Et===yt&&(Ye=this,Et--);Et<yt;Et++)if(null!=(q=arguments[Et]))for(se in q)xe=q[se],"__proto__"!==se&&Ye!==xe&&(Rt&&xe&&(le.isPlainObject(xe)||(Ne=Array.isArray(xe)))?(ge=Ye[se],ze=Ne&&!Array.isArray(ge)?[]:Ne||le.isPlainObject(ge)?ge:{},Ne=!1,Ye[se]=le.extend(Rt,ze,xe)):void 0!==xe&&(Ye[se]=xe));return Ye},le.extend({expando:"jQuery"+("3.6.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(q){throw new Error(q)},noop:function(){},isPlainObject:function(q){var se,ge;return!(!q||"[object Object]"!==N.call(q)||(se=p(q))&&("function"!=typeof(ge=V.call(se,"constructor")&&se.constructor)||J.call(ge)!==W))},isEmptyObject:function(q){var se;for(se in q)return!1;return!0},globalEval:function(q,se,ge){Me(q,{nonce:se&&se.nonce},ge)},each:function(q,se){var ge,xe=0;if(st(q))for(ge=q.length;xe<ge&&!1!==se.call(q[xe],xe,q[xe]);xe++);else for(xe in q)if(!1===se.call(q[xe],xe,q[xe]))break;return q},makeArray:function(q,se){var ge=se||[];return null!=q&&(st(Object(q))?le.merge(ge,"string"==typeof q?[q]:q):T.call(ge,q)),ge},inArray:function(q,se,ge){return null==se?-1:I.call(se,q,ge)},merge:function(q,se){for(var ge=+se.length,xe=0,Ne=q.length;xe<ge;xe++)q[Ne++]=se[xe];return q.length=Ne,q},grep:function(q,se,ge){for(var Ne=[],ze=0,Ye=q.length,Et=!ge;ze<Ye;ze++)!se(q[ze],ze)!==Et&&Ne.push(q[ze]);return Ne},map:function(q,se,ge){var xe,Ne,ze=0,Ye=[];if(st(q))for(xe=q.length;ze<xe;ze++)null!=(Ne=se(q[ze],ze,ge))&&Ye.push(Ne);else for(ze in q)null!=(Ne=se(q[ze],ze,ge))&&Ye.push(Ne);return M(Ye)},guid:1,support:re}),"function"==typeof Symbol&&(le.fn[Symbol.iterator]=g[Symbol.iterator]),le.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(q,se){P["[object "+se+"]"]=se.toLowerCase()});var We=function(q){var se,ge,xe,Ne,ze,Ye,Et,yt,Rt,xn,si,on,un,mr,ns,gr,ko,Ls,fl,To="sizzle"+1*new Date,rr=q.document,ol=0,Or=0,ra=Bs(),uh=Bs(),ys=Bs(),Fl=Bs(),pl=function(Ke,bt){return Ke===bt&&(si=!0),0},mi={}.hasOwnProperty,so=[],Ui=so.pop,Bn=so.push,oo=so.push,Za=so.slice,ml=function(Ke,bt){for(var kt=0,Pn=Ke.length;kt<Pn;kt++)if(Ke[kt]===bt)return kt;return-1},Cd="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ar="[\\x20\\t\\r\\n\\f]",Fa="(?:\\\\[\\da-fA-F]{1,6}"+Ar+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",As="\\["+Ar+"*("+Fa+")(?:"+Ar+"*([*^$|!~]?=)"+Ar+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Fa+"))|)"+Ar+"*\\]",Do=":("+Fa+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+As+")*)|.*)\\)|)",Ap=new RegExp(Ar+"+","g"),Cs=new RegExp("^"+Ar+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ar+"+$","g"),je=new RegExp("^"+Ar+"*,"+Ar+"*"),ms=new RegExp("^"+Ar+"*([>+~]|"+Ar+")"+Ar+"*"),$o=new RegExp(Ar+"|>"),Po=new RegExp(Do),Ol=new RegExp("^"+Fa+"$"),Go={ID:new RegExp("^#("+Fa+")"),CLASS:new RegExp("^\\.("+Fa+")"),TAG:new RegExp("^("+Fa+"|[*])"),ATTR:new RegExp("^"+As),PSEUDO:new RegExp("^"+Do),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ar+"*(even|odd|(([+-]|)(\\d*)n|)"+Ar+"*(?:([+-]|)"+Ar+"*(\\d+)|))"+Ar+"*\\)|)","i"),bool:new RegExp("^(?:"+Cd+")$","i"),needsContext:new RegExp("^"+Ar+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ar+"*((?:-\\d)?\\d*)"+Ar+"*\\)|)(?=[^-]|$)","i")},Uc=/HTML$/i,uo=/^(?:input|select|textarea|button)$/i,Ya=/^h\d$/i,Sl=/^[^{]+\{\s*\[native \w/,qr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gc=/[+~]/,Oa=new RegExp("\\\\[\\da-fA-F]{1,6}"+Ar+"?|\\\\([^\\r\\n\\f])","g"),Nl=function(Ke,bt){var kt="0x"+Ke.slice(1)-65536;return bt||(kt<0?String.fromCharCode(kt+65536):String.fromCharCode(kt>>10|55296,1023&kt|56320))},Gc=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Xa=function(Ke,bt){return bt?"\0"===Ke?"\ufffd":Ke.slice(0,-1)+"\\"+Ke.charCodeAt(Ke.length-1).toString(16)+" ":"\\"+Ke},El=function(){on()},Su=yf(function(Ke){return!0===Ke.disabled&&"fieldset"===Ke.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{oo.apply(so=Za.call(rr.childNodes),rr.childNodes)}catch(Ke){oo={apply:so.length?function(bt,kt){Bn.apply(bt,Za.call(kt))}:function(bt,kt){for(var Pn=bt.length,Ft=0;bt[Pn++]=kt[Ft++];);bt.length=Pn-1}}}function Ns(Ke,bt,kt,Pn){var Ft,In,qn,yi,Fi,Rr,Er,Hr=bt&&bt.ownerDocument,Is=bt?bt.nodeType:9;if(kt=kt||[],"string"!=typeof Ke||!Ke||1!==Is&&9!==Is&&11!==Is)return kt;if(!Pn&&(on(bt),bt=bt||un,ns)){if(11!==Is&&(Fi=qr.exec(Ke)))if(Ft=Fi[1]){if(9===Is){if(!(qn=bt.getElementById(Ft)))return kt;if(qn.id===Ft)return kt.push(qn),kt}else if(Hr&&(qn=Hr.getElementById(Ft))&&fl(bt,qn)&&qn.id===Ft)return kt.push(qn),kt}else{if(Fi[2])return oo.apply(kt,bt.getElementsByTagName(Ke)),kt;if((Ft=Fi[3])&&ge.getElementsByClassName&&bt.getElementsByClassName)return oo.apply(kt,bt.getElementsByClassName(Ft)),kt}if(ge.qsa&&!Fl[Ke+" "]&&(!gr||!gr.test(Ke))&&(1!==Is||"object"!==bt.nodeName.toLowerCase())){if(Er=Ke,Hr=bt,1===Is&&($o.test(Ke)||ms.test(Ke))){for(((Hr=gc.test(Ke)&&hr(bt.parentNode)||bt)!==bt||!ge.scope)&&((yi=bt.getAttribute("id"))?yi=yi.replace(Gc,Xa):bt.setAttribute("id",yi=To)),In=(Rr=Ye(Ke)).length;In--;)Rr[In]=(yi?"#"+yi:":scope")+" "+ec(Rr[In]);Er=Rr.join(",")}try{return oo.apply(kt,Hr.querySelectorAll(Er)),kt}catch(Xs){Fl(Ke,!0)}finally{yi===To&&bt.removeAttribute("id")}}}return yt(Ke.replace(Cs,"$1"),bt,kt,Pn)}function Bs(){var Ke=[];return function bt(kt,Pn){return Ke.push(kt+" ")>xe.cacheLength&&delete bt[Ke.shift()],bt[kt+" "]=Pn}}function da(Ke){return Ke[To]=!0,Ke}function $l(Ke){var bt=un.createElement("fieldset");try{return!!Ke(bt)}catch(kt){return!1}finally{bt.parentNode&&bt.parentNode.removeChild(bt),bt=null}}function al(Ke,bt){for(var kt=Ke.split("|"),Pn=kt.length;Pn--;)xe.attrHandle[kt[Pn]]=bt}function wo(Ke,bt){var kt=bt&&Ke,Pn=kt&&1===Ke.nodeType&&1===bt.nodeType&&Ke.sourceIndex-bt.sourceIndex;if(Pn)return Pn;if(kt)for(;kt=kt.nextSibling;)if(kt===bt)return-1;return Ke?1:-1}function Vh(Ke){return function(bt){return"input"===bt.nodeName.toLowerCase()&&bt.type===Ke}}function Eu(Ke){return function(bt){var kt=bt.nodeName.toLowerCase();return("input"===kt||"button"===kt)&&bt.type===Ke}}function Tu(Ke){return function(bt){return"form"in bt?bt.parentNode&&!1===bt.disabled?"label"in bt?"label"in bt.parentNode?bt.parentNode.disabled===Ke:bt.disabled===Ke:bt.isDisabled===Ke||bt.isDisabled!==!Ke&&Su(bt)===Ke:bt.disabled===Ke:"label"in bt&&bt.disabled===Ke}}function ea(Ke){return da(function(bt){return bt=+bt,da(function(kt,Pn){for(var Ft,In=Ke([],kt.length,bt),qn=In.length;qn--;)kt[Ft=In[qn]]&&(kt[Ft]=!(Pn[Ft]=kt[Ft]))})})}function hr(Ke){return Ke&&void 0!==Ke.getElementsByTagName&&Ke}for(se in ge=Ns.support={},ze=Ns.isXML=function(Ke){var kt=Ke&&(Ke.ownerDocument||Ke).documentElement;return!Uc.test(Ke&&Ke.namespaceURI||kt&&kt.nodeName||"HTML")},on=Ns.setDocument=function(Ke){var bt,kt,Pn=Ke?Ke.ownerDocument||Ke:rr;return Pn==un||9!==Pn.nodeType||!Pn.documentElement||(mr=(un=Pn).documentElement,ns=!ze(un),rr!=un&&(kt=un.defaultView)&&kt.top!==kt&&(kt.addEventListener?kt.addEventListener("unload",El,!1):kt.attachEvent&&kt.attachEvent("onunload",El)),ge.scope=$l(function(Ft){return mr.appendChild(Ft).appendChild(un.createElement("div")),void 0!==Ft.querySelectorAll&&!Ft.querySelectorAll(":scope fieldset div").length}),ge.attributes=$l(function(Ft){return Ft.className="i",!Ft.getAttribute("className")}),ge.getElementsByTagName=$l(function(Ft){return Ft.appendChild(un.createComment("")),!Ft.getElementsByTagName("*").length}),ge.getElementsByClassName=Sl.test(un.getElementsByClassName),ge.getById=$l(function(Ft){return mr.appendChild(Ft).id=To,!un.getElementsByName||!un.getElementsByName(To).length}),ge.getById?(xe.filter.ID=function(Ft){var In=Ft.replace(Oa,Nl);return function(qn){return qn.getAttribute("id")===In}},xe.find.ID=function(Ft,In){if(void 0!==In.getElementById&&ns){var qn=In.getElementById(Ft);return qn?[qn]:[]}}):(xe.filter.ID=function(Ft){var In=Ft.replace(Oa,Nl);return function(qn){var yi=void 0!==qn.getAttributeNode&&qn.getAttributeNode("id");return yi&&yi.value===In}},xe.find.ID=function(Ft,In){if(void 0!==In.getElementById&&ns){var qn,yi,Fi,Rr=In.getElementById(Ft);if(Rr){if((qn=Rr.getAttributeNode("id"))&&qn.value===Ft)return[Rr];for(Fi=In.getElementsByName(Ft),yi=0;Rr=Fi[yi++];)if((qn=Rr.getAttributeNode("id"))&&qn.value===Ft)return[Rr]}return[]}}),xe.find.TAG=ge.getElementsByTagName?function(Ft,In){return void 0!==In.getElementsByTagName?In.getElementsByTagName(Ft):ge.qsa?In.querySelectorAll(Ft):void 0}:function(Ft,In){var qn,yi=[],Fi=0,Rr=In.getElementsByTagName(Ft);if("*"===Ft){for(;qn=Rr[Fi++];)1===qn.nodeType&&yi.push(qn);return yi}return Rr},xe.find.CLASS=ge.getElementsByClassName&&function(Ft,In){if(void 0!==In.getElementsByClassName&&ns)return In.getElementsByClassName(Ft)},ko=[],gr=[],(ge.qsa=Sl.test(un.querySelectorAll))&&($l(function(Ft){var In;mr.appendChild(Ft).innerHTML="<a id='"+To+"'></a><select id='"+To+"-\r\\' msallowcapture=''><option selected=''></option></select>",Ft.querySelectorAll("[msallowcapture^='']").length&&gr.push("[*^$]="+Ar+"*(?:''|\"\")"),Ft.querySelectorAll("[selected]").length||gr.push("\\["+Ar+"*(?:value|"+Cd+")"),Ft.querySelectorAll("[id~="+To+"-]").length||gr.push("~="),(In=un.createElement("input")).setAttribute("name",""),Ft.appendChild(In),Ft.querySelectorAll("[name='']").length||gr.push("\\["+Ar+"*name"+Ar+"*="+Ar+"*(?:''|\"\")"),Ft.querySelectorAll(":checked").length||gr.push(":checked"),Ft.querySelectorAll("a#"+To+"+*").length||gr.push(".#.+[+~]"),Ft.querySelectorAll("\\\f"),gr.push("[\\r\\n\\f]")}),$l(function(Ft){Ft.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var In=un.createElement("input");In.setAttribute("type","hidden"),Ft.appendChild(In).setAttribute("name","D"),Ft.querySelectorAll("[name=d]").length&&gr.push("name"+Ar+"*[*^$|!~]?="),2!==Ft.querySelectorAll(":enabled").length&&gr.push(":enabled",":disabled"),mr.appendChild(Ft).disabled=!0,2!==Ft.querySelectorAll(":disabled").length&&gr.push(":enabled",":disabled"),Ft.querySelectorAll("*,:x"),gr.push(",.*:")})),(ge.matchesSelector=Sl.test(Ls=mr.matches||mr.webkitMatchesSelector||mr.mozMatchesSelector||mr.oMatchesSelector||mr.msMatchesSelector))&&$l(function(Ft){ge.disconnectedMatch=Ls.call(Ft,"*"),Ls.call(Ft,"[s!='']:x"),ko.push("!=",Do)}),gr=gr.length&&new RegExp(gr.join("|")),ko=ko.length&&new RegExp(ko.join("|")),bt=Sl.test(mr.compareDocumentPosition),fl=bt||Sl.test(mr.contains)?function(Ft,In){var qn=9===Ft.nodeType?Ft.documentElement:Ft,yi=In&&In.parentNode;return Ft===yi||!(!yi||1!==yi.nodeType||!(qn.contains?qn.contains(yi):Ft.compareDocumentPosition&&16&Ft.compareDocumentPosition(yi)))}:function(Ft,In){if(In)for(;In=In.parentNode;)if(In===Ft)return!0;return!1},pl=bt?function(Ft,In){if(Ft===In)return si=!0,0;var qn=!Ft.compareDocumentPosition-!In.compareDocumentPosition;return qn||(1&(qn=(Ft.ownerDocument||Ft)==(In.ownerDocument||In)?Ft.compareDocumentPosition(In):1)||!ge.sortDetached&&In.compareDocumentPosition(Ft)===qn?Ft==un||Ft.ownerDocument==rr&&fl(rr,Ft)?-1:In==un||In.ownerDocument==rr&&fl(rr,In)?1:xn?ml(xn,Ft)-ml(xn,In):0:4&qn?-1:1)}:function(Ft,In){if(Ft===In)return si=!0,0;var qn,yi=0,Fi=Ft.parentNode,Rr=In.parentNode,Er=[Ft],Hr=[In];if(!Fi||!Rr)return Ft==un?-1:In==un?1:Fi?-1:Rr?1:xn?ml(xn,Ft)-ml(xn,In):0;if(Fi===Rr)return wo(Ft,In);for(qn=Ft;qn=qn.parentNode;)Er.unshift(qn);for(qn=In;qn=qn.parentNode;)Hr.unshift(qn);for(;Er[yi]===Hr[yi];)yi++;return yi?wo(Er[yi],Hr[yi]):Er[yi]==rr?-1:Hr[yi]==rr?1:0}),un},Ns.matches=function(Ke,bt){return Ns(Ke,null,null,bt)},Ns.matchesSelector=function(Ke,bt){if(on(Ke),ge.matchesSelector&&ns&&!Fl[bt+" "]&&(!ko||!ko.test(bt))&&(!gr||!gr.test(bt)))try{var kt=Ls.call(Ke,bt);if(kt||ge.disconnectedMatch||Ke.document&&11!==Ke.document.nodeType)return kt}catch(Pn){Fl(bt,!0)}return Ns(bt,un,null,[Ke]).length>0},Ns.contains=function(Ke,bt){return(Ke.ownerDocument||Ke)!=un&&on(Ke),fl(Ke,bt)},Ns.attr=function(Ke,bt){(Ke.ownerDocument||Ke)!=un&&on(Ke);var kt=xe.attrHandle[bt.toLowerCase()],Pn=kt&&mi.call(xe.attrHandle,bt.toLowerCase())?kt(Ke,bt,!ns):void 0;return void 0!==Pn?Pn:ge.attributes||!ns?Ke.getAttribute(bt):(Pn=Ke.getAttributeNode(bt))&&Pn.specified?Pn.value:null},Ns.escape=function(Ke){return(Ke+"").replace(Gc,Xa)},Ns.error=function(Ke){throw new Error("Syntax error, unrecognized expression: "+Ke)},Ns.uniqueSort=function(Ke){var bt,kt=[],Pn=0,Ft=0;if(si=!ge.detectDuplicates,xn=!ge.sortStable&&Ke.slice(0),Ke.sort(pl),si){for(;bt=Ke[Ft++];)bt===Ke[Ft]&&(Pn=kt.push(Ft));for(;Pn--;)Ke.splice(kt[Pn],1)}return xn=null,Ke},Ne=Ns.getText=function(Ke){var bt,kt="",Pn=0,Ft=Ke.nodeType;if(Ft){if(1===Ft||9===Ft||11===Ft){if("string"==typeof Ke.textContent)return Ke.textContent;for(Ke=Ke.firstChild;Ke;Ke=Ke.nextSibling)kt+=Ne(Ke)}else if(3===Ft||4===Ft)return Ke.nodeValue}else for(;bt=Ke[Pn++];)kt+=Ne(bt);return kt},(xe=Ns.selectors={cacheLength:50,createPseudo:da,match:Go,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Ke){return Ke[1]=Ke[1].replace(Oa,Nl),Ke[3]=(Ke[3]||Ke[4]||Ke[5]||"").replace(Oa,Nl),"~="===Ke[2]&&(Ke[3]=" "+Ke[3]+" "),Ke.slice(0,4)},CHILD:function(Ke){return Ke[1]=Ke[1].toLowerCase(),"nth"===Ke[1].slice(0,3)?(Ke[3]||Ns.error(Ke[0]),Ke[4]=+(Ke[4]?Ke[5]+(Ke[6]||1):2*("even"===Ke[3]||"odd"===Ke[3])),Ke[5]=+(Ke[7]+Ke[8]||"odd"===Ke[3])):Ke[3]&&Ns.error(Ke[0]),Ke},PSEUDO:function(Ke){var bt,kt=!Ke[6]&&Ke[2];return Go.CHILD.test(Ke[0])?null:(Ke[3]?Ke[2]=Ke[4]||Ke[5]||"":kt&&Po.test(kt)&&(bt=Ye(kt,!0))&&(bt=kt.indexOf(")",kt.length-bt)-kt.length)&&(Ke[0]=Ke[0].slice(0,bt),Ke[2]=kt.slice(0,bt)),Ke.slice(0,3))}},filter:{TAG:function(Ke){var bt=Ke.replace(Oa,Nl).toLowerCase();return"*"===Ke?function(){return!0}:function(kt){return kt.nodeName&&kt.nodeName.toLowerCase()===bt}},CLASS:function(Ke){var bt=ra[Ke+" "];return bt||(bt=new RegExp("(^|"+Ar+")"+Ke+"("+Ar+"|$)"))&&ra(Ke,function(kt){return bt.test("string"==typeof kt.className&&kt.className||void 0!==kt.getAttribute&&kt.getAttribute("class")||"")})},ATTR:function(Ke,bt,kt){return function(Pn){var Ft=Ns.attr(Pn,Ke);return null==Ft?"!="===bt:!bt||(Ft+="","="===bt?Ft===kt:"!="===bt?Ft!==kt:"^="===bt?kt&&0===Ft.indexOf(kt):"*="===bt?kt&&Ft.indexOf(kt)>-1:"$="===bt?kt&&Ft.slice(-kt.length)===kt:"~="===bt?(" "+Ft.replace(Ap," ")+" ").indexOf(kt)>-1:"|="===bt&&(Ft===kt||Ft.slice(0,kt.length+1)===kt+"-"))}},CHILD:function(Ke,bt,kt,Pn,Ft){var In="nth"!==Ke.slice(0,3),qn="last"!==Ke.slice(-4),yi="of-type"===bt;return 1===Pn&&0===Ft?function(Fi){return!!Fi.parentNode}:function(Fi,Rr,Er){var Hr,Is,Xs,Nr,xi,Na,Bl=In!==qn?"nextSibling":"previousSibling",Wo=Fi.parentNode,wa=yi&&Fi.nodeName.toLowerCase(),Ka=!Er&&!yi,fa=!1;if(Wo){if(In){for(;Bl;){for(Nr=Fi;Nr=Nr[Bl];)if(yi?Nr.nodeName.toLowerCase()===wa:1===Nr.nodeType)return!1;Na=Bl="only"===Ke&&!Na&&"nextSibling"}return!0}if(Na=[qn?Wo.firstChild:Wo.lastChild],qn&&Ka){for(fa=(xi=(Hr=(Is=(Xs=(Nr=Wo)[To]||(Nr[To]={}))[Nr.uniqueID]||(Xs[Nr.uniqueID]={}))[Ke]||[])[0]===ol&&Hr[1])&&Hr[2],Nr=xi&&Wo.childNodes[xi];Nr=++xi&&Nr&&Nr[Bl]||(fa=xi=0)||Na.pop();)if(1===Nr.nodeType&&++fa&&Nr===Fi){Is[Ke]=[ol,xi,fa];break}}else if(Ka&&(fa=xi=(Hr=(Is=(Xs=(Nr=Fi)[To]||(Nr[To]={}))[Nr.uniqueID]||(Xs[Nr.uniqueID]={}))[Ke]||[])[0]===ol&&Hr[1]),!1===fa)for(;(Nr=++xi&&Nr&&Nr[Bl]||(fa=xi=0)||Na.pop())&&((yi?Nr.nodeName.toLowerCase()!==wa:1!==Nr.nodeType)||!++fa||(Ka&&((Is=(Xs=Nr[To]||(Nr[To]={}))[Nr.uniqueID]||(Xs[Nr.uniqueID]={}))[Ke]=[ol,fa]),Nr!==Fi)););return(fa-=Ft)===Pn||fa%Pn==0&&fa/Pn>=0}}},PSEUDO:function(Ke,bt){var kt,Pn=xe.pseudos[Ke]||xe.setFilters[Ke.toLowerCase()]||Ns.error("unsupported pseudo: "+Ke);return Pn[To]?Pn(bt):Pn.length>1?(kt=[Ke,Ke,"",bt],xe.setFilters.hasOwnProperty(Ke.toLowerCase())?da(function(Ft,In){for(var qn,yi=Pn(Ft,bt),Fi=yi.length;Fi--;)Ft[qn=ml(Ft,yi[Fi])]=!(In[qn]=yi[Fi])}):function(Ft){return Pn(Ft,0,kt)}):Pn}},pseudos:{not:da(function(Ke){var bt=[],kt=[],Pn=Et(Ke.replace(Cs,"$1"));return Pn[To]?da(function(Ft,In,qn,yi){for(var Fi,Rr=Pn(Ft,null,yi,[]),Er=Ft.length;Er--;)(Fi=Rr[Er])&&(Ft[Er]=!(In[Er]=Fi))}):function(Ft,In,qn){return bt[0]=Ft,Pn(bt,null,qn,kt),bt[0]=null,!kt.pop()}}),has:da(function(Ke){return function(bt){return Ns(Ke,bt).length>0}}),contains:da(function(Ke){return Ke=Ke.replace(Oa,Nl),function(bt){return(bt.textContent||Ne(bt)).indexOf(Ke)>-1}}),lang:da(function(Ke){return Ol.test(Ke||"")||Ns.error("unsupported lang: "+Ke),Ke=Ke.replace(Oa,Nl).toLowerCase(),function(bt){var kt;do{if(kt=ns?bt.lang:bt.getAttribute("xml:lang")||bt.getAttribute("lang"))return(kt=kt.toLowerCase())===Ke||0===kt.indexOf(Ke+"-")}while((bt=bt.parentNode)&&1===bt.nodeType);return!1}}),target:function(Ke){var bt=q.location&&q.location.hash;return bt&&bt.slice(1)===Ke.id},root:function(Ke){return Ke===mr},focus:function(Ke){return Ke===un.activeElement&&(!un.hasFocus||un.hasFocus())&&!!(Ke.type||Ke.href||~Ke.tabIndex)},enabled:Tu(!1),disabled:Tu(!0),checked:function(Ke){var bt=Ke.nodeName.toLowerCase();return"input"===bt&&!!Ke.checked||"option"===bt&&!!Ke.selected},selected:function(Ke){return!0===Ke.selected},empty:function(Ke){for(Ke=Ke.firstChild;Ke;Ke=Ke.nextSibling)if(Ke.nodeType<6)return!1;return!0},parent:function(Ke){return!xe.pseudos.empty(Ke)},header:function(Ke){return Ya.test(Ke.nodeName)},input:function(Ke){return uo.test(Ke.nodeName)},button:function(Ke){var bt=Ke.nodeName.toLowerCase();return"input"===bt&&"button"===Ke.type||"button"===bt},text:function(Ke){var bt;return"input"===Ke.nodeName.toLowerCase()&&"text"===Ke.type&&(null==(bt=Ke.getAttribute("type"))||"text"===bt.toLowerCase())},first:ea(function(){return[0]}),last:ea(function(Ke,bt){return[bt-1]}),eq:ea(function(Ke,bt,kt){return[kt<0?kt+bt:kt]}),even:ea(function(Ke,bt){for(var kt=0;kt<bt;kt+=2)Ke.push(kt);return Ke}),odd:ea(function(Ke,bt){for(var kt=1;kt<bt;kt+=2)Ke.push(kt);return Ke}),lt:ea(function(Ke,bt,kt){for(var Pn=kt<0?kt+bt:kt>bt?bt:kt;--Pn>=0;)Ke.push(Pn);return Ke}),gt:ea(function(Ke,bt,kt){for(var Pn=kt<0?kt+bt:kt;++Pn<bt;)Ke.push(Pn);return Ke})}}).pseudos.nth=xe.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})xe.pseudos[se]=Vh(se);for(se in{submit:!0,reset:!0})xe.pseudos[se]=Eu(se);function Zu(){}function ec(Ke){for(var bt=0,kt=Ke.length,Pn="";bt<kt;bt++)Pn+=Ke[bt].value;return Pn}function yf(Ke,bt,kt){var Pn=bt.dir,Ft=bt.next,In=Ft||Pn,qn=kt&&"parentNode"===In,yi=Or++;return bt.first?function(Fi,Rr,Er){for(;Fi=Fi[Pn];)if(1===Fi.nodeType||qn)return Ke(Fi,Rr,Er);return!1}:function(Fi,Rr,Er){var Hr,Is,Xs,Nr=[ol,yi];if(Er){for(;Fi=Fi[Pn];)if((1===Fi.nodeType||qn)&&Ke(Fi,Rr,Er))return!0}else for(;Fi=Fi[Pn];)if(1===Fi.nodeType||qn)if(Is=(Xs=Fi[To]||(Fi[To]={}))[Fi.uniqueID]||(Xs[Fi.uniqueID]={}),Ft&&Ft===Fi.nodeName.toLowerCase())Fi=Fi[Pn]||Fi;else{if((Hr=Is[In])&&Hr[0]===ol&&Hr[1]===yi)return Nr[2]=Hr[2];if(Is[In]=Nr,Nr[2]=Ke(Fi,Rr,Er))return!0}return!1}}function Jm(Ke){return Ke.length>1?function(bt,kt,Pn){for(var Ft=Ke.length;Ft--;)if(!Ke[Ft](bt,kt,Pn))return!1;return!0}:Ke[0]}function Wc(Ke,bt,kt,Pn,Ft){for(var In,qn=[],yi=0,Fi=Ke.length,Rr=null!=bt;yi<Fi;yi++)(In=Ke[yi])&&(!kt||kt(In,Pn,Ft))&&(qn.push(In),Rr&&bt.push(yi));return qn}function Ja(Ke,bt,kt,Pn,Ft,In){return Pn&&!Pn[To]&&(Pn=Ja(Pn)),Ft&&!Ft[To]&&(Ft=Ja(Ft,In)),da(function(qn,yi,Fi,Rr){var Er,Hr,Is,Xs=[],Nr=[],xi=yi.length,Na=qn||function _c(Ke,bt,kt){for(var Pn=0,Ft=bt.length;Pn<Ft;Pn++)Ns(Ke,bt[Pn],kt);return kt}(bt||"*",Fi.nodeType?[Fi]:Fi,[]),Bl=!Ke||!qn&&bt?Na:Wc(Na,Xs,Ke,Fi,Rr),Wo=kt?Ft||(qn?Ke:xi||Pn)?[]:yi:Bl;if(kt&&kt(Bl,Wo,Fi,Rr),Pn)for(Er=Wc(Wo,Nr),Pn(Er,[],Fi,Rr),Hr=Er.length;Hr--;)(Is=Er[Hr])&&(Wo[Nr[Hr]]=!(Bl[Nr[Hr]]=Is));if(qn){if(Ft||Ke){if(Ft){for(Er=[],Hr=Wo.length;Hr--;)(Is=Wo[Hr])&&Er.push(Bl[Hr]=Is);Ft(null,Wo=[],Er,Rr)}for(Hr=Wo.length;Hr--;)(Is=Wo[Hr])&&(Er=Ft?ml(qn,Is):Xs[Hr])>-1&&(qn[Er]=!(yi[Er]=Is))}}else Wo=Wc(Wo===yi?Wo.splice(xi,Wo.length):Wo),Ft?Ft(null,yi,Wo,Rr):oo.apply(yi,Wo)})}function Sd(Ke){for(var bt,kt,Pn,Ft=Ke.length,In=xe.relative[Ke[0].type],qn=In||xe.relative[" "],yi=In?1:0,Fi=yf(function(Hr){return Hr===bt},qn,!0),Rr=yf(function(Hr){return ml(bt,Hr)>-1},qn,!0),Er=[function(Hr,Is,Xs){var Nr=!In&&(Xs||Is!==Rt)||((bt=Is).nodeType?Fi(Hr,Is,Xs):Rr(Hr,Is,Xs));return bt=null,Nr}];yi<Ft;yi++)if(kt=xe.relative[Ke[yi].type])Er=[yf(Jm(Er),kt)];else{if((kt=xe.filter[Ke[yi].type].apply(null,Ke[yi].matches))[To]){for(Pn=++yi;Pn<Ft&&!xe.relative[Ke[Pn].type];Pn++);return Ja(yi>1&&Jm(Er),yi>1&&ec(Ke.slice(0,yi-1).concat({value:" "===Ke[yi-2].type?"*":""})).replace(Cs,"$1"),kt,yi<Pn&&Sd(Ke.slice(yi,Pn)),Pn<Ft&&Sd(Ke=Ke.slice(Pn)),Pn<Ft&&ec(Ke))}Er.push(kt)}return Jm(Er)}return Zu.prototype=xe.filters=xe.pseudos,xe.setFilters=new Zu,Ye=Ns.tokenize=function(Ke,bt){var kt,Pn,Ft,In,qn,yi,Fi,Rr=uh[Ke+" "];if(Rr)return bt?0:Rr.slice(0);for(qn=Ke,yi=[],Fi=xe.preFilter;qn;){for(In in(!kt||(Pn=je.exec(qn)))&&(Pn&&(qn=qn.slice(Pn[0].length)||qn),yi.push(Ft=[])),kt=!1,(Pn=ms.exec(qn))&&(kt=Pn.shift(),Ft.push({value:kt,type:Pn[0].replace(Cs," ")}),qn=qn.slice(kt.length)),xe.filter)(Pn=Go[In].exec(qn))&&(!Fi[In]||(Pn=Fi[In](Pn)))&&(kt=Pn.shift(),Ft.push({value:kt,type:In,matches:Pn}),qn=qn.slice(kt.length));if(!kt)break}return bt?qn.length:qn?Ns.error(Ke):uh(Ke,yi).slice(0)},Et=Ns.compile=function(Ke,bt){var kt,Pn=[],Ft=[],In=ys[Ke+" "];if(!In){for(bt||(bt=Ye(Ke)),kt=bt.length;kt--;)(In=Sd(bt[kt]))[To]?Pn.push(In):Ft.push(In);In=ys(Ke,function Ip(Ke,bt){var kt=bt.length>0,Pn=Ke.length>0,Ft=function(In,qn,yi,Fi,Rr){var Er,Hr,Is,Xs=0,Nr="0",xi=In&&[],Na=[],Bl=Rt,Wo=In||Pn&&xe.find.TAG("*",Rr),wa=ol+=null==Bl?1:Math.random()||.1,Ka=Wo.length;for(Rr&&(Rt=qn==un||qn||Rr);Nr!==Ka&&null!=(Er=Wo[Nr]);Nr++){if(Pn&&Er){for(Hr=0,!qn&&Er.ownerDocument!=un&&(on(Er),yi=!ns);Is=Ke[Hr++];)if(Is(Er,qn||un,yi)){Fi.push(Er);break}Rr&&(ol=wa)}kt&&((Er=!Is&&Er)&&Xs--,In&&xi.push(Er))}if(Xs+=Nr,kt&&Nr!==Xs){for(Hr=0;Is=bt[Hr++];)Is(xi,Na,qn,yi);if(In){if(Xs>0)for(;Nr--;)xi[Nr]||Na[Nr]||(Na[Nr]=Ui.call(Fi));Na=Wc(Na)}oo.apply(Fi,Na),Rr&&!In&&Na.length>0&&Xs+bt.length>1&&Ns.uniqueSort(Fi)}return Rr&&(ol=wa,Rt=Bl),xi};return kt?da(Ft):Ft}(Ft,Pn)),In.selector=Ke}return In},yt=Ns.select=function(Ke,bt,kt,Pn){var Ft,In,qn,yi,Fi,Rr="function"==typeof Ke&&Ke,Er=!Pn&&Ye(Ke=Rr.selector||Ke);if(kt=kt||[],1===Er.length){if((In=Er[0]=Er[0].slice(0)).length>2&&"ID"===(qn=In[0]).type&&9===bt.nodeType&&ns&&xe.relative[In[1].type]){if(!(bt=(xe.find.ID(qn.matches[0].replace(Oa,Nl),bt)||[])[0]))return kt;Rr&&(bt=bt.parentNode),Ke=Ke.slice(In.shift().value.length)}for(Ft=Go.needsContext.test(Ke)?0:In.length;Ft--&&!xe.relative[yi=(qn=In[Ft]).type];)if((Fi=xe.find[yi])&&(Pn=Fi(qn.matches[0].replace(Oa,Nl),gc.test(In[0].type)&&hr(bt.parentNode)||bt))){if(In.splice(Ft,1),!(Ke=Pn.length&&ec(In)))return oo.apply(kt,Pn),kt;break}}return(Rr||Et(Ke,Er))(Pn,bt,!ns,kt,!bt||gc.test(Ke)&&hr(bt.parentNode)||bt),kt},ge.sortStable=To.split("").sort(pl).join("")===To,ge.detectDuplicates=!!si,on(),ge.sortDetached=$l(function(Ke){return 1&Ke.compareDocumentPosition(un.createElement("fieldset"))}),$l(function(Ke){return Ke.innerHTML="<a href='#'></a>","#"===Ke.firstChild.getAttribute("href")})||al("type|href|height|width",function(Ke,bt,kt){if(!kt)return Ke.getAttribute(bt,"type"===bt.toLowerCase()?1:2)}),(!ge.attributes||!$l(function(Ke){return Ke.innerHTML="<input/>",Ke.firstChild.setAttribute("value",""),""===Ke.firstChild.getAttribute("value")}))&&al("value",function(Ke,bt,kt){if(!kt&&"input"===Ke.nodeName.toLowerCase())return Ke.defaultValue}),$l(function(Ke){return null==Ke.getAttribute("disabled")})||al(Cd,function(Ke,bt,kt){var Pn;if(!kt)return!0===Ke[bt]?bt.toLowerCase():(Pn=Ke.getAttributeNode(bt))&&Pn.specified?Pn.value:null}),Ns}(o);le.find=We,le.expr=We.selectors,le.expr[":"]=le.expr.pseudos,le.uniqueSort=le.unique=We.uniqueSort,le.text=We.getText,le.isXMLDoc=We.isXML,le.contains=We.contains,le.escapeSelector=We.escape;var at=function(q,se,ge){for(var xe=[],Ne=void 0!==ge;(q=q[se])&&9!==q.nodeType;)if(1===q.nodeType){if(Ne&&le(q).is(ge))break;xe.push(q)}return xe},Te=function(q,se){for(var ge=[];q;q=q.nextSibling)1===q.nodeType&&q!==se&&ge.push(q);return ge},qe=le.expr.match.needsContext;function Bt(q,se){return q.nodeName&&q.nodeName.toLowerCase()===se.toLowerCase()}var Ze=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Zn(q,se,ge){return ce(se)?le.grep(q,function(xe,Ne){return!!se.call(xe,Ne,xe)!==ge}):se.nodeType?le.grep(q,function(xe){return xe===se!==ge}):"string"!=typeof se?le.grep(q,function(xe){return I.call(se,xe)>-1!==ge}):le.filter(se,q,ge)}le.filter=function(q,se,ge){var xe=se[0];return ge&&(q=":not("+q+")"),1===se.length&&1===xe.nodeType?le.find.matchesSelector(xe,q)?[xe]:[]:le.find.matches(q,le.grep(se,function(Ne){return 1===Ne.nodeType}))},le.fn.extend({find:function(q){var se,ge,xe=this.length,Ne=this;if("string"!=typeof q)return this.pushStack(le(q).filter(function(){for(se=0;se<xe;se++)if(le.contains(Ne[se],this))return!0}));for(ge=this.pushStack([]),se=0;se<xe;se++)le.find(q,Ne[se],ge);return xe>1?le.uniqueSort(ge):ge},filter:function(q){return this.pushStack(Zn(this,q||[],!1))},not:function(q){return this.pushStack(Zn(this,q||[],!0))},is:function(q){return!!Zn(this,"string"==typeof q&&qe.test(q)?le(q):q||[],!1).length}});var jt,_n=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Dt=le.fn.init=function(q,se,ge){var xe,Ne;if(!q)return this;if(ge=ge||jt,"string"==typeof q){if(!(xe="<"===q[0]&&">"===q[q.length-1]&&q.length>=3?[null,q,null]:_n.exec(q))||!xe[1]&&se)return!se||se.jquery?(se||ge).find(q):this.constructor(se).find(q);if(xe[1]){if(le.merge(this,le.parseHTML(xe[1],(se=se instanceof le?se[0]:se)&&se.nodeType?se.ownerDocument||se:ae,!0)),Ze.test(xe[1])&&le.isPlainObject(se))for(xe in se)ce(this[xe])?this[xe](se[xe]):this.attr(xe,se[xe]);return this}return(Ne=ae.getElementById(xe[2]))&&(this[0]=Ne,this.length=1),this}return q.nodeType?(this[0]=q,this.length=1,this):ce(q)?void 0!==ge.ready?ge.ready(q):q(le):le.makeArray(q,this)};Dt.prototype=le.fn,jt=le(ae);var It=/^(?:parents|prev(?:Until|All))/,Yn={children:!0,contents:!0,next:!0,prev:!0};function ei(q,se){for(;(q=q[se])&&1!==q.nodeType;);return q}le.fn.extend({has:function(q){var se=le(q,this),ge=se.length;return this.filter(function(){for(var xe=0;xe<ge;xe++)if(le.contains(this,se[xe]))return!0})},closest:function(q,se){var ge,xe=0,Ne=this.length,ze=[],Ye="string"!=typeof q&&le(q);if(!qe.test(q))for(;xe<Ne;xe++)for(ge=this[xe];ge&&ge!==se;ge=ge.parentNode)if(ge.nodeType<11&&(Ye?Ye.index(ge)>-1:1===ge.nodeType&&le.find.matchesSelector(ge,q))){ze.push(ge);break}return this.pushStack(ze.length>1?le.uniqueSort(ze):ze)},index:function(q){return q?"string"==typeof q?I.call(le(q),this[0]):I.call(this,q.jquery?q[0]:q):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(q,se){return this.pushStack(le.uniqueSort(le.merge(this.get(),le(q,se))))},addBack:function(q){return this.add(null==q?this.prevObject:this.prevObject.filter(q))}}),le.each({parent:function(q){var se=q.parentNode;return se&&11!==se.nodeType?se:null},parents:function(q){return at(q,"parentNode")},parentsUntil:function(q,se,ge){return at(q,"parentNode",ge)},next:function(q){return ei(q,"nextSibling")},prev:function(q){return ei(q,"previousSibling")},nextAll:function(q){return at(q,"nextSibling")},prevAll:function(q){return at(q,"previousSibling")},nextUntil:function(q,se,ge){return at(q,"nextSibling",ge)},prevUntil:function(q,se,ge){return at(q,"previousSibling",ge)},siblings:function(q){return Te((q.parentNode||{}).firstChild,q)},children:function(q){return Te(q.firstChild)},contents:function(q){return null!=q.contentDocument&&p(q.contentDocument)?q.contentDocument:(Bt(q,"template")&&(q=q.content||q),le.merge([],q.childNodes))}},function(q,se){le.fn[q]=function(ge,xe){var Ne=le.map(this,se,ge);return"Until"!==q.slice(-5)&&(xe=ge),xe&&"string"==typeof xe&&(Ne=le.filter(xe,Ne)),this.length>1&&(Yn[q]||le.uniqueSort(Ne),It.test(q)&&Ne.reverse()),this.pushStack(Ne)}});var Xt=/[^\x20\t\r\n\f]+/g;function Li(q){return q}function Mn(q){throw q}function Sn(q,se,ge,xe){var Ne;try{q&&ce(Ne=q.promise)?Ne.call(q).done(se).fail(ge):q&&ce(Ne=q.then)?Ne.call(q,se,ge):se.apply(void 0,[q].slice(xe))}catch(ze){ge.apply(void 0,[ze])}}le.Callbacks=function(q){q="string"==typeof q?function pr(q){var se={};return le.each(q.match(Xt)||[],function(ge,xe){se[xe]=!0}),se}(q):le.extend({},q);var se,ge,xe,Ne,ze=[],Ye=[],Et=-1,yt=function(){for(Ne=Ne||q.once,xe=se=!0;Ye.length;Et=-1)for(ge=Ye.shift();++Et<ze.length;)!1===ze[Et].apply(ge[0],ge[1])&&q.stopOnFalse&&(Et=ze.length,ge=!1);q.memory||(ge=!1),se=!1,Ne&&(ze=ge?[]:"")},Rt={add:function(){return ze&&(ge&&!se&&(Et=ze.length-1,Ye.push(ge)),function xn(si){le.each(si,function(on,un){ce(un)?(!q.unique||!Rt.has(un))&&ze.push(un):un&&un.length&&"string"!==Pe(un)&&xn(un)})}(arguments),ge&&!se&&yt()),this},remove:function(){return le.each(arguments,function(xn,si){for(var on;(on=le.inArray(si,ze,on))>-1;)ze.splice(on,1),on<=Et&&Et--}),this},has:function(xn){return xn?le.inArray(xn,ze)>-1:ze.length>0},empty:function(){return ze&&(ze=[]),this},disable:function(){return Ne=Ye=[],ze=ge="",this},disabled:function(){return!ze},lock:function(){return Ne=Ye=[],!ge&&!se&&(ze=ge=""),this},locked:function(){return!!Ne},fireWith:function(xn,si){return Ne||(si=[xn,(si=si||[]).slice?si.slice():si],Ye.push(si),se||yt()),this},fire:function(){return Rt.fireWith(this,arguments),this},fired:function(){return!!xe}};return Rt},le.extend({Deferred:function(q){var se=[["notify","progress",le.Callbacks("memory"),le.Callbacks("memory"),2],["resolve","done",le.Callbacks("once memory"),le.Callbacks("once memory"),0,"resolved"],["reject","fail",le.Callbacks("once memory"),le.Callbacks("once memory"),1,"rejected"]],ge="pending",xe={state:function(){return ge},always:function(){return Ne.done(arguments).fail(arguments),this},catch:function(ze){return xe.then(null,ze)},pipe:function(){var ze=arguments;return le.Deferred(function(Ye){le.each(se,function(Et,yt){var Rt=ce(ze[yt[4]])&&ze[yt[4]];Ne[yt[1]](function(){var xn=Rt&&Rt.apply(this,arguments);xn&&ce(xn.promise)?xn.promise().progress(Ye.notify).done(Ye.resolve).fail(Ye.reject):Ye[yt[0]+"With"](this,Rt?[xn]:arguments)})}),ze=null}).promise()},then:function(ze,Ye,Et){var yt=0;function Rt(xn,si,on,un){return function(){var mr=this,ns=arguments,gr=function(){var Ls,fl;if(!(xn<yt)){if((Ls=on.apply(mr,ns))===si.promise())throw new TypeError("Thenable self-resolution");ce(fl=Ls&&("object"==typeof Ls||"function"==typeof Ls)&&Ls.then)?un?fl.call(Ls,Rt(yt,si,Li,un),Rt(yt,si,Mn,un)):(yt++,fl.call(Ls,Rt(yt,si,Li,un),Rt(yt,si,Mn,un),Rt(yt,si,Li,si.notifyWith))):(on!==Li&&(mr=void 0,ns=[Ls]),(un||si.resolveWith)(mr,ns))}},ko=un?gr:function(){try{gr()}catch(Ls){le.Deferred.exceptionHook&&le.Deferred.exceptionHook(Ls,ko.stackTrace),xn+1>=yt&&(on!==Mn&&(mr=void 0,ns=[Ls]),si.rejectWith(mr,ns))}};xn?ko():(le.Deferred.getStackHook&&(ko.stackTrace=le.Deferred.getStackHook()),o.setTimeout(ko))}}return le.Deferred(function(xn){se[0][3].add(Rt(0,xn,ce(Et)?Et:Li,xn.notifyWith)),se[1][3].add(Rt(0,xn,ce(ze)?ze:Li)),se[2][3].add(Rt(0,xn,ce(Ye)?Ye:Mn))}).promise()},promise:function(ze){return null!=ze?le.extend(ze,xe):xe}},Ne={};return le.each(se,function(ze,Ye){var Et=Ye[2],yt=Ye[5];xe[Ye[1]]=Et.add,yt&&Et.add(function(){ge=yt},se[3-ze][2].disable,se[3-ze][3].disable,se[0][2].lock,se[0][3].lock),Et.add(Ye[3].fire),Ne[Ye[0]]=function(){return Ne[Ye[0]+"With"](this===Ne?void 0:this,arguments),this},Ne[Ye[0]+"With"]=Et.fireWith}),xe.promise(Ne),q&&q.call(Ne,Ne),Ne},when:function(q){var se=arguments.length,ge=se,xe=Array(ge),Ne=v.call(arguments),ze=le.Deferred(),Ye=function(Et){return function(yt){xe[Et]=this,Ne[Et]=arguments.length>1?v.call(arguments):yt,--se||ze.resolveWith(xe,Ne)}};if(se<=1&&(Sn(q,ze.done(Ye(ge)).resolve,ze.reject,!se),"pending"===ze.state()||ce(Ne[ge]&&Ne[ge].then)))return ze.then();for(;ge--;)Sn(Ne[ge],Ye(ge),ze.reject);return ze.promise()}});var zi=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;le.Deferred.exceptionHook=function(q,se){o.console&&o.console.warn&&q&&zi.test(q.name)&&o.console.warn("jQuery.Deferred exception: "+q.message,q.stack,se)},le.readyException=function(q){o.setTimeout(function(){throw q})};var ti=le.Deferred();function Fs(){ae.removeEventListener("DOMContentLoaded",Fs),o.removeEventListener("load",Fs),le.ready()}le.fn.ready=function(q){return ti.then(q).catch(function(se){le.readyException(se)}),this},le.extend({isReady:!1,readyWait:1,ready:function(q){(!0===q?--le.readyWait:le.isReady)||(le.isReady=!0,!(!0!==q&&--le.readyWait>0)&&ti.resolveWith(ae,[le]))}}),le.ready.then=ti.then,"complete"===ae.readyState||"loading"!==ae.readyState&&!ae.documentElement.doScroll?o.setTimeout(le.ready):(ae.addEventListener("DOMContentLoaded",Fs),o.addEventListener("load",Fs));var cr=function(q,se,ge,xe,Ne,ze,Ye){var Et=0,yt=q.length,Rt=null==ge;if("object"===Pe(ge))for(Et in Ne=!0,ge)cr(q,se,Et,ge[Et],!0,ze,Ye);else if(void 0!==xe&&(Ne=!0,ce(xe)||(Ye=!0),Rt&&(Ye?(se.call(q,xe),se=null):(Rt=se,se=function(xn,si,on){return Rt.call(le(xn),on)})),se))for(;Et<yt;Et++)se(q[Et],ge,Ye?xe:xe.call(q[Et],Et,se(q[Et],ge)));return Ne?q:Rt?se.call(q):yt?se(q[0],ge):ze},Le=/^-ms-/,kn=/-([a-z])/g;function dn(q,se){return se.toUpperCase()}function lt(q){return q.replace(Le,"ms-").replace(kn,dn)}var tt=function(q){return 1===q.nodeType||9===q.nodeType||!+q.nodeType};function Lt(){this.expando=le.expando+Lt.uid++}Lt.uid=1,Lt.prototype={cache:function(q){var se=q[this.expando];return se||(se={},tt(q)&&(q.nodeType?q[this.expando]=se:Object.defineProperty(q,this.expando,{value:se,configurable:!0}))),se},set:function(q,se,ge){var xe,Ne=this.cache(q);if("string"==typeof se)Ne[lt(se)]=ge;else for(xe in se)Ne[lt(xe)]=se[xe];return Ne},get:function(q,se){return void 0===se?this.cache(q):q[this.expando]&&q[this.expando][lt(se)]},access:function(q,se,ge){return void 0===se||se&&"string"==typeof se&&void 0===ge?this.get(q,se):(this.set(q,se,ge),void 0!==ge?ge:se)},remove:function(q,se){var ge,xe=q[this.expando];if(void 0!==xe){if(void 0!==se)for((ge=(se=Array.isArray(se)?se.map(lt):(se=lt(se))in xe?[se]:se.match(Xt)||[]).length);ge--;)delete xe[se[ge]];(void 0===se||le.isEmptyObject(xe))&&(q.nodeType?q[this.expando]=void 0:delete q[this.expando])}},hasData:function(q){var se=q[this.expando];return void 0!==se&&!le.isEmptyObject(se)}};var nn=new Lt,Ln=new Lt,rn=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ui=/[A-Z]/g;function pi(q,se,ge){var xe;if(void 0===ge&&1===q.nodeType)if(xe="data-"+se.replace(ui,"-$&").toLowerCase(),"string"==typeof(ge=q.getAttribute(xe))){try{ge=function ki(q){return"true"===q||"false"!==q&&("null"===q?null:q===+q+""?+q:rn.test(q)?JSON.parse(q):q)}(ge)}catch(Ne){}Ln.set(q,se,ge)}else ge=void 0;return ge}le.extend({hasData:function(q){return Ln.hasData(q)||nn.hasData(q)},data:function(q,se,ge){return Ln.access(q,se,ge)},removeData:function(q,se){Ln.remove(q,se)},_data:function(q,se,ge){return nn.access(q,se,ge)},_removeData:function(q,se){nn.remove(q,se)}}),le.fn.extend({data:function(q,se){var ge,xe,Ne,ze=this[0],Ye=ze&&ze.attributes;if(void 0===q){if(this.length&&(Ne=Ln.get(ze),1===ze.nodeType&&!nn.get(ze,"hasDataAttrs"))){for(ge=Ye.length;ge--;)Ye[ge]&&0===(xe=Ye[ge].name).indexOf("data-")&&(xe=lt(xe.slice(5)),pi(ze,xe,Ne[xe]));nn.set(ze,"hasDataAttrs",!0)}return Ne}return"object"==typeof q?this.each(function(){Ln.set(this,q)}):cr(this,function(Et){var yt;if(ze&&void 0===Et)return void 0!==(yt=Ln.get(ze,q))||void 0!==(yt=pi(ze,q))?yt:void 0;this.each(function(){Ln.set(this,q,Et)})},null,se,arguments.length>1,null,!0)},removeData:function(q){return this.each(function(){Ln.remove(this,q)})}}),le.extend({queue:function(q,se,ge){var xe;if(q)return xe=nn.get(q,se=(se||"fx")+"queue"),ge&&(!xe||Array.isArray(ge)?xe=nn.access(q,se,le.makeArray(ge)):xe.push(ge)),xe||[]},dequeue:function(q,se){var ge=le.queue(q,se=se||"fx"),xe=ge.length,Ne=ge.shift(),ze=le._queueHooks(q,se);"inprogress"===Ne&&(Ne=ge.shift(),xe--),Ne&&("fx"===se&&ge.unshift("inprogress"),delete ze.stop,Ne.call(q,function(){le.dequeue(q,se)},ze)),!xe&&ze&&ze.empty.fire()},_queueHooks:function(q,se){var ge=se+"queueHooks";return nn.get(q,ge)||nn.access(q,ge,{empty:le.Callbacks("once memory").add(function(){nn.remove(q,[se+"queue",ge])})})}}),le.fn.extend({queue:function(q,se){var ge=2;return"string"!=typeof q&&(se=q,q="fx",ge--),arguments.length<ge?le.queue(this[0],q):void 0===se?this:this.each(function(){var xe=le.queue(this,q,se);le._queueHooks(this,q),"fx"===q&&"inprogress"!==xe[0]&&le.dequeue(this,q)})},dequeue:function(q){return this.each(function(){le.dequeue(this,q)})},clearQueue:function(q){return this.queue(q||"fx",[])},promise:function(q,se){var ge,xe=1,Ne=le.Deferred(),ze=this,Ye=this.length,Et=function(){--xe||Ne.resolveWith(ze,[ze])};for("string"!=typeof q&&(se=q,q=void 0),q=q||"fx";Ye--;)(ge=nn.get(ze[Ye],q+"queueHooks"))&&ge.empty&&(xe++,ge.empty.add(Et));return Et(),Ne.promise(se)}});var ur=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Gs=new RegExp("^(?:([+-])=|)("+ur+")([a-z%]*)$","i"),wr=["Top","Right","Bottom","Left"],ro=ae.documentElement,ha=function(q){return le.contains(q.ownerDocument,q)},Qo={composed:!0};ro.getRootNode&&(ha=function(q){return le.contains(q.ownerDocument,q)||q.getRootNode(Qo)===q.ownerDocument});var es=function(q,se){return"none"===(q=se||q).style.display||""===q.style.display&&ha(q)&&"none"===le.css(q,"display")};function Ps(q,se,ge,xe){var Ne,ze,Ye=20,Et=xe?function(){return xe.cur()}:function(){return le.css(q,se,"")},yt=Et(),Rt=ge&&ge[3]||(le.cssNumber[se]?"":"px"),xn=q.nodeType&&(le.cssNumber[se]||"px"!==Rt&&+yt)&&Gs.exec(le.css(q,se));if(xn&&xn[3]!==Rt){for(Rt=Rt||xn[3],xn=+(yt/=2)||1;Ye--;)le.style(q,se,xn+Rt),(1-ze)*(1-(ze=Et()/yt||.5))<=0&&(Ye=0),xn/=ze;le.style(q,se,(xn*=2)+Rt),ge=ge||[]}return ge&&(xn=+xn||+yt||0,Ne=ge[1]?xn+(ge[1]+1)*ge[2]:+ge[2],xe&&(xe.unit=Rt,xe.start=xn,xe.end=Ne)),Ne}var mo={};function aa(q){var se,ge=q.ownerDocument,xe=q.nodeName,Ne=mo[xe];return Ne||(se=ge.body.appendChild(ge.createElement(xe)),Ne=le.css(se,"display"),se.parentNode.removeChild(se),"none"===Ne&&(Ne="block"),mo[xe]=Ne,Ne)}function ja(q,se){for(var ge,xe,Ne=[],ze=0,Ye=q.length;ze<Ye;ze++)(xe=q[ze]).style&&(ge=xe.style.display,se?("none"===ge&&(Ne[ze]=nn.get(xe,"display")||null,Ne[ze]||(xe.style.display="")),""===xe.style.display&&es(xe)&&(Ne[ze]=aa(xe))):"none"!==ge&&(Ne[ze]="none",nn.set(xe,"display",ge)));for(ze=0;ze<Ye;ze++)null!=Ne[ze]&&(q[ze].style.display=Ne[ze]);return q}le.fn.extend({show:function(){return ja(this,!0)},hide:function(){return ja(this)},toggle:function(q){return"boolean"==typeof q?q?this.show():this.hide():this.each(function(){es(this)?le(this).show():le(this).hide()})}});var se,ge,nr=/^(?:checkbox|radio)$/i,qu=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Xi=/^$|^module$|\/(?:java|ecma)script/i;se=ae.createDocumentFragment().appendChild(ae.createElement("div")),(ge=ae.createElement("input")).setAttribute("type","radio"),ge.setAttribute("checked","checked"),ge.setAttribute("name","t"),se.appendChild(ge),re.checkClone=se.cloneNode(!0).cloneNode(!0).lastChild.checked,se.innerHTML="<textarea>x</textarea>",re.noCloneChecked=!!se.cloneNode(!0).lastChild.defaultValue,se.innerHTML="<option></option>",re.option=!!se.lastChild;var Ds={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function b(q,se){var ge;return ge=void 0!==q.getElementsByTagName?q.getElementsByTagName(se||"*"):void 0!==q.querySelectorAll?q.querySelectorAll(se||"*"):[],void 0===se||se&&Bt(q,se)?le.merge([q],ge):ge}function k(q,se){for(var ge=0,xe=q.length;ge<xe;ge++)nn.set(q[ge],"globalEval",!se||nn.get(se[ge],"globalEval"))}Ds.tbody=Ds.tfoot=Ds.colgroup=Ds.caption=Ds.thead,Ds.th=Ds.td,re.option||(Ds.optgroup=Ds.option=[1,"<select multiple='multiple'>","</select>"]);var H=/<|&#?\w+;/;function Z(q,se,ge,xe,Ne){for(var ze,Ye,Et,yt,Rt,xn,si=se.createDocumentFragment(),on=[],un=0,mr=q.length;un<mr;un++)if((ze=q[un])||0===ze)if("object"===Pe(ze))le.merge(on,ze.nodeType?[ze]:ze);else if(H.test(ze)){for(Ye=Ye||si.appendChild(se.createElement("div")),Et=(qu.exec(ze)||["",""])[1].toLowerCase(),Ye.innerHTML=(yt=Ds[Et]||Ds._default)[1]+le.htmlPrefilter(ze)+yt[2],xn=yt[0];xn--;)Ye=Ye.lastChild;le.merge(on,Ye.childNodes),(Ye=si.firstChild).textContent=""}else on.push(se.createTextNode(ze));for(si.textContent="",un=0;ze=on[un++];)if(xe&&le.inArray(ze,xe)>-1)Ne&&Ne.push(ze);else if(Rt=ha(ze),Ye=b(si.appendChild(ze),"script"),Rt&&k(Ye),ge)for(xn=0;ze=Ye[xn++];)Xi.test(ze.type||"")&&ge.push(ze);return si}var ne=/^([^.]*)(?:\.(.+)|)/;function fe(){return!0}function De(){return!1}function Ue(q,se){return q===function Qe(){try{return ae.activeElement}catch(q){}}()==("focus"===se)}function gt(q,se,ge,xe,Ne,ze){var Ye,Et;if("object"==typeof se){for(Et in"string"!=typeof ge&&(xe=xe||ge,ge=void 0),se)gt(q,Et,ge,xe,se[Et],ze);return q}if(null==xe&&null==Ne?(Ne=ge,xe=ge=void 0):null==Ne&&("string"==typeof ge?(Ne=xe,xe=void 0):(Ne=xe,xe=ge,ge=void 0)),!1===Ne)Ne=De;else if(!Ne)return q;return 1===ze&&(Ye=Ne,Ne=function(yt){return le().off(yt),Ye.apply(this,arguments)},Ne.guid=Ye.guid||(Ye.guid=le.guid++)),q.each(function(){le.event.add(this,se,Ne,xe,ge)})}function xt(q,se,ge){ge?(nn.set(q,se,!1),le.event.add(q,se,{namespace:!1,handler:function(xe){var Ne,ze,Ye=nn.get(this,se);if(1&xe.isTrigger&&this[se]){if(Ye.length)(le.event.special[se]||{}).delegateType&&xe.stopPropagation();else if(Ye=v.call(arguments),nn.set(this,se,Ye),Ne=ge(this,se),this[se](),Ye!==(ze=nn.get(this,se))||Ne?nn.set(this,se,!1):ze={},Ye!==ze)return xe.stopImmediatePropagation(),xe.preventDefault(),ze&&ze.value}else Ye.length&&(nn.set(this,se,{value:le.event.trigger(le.extend(Ye[0],le.Event.prototype),Ye.slice(1),this)}),xe.stopImmediatePropagation())}})):void 0===nn.get(q,se)&&le.event.add(q,se,fe)}le.event={global:{},add:function(q,se,ge,xe,Ne){var ze,Ye,Et,yt,Rt,xn,si,on,un,mr,ns,gr=nn.get(q);if(tt(q))for(ge.handler&&(ge=(ze=ge).handler,Ne=ze.selector),Ne&&le.find.matchesSelector(ro,Ne),ge.guid||(ge.guid=le.guid++),(yt=gr.events)||(yt=gr.events=Object.create(null)),(Ye=gr.handle)||(Ye=gr.handle=function(ko){return void 0!==le&&le.event.triggered!==ko.type?le.event.dispatch.apply(q,arguments):void 0}),Rt=(se=(se||"").match(Xt)||[""]).length;Rt--;)un=ns=(Et=ne.exec(se[Rt])||[])[1],mr=(Et[2]||"").split(".").sort(),un&&(si=le.event.special[un]||{},si=le.event.special[un=(Ne?si.delegateType:si.bindType)||un]||{},xn=le.extend({type:un,origType:ns,data:xe,handler:ge,guid:ge.guid,selector:Ne,needsContext:Ne&&le.expr.match.needsContext.test(Ne),namespace:mr.join(".")},ze),(on=yt[un])||((on=yt[un]=[]).delegateCount=0,(!si.setup||!1===si.setup.call(q,xe,mr,Ye))&&q.addEventListener&&q.addEventListener(un,Ye)),si.add&&(si.add.call(q,xn),xn.handler.guid||(xn.handler.guid=ge.guid)),Ne?on.splice(on.delegateCount++,0,xn):on.push(xn),le.event.global[un]=!0)},remove:function(q,se,ge,xe,Ne){var ze,Ye,Et,yt,Rt,xn,si,on,un,mr,ns,gr=nn.hasData(q)&&nn.get(q);if(gr&&(yt=gr.events)){for(Rt=(se=(se||"").match(Xt)||[""]).length;Rt--;)if(un=ns=(Et=ne.exec(se[Rt])||[])[1],mr=(Et[2]||"").split(".").sort(),un){for(si=le.event.special[un]||{},on=yt[un=(xe?si.delegateType:si.bindType)||un]||[],Et=Et[2]&&new RegExp("(^|\\.)"+mr.join("\\.(?:.*\\.|)")+"(\\.|$)"),Ye=ze=on.length;ze--;)xn=on[ze],(Ne||ns===xn.origType)&&(!ge||ge.guid===xn.guid)&&(!Et||Et.test(xn.namespace))&&(!xe||xe===xn.selector||"**"===xe&&xn.selector)&&(on.splice(ze,1),xn.selector&&on.delegateCount--,si.remove&&si.remove.call(q,xn));Ye&&!on.length&&((!si.teardown||!1===si.teardown.call(q,mr,gr.handle))&&le.removeEvent(q,un,gr.handle),delete yt[un])}else for(un in yt)le.event.remove(q,un+se[Rt],ge,xe,!0);le.isEmptyObject(yt)&&nn.remove(q,"handle events")}},dispatch:function(q){var se,ge,xe,Ne,ze,Ye,Et=new Array(arguments.length),yt=le.event.fix(q),Rt=(nn.get(this,"events")||Object.create(null))[yt.type]||[],xn=le.event.special[yt.type]||{};for(Et[0]=yt,se=1;se<arguments.length;se++)Et[se]=arguments[se];if(yt.delegateTarget=this,!xn.preDispatch||!1!==xn.preDispatch.call(this,yt)){for(Ye=le.event.handlers.call(this,yt,Rt),se=0;(Ne=Ye[se++])&&!yt.isPropagationStopped();)for(yt.currentTarget=Ne.elem,ge=0;(ze=Ne.handlers[ge++])&&!yt.isImmediatePropagationStopped();)(!yt.rnamespace||!1===ze.namespace||yt.rnamespace.test(ze.namespace))&&(yt.handleObj=ze,yt.data=ze.data,void 0!==(xe=((le.event.special[ze.origType]||{}).handle||ze.handler).apply(Ne.elem,Et))&&!1===(yt.result=xe)&&(yt.preventDefault(),yt.stopPropagation()));return xn.postDispatch&&xn.postDispatch.call(this,yt),yt.result}},handlers:function(q,se){var ge,xe,Ne,ze,Ye,Et=[],yt=se.delegateCount,Rt=q.target;if(yt&&Rt.nodeType&&!("click"===q.type&&q.button>=1))for(;Rt!==this;Rt=Rt.parentNode||this)if(1===Rt.nodeType&&("click"!==q.type||!0!==Rt.disabled)){for(ze=[],Ye={},ge=0;ge<yt;ge++)void 0===Ye[Ne=(xe=se[ge]).selector+" "]&&(Ye[Ne]=xe.needsContext?le(Ne,this).index(Rt)>-1:le.find(Ne,this,null,[Rt]).length),Ye[Ne]&&ze.push(xe);ze.length&&Et.push({elem:Rt,handlers:ze})}return Rt=this,yt<se.length&&Et.push({elem:Rt,handlers:se.slice(yt)}),Et},addProp:function(q,se){Object.defineProperty(le.Event.prototype,q,{enumerable:!0,configurable:!0,get:ce(se)?function(){if(this.originalEvent)return se(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[q]},set:function(ge){Object.defineProperty(this,q,{enumerable:!0,configurable:!0,writable:!0,value:ge})}})},fix:function(q){return q[le.expando]?q:new le.Event(q)},special:{load:{noBubble:!0},click:{setup:function(q){var se=this||q;return nr.test(se.type)&&se.click&&Bt(se,"input")&&xt(se,"click",fe),!1},trigger:function(q){var se=this||q;return nr.test(se.type)&&se.click&&Bt(se,"input")&&xt(se,"click"),!0},_default:function(q){var se=q.target;return nr.test(se.type)&&se.click&&Bt(se,"input")&&nn.get(se,"click")||Bt(se,"a")}},beforeunload:{postDispatch:function(q){void 0!==q.result&&q.originalEvent&&(q.originalEvent.returnValue=q.result)}}}},le.removeEvent=function(q,se,ge){q.removeEventListener&&q.removeEventListener(se,ge)},le.Event=function(q,se){if(!(this instanceof le.Event))return new le.Event(q,se);q&&q.type?(this.originalEvent=q,this.type=q.type,this.isDefaultPrevented=q.defaultPrevented||void 0===q.defaultPrevented&&!1===q.returnValue?fe:De,this.target=q.target&&3===q.target.nodeType?q.target.parentNode:q.target,this.currentTarget=q.currentTarget,this.relatedTarget=q.relatedTarget):this.type=q,se&&le.extend(this,se),this.timeStamp=q&&q.timeStamp||Date.now(),this[le.expando]=!0},le.Event.prototype={constructor:le.Event,isDefaultPrevented:De,isPropagationStopped:De,isImmediatePropagationStopped:De,isSimulated:!1,preventDefault:function(){var q=this.originalEvent;this.isDefaultPrevented=fe,q&&!this.isSimulated&&q.preventDefault()},stopPropagation:function(){var q=this.originalEvent;this.isPropagationStopped=fe,q&&!this.isSimulated&&q.stopPropagation()},stopImmediatePropagation:function(){var q=this.originalEvent;this.isImmediatePropagationStopped=fe,q&&!this.isSimulated&&q.stopImmediatePropagation(),this.stopPropagation()}},le.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},le.event.addProp),le.each({focus:"focusin",blur:"focusout"},function(q,se){le.event.special[q]={setup:function(){return xt(this,q,Ue),!1},trigger:function(){return xt(this,q),!0},_default:function(ge){return nn.get(ge.target,q)},delegateType:se}}),le.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(q,se){le.event.special[q]={delegateType:se,bindType:se,handle:function(ge){var xe,Ne=this,ze=ge.relatedTarget,Ye=ge.handleObj;return(!ze||ze!==Ne&&!le.contains(Ne,ze))&&(ge.type=Ye.origType,xe=Ye.handler.apply(this,arguments),ge.type=se),xe}}}),le.fn.extend({on:function(q,se,ge,xe){return gt(this,q,se,ge,xe)},one:function(q,se,ge,xe){return gt(this,q,se,ge,xe,1)},off:function(q,se,ge){var xe,Ne;if(q&&q.preventDefault&&q.handleObj)return xe=q.handleObj,le(q.delegateTarget).off(xe.namespace?xe.origType+"."+xe.namespace:xe.origType,xe.selector,xe.handler),this;if("object"==typeof q){for(Ne in q)this.off(Ne,se,q[Ne]);return this}return(!1===se||"function"==typeof se)&&(ge=se,se=void 0),!1===ge&&(ge=De),this.each(function(){le.event.remove(this,q,ge,se)})}});var Jt=/<script|<style|<link/i,Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,Ht=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function en(q,se){return Bt(q,"table")&&Bt(11!==se.nodeType?se:se.firstChild,"tr")&&le(q).children("tbody")[0]||q}function St(q){return q.type=(null!==q.getAttribute("type"))+"/"+q.type,q}function Kt(q){return"true/"===(q.type||"").slice(0,5)?q.type=q.type.slice(5):q.removeAttribute("type"),q}function gn(q,se){var ge,xe,Ne,Ye,Et,yt;if(1===se.nodeType){if(nn.hasData(q)&&(yt=nn.get(q).events))for(Ne in nn.remove(se,"handle events"),yt)for(ge=0,xe=yt[Ne].length;ge<xe;ge++)le.event.add(se,Ne,yt[Ne][ge]);Ln.hasData(q)&&(Ye=Ln.access(q),Et=le.extend({},Ye),Ln.set(se,Et))}}function sn(q,se){var ge=se.nodeName.toLowerCase();"input"===ge&&nr.test(q.type)?se.checked=q.checked:("input"===ge||"textarea"===ge)&&(se.defaultValue=q.defaultValue)}function Wn(q,se,ge,xe){se=M(se);var Ne,ze,Ye,Et,yt,Rt,xn=0,si=q.length,on=si-1,un=se[0],mr=ce(un);if(mr||si>1&&"string"==typeof un&&!re.checkClone&&Ct.test(un))return q.each(function(ns){var gr=q.eq(ns);mr&&(se[0]=un.call(this,ns,gr.html())),Wn(gr,se,ge,xe)});if(si&&(ze=(Ne=Z(se,q[0].ownerDocument,!1,q,xe)).firstChild,1===Ne.childNodes.length&&(Ne=ze),ze||xe)){for(Et=(Ye=le.map(b(Ne,"script"),St)).length;xn<si;xn++)yt=Ne,xn!==on&&(yt=le.clone(yt,!0,!0),Et&&le.merge(Ye,b(yt,"script"))),ge.call(q[xn],yt,xn);if(Et)for(Rt=Ye[Ye.length-1].ownerDocument,le.map(Ye,Kt),xn=0;xn<Et;xn++)Xi.test((yt=Ye[xn]).type||"")&&!nn.access(yt,"globalEval")&&le.contains(Rt,yt)&&(yt.src&&"module"!==(yt.type||"").toLowerCase()?le._evalUrl&&!yt.noModule&&le._evalUrl(yt.src,{nonce:yt.nonce||yt.getAttribute("nonce")},Rt):Me(yt.textContent.replace(Ht,""),yt,Rt))}return q}function Qn(q,se,ge){for(var xe,Ne=se?le.filter(se,q):q,ze=0;null!=(xe=Ne[ze]);ze++)!ge&&1===xe.nodeType&&le.cleanData(b(xe)),xe.parentNode&&(ge&&ha(xe)&&k(b(xe,"script")),xe.parentNode.removeChild(xe));return q}le.extend({htmlPrefilter:function(q){return q},clone:function(q,se,ge){var xe,Ne,ze,Ye,Et=q.cloneNode(!0),yt=ha(q);if(!(re.noCloneChecked||1!==q.nodeType&&11!==q.nodeType||le.isXMLDoc(q)))for(Ye=b(Et),xe=0,Ne=(ze=b(q)).length;xe<Ne;xe++)sn(ze[xe],Ye[xe]);if(se)if(ge)for(ze=ze||b(q),Ye=Ye||b(Et),xe=0,Ne=ze.length;xe<Ne;xe++)gn(ze[xe],Ye[xe]);else gn(q,Et);return(Ye=b(Et,"script")).length>0&&k(Ye,!yt&&b(q,"script")),Et},cleanData:function(q){for(var se,ge,xe,Ne=le.event.special,ze=0;void 0!==(ge=q[ze]);ze++)if(tt(ge)){if(se=ge[nn.expando]){if(se.events)for(xe in se.events)Ne[xe]?le.event.remove(ge,xe):le.removeEvent(ge,xe,se.handle);ge[nn.expando]=void 0}ge[Ln.expando]&&(ge[Ln.expando]=void 0)}}}),le.fn.extend({detach:function(q){return Qn(this,q,!0)},remove:function(q){return Qn(this,q)},text:function(q){return cr(this,function(se){return void 0===se?le.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=se)})},null,q,arguments.length)},append:function(){return Wn(this,arguments,function(q){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||en(this,q).appendChild(q)})},prepend:function(){return Wn(this,arguments,function(q){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var se=en(this,q);se.insertBefore(q,se.firstChild)}})},before:function(){return Wn(this,arguments,function(q){this.parentNode&&this.parentNode.insertBefore(q,this)})},after:function(){return Wn(this,arguments,function(q){this.parentNode&&this.parentNode.insertBefore(q,this.nextSibling)})},empty:function(){for(var q,se=0;null!=(q=this[se]);se++)1===q.nodeType&&(le.cleanData(b(q,!1)),q.textContent="");return this},clone:function(q,se){return q=null!=q&&q,se=null==se?q:se,this.map(function(){return le.clone(this,q,se)})},html:function(q){return cr(this,function(se){var ge=this[0]||{},xe=0,Ne=this.length;if(void 0===se&&1===ge.nodeType)return ge.innerHTML;if("string"==typeof se&&!Jt.test(se)&&!Ds[(qu.exec(se)||["",""])[1].toLowerCase()]){se=le.htmlPrefilter(se);try{for(;xe<Ne;xe++)1===(ge=this[xe]||{}).nodeType&&(le.cleanData(b(ge,!1)),ge.innerHTML=se);ge=0}catch(ze){}}ge&&this.empty().append(se)},null,q,arguments.length)},replaceWith:function(){var q=[];return Wn(this,arguments,function(se){var ge=this.parentNode;le.inArray(this,q)<0&&(le.cleanData(b(this)),ge&&ge.replaceChild(se,this))},q)}}),le.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(q,se){le.fn[q]=function(ge){for(var xe,Ne=[],ze=le(ge),Ye=ze.length-1,Et=0;Et<=Ye;Et++)xe=Et===Ye?this:this.clone(!0),le(ze[Et])[se](xe),T.apply(Ne,xe.get());return this.pushStack(Ne)}});var Di=new RegExp("^("+ur+")(?!px)[a-z%]+$","i"),Ci=/^--/,Si=function(q){var se=q.ownerDocument.defaultView;return(!se||!se.opener)&&(se=o),se.getComputedStyle(q)},Ei=function(q,se,ge){var xe,Ne,ze={};for(Ne in se)ze[Ne]=q.style[Ne],q.style[Ne]=se[Ne];for(Ne in xe=ge.call(q),se)q.style[Ne]=ze[Ne];return xe},Mr=new RegExp(wr.join("|"),"i"),Oi="[\\x20\\t\\r\\n\\f]",Yr=new RegExp("^"+Oi+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Oi+"+$","g");function Br(q,se,ge){var xe,Ne,ze,Ye,Et=Ci.test(se),yt=q.style;return(ge=ge||Si(q))&&(Ye=ge.getPropertyValue(se)||ge[se],Et&&(Ye=Ye.replace(Yr,"$1")),""===Ye&&!ha(q)&&(Ye=le.style(q,se)),!re.pixelBoxStyles()&&Di.test(Ye)&&Mr.test(se)&&(xe=yt.width,Ne=yt.minWidth,ze=yt.maxWidth,yt.minWidth=yt.maxWidth=yt.width=Ye,Ye=ge.width,yt.width=xe,yt.minWidth=Ne,yt.maxWidth=ze)),void 0!==Ye?Ye+"":Ye}function ia(q,se){return{get:function(){if(!q())return(this.get=se).apply(this,arguments);delete this.get}}}!function(){function q(){if(Rt){yt.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Rt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ro.appendChild(yt).appendChild(Rt);var xn=o.getComputedStyle(Rt);ge="1%"!==xn.top,Et=12===se(xn.marginLeft),Rt.style.right="60%",ze=36===se(xn.right),xe=36===se(xn.width),Rt.style.position="absolute",Ne=12===se(Rt.offsetWidth/3),ro.removeChild(yt),Rt=null}}function se(xn){return Math.round(parseFloat(xn))}var ge,xe,Ne,ze,Ye,Et,yt=ae.createElement("div"),Rt=ae.createElement("div");!Rt.style||(Rt.style.backgroundClip="content-box",Rt.cloneNode(!0).style.backgroundClip="",re.clearCloneStyle="content-box"===Rt.style.backgroundClip,le.extend(re,{boxSizingReliable:function(){return q(),xe},pixelBoxStyles:function(){return q(),ze},pixelPosition:function(){return q(),ge},reliableMarginLeft:function(){return q(),Et},scrollboxSize:function(){return q(),Ne},reliableTrDimensions:function(){var xn,si,on,un;return null==Ye&&(xn=ae.createElement("table"),si=ae.createElement("tr"),on=ae.createElement("div"),xn.style.cssText="position:absolute;left:-11111px;border-collapse:separate",si.style.cssText="border:1px solid",si.style.height="1px",on.style.height="9px",on.style.display="block",ro.appendChild(xn).appendChild(si).appendChild(on),un=o.getComputedStyle(si),Ye=parseInt(un.height,10)+parseInt(un.borderTopWidth,10)+parseInt(un.borderBottomWidth,10)===si.offsetHeight,ro.removeChild(xn)),Ye}}))}();var rl=["Webkit","Moz","ms"],Qs=ae.createElement("div").style,Ni={};function Os(q){return le.cssProps[q]||Ni[q]||(q in Qs?q:Ni[q]=function So(q){for(var se=q[0].toUpperCase()+q.slice(1),ge=rl.length;ge--;)if((q=rl[ge]+se)in Qs)return q}(q)||q)}var la=/^(none|table(?!-c[ea]).+)/,ts={position:"absolute",visibility:"hidden",display:"block"},Ws={letterSpacing:"0",fontWeight:"400"};function Eo(q,se,ge){var xe=Gs.exec(se);return xe?Math.max(0,xe[2]-(ge||0))+(xe[3]||"px"):se}function ka(q,se,ge,xe,Ne,ze){var Ye="width"===se?1:0,Et=0,yt=0;if(ge===(xe?"border":"content"))return 0;for(;Ye<4;Ye+=2)"margin"===ge&&(yt+=le.css(q,ge+wr[Ye],!0,Ne)),xe?("content"===ge&&(yt-=le.css(q,"padding"+wr[Ye],!0,Ne)),"margin"!==ge&&(yt-=le.css(q,"border"+wr[Ye]+"Width",!0,Ne))):(yt+=le.css(q,"padding"+wr[Ye],!0,Ne),"padding"!==ge?yt+=le.css(q,"border"+wr[Ye]+"Width",!0,Ne):Et+=le.css(q,"border"+wr[Ye]+"Width",!0,Ne));return!xe&&ze>=0&&(yt+=Math.max(0,Math.ceil(q["offset"+se[0].toUpperCase()+se.slice(1)]-ze-yt-Et-.5))||0),yt}function ke(q,se,ge){var xe=Si(q),ze=(!re.boxSizingReliable()||ge)&&"border-box"===le.css(q,"boxSizing",!1,xe),Ye=ze,Et=Br(q,se,xe),yt="offset"+se[0].toUpperCase()+se.slice(1);if(Di.test(Et)){if(!ge)return Et;Et="auto"}return(!re.boxSizingReliable()&&ze||!re.reliableTrDimensions()&&Bt(q,"tr")||"auto"===Et||!parseFloat(Et)&&"inline"===le.css(q,"display",!1,xe))&&q.getClientRects().length&&(ze="border-box"===le.css(q,"boxSizing",!1,xe),(Ye=yt in q)&&(Et=q[yt])),(Et=parseFloat(Et)||0)+ka(q,se,ge||(ze?"border":"content"),Ye,xe,Et)+"px"}function Je(q,se,ge,xe,Ne){return new Je.prototype.init(q,se,ge,xe,Ne)}le.extend({cssHooks:{opacity:{get:function(q,se){if(se){var ge=Br(q,"opacity");return""===ge?"1":ge}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(q,se,ge,xe){if(q&&3!==q.nodeType&&8!==q.nodeType&&q.style){var Ne,ze,Ye,Et=lt(se),yt=Ci.test(se),Rt=q.style;if(yt||(se=Os(Et)),Ye=le.cssHooks[se]||le.cssHooks[Et],void 0===ge)return Ye&&"get"in Ye&&void 0!==(Ne=Ye.get(q,!1,xe))?Ne:Rt[se];if("string"==(ze=typeof ge)&&(Ne=Gs.exec(ge))&&Ne[1]&&(ge=Ps(q,se,Ne),ze="number"),null==ge||ge!=ge)return;"number"===ze&&!yt&&(ge+=Ne&&Ne[3]||(le.cssNumber[Et]?"":"px")),!re.clearCloneStyle&&""===ge&&0===se.indexOf("background")&&(Rt[se]="inherit"),(!Ye||!("set"in Ye)||void 0!==(ge=Ye.set(q,ge,xe)))&&(yt?Rt.setProperty(se,ge):Rt[se]=ge)}},css:function(q,se,ge,xe){var Ne,ze,Ye,Et=lt(se);return Ci.test(se)||(se=Os(Et)),(Ye=le.cssHooks[se]||le.cssHooks[Et])&&"get"in Ye&&(Ne=Ye.get(q,!0,ge)),void 0===Ne&&(Ne=Br(q,se,xe)),"normal"===Ne&&se in Ws&&(Ne=Ws[se]),""===ge||ge?(ze=parseFloat(Ne),!0===ge||isFinite(ze)?ze||0:Ne):Ne}}),le.each(["height","width"],function(q,se){le.cssHooks[se]={get:function(ge,xe,Ne){if(xe)return!la.test(le.css(ge,"display"))||ge.getClientRects().length&&ge.getBoundingClientRect().width?ke(ge,se,Ne):Ei(ge,ts,function(){return ke(ge,se,Ne)})},set:function(ge,xe,Ne){var ze,Ye=Si(ge),Et=!re.scrollboxSize()&&"absolute"===Ye.position,Rt=(Et||Ne)&&"border-box"===le.css(ge,"boxSizing",!1,Ye),xn=Ne?ka(ge,se,Ne,Rt,Ye):0;return Rt&&Et&&(xn-=Math.ceil(ge["offset"+se[0].toUpperCase()+se.slice(1)]-parseFloat(Ye[se])-ka(ge,se,"border",!1,Ye)-.5)),xn&&(ze=Gs.exec(xe))&&"px"!==(ze[3]||"px")&&(ge.style[se]=xe,xe=le.css(ge,se)),Eo(0,xe,xn)}}}),le.cssHooks.marginLeft=ia(re.reliableMarginLeft,function(q,se){if(se)return(parseFloat(Br(q,"marginLeft"))||q.getBoundingClientRect().left-Ei(q,{marginLeft:0},function(){return q.getBoundingClientRect().left}))+"px"}),le.each({margin:"",padding:"",border:"Width"},function(q,se){le.cssHooks[q+se]={expand:function(ge){for(var xe=0,Ne={},ze="string"==typeof ge?ge.split(" "):[ge];xe<4;xe++)Ne[q+wr[xe]+se]=ze[xe]||ze[xe-2]||ze[0];return Ne}},"margin"!==q&&(le.cssHooks[q+se].set=Eo)}),le.fn.extend({css:function(q,se){return cr(this,function(ge,xe,Ne){var ze,Ye,Et={},yt=0;if(Array.isArray(xe)){for(ze=Si(ge),Ye=xe.length;yt<Ye;yt++)Et[xe[yt]]=le.css(ge,xe[yt],!1,ze);return Et}return void 0!==Ne?le.style(ge,xe,Ne):le.css(ge,xe)},q,se,arguments.length>1)}}),le.Tween=Je,(Je.prototype={constructor:Je,init:function(q,se,ge,xe,Ne,ze){this.elem=q,this.prop=ge,this.easing=Ne||le.easing._default,this.options=se,this.start=this.now=this.cur(),this.end=xe,this.unit=ze||(le.cssNumber[ge]?"":"px")},cur:function(){var q=Je.propHooks[this.prop];return q&&q.get?q.get(this):Je.propHooks._default.get(this)},run:function(q){var se,ge=Je.propHooks[this.prop];return this.pos=se=this.options.duration?le.easing[this.easing](q,this.options.duration*q,0,1,this.options.duration):q,this.now=(this.end-this.start)*se+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),ge&&ge.set?ge.set(this):Je.propHooks._default.set(this),this}}).init.prototype=Je.prototype,(Je.propHooks={_default:{get:function(q){var se;return 1!==q.elem.nodeType||null!=q.elem[q.prop]&&null==q.elem.style[q.prop]?q.elem[q.prop]:(se=le.css(q.elem,q.prop,""))&&"auto"!==se?se:0},set:function(q){le.fx.step[q.prop]?le.fx.step[q.prop](q):1!==q.elem.nodeType||!le.cssHooks[q.prop]&&null==q.elem.style[Os(q.prop)]?q.elem[q.prop]=q.now:le.style(q.elem,q.prop,q.now+q.unit)}}}).scrollTop=Je.propHooks.scrollLeft={set:function(q){q.elem.nodeType&&q.elem.parentNode&&(q.elem[q.prop]=q.now)}},le.easing={linear:function(q){return q},swing:function(q){return.5-Math.cos(q*Math.PI)/2},_default:"swing"},le.fx=Je.prototype.init,le.fx.step={};var mn,En,Dr=/^(?:toggle|show|hide)$/,ps=/queueHooks$/;function Vi(){En&&(!1===ae.hidden&&o.requestAnimationFrame?o.requestAnimationFrame(Vi):o.setTimeout(Vi,le.fx.interval),le.fx.tick())}function Xn(){return o.setTimeout(function(){mn=void 0}),mn=Date.now()}function Pa(q,se){var ge,xe=0,Ne={height:q};for(se=se?1:0;xe<4;xe+=2-se)Ne["margin"+(ge=wr[xe])]=Ne["padding"+ge]=q;return se&&(Ne.opacity=Ne.width=q),Ne}function Cu(q,se,ge){for(var xe,Ne=(or.tweeners[se]||[]).concat(or.tweeners["*"]),ze=0,Ye=Ne.length;ze<Ye;ze++)if(xe=Ne[ze].call(ge,se,q))return xe}function or(q,se,ge){var xe,Ne,ze=0,Ye=or.prefilters.length,Et=le.Deferred().always(function(){delete yt.elem}),yt=function(){if(Ne)return!1;for(var si=mn||Xn(),on=Math.max(0,Rt.startTime+Rt.duration-si),mr=1-(on/Rt.duration||0),ns=0,gr=Rt.tweens.length;ns<gr;ns++)Rt.tweens[ns].run(mr);return Et.notifyWith(q,[Rt,mr,on]),mr<1&&gr?on:(gr||Et.notifyWith(q,[Rt,1,0]),Et.resolveWith(q,[Rt]),!1)},Rt=Et.promise({elem:q,props:le.extend({},se),opts:le.extend(!0,{specialEasing:{},easing:le.easing._default},ge),originalProperties:se,originalOptions:ge,startTime:mn||Xn(),duration:ge.duration,tweens:[],createTween:function(si,on){var un=le.Tween(q,Rt.opts,si,on,Rt.opts.specialEasing[si]||Rt.opts.easing);return Rt.tweens.push(un),un},stop:function(si){var on=0,un=si?Rt.tweens.length:0;if(Ne)return this;for(Ne=!0;on<un;on++)Rt.tweens[on].run(1);return si?(Et.notifyWith(q,[Rt,1,0]),Et.resolveWith(q,[Rt,si])):Et.rejectWith(q,[Rt,si]),this}}),xn=Rt.props;for(function La(q,se){var ge,xe,Ne,ze,Ye;for(ge in q)if(Ne=se[xe=lt(ge)],ze=q[ge],Array.isArray(ze)&&(Ne=ze[1],ze=q[ge]=ze[0]),ge!==xe&&(q[xe]=ze,delete q[ge]),(Ye=le.cssHooks[xe])&&"expand"in Ye)for(ge in ze=Ye.expand(ze),delete q[xe],ze)ge in q||(q[ge]=ze[ge],se[ge]=Ne);else se[xe]=Ne}(xn,Rt.opts.specialEasing);ze<Ye;ze++)if(xe=or.prefilters[ze].call(Rt,q,xn,Rt.opts))return ce(xe.stop)&&(le._queueHooks(Rt.elem,Rt.opts.queue).stop=xe.stop.bind(xe)),xe;return le.map(xn,Cu,Rt),ce(Rt.opts.start)&&Rt.opts.start.call(q,Rt),Rt.progress(Rt.opts.progress).done(Rt.opts.done,Rt.opts.complete).fail(Rt.opts.fail).always(Rt.opts.always),le.fx.timer(le.extend(yt,{elem:q,anim:Rt,queue:Rt.opts.queue})),Rt}le.Animation=le.extend(or,{tweeners:{"*":[function(q,se){var ge=this.createTween(q,se);return Ps(ge.elem,q,Gs.exec(se),ge),ge}]},tweener:function(q,se){ce(q)?(se=q,q=["*"]):q=q.match(Xt);for(var ge,xe=0,Ne=q.length;xe<Ne;xe++)(or.tweeners[ge=q[xe]]=or.tweeners[ge]||[]).unshift(se)},prefilters:[function Bi(q,se,ge){var xe,Ne,ze,Ye,Et,yt,Rt,xn,si="width"in se||"height"in se,on=this,un={},mr=q.style,ns=q.nodeType&&es(q),gr=nn.get(q,"fxshow");for(xe in ge.queue||(null==(Ye=le._queueHooks(q,"fx")).unqueued&&(Ye.unqueued=0,Et=Ye.empty.fire,Ye.empty.fire=function(){Ye.unqueued||Et()}),Ye.unqueued++,on.always(function(){on.always(function(){Ye.unqueued--,le.queue(q,"fx").length||Ye.empty.fire()})})),se)if(Dr.test(Ne=se[xe])){if(delete se[xe],ze=ze||"toggle"===Ne,Ne===(ns?"hide":"show")){if("show"!==Ne||!gr||void 0===gr[xe])continue;ns=!0}un[xe]=gr&&gr[xe]||le.style(q,xe)}if((yt=!le.isEmptyObject(se))||!le.isEmptyObject(un))for(xe in si&&1===q.nodeType&&(ge.overflow=[mr.overflow,mr.overflowX,mr.overflowY],null==(Rt=gr&&gr.display)&&(Rt=nn.get(q,"display")),"none"===(xn=le.css(q,"display"))&&(Rt?xn=Rt:(ja([q],!0),Rt=q.style.display||Rt,xn=le.css(q,"display"),ja([q]))),("inline"===xn||"inline-block"===xn&&null!=Rt)&&"none"===le.css(q,"float")&&(yt||(on.done(function(){mr.display=Rt}),null==Rt&&(Rt="none"===(xn=mr.display)?"":xn)),mr.display="inline-block")),ge.overflow&&(mr.overflow="hidden",on.always(function(){mr.overflow=ge.overflow[0],mr.overflowX=ge.overflow[1],mr.overflowY=ge.overflow[2]})),yt=!1,un)yt||(gr?"hidden"in gr&&(ns=gr.hidden):gr=nn.access(q,"fxshow",{display:Rt}),ze&&(gr.hidden=!ns),ns&&ja([q],!0),on.done(function(){for(xe in ns||ja([q]),nn.remove(q,"fxshow"),un)le.style(q,xe,un[xe])})),yt=Cu(ns?gr[xe]:0,xe,on),xe in gr||(gr[xe]=yt.start,ns&&(yt.end=yt.start,yt.start=0))}],prefilter:function(q,se){se?or.prefilters.unshift(q):or.prefilters.push(q)}}),le.speed=function(q,se,ge){var xe=q&&"object"==typeof q?le.extend({},q):{complete:ge||!ge&&se||ce(q)&&q,duration:q,easing:ge&&se||se&&!ce(se)&&se};return le.fx.off?xe.duration=0:"number"!=typeof xe.duration&&(xe.duration=xe.duration in le.fx.speeds?le.fx.speeds[xe.duration]:le.fx.speeds._default),(null==xe.queue||!0===xe.queue)&&(xe.queue="fx"),xe.old=xe.complete,xe.complete=function(){ce(xe.old)&&xe.old.call(this),xe.queue&&le.dequeue(this,xe.queue)},xe},le.fn.extend({fadeTo:function(q,se,ge,xe){return this.filter(es).css("opacity",0).show().end().animate({opacity:se},q,ge,xe)},animate:function(q,se,ge,xe){var Ne=le.isEmptyObject(q),ze=le.speed(se,ge,xe),Ye=function(){var Et=or(this,le.extend({},q),ze);(Ne||nn.get(this,"finish"))&&Et.stop(!0)};return Ye.finish=Ye,Ne||!1===ze.queue?this.each(Ye):this.queue(ze.queue,Ye)},stop:function(q,se,ge){var xe=function(Ne){var ze=Ne.stop;delete Ne.stop,ze(ge)};return"string"!=typeof q&&(ge=se,se=q,q=void 0),se&&this.queue(q||"fx",[]),this.each(function(){var Ne=!0,ze=null!=q&&q+"queueHooks",Ye=le.timers,Et=nn.get(this);if(ze)Et[ze]&&Et[ze].stop&&xe(Et[ze]);else for(ze in Et)Et[ze]&&Et[ze].stop&&ps.test(ze)&&xe(Et[ze]);for(ze=Ye.length;ze--;)Ye[ze].elem===this&&(null==q||Ye[ze].queue===q)&&(Ye[ze].anim.stop(ge),Ne=!1,Ye.splice(ze,1));(Ne||!ge)&&le.dequeue(this,q)})},finish:function(q){return!1!==q&&(q=q||"fx"),this.each(function(){var se,ge=nn.get(this),xe=ge[q+"queue"],Ne=ge[q+"queueHooks"],ze=le.timers,Ye=xe?xe.length:0;for(ge.finish=!0,le.queue(this,q,[]),Ne&&Ne.stop&&Ne.stop.call(this,!0),se=ze.length;se--;)ze[se].elem===this&&ze[se].queue===q&&(ze[se].anim.stop(!0),ze.splice(se,1));for(se=0;se<Ye;se++)xe[se]&&xe[se].finish&&xe[se].finish.call(this);delete ge.finish})}}),le.each(["toggle","show","hide"],function(q,se){var ge=le.fn[se];le.fn[se]=function(xe,Ne,ze){return null==xe||"boolean"==typeof xe?ge.apply(this,arguments):this.animate(Pa(se,!0),xe,Ne,ze)}}),le.each({slideDown:Pa("show"),slideUp:Pa("hide"),slideToggle:Pa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(q,se){le.fn[q]=function(ge,xe,Ne){return this.animate(se,ge,xe,Ne)}}),le.timers=[],le.fx.tick=function(){var q,se=0,ge=le.timers;for(mn=Date.now();se<ge.length;se++)!(q=ge[se])()&&ge[se]===q&&ge.splice(se--,1);ge.length||le.fx.stop(),mn=void 0},le.fx.timer=function(q){le.timers.push(q),le.fx.start()},le.fx.interval=13,le.fx.start=function(){En||(En=!0,Vi())},le.fx.stop=function(){En=null},le.fx.speeds={slow:600,fast:200,_default:400},le.fn.delay=function(q,se){return q=le.fx&&le.fx.speeds[q]||q,this.queue(se=se||"fx",function(ge,xe){var Ne=o.setTimeout(ge,q);xe.stop=function(){o.clearTimeout(Ne)}})},function(){var q=ae.createElement("input"),ge=ae.createElement("select").appendChild(ae.createElement("option"));q.type="checkbox",re.checkOn=""!==q.value,re.optSelected=ge.selected,(q=ae.createElement("input")).value="t",q.type="radio",re.radioValue="t"===q.value}();var ws,Uo=le.expr.attrHandle;le.fn.extend({attr:function(q,se){return cr(this,le.attr,q,se,arguments.length>1)},removeAttr:function(q){return this.each(function(){le.removeAttr(this,q)})}}),le.extend({attr:function(q,se,ge){var xe,Ne,ze=q.nodeType;if(3!==ze&&8!==ze&&2!==ze)return void 0===q.getAttribute?le.prop(q,se,ge):((1!==ze||!le.isXMLDoc(q))&&(Ne=le.attrHooks[se.toLowerCase()]||(le.expr.match.bool.test(se)?ws:void 0)),void 0!==ge?null===ge?void le.removeAttr(q,se):Ne&&"set"in Ne&&void 0!==(xe=Ne.set(q,ge,se))?xe:(q.setAttribute(se,ge+""),ge):Ne&&"get"in Ne&&null!==(xe=Ne.get(q,se))?xe:null==(xe=le.find.attr(q,se))?void 0:xe)},attrHooks:{type:{set:function(q,se){if(!re.radioValue&&"radio"===se&&Bt(q,"input")){var ge=q.value;return q.setAttribute("type",se),ge&&(q.value=ge),se}}}},removeAttr:function(q,se){var ge,xe=0,Ne=se&&se.match(Xt);if(Ne&&1===q.nodeType)for(;ge=Ne[xe++];)q.removeAttribute(ge)}}),ws={set:function(q,se,ge){return!1===se?le.removeAttr(q,ge):q.setAttribute(ge,ge),ge}},le.each(le.expr.match.bool.source.match(/\w+/g),function(q,se){var ge=Uo[se]||le.find.attr;Uo[se]=function(xe,Ne,ze){var Ye,Et,yt=Ne.toLowerCase();return ze||(Et=Uo[yt],Uo[yt]=Ye,Ye=null!=ge(xe,Ne,ze)?yt:null,Uo[yt]=Et),Ye}});var wp=/^(?:input|select|textarea|button)$/i,Xm=/^(?:a|area)$/i;function pc(q){return(q.match(Xt)||[]).join(" ")}function xa(q){return q.getAttribute&&q.getAttribute("class")||""}function gf(q){return Array.isArray(q)?q:"string"==typeof q&&q.match(Xt)||[]}le.fn.extend({prop:function(q,se){return cr(this,le.prop,q,se,arguments.length>1)},removeProp:function(q){return this.each(function(){delete this[le.propFix[q]||q]})}}),le.extend({prop:function(q,se,ge){var xe,Ne,ze=q.nodeType;if(3!==ze&&8!==ze&&2!==ze)return(1!==ze||!le.isXMLDoc(q))&&(Ne=le.propHooks[se=le.propFix[se]||se]),void 0!==ge?Ne&&"set"in Ne&&void 0!==(xe=Ne.set(q,ge,se))?xe:q[se]=ge:Ne&&"get"in Ne&&null!==(xe=Ne.get(q,se))?xe:q[se]},propHooks:{tabIndex:{get:function(q){var se=le.find.attr(q,"tabindex");return se?parseInt(se,10):wp.test(q.nodeName)||Xm.test(q.nodeName)&&q.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),re.optSelected||(le.propHooks.selected={get:function(q){return null},set:function(q){}}),le.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){le.propFix[this.toLowerCase()]=this}),le.fn.extend({addClass:function(q){var se,ge,xe,Ne,ze,Ye;return ce(q)?this.each(function(Et){le(this).addClass(q.call(this,Et,xa(this)))}):(se=gf(q)).length?this.each(function(){if(xe=xa(this),ge=1===this.nodeType&&" "+pc(xe)+" "){for(ze=0;ze<se.length;ze++)ge.indexOf(" "+(Ne=se[ze])+" ")<0&&(ge+=Ne+" ");Ye=pc(ge),xe!==Ye&&this.setAttribute("class",Ye)}}):this},removeClass:function(q){var se,ge,xe,Ne,ze,Ye;return ce(q)?this.each(function(Et){le(this).removeClass(q.call(this,Et,xa(this)))}):arguments.length?(se=gf(q)).length?this.each(function(){if(xe=xa(this),ge=1===this.nodeType&&" "+pc(xe)+" "){for(ze=0;ze<se.length;ze++)for(Ne=se[ze];ge.indexOf(" "+Ne+" ")>-1;)ge=ge.replace(" "+Ne+" "," ");Ye=pc(ge),xe!==Ye&&this.setAttribute("class",Ye)}}):this:this.attr("class","")},toggleClass:function(q,se){var ge,xe,Ne,ze,Ye=typeof q,Et="string"===Ye||Array.isArray(q);return ce(q)?this.each(function(yt){le(this).toggleClass(q.call(this,yt,xa(this),se),se)}):"boolean"==typeof se&&Et?se?this.addClass(q):this.removeClass(q):(ge=gf(q),this.each(function(){if(Et)for(ze=le(this),Ne=0;Ne<ge.length;Ne++)ze.hasClass(xe=ge[Ne])?ze.removeClass(xe):ze.addClass(xe);else(void 0===q||"boolean"===Ye)&&((xe=xa(this))&&nn.set(this,"__className__",xe),this.setAttribute&&this.setAttribute("class",xe||!1===q?"":nn.get(this,"__className__")||""))}))},hasClass:function(q){var se,ge,xe=0;for(se=" "+q+" ";ge=this[xe++];)if(1===ge.nodeType&&(" "+pc(xa(ge))+" ").indexOf(se)>-1)return!0;return!1}});var Mp=/\r/g;le.fn.extend({val:function(q){var se,ge,xe,Ne=this[0];return arguments.length?(xe=ce(q),this.each(function(ze){var Ye;1===this.nodeType&&(null==(Ye=xe?q.call(this,ze,le(this).val()):q)?Ye="":"number"==typeof Ye?Ye+="":Array.isArray(Ye)&&(Ye=le.map(Ye,function(Et){return null==Et?"":Et+""})),(!(se=le.valHooks[this.type]||le.valHooks[this.nodeName.toLowerCase()])||!("set"in se)||void 0===se.set(this,Ye,"value"))&&(this.value=Ye))})):Ne?(se=le.valHooks[Ne.type]||le.valHooks[Ne.nodeName.toLowerCase()])&&"get"in se&&void 0!==(ge=se.get(Ne,"value"))?ge:"string"==typeof(ge=Ne.value)?ge.replace(Mp,""):null==ge?"":ge:void 0}}),le.extend({valHooks:{option:{get:function(q){var se=le.find.attr(q,"value");return null!=se?se:pc(le.text(q))}},select:{get:function(q){var se,ge,xe,Ne=q.options,ze=q.selectedIndex,Ye="select-one"===q.type,Et=Ye?null:[],yt=Ye?ze+1:Ne.length;for(xe=ze<0?yt:Ye?ze:0;xe<yt;xe++)if(((ge=Ne[xe]).selected||xe===ze)&&!ge.disabled&&(!ge.parentNode.disabled||!Bt(ge.parentNode,"optgroup"))){if(se=le(ge).val(),Ye)return se;Et.push(se)}return Et},set:function(q,se){for(var ge,xe,Ne=q.options,ze=le.makeArray(se),Ye=Ne.length;Ye--;)((xe=Ne[Ye]).selected=le.inArray(le.valHooks.option.get(xe),ze)>-1)&&(ge=!0);return ge||(q.selectedIndex=-1),ze}}}}),le.each(["radio","checkbox"],function(){le.valHooks[this]={set:function(q,se){if(Array.isArray(se))return q.checked=le.inArray(le(q).val(),se)>-1}},re.checkOn||(le.valHooks[this].get=function(q){return null===q.getAttribute("value")?"on":q.value})}),re.focusin="onfocusin"in o;var Cp=/^(?:focusinfocus|focusoutblur)$/,zc=function(q){q.stopPropagation()};le.extend(le.event,{trigger:function(q,se,ge,xe){var Ne,ze,Ye,Et,yt,Rt,xn,si,on=[ge||ae],un=V.call(q,"type")?q.type:q,mr=V.call(q,"namespace")?q.namespace.split("."):[];if(ze=si=Ye=ge=ge||ae,3!==ge.nodeType&&8!==ge.nodeType&&!Cp.test(un+le.event.triggered)&&(un.indexOf(".")>-1&&(mr=un.split("."),un=mr.shift(),mr.sort()),yt=un.indexOf(":")<0&&"on"+un,(q=q[le.expando]?q:new le.Event(un,"object"==typeof q&&q)).isTrigger=xe?2:3,q.namespace=mr.join("."),q.rnamespace=q.namespace?new RegExp("(^|\\.)"+mr.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,q.result=void 0,q.target||(q.target=ge),se=null==se?[q]:le.makeArray(se,[q]),xn=le.event.special[un]||{},xe||!xn.trigger||!1!==xn.trigger.apply(ge,se))){if(!xe&&!xn.noBubble&&!ie(ge)){for(Cp.test((Et=xn.delegateType||un)+un)||(ze=ze.parentNode);ze;ze=ze.parentNode)on.push(ze),Ye=ze;Ye===(ge.ownerDocument||ae)&&on.push(Ye.defaultView||Ye.parentWindow||o)}for(Ne=0;(ze=on[Ne++])&&!q.isPropagationStopped();)si=ze,q.type=Ne>1?Et:xn.bindType||un,(Rt=(nn.get(ze,"events")||Object.create(null))[q.type]&&nn.get(ze,"handle"))&&Rt.apply(ze,se),(Rt=yt&&ze[yt])&&Rt.apply&&tt(ze)&&(q.result=Rt.apply(ze,se),!1===q.result&&q.preventDefault());return q.type=un,!xe&&!q.isDefaultPrevented()&&(!xn._default||!1===xn._default.apply(on.pop(),se))&&tt(ge)&&yt&&ce(ge[un])&&!ie(ge)&&((Ye=ge[yt])&&(ge[yt]=null),le.event.triggered=un,q.isPropagationStopped()&&si.addEventListener(un,zc),ge[un](),q.isPropagationStopped()&&si.removeEventListener(un,zc),le.event.triggered=void 0,Ye&&(ge[yt]=Ye)),q.result}},simulate:function(q,se,ge){var xe=le.extend(new le.Event,ge,{type:q,isSimulated:!0});le.event.trigger(xe,null,se)}}),le.fn.extend({trigger:function(q,se){return this.each(function(){le.event.trigger(q,se,this)})},triggerHandler:function(q,se){var ge=this[0];if(ge)return le.event.trigger(q,se,ge,!0)}}),re.focusin||le.each({focus:"focusin",blur:"focusout"},function(q,se){var ge=function(xe){le.event.simulate(se,xe.target,le.event.fix(xe))};le.event.special[se]={setup:function(){var xe=this.ownerDocument||this.document||this,Ne=nn.access(xe,se);Ne||xe.addEventListener(q,ge,!0),nn.access(xe,se,(Ne||0)+1)},teardown:function(){var xe=this.ownerDocument||this.document||this,Ne=nn.access(xe,se)-1;Ne?nn.access(xe,se,Ne):(xe.removeEventListener(q,ge,!0),nn.remove(xe,se))}}});var bd=o.location,Sp={guid:Date.now()},Vc=/\?/;le.parseXML=function(q){var se,ge;if(!q||"string"!=typeof q)return null;try{se=(new o.DOMParser).parseFromString(q,"text/xml")}catch(xe){}return ge=se&&se.getElementsByTagName("parsererror")[0],(!se||ge)&&le.error("Invalid XML: "+(ge?le.map(ge.childNodes,function(xe){return xe.textContent}).join("\n"):q)),se};var P_=/\[\]$/,Ep=/\r?\n/g,_f=/^(?:submit|button|image|reset|file)$/i,Nh=/^(?:input|select|textarea|keygen)/i;function Tp(q,se,ge,xe){var Ne;if(Array.isArray(se))le.each(se,function(ze,Ye){ge||P_.test(q)?xe(q,Ye):Tp(q+"["+("object"==typeof Ye&&null!=Ye?ze:"")+"]",Ye,ge,xe)});else if(ge||"object"!==Pe(se))xe(q,se);else for(Ne in se)Tp(q+"["+Ne+"]",se[Ne],ge,xe)}le.param=function(q,se){var ge,xe=[],Ne=function(ze,Ye){var Et=ce(Ye)?Ye():Ye;xe[xe.length]=encodeURIComponent(ze)+"="+encodeURIComponent(null==Et?"":Et)};if(null==q)return"";if(Array.isArray(q)||q.jquery&&!le.isPlainObject(q))le.each(q,function(){Ne(this.name,this.value)});else for(ge in q)Tp(ge,q[ge],se,Ne);return xe.join("&")},le.fn.extend({serialize:function(){return le.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var q=le.prop(this,"elements");return q?le.makeArray(q):this}).filter(function(){var q=this.type;return this.name&&!le(this).is(":disabled")&&Nh.test(this.nodeName)&&!_f.test(q)&&(this.checked||!nr.test(q))}).map(function(q,se){var ge=le(this).val();return null==ge?null:Array.isArray(ge)?le.map(ge,function(xe){return{name:se.name,value:xe.replace(Ep,"\r\n")}}):{name:se.name,value:ge.replace(Ep,"\r\n")}}).get()}});var Ql=/%20/g,xo=/#.*$/,vf=/([?&])_=[^&]*/,xd=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ai=/^(?:GET|HEAD)$/,wd=/^\/\//,Ms={},au={},lh="*/".concat("*"),Md=ae.createElement("a");function Dp(q){return function(se,ge){"string"!=typeof se&&(ge=se,se="*");var xe,Ne=0,ze=se.toLowerCase().match(Xt)||[];if(ce(ge))for(;xe=ze[Ne++];)"+"===xe[0]?(xe=xe.slice(1)||"*",(q[xe]=q[xe]||[]).unshift(ge)):(q[xe]=q[xe]||[]).push(ge)}}function sl(q,se,ge,xe){var Ne={},ze=q===au;function Ye(Et){var yt;return Ne[Et]=!0,le.each(q[Et]||[],function(Rt,xn){var si=xn(se,ge,xe);return"string"!=typeof si||ze||Ne[si]?ze?!(yt=si):void 0:(se.dataTypes.unshift(si),Ye(si),!1)}),yt}return Ye(se.dataTypes[0])||!Ne["*"]&&Ye("*")}function mc(q,se){var ge,xe,Ne=le.ajaxSettings.flatOptions||{};for(ge in se)void 0!==se[ge]&&((Ne[ge]?q:xe||(xe={}))[ge]=se[ge]);return xe&&le.extend(!0,q,xe),q}Md.href=bd.href,le.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bd.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bd.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":lh,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":le.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(q,se){return se?mc(mc(q,le.ajaxSettings),se):mc(le.ajaxSettings,q)},ajaxPrefilter:Dp(Ms),ajaxTransport:Dp(au),ajax:function(q,se){"object"==typeof q&&(se=q,q=void 0);var ge,xe,Ne,ze,Ye,Et,yt,Rt,xn,si,on=le.ajaxSetup({},se=se||{}),un=on.context||on,mr=on.context&&(un.nodeType||un.jquery)?le(un):le.event,ns=le.Deferred(),gr=le.Callbacks("once memory"),ko=on.statusCode||{},Ls={},fl={},To="canceled",rr={readyState:0,getResponseHeader:function(Or){var ra;if(yt){if(!ze)for(ze={};ra=xd.exec(Ne);)ze[ra[1].toLowerCase()+" "]=(ze[ra[1].toLowerCase()+" "]||[]).concat(ra[2]);ra=ze[Or.toLowerCase()+" "]}return null==ra?null:ra.join(", ")},getAllResponseHeaders:function(){return yt?Ne:null},setRequestHeader:function(Or,ra){return null==yt&&(Or=fl[Or.toLowerCase()]=fl[Or.toLowerCase()]||Or,Ls[Or]=ra),this},overrideMimeType:function(Or){return null==yt&&(on.mimeType=Or),this},statusCode:function(Or){var ra;if(Or)if(yt)rr.always(Or[rr.status]);else for(ra in Or)ko[ra]=[ko[ra],Or[ra]];return this},abort:function(Or){var ra=Or||To;return ge&&ge.abort(ra),ol(0,ra),this}};if(ns.promise(rr),on.url=((q||on.url||bd.href)+"").replace(wd,bd.protocol+"//"),on.type=se.method||se.type||on.method||on.type,on.dataTypes=(on.dataType||"*").toLowerCase().match(Xt)||[""],null==on.crossDomain){Et=ae.createElement("a");try{Et.href=on.url,Et.href=Et.href,on.crossDomain=Md.protocol+"//"+Md.host!=Et.protocol+"//"+Et.host}catch(Or){on.crossDomain=!0}}if(on.data&&on.processData&&"string"!=typeof on.data&&(on.data=le.param(on.data,on.traditional)),sl(Ms,on,se,rr),yt)return rr;for(xn in(Rt=le.event&&on.global)&&0==le.active++&&le.event.trigger("ajaxStart"),on.type=on.type.toUpperCase(),on.hasContent=!Ai.test(on.type),xe=on.url.replace(xo,""),on.hasContent?on.data&&on.processData&&0===(on.contentType||"").indexOf("application/x-www-form-urlencoded")&&(on.data=on.data.replace(Ql,"+")):(si=on.url.slice(xe.length),on.data&&(on.processData||"string"==typeof on.data)&&(xe+=(Vc.test(xe)?"&":"?")+on.data,delete on.data),!1===on.cache&&(xe=xe.replace(vf,"$1"),si=(Vc.test(xe)?"&":"?")+"_="+Sp.guid+++si),on.url=xe+si),on.ifModified&&(le.lastModified[xe]&&rr.setRequestHeader("If-Modified-Since",le.lastModified[xe]),le.etag[xe]&&rr.setRequestHeader("If-None-Match",le.etag[xe])),(on.data&&on.hasContent&&!1!==on.contentType||se.contentType)&&rr.setRequestHeader("Content-Type",on.contentType),rr.setRequestHeader("Accept",on.dataTypes[0]&&on.accepts[on.dataTypes[0]]?on.accepts[on.dataTypes[0]]+("*"!==on.dataTypes[0]?", "+lh+"; q=0.01":""):on.accepts["*"]),on.headers)rr.setRequestHeader(xn,on.headers[xn]);if(on.beforeSend&&(!1===on.beforeSend.call(un,rr,on)||yt))return rr.abort();if(To="abort",gr.add(on.complete),rr.done(on.success),rr.fail(on.error),ge=sl(au,on,se,rr)){if(rr.readyState=1,Rt&&mr.trigger("ajaxSend",[rr,on]),yt)return rr;on.async&&on.timeout>0&&(Ye=o.setTimeout(function(){rr.abort("timeout")},on.timeout));try{yt=!1,ge.send(Ls,ol)}catch(Or){if(yt)throw Or;ol(-1,Or)}}else ol(-1,"No Transport");function ol(Or,ra,uh,ys){var Fl,pl,mi,so,Ui,Bn=ra;yt||(yt=!0,Ye&&o.clearTimeout(Ye),ge=void 0,Ne=ys||"",rr.readyState=Or>0?4:0,Fl=Or>=200&&Or<300||304===Or,uh&&(so=function Bh(q,se,ge){for(var xe,Ne,ze,Ye,Et=q.contents,yt=q.dataTypes;"*"===yt[0];)yt.shift(),void 0===xe&&(xe=q.mimeType||se.getResponseHeader("Content-Type"));if(xe)for(Ne in Et)if(Et[Ne]&&Et[Ne].test(xe)){yt.unshift(Ne);break}if(yt[0]in ge)ze=yt[0];else{for(Ne in ge){if(!yt[0]||q.converters[Ne+" "+yt[0]]){ze=Ne;break}Ye||(Ye=Ne)}ze=ze||Ye}if(ze)return ze!==yt[0]&&yt.unshift(ze),ge[ze]}(on,rr,uh)),!Fl&&le.inArray("script",on.dataTypes)>-1&&le.inArray("json",on.dataTypes)<0&&(on.converters["text script"]=function(){}),so=function Hh(q,se,ge,xe){var Ne,ze,Ye,Et,yt,Rt={},xn=q.dataTypes.slice();if(xn[1])for(Ye in q.converters)Rt[Ye.toLowerCase()]=q.converters[Ye];for(ze=xn.shift();ze;)if(q.responseFields[ze]&&(ge[q.responseFields[ze]]=se),!yt&&xe&&q.dataFilter&&(se=q.dataFilter(se,q.dataType)),yt=ze,ze=xn.shift())if("*"===ze)ze=yt;else if("*"!==yt&&yt!==ze){if(!(Ye=Rt[yt+" "+ze]||Rt["* "+ze]))for(Ne in Rt)if((Et=Ne.split(" "))[1]===ze&&(Ye=Rt[yt+" "+Et[0]]||Rt["* "+Et[0]])){!0===Ye?Ye=Rt[Ne]:!0!==Rt[Ne]&&(ze=Et[0],xn.unshift(Et[1]));break}if(!0!==Ye)if(Ye&&q.throws)se=Ye(se);else try{se=Ye(se)}catch(si){return{state:"parsererror",error:Ye?si:"No conversion from "+yt+" to "+ze}}}return{state:"success",data:se}}(on,so,rr,Fl),Fl?(on.ifModified&&((Ui=rr.getResponseHeader("Last-Modified"))&&(le.lastModified[xe]=Ui),(Ui=rr.getResponseHeader("etag"))&&(le.etag[xe]=Ui)),204===Or||"HEAD"===on.type?Bn="nocontent":304===Or?Bn="notmodified":(Bn=so.state,pl=so.data,Fl=!(mi=so.error))):(mi=Bn,(Or||!Bn)&&(Bn="error",Or<0&&(Or=0))),rr.status=Or,rr.statusText=(ra||Bn)+"",Fl?ns.resolveWith(un,[pl,Bn,rr]):ns.rejectWith(un,[rr,Bn,mi]),rr.statusCode(ko),ko=void 0,Rt&&mr.trigger(Fl?"ajaxSuccess":"ajaxError",[rr,on,Fl?pl:mi]),gr.fireWith(un,[rr,Bn]),Rt&&(mr.trigger("ajaxComplete",[rr,on]),--le.active||le.event.trigger("ajaxStop")))}return rr},getJSON:function(q,se,ge){return le.get(q,se,ge,"json")},getScript:function(q,se){return le.get(q,void 0,se,"script")}}),le.each(["get","post"],function(q,se){le[se]=function(ge,xe,Ne,ze){return ce(xe)&&(ze=ze||Ne,Ne=xe,xe=void 0),le.ajax(le.extend({url:ge,type:se,dataType:ze,data:xe,success:Ne},le.isPlainObject(ge)&&ge))}}),le.ajaxPrefilter(function(q){var se;for(se in q.headers)"content-type"===se.toLowerCase()&&(q.contentType=q.headers[se]||"")}),le._evalUrl=function(q,se,ge){return le.ajax({url:q,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(xe){le.globalEval(xe,se,ge)}})},le.fn.extend({wrapAll:function(q){var se;return this[0]&&(ce(q)&&(q=q.call(this[0])),se=le(q,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&se.insertBefore(this[0]),se.map(function(){for(var ge=this;ge.firstElementChild;)ge=ge.firstElementChild;return ge}).append(this)),this},wrapInner:function(q){return ce(q)?this.each(function(se){le(this).wrapInner(q.call(this,se))}):this.each(function(){var se=le(this),ge=se.contents();ge.length?ge.wrapAll(q):se.append(q)})},wrap:function(q){var se=ce(q);return this.each(function(ge){le(this).wrapAll(se?q.call(this,ge):q)})},unwrap:function(q){return this.parent(q).not("body").each(function(){le(this).replaceWith(this.childNodes)}),this}}),le.expr.pseudos.hidden=function(q){return!le.expr.pseudos.visible(q)},le.expr.pseudos.visible=function(q){return!!(q.offsetWidth||q.offsetHeight||q.getClientRects().length)},le.ajaxSettings.xhr=function(){try{return new o.XMLHttpRequest}catch(q){}};var Ac={0:200,1223:204},Fr=le.ajaxSettings.xhr();re.cors=!!Fr&&"withCredentials"in Fr,re.ajax=Fr=!!Fr,le.ajaxTransport(function(q){var se,ge;if(re.cors||Fr&&!q.crossDomain)return{send:function(xe,Ne){var ze,Ye=q.xhr();if(Ye.open(q.type,q.url,q.async,q.username,q.password),q.xhrFields)for(ze in q.xhrFields)Ye[ze]=q.xhrFields[ze];for(ze in q.mimeType&&Ye.overrideMimeType&&Ye.overrideMimeType(q.mimeType),!q.crossDomain&&!xe["X-Requested-With"]&&(xe["X-Requested-With"]="XMLHttpRequest"),xe)Ye.setRequestHeader(ze,xe[ze]);se=function(Et){return function(){se&&(se=ge=Ye.onload=Ye.onerror=Ye.onabort=Ye.ontimeout=Ye.onreadystatechange=null,"abort"===Et?Ye.abort():"error"===Et?"number"!=typeof Ye.status?Ne(0,"error"):Ne(Ye.status,Ye.statusText):Ne(Ac[Ye.status]||Ye.status,Ye.statusText,"text"!==(Ye.responseType||"text")||"string"!=typeof Ye.responseText?{binary:Ye.response}:{text:Ye.responseText},Ye.getAllResponseHeaders()))}},Ye.onload=se(),ge=Ye.onerror=Ye.ontimeout=se("error"),void 0!==Ye.onabort?Ye.onabort=ge:Ye.onreadystatechange=function(){4===Ye.readyState&&o.setTimeout(function(){se&&ge()})},se=se("abort");try{Ye.send(q.hasContent&&q.data||null)}catch(Et){if(se)throw Et}},abort:function(){se&&se()}}}),le.ajaxPrefilter(function(q){q.crossDomain&&(q.contents.script=!1)}),le.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(q){return le.globalEval(q),q}}}),le.ajaxPrefilter("script",function(q){void 0===q.cache&&(q.cache=!1),q.crossDomain&&(q.type="GET")}),le.ajaxTransport("script",function(q){var se,ge;if(q.crossDomain||q.scriptAttrs)return{send:function(xe,Ne){se=le("<script>").attr(q.scriptAttrs||{}).prop({charset:q.scriptCharset,src:q.url}).on("load error",ge=function(ze){se.remove(),ge=null,ze&&Ne("error"===ze.type?404:200,ze.type)}),ae.head.appendChild(se[0])},abort:function(){ge&&ge()}}});var q,zh=[],ch=/(=)\?(?=&|$)|\?\?/;le.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var q=zh.pop()||le.expando+"_"+Sp.guid++;return this[q]=!0,q}}),le.ajaxPrefilter("json jsonp",function(q,se,ge){var xe,Ne,ze,Ye=!1!==q.jsonp&&(ch.test(q.url)?"url":"string"==typeof q.data&&0===(q.contentType||"").indexOf("application/x-www-form-urlencoded")&&ch.test(q.data)&&"data");if(Ye||"jsonp"===q.dataTypes[0])return xe=q.jsonpCallback=ce(q.jsonpCallback)?q.jsonpCallback():q.jsonpCallback,Ye?q[Ye]=q[Ye].replace(ch,"$1"+xe):!1!==q.jsonp&&(q.url+=(Vc.test(q.url)?"&":"?")+q.jsonp+"="+xe),q.converters["script json"]=function(){return ze||le.error(xe+" was not called"),ze[0]},q.dataTypes[0]="json",Ne=o[xe],o[xe]=function(){ze=arguments},ge.always(function(){void 0===Ne?le(o).removeProp(xe):o[xe]=Ne,q[xe]&&(q.jsonpCallback=se.jsonpCallback,zh.push(xe)),ze&&ce(Ne)&&Ne(ze[0]),ze=Ne=void 0}),"script"}),re.createHTMLDocument=((q=ae.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===q.childNodes.length),le.parseHTML=function(q,se,ge){return"string"!=typeof q?[]:("boolean"==typeof se&&(ge=se,se=!1),se||(re.createHTMLDocument?((xe=(se=ae.implementation.createHTMLDocument("")).createElement("base")).href=ae.location.href,se.head.appendChild(xe)):se=ae),ze=!ge&&[],(Ne=Ze.exec(q))?[se.createElement(Ne[1])]:(Ne=Z([q],se,ze),ze&&ze.length&&le(ze).remove(),le.merge([],Ne.childNodes)));var xe,Ne,ze},le.fn.load=function(q,se,ge){var xe,Ne,ze,Ye=this,Et=q.indexOf(" ");return Et>-1&&(xe=pc(q.slice(Et)),q=q.slice(0,Et)),ce(se)?(ge=se,se=void 0):se&&"object"==typeof se&&(Ne="POST"),Ye.length>0&&le.ajax({url:q,type:Ne||"GET",dataType:"html",data:se}).done(function(yt){ze=arguments,Ye.html(xe?le("<div>").append(le.parseHTML(yt)).find(xe):yt)}).always(ge&&function(yt,Rt){Ye.each(function(){ge.apply(this,ze||[yt.responseText,Rt,yt])})}),this},le.expr.pseudos.animated=function(q){return le.grep(le.timers,function(se){return q===se.elem}).length},le.offset={setOffset:function(q,se,ge){var xe,Ne,ze,Ye,Et,yt,xn=le.css(q,"position"),si=le(q),on={};"static"===xn&&(q.style.position="relative"),Et=si.offset(),ze=le.css(q,"top"),yt=le.css(q,"left"),("absolute"===xn||"fixed"===xn)&&(ze+yt).indexOf("auto")>-1?(Ye=(xe=si.position()).top,Ne=xe.left):(Ye=parseFloat(ze)||0,Ne=parseFloat(yt)||0),ce(se)&&(se=se.call(q,ge,le.extend({},Et))),null!=se.top&&(on.top=se.top-Et.top+Ye),null!=se.left&&(on.left=se.left-Et.left+Ne),"using"in se?se.using.call(q,on):si.css(on)}},le.fn.extend({offset:function(q){if(arguments.length)return void 0===q?this:this.each(function(Ne){le.offset.setOffset(this,q,Ne)});var se,ge,xe=this[0];return xe?xe.getClientRects().length?{top:(se=xe.getBoundingClientRect()).top+(ge=xe.ownerDocument.defaultView).pageYOffset,left:se.left+ge.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var q,se,ge,xe=this[0],Ne={top:0,left:0};if("fixed"===le.css(xe,"position"))se=xe.getBoundingClientRect();else{for(se=this.offset(),ge=xe.ownerDocument,q=xe.offsetParent||ge.documentElement;q&&(q===ge.body||q===ge.documentElement)&&"static"===le.css(q,"position");)q=q.parentNode;q&&q!==xe&&1===q.nodeType&&((Ne=le(q).offset()).top+=le.css(q,"borderTopWidth",!0),Ne.left+=le.css(q,"borderLeftWidth",!0))}return{top:se.top-Ne.top-le.css(xe,"marginTop",!0),left:se.left-Ne.left-le.css(xe,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var q=this.offsetParent;q&&"static"===le.css(q,"position");)q=q.offsetParent;return q||ro})}}),le.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(q,se){var ge="pageYOffset"===se;le.fn[q]=function(xe){return cr(this,function(Ne,ze,Ye){var Et;if(ie(Ne)?Et=Ne:9===Ne.nodeType&&(Et=Ne.defaultView),void 0===Ye)return Et?Et[se]:Ne[ze];Et?Et.scrollTo(ge?Et.pageXOffset:Ye,ge?Ye:Et.pageYOffset):Ne[ze]=Ye},q,xe,arguments.length)}}),le.each(["top","left"],function(q,se){le.cssHooks[se]=ia(re.pixelPosition,function(ge,xe){if(xe)return xe=Br(ge,se),Di.test(xe)?le(ge).position()[se]+"px":xe})}),le.each({Height:"height",Width:"width"},function(q,se){le.each({padding:"inner"+q,content:se,"":"outer"+q},function(ge,xe){le.fn[xe]=function(Ne,ze){var Ye=arguments.length&&(ge||"boolean"!=typeof Ne),Et=ge||(!0===Ne||!0===ze?"margin":"border");return cr(this,function(yt,Rt,xn){var si;return ie(yt)?0===xe.indexOf("outer")?yt["inner"+q]:yt.document.documentElement["client"+q]:9===yt.nodeType?(si=yt.documentElement,Math.max(yt.body["scroll"+q],si["scroll"+q],yt.body["offset"+q],si["offset"+q],si["client"+q])):void 0===xn?le.css(yt,Rt,Et):le.style(yt,Rt,xn,Et)},se,Ye?Ne:void 0,Ye)}})}),le.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(q,se){le.fn[se]=function(ge){return this.on(se,ge)}}),le.fn.extend({bind:function(q,se,ge){return this.on(q,null,se,ge)},unbind:function(q,se){return this.off(q,null,se)},delegate:function(q,se,ge,xe){return this.on(se,q,ge,xe)},undelegate:function(q,se,ge){return 1===arguments.length?this.off(q,"**"):this.off(se,q||"**",ge)},hover:function(q,se){return this.mouseenter(q).mouseleave(se||q)}}),le.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(q,se){le.fn[se]=function(ge,xe){return arguments.length>0?this.on(se,null,ge,xe):this.trigger(se)}});var lu=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;le.proxy=function(q,se){var ge,xe,Ne;if("string"==typeof se&&(ge=q[se],se=q,q=ge),ce(q))return xe=v.call(arguments,2),Ne=function(){return q.apply(se||this,xe.concat(v.call(arguments)))},Ne.guid=q.guid=q.guid||le.guid++,Ne},le.holdReady=function(q){q?le.readyWait++:le.ready(!0)},le.isArray=Array.isArray,le.parseJSON=JSON.parse,le.nodeName=Bt,le.isFunction=ce,le.isWindow=ie,le.camelCase=lt,le.type=Pe,le.now=Date.now,le.isNumeric=function(q){var se=le.type(q);return("number"===se||"string"===se)&&!isNaN(q-parseFloat(q))},le.trim=function(q){return null==q?"":(q+"").replace(lu,"$1")},void 0!==(y=function(){return le}.apply(U,[]))&&(K.exports=y);var cu=o.jQuery,ju=o.$;return le.noConflict=function(q){return o.$===le&&(o.$=ju),q&&o.jQuery===le&&(o.jQuery=cu),le},void 0===d&&(o.jQuery=o.$=le),le})},650:K=>{K.exports=function U(D,y,o){function d(v,M){if(!y[v]){if(!D[v]){if(g)return g(v,!0);var I=new Error("Cannot find module '"+v+"'");throw I.code="MODULE_NOT_FOUND",I}var P=y[v]={exports:{}};D[v][0].call(P.exports,function(N){return d(D[v][1][N]||N)},P,P.exports,U,D,y,o)}return y[v].exports}for(var g=void 0,p=0;p<o.length;p++)d(o[p]);return d}({1:[function(U,D,y){"use strict";var o=U("./utils"),d=U("./support"),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";y.encode=function(p){for(var v,M,T,P,N,V,J=[],W=0,re=p.length,ce=re,ie="string"!==o.getTypeOf(p);W<p.length;)ce=re-W,T=ie?(v=p[W++],M=W<re?p[W++]:0,W<re?p[W++]:0):(v=p.charCodeAt(W++),M=W<re?p.charCodeAt(W++):0,W<re?p.charCodeAt(W++):0),P=(3&v)<<4|M>>4,N=1<ce?(15&M)<<2|T>>6:64,V=2<ce?63&T:64,J.push(g.charAt(v>>2)+g.charAt(P)+g.charAt(N)+g.charAt(V));return J.join("")},y.decode=function(p){var v,M,T,I,P,N,V=0,J=0,W="data:";if(p.substr(0,W.length)===W)throw new Error("Invalid base64 input, it looks like a data url.");var re,ce=3*(p=p.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(p.charAt(p.length-1)===g.charAt(64)&&ce--,p.charAt(p.length-2)===g.charAt(64)&&ce--,ce%1!=0)throw new Error("Invalid base64 input, bad content length.");for(re=d.uint8array?new Uint8Array(0|ce):new Array(0|ce);V<p.length;)v=g.indexOf(p.charAt(V++))<<2|(I=g.indexOf(p.charAt(V++)))>>4,M=(15&I)<<4|(P=g.indexOf(p.charAt(V++)))>>2,T=(3&P)<<6|(N=g.indexOf(p.charAt(V++))),re[J++]=v,64!==P&&(re[J++]=M),64!==N&&(re[J++]=T);return re}},{"./support":30,"./utils":32}],2:[function(U,D,y){"use strict";var o=U("./external"),d=U("./stream/DataWorker"),g=U("./stream/Crc32Probe"),p=U("./stream/DataLengthProbe");function v(M,T,I,P,N){this.compressedSize=M,this.uncompressedSize=T,this.crc32=I,this.compression=P,this.compressedContent=N}v.prototype={getContentWorker:function(){var M=new d(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new p("data_length")),T=this;return M.on("end",function(){if(this.streamInfo.data_length!==T.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),M},getCompressedWorker:function(){return new d(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},v.createWorkerFrom=function(M,T,I){return M.pipe(new g).pipe(new p("uncompressedSize")).pipe(T.compressWorker(I)).pipe(new p("compressedSize")).withStreamInfo("compression",T)},D.exports=v},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(U,D,y){"use strict";var o=U("./stream/GenericWorker");y.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},y.DEFLATE=U("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(U,D,y){"use strict";var o=U("./utils"),d=function(){for(var g,p=[],v=0;v<256;v++){g=v;for(var M=0;M<8;M++)g=1&g?3988292384^g>>>1:g>>>1;p[v]=g}return p}();D.exports=function(g,p){return void 0!==g&&g.length?"string"!==o.getTypeOf(g)?function(v,M,T,I){var P=d,N=0+T;v^=-1;for(var V=0;V<N;V++)v=v>>>8^P[255&(v^M[V])];return-1^v}(0|p,g,g.length):function(v,M,T,I){var P=d,N=0+T;v^=-1;for(var V=0;V<N;V++)v=v>>>8^P[255&(v^M.charCodeAt(V))];return-1^v}(0|p,g,g.length):0}},{"./utils":32}],5:[function(U,D,y){"use strict";y.base64=!1,y.binary=!1,y.dir=!1,y.createFolders=!0,y.date=null,y.compression=null,y.compressionOptions=null,y.comment=null,y.unixPermissions=null,y.dosPermissions=null},{}],6:[function(U,D,y){"use strict";var o;o="undefined"!=typeof Promise?Promise:U("lie"),D.exports={Promise:o}},{lie:37}],7:[function(U,D,y){"use strict";var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,d=U("pako"),g=U("./utils"),p=U("./stream/GenericWorker"),v=o?"uint8array":"array";function M(T,I){p.call(this,"FlateWorker/"+T),this._pako=null,this._pakoAction=T,this._pakoOptions=I,this.meta={}}y.magic="\b\0",g.inherits(M,p),M.prototype.processChunk=function(T){this.meta=T.meta,null===this._pako&&this._createPako(),this._pako.push(g.transformTo(v,T.data),!1)},M.prototype.flush=function(){p.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},M.prototype.cleanUp=function(){p.prototype.cleanUp.call(this),this._pako=null},M.prototype._createPako=function(){this._pako=new d[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var T=this;this._pako.onData=function(I){T.push({data:I,meta:T.meta})}},y.compressWorker=function(T){return new M("Deflate",T)},y.uncompressWorker=function(){return new M("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(U,D,y){"use strict";function o(P,N){var V,J="";for(V=0;V<N;V++)J+=String.fromCharCode(255&P),P>>>=8;return J}function d(P,N,V,J,W,re){var ce,ie,ae=P.file,we=P.compression,Me=re!==v.utf8encode,Pe=g.transformTo("string",re(ae.name)),Ve=g.transformTo("string",v.utf8encode(ae.name)),le=ae.comment,st=g.transformTo("string",re(le)),We=g.transformTo("string",v.utf8encode(le)),at=Ve.length!==ae.name.length,Te=We.length!==le.length,qe="",Bt="",Ze="",Zn=ae.dir,jt=ae.date,_n={crc32:0,compressedSize:0,uncompressedSize:0};N&&!V||(_n.crc32=P.crc32,_n.compressedSize=P.compressedSize,_n.uncompressedSize=P.uncompressedSize);var Dt=0;N&&(Dt|=8),Me||!at&&!Te||(Dt|=2048);var Xt,Li,It=0,Yn=0;Zn&&(It|=16),"UNIX"===W?(Yn=798,It|=(Li=Xt=ae.unixPermissions,Xt||(Li=Zn?16893:33204),(65535&Li)<<16)):(Yn=20,It|=function(Xt){return 63&(Xt||0)}(ae.dosPermissions)),ce=jt.getUTCHours(),ce<<=6,ce|=jt.getUTCMinutes(),ce<<=5,ce|=jt.getUTCSeconds()/2,ie=jt.getUTCFullYear()-1980,ie<<=4,ie|=jt.getUTCMonth()+1,ie<<=5,ie|=jt.getUTCDate(),at&&(Bt=o(1,1)+o(M(Pe),4)+Ve,qe+="up"+o(Bt.length,2)+Bt),Te&&(Ze=o(1,1)+o(M(st),4)+We,qe+="uc"+o(Ze.length,2)+Ze);var ei="";return ei+="\n\0",ei+=o(Dt,2),ei+=we.magic,ei+=o(ce,2),ei+=o(ie,2),ei+=o(_n.crc32,4),ei+=o(_n.compressedSize,4),ei+=o(_n.uncompressedSize,4),ei+=o(Pe.length,2),ei+=o(qe.length,2),{fileRecord:T.LOCAL_FILE_HEADER+ei+Pe+qe,dirRecord:T.CENTRAL_FILE_HEADER+o(Yn,2)+ei+o(st.length,2)+"\0\0\0\0"+o(It,4)+o(J,4)+Pe+qe+st}}var g=U("../utils"),p=U("../stream/GenericWorker"),v=U("../utf8"),M=U("../crc32"),T=U("../signature");function I(P,N,V,J){p.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=N,this.zipPlatform=V,this.encodeFileName=J,this.streamFiles=P,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}g.inherits(I,p),I.prototype.push=function(P){var N=P.meta.percent||0,V=this.entriesCount,J=this._sources.length;this.accumulate?this.contentBuffer.push(P):(this.bytesWritten+=P.data.length,p.prototype.push.call(this,{data:P.data,meta:{currentFile:this.currentFile,percent:V?(N+100*(V-J-1))/V:100}}))},I.prototype.openedSource=function(P){this.currentSourceOffset=this.bytesWritten,this.currentFile=P.file.name;var N=this.streamFiles&&!P.file.dir;if(N){var V=d(P,N,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:V.fileRecord,meta:{percent:0}})}else this.accumulate=!0},I.prototype.closedSource=function(P){this.accumulate=!1;var J,N=this.streamFiles&&!P.file.dir,V=d(P,N,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(V.dirRecord),N)this.push({data:(J=P,T.DATA_DESCRIPTOR+o(J.crc32,4)+o(J.compressedSize,4)+o(J.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:V.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},I.prototype.flush=function(){for(var P=this.bytesWritten,N=0;N<this.dirRecords.length;N++)this.push({data:this.dirRecords[N],meta:{percent:100}});var W,re,ce,we,J=(W=this.dirRecords.length,re=this.bytesWritten-P,ce=P,we=g.transformTo("string",(0,this.encodeFileName)(this.zipComment)),T.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(W,2)+o(W,2)+o(re,4)+o(ce,4)+o(we.length,2)+we);this.push({data:J,meta:{percent:100}})},I.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},I.prototype.registerPrevious=function(P){this._sources.push(P);var N=this;return P.on("data",function(V){N.processChunk(V)}),P.on("end",function(){N.closedSource(N.previous.streamInfo),N._sources.length?N.prepareNextSource():N.end()}),P.on("error",function(V){N.error(V)}),this},I.prototype.resume=function(){return!!p.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},I.prototype.error=function(P){var N=this._sources;if(!p.prototype.error.call(this,P))return!1;for(var V=0;V<N.length;V++)try{N[V].error(P)}catch(J){}return!0},I.prototype.lock=function(){p.prototype.lock.call(this);for(var P=this._sources,N=0;N<P.length;N++)P[N].lock()},D.exports=I},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(U,D,y){"use strict";var o=U("../compressions"),d=U("./ZipFileWorker");y.generateWorker=function(g,p,v){var M=new d(p.streamFiles,v,p.platform,p.encodeFileName),T=0;try{g.forEach(function(I,P){T++;var N=function(re,ce){var ie=re||ce,ae=o[ie];if(!ae)throw new Error(ie+" is not a valid compression method !");return ae}(P.options.compression,p.compression),J=P.dir,W=P.date;P._compressWorker(N,P.options.compressionOptions||p.compressionOptions||{}).withStreamInfo("file",{name:I,dir:J,date:W,comment:P.comment||"",unixPermissions:P.unixPermissions,dosPermissions:P.dosPermissions}).pipe(M)}),M.entriesCount=T}catch(I){M.error(I)}return M}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(U,D,y){"use strict";function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var d=new o;for(var g in this)"function"!=typeof this[g]&&(d[g]=this[g]);return d}}(o.prototype=U("./object")).loadAsync=U("./load"),o.support=U("./support"),o.defaults=U("./defaults"),o.version="3.10.1",o.loadAsync=function(d,g){return(new o).loadAsync(d,g)},o.external=U("./external"),D.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(U,D,y){"use strict";var o=U("./utils"),d=U("./external"),g=U("./utf8"),p=U("./zipEntries"),v=U("./stream/Crc32Probe"),M=U("./nodejsUtils");function T(I){return new d.Promise(function(P,N){var V=I.decompressed.getContentWorker().pipe(new v);V.on("error",function(J){N(J)}).on("end",function(){V.streamInfo.crc32!==I.decompressed.crc32?N(new Error("Corrupted zip : CRC32 mismatch")):P()}).resume()})}D.exports=function(I,P){var N=this;return P=o.extend(P||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:g.utf8decode}),M.isNode&&M.isStream(I)?d.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",I,!0,P.optimizedBinaryString,P.base64).then(function(V){var J=new p(P);return J.load(V),J}).then(function(V){var J=[d.Promise.resolve(V)],W=V.files;if(P.checkCRC32)for(var re=0;re<W.length;re++)J.push(T(W[re]));return d.Promise.all(J)}).then(function(V){for(var J=V.shift(),W=J.files,re=0;re<W.length;re++){var ce=W[re],ie=ce.fileNameStr,ae=o.resolve(ce.fileNameStr);N.file(ae,ce.decompressed,{binary:!0,optimizedBinaryString:!0,date:ce.date,dir:ce.dir,comment:ce.fileCommentStr.length?ce.fileCommentStr:null,unixPermissions:ce.unixPermissions,dosPermissions:ce.dosPermissions,createFolders:P.createFolders}),ce.dir||(N.file(ae).unsafeOriginalName=ie)}return J.zipComment.length&&(N.comment=J.zipComment),N})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(U,D,y){"use strict";var o=U("../utils"),d=U("../stream/GenericWorker");function g(p,v){d.call(this,"Nodejs stream input adapter for "+p),this._upstreamEnded=!1,this._bindStream(v)}o.inherits(g,d),g.prototype._bindStream=function(p){var v=this;(this._stream=p).pause(),p.on("data",function(M){v.push({data:M,meta:{percent:0}})}).on("error",function(M){v.isPaused?this.generatedError=M:v.error(M)}).on("end",function(){v.isPaused?v._upstreamEnded=!0:v.end()})},g.prototype.pause=function(){return!!d.prototype.pause.call(this)&&(this._stream.pause(),!0)},g.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},D.exports=g},{"../stream/GenericWorker":28,"../utils":32}],13:[function(U,D,y){"use strict";var o=U("readable-stream").Readable;function d(g,p,v){o.call(this,p),this._helper=g;var M=this;g.on("data",function(T,I){M.push(T)||M._helper.pause(),v&&v(I)}).on("error",function(T){M.emit("error",T)}).on("end",function(){M.push(null)})}U("../utils").inherits(d,o),d.prototype._read=function(){this._helper.resume()},D.exports=d},{"../utils":32,"readable-stream":16}],14:[function(U,D,y){"use strict";D.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(o,d){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,d);if("number"==typeof o)throw new Error('The "data" argument must not be a number');return new Buffer(o,d)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var d=new Buffer(o);return d.fill(0),d},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&"function"==typeof o.on&&"function"==typeof o.pause&&"function"==typeof o.resume}}},{}],15:[function(U,D,y){"use strict";function o(ae,we,Me){var Pe,Ve=g.getTypeOf(we),le=g.extend(Me||{},M);le.date=le.date||new Date,null!==le.compression&&(le.compression=le.compression.toUpperCase()),"string"==typeof le.unixPermissions&&(le.unixPermissions=parseInt(le.unixPermissions,8)),le.unixPermissions&&16384&le.unixPermissions&&(le.dir=!0),le.dosPermissions&&16&le.dosPermissions&&(le.dir=!0),le.dir&&(ae=W(ae)),le.createFolders&&(Pe=J(ae))&&re.call(this,Pe,!0),Me&&void 0!==Me.binary||(le.binary=!("string"===Ve&&!1===le.binary&&!1===le.base64)),(we instanceof T&&0===we.uncompressedSize||le.dir||!we||0===we.length)&&(le.base64=!1,le.binary=!0,we="",le.compression="STORE",Ve="string");var We;We=we instanceof T||we instanceof p?we:N.isNode&&N.isStream(we)?new V(ae,we):g.prepareContent(ae,we,le.binary,le.optimizedBinaryString,le.base64);var at=new I(ae,We,le);this.files[ae]=at}var d=U("./utf8"),g=U("./utils"),p=U("./stream/GenericWorker"),v=U("./stream/StreamHelper"),M=U("./defaults"),T=U("./compressedObject"),I=U("./zipObject"),P=U("./generate"),N=U("./nodejsUtils"),V=U("./nodejs/NodejsStreamInputAdapter"),J=function(ae){"/"===ae.slice(-1)&&(ae=ae.substring(0,ae.length-1));var we=ae.lastIndexOf("/");return 0<we?ae.substring(0,we):""},W=function(ae){return"/"!==ae.slice(-1)&&(ae+="/"),ae},re=function(ae,we){return we=void 0!==we?we:M.createFolders,ae=W(ae),this.files[ae]||o.call(this,ae,null,{dir:!0,createFolders:we}),this.files[ae]};function ce(ae){return"[object RegExp]"===Object.prototype.toString.call(ae)}var ie={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(ae){var we,Me,Pe;for(we in this.files)Pe=this.files[we],(Me=we.slice(this.root.length,we.length))&&we.slice(0,this.root.length)===this.root&&ae(Me,Pe)},filter:function(ae){var we=[];return this.forEach(function(Me,Pe){ae(Me,Pe)&&we.push(Pe)}),we},file:function(ae,we,Me){if(1!==arguments.length)return o.call(this,ae=this.root+ae,we,Me),this;if(ce(ae)){var Pe=ae;return this.filter(function(le,st){return!st.dir&&Pe.test(le)})}var Ve=this.files[this.root+ae];return Ve&&!Ve.dir?Ve:null},folder:function(ae){if(!ae)return this;if(ce(ae))return this.filter(function(Ve,le){return le.dir&&ae.test(Ve)});var Me=re.call(this,this.root+ae),Pe=this.clone();return Pe.root=Me.name,Pe},remove:function(ae){var we=this.files[ae=this.root+ae];if(we||("/"!==ae.slice(-1)&&(ae+="/"),we=this.files[ae]),we&&!we.dir)delete this.files[ae];else for(var Me=this.filter(function(Ve,le){return le.name.slice(0,ae.length)===ae}),Pe=0;Pe<Me.length;Pe++)delete this.files[Me[Pe].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(ae){var we,Me={};try{if((Me=g.extend(ae||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:d.utf8encode})).type=Me.type.toLowerCase(),Me.compression=Me.compression.toUpperCase(),"binarystring"===Me.type&&(Me.type="string"),!Me.type)throw new Error("No output type specified.");g.checkSupport(Me.type),"darwin"!==Me.platform&&"freebsd"!==Me.platform&&"linux"!==Me.platform&&"sunos"!==Me.platform||(Me.platform="UNIX"),"win32"===Me.platform&&(Me.platform="DOS"),we=P.generateWorker(this,Me,Me.comment||this.comment||"")}catch(Ve){(we=new p("error")).error(Ve)}return new v(we,Me.type||"string",Me.mimeType)},generateAsync:function(ae,we){return this.generateInternalStream(ae).accumulate(we)},generateNodeStream:function(ae,we){return(ae=ae||{}).type||(ae.type="nodebuffer"),this.generateInternalStream(ae).toNodejsStream(we)}};D.exports=ie},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(U,D,y){"use strict";D.exports=U("stream")},{stream:void 0}],17:[function(U,D,y){"use strict";var o=U("./DataReader");function d(g){o.call(this,g);for(var p=0;p<this.data.length;p++)g[p]=255&g[p]}U("../utils").inherits(d,o),d.prototype.byteAt=function(g){return this.data[this.zero+g]},d.prototype.lastIndexOfSignature=function(g){for(var p=g.charCodeAt(0),v=g.charCodeAt(1),M=g.charCodeAt(2),T=g.charCodeAt(3),I=this.length-4;0<=I;--I)if(this.data[I]===p&&this.data[I+1]===v&&this.data[I+2]===M&&this.data[I+3]===T)return I-this.zero;return-1},d.prototype.readAndCheckSignature=function(g){var p=g.charCodeAt(0),v=g.charCodeAt(1),M=g.charCodeAt(2),T=g.charCodeAt(3),I=this.readData(4);return p===I[0]&&v===I[1]&&M===I[2]&&T===I[3]},d.prototype.readData=function(g){if(this.checkOffset(g),0===g)return[];var p=this.data.slice(this.zero+this.index,this.zero+this.index+g);return this.index+=g,p},D.exports=d},{"../utils":32,"./DataReader":18}],18:[function(U,D,y){"use strict";var o=U("../utils");function d(g){this.data=g,this.length=g.length,this.index=0,this.zero=0}d.prototype={checkOffset:function(g){this.checkIndex(this.index+g)},checkIndex:function(g){if(this.length<this.zero+g||g<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+g+"). Corrupted zip ?")},setIndex:function(g){this.checkIndex(g),this.index=g},skip:function(g){this.setIndex(this.index+g)},byteAt:function(){},readInt:function(g){var p,v=0;for(this.checkOffset(g),p=this.index+g-1;p>=this.index;p--)v=(v<<8)+this.byteAt(p);return this.index+=g,v},readString:function(g){return o.transformTo("string",this.readData(g))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var g=this.readInt(4);return new Date(Date.UTC(1980+(g>>25&127),(g>>21&15)-1,g>>16&31,g>>11&31,g>>5&63,(31&g)<<1))}},D.exports=d},{"../utils":32}],19:[function(U,D,y){"use strict";var o=U("./Uint8ArrayReader");function d(g){o.call(this,g)}U("../utils").inherits(d,o),d.prototype.readData=function(g){this.checkOffset(g);var p=this.data.slice(this.zero+this.index,this.zero+this.index+g);return this.index+=g,p},D.exports=d},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(U,D,y){"use strict";var o=U("./DataReader");function d(g){o.call(this,g)}U("../utils").inherits(d,o),d.prototype.byteAt=function(g){return this.data.charCodeAt(this.zero+g)},d.prototype.lastIndexOfSignature=function(g){return this.data.lastIndexOf(g)-this.zero},d.prototype.readAndCheckSignature=function(g){return g===this.readData(4)},d.prototype.readData=function(g){this.checkOffset(g);var p=this.data.slice(this.zero+this.index,this.zero+this.index+g);return this.index+=g,p},D.exports=d},{"../utils":32,"./DataReader":18}],21:[function(U,D,y){"use strict";var o=U("./ArrayReader");function d(g){o.call(this,g)}U("../utils").inherits(d,o),d.prototype.readData=function(g){if(this.checkOffset(g),0===g)return new Uint8Array(0);var p=this.data.subarray(this.zero+this.index,this.zero+this.index+g);return this.index+=g,p},D.exports=d},{"../utils":32,"./ArrayReader":17}],22:[function(U,D,y){"use strict";var o=U("../utils"),d=U("../support"),g=U("./ArrayReader"),p=U("./StringReader"),v=U("./NodeBufferReader"),M=U("./Uint8ArrayReader");D.exports=function(T){var I=o.getTypeOf(T);return o.checkSupport(I),"string"!==I||d.uint8array?"nodebuffer"===I?new v(T):d.uint8array?new M(o.transformTo("uint8array",T)):new g(o.transformTo("array",T)):new p(T)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(U,D,y){"use strict";y.LOCAL_FILE_HEADER="PK\x03\x04",y.CENTRAL_FILE_HEADER="PK\x01\x02",y.CENTRAL_DIRECTORY_END="PK\x05\x06",y.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",y.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",y.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(U,D,y){"use strict";var o=U("./GenericWorker"),d=U("../utils");function g(p){o.call(this,"ConvertWorker to "+p),this.destType=p}d.inherits(g,o),g.prototype.processChunk=function(p){this.push({data:d.transformTo(this.destType,p.data),meta:p.meta})},D.exports=g},{"../utils":32,"./GenericWorker":28}],25:[function(U,D,y){"use strict";var o=U("./GenericWorker"),d=U("../crc32");function g(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}U("../utils").inherits(g,o),g.prototype.processChunk=function(p){this.streamInfo.crc32=d(p.data,this.streamInfo.crc32||0),this.push(p)},D.exports=g},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(U,D,y){"use strict";var o=U("../utils"),d=U("./GenericWorker");function g(p){d.call(this,"DataLengthProbe for "+p),this.propName=p,this.withStreamInfo(p,0)}o.inherits(g,d),g.prototype.processChunk=function(p){p&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+p.data.length),d.prototype.processChunk.call(this,p)},D.exports=g},{"../utils":32,"./GenericWorker":28}],27:[function(U,D,y){"use strict";var o=U("../utils"),d=U("./GenericWorker");function g(p){d.call(this,"DataWorker");var v=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,p.then(function(M){v.dataIsReady=!0,v.data=M,v.max=M&&M.length||0,v.type=o.getTypeOf(M),v.isPaused||v._tickAndRepeat()},function(M){v.error(M)})}o.inherits(g,d),g.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this.data=null},g.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},g.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},g.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var p=null,v=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":p=this.data.substring(this.index,v);break;case"uint8array":p=this.data.subarray(this.index,v);break;case"array":case"nodebuffer":p=this.data.slice(this.index,v)}return this.index=v,this.push({data:p,meta:{percent:this.max?this.index/this.max*100:0}})},D.exports=g},{"../utils":32,"./GenericWorker":28}],28:[function(U,D,y){"use strict";function o(d){this.name=d||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(d){this.emit("data",d)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(d){this.emit("error",d)}return!0},error:function(d){return!this.isFinished&&(this.isPaused?this.generatedError=d:(this.isFinished=!0,this.emit("error",d),this.previous&&this.previous.error(d),this.cleanUp()),!0)},on:function(d,g){return this._listeners[d].push(g),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(d,g){if(this._listeners[d])for(var p=0;p<this._listeners[d].length;p++)this._listeners[d][p].call(this,g)},pipe:function(d){return d.registerPrevious(this)},registerPrevious:function(d){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=d.streamInfo,this.mergeStreamInfo(),this.previous=d;var g=this;return d.on("data",function(p){g.processChunk(p)}),d.on("end",function(){g.end()}),d.on("error",function(p){g.error(p)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var d=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),d=!0),this.previous&&this.previous.resume(),!d},flush:function(){},processChunk:function(d){this.push(d)},withStreamInfo:function(d,g){return this.extraStreamInfo[d]=g,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var d in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,d)&&(this.streamInfo[d]=this.extraStreamInfo[d])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var d="Worker "+this.name;return this.previous?this.previous+" -> "+d:d}},D.exports=o},{}],29:[function(U,D,y){"use strict";var o=U("../utils"),d=U("./ConvertWorker"),g=U("./GenericWorker"),p=U("../base64"),v=U("../support"),M=U("../external"),T=null;if(v.nodestream)try{T=U("../nodejs/NodejsStreamOutputAdapter")}catch(N){}function P(N,V,J){var W=V;switch(V){case"blob":case"arraybuffer":W="uint8array";break;case"base64":W="string"}try{this._internalType=W,this._outputType=V,this._mimeType=J,o.checkSupport(W),this._worker=N.pipe(new d(W)),N.lock()}catch(re){this._worker=new g("error"),this._worker.error(re)}}P.prototype={accumulate:function(N){return function I(N,V){return new M.Promise(function(J,W){var re=[],ce=N._internalType,ie=N._outputType,ae=N._mimeType;N.on("data",function(we,Me){re.push(we),V&&V(Me)}).on("error",function(we){re=[],W(we)}).on("end",function(){try{var we=function(Me,Pe,Ve){switch(Me){case"blob":return o.newBlob(o.transformTo("arraybuffer",Pe),Ve);case"base64":return p.encode(Pe);default:return o.transformTo(Me,Pe)}}(ie,function(Me,Pe){var Ve,le=0,st=null,We=0;for(Ve=0;Ve<Pe.length;Ve++)We+=Pe[Ve].length;switch(Me){case"string":return Pe.join("");case"array":return Array.prototype.concat.apply([],Pe);case"uint8array":for(st=new Uint8Array(We),Ve=0;Ve<Pe.length;Ve++)st.set(Pe[Ve],le),le+=Pe[Ve].length;return st;case"nodebuffer":return Buffer.concat(Pe);default:throw new Error("concat : unsupported type '"+Me+"'")}}(ce,re),ae);J(we)}catch(Me){W(Me)}re=[]}).resume()})}(this,N)},on:function(N,V){var J=this;return this._worker.on(N,"data"===N?function(W){V.call(J,W.data,W.meta)}:function(){o.delay(V,arguments,J)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(N){if(o.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new T(this,{objectMode:"nodebuffer"!==this._outputType},N)}},D.exports=P},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(U,D,y){"use strict";if(y.base64=!0,y.array=!0,y.string=!0,y.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,y.nodebuffer="undefined"!=typeof Buffer,y.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)y.blob=!1;else{var o=new ArrayBuffer(0);try{y.blob=0===new Blob([o],{type:"application/zip"}).size}catch(g){try{var d=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);d.append(o),y.blob=0===d.getBlob("application/zip").size}catch(p){y.blob=!1}}}try{y.nodestream=!!U("readable-stream").Readable}catch(g){y.nodestream=!1}},{"readable-stream":16}],31:[function(U,D,y){"use strict";for(var o=U("./utils"),d=U("./support"),g=U("./nodejsUtils"),p=U("./stream/GenericWorker"),v=new Array(256),M=0;M<256;M++)v[M]=252<=M?6:248<=M?5:240<=M?4:224<=M?3:192<=M?2:1;function T(){p.call(this,"utf-8 decode"),this.leftOver=null}function I(){p.call(this,"utf-8 encode")}v[254]=v[254]=1,y.utf8encode=function(P){return d.nodebuffer?g.newBufferFrom(P,"utf-8"):function(N){var V,J,W,re,ce,ie=N.length,ae=0;for(re=0;re<ie;re++)55296==(64512&(J=N.charCodeAt(re)))&&re+1<ie&&56320==(64512&(W=N.charCodeAt(re+1)))&&(J=65536+(J-55296<<10)+(W-56320),re++),ae+=J<128?1:J<2048?2:J<65536?3:4;for(V=d.uint8array?new Uint8Array(ae):new Array(ae),re=ce=0;ce<ae;re++)55296==(64512&(J=N.charCodeAt(re)))&&re+1<ie&&56320==(64512&(W=N.charCodeAt(re+1)))&&(J=65536+(J-55296<<10)+(W-56320),re++),J<128?V[ce++]=J:(J<2048?V[ce++]=192|J>>>6:(J<65536?V[ce++]=224|J>>>12:(V[ce++]=240|J>>>18,V[ce++]=128|J>>>12&63),V[ce++]=128|J>>>6&63),V[ce++]=128|63&J);return V}(P)},y.utf8decode=function(P){return d.nodebuffer?o.transformTo("nodebuffer",P).toString("utf-8"):function(N){var V,J,W,re,ce=N.length,ie=new Array(2*ce);for(V=J=0;V<ce;)if((W=N[V++])<128)ie[J++]=W;else if(4<(re=v[W]))ie[J++]=65533,V+=re-1;else{for(W&=2===re?31:3===re?15:7;1<re&&V<ce;)W=W<<6|63&N[V++],re--;1<re?ie[J++]=65533:W<65536?ie[J++]=W:(ie[J++]=55296|(W-=65536)>>10&1023,ie[J++]=56320|1023&W)}return ie.length!==J&&(ie.subarray?ie=ie.subarray(0,J):ie.length=J),o.applyFromCharCode(ie)}(P=o.transformTo(d.uint8array?"uint8array":"array",P))},o.inherits(T,p),T.prototype.processChunk=function(P){var N=o.transformTo(d.uint8array?"uint8array":"array",P.data);if(this.leftOver&&this.leftOver.length){if(d.uint8array){var V=N;(N=new Uint8Array(V.length+this.leftOver.length)).set(this.leftOver,0),N.set(V,this.leftOver.length)}else N=this.leftOver.concat(N);this.leftOver=null}var J=function(re,ce){var ie;for((ce=ce||re.length)>re.length&&(ce=re.length),ie=ce-1;0<=ie&&128==(192&re[ie]);)ie--;return ie<0||0===ie?ce:ie+v[re[ie]]>ce?ie:ce}(N),W=N;J!==N.length&&(d.uint8array?(W=N.subarray(0,J),this.leftOver=N.subarray(J,N.length)):(W=N.slice(0,J),this.leftOver=N.slice(J,N.length))),this.push({data:y.utf8decode(W),meta:P.meta})},T.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:y.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},y.Utf8DecodeWorker=T,o.inherits(I,p),I.prototype.processChunk=function(P){this.push({data:y.utf8encode(P.data),meta:P.meta})},y.Utf8EncodeWorker=I},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(U,D,y){"use strict";var o=U("./support"),d=U("./base64"),g=U("./nodejsUtils"),p=U("./external");function v(V){return V}function M(V,J){for(var W=0;W<V.length;++W)J[W]=255&V.charCodeAt(W);return J}U("setimmediate"),y.newBlob=function(V,J){y.checkSupport("blob");try{return new Blob([V],{type:J})}catch(re){try{var W=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return W.append(V),W.getBlob(J)}catch(ce){throw new Error("Bug : can't construct the Blob.")}}};var T={stringifyByChunk:function(V,J,W){var re=[],ce=0,ie=V.length;if(ie<=W)return String.fromCharCode.apply(null,V);for(;ce<ie;)re.push(String.fromCharCode.apply(null,"array"===J||"nodebuffer"===J?V.slice(ce,Math.min(ce+W,ie)):V.subarray(ce,Math.min(ce+W,ie)))),ce+=W;return re.join("")},stringifyByChar:function(V){for(var J="",W=0;W<V.length;W++)J+=String.fromCharCode(V[W]);return J},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(V){return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&1===String.fromCharCode.apply(null,g.allocBuffer(1)).length}catch(V){return!1}}()}};function I(V){var J=65536,W=y.getTypeOf(V),re=!0;if("uint8array"===W?re=T.applyCanBeUsed.uint8array:"nodebuffer"===W&&(re=T.applyCanBeUsed.nodebuffer),re)for(;1<J;)try{return T.stringifyByChunk(V,W,J)}catch(ce){J=Math.floor(J/2)}return T.stringifyByChar(V)}function P(V,J){for(var W=0;W<V.length;W++)J[W]=V[W];return J}y.applyFromCharCode=I;var N={};N.string={string:v,array:function(V){return M(V,new Array(V.length))},arraybuffer:function(V){return N.string.uint8array(V).buffer},uint8array:function(V){return M(V,new Uint8Array(V.length))},nodebuffer:function(V){return M(V,g.allocBuffer(V.length))}},N.array={string:I,array:v,arraybuffer:function(V){return new Uint8Array(V).buffer},uint8array:function(V){return new Uint8Array(V)},nodebuffer:function(V){return g.newBufferFrom(V)}},N.arraybuffer={string:function(V){return I(new Uint8Array(V))},array:function(V){return P(new Uint8Array(V),new Array(V.byteLength))},arraybuffer:v,uint8array:function(V){return new Uint8Array(V)},nodebuffer:function(V){return g.newBufferFrom(new Uint8Array(V))}},N.uint8array={string:I,array:function(V){return P(V,new Array(V.length))},arraybuffer:function(V){return V.buffer},uint8array:v,nodebuffer:function(V){return g.newBufferFrom(V)}},N.nodebuffer={string:I,array:function(V){return P(V,new Array(V.length))},arraybuffer:function(V){return N.nodebuffer.uint8array(V).buffer},uint8array:function(V){return P(V,new Uint8Array(V.length))},nodebuffer:v},y.transformTo=function(V,J){if(J=J||"",!V)return J;y.checkSupport(V);var W=y.getTypeOf(J);return N[W][V](J)},y.resolve=function(V){for(var J=V.split("/"),W=[],re=0;re<J.length;re++){var ce=J[re];"."===ce||""===ce&&0!==re&&re!==J.length-1||(".."===ce?W.pop():W.push(ce))}return W.join("/")},y.getTypeOf=function(V){return"string"==typeof V?"string":"[object Array]"===Object.prototype.toString.call(V)?"array":o.nodebuffer&&g.isBuffer(V)?"nodebuffer":o.uint8array&&V instanceof Uint8Array?"uint8array":o.arraybuffer&&V instanceof ArrayBuffer?"arraybuffer":void 0},y.checkSupport=function(V){if(!o[V.toLowerCase()])throw new Error(V+" is not supported by this platform")},y.MAX_VALUE_16BITS=65535,y.MAX_VALUE_32BITS=-1,y.pretty=function(V){var J,W,re="";for(W=0;W<(V||"").length;W++)re+="\\x"+((J=V.charCodeAt(W))<16?"0":"")+J.toString(16).toUpperCase();return re},y.delay=function(V,J,W){setImmediate(function(){V.apply(W||null,J||[])})},y.inherits=function(V,J){function W(){}W.prototype=J.prototype,V.prototype=new W},y.extend=function(){var V,J,W={};for(V=0;V<arguments.length;V++)for(J in arguments[V])Object.prototype.hasOwnProperty.call(arguments[V],J)&&void 0===W[J]&&(W[J]=arguments[V][J]);return W},y.prepareContent=function(V,J,W,re,ce){return p.Promise.resolve(J).then(function(ie){return o.blob&&(ie instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(ie)))&&"undefined"!=typeof FileReader?new p.Promise(function(ae,we){var Me=new FileReader;Me.onload=function(Pe){ae(Pe.target.result)},Me.onerror=function(Pe){we(Pe.target.error)},Me.readAsArrayBuffer(ie)}):ie}).then(function(ie){var we,ae=y.getTypeOf(ie);return ae?("arraybuffer"===ae?ie=y.transformTo("uint8array",ie):"string"===ae&&(ce?ie=d.decode(ie):W&&!0!==re&&(ie=M(we=ie,o.uint8array?new Uint8Array(we.length):new Array(we.length)))),ie):p.Promise.reject(new Error("Can't read the data of '"+V+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(U,D,y){"use strict";var o=U("./reader/readerFor"),d=U("./utils"),g=U("./signature"),p=U("./zipEntry"),v=U("./support");function M(T){this.files=[],this.loadOptions=T}M.prototype={checkSignature:function(T){if(!this.reader.readAndCheckSignature(T)){this.reader.index-=4;var I=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+d.pretty(I)+", expected "+d.pretty(T)+")")}},isSignature:function(T,I){var P=this.reader.index;this.reader.setIndex(T);var N=this.reader.readString(4)===I;return this.reader.setIndex(P),N},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var T=this.reader.readData(this.zipCommentLength),P=d.transformTo(v.uint8array?"uint8array":"array",T);this.zipComment=this.loadOptions.decodeFileName(P)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var T,I,P,N=this.zip64EndOfCentralSize-44;0<N;)T=this.reader.readInt(2),I=this.reader.readInt(4),P=this.reader.readData(I),this.zip64ExtensibleData[T]={id:T,length:I,value:P}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var T,I;for(T=0;T<this.files.length;T++)this.reader.setIndex((I=this.files[T]).localHeaderOffset),this.checkSignature(g.LOCAL_FILE_HEADER),I.readLocalPart(this.reader),I.handleUTF8(),I.processAttributes()},readCentralDir:function(){var T;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(g.CENTRAL_FILE_HEADER);)(T=new p({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(T);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var T=this.reader.lastIndexOfSignature(g.CENTRAL_DIRECTORY_END);if(T<0)throw this.isSignature(0,g.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(T);var I=T;if(this.checkSignature(g.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===d.MAX_VALUE_16BITS||this.diskWithCentralDirStart===d.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===d.MAX_VALUE_16BITS||this.centralDirRecords===d.MAX_VALUE_16BITS||this.centralDirSize===d.MAX_VALUE_32BITS||this.centralDirOffset===d.MAX_VALUE_32BITS){if(this.zip64=!0,(T=this.reader.lastIndexOfSignature(g.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(T),this.checkSignature(g.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,g.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(g.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(g.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var P=this.centralDirOffset+this.centralDirSize;this.zip64&&(P+=20,P+=12+this.zip64EndOfCentralSize);var N=I-P;if(0<N)this.isSignature(I,g.CENTRAL_FILE_HEADER)||(this.reader.zero=N);else if(N<0)throw new Error("Corrupted zip: missing "+Math.abs(N)+" bytes.")},prepareReader:function(T){this.reader=o(T)},load:function(T){this.prepareReader(T),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},D.exports=M},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(U,D,y){"use strict";var o=U("./reader/readerFor"),d=U("./utils"),g=U("./compressedObject"),p=U("./crc32"),v=U("./utf8"),M=U("./compressions"),T=U("./support");function I(P,N){this.options=P,this.loadOptions=N}I.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(P){var N,V;if(P.skip(22),this.fileNameLength=P.readInt(2),V=P.readInt(2),this.fileName=P.readData(this.fileNameLength),P.skip(V),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(N=function(J){for(var W in M)if(Object.prototype.hasOwnProperty.call(M,W)&&M[W].magic===J)return M[W];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+d.pretty(this.compressionMethod)+" unknown (inner file : "+d.transformTo("string",this.fileName)+")");this.decompressed=new g(this.compressedSize,this.uncompressedSize,this.crc32,N,P.readData(this.compressedSize))},readCentralPart:function(P){this.versionMadeBy=P.readInt(2),P.skip(2),this.bitFlag=P.readInt(2),this.compressionMethod=P.readString(2),this.date=P.readDate(),this.crc32=P.readInt(4),this.compressedSize=P.readInt(4),this.uncompressedSize=P.readInt(4);var N=P.readInt(2);if(this.extraFieldsLength=P.readInt(2),this.fileCommentLength=P.readInt(2),this.diskNumberStart=P.readInt(2),this.internalFileAttributes=P.readInt(2),this.externalFileAttributes=P.readInt(4),this.localHeaderOffset=P.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");P.skip(N),this.readExtraFields(P),this.parseZIP64ExtraField(P),this.fileComment=P.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var P=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==P&&(this.dosPermissions=63&this.externalFileAttributes),3==P&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var P=o(this.extraFields[1].value);this.uncompressedSize===d.MAX_VALUE_32BITS&&(this.uncompressedSize=P.readInt(8)),this.compressedSize===d.MAX_VALUE_32BITS&&(this.compressedSize=P.readInt(8)),this.localHeaderOffset===d.MAX_VALUE_32BITS&&(this.localHeaderOffset=P.readInt(8)),this.diskNumberStart===d.MAX_VALUE_32BITS&&(this.diskNumberStart=P.readInt(4))}},readExtraFields:function(P){var N,V,J,W=P.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});P.index+4<W;)N=P.readInt(2),V=P.readInt(2),J=P.readData(V),this.extraFields[N]={id:N,length:V,value:J};P.setIndex(W)},handleUTF8:function(){var P=T.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=v.utf8decode(this.fileName),this.fileCommentStr=v.utf8decode(this.fileComment);else{var N=this.findExtraFieldUnicodePath();if(null!==N)this.fileNameStr=N;else{var V=d.transformTo(P,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(V)}var J=this.findExtraFieldUnicodeComment();if(null!==J)this.fileCommentStr=J;else{var W=d.transformTo(P,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(W)}}},findExtraFieldUnicodePath:function(){var P=this.extraFields[28789];if(P){var N=o(P.value);return 1!==N.readInt(1)||p(this.fileName)!==N.readInt(4)?null:v.utf8decode(N.readData(P.length-5))}return null},findExtraFieldUnicodeComment:function(){var P=this.extraFields[25461];if(P){var N=o(P.value);return 1!==N.readInt(1)||p(this.fileComment)!==N.readInt(4)?null:v.utf8decode(N.readData(P.length-5))}return null}},D.exports=I},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(U,D,y){"use strict";function o(N,V,J){this.name=N,this.dir=J.dir,this.date=J.date,this.comment=J.comment,this.unixPermissions=J.unixPermissions,this.dosPermissions=J.dosPermissions,this._data=V,this._dataBinary=J.binary,this.options={compression:J.compression,compressionOptions:J.compressionOptions}}var d=U("./stream/StreamHelper"),g=U("./stream/DataWorker"),p=U("./utf8"),v=U("./compressedObject"),M=U("./stream/GenericWorker");o.prototype={internalStream:function(N){var V=null,J="string";try{if(!N)throw new Error("No output type specified.");var W="string"===(J=N.toLowerCase())||"text"===J;"binarystring"!==J&&"text"!==J||(J="string"),V=this._decompressWorker();var re=!this._dataBinary;re&&!W&&(V=V.pipe(new p.Utf8EncodeWorker)),!re&&W&&(V=V.pipe(new p.Utf8DecodeWorker))}catch(ce){(V=new M("error")).error(ce)}return new d(V,J,"")},async:function(N,V){return this.internalStream(N).accumulate(V)},nodeStream:function(N,V){return this.internalStream(N||"nodebuffer").toNodejsStream(V)},_compressWorker:function(N,V){if(this._data instanceof v&&this._data.compression.magic===N.magic)return this._data.getCompressedWorker();var J=this._decompressWorker();return this._dataBinary||(J=J.pipe(new p.Utf8EncodeWorker)),v.createWorkerFrom(J,N,V)},_decompressWorker:function(){return this._data instanceof v?this._data.getContentWorker():this._data instanceof M?this._data:new g(this._data)}};for(var T=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],I=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},P=0;P<T.length;P++)o.prototype[T[P]]=I;D.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(U,D,y){(function(o){"use strict";var d,g,p=o.MutationObserver||o.WebKitMutationObserver;if(p){var v=0,M=new p(N),T=o.document.createTextNode("");M.observe(T,{characterData:!0}),d=function(){T.data=v=++v%2}}else if(o.setImmediate||void 0===o.MessageChannel)d="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var V=o.document.createElement("script");V.onreadystatechange=function(){N(),V.onreadystatechange=null,V.parentNode.removeChild(V),V=null},o.document.documentElement.appendChild(V)}:function(){setTimeout(N,0)};else{var I=new o.MessageChannel;I.port1.onmessage=N,d=function(){I.port2.postMessage(0)}}var P=[];function N(){var V,J;g=!0;for(var W=P.length;W;){for(J=P,P=[],V=-1;++V<W;)J[V]();W=P.length}g=!1}D.exports=function(V){1!==P.push(V)||g||d()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(U,D,y){"use strict";var o=U("immediate");function d(){}var g={},p=["REJECTED"],v=["FULFILLED"],M=["PENDING"];function T(W){if("function"!=typeof W)throw new TypeError("resolver must be a function");this.state=M,this.queue=[],this.outcome=void 0,W!==d&&V(this,W)}function I(W,re,ce){this.promise=W,"function"==typeof re&&(this.onFulfilled=re,this.callFulfilled=this.otherCallFulfilled),"function"==typeof ce&&(this.onRejected=ce,this.callRejected=this.otherCallRejected)}function P(W,re,ce){o(function(){var ie;try{ie=re(ce)}catch(ae){return g.reject(W,ae)}ie===W?g.reject(W,new TypeError("Cannot resolve promise with itself")):g.resolve(W,ie)})}function N(W){var re=W&&W.then;if(W&&("object"==typeof W||"function"==typeof W)&&"function"==typeof re)return function(){re.apply(W,arguments)}}function V(W,re){var ce=!1;function ie(Me){ce||(ce=!0,g.reject(W,Me))}function ae(Me){ce||(ce=!0,g.resolve(W,Me))}var we=J(function(){re(ae,ie)});"error"===we.status&&ie(we.value)}function J(W,re){var ce={};try{ce.value=W(re),ce.status="success"}catch(ie){ce.status="error",ce.value=ie}return ce}(D.exports=T).prototype.finally=function(W){if("function"!=typeof W)return this;var re=this.constructor;return this.then(function(ce){return re.resolve(W()).then(function(){return ce})},function(ce){return re.resolve(W()).then(function(){throw ce})})},T.prototype.catch=function(W){return this.then(null,W)},T.prototype.then=function(W,re){if("function"!=typeof W&&this.state===v||"function"!=typeof re&&this.state===p)return this;var ce=new this.constructor(d);return this.state!==M?P(ce,this.state===v?W:re,this.outcome):this.queue.push(new I(ce,W,re)),ce},I.prototype.callFulfilled=function(W){g.resolve(this.promise,W)},I.prototype.otherCallFulfilled=function(W){P(this.promise,this.onFulfilled,W)},I.prototype.callRejected=function(W){g.reject(this.promise,W)},I.prototype.otherCallRejected=function(W){P(this.promise,this.onRejected,W)},g.resolve=function(W,re){var ce=J(N,re);if("error"===ce.status)return g.reject(W,ce.value);var ie=ce.value;if(ie)V(W,ie);else{W.state=v,W.outcome=re;for(var ae=-1,we=W.queue.length;++ae<we;)W.queue[ae].callFulfilled(re)}return W},g.reject=function(W,re){W.state=p,W.outcome=re;for(var ce=-1,ie=W.queue.length;++ce<ie;)W.queue[ce].callRejected(re);return W},T.resolve=function(W){return W instanceof this?W:g.resolve(new this(d),W)},T.reject=function(W){var re=new this(d);return g.reject(re,W)},T.all=function(W){var re=this;if("[object Array]"!==Object.prototype.toString.call(W))return this.reject(new TypeError("must be an array"));var ce=W.length,ie=!1;if(!ce)return this.resolve([]);for(var ae=new Array(ce),we=0,Me=-1,Pe=new this(d);++Me<ce;)Ve(W[Me],Me);return Pe;function Ve(le,st){re.resolve(le).then(function(We){ae[st]=We,++we!==ce||ie||(ie=!0,g.resolve(Pe,ae))},function(We){ie||(ie=!0,g.reject(Pe,We))})}},T.race=function(W){if("[object Array]"!==Object.prototype.toString.call(W))return this.reject(new TypeError("must be an array"));var ce=W.length,ie=!1;if(!ce)return this.resolve([]);for(var ae=-1,we=new this(d);++ae<ce;)this.resolve(W[ae]).then(function(Pe){ie||(ie=!0,g.resolve(we,Pe))},function(Pe){ie||(ie=!0,g.reject(we,Pe))});return we}},{immediate:36}],38:[function(U,D,y){"use strict";var o={};(0,U("./lib/utils/common").assign)(o,U("./lib/deflate"),U("./lib/inflate"),U("./lib/zlib/constants")),D.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(U,D,y){"use strict";var o=U("./zlib/deflate"),d=U("./utils/common"),g=U("./utils/strings"),p=U("./zlib/messages"),v=U("./zlib/zstream"),M=Object.prototype.toString;function V(W){if(!(this instanceof V))return new V(W);this.options=d.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},W||{});var re=this.options;re.raw&&0<re.windowBits?re.windowBits=-re.windowBits:re.gzip&&0<re.windowBits&&re.windowBits<16&&(re.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var ce=o.deflateInit2(this.strm,re.level,re.method,re.windowBits,re.memLevel,re.strategy);if(0!==ce)throw new Error(p[ce]);if(re.header&&o.deflateSetHeader(this.strm,re.header),re.dictionary){var ie;if(ie="string"==typeof re.dictionary?g.string2buf(re.dictionary):"[object ArrayBuffer]"===M.call(re.dictionary)?new Uint8Array(re.dictionary):re.dictionary,0!==(ce=o.deflateSetDictionary(this.strm,ie)))throw new Error(p[ce]);this._dict_set=!0}}function J(W,re){var ce=new V(re);if(ce.push(W,!0),ce.err)throw ce.msg||p[ce.err];return ce.result}V.prototype.push=function(W,re){var ce,ie,ae=this.strm,we=this.options.chunkSize;if(this.ended)return!1;ie=re===~~re?re:!0===re?4:0,ae.input="string"==typeof W?g.string2buf(W):"[object ArrayBuffer]"===M.call(W)?new Uint8Array(W):W,ae.next_in=0,ae.avail_in=ae.input.length;do{if(0===ae.avail_out&&(ae.output=new d.Buf8(we),ae.next_out=0,ae.avail_out=we),1!==(ce=o.deflate(ae,ie))&&0!==ce)return this.onEnd(ce),!(this.ended=!0);0!==ae.avail_out&&(0!==ae.avail_in||4!==ie&&2!==ie)||this.onData("string"===this.options.to?g.buf2binstring(d.shrinkBuf(ae.output,ae.next_out)):d.shrinkBuf(ae.output,ae.next_out))}while((0<ae.avail_in||0===ae.avail_out)&&1!==ce);return 4===ie?(ce=o.deflateEnd(this.strm),this.onEnd(ce),this.ended=!0,0===ce):2!==ie||(this.onEnd(0),!(ae.avail_out=0))},V.prototype.onData=function(W){this.chunks.push(W)},V.prototype.onEnd=function(W){0===W&&(this.result="string"===this.options.to?this.chunks.join(""):d.flattenChunks(this.chunks)),this.chunks=[],this.err=W,this.msg=this.strm.msg},y.Deflate=V,y.deflate=J,y.deflateRaw=function(W,re){return(re=re||{}).raw=!0,J(W,re)},y.gzip=function(W,re){return(re=re||{}).gzip=!0,J(W,re)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(U,D,y){"use strict";var o=U("./zlib/inflate"),d=U("./utils/common"),g=U("./utils/strings"),p=U("./zlib/constants"),v=U("./zlib/messages"),M=U("./zlib/zstream"),T=U("./zlib/gzheader"),I=Object.prototype.toString;function P(V){if(!(this instanceof P))return new P(V);this.options=d.assign({chunkSize:16384,windowBits:0,to:""},V||{});var J=this.options;J.raw&&0<=J.windowBits&&J.windowBits<16&&(J.windowBits=-J.windowBits,0===J.windowBits&&(J.windowBits=-15)),!(0<=J.windowBits&&J.windowBits<16)||V&&V.windowBits||(J.windowBits+=32),15<J.windowBits&&J.windowBits<48&&0==(15&J.windowBits)&&(J.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new M,this.strm.avail_out=0;var W=o.inflateInit2(this.strm,J.windowBits);if(W!==p.Z_OK)throw new Error(v[W]);this.header=new T,o.inflateGetHeader(this.strm,this.header)}function N(V,J){var W=new P(J);if(W.push(V,!0),W.err)throw W.msg||v[W.err];return W.result}P.prototype.push=function(V,J){var W,re,ce,ie,ae,we,Me=this.strm,Pe=this.options.chunkSize,Ve=this.options.dictionary,le=!1;if(this.ended)return!1;re=J===~~J?J:!0===J?p.Z_FINISH:p.Z_NO_FLUSH,Me.input="string"==typeof V?g.binstring2buf(V):"[object ArrayBuffer]"===I.call(V)?new Uint8Array(V):V,Me.next_in=0,Me.avail_in=Me.input.length;do{if(0===Me.avail_out&&(Me.output=new d.Buf8(Pe),Me.next_out=0,Me.avail_out=Pe),(W=o.inflate(Me,p.Z_NO_FLUSH))===p.Z_NEED_DICT&&Ve&&(we="string"==typeof Ve?g.string2buf(Ve):"[object ArrayBuffer]"===I.call(Ve)?new Uint8Array(Ve):Ve,W=o.inflateSetDictionary(this.strm,we)),W===p.Z_BUF_ERROR&&!0===le&&(W=p.Z_OK,le=!1),W!==p.Z_STREAM_END&&W!==p.Z_OK)return this.onEnd(W),!(this.ended=!0);Me.next_out&&(0!==Me.avail_out&&W!==p.Z_STREAM_END&&(0!==Me.avail_in||re!==p.Z_FINISH&&re!==p.Z_SYNC_FLUSH)||("string"===this.options.to?(ce=g.utf8border(Me.output,Me.next_out),ie=Me.next_out-ce,ae=g.buf2string(Me.output,ce),Me.next_out=ie,Me.avail_out=Pe-ie,ie&&d.arraySet(Me.output,Me.output,ce,ie,0),this.onData(ae)):this.onData(d.shrinkBuf(Me.output,Me.next_out)))),0===Me.avail_in&&0===Me.avail_out&&(le=!0)}while((0<Me.avail_in||0===Me.avail_out)&&W!==p.Z_STREAM_END);return W===p.Z_STREAM_END&&(re=p.Z_FINISH),re===p.Z_FINISH?(W=o.inflateEnd(this.strm),this.onEnd(W),this.ended=!0,W===p.Z_OK):re!==p.Z_SYNC_FLUSH||(this.onEnd(p.Z_OK),!(Me.avail_out=0))},P.prototype.onData=function(V){this.chunks.push(V)},P.prototype.onEnd=function(V){V===p.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):d.flattenChunks(this.chunks)),this.chunks=[],this.err=V,this.msg=this.strm.msg},y.Inflate=P,y.inflate=N,y.inflateRaw=function(V,J){return(J=J||{}).raw=!0,N(V,J)},y.ungzip=N},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(U,D,y){"use strict";var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;y.assign=function(p){for(var v=Array.prototype.slice.call(arguments,1);v.length;){var M=v.shift();if(M){if("object"!=typeof M)throw new TypeError(M+"must be non-object");for(var T in M)M.hasOwnProperty(T)&&(p[T]=M[T])}}return p},y.shrinkBuf=function(p,v){return p.length===v?p:p.subarray?p.subarray(0,v):(p.length=v,p)};var d={arraySet:function(p,v,M,T,I){if(v.subarray&&p.subarray)p.set(v.subarray(M,M+T),I);else for(var P=0;P<T;P++)p[I+P]=v[M+P]},flattenChunks:function(p){var v,M,T,I,P,N;for(v=T=0,M=p.length;v<M;v++)T+=p[v].length;for(N=new Uint8Array(T),v=I=0,M=p.length;v<M;v++)N.set(P=p[v],I),I+=P.length;return N}},g={arraySet:function(p,v,M,T,I){for(var P=0;P<T;P++)p[I+P]=v[M+P]},flattenChunks:function(p){return[].concat.apply([],p)}};y.setTyped=function(p){p?(y.Buf8=Uint8Array,y.Buf16=Uint16Array,y.Buf32=Int32Array,y.assign(y,d)):(y.Buf8=Array,y.Buf16=Array,y.Buf32=Array,y.assign(y,g))},y.setTyped(o)},{}],42:[function(U,D,y){"use strict";var o=U("./common"),d=!0,g=!0;try{String.fromCharCode.apply(null,[0])}catch(T){d=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(T){g=!1}for(var p=new o.Buf8(256),v=0;v<256;v++)p[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;function M(T,I){if(I<65537&&(T.subarray&&g||!T.subarray&&d))return String.fromCharCode.apply(null,o.shrinkBuf(T,I));for(var P="",N=0;N<I;N++)P+=String.fromCharCode(T[N]);return P}p[254]=p[254]=1,y.string2buf=function(T){var I,P,N,V,J,W=T.length,re=0;for(V=0;V<W;V++)55296==(64512&(P=T.charCodeAt(V)))&&V+1<W&&56320==(64512&(N=T.charCodeAt(V+1)))&&(P=65536+(P-55296<<10)+(N-56320),V++),re+=P<128?1:P<2048?2:P<65536?3:4;for(I=new o.Buf8(re),V=J=0;J<re;V++)55296==(64512&(P=T.charCodeAt(V)))&&V+1<W&&56320==(64512&(N=T.charCodeAt(V+1)))&&(P=65536+(P-55296<<10)+(N-56320),V++),P<128?I[J++]=P:(P<2048?I[J++]=192|P>>>6:(P<65536?I[J++]=224|P>>>12:(I[J++]=240|P>>>18,I[J++]=128|P>>>12&63),I[J++]=128|P>>>6&63),I[J++]=128|63&P);return I},y.buf2binstring=function(T){return M(T,T.length)},y.binstring2buf=function(T){for(var I=new o.Buf8(T.length),P=0,N=I.length;P<N;P++)I[P]=T.charCodeAt(P);return I},y.buf2string=function(T,I){var P,N,V,J,W=I||T.length,re=new Array(2*W);for(P=N=0;P<W;)if((V=T[P++])<128)re[N++]=V;else if(4<(J=p[V]))re[N++]=65533,P+=J-1;else{for(V&=2===J?31:3===J?15:7;1<J&&P<W;)V=V<<6|63&T[P++],J--;1<J?re[N++]=65533:V<65536?re[N++]=V:(re[N++]=55296|(V-=65536)>>10&1023,re[N++]=56320|1023&V)}return M(re,N)},y.utf8border=function(T,I){var P;for((I=I||T.length)>T.length&&(I=T.length),P=I-1;0<=P&&128==(192&T[P]);)P--;return P<0||0===P?I:P+p[T[P]]>I?P:I}},{"./common":41}],43:[function(U,D,y){"use strict";D.exports=function(o,d,g,p){for(var v=65535&o|0,M=o>>>16&65535|0,T=0;0!==g;){for(g-=T=2e3<g?2e3:g;M=M+(v=v+d[p++]|0)|0,--T;);v%=65521,M%=65521}return v|M<<16|0}},{}],44:[function(U,D,y){"use strict";D.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(U,D,y){"use strict";var o=function(){for(var d,g=[],p=0;p<256;p++){d=p;for(var v=0;v<8;v++)d=1&d?3988292384^d>>>1:d>>>1;g[p]=d}return g}();D.exports=function(d,g,p,v){var M=o,T=v+p;d^=-1;for(var I=v;I<T;I++)d=d>>>8^M[255&(d^g[I])];return-1^d}},{}],46:[function(U,D,y){"use strict";var o,d=U("../utils/common"),g=U("./trees"),p=U("./adler32"),v=U("./crc32"),M=U("./messages"),N=-2,le=258,st=262;function Zn(Le,kn){return Le.msg=M[kn],kn}function jt(Le){return(Le<<1)-(4<Le?9:0)}function _n(Le){for(var kn=Le.length;0<=--kn;)Le[kn]=0}function Dt(Le){var kn=Le.state,dn=kn.pending;dn>Le.avail_out&&(dn=Le.avail_out),0!==dn&&(d.arraySet(Le.output,kn.pending_buf,kn.pending_out,dn,Le.next_out),Le.next_out+=dn,kn.pending_out+=dn,Le.total_out+=dn,Le.avail_out-=dn,kn.pending-=dn,0===kn.pending&&(kn.pending_out=0))}function It(Le,kn){g._tr_flush_block(Le,0<=Le.block_start?Le.block_start:-1,Le.strstart-Le.block_start,kn),Le.block_start=Le.strstart,Dt(Le.strm)}function Yn(Le,kn){Le.pending_buf[Le.pending++]=kn}function ei(Le,kn){Le.pending_buf[Le.pending++]=kn>>>8&255,Le.pending_buf[Le.pending++]=255&kn}function Xt(Le,kn){var dn,lt,tt=Le.max_chain_length,Lt=Le.strstart,nn=Le.prev_length,Ln=Le.nice_match,rn=Le.strstart>Le.w_size-st?Le.strstart-(Le.w_size-st):0,ui=Le.window,ki=Le.w_mask,pi=Le.prev,ur=Le.strstart+le,Gs=ui[Lt+nn-1],wr=ui[Lt+nn];Le.prev_length>=Le.good_match&&(tt>>=2),Ln>Le.lookahead&&(Ln=Le.lookahead);do{if(ui[(dn=kn)+nn]===wr&&ui[dn+nn-1]===Gs&&ui[dn]===ui[Lt]&&ui[++dn]===ui[Lt+1]){Lt+=2,dn++;do{}while(ui[++Lt]===ui[++dn]&&ui[++Lt]===ui[++dn]&&ui[++Lt]===ui[++dn]&&ui[++Lt]===ui[++dn]&&ui[++Lt]===ui[++dn]&&ui[++Lt]===ui[++dn]&&ui[++Lt]===ui[++dn]&&ui[++Lt]===ui[++dn]&&Lt<ur);if(lt=le-(ur-Lt),Lt=ur-le,nn<lt){if(Le.match_start=kn,Ln<=(nn=lt))break;Gs=ui[Lt+nn-1],wr=ui[Lt+nn]}}}while((kn=pi[kn&ki])>rn&&0!=--tt);return nn<=Le.lookahead?nn:Le.lookahead}function pr(Le){var kn,dn,lt,tt,Lt,nn,Ln,rn,ui,ki,pi=Le.w_size;do{if(tt=Le.window_size-Le.lookahead-Le.strstart,Le.strstart>=pi+(pi-st)){for(d.arraySet(Le.window,Le.window,pi,pi,0),Le.match_start-=pi,Le.strstart-=pi,Le.block_start-=pi,kn=dn=Le.hash_size;lt=Le.head[--kn],Le.head[kn]=pi<=lt?lt-pi:0,--dn;);for(kn=dn=pi;lt=Le.prev[--kn],Le.prev[kn]=pi<=lt?lt-pi:0,--dn;);tt+=pi}if(0===Le.strm.avail_in)break;if(Ln=Le.window,rn=Le.strstart+Le.lookahead,ki=void 0,(ui=tt)<(ki=(nn=Le.strm).avail_in)&&(ki=ui),dn=0===ki?0:(nn.avail_in-=ki,d.arraySet(Ln,nn.input,nn.next_in,ki,rn),1===nn.state.wrap?nn.adler=p(nn.adler,Ln,ki,rn):2===nn.state.wrap&&(nn.adler=v(nn.adler,Ln,ki,rn)),nn.next_in+=ki,nn.total_in+=ki,ki),Le.lookahead+=dn,Le.lookahead+Le.insert>=3)for(Le.ins_h=Le.window[Lt=Le.strstart-Le.insert],Le.ins_h=(Le.ins_h<<Le.hash_shift^Le.window[Lt+1])&Le.hash_mask;Le.insert&&(Le.ins_h=(Le.ins_h<<Le.hash_shift^Le.window[Lt+3-1])&Le.hash_mask,Le.prev[Lt&Le.w_mask]=Le.head[Le.ins_h],Le.head[Le.ins_h]=Lt,Lt++,Le.insert--,!(Le.lookahead+Le.insert<3)););}while(Le.lookahead<st&&0!==Le.strm.avail_in)}function Li(Le,kn){for(var dn,lt;;){if(Le.lookahead<st){if(pr(Le),Le.lookahead<st&&0===kn)return 1;if(0===Le.lookahead)break}if(dn=0,Le.lookahead>=3&&(Le.ins_h=(Le.ins_h<<Le.hash_shift^Le.window[Le.strstart+3-1])&Le.hash_mask,dn=Le.prev[Le.strstart&Le.w_mask]=Le.head[Le.ins_h],Le.head[Le.ins_h]=Le.strstart),0!==dn&&Le.strstart-dn<=Le.w_size-st&&(Le.match_length=Xt(Le,dn)),Le.match_length>=3)if(lt=g._tr_tally(Le,Le.strstart-Le.match_start,Le.match_length-3),Le.lookahead-=Le.match_length,Le.match_length<=Le.max_lazy_match&&Le.lookahead>=3){for(Le.match_length--;Le.strstart++,Le.ins_h=(Le.ins_h<<Le.hash_shift^Le.window[Le.strstart+3-1])&Le.hash_mask,dn=Le.prev[Le.strstart&Le.w_mask]=Le.head[Le.ins_h],Le.head[Le.ins_h]=Le.strstart,0!=--Le.match_length;);Le.strstart++}else Le.strstart+=Le.match_length,Le.match_length=0,Le.ins_h=Le.window[Le.strstart],Le.ins_h=(Le.ins_h<<Le.hash_shift^Le.window[Le.strstart+1])&Le.hash_mask;else lt=g._tr_tally(Le,0,Le.window[Le.strstart]),Le.lookahead--,Le.strstart++;if(lt&&(It(Le,!1),0===Le.strm.avail_out))return 1}return Le.insert=Le.strstart<2?Le.strstart:2,4===kn?(It(Le,!0),0===Le.strm.avail_out?3:4):Le.last_lit&&(It(Le,!1),0===Le.strm.avail_out)?1:2}function Mn(Le,kn){for(var dn,lt,tt;;){if(Le.lookahead<st){if(pr(Le),Le.lookahead<st&&0===kn)return 1;if(0===Le.lookahead)break}if(dn=0,Le.lookahead>=3&&(Le.ins_h=(Le.ins_h<<Le.hash_shift^Le.window[Le.strstart+3-1])&Le.hash_mask,dn=Le.prev[Le.strstart&Le.w_mask]=Le.head[Le.ins_h],Le.head[Le.ins_h]=Le.strstart),Le.prev_length=Le.match_length,Le.prev_match=Le.match_start,Le.match_length=2,0!==dn&&Le.prev_length<Le.max_lazy_match&&Le.strstart-dn<=Le.w_size-st&&(Le.match_length=Xt(Le,dn),Le.match_length<=5&&(1===Le.strategy||3===Le.match_length&&4096<Le.strstart-Le.match_start)&&(Le.match_length=2)),Le.prev_length>=3&&Le.match_length<=Le.prev_length){for(tt=Le.strstart+Le.lookahead-3,lt=g._tr_tally(Le,Le.strstart-1-Le.prev_match,Le.prev_length-3),Le.lookahead-=Le.prev_length-1,Le.prev_length-=2;++Le.strstart<=tt&&(Le.ins_h=(Le.ins_h<<Le.hash_shift^Le.window[Le.strstart+3-1])&Le.hash_mask,dn=Le.prev[Le.strstart&Le.w_mask]=Le.head[Le.ins_h],Le.head[Le.ins_h]=Le.strstart),0!=--Le.prev_length;);if(Le.match_available=0,Le.match_length=2,Le.strstart++,lt&&(It(Le,!1),0===Le.strm.avail_out))return 1}else if(Le.match_available){if((lt=g._tr_tally(Le,0,Le.window[Le.strstart-1]))&&It(Le,!1),Le.strstart++,Le.lookahead--,0===Le.strm.avail_out)return 1}else Le.match_available=1,Le.strstart++,Le.lookahead--}return Le.match_available&&(lt=g._tr_tally(Le,0,Le.window[Le.strstart-1]),Le.match_available=0),Le.insert=Le.strstart<2?Le.strstart:2,4===kn?(It(Le,!0),0===Le.strm.avail_out?3:4):Le.last_lit&&(It(Le,!1),0===Le.strm.avail_out)?1:2}function Sn(Le,kn,dn,lt,tt){this.good_length=Le,this.max_lazy=kn,this.nice_length=dn,this.max_chain=lt,this.func=tt}function zi(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new d.Buf16(1146),this.dyn_dtree=new d.Buf16(122),this.bl_tree=new d.Buf16(78),_n(this.dyn_ltree),_n(this.dyn_dtree),_n(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new d.Buf16(16),this.heap=new d.Buf16(573),_n(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new d.Buf16(573),_n(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ti(Le){var kn;return Le&&Le.state?(Le.total_in=Le.total_out=0,Le.data_type=2,(kn=Le.state).pending=0,kn.pending_out=0,kn.wrap<0&&(kn.wrap=-kn.wrap),kn.status=kn.wrap?42:113,Le.adler=2===kn.wrap?0:1,kn.last_flush=0,g._tr_init(kn),0):Zn(Le,N)}function Fs(Le){var dn,kn=ti(Le);return 0===kn&&((dn=Le.state).window_size=2*dn.w_size,_n(dn.head),dn.max_lazy_match=o[dn.level].max_lazy,dn.good_match=o[dn.level].good_length,dn.nice_match=o[dn.level].nice_length,dn.max_chain_length=o[dn.level].max_chain,dn.strstart=0,dn.block_start=0,dn.lookahead=0,dn.insert=0,dn.match_length=dn.prev_length=2,dn.match_available=0,dn.ins_h=0),kn}function cr(Le,kn,dn,lt,tt,Lt){if(!Le)return N;var nn=1;if(-1===kn&&(kn=6),lt<0?(nn=0,lt=-lt):15<lt&&(nn=2,lt-=16),tt<1||9<tt||8!==dn||lt<8||15<lt||kn<0||9<kn||Lt<0||4<Lt)return Zn(Le,N);8===lt&&(lt=9);var Ln=new zi;return(Le.state=Ln).strm=Le,Ln.wrap=nn,Ln.gzhead=null,Ln.w_bits=lt,Ln.w_size=1<<Ln.w_bits,Ln.w_mask=Ln.w_size-1,Ln.hash_bits=tt+7,Ln.hash_size=1<<Ln.hash_bits,Ln.hash_mask=Ln.hash_size-1,Ln.hash_shift=~~((Ln.hash_bits+3-1)/3),Ln.window=new d.Buf8(2*Ln.w_size),Ln.head=new d.Buf16(Ln.hash_size),Ln.prev=new d.Buf16(Ln.w_size),Ln.lit_bufsize=1<<tt+6,Ln.pending_buf_size=4*Ln.lit_bufsize,Ln.pending_buf=new d.Buf8(Ln.pending_buf_size),Ln.d_buf=1*Ln.lit_bufsize,Ln.l_buf=3*Ln.lit_bufsize,Ln.level=kn,Ln.strategy=Lt,Ln.method=dn,Fs(Le)}o=[new Sn(0,0,0,0,function(Le,kn){var dn=65535;for(dn>Le.pending_buf_size-5&&(dn=Le.pending_buf_size-5);;){if(Le.lookahead<=1){if(pr(Le),0===Le.lookahead&&0===kn)return 1;if(0===Le.lookahead)break}Le.strstart+=Le.lookahead,Le.lookahead=0;var lt=Le.block_start+dn;if((0===Le.strstart||Le.strstart>=lt)&&(Le.lookahead=Le.strstart-lt,Le.strstart=lt,It(Le,!1),0===Le.strm.avail_out)||Le.strstart-Le.block_start>=Le.w_size-st&&(It(Le,!1),0===Le.strm.avail_out))return 1}return Le.insert=0,4===kn?(It(Le,!0),0===Le.strm.avail_out?3:4):(Le.strstart>Le.block_start&&It(Le,!1),1)}),new Sn(4,4,8,4,Li),new Sn(4,5,16,8,Li),new Sn(4,6,32,32,Li),new Sn(4,4,16,16,Mn),new Sn(8,16,32,32,Mn),new Sn(8,16,128,128,Mn),new Sn(8,32,128,256,Mn),new Sn(32,128,258,1024,Mn),new Sn(32,258,258,4096,Mn)],y.deflateInit=function(Le,kn){return cr(Le,kn,8,15,8,0)},y.deflateInit2=cr,y.deflateReset=Fs,y.deflateResetKeep=ti,y.deflateSetHeader=function(Le,kn){return Le&&Le.state?2!==Le.state.wrap?N:(Le.state.gzhead=kn,0):N},y.deflate=function(Le,kn){var dn,lt,tt,Lt;if(!Le||!Le.state||5<kn||kn<0)return Le?Zn(Le,N):N;if(lt=Le.state,!Le.output||!Le.input&&0!==Le.avail_in||666===lt.status&&4!==kn)return Zn(Le,0===Le.avail_out?-5:N);if(lt.strm=Le,dn=lt.last_flush,lt.last_flush=kn,42===lt.status)if(2===lt.wrap)Le.adler=0,Yn(lt,31),Yn(lt,139),Yn(lt,8),lt.gzhead?(Yn(lt,(lt.gzhead.text?1:0)+(lt.gzhead.hcrc?2:0)+(lt.gzhead.extra?4:0)+(lt.gzhead.name?8:0)+(lt.gzhead.comment?16:0)),Yn(lt,255&lt.gzhead.time),Yn(lt,lt.gzhead.time>>8&255),Yn(lt,lt.gzhead.time>>16&255),Yn(lt,lt.gzhead.time>>24&255),Yn(lt,9===lt.level?2:2<=lt.strategy||lt.level<2?4:0),Yn(lt,255&lt.gzhead.os),lt.gzhead.extra&&lt.gzhead.extra.length&&(Yn(lt,255&lt.gzhead.extra.length),Yn(lt,lt.gzhead.extra.length>>8&255)),lt.gzhead.hcrc&&(Le.adler=v(Le.adler,lt.pending_buf,lt.pending,0)),lt.gzindex=0,lt.status=69):(Yn(lt,0),Yn(lt,0),Yn(lt,0),Yn(lt,0),Yn(lt,0),Yn(lt,9===lt.level?2:2<=lt.strategy||lt.level<2?4:0),Yn(lt,3),lt.status=113);else{var nn=8+(lt.w_bits-8<<4)<<8;nn|=(2<=lt.strategy||lt.level<2?0:lt.level<6?1:6===lt.level?2:3)<<6,0!==lt.strstart&&(nn|=32),nn+=31-nn%31,lt.status=113,ei(lt,nn),0!==lt.strstart&&(ei(lt,Le.adler>>>16),ei(lt,65535&Le.adler)),Le.adler=1}if(69===lt.status)if(lt.gzhead.extra){for(tt=lt.pending;lt.gzindex<(65535&lt.gzhead.extra.length)&&(lt.pending!==lt.pending_buf_size||(lt.gzhead.hcrc&&lt.pending>tt&&(Le.adler=v(Le.adler,lt.pending_buf,lt.pending-tt,tt)),Dt(Le),tt=lt.pending,lt.pending!==lt.pending_buf_size));)Yn(lt,255&lt.gzhead.extra[lt.gzindex]),lt.gzindex++;lt.gzhead.hcrc&&lt.pending>tt&&(Le.adler=v(Le.adler,lt.pending_buf,lt.pending-tt,tt)),lt.gzindex===lt.gzhead.extra.length&&(lt.gzindex=0,lt.status=73)}else lt.status=73;if(73===lt.status)if(lt.gzhead.name){tt=lt.pending;do{if(lt.pending===lt.pending_buf_size&&(lt.gzhead.hcrc&&lt.pending>tt&&(Le.adler=v(Le.adler,lt.pending_buf,lt.pending-tt,tt)),Dt(Le),tt=lt.pending,lt.pending===lt.pending_buf_size)){Lt=1;break}Lt=lt.gzindex<lt.gzhead.name.length?255&lt.gzhead.name.charCodeAt(lt.gzindex++):0,Yn(lt,Lt)}while(0!==Lt);lt.gzhead.hcrc&&lt.pending>tt&&(Le.adler=v(Le.adler,lt.pending_buf,lt.pending-tt,tt)),0===Lt&&(lt.gzindex=0,lt.status=91)}else lt.status=91;if(91===lt.status)if(lt.gzhead.comment){tt=lt.pending;do{if(lt.pending===lt.pending_buf_size&&(lt.gzhead.hcrc&&lt.pending>tt&&(Le.adler=v(Le.adler,lt.pending_buf,lt.pending-tt,tt)),Dt(Le),tt=lt.pending,lt.pending===lt.pending_buf_size)){Lt=1;break}Lt=lt.gzindex<lt.gzhead.comment.length?255&lt.gzhead.comment.charCodeAt(lt.gzindex++):0,Yn(lt,Lt)}while(0!==Lt);lt.gzhead.hcrc&&lt.pending>tt&&(Le.adler=v(Le.adler,lt.pending_buf,lt.pending-tt,tt)),0===Lt&&(lt.status=103)}else lt.status=103;if(103===lt.status&&(lt.gzhead.hcrc?(lt.pending+2>lt.pending_buf_size&&Dt(Le),lt.pending+2<=lt.pending_buf_size&&(Yn(lt,255&Le.adler),Yn(lt,Le.adler>>8&255),Le.adler=0,lt.status=113)):lt.status=113),0!==lt.pending){if(Dt(Le),0===Le.avail_out)return lt.last_flush=-1,0}else if(0===Le.avail_in&&jt(kn)<=jt(dn)&&4!==kn)return Zn(Le,-5);if(666===lt.status&&0!==Le.avail_in)return Zn(Le,-5);if(0!==Le.avail_in||0!==lt.lookahead||0!==kn&&666!==lt.status){var Ln=2===lt.strategy?function(rn,ui){for(var ki;;){if(0===rn.lookahead&&(pr(rn),0===rn.lookahead)){if(0===ui)return 1;break}if(rn.match_length=0,ki=g._tr_tally(rn,0,rn.window[rn.strstart]),rn.lookahead--,rn.strstart++,ki&&(It(rn,!1),0===rn.strm.avail_out))return 1}return rn.insert=0,4===ui?(It(rn,!0),0===rn.strm.avail_out?3:4):rn.last_lit&&(It(rn,!1),0===rn.strm.avail_out)?1:2}(lt,kn):3===lt.strategy?function(rn,ui){for(var ki,pi,ur,Gs,wr=rn.window;;){if(rn.lookahead<=le){if(pr(rn),rn.lookahead<=le&&0===ui)return 1;if(0===rn.lookahead)break}if(rn.match_length=0,rn.lookahead>=3&&0<rn.strstart&&(pi=wr[ur=rn.strstart-1])===wr[++ur]&&pi===wr[++ur]&&pi===wr[++ur]){Gs=rn.strstart+le;do{}while(pi===wr[++ur]&&pi===wr[++ur]&&pi===wr[++ur]&&pi===wr[++ur]&&pi===wr[++ur]&&pi===wr[++ur]&&pi===wr[++ur]&&pi===wr[++ur]&&ur<Gs);rn.match_length=le-(Gs-ur),rn.match_length>rn.lookahead&&(rn.match_length=rn.lookahead)}if(rn.match_length>=3?(ki=g._tr_tally(rn,1,rn.match_length-3),rn.lookahead-=rn.match_length,rn.strstart+=rn.match_length,rn.match_length=0):(ki=g._tr_tally(rn,0,rn.window[rn.strstart]),rn.lookahead--,rn.strstart++),ki&&(It(rn,!1),0===rn.strm.avail_out))return 1}return rn.insert=0,4===ui?(It(rn,!0),0===rn.strm.avail_out?3:4):rn.last_lit&&(It(rn,!1),0===rn.strm.avail_out)?1:2}(lt,kn):o[lt.level].func(lt,kn);if(3!==Ln&&4!==Ln||(lt.status=666),1===Ln||3===Ln)return 0===Le.avail_out&&(lt.last_flush=-1),0;if(2===Ln&&(1===kn?g._tr_align(lt):5!==kn&&(g._tr_stored_block(lt,0,0,!1),3===kn&&(_n(lt.head),0===lt.lookahead&&(lt.strstart=0,lt.block_start=0,lt.insert=0))),Dt(Le),0===Le.avail_out))return lt.last_flush=-1,0}return 4!==kn?0:lt.wrap<=0?1:(2===lt.wrap?(Yn(lt,255&Le.adler),Yn(lt,Le.adler>>8&255),Yn(lt,Le.adler>>16&255),Yn(lt,Le.adler>>24&255),Yn(lt,255&Le.total_in),Yn(lt,Le.total_in>>8&255),Yn(lt,Le.total_in>>16&255),Yn(lt,Le.total_in>>24&255)):(ei(lt,Le.adler>>>16),ei(lt,65535&Le.adler)),Dt(Le),0<lt.wrap&&(lt.wrap=-lt.wrap),0!==lt.pending?0:1)},y.deflateEnd=function(Le){var kn;return Le&&Le.state?42!==(kn=Le.state.status)&&69!==kn&&73!==kn&&91!==kn&&103!==kn&&113!==kn&&666!==kn?Zn(Le,N):(Le.state=null,113===kn?Zn(Le,-3):0):N},y.deflateSetDictionary=function(Le,kn){var dn,lt,tt,Lt,nn,Ln,rn,ui,ki=kn.length;if(!Le||!Le.state||2===(Lt=(dn=Le.state).wrap)||1===Lt&&42!==dn.status||dn.lookahead)return N;for(1===Lt&&(Le.adler=p(Le.adler,kn,ki,0)),dn.wrap=0,ki>=dn.w_size&&(0===Lt&&(_n(dn.head),dn.strstart=0,dn.block_start=0,dn.insert=0),ui=new d.Buf8(dn.w_size),d.arraySet(ui,kn,ki-dn.w_size,dn.w_size,0),kn=ui,ki=dn.w_size),nn=Le.avail_in,Ln=Le.next_in,rn=Le.input,Le.avail_in=ki,Le.next_in=0,Le.input=kn,pr(dn);dn.lookahead>=3;){for(lt=dn.strstart,tt=dn.lookahead-2;dn.ins_h=(dn.ins_h<<dn.hash_shift^dn.window[lt+3-1])&dn.hash_mask,dn.prev[lt&dn.w_mask]=dn.head[dn.ins_h],dn.head[dn.ins_h]=lt,lt++,--tt;);dn.strstart=lt,dn.lookahead=2,pr(dn)}return dn.strstart+=dn.lookahead,dn.block_start=dn.strstart,dn.insert=dn.lookahead,dn.lookahead=0,dn.match_length=dn.prev_length=2,dn.match_available=0,Le.next_in=Ln,Le.input=rn,Le.avail_in=nn,dn.wrap=Lt,0},y.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(U,D,y){"use strict";D.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(U,D,y){"use strict";D.exports=function(o,d){var g,p,v,M,T,I,P,N,V,J,W,re,ce,ie,ae,we,Me,Pe,Ve,le,st,We,at,Te,qe;Te=o.input,v=(p=o.next_in)+(o.avail_in-5),qe=o.output,T=(M=o.next_out)-(d-o.avail_out),I=M+(o.avail_out-257),P=(g=o.state).dmax,N=g.wsize,V=g.whave,J=g.wnext,W=g.window,re=g.hold,ce=g.bits,ie=g.lencode,ae=g.distcode,we=(1<<g.lenbits)-1,Me=(1<<g.distbits)-1;e:do{ce<15&&(re+=Te[p++]<<ce,re+=Te[p++]<<(ce+=8),ce+=8),Pe=ie[re&we];t:for(;;){if(re>>>=Ve=Pe>>>24,ce-=Ve,0==(Ve=Pe>>>16&255))qe[M++]=65535&Pe;else{if(!(16&Ve)){if(0==(64&Ve)){Pe=ie[(65535&Pe)+(re&(1<<Ve)-1)];continue t}if(32&Ve){g.mode=12;break e}o.msg="invalid literal/length code",g.mode=30;break e}le=65535&Pe,(Ve&=15)&&(ce<Ve&&(re+=Te[p++]<<ce,ce+=8),le+=re&(1<<Ve)-1,re>>>=Ve,ce-=Ve),ce<15&&(re+=Te[p++]<<ce,re+=Te[p++]<<(ce+=8),ce+=8),Pe=ae[re&Me];n:for(;;){if(re>>>=Ve=Pe>>>24,ce-=Ve,!(16&(Ve=Pe>>>16&255))){if(0==(64&Ve)){Pe=ae[(65535&Pe)+(re&(1<<Ve)-1)];continue n}o.msg="invalid distance code",g.mode=30;break e}if(st=65535&Pe,ce<(Ve&=15)&&(re+=Te[p++]<<ce,(ce+=8)<Ve&&(re+=Te[p++]<<ce,ce+=8)),P<(st+=re&(1<<Ve)-1)){o.msg="invalid distance too far back",g.mode=30;break e}if(re>>>=Ve,ce-=Ve,(Ve=M-T)<st){if(V<(Ve=st-Ve)&&g.sane){o.msg="invalid distance too far back",g.mode=30;break e}if(at=W,(We=0)===J){if(We+=N-Ve,Ve<le){for(le-=Ve;qe[M++]=W[We++],--Ve;);We=M-st,at=qe}}else if(J<Ve){if(We+=N+J-Ve,(Ve-=J)<le){for(le-=Ve;qe[M++]=W[We++],--Ve;);if(We=0,J<le){for(le-=Ve=J;qe[M++]=W[We++],--Ve;);We=M-st,at=qe}}}else if(We+=J-Ve,Ve<le){for(le-=Ve;qe[M++]=W[We++],--Ve;);We=M-st,at=qe}for(;2<le;)qe[M++]=at[We++],qe[M++]=at[We++],qe[M++]=at[We++],le-=3;le&&(qe[M++]=at[We++],1<le&&(qe[M++]=at[We++]))}else{for(We=M-st;qe[M++]=qe[We++],qe[M++]=qe[We++],qe[M++]=qe[We++],2<(le-=3););le&&(qe[M++]=qe[We++],1<le&&(qe[M++]=qe[We++]))}break}}break}}while(p<v&&M<I);p-=le=ce>>3,re&=(1<<(ce-=le<<3))-1,o.next_in=p,o.next_out=M,o.avail_in=p<v?v-p+5:5-(p-v),o.avail_out=M<I?I-M+257:257-(M-I),g.hold=re,g.bits=ce}},{}],49:[function(U,D,y){"use strict";var o=U("../utils/common"),d=U("./adler32"),g=U("./crc32"),p=U("./inffast"),v=U("./inftrees"),P=-2;function W(We){return(We>>>24&255)+(We>>>8&65280)+((65280&We)<<8)+((255&We)<<24)}function re(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ce(We){var at;return We&&We.state?(We.total_in=We.total_out=(at=We.state).total=0,We.msg="",at.wrap&&(We.adler=1&at.wrap),at.mode=1,at.last=0,at.havedict=0,at.dmax=32768,at.head=null,at.hold=0,at.bits=0,at.lencode=at.lendyn=new o.Buf32(852),at.distcode=at.distdyn=new o.Buf32(592),at.sane=1,at.back=-1,0):P}function ie(We){var at;return We&&We.state?((at=We.state).wsize=0,at.whave=0,at.wnext=0,ce(We)):P}function ae(We,at){var Te,qe;return We&&We.state?(qe=We.state,at<0?(Te=0,at=-at):(Te=1+(at>>4),at<48&&(at&=15)),at&&(at<8||15<at)?P:(null!==qe.window&&qe.wbits!==at&&(qe.window=null),qe.wrap=Te,qe.wbits=at,ie(We))):P}function we(We,at){var Te,qe;return We?(qe=new re,(We.state=qe).window=null,0!==(Te=ae(We,at))&&(We.state=null),Te):P}var Me,Pe,Ve=!0;function le(We){if(Ve){var at;for(Me=new o.Buf32(512),Pe=new o.Buf32(32),at=0;at<144;)We.lens[at++]=8;for(;at<256;)We.lens[at++]=9;for(;at<280;)We.lens[at++]=7;for(;at<288;)We.lens[at++]=8;for(v(1,We.lens,0,288,Me,0,We.work,{bits:9}),at=0;at<32;)We.lens[at++]=5;v(2,We.lens,0,32,Pe,0,We.work,{bits:5}),Ve=!1}We.lencode=Me,We.lenbits=9,We.distcode=Pe,We.distbits=5}function st(We,at,Te,qe){var Bt,Ze=We.state;return null===Ze.window&&(Ze.wsize=1<<Ze.wbits,Ze.wnext=0,Ze.whave=0,Ze.window=new o.Buf8(Ze.wsize)),qe>=Ze.wsize?(o.arraySet(Ze.window,at,Te-Ze.wsize,Ze.wsize,0),Ze.wnext=0,Ze.whave=Ze.wsize):(qe<(Bt=Ze.wsize-Ze.wnext)&&(Bt=qe),o.arraySet(Ze.window,at,Te-qe,Bt,Ze.wnext),(qe-=Bt)?(o.arraySet(Ze.window,at,Te-qe,qe,0),Ze.wnext=qe,Ze.whave=Ze.wsize):(Ze.wnext+=Bt,Ze.wnext===Ze.wsize&&(Ze.wnext=0),Ze.whave<Ze.wsize&&(Ze.whave+=Bt))),0}y.inflateReset=ie,y.inflateReset2=ae,y.inflateResetKeep=ce,y.inflateInit=function(We){return we(We,15)},y.inflateInit2=we,y.inflate=function(We,at){var Te,qe,Bt,Ze,Zn,jt,_n,Dt,It,Yn,ei,Xt,pr,Li,Mn,Sn,zi,ti,Fs,cr,Le,kn,dn,lt,tt=0,Lt=new o.Buf8(4),nn=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!We||!We.state||!We.output||!We.input&&0!==We.avail_in)return P;12===(Te=We.state).mode&&(Te.mode=13),Zn=We.next_out,Bt=We.output,Ze=We.next_in,qe=We.input,Dt=Te.hold,It=Te.bits,Yn=jt=We.avail_in,ei=_n=We.avail_out,kn=0;e:for(;;)switch(Te.mode){case 1:if(0===Te.wrap){Te.mode=13;break}for(;It<16;){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}if(2&Te.wrap&&35615===Dt){Lt[Te.check=0]=255&Dt,Lt[1]=Dt>>>8&255,Te.check=g(Te.check,Lt,2,0),It=Dt=0,Te.mode=2;break}if(Te.flags=0,Te.head&&(Te.head.done=!1),!(1&Te.wrap)||(((255&Dt)<<8)+(Dt>>8))%31){We.msg="incorrect header check",Te.mode=30;break}if(8!=(15&Dt)){We.msg="unknown compression method",Te.mode=30;break}if(It-=4,Le=8+(15&(Dt>>>=4)),0===Te.wbits)Te.wbits=Le;else if(Le>Te.wbits){We.msg="invalid window size",Te.mode=30;break}Te.dmax=1<<Le,We.adler=Te.check=1,Te.mode=512&Dt?10:12,It=Dt=0;break;case 2:for(;It<16;){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}if(Te.flags=Dt,8!=(255&Te.flags)){We.msg="unknown compression method",Te.mode=30;break}if(57344&Te.flags){We.msg="unknown header flags set",Te.mode=30;break}Te.head&&(Te.head.text=Dt>>8&1),512&Te.flags&&(Lt[0]=255&Dt,Lt[1]=Dt>>>8&255,Te.check=g(Te.check,Lt,2,0)),It=Dt=0,Te.mode=3;case 3:for(;It<32;){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}Te.head&&(Te.head.time=Dt),512&Te.flags&&(Lt[0]=255&Dt,Lt[1]=Dt>>>8&255,Lt[2]=Dt>>>16&255,Lt[3]=Dt>>>24&255,Te.check=g(Te.check,Lt,4,0)),It=Dt=0,Te.mode=4;case 4:for(;It<16;){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}Te.head&&(Te.head.xflags=255&Dt,Te.head.os=Dt>>8),512&Te.flags&&(Lt[0]=255&Dt,Lt[1]=Dt>>>8&255,Te.check=g(Te.check,Lt,2,0)),It=Dt=0,Te.mode=5;case 5:if(1024&Te.flags){for(;It<16;){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}Te.length=Dt,Te.head&&(Te.head.extra_len=Dt),512&Te.flags&&(Lt[0]=255&Dt,Lt[1]=Dt>>>8&255,Te.check=g(Te.check,Lt,2,0)),It=Dt=0}else Te.head&&(Te.head.extra=null);Te.mode=6;case 6:if(1024&Te.flags&&(jt<(Xt=Te.length)&&(Xt=jt),Xt&&(Te.head&&(Le=Te.head.extra_len-Te.length,Te.head.extra||(Te.head.extra=new Array(Te.head.extra_len)),o.arraySet(Te.head.extra,qe,Ze,Xt,Le)),512&Te.flags&&(Te.check=g(Te.check,qe,Xt,Ze)),jt-=Xt,Ze+=Xt,Te.length-=Xt),Te.length))break e;Te.length=0,Te.mode=7;case 7:if(2048&Te.flags){if(0===jt)break e;for(Xt=0;Le=qe[Ze+Xt++],Te.head&&Le&&Te.length<65536&&(Te.head.name+=String.fromCharCode(Le)),Le&&Xt<jt;);if(512&Te.flags&&(Te.check=g(Te.check,qe,Xt,Ze)),jt-=Xt,Ze+=Xt,Le)break e}else Te.head&&(Te.head.name=null);Te.length=0,Te.mode=8;case 8:if(4096&Te.flags){if(0===jt)break e;for(Xt=0;Le=qe[Ze+Xt++],Te.head&&Le&&Te.length<65536&&(Te.head.comment+=String.fromCharCode(Le)),Le&&Xt<jt;);if(512&Te.flags&&(Te.check=g(Te.check,qe,Xt,Ze)),jt-=Xt,Ze+=Xt,Le)break e}else Te.head&&(Te.head.comment=null);Te.mode=9;case 9:if(512&Te.flags){for(;It<16;){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}if(Dt!==(65535&Te.check)){We.msg="header crc mismatch",Te.mode=30;break}It=Dt=0}Te.head&&(Te.head.hcrc=Te.flags>>9&1,Te.head.done=!0),We.adler=Te.check=0,Te.mode=12;break;case 10:for(;It<32;){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}We.adler=Te.check=W(Dt),It=Dt=0,Te.mode=11;case 11:if(0===Te.havedict)return We.next_out=Zn,We.avail_out=_n,We.next_in=Ze,We.avail_in=jt,Te.hold=Dt,Te.bits=It,2;We.adler=Te.check=1,Te.mode=12;case 12:if(5===at||6===at)break e;case 13:if(Te.last){Dt>>>=7&It,It-=7&It,Te.mode=27;break}for(;It<3;){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}switch(Te.last=1&Dt,It-=1,3&(Dt>>>=1)){case 0:Te.mode=14;break;case 1:if(le(Te),Te.mode=20,6!==at)break;Dt>>>=2,It-=2;break e;case 2:Te.mode=17;break;case 3:We.msg="invalid block type",Te.mode=30}Dt>>>=2,It-=2;break;case 14:for(Dt>>>=7&It,It-=7&It;It<32;){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}if((65535&Dt)!=(Dt>>>16^65535)){We.msg="invalid stored block lengths",Te.mode=30;break}if(Te.length=65535&Dt,It=Dt=0,Te.mode=15,6===at)break e;case 15:Te.mode=16;case 16:if(Xt=Te.length){if(jt<Xt&&(Xt=jt),_n<Xt&&(Xt=_n),0===Xt)break e;o.arraySet(Bt,qe,Ze,Xt,Zn),jt-=Xt,Ze+=Xt,_n-=Xt,Zn+=Xt,Te.length-=Xt;break}Te.mode=12;break;case 17:for(;It<14;){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}if(Te.nlen=257+(31&Dt),It-=5,Te.ndist=1+(31&(Dt>>>=5)),It-=5,Te.ncode=4+(15&(Dt>>>=5)),Dt>>>=4,It-=4,286<Te.nlen||30<Te.ndist){We.msg="too many length or distance symbols",Te.mode=30;break}Te.have=0,Te.mode=18;case 18:for(;Te.have<Te.ncode;){for(;It<3;){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}Te.lens[nn[Te.have++]]=7&Dt,Dt>>>=3,It-=3}for(;Te.have<19;)Te.lens[nn[Te.have++]]=0;if(Te.lencode=Te.lendyn,Te.lenbits=7,kn=v(0,Te.lens,0,19,Te.lencode,0,Te.work,dn={bits:Te.lenbits}),Te.lenbits=dn.bits,kn){We.msg="invalid code lengths set",Te.mode=30;break}Te.have=0,Te.mode=19;case 19:for(;Te.have<Te.nlen+Te.ndist;){for(;Sn=(tt=Te.lencode[Dt&(1<<Te.lenbits)-1])>>>16&255,zi=65535&tt,!((Mn=tt>>>24)<=It);){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}if(zi<16)Dt>>>=Mn,It-=Mn,Te.lens[Te.have++]=zi;else{if(16===zi){for(lt=Mn+2;It<lt;){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}if(Dt>>>=Mn,It-=Mn,0===Te.have){We.msg="invalid bit length repeat",Te.mode=30;break}Le=Te.lens[Te.have-1],Xt=3+(3&Dt),Dt>>>=2,It-=2}else if(17===zi){for(lt=Mn+3;It<lt;){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}It-=Mn,Le=0,Xt=3+(7&(Dt>>>=Mn)),Dt>>>=3,It-=3}else{for(lt=Mn+7;It<lt;){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}It-=Mn,Le=0,Xt=11+(127&(Dt>>>=Mn)),Dt>>>=7,It-=7}if(Te.have+Xt>Te.nlen+Te.ndist){We.msg="invalid bit length repeat",Te.mode=30;break}for(;Xt--;)Te.lens[Te.have++]=Le}}if(30===Te.mode)break;if(0===Te.lens[256]){We.msg="invalid code -- missing end-of-block",Te.mode=30;break}if(Te.lenbits=9,kn=v(1,Te.lens,0,Te.nlen,Te.lencode,0,Te.work,dn={bits:Te.lenbits}),Te.lenbits=dn.bits,kn){We.msg="invalid literal/lengths set",Te.mode=30;break}if(Te.distbits=6,Te.distcode=Te.distdyn,kn=v(2,Te.lens,Te.nlen,Te.ndist,Te.distcode,0,Te.work,dn={bits:Te.distbits}),Te.distbits=dn.bits,kn){We.msg="invalid distances set",Te.mode=30;break}if(Te.mode=20,6===at)break e;case 20:Te.mode=21;case 21:if(6<=jt&&258<=_n){We.next_out=Zn,We.avail_out=_n,We.next_in=Ze,We.avail_in=jt,Te.hold=Dt,Te.bits=It,p(We,ei),Zn=We.next_out,Bt=We.output,_n=We.avail_out,Ze=We.next_in,qe=We.input,jt=We.avail_in,Dt=Te.hold,It=Te.bits,12===Te.mode&&(Te.back=-1);break}for(Te.back=0;Sn=(tt=Te.lencode[Dt&(1<<Te.lenbits)-1])>>>16&255,zi=65535&tt,!((Mn=tt>>>24)<=It);){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}if(Sn&&0==(240&Sn)){for(ti=Mn,Fs=Sn,cr=zi;Sn=(tt=Te.lencode[cr+((Dt&(1<<ti+Fs)-1)>>ti)])>>>16&255,zi=65535&tt,!(ti+(Mn=tt>>>24)<=It);){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}Dt>>>=ti,It-=ti,Te.back+=ti}if(Dt>>>=Mn,It-=Mn,Te.back+=Mn,Te.length=zi,0===Sn){Te.mode=26;break}if(32&Sn){Te.back=-1,Te.mode=12;break}if(64&Sn){We.msg="invalid literal/length code",Te.mode=30;break}Te.extra=15&Sn,Te.mode=22;case 22:if(Te.extra){for(lt=Te.extra;It<lt;){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}Te.length+=Dt&(1<<Te.extra)-1,Dt>>>=Te.extra,It-=Te.extra,Te.back+=Te.extra}Te.was=Te.length,Te.mode=23;case 23:for(;Sn=(tt=Te.distcode[Dt&(1<<Te.distbits)-1])>>>16&255,zi=65535&tt,!((Mn=tt>>>24)<=It);){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}if(0==(240&Sn)){for(ti=Mn,Fs=Sn,cr=zi;Sn=(tt=Te.distcode[cr+((Dt&(1<<ti+Fs)-1)>>ti)])>>>16&255,zi=65535&tt,!(ti+(Mn=tt>>>24)<=It);){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}Dt>>>=ti,It-=ti,Te.back+=ti}if(Dt>>>=Mn,It-=Mn,Te.back+=Mn,64&Sn){We.msg="invalid distance code",Te.mode=30;break}Te.offset=zi,Te.extra=15&Sn,Te.mode=24;case 24:if(Te.extra){for(lt=Te.extra;It<lt;){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}Te.offset+=Dt&(1<<Te.extra)-1,Dt>>>=Te.extra,It-=Te.extra,Te.back+=Te.extra}if(Te.offset>Te.dmax){We.msg="invalid distance too far back",Te.mode=30;break}Te.mode=25;case 25:if(0===_n)break e;if(Te.offset>(Xt=ei-_n)){if((Xt=Te.offset-Xt)>Te.whave&&Te.sane){We.msg="invalid distance too far back",Te.mode=30;break}pr=Xt>Te.wnext?Te.wsize-(Xt-=Te.wnext):Te.wnext-Xt,Xt>Te.length&&(Xt=Te.length),Li=Te.window}else Li=Bt,pr=Zn-Te.offset,Xt=Te.length;for(_n<Xt&&(Xt=_n),_n-=Xt,Te.length-=Xt;Bt[Zn++]=Li[pr++],--Xt;);0===Te.length&&(Te.mode=21);break;case 26:if(0===_n)break e;Bt[Zn++]=Te.length,_n--,Te.mode=21;break;case 27:if(Te.wrap){for(;It<32;){if(0===jt)break e;jt--,Dt|=qe[Ze++]<<It,It+=8}if(We.total_out+=ei-=_n,Te.total+=ei,ei&&(We.adler=Te.check=Te.flags?g(Te.check,Bt,ei,Zn-ei):d(Te.check,Bt,ei,Zn-ei)),ei=_n,(Te.flags?Dt:W(Dt))!==Te.check){We.msg="incorrect data check",Te.mode=30;break}It=Dt=0}Te.mode=28;case 28:if(Te.wrap&&Te.flags){for(;It<32;){if(0===jt)break e;jt--,Dt+=qe[Ze++]<<It,It+=8}if(Dt!==(4294967295&Te.total)){We.msg="incorrect length check",Te.mode=30;break}It=Dt=0}Te.mode=29;case 29:kn=1;break e;case 30:kn=-3;break e;case 31:return-4;default:return P}return We.next_out=Zn,We.avail_out=_n,We.next_in=Ze,We.avail_in=jt,Te.hold=Dt,Te.bits=It,(Te.wsize||ei!==We.avail_out&&Te.mode<30&&(Te.mode<27||4!==at))&&st(We,We.output,We.next_out,ei-We.avail_out)?(Te.mode=31,-4):(ei-=We.avail_out,We.total_in+=Yn-=We.avail_in,We.total_out+=ei,Te.total+=ei,Te.wrap&&ei&&(We.adler=Te.check=Te.flags?g(Te.check,Bt,ei,We.next_out-ei):d(Te.check,Bt,ei,We.next_out-ei)),We.data_type=Te.bits+(Te.last?64:0)+(12===Te.mode?128:0)+(20===Te.mode||15===Te.mode?256:0),(0==Yn&&0===ei||4===at)&&0===kn&&(kn=-5),kn)},y.inflateEnd=function(We){if(!We||!We.state)return P;var at=We.state;return at.window&&(at.window=null),We.state=null,0},y.inflateGetHeader=function(We,at){var Te;return We&&We.state?0==(2&(Te=We.state).wrap)?P:((Te.head=at).done=!1,0):P},y.inflateSetDictionary=function(We,at){var Te,qe=at.length;return We&&We.state?0!==(Te=We.state).wrap&&11!==Te.mode?P:11===Te.mode&&d(1,at,qe,0)!==Te.check?-3:st(We,at,qe,qe)?(Te.mode=31,-4):(Te.havedict=1,0):P},y.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(U,D,y){"use strict";var o=U("../utils/common"),d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],g=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],p=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],v=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];D.exports=function(M,T,I,P,N,V,J,W){var re,ce,ie,ae,we,Me,Pe,Ve,le,st=W.bits,We=0,at=0,Te=0,qe=0,Bt=0,Ze=0,Zn=0,jt=0,_n=0,Dt=0,It=null,Yn=0,ei=new o.Buf16(16),Xt=new o.Buf16(16),pr=null,Li=0;for(We=0;We<=15;We++)ei[We]=0;for(at=0;at<P;at++)ei[T[I+at]]++;for(Bt=st,qe=15;1<=qe&&0===ei[qe];qe--);if(qe<Bt&&(Bt=qe),0===qe)return N[V++]=20971520,N[V++]=20971520,W.bits=1,0;for(Te=1;Te<qe&&0===ei[Te];Te++);for(Bt<Te&&(Bt=Te),We=jt=1;We<=15;We++)if(jt<<=1,(jt-=ei[We])<0)return-1;if(0<jt&&(0===M||1!==qe))return-1;for(Xt[1]=0,We=1;We<15;We++)Xt[We+1]=Xt[We]+ei[We];for(at=0;at<P;at++)0!==T[I+at]&&(J[Xt[T[I+at]]++]=at);if(Me=0===M?(It=pr=J,19):1===M?(It=d,Yn-=257,pr=g,Li-=257,256):(It=p,pr=v,-1),We=Te,we=V,Zn=at=Dt=0,ie=-1,ae=(_n=1<<(Ze=Bt))-1,1===M&&852<_n||2===M&&592<_n)return 1;for(;;){for(Pe=We-Zn,le=J[at]<Me?(Ve=0,J[at]):J[at]>Me?(Ve=pr[Li+J[at]],It[Yn+J[at]]):(Ve=96,0),re=1<<We-Zn,Te=ce=1<<Ze;N[we+(Dt>>Zn)+(ce-=re)]=Pe<<24|Ve<<16|le|0,0!==ce;);for(re=1<<We-1;Dt&re;)re>>=1;if(0!==re?(Dt&=re-1,Dt+=re):Dt=0,at++,0==--ei[We]){if(We===qe)break;We=T[I+J[at]]}if(Bt<We&&(Dt&ae)!==ie){for(0===Zn&&(Zn=Bt),we+=Te,jt=1<<(Ze=We-Zn);Ze+Zn<qe&&!((jt-=ei[Ze+Zn])<=0);)Ze++,jt<<=1;if(_n+=1<<Ze,1===M&&852<_n||2===M&&592<_n)return 1;N[ie=Dt&ae]=Bt<<24|Ze<<16|we-V|0}}return 0!==Dt&&(N[we+Dt]=We-Zn<<24|64<<16|0),W.bits=Bt,0}},{"../utils/common":41}],51:[function(U,D,y){"use strict";D.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(U,D,y){"use strict";var o=U("../utils/common");function p(tt){for(var Lt=tt.length;0<=--Lt;)tt[Lt]=0}var T=256,I=286,P=30,J=15,Me=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Pe=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ve=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],st=new Array(576);p(st);var We=new Array(60);p(We);var at=new Array(512);p(at);var Te=new Array(256);p(Te);var qe=new Array(29);p(qe);var Bt,Ze,Zn,jt=new Array(P);function _n(tt,Lt,nn,Ln,rn){this.static_tree=tt,this.extra_bits=Lt,this.extra_base=nn,this.elems=Ln,this.max_length=rn,this.has_stree=tt&&tt.length}function Dt(tt,Lt){this.dyn_tree=tt,this.max_code=0,this.stat_desc=Lt}function It(tt){return tt<256?at[tt]:at[256+(tt>>>7)]}function Yn(tt,Lt){tt.pending_buf[tt.pending++]=255&Lt,tt.pending_buf[tt.pending++]=Lt>>>8&255}function ei(tt,Lt,nn){tt.bi_valid>16-nn?(tt.bi_buf|=Lt<<tt.bi_valid&65535,Yn(tt,tt.bi_buf),tt.bi_buf=Lt>>16-tt.bi_valid,tt.bi_valid+=nn-16):(tt.bi_buf|=Lt<<tt.bi_valid&65535,tt.bi_valid+=nn)}function Xt(tt,Lt,nn){ei(tt,nn[2*Lt],nn[2*Lt+1])}function pr(tt,Lt){for(var nn=0;nn|=1&tt,tt>>>=1,nn<<=1,0<--Lt;);return nn>>>1}function Li(tt,Lt,nn){var Ln,rn,ui=new Array(16),ki=0;for(Ln=1;Ln<=J;Ln++)ui[Ln]=ki=ki+nn[Ln-1]<<1;for(rn=0;rn<=Lt;rn++){var pi=tt[2*rn+1];0!==pi&&(tt[2*rn]=pr(ui[pi]++,pi))}}function Mn(tt){var Lt;for(Lt=0;Lt<I;Lt++)tt.dyn_ltree[2*Lt]=0;for(Lt=0;Lt<P;Lt++)tt.dyn_dtree[2*Lt]=0;for(Lt=0;Lt<19;Lt++)tt.bl_tree[2*Lt]=0;tt.dyn_ltree[512]=1,tt.opt_len=tt.static_len=0,tt.last_lit=tt.matches=0}function Sn(tt){8<tt.bi_valid?Yn(tt,tt.bi_buf):0<tt.bi_valid&&(tt.pending_buf[tt.pending++]=tt.bi_buf),tt.bi_buf=0,tt.bi_valid=0}function zi(tt,Lt,nn,Ln){var rn=2*Lt,ui=2*nn;return tt[rn]<tt[ui]||tt[rn]===tt[ui]&&Ln[Lt]<=Ln[nn]}function ti(tt,Lt,nn){for(var Ln=tt.heap[nn],rn=nn<<1;rn<=tt.heap_len&&(rn<tt.heap_len&&zi(Lt,tt.heap[rn+1],tt.heap[rn],tt.depth)&&rn++,!zi(Lt,Ln,tt.heap[rn],tt.depth));)tt.heap[nn]=tt.heap[rn],nn=rn,rn<<=1;tt.heap[nn]=Ln}function Fs(tt,Lt,nn){var Ln,rn,ui,ki,pi=0;if(0!==tt.last_lit)for(;Ln=tt.pending_buf[tt.d_buf+2*pi]<<8|tt.pending_buf[tt.d_buf+2*pi+1],rn=tt.pending_buf[tt.l_buf+pi],pi++,0===Ln?Xt(tt,rn,Lt):(Xt(tt,(ui=Te[rn])+T+1,Lt),0!==(ki=Me[ui])&&ei(tt,rn-=qe[ui],ki),Xt(tt,ui=It(--Ln),nn),0!==(ki=Pe[ui])&&ei(tt,Ln-=jt[ui],ki)),pi<tt.last_lit;);Xt(tt,256,Lt)}function cr(tt,Lt){var nn,Ln,rn,ui=Lt.dyn_tree,ki=Lt.stat_desc.static_tree,pi=Lt.stat_desc.has_stree,ur=Lt.stat_desc.elems,Gs=-1;for(tt.heap_len=0,tt.heap_max=573,nn=0;nn<ur;nn++)0!==ui[2*nn]?(tt.heap[++tt.heap_len]=Gs=nn,tt.depth[nn]=0):ui[2*nn+1]=0;for(;tt.heap_len<2;)ui[2*(rn=tt.heap[++tt.heap_len]=Gs<2?++Gs:0)]=1,tt.depth[rn]=0,tt.opt_len--,pi&&(tt.static_len-=ki[2*rn+1]);for(Lt.max_code=Gs,nn=tt.heap_len>>1;1<=nn;nn--)ti(tt,ui,nn);for(rn=ur;nn=tt.heap[1],tt.heap[1]=tt.heap[tt.heap_len--],ti(tt,ui,1),Ln=tt.heap[1],tt.heap[--tt.heap_max]=nn,tt.heap[--tt.heap_max]=Ln,ui[2*rn]=ui[2*nn]+ui[2*Ln],tt.depth[rn]=(tt.depth[nn]>=tt.depth[Ln]?tt.depth[nn]:tt.depth[Ln])+1,ui[2*nn+1]=ui[2*Ln+1]=rn,tt.heap[1]=rn++,ti(tt,ui,1),2<=tt.heap_len;);tt.heap[--tt.heap_max]=tt.heap[1],function(wr,ro){var ha,Qo,es,Ps,mo,aa,ja=ro.dyn_tree,nr=ro.max_code,qu=ro.stat_desc.static_tree,Xi=ro.stat_desc.has_stree,Ds=ro.stat_desc.extra_bits,b=ro.stat_desc.extra_base,k=ro.stat_desc.max_length,H=0;for(Ps=0;Ps<=J;Ps++)wr.bl_count[Ps]=0;for(ja[2*wr.heap[wr.heap_max]+1]=0,ha=wr.heap_max+1;ha<573;ha++)k<(Ps=ja[2*ja[2*(Qo=wr.heap[ha])+1]+1]+1)&&(Ps=k,H++),ja[2*Qo+1]=Ps,nr<Qo||(wr.bl_count[Ps]++,mo=0,b<=Qo&&(mo=Ds[Qo-b]),wr.opt_len+=(aa=ja[2*Qo])*(Ps+mo),Xi&&(wr.static_len+=aa*(qu[2*Qo+1]+mo)));if(0!==H){do{for(Ps=k-1;0===wr.bl_count[Ps];)Ps--;wr.bl_count[Ps]--,wr.bl_count[Ps+1]+=2,wr.bl_count[k]--,H-=2}while(0<H);for(Ps=k;0!==Ps;Ps--)for(Qo=wr.bl_count[Ps];0!==Qo;)nr<(es=wr.heap[--ha])||(ja[2*es+1]!==Ps&&(wr.opt_len+=(Ps-ja[2*es+1])*ja[2*es],ja[2*es+1]=Ps),Qo--)}}(tt,Lt),Li(ui,Gs,tt.bl_count)}function Le(tt,Lt,nn){var Ln,rn,ui=-1,ki=Lt[1],pi=0,ur=7,Gs=4;for(0===ki&&(ur=138,Gs=3),Lt[2*(nn+1)+1]=65535,Ln=0;Ln<=nn;Ln++)rn=ki,ki=Lt[2*(Ln+1)+1],++pi<ur&&rn===ki||(pi<Gs?tt.bl_tree[2*rn]+=pi:0!==rn?(rn!==ui&&tt.bl_tree[2*rn]++,tt.bl_tree[32]++):pi<=10?tt.bl_tree[34]++:tt.bl_tree[36]++,ui=rn,Gs=(pi=0)===ki?(ur=138,3):rn===ki?(ur=6,3):(ur=7,4))}function kn(tt,Lt,nn){var Ln,rn,ui=-1,ki=Lt[1],pi=0,ur=7,Gs=4;for(0===ki&&(ur=138,Gs=3),Ln=0;Ln<=nn;Ln++)if(rn=ki,ki=Lt[2*(Ln+1)+1],!(++pi<ur&&rn===ki)){if(pi<Gs)for(;Xt(tt,rn,tt.bl_tree),0!=--pi;);else 0!==rn?(rn!==ui&&(Xt(tt,rn,tt.bl_tree),pi--),Xt(tt,16,tt.bl_tree),ei(tt,pi-3,2)):pi<=10?(Xt(tt,17,tt.bl_tree),ei(tt,pi-3,3)):(Xt(tt,18,tt.bl_tree),ei(tt,pi-11,7));ui=rn,Gs=(pi=0)===ki?(ur=138,3):rn===ki?(ur=6,3):(ur=7,4)}}p(jt);var dn=!1;function lt(tt,Lt,nn,Ln){var rn,ui,ki;ei(tt,0+(Ln?1:0),3),ui=Lt,ki=nn,Sn(rn=tt),Yn(rn,ki),Yn(rn,~ki),o.arraySet(rn.pending_buf,rn.window,ui,ki,rn.pending),rn.pending+=ki}y._tr_init=function(tt){dn||(function(){var Lt,nn,Ln,rn,ui,ki=new Array(16);for(rn=Ln=0;rn<28;rn++)for(qe[rn]=Ln,Lt=0;Lt<1<<Me[rn];Lt++)Te[Ln++]=rn;for(Te[Ln-1]=rn,rn=ui=0;rn<16;rn++)for(jt[rn]=ui,Lt=0;Lt<1<<Pe[rn];Lt++)at[ui++]=rn;for(ui>>=7;rn<P;rn++)for(jt[rn]=ui<<7,Lt=0;Lt<1<<Pe[rn]-7;Lt++)at[256+ui++]=rn;for(nn=0;nn<=J;nn++)ki[nn]=0;for(Lt=0;Lt<=143;)st[2*Lt+1]=8,Lt++,ki[8]++;for(;Lt<=255;)st[2*Lt+1]=9,Lt++,ki[9]++;for(;Lt<=279;)st[2*Lt+1]=7,Lt++,ki[7]++;for(;Lt<=287;)st[2*Lt+1]=8,Lt++,ki[8]++;for(Li(st,287,ki),Lt=0;Lt<P;Lt++)We[2*Lt+1]=5,We[2*Lt]=pr(Lt,5);Bt=new _n(st,Me,257,I,J),Ze=new _n(We,Pe,0,P,J),Zn=new _n(new Array(0),Ve,0,19,7)}(),dn=!0),tt.l_desc=new Dt(tt.dyn_ltree,Bt),tt.d_desc=new Dt(tt.dyn_dtree,Ze),tt.bl_desc=new Dt(tt.bl_tree,Zn),tt.bi_buf=0,tt.bi_valid=0,Mn(tt)},y._tr_stored_block=lt,y._tr_flush_block=function(tt,Lt,nn,Ln){var rn,ui,ki=0;0<tt.level?(2===tt.strm.data_type&&(tt.strm.data_type=function(pi){var ur,Gs=4093624447;for(ur=0;ur<=31;ur++,Gs>>>=1)if(1&Gs&&0!==pi.dyn_ltree[2*ur])return 0;if(0!==pi.dyn_ltree[18]||0!==pi.dyn_ltree[20]||0!==pi.dyn_ltree[26])return 1;for(ur=32;ur<T;ur++)if(0!==pi.dyn_ltree[2*ur])return 1;return 0}(tt)),cr(tt,tt.l_desc),cr(tt,tt.d_desc),ki=function(pi){var ur;for(Le(pi,pi.dyn_ltree,pi.l_desc.max_code),Le(pi,pi.dyn_dtree,pi.d_desc.max_code),cr(pi,pi.bl_desc),ur=18;3<=ur&&0===pi.bl_tree[2*le[ur]+1];ur--);return pi.opt_len+=3*(ur+1)+5+5+4,ur}(tt),(ui=tt.static_len+3+7>>>3)<=(rn=tt.opt_len+3+7>>>3)&&(rn=ui)):rn=ui=nn+5,nn+4<=rn&&-1!==Lt?lt(tt,Lt,nn,Ln):4===tt.strategy||ui===rn?(ei(tt,2+(Ln?1:0),3),Fs(tt,st,We)):(ei(tt,4+(Ln?1:0),3),function(pi,ur,Gs,wr){var ro;for(ei(pi,ur-257,5),ei(pi,Gs-1,5),ei(pi,wr-4,4),ro=0;ro<wr;ro++)ei(pi,pi.bl_tree[2*le[ro]+1],3);kn(pi,pi.dyn_ltree,ur-1),kn(pi,pi.dyn_dtree,Gs-1)}(tt,tt.l_desc.max_code+1,tt.d_desc.max_code+1,ki+1),Fs(tt,tt.dyn_ltree,tt.dyn_dtree)),Mn(tt),Ln&&Sn(tt)},y._tr_tally=function(tt,Lt,nn){return tt.pending_buf[tt.d_buf+2*tt.last_lit]=Lt>>>8&255,tt.pending_buf[tt.d_buf+2*tt.last_lit+1]=255&Lt,tt.pending_buf[tt.l_buf+tt.last_lit]=255&nn,tt.last_lit++,0===Lt?tt.dyn_ltree[2*nn]++:(tt.matches++,Lt--,tt.dyn_ltree[2*(Te[nn]+T+1)]++,tt.dyn_dtree[2*It(Lt)]++),tt.last_lit===tt.lit_bufsize-1},y._tr_align=function(tt){var Lt;ei(tt,2,3),Xt(tt,256,st),16===(Lt=tt).bi_valid?(Yn(Lt,Lt.bi_buf),Lt.bi_buf=0,Lt.bi_valid=0):8<=Lt.bi_valid&&(Lt.pending_buf[Lt.pending++]=255&Lt.bi_buf,Lt.bi_buf>>=8,Lt.bi_valid-=8)}},{"../utils/common":41}],53:[function(U,D,y){"use strict";D.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(U,D,y){(function(o){!function(d,g){"use strict";if(!d.setImmediate){var p,v,M,T,I=1,P={},N=!1,V=d.document,J=Object.getPrototypeOf&&Object.getPrototypeOf(d);J=J&&J.setTimeout?J:d,p="[object process]"==={}.toString.call(d.process)?function(ie){process.nextTick(function(){re(ie)})}:function(){if(d.postMessage&&!d.importScripts){var ie=!0,ae=d.onmessage;return d.onmessage=function(){ie=!1},d.postMessage("","*"),d.onmessage=ae,ie}}()?(T="setImmediate$"+Math.random()+"$",d.addEventListener?d.addEventListener("message",ce,!1):d.attachEvent("onmessage",ce),function(ie){d.postMessage(T+ie,"*")}):d.MessageChannel?((M=new MessageChannel).port1.onmessage=function(ie){re(ie.data)},function(ie){M.port2.postMessage(ie)}):V&&"onreadystatechange"in V.createElement("script")?(v=V.documentElement,function(ie){var ae=V.createElement("script");ae.onreadystatechange=function(){re(ie),ae.onreadystatechange=null,v.removeChild(ae),ae=null},v.appendChild(ae)}):function(ie){setTimeout(re,0,ie)},J.setImmediate=function(ie){"function"!=typeof ie&&(ie=new Function(""+ie));for(var ae=new Array(arguments.length-1),we=0;we<ae.length;we++)ae[we]=arguments[we+1];return P[I]={callback:ie,args:ae},p(I),I++},J.clearImmediate=W}function W(ie){delete P[ie]}function re(ie){if(N)setTimeout(re,0,ie);else{var ae=P[ie];if(ae){N=!0;try{!function(we){var Me=we.callback,Pe=we.args;switch(Pe.length){case 0:Me();break;case 1:Me(Pe[0]);break;case 2:Me(Pe[0],Pe[1]);break;case 3:Me(Pe[0],Pe[1],Pe[2]);break;default:Me.apply(undefined,Pe)}}(ae)}finally{W(ie),N=!1}}}}function ce(ie){ie.source===d&&"string"==typeof ie.data&&0===ie.data.indexOf(T)&&re(+ie.data.slice(T.length))}}("undefined"==typeof self?void 0===o?this:o:self)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},788:(K,U,D)=>{K.exports=D(237)},853:(K,U,D)=>{var o,d,p,v,y=y||D(259);p=(d=(o=y).paramquery).pqGrid.regional.en={strLocal:"en",strAdd:"Add",strBlanks:"(Blanks)",strDelete:"Delete",strEdit:"Edit",strCondition:"Condition:",strConditions:{"":"--None--",begin:"Begins with",between:"In between",contain:"Contains",equal:"Equals",empty:"Empty",end:"Ends With",great:"Greater than",gte:"Greater than or equal",less:"Less than",lte:"Less than or equal",notbegin:"Not begins with",notcontain:"Not contains",notequal:"Not equals",notempty:"Not empty",notend:"Not ends with",range:"[ Range ]",regexp:"Regular expression"},strOk:"Ok",strClear:"Clear",strTabRemove:"{0} would be deleted permanently.\r\n Are you sure?",strTabName:"sheet{0}",strTabAdd:"New sheet",strTabClose:"Remove sheet",strGroup_header:"Drag a column here to group by that column",strGroup_merge:"Merge cells",strGroup_fixCols:"Fix columns",strGroup_grandSummary:"Grand summary",strTP_aggPane:"Aggregates",strTP_colPane:"Group columns",strTP_pivot:"Pivot mode",strTP_rowPane:"Group rows",strTP_aggPH:"Drop columns for computing aggregate values",strTP_colPH:"Drop columns here for grouping along column or x axis",strTP_rowPH:"Drop columns here for grouping along row or y axis",strLoading:"Loading",strNextResult:"Next Result",strNoRows:"No rows to display.",strNothingFound:"Nothing found",strPrevResult:"Previous Result",strSearch:"Search",strSelectAll:"Select All",strSelectedmatches:"Selected {0} of {1} match(es)",strFormulas:{ABS:["ABS(number)","Returns the absolute value of a number. The absolute value of a number is the number without its sign."],ACOS:["ACOS(number)","Returns the arccosine, or inverse cosine, of a number. The arccosine is the angle whose cosine is number. The returned angle is given in radians in the range 0 (zero) to pi."],AND:["AND(logical1, [logical2], ...)","Returns TRUE if all its arguments evaluate to TRUE, and returns FALSE if one or more arguments evaluate to FALSE."],ASIN:["ASIN(number)","Returns the arcsine, or inverse sine, of a number. The arcsine is the angle whose sine is number. The returned angle is given in radians in the range -pi/2 to pi/2."],ATAN:["ATAN(number)","Returns the arctangent, or inverse tangent, of a number. The arctangent is the angle whose tangent is number. The returned angle is given in radians in the range -pi/2 to pi/2."],AVERAGE:["AVERAGE(number1, [number2], ...)","Returns the average (arithmetic mean) of the arguments. For example, if the range A1:A20 contains numbers, the formula =AVERAGE(A1:A20) returns the average of those numbers."],AVERAGEIF:["AVERAGEIF(range, criteria, [average_range])","Returns the average (arithmetic mean) of all the cells in a range that meet a given criteria."],AVERAGEIFS:["AVERAGEIFS(average_range, criteria_range1, criteria1, [criteria_range2, criteria2], ...)","Returns the average (arithmetic mean) of all cells that meet multiple criteria."],CEILING:["CEILING(number, significance)","Returns number rounded up, away from zero, to the nearest multiple of significance. For example, if you want to avoid using pennies in your prices and your product is priced at $4.42, use the formula =CEILING(4.42,0.05) to round prices up to the nearest nickel."],CHAR:["CHAR(number)","Returns the character specified by a number."],CHOOSE:["CHOOSE(index_num, value1, [value2], ...)","If index_num is 1, CHOOSE returns value1; if it is 2, CHOOSE returns value2; and so on."],CODE:["CODE(text)","Returns a numeric code for the first character in a text string."],COLUMN:["COLUMN()","Returns reference of the cell in which the COLUMN function appears."],COLUMNS:["COLUMNS(array)","Returns the number of columns in an array or reference."],CONCATENATE:["CONCATENATE(text1, [text2], ...)","join two or more text strings into one string."],COS:["COS(number)","Returns the cosine of the given angle(in radians)."],COUNT:["COUNT(value1, [value2], ...)","Counts the number of cells that contain numbers, and counts numbers within the list of arguments."],COUNTA:["COUNTA(value1, [value2], ...)","The COUNTA function counts the number of cells that are not empty in a range."],COUNTBLANK:["COUNTBLANK(range)","Counts empty cells in a specified range of cells."],COUNTIF:["COUNTIF(range, criteria)","counts the number of cells that meet a criterion; for example, to count the number of times a particular city appears in a customer list."],COUNTIFS:["COUNTIFS(criteria_range1, criteria1, [criteria_range2, criteria2]\u2026)","Applies criteria to cells across multiple ranges and counts the number of times all criteria are met."],DATE:["DATE(year,month,day)","returns the sequential serial number that represents a particular date."],DATEDIF:["DATEDIF(start_date,end_date,unit)","Calculates the number of days, months, or years between two dates. Unit can be 'Y', 'M' or 'D'."],DATEVALUE:["DATEVALUE(date_text)",'converts a date that is stored as text to a serial number that Excel recognizes as a date. For example, the formula =DATEVALUE("1/1/2008") returns 39448.'],DAY:["DAY(serial_number)","Returns the day of a date, represented by a serial number."],DAYS:["DAYS(end_date, start_date)","Returns the number of days between two dates."],DEGREES:["DEGREES(angle)","Converts radians into degrees."],EOMONTH:["EOMONTH(start_date, months)","Returns the serial number for the last day of the month that is the indicated number of months before or after start_date."],EXP:["EXP(number)","Returns e raised to the power of number. "],FIND:["FIND(find_text, within_text, [start_num])","Locates one text string within a second text string, and return the number of the starting position of the first text string from the first character of the second text string."],FLOOR:["FLOOR(number, significance)","Rounds number down, toward zero, to the nearest multiple of significance."],HLOOKUP:["HLOOKUP(lookup_value, table_array, row_index_num, [range_lookup])","Searches for a value in the top row of a table or an array of values, and then returns a value in the same column from a row you specify in the table or array."],HOUR:["HOUR(serial_number)","Returns the hour of a time value. The hour is given as an integer, ranging from 0 (12:00 A.M.) to 23 (11:00 P.M.)."],IF:["IF(logical_test, value_if_true, [value_if_false])","returns one value if a condition is true and another value if it's false."],INDEX:["INDEX(array, row_num, [column_num])","Returns the value of an element in a table or an array, selected by the row and column number indexes."],INDIRECT:["INDIRECT(ref_text, [a1])","Returns the reference specified by a text string. References are immediately evaluated to display their contents."],ISBLANK:["ISBLANK(value)","Returns TRUE if the value is blank"],LARGE:["LARGE(array, k)","Returns the k-th largest value in a data set."],LEFT:["LEFT(text, [num_chars])","returns the first character or characters in a text string, based on the number of characters you specify."],LEN:["LEN(text)","returns the number of characters in a text string."],LOOKUP:["LOOKUP(lookup_value, lookup_vector, [result_vector])","Looks in a one-row or one-column range (known as a vector) for a value and returns a value from the same position in a second one-row or one-column range."],LOWER:["LOWER(text)","Converts all uppercase letters in a text string to lowercase."],MATCH:["MATCH(lookup_value, lookup_array, [match_type])","Searches for a specified item in a range of cells, and then returns the relative position of that item in the range. match_type can be: 0 for exact match with option to use wildcards; 1 ( default ) for less than, The values in the lookup_array argument must be placed in ascending order; -1 for greater than, values in the lookup_array argument must be placed in descending order."],MAX:["MAX(number1, [number2], ...)","Returns the largest value in a set of values."],MEDIAN:["MEDIAN(number1, [number2], ...)","Returns the median of the given numbers. The median is the number in the middle of a set of numbers."],MID:["MID(text, start_num, num_chars)","returns a specific number of characters from a text string, starting at the position you specify, based on the number of characters you specify."],MIN:["MIN(number1, [number2], ...)","Returns the smallest number in a set of values."],MODE:["MODE(number1,[number2],...)","Returns the most frequently occurring, or repetitive, value in an array or range of data."],MONTH:["MONTH(serial_number)","Returns the month of a date represented by a serial number. The month is given as an integer, ranging from 1 (January) to 12 (December)."],OR:["OR(logical1, [logical2], ...)","returns TRUE if any of its arguments evaluate to TRUE, and returns FALSE if all of its arguments evaluate to FALSE."],PI:["PI()","Returns the number 3.14159265358979, the mathematical constant pi."],POWER:["POWER(number, power)","Returns the result of a number raised to a power."],PRODUCT:["PRODUCT(number1, [number2], ...)","multiplies all the numbers given as arguments and returns the product. PRODUCT(A1:A3, C1:C3) is equivalent to =A1 * A2 * A3 * C1 * C2 * C3."],PROPER:["PROPER(text)","Capitalizes the first letter in each word of a text value."],RADIANS:["RADIANS(angle)","Converts degrees into radians."],RAND:["RAND()","Returns an evenly distributed random real number greater than or equal to 0 and less than 1."],RANK:["RANK(number,ref,[order])","Returns the rank of a number in a list of numbers."],RATE:["",""],REPLACE:["REPLACE(old_text, start_num, num_chars, new_text)","replaces part of a text string, based on the number of characters you specify, with a different text string."],REPT:["REPT(text, number_times)","Repeats text a given number of times."],RIGHT:["RIGHT(text,[num_chars])","returns the last character or characters in a text string, based on the number of characters you specify."],ROUND:["ROUND(number, num_digits)","rounds a number to a specified number of digits."],ROUNDDOWN:["ROUNDDOWN(number, num_digits)","Rounds a number down, toward zero."],ROUNDUP:["ROUNDUP(number, num_digits)","Rounds a number up, away from 0 (zero)."],ROW:["ROW()","Returns the reference of the cell in which the ROW function appears."],ROWS:["ROWS(array)","Returns the number of rows in a reference or array."],SEARCH:["SEARCH(find_text,within_text,[start_num])","locate one text string within a second text string, and return the number of the starting position of the first text string from the first character of the second text string."],SIN:["SIN(number)","Returns the sine of the given angle(in radians)."],SMALL:["SMALL(array, k)","Returns the k-th smallest value in a data set."],SQRT:["SQRT(number)","Returns a positive square root."],STDEV:["STDEV(number1,[number2],...)","Estimates standard deviation based on a sample. The standard deviation is a measure of how widely values are dispersed from the average value (the mean)."],STDEVP:["STDEVP(number1,[number2],...)","Calculates standard deviation based on the entire population given as arguments."],SUBSTITUTE:["SUBSTITUTE(text, old_text, new_text, [instance_num])","Substitutes new_text for old_text in a text string."],SUM:["SUM(number1,[number2],...)","Adds its arguments. You can add individual values, cell references or ranges or a mix of all three."],SUMIF:["SUMIF(range, criteria, [sum_range])","adds the values in a range that meet criteria that you specify"],SUMIFS:["SUMIFS(sum_range, criteria_range1, criteria1, [criteria_range2, criteria2], ...)","adds all of its arguments that meet multiple criteria."],SUMPRODUCT:["SUMPRODUCT(array1, [array2], [array3], ...)","Multiplies corresponding components in the given arrays, and returns the sum of those products."],TAN:["TAN(number)","Returns the tangent of the given angle(in radians)."],TEXT:['TEXT(Value you want to format, "Format code you want to apply")',"The TEXT function lets you change the way a number appears by applying formatting to it with format codes."],TIME:["TIME(hour, minute, second)","Returns the decimal number for a particular time."],TIMEVALUE:["TIMEVALUE(time_text)","Returns the decimal number of the time represented by a text string. The decimal number is a value ranging from 0 (zero) to 0.99988426, representing the times from 0:00:00 (12:00:00 AM) to 23:59:59 (11:59:59 P.M.)."],TODAY:["TODAY()","Returns the serial number of the current date."],TRIM:["TRIM(text)","Removes all spaces from text except for single spaces between words."],TRUNC:["TRUNC(number, [num_digits])","Truncates a number to an integer by removing the fractional part of the number."],UPPER:["UPPER(text)","Converts text to uppercase."],VALUE:["VALUE(text)","Converts a text string that represents a number to a number."],VAR:["VAR(number1,[number2],...)","Estimates variance based on a sample."],VARP:["VARP(number1,[number2],...)","Calculates variance based on the entire population."],VLOOKUP:["VLOOKUP (lookup_value, table_array, col_index_num, [range_lookup])","look up a value in a table or a range by row. For example, look up a price of an automotive part by the part number."],YEAR:["YEAR(serial_number)","Returns the year corresponding to a date. The year is returned as an integer in the range 1900-9999."]}},v=d.pqPager.regional.en={strDisplay:"Displaying {0} to {1} of {2} items.",strFirstPage:"First Page",strLastPage:"Last Page",strNextPage:"Next Page",strPage:"Page {0} of {1}",strPrevPage:"Previous Page",strRefresh:"Refresh",strRpp:"Records per page: {0}"},o.extend(d.pqGrid.defaults,p),o.extend(d.pqPager.defaults,v)},405:(K,U,D)=>{var o,d,p,v,y=y||D(259);p=(d=(o=y).paramquery).pqGrid.regional.ja={strLocal:"ja",strAdd:"\u8ffd\u52a0",strBlanks:"(Blanks)",strDelete:"\u524a\u9664",strEdit:"\u7de8\u96c6",strCondition:"Condition:",strConditions:{"":"--None--",begin:"Begins with",between:"In between",contain:"Contains",equal:"Equals",empty:"Empty",end:"Ends With",great:"Greater than",gte:"Greater than or equal",less:"Less than",lte:"Less than or equal",notbegin:"Not begins with",notcontain:"Not contains",notequal:"Not equals",notempty:"Not empty",notend:"Not ends with",range:"[ Range ]",regexp:"Regular expression"},strOk:"Ok",strClear:"Clear",strTabRemove:"{0} would be deleted permanently.\r\n Are you sure?",strTabName:"sheet{0}",strTabAdd:"New sheet",strTabClose:"Remove sheet",strGroup_header:"Drag a column here to group by that column",strGroup_merge:"Merge cells",strGroup_fixCols:"Fix columns",strGroup_grandSummary:"Grand summary",strTP_aggPane:"Aggregates",strTP_colPane:"Group columns",strTP_pivot:"Pivot mode",strTP_rowPane:"Group rows",strTP_aggPH:"Drop columns for computing aggregate values",strTP_colPH:"Drop columns here for grouping along column or x axis",strTP_rowPH:"Drop columns here for grouping along row or y axis",strLoading:"\u30ed\u30fc\u30c9\u4e2d",strNextResult:"\u6b21\u306e\u7d50\u679c",strNoRows:"\u8868\u793a\u3059\u308b\u884c\u304c\u3042\u308a\u307e\u305b\u3093\u3002",strNothingFound:"\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002",strPrevResult:"\u524d\u306e\u7d50\u679c",strSearch:"\u691c\u7d22",strSelectAll:"Select All",strSelectedmatches:"",strFormulas:{ABS:["ABS(number)","Returns the absolute value of a number. The absolute value of a number is the number without its sign."],ACOS:["ACOS(number)","Returns the arccosine, or inverse cosine, of a number. The arccosine is the angle whose cosine is number. The returned angle is given in radians in the range 0 (zero) to pi."],AND:["AND(logical1, [logical2], ...)","Returns TRUE if all its arguments evaluate to TRUE, and returns FALSE if one or more arguments evaluate to FALSE."],ASIN:["ASIN(number)","Returns the arcsine, or inverse sine, of a number. The arcsine is the angle whose sine is number. The returned angle is given in radians in the range -pi/2 to pi/2."],ATAN:["ATAN(number)","Returns the arctangent, or inverse tangent, of a number. The arctangent is the angle whose tangent is number. The returned angle is given in radians in the range -pi/2 to pi/2."],AVERAGE:["AVERAGE(number1, [number2], ...)","Returns the average (arithmetic mean) of the arguments. For example, if the range A1:A20 contains numbers, the formula =AVERAGE(A1:A20) returns the average of those numbers."],AVERAGEIF:["AVERAGEIF(range, criteria, [average_range])","Returns the average (arithmetic mean) of all the cells in a range that meet a given criteria."],AVERAGEIFS:["AVERAGEIFS(average_range, criteria_range1, criteria1, [criteria_range2, criteria2], ...)","Returns the average (arithmetic mean) of all cells that meet multiple criteria."],CEILING:["CEILING(number, significance)","Returns number rounded up, away from zero, to the nearest multiple of significance. For example, if you want to avoid using pennies in your prices and your product is priced at $4.42, use the formula =CEILING(4.42,0.05) to round prices up to the nearest nickel."],CHAR:["CHAR(number)","Returns the character specified by a number."],CHOOSE:["CHOOSE(index_num, value1, [value2], ...)","If index_num is 1, CHOOSE returns value1; if it is 2, CHOOSE returns value2; and so on."],CODE:["CODE(text)","Returns a numeric code for the first character in a text string."],COLUMN:["COLUMN()","Returns reference of the cell in which the COLUMN function appears."],COLUMNS:["COLUMNS(array)","Returns the number of columns in an array or reference."],CONCATENATE:["CONCATENATE(text1, [text2], ...)","join two or more text strings into one string."],COS:["COS(number)","Returns the cosine of the given angle(in radians)."],COUNT:["COUNT(value1, [value2], ...)","Counts the number of cells that contain numbers, and counts numbers within the list of arguments."],COUNTA:["COUNTA(value1, [value2], ...)","The COUNTA function counts the number of cells that are not empty in a range."],COUNTBLANK:["COUNTBLANK(range)","Counts empty cells in a specified range of cells."],COUNTIF:["COUNTIF(range, criteria)","counts the number of cells that meet a criterion; for example, to count the number of times a particular city appears in a customer list."],COUNTIFS:["COUNTIFS(criteria_range1, criteria1, [criteria_range2, criteria2]\u2026)","Applies criteria to cells across multiple ranges and counts the number of times all criteria are met."],DATE:["DATE(year,month,day)","returns the sequential serial number that represents a particular date."],DATEDIF:["DATEDIF(start_date,end_date,unit)","Calculates the number of days, months, or years between two dates. Unit can be 'Y', 'M' or 'D'."],DATEVALUE:["DATEVALUE(date_text)",'converts a date that is stored as text to a serial number that Excel recognizes as a date. For example, the formula =DATEVALUE("1/1/2008") returns 39448.'],DAY:["DAY(serial_number)","Returns the day of a date, represented by a serial number."],DAYS:["DAYS(end_date, start_date)","Returns the number of days between two dates."],DEGREES:["DEGREES(angle)","Converts radians into degrees."],EOMONTH:["EOMONTH(start_date, months)","Returns the serial number for the last day of the month that is the indicated number of months before or after start_date."],EXP:["EXP(number)","Returns e raised to the power of number. "],FIND:["FIND(find_text, within_text, [start_num])","Locates one text string within a second text string, and return the number of the starting position of the first text string from the first character of the second text string."],FLOOR:["FLOOR(number, significance)","Rounds number down, toward zero, to the nearest multiple of significance."],HLOOKUP:["HLOOKUP(lookup_value, table_array, row_index_num, [range_lookup])","Searches for a value in the top row of a table or an array of values, and then returns a value in the same column from a row you specify in the table or array."],HOUR:["HOUR(serial_number)","Returns the hour of a time value. The hour is given as an integer, ranging from 0 (12:00 A.M.) to 23 (11:00 P.M.)."],IF:["IF(logical_test, value_if_true, [value_if_false])","returns one value if a condition is true and another value if it's false."],INDEX:["INDEX(array, row_num, [column_num])","Returns the value of an element in a table or an array, selected by the row and column number indexes."],INDIRECT:["INDIRECT(ref_text, [a1])","Returns the reference specified by a text string. References are immediately evaluated to display their contents."],ISBLANK:["ISBLANK(value)","Returns TRUE if the value is blank"],LARGE:["LARGE(array, k)","Returns the k-th largest value in a data set."],LEFT:["LEFT(text, [num_chars])","returns the first character or characters in a text string, based on the number of characters you specify."],LEN:["LEN(text)","returns the number of characters in a text string."],LOOKUP:["LOOKUP(lookup_value, lookup_vector, [result_vector])","Looks in a one-row or one-column range (known as a vector) for a value and returns a value from the same position in a second one-row or one-column range."],LOWER:["LOWER(text)","Converts all uppercase letters in a text string to lowercase."],MATCH:["MATCH(lookup_value, lookup_array, [match_type])","Searches for a specified item in a range of cells, and then returns the relative position of that item in the range. match_type can be: 0 for exact match with option to use wildcards; 1 ( default ) for less than, The values in the lookup_array argument must be placed in ascending order; -1 for greater than, values in the lookup_array argument must be placed in descending order."],MAX:["MAX(number1, [number2], ...)","Returns the largest value in a set of values."],MEDIAN:["MEDIAN(number1, [number2], ...)","Returns the median of the given numbers. The median is the number in the middle of a set of numbers."],MID:["MID(text, start_num, num_chars)","returns a specific number of characters from a text string, starting at the position you specify, based on the number of characters you specify."],MIN:["MIN(number1, [number2], ...)","Returns the smallest number in a set of values."],MODE:["MODE(number1,[number2],...)","Returns the most frequently occurring, or repetitive, value in an array or range of data."],MONTH:["MONTH(serial_number)","Returns the month of a date represented by a serial number. The month is given as an integer, ranging from 1 (January) to 12 (December)."],OR:["OR(logical1, [logical2], ...)","returns TRUE if any of its arguments evaluate to TRUE, and returns FALSE if all of its arguments evaluate to FALSE."],PI:["PI()","Returns the number 3.14159265358979, the mathematical constant pi."],POWER:["POWER(number, power)","Returns the result of a number raised to a power."],PRODUCT:["PRODUCT(number1, [number2], ...)","multiplies all the numbers given as arguments and returns the product. PRODUCT(A1:A3, C1:C3) is equivalent to =A1 * A2 * A3 * C1 * C2 * C3."],PROPER:["PROPER(text)","Capitalizes the first letter in each word of a text value."],RADIANS:["RADIANS(angle)","Converts degrees into radians."],RAND:["RAND()","Returns an evenly distributed random real number greater than or equal to 0 and less than 1."],RANK:["RANK(number,ref,[order])","Returns the rank of a number in a list of numbers."],RATE:["",""],REPLACE:["REPLACE(old_text, start_num, num_chars, new_text)","replaces part of a text string, based on the number of characters you specify, with a different text string."],REPT:["REPT(text, number_times)","Repeats text a given number of times."],RIGHT:["RIGHT(text,[num_chars])","returns the last character or characters in a text string, based on the number of characters you specify."],ROUND:["ROUND(number, num_digits)","rounds a number to a specified number of digits."],ROUNDDOWN:["ROUNDDOWN(number, num_digits)","Rounds a number down, toward zero."],ROUNDUP:["ROUNDUP(number, num_digits)","Rounds a number up, away from 0 (zero)."],ROW:["ROW()","Returns the reference of the cell in which the ROW function appears."],ROWS:["ROWS(array)","Returns the number of rows in a reference or array."],SEARCH:["SEARCH(find_text,within_text,[start_num])","locate one text string within a second text string, and return the number of the starting position of the first text string from the first character of the second text string."],SIN:["SIN(number)","Returns the sine of the given angle(in radians)."],SMALL:["SMALL(array, k)","Returns the k-th smallest value in a data set."],SQRT:["SQRT(number)","Returns a positive square root."],STDEV:["STDEV(number1,[number2],...)","Estimates standard deviation based on a sample. The standard deviation is a measure of how widely values are dispersed from the average value (the mean)."],STDEVP:["STDEVP(number1,[number2],...)","Calculates standard deviation based on the entire population given as arguments."],SUBSTITUTE:["SUBSTITUTE(text, old_text, new_text, [instance_num])","Substitutes new_text for old_text in a text string."],SUM:["SUM(number1,[number2],...)","Adds its arguments. You can add individual values, cell references or ranges or a mix of all three."],SUMIF:["SUMIF(range, criteria, [sum_range])","adds the values in a range that meet criteria that you specify"],SUMIFS:["SUMIFS(sum_range, criteria_range1, criteria1, [criteria_range2, criteria2], ...)","adds all of its arguments that meet multiple criteria."],SUMPRODUCT:["SUMPRODUCT(array1, [array2], [array3], ...)","Multiplies corresponding components in the given arrays, and returns the sum of those products."],TAN:["TAN(number)","Returns the tangent of the given angle(in radians)."],TEXT:['TEXT(Value you want to format, "Format code you want to apply")',"The TEXT function lets you change the way a number appears by applying formatting to it with format codes."],TIME:["TIME(hour, minute, second)","Returns the decimal number for a particular time."],TIMEVALUE:["TIMEVALUE(time_text)","Returns the decimal number of the time represented by a text string. The decimal number is a value ranging from 0 (zero) to 0.99988426, representing the times from 0:00:00 (12:00:00 AM) to 23:59:59 (11:59:59 P.M.)."],TODAY:["TODAY()","Returns the serial number of the current date."],TRIM:["TRIM(text)","Removes all spaces from text except for single spaces between words."],TRUNC:["TRUNC(number, [num_digits])","Truncates a number to an integer by removing the fractional part of the number."],UPPER:["UPPER(text)","Converts text to uppercase."],VALUE:["VALUE(text)","Converts a text string that represents a number to a number."],VAR:["VAR(number1,[number2],...)","Estimates variance based on a sample."],VARP:["VARP(number1,[number2],...)","Calculates variance based on the entire population."],VLOOKUP:["VLOOKUP (lookup_value, table_array, col_index_num, [range_lookup])","look up a value in a table or a range by row. For example, look up a price of an automotive part by the part number."],YEAR:["YEAR(serial_number)","Returns the year corresponding to a date. The year is returned as an integer in the range 1900-9999."]}},v=d.pqPager.regional.ja={strDisplay:" {2} \u9805\u76ee\u4e2d\u3000{0} \u304b\u3089 {1}\u3000\u3092\u3000\u8868\u793a",strFirstPage:"\u6700\u521d",strLastPage:"\u6700\u5f8c",strNextPage:"\u6b21",strPage:"{0}\u3000/ {1}  \u30da\u30fc\u30b8",strPrevPage:"\u524d",strRefresh:"\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5",strRpp:"\uff11\u30da\u30fc\u30b8\u3042\u305f\u308a\u306e\u30ec\u30b3\u30fc\u30c9: {0}"},o.extend(d.pqGrid.defaults,p),o.extend(d.pqPager.defaults,v)},237:(module,__unused_webpack_exports,__webpack_require__)=>{(function(_a,_b){var jQuery,pq,JSZip,jQuery,pq,JSZip,K,U,D;jQuery=__webpack_require__(391),pq={},JSZip=__webpack_require__(650),module.exports=pq,pq.mixin={render:{getRenderVal:function(K,U,D){var y=K.column,o=y[_b(0)];return(U&&!1!==o||o)&&(y.render||y._render||y.format||y._renderG)?D.renderCell(K):[K.rowData[K.dataIndx],""]},getTitle:function(K,U){var D=K.title;return null!=D?"function"==typeof D&&(D=D.call(this.that,{colIndx:U,column:K,dataIndx:K.dataIndx,Export:!0})):D="",D}},GrpTree:{buildCache:function(){for(var K,U,D=this,o=D.isTree,d=o?D.that.options.dataModel.data:D.that.pdata,g=D.cache={},p=D.id,v=0,M=d.length;v<M;v++)if(K=d[v],o||K.pq_gtitle){if(null==(U=K[p]))throw"unknown id of row";g[U]=K}},cascadeInit:function(){if(this[_b(1)]()){for(var K,U=this,D=[],y=U.cbId,d=U.Model.select,g=U.that.pdata,p=0,v=g.length;p<v;p++)(K=g[p])[y]?U.isEditable(K)?(D.push(K),delete K[y]):d&&(K[_b(2)]=!0):null===K[y]&&delete K[y];D.length&&U.checkNodes(D,null,null,!0)}},cascadeNest:function(K){for(var U,D,y,o=this,d=o.cbId,g=o.prop,p=o.childstr,v=K.length,M=0;M<v;M++)(D=K[M])[g]&&(U=!0,o.eachChild(D,o[_b(3)](d,D[d],g)),delete D[g]),(y=D[p])&&y.length&&o[_b(4)](y);U&&o.hasParent(D)&&o.eachParent(D,o[_b(5)](d))},checkAll:function(K,U){return this.checkNodes(this.that.pdata,K=null==K||K,U,null,!0)},checkNodes:function(K,U,D,y,o){var d,g,p,v=0,M=K.length,T=[],I={check:U=null==U||U},P=this,N=P.that,V=N.riOffset,J=P.cbId,W=P.prop,ce=P.Model,re=!o&&P.isCascade(ce);for(o=y&&ce[_b(6)]||!y,ce=ce.select;v<M;v++)this.isEditable(d=K[v])&&T.push({rowData:d,rowIndx:g=d.pq_ri,rowIndxPage:g-V});if(I.rows=T,I.dataIndx=P.colUI.dataIndx,y&&(I.init=y),!1!==(p=o?N._trigger("beforeCheck",D,I):p)&&(M=(T=I.rows).length)){var ie=this.chkRows=[];for(v=0;v<M;v++)d=T[v].rowData,re&&(d[W]=!0),ie.push({rd:d,val:U,oldVal:d[J]}),d[J]=U;re&&P[_b(4)](P.getRoots()),ce&&this.selectRows(),re&&(I[_b(7)]=P[_b(7)](P)),o&&N._trigger("check",D,I),ie.length=0}P.setValCBox(),y||N.refresh({header:!1})},chkEachChild:function(K,U,D){return function(y){var o;!this.isEditable(y)||D&&y[D]||(o=y[K],null!==U&&o!==U&&(this.chkRows.push({rd:y,val:U,oldVal:o}),y[K]=U))}},chkEachParent:function(K){var U=this.childstr;return function(D){if(this.isEditable(D)){for(var y,o,d=D[U],g=0,p=0,v=D[K],M=0,T=d.length;M<T;M++)if(this.isEditable(o=d[M])){if(o=o[K])g++;else{if(null===o){y=null;break}p++}if(g&&p){y=null;break}}v!==(y=void 0===y?!!g:y)&&(this.chkRows.push({rd:D,val:y,oldVal:v}),D[K]=y)}}},eachChild:function(K,U,D){U.call(this,K,D);for(var y,o=this.childstr,d=K[o]||[],g=0,p=d.length;g<p;g++)(y=d[g])[o]?this.eachChild(y,U,K):U.call(this,y,K)},eachParent:function(K,U){for(;K=this.getParent(K);)U.call(this,K)},_flatten:function(K,U,D,y){for(var o,d,g=K.length,p=this.id,v=this.parentId,M=0,T=this.childstr;M<g;M++)(o=K[M]).pq_level=D,y.push(o),U&&(o[v]=p?U[p]:U),(d=o[T])&&this._flatten(d,o,D+1,y)},flatten:function(K){var U=[];return this._flatten(K,null,0,U),U},getUniqueNodes:function(K){var U=[],D={},y=this.parentId,o=this.id;return K.forEach(function(d){null!=d[o]&&(D[d[o]]=1)}),K.forEach(function(d){D[d[y]]||U.push(d)}),U},getCascadeInit:function(){var K=this[_b(8)];return this[_b(8)]=!0,K},getNode:function(K){return this.cache[K]},getParent:function(K){return this.cache[K=K[this.parentId]]},fillState:function(K){var U,D,y=this.childstr,o=this.cache;for(U in o)(D=o[U])[y]&&(K[U]=D.pq_close||!1);return K},hasParent:function(K){return null!=K[this.parentId]},getRoots:function(K){for(var U,y=K||this.that.pdata||[],o=y.length,d=0,g=[];d<o;d++)0!==(U=y[d]).pq_level||U[_b(9)]||g.push(U);return o&&!g.length?y:g},setCascadeInit:function(K){this[_b(8)]=K},getCascadeList:function(K){var U=[];return function(){if(!U.length)for(var D=K.chkRows,y=0,o=K.cbId,d=D.length;y<d;y++){var g=D[y],p=g.rd,v=p.pq_ri,M={},T={};M[o]=g.val,T[o]=g.oldVal,U.push({rowIndx:v,rowData:p,newRow:M,oldRow:T})}return U}},getChildren:function(K){return(K?K[this.childstr]:this.getRoots())||[]},getChildrenAll:function(K,U){for(var D,y=this.childstr,o=K[y]||[],d=o.length,g=0,p=U||[];g<d;g++)p.push(D=o[g]),D[y]&&this[_b(10)](D,p);return p},getSummary:function(K){return K[_b(11)]},isAncestor:function(K,U){for(var D=K;D=this.getParent(D);)if(D==U)return!0},isEmpty:function(K){return!(K[this.childstr]||[]).length},isCascade:function(K){return K.cascade&&K.checkbox&&!K.maxCheck},isEditable:function(K){if(K[_b(9)])return!1;var D=this.colCB;return!D||!(D=D.editable)||("function"==typeof D?D.call(this.that,{rowData:K}):D)},isFolder:function(K){return null!=K.pq_close||!!K[this.childstr]},onCheckbox:function(K,U){return function(D,y){U.checkbox&&K.colUI==y.column&&K.checkNodes([y.rowData],y.input.checked,D)}},onCMInit:function(){var K,U,D=this,y=(d=D.that).columns,o=D.isTree,d=d.colModel,g=D.Model;g[_b(12)]&&d&&(d=d.find(function(p){return!p.hidden}),g.titleIndx=d.dataIndx=(null==d.dataIndx?Math.random():d.dataIndx).toString()),g.checkbox&&y&&((U=y[g.cbId]||{dataIndx:g.cbId}).cb={check:!0,uncheck:!1,select:g.select,header:g[_b(13)],maxCheck:g.maxCheck},K=o?y[g.dataIndx]:y[g.titleIndx]),D.colCB=U,D.colUI=K,y&&o&&D[_b(14)]()},onCustomSortTree:function(K,U){var D=this.getRoots(U.data);return this.sort(D,U[_b(15)]),U.data=this.flatten(D),!1},onRefresh:function(K,U){return function(){if(U.checkbox)for(var D=this.$cont.find(".pq_indeter"),y=D.length;y--;)D[y][_b(16)]=!0}},refreshView:function(K){this.that[_b(17)]({header:!1,source:K})},renderCB:function(K,U,D){if(U[_b(9)])return"";var y,d="",g="",p="";return(K="function"==typeof K?K.call(this.that,U):K)?(U[D]&&(d="checked"),this.isEditable(U)||(g="disabled",y="pq_disable"),[_a(0)+(p=null===U[D]?"class='pq_indeter'":p)+" "+d+" "+g+"/>",y]):void 0},selectRows:function(){for(var K=0,U=this.chkRows,D=U.length;K<D;K++){var y=(o=U[K]).rd,o=o.val;y[_b(2)]=o}},sort:function(K,U){function D(){return"function"==typeof U?U:U.shift()}var y=this.childstr;!function o(d,g){var p,v=d.length,M=0;if(v)for(g&&d.sort(g),g=D();M<v;M++)(p=d[M][y])&&o(p,g)}(K,D())},copyArray:function(K,U){for(var D=0,y=U.length;D<y;D++)K.push(U[D])},_summaryT:function(K,U,D,y,o,d,g){for(var p,v,M,T,I,P=this,N=P.childstr,V=P.isGroup,J=P.isTree,W=d[_b(18)],re=d[_b(19)],ce=!d[_b(20)],ie=d.titleIndx,ae=0,we=K.length,Me=0,Pe={},Ve={},le=P.id,st=P.parentId,We=V&&g?d.dataIndx[g.pq_level]:"",at=[],Te=D.length,qe=pq.aggregate;Me<Te;Me++)Pe[I=D[Me]]=[];for(;ae<we;ae++){if(U.push(v=K[ae]),M=v[N]){for(p=P._summaryT(M,U,D,y,o,d,v),Me=0;Me<Te;Me++)P.copyArray(Pe[I=D[Me]],p[1][I]);P.copyArray(at,p[2])}if(J&&(!W||!P.isFolder(v))||V&&!v.pq_gtitle){for(Me=0;Me<Te;Me++)Pe[I=D[Me]].push(v[I]);at.push(v)}}for(Ve.pq_level=g?g.pq_level:0,d[_b(21)]&&(Ve[_b(22)]=!0),g&&(J&&!W||V&&re[g.pq_level])&&(Ve[st]=g[le],ce||1<we?U.push(Ve):Ve.pq_ghidden=!0,(g[_b(11)]=Ve).pq_hidden=g.pq_close),Me=0;Me<Te;Me++)T=(T=y[Me])[We]||T.type,Ve[I=D[Me]]=qe[T](Pe[I],o[Me],at,Ve),W&&g&&I!=ie&&(g[I]=Ve[I]);return Ve[_b(9)]=!0,[Ve,Pe,at]},summaryT:function(){for(var K,U,D=this,y=D.that,o=y.options,d=D.Model,g=D.getRoots(),p=[],v=[],M=[],T=[],I=0,P=y.colModel,N=P.length;I<N;I++)(U=(K=P[I]).summary)&&U.type&&(M.push(K.dataIndx),T.push(K),v.push(U));g=D._summaryT(g,p,M,v,T,d)[0],d[_b(21)]?D[_b(23)]=o[_b(23)]=[g]:(D[_b(23)]||[]).length=0,y.pdata=p}}},K=jQuery,U=pq.mixin,D=!0,K(document).one("pq:ready",function(){var y=K(_a(1)).appendTo(document.body);y[0][_b(16)]=!0,y.on("change",function(){D=!1}),y.click(),y.remove()}),U.ChkGrpTree={onCellKeyDown:function(y,o){var d=this.colUI;if(d&&o.dataIndx==d.dataIndx&&32==y.keyCode)return this.that.getCell(o).find("input").click(),!1},getCheckedNodes:function(T){var o,d=this.that,g=T?d.getData():d.options.dataModel.data,p=g.length,v=0,M=[],I=((T=this.colCB||{}).cb||{}).check,P=T.dataIndx;if(null!=P)for(;v<p;v++)(o=g[v])[P]===I&&M.push(o);return M},hasCboxHead:function(){return((this.colCB||{}).cb||{}).header},isHeadChecked:function(){return this.inpVal},onBeforeCheck:function(y,o){var d,g,p,v,M,T,I;o.check&&this.colCB&&(g=(d=(T=this.colCB).cb).select,(p=d.maxCheck)&&this.colUI.dataIndx==o.dataIndx&&(I=(v=o.rows.slice(0,p)).length,M=T.dataIndx,0<(I=I+(T=this[_b(24)](!0)).length-p)&&T.slice(0,I).forEach(function(P){P[M]=d.uncheck,g&&delete P[_b(2)]}),o.rows=v))},onHeaderChange:function(y){!1===this.checkAll(y.target.checked,y)&&this[_b(25)]()},onRefreshHeader:function(){var y,o=this,d=o.that;o[_b(26)]()&&("groupModel"!=o.model||d.options[o.model].on)&&(d=d[_b(27)]({dataIndx:o.colUI.dataIndx}),(y=d.find("input")).length||(d.find(".pq-title-span").prepend(_a(2)),y=d.find("input")),o.$inp&&y[0]==o.$inp[0]||(o.$inp=y,o[_b(25)](),D&&y.on("click",function(g){null==y.data("pq_value")&&(y[0].checked=!0,y.data("pq_value",!0),o[_b(28)](g))}),y.on("change",function(g){o[_b(28)](g)})))},refreshHeadVal:function(){this.$inp&&this.$inp.pqval({val:this.inpVal})},setValCBox:function(){if(this[_b(26)]()){var y,o=this.that,d=o.options,g=this.colCB,p=g.dataIndx,v=o.colIndxs[p],M=g.cb,P=M.all,T="remote"!=d.pageModel.type&&P?0:o.riOffset,I=P?d.dataModel.data:o.pdata,N=(P=null,0),V=0,J=0;if(I){for(var W=0,re=I.length;W<re;W++)(y=I[W])[_b(9)]||y.pq_gtitle||!this.isEditable(y,g,W+T,v,p)||(V++,y[p]===M.check?N++:J++);N==V&&V?P=!0:J==V&&(P=!1),this.inpVal=P,this[_b(25)]()}}},unCheckAll:function(){this.checkAll(!1)},unCheckNodes:function(y,o){this.checkNodes(y,!1,o)}},function(K){function U(y,o,d,g){for(var p=o.slice(),v=0,M=p.length,T=[];v<M;v++){var I=p[v],P=I.cb,N=I.one;if(N){if(I._oncerun)continue;I._oncerun=!0}if(!1===P.call(y,d,g)&&(d[_b(29)](),d[_b(30)]()),N&&T.push(v),d[_b(31)]())break}if(M=T.length)for(v=M-1;0<=v;v--)p.splice(T[v],1)}var D=((D=K.paramquery=K.paramquery||{})._trigger=function(y,o,d){var g,p,v=this,M=v.listeners,T=M[y],I=v.options,P=I.allEvents,N=I.bubble,V=v.element,J=I[y];if(d=d||{},(o=K.Event(o)).type=v.widgetName+":"+y,o.target=V[0],p=o[_b(32)])for(g in p)g in o||(o[g]=p[g]);return P&&"function"==typeof P&&P.call(v,o,d),T&&T.length&&(U(v,T,o,d),o[_b(31)]())||I.trigger&&(V[N?"trigger":"triggerHandler"](o,d),o[_b(31)]())||(J&&!1===J.call(v,o,d)&&(o[_b(29)](),o[_b(30)]()),(T=M[y+"Done"])&&T.length&&U(v,T,o,d)),!o[_b(33)]()},D.on=function(){for(var y,o,d,g,p,v,M,T,I=arguments,P=(g="boolean"==typeof I[0]?(y=I[0],o=I[1],d=I[2],I[3]):(o=I[0],d=I[1],I[2]),o.split(" ")),N=0;N<P.length;N++){var V=P[N];V&&(v=d,M=g,T=y,((p=this).listeners[V=V]||(p.listeners[V]=[]))[T?"unshift":"push"]({cb:v,one:M}))}return this},D.one=function(){for(var y=arguments.length,o=[],d=0;d<y;d++)o[d]=arguments[d];return o[y]=!0,this.on.apply(this,o)},D.off=function(y,o){for(var d=y.split(" "),g=0;g<d.length;g++){var p=d[g];if(p){N=P=I=T=void 0;var M=o;if(M){var T=this.listeners[p];if(T){for(var I=[],P=0,N=T.length;P<N;P++)M==T[P].cb&&I.push(P);if(I.length)for(P=I.length-1;0<=P;P--)T.splice(I[P],1)}}else delete this.listeners[p]}}return this},{options:{items:_a(3),position:{my:"center top",at:"center bottom"},content:function(){var d,g,y=K(this),o=(d=(g=y.closest(".pq-grid").pqGrid("instance"))[_b(34)]({$td:y})).rowIndx;return(g=g.data({rowIndx:o,dataIndx:d=d.dataIndx,data:"pq_valid"}).data)?(""==(o=g.icon)?"":_a(4)+o+_a(5))+(d=null!=(d=g.msg)?d:""):y.attr("title")}}});D._create=function(){this._super();var y=this.element,o=this[_b(35)];y.on("pqtooltipopen"+o,function(T,g){var p,v,M=K(T.target);(T=K(T[_b(32)].target)).on("remove.pqtt",function(I){M.pqTooltip("close",I,!0)}),M.is(".pq-grid")&&(v=(T=(p=M.pqGrid("instance"))[_b(34)]({$td:T})).rowIndx,T=T.dataIndx,(p=p.getRowData({rowIndx:v}))&&(p=p[_b(36)])&&(p=p[T])&&(p=p.pq_valid)&&(T=(v=p).style,g.tooltip.addClass(p=v.cls),v=g.tooltip.attr("style"),g.tooltip.attr("style",v+";"+T)))}),y.on("pqtooltipclose"+o,function(d,g){K(d.target),K(d[_b(32)].target).off(".pqtt")})},K.widget("paramquery.pqTooltip",K.ui.tooltip,D)}(jQuery),function(K){var U,D,y,o,d,g,p,v,M,T,I,P=K.paramquery,N=Array.prototype,V=(N.find||(N.find=function(ie,ae){for(var we,Me=0,Pe=this.length;Me<Pe;Me++)if(ie.call(ae,we=this[Me],Me,this))return we}),N.findIndex||(N.findIndex=function(ie,ae){for(var Me=0,Pe=this.length;Me<Pe;Me++)if(ie.call(ae,this[Me],Me,this))return Me;return-1}),K.extend(pq,{arrayUnique:function(ie,ae){for(var we,Me,Pe=[],Ve=ie.length,le={},st=0;st<Ve;st++)we=ie[st],1!=le[Me=ae?we[ae]:we]&&(le[Me]=1,Pe.push(we));return Pe},cap1:function(ie){return ie&&ie.length?ie[0][_b(37)]()+ie.slice(1):""},elementFromXY:function(Me){var ae,we=Me.clientX,Pe=(Me=Me.clientY,K(document[_b(38)](we,Me)));return Pe.closest(_a(6)).length&&((ae=Pe).hide(),Pe=K(document[_b(38)](we,Me)),ae.show()),Pe},getFocusEle:function(ie){var ae=["a","textarea","button","input","select","[tabindex]"].map(function(Pe){return Pe+_a(7)}).join(","),we=document[_b(39)];if(we){var Me=(ae=[].filter.call(K(ae),function(Ve){return 0<Ve[_b(40)]||0<Ve[_b(41)]||Ve==we})).indexOf(we);if(-1<(Me=-1==Me?ae.indexOf(K(we).closest("[tabindex=0]")[0]):Me))return ie?ae[Me-1]:ae[Me+1]}},focusEle:function(ie){return(ie=this[_b(42)](ie))&&ie.focus(),ie},escapeHtml:function(ie){return ie.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},excelToJui:(p={},function(ie){var ae=p[ie];return ae||(ae=ie.replace(/yy/g,"y").replace(/dddd/g,"DD").replace(/ddd/g,"D").replace(/mmmm/g,"MM").replace(/mmm/g,"M"),p[ie]=ae),ae}),excelToNum:(g={},function(ie){var ae=g[ie];return ae||(ae=ie.replace(/\\/g,""),g[ie]=ae),ae}),extend:function(ie,ae,we){function Me(){}Me.prototype=ie.prototype;var Pe,Ve=ae.prototype=new Me,le=ie.prototype;for(Pe in we){var st=le[Pe],We=we[Pe];Ve[Pe]=st?function(at,Te){return function(){var qe,Bt=this._super;return this._super=function(){return at.apply(this,arguments)},qe=Te.apply(this,arguments),this._super=Bt,qe}}(st,We):We}Ve.constructor=ae,Ve._base=ie,Ve._bp=function(at){var Te=arguments;return Array.prototype.shift.call(Te),le[at].apply(this,Te)}},copyObj:function(ie,ae,we){var Me,Pe,Ve=pq.objectify(we);for(Me in ae)Ve[Me]||(Pe=ae[Me],ie[Me]=K[_b(43)](Pe)?K.extend(!0,{},Pe):Pe);return ie},extendT:function(ie,ae){var we,Me;for(we in ae)void 0===ie[we]&&((Me=Object[_b(44)](ae,we)).get||Me.set?Object[_b(45)](ie,we,Me):ie[we]=(Me=ae[we])&&"object"==typeof Me?K.extend(!0,{},Me):Me);return ie},flatten:function(ie,ae){var we,Me=0,Pe=ie.length;for(ae=ae||[];Me<Pe;Me++)null!=(we=ie[Me])&&(we.push?pq.flatten(we,ae):ae.push(we));return ae},toRC:function(we){we=we.match(/([A-Z]*)(\d*)/);var ae,Me=pq.toNumber(we[1]);return[ae=we[2]?we[2]-1:ae,Me]},formatEx:function(ie,ae,we,Me){return we&&(Me=Me||pq[_b(46)](ie),pq.filter.conditions[we][Me])?this.format(ie,ae,Me):ae},format:function(ie,ae,we){var Me=ie.format;if(Me&&null!=ae){if("function"==typeof Me)return Me(ae);if("date"==(we=we||pq[_b(46)](ie)))try{var Pe=new Date(ae);Pe&&!isNaN(Pe.getTime())&&(ae=K.datepicker.formatDate(Me,Pe))}catch(Ve){}else ae=pq[_b(47)](ae,Me)}return ae},onResize:function(ie,ae){ie[_b(48)]?ie[_b(48)]("onresize",ae):window[_b(49)]?new(window[_b(49)])(ae).observe(ie):window[_b(50)]?window[_b(50)](ie,ae):K(ie).resize(ae)},fileRead:function(ie,ae,we){var Me=new FileReader;Me[ae](ie),Me.onload=function(){we(Me.result)}},fileToBase:function(ie,ae){pq.fileRead(ie,"readAsDataURL",ae)},xmlhttp:function(ie,ae,we){var Me=new XMLHttpRequest;Me.onload=function(){we(Me.response)},Me.open("GET",ie),Me[_b(51)]=ae,Me.send()},urlToBase:function(ie,ae){pq.xmlhttp(ie,"blob",function(we){pq.fileToBase(we,ae)})},objectAttr:function(ie){ie&&ie.split(" ")},deFormat:function(ie,ae,we){if(ae){var Me,Pe,Ve=ie.format;if(Ve&&(Pe=pq[_b(46)](ie),!we||pq.filter.conditions[we][Pe]))try{"function"==typeof Ve?ae=ie.deFormat(ae):"date"==Pe?(Me=ie.formatRaw||"mm/dd/yy")!=Ve&&(ae=K.datepicker.parseDate(Ve,ae),ae=K.datepicker.formatDate(Me,ae)):ae=pq[_b(52)](ae,Ve)}catch(le){ae=null}}return ae},fakeEvent:function(ie,ae,we){var Me;"timeout"==ae&&ie.off(ae="keyup change").on(ae,function(){clearTimeout(Me),Me=setTimeout(function(){ie[_b(53)]("timeout")},we)})},getAddress:function(le){le=le.split(":");var ae,we,Me=(Pe=this.toRC(le[0]))[0],Pe=Pe[1],Ve=(le=this.toRC(le[1]||le[0]))[0];return le=le[1],{r1:Me,c1:Pe,rc:ae=isNaN(Ve)?ae:Ve-Me+1,cc:we=isNaN(le)?we:le-Pe+1,r2:Ve,c2:le}},getClsVal:function(ie,ae){return(ie=ie.match(new RegExp("\\b"+ae+"(\\S+)\\b")))?ie[1]:null},getDataType:function(we){var ae;return"bool"==(we=we.dataType)?ae="bool":"float"==we||"integer"==we?ae="number":"date"==we&&(ae="date"),ae||"string"},getFn:(d={},function(ie){var ae=ie;return"string"!=typeof ie||(ae=d[ie])||(ae=window,ie.split(".").forEach(function(we){ae=ae[we]}),d[ie]=ae),ae}),isCtrl:function(ie){return ie.ctrlKey||ie.metaKey},isDateFormat:(o={},function(ie){var ae=o[ie];return null==ae?o[ie]=/^[mdy\s-\/\.,]*$/i.test(ie):ae}),isEmpty:function(ie){for(var ae in ie)return!1;return!0},isObject:function(ie){return"[object Object]"===Object.prototype.toString.call(ie)},juiToExcel:(y={},function(ie){var ae=y[ie];return ae||(ae=ie.replace(/y/g,"yy").replace(/DD/g,"dddd").replace(/D/g,"ddd").replace(/MM/g,"mmmm").replace(/M/g,"mmm"),y[ie]=ae),ae}),makePopup:function(ie,ae,we){function Me(We){We&&le&&document.body.contains(ae)?st.hide():(st.remove(),K(document).off(Pe),we&&we())}var Ve,Pe="mousedown.pq"+(Ve=(Math.random()+"").replace(".",""))+" keydown.pq"+Ve,le="input"==(Ve=ae?(ae.nodeName||"")[_b(54)]():"")||"textarea"==Ve,st=K(ie);st.addClass("pq-popup").on("keydown",function(We){We.keyCode==K.ui.keyCode.ESCAPE&&Me(!0)}),K(ae).one("remove",function(){Me()}),requestAnimationFrame(function(){K(document).on(Pe,function(We){var at=K(We.target);ie.contains(at[0])||pq.isCtrl(We)||at.closest(".ui-datepicker").length||at.closest(ae).length||Me(!0)})})},moveItem:function(ie,ae,we,Me){return Me<we?(ae.splice(we,1),ae.splice(Me++,0,ie)):we==Me?Me++:(ae.splice(Me,0,ie),ae.splice(we,1)),Me},newLine:function(ie){return isNaN(ie)&&"string"==typeof ie?ie.replace(/(\r\n|\r|\n)/g,"<br>"):ie},numToExcel:(D={},function(ie){var ae=D[ie];return ae||(ae=ie.replace(/[^#0,.@%]/g,function(we){return"\\"+we}),D[ie]=ae),ae}),objectify:function(ie){for(var ae={},we=ie.length;we--;)ae[ie[we]]=1;return ae},styleObj:function(ie){var ae;return"string"==typeof ie&&(ae=ie.split(";"),ie={},ae.forEach(function(we){we&&(ae=we.split(":"))[0]&&ae[1]&&(ie[ae[0].trim()]=ae[1].trim())})),ie},tint:function(le,ae){function we(st,We){return st=st.slice(We,We+2),parseInt(st,16)}function Me(st){return st+=(255-st)*ae,(st=255<(st=Math.round(st))?255:st).toString(16)[_b(37)]()}le=le.replace(/^#/,""),ae=+ae;var Pe=we(le,0),Ve=we(le,2);return le=we(le,4),Me(Pe)+Me(Ve)+Me(le)},styleStr:function(ie){if("string"!=typeof ie){var ae,we,Me=[];for(ae in ie)(we=ie[ae])&&Me.push(ae+":"+we);ie=Me.length?Me.join(";")+";":""}return ie},escapeXml:function(ie){var ae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};return ie&&(ie+"").replace(/(&|\<|\>|"|')/g,function(we,Me){return ae[Me]})},unescapeXml:(U={amp:"&",lt:"<",gt:">",quot:'"',apos:"'"},function(ie){return ie.replace(/&(amp|lt|gt|quot|apos);/g,function(ae,we){return U[we]})})}),P.select=function(ie){var ae,Me=ie.options,Pe=ie.groupIndx,Ve=ie.labelIndx,le=ie.valueIndx,st=null!=Ve&&null!=le,We=null!=Pe,at=ie.prepend,Te=ie.dataMap,qe=["<select ",ie.attr," >"];if(at)for(var Bt in at)qe.push('<option value="',Bt,'">',at[Bt],"</option>");if(Me&&Me.length){for(var Ze=0,Zn=Me.length;Ze<Zn;Ze++){var jt=Me[Ze];if(st){var _n,Dt,It,Yn=jt[le],ei=jt[_b(55)]?'disabled="disabled" ':"",Xt=jt[_b(56)]?'selected="selected" ':"";null!=Yn&&(It=Te?function(){for(var pr={},Li=0;Li<Te.length;Li++){var Mn=Te[Li];pr[Mn]=jt[Mn]}return"data-map='"+JSON.stringify(pr)+"'"}():"",We&&(Dt=jt[_b(57)]?'disabled="disabled" ':"",ae!=(_n=jt[Pe])&&(null!=ae&&qe.push("</optgroup>"),qe.push('<optgroup label="',_n,'" ',Dt," >"),ae=_n)),Ve==le?qe.push("<option ",Xt,ei,It,">",Yn,"</option>"):qe.push("<option ",Xt,ei,It,' value="',Yn,'">',Dt=jt[Ve],"</option>"))}else if("object"==typeof jt)for(var Bt in jt)qe.push('<option value="',Bt,'">',jt[Bt],"</option>");else qe.push("<option>",jt,"</option>")}We&&qe.push("</optgroup>")}return qe.push("</select>"),qe.join("")},K.fn.pqval=function(ie){var ae;return ie?ie.incr?(ae=this.data("pq_value"),this.prop("indeterminate",!1),ae?this.prop("checked",ae=!1):!1===ae?(this.prop("indeterminate",!(ae=null)),this.prop("checked",!1)):this.prop("checked",ae=!0),this.data("pq_value",ae),ae):(this.data("pq_value",ae=ie.val),this.prop("indeterminate",!1),null===ae?(this.prop("indeterminate",!0),this.prop("checked",!1)):this.prop("checked",!!ae),this):this.data("pq_value")},P.xmlToArray=function(ie,ae){var we=ae.itemParent,Me=ae.itemNames,Pe=[];return K(ie).find(we).each(function(Ve,le){var st=K(le),We=[];K(Me).each(function(at,Te){We.push(st.find(Te).text().replace(/\r|\n|\t/g,""))}),Pe.push(We)}),Pe},P.xmlToJson=function(ie,ae){var we=ae.itemParent,Me=ae.itemNames,Pe=[];return K(ie).find(we).each(function(Ve,le){for(var st=K(le),We={},at=0,Te=Me.length;at<Te;at++){var qe=Me[at];We[qe]=st.find(qe).text().replace(/\r|\n|\t/g,"")}Pe.push(We)}),Pe},P[_b(58)]=function(Me){Me=K(Me);var ae=[],we=[],Pe=(Me=Me.children("tbody").children("tr")).length?K(Me[0]):K(),Ve=1<Me.length?K(Me[1]):K();return Pe.children("th,td").each(function(le,at){var We="left";at={title:(at=K(at)).html(),width:at.width(),dataType:"string",align:We=Ve.length&&Ve.find("td:eq("+le+")").attr("align")||We,dataIndx:le},ae.push(at)}),Me.each(function(le,st){var We;0!=le&&(le=K(st),We=[],le.children("td").each(function(at,Te){We.push(K.trim(K(Te).html()))}),we.push(We))}),{data:we,colModel:ae}},M={},function(ie,ae){var we;if(ie){if(we=ie.split(":"),we=M[ie=ae&&1<we.length?we[1]:we[0]])return we;(ae=ie.match(v=v||/^([^#0]*|&#[^#0]*)?[\,\.#0]*?([\,\s\.]?)([#0]*)(([\,\s\.])([0]+))?([^#^0]*|&#[^#]*)?$/))&&ae.length&&(M[ie]=we={symbol:ae[1]||"",thouSep:ae[2],thousand:ae[3].length,decSep:ae[5]||"",decimal:(ae[6]||[]).length,symbolEnd:ae[7]||""})}return we||{symbol:"",symbolEnd:"",thouSep:",",thousand:3,decSep:".",decimal:2}}),J=(P[_b(59)]=function(ie,ae){if(!ae||"@"==ae)return ie+"";if(ie=parseFloat(ie),!isNaN(ie)&&"Infinity"!=ie&&"-Infinity"!=ie){0<(ae||"").indexOf("%")&&(ie*=100);for(var we=ie<0,Me=(ae=V(ae,we)).symbol,Pe=ae.symbolEnd,Ve=ae.thousand,le=ae.thouSep,st=ae.decSep,We=(ie=ie.toFixed(ae=ae.decimal)).length,at=ie.substring(0,We-(ae+=st.length)),Te=(ie=ie.substring(We-ae+st.length,We),at.match(/\d/g).reverse()),qe=[],Bt=0;Bt<Te.length;Bt++)0<Bt&&Bt%Ve==0&&qe.push(le),qe.push(Te[Bt]);return(we?"-":"")+Me+(at=(qe=qe.reverse()).join(""))+st+ie+Pe}},pq[_b(47)]=P[_b(59)],pq[_b(52)]=function(ie,Pe){var we=(Pe=V(Pe,ie<0)).symbol,Me=Pe.symbolEnd,Ve=Pe.thouSep;return Pe=Pe.decSep,Ve="."===Ve?"\\.":Ve,ie=ie.replace(we,"").replace(Me,"").replace(new RegExp(Ve,"g"),""),Pe?+ie.replace(Pe,"."):ie},pq.valid={isFloat:function(ie){var ae=+ie;return!isNaN(ae)&&ae==ie},isInt:function(ie){var ae=parseInt(ie);return!isNaN(ae)&&ae==ie},isDate:function(ie){return!isNaN(Date.parse(ie))}},[]),W={},re=pq.toLetter=function(ie){var ae,we,Me=J[ie];return Me||(we=++ie%26,ae=ie/26|0,we=we?String[_b(60)](64+we):(--ae,"Z"),Me=ae?re(ae-1)+we:we,J[--ie]=Me,W[Me]=ie),Me};function ce(ie){var ae=ie.rtl;return null==ae?ie.rtl="rtl"==K(ie).css("direction"):ae}pq.toNumber=function(ie){var ae,we,Me=W[ie];if(null==Me&&ie){for(ae=ie.length,Me=-1,we=0;we<ae;we++)Me+=(ie[we].charCodeAt(0)-64)*Math.pow(26,ae-we-1);J[Me]=ie,W[ie]=Me}return Me},pq[_b(61)]=function(ie,ae){for(var we=[],Me=0;Me<ae;Me++)we[Me]=re(Me);var Pe=[];for(Me=0;Me<ie;Me++)for(var Ve=Pe[Me]=[],le=0;le<ae;le++)Ve[le]=we[le]+(Me+1);return Pe},T="w",I="scrollLeft",K(document).one("pq:ready",function(){var ie=K(_a(8)).appendTo("body"),ae=ie[0];0==ae[I]&&(ae[I]=100,T=0==ae[I]?"g":"i"),ie.remove()}),pq.scrollTop=function(ie){return ie.scrollTop},pq[I+"Val"]=function(ie,ae){return ce(ie)?"w"==T?ie[_b(62)]-ie[_b(63)]-ae:"g"==T?-1*ae:ae:ae},pq[I]=function(ie,ae){var we,Me=ce(ie);if(null==ae){if(we=ie[I],Me){if("w"==T)return ie[_b(62)]-ie[_b(63)]-we;if("g"==T)return-1*we}return we}ie[I]=pq[I+"Val"](ie,ae)}}(jQuery),function(K){pq[_b(64)]={minLen:function(D,y,o){if(D=o(D),y=o(y),D.length>=y)return!0},nonEmpty:function(D){if(null!=D&&""!==D)return!0},maxLen:function(D,y,o){if(D=o(D),y=o(y),D.length<=y)return!0},gt:function(D,y,o){if(D=o(D),(y=o(y))<D)return!0},gte:function(D,y,o){if(D=o(D),(y=o(y))<=D)return!0},lt:function(D,y,o){if((D=o(D))<(y=o(y)))return!0},lte:function(D,y,o){if((D=o(D))<=(y=o(y)))return!0},neq:function(D,y,o){if((D=o(D))!==(y=o(y)))return!0},regexp:function(D,y){if(new RegExp(y).test(D))return!0}};var U=K.paramquery;U.cValid=function(D){this.that=D},U.cValid.prototype={_isValidCell:function(D){var y=this.that,o=D.column,d=o[_b(64)];if(!d||!d.length)return{valid:!0};function g(re){return y[_b(65)](re,v,!0)}var p=D.value,v=o.dataType,M=D.rowData;if(!M)throw"rowData required.";for(var T=0;T<d.length;T++){var I=d[T],P=I.on,N=I.type,V=!1,J=I.msg,W=I.value;if(!1!==P&&((P=pq[_b(64)][N])?V=null!=p&&P(p,W,g):N&&!(P={column:o,value:p,rowData:M,msg:J})===y.callFn(N,P)?(V=!1,J=P.msg):V=!0,!V))return{valid:!1,msg:J,column:o,warn:I.warn,dataIndx:o.dataIndx,validation:I}}return{valid:!0}},onScrollCell:function(D,y,o,d,g,p){var M=(v=this.that).options.bootstrap;if(D||(T=v[_b(66)]())&&T.$cell){(v=D||T.$cell).attr("title",y),D="tooltip";var v,T="open";M.on&&M.tooltip&&(D=M.tooltip,T="show");try{v[D]("destroy")}catch(N){}v[D]({trigger:"manual",position:{my:"left center+5",at:"right center"},content:function(){return(""==o?"":_a(4)+o+_a(5))+y},open:function(N,W){var J;W=W.tooltip,d&&W.addClass(d),p&&(J=W.attr("style"),W.attr("style",J+";"+p)),g&&W.tooltip.css(g)}})[D](T)}},isValidCell:function(we){var y=this,o=y.that,d=we.rowData,g=we.rowIndx,Pe=we.value,p=we.valueDef,Me=we.column,v=we[_b(67)],M=o.options,T=we[_b(68)],I=Me.dataIndx,P=M.validation,N=M.warning,V=(J=M.editModel)[_b(69)],J=J.warnClass,W=document[_b(39)];if(we[_b(70)]&&0==o.isEditable({rowIndx:g,rowData:d,column:Me,dataIndx:I}))return{valid:!0};Pe=(we=this[_b(71)]({column:Me,value:Pe,rowData:d})).warn;var re,ce,ie,ae,Ve=we.msg;if((Me=we.valid)?o.data({rowData:d,dataIndx:I,data:"pq_valid"})&&(o[_b(72)]({rowData:d,rowIndx:g,dataIndx:I,cls:J+" "+V}),o.removeData({rowData:d,dataIndx:I,data:"pq_valid"})):(N=K.extend({},Pe?N:P,we.validation),re=N.css,ce=N.cls,ie=N.icon,ae=N.style),T||Pe)return Me?{valid:!0}:(o.addClass({rowData:d,rowIndx:g,dataIndx:I,cls:Pe?J:V}),o.data({rowData:d,dataIndx:I,data:{pq_valid:{css:re,icon:ie,style:ae,msg:Ve,cls:ce}}}),we);if(!Me){if(null==g&&(null==(g=(P=o.getRowIndx({rowData:d,dataUF:!0})).rowIndx)||P.uf))return we.uf=P.uf,we;if(v){if(p){if(K(W).hasClass("pq-editor-focus")&&(N=M.editModel.indices)){if(T=N.rowIndx,Pe=N.dataIndx,null!=g&&g!=T)throw _a(9)+g;if(I!=Pe)throw _a(10)+I;o.editCell({rowIndx:T,dataIndx:I})}}else{o.goToPage({rowIndx:g});var le=o.normalize({rowIndx:g,dataIndx:I}),st=o.getCell(le);o.scrollCell(le,function(){y[_b(73)](st,Ve,ie,ce,re,ae),o.focus(le)})}this[_b(73)](st,Ve,ie,ce,re,ae)}return we}if(p&&(J=o[_b(66)]())&&J.$cell){(V=J.$cell).removeAttr("title");try{V.tooltip("destroy")}catch(We){}}return{valid:!0}},isValid:function(D){var y,o=this.that,p=(D=D||{})[_b(68)],d=D[_b(67)],g=D[_b(70)];if(p=null!=p&&p,null!=(V=D.dataIndx))return P=o.columns[V],v=D.rowData||o.getRowData(D),W=(y=D.hasOwnProperty("value"))?D.value:v[V],(J=this[_b(74)]({rowData:v,checkEditable:g,rowIndx:D.rowIndx,value:W,valueDef:y,column:P,allowInvalid:p,focusInvalid:d})).valid||J.warn?{valid:!0}:J;if(null!=D.rowIndx||null!=D[_b(75)]||null!=D.rowData){for(var v=D.rowData||o.getRowData(D),M=o.colModel,ce=[],T=0,I=M.length;T<I;T++){var P;if(!(P=M[T]).hidden){var V,J,W=v[V=P.dataIndx];if(!(J=this[_b(74)]({rowData:v,value:W,column:P,rowIndx:D.rowIndx,checkEditable:g,allowInvalid:p,focusInvalid:d})).valid&&!J.warn){if(!p)return J;ce.push({rowData:v,dataIndx:V,column:P})}}}return p&&ce.length?{cells:ce,valid:!1}:{valid:!0}}var re=D.data||o.options.dataModel.data;if(ce=[],!re)return null;for(T=0,I=re.length;T<I;T++){var ie=this.isValid({rowData:v=re[T],rowIndx:void 0,checkEditable:g,allowInvalid:p,focusInvalid:d}),ae=ie.cells;if(!1===p){if(!ie.valid)return ie}else ae&&ae.length&&(ce=ce.concat(ae))}return p&&ce.length?{cells:ce,valid:!1}:{valid:!0}}}}(jQuery),function(K){var U={options:{curPage:0,totalPages:0,totalRecords:0,msg:"",rPPOptions:[10,20,30,40,50,100],rPP:20,layout:["first","prev","|","strPage","|","next","last","|","strRpp","|","refresh","|","strDisplay"]},_create:function(){var y=this,o=y.options,p=o.rtl,d=y.element,g={first:y.initButton(o[_b(76)],"seek-"+(p?"end":"first"),"first"),"|":_a(11),next:y.initButton(o[_b(77)],"seek-"+(p?"prev":"next"),"next"),prev:y.initButton(o[_b(78)],"seek-"+(p?"next":"prev"),"prev"),last:y.initButton(o[_b(79)],"seek-"+(p?"first":"end"),"last"),strPage:y.getPageOf(),strRpp:y[_b(80)](),refresh:y.initButton(o.strRefresh,"refresh","refresh"),strDisplay:_a(12)+y.getDisplay()+"</span></td>"};p=o.layout.map(function(v){return g[v]}).join(""),y.listeners={},d.html(_a(13)+p+"</tr></table>"),d.addClass("pq-pager"),y.$first=d.find(".pq-page-first"),y.bindButton(y.$first,function(v){1<o.curPage&&y.onChange(v,1)}),y.$prev=d.find(".pq-page-prev"),y.bindButton(y.$prev,function(v){1<o.curPage&&y.onChange(v,o.curPage-1)}),y.$next=d.find(".pq-page-next"),y.bindButton(y.$next,function(v){o.curPage<o.totalPages&&y.onChange(v,o.curPage+1)}),y.$last=d.find(".pq-page-last"),y.bindButton(y.$last,function(v){o.curPage!==o.totalPages&&y.onChange(v,o.totalPages)}),y.$refresh=d.find(".pq-page-refresh"),y.bindButton(y.$refresh,function(v){if(!1===y._trigger("beforeRefresh",v))return!1;y._trigger("refresh",v)}),y.$display=d.find(".pq-page-display"),y.$select=d.find(".pq-page-select").val(o.rPP).on("change",y[_b(81)].bind(y)),y[_b(82)]=d.find(".pq-page-total"),y.$curPage=d.find(".pq-page-current"),y[_b(83)](y.$curPage)},_destroy:function(){this.element.empty()[_b(72)]("pq-pager")[_b(84)](),this._trigger("destroy")},_setOption:function(y,o){this._super(y,o="curPage"!=y&&"totalPages"!=y?o:+o)},_setOptions:function(y){var o,d=!1,g=this.options;for(o in y){var p=y[o],v=typeof p;"string"==v||"number"==v||"function"!=typeof p.splice&&!K[_b(43)](p)?p!=g[o]&&(this._setOption(o,p),d=!0):JSON.stringify(p)!=JSON.stringify(g[o])&&(this._setOption(o,p),d=!0)}return d&&this._refresh(),this}},D=(K.widget("paramquery.pqPager",U),pq.pager=function(y,o){return(y=K(y).pqPager(o)).data("paramqueryPqPager")||y.data("paramquery-pqPager")},U=K.paramquery).pqPager;D.regional={},D.defaults=D.prototype.options,K.extend(D.prototype,{bindButton:function(y,o){y.bind("click keydown",function(d){if("click"==d.type||d.keyCode==K.ui.keyCode.ENTER)return o.call(this,d)})},bindCurPage:function(y){var o=this,d=this.options;y.bind("keydown",function(g){g.keyCode===K.ui.keyCode.ENTER&&K(this).trigger("change")}).bind("change",function(g){var p=K(this),v=p.val();return isNaN(v)||v<1||(v=parseInt(v))!==d.curPage&&(v>d.totalPages||!1===o.onChange(g,v))?(p.val(d.curPage),!1):void 0})},initButton:function(y,o,d){return _a(14)+d+_a(15)+y+_a(16)+o+_a(17)},onChange:function(y,o){if(!1===this._trigger("beforeChange",y,o={curPage:o}))return!1;this._trigger("change",y,o)},onChangeSelect:function(y){var o=K(y.target),d=+o.val(),g={rPP:d};if(!1===this._trigger("beforeChange",y,g))return o.val(this.options.rPP),!1;this.options.rPP=d,this._trigger("change",y,g)},refresh:function(){this._destroy(),this._create()},format:function(y){var o=y.format;return function(d){return o?pq[_b(47)](d,o):d}},_refresh:function(){var y=this,o=y.options,d=o.curPage>=o.totalPages;y.setDisable(y.$next,d),y.setDisable(y.$last,d),y.setDisable(y.$first,d=o.curPage<=1),y.setDisable(y.$prev,d),y[_b(82)].text(y.format(o)(o.totalPages)),y.$curPage.val(o.curPage),y.$select.val(o.rPP),y.$display.html(this.getDisplay()),y._trigger("refreshView")},getDisplay:function(){var y,o,d,g=this.options,p=this.format(g),v=0<g[_b(85)]?(y=g.rPP,v=g.strDisplay||"",o=g.curPage,(g=g[_b(85)])<(d=o*y)&&(d=g),(v=(v=v.replace("{0}",p(1+(o-1)*y))).replace("{1}",p(d))).replace("{2}",p(g))):"";return v},getPageOf:function(){var y=this.options;return"<td><span>"+(y.strPage||"").replace("{0}",_a(18)+y.curPage+_a(19)).replace("{1}",_a(20)+this.format(y)(y.totalPages)+"</span>")+"</span></td>"},getRppOptions:function(){var y,o,d,g,I,p=(I=this.options).rPPOptions,v=0,M=p.length,T=this.format(I);if((I=I.strRpp||"")&&-1!=I.indexOf("{0}")){for(g=[_a(21)];v<M;v++)o=+(o=p[v])==o?T(y=o):o[y=Object.keys(o)[0]],g.push('<option value="',y,'">',o,"</option>");g.push("</select>"),d=g.join(""),I=I.replace("{0}",d)+"</span>"}return _a(22)+I+"</span></td>"},getInstance:function(){return{pager:this}},_trigger:U._trigger,on:U.on,one:U.one,off:U.off,setDisable:function(y,o){y[o?"addClass":"removeClass"]("disabled").css("pointer-events",o?"none":"").attr("tabindex",o?"":"0")}})}(jQuery),function(K){function U(){}U.prototype={belongs:function(p){if(p.target==this.that.element[0])return!0},setTimer:function(p,v){clearTimeout(this._timeID),this._timeID=setTimeout(function(){p()},v)}};var D=K.paramquery,y=(D.cClass=U,{widgetEventPrefix:"pqgrid"}),o=(y[_b(86)]=function(p,v){return this[_b(87)]=p,K(document)[_b(53)]("pq:ready"),K.Widget.prototype[_b(86)].apply(this,arguments)},y._create=function(){var p=this,v=p.options,M=p.element,T=p[_b(35)],ce=(ie=v.bootstrap).on,I=v[_b(88)]&&!ce,P=v[_b(89)],N=_a(23),V=v.ui,J=(K(document)[_b(53)]("pqGrid:bootup",{instance:this}),p.BS_on=ce,v[_b(90)]||(v[_b(90)]={on:!1,collapsed:!1}),v.flexHeight&&(v.height="flex"),v.flexWidth&&(v.width="flex"),p.iRefresh=new D.cRefresh(p),p.iKeyNav=new D.cKeyNav(p),p.iValid=new D.cValid(p),p.tables=[],p.$tbl=null,p.iCols=new D.cColModel(p),p.iSort=new D.cSort(p),M.on("scroll"+T,function(){this.scrollLeft=0,this.scrollTop=0}).on("mousedown"+T,p._mouseDown.bind(p)),(ce?ie:V).grid),W=ce?"":V.header_o,re=ce?"":V.bottom,ie=(ce=(ce?ie:V).top,M.empty().attr({role:"grid",dir:v.rtl?"rtl":"ltr"}).addClass("pq-grid pq-theme "+J+" "+(I?" ui-corner-all":"")).html([_a(24),ce," ",I?" ui-corner-top":"","'>",_a(25),I?" ui-corner-top":"","'>&nbsp;</div>",_a(26),"</div>",_a(27),_a(28),v.toolPanel.show?"":"none",";'></div>",_a(29),v[_b(91)].show?"":"none",";'></div>",_a(30),_a(31),W,_a(32),P?N:"",_a(33),P?"":N,"</div>",_a(34),"</div>",_a(35),re," ",I?" ui-corner-bottom":"","'>",_a(36),"</div>"].join("")),p.setLocale(),p.$bottom=K(".pq-grid-bottom",M),p.$summary=K(".pq-summary-outer",M),p.$toolPanel=M.find(".pq-tool-panel"),p[_b(92)]=M.find(".pq-tool-panel-rules"),p.$top=K("div.pq-grid-top",M),v.showTop||p.$top.css("display","none"),p.$title=K("div.pq-grid-title",M),v.showTitle||p.$title.css("display","none"),p[_b(93)]=K(".pq-grid-center",M).on("scroll",function(){this.scrollTop=0}));p.$header=K(".pq-header-outer",ie).on("scroll",function(){this.scrollTop=0,this.scrollLeft=0}).on("focus",function(ae){p[_b(94)](ae)}),p.$footer=K(".pq-grid-footer",M),V=p.$cont=K(".pq-body-outer",ie),ie.on("mousedown",p[_b(95)].bind(p)),p.iRenderB=new(pq[_b(96)])(p,{$center:ie,$b:V,$sum:p.$summary,header:!0,$h:p.$header}),p._trigger("render",null,{dataModel:p.options.dataModel,colModel:p.colModel}),"ontouchend"in document&&(p.addTouch(),p.contextIOS(M)),M.on("contextmenu"+T,p.onContext.bind(p)),V.on("click",_a(37),function(ae){if(!0!==K.data(ae.target,p.widgetName+".preventClickEvent"))return p.evtBelongs(ae)?p[_b(97)](ae):void 0}).on("dblclick",".pq-grid-cell",function(ae){if(p.evtBelongs(ae))return p[_b(98)](ae)}),V.on("focusout",function(){p.onblur()}).on("focus",function(ae){p.onfocus(ae)}).on("mousedown",p[_b(99)].bind(p)).on("change",p._onChange(p)).on("mouseenter",_a(37),p[_b(100)](p)).on("mouseenter",".pq-grid-row",p[_b(101)](p)).on("mouseleave",".pq-grid-cell",p[_b(102)](p)).on("mouseleave",".pq-grid-row",p[_b(103)](p)).on("keyup",p._onKeyUp(p)),v[_b(104)].native||this[_b(105)](),ie.bind("keydown.pq-grid",p._onKeyDown(p)),this[_b(106)](),p.iRows=new D.cRows(p),p[_b(107)](),p._initPager(),p[_b(108)](),p[_b(109)](),p[_b(110)]=new(D[_b(111)])(p),this._mouseInit()},y.contextIOS=function(p){var v,M,T,I="contextmenu";p.on("touchstart",function(P){v=1,setTimeout(function(){var N;v&&1==(T=P[_b(32)].touches).length&&(N=K.Event(I,N=T[0]),K(P.target).trigger(N),M=1)},600),p.one(I,function(){v=0})}).on("touchmove touchend",function(P){v=0,M&&(M=0,P[_b(29)]())})},y.addTouch=function(){var p,v,M=this[_b(93)][0];M[_b(112)]("touchstart",function(V){var I,P,N=V.target;V=V[_b(113)][0],p?N&&N==p.target&&(I=p.x-V.pageX,P=p.y-V.pageY,Math.sqrt(I*I+P*P)<=12&&(v=p,setTimeout(function(){v=null},500))):(p={x:V.pageX,y:V.pageY,target:N},setTimeout(function(){p=null},400))},!0),M[_b(112)]("touchend",function(T){var I=T.target;v&&I==v.target&&K(I).trigger("dblclick",T)})},y._mouseDown=function(p){var v=this;K(p.target).closest(".pq-editor-focus").length&&(this[_b(114)]=!0,window.setTimeout(function(){v[_b(114)]=!1},0))},y.destroy=function(){for(var p in this._trigger("destroy"),this._super(),K(window).off("resize"+this[_b(35)]),this)delete this[p];this.options=void 0,K.fragments={}},y.setLocale=function(){var p=this.options,v=p.locale;p.strLocal!=v&&(K.extend(!0,p,D.pqGrid.regional[v]),K.extend(p.pageModel,D.pqPager.regional[v]))},y._setOption=function(p,v){function M(){N[p]=v}function T(ae){return ae?"addClass":"removeClass"}var I,P=this,N=P.options,V=P.pageI,J=P.iRenderB,W=P.iRenderSum,re=P[_b(115)],ce=N.dataModel;if(!P.$title)return M(),P;if("height"===p)M(),P[_b(108)]();else if("locale"==p||"pageModel"==p)M(),"locale"==p&&P.setLocale(),V&&V.destroy();else if("width"===p)M(),P[_b(108)]();else if("title"==p)M(),P[_b(106)]();else if("roundCorners"==p){M();var ie=T(v);P.element[ie]("ui-corner-all"),P.$top[ie]("ui-corner-top"),P.$bottom[ie]("ui-corner-bottom")}else if("freezeCols"==p)v=parseInt(v),!isNaN(v)&&0<=v&&v<=P.colModel.length-2&&M();else if("freezeRows"==p)v=parseInt(v),!isNaN(v)&&0<=v&&M();else if("resizable"==p)M(),P[_b(108)]();else if("draggable"==p)M(),P[_b(109)]();else if("dataModel"==p)v.data!==ce.data&&ce.dataUF&&(ce.dataUF.length=0),M();else{if("groupModel"==p)throw _a(38);if("treeModel"==p)throw _a(39);"colModel"===p||"columnTemplate"==p?(M(),P.iCols.init()):"disabled"===p?(P._super(p,v),!0===v?P._disable():P._enable()):"strLoading"===p?(M(),P[_b(116)]()):"showTop"===p?(M(),P.$top.css("display",v?"":"none")):"showTitle"===p?(M(),P.$title.css("display",v?"":"none")):"showToolbar"===p?(M(),P._toolbar.widget().css("display",v?"":"none")):"collapsible"===p?(M(),P[_b(117)]()):"showBottom"===p?(M(),P.$bottom.css("display",v?"":"none")):"wrap"==p||"hwrap"==p?(M(),("wrap"==p?J.$tbl.add(W.$tbl):re.$tbl)[T(!v)]("pq-no-wrap")):"rowBorders"===p?(M(),ie=T(v),J.$tbl[ie](I="pq-td-border-top"),W.$tbl[ie](I)):"columnBorders"===p?(M(),ie=T(v),J.$tbl[ie](I="pq-td-border-right"),W.$tbl[ie](I)):"strNoRows"===p?(M(),P.$cont.find(".pq-grid-norows").text(v)):M()}return P},y.options={cancel:_a(40),trigger:!1,bootstrap:{on:!1,thead:_a(41),tbody:_a(42),grid:"panel panel-default",top:"",btn:"btn btn-default",groupModel:{icon:[_a(43),_a(44)]},header_active:"active"},ui:{on:!0,grid:_a(45),top:"ui-widget-header",bottom:"",header_o:"ui-widget-header",header:"ui-state-default",header_active:""},format:function(p,v,M,T){var I="format";return M[I]||T[I]||v[I]},cellDatatype:function(p,v){return v.dataType},collapsible:{on:!0,toggle:!0,collapsed:!1,_collapsed:!1,refreshAfterExpand:!0,css:{zIndex:1e3}},colModel:null,columnBorders:!0,dataModel:{data:[],dataUF:[],cache:!1,dataType:"JSON",location:"local",sorting:"local",sortDir:"up",method:"GET"},direction:"",draggable:!1,editable:!0,editModel:{pressToEdit:!0,charsAllow:["0123456789.-=eE+","0123456789-=eE+"],clicksToEdit:2,filterKeys:!0,reInt:/^([-]?[1-9][0-9]*|[-]?[0-9]?)(e[-+]?)?[0-9]*$/i,reFloat:/^[-]?[0-9]*\.?[0-9]*(e[-+]?)?[0-9]*$/i,onBlur:"validate",saveKey:K.ui.keyCode.ENTER,onSave:"nextFocus",onTab:"nextFocus",allowInvalid:!1,invalidClass:_a(46),warnClass:_a(47),validate:!0},editor:{select:!1,type:"contenteditable"},summaryOptions:{number:_a(48),date:"count,max,min",string:"count"},summaryTitle:{avg:"Avg: {0}",count:"Count: {0}",max:"Max: {0}",min:"Min: {0}",stdev:"Stdev: {0}",stdevp:"Stdevp: {0}",sum:"Sum: {0}"},validation:{icon:"ui-icon-alert",cls:"ui-state-error",style:"padding:3px 10px;"},warning:{icon:"ui-icon-info",cls:"",style:"padding:3px 10px;"},freezeCols:0,freezeRows:0,freezeBorders:!0,calcDataIndxFromColIndx:!0,height:400,hoverMode:"null",locale:"en",maxColWidth:2e3,minColWidth:50,minWidth:100,menuUI:{tabs:["hideCols","filter"],buttons:["clear","ok"],gridOptions:{autoRow:!1,copyModel:{render:!0},editable:function(p){return!p.rowData[_b(55)]},fillHandle:"",filterModel:{header:!0,on:!0},hoverMode:"row",hwrap:!1,rowBorders:!1,rowHt:24,rowHtHead:23,scrollModel:{autoFit:!0},showTop:!1,height:300,wrap:!1}},mergeCells:[],numberCell:{width:30,title:"",resizable:!0,minWidth:30,maxWidth:100,show:!0},pageModel:{curPage:1,totalPages:0,rPP:10,rPPOptions:[10,20,50,100]},refreshCompareBy:"value",resizable:!1,rowBorders:!0,rowResize:!0,autoRow:!0,scrollModel:{autoFit:!1},selectionModel:{column:!0,type:"cell",onTab:"nextFocus",row:!0,mode:"block"},showBottom:!0,showHeader:!0,showTitle:!0,showToolbar:!0,showTop:!0,sortable:!0,sql:!1,stringify:!0,stripeRows:!0,title:"&nbsp;",toolPanelRules:{},treeModel:null,width:"auto",wrap:!0,hwrap:!0},K.widget("paramquery._pqGrid",K.ui.mouse,y),D._pqGrid.prototype);function d(p){return _a(49)+p+"' ></span>"}function g(p){return _a(50)+p+"'></span></span>"}o.setData=function(p){var v=(M=this.options).groupModel.pivot,M=M.reactive,T=this.Group();v&&T.option({pivot:!1}),this.option("dataModel.data",p),M||this[_b(118)](),v&&T.option({pivot:!0})},o.refreshCM=function(p,v){p&&(this.options.colModel=p),this.iCols.init(v)},o.evtBelongs=function(p){return K(p.target).closest(".pq-grid")[0]==this.element[0]},o.readCell=function(p,v,M,T,I){if(!M||!1!==M.isRootCell(T,I,"o"))return p[v.dataIndx]},o.saveCell=function(p,v,M){p[v.dataIndx]=M},o[_b(119)]=function(){var p=this.element,v=p.data();(v.resizable||v[_b(120)]||v["ui-resizable"])&&p.resizable("destroy")},o._disable=function(){null==this.$disable&&(this.$disable=K(_a(51)).css("opacity",.2).appendTo(this.element))},o._enable=function(){this.$disable&&(this.element[0][_b(121)](this.$disable[0]),this.$disable=null)},o._destroy=function(){var p=this[_b(35)];this.loading&&this.xhr.abort(),this[_b(119)](),this[_b(122)](),this.element.off(p),K(window).unbind(p),K(document).unbind(p),this.element.empty().css("height","").css("width","")[_b(72)](_a(52)).removeData()},o._onKeyUp=function(p){return function(v){p.evtBelongs(v)&&p._trigger("keyUp",v,null)}},o.onKeyDown=function(p){if(K(p.target).closest(".pq-header-outer").length)return this._trigger("headerKeyDown",p,null);!1!==this.iKeyNav[_b(123)](p)&&this._trigger("keyDown",p,null)},o._onKeyDown=function(p){return function(v){p.evtBelongs(v)&&p.onKeyDown(v,p)}},o.collapse=function(p){function v(){T.css("overflow","hidden"),P.addClass(_a(53))[_b(72)](_a(54)),T.hasClass("ui-resizable")&&T.resizable("destroy"),M._toolbar&&M._toolbar.disable(),I.collapsed=I._collapsed=!0,I.animating=!1,M._trigger("collapse")}p=p||{};var M=this,T=M.element,I=M.options[_b(90)],P=I.$collapse.children("span");if(I._collapsed)return!1;I.htCapture=T.height(),!1===p.animate?(T.height(23),v()):(I.animating=!0,M.disable(),T.animate({height:"23px"},function(){v()}))},o.expand=function(p){function v(){T.css("overflow",""),I._collapsed=I.collapsed=!1,M[_b(108)](),I[_b(124)]&&M.refresh(),N.addClass(_a(54))[_b(72)](_a(53)),M._toolbar&&M._toolbar.enable(),M.enable(),I.animating=!1,M._trigger("expand")}var M=this,T=M.element,I=M.options[_b(90)],P=I.htCapture,N=I.$collapse.children("span");if(!1===I._collapsed)return!1;!1===(p=p||{}).animate?(T.height(P),v()):(I.animating=!0,T.animate({height:P},function(){v()}))},o[_b(117)]=function(){var p=this,v=this.$top,M=this.options,T=this.BS_on,I=M[_b(90)];I.$stripe||(M=K([_a(55),"</div>"].join("")).appendTo(v),I.$stripe=M),I.on?I.$collapse||(I.$collapse=K(T?d("collapse-down"):g("circle-triangle-n")).appendTo(I.$stripe).click(function(){I.collapsed?p.expand():p.collapse()})):I.$collapse&&(I.$collapse.remove(),delete I.$collapse),I.collapsed&&!I._collapsed?p.collapse({animate:!1}):!I.collapsed&&I._collapsed&&p.expand({animate:!1}),I.toggle?I.$toggle||(I.$toggle=K(T?d("fullscreen"):g("arrow-4-diag")).prependTo(I.$stripe).click(function(){p.toggle()})):I.$toggle&&(I.$toggle.remove(),delete I.$toggle),I.toggled&&!I.state&&this.toggle()},o.toggle=function(p){p=p||{};var v,M,T=this.options,I=T[_b(90)],P=this.element,N=I.state,V=N?"min":"max",J=K("html"),W=K(window),re=K(document.body);if(!1===this._trigger("beforeToggle",null,{state:V}))return!1;"min"==V?(M=N.doc,this.option({height:(v=N.grid).height,width:v.width,maxHeight:v.maxHeight,maxWidth:v.maxWidth}),P[0].style.cssText=v.cssText,re[0].style.cssText=M.cssText,J.css({overflow:"visible"}),window.scrollTo(M.scrollLeft,M.scrollTop),I.state=null):(v={height:T.height,width:T.width,cssText:P[0].style.cssText,maxHeight:T.maxHeight,maxWidth:T.maxWidth},this.option({height:"100%",width:"100%",maxHeight:null,maxWidth:null}),P.css(K.extend({position:"fixed",left:0,top:0,margin:0},I.css)),M={scrollLeft:W.scrollLeft(),scrollTop:W.scrollTop(),cssText:re[0].style.cssText},re.css({height:0,width:0,overflow:"hidden",position:"static"}),J.css({overflow:"hidden"}),window.scrollTo(0,0),I.state={grid:v,doc:M}),I.toggled=!!I.state,p.refresh||(this._trigger("toggle",null,{state:V}),this[_b(108)](),this.refresh(),W.trigger("resize",{$grid:P,state:V}))},o[_b(98)]=function(p){var v=this,M=K(p[_b(125)]),T=v[_b(34)]({$td:M});T.$td=M,0!=v._trigger("cellDblClick",p,T)&&(1<v.options.editModel[_b(126)]&&v.isEditable(T)&&v.editCell(T),T.$tr=M.closest(".pq-grid-row"),v._trigger("rowDblClick",p,T))},o[_b(65)]=function(p,v,M){if("="==(p+"")[0])return p;var T;if("date"==v)return T=Date.parse(p),isNaN(T)?void 0:M?T:p;if("integer"==v)T=parseInt(p);else{if("float"!=v)return"bool"==v?null==p?p:0==(T=K.trim(p)[_b(54)]()).length?null:"true"==T||"yes"==T||"1"==T||"false"!=T&&"no"!=T&&"0"!=T&&Boolean(T):"object"==v||null==p?p:K.trim(p);T=parseFloat(p)}return isNaN(T)||null==T?null==p?p:null:T},o.isValid=function(p){return this.iValid.isValid(p)},o[_b(127)]=function(p){p=p||{};var M=(M=this.getChanges()).updateList.concat(M.addList);return p.data=M,this.isValid(p)},o[_b(128)]=function(M){var v,T=(M=this.normalize(M)).rowData;return null==(v=T&&(T=T[_b(129)])?(T[M.dataIndx]||{}).edit:v)&&null!=(T=M.column.editable)?"function"==typeof T?T.call(this,M):T:v},o[_b(130)]=function(p){var M,v=this.options.editable;return null==(M=(M=p.rowData)&&(M.pq_rowprop||{}).edit)?"function"==typeof v?v.call(this,this.normalize(p)):v:M},o.isEditable=function(p){var v=this[_b(128)](p);return null==v?this[_b(130)](p):v},o[_b(131)]=function(){var p=this.pdata;p&&p.length||((p=this.$cont[0])[_b(132)]("tabindex",0),p.focus())},o[_b(95)]=function(){var p=this;p[_b(133)]=function(v){K(document).unbind("mouseup"+p[_b(35)],p[_b(133)]),p._trigger("mousePQUp",v,null)},K(document).bind("mouseup"+p[_b(35)],p[_b(133)])},o[_b(99)]=function(p){var v,M;p.which&&1!=p.which||!this.evtBelongs(p)||(M=(v=K(p.target)).closest(_a(37)),v.is("a")||(M.length&&(p[_b(125)]=M[0],this[_b(134)](p)),p[_b(135)]()||((M=v.closest(".pq-grid-row")).length&&(p[_b(125)]=M[0],this[_b(136)](p)),p[_b(135)]()||this[_b(131)](p))))},o[_b(134)]=function(p){var v=K(p[_b(125)]),M=this[_b(34)]({$td:v});null!=M.rowIndx&&((M=this.iMerge[_b(137)](M.rowIndx,M.colIndx,!0)).$td=v,this._trigger("cellMouseDown",p,M))},o[_b(136)]=function(p){var v=K(p[_b(125)]),M=this.getRowIndx({$tr:v});M.$tr=v,this._trigger("rowMouseDown",p,M)},o[_b(100)]=function(p){return function(v){if(p.evtBelongs(v)){var M=K(this),T=p.options,I=p[_b(34)]({$td:M});if(null!=I.rowIndx&&null!=I.colIndx&&!1!==p._trigger("cellMouseEnter",v,I))return"cell"==T.hoverMode&&p[_b(138)](M),!0}}},o._onChange=function(p){var v,M,T;function I(){if(v&&M&&M.target==v.target){for(var P in{ctrlKey:0,metaKey:0,shiftKey:0,altKey:0})M[P]=v[P];p._trigger("valChange",M,T),M=v=void 0}}return p.on("cellClickDone",function(P){v=P[_b(32)],I()}),function(P){var N,V;p.evtBelongs(P)&&(V=(N=K(P.target)).closest(".pq-grid-cell")).length&&(T=p[_b(34)]({$td:V}),(T=p.normalize(T)).input=N[0],M=P,I())}},o[_b(101)]=function(p){return function(v){if(p.evtBelongs(v)){var T=K(this),M=p.options,I=(T=p.getRowIndx({$tr:T}))[_b(75)];if(!1!==p._trigger("rowMouseEnter",v,T))return"row"==M.hoverMode&&p[_b(139)](I),!0}}},o[_b(102)]=function(p){return function(v){p.evtBelongs(v)&&(v=K(this),"cell"==p.options.hoverMode&&p[_b(140)](v))}},o[_b(103)]=function(p){return function(v){var M,T,I;p.evtBelongs(v)&&(M=K(this),I=(T=p.getRowIndx({$tr:M}))[_b(75)],!1!==p._trigger("rowMouseLeave",v,{$tr:M,rowIndx:T.rowIndx,rowIndxPage:I})&&"row"==p.options.hoverMode&&p[_b(141)](I))}},o[_b(84)]=function(){this.element[_b(72)]("pq-disable-select").off("selectstart"+this[_b(35)])},o[_b(105)]=function(){this.element.addClass("pq-disable-select").on("selectstart"+this[_b(35)],function(p){var v=p.target,M=K(v);if(v)return!!M.is(_a(56))||!!M.closest(".pq-native-select").length||void p[_b(29)]()})},o[_b(97)]=function(p){var v=this,M=v.options.editModel,T=K(p[_b(125)]),I=v[_b(34)]({$td:T}),P=(I=v.normalize(I)).colIndx;I.$td=T,I.evt=p,0!=v._trigger("beforeCellClick",p,I)&&(v._trigger("cellClick",p,I),null==P||P<0||(1==M[_b(126)]&&v.isEditable(I)&&v.editCell(I),I.$tr=T.closest(".pq-grid-row"),v._trigger("rowClick",p,I)))},o[_b(142)]=function(M){var v=(M=this.iRenderB[_b(143)](M))[0],T=(M=M[1],this[_b(144)]);return{ri:v,colIndx:M,column:(T[v]||T[v-1])[M],filterRow:!T[v]}},o.onContext=function(p){function v(J){N._trigger(J,p,P)}var M,T,I,P,N=this,V=p.target;if(N.evtBelongs(p)){T=V;do{if(I=K(T),P={ele:T},I.is(".pq-grid")){P={},v("context");break}if(I.is("img")?(P.type="img",M=1):I.is(_a(37))?(P=N[_b(34)]({$td:I})).rowData&&(P.type=P.column?"cell":"num",P.$td=I,M=1,v("cellRightClick")):I.is(".pq-tab-item")?(P.id=N.iTab.getId(I),P.type="tab",M=1):I.is(".pq-grid-col")&&((P=N[_b(142)](T)).type="head",P.$th=I,M=1,v("headRightClick")),M){v("context");break}}while(T=T.parentNode)}},o[_b(138)]=function(p){p.addClass(_a(57))},o[_b(140)]=function(p){p[_b(72)](_a(57))},o[_b(139)]=function(p){isNaN(p)||(p=this.getRow({rowIndxPage:p}))&&p.addClass(_a(58))},o[_b(141)]=function(p){isNaN(p)||(p=this.getRow({rowIndxPage:p}))&&p[_b(72)](_a(58))},o[_b(145)]=function(){return{dataModel:this.options.dataModel,data:this.pdata,colModel:this.options.colModel}},o._initPager=function(){var p,v=this,M=v.options,T=M.pageModel;T.type&&((p=K.extend(p={bootstrap:M.bootstrap,change:function(I,P){v.blurEditor({force:!0});var N=v.options.pageModel;null!=P.curPage&&(N.prevPage=N.curPage,N.curPage=P.curPage),null!=P.rPP&&(N.rPP=P.rPP),"remote"==N.type?v[_b(146)]({callback:function(){v[_b(147)]({apply:!0,header:!1})}}):v[_b(17)]({header:!1,source:"pager"})},refresh:function(){v[_b(118)]()}},T)).rtl=M.rtl,v.pageI=pq.pager(T.appendTo||this.$footer,p).on("destroy",function(){delete v.pageI}))},o[_b(107)]=function(){this.$loading&&this.$loading.remove(),this.$loading=K(_a(59)).appendTo(this.element),K([_a(60),this.options.strLoading,"...</div></div>"].join("")).appendTo(this.$loading),this.$loading.find("div.pq-loading-bg").css("opacity",.2)},o[_b(116)]=function(){this.$loading.find("div.pq-loading-mask").children("div").html(this.options.strLoading)},o[_b(148)]=function(){null==this[_b(149)]&&(this[_b(149)]=0),this[_b(149)]++,this.$loading.show()},o[_b(150)]=function(){0<this[_b(149)]&&this[_b(149)]--,this[_b(149)]||this.$loading.hide()},o[_b(151)]=function(){var M,p=(v=(M=this.options).dataModel).data||[],v=v.dataUF||[];return"remote"==(M=M.pageModel).location?M[_b(85)]:p.length+v.length},o[_b(152)]=function(p){p=p||{};var v,M,T,I,P,N=this,V=N.options,J=V.pageModel,W=(W=V.dataModel).data,re=J.type,ce=N[_b(153)];if(N._trigger("beforeRefreshData",null,{}),"local"==re?(I=J[_b(85)]=W.length,J.totalPages=I=Math.ceil(I/J.rPP),J.curPage>I&&(J.curPage=I),I&&!J.curPage&&(J.curPage=1),(T=J.curPage*J.rPP)>W.length&&(T=W.length),N.pdata=W.slice(P=0<=(P=(J.curPage-1)*J.rPP)?P:0,T),P=P):"remote"==re?(J.totalPages=I=Math.ceil(J[_b(85)]/J.rPP),J.curPage>I&&(J.curPage=I),I&&!J.curPage&&(J.curPage=1),(T=J.rPP)>W.length&&(T=W.length),N.pdata=W.slice(0,T),P=J.rPP*(J.curPage-1)):N.pdata=V[_b(154)]?W.slice(0):W,N.riOffset=0<=P?P:0,N._trigger("dataReady",null,p),N._trigger("dataReadyAfter",null,p),0!=p[_b(155)])for(v in ce)M=ce[v],delete ce[v],N._trigger(v,M.evt,M.ui)},o[_b(156)]=function(p){p=p||{};var v=this,M="",T="",I=v.options,P=I.dataModel,N=I.sortModel,V=I[_b(157)],J=I.pageModel,W={},re={},ce={};return"function"==typeof P.getUrl?((I=P.getUrl.call(v,I={colModel:v.colModel,dataModel:P,sortModel:N,groupModel:I.groupModel,pageModel:J,filterModel:V}))&&I.url&&(M=I.url),I&&I.data&&(T=I.data)):"string"==typeof P.url&&(M=P.url,"remote"==N.type&&(p.initBySort||v.sort({initByRemote:!0}),(I=v.iSort[_b(158)]())&&(W={pq_sort:I})),"remote"==J.type&&(ce={pq_curpage:J.curPage,pq_rpp:J.rPP}),"local"!=V.type&&(N=v[_b(159)][_b(160)]())&&(v[_b(153)].filter={ui:{}},re={pq_filter:N}),T=K.extend({pq_datatype:P.dataType},re,ce,W,v.postData(P),P[_b(161)])),{url:M,dataURL:T}},o.postData=function(p){var v=p.postData;return"function"==typeof v?v.call(this,{colModel:this.colModel,dataModel:p}):v},o[_b(146)]=function(p){p=p||{};var v=this,M=v.options.dataModel,T=(v.loading&&v.xhr.abort(),I=v[_b(156)](p)).url,I=I.dataURL;T&&(v.loading=!0,v[_b(148)](),v.xhr=K.ajax({url:T,dataType:M.dataType,async:null==M.async||M.async,cache:M.cache,contentType:M[_b(162)],type:M.method,data:I,beforeSend:function(P,N){if("function"==typeof M.beforeSend)return M.beforeSend.call(v,P,N)},success:function(P,N,V){v[_b(163)](P,N,V,p)},error:function(P,N,V){if(v[_b(150)](),v.loading=!1,"function"==typeof M.error)M.error.call(v,P,N,V);else if("abort"!=V)throw"Error : "+V}}))},o[_b(163)]=function(p,J,M,T){var V,I=this,P=I.colModel,N=(V=I.options).pageModel;J="function"==typeof(V=V.dataModel).getData?V.getData.call(I,p,J,M):p,V.data=J.data,"remote"==N.type&&(null!=J.curPage&&(N.curPage=J.curPage),null!=J[_b(85)]&&(N[_b(85)]=J[_b(85)])),I[_b(150)](),I.loading=!1,I._trigger("load",null,{dataModel:V,colModel:P}),T.callback&&T.callback()},o[_b(106)]=function(){this.$title.html(this.options.title)},o[_b(122)]=function(){var p=this.element,v=p.parent(".pq-wrapper");v.length&&v.data("draggable")&&(v.draggable("destroy"),this.$title[_b(72)](_a(61)),p.unwrap(".pq-wrapper"))},o[_b(109)]=function(){var v=this.element,M=this.$title;this.options.draggable?(M.addClass(_a(61)),v.parent(".pq-wrapper").length||v.wrap(_a(62)),v.parent(".pq-wrapper").draggable({handle:M})):this[_b(122)]()},o[_b(108)]=function(){var p,v=this,M=this.element,T=this.options,I=-1<(T.width+"").indexOf("%"),P=-1<(T.height+"").indexOf("%"),N="auto"==T.width,V="flex"==T.width,J="flex"==T.height;!T.resizable||(J||P)&&(V||I||N)?this[_b(119)]():(p="e,s,se",J||P?p="e":(V||I||N)&&(p="s"),J=!0,M.hasClass("ui-resizable")&&(p==M.resizable("option","handles")?J=!1:this[_b(119)]()),J&&M.resizable({helper:"ui-state-default",handles:p,minWidth:T.minWidth,minHeight:T.minHeight||100,delay:0,start:function(W,re){K(re.helper).css({opacity:.5,background:"#ccc",border:"1px solid steelblue"})},stop:function(){var W=v.element,re=W[0],Me=T.height,ce=-1<((we=T.width)+"").indexOf("%"),ie=-1<(Me+"").indexOf("%"),ae="auto"==we,we="flex"==we,Pe=(Me="flex"==Me,!1);re.style.width=re[_b(40)]+3+"px",re.style.height=re[_b(41)]+3+"px",ie||Me||(Pe=!0,T.height=re[_b(41)]),ce||ae||we||(Pe=!0,T.width=re[_b(40)]),v.refresh({soft:!0}),W.css("position","relative"),Pe&&K(window).trigger("resize")}}))},o.refresh=function(p){this.iRefresh.refresh(p)},o[_b(17)]=function(p){null!=this.options.editModel.indices&&this.blurEditor({force:!0}),this[_b(152)](p),this.refresh(p)},o[_b(164)]=function(){var p=this,v=p.options,M=v.pageModel,T=!!M.type,I=M.rPP,P=M[_b(85)];T?(p.pageI||p._initPager(),p.pageI.option(M),I<P?p.$bottom.css("display",""):v.showBottom||p.$bottom.css("display","none")):(p.pageI&&p.pageI.destroy(),p.$bottom.css("display",v.showBottom?"":"none"))},o[_b(165)]=function(){return{grid:this}},o[_b(118)]=function(p){var v=this,M=v.options.dataModel.location,T="lazy"==M;0!=v._trigger("beforeNewData",null,p=p||{})&&(v.pdata=[],"remote"==M?v[_b(146)]({callback:function(){v[_b(147)](p)}}):(v[_b(147)](T?K.extend({},p,{sort:!1,filter:!1,group:!1,trigger:!1}):p),T&&v.iLazy.init(p)))},o.getColIndx=function(p){var v=p.dataIndx,M=p.column,T=this.colModel,I=T.length,P=0;if(M){for(;P<I;P++)if(T[P]==M)return P}else{if(null==v)throw"dataIndx / column NA";if(null!=(p=this.colIndxs[v]))return p}return-1},o.getColumn=function(p){if(null==(p=p.dataIndx))throw"dataIndx N/A";return this.columns[p]||this.iGroup[_b(166)]()[p]},o[_b(167)]=function(I,v,M){var T=this.options;I=this.iRenderB[_b(168)](I,v)[0],this.$div_focus||(v=this.$div_focus=K([_a(63),_a(64),"</div>","</div>"].join("")),"flex"==T.height&&"flex"==T.width||"grid"==M.appendTo?v.appendTo(this.element):v[_b(169)](I))},o[_b(170)]=function(){var p,v;this.$div_focus&&((v=p=this.$div_focus.find(".pq-editor-focus")).hasClass("hasDatepicker")&&v.datepicker("hide").datepicker("destroy"),p[0]==document[_b(39)]&&(v=this[_b(114)],this[_b(114)]=!0,p.blur(),this[_b(114)]=v),this.$div_focus.remove(),delete this.$div_focus,v=K.extend({},(p=this.options.editModel).indices),p.indices=null,v.rowData=void 0,this[_b(171)](v))},o.scrollX=function(p,v){var M=this;return M.iRenderB.scrollX(p,function(){v&&v.call(M)})},o.scrollY=function(p,v){var M=this;return M.iRenderB.scrollY(p,function(){v&&v.call(M)})},o.scrollXY=function(p,v,M){var T=this;return T.iRenderB.scrollXY(p,v,function(){M&&M.call(T)})},o.scrollRow=function(p,v){var M=this;M.iRenderB.scrollRow(M.normalize(p)[_b(75)],function(){v&&v.call(M)})},o[_b(172)]=function(p,v){var M=this;M.iRenderB[_b(172)](M.normalize(p).colIndx,function(){v&&v.call(M)})},o.scrollCell=function(T,v){var M=this;T=M.normalize(T),M.iRenderB.scrollCell(T[_b(75)],T.colIndx,function(){v&&v.call(M),M._trigger("scrollCell")})},o.blurEditor=function(p){if(this.$div_focus){var v=this.$div_focus.find(".pq-editor-focus");if(!p||!p[_b(173)])return v[_b(53)]("blur",p);document[_b(39)]==v[0]&&v.blur()}},o.Selection=function(){return this.iSelection},o.goToPage=function(p){var M,T=this.options.pageModel;"local"!=T.type&&"remote"!=T.type||(M=p.rowIndx,(M=null==p.page?Math.ceil((M+1)/T.rPP):p.page)!=T.curPage&&(T.curPage=M,"local"==T.type?this[_b(17)]():this[_b(118)]()))},o[_b(174)]=function(p,v){if(null==p)return this.iSelection.removeAll(),this.iRows.removeAll({all:!0}),!0;function M(){null!=N&&!1!==p.focus&&T.focus({rowIndxPage:N,colIndx:null==V?T[_b(175)]():V}),v&&v.call(T)}var T=this,I=T.pdata,P=(I&&I.length||M(),(p=this.normalize(p)).rowIndx),N=p[_b(75)],V=p.colIndx;(null==P||P<0||V<0||V>=this.colModel.length)&&M(),this.goToPage(p),T.scrollRow({rowIndxPage:N=P-this.riOffset},function(){null==V?(T.iRows.add({rowIndx:P}),M()):T[_b(172)]({colIndx:V},function(){T.Range({r1:P,c1:V}).select(),M()})})},o[_b(176)]=function(){return this.colModel},o[_b(177)]=function(){return this.iGroup[_b(177)]()},o[_b(178)]=function(){return this.iGroup[_b(178)]()},o[_b(179)]=function(M){if(!(T=(J=this.options).editModel).indices)return null;var v,T=K.extend({},T.indices),I=(M=M?M.evt:null,this.riOffset),P=T.colIndx,N=(I=(T=T[_b(75)])+I,(P=this.colModel[P]).dataIndx),V=this.pdata[T],J=J.dataModel;if(null==V)return null;if(null!=T){var W=this[_b(180)]();if(K[_b(43)](W))for(var re in v={},W)v[re]=V[re];else v=this.readCell(V,P);return"<br>"==W&&(W=""),T={rowIndx:I,rowIndxPage:T,dataIndx:N,column:P,newVal:W=null==v&&""===W?null:W,value:W,oldVal:v,rowData:V,dataModel:J},!1!==this._trigger("cellBeforeSave",M,T)&&(P={},K[_b(43)](W)?P=W:P[N]=W,!1!==this.updateRow({row:P,rowIndx:I,silent:!0,source:"edit",checkEditable:!1})&&(this._trigger("cellSave",M,T),!0))}},o[_b(181)]=function(p,v,M,T,I,P,N,V,J){var W,re,ce=this[_b(65)],ie=this.columns,ae=this.colIndxs;for(W in p)if(we=ae[W],re=ie[W])if(P&&!1===this.isEditable({rowIndx:M,rowData:T,colIndx:we,column:re}))delete p[W],v&&delete v[W];else{var we=re.dataType,Me=ce(p[W],we),Pe=void 0!==(Pe=v?v[W]:void 0)?ce(Pe,we):void 0;if(p[W]=Me,N&&re[_b(64)])if("edit"==J&&!1===V){var Ve=this.isValid({focusInvalid:!0,dataIndx:W,rowIndx:M,value:Me});if(0==Ve.valid&&!Ve.warn)return!1}else!1!==(Ve=this.iValid[_b(74)]({column:re,rowData:"add"==I?p:T,allowInvalid:V,value:Me})).valid||!1!==V||Ve.warn||delete p[W];"update"==I&&Me===Pe&&(delete p[W],delete v[W])}return"update"!=I||!pq.isEmpty(p)||void 0},o[_b(182)]=function(p){if(p.rowList)throw"not supported";if(Bt=p.addList=p.addList||[],p.updateList=p.updateList||[],p.deleteList=p.deleteList||[],Bt.length&&Bt[0].rowData)throw"rd in addList";if(!1===this._trigger("beforeValidate",null,p))return!1;for(var v,M,T,I=this,P=I.options,Me=P.editModel,N=(V=P.dataModel).data||[],V=V.dataUF||[],ae=P.colModel,J=P.pageModel,Pe=P[_b(183)],W=P[_b(184)],re=I.iRenderB,ce=ae.map(function(ti){return ti.dataIndx}),ie=(null==p.validate?Me:p).validate,we=(ae="remote"==J.type,(null==p[_b(68)]?Me:p)[_b(68)]),Dt=(Me=P.trackModel,p.track),Ve=(Pe=null==p.history?Pe.on:p.history,this.iHistory),le=this.iUCData,st=null==p[_b(70)]||p[_b(70)],We=null==p[_b(185)]?st:p[_b(185)],at=p.source,Te=I.iRefresh,qe=this.riOffset,Bt=p.addList,Ze=p.updateList,Zn=p.deleteList,jt=[],_n=[],It=(Dt=null==Dt?null==P.track?Me.on:P.track:Dt,0),Yn=Ze.length;It<Yn;It++){var ei,Xt=Ze[It],pr=Xt.newRow,Li=Xt.rowData,Mn=Xt[_b(70)],Sn=Xt.rowIndx,zi=Xt.oldRow;if(null==Mn&&(Mn=st),!zi)throw _a(65);if(!1===(ei=this[_b(181)](pr,zi,Sn,Li,"update",Mn,ie,we,at)))return!1;ei&&_n.push(Xt)}for(It=0,Yn=Bt.length;It<Yn;It++){if(pr=(Xt=Bt[It]).newRow,Mn=Xt[_b(70)],Sn=Xt.rowIndx,null==Mn&&(Mn=We),ce.forEach(function(ti){pr[ti]=pr[ti]}),!1===(ei=this[_b(181)](pr,zi,Sn,Li,"add",Mn,ie,we,at)))return!1;ei&&jt.push(Xt)}return Bt=p.addList=jt,Me=(Ze=p.updateList=_n).length,T=Zn.length,(P=Bt.length)||Me||T?(Pe&&(Ve.increment(),Ve.push(p)),Me&&(!W||P||T||(v=re.saveValues(W)),I[_b(186)](Ze,le,Dt)),T&&(I[_b(187)](Zn,le,Dt,N,V,J,ae,qe),Te.addRowIndx()),P&&(I._digestAdd(Bt,le,Dt,N,J,ae,qe),Te.addRT(Bt.map(function(ti){return ti.newRow})),Te.addRowIndx()),I._trigger("change",null,p),(M=v?re.dirtyCells(v,W):M)||!0):"edit"==at&&null},o[_b(186)]=function(p,v,M){for(var T,I=0,P=p.length,N=this.columns,V=this.saveCell;I<P;I++){var J=p[I],W=J.newRow,re=J.rowData;for(T in M&&v.update({rowData:re,row:W,refresh:!1}),W)V(re,N[T],W[T])}},o._digestAdd=function(p,v,M,T,I,P,N){var V=0,J=p.length;for(p.sort(function(ie,ae){return ie.rowIndx-ae.rowIndx});V<J;V++){var W=p[V],re=W.newRow,ce=W.rowIndx;M&&v.add({rowData:re}),null==ce?T.push(re):T.splice(P?ce-N:ce,0,re),W.rowData=re,P&&I[_b(85)]++}},o[_b(187)]=function(p,v,M,T,I,P,N,V){for(var J,W=0,re=p.length;W<re;W++){var ce=p[W],ie=ce.rowData,ae=!1,we=T.indexOf(ie);-1==we?0<=(we=I.indexOf(ie))&&(ae=!0):ce.rowIndx=N?we+V:we,ce.uf=ae,ce.indx=we}for(p.sort(function(Me,Pe){return Pe.rowIndx-Me.rowIndx}),W=0;W<re;W++)ie=(ce=p[W]).rowData,ae=ce.uf,J=ce.rowIndx,we=ce.indx,M&&v.delete({rowIndx:J,rowData:ie}),ae?I.splice(we,1):(J=T.splice(we,1))&&J.length&&N&&P[_b(85)]--},o[_b(188)]=function(T){var v=this,M=v.normalize(T);T=v.iRenderB,M.skip=!0,T.eachV(function(I,P){M[_b(75)]=P,v[_b(171)](M)}),v._trigger("refreshColumn",null,M)},o[_b(171)]=function(M){var v=this,T=(M=v.normalize(M),v._focusEle),I=M[_b(75)],P=M.colIndx;v.iRenderB[_b(171)](I,P,M.rowData,M.column)&&(T&&T[_b(75)]==I&&v.focus(),M.skip||(v.refresh({soft:!0}),v._trigger("refreshCell",null,M)))},o[_b(189)]=function(v){v=this.normalize(v);var M=(T=this[_b(144)]).length-1,T=T[M];this[_b(115)][_b(171)](M,v.colIndx,T,v.column)},o.refreshRow=function(p){var v,M,T,I;if(this.pdata)return M=(p=(v=this).normalize(p)).rowIndx,T=p[_b(75)],(p=p.rowData)?(v.iRenderB.refreshRow(T),v.refresh({soft:!0}),(I=v._focusEle)&&I[_b(75)]==T&&v.focus(),v._trigger("refreshRow",null,{rowData:p,rowIndx:M,rowIndxPage:T}),!0):null},o[_b(190)]=function(p){var v,M,T,I,P,N;this[_b(191)]||(T=M=v=!1,P=(I=this.options.editModel).indices,this[_b(191)]=!(N=void 0),p&&(v=p.old,M=p.silent,T=p.fireOnly,N=p.evt),P&&(M||v||this._trigger("editorEnd",N,P),T||(this[_b(170)](p),I.indices=null)),this[_b(191)]=null)},o[_b(192)]=function(){return{beginIndx:this.initV,endIndx:this.finalV}},o[_b(193)]=function(){var p=this.iRenderB;return{initV:p.initV,finalV:p.finalV,initH:p.initH,finalH:p.finalH}},o[_b(194)]=function(){return this.riOffset},o[_b(66)]=function(){var p,v,M=this.options.editModel;return M.indices?(M=this.getCell(M.indices),v=(p=this.$div_focus.children(".pq-editor-inner")).find(".pq-editor-focus"),{$td:M,$cell:p,$editor:v}):{}},o.editCell=function(I){var v,M=this,T=M.normalize(I),P=T.rowIndx,N=T.colIndx;if((I=M.iMerge)[_b(195)](P,N)&&((I=I[_b(137)](P,N)).rowIndx!=T.rowIndx||I.colIndx!=T.colIndx))return!1;M.scrollCell(T,function(){if((v=M.getCell(T))&&v.length)return M._editCell(T)})},o[_b(196)]=function(p){if(null==p.rowIndx)throw"rowIndx NA";for(var v=this.colModel,M=0;M<v.length;M++)if(!v[M].hidden&&(p.colIndx=M,this.isEditable(p)))return M;return-1},o[_b(197)]=function(v){v=this.normalize(v).rowIndx;var M=this[_b(196)]({rowIndx:v});-1!=M&&this.editCell({rowIndx:v,colIndx:M})},o.getEditor=function(P,v){function M(J){return"function"==typeof J?J.call(T,I):J}var T=this,I=T.normalize(P),N=(P=M(T.options.editor),M(I.column.editor)),V=K.extend(!0,{},P,0==N?{type:!1}:N);return(v?[v]:["attr","cls","style","type","options"]).forEach(function(J){V[J]=M(V[J])||""}),v?V[v]:V},o._editCell=function(M){var v=this,T=(M=v.normalize(M)).evt,I=M[_b(75)],P=M.colIndx;if(!(J=v.pdata)||I>=J.length)return!1;var J,N=v.options,V=N.editModel,W=M.rowIndx,re=v.colModel[P],ce=re.dataIndx,ie=v.readCell(J=J[I],re),ae={rowIndx:W,rowIndxPage:I,cellData:ie,rowData:J,dataIndx:ce,colIndx:P,column:re},we=!1,Me=v.getEditor(ae),Pe=Me.type;if(0!=Pe){if(V.indices){var Ve,le=V.indices;if(le[_b(75)]==I&&le.colIndx==P)return(Ve=v.$div_focus.find(".pq-editor-focus"))[0].focus(),document[_b(39)]!=Ve[0]&&window.setTimeout(function(){Ve.focus()},0),!1;if(!1===v.blurEditor({evt:T}))return!1;v[_b(190)]({evt:T})}V.indices={rowIndxPage:I,rowIndx:W,colIndx:P,column:re,dataIndx:ce},v[_b(167)](I,P,Me),(le=v.$div_focus.children(".pq-editor-inner")).addClass("pq-align-"+(re.align||"left")),ae.$cell=le,M=(null==M.select?Me:M).select;var st,Dt,We=Me.valueIndx,at=Me.dataMap,Te=Me.mapIndices||{},qe=(Dt="pq-editor-focus "+Me.cls)+" pq-cell-editor ",Bt=Me.attr,Ze=_n=(_n=Me.style)?"style='"+_n+"'":"",Zn=_n,jt=(ae.cls=Dt,ae.attr=Bt,"checkbox"==Pe?(Dt=Me.subtype,le.html(st="<input "+(ie?"checked='checked'":"")+" class='"+qe+"' "+Bt+" "+Zn+_a(66)+ce+"' />"),Zn=le.children("input"),"triple"==Dt&&(Zn.pqval({val:ie}),le.click(function(){K(this).children("input").pqval({incr:!0})}))):"textarea"==Pe||"select"==Pe||"textbox"==Pe||"contenteditable"==Pe?("textarea"==Pe?st="<textarea class='"+qe+"' "+Bt+" "+Ze+" name='"+ce+"' ></textarea>":"contenteditable"==Pe?(st=_a(67)+(re.dataType||"")+"' "+_n+" "+Bt+" class='"+qe+"' name='"+ce+"'></div>",we=!0):st="select"==Pe?(Dt=Me.options||[],Zn=[Bt," class='",qe,"' ",Ze," name='",ce,"'"].join(""),D.select({options:Dt,attr:Zn,prepend:Me.prepend,labelIndx:Me.labelIndx,valueIndx:We,groupIndx:Me.groupIndx,dataMap:at})):"<input class='"+qe+"' "+Bt+" "+Ze+" type=text name='"+ce+"' />",K(st).appendTo(le).val("select"==Pe&&null!=We&&(Te[We]||this.columns[We])?Te[We]?J[Te[We]]:J[We]:ie)):Pe&&K("<"+Pe+" class='"+qe+"' tabindex=0 "+Bt+" "+Ze+">").appendTo(le),ae.$editor=le.children(".pq-editor-focus"),Ve=le.children(".pq-editor-focus"),V.filterKeys),_n=v.getCell(V.indices),It=((Dt=re.editModel)&&void 0!==Dt.filterKeys&&(jt=Dt.filterKeys),"textarea"!=Pe&&"contenteditable"!=Pe&&_n.empty(),{$cell:le,cellData:ie,$editor:Ve,$td:_n,dataIndx:ce,column:re,colIndx:P,rowIndx:W,rowIndxPage:I,rowData:J,editor:Me}),Yn=v.iKeyNav;if(v._trigger("editorBegin",T,It),V.indices=It,(Ve=le.children(".pq-editor-focus")).data({FK:jt}).on("click",function(){K(this).focus(),v._trigger("editorClick",null,It)}).on("keydown",Yn[_b(198)].bind(Yn)).on("keypress",function(Li){return Yn[_b(199)](Li,{FK:jt})}).on("keyup",function(Li){return Yn[_b(200)](Li,{FK:jt})}).on("blur",o._onBlur=function(Li,dn){var Sn=N.editModel,zi=Sn.onBlur,ti="save"==zi,Fs=document[_b(39)],cr=K(Li.target),Le="validate"==zi,kn=Sn[_b(201)];if(dn=!!dn&&dn.force,!v[_b(191)]&&!v[_b(114)]&&Sn.indices){if(!dn){if(!1===v._trigger("editorBlur",Li,It)||!zi||cr[0]==Fs||kn&&cr.hasClass(kn))return;if(cr.hasClass("pq-autocomplete-text")){if(K("."+cr.data("id")).is(":visible"))return}else if(cr.hasClass("hasDatepicker")){if(cr.datepicker("widget").is(":visible"))return!1}else if(cr.hasClass(_a(68))){if(cr[_b(202)]("widget").is(":visible"))return}else if(cr.hasClass("ui-multiselect")){if(K(".ui-multiselect-menu").is(":visible")||K(Fs).closest(".ui-multiselect-menu").length)return}else if(cr.hasClass("pq-select-button")){if(K(".pq-select-menu").is(":visible")||K(Fs).closest(".pq-select-menu").length)return}else if(Me[_b(203)]&&Me[_b(203)].call(v,It))return}if(v[_b(114)]=!0,Sn=dn||ti||!Le,!v[_b(179)]({evt:Li,silent:Sn})&&!dn&&Le)return v[_b(204)](),!1;v[_b(190)]({evt:Li}),v[_b(204)]()}}).on("focus",function(Li){v._trigger("editorFocus",Li,It)}),Ve.focus(),window.setTimeout(function(){!1===K(document[_b(39)]).hasClass("pq-editor-focus")&&(v.element?v.element.find(".pq-editor-focus"):K()).focus()}),M)if(we)try{var ei=document[_b(205)](),Xt=window[_b(206)]();ei[_b(207)](Ve[0]),Xt[_b(208)](),Xt.addRange(ei)}catch(Li){}else Ve.select()}},o[_b(204)]=function(p){var v=this;p=p||{},v[_b(114)]&&(p.timer?window.setTimeout(function(){delete v[_b(114)]},0):delete v[_b(114)])},o.getRow=function(p){return p=this.normalize(p)[_b(75)],this.iRenderB.get$Row(p)},o.getCell=function(v){0<=v.vci&&(v.colIndx=this.iCols.getci(v.vci));var M=(v=this.normalize(v))[_b(75)];return M=this.iRenderB.getCell(M,v=v.colIndx),K(M)},o[_b(27)]=function(M){0<=M.vci&&(M.colIndx=this.iCols.getci(M.vci));var v=(M=this.normalize(M)).colIndx;return M=0<=(M=M.ri)?M:this[_b(144)].length-1,M=this[_b(115)].getCell(M,v),K(M)},o[_b(209)]=function(p){return p.ri=this[_b(144)].length,this[_b(27)](p)},o[_b(210)]=function(){var p=this.options.editModel.indices;return p?K.extend({},p):null},o[_b(180)]=function(){if(!(p=this.options.editModel.indices))return null;var P=this.colModel[P=p.colIndx],v=this.getEditor(p),M=v.valueIndx,T=v.labelIndx,I=v.mapIndices||{},N=(P=P.dataIndx,this.$div_focus.children(".pq-editor-inner")),V=v.getData;if(V)J=this.callFn(V,p);else if("checkbox"==(V=v.type))var p=N.children(),J="triple"==v.subtype?p.pqval():!!p.is(":checked");else if((p=N.find('*[name="'+P+'"]'))&&p.length)if("select"==V&&null!=M)if(I[M]||this.columns[M]){(J={})[I[M]||M]=p.val(),J[I[T]||T]=p.find("option:selected").text();var W=v.dataMap;if(W){var re=p.find("option:selected").data("map");if(re)for(var ce=0;ce<W.length;ce++){var ie=W[ce];J[I[ie]||ie]=re[ie]}}}else J=p.val();else J=p.val();else(p=N.find(".pq-editor-focus"))&&p.length&&(J=p.val());return J},o[_b(34)]=function(M){var v,T={};return(M=M.$td)&&M.length&&M.closest(".pq-body-outer")[0]==this.$cont[0]&&(M=this.iRenderB[_b(143)](M[0]))&&(v=M[0]+this.riOffset,T=this.iMerge[_b(137)](v,M[1],!0)),T},o[_b(211)]=function(p){var v=this.options,T="remote"==v.pageModel.type,I=this.riOffset,P=v.dataModel.data,N=[];if(null==P)return N;for(var V=0,J=P.length;V<J;V++){var W,re,ce=P[V];ce.pq_rowcls&&(p.rowData=ce,this.hasClass(p)&&(re=(W=T?V+I:V)-I,(ce={rowData:ce}).rowIndx=W,ce[_b(75)]=re,N.push(ce)))}return N},o[_b(212)]=function(p){var v=this.options,T="remote"==v.pageModel.type,I=this.riOffset,P=v.dataModel.data,N=[];if(null==P)return N;for(var V=0,J=P.length;V<J;V++){var W=P[V],re=T?V+I:V,ce=W.pq_cellcls;if(ce)for(var ie in ce)this.hasClass(ie={rowData:W,rowIndx:re,dataIndx:ie,cls:p.cls})&&(ie=this.normalize(ie),N.push(ie))}return N},o.data=function(I){var v=(null!=(v=I.colIndx)?this.colModel[v]:I).dataIndx,M=I.data,T=null==M||"string"==typeof M;if(!(I=I.rowData||this.getRowData(I)))return{data:null};if(null==v){var P=I.pq_rowdata;if(T)return{data:N=null!=P?null==M?P:P[M]:N};P=K.extend(!0,I.pq_rowdata,M),I.pq_rowdata=P}else{var N,V=I[_b(36)];if(T)return null!=V&&(T=V[v],N=null==M||null==T?T:T[M]),{data:N};V||(I[_b(36)]={}),P=K.extend(!0,I[_b(36)][v],M),I[_b(36)][v]=P}},o.attr=function(N){var v=N.rowIndx,M=(null!=(M=N.colIndx)?this.colModel[M]:N).dataIndx,T=N.attr,I=null==T||"string"==typeof T,P=N.refresh;if(!(N=N.rowData||this.getRowData(N)))return{attr:null};if(I||!1===P||null!=v||(v=this.getRowIndx({rowData:N}).rowIndx),null==M){var V=N.pq_rowattr;if(I)return{attr:J=null!=V?null==T?V:V[T]:J};V=K.extend(!0,N.pq_rowattr,T),N.pq_rowattr=V,!1!==P&&null!=v&&this.refreshRow({rowIndx:v})}else{var J,W=N[_b(213)];if(I)return null!=W&&(I=W[M],J=null==T||null==I?I:I[T]),{attr:J};W||(N[_b(213)]={}),V=K.extend(!0,N[_b(213)][M],T),N[_b(213)][M]=V,!1!==P&&null!=v&&this[_b(171)]({rowIndx:v,dataIndx:M})}},o[_b(214)]=function(p,v){var M,T,I="";if("string"==typeof p)I=p;else if(p)for(M in p)if(T=p[M]){if("title"==M)T=T.replace(/"/g,"&quot;");else{if("style"==M){v&&v.push(T);continue}"object"==typeof T&&(T=JSON.stringify(T))}I+=M+'="'+T+'"'}return I},o.removeData=function(p){var I,v=(null!=(v=p.colIndx)?this.colModel[v]:p).dataIndx,M="string"==typeof(I=null==(I=p.data)?[]:I)?I.split(" "):I,T=M.length;if(I=p.rowData||this.getRowData(p))if(null==v){var P=I.pq_rowdata;if(P){if(T)for(var N=0;N<T;N++)delete P[M[N]];T&&!K[_b(215)](P)||delete I.pq_rowdata}}else if((p=I[_b(36)])&&p[v]){var V=p[v];if(T)for(N=0;N<T;N++)delete V[M[N]];T&&!K[_b(215)](V)||delete p[v]}},o.removeAttr=function(J){var T,v=J.rowIndx,M=J.dataIndx,I=(M=null!=(T=J.colIndx)?this.colModel[T].dataIndx:M,"string"==typeof(T=null==(T=J.attr)?[]:T)?T.split(" "):T),P=I.length,N=v-this.riOffset,V=J.refresh;if(J=J.rowData||this.getRowData(J))if(!1!==V&&null==v&&(v=this.getRowIndx({rowData:J}).rowIndx),null==M){var W=J.pq_rowattr;if(W){if(P)for(var re=0;re<P;re++){var ce=I[re];delete W[ce]}else for(ce in W)I.push(ce);P&&!K[_b(215)](W)||delete J.pq_rowattr}!1!==V&&null!=v&&I.length&&(T=I.join(" "),(ie=this.getRow({rowIndxPage:N}))&&ie.removeAttr(T))}else{var ie=J[_b(213)];if(ie&&ie[M]){var ae=ie[M];if(P)for(re=0;re<P;re++)delete ae[ce=I[re]];else for(ce in ae)I.push(ce);P&&!K[_b(215)](ae)||delete ie[M]}!1!==V&&null!=v&&I.length&&(T=I.join(" "),(J=this.getCell({rowIndxPage:N,dataIndx:M}))&&J.removeAttr(T))}},o.normalize=function(p,v){var M,T,I={};for(T in p)I[T]=p[T];var P=I.rowIndx,N=I[_b(75)],V=I.dataIndx,J=I.colIndx;return null==N&&null==P||(M=this.riOffset,P=null==P?+N+M:P,N=null==N?+P-M:N,I.rowIndx=P,I[_b(75)]=N,I.rowData=I.rowData||v&&v[P]||this.getRowData(I)),null==J&&null==V||(M=this.colModel,V=null==V?M[J]?M[J].dataIndx:void 0:V,I.column=M[J=null==J?this.colIndxs[V]:J],I.colIndx=J,I.dataIndx=V),I},o[_b(216)]=function(p){var v=this,M=v.get_p_data();return p.map(function(T){return v.normalize(T,M)})},o.addClass=function(N){var v=(N=this.normalize(N))[_b(75)],M=N.dataIndx,T=pq[_b(217)],I=N.cls,P=N.refresh;if(N=N.rowData)if(!1!==P&&null==v&&(v=this.getRowIndx({rowData:N})[_b(75)]),null==M){var V,J=N.pq_rowcls;V=T((V=J?J+" "+I:I).split(/\s+/)).join(" "),N.pq_rowcls=V,!1===P||null==v||!this.SelectRow().inViewRow(v)||(J=this.getRow({rowIndxPage:v}))&&J.addClass(I)}else{var W=[];"function"!=typeof M.push?W.push(M):W=M;for(var re=(re=N.pq_cellcls)||(N.pq_cellcls={}),ce=0,ie=W.length;ce<ie;ce++){var ae=re[M=W[ce]];V=T((V=ae?ae+" "+I:I).split(/\s+/)).join(" "),re[M]=V,!1===P||null==v||!this.SelectRow().inViewRow(v)||(ae=this.getCell({rowIndxPage:v,dataIndx:M}))&&ae.addClass(I)}}},o[_b(72)]=function(v){var M=(v=this.normalize(v)).rowIndx,T=v.rowData,I=v.dataIndx,P=v.cls,N=v.refresh;if(T){var V=T.pq_cellcls;if(v=T.pq_rowcls,!1!==N&&null==M&&(M=this.getRowIndx({rowData:T}).rowIndx),null==I)v&&(T.pq_rowcls=this[_b(218)](v,P),null!=M&&!1!==N&&(v=this.getRow({rowIndx:M}))&&v[_b(72)](P));else if(V){var J=[];"function"!=typeof I.push?J.push(I):J=I;for(var W=0,re=J.length;W<re;W++){var ce=V[I=J[W]];ce&&(T.pq_cellcls[I]=this[_b(218)](ce,P),null!=M&&!1!==N&&(ce=this.getCell({rowIndx:M,dataIndx:I}))&&ce[_b(72)](P))}}}},o.hasClass=function(T){var v,M=T.dataIndx,I=T.cls;return T=this.getRowData(T),I=new RegExp("\\b"+I+"\\b"),T?null==M?!(!(v=T.pq_rowcls)||!I.test(v)):!!((v=T.pq_cellcls)&&v[M]&&I.test(v[M])):null},o[_b(218)]=function(p,v){if(p&&v){for(var M=p.split(/\s+/),T=v.split(/\s+/),I=[],P=0,N=M.length;P<N;P++){for(var V=M[P],J=!1,W=0,re=T.length;W<re;W++)if(V===T[W]){J=!0;break}J||I.push(V)}return 1<I.length?I.join(" "):1===I.length?I[0]:null}},o.getRowIndx=function(p){var v,M=p.$tr,T=p.rowData,I=this.riOffset;if(T){if(null!=(N=T.pq_ri))return{rowData:T,rowIndx:N,rowIndxPage:N-I};var P=this.get_p_data(),N=!1,V=p.dataUF?this.options.dataModel.dataUF:null,J=!1;if(P)for(var W=0,re=P.length;W<re;W++)if(P[W]==T){J=!0;break}if(!J&&V)for(N=!0,W=0,re=V.length;W<re;W++)if(V[W]==T){J=!0;break}return J?(v=W-I,{rowIndxPage:N?void 0:v,uf:N,rowIndx:W,rowData:T}):{}}return null==M||0==M.length||null==(v=this.iRenderB.getRowIndx(M[0])[0])?{}:{rowIndxPage:v,rowIndx:v+I}},o.search=function(p){for(var T,v=p.row,M=p.first,I=(p=(T=this.options).dataModel,[]),P=this.riOffset,N="remote"==(T=T.pageModel.type),V=p.data,J=0,W=V.length;J<W;J++){var re,ce=V[J],ie=!0;for(re in v)v[re]!==ce[re]&&(ie=!1);if(ie){var ae=this.normalize({rowIndx:N?J+P:J});if(I.push(ae),M)break}}return I},o[_b(219)]=function(p,v,M,T,I){for(var P=0,N=this.options[M],V=p?this.iRenderB[T]:N,J=(v=this[v]).length;P<J;P++)if(!v[P=P==N?V:P][I])return P},o[_b(220)]=function(p){return this[_b(219)](p,"pdata","freezeRows","initV","pq_hidden")},o[_b(175)]=function(p){return this[_b(219)](p,"colModel","freezeCols","initH","hidden")},o[_b(221)]=function(){for(var p=this.pdata,v=p.length-1;0<=v;v--)if(!p[v].pq_hidden)return v;return null},o[_b(222)]=function(){return this.iCols[_b(222)]()},o[_b(223)]=function(p){return this.iCols[_b(223)](p)},o[_b(224)]=function(p){return this.iCols[_b(224)](p)},o[_b(225)]=function(p){return this.iKeys[_b(225)](p)},o[_b(226)]=function(p){return this.iKeys[_b(226)](p)},o[_b(227)]=function(p,v){var M,T=0,I=this.options.numberCell,P=this.colModel;-1==p&&(I.show&&(T+=+I.width),p=0);for(var N=p;N<v;N++)if((M=P[N])&&!M.hidden){if(!M._width)throw"assert failed";T+=M._width}return T}}(jQuery),function(K){(K.paramquery.cKeyNav=function(U){this.that=U}).prototype={bodyKeyDown:function(U){function D(Yn){return ae==Yn}function y(){return v[_b(175)]()}function o(){return v[_b(222)]()}function d(){return v[_b(220)]()}function g(){return v[_b(221)]()}var p=this,v=p.that,M=v.riOffset,T=v.options,I=T.rtl,P=v.iMerge,re=K(U.target),N=v._fe,V=v.colModel,J=T[_b(104)],W=T.editModel,ce=(re=re[0]==(ce=v.$cont[0]),pq.isCtrl(U)),ie=K.ui.keyCode,le=ie.TAB,ae=U.keyCode,we=ae==(we=ie.LEFT),Me=ae==(Me=ie.RIGHT),Pe=D(ie.HOME),Ve=D(ie.END),st=(le=ae==le,D(ie.SPACE)),We=D(ie.PAGE_UP),at=D(ie.PAGE_DOWN),Te=U.shiftKey,qe=D(ie.UP),Bt=D(ie.DOWN);if(W.indices)v.$div_focus.find(".pq-cell-focus").focus();else{if(re&&!N&&le&&!Te)return jt=v[_b(193)](),void v.focus({rowIndxPage:jt.initV,colIndx:jt.initH});if(st&&re)return!1;var Ze,Zn,jt=v.normalize(N),_n=(st=jt[_b(75)],jt.rowIndx),Dt=jt.colIndx,It=(re=v.pdata,N=jt,!0);if(null!=_n&&null!=Dt&&null!=jt.rowData){if(P[_b(195)](_n,Dt)&&(st=(jt=N=P[_b(137)](_n,Dt))[_b(75)],_n=jt.rowIndx,Dt=jt.colIndx,(We||at||Pe||Ve)&&(jt=P.getData(_n,Dt,"proxy_cell"))&&!re[P=jt.rowIndx-M].pq_hidden&&(_n=(st=P)+M),V[Dt].hidden&&(Dt=v[_b(223)](Dt))),0==v._trigger("beforeCellKeyDown",U,N))return!1;v._trigger("cellKeyDown",U,N),Pe||ce&&we?(ce&&Pe&&(_n=d()+M),Dt=(I?o:y)(),p.select(_n,Dt,U)):Ve||ce&&Me?(ce&&Ve&&(_n=g()+M),Dt=(I?y:o)(),p.select(_n,Dt,U)):we||Me||qe||Bt||J.onTab&&le?((we&&!I||Me&&I)&&Dt!=y()||le&&Te?(Ze=p.incrIndx(st,Dt,!1))||pq.focusEle(!0)&&U[_b(29)]():(Me&&!I||we&&I)&&(Dt!=o()||T.autoAddCol)||le&&!Te?(!le&&T.autoAddCol&&Dt==o()&&v.Columns().add([{}]),Ze=p.incrIndx(st,Dt,!0)):qe?Ze=ce?{rowIndxPage:d(),colIndx:Dt}:p[_b(228)](st,Dt,!1):Bt&&(Ze=ce?{rowIndxPage:g(),colIndx:Dt}:(T.autoAddRow&&st==g()&&v.addNodes([{}]),p[_b(228)](st,Dt,!0))),Ze?(_n=Ze[_b(75)]+M,p.select(_n,Ze.colIndx,U)):It=!1):at||We?v.iRenderB[We?"pageUp":"pageDown"](st,function(pr){p.select(_n=pr+M,Dt,U)}):ae==ie.ENTER?(Zn=v.getCell(N))&&Zn[0]&&(v.isEditable(N)?v.editCell(N):(re=Zn.find("button"))[0]&&K(re[0]).click()):ce&&"65"==ae?(jt=v.iSelection,"row"==J.type&&"single"!=J.mode?v.iRows.toggleAll({all:J.all}):"cell"==J.type&&"single"!=J.mode&&jt.selectAll({type:"cell",all:J.all})):ce?It=!1:W[_b(229)]&&this.isEditKey(ae)&&!ce&&(46==ae?v.clear():("select"==v.getEditor(N,"type")&&(st=N[_b(75)],Dt=N.colIndx,(Zn=v.getCell(N))&&Zn[0]&&v.isEditable(N)&&v.editCell({rowIndxPage:st,colIndx:Dt,select:!0})),It=!1)),It&&U[_b(29)]()}}},getPrevVisibleRIP:function(U){for(var D=this.that.pdata,y=U-1;0<=y;y--)if(!D[y].pq_hidden)return y;return U},setDataMergeCell:function(U,D){var y,o=this.that.iMerge;o[_b(195)](U,D)&&(y=o[_b(137)](U,D),o.setData(y.rowIndx,y.colIndx,{proxy_cell:{rowIndx:U,colIndx:D}}))},getValText:function(D){D=D[0].nodeName[_b(54)]();return-1!=K.inArray(D,["input","textarea","select"])?"val":"text"},getNextVisibleRIP:function(U){for(var D=this.that.pdata,y=U+1,o=D.length;y<o;y++)if(!D[y].pq_hidden)return y;return U},incrEditIndx:function(U,D,y){var o=this.that,d=o.colModel,g=d.length,p=o.iMerge,v=o.riOffset,M=o[y?"getLastVisibleRIP":"getFirstVisibleRIP"]();do{var T,I=U+v;if(D=p[_b(195)](I,D)?(T=p[_b(230)](I,D),(P=p.getData(I,D,"proxy_edit_cell"))&&(U=(I=P.rowIndx)-v),y?D+T.o_cc:D-1):y?D+1:D-1,y&&g<=D||!y&&D<0){if(U==M)return null;U=this[y?"getNextVisibleRIP":"getPrevVisibleRIP"](U),D=y?0:g-1}p[_b(195)](I=U+v,D)&&(T=p[_b(137)](I,D),p.setData(T.rowIndx,T.colIndx,{proxy_edit_cell:{rowIndx:I,colIndx:D}}),I=T.rowIndx,D=T.colIndx);var P=d[D],N=o.isEditable({rowIndx:I,colIndx:D}),V="function"==typeof(V=P.editor)?V.call(o,o.normalize({rowIndx:I,colIndx:D})):V}while(U=I-v,P&&(P.hidden||0==N||!1===V));return{rowIndxPage:U,colIndx:D}},incrIndx:function(U,D,y){var o,d,g,p,v,M=this.that,T=M.iMerge,I=U,P=D,N=M.pdata,V=M.riOffset,J=M[(W="get"+(y?"Last":"First")+"Visible")+"RIP"](),W=M[W+"CI"](),re=M.colModel,ce=re.length;if(null==P)I!=J&&(v={rowIndxPage:I=this[y?"getNextVisibleRIP":"getPrevVisibleRIP"](I)});else if(P==W)(v=this[_b(228)](I,P,y))[_b(75)]!=I&&(v.colIndx=M["get"+(y?"First":"Last")+"VisibleCI"]());else{for(;T[_b(195)](d=I+V,P)&&(o=T[_b(230)](d,P),N[I=p||!(g=T.getData(o.o_ri,o.o_ci,"proxy_cell"))||N[g=g.rowIndx-V].pq_hidden?I:g].pq_hidden&&(I=T[_b(231)](d,P)[_b(75)]),!p&&y&&(P=o.o_ci+(o.o_cc?o.o_cc-1:0))),y?P<ce-1&&P++:0<P&&P--,(p=re[P])&&p.hidden;);v={rowIndxPage:I,colIndx:P}}if(v[_b(75)]!=U||v.colIndx!=D)return v},incrRowIndx:function(U,D,y){var g,o=(g=this.that).riOffset,d=U+o;return(g=g.iMerge)[_b(195)](d,D)&&(d=g[_b(230)](d,D),g=g.getData(d.o_ri,d.o_ci,"proxy_cell"),y&&(U=d.o_ri-o+d.o_rc-1),D=g?g.colIndx:d.v_ci),{rowIndxPage:U=this["get"+(y?"Next":"Prev")+"VisibleRIP"](U),colIndx:D}},isEditKey:function(U){return 32<=U&&U<=127||189==U||190==U||187==U},keyDownInEdit:function(U){var D=this.that,y=D.options,o=y.editModel.indices;if(o){var d=K(U.target),g=K.ui.keyCode,T=y.editModel,p=(o=K.extend({},o))[_b(75)],v=o.colIndx,M=(M=o.column.editModel)?K.extend({},T,M):T;return T=this.getValText(d),d.data("oldVal",d[T]()),0!=D._trigger("editorKeyDown",U,o)&&((T=U.keyCode)==g.TAB||T==M.saveKey&&!U.altKey?(o="downFocus"==(M=T==g.TAB?M.onTab:M.onSave)?(y.autoAddRow&&p==D[_b(221)]()&&D.addNodes([{}]),this[_b(228)](p,v,!U.shiftKey)):{rowIndxPage:p,colIndx:v,incr:!!M,edit:"nextEdit"==M},d.hasClass(_a(68))&&d[_b(202)]("widget").is(":visible")&&T==g.ENTER?void 0:this[_b(232)](o,U)):T==g.ESCAPE?(D[_b(190)]({evt:U}),D.focus({rowIndxPage:p,colIndx:v}),U[_b(29)](),!1):T==g.PAGE_UP||T==g.PAGE_DOWN?(U[_b(29)](),!1):!M.keyUpDown||U.altKey||T!=g.DOWN&&T!=g.UP?void 0:(o=this[_b(228)](p,v,T==g.DOWN),this[_b(232)](o,U)))}},keyPressInEdit:function(U,g){var y=this.that,o=y.options.editModel,d=o.indices,M=(g=(g||{}).FK,d.column),p=K.ui.keyCode,v=["BACKSPACE","LEFT","RIGHT","UP","DOWN","DELETE","HOME","END"].map(function(T){return p[T]});return M=M.dataType,0<=K.inArray(U.keyCode,v)||!(!1===y._trigger("editorKeyPress",U,K.extend({},d))||g&&("float"==M||"integer"==M)&&(v=d.$editor.val(),y=o.charsAllow["float"==M?0:1],g=U.charCode||U.keyCode,d=String[_b(60)](g),"="!==v[0]&&d&&-1==y.indexOf(d)))},keyUpInEdit:function(U,y){y=(y||{}).FK;var o,d=(o=(o=(p=this.that).options).editModel).indices;p._trigger("editorKeyUp",U,K.extend({},d));var g,p=d.column.dataType;!y||"float"!=p&&"integer"!=p||(d=K(U.target),y="integer"==p?o.reInt:o.reFloat,U=this.getValText(d),o=d.data("oldVal"),g=d[U](),0==y.test(g)&&"="!==g[0]&&(y.test(o)?d[U](o):(g=("float"==p?parseFloat:parseInt)(o),isNaN(g)?d[U](0):d[U](g))))},saveAndMove:function(U,D){if(null==U)return D[_b(29)](),!1;var o,d=this,g=d.that,p=U[_b(75)],v=U.colIndx;return!(g[_b(114)]=!0)!==g[_b(179)]({evt:D})&&g.pdata?(g[_b(190)](D),U.incr&&(o=d[U.edit?"incrEditIndx":"incrIndx"](p,v,!D.shiftKey),p=o?o[_b(75)]:p,v=o?o.colIndx:v),g.scrollCell({rowIndxPage:p,colIndx:v},function(){d.select(p+g.riOffset,v,D),U.edit&&g._editCell({rowIndxPage:p,colIndx:v})}),g[_b(204)]({timer:!0,msg:"saveAndMove"})):(g.pdata||g[_b(190)](D),g[_b(204)]({timer:!0,msg:_a(69)})),D[_b(29)](),!1},select:function(U,D,y){var o=this.that,d=U-o.riOffset,v=(this[_b(233)](U,D),o.options),g=o.iSelection,p=v[_b(104)],M="row"==(v=p.type),T="cell"==v;o.scrollCell({rowIndx:U,colIndx:D},function(){var I,P,N,V,J=g.address();y.shiftKey&&y.keyCode!==K.ui.keyCode.TAB&&p.type&&"single"!=p.mode&&(J.length||M)?M?o.iRows.extend({rowIndx:U,evt:y}):(P=(I=J[J.length-1]).firstR,N=I.firstC,"column"==(V=I.type)?(I.c1=N,I.c2=D,I.r1=I.r2=I.type=I.cc=I.rc=void 0,o.Range(J,!1).select()):"row"==V?g[_b(234)]({r1:P,r2:U,firstR:P,firstC:N}):g[_b(234)]({r1:P,c1:N,r2:U,c2:D,firstR:P,firstC:N})):M||T&&o.Range({r1:U,c1:D,firstR:U,firstC:D}).select(),o.focus({rowIndxPage:d,colIndx:D})})}}}(jQuery),function(K){var U,D;(K.paramquery[_b(235)]=function(){}).prototype={autoFitCols:function(){var y=(d=this.that).colModel,o=y.length,p=this.dims,d=d[_b(227)](-1,o,!0),g=this.getSBWd();if(d!==(p=p.wdCenter-g)){for(var v,M=d-p,T=[],I=0;I<o;I++){var P=(J=y[I])._percent,N=J._resized;J.hidden||P||N||(M<0?(re=J._maxWidth-J._width)&&T.push({availWd:-1*re,colIndx:I}):(re=J._width-J._minWidth)&&T.push({availWd:re,colIndx:I})),N&&delete(v=J)._resized}T.sort(function(ae,we){return ae.availWd>we.availWd?1:ae.availWd<we.availWd?-1:0}),I=0;for(var V=T.length;I<V;I++){var J,W,re=(ie=T[I]).availWd,ie=ie.colIndx,ce=Math.round(M/(V-I));ie=(J=y[ie])._width,Math.abs(re)>Math.abs(ce)?(W=ie-ce,M-=ce):(W=ie-re,M-=re),J.width=J._width=W}0!=M&&v&&((W=v._width-M)>v._maxWidth?W=v._maxWidth:W<v._minWidth&&(W=v._minWidth),v.width=v._width=W)}},numericVal:function(y,o){return o=-1<(y+"").indexOf("%")?parseInt(y)*o/100:parseInt(y),Math.round(o)},refreshColumnWidths:function(y){y=y||{};var o=this.that,d=o.options,g=d.numberCell,p="flex"===d.width,v=o.colModel,M=this.autoFit,T=this.dims.wdCenter,I=v.length,V=d[_b(236)],J=d[_b(237)],P=0,N=(g.show&&(g.width<g.minWidth&&(g.width=g.minWidth),P=g.outerWidth=g.width),p?null:+T-P),W=(V=Math.floor(this.numericVal(V,N)),J=Math.ceil(this.numericVal(J,N)),0);if(!p&&N<5||isNaN(N)){if(d.debug)throw"availWidth N/A"}else{delete o[_b(238)];for(var re=0;re<I;re++){var ce,ie,ae,we,Me,Pe,Ve=v[re];Ve.hidden||(ie=-1<((ce=Ve.width)+"").indexOf("%")||null,we=Ve.maxWidth,ae=(ae=Ve.minWidth)?this.numericVal(ae,N):V,(we=we?this.numericVal(we,N):J)<ae&&(we=ae),null!=ce?(Pe=0,!p&&ie?(o[_b(238)]=!0,Ve.resizable=!1,Ve._percent=!0,1<=(W+=(Me=+this.numericVal(ce,N))-(Pe=Math.floor(Me)))&&(Pe+=1,--W)):ce&&(Pe=+ce),Pe<ae?Pe=ae:we<Pe&&(Pe=we),Ve._width=Pe):Ve._width=ae,ie||(Ve.width=Ve._width),Ve._minWidth=ae,Ve._maxWidth=p?1e3:we)}0==p&&!1!==y[_b(239)]&&M&&this[_b(240)]()}},format:(U=K.datepicker,D=pq[_b(47)],function(y,o){return"function"==typeof o?o(y):pq[_b(241)](o)?y==parseInt(y)?pq.formulas.TEXT(y,pq.juiToExcel(o)):isNaN(Date.parse(y))?void 0:U.formatDate(o,new Date(y)):y==parseFloat(y)?D(y,o):void 0}),renderCell:function(y){var o,d,g,p,v,M,T=this.that,I=y.attr||[],P=y.style||[],N=y.Export,V=T.options,J=y.cls||[],W=y.rowData,re=y.column,ce=re.dataIndx,ie=(W.pq_celldt||{})[ce]||re.dataType,ae="pic"==ie,we=y.colIndx,Me=pq.styleStr,Pe=T[_b(214)],Ve=re.style||{},le=W[_b(242)],st=(W[_b(129)]||{})[ce]||{},We=W.pq_rowprop||{},at=V.freezeCols,Te=V[_b(243)];if(W)return v=W[ce],N||(Ve&&P.push(Me(Ve)),le&&P.push(Me(le)),(Ve=(W[_b(244)]||{})[ce])&&P.push(Me(Ve)),we==at-1&&Te&&J.push("pq-last-frozen-col"),re.cls&&J.push(re.cls),V.editModel[_b(245)]&&!1===T.isEditable(y)&&J.push("pq-cell-disable"),ae?v=!v||"data"!=v.substr(0,4)&&"http"!=v.substr(0,4)?v:_a(70)+v+'" />':"string"==typeof v&&"html"!=ie&&(v=pq.escapeHtml(v))),Ve=(le=V.format.call(T,W,re,st,We))?this.format(v,le,ie):v,y.dataIndx=ce,y.cellData=v,y.formatVal=Ve,(we=re.render)&&(M=T.callFn(we,y))&&"string"!=typeof M&&((o=M.attr)&&I.push(Pe(o)),p=M.prop,(g=M.cls)&&J.push(g),(d=M.style)&&P.push(Me(d)),M=M.text),(M=null==M&&(we=re._renderG||re._render)?we.call(T,y):M)&&"string"!=typeof M&&((o=M.attr)&&I.push(o),(g=M.cls)&&J.push(g),(d=M.style)&&P.push(Me(d)),M=M.text),null==M&&(M=Ve||v),N?[M,d,p,(o||{}).title]:((at=(p=p||{}).align||st.align||We.align||re.align)&&J.push("pq-align-"+at),(at=p.valign||st.valign||We.valign||re.valign)&&J.push("pq-valign-"+at),(Te=(W.pq_cellcls||{})[ce])&&J.push(Te),(V=(W[_b(213)]||{})[ce])&&I.push(Pe(V,P)),P=P.length?" style='"+P.join("")+"' ":"",null==(M=pq.newLine(M))&&(M=""),["<div class='",J.join(" "),"' ",I.join(" "),P," >",ae?M:"<div>"+M+"</div>","</div>"].join(""))}}}(jQuery),function(K){var U,D=K.paramquery,y=D._pqGrid.prototype;y[_b(246)]=function(M){var d,g,p,v=(M=this[_b(115)][_b(143)](M[0]))[0];return(p=null!=(M=M[1])&&null!=v&&(g=(g=this[_b(144)][v])&&g[M])?g.colModel:p)&&p.length&&(d=!0),{col:g||this.colModel[M],ci:M,ri:v,isParent:d}},y.flex=function(o){var d=this.colIndxs;o&&o.dataIndx&&(o.colIndx=o.dataIndx.map(function(g){return d[g]})),this[_b(110)].flex(o)},y.flexAsync=function(o){var d=this;cancelAnimationFrame(U),U=requestAnimationFrame(function(){d.flex(o)})},D.mixHeader={colCollapse:function(v,d){var g=this.that,p={column:v};v=v[_b(90)],!1!==g._trigger("beforeColumnCollapse",d,p)&&(v.on=!v.on,!1!==g._trigger("columnCollapse",d,p)&&g.refresh({colModel:!0}))},onHeaderClick:function(o){var d,g=this.that,p=g[_b(247)];if(g._trigger("headerClick",o),!p||"stop"==p.status){if((p=K(o.target)).is("input,label"))return!0;if((d=p.closest(_a(71))).length)if(d=(g=g[_b(246)](d)).col,p.hasClass("pq-col-collapse"))this[_b(248)](d,o);else if(!g.isParent)return this[_b(249)](d,g.ci,o)}},getTitle:function(o,d){var g=o.title;return"function"==typeof g?g.call(this.that,{column:o,colIndx:d,dataIndx:o.dataIndx}):g},createHeaderCell:function(o){var d,g=this.that,ce=g.options,p=o.cls,v=o.style,M=o.attr,T=o.column,ie=o.colIndx,I=this[_b(250)](ce.sortModel),P=T[_b(90)],N=pq.styleStr,V=T.halign||T.align,J=T.hvalign,W=T.cls,re=T.colModel;return ce=this.hasMenuH(ce,T),ie=null!=(ie=this.getTitle(T,ie))?ie:T.dataIndx,V&&p.push("pq-align-"+V),J&&p.push("pq-valign-"+J),(V=T.styleHead)&&v.push(N(V)),(V=T.attrHead)&&M.push(g[_b(214)](V)),W&&p.push(W),p.push(T.clsHead),ce&&p.push("pq-has-menu"),re&&re.length?P&&(p.push("pq-collapsible-th"),d=[_a(72),P.on?"plus":"minus","'></span>"].join("")):p.push("pq-grid-col-leaf"),M.push("pq-row-indx="+o.rowIndx+" pq-col-indx="+o.colIndx),T.pq_title=ie,["<div ",M.join(" ")," "," class='",p.join(" "),"' style='",v.join(""),"' >",_a(73),d,_a(74),ie,"</span>",I,"</div>",ce?"<span class='pq-menu-icon'></span>":"","</div>"].join("")},getSortSpaceSpans:function(o){var d=o.space?" pq-space":"";return[_a(75),d,"'></span>",o.number?_a(76)+d+"'></span>":""].join("")},hasMenuH:function(o,d){var g=d.colModel;return(!g||!g.length)&&(g=o.menuIcon,o=d.menuIcon,g&&!1!==o||!1!==g&&o)},onHeaderCellClick:function(o,d,g){var p,v,M,T=this.that,I=T.options,P=I.sortModel,N=(o=o||{}).dataIndx;!1!==T._trigger("headerCellClick",g,{column:o,colIndx:d,dataIndx:N})&&-1!=d&&(I[_b(104)].column&&-1==g.target.className.indexOf("pq-title-span")?(I={c1:d,firstC:d,firstR:T[_b(220)]()},v=(p=(M=T.iSelection).address()).length,pq.isCtrl(g)?M.add(I):(g.shiftKey&&(v&&"column"==p[v-1].type&&((M=p[v-1]).c1=M.firstC,M.c2=d,M.r1=M.r2=M.type=M.cc=void 0),I=p),T.Range(I,!1).select()),T.focus({rowIndxPage:T[_b(220)](!0),colIndx:d}),T._trigger("mousePQUp")):P.on&&(P.wholeCell||K(g.target).hasClass("pq-title-span"))&&0!=o.sortable&&T.sort({sorter:[{dataIndx:N,sortIndx:o.sortIndx}],addon:!0,skipCustomSort:pq.isCtrl(g),tempMultiple:P.multiKey&&g[P.multiKey],evt:g}))},setSortIcons:function(){var o=this.that,d=o.options,g=d.bootstrap,p=d.ui,v=o[_b(144)].length-1;if(o.$head_i){var M=o.iSort.getSorter(),T=M.length,I=!1;o.options.sortModel.number&&1<T&&(I=!0);for(var P=0;P<T;P++){var N,V=o.getColIndx({dataIndx:V=(J=M[P]).dataIndx}),J=J.dir;0<=V&&(N=g.on?g[_b(251)]:p[_b(251)]+" pq-col-sort-"+("up"==J?"asc":"desc"),J=g.on?_a(77)+J:_a(78)+("up"==J?"n":"s"),(V=K(o[_b(115)].getCell(v,V))).addClass(N),V.find(".pq-col-sort-icon").addClass(J),I&&V.find(".pq-col-sort-count").html(P+1))}}}},D[_b(111)]=function(o){var d=this,g=((d.that=o).$head_i.on({mousedown:function(v){var M;v[_b(252)]||(M=K(v.target),d[_b(253)](v),v[_b(252)]=!0,v=K.Event("mousedown",v),M.trigger(v))},dblclick:function(v){d[_b(254)](v)}},_a(79)),o.options),p=g.flex;d.rtl=g.rtl?"right":"left",p.on&&p.one&&o.one("ready",function(){d.flex()})},D[_b(111)].prototype={doubleClick:function(p){var d=this.that.options,g=d.flex;p=K(p.target),p=parseInt(p.attr("pq-col-indx")),isNaN(p)||g.on&&this.flex(g.all&&!d[_b(255)].autoFit?{}:{colIndx:[p]})},flex:function(o){this.that.iRenderB.flex(o)},setDraggables:function(p){p=K(p.target);var d,g,v=this,M=v.rtl;p.draggable({axis:"x",helper:function(T,I){var P=K(T.target),N=parseInt(P.attr("pq-col-indx"));return v[_b(256)](N),v[_b(257)](T,I),P},start:function(T,I){d=T.clientX,g=parseInt(v.$cl[0].style[M])},drag:function(T,I){T=T.clientX-d,"right"==v.rtl&&(T*=-1),v.$cl[0].style[M]=g+T+"px"},stop:function(T,I){return v.resizeStop(T,I,d)}})},_getDragHelper:function(T){var g=+(M=this.that).options.freezeCols,d=(T=K(T.target),M[_b(93)]),M=M[_b(115)],p=(g=(T=+T.attr("pq-col-indx"))<g?0:M.scrollX(),d[_b(258)]()),v=M.getLeft(T)-g;M=M.getLeft(1+T)-g,T="style='height:"+p+"px;"+this.rtl+":",this.$clleft=K(_a(80)+T+v+"px;'></div>").appendTo(d),this.$cl=K(_a(80)+T+M+"px;'></div>").appendTo(d)},_setDragLimits:function(o){var d,g,p;o<0||(p=(g=this.that)[_b(115)],g=g.colModel[o],g=(d=p.getLeft(o)+g._minWidth)+g._maxWidth-g._minWidth,(p=K(p._resizeDiv(o))).draggable("instance")&&p.draggable("option","containment",[d,0,g,0]))},columnResize:function(o,d,g){var p,v,M,T=this.that,I=T.colModel,P=T.options,N=P.numberCell;P.rtl&&(d*=-1),-1==o?(p=null,M=(v=parseInt(N.width))+d,N.width=M):(p=I[o],M=(v=parseInt(p.width))+d,p.width=M,p._resized=!0),T.refresh({soft:!0}),T._trigger("columnResize",g,{colIndx:o,column:p,dataIndx:p?p.dataIndx:null,oldWidth:v,newWidth:(p||N).width})},resizeStop:function(o,d,g){this.$clleft.remove(),this.$cl.remove(),g=o.clientX-g,d=+K(d.helper).attr("pq-col-indx"),this[_b(259)](d,g,o)}}}(jQuery),function(K){var U=K.paramquery;U[_b(260)]=function(D){function y(p,v){return K(_a(81)+p+" ui-icon "+v+"'></div>").appendTo(D.element)}var o=this,d=D.options,g=d[_b(261)];o.that=D,o[_b(262)]=null,o.rtl=d.rtl,o.status="stop",o.$arrowTop=y("down",g.topIcon),o[_b(263)]=y("up",g.bottomIcon),o.hideArrows(),g&&g.enabled&&D.$head_i.on("mousedown",".pq-grid-col",o[_b(264)](o,D))},U[_b(260)].prototype={dragHelper:function(D,y,o){var d=y.options[_b(261)].rejectIcon;return function(){D.status="helper",y.$head_i.find(_a(79)).hide();var g=K(_a(82)+d+_a(83)+o.pq_title+"</div>");return(D[_b(262)]=g)[0]}},getRowIndx:function(D,y,o){for(;o&&D[o][y]==D[o-1][y];)o--;return o},hideArrows:function(){this.$arrowTop.hide(),this[_b(263)].hide()},_columnIndexOf:function(D,y){for(var o=0,d=D.length;o<d;o++)if(D[o]==y)return o;return-1},moveColumn:function(T,P,o,M,J){var p=this.that,V=p.options[N="colModel"],I=p[_b(144)],v=p.depth-1,N=(M=null==M?this.getRowIndx(I,T,v):M,J=null==J?this.getRowIndx(I,P,v):J,v=I[M][T],P=(I=(M=I[J][P]).parent)?I[N]:V,(J=(T=v.parent)?T[N]:V).indexOf(v));return V=o?0:1,J=P.indexOf(M),p.iCols.move(1,N,J+V,T,I,"dnd")[0]},onColMouseDown:function(D,y){return function(o){var d,g,p=K(this),v=K(o.target);o[_b(252)]||v.is(_a(84))||v.parent().hasClass(_a(85))||(g=(d=(p=y[_b(246)](p)).col)?d.parent:null,!d||d.nodrag||d._nodrag||g&&1==g.colSpan||D[_b(265)](o,d,p)&&(o[_b(252)]=!0,g=K.Event("mousedown",o),v.trigger(g)))}},onDrop:function(){var D=this,y=D.that;return function(o,p){var g=+p.draggable.attr("pq-col-indx"),v=(p=+p.draggable.attr("pq-row-indx"),+(M=K(this)).attr("pq-col-indx")),M=+M.attr("pq-row-indx"),T=D.leftDrop;D.rtl&&(T=!T),!1!==y._trigger("beforeColumnOrder",null,{colIndxDrag:g,colIndxDrop:v,left:T})&&(v=D.moveColumn(g,v,T,p,M))&&y._trigger("columnOrder",null,{dataIndx:v.dataIndx,column:v,oldcolIndx:g,colIndx:y.getColIndx({column:v})})}},onStart:function(D,y,o,d){return function(g){if(!1===y._trigger("columnDrag",g[_b(32)],{column:o}))return!1;D[_b(266)](d)}},onDrag:function(D,y){return function(o,d){D.status="drag";var g,p=K(".pq-drop-hover",y.$head_i);0<p.length?(D[_b(267)](!0),g=p.width(),o=o.clientX-p.offset().left+K(document).scrollLeft(),D.leftDrop=o=o<g/2,D[_b(268)](p,o)):(D.hideArrows(),g=K(".pq-drop-hover",y.$top),D[_b(267)](!!g.length))}},setDraggable:function(d,y,o){d=K(d[_b(125)]);var g=this,p=g.that;if(!d.hasClass("ui-draggable"))return d.draggable({distance:10,cursorAt:{top:-18,left:-10},zIndex:"1000",appendTo:p.element,revert:"invalid",helper:g.dragHelper(g,p,y),start:g.onStart(g,p,y,o),drag:g.onDrag(g,p),stop:function(){p.element&&(g.status="stop",p.$head_i.find(_a(79)).show(),g.hideArrows())}}),!0},setDroppables:function(D){for(var y,o,d,g,p,v=this.that,M=D.col,T=D.ri,I=D.o_ci,P=I+M.o_colspan,N={hoverClass:D=_a(86),classes:{"ui-droppable-hover":D},accept:".pq-grid-col",tolerance:"pointer",drop:this.onDrop()},V=v.$head_i.find(_a(87)),J=V.length;J--;)p=(g=K(V[J])).hasClass("ui-droppable"),d=(o=v[_b(246)](g)).col,y=o.ri,o=o.ci,d==M||d.nodrop||d._nodrop||T<y&&I<=o&&o<P?p&&g.droppable("destroy"):p||g.droppable(N)},showFeedback:function(g,p){var o=this.that,v=g[0],d=o[_b(93)][0].offsetTop;g=g.offset().left-K(o.element).offset().left+(p?0:v[_b(40)])-8,p=d+v.offsetTop-16,v=d+o.$header[0][_b(41)],this.$arrowTop.css({left:g,top:p,display:""}),this[_b(263)].css({left:g,top:v,display:""})},updateDragHelper:function(D){var y="removeClass",o="addClass",d=(g=this.that.options[_b(261)]).acceptIcon,g=g.rejectIcon,p=this[_b(262)];p&&p[D?y:o]("ui-state-error").children("span.pq-drag-icon")[D?o:y](d)[D?y:o](g)}}}(jQuery),function(K){K.paramquery[_b(269)]={_input:function(U,D,y,o,d,g){return["<input ",' value="',D=pq.formatEx(U,D,g),"\" name='",U.dataIndx,"' type=text style='",o,"' class='",y,"' ",d," />"].join("")},_onKeyDown:function(U,D,y){var o,d=this,g=this.that;if(U.keyCode===K.ui.keyCode.TAB){var p,v,M=d[_b(143)](y.closest(".pq-grid-col")[0])[1],T=g.colModel,I=U.shiftKey,P=T[M];if("textbox2"==(P.filterUI||{}).type&&(g[_b(172)]({colIndx:M}),(o=d.getCellEd(M)[1])[0]==y[0]?I||(p=o[1]):I&&(p=o[0]),p))return p.focus(),U[_b(29)](),!1;for(;I?M--:M++,!(M<0||M>=T.length);){var N=(P=T[M]).filter;if(!P.hidden&&N){v=!0,g[_b(172)]({colIndx:M},function(){var V=d.getCellEd(M)[1];if(V="textbox2"==(P.filterUI||{}).type?K(I?V[1]:V[0]):V)return V.focus(),U[_b(29)](),!1});break}}!v&&I&&pq.focusEle(!0)&&U[_b(29)]()}},_textarea:function(U,D,y,o,d){return["<textarea name='",U,"' style='"+o+"' class='"+y+"' "+d+" >",D,"</textarea>"].join("")},bindListener:function(U,D,y,o){var g,d=this.that,p=(g=pq.filter.getVal(g=o.filter))[0],v=g[1];pq.fakeEvent(U,D,d.options[_b(157)].timeout),U.off(D).on(D,function(M){var T,I,P=(N=o.filterUI).type,N=N.condition;if("checkbox"==P?T=U.pqval({incr:!0}):"textbox2"==P?(T=K(U[0]).val(),I=K(U[1]).val()):T=U.val(),T=""===T?void 0:pq.deFormat(o,T,N),I=""===I?void 0:pq.deFormat(o,I,N),p!==T||v!==I)return p=T,v=I,(y=pq.getFn(y)).call(d,M,{column:o,dataIndx:o.dataIndx,value:T,value2:I})})},betweenTmpl:function(U,D){return[_a(88),U,"</div>",_a(89),_a(90),D,"</div>"].join("")},createListener:function(U){var D={},y=this.that;return D[U]=function(o,d){var g=d.column;y.filter({rules:[{dataIndx:g.filterIndx||d.dataIndx,condition:g.filter.condition,value:d.value,value2:d.value2}]})},D},getCellEd:function(y){var D;return y=(D=K(this.getCell(D=this.data.length-1,y))).find(_a(91)),[D,y]},onCreateHeader:function(){var U=this;U.that.options[_b(157)].header&&U.eachH(function(D){D.filter&&U[_b(270)](D)})},onHeaderKeyDown:function(U,D){var y=K(U[_b(32)].target);return!y.hasClass(_a(92))||this._onKeyDown(U,D,y)},postRenderCell:function(U){var D=U.dataIndx,y=U.filterUI||{},o=U.filter,d=this.that,p=(g=this.getCellEd(g=d.colIndxs[D]))[0],v=g[1];if(0!=v.length){var M=y.type,T={button:"click",select:"change",checkbox:"change",textbox:"timeout",textbox2:"timeout"},g=pq.filter.getVal(o)[0],P=("checkbox"==M?v.pqval({val:g}):"select"==M&&(K.isArray(g=g||[])||(g=[g]),U.format&&(g=g.slice(0,25).map(function(ie){return pq.format(U,ie)})),v.val(g.join(", "))),g=y.init,o.listeners||[o.listener||T[M]]);g&&g.find(function(ie){return d.callFn(ie,{dataIndx:D,column:U,filter:o,filterUI:y,$cell:p,$editor:v})});for(var N=0;N<P.length;N++){var V,J=P[N],W=typeof J,re={};for(V in"string"==W?J=this[_b(271)](J):"function"==W&&(re[T[M]]=J,J=re),J)this[_b(272)](v,V,J[V],U)}}},getControlStr:function(U){var D=this.that,y=U.dataIndx,o=" ui-corner-all",d=(p=pq.filter.getVal(p=U.filter))[0],g=p[1],p=p[2],v=(P=U.filterUI=pq.filter[_b(273)]({column:U,dataIndx:y,condition:p,indx:0},D)).type,M="",T=("textbox2"==v&&(g=null!=g?g:""),_a(93)+(P.cls||"")),I=P.style||"",P=(P.attr||"")+" tabindex=-1";return v&&0<=v.indexOf("textbox")?(d=d||"",T=T+" pq-search-txt"+o,M="textbox2"==v?this[_b(274)](this._input(U,d,T+" pq-from",I,P,p),this._input(U,g,T+" pq-to",I,P,p)):this._input(U,d,T,I,P,p)):"select"===v?M="<input type='text' "+["name='",y,"' class='",T+=o,"' style='",I,"' ",P].join("")+_a(94)+(D.options.rtl?"left":"right")+":0;top:3px;' class='ui-icon ui-icon-arrowthick-1-s'></span>":"checkbox"==v?M=["<input ",null==d||0==d?"":"checked=checked"," name='",y,_a(95)+T+"' style='"+I+"' "+P+" />"].join(""):"string"==typeof v&&(M=v),M},renderFilterCell:function(U,D,y){var o,d=this.that.options[_b(157)],g=U.cls,p=U.halign||U.align;return p&&y.push("pq-align-"+p),g&&y.push(g),y.push(U.clsHead),U.filter&&(o=this[_b(275)](U))&&y.push("pq-col-"+D),(p=this.hasMenu(d,U))&&y.push("pq-has-menu"),[_a(96),"",o,"</div>",p?"<span class='pq-filter-icon'></span>":""].join("")},hasMenu:function(U,D){return D=(D.filter||{}).menuIcon,(U=U.menuIcon)&&!1!==D||!1!==U&&D}}}(jQuery),function(K){var U=K.paramquery.cRefresh=function(D){var y=this;y.vrows=[],(y.that=D).on("dataReadyDone",function(){y.addRowIndx(!0)}),K(window).on("resize"+D[_b(35)]+" orientationchange"+D[_b(35)],y[_b(276)].bind(y))};K.extend(U,{Z:function(){return(window.outerWidth-8)/window.innerWidth},cssZ:function(){return document.body.style.zoom},isFullScreen:function(){return document.fullScreen||document[_b(277)]||document[_b(278)]||window[_b(279)]==screen.height},isSB:function(){return K(document).height()>K(window).height()}}),K(document).one("pq:ready",function(){var D=U.Z,y=U.cssZ,o=D(),d=y(),g=(U.isZoom=function(){var v=D(),M=y();if(o!=v||d!=M)return o=v,d=M,!0},U.isSB),p=g();pq.onResize(document.body,function(){var v=g();v!=p&&(p=v,K(window).trigger("resize",{SB:!0}))})}),K(window).on("resize",function(){U.isZoom&&(U.ISZOOM=U.isZoom())}),U.prototype={addRT:function(D){var y=this.that.options,o=y.dataModel,d=y[_b(280)];if(d)for(var g,p=D||o.data,v=p.length;v--;)(g=p[v])&&pq.extendT(g,d)},addRowIndx:function(D){for(var y,o=this.that,d=o.options.dataModel.dataUF,g=o.get_p_data(),p=g.length;p--;)(y=g[p])&&(y.pq_ri=p);if(D&&d)for(p=d.length;p--;)delete d[p].pq_ri},move:function(){},setGridAndCenterHeightForFlex:function(){var D=this.that;D.element.height(""),D[_b(93)].height(""),D.dims.htGrid=D.element.height()},setGridWidthForFlex:function(){var D=this.that,y=D.options,o=this[_b(281)],d=D.element,g=D.$toolPanel[0][_b(40)]+D.iRenderB[_b(282)]();y.maxWidth&&g>=this[_b(281)]&&(g=o),D._trigger("contWd"),d.width(g+"px"),D.dims.wdGrid=g},_calcOffset:function(D){return(D=/(-|\+)([0-9]+)/.exec(D))&&3===D.length?parseInt(D[1]+D[2]):0},setMax:function(D){var o,y=(o=this.that).element;(o=o.options[D])?(o==parseInt(o)&&(o+="px"),y.css(D,o)):y.css(D,"")},refreshGridWidthAndHeight:function(){var D,y,o,d=(W=this.that).options,g=W.dims,p=-1<(d.width+"").indexOf("%"),v=-1<(d.height+"").indexOf("%"),M=-1<(d.maxHeight+"").indexOf("%"),T="flex"==d.height,I=d[_b(283)],P=M&&T,N=-1<(d.maxWidth+"").indexOf("%"),V="flex"==d.width,J=N&&V,W=W.element;if(p||v||P||J){if(!(I=I?K(I):W.parent()).length)return;I=I[0]==document.body||"fixed"==W.css("position")?(o=K(window).width(),window[_b(279)]||K(window).height()):(o=I.width(),I.height());var ce=this[_b(284)],re=p?ce(d.width):0;ce=v?ce(d.height):0,J?D=parseInt(d.maxWidth)*o/100:p&&(D=parseInt(d.width)*o/100+re),P?y=parseInt(d.maxHeight)*I/100:v&&(y=parseInt(d.height)*I/100+ce)}D||(V&&d.maxWidth?N||(D=d.maxWidth):p||(D=d.width)),d.maxWidth&&(this[_b(281)]=D),y||(T&&d.maxHeight?M||(y=d.maxHeight):v||(y=d.height)),parseFloat(D)==D?W.css("width",D=D<d.minWidth?d.minWidth:D):"auto"===D&&W.width(D),parseFloat(y)==y&&W.css("height",y=y<d.minHeight?d.minHeight:y),g.wdGrid=Math.round(W.width()),g.htGrid=Math.round(W.height())},isReactiveDims:function(){function D(v){return-1!=(v+"").indexOf("%")}var o=(p=this.that.options).width,d=p.height,g=p.maxWidth,p=p.maxHeight,y=D(o);return o="auto"===o,d=D(d),g=D(g),p=D(p),y||o||d||g||p},getParentDims:function(){var D,y=this.that.element,o=y.parent();return o.length?[o[0]==document.body||"fixed"==y.css("position")?(D=window[_b(279)]||K(window).height(),K(window).width()):(D=o.height(),o.width()),D]:[]},onWindowResize:function(D,y){var o,d,g=this,p=g.that,v=p.dims||{},M=v.htParent,T=v.wdParent,I=p.options,P=p.element;if(!U[_b(285)]()&&!I.disabled&&!(K.support.touch&&I.editModel.indices&&K(document[_b(39)]).is(".pq-editor-focus")||y&&(p=y.$grid)&&(p==P||0==P.closest(p).length))){if(I=g[_b(286)](),U.ISZOOM)return g[_b(287)](function(){g.refresh({soft:!0})});I&&g[_b(287)](function(){if(d=g[_b(288)](),o=d[0],(d=d[1])==M&&o==T){if(parseInt(P.width())==parseInt(v.wdGrid))return}else v.htParent=d,v.wdParent=o;g.refresh({soft:!0})})}},setResizeTimer:function(D){var y=this,o=y.that;clearTimeout(y[_b(289)]),y[_b(289)]=window.setTimeout(function(){o.element&&(D?D():y[_b(290)]())},o.options[_b(291)]||100)},refresh:function(D){var y,o=this,d=o.that,g=null==(D=D||{}).header||D.header,p=D.pager,v=!D.soft,M=d.element,T=d.$toolPanel,I=d.dims=d.dims||{htCenter:0,htHead:0,htSum:0,htBody:0,wdCenter:0,htTblSum:0};D.colModel&&d.refreshCM(),M[0][_b(40)]?(T.css("height","1px"),D.toolbar&&d[_b(292)](),(y=d.options)[_b(90)]._collapsed=!1,o.setMax("maxHeight"),o.setMax("maxWidth"),o[_b(293)](),v&&!1!==p&&d[_b(164)](),I.htCenter=o[_b(294)](),p=T[0][_b(40)],I.wdCenter=I.wdGrid-p,d[_b(93)].css("margin"+(y.rtl?"Left":"Right"),p),d.iRenderB.init({header:g,soft:D.soft,source:D.source}),"flex"==y.height&&o[_b(295)](),"flex"==y.width&&o[_b(296)](),T=this[_b(288)](),I.wdParent=T[0],I.htParent=T[1],v&&d[_b(117)](),y.dataModel[_b(161)]=void 0,d._trigger("refreshFull")):M.addClass("pq-pending-refresh")},setCenterHeight:function(){var D,y=this.that,o=y.$top,d=y.options;return"flex"===d.height&&!d.maxHeight||(D=y.dims.htGrid-(d.showTop?o[0][_b(41)]+parseInt(o.css("marginTop")):0)-y.$bottom[0][_b(41)]+1,y[_b(93)].height(D=0<=D?D:"")),D}}}(jQuery),function(K){(K.paramquery[_b(297)]=function(U,D){var y,o=this,d=(o.that=U,o.fns={},o.options=U.options,(D=o.colCB=(y=o.colUI=D).cbId?U.columns[D.cbId]:D).cb=K.extend({},{all:!1,header:!1,select:!1,check:!0,uncheck:!1},D.cb)),g=D.dataIndx;y._render=o.cellRender(D,y),o.on("dataAvailable",function(){U.one("dataReady",o[_b(298)].bind(o))}).on("dataReady",o[_b(299)].bind(o)).on("valChange",o[_b(300)](o)).on("cellKeyDown",o[_b(301)].bind(o)).on("refreshHeader",o[_b(302)].bind(o)).on("change",o.onChange(o,U,g,d.check,d.uncheck)),d.select&&o.on("rowSelect",o[_b(303)](o,U)).on("beforeRowSelectDone",o[_b(304)](o,U,g,d.check,d.uncheck)),o.on("beforeCheck",o[_b(305)].bind(o))}).prototype=K.extend({cellRender:function(U,D){var y=this;return function(o){var d,g=o.rowData,p=U.dataIndx,v=U.cb,M=D[_b(306)],T=D.useLabel;if(!(g.pq_gtitle||g[_b(9)]||o.Export))return[T?" <label>":"",_a(0),v.check===g[p]?"checked":""," ",y.isEditable(g,U,o.rowIndx,this.colModel.indexOf(U),p)?"":"disabled"," />",d=null==(d=M?M.call(this,o):d)?U==D?"":o.formatVal||o.cellData:d,T?"</label>":""].join("")}},checkAll:function(U,D){var y=this.that;return this.checkNodes(y=this.colCB.cb.all?y.options.dataModel.data:y.pdata,U=null==U||U,D)},checkNodes:function(U,D,y){var o,d,g,p,v,M,T,I;if(U.length)return o=this.that,d=this.colUI.dataIndx,g=(I=this.colCB).cb,p=(D=null==D||D)?g.check:g.uncheck,v=I.dataIndx,M=(I=U[0]).pq_ri,T=function(){return o[_b(171)]({rowIndx:M,dataIndx:d}),!1},U=U.map(function(P){var N={},V={};return N[v]=P[v],V[v]=p,{rowIndx:P.pq_ri,rowData:P,oldRow:N,newRow:V}}),I={rowIndx:M,rowData:I,dataIndx:d,check:D,rows:U},D={source:"checkbox"},!1===o._trigger("beforeCheck",y,I)?T():(D.updateList=I.rows,D.history=D.track=!g.select&&null,!1===o[_b(182)](D)?T():void(g.maxCheck||1!=D.updateList.length?o.refresh({header:!1}):o.refreshRow({rowIndx:D.updateList[0].rowIndx})))},isEditable:function(U,D,y,o,d){return this.that.isEditable({rowIndx:y,rowData:U,column:D,colIndx:o,dataIndx:d})},onBeforeRowSelect:function(U,D,y,o,d){return function(g,p){var v;"checkbox"!=p.source&&((v=function(M){for(var T,I,P=M.length,N=D.columns[y],V=D.colIndxs[y];P--;)T=(I=M[P]).rowIndx,U.isEditable(I=I.rowData,N,T,V,y)?I[y]=I[_b(2)]?d:o:M.splice(P,1)})(p.addList),v(p.deleteList))}},onChange:function(U,D,y,o,d){return function(g,p){function v(N,V){N.length&&D._trigger("check",g,{rows:N,dataIndx:P,rowIndx:N[0].rowIndx,rowData:N[0].rowData,check:V})}function M(N){N.forEach(function(V){var J=V.newRow,W=V.oldRow;J.hasOwnProperty(y)&&(J[y]===o?T.push(V):W&&W[y]===o&&I.push(V))})}var T=[],I=[],P=U.colUI.dataIndx;U.setValCBox(),M(p.addList),M(p.updateList),U.colCB.cb.select&&D.SelectRow().update({addList:T,deleteList:I,source:"checkbox"}),v(T,!0),v(I,!1)}},onCheckBoxChange:function(U){return function(D,y){if(y.dataIndx==U.colUI.dataIndx)return U.checkNodes([y.rowData],y.input.checked,D)}},onDataReady:function(){this.setValCBox()},off:function(){var U,D=this.fns,y=this.that;for(U in D)y.off(U,D[U]);this.fns={}},on:function(U,D){return this.fns[U]=D,this.that.on(U,D),this},destroy:function(){for(var U in this.off(),this)delete this[U]},oneDataReady:function(){var U,D=this.that.get_p_data(),y=0,o=D.length,d=this.colCB,g=d.cb,p=d.dataIndx;if(null!=p&&D&&g.select)for(;y<o;y++)(U=D[y])&&(U[p]===g.check?U[_b(2)]=!0:U[_b(2)]&&(U[p]=g.check))},onRowSelect:function(U,D){return function(y,o){"checkbox"!=o.source&&(o.addList.length||o.deleteList.length)&&(U.setValCBox(),D.refresh({header:!1}))}}},pq.mixin.ChkGrpTree)}(jQuery),function(K){var U,D=K.paramquery,y={options:{stateColKeys:{width:1,filter:["crules","mode"],hidden:1},stateKeys:{height:1,width:1,freezeRows:1,freezeCols:1,groupModel:["dataIndx","collapsed","grandSummary"],pageModel:["curPage","rPP"],sortModel:["sorter"]},detailModel:{cache:!0,offset:100,expandIcon:_a(97),collapseIcon:_a(98),height:"auto"},dragColumns:{enabled:!0,acceptIcon:_a(99),rejectIcon:_a(100),topIcon:_a(101),bottomIcon:_a(102)},flex:{on:!0,one:!1,all:!0},track:null,mergeModel:{flex:!1},realFocus:!0,sortModel:{on:!0,type:"local",multiKey:"shiftKey",number:!0,single:!0,cancel:!0,sorter:[],useCache:!0,ignoreCase:!1},filterModel:{on:!0,newDI:[],type:"local",mode:"AND",header:!1,timeout:400}},_create:function(){var d=this,g=d.options;null==g.rtl&&(g.rtl="rtl"==d.element.css("direction")),d.listeners={},d[_b(153)]={},d.iHistory=new D.cHistory(d),d.iGroup=new D.cGroup(d),d.iMerge=new D.cMerge(d),d[_b(159)]=new(D[_b(307)])(d),d.iSelection=new pq.Selection(d),d.iUCData=new D.cUCData(d),d[_b(308)]=new(D[_b(309)])(d),d._super(),new D.cFormula(d),d[_b(247)]=new(D[_b(260)])(d),d[_b(292)](),"remote"===g.dataModel.location&&d.refresh(),d.on("dataAvailable",function(){d.one("refreshDone",function(){d._trigger("ready"),setTimeout(function(){d.element&&d._trigger("complete")},0)})}),d.__init(),d[_b(118)]({header:!0})},__init:function(){U=U||K([_a(103),_a(104),"</div>"].join("")).appendTo(document.body)}};function o(d,g,p){for(var v=0,M=d.length;v<M;v++){for(var T,I=d[v],P={},N=0,V=g.length;N<V;N++)P[T=g[N]]=I[T];p.push(P)}}K.widget("paramquery.pqGrid",D._pqGrid,y),K.widget.extend=function(){var d,g,p,v,M,T=Array.prototype.shift,I=K[_b(43)],P=K.isArray,N=K.widget.extend,V=T.apply(arguments),J=("boolean"==typeof V&&(d=V,V=T.apply(arguments)),arguments),W=0,re=J.length;for(null==d&&(d=1<re);W<re;W++)for(v in g=J[W])(M=(p=Object[_b(44)](g,v)).get)&&"reactiveGetter"!=M.name||p.set?Object[_b(45)](V,v,p):void 0!==(M=g[v])&&(p=!(0<W),I(M)?M.byRef?V[v]=M:(V[v]=V[v]||{},N(p,V[v],M)):V[v]=P(M)&&d&&p?M.slice():M);return V},pq.grid=function(d,g){return(d=K(d).pqGrid(g)).data("paramqueryPqGrid")||d.data("paramquery-pqGrid")},D.pqGrid.regional={},D.pqGrid.defaults=(y=D.pqGrid.prototype).options,y.focusT=function(d){var g=this;setTimeout(function(){g.focus(d)})},y.focus=function(ce){var g,v,M,T,I=this,P=I._fe,N=!(ce=ce||P||{}).nofocus,V=I.options.editModel,J=(J=ce[_b(75)])>=(W=I.pdata).length?W.length-1:J,W=(ce=(ce=ce.colIndx)>(W=I.colModel).length?W.length-1:ce,I.iMerge),re=J+I.riOffset;ce=-1==ce?I[_b(175)](!0):ce,null!=J&&null!=ce&&(W[_b(195)](re,ce)&&(J=(W=W[_b(137)](re,ce))[_b(75)],ce=W.colIndx),re=I.iRenderB,W="ontouchstart"in window?"disabled":"",g=(M=re[_b(310)](J,ce))[0],M={left:g,top:T=M[1],height:M[3]-T-2,width:M[2]-g-2},T=re[_b(168)](J,ce)[0],P?(P.$td&&P.$td[_b(72)]("pq-focus"),(v=P.$ele)&&v.parent()[0]!=T&&(P.$ele.remove(),v=null)):P=I._fe={},(v=v||(P.$ele=K("<textarea "+W+_a(105)))).appendTo(T),v.val("").css(M),P[_b(75)]=J,P.colIndx=ce,(P.$td=I.getCell(P)).addClass("pq-focus"),I.one("assignTblDims",function(){v.css({left:0,top:0})}),N&&(I.one("scroll",function(){(P.$td=I.getCell(P)).addClass("pq-focus")}),v.blur(),v[0].focus()),V[_b(229)]&&v.off("input").on("input",function(ie){var ae=I.getEditor(P,"type"),we="select"==ae;I.isEditable(P)&&ae&&!we&&(I.editCell(P),ae=I[_b(66)]().$editor,we=K(ie.target).val(),ae&&ae.val(we))}),v.css({height:2,width:2}))},y.onfocus=function(d){},y[_b(94)]=function(){},y.onblur=function(){},y.callFn=function(d,g){return pq.getFn(d).call(this,g)},y.rowExpand=function(d){this.iHierarchy.rowExpand(d)},y[_b(311)]=function(d){this.iHierarchy[_b(311)](d)},y[_b(312)]=function(d){this.iHierarchy[_b(312)](d)},y._saveState=function(d,g,p){var v,M,T,I;for(v in p)(M=p[v])&&(T=d[v],K.isArray(M)?null!=T&&(I=g[v]=K[_b(43)](g[v])?g[v]:{},M.forEach(function(P){I[P]=T[P]})):g[v]=T)},y.saveState=function(d){d=d||{};var g,p,v,M=this,re=M.element,T=M.options,I=T[_b(313)],P=T.stateKeys,N=M.colModel,V=[],J=0,W=N.length;for(re=re[0].id;J<W;J++)g=(p=N[J]).dataIndx,M._saveState(p,p={dataIndx:g},I),V[J]=p;return v={colModel:V,datestamp:Date.now()},M._saveState(T,v,P),(T=d.extra)&&(v=K.extend(!0,v,T)),!1!==d.stringify&&(v=JSON.stringify(v),!1!==d.save&&"undefined"!=typeof Storage&&localStorage.setItem("pq-grid"+(re||""),v)),v},y.getState=function(){if("undefined"!=typeof Storage)return localStorage.getItem("pq-grid"+(this.element[0].id||""))},y.loadState=function(d){var g=this,p=K.widget.extend,v=(d=d||{}).state||g.getState();if(!v)return!1;for(var M,T,I,P=(v="string"==typeof v?JSON.parse(v):v).colModel,N=[],V=[],J=g.options,W=J[_b(313)],re=1<g.depth,ce=(re?g:J).colModel,ie=0,ae=P.length;ie<ae;ie++)N[I=(M=P[ie]).dataIndx]=M,V[I]=ie;for(re||ce.sort(function(we,Me){return V[we.dataIndx]-V[Me.dataIndx]}),ie=0,ae=ce.length;ie<ae;ie++)(M=N[I=(T=ce[ie]).dataIndx])&&g._saveState(M,T,W);return g.iCols.init(),p(J.sortModel,v.sortModel),p(J.pageModel,v.pageModel),g.Group().option(v.groupModel,!1),g.Tree().option(v.treeModel,!1),re={freezeRows:v.freezeRows,freezeCols:v.freezeCols},isNaN(+J.height)||isNaN(+v.height)||(re.height=v.height),isNaN(+J.width)||isNaN(+v.width)||(re.width=v.width),g.option(re),!1!==d.refresh&&g[_b(118)](),!0},y[_b(292)]=function(){var d,g,p,v,M=this,T=M.options,I=T.toolbar;M._toolbar&&(d=M._toolbar).destroy(),I&&(v=I.cls||"",g=I.style||"",p=I.attr||"",I=I.items,v=K("<div class='"+v+"' style='"+g+"' "+p+" ></div>"),d?d.widget()[_b(314)](v):M.$top.append(v),d=pq.toolbar(v,{items:I,gridInstance:M,bootstrap:T.bootstrap}),T[_b(315)]||v.css("display","none"),M._toolbar=d)},y.filter=function(d){return this[_b(159)].filter(d)},y.Checkbox=function(d){return this.iCheckBox[d]},y[_b(316)]=function(){this[_b(115)].refreshHS()},y[_b(317)]=function(){this.iRenderSum.refreshHS()},y[_b(318)]=function(p){var g=(p=this.normalize(p)).colIndx,v=(p=p.column,this[_b(115)]),M=v.rows-1;this.options[_b(157)].header&&(v[_b(171)](M,g,{},p),v[_b(270)](p,g,M))},y.pageData=function(){return this.pdata},y.getData=function(v){var g=(v=v||{}).dataIndx,M=(v=v.data,!(p=g?g.length:0)),T=this.columns,I=(P=this.options.dataModel)[_b(319)]||P.data||[],P=P.dataUF||[],N=[];if(!p)return P.length?I.concat(P):I;v?o(v,g,N):(o(I,g,N),o(P,g,N));for(var V=[],p=g.reduce(function(we,Me){var Pe=T[Me];return Pe&&we.push({dataIndx:Me,dir:"up",dataType:Pe.dataType,sortType:Pe.sortType}),we},[]),J={},W=0,re=N.length;W<re;W++){var ce=N[W],ie=JSON.stringify(ce);J[ie]||(V.push(ce),J[ie]=1)}return this.iSort[_b(320)](p,V,M)},y[_b(321)]=function(d,g){var p=d[0];return K[_b(43)](p)?(p=Object.keys(p))[0]!=g&&1==p.length&&(d=d.map(function(v){var M,T={};for(M in v)T[g]=M,T.pq_label=v[M];return T})):d=d.map(function(v){var M={};return M[g]=v,M}),d},y[_b(322)]=function(N,P,p){var v,M=this,T=M.options[_b(157)],I=T.newDI.slice();return P=P?[P,N]:[N],N=I.indexOf(N),"AND"==T.mode&&I.length&&"remote"!=T.type&&(0<=N&&I.splice(N,I.length),I.length&&(T=I.map(function(V){var J=M.getColumn({dataIndx:V}).filter;return{dataIndx:V,crules:J.crules||[J],mode:J.mode}}),v=M.filter({data:M.getData(),mode:"AND",rules:T}))),P=P.concat(p||[]),M.getData({data:v,dataIndx:P})},y[_b(323)]=function(d,g,p){var v;return d.filter(null==p?function(M){var T=M[g];return null!=T&&""!==T||(v?void 0:(v=!0,!(M[g]="")))}:function(M){return null!=(M=M[g])&&""!==M})},y.get_p_data=function(){var d,g=(v=this.options).pageModel,p=g.type,v=v.dataModel.data,M=this.pdata,T=[];return p?(g=g.rPP,d=this.riOffset||0,!M.length&&v.length&&(M=v.slice(d,d+g)),T=(p="remote"==p)?new Array(d):v.slice(0,d),p=p?[]:v.slice(d+g),T.concat(M,p)):M.length?M:v},y[_b(147)]=function(d){var g=this,p=!(d=d||{}).data,v=d.source,M=d.sort,T=[],I=(N=g.options)[_b(157)],P=N.dataModel,N=N.sortModel;if(g.iRefresh.addRT(d.data),0!=p&&!(g.pdata=[])!==d.trigger&&g._trigger("dataAvailable",d.evt,{source:v}),T=(I&&I.on&&"local"==I.type&&0!=d.filter?g[_b(159)][_b(324)](d):P).data,"local"==N.type&&!1!==M&&(p?g.sort({refresh:!1}):T=g.iSort[_b(325)](T,!0)),0==p)return T;g[_b(17)](d)},y.reset=function(P){var g=this,p=(P=P||{}).sort,M=!1!==P.refresh,I=P.filter;P=P.group,(p||I||P)&&(p&&(0,K.extend)(g.options.sortModel,!0===p?{sorter:[]}:p),I&&!M&&this[_b(159)][_b(326)](g.colModel),P&&g[_b(327)](!0===P?{dataIndx:[]}:P,!1),M&&(I?(g.filter({oper:"replace",rules:[]}),g[_b(316)]()):p?g.sort():g[_b(17)]()))},y._trigger=D._trigger,y.on=D.on,y.one=D.one,y.off=D.off,y.pager=function(){var d;return this.pageI=this.pageI||((d=this.widget().find(".pq-pager")).length?d.pqPager("instance"):null),this.pageI},y.toolbar=function(){return this._toolbar.element},y.Columns=function(){return this.iCols}}(jQuery),function(K){var U=K.paramquery;U.cColModel=function(D){this.that=D,this.init()},U.cColModel.prototype={add:function(D,I,T,d){var g,p,v=this,M=v.that,P=(T=T||M.options.colModel,{args:arguments}),N=D.length,V=[I=null==I?T.length:I,0].concat(D);!1!==M._trigger("beforeColAdd",null,P)&&("undo"!=d&&"redo"!=d&&M.iHistory.push({callback:function(J){p=(g||{}).colModel,J?v.add(D,I,p,"redo"):v.remove(N,I,p,"undo")}}),T.splice.apply(T,V),M.refreshCM(),g=T[0].parent,M._trigger("colAdd",null,P),M.refresh())},move:function(D,y,o,d,g,p){var v,M=this,T={args:arguments},I=M.that,P=[],N=I.options.colModel,V=(d||{}).colModel||N,J=(g||{}).colModel||N;return!1!==I._trigger("beforeColMove",null,T)&&("undo"!=p&&"redo"!=p&&I.iHistory.push({callback:function(W){W?M.move(D,y,o,d,g,"redo"):M.move(D,v,V==J&&v<y?y+D:y,g,d,"undo")}}),P=V.splice(y,D),J.splice.apply(J,[v=V==J&&y+D<o?o-D:o,0].concat(P)),I.refreshCM(),I._trigger("colMove",null,T),I.refresh()),P},remove:function(D,y,I,d){var g,p,v=this,M={args:arguments},T=v.that,P=(I=I||T.options.colModel)[0].parent;!1!==T._trigger("beforeColRemove",null,M)&&("undo"!=d&&"redo"!=d&&T.iHistory.push({callback:function(N){p=(P||{}).colModel,N?v.remove(D,y,p,"redo"):v.add(g,y,p,"undo")}}),g=I.splice(y,D),T.refreshCM(),T._trigger("colRemove",null,M),T.refresh())},alter:function(D){var y=this.that;D.call(y),y.refreshCM(),y.refresh()},assignRowSpan:function(){for(var D,y,o,d,g=this.that,p=g.colModel.length,v=g[_b(144)],M=g.depth,T=0;T<p;T++)for(y=0;y<M;y++)if(D=v[y][T],!(0<T&&D==v[y][T-1]||0<y&&D==v[y-1][T])){for(o=y+(d=1);o<M;o++)D==v[o][T]&&d++;D.rowSpan=d}return v},autoGenColumns:function(){var g,D=this.that.options,y=(g=D[_b(328)]||{}).dataType,o=g.title,d=g.width,p=pq.valid,v=[];(g=D.dataModel.data)&&g.length&&K.each(g=g[0],function(M,T){var I="string";p.isInt(T)?I=-1<T+"".indexOf(".")?"float":"integer":p.isDate(T)?I="date":p.isFloat(T)&&(I="float"),v.push({dataType:y||I,dataIndx:M,title:o||M,width:d||100})}),D.colModel=v},cacheIndices:function(){for(var D=this.that,y="JSON"==this[_b(46)](),o={},d={},g={},p=D.colModel,v=0,M=p.length,T=0,I=this.vciArr=[],P=this.ciArr=[];v<M;v++){var N=p[v],V=N.dataIndx;null==V&&("pq_detail"==(V="detail"==N.type?"pq_detail":y?"dataIndx_"+v:v)&&(N.dataType="object"),N.dataIndx=V),o[V]=N,d[V]=v,N[_b(64)]&&(g[V]=g),N.hidden||(I[P[T]=v]=T,T++),N.align||!(V=N.dataType)||"integer"!=V&&"float"!=V||(N.align="right")}D.columns=o,D.colIndxs=d,D[_b(64)]=g},collapse:function(M){var y,o,d,g=M[_b(90)],p=g.on||!1,v=M.colModel||[],T=M=v.length,I=0,P=g.last,N=P?M-1:0;if(M){for(;T--;)y=v[T],null===P?(d=y.showifOpen===p)&&I++:d=N!==T&&p,(y.hidden=d)||!(o=y.colModel)||y[_b(90)]||this.each(function(V){V.hidden=d},o);I==M&&this.each(function(V){V.hidden=!1},[v[0]])}},each:function(D,y){var o=this.that;(y||o.options.colModel).forEach(function(d){D.call(o,d),d.colModel&&this.each(D,d.colModel)},this)},extend:function(D,y){for(var o=D.length;o--;)y&&pq.extendT(D[o],y)},find:function(D,y){for(var o,d=this.that,g=y||d.options.colModel,p=0,v=g.length;p<v;p++)if(D.call(d,o=g[p])||o.colModel&&(o=this.find(D,o.colModel)))return o},getHeaderCells:function(){for(var D=this.that,y=D.options.colModel,o=D.colModel.length,d=D.depth,g=[],p=0;p<d;p++){g[p]=[];for(var v,M=0,T=0,I=0;I<o;I++){if(0==p)v=y[M];else{var P=g[p-1][I],N=P.colModel;if(N&&0!=N.length){for(var V=I-P.leftPos,J=0,W=0,re=0;re<N.length;re++)if(V<(J+=0<N[re].childCount?N[re].childCount:1)){W=re;break}v=N[W]}else v=P}P=v.childCount||1,I==T?(v.leftPos=I,g[p][I]=v,T+=P,y[M+1]&&M++):g[p][I]=g[p][I-1]}}return D[_b(144)]=g},getDataType:function(){var D=this.colModel;if(D&&D[0])return"string"==typeof D[0].dataIndx?"JSON":"ARRAY"},getci:function(D){return this.ciArr[D]},getvci:function(D){return this.vciArr[D]},getNextVisibleCI:function(D){for(var y=this.vciArr,o=this.that.colModel.length;D<o;D++)if(null!=y[D])return D},getPrevVisibleCI:function(D){for(var y=this.vciArr;0<=D;D--)if(null!=y[D])return D},getLastVisibleCI:function(){var D=this.ciArr;return D[D.length-1]},getVisibleTotal:function(){return this.ciArr.length},hide:function(D){var y=this.that,o=y.columns;D.diShow=D.diShow||[],D.diHide=D.diHide||[],!1!==y._trigger("beforeHideCols",null,D)&&(D.diShow=D.diShow.filter(function(d){if((d=o[d]).hidden)return delete d.hidden,!0}),D.diHide=D.diHide.filter(function(d){if(!(d=o[d]).hidden)return d.hidden=!0}),y.refresh({colModel:!0}),y._trigger("hideCols",null,D))},init:function(D){var y=this,o=y.that,d=o.options,g=d[_b(328)],p=d.colModel;p||(y[_b(329)](),p=d.colModel),d=y.nestedCols(p),o.depth=d.depth,p=o.colModel=d.colModel,g&&y.extend(p,g),y[_b(330)](),y[_b(331)](),y[_b(332)](),y[_b(333)](),o._trigger("CMInit",null,D)},initTypeColumns:function(){var D,y=this.that,o=y.colModel,d=0,g=o.length,p=y.columns,v=y.iCheckBox=y.iCheckBox||{};for(D in v)v[D].colUI!=p[D]&&(v[D].destroy(),delete v[D]);for(;d<g;d++){var M=o[d],T=M.type;T&&("checkbox"==T||"checkBoxSelection"==T?(D=M.dataIndx,M.type="checkbox",v[D]=v[D]||new(U[_b(297)])(y,M)):"detail"!=T||y.iHierarchy||(M.dataIndx="pq_detail",y.iHierarchy=new U.cHierarchy(y,M)))}},nestedCols:function(D,y,o,d){for(var g=D.length,p=[],v=0,M=y=y||1,T=0,I=0,P=0;v<g;v++){var N=D[v],V=N.colModel;N.parent=d,!0===o&&(N.hidden=o),V&&V.length?(N[_b(90)]&&this.collapse(N),V=this.nestedCols(V,y+1,N.hidden,N),p=p.concat(V.colModel),0<V.colSpan?(V.depth>M&&(M=V.depth),N.colSpan=V.colSpan,T+=V.colSpan):N.colSpan=0,P+=V.o_colspan,N.o_colspan=V.o_colspan,N.childCount=V.childCount,I+=V.childCount):(N.hidden?N.colSpan=0:(N.colSpan=1,T++),P++,N.o_colspan=1,N.childCount=0,I++,p.push(N))}return{depth:M,colModel:p,colSpan:T,width:0,childCount:I,o_colspan:P}},reduce:function(D,y){var o=this.that,d=[];return(y||o.options.colModel).forEach(function(g,p){(g=D.call(o,g,p))&&((p=g.colModel)&&p.length?(p=this.reduce(D,p)).length&&(g.colModel=p,d.push(g)):d.push(g))},this),d},reverse:function(D){var y,o=this,d=o.that;(D||d.options.colModel).reverse().forEach(function(g){(y=g.colModel)&&o.reverse(y)}),D||d.refreshCM()}}}(jQuery),function(K){K.extend(K.paramquery.pqGrid.prototype,{parent:function(){return this._parent},child:function(D){return((this.normalize(D).rowData||{}).pq_detail||{}).child}}),(K.paramquery.cHierarchy=function U(D,y){var o=this,d=D.options;o.that=D,o.type="detail",o[_b(334)]=!0,o[_b(335)]="auto"==(d=d[_b(336)].height)?1:d,D.on("cellClick",o.toggle.bind(o)).on("cellKeyDown",function(g,p){if(g.keyCode==K.ui.keyCode.ENTER)return o.toggle(g,p)}).on("beforeViewEmpty",o[_b(337)].bind(o)).on("autoRowHeight",o[_b(338)].bind(o)).one("render",function(){D.iRenderB.removeView=o.removeView(o,D),D.iRenderB.renderView=o.renderView(o,D)}).one("destroy",o.onDestroy.bind(o)).on("columnResize",o[_b(339)].bind(o)),y._render=o.renderCell.bind(o)}).prototype={detachCells:function(D){D.children().detach(),D.remove()},onColumnResize:function(){var D=this,y=D.getPadding();D.that.iRenderB.eachV(function(o,d){K("#"+D.getId(d)).css(y)})},getCls:function(){return"pq-detail-cont-"+this.that.uuid},getId:function(D){return"pq-detail-"+D+"-"+this.that.uuid},getRip:function(D){return+D.id.split("-")[2]},onAutoRowHeight:function(){var D=this,y=this.that.iRenderB;y.$ele.find("."+D.getCls()).each(function(o,d){var g=D.getRip(d);g=y[_b(340)](g),K(d).css("top",g)})},onBeforeViewEmpty:function(D,d){var p=d[_b(75)],o=this.that.iRenderB,g=(d=d.region,0<=p?"#"+this.getId(p):"."+this.getCls());p=(0<=p?o.$ele:o["$c"+d]).find(g),this[_b(341)](p)},onDestroy:function(){(this.that.getData()||[]).forEach(function(D){D.child&&D.child.remove()})},onResize:function(D,y){var o,d=[];pq.onResize(y[0],function(){d.push(y[0]),clearTimeout(o),o=setTimeout(function(){var g=D.that.pdata,p=[];d.forEach(function(v){var M,T,I;document.body.contains(v)&&(M=D.getRip(v),v=v[_b(41)],(I=(T=g[M]).pq_detail.height||D[_b(335)])!=v&&(T.pq_detail.height=v,p.push([M,v-I])))}),d=[],p.length&&(D.that._trigger("onResizeHierarchy"),D[_b(342)](p))},150)})},removeView:function(D,y){var o=y.iRenderB.removeView;return function(d,g,p){for(var v,M,T=o.apply(this,arguments),I=D.getCls(),P=this[_b(343)](d,p),N=d;N<=g;N++)(v=this.getRow(N,P))&&1==v.children.length&&1==(M=K(v).children("."+I)).length&&(D[_b(341)](M),v.parentNode[_b(121)](v));return T}},getPadding:function(){var o,y={};return y["padding"+((o=this.that).options.rtl?"Right":"Left")]=o=o.dims.wdContLeft+5,y},renderView:function(D,y){var o=y.iRenderB.renderView;return function(d,g,p,v){var M,T=o.apply(this,arguments),I=y.iRenderB,P=D.getCls()+" pq-detail",N=y.options,V=D.getPadding(),J=N.freezeRows,W=N[_b(336)],re=W.init,ce=this.data;if(D[_b(334)]){for(D[_b(334)]=!1,M=d;M<=g;M++)if((Me=ce[M])&&!Me.pq_hidden){var we=(ie=Me.pq_detail=Me.pq_detail||{}).child;if(ae=ie.show){we||"function"==typeof re&&(we=re.call(y,{rowData:Me}),ie.child=we);var ae=we.parent(),Me=I[_b(340)](M),ie=_a(106)+Me+_a(107);if(ae.length){if(!document.body.contains(ae[0]))throw _a(108);ae.css({top:Me})}else ae=K(_a(109)+D.getId(M)+"' class='"+P+"' style='"+ie+"'></div>").append(we),K(I.getRow(M,M<J?"tr":"right")).append(ae),"auto"==W.height&&D.onResize(D,ae);ae.css(V);for(var Pe,Ve,le=ae.find(".pq-grid"),st=0,We=le.length;st<We;st++)(Ve=(Pe=K(le[st])).pqGrid("instance"))._parent=y,Pe.hasClass("pq-pending-refresh")&&Pe.is(":visible")&&(Pe[_b(72)]("pq-pending-refresh"),Ve.refresh())}}return D[_b(334)]=!0,T}}},renderCell:function(d){var y=this.that.options[_b(336)],o=d.cellData;return(d=d.rowData)[_b(9)]||d.pq_gtitle?"":"<div class='ui-icon "+(o&&o.show?y.expandIcon:y[_b(344)])+"'></div>"},rowExpand:function(o){var y=this.that,p=(o=y.normalize(o),y.options),d=o.rowData,g=o[_b(75)],v=(p=p[_b(336)],"pq_detail");d&&!1!==y._trigger("beforeRowExpand",null,o)&&((y=d[v]=d[v]||{}).show=!0,p.cache||this[_b(311)](o),this[_b(342)]([[g,y.height||this[_b(335)]]],o))},rowInvalidate:function(y){var d,o="pq_detail";(d=(d=(y=this.that.getRowData(y))[o])?d.child:null)&&(d.remove(),y[o].child=null)},rowCollapse:function(o){var y=this.that,g=y.options,p=(o=y.normalize(o)).rowData,d=o[_b(75)];g=g[_b(336)],(p=p?p.pq_detail:null)&&p.show&&!(o.close=!0)!==y._trigger("beforeRowExpand",null,o)&&(g.cache||this[_b(311)](o),p.show=!1,this[_b(342)]([[d,-(p.height||this[_b(335)])]],o))},softRefresh:function(D,y){var o=this.that,d=o.iRenderB;d[_b(345)](D),d.setPanes(),d[_b(346)](!0),y&&o.refreshRow(y),d.refresh()},toggle:function(D,p){var o=this.that,d=p.column,g=p.rowData,v=(p=p.rowIndx,this.type);g.pq_gtitle||g[_b(9)]||d&&d.type===v&&o[(g.pq_detail=g.pq_detail||{}).show?"rowCollapse":"rowExpand"]({rowIndx:p})}}}(jQuery),function(K){(K.paramquery.cCells=function U(D){var y=this;y.that=D,y.class="pq-grid-overlay",y.rtl=D.options.rtl?"right":"left",y.ranges=[],D.on("assignTblDims",y.onRefresh(y,D))}).prototype={addBlock:function(D,y){var o,d,g,p,v,M,T,I,P,N,V,J,W,re,ce,ie,ae,we,Me;D&&this.addUnique(this.ranges,D)&&(o=this.that,g=(d=p=this.serialize(T=D.r1,v=D.c1,P=D.r2,D=D.c2))+" pq-number-overlay",p+=" pq-head-overlay",V=o.iRenderB,I=function(Pe,Ve){return V[_b(168)](Pe,Ve)},(re=this.shiftRC(T,v,P,D))&&(P=re[2],D=re[3],Me=I(T=re[0],v=re[1]),M=I(P,D),J=(re=V.getCellXY(T,v))[0],W=re[1],ce=(re=V[_b(310)](P,D))[2],ae=(ie=re[3])-W,we=ce-J,Me==M?this.addLayer(J,W,ae,we,d,Me,(we?"":_a(110))+(ae?"":_a(111))):(T=I(T,D),I=I(P,v),P=Me[0][_b(40)],N=Me[0][_b(41)],I==Me?(this.addLayer(J,W,ae,P-J,d,Me,"border-right:0;"),this.addLayer(0,W,ae,ce,d,M,"border-left:0;")):Me==T?(this.addLayer(J,W,N-W,we,d,Me,"border-bottom:0;"),this.addLayer(J,0,ie,we,d,M,"border-top:0;")):(this.addLayer(J,W,N-W,P-J,d,Me,_a(112)),this.addLayer(0,W,N-W,ce,d,T,_a(113)),this.addLayer(J,0,ie,P-J,d,I,_a(114)),this.addLayer(0,0,ie,ce,d,M,_a(115)))),this.addLayer(0,W,ae,we=o.options.numberCell.outerWidth||0,g,V.$clt,""),this.addLayer(0,W,ae,we,g,V.$cleft,""),0!=o.options.showHeader&&(J=(re=(V=o[_b(115)]).getCellXY(0,v))[0],W=re[1],ce=(re=V[_b(310)](o[_b(144)].length-1,D))[2],ae=(ie=re[3])-W,this.addLayer(J,W,ae,we=ce-J,p,Me=V.$cright,""),this.addLayer(J,W,ae,we,p,Me=V.$cleft,""))))},addLayer:function(D,y,o,d,g,p,v){K("<svg class='"+this.class+" "+g+"' style='"+(D=this.rtl+":"+D+"px;top:"+y+"px;height:"+o+"px;width:"+d+"px;"+(v||""))+"'></svg>").appendTo(p)},addUnique:function(D,y){if(!D.filter(function(o){return y.r1==o.r1&&y.c1==o.c1&&y.r2==o.r2&&y.c2==o.c2})[0])return D.push(y),!0},getLastVisibleFrozenCI:function(){for(var D=this.that,y=D.colModel,o=D.options.freezeCols-1;0<=o;o--)if(!y[o].hidden)return o},getLastVisibleFrozenRIP:function(){for(var D=this.that,y=D.get_p_data(),o=D.riOffset,d=D.options.freezeRows+o-1;o<=d;d--)if(!y[d].pq_hidden)return d-o},getSelection:function(){var D=this.that,y=D.get_p_data(),o=D.colModel,d=[];return this.ranges.forEach(function(g){for(var p,v,T=g.r2,I=g.c1,P=g.c2,N=g.r1;N<=T;N++)for(p=y[N],v=I;v<=P;v++)d.push({dataIndx:o[v].dataIndx,colIndx:v,rowIndx:N,rowData:p})}),d},isSelected:function(y){var o=(y=this.that.normalize(y)).rowIndx,d=y.colIndx;return null==d||null==o?null:!!this.ranges.find(function(T){var p=T.r1,v=T.r2,M=T.c1;if(T=T.c2,p<=o&&o<=v&&M<=d&&d<=T)return!0})},onRefresh:function(D,y){var o;return function(){clearTimeout(o),o=setTimeout(function(){y.element&&(D.removeAll(),y.Selection().address().forEach(function(d){D.addBlock(d)}))},50)}},removeAll:function(){var D=this.that,y=D.$cont;y&&(y.children().children().children("svg").remove(),D.$head_i.children().children("svg").remove()),this.ranges=[]},removeBlock:function(D){var y,o,d,g,p;D&&(y=D.r1,o=D.c1,d=D.r2,g=D.c2,D=this.that,0<=(p=this.ranges.findIndex(function(v){return y==v.r1&&o==v.c1&&d==v.r2&&g==v.c2}))&&(this.ranges.splice(p,1),p="."+this.class+"."+this.serialize(y,o,d,g),D.$cont.find(p).remove(),D.$head_i.find(p).remove()))},serialize:function(D,y,o,d){return"r1"+D+"c1"+y+"r2"+o+"c2"+d},shiftRC:function(D,y,o,d){var g=this.that,p=g.pdata.length,M=g.riOffset;if(o-=M,!(p<=(D=(D-=M)<g.options.freezeRows?Math.max(D,Math.min(0,o)):D)||o<0))return D=D+M-M,o=(o=Math.min(o,p-1))+M-M,[D=Math.max(D,0),y,o=Math.min(o,p-1),d=Math.min(d,g.colModel.length-1)]}}}(jQuery),function(K){K.paramquery.pqGrid.prototype.Range=function(o,d){return new pq.Range(this,o,"range",d)};var U=pq.Range=function(o,d,g,p){if(null==o)throw"invalid param";if(this.that=o,this._areas=[],this instanceof U==0)return new U(o,d,g,p);this._type=g||"range",this.init(d,p)};function D(o){o.shiftKey&&"pqGrid:mousePQUp"!=o.type||(this._trigger("selectEnd",null,{selection:this.Selection()}),this.off("mousePQUp",D),this.off("keyUp",D))}U.prototype=K.extend({add:function(o){this.init(o)},address:function(){return this._areas},addressLast:function(){var o=this.address();return o[o.length-1]},history:function(o){function d(ce){function ie(ae,we,Me,Pe){for(var Ve in ae){var le,st=ae[Ve][Pe],We=K.extend(!0,{},We=(ce?we:Me)[Ve]);for(le in st)st[le]=We[le];for(le in We)st[le]=We[le]}}ie(T,p,g,W),ie(V,N,P,o),ie(I,M,v,re),J.refresh()}var g={},p={},v={},M={},T={},I={},P={},N={},V={},J=this.that,W="pq_cell"+o,re="pq_row"+o;return{add:function(ce,ie,ae){function we(Me,Pe,Ve,le,st){Ve[Pe=Me[Pe]]||(le[Pe]=Me,Ve[Pe]=K.extend(!0,{},Me[st]))}ae?we(ce,"pq_ri",g,T,W):ie?we(ie,"dataIndx",P,V,o):we(ce,"pq_ri",v,I,re)},push:function(){function ce(ae){return Object.keys(ae).length}function ie(ae,we,Me){for(var Pe in ae)we[Pe]=K.extend(!0,{},ae[Pe][Me])}(ce(T)||ce(V)||ce(I))&&(ie(T,p,W),ie(V,N,o),ie(I,M,re),J.iHistory.push({callback:d}))}}},refreshStop:function(){this._stop=!0},refresh:function(){this.that.refresh(),this._stop=!1},setAPS:function(o,d,g){function p(re,ce,ie){null==ie&&!re[N]||(T=(T=re[N]=re[N]||{})[ce]=T[ce]||{})[o]==ie||(W.add(re,null,!0),T[o]=ie)}var v,M,T,I=this,P=I.that,N="pq_cell"+g,V="pq_row"+g,J="attr"==g,W=I.history(g);I.each(function(re,ce,ie,ae,we,Me){v="row"==ae,!(M="column"==ae)&&!v||J?p(re,ce,d):((T=M?(I.addProp(ie),ie[g]=ie[g]||{}):re[V]=re[V]||{})[o]!=d&&(M?W.add(null,ie):W.add(re),T[o]=d),P.Range(M?{c1:Me,c2:Me}:{r1:we,r2:we},!1).each(function(Pe,Ve){var le;M&&null!=(Pe[V]||{})[o]&&(le=d),p(Pe,Ve,le)},!0))},J),W.push(),I._stop||I.refresh()},addProp:function(o){o.prop=o.prop||{get align(){return o.align},set align(d){o.align=d},get format(){return o.format},set format(d){o.format=d},get valign(){return o.valign},set valign(d){o.valign=d},get edit(){return o.editable},set edit(d){o.editable=d}}},setAttr:function(o,d){this.setAPS(o,d,"attr")},setStyle:function(o,d){this.setAPS(o,d,"style")},setProp:function(o,d){this.setAPS(o,d,"prop")},clear:function(){return this.copy({copy:!1,cut:!0,source:"clear"})},clearOther:function(o){for(var d=this._normal(o,!0),g=this.address(),p=g.length-1;0<=p;p--){var v=g[p];v.r1==d.r1&&v.c1==d.c1&&v.r2==d.r2&&v.c2==d.c2||g.splice(p,1)}},clone:function(){return this.that.Range(this._areas)},_cellAttr:function(o,d){return(o=o[_b(213)]=o[_b(213)]||{})[d]=o[d]||{}},comment:function(o){return this.attr("title",o)},pic:function(o,d,g){var p=this.that.Pic(),v=0,M=0;this.each(function(T,I,P,N,V,J){return v=V,M=J,!1}),pq.fileToBase(o,function(T){p.add(p.name(o.name),T,[M,d||0,v,g||0])})},_copyArea:function(o,d,g,p,v,M,T,I,P,N,V,J,W,re){for(var ce,ie,ae,we,Me,Pe,Ve=this.that,le=Ve.readCell,st=this[_b(347)],We=Ve.iMerge,at=[],Te=[],qe=[],Bt=Ve.riOffset,Ze=Ve.iRenderB,Zn=g;Zn<=p;Zn++)Pe=(Me=v[Zn]).dataType,at[Zn]=!Pe||"string"==Pe||"html"==Pe,!1===(Te[Zn]=Me.copy)?re.push(Zn):J&&qe.push(this.getTitle(Me,Zn));for(J&&M.push(qe.slice()),ae=o;ae<=d;ae++){var jt=I[ae],_n={},Dt={},It={rowIndx:ae,rowIndxPage:ae-Bt,rowData:jt,Export:!0,exportClip:!0};if(!1===jt.pq_copy)W.push(ae);else{for(qe=[],Zn=g;Zn<=p;Zn++)we=(Me=v[Zn]).dataIndx,!1!==Te[Zn]&&(ce=jt[we],N&&((ie=le(jt,Me,We,ae,Zn))===ce&&(It.colIndx=Zn,It.column=Me,It.dataIndx=we,ie=st(It,V,Ze)[0],at[Zn]&&/(\r|\n)/.test(ie)&&(ie=this.newLine(ie))),qe.push(ie)),P&&void 0!==ce&&(_n[we]=void 0,Dt[we]=ce));P&&T.push({rowIndx:ae,rowData:jt,oldRow:Dt,newRow:_n}),M.push(qe.slice())}}},copy:function(o){var d,g,v,M,T=this.that,I=(o=o||{}).dest,P=!!o.cut,N=null==o.copy||o.copy,V=o.source||(P?"cut":"copy"),le=o.history,st=o[_b(68)],J=[],W=[],re=[],ce=[],ie=T.get_p_data(),ae=T.colModel,We=o.render,at=o.header,we=T.options.copyModel,Me=(navigator||{}).clipboard,Pe=this.address(),Ve={areas:Pe,cut:P,dest:I,header:at};le=null==le||le,st=null==st||st,We=null==We?we.render:We,at=null==at?we.header:at,Pe.length&&!1!==T._trigger("beforeCopy",null,Ve)&&(Pe.forEach(function(Te){this._copyArea(d=Te.r1,"cell"===(v=Te.type)?d:Te.r2,g=Te.c1,v="cell"===v?g:Te.c2,ae,W,J,ie,P,N,We,at,re,ce)},this),N&&(we=o.clip,M=W.map(function(Te){return Te.join("\t")||" "}).join("\n"),we?(we.val(M),we.select()):(Me&&Me.writeText(M),T[_b(348)](M)),Ve.data=W,Ve.skippedRIs=re,Ve.skippedCIs=ce,T._trigger("copy",null,Ve)),I?T.paste({text:M,dest:I,rowList:J,history:le,allowInvalid:st}):P&&!1!==T[_b(182)]({updateList:J,source:V,history:le,allowInvalid:st})&&T.refresh({source:V,header:!1}))},_countArea:function(M){var d=M.type,g=M.r1,p=M.c1,v=M.r2;return M=M.c2,"cell"===d?1:"row"===d?0:(v-g+1)*(M-p+1)},count:function(){for(var o="range"===this._type,d=this.address(),g=0,p=d.length,v=0;v<p;v++)g+=o?this._countArea(d[v]):1;return g},cut:function(o){return(o=o||{}).cut=!0,this.copy(o)},_eachRC:function(o,d,g,p){this.address().forEach(function(v){for(var M=v[g],T=v[p];M<=T;M++)o(this[M],M)},this.that[d])},eachCol:function(o){this._eachRC(o,"colModel","c1","c2")},eachRow:function(o){this._eachRC(o,"pdata","r1","r2")},_hsCols:function(o){var d=[],g={};this.eachCol(function(p){d.push(p.dataIndx)}),g[o]=d,this.that.Columns().hide(g)},hideCols:function(){this._hsCols("diHide")},showCols:function(){this._hsCols("diShow")},hideRows:function(){this.eachRow(function(o){o.pq_hidden=!0})},showRows:function(){this.eachRow(function(o){o.pq_hidden=!1})},each:function(o,d){for(var g=this.that,p=g.colModel,v=this.address(),M=0,T=g.pdata;M<v.length;M++)for(var I,P,N,V=v[M],J=V.r1,W=V.r2,re=V.c2,ce=V.type,ie="column"==ce,ae="row"==ce;J<=W;J++){if(I=T[J])for(P=(P=V.c1)<0?0:P;P<=re;P++){if((N=p[P])&&!1===o(I,N.dataIndx,N,ce,J,P))return;if(ae&&!d)break}if(ie&&!d)break}},enable:function(o){return null==(o=this.prop("edit",o))||o},getAPS:function(o,d){var g,p,v,M,T=this;return T.each(function(I,P,N){return T.addProp(N),M=(I["pq_row"+d]||{})[o],g=(N[d]||{})[o],p=null==(v=((I["pq_cell"+d]||{})[P]||{})[o])?null==M?g:M:v,!1}),p},getAttr:function(o){return this.getAPS(o,"attr")},getProp:function(o){return this.getAPS(o,"prop")},getStyle:function(o){return this.getAPS(o,"style")},getIndx:function(o){return null==o?this._areas.length-1:o},getValue:function(){var o,g,p,v,M,T,I,P,N=this.address(),V=[],J=this.that;if(N.length){for(g=(N=N[0]).r1,p=N.c1,v=N.r2,M=N.c2,P=J.get_p_data(),T=g;T<=v;T++)for(o=P[T],I=p;I<=M;I++)V.push(o[J.colModel[I].dataIndx]);return V}},indexOf:function(o){for(var d,g=(o=this._normal(o)).r1,p=o.c1,v=o.r2,M=o.c2,T=this.address(),I=0,P=T.length;I<P;I++)if(g>=(d=T[I]).r1&&v<=d.r2&&p>=d.c1&&M<=d.c2)return I;return-1},index:function(o){for(var d,g=(o=this._normal(o)).type,p=o.r1,v=o.c1,M=o.r2,T=o.c2,I=this.address(),P=0,N=I.length;P<N;P++)if(g===(d=I[P]).type&&p===d.r1&&M===d.r2&&v===d.c1&&T===d.c2)return P;return-1},init:function(o,d){var g,p;if(d=!1!==d,o)if("function"==typeof o.push)for(var v=0,M=o.length;v<M;v++)this.init(o[v],d);else"string"==typeof o?this.init(pq.getAddress(o),d):(g=this._normal(o,d),p=this._areas=this._areas||[],g&&p.push(g))},isValid:function(){return!!this._areas.length},format:function(o){return this.prop("format",o)},merge:function(o){o=o||{};var d,g,p=this.that,v=p.options.mergeCells,M=this._areas[0];M&&(g=M.c2-M.c1+1,(1<(d=M.r2-M.r1+1)||1<g)&&(M.rc=d,M.cc=g,v.push(M),!1!==o.refresh&&p[_b(17)]()))},newLine:function(o){return'"'+o.replace(/"/g,'""')+'"'},replace:function(g,v){g=this._normal(g);var p=this._areas;v=this.getIndx(v),p.splice(v,1,g)},remove:function(g){var d=this._areas;0<=(g=this.indexOf(g))&&d.splice(g,1)},resize:function(o,d){var g=this._normal(o),p=this._areas[this.getIndx(d)];return["r1","c1","r2","c2","rc","cc","type"].forEach(function(v){p[v]=g[v]}),this},rows:function(o){var d=this.that,g=[],p=this[_b(349)]();if(p)for(var v=p.r1,M=p.c1,I=p.c2,P=p.type,N=null==o?p.r2:v+o,V=null==o?v:v+o;V<=N;V++)g.push({r1:V,c1:M,r2:V,c2:I,type:P});return pq.Range(d,g,"row")},_normal:function(o,d){if(o.type)return o;if("function"==typeof o.push){for(var g=[],p=0,v=o.length;p<v;p++){var M=this._normal(o[p],d);M&&g.push(M)}return g}var T,I,P=this.that,N=P.get_p_data().length-1,V=P.colModel.length-1,J=N<(J=o.r1)?N:J,W=V<(W=o.c1)?V:W,re=o.rc,ce=o.cc,ie=o.r2,ae=o.c2;return V<0||N<0?null:null!=J||null!=W?(ie<J&&(T=J,J=ie,ie=T),ae<W&&(T=W,W=ae,ae=T),null==J?(J=0,ie=N,ae=null==ae?W:ae,I="column"):null==W?(W=0,ie=null==ie?J:ie,ae=V,I=o._type||"row"):null==ie&&null==re||J==ie&&W==ae?(I="cell",ie=J,ae=W):I="block",ie=N<(ie=re?J+re-1:ie)?N:ie,ae=V<(ae=ce?W+ce-1:ae)?V:ae,!d||"block"!=I&&"cell"!=I||(J=(g=P.iMerge[_b(350)](J,W,ie,ae))[0],W=g[1],ie=g[2],ae=g[3]),re=ie-J+1,ce=ae-W+1,o.r1=J,o.c1=W,o.r2=ie,o.c2=ae,o.rc=re,o.cc=ce,o.type=o.type||I,o):void 0},select:function(){var o=this.that.iSelection,d=this._areas;return d.length&&(o.removeAll({trigger:!1}),d.forEach(function(g){o.add(g,!1)}),o.trigger()),this},style:function(o,d){return this._prop(o,d,"Style")},_prop:function(o,d,g){return this[(null!=d?"set":"get")+g](o,d)},attr:function(o,d){return this._prop(o,d,"Attr")},prop:function(o,d){return this._prop(o,d,"Prop")},toggleStyle:function(o,d){var g=this.getStyle(o);this.style(o,g=g&&g!=d[1]?d[1]:d[0])},unmerge:function(o){o=o||{};var d=this.that,g=d.options.mergeCells,p=this._areas[0];if(p){for(var v=0;v<g.length;v++){var M=g[v];if(M.r1===p.r1&&M.c1===p.c1){g.splice(v,1);break}}!1!==o.refresh&&d[_b(17)]()}},align:function(o){return this.prop("align",o)},valign:function(o){return this.prop("valign",o)},value:function(o){var d=0,g=this.that,p=g.colModel,v=[],M=this.address();if(void 0===o)return this.getValue();for(var T=0;T<M.length;T++)for(var I,P=(I=M[T]).r1,N=I.c1,V=I.r2,J=I.c2,W=P;W<=V;W++){for(var re=(ce=g.normalize({rowIndx:W})).rowData,ce=ce.rowIndx,ie={},ae={},we=N;we<=J;we++){var Me=p[we].dataIndx;ae[Me]=o[d++],ie[Me]=re[Me]}v.push({rowData:re,rowIndx:ce,newRow:ae,oldRow:ie})}return v.length&&(g[_b(182)]({updateList:v,source:"range"}),g.refresh({header:!1})),this},val2D:function(){var o,d=[],g=this.that,p={};for(o in this._areas.forEach(function(v){for(var M,T=v.c1,I=v.c2,P=v.r1;P<=v.r2;P++)M=g.Range({r1:P,rc:1,c1:T,c2:I}).value(),p[P]=p[P]?p[P].concat(M):M}),p)d.push(p[o]);return d}},pq.mixin.render);var y=pq.Selection=function(o,d){if(null==o)throw"invalid param";if(this instanceof y==0)return new y(o,d);this._areas=[],this.that=o,this.iCells=new K.paramquery.cCells(o),this._base(o,d)};pq.extend(U,y,{add:function(g,d){g=this._normal(g,!0);var p=this.iCells;0<=this.indexOf(g)||(p.addBlock(g),this._super(g),!1!==d&&this.trigger())},clearOther:function(o,d){var g=this.iCells,p=this._normal(o,!0);this.address().forEach(function(v){v.r1==p.r1&&v.c1==p.c1&&v.r2==p.r2&&v.c2==p.c2||g[_b(351)](v)}),this._super(p),d||this.trigger()},getSelection:function(){return this.iCells[_b(206)]()},isSelected:function(o){return this.iCells.isSelected(o)},removeAll:function(o){o=o||{},this._areas.length&&(this.iCells.removeAll(),!(this._areas=[])!==o.trigger&&this.trigger())},resizeOrReplace:function(o,d){this.resize(o,d)||this.replace(o,d)},replace:function(p,v){var g=this.iCells,M=(p=this._normal(p),(M=this._areas)[v=this.getIndx(v)]);g[_b(351)](M),g.addBlock(p),this._super(p,v),this.trigger()},resize:function(M,T){var g=(M=this._normal(M,!0)).r1,p=M.c1,v=M.r2;if(M=M.c2,!(N=this._areas||[]).length)return!1;T=(N=N[this.getIndx(T)]).r1;var I=N.c1,P=N.r2,N=N.c2;return T===g&&I===p&&T===g&&N===M&&P===v&&I===p&&P===v&&N===M||void 0},selectAll:function(v){var M=(v=v||{}).type,d=this.that,p=d.colModel,g=(v=v.all)?0:d.riOffset;return v=(v?d.get_p_data():d.pdata).length,p=p.length-1,v=g+v-1,d.Range(M="row"===M?{r1:g,r2:v}:{c1:0,c2:p,_type:"column",r1:0,r2:v}).select(),this},trigger:function(){var o=this.that;o._trigger("selectChange",null,{selection:this}),o.off("mousePQUp",D),o.off("keyUp",D),o.on("mousePQUp",D),o.on("keyUp",D)}})}(jQuery),function(K){var U=K.paramquery;K.widget("paramquery.pqToolbar",{options:{items:[],gridInstance:null,events:{button:"click",select:"change",checkbox:"change",textbox:"change",textarea:"change",file:"change"}},_create:function(){var D,y=this.options,o=y[_b(352)],d=y.events,g=y.bootstrap,p=g.on,v=o.colModel,M=o.options[_b(157)].timeout,T=y.items,I=this.element,P=0,N=T.length;for(I.addClass("pq-toolbar");P<N;P++){var V,J,W,re,ce=T[P],ie=ce.type,ae=ce.value,we=ce.icon,Me=ce.options||{},Pe=ce.label,Ve=ce.init,le=((V=ce.listener)?[V]:ce.listeners)||[function(){}],st=(st=ce.cls)||"",We=(st=(st=p&&"button"==ie?g.btn+" "+st:st)?"class='"+st+"'":"",(We=ce.style)?"style='"+We+"'":""),at=ce.attr||"",Te=Pe?"<label "+We+">"+Pe:"",qe=Pe?"</label>":"",Bt=(Bt=Pe&&"button"!=ie&&"file"!=ie?[st,at]:[st,at,We]).join(" ");ce.options=Me,"textbox"==ie?re=K([Te,"<input type='text' "+Bt+">",qe].join("")):"textarea"==ie?re=K([Te,"<textarea "+Bt+"></textarea>",qe].join("")):"select"==ie?("function"==typeof Me&&(Me=Me.call(o,{colModel:v})),J=U.select({options:Me=Me||[],attr:Bt,prepend:ce.prepend,groupIndx:ce.groupIndx,valueIndx:ce.valueIndx,labelIndx:ce.labelIndx}),re=K([Te,J,qe].join(""))):"file"==ie?re=K([_a(116)+(st=we&&Pe?"ui-button-text-icon-primary":we?"ui-button-icon-only":"ui-button-text-only")+"' "+at+" "+We+">",_a(117)+(ce.attrFile||"")+">",we?_a(118)+we+"'></span>":"",_a(119)+(Pe||"")+"</span>","</label>"].join("")):"checkbox"==ie?re=K([Pe?"<label "+We+">":"",_a(0),ae?"checked='checked' ":"",Bt,">",Pe?Pe+"</label>":""].join("")):"separator"==ie?re=K(_a(120)+[at,We].join(" ")+"></span>"):"button"==ie?(re=K(_a(121)+Bt+">"+(p&&we?_a(122)+we+"'></span>":"")+Pe+"</button>"),K.extend(Me,{label:Pe||!1,icon:we,icons:{primary:p?"":we}}),re.button(Me)):"string"==typeof ie?re=K(ie):"function"==typeof ie&&(J=ie.call(o,{colModel:v,cls:st}),re=K(J)),re.appendTo(I),Ve&&Ve.call(o,re[0]),W=this.getInner(re,Pe,ie),"checkbox"!==ie&&void 0!==ae&&W.val(ae);for(var Ze=0,Zn=le.length;Ze<Zn;Ze++){var jt={};for(D in"function"==typeof(V=le[Ze])?jt[d[ie]]=V:jt=V,jt)pq.fakeEvent(W,D,M),W.on(D,this._onEvent(o,jt[D],ce))}}}}),K.extend(U.pqToolbar.prototype,{getInner:function(D,y,o){var d=D[0];return"LABEL"==d.nodeName[_b(37)]()?K(d.children[0]):D},refresh:function(){this.element.empty(),this._create()},_onEvent:function(D,y,o){return function(d){var g=o.type;o.value="checkbox"==g?K(d.target).prop("checked"):K(d.target).val(),y.call(D,d),"file"==g&&K(this).val("")}},_destroy:function(){this.element.empty()[_b(72)]("pq-toolbar")[_b(84)]()},_disable:function(){null==this.$disable&&(this.$disable=K(_a(51)).css("opacity",.2).appendTo(this.element))},_enable:function(){this.$disable&&(this.element[0][_b(121)](this.$disable[0]),this.$disable=null)},_setOption:function(D,y){"disabled"==D&&(1==y?this._disable():this._enable())}}),pq.toolbar=function(D,y){return(D=K(D).pqToolbar(y)).data("paramqueryPqToolbar")||D.data("paramquery-pqToolbar")}}(jQuery),function(K){var U=K.paramquery,D=U.pqGrid.prototype;D.options.trackModel={on:!1,dirtyClass:"pq-cell-dirty"},U.cUCData=function(y){this.that=y,this.udata=[],this.ddata=[],this.adata=[],this.options=y.options,y.on("dataAvailable",this.onDA(this))},U.cUCData.prototype={add:function(y){for(var o=this.that,d=this.adata,g=this.ddata,p=y.rowData,v=this.options.trackModel.dirtyClass,M=o.getRecId({rowData:p}),T=0,I=d.length;T<I;T++){var P=d[T];if(null!=M&&P.recId==M)throw _a(123);if(P.rowData==p)throw _a(124)}for(T=0,I=g.length;T<I;T++)if(p==g[T].rowData)return void g.splice(T,1);var N,V=[];for(N in p)V.push(N);o[_b(72)]({rowData:p,dataIndx:V,cls:v}),d.push(y={recId:M,rowData:p})},commit:function(y){var o,d,g,p,v=this.that;null==y?(this[_b(353)](),this[_b(354)](),this[_b(355)]()):(p=y.history,o=[],d=(d=v.options).dataModel.recIndx,g=y.type,y=y.rows,p=null!=p&&p,"add"==g?y?o=this.commitAdd(y,d):this[_b(353)]():"update"==g?y?this[_b(356)](y,d):this[_b(354)]():"delete"==g&&(y?this[_b(357)](y,d):this[_b(355)]()),o.length&&(v[_b(182)]({source:"commit",checkEditable:!1,track:!1,history:p,updateList:o}),v[_b(17)]({header:!1})))},commitAdd:function(y,o){for(var d,g,p,v,M=this.that,T=M.colModel,I=T.length,P=this.adata,N=K.inArray,V=M.options.treeModel,J=null!=V.dataIndx,W=V.parentId,re=P.length,ce=M[_b(65)],ie=[],ae=y.length,we=[],Me=0;Me<ae;Me++)for(p=y[Me],Te=0;Te<re;Te++)if(v=!0,-1==N(g=P[Te].rowData,we)){for(d=0;d<I;d++){var Pe=T[d],Ve=Pe.dataType,le=Pe.dataIndx;if(!(Pe.hidden||le==o||J&&le==W)&&ce(g[le],Ve)!==ce(p[le],Ve)){v=!1;break}}if(v){let Bt=function(Ze){st[Ze]=p[Ze],We[Ze]=g[Ze]};var st={},We={};Bt(o),J&&Bt(W),ie.push({rowData:g,oldRow:We,newRow:st}),we.push(g);break}}for(var at=[],Te=0;Te<re;Te++)-1==N(g=P[Te].rowData,we)&&at.push(P[Te]);return this.adata=at,ie},commitDelete:function(y,o){for(var d,g,p,v,M=this.ddata,T=M.length,I=this.udata;T--&&(g=(d=M[T].rowData)[o],p=y.length);)for(;p--;)if(g==y[p][o]){for(y.splice(p,1),M.splice(T,1),v=I.length;v--;)I[v].rowData==d&&I.splice(v,1);break}},commitUpdate:function(y,o){for(var d,g=this.that,p=this.options.trackModel.dirtyClass,v=this.udata,M=v.length,T=y.length,I=[],P=0;P<M;P++){var N=v[P],V=N.rowData,J=N.oldRow;if(-1==K.inArray(V,I))for(d=0;d<T;d++)if(V[o]==y[d][o])for(var re in I.push(V),J)g[_b(72)]({rowData:V,dataIndx:re,cls:p})}var ce=[];for(P=0;P<M;P++)-1==K.inArray(V=v[P].rowData,I)&&ce.push(v[P]);this.udata=ce},commitAddAll:function(){this.adata=[]},commitDeleteAll:function(){for(var y,o=this.ddata,d=this.udata,g=d.length,p=o.length,v=0;0<g&&v<p;v++){for(y=o[v].rowData;g--;)d[g].rowData==y&&d.splice(g,1);g=d.length}o.length=0},commitUpdateAll:function(){for(var y=this.that,o=this.options.trackModel.dirtyClass,d=this.udata,g=0,p=d.length;g<p;g++){var v,M=d[g],T=M.oldRow,I=M.rowData;for(v in T)y[_b(72)]({rowData:I,dataIndx:v,cls:o})}this.udata=[]},delete:function(y){for(var o=this.that,d=y.rowIndx,v=y[_b(75)],g=o.riOffset,p=(d=null==d?v+g:d,v=null==v?d-g:v,g="remote"==o.options.pageModel.type?v:d,this.adata),M=(v=this.ddata,o.getRowData(y)),T=0,I=p.length;T<I;T++)if(p[T].rowData==M)return void p.splice(T,1);v.push({indx:g,rowData:M,rowIndx:d})},getChangesValue:function(y){for(var o=this.that,d=(y=y||{}).all,g=this.udata,p=this.adata,v=this.ddata,M=[],T=[],I=[],P=[],N=[],V=[],J=0,W=v.length;J<W;J++){var re=(we=v[J]).rowData,ce={};for(ae in N.push(re),re)0!=ae.indexOf("pq_")&&(ce[ae]=re[ae]);V.push(ce)}for(J=0,W=g.length;J<W;J++){var ie=(we=g[J]).oldRow;if(-1==K.inArray(re=we.rowData,N)&&-1==K.inArray(re,M)){if(ce={},!1!==d)for(var ae in re)0!=ae.indexOf("pq_")&&(ce[ae]=re[ae]);else{for(var ae in ie)ce[ae]=re[ae];ce[o.options.dataModel.recIndx]=we.recId}M.push(re),T.push(ce),I.push(ie)}}for(J=0,W=p.length;J<W;J++){var we;for(ae in ce={},re=(we=p[J]).rowData)0!=ae.indexOf("pq_")&&(ce[ae]=re[ae]);P.push(ce)}return{updateList:T,addList:P,deleteList:V,oldList:I}},getChanges:function(){for(var y=this.udata,o=this.adata,d=this.ddata,g=K.inArray,p=[],v=[],M=[],T=[],I=0,P=d.length;I<P;I++){var N=(J=d[I]).rowData;T.push(N)}for(I=0,P=y.length;I<P;I++){var V=(J=y[I]).oldRow;-1==g(N=J.rowData,T)&&-1==g(N,p)&&(p.push(N),v.push(V))}for(I=0,P=o.length;I<P;I++){var J;N=(J=o[I]).rowData,M.push(N)}return{updateList:p,addList:M,deleteList:T,oldList:v}},getChangesRaw:function(){var o=this.adata,d=this.ddata,g={updateList:[],addList:[],deleteList:[]};return g.updateList=this.udata,g.addList=o,g.deleteList=d,g},isDirty:function(y){var d=this.udata,g=this.adata,p=this.ddata,v=!1,M=this.that.getRowData(y);if(M){for(var T=0;T<d.length;T++)if(M==d[T].rowData){v=!0;break}}else(d.length||g.length||p.length)&&(v=!0);return v},onDA:function(y){return function(o,d){"filter"!=d.source&&(y.udata=[],y.ddata=[],y.adata=[])}},rollbackAdd:function(y,o){for(var d=this.adata,g=[],p=0,v=d.length;p<v;p++)g.push({type:"delete",rowData:d[p].rowData});return this.adata=[],g},rollbackDelete:function(y,o){for(var d=this.ddata,g=[],p=d.length-1;0<=p;p--){var M;g.push({type:"add",rowIndx:(M=d[p]).rowIndx,newRow:M=M.rowData})}return this.ddata=[],g},rollbackUpdate:function(y,o){for(var d=this.that,g=this.options.trackModel.dirtyClass,p=this.udata,v=[],M=0,T=p.length;M<T;M++){var I=(V=p[M]).recId,P=V.rowData,N={},V=V.oldRow;if(null!=I){var J,W=[];for(J in V)N[J]=P[J],W.push(J);d[_b(72)]({rowData:P,dataIndx:W,cls:g,refresh:!1}),v.push({type:"update",rowData:P,newRow:V,oldRow:N})}}return this.udata=[],v},rollback:function(p){var o=this.that,d=o.options.pageModel,g=!p||null==p.refresh||p.refresh,v=[],M=[],T=[],I=(I=o.options.dataModel).data;null!=(p=p&&null!=p.type?p.type:null)&&"update"!=p||(M=this[_b(358)](d,I)),null!=p&&"delete"!=p||(v=this[_b(359)](d,I)),null!=p&&"add"!=p||(T=this[_b(360)](d,I)),o[_b(182)]({history:!1,allowInvalid:!0,checkEditable:!1,source:"rollback",track:!1,addList:v,updateList:M,deleteList:T}),g&&o[_b(17)]({header:!1})},update:function(y){var o=this.that,d=this.options.trackModel.dirtyClass,g=y.rowData||o.getRowData(y),p=o.getRecId({rowData:g}),v=y.dataIndx,M=y.refresh,T=o.columns,I=o[_b(65)],P=y.row,N=this.udata,V=N.slice(0),J=!1;if(null!=p&&0!=(p+"").indexOf("pq_tmp_")){for(var W=0,re=N.length;W<re;W++){var ce=N[W],ie=ce.oldRow;if(ce.rowData==g){for(var v in J=!0,P){var ae=I(P[v],we=T[v].dataType),we=I(ie[v],we);ie.hasOwnProperty(v)&&we===ae?(o[_b(72)](Me={rowData:g,dataIndx:v,refresh:M,cls:d}),delete ie[v]):(o.addClass(Me={rowData:g,dataIndx:v,refresh:M,cls:d}),ie.hasOwnProperty(v)||(ie[v]=g[v]))}K[_b(215)](ie)&&V.splice(W,1);break}}if(!J){for(v in ie={},P){ie[v]=g[v];var Me={rowData:g,dataIndx:v,refresh:M,cls:d};o.addClass(Me)}V.push(Me={rowData:g,recId:p,oldRow:ie})}this.udata=V}}},D.getChanges=function(y){if(this.blurEditor({force:!0}),y){var o=y.format;if(o){if("byVal"==o)return this.iUCData[_b(361)](y);if("raw"==o)return this.iUCData[_b(362)]()}}return this.iUCData.getChanges()},D.rollback=function(y){this.blurEditor({force:!0}),this.iUCData.rollback(y)},D.isDirty=function(y){return this.iUCData.isDirty(y)},D.commit=function(y){this.iUCData.commit(y)},D.updateRow=function(y){var o=this,d=y.rowList||[{rowIndx:y.rowIndx,newRow:y.newRow||y.row,rowData:y.rowData,rowIndxPage:y[_b(75)]}],g=[];if(o[_b(216)](d).forEach(function(p){var v,M=p.newRow,T=p.rowData,I=p.oldRow={};if(T){for(v in M)I[v]=T[v];g.push(p)}}),g.length){if(d={source:y.source||"update",history:y.history,checkEditable:y[_b(70)],track:y.track,allowInvalid:y[_b(68)],updateList:g},!1===(y=o[_b(182)](d)))return!1;K.isArray(y)&&y.forEach(function(p){o[_b(171)]({rowIndx:p[0],colIndx:p[1],skip:!0})})}},D.getRecId=function(y){var o;return null==(y.dataIndx=(o=this.options.dataModel).recIndx,o=this[_b(363)](y))?null:o},D[_b(363)]=function(d){var o=d.rowData||this.getRowData(d);return d=d.dataIndx,o?o[d]:null},D.getRowData=function(y){if(!y)return null;var o,d=y.rowData;if(null!=d)return d;if(null==(o=y.recId))return d=null!=(d=y.rowIndx)?d:y[_b(75)]+this.riOffset,this.get_p_data()[d];for(var g,p=(y=this.options.dataModel).recIndx,v=y.data,M=0,T=v.length;M<T;M++)if((g=v[M])[p]==o)return g;return null},D.addNodes=function(y,o){o=null==o?this.options.dataModel.data.length:o,this[_b(182)]({addList:y.map(function(d){return{rowIndx:o++,newRow:d}}),source:"addNodes"}),this[_b(17)]()},D[_b(364)]=function(y){this[_b(182)]({deleteList:y.map(function(o){return{rowData:o}}),source:"deleteNodes"}),this[_b(17)]()},D.moveNodes=function(y,o){var d=this.options,g=this.riOffset,p=d.dataModel.data;o=null==o?p.length:o,this._trigger("beforeMoveNode"),y.forEach(function(v){o=pq.moveItem(v,p,p.indexOf(v),o)}),p!=this.pdata&&(this.pdata=p.slice(g,d.pageModel.rPP+g)),this.iRefresh.addRowIndx(),this.iMerge.init(),this._trigger("moveNode",null,{args:arguments}),this.refresh()},D.deleteRow=function(y){var o=this[_b(216)](y.rowList||[{rowIndx:y.rowIndx,rowIndxPage:y[_b(75)],rowData:y.rowData}]);if(!o.length)return!1;this[_b(182)]({source:y.source||"delete",history:y.history,track:y.track,deleteList:o}),!1!==y.refresh&&this[_b(17)]({header:!1})},D.addRow=function(y){var o=this.riOffset,d=(d=this.options.dataModel).data=d.data||[];return y.rowData&&(y.newRow=y.rowData),null!=y[_b(75)]&&(y.rowIndx=y[_b(75)]+o),!(!(o=y.rowList||[{rowIndx:y.rowIndx,newRow:y.newRow}]).length||!1===this[_b(182)]({source:y.source||"add",history:y.history,track:y.track,checkEditable:y[_b(70)],addList:o}))&&(!1!==y.refresh&&this[_b(17)]({header:!1}),null==(y=o[0].rowIndx)?d.length-1:y)}}(jQuery),window[_b(365)]=window[_b(365)]||window[_b(366)]||window[_b(367)]||function(K){return setTimeout(K,10)},window[_b(368)]=window[_b(368)]||window[_b(369)]||window[_b(370)]||function(K){clearTimeout(K)},function(K){var U=K.paramquery;(U[_b(309)]=function D(y){(this.that=y).on("cellClick",this[_b(371)].bind(this)).on("cellMouseDown",this[_b(372)].bind(this)).on("cellMouseEnter",this[_b(373)].bind(this))}).prototype=K.extend({onCellMouseDown:function(y,o){if(!y[_b(33)]()){var d=this.that,g=o.rowIndx,p=d.iSelection,v=o.colIndx,M=d.options[_b(104)],T=M.type,I=M.mode,P=p[_b(349)]();if(!K(y[_b(32)].target).is(_a(125))){if("cell"==T){if(null==v)return;if(-1==v){if(!M.row)return;v=void 0}y.shiftKey&&"single"!==I&&P?(this.mousedown={r1:T=P.firstR,c1:M=P.firstC},p[_b(234)]({r1:T,c1:null==v?void 0:M,r2:g,c2:v,firstR:T,firstC:M})):pq.isCtrl(y)&&"single"!==I?(this.mousedown={r1:g,c1:v},p.add(null==v?{r1:g,firstR:g,firstC:d[_b(175)]()}:{r1:g,c1:v,firstR:g,firstC:v})):(this.mousedown={r1:g,c1:v},p.clearOther({r1:g,c1:v},!0),null==v?p[_b(234)]({r1:g,firstR:g,firstC:d[_b(175)]()}):p[_b(234)]({r1:g,c1:v,firstR:g,firstC:v}))}o.nofocus=!0,d[-1==o.colIndx?"focusT":"focus"](o),d.one("mousePQUp",this[_b(374)].bind(this))}}},onCellMouseEnter:function(y,o){var d,g,p=this.that,v=(T=p.options[_b(104)]).type,M=this.mousedown,T=T.mode;M&&"single"!==T&&("cell"===v&&(T=M.r1,v=M.c1,M=o.rowIndx,d=o.colIndx,g=p.Selection(),p.scrollCell({rowIndx:M,colIndx:d}),g[_b(234)]({r1:T,c1:v,r2:M,c2:d,firstR:T,firstC:v})),o.nofocus=!0,p.focusT(o))},onCellClick:function(y,o){var d=(v=this.that).options[_b(104)],g="single"==d.mode,p=d.toggle,v=v.iRows;"row"!=d.type||!d.row&&-1==o.colIndx||(d=v.isSelected(o),g&&!d||p||!pq.isCtrl(y)?!g&&y.shiftKey?v.extend(o):!g||d&&p?(o.isFirst=!0,v[p?"toggle":"replace"](o)):d||v.replace(o):(o.isFirst=!0,v.toggle(o)))},onMousePQUp:function(){var y=this.that;window[_b(206)]().toString().length||y.focus(),this.mousedown=null}},new U.cClass)}(jQuery),function(K){var U=null,D=!1,y="pq-grid-excel",o=K.paramquery,d=o.pqGrid.prototype,g=(K.extend(d.options,{copyModel:{on:!0,render:!1,zIndex:1e4},cutModel:{on:!0},pasteModel:{on:!0,compare:"byVal",select:!0,validate:!0,allowInvalid:!0,type:"replace"}}),K.extend(d,{_setGlobalStr:function(v){g.clip=v},canPaste:function(){return!!o.cExcel.clip},clearPaste:function(){o.cExcel.clip=""},copy:function(v){return this.iSelection.copy(v)},cut:function(v){return this.iSelection.cut(v)},paste:function(v){function M(){U.paste(v),U=null}v=v||{};var T=(navigator||{}).clipboard;U=new g(this),null==v.text&&T&&T.readText?T.readText().then(function(I){v.text=I,M()}).catch(function(I){M()}):M()},clear:function(){var v=this.iSelection;(v.address().length?v:this.iRows.toRange()).clear()}}),o.cExcel=function(v){this.that=v}),p=(g.clip="",g.prototype={createClipBoard:function(){var v=this.that,M=(K("#pq-grid-excel-div"),v.options.copyModel),T=K("#"+y);0==T.length&&(M=K(_a(126)+M.zIndex+";'/>").appendTo(document.body),(T=K("<textarea id='"+y+_a(127)).appendTo(M)).css({opacity:0}).on("keyup",function(I){pq.isCtrl(I)&&v.element&&v._trigger("keyUp",I)})),T.on("focusin",function(I){I[_b(30)]()}),T.select()},destroyClipBoard:function(){this[_b(375)]();var T=this.that,v=K(window).scrollTop(),M=K(window).scrollLeft(),I=(T.focus(),T=K(window).scrollTop(),K(window).scrollLeft());v==T&&M==I||window.scrollTo(M,v)},clearClipBoard:function(){K("#"+y).val("")},copy:function(v){var M=this.that,T=M.iSelection;if(T.address().length)return T.copy(v);M.iRows.toRange().copy(v)},getRows:function(v){return(v=(v=v.replace(/\n$/,"")).replace(/(^|\t|\n)"(?=[^\t]*?[\r\n])([^"]|"")*"(?=$|\t|\n)/g,function(M){return M.replace(/(?!^(\r\n|\n))(\r\n|\n)/g,"\r").replace(/^(\t|\n)?"/,"$1").replace(/"$/,"").replace(/""/g,'"')})).split("\n")},paste:function(I){var M=this.that,T=(I=I||{}).dest,W=I.clip,P=(I=I.text||(W?W.length?W.val():"":g.clip),this.getRows(I)),N=P.length,V=M.colModel,J=M.readCell,re="row",ce=!1,ie=V.length;if((W=(W=M.options).pasteModel).on&&0!=I.length&&0!=N){for(var ae=0;ae<N;ae++)P[ae]=P[ae].split("\t");var we,Me,Pe,Ve,le,st,We=W.type;if(T=((I=(T?M.Range(T):M.Selection()).address()).length?I:M.iRows.toRange().address())[0],!1===M._trigger("beforePaste",null,I={rows:P,areas:[T]}))return!1;Ve=T&&M.getRowData({rowIndx:T.r1})?(re="row"==T.type?"row":"cell",we=T.r1,Pe=T.r2,Me=T.c1,T.c2):(re="cell",Me=Pe=we=0),"replace"==We?st=Pe-(le=we)+1<N?"extend":"repeat":"append"==We?(le=Pe+1,st="extend"):"prepend"==We&&(le=we,st="extend");var at,Te,qe="extend"==st?N:Pe-we+1,Bt=0,Ze=0,Zn=[],jt=[],_n=0;for(ae=0;ae<qe;ae++){var Dt=P[Bt],It=ae+le,Yn="replace"==We?M.getRowData({rowIndx:It}):null,ei=Yn?{}:null,Xt={};if(void 0===Dt&&"repeat"===st&&(Dt=P[Bt=0]),Yn&&!1===Yn.pq_paste)qe++,Ze++;else{Bt++;var pr=Dt,Li=pr.length;if(!Te)if("cell"==re){if(Te="extend"==(at=Ve-Me+1<Li?"extend":"repeat")?Li:Ve-Me+1,isNaN(Te))throw _a(128);ie<Te+Me&&(Te=ie-Me)}else Te=ie,Me=0;var Mn=0,ti=0,Sn=0,zi=Te;for(ti=0;ti<zi;ti++){Li<=Mn&&(Mn=0);var Fs=V[ti+Me],cr=pr[Mn],Le=Fs.dataIndx;!1===Fs.paste?(Sn++,"extend"==at&&zi+Me<ie&&zi++):(Mn++,Xt[Le]=cr,ei&&(ei[Le]=J(Yn,Fs)))}0==K[_b(215)](Xt)&&(null==Yn?(ce=!0,Zn.push({newRow:Xt,rowIndx:It})):jt.push({newRow:Xt,rowIndx:It,rowData:Yn,oldRow:ei}),_n++)}}T={addList:Zn,updateList:jt,source:"paste",allowInvalid:W[_b(68)],validate:W.validate},M[_b(182)](T),M[ce?"refreshView":"refresh"]({header:!1}),W.select&&M.Range({r1:le,c1:Me,r2:le+_n-1+Ze,c2:"extend"==at?Me+Te-1+Sn:Ve}).select(),M._trigger("paste",null,I)}}},K(document).unbind(".pqExcel").bind("keydown.pqExcel",function(v){if(pq.isCtrl(v)){var M=K(v.target);if(M.hasClass("pq-box-focus")||M.is("#"+y)||M.hasClass("pq-body-outer")){var T=M.closest(".pq-grid");if(U||M.length&&T.length){if(!U){try{if((I=T.pqGrid("instance")).options[_b(104)].native)return!0}catch(P){return!0}(U=new g(I,M))[_b(376)]()}"67"==v.keyCode||"99"==v.keyCode?U.copy({clip:K("#"+y)}):"88"==v.keyCode?U.copy({cut:!0,clip:K("#"+y)}):"86"==v.keyCode||"118"==v.keyCode?(D=!0,U[_b(375)](),window.setTimeout(function(){U&&(U.paste({clip:K("#"+y)}),U[_b(377)](),U=null),D=!1},3)):(T=K("#"+y)).length&&document[_b(39)]==T[0]&&U.that.onKeyDown(v)}}}else{var I=v.keyCode;if(I==(T=K.ui.keyCode).UP||I==T.DOWN||I==T.LEFT||I==T.RIGHT||I==T.PAGE_UP||I==T.PAGE_DOWN){if(p)return!1;((M=K(v.target)).hasClass("pq-grid-row")||M.hasClass("pq-grid-cell"))&&(p=!0)}}}).bind("keyup.pqExcel",function(v){var M=v.keyCode;D||!U||pq.isCtrl(v)||-1==K.inArray(M,[17,91,93,224])||(U[_b(377)](),U=null),!p||(M=K(v.target)).hasClass("pq-grid-row")||M.hasClass("pq-grid-cell")||(p=!1)}),!1)}(jQuery),function(K){var U=K.paramquery,D=U.pqGrid.prototype.options;D[_b(183)]=D[_b(183)]||{on:!0,checkEditable:!0,checkEditableAdd:!1,allowInvalid:!0},(U.cHistory=function(y){var o=this;o.that=y,o.options=y.options,o.records=[],o.counter=0,o.id=0,y.on("keyDown",o.onKeyDown.bind(o)).on("dataAvailable",function(d,g){"filter"!=g.source&&o.reset()})}).prototype={onKeyDown:function(y,o){var p=pq.isCtrl(y);return p&&"90"==y.keyCode?(this.undo(),!1):p&&"89"==y.keyCode?(this.redo(),!1):void 0},resetUndo:function(){if(0==this.counter)return!1;this.counter=0,this.that._trigger("history",null,{type:"resetUndo",num_undo:0,num_redo:this.records.length-this.counter,canUndo:!1,canRedo:!0})},reset:function(){if(0==this.counter&&0==this.records.length)return!1;this.records=[],this.counter=0,this.id=0,this.that._trigger("history",null,{num_undo:0,num_redo:0,type:"reset",canUndo:!1,canRedo:!1})},increment:function(){var y=this.records,o=y.length;this.id=o?(y=y[o-1].id)+1:0},push:function(y){var o,d,g=this.canRedo(),p=this.records,v=(p.length>(v=this.counter)&&p.splice(v,p.length-v),p[v]=K.extend({id:this.id},y),this.counter++,this.that);1==this.counter&&(o=!0),g&&this.counter==p.length&&(d=!1),v._trigger("history",null,{type:"add",canUndo:o,canRedo:d,num_undo:this.counter,num_redo:0})},canUndo:function(){return 0<this.counter},canRedo:function(){return this.counter<this.records.length},undo:function(){var y=this.canRedo(),o=this.that,d=this.options[_b(183)],M=this.records;if(!(0<this.counter))return!1;this.counter--;var g,p,v,T=(M=M[this.counter]).callback;return T?T():(T=M.updateList.map(function(I){return{rowIndx:o.getRowIndx({rowData:I.rowData}).rowIndx,rowData:I.rowData,oldRow:I.newRow,newRow:I.oldRow}}),v=M.addList.map(function(I){return{rowData:I.newRow}}),M=M.deleteList.map(function(I){return{newRow:I.rowData,rowIndx:I.rowIndx}}),o[_b(182)]({history:!1,source:"undo",checkEditable:d[_b(70)],checkEditableAdd:d[_b(185)],allowInvalid:d[_b(68)],addList:M,updateList:T,deleteList:v}),o[M.length||v.length?"refreshView":"refresh"]({source:"undo",header:!1})),0==this.counter&&(p=!1),o._trigger("history",null,{canUndo:p,canRedo:g=!1===y||g,type:"undo",num_undo:this.counter,num_redo:this.records.length-this.counter}),!0},redo:function(){var y=this.canUndo(),o=this.that,d=this.options[_b(183)],g=this.records;if((T=this.counter)==g.length)return!1;var p,v,M,T,I=(T=g[T]).callback;return I?I(!0):(I=T.updateList.map(function(P){return{rowIndx:o.getRowIndx({rowData:P.rowData}).rowIndx,rowData:P.rowData,newRow:P.newRow,oldRow:P.oldRow}}),p=T.deleteList.map(function(P){return{rowData:P.rowData}}),T=T.addList.map(function(P){return{newRow:P.newRow,rowIndx:P.rowIndx}}),o[_b(182)]({history:!1,source:"redo",checkEditable:d[_b(70)],checkEditableAdd:d[_b(185)],allowInvalid:d[_b(68)],addList:T,updateList:I,deleteList:p}),o[T.length||p.length?"refreshView":"refresh"]({source:"redo",header:!1})),this.counter<g.length&&this.counter++,this.counter==this.records.length&&(M=!1),o._trigger("history",null,{canUndo:v=0==y||v,canRedo:M,type:"redo",num_undo:this.counter,num_redo:this.records.length-this.counter}),!0}},(D=U.pqGrid.prototype).history=function(y){return this.iHistory[y.method](y)},D.History=function(){return this.iHistory}}(jQuery),function(K){function U(o){(this.that=o).on("load",this.onLoad.bind(this)).on("filter clearFilter",this[_b(378)].bind(this))}var D=K.paramquery,y=(pq.filter={dpBeforeShow:function(o,d,g){return function(){var p,v,M=o[_b(322)](d);M.length&&(p=(""==M[0][d]?M[1]:M[0])[d],v=M[M.length-1][d]),K(this).datepicker("option","defaultDate",new Date(1==g?v:p))}},datepicker:function(M){var d=M.column,g=d.dataIndx,p=this,v=M.filterUI,I=(M=M.$editor,{dateFormat:v.format||d.format,changeYear:!0,changeMonth:!0});if("date"==d.dataType)return M.each(function(P,N){var V=K.extend({},I,1==P&&v.dpOptions2||v.dpOptions);V[_b(379)]||(V.beforeShow=V.beforeShow||pq.filter[_b(380)](p,g,P)),K(N).datepicker(V)}),!0},filterFnEq:function(o,d){var g=(o.column||{}).dataType;return"date"==g?this.filterFnTD(o,d):"bool"==g?{type:"checkbox"}:K.extend({maxCheck:1},this[_b(381)](o,d))},filterFnSelect:function(p,d){var g=p.column.dataIndx;return p=p.indx,{type:"select",style:"padding-"+(d&&d.options.rtl?"left":"right")+_a(129),attr:"readonly",valueIndx:g,labelIndx:g,options:this.options,init:0==p?this.rangeInit.bind(d):function(){}}},filterFnT:function(){return{type:"textbox",attr:"autocomplete='off'"}},filterFnTD:function(){return{type:"textbox",attr:"autocomplete='off'",init:pq.filter.datepicker}},getVal:function(o){return[(o=(o.crules||[])[0]||{}).value,o.value2,o.condition]},setVal:function(o,d){return(o=o.crules=o.crules||[])[0]=o[0]||{},o[0].value=d}},K.extend(pq.filter,{conditions:{begin:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT},between:{stringList:1,date:1,number:1,filter:{attr:"autocomplete='off'",type:"textbox2",init:pq.filter.datepicker}},contain:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT},equal:{string:1,bool:1,date:1,number:1,filterFn:pq.filter.filterFnEq},empty:{string:1,bool:1,date:1,number:1,nr:1},end:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT},great:{stringList:1,number:1,date:1,filterFn:pq.filter.filterFnTD},gte:{stringList:1,number:1,date:1,filterFn:pq.filter.filterFnTD},less:{stringList:1,number:1,date:1,filterFn:pq.filter.filterFnTD},lte:{stringList:1,number:1,date:1,filterFn:pq.filter.filterFnTD},notbegin:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT},notcontain:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT},notequal:{string:1,date:1,number:1,bool:1,filterFn:pq.filter.filterFnEq},notempty:{string:1,bool:1,date:1,number:1,nr:1},notend:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT},range:{cascade:1,string:1,number:1,date:1,bool:1,filterFn:pq.filter[_b(381)]},regexp:{string:1,numberList:1,dateList:1,filterFn:pq.filter.filterFnT}},getConditionsCol:function(o,p){var M,g=p[_b(382)]||((M=(M=this)[_b(383)](pq[_b(46)](o))).sort(),M),v=(p=p[_b(384)],{});return p&&(p.forEach(function(M){v[M]=1}),g=g.filter(function(M){return!v[M]})),g},getConditionsDT:function(o){var d,g,p,v=[],M=this.conditions;for(d in M)p=(g=M[d])[o+"List"],(g[o]&&0!==p||p)&&v.push(d);return v},getFilterUI:function(o,d){var p,g=(p=o.column).filterFn,v=(M=this.conditions[o.condition]||{}).filterFn,M=M.filter||{},T=(delete(p=(0===o.indx?p.filter:{})||{}).type,g=g&&g.call(d,o)||{},v=v&&v.call(this,o,d)||{},K.extend({},M,v,p,g));return T.condition=o.condition,T.init=[],T.options=[],[g,p,v,M].forEach(function(I){I.init&&T.init.push(I.init),I.options&&T.options.push(I.options)}),T},options:function(d){var p=d.column,g=(d=d.filterUI).groupIndx;return p=p.dataIndx,this[_b(322)](p,g,d.diExtra)},getOptions:function(o,d,g){for(var p,v=d.options,M=o.dataIndx,T={column:o,dataIndx:M,filterUI:d,condition:d.condition},I=0,P=v.length;I<P;I++)if((p=v[I])&&(p="function"==typeof p?p.call(g,T):p))return p=g[_b(321)](p,M),g[_b(323)](p,d.dataIndx||M,d.groupIndx);return[]},rangeInit:function(o){var d=this,g=o.column,p=o.$editor,M=o.filterUI;o.headMenu||p.parent().off("click keydown").on("click keydown",function(T){var I,P;"keydown"==T.type&&T.keyCode!=K.ui.keyCode.DOWN||K("#"+(T=d.uuid+"_"+g.dataIndx)).length||(I=new(pq[_b(385)].select)(d,g),P=(T=K("<div id='"+T+_a(130)).appendTo(d.$header)).children(),pq.makePopup(T[0],p),T.position({my:"left top",at:"left bottom",of:o.$editor}),I.create(P,M))})},getType:function(o,d){var g=this.conditions[o]||{},p=g.filterFn;return(g.filter||{}).type||(p?p.call(this,{condition:o,column:d}):{}).type}}),(D[_b(307)]=U).conditions={equal:function(o,d){return o==d},notequal:function(){return!y.equal.apply(this,arguments)},contain:function(o,d){return-1!=(o+"").indexOf(d)},notcontain:function(){return!y.contain.apply(this,arguments)},empty:function(o){return 0==o.length},notempty:function(){return!y.empty.apply(this,arguments)},begin:function(o,d){return 0==(o+"").indexOf(d)},notbegin:function(){return!y.begin.apply(this,arguments)},end:function(o,d){var g=(o+="")[_b(386)](d+="");if(-1!=g&&g+d.length==o.length)return!0},notend:function(){return!y.end.apply(this,arguments)},regexp:function(o,d){if(d.test(o))return!(d.lastIndex=0)},great:function(o,d){return d<o},gte:function(o,d){return d<=o},between:function(o,d,g){return d<=o&&o<=g},range:function(o,d){return-1!=K.inArray(o,d)},less:function(o,d){return o<d},lte:function(o,d){return o<=d}});U.convert=function(o,d){return null==o||""===o?"":("string"==d?o=(o+"").trim()[_b(37)]():"date"==d?o=Date.parse(o):"number"==d?+o==o&&(o=+o):"bool"==d&&(o=String(o)[_b(54)]()),o)},U.convertEx=function(o,v,g,p){v=pq[_b(46)]({dataType:v});var M=pq.filter.conditions[g];return M[v]?this.convert(o,v):M.string?(p&&(o=pq.format(p,o)),"regexp"==g?o:this.convert(o,"string")):M.number?this.convert(o,"number"):void 0},U.prototype={addMissingConditions:function(o){var d=this.that;o.forEach(function(g){var p=d.getColumn({dataIndx:g.dataIndx}).filter||{};g.condition=void 0===g.condition?pq.filter.getVal(p)[2]:g.condition})},clearFilters:function(o){o.forEach(function(g){var p=pq.filter.conditions;(g=g.filter)&&(g.crules||[]).forEach(function(v){(p[v.condition]||{}).nr&&(v.condition=void 0),v.value=v.value2=void 0})})},compatibilityCheck:function(o){var d=o.data,g=_a(131);if(d)if(d=d[0]){if(d.hasOwnProperty("dataIndx")&&d.hasOwnProperty("value"))throw g}else if(!o.rules)throw g},copyRuleToColumn:function(o,p,g){p=p.filter=p.filter||{};var v=o.crules||[],M=v[0],T=(M||o).condition,I=(M||o).value,P=(M||o).value2;"remove"==g?(p.on=!1,p.crules=T?[{condition:T,value:"range"==T?[]:void 0}]:void 0):(p.on=!0,p.mode=o.mode,p.crules=M?v:[{condition:T,value:I,value2:P}])},filter:function(o){this[_b(387)](o=o||{});var d,g,p=this.that,V=p.options,v=!1,M=o.data,T=o.rules=o.rules||(o.rule?[o.rule]:[]),I=!M,P=V.dataModel.location,N=(V=V[_b(157)]).type,J=(V=o.mode||V.mode,o.oper),W="replace"==J,re=I?p.colModel:this[_b(388)](T),ce=0,ie=T.length;if("remove"!=J&&this[_b(389)](T),I){if(!1===p._trigger("beforeFilter",null,o))return;for(null!=o.header&&(v=o.header),W&&this[_b(326)](re);ce<ie;ce++)g=p.getColumn({dataIndx:(d=T[ce]).dataIndx}),this[_b(390)](d,g,J)}else for(;ce<ie;ce++)d=T[ce],g=re[ce],this[_b(390)](d,g);if(I={header:v,CM:re,data:M,rules:T,mode:V},"local"==P||"local"==N)return I.source="filter",I.trigger=!1,p[_b(147)](I);p[_b(118)](I)},hideRows:function(o,d,g){for(var p,v=0,M=d.length;v<M;v++)(p=d[v]).pq_hidden=p.pq_filter=!this.isMatchRow(p,o,g)},filterLocalData:function(o){var d=this.that,g=!(V=(o=o||{}).data),J=g?d.colModel:o.CM,p=this[_b(391)]({CM:J,apply:g}),v=(J=d.options).dataModel,M=d.iSort,T=V||v.data,I=v.dataUF=v.dataUF||[],P=[],N=[],V=J[_b(157)],W=(J={filters:p,mode:void 0,data:T},o.mode||V.mode);if(V.hideRows)!(J.hideRows=!0)!==d._trigger("customFilter",null,J)&&this.hideRows(p,T,W);else{if(g)if(I.length){for(var re=!0,ce=0,ie=I.length;ce<ie;ce++)T.push(I[ce]);I=v.dataUF=[]}else{if(!p.length)return{data:T,dataUF:I};M.saveOrder()}if(V.on&&W&&p&&p.length){if(T.length)if(!1===d._trigger("customFilter",null,J))P=J.dataTmp,N=J.dataUF;else for(ce=0,ie=T.length;ce<ie;ce++){var ae=T[ce];(this.isMatchRow(ae,p,W)?P:N).push(ae)}T=P,I=N,0==M.readSorter().length&&(T=M[_b(325)](T)),g&&(v.data=T,v.dataUF=I)}else re&&g&&(!(J={data:T=0==M.readSorter().length?M[_b(325)](T):T})===d._trigger("clearFilter",null,J)&&(T=J.data),v.data=T,d[_b(153)].filter={ui:{type:"local"}})}return g&&(d[_b(153)].filter={ui:{type:"local",rules:p}}),{data:T,dataUF:I}},_getRulesFromCM:function(o,d,g,p,v,M,T){if("between"==g)""===p||null==p?p=T(v,M,g="lte"):""===v||null==v?p=T(p,M,g="gte"):(p=T(p,M,g),v=T(v,M,g));else if("regexp"==g){if("remote"==o)p=p.toString();else if("string"==typeof p)try{var I=d.modifiers||"gi";p=new RegExp(p,I)}catch(V){p=/.*/}}else if("range"==g||K.isArray(p)){if(null==p)return;if("function"==typeof p.push){if(0===p.length)return;if("range"!=g)p=T(p[0],M,g);else for(var P=0,N=(p=p.slice()).length;P<N;P++)p[P]=T(p[P],M,g)}}else g&&(p=T(p,M,g),null!=v&&(v=T(v,M,g)));return[p,v,I="remote"==o?"":((d.conditions||{})[g]||{}).compare||pq.filter.conditions[g].compare||U.conditions[g],g]},getRulesFromCM:function(o){var d=o.CM;if(!d)throw"CM N/A";function g(Ve,le,st){return I?(Ve=null==Ve?"":Ve).toString():N.convertEx(Ve,le,st)}for(var p=this,v=d.length,M=0,T=o.location,I="remote"===T,P=[],N=D[_b(307)];M<v;M++){var V,J,W,re,ce,ae,we,Me=d[M],Pe=Me.filter;Pe&&(V=Me.dataIndx,J=[],we=(we=Me.dataType)&&"stringi"!=we&&"function"!=typeof we?we:"string",(W=Pe.crules||[Pe]).forEach(function(Ve){re=Ve.value,ce=Ve.value2,(ae=Ve.condition)&&p.isCorrect(ae,re,ce)&&(ae=p[_b(392)](T,Pe,ae,re,ce,we,g))&&J.push({condition:ae[3],value:re=ae[0],value2:ce=ae[1],cbFn:ae[2]})}),J.length&&(W={dataIndx:V,dataType:we},I&&1==J.length?(W.value=J[0].value,W.value2=J[0].value2,W.condition=J[0].condition):(W.crules=J,W.mode=Pe.mode,I||(W.column=Me)),P.push(W)))}return(o.apply||I)&&this[_b(393)](P),P},getCMFromRules:function(o){var d=this.that;return o.map(function(g){return g=d.getColumn({dataIndx:g.dataIndx}),pq.copyObj({},g,["parent"])})},getQueryStringFilter:function(){var g,o=this.that,d=(g=o.options).stringify,p=(g=g[_b(157)]).mode,M=o.colModel,v=g.newDI||[],T=(M=this[_b(391)]({CM:M,location:"remote"}),"");return g&&g.on&&M&&(M.length?(g={mode:p,data:M},T=d?JSON.stringify(g):g):(T="",v.length&&o._trigger("clearFilter"))),T},isCorrect:function(o,d,g){if(o=pq.filter.conditions[o])return!!(null!=d&&""!==d||null!=g&&""!==g||o.nr);throw"filter condition NA"},isMatchCell:function(o,d){for(var g,p,v,M,I=this.that,P=o.column,N=o.dataType,V=o.mode,J=[],W=o.crules,re=W.length,ce=d[o.dataIndx],ie=0;ie<re;ie++)M=(v=W[ie]).condition,g=v.value,p=v.value2,v=v.cbFn,M&&(M="regexp"===M?null==ce?"":ce:U.convertEx(ce,N,M,P),J.push(!!v.call(I,M,g,p,d,P)));if(re=J.length,"AND"===V){for(ie=0;ie<re;ie++)if(!J[ie])return!1;return!0}for(ie=0;ie<re;ie++)if(J[ie])return!0;return!1},isMatchRow:function(o,d,g){var p,v,M=0,T=d.length,I="AND"==g,P=!I;if(0==T)return!0;for(;M<T;M++){if(p=d[M],(v=this[_b(394)](p,o))&&(p.found=!0),P&&v)return!0;if(I&&!v)return!1}return I},onFilterChange:function(){var o=this.that,d=o.columns,g=(v=o.options)[_b(157)],p=g.oldDI||[],v=!v.dataModel.data.length,M="pq-col-filtered",T=(I="remote"==g.type)||v,I=(g.rules||[]).reduce(function(P,N){return(N.found||T)&&P.push(N.dataIndx),P},[]);p.forEach(function(P){var N=o[_b(27)]({dataIndx:P}),V=d[P];N.length&&(N[_b(72)](M),o[_b(209)]({dataIndx:P})[_b(72)](M)),V&&(V.clsHead=(V.clsHead||"").split(" ").filter(function(J){return J!==M}).join(" "))}),I.forEach(function(P){var N=o[_b(27)]({dataIndx:P}),V=d[P];N.length&&(N.addClass(M),o[_b(209)]({dataIndx:P}).addClass(M)),V&&(V.clsHead=(V.clsHead||"")+" "+M)}),g.oldDI=g.newDI=I},onLoad:function(){var o=this.that.options.dataModel.dataUF;o&&(o.length=0)},sortRulesAndFMIndx:function(o){var d=this.that.options[_b(157)],g=d.newDI;o.sort(function(p,v){return v=v.dataIndx,p=g.indexOf(p=p.dataIndx),v=g.indexOf(v),0<=p&&0<=v?p-v:0<=p?-1:0<=v?1:0}),d.rules=o}}}(jQuery),function(K){var U=K.paramquery,D=U.cSort=function(o){this.that=o,this.sorters=[],this.tmpPrefix="pq_tmp_",this.cancel=!1},y=(U.pqGrid.prototype.sort=function(o){if((o=o||{}).data)return this.iSort[_b(320)](o.sorter,o.data);var d,g,p,v,M,T=this,I=T.options,P=I.dataModel,N=P.data,V=P.location,J=I.sortModel.type;(N&&N.length||"local"!=J)&&(I=I.editModel,g=(d=T.iSort).getSorter(),p=o.evt,v=null==o.single?d.readSingle():o.single,M=d.readCancel(),((M=o.sorter?o.addon?(o.single=v,o.cancel=M,d.addon(o)):o.sorter:d.readSorter()).length||g.length)&&(I.indices&&T.blurEditor({force:!0}),!(I={dataIndx:M.length?M[0].dataIndx:null,oldSorter:g,sorter:M,source:o.source,single:v})===T._trigger("beforeSort",p,I)?d.cancelSort():(d.resumeSort(),"local"==J&&d.saveOrder(),d.setSorter(M),d.setSingle(v),d[_b(395)](M),d[_b(396)](v),"local"==J?(P.data=d[_b(325)](N,!o[_b(397)],N[0]==T.pdata[0]?"pq_order":"pq_gorder"),!(T[_b(153)].sort={evt:p,ui:I})!==o.refresh&&T[_b(17)]()):"remote"==J&&(T[_b(153)].sort={evt:p,ui:I},o[_b(398)]||!1!==T._trigger("customSort")&&("lazy"==V?T.iLazy.init({initBySort:!0}):T[_b(146)]({initBySort:!0,callback:function(){T[_b(147)]()}}))))))},D.prototype={addon:function(o){var d,g,p=(o=o||{}).sorter[0],v=p.dataIndx,M=p.dir,T=o.single,I=o.cancel,P=this.readSorter(),N=P[0];if(null==T)throw"sort single N/A";return null!=v&&(T&&!o[_b(399)]?(N=(P=P.length?[P[0]]:[])[0])&&N.dataIndx==p.dataIndx?""==(g="up"===(d=N.dir)?"down":I&&"down"===d?"":"up")?P.length--:N.dir=g:P[0]=K.extend({},p,{dir:g=M||"up"}):-1<(T=this.inSorters(P,v))?"up"==(d=P[T].dir)?P[T].dir="down":I&&"down"==d||1!=P.length?P.splice(T,1):P[T].dir="up":P.push(K.extend({},p,{dir:"up"}))),P},cancelSort:function(){this.cancel=!0},resumeSort:function(){this.cancel=!1},readSorter:function(){var o=(d=this.that).columns,d=(d.options.sortModel.sorter||[]).filter(function(g){return!!o[g.dataIndx]});return pq[_b(217)](d,"dataIndx")},setSingle:function(o){this.single=o},getSingle:function(){return this.single},readSingle:function(){return this.that.options.sortModel.single},setCancel:function(o){this.cancel=o},readCancel:function(){return this.that.options.sortModel.cancel},saveOrder:function(o){o=o||"pq_order";var d=this.that.get_p_data(),g=d.find(function(T){return!T.pq_gtitle&&!T[_b(9)]});if(g&&null==g[o]||!g)for(var p,v=0,M=(p=d).length;v<M;v++)(g=p[v])&&(g[o]=v)},getCancel:function(){return this.cancel},getQueryStringSort:function(){if(this.cancel)return"";var o=this.sorters,d=(d=this.that).options.stringify;return o.length?d?JSON.stringify(o):o:""},getSorter:function(){return this.sorters},setSorter:function(o){this.sorters=o.slice(0)},inSorters:function(o,d){for(var g=0;g<o.length;g++)if(o[g].dataIndx==d)return g;return-1},sortLocalData:function(o,d,g){g=g||"pq_order";var p=this.sorters;return p.length||o.length&&null!=o[0][g]&&(p=[{dataIndx:g,dir:"up",dataType:"integer"}]),this[_b(320)](p,o,d)},compileSorter:function(o,d){var p,g=(p=this.that).columns,v=[],M=[],T=[],I=this.tmpPrefix,P=(p=p.options).sortModel,N=P.useCache,V=P.ignoreCase,J=o.length;d=d||p.dataModel.data;for(var W=0;W<J;W++){var we,re=(we=o[W]).sortIndx||we.dataIndx,ae=g[re]||{},ce="up"==(we.dir=we.dir||"up")?1:-1,ie=pq.getFn(ae.sortType),Me=(ae="string"==(ae=ae.dataType||we.dataType||"string")&&V?"stringi":ae,(we=N&&"date"==ae)?I+re:re);M[W]=Me,T[W]=ce,v[W]=ie?function(Pe,Ve){return function(le,st,We,at){return Ve(le,st,We,at,Pe)}}(ie,y[_b(400)]):"integer"==ae||"float"==ae?y[_b(401)]:"function"==typeof ae?function(Pe,Ve){return function(le,st,We,at){return Ve(le,st,We,at,Pe)}}(ae,y[_b(402)]):"date"==ae?y["sort_date"+(we?"_fast":"")]:"bool"==ae?y.sort_bool:"stringi"==ae?y[_b(403)]:y[_b(404)],we&&this.addCache(d,ae,re,Me)}return this._composite(v,M,T,J)},_composite:function(o,d,g,p){return function(v,M){for(var T=0,I=0;I<p&&0==(T=o[I](v,M,d[I],g[I]));I++);return T}},_sortLocalData:function(o,d,g){if(!d)return[];if(!d.length)return d;var p=this.that,v=p.options.sortModel,M=this[_b(405)](o,d),T={sort_composite:M,data:d,sorter:o};return o&&o.length?(g&&!1===p._trigger("customSort",null,T)?d=T.data:d.sort(M),v.useCache&&this[_b(406)](o,d)()):p._trigger("cancelSort",null,T),d},addCache:function(o,d,g,p){for(var v=y["get_"+d],M=o.length;M--;){var T=o[M];T[p]=v(T[g])}},removeCache:function(o,d){var g=this.tmpPrefix;return function(){for(var p=o.length;p--;){var M=g+o[p].dataIndx,T=d.length;if(T&&d[0].hasOwnProperty(M))for(;T--;)delete d[T][M]}}},writeCancel:function(o){this.that.options.sortModel.cancel=o},writeSingle:function(o){this.that.options.sortModel.single=o},writeSorter:function(o){this.that.options.sortModel.sorter=o}},{get_date:function(o){return!o||isNaN(o=Date.parse(o))?0:o},sort_number:function(o,d,g,p){return((o=(o=o[g])?+o:0)-(d=(d=d[g])?+d:0))*p},sort_date:function(o,d,g,p){return d=d[g],((o=(o=o[g])?Date.parse(o):0)-(d=d?Date.parse(d):0))*p},sort_date_fast:function(o,d,g,p){return(o[g]-d[g])*p},sort_dataType:function(o,d,g,p,v){return v(o[g],d[g])*p},sort_sortType:function(o,d,g,p,v){return v(o,d,g)*p},sort_string:function(o,d,g,p){return o=o[g]||"",d=d[g]||"",g=0,d<o?g=1:o<d&&(g=-1),g*p},sort_locale:function(o,d,g,p){return d=d[g]||"",(o=o[g]||"")[_b(407)](d)*p},sort_bool:function(o,d,g,p){return o=o[g],d=d[g],g=0,o&&!d||!1===o&&null==d?g=1:(d&&!o||!1===d&&null==o)&&(g=-1),g*p}});pq.sortObj=y}(jQuery),function(K){function U(y,v,d){var g=0,p=v;for(d=(v=y.length)<d?v:d;p<d;p++)!0!==y[p].pq_hidden&&g++;return g}K.paramquery.pqGrid.prototype[_b(409)]=U,(K.paramquery.cMerge=function D(y){var o=this;o.that=y,o.mc=null,y.on(_a(132),function(d,g){y.options.mergeCells&&"pager"!==g.source&&o.init()}),y.on("colAdd colRemove",o[_b(408)].bind(o)).on("change",o.onChange.bind(o)),y.Merge=function(){return o}}).prototype={auto:function(y,o){var d=this.that,g=d.pdata;return o=o||[],y.forEach(function(p){for(var v=1,M=d.colIndxs[p],T=g.length;T--;){var P=g[T-1]?g[T-1][p]:void 0;void 0!==P&&g[T][p]==P?v++:1<v&&(o.push({r1:T,c1:M,rc:v,cc:1}),v=1)}}),o},calcVisibleColumns:function(y,o,d){var g=0,p=y.length;for(d=p<d?p:d;o<d;o++)!0!==y[o].hidden&&g++;return g},findNextVisibleColumn:function(y,o,d){for(var g,p=o;p<o+d;p++){if(!(g=y[p]))return-1;if(!g.hidden)return p}},findNextVisibleRow:function(y,o,d){for(var g,p=o;p<o+d;p++){if(!(g=y[p]))return-1;if(!g.pq_hidden)return p}},getData:function(y,o,d){var g=this.mc;if(g[y]&&(g=g[y][o]))return(y=g.data)?y[d]:null},inflateRange:function(y,o,d,g){var p=this.that,v=!1,M=p.riOffset+p.pdata.length-1,T=p.colModel.length-1,I=this.mc2;if(!I)return[y,o,d,g];for(var P=0,N=I.length;P<N;P++){var V=(re=I[P]).r1,J=re.c1,W=M<(W=V+re.rc-1)?M:W,re=T<(re=J+re.cc-1)?T:re;if((V<y&&y<=W||V<=d&&d<W)&&o<=re&&J<=g||(J<o&&o<=re||J<=g&&g<re)&&y<=W&&V<=d){v=!0,y=V<y?V:y,o=J<o?J:o,d=d<W?W:d,g=g<re?re:g;break}}return v?this[_b(350)](y,o,d,g):[y,o,d,g]},init:function(){for(var y=this.that,o=this[_b(410)],d=this[_b(411)],g=this[_b(412)],p=y.colModel,v=y.options.mergeCells||[],M=y.get_p_data(),T=[],I=[],P=0,N=v.length;P<N;P++){var V=v[P],J=V.r1,W=J,re=M[J],ce=V.c1,ie=ce,ae=p[ce],we=V.rc,Me=V.cc;if(ae&&re&&(ae.hidden&&(ie=o(p,ce,Me)),ae=g(p,ce,ce+Me),re.pq_hidden&&(W=d(M,J,we)),!((re=U(M,J,J+we))<1||ae<1))){T.push({r1:J,c1:ce,rc:we,cc:Me}),I[W]=I[W]||[];for(var Pe={show:!(I[W][ie]={show:!0,rowspan:re,colspan:ae,o_rowspan:we,o_colspan:Me,style:V.style,cls:V.cls,attr:V.attr,r1:J,c1:ce,v_r1:W,v_c1:ie}),r1:J,c1:ce,v_r1:W,v_c1:ie},Ve=J;Ve<J+we;Ve++){I[Ve]=I[Ve]||[];for(var le=ce;le<ce+Me;le++)Ve==W&&le==ie||(I[Ve][le]=Pe)}}}y[_b(413)]=0<I.length,this.mc=I,this.mc2=T},ismergedCell:function(y,o){var d,p=this.mc;return!!(p&&p[y]&&(d=p[y][o]))&&(y!=(p=d.v_r1)||o!=d.v_c1||{o_ri:d.r1,o_ci:d.c1,v_rc:d.rowspan,v_cc:d.colspan,o_rc:d.o_rowspan,o_cc:d.o_colspan})},isRootCell:function(y,o,d){var g=this.mc;if(g&&g[y]&&(p=g[y][o])){if("o"==d)return y==p.r1&&o==p.c1;d=p.v_r1;var p=p.v_c1;return d==y&&p==o?{rowspan:(y=g[d][p]).rowspan,colspan:y.colspan}:void 0}},removeData:function(y,o,d){var g=this.mc;g&&g[y]&&(g=g[y][o])&&(y=g.data)&&(y[d]=null)},getRootCell:function(y,o){var d,g=this.mc;if(g&&g[y]&&(y=g[y][o]))return{o_ri:(y=g[o=y.v_r1][d=y.v_c1]).r1,o_ci:y.c1,v_ri:o,v_ci:d,v_rc:y.rowspan,v_cc:y.colspan,o_rc:y.o_rowspan,o_cc:y.o_colspan}},getRootCellO:function(y,o,d,v){v="o"==(v=v||"o");var p,M=this[_b(230)](y,o);return M?this.that.normalize(p={rowIndx:M[v?"o_ri":"v_ri"],colIndx:M[v?"o_ci":"v_ci"]}):(p=d?{rowIndx:y,colIndx:o}:p)?this.that.normalize(p):null},getRootCellV:function(y,o,d){return this[_b(137)](y,o,d,"v")},getClsStyle:function(y,o){return this.mc[y][o]},getMergeCells:function(y,o,d){for(var g,p,v,M=this.that,T=M.options.mergeCells,I=M.riOffset,P=I+d,N=[],V=T?T.length:0,J=0;J<V;J++)p=(g=T[J]).r1,v=g.c1,(!o||I<=p&&p<P)&&(o&&(p-=I),N.push({r1:p+=y,c1:v,r2:p+g.rc-1,c2:v+g.cc-1}));return N},alterColumn:function(y,o){for(var g=(o=o.args)[1],p="number"!=typeof(v=o[0]),v=p?v.length:v,M=this.that.options.mergeCells||[],T=0,I=M.length;T<I;T++){var P=M[T],N=P.c1,V=P.cc;p?g<=N?P.c1=N+v:g<N+V&&(P.cc=V+v):g<N?P.c1=N-v:g<N+V&&0<V-v&&(P.cc=V-v),P.c2=null}this.init(M)},onChange:function(y,o){for(var d,p=o.addList,v=o.deleteList,M=this.that.options.mergeCells||[],T=0,I=M.length;T<I;T++){for(var P=M[T],N=P.r1,V=P.rc,J=0,W=p.length;J<W;J++)(d=p[J].rowIndx)<=N?(N=P.r1=N+1,P.r2=null):d<N+V&&(V=P.rc=V+1,P.r2=null);for(J=0,W=v.length;J<W;J++)(d=v[J].rowIndx)<N?(N=P.r1=N-1,P.r2=null):d<N+V&&1<V&&(V=P.rc=V-1,P.r2=null)}this.init(M)},setData:function(y,o,d){var g=this.mc;g[y]&&(g=g[y][o])&&(g.data=d)}}}(jQuery),function(K){var U=K.paramquery,D=pq.mixin,y=(U.pqGrid.defaults.groupModel={agg:{},cascade:!0,cbId:"pq_group_cb",collapsed:[],dataIndx:[],fixCols:!0,groupCols:[],header:!0,headerMenu:!0,icon:[_a(133),"ui-icon-triangle-1-e"],id:"pq_gid",parentId:"parentId",childstr:"children",menuItems:["merge","fixCols","grandSummary"],on:!1,refreshOnChange:!0,pivotColsTotal:"after",separator:"_",source:"checkboxGroup",showSummary:[],summaryInTitleRow:"collapsed",summaryEdit:!0,title:[],titleDefault:"{0} ({1})"},pq.aggregate={sum:function(o){for(var d,g=0,p=o.length;p--;)null!=(d=o[p])&&(g+=+d);return g},avg:function(o,d){try{var g=pq.formulas.AVERAGE(o)}catch(p){g=p}return isNaN(g)?null:g},flatten:function(o){return o.filter(function(d){return null!=d})},max:function(o,I){var g,p,v,M,T;if(I=pq[_b(46)](I),g=(o=this.flatten(o)).length){if("number"==I)for(p=+o[0];g--;)p=p<(v=o[g])||isNaN(p)?v:p;else if("date"==I){for(p=Date.parse(o[0]),M=o[0];g--;)(p<(T=Date.parse(o[g]))||isNaN(p))&&(p=T,M=o[g]);p=M}else o.sort(),p=o[g-1];return p}},min:function(o,T){var g,p,v,M;if(T=pq[_b(46)](T),M=(o=this.flatten(o)).length){if("number"==T)for(g=+o[0];M--;)g=(p=+o[M])<g||isNaN(g)?p:g;else if("date"==T){for(g=Date.parse(o[0]),v=o[0];M--;)((p=Date.parse(o[M]))<g||isNaN(g))&&(g=p,v=o[M]);g=v}else o.sort(),g=o[0];return g}},count:function(o){return this.flatten(o).length},stdev:function(o){try{var d=pq.formulas.STDEV(o)}catch(g){d=g}return isNaN(d)?null:d},stdevp:function(o){try{var d=pq.formulas.STDEVP(o)}catch(g){d=g}return isNaN(d)?null:d}},U.cGroup=function(o){var d=this,g=o.options,p=d.Model=g.groupModel;d.cbId=p.cbId,d.childstr=p.childstr,d.id=p.id,d.parentId=p.parentId,d.isGroup=!0,d.cache={},d.oldEditor=g.editor,d.prop="pq_group_prop",d.that=o,Object[_b(45)](p,"nodeClose",{get:function(){return d.fillState({})},set:function(v){d.nodeClose=v}}),p.on&&d.init()});y[_b(414)]=function(o,d){return function(g){return!1===d._trigger("beforeGroupExpand",o,g)}},y[_b(415)]=function(o){return function(d){var g=K(d.target),p=K(this).data("indx");g.hasClass("pq-group-remove")?o[_b(416)](p):o[_b(417)](p,d)}},y.prototype=K.extend({},D.ChkGrpTree,D.GrpTree,{addGroup:function(o,d){var g=this,p=pq.objectify(v=g.that.options.groupModel.dataIndx||[]),v=v.slice();null==o||p[o]||(null==d?v.push(o):v.splice(d,0,o),g.option({dataIndx:v},"","",function(){g[_b(418)]()}))},createHeader:function(){for(var o=this.that,d=this.$header,g=o.options,p=g.bootstrap,v=o.columns,M=p.on,T=g.groupModel,I=T.dataIndx,P=I.length;P--;)null==v[I[P]]&&I.splice(P,1);if(P=I.length,T.header&&T.on){if(d?d.empty():(d=this.$header=K(_a(134)).appendTo(o.$top)).on("click",".pq-group-item",y[_b(415)](this)),P){for(var N=[],V=0;V<P;V++){var J=I[V],W=v[J],re=(M?p.groupModel:T).icon,ce=(ce=T.collapsed)[V]?re[1]:re[0];N.push(_a(135),J,"' >","<span class='",this.toggleIcon,ce,"' ></span>",W.pq_title||("string"==typeof W.title?W.title:J),"<span class='",this[_b(419)],"' ></span></div>")}d[0].innerHTML=N.join("")}this.initHeader(g,T)}else d&&(d.remove(),this.$header=null)},collapse:function(o){this.expand(o,!0)},collapseAll:function(o){this.expandAll(o,!0)},collapseTo:function(o){this.expandTo(o,!0)},concat:function(){var o=this.parentId,d=this.id,g=this.childstr;return function(p,v,M){var T=M[d];return v.forEach(function(I){I[o]=T,p.push(I)}),M[g]=v,p}},editorSummary:function(o,d){var g=this,p=g.oldEditor;return function(v){if((M=v.rowData)[_b(9)]||M.pq_gtitle){var T,I,M=pq.aggregate,P=(P=(V=v.column).summary)?P.edit:null,N=K.inArray,V=V.dataType,J=[""];if(-1<N(v.dataIndx,d.dataIndx)||!d[_b(420)]&&!P||!1===P)return!1;for(I in T=g[_b(421)](V),M)-1<N(I,T)&&J.push(I);return 1!=J.length&&{type:"select",prepend:d.prepend,options:d.options||J,valueIndx:d.valueIndx,labelIndx:d.labelIndx,init:d.init||g.editorInit,getData:d.getData||g[_b(422)]}}return"function"==typeof p?p.call(g.that,v):p}},editorInit:function(o){var d=o.column.summary,g=this.options.groupModel.dataIndx;g=(d=d||(o.column.summary={}))[g[o.rowData.pq_level]]||d.type,o.$cell.find("select").val(g)},editorGetData:function(M){var d=M.column,g=this.options.groupModel.dataIndx[M.rowData.pq_level],p=d.dataType,v=d.summary;return M=M.$cell.find("select").val(),v[v[g]?g:"type"]=M,this.one("beforeValidate",function(T,I){I[_b(68)]=!0,I.track=!1,I.history=!1,d.dataType="string",this.one(!0,"change",function(P,N){d.dataType=p})}),M},expandTo:function(o,d){for(var g,p=this.that,v=!!d,M=o.split(","),T=M.length,I=this.childstr,P=this.getRoots(p.pdata),N=0;N<T&&(g=P[M[N]]);)v||(g.pq_close=v),P=g[I],N++;g&&(g.pq_close=v,!1!==p._trigger("group",null,{node:g,close:v})&&this[_b(342)]())},expandAll:function(o,d){!1!==this.trigger({all:!0,close:d=!!d,level:o=o||0})&&(this.that.pdata.forEach(function(g){g.pq_level>=o&&(g.pq_close=d)}),this[_b(423)](),this[_b(342)]())},expand:function(o,d){!1!==this.trigger({close:!!d,level:o=o||0})&&(this.that.pdata.forEach(function(g){g.pq_level==o&&(g.pq_close=d)}),this[_b(423)](),this[_b(342)]())},flattenG:function(o,d,g,p){var v=g.dataIndx,M=this.id,T=this.parentId,I=this.childstr,P=g.separator,N=g.titleIndx,V=this.concat(),J=v.length,W=[];return function re(ce,ie,ae,we){if(!J)return ce;var Me=ie||0,Pe=(ae=ae||{})[I],Ve=v[Me],le=g.collapsed[Me];return d(ce,Ve,o[Ve]).forEach(function(at){var qe,We=at[1],Te=(we?we+P:"")+(at=at[0]);(qe={pq_gtitle:!0,pq_level:Me,pq_close:le,pq_items:qe=We.length})[M]=Te,qe[T]=ae[M],qe[I]=[],qe[Ve]=at,N&&(qe[N]=at),W.push(qe),Pe&&Pe.push(qe),Me+1<J?re(We,Me+1,qe,Te):W=V(W,We,qe)}),W}},getAggOptions:function(o){return"integer"==o||"float"==o?o="number":"date"!==o&&(o="string"),this.that.options[_b(424)][o].split(",")},getVal:function(o){var d=K.trim;return function(g,p,v){return g=g[p],(p=v[_b(425)])?(p=pq.getFn(p))(g):(g=d(g),o?g[_b(37)]():g)}},getSumCols:function(){return this._sumCols},getSumDIs:function(){return this._sumDIs},group:function(o){return function(d,g,p){var v={},M=[];return d.forEach(function(T){T.pq_hidden=void 0;var I=o(T,g,p),P=v[I];null==P&&(v[I]=P=M.length,M[P]=[I,[]]),M[P][1].push(T)}),M}},groupData:function(o){var d=this.that,g=d.options.groupModel,p=this.getVal(g.ignoreCase),M=d.pdata,T=d.columns;this.setSumCols(g.dataIndx),d.pdata=this.flattenG(T,this.group(p),g,function(){})(M),d._trigger("before"+(o?"Pivot":"Group")+"Summary"),this.summaryT()},hideRows:function(o,d,g,p){for(var v,M=this.that.pdata,T=o,I=M.length;T<I;T++)if((v=M[T])[_b(9)])g||p?v.pq_level>=d&&(v.pq_hidden=!0):v.pq_level>d&&(v.pq_hidden=!0);else if(v.pq_gtitle){if(v.pq_level<=d)break;v.pq_hidden=!0}else v.pq_hidden=!0},init:function(){var o,d,g,p,v=this;v.onCMInit(),v._init||(v.mc=[],v[_b(23)]=[],o=(d=(p=v.that).options).groupModel,d=d.bootstrap.on,v[_b(419)]="pq-group-remove "+(g=d?"glyphicon ":"ui-icon ")+(d?"glyphicon-remove":"ui-icon-close"),v.toggleIcon="pq-group-toggle "+g,p.on("cellClick",v[_b(371)](v)).on("cellKeyDown",v[_b(426)](v,o)).on(!0,"cellMouseDown",v[_b(372)]()).on("change",v.onChange(v,o)).on("dataReady",v[_b(299)].bind(v)).on("beforeFilterDone",function(){v.saveState()}).on("columnDragDone",v[_b(427)](v)).on("colMove",v.onColMove.bind(v)).on(_a(136),v[_b(428)].bind(v)).on("valChange",v.onCheckbox(v,o)).on("refresh refreshRow",v.onRefresh(v,o)).on("refreshHeader",v[_b(302)].bind(v)),(o.titleIndx||o[_b(12)])&&p.on("CMInit",v.onCMInit.bind(v)),p.on("beforeCheck",v[_b(305)].bind(v)),v[_b(429)](!0),v._init=!0)},initHeadSortable:function(){this.$header.sortable({axis:"x",distance:3,tolerance:"pointer",cancel:".pq-group-menu",stop:this.onSortable(this,this.that.options)})},initHeadDroppable:function(){var o=this,d=o.that,g=o.$header;g&&(g.droppable({accept:function(p){if(p=+p.attr("pq-col-indx"),!isNaN(p)&&d.colModel[p])return o.acceptDrop},tolerance:"pointer",hoverClass:"pq-drop-hover",drop:o.onDrop(d,o)}),o.acceptDrop=!0)},initHeader:function(o,d){var g,p;this.$header&&(p=(g=this.$header).find(".pq-group-item"),g.data("uiSortable")||this[_b(430)](),p.length||g.append(_a(137)+o[_b(431)]+"</span>"),d.headerMenu&&this[_b(432)]())},initHeaderMenu:function(){for(var o,d=this,g=(v=d.that).BS_on,p=v.options,v=d.$header,M=[_a(138),g?"<span class='glyphicon glyphicon-chevron-left'></span>":_a(139),"<ul>"],T=p.groupModel,I=T.menuItems,P=0,N=I.length;P<N;P++)M.push("<li data-option='",o=I[P],_a(140),"<label>",_a(0),T[o]?"checked":"","/>",p["strGroup_"+o],"</label></li>");M.push("</ul></li></ul>"),(g=K(M.join("")).appendTo(v)).menu({icons:{submenu:"ui-icon-carat-1-w"},position:{my:"right top",at:"left top"}}),g.change(function(V){var J;"INPUT"==V.target.nodeName&&((J={})[V=K(V.target).closest("li").data("option")]=!p.groupModel[V],d.option(J))})},isOn:function(){var o=this.that.options.groupModel;return o.on&&(o.dataIndx||[]).length},getRC:function(o){var d=1,g=this;return(o[g.childstr]||[]).forEach(function(p){d+=g.getRC(p)}),d+(o[_b(11)]?1:0)},initmerge:function(){var o,d=this,g=d.that,p=g.options,v=p.groupModel,M=v.merge,T=v[_b(18)],I=v.titleIndx,P=g.colModel.length,N=[],V=v.dataIndx,J=g.pdata||[];v.on&&(M?V.forEach(function(W,re){J.forEach(function(ce){ce.pq_gtitle&&re==ce.pq_level&&(o=d.getRC(ce),N.push({r1:ce.pq_ri,rc:o,c1:re,cc:1}))})}):V.length&&J.forEach(function(W){!W.pq_gtitle||T&&(W.pq_close||"collapsed"!==T)||N.push({r1:W.pq_ri,rc:1,c1:I?g.colIndxs[I]:W.pq_level,cc:P})})),N.length?(d.mc=p.mergeCells=N,g.iMerge.init()):d.mc.length&&(d.mc.length=0,g.iMerge.init())},initcollapsed:function(){var o,d,g,p,v,M=this.that,T=M.options.groupModel,I=T.merge,P=T[_b(18)],N=this.nodeClose,V=M.pdata,J=this.id;if(V){for(var W=0,re=V.length;W<re;W++)(g=V[W]).pq_gtitle&&(p=g.pq_level,v=null,N&&null!=(d=N[o=g[J]])&&(delete N[o],v=g.pq_close=d),(v=null==v?g.pq_close:v)?this.hideRows(W+1,p,I,P):I&&(g.pq_hidden=!0));M._trigger("groupHideRows")}},updateItems:function(o){var d,g,p=this,v=0,M=p.childstr;return(o||p.that.pdata).forEach(function(T){T.pq_gtitle&&(T.pq_items=(g=(d=T[M]).length)&&d[0][M]?p[_b(433)](d):g,v+=T.pq_items)}),v},removeEmptyParent:function(o){var d,g=this.that.pdata,p=this.childstr;o[p].length||(g=(p=(d=this.getParent(o))?d[p]:g).indexOf(o),p.splice(g,1),d&&this[_b(434)](d))},addNodes:function(o,d,g){this.moveNodes(o,d,g,!0)},deleteNodes:function(o){this.moveNodes(o,null,null,null,!0)},moveNodes:function(o,d,g,p,v){var M,T,I,P,N=this,V=N.that,J=N.childstr,W=V.options,re=W.groupModel,ce=re.dataIndx,ie=N.getRoots(),ae=d?d[J]:ie,we=[],Me=N.parentId,Pe=N[_b(435)](o),Ve=0,le=ae[0],st=ae.length;if(g=null==g||st<=g?st:g,I=Pe.length){for(V._trigger("beforeMoveNode");Ve<I;Ve++)P=Pe[Ve],p?ae.splice(g++,0,P):(T=(M=(M=N.getParent(P))?M[J]:ie).indexOf(P),v?M.splice(T,1):M==ae?g=pq.moveItem(P,ae,T,g):(ae.splice(g++,0,P),M.splice(T,1))),d&&M!=ae&&(ce.slice(0,d.pq_level+1).forEach(function(We){N.isFolder(P)?N[_b(10)](P).forEach(function(at){at[We]=d[We]}):P[We]=le[We]}),P[Me]=le[Me],P.pq_hidden=le.pq_hidden);ae==ie&&(V.pdata=ae),V.iRefresh.addRT(Pe),N[_b(433)](),N.summaryT(),V.pageData().forEach(function(We){We.pq_gtitle||We[_b(9)]||we.push(We)}),W.dataModel.data=we,N.isCascade(re)&&(N[_b(436)](),N.setValCBox()),V.iRefresh.addRowIndx(),N.initmerge(),V._trigger((p?"add":v?"delete":"move")+"Node",null,{args:arguments}),V.refresh({header:!1})}},onCellClick:function(o){return function(d,g){var p;g.rowData.pq_gtitle&&K(d[_b(32)].target).hasClass("pq-group-icon")&&(pq.isCtrl(d)?o[(p=g.rowData).pq_close?"expand":"collapse"](p.pq_level):o.toggleRow(g[_b(75)],d))}},onCellMouseDown:function(){return function(o,d){d.rowData.pq_gtitle&&K(o[_b(32)].target).hasClass("pq-group-icon")&&o[_b(29)]()}},onCellKeyDown2:function(o,d){return function(g,p){return 0!=o[_b(301)](g,p)&&(p.rowData.pq_gtitle&&0<=K.inArray(p.dataIndx,d.dataIndx)&&g.keyCode==K.ui.keyCode.ENTER?(o.toggleRow(p[_b(75)],g),!1):void 0)}},onChange:function(o,d){return function(g,p){d.source!=p.source&&"checkbox"!=p.source&&(o.summaryT(),o.that.refresh())}},onColumnDrag:function(o){return function(d,p){var v=(p=p.column).colModel;v&&v.length||!1===p.groupable||p.denyGroup?o.acceptDrop=!1:o[_b(437)]()}},onCustomSort:function(o,d){var g,p=this.that,v=p.options,M=[],T=v.groupModel,I=T.dataIndx,P=d.sorter||[],N=P.map(function(re){return re.dataIndx}),V=N[0],J=p.columns[V],W=I.indexOf(V);if("remote"!=v.sortModel.type&&T.on&&I.length&&!(0<=W&&J[_b(425)]))return"pq_order"==V||"pq_gorder"==V||0==P.length||(J.summary||{}).type?this._delaySort(d):(g=I.map(function(re){var ce=N.indexOf(re);return{dataIndx:re,dir:(0<=ce?P[ce]:P[0]).dir}}).concat(P),g=pq[_b(217)](g,"dataIndx"),this._delaySort(d,function(re){function ce(){M.length&&d[_b(15)].push(p.iSort[_b(405)](M,re)),M=[]}d[_b(15)]=[],g.forEach(T.titleIndx==V?function(ie){-1==I.indexOf(ie.dataIndx)?M.push(ie):(ce(),d[_b(15)].push(p.iSort[_b(405)]([ie],re)))}:function(ie){var ae=0<=N.indexOf(ie.dataIndx),we=0<=I.indexOf(ie.dataIndx);ae?we?(ce(),d[_b(15)].push(p.iSort[_b(405)]([ie],re))):M.push(ie):(ce(),d[_b(15)].push(void 0))}),ce()}))},_delaySort:function(o,d){var g=this,p=g.that,v=p.pdata;if(v&&v.length)return p.one("isSkipGroup",function(){return d&&d(v),o.data=v,g[_b(438)]({},o),p.pdata=o.data,g[_b(439)](),!1}),!1},summaryRestore:function(){var o,d=this.childstr;this.that.pdata=function g(p,v){var M=[];return p.forEach(function(T){M.push(T),g(T[d]||[],T).forEach(function(I){M.push(I)})}),v&&(o=v[_b(11)])&&!o.pq_ghidden&&M.push(o),M}(this.getRoots())},onDrop:function(o,d){return function(g,p){p=+p.draggable.attr("pq-col-indx"),d.addGroup(p=o.colModel[p].dataIndx),d.acceptDrop=!1}},onSortable:function(o,d){return function(){var g,p,v=[],M=d.groupModel.dataIndx;K(this).find(".pq-group-item").each(function(T,I){p=(p=K(I)).data("indx"),M[T]!==p&&(g=!0),v.push(p)}),g&&o.option({dataIndx:v},"","",function(){o[_b(418)]()})}},onDataReady:function(o,d){var g=this,p=g.that,v=p.iSort,M=p.options.groupModel,T=M.dataIndx.length;0!=d.group&&(d.header=null,M.on&&(T||M[_b(21)]?(!1!==p._trigger("isSkipGroup")&&(v.saveOrder(),g.groupData(),v.saveOrder("pq_gorder"),g.buildCache()),p.iRefresh.addRowIndx(),g[_b(440)](),T&&(g[_b(441)](),g.initmerge(),g.isCascade(M)&&g[_b(436)]())):g[_b(440)](),g.setValCBox()),g[_b(423)]())},onColMove:function(){var o=this.that.options.groupModel;if(o[_b(12)])return this.that[_b(17)](),!1;o.titleIndx||this.initmerge()},option:function(o,d,I,p){var v=this.that,M=(M=o.dataIndx)?M.length:0,T=v.options.groupModel,P=(I={source:I,oldGM:K.extend({},T),ui:o},T.dataIndx);0!=v._trigger("beforeGroupOption",null,I)&&(o.agg&&this.updateAgg(o.agg,T.agg),T.on&&P.length&&(!1===o.on||0===M)&&this.showRows(),K.extend(T,o),p&&p(),this.init(),this.setOption(),v._trigger("groupOption",null,I),!1!==d&&(v[_b(17)]({refresh:!1}),v.sort({header:!1})))},showRows:function(){this.that.options.dataModel.data.forEach(function(o){o.pq_hidden&&(o.pq_hidden=void 0)})},renderBodyCell:function(o,d){var g,p=this,v=d.checkbox,M=d.dataIndx.length-(p.isPivot()?1:0),T=d.titleIndx,I=T?d.indent:0,P=I*M,N="";return M&&(P+=I),function(V){var J=V.rowData,W=V.column,re=W[_b(306)];if(!V.Export)return re=re&&re.call(p.that,V)||V.formatVal||V.cellData,{text:((V=(N=v&&T&&(g=p.renderCB(v,J,d.cbId))?g[0]:N)&&(W.useLabel||d.useLabel))?"<label>":"")+N+(null==re?"":re)+(V?"</label>":""),style:"text-indent:"+P+"px;"}}},renderCell:function(o,d){var g=this[_b(442)](o,d),p=this[_b(443)](o,d),v=this[_b(444)](o);return function(M,T){M._renderG=function(I){var P=I.rowData,N=P.pq_gtitle;return T&&N?g(I):N||P[_b(9)]?v(I):d.titleIndx==I.dataIndx?p(I):void 0}}},renderSummary:function(o){var d=this.that,g=o.groupModel.dataIndx;return function(p){var v=p.rowData,M=p.column,T=M.summary;if(T&&(v=T[g[v.pq_level]]||T.type))return"function"==typeof(T=o[_b(445)][v])?T.call(d,p):("number"!=typeof(v=null==(v=p.formatVal)&&null==(v=p.cellData)?"":v)||M.format||parseInt(v)===v||(v=v.toFixed(2)),T?T.replace("{0}",v):v)}},updateformatVal:function(o,d,g){(g=this.that.columns[o=o.dataIndx[g]])&&g.format&&g!=d.column&&(d.formatVal=pq.format(g,d.cellData))},renderTitle:function(W,d){var g,p,v=this,M=v.that,T=W.rtl,I=d.checkbox,P=["pq-group-title-cell"],N=d.titleIndx,V=d.indent,J=(W=W.bootstrap).on,re=(W=(J?W.groupModel:d).icon,J?["glyphicon "+W[0],"glyphicon "+W[1]]:["ui-icon "+W[0],"ui-icon "+W[1]]);return function(ce){var ie,ae,we,Me=ce.rowData,Pe=ce.column,Ve=Pe.useLabel;if(null!=ce.cellData)return ie=Me.pq_close,ae=Me.pq_level,we=d.title,v[_b(446)](d,ce,ae),we=null==(we="function"==typeof(we=Pe[_b(306)]||we[ae]||d[_b(447)])?we.call(M,ce):we.replace("{0}",ce.formatVal||ce.cellData).replace("{1}",Me.pq_items))?ce.formatVal||ce.cellData:we,Pe="pq-group-icon "+re[ie?1:0],ce.Export?we:(I&&N&&v.isCascade(d)&&(g=v.renderCB(I,Me,d.cbId))&&(p=g[0],g[1]&&P.push(g[1])),{text:[(Ve=p&&(null!=Ve?Ve:d.useLabel))?"<label>":"","<span class='",Pe,"'></span>",p,we,Ve?"</label>":""].join(""),cls:P.join(" "),style:"text-align:"+(T?"right":"left")+";text-indent:"+V*ae+"px;"})}},triggerChange:function(){this.that._trigger("groupChange")},removeGroup:function(o){var d=this;d.option({dataIndx:d.that.options.groupModel.dataIndx.filter(function(g){return g!=o})},"","",function(){d[_b(418)]()})},refreshColumns:function(){for(var o,d,g,p=this.that,v=p.options,M=v.groupModel,T=M.on,I=M.fixCols,P=this.renderCell(v,M),N=p.columns,V=M.dataIndx,J=V.length,W=p.colModel,re=W.length;re--;)(o=W[re])._renderG&&delete o._renderG,o._nodrag&&(delete o._nodrag,delete o._nodrop),T&&(d=o.summary)&&d.type&&P(o);if(v.editor=T?this[_b(448)](v,M):void 0,T)if(M.titleIndx)P(o=N[M.titleIndx],!0);else{for(re=J-1;0<=re;re--)P(o=N[V[re]],!0);if(I&&!M[_b(12)])for(re=0;re<J;re++)(o=W[g=p.getColIndx({dataIndx:V[re]})])._nodrag=o._nodrop=!0,g!=re&&(p[_b(247)].moveColumn(g,re,!0),p.refreshCM(null,{group:!0}))}},saveState:function(){var o=this.nodeClose=this.nodeClose||{};this.fillState(o)},setSumCols:function(o){var d=[],g=[];return o=pq.objectify(o),this.that.colModel.forEach(function(p){var v=p.summary;v&&v.type&&(o[v=p.dataIndx]||(d.push(p),g.push(v)))}),this._sumCols=d,this._sumDIs=g,[d,g]},setOption:function(){this._init&&(this[_b(440)](),this[_b(23)].length=0,this.initmerge())},softRefresh:function(){var o=this.that;this.pdata=null,o.pdata.forEach(function(d){delete d.pq_hidden}),this[_b(441)](),this.initmerge(),o.refresh({header:!1})},toggleLevel:function(p,d){var g=(v=this.that.options.groupModel).collapsed,v=(p=K.inArray(p,v.dataIndx),pq.isCtrl(d)?"All":"");this[(g[p]?"expand":"collapse")+v](p)},trigger:function(P){var d,g,p,W=P.evt,v=P.rd,M=P.level,T=P.all,I=P.close,N=(J=(P=this.that).options.groupModel).dataIndx,V=J.collapsed,J=y[_b(414)](W,P);if(W={},v){if(g=v[N[d=v.pq_level]],J(W={level:d,close:I=!v.pq_close,group:g}))return!1;v.pq_close=I}else if(T){if(J(W={all:!0,close:I,level:M}))return!1;for(p=M;p<N.length;p++)V[p]=I}else if(null!=M){if(J(W={level:M,close:I}))return!1;V[M]=I}return P._trigger("group",null,W)},toggleRow:function(o,d){!1!==this.trigger({evt:d,rd:o=this.that.pdata[o]})&&this[_b(342)]()}}),U.pqGrid.prototype.Group=function(o){var d=this.iGroup;if(null==o)return d;d.expandTo(o.indx)}}(jQuery),function(K){var U=K.paramquery,D=U.pqGrid.prototype,y=D.options,o=(K(document).on("pqGrid:bootup",function(d,g){(g=g.instance).iDrag=new o(g)}),U.cDrag=function(d){var g=this,p=d.options,v=g.rtl=p.rtl,M=p.dragModel;M.on&&(g.that=d,p[_b(449)]=p[_b(449)]||-1,g.model=M,g.ns=".pq-drag",M.tmplDragN=g.rtlfy(v,M.tmplDragN),M.tmplDrag=g.rtlfy(v,M.tmplDrag),d.on("CMInit",g.onCMInit.bind(g)).on("create",g.onCreate.bind(g)))});D.Drag=function(){return this.iDrag},y.dragModel={afterDrop:function(){},beforeDrop:function(d,g){var p=this.Drag(),v=p.getUI().nodes,M=this,T=this.Tree(),I=this.Group();T.isOn()?M=T:I.isOn()&&(M=I),p.clean(),M[_b(364)](v)},diDrag:-1,dragNodes:function(d){return[d]},contentHelper:function(d,v){var p=v[0];return v=v.length,d.map(function(M){return p[M]}).join(", ")+(1<v?" ( "+v+" )":"")},clsHandle:"pq-drag-handle",clsDnD:"pq-dnd",clsNode:"pq-dnd-drag",iconAccept:_a(141),iconReject:_a(142),tmplDragN:_a(143),tmplDrag:_a(144),cssHelper:{opacity:.7,position:"absolute",height:25,width:200,overflow:"hidden",background:"#fff",border:"1px solid",boxShadow:"4px 4px 2px #aaaaaa",zIndex:1001},tmplHelper:_a(145)},o.prototype={addIcon:function(d){this.$helper.find(".pq-icon").attr("class","").addClass("pq-icon "+d)},addAcceptIcon:function(){this.addIcon(this.model.iconAccept)},addRejectIcon:function(){this.addIcon(this.model.iconReject)},getHelper:function(P){var g=this.that,p=this.model,v=p.clsNode,T=K(P.target).closest(_a(37)),M=(T=this.cellObj=g[_b(34)]({$td:T}),p.diHelper||[p.diDrag]),I=(T=T.nodes=p.dragNodes.call(g,I=T.rowData,P),p[_b(450)].call(g,M,T));return(P=this.$helper=K(p.tmplHelper)).find("span:eq(1)").html(I),T.forEach(function(N){g.addClass({rowData:N,cls:v})}),this[_b(451)](),P.addClass(_a(146)).css(p.cssHelper).data("Drag",this),P[0]},getUI:function(){return this.cellObj},grid:function(){return this.that},isSingle:function(){return 1==this.getData().length},onCMInit:function(){var d=this.that,g=this.model,p=g[_b(452)],v=d.columns[g.diDrag],M=v?g.tmplDrag:g.tmplDragN;(v||d.options.numberCell).postRender=function(T){p&&!p.call(d,T)||K(T.cell).prepend(M)}},onCreate:function(){var d=this,g=d.model,p={top:20},v=-1==g.diDrag;d.that.on(!0,"cellMouseDown",d[_b(372)].bind(d)),p[d.rtl?"right":"left"]=2,d.ele=d.that.$cont.children(":first").addClass(g.clsDnD+(v?" pq-drag-number":"")).draggable(K.extend({cursorAt:p,containment:"document",appendTo:"body"},g.options,{handle:"."+g.clsHandle,helper:d.getHelper.bind(d),revert:d.revert.bind(d)}))},onDrop:function(d,g,p){this.model[d].call(this.that,g,p)},clean:function(){var d=this;d.getUI().nodes.forEach(function(g){d.that[_b(72)]({rowData:g,cls:d.model.clsNode})})},revert:function(d){this.clean(),d||this.$helper.hide("explode",function(){K(this).remove()})},rtlfy:function(d,g){var p={left:"right",right:"left"};return d?g.replace(/left|right/g,function(v){return p[v]}):g},onCellMouseDown:function(d){var g=this.model;K(d[_b(32)].target).closest("."+g.clsHandle).length&&d[_b(29)]()},over:function(d,g){this[_b(453)]()},out:function(d,g){this[_b(451)]()}}}(jQuery),function(K){var U=K.paramquery,D=U.pqGrid.prototype,y=D.options,o=(K(document).on("pqGrid:bootup",function(d,g){(g=g.instance).iDrop=new o(g)}),D.Drop=function(){return this.iDrop},y.dropModel={accept:".pq-dnd",clsParent:"pq-dnd-parent",drop:function(d,re){function p(ce,ie){var ae,we,Me;(J||ie)&&(ie=P.iDrop.parent,(Me=(we=ce[_b(454)](ie)).length)&&(ae=J?J==ie?W?null:0:we.indexOf(J)+(W?0:1):Me),M?ce.moveNodes(T,ie,ae):ce.addNodes(T,ie,ae))}var v,M,T,I=re.helper.data("Drag"),P=this,N=P.Group(),V=P.Tree(),J=re.rowData,W=re.ratioY()<=.5;re=null==(re=re.rowIndx)?re:re+(W?0:1),I&&(v=I.getUI(),M=I.grid()==P,T=v.nodes,N.isOn()?p(N):V.isOn()?p(V,!0):M?P.moveNodes(T,re):P.addNodes(T,re))},getParent:function(d,g){var p,v,M=g.rowData,T=this.options,I=T.dropModel.divider,P=this.Group(),N=P.isOn(),V=this.Tree(),J=V.isOn();if(M)return J?v=I?(p=(J=this.widget()).offset().left,v=(g=g.helper).offset().left,(T.rtl?p+J.width()-v-g.width()>I:I<v-p)?M:V.getParent(M)):V.getParent(M):N&&(v=P.getParent(M)),v}},U.cDrop=function(d){var g=d.options;(this.model=g.dropModel).on&&(this.that=d,this.rtl=g.rtl,this.ns=".pq-drop",d.on("create",this.onCreate.bind(this)))});o.prototype={addUI:function(d,g,p){var v=this;d.$cell=p,d.ratioY=function(){return v.ratioY(g,p)},K.extend(d,v.that[_b(34)]({$td:p}))},callFn:function(d,g,p){if(d=this.model[d])return d.call(this.that,g,p)},feedback:function(d,g){var p,v,M;g.length&&(p=(M=this.getCellY(g))[0],v=this.that.$cont,d=this.ratioY(d,g),g=v.offset().left,M=M[1],this.$feedback=this.$feedback||this.newF(),this.$feedback.css({top:d<=.5?p-1:M-1,left:g,width:v[0][_b(63)],zIndex:1e4}),v.css("cursor","copy"))},getCell:function(d){return d.closest(_a(37))},getCellY:function(d){var g=d.offset().top;return[g,g+d[0][_b(41)]]},getDrag:function(d){return d.helper.data("Drag")},isOn:function(){return this.model.on},isOver:function(){},newF:function(){return K(_a(147)).appendTo(document.body)},onCreate:function(){this.that.$cont.droppable(K.extend({tolerance:"pointer"},this.model.options,{accept:this.model.accept,over:this.onOver.bind(this),out:this.onOut.bind(this),drop:this.onDrop.bind(this)}))},onOver:function(d,g){var p=this,v=p.model.divider,M=p.Drag=p.getDrag(g);g.draggable.on("drag.pq",p.onDrag.bind(p)),v&&(p.$left=K(_a(148)+(p.rtl?"right:":"left:")+v+_a(149)).appendTo(p.that.$cont)),M&&M.over(d,g),p.isOver=function(){return!0},p.callFn("over",d,g)},onOut:function(d,g){g.draggable.off("drag.pq"),this[_b(455)]();var p=this.getDrag(g),v=this.$left;v&&v.remove(),p&&p.out(d,g),this.isOver=function(){},this.callFn("out",d,g)},setParent:function(d){var g=this.that,p=this.model.clsParent,v=this.parent;v!=d&&(v&&g[_b(72)]({rowData:v,cls:p}),d&&g.addClass({rowData:d,cls:p})),this.parent=d},setDeny:function(d,g,p){var v=this.Drag;this.denyDrop=!1===this.callFn("isDroppable",d,g),this.denyDrop?(v&&v.out(),this[_b(455)]()):(v&&v.over(),this.feedback(d,p),this.setParent(this.callFn("getParent",d,g)))},onDrag:function(d,g){var p=pq[_b(456)](d),v=this.getCell(p);(v.length||this.that.$cont[0].contains(p[0]))&&(this.addUI(g,d,v),this.setDeny(d,g,v))},onDropX:function(d,g){function p(I){if(T&&T.grid()!=v)T.onDrop(I,d,g);else try{M.draggable("instance").options[I].call(M[0],d,g)}catch(P){}}var v=this.that,M=g.draggable,T=g.helper.data("Drag");p("beforeDrop"),this.callFn("drop",d,g),this.setParent(),p("afterDrop")},onDrop:function(d,g){var p,v=pq[_b(456)](d);this.onOut(d,g),this.denyDrop||((p=this.getCell(v)).length||this.that.$cont[0].contains(v[0]))&&(this.addUI(g,d,p),this.onDropX(d,g))},onMouseout:function(){this[_b(455)]()},onMouseup:function(){this[_b(455)](),K(document).off(this.ns),this.that.$cont.off(this.ns)},ratioY:function(d,g){if(g.length)return(d.pageY-(g=(d=this.getCellY(g))[0]))/(d[1]-g)},removeFeedback:function(){var d=this;d.$feedback&&(d.$feedback.remove(),d.$feedback=null),d.that.$cont.css("cursor",""),requestAnimationFrame(function(){d.setParent()})}}}(jQuery),function(K){var U=K.paramquery,D=(U.pqGrid.defaults[_b(457)]={preInit:function(y){if(pq.isCtrl(y))return!1},init:function(y,o){var d,g;o.$td&&(d={r1:o.rowIndx,c1:o.colIndx,rc:1,cc:1},-1==(g=this.Selection()).indexOf(d)&&(g.removeAll(),this.Range(d).select()),this.focus(o))}},K(document).on("pqGrid:bootup",function(y,o){(o=o.instance).iContext=new D(o)}),U.cContext=function(y){var o=y.options;this.model=o[_b(457)],this.that=y,this.ns=".pq-cmenu",this.rtl=o.rtl,y.on("context",this.onContext.bind(this)).on("destroy",this.removeMenu.bind(this))});D.prototype={createMenu:function(y){y=y.filter(function(p){return null!=p});var o,d=this,g="";return y.forEach(function(p,v){g+=d[_b(458)](p,v)}),(o=K("<div dir='"+(d.rtl?"rtl":"ltr")+_a(150)+g+"</table></div>").appendTo(document.body)).find(".pq-cmenu-item").each(function(p,v){K(v).data("item",y[p])}),o.on("mouseover",d[_b(459)].bind(d)).on("remove",d.onRemove(d)),o},get$Item:function(y){return K(y.target).closest(".pq-cmenu-item")},getItem:function(y){return this.get$Item(y).data("item")},getItemHtml:function(y,o){var d,g;return"separator"==y?"<tr class='pq-cmenu-item'><td colspan=4 class='pq-bg-3' style='height:1px;padding:0;'></td></td>":(d=y.style,g=y.tooltip,_a(151)+(y.disabled?"pq_disabled":"")+" "+(y.cls||"")+"' indx="+o+"><td><span class='"+(y.icon||"")+"' /></td><td "+(d?'style="'+d+'"':"")+" "+(g?'title="'+g+'"':"")+">"+y.name+"</td><td>"+(y.shortcut||"")+_a(152)+(y.subItems?_a(153)+(this.rtl?"w":"e"):"")+"' /></td></tr>")},onContext:function(y,o){if(this.model.on)return this.showMenu(y,o)},onRemove:function(y){return function(){K(this).find(".pq-cmenu-item").each(y[_b(460)])}},onMouseDown:function(y){this.getItem(y)||this.removeMenu()},onclickDoc:function(y){var o,d=this.getItem(y);d&&!d.disabled&&(o=d.action)&&!1!==o.call(this.that,y,this.ui,d)&&this.removeMenu()},onMouseOver:function(d){var o=this.rtl,g=this.getItem(d);d=this.get$Item(d),g=(g||{}).subItems,d.siblings().each(this[_b(460)]),g&&g.length&&!d[0].subMenu&&((g=this.createMenu(g)).position({my:o?"right top":"left top",at:o?"left top":"right top",of:d,collision:"flipfit"}),d[0].subMenu=g)},removeMenu:function(){this.$menu&&(this.$menu.remove(),delete this.$menu,K(document.body).off(this.ns))},removeSubMenu:function(y,o){var d="subMenu";o[d]&&(o[d].remove(),delete o[d])},showMenu:function(y,o){var d=this,g=d.rtl,p=d.model,v=d.ns,M=d.that,T=d.$menu,I="function"==typeof(I=p[(I=o.type)+"Items"]||(I?p.items:p.miscItems))?I.call(M,y,o):I;if(T&&d.removeMenu(),I&&I.length&&!1!==p.preInit.call(M,y,o))return p.init.call(M,y,o),d.ui=o,(T=d.$menu=d.createMenu(I)).position({my:(g?"right":"left")+" top",of:y,collision:"fit"}),K(document.body).on("click"+v,d.onclickDoc.bind(d)).on("mousedown"+v+" touchstart"+v,d[_b(461)].bind(d)),!1}}}(jQuery),function(K){K(document).on("pqGrid:bootup",function(d,g){(g=g.instance).iAnim=new D(g)});var U=K.paramquery,D=U.cAnim=function(d){var g=this.model=d.options.animModel;this.grid=d,this.nodes=[],g.on&&d.on(g.events,this.onBefore.bind(this))},y=U.pqGrid.prototype,o=y.options;y.Anim=function(){return this.iAnim},o.animModel={duration:290,events:_a(154),eventsH:_a(155)},U.mixAnim={cleanUp:function(){(this.data||[]).forEach(function(d){d.pq_top=d.pq_hideOld=void 0}),this.data=this.render=null},stop:function(){this.nodes.forEach(function(d){d.stop()}),this.nodes=[]}},D.prototype=K.extend({isActive:function(){return this._active},onBefore:function(d,g){if(!d[_b(33)]()&&!this.data){var p,v=this,M=(d=v.grid).iRenderB,T=v.data=M.data,I=v.render=[];try{v.htTbl=M.dims.htTbl,M.eachV(function(N,V){p=M.get$Row(V),N.pq_render=1,I.push([N,p.clone(),p.map(function(J,W){return W.parentNode})])}),T.forEach(function(N,V){N.pq_top=M.getTop(V),N.pq_hideOld=N.pq_hidden}),d.one("refresh",v.oneRefresh.bind(v)),setTimeout(function(){v.cleanUp()})}catch(N){v.data=null}}},oneRefresh:function(){var d,g,p,v,M,T,I;this.data&&(g=(d=this).grid.iRenderB,p=d.model.duration,v=K([g.$tbl_left[0],g.$tbl_right[0]]),M=d.htTbl,T=g.dims.htTbl,d.stop(),d._active=!0,T<M&&v.css("height",M),setTimeout(function(){v.css("height",g.dims.htTbl),d._active=!1},p),g.eachV(function(P,N){delete P.pq_render;var V,J=g.getTop(N),W=P.pq_top;W==J&&!P.pq_hideOld||(I=g.get$Row(N),N=null==W||P.pq_hideOld?(V={opacity:0},{opacity:1}):(V={top:W},{top:J}),I.css(V).animate(N,p),d.nodes.push(I))}),d.render.forEach(d.removeRows.bind(d)),d.cleanUp())},removeRows:function(d){var g,p=d[0],v=p.pq_ri,M=this.model.duration,T={opacity:1,top:p.pq_top};if(p.pq_render){if(delete p.pq_render,(g=d[1].each(function(I,P){K(P).removeAttr("id").appendTo(d[2][I]).children().removeAttr("id")})).css(T),null==v||p.pq_hidden)T={opacity:0};else try{T={top:this.grid.iRenderB.getTop(v)}}catch(I){T={opacity:0}}g.animate(T,M,function(){this.parentNode&&this.parentNode[_b(121)](this)}),this.nodes.push(g)}}},U.mixAnim)}(jQuery),function(K){K(document).on("pqGrid:bootup",function(y,o){(o=o.instance).iAnimH=new D(o)});var U=K.paramquery,D=U.cAnimH=function(y){var o=y.options,d=this.model=o.animModel;this.grid=y,this.rtl=o.rtl?"right":"left",this.nodes=[],d.on&&y.on(d.eventsH,this[_b(462)].bind(this))};U.pqGrid.prototype.AnimH=function(){return this.iAnimH},D.prototype=K.extend({get$Col:function(){var y=this.grid,o=y.iRenderB,d=y[_b(115)],g=y.iRenderSum,p=o[_b(463)](),v=d[_b(463)](),M=g[_b(463)]();return function(T){return o.get$Col(T,p).add(d.get$Col(T,v)).add(g.get$Col(T,M))}},onBeforeCol:function(y){if(!y[_b(33)]()&&!this.data){var o,d=this.data=(y=this.grid)[_b(176)](),g=this.get$Col(),p=y.iRenderB,v=this.render=[];try{d.forEach(function(T,I){T.pq_hideOld=T.hidden,T.pq_top=p.getLeft(I)})}catch(T){return void this.cleanUp()}p.eachH(function(T,I){o=g(I),T.pq_render=1,v.push([T,o.clone(),o.map(function(P,N){return N.parentNode.id})])}),y.one("softRefresh refresh",this[_b(464)].bind(this))}},oneRefreshCol:function(){var y,o,d,g,p;this.data&&(o=(y=this).grid.iRenderB,d=y.model.duration,g=y.get$Col(),y.stop(),o.eachH(function(v,M){delete v.pq_render;var T=o.getLeft(M),I=v.pq_top,P=y.rtl,N={opacity:0},V={opacity:1},J={};I==T&&!v.pq_hideOld||(p=g(M),null==I?p.css(N).animate(V,d):v.pq_hideOld?(N[P]=I,V[P]=T,p.css(N).animate(V,d)):(J[P]=T,p.css(P,I).animate(J,d)),y.nodes.push(p))}),y.render.forEach(y.removeCols.bind(y)),y.cleanUp())},removeCols:function(y){var o,d=y[0],g=this.model.duration,p=(v=this.grid).iRenderB,v=v.colIndxs[d.dataIndx];d.pq_render&&(delete d.pq_render,o=y[1].each(function(M,T){K(T).removeAttr("id").appendTo(document[_b(465)](y[2][M]))}),d=null==v||d.hidden?(o.css("opacity",1),{opacity:0}):{left:p.getLeft(v)},o.animate(d,g,function(){this.parentNode&&this.parentNode[_b(121)](this)}),this.nodes.push(o))}},U.mixAnim)}(jQuery),function(K){var U=K.paramquery,D=U.pqGrid.defaults,y=(K(document).on("pqGrid:bootup",function(o,d){(d=d.instance)[_b(466)]=new y(d)}),D.fillHandle="all",D.autofill=!0,U[_b(467)]=function(o){var d=this;d.that=o,d.rtl=o.options.rtl,o.on("selectChange",d[_b(468)](d)).on("selectEnd",d[_b(469)](d)).on("assignTblDims",d.onRefresh(d)).on("keyDown",d.onKeyDown.bind(d))});y.prototype={getLT:function(o,d,g,p){return Math.min((o-=d/2)+d,g["offset"+p])-d},create:function(){var o,d,g,p=this.that;this.locked||(this.remove(),1===(g=p.Selection().address()).length&&(d=(g=g[0]).r2,g=g.c2,o="parentNode",d=p.iMerge[_b(137)](d,g,!0),(g=p.getCell(d)).length&&!1!==p._trigger("beforeFillHandle",null,d)&&(o=(g=g[0][o][o])[o],p=p.iRenderB[_b(310)](d[_b(75)],d.colIndx),d=this.getLT(p[2],10,g,"Width"),p={position:"absolute",top:this.getLT(p[3],10,g,"Height"),height:10,width:10,background:"#333",cursor:"crosshair",border:"2px solid #fff",zIndex:1},g=K(_a(156)).appendTo(o),p[this.rtl?"right":"left"]=d,g.css(p),this.$wrap=g,this[_b(265)](),this[_b(470)]())))},onSelectChange:function(o){return function(){o.remove()}},onSelectEnd:function(o){return function(){this.options.fillHandle&&o.create()}},onRefresh:function(o){var d;return function(){this.options.fillHandle?(clearTimeout(d),d=setTimeout(function(){o.that.element&&o.create()},50)):o.remove()}},remove:function(){var o=this.$wrap;o&&o.remove()},setDoubleClickable:function(){var o=this.$wrap;o&&o.on("dblclick",this.onDblClick(this.that,this))},setDraggable:function(){var o=this.$wrap;o&&o.draggable({helper:function(){return _a(157)},appendTo:this.that.$cont,start:this.onStart.bind(this),drag:this.onDrag.bind(this),stop:this.onStop.bind(this)})},patternDate:function(o){var d=this;return function(g){var p=new Date(o);return p.setDate(p.getDate()+(g-1)),d.formatDate(p)}},formatDate:function(o){return o.getMonth()+1+"/"+o.getDate()+"/"+o[_b(471)]()},patternDate2:function(o,v){var g,p=new Date(o),M=(v=new Date(v),this),T=v.getDate()-p.getDate(),I=v.getMonth()-p.getMonth(),P=v[_b(471)]()-p[_b(471)]();return!I&&!P||!T&&!I||!P&&!T?function(N){var V=new Date(o);return T?V.setDate(V.getDate()+T*(N-1)):I?V.setMonth(V.getMonth()+I*(N-1)):V[_b(472)](V[_b(471)]()+P*(N-1)),M.formatDate(V)}:(p=Date.parse(p),g=Date.parse(v)-p,function(N){return N=new Date(p+g*(N-1)),M.formatDate(N)})},getDT:function(o){for(var d,g,p,v=o.length,M=0,T=pq.valid;M<v;M++){if(T.isFloat(d=o[M])?p="number":T.isDate(d)&&(p="date"),g&&g!=p)return"string";g=p}return p},pattern:function(o){if("string"==(M=this.getDT(o))||!M)return!1;var d,g,p,M,v=o.length;return(M="date"===M)||(o=o.map(function(T){return+T})),2===v?M?this[_b(473)](o[0],o[1]):(g=o[0]-(d=o[1]-o[0]),function(T){return d*T+g}):3===v&&(p=o[0]-(d=(o[2]-2*o[1]+o[0])/2)-(g=o[1]-o[0]-3*d),function(T){return d*T*T+g*T+p})},autofillVal:function(ce,d,g,p){var v,M,T,I,P,N=this.that,V=ce.r1,J=ce.c1,W=ce.r2,re=ce.c2,ie=(ce=d.r1,d.c1),ae=d.r2,we=d.c2,Me=[];if(p){for((I={r1:V,r2:W}).c1=ie<J?ie:re+1,I.c2=ie<J?J-1:we,P=ie-J,M=ie;M<=we;M++)if(P++,M<J||re<M)for(v=0,T=V;T<=W;T++)Me.push(g[v](P,M)),v++}else for((I={c1:J,c2:re}).r1=ce<V?ce:W+1,I.r2=ce<V?V-1:ae,P=ce-V,M=ce;M<=ae;M++)if(P++,M<V||W<M)for(v=0,T=J;T<=re;T++)Me.push(g[v](P,M)),v++;return N.Range(I).value(Me),N.focus(),!0},autofill:function(o,d){var g,p,v,M,T,I,P,N,V=this.that,J=V.colModel,W=V.get_p_data(),re=[],ce=o.r1,ie=o.c1,ae=o.r2,we=o.c2,Me=d.c1!=ie||d.c2!=we;if(Me){for(T=ce;T<=ae;T++){if(V._trigger("autofillSeries",null,P={sel:{r:T,c:ie},x:!0}),!(N=P.series))return;re.push(N)}return this[_b(474)](o,d,re,Me)}for(I=ie;I<=we;I++){for(p=(g=J[I]).dataType,M=g.dataIndx,v=[],T=ce;T<=ae;T++)v.push(W[T][M]);if(V._trigger("autofillSeries",null,P={cells:v,sel:{r1:ce,c:I,r2:ae,r:ce}}),!(N=P.series||this.pattern(v,p)))return;re.push(N)}return this[_b(474)](o,d,re)},onKeyDown:function(o){var d,g;!this.oldAF&&pq.isCtrl(o)&&(g=(d=this).that.options,d.oldAF=g.autofill,g.autofill=!1,K(document.body).one("keyup",function(){g.autofill=d.oldAF,delete d.oldAF}))},onStop:function(){var o=this.that,d=o.options.autofill,g=this.sel,p=o.Selection().address()[0];g.r1==p.r1&&g.c1==p.c1&&g.r2==p.r2&&g.c2==p.c2||d&&this.autofill(g,p)||(o.Range(g).copy({dest:p}),o.focus()),this.locked=!1},onStart:function(){this.locked=!0,this.sel=this.that.Selection().address()[0]},onDrag:function(W){var d,g,p,v,M,T,I=this.that,P="all"==(V=I.options.fillHandle),N=P||"horizontal"==V,V=P||"vertical"==V,J=W.clientX-10;W=W.clientY,J=document[_b(38)](J,W),(W=K(J).closest(".pq-grid-cell")).length&&(J=I[_b(34)]({$td:W}),d=(W=this.sel).r1,v={r1:d,c1:g=W.c1,r2:p=W.r2,c2:W=W.c2},M=function(re,ce){v[re]=ce,I.Range(v).select()},T=J.rowIndx,J=J.colIndx,P&&T<=p&&d<=T||N&&!V?W<J?M("c2",J):J<g&&M("c1",J):V&&(p<T?M("r2",T):T<d&&M("r1",T)))},onDblClick:function(o,d){return function(){var g=o.options;if("all"==(p=g.fillHandle)||"vertical"==p){for(var v,p,M=(p=o.Selection().address()[0]).c2,T=p.r2+1,I=g.dataModel.data,P=o[_b(176)]()[M].dataIndx;v=I[T];){if(null!=v[P]&&""!==v[P]){T--;break}T++}d.onStart(),o.Range({r1:p.r1,c1:p.c1,r2:T,c2:M}).select(),d.onStop()}}}}}(jQuery),function(K){K(document).on("pqGrid:bootup",function(D,y){new U(y.instance)});var U=K.paramquery.cScroll=function(D){this.that=D,this.ns=".pqgrid-csroll",this.rtl=D.options.rtl,D.on("create",this.onCreate.bind(this))};U.prototype={onCreate:function(){var D=this.that,y=D.iDrop&&D.iDrop.isOn();K(y?document:D.$cont).on("mousedown",this[_b(461)].bind(this))},onMouseDown:function(o){var y=this.that,d=(o=K(o.target),(this.$draggable=o.closest(".ui-draggable")).length),g=this.ns;(d||o.closest(y.$cont).length)&&(y=o.closest(".pq-fill-handle").length,K(document).on("mousemove"+g,this[d&&!y?"onMouseMove":"process"].bind(this)).on("mouseup"+g,this.onMouseUp.bind(this)))},onMouseMove:function(D){var y=this.that;(this.capture||pq[_b(456)](D).closest(y.$cont).length&&y.iDrop.isOver())&&(this.capture=!0,this.process(D))},onMouseUp:function(){K(document).off(this.ns),this.capture=!1},process:function(v){var o,d=(o=this.that.$cont)[0][_b(41)],g=o[0][_b(40)],y=(o=o.offset()).top,p=v.pageY,M=p-(d=y+d),T=(v=v.pageX)-(g=(o=o.left)+g),I=y-p,P=o-v;o<v&&v<g&&(0<M||0<I)?0<M?this.scrollV(M,!0):0<I&&this.scrollV(I):y<p&&p<d&&(0<T?this.scrollH(T,!0):0<P&&this.scrollH(P))},scrollH:function(D,y){this.scroll(D,this.rtl?!y:y,!0)},scrollV:function(D,y){this.scroll(D,y)},scroll:function(D,y,o){var d=this.that.iRenderB,p=(g=d[_b(475)]()[0])[o?"scrollWidth":"scrollHeight"],g=pq[o?"scrollLeft":"scrollTop"](g);D=Math.pow(D,p<1e3?1:1+(p-1e3)/p),d[o?"scrollX":"scrollY"](p=g+(y?D:-D))}}}(jQuery),function(){var K=jQuery.paramquery;K.cFormula=function(U){var D=this;D.that=U,D.oldF=[],U.one("ready",function(){U.on("CMInit",D.onCMInit.bind(D))}).on("beforePivotSummary",D[_b(476)].bind(D)).on("dataAvailable",D.onDA.bind(D)).on(!0,"change",D.onChange.bind(D))},K.cFormula.prototype={onCMInit:function(){this[_b(477)](this.oldF,this.formulas())&&this[_b(476)]()},callRow:function(U,D,y){var o=this.that,d=0;if(U)for(;d<y;d++){var g=D[d],p=g[0];U[p.dataIndx]=g[1].call(o,U,p,g[2])}},onDA:function(){this[_b(476)]()},isFormulaChange:function(U,D){var y=!1,o=0,d=U.length;if(d==D.length){for(;o<d;o++)if(U[o][1]!=D[o][1]){y=!0;break}}else y=!0;return y},calcMainData:function(){var U=this[_b(478)](),D=this.that,y=U.length;if(y){for(var o=D.options.dataModel.data,d=o.length;d--;)this.callRow(o[d],U,y);D._trigger("formulaComputed")}},onChange:function(U,T){function y(I){d.callRow(I.rowData,p,v)}var o,d=this,g=d.that,p=d.formulas(),v=p.length,M=T.addList;T=T.updateList,v&&(M.forEach(y),T.forEach(y),1!=T.length||M.length||(o=T[0],p.forEach(function(I){g[_b(171)]({rowIndx:o.rowIndx,dataIndx:I[0].dataIndx})})))},formulas:function(){var U,D,y,o=this.that,d=[],g=o.colIndxs;return(o.options.formulas||[]).forEach(function(p){(U=o.getColumn({dataIndx:y=p[0]}))&&(D=p[1])&&d.push([U,D,g[y]])}),d},formulaSave:function(){var U=this.formulas();return this.oldF=U}}}(),function(K){var U=K.paramquery,D=(U.pqGrid.defaults.treeModel={cbId:"pq_tree_cb",source:"checkboxTree",childstr:"children",iconCollapse:[_a(133),"ui-icon-triangle-1-e"],iconFolder:["ui-icon-folder-open",_a(158)],iconFile:"ui-icon-document",id:"id",indent:18,parentId:"parentId",refreshOnChange:!0},U.pqGrid.prototype.Tree=function(){return this.iTree},K(document).on("pqGrid:bootup",function(y,o){(o=o.instance).iTree=new D(o)}),U.cTree=function(y){var o=this;o.Model=y.options.treeModel,o.that=y,o.fns={},o.init(),o.isTree=!0,o.cache={},o.chkRows=[],Object[_b(45)](o.Model,"nodeClose",{get:function(){return o.fillState({})},set:function(d){o.nodeClose=d}})});D.prototype=K.extend({},pq.mixin.ChkGrpTree,pq.mixin.GrpTree,{addNodes:function(y,o,d){var g,p,v,M,T,I=this,P=I.that,N=I.Model,V=(V=P.options.dataModel).data,J=I.parentId,W=I.childstr,re=I.id,ce={},ie=[],ae=0,we=I.cache,Me=[];if(y.forEach(function(Pe){M=Pe[J],T=T||we[M],I.eachChild(Pe,function(Ve,le){var st=Ve[re];we[st]||ce[st]||(ce[st]=Ve,le&&(Ve[J]=le[re]),ie.push(Ve))},o||we[M])}),ie.forEach(function(Pe){ce[M=Pe[J]]||we[M]||delete Pe[J]}),v=(p=(y=((o=o||T)||{})[W]||I.getRoots()||[]).length)&&0!=d?null==d||p<d?y[p-1]:y[d-1]:o,g=V.indexOf(v)+1,p=ie.length){for(;ae<p;ae++)Me.push({newRow:v=ie[ae],rowIndx:g++});P[_b(182)]({addList:Me,checkEditable:!1,source:"addNodes",history:N.historyAdd}),I[_b(17)]()}},updateId:function(y,o){var d=this.id,g=this.parentId,p=y[d],v=this.cache;v[o]||(v[y[d]=o]=y,delete v[p],(this[_b(454)](y)||[]).forEach(function(M){M[g]=o}))},collapseAll:function(y){this[y?"expandNodes":"collapseNodes"](this.that.options.dataModel.data)},collapseNodes:function(y,o,d){for(var g,p=0,v=this.that,M=y.length,T=[],I=!d;p<M;p++)this.isFolder(g=y[p])&&this[_b(479)](g)!==I&&T.push(g);if(T.length&&!(d={close:I,nodes:T})!==v._trigger("beforeTreeExpand",o,d)){for(M=T.length,p=0;p<M;p++)(g=T[p]).pq_close=I;v._trigger("treeExpand",o,d),this[_b(429)](!1),this[_b(17)]()}},deleteNodes:function(y){var o,g=this.that,p=this.Model,v=0,M={},T=this.id,I=[];if(y){for(o=y.length;v<o;v++)this.eachChild(y[v],function(P){var N=P[T];M[N]||(M[N]=1,I.push({rowData:P}))});g[_b(182)]({deleteList:I,source:"deleteNodes",history:p[_b(480)]}),this[_b(17)]()}},makeLeaf:function(y){y[this.childstr]=y.pq_close=y[_b(11)]=void 0},expandAll:function(){this[_b(481)](!0)},expandNodes:function(y,o){this[_b(482)](y,o,!0)},expandTo:function(y){for(var o=[];y.pq_close&&o.push(y),y=this.getParent(y););this[_b(483)](o)},exportCell:function(y,o){for(var d="",g=0;g<o;g++)d+="- ";return d+(null==y?"":y)},filter:function(y,o,d,g,p,v,M){function T(ie,ae){N=ae||N,M?ie.pq_hidden=ie.pq_filter=!ae:(ae?p:v).push(ie)}for(var I,P,N,V,J=this.childstr,W=this.Model[_b(484)],re=0,ce=y.length;re<ce;re++){if(P=!1,V=(I=y[re])[J]){if(W&&d.isMatchRow(I,o,g)){this.eachChild(I,function(ie){T(ie,!0)}),N=!0;continue}(P=this.filter(V,o,d,g,p,v,M))&&T(I,!0)}P||T(I,d.isMatchRow(I,o,g))}return N},getFormat:function(){for(var y,o,d=this.that.options.dataModel.data,g=0,p=d.length,v=this.parentId,M=this.childstr;g<p&&null==(y=d[g])[v];g++)if((o=y[M])&&o.length)return this.getParent(o[0])==y?"flat":"nested";return"flat"},getLevel:function(y){return y.pq_level},_groupById:function(y,o,d,g,p){for(var v=this.childstr,M=0,T=d.length;M<T;M++){var I=d[M],P=I[o];I.pq_level=p,y.push(I),(P=g[P])?(I[v]=P,this._groupById(y,o,P,g,p+1)):null==I.pq_close&&!I[v]||(I[v]=[])}},groupById:function(y){for(var o,d,g,p=this.id,v=this.parentId,M={},T=[],I=0,P=y.length;I<P;I++)(d=(d=M[o=null==(o=(g=y[I])[v])?"":o])?d:M[o]=[]).push(g);return this._groupById(T,p,M[""]||[],M,0),T},init:function(){var y=this,o=y.that,d=o.options,g=y.Model,p=g.cbId,v=y.dataIndx=g.dataIndx;y.cbId=p,y.prop="pq_tree_prop",y.id=g.id,y.parentId=g.parentId,y.childstr=g.childstr,y.onCMInit(),v?y._init||(y.on("CMInit",y.onCMInit.bind(y)).on("dataAvailable",y[_b(485)].bind(y)).on("dataReadyAfter",y[_b(486)].bind(y)).on("beforeCellKeyDown",y[_b(487)].bind(y)).on("customSort",y[_b(438)].bind(y)).on("customFilter",y[_b(488)].bind(y)).on("clearFilter",y[_b(489)].bind(y)).on("change",y.onChange(y,o,g)).on("cellClick",y[_b(371)].bind(y)).on("refresh refreshRow",y.onRefresh(y,g)).on("valChange",y.onCheckbox(y,g)).on("refreshHeader",y[_b(302)].bind(y)).on("beforeCheck",y[_b(305)].bind(y)),y[_b(429)](!0),y._init=!0):y._init&&(y.off(),y._init=!1),y._init&&(d.groupModel.on=g.summary)},initData:function(){var y=this.that.options.dataModel;y.data=this["flat"==this.getFormat()?"groupById":"flatten"](y.data),this.buildCache()},isCollapsed:function(y){return!!y.pq_close},isOn:function(){return null!=this.Model.dataIndx},moveNodes:function(y,o,at,g){var p,v,M,T,I,P,N,V=this,J=arguments,W=V.that,re=at,ce=V.parentId,ie=V.id,ae=V.childstr,we=V.Model,Me=(Me=W.options).dataModel,Pe=V.getRoots(),Ve=!g,le=o?o[ae]=o[ae]||[]:Pe,st=le.length,We=V[_b(435)](y),Te=(at=null==at||st<=at?st:at,le);if(o&&(v=o[ie]),P=We.length){if(W._trigger("beforeMoveNode",null,{args:J}),Ve&&1<P)for(p=(M=V.getParent(N=We[0]))?M[ae]:Pe,T=p.indexOf(N),I=1;I<P;I++)if(p[I+T]!=We[I]){Ve=!1;break}for(I=0;I<P;I++)p=(M=V.getParent(N=We[I]))?M[ae]:Pe,T=p.indexOf(N),M==o?at=pq.moveItem(N,Te,T,at):(Te.splice(at++,0,N),p.splice(T,1)),we[_b(490)]&&M&&V.isEmpty(M)&&V.makeLeaf(M),N[ce]=v;we[_b(491)]&&Ve&&W.iHistory.push({callback:function(qe){var Bt=T;o==M&&re<Bt&&(Bt+=1),V.moveNodes(y,qe?o:M,qe?re:Bt,!0)}}),Me.data=V.flatten(Pe),W._trigger("moveNode",null,{args:J}),W[_b(17)]()}},off:function(){var y,o=this.fns,d=this.that;for(y in o)d.off(y,o[y]);this.fns={}},on:function(y,o){return this.fns[y]=o,this.that.on(y,o),this},onCellClick:function(y,o){o.dataIndx==this.dataIndx&&K(y[_b(32)].target).hasClass("pq-group-icon")&&(pq.isCtrl(y)?this[o.rowData.pq_close?"expandAll":"collapseAll"]():this.toggleNode(o.rowData,y))},onBeforeCellKeyDown:function(M,o){var d,g=this.that,p=o.rowData,v=o.dataIndx,T=(M=M.keyCode,K.ui.keyCode);if(v==this.dataIndx)return this.isFolder(p)&&(d=p.pq_close,M==T.ENTER&&!g.isEditable({rowIndx:p.pq_ri,dataIndx:v})||!d&&M==T.LEFT||d&&M==T.RIGHT)?(this.toggleNode(p),!1):M==T.SPACE&&(v=g.getCell(o).find(_a(159))).length?(v.click(),!1):void 0},hasSummary:function(){var y=this.Model;return y.summary||y[_b(18)]},onChange:function(y,o,d){return function(g,T){var v=T.source||"",M=T.addList.length,I=(T=T.deleteList).length;-1==v.indexOf("checkbox")&&("undo"!=v&&"redo"!=v||!M&&!I?y.hasSummary()&&d[_b(492)]&&!M&&!I?(y[_b(317)](!0),o.refresh()):"addNodes"!=v&&"deleteNodes"!=v||y[_b(493)]():y[_b(493)](),d[_b(490)]&&T.forEach(function(P){(P=y.getParent(P.rowData))&&y.isEmpty(P)&&y.makeLeaf(P)}))}},clearFolderCheckbox:function(y){var o=this,d=o.cbId;y.forEach(function(g){o.isFolder(g)&&delete g[d]})},onClearFilter:function(y,o){return this[_b(494)](o.data),o.data=this.groupById(o.data),!1},onCustomFilter:function(y,o){var g=this.that,d=this.groupById(o.data),p=(g=g[_b(159)],o.filters),v=[],M=[],T=o.mode;return this.filter(this.getRoots(d),p,g,T,v,M,o.hideRows),o.dataTmp=this.groupById(v),o.dataUF=M,this[_b(494)](o.dataTmp),!1},onDataAvailable:function(){this.initData()},refreshSummary:function(y){this.summaryT(),this.that.iRefresh.addRowIndx(),y&&this[_b(495)]()},onDataReadyAfter:function(){var y=this.that.options.dataModel,o=this.Model;!this.hasSummary()||o[_b(496)]&&o[_b(18)]&&y.dataUF.length||this[_b(317)](),this[_b(495)](),this.isCascade(o)&&this[_b(436)]()},option:function(y,o){var d=this.that,g=this.Model,p=g.dataIndx;K.extend(g,y),y=g.dataIndx,this[_b(14)](),this.init(),!p&&y&&this.initData(),!1!==o&&d[_b(17)]()},renderCell:function(y,o){return function(d){var g,p,v,M,T=d.rowData,I=y.that,ae=o.indent,P=d.column,N=P[_b(306)]||o.render,V=o[_b(497)],J=o.checkbox,W=y.isFolder(T),re=y._iconCls(T,W,o),ce=T.pq_level||0,we=ce*ae,ie=["pq-group-title-cell"];return ae=["text-indent:",W?we:+ae+we,"px;"],we=d.formatVal||d.cellData,N&&null!=(I=I.callFn(N,d))&&("string"!=typeof I?(I.iconCls&&(re=I.iconCls),null!=I.text&&(we=I.text),v=I.attr,ie.push(I.cls),ae.push(I.style)):we=I),d.Export?y.exportCell(we,ce):(J&&(N=y.renderCB(J,T,o.cbId))&&(M=N[0],N[1]&&ie.push(N[1])),W&&(g=_a(160)+(T.pq_close?V[1]:V[0])+"'></span>"),re&&(p=_a(161)+re+"'></span>"),I=M&&(P.useLabel||o.useLabel),{cls:ie.join(" "),attr:v,style:ae.join(""),text:[g,p,I?"<label>":"",M,we,I?"</label>":""].join("")})}},refreshViewFull:function(y){var o=this.that.options.dataModel;o.data=this.groupById(o.data),this.buildCache(),y&&this[_b(17)]()},_iconCls:function(y,o,d){if(d.icons)return o&&(o=d.iconFolder)?y.pq_close?o[1]:o[0]:y[_b(9)]?void 0:d.iconFile},setCellRender:function(){var y,o=this.that,d=this.Model,g=o.columns;d.summary&&o.iGroup[_b(440)](),(o=this.di_prev)&&((y=g[o])&&(y._render=null),this.di_prev=null),(o=d.dataIndx)&&((y=g[o])._render=this.renderCell(this,d),this.di_prev=o)},_showHideRows:function(y,o,d){for(var g,p,v,M,T=this.id,I=this.nodeClose,P=o||this.getRoots(),N=this.childstr,V=d||!1,J=P.length,W=0;W<J;W++)(p=P[W]).pq_filter||(p.pq_hidden=V),(M=p[N])&&(I&&null!=(g=I[v=p[T]])&&(delete I[v],p.pq_close=g),v=V||p.pq_close,this[_b(498)](y,M,v))},showHideRows:function(){var y,o,d,g=this.that,p=0,v=g.get_p_data(),M=this.Model.summary;if(this[_b(498)](v),M)for(o=(v=g.pdata).length;p<o;p++)(d=v[p])[_b(9)]&&(y=this.getParent(d))&&(d.pq_hidden=y.pq_hidden)},toggleNode:function(y,o){this[y.pq_close?"expandNodes":"collapseNodes"]([y],o)}})}(jQuery),function(){function K(y){y=(this.that=y).options,this.options=y,this.selection=[],this.hclass=" pq-state-select "+(y.bootstrap.on?"":"ui-state-highlight")}var U=jQuery.paramquery,D=U.pqGrid.prototype;U.cRows=K,D.SelectRow=function(){return this.iRows},K.prototype={_add:function(y,g){var d=this.that,v=y[_b(75)],p=(g=!g,y.rowData);return v=this.inViewRow(v),!p.pq_hidden&&v&&(v=d.getRow(y)).length&&(v[g?"addClass":"removeClass"](this.hclass),g||v.removeAttr("tabindex")),p[_b(2)]=g,y},_data:function(d){var o=this.that,g=(d=(d=d||{}).all,o.riOffset),p=(g=d?0:g,o.get_p_data());return[p,g,g+(d?p:o.pdata).length]},add:function(y){var o=y.addList=y.rows||[{rowIndx:y.rowIndx}];y.isFirst&&this.setFirst(o[0].rowIndx),this.update(y)},extend:function(v){v=v.rowIndx;var o,d,g,p,M=[],T=this.getFirst();if(null!=T&&null!=(p=this.isSelected({rowIndx:T}))){for(g=v<T?(d=T=[v,v=T][0],v-1):(d=T+1,v),o=d;o<=g;o++)M.push({rowIndx:o});this.update(p?{addList:M}:{deleteList:M})}},getFirst:function(){return this._firstR},getSelection:function(){for(var y,o=this.that.get_p_data(),d=0,g=o.length,p=[];d<g;d++)(y=o[d])&&y[_b(2)]&&p.push({rowIndx:d,rowData:y});return p},inViewCol:function(y){var o=(d=this.that).options,d=d.iRenderB;return y<o.freezeCols||y>=d.initH&&y<=d.finalH},inViewRow:function(y){var o=(d=this.that).options,d=d.iRenderB;return y<o.freezeRows||y>=d.initV&&y<=d.finalV},isSelected:function(y){return(y=y.rowData||this.that.getRowData(y))?!0===y[_b(2)]:null},isSelectedAll:function(y){for(var o,d=(y=this._data(y))[0],g=y[1],p=y[2];g<p;g++)if((o=d[g])&&!o[_b(2)])return!1;return!0},removeAll:function(y){this.selectAll(y,!0)},remove:function(y){var o=y.deleteList=y.rows||[{rowIndx:y.rowIndx}];y.isFirst&&this.setFirst(o[0].rowIndx),this.update(y)},replace:function(y){y.deleteList=this[_b(206)](),this.add(y)},selectAll:function(y,o){for(var d,g=[],p=this.that.riOffset,v=(y=this._data(y))[0],M=y[1],T=y[2];M<T;M++)(d=v[M])&&g.push({rowIndx:M,rowIndxPage:M-p,rowData:d});this.update(o?{deleteList:g}:{addList:g},!0)},setFirst:function(y){this._firstR=y},toRange:function(){for(var y,o,d=[],g=this.that,p=g.get_p_data(),v=0,M=p.length;v<M;v++)p[v][_b(2)]?null!=y?o=v:y=o=v:null!=y&&(d.push({r1:y,r2:o}),y=o=null);return null!=y&&d.push({r1:y,r2:o}),g.Range(d)},toggle:function(y){this[this.isSelected(y)?"remove":"add"](y)},toggleAll:function(y){this[this[_b(499)](y)?"removeAll":"selectAll"](y)},update:function(T,o){function d(I){return o?I:p[_b(216)](I)}var g=this,p=g.that,v={source:T.source},M=d(T.addList||[]);T=d(T.deleteList||[]),M=M.filter(function(I){return!1===g.isSelected(I)}),T=T.filter(g.isSelected.bind(g)),(M.length||T.length)&&(v.addList=M,v.deleteList=T,!1!==p._trigger("beforeRowSelect",null,v)&&(v.addList.forEach(function(I){g._add(I)}),v.deleteList.forEach(function(I){g._add(I,!0)}),p._trigger("rowSelect",null,v)))}}}(),function(K){var U=K.paramquery,D=(K(document).on("pqGrid:bootup",function(y,o){(o=o.instance).iImport=new D(o)}),U.pqGrid.prototype.importWb=function(y){return this.iImport.importWb(y)},U.cImport=function(y){this.that=y});D.prototype={fillRows:function(y,o,d){for(var g=y.length;g<o;g++)y.push(d?{}:[])},generateCols:function(y,o,P){var g,p,v=[],M=0,T=0,I=pq.excel.colWidth,N=[];for((P=P?P.cells:[]).forEach(function(V,J){N[J=V.indx||J]=V.value}),(o=o||[]).forEach(function(V,J){v[T=V.indx||J]=V}),y=Math.max(y,o.length,T+1);M<y;M++)this.copyStyle(g=v[M]||{},p={_title:N[M]||"",title:this._render,width:g.width||I,style:{},halign:"center"},p.style),g.hidden&&(p.hidden=!0),v[M]=p;return v},_render:function(y){return y.column._title||pq.toLetter(y.colIndx)},importS:function(y,o,d,g,p){var v,M,T,I,P,N,V,J,W,re,ce,ie,ae,we,Me=y.mergeCells,Pe=this,Ve=[],le={},We=0,at=y.rows||[],Te=y.frozenRows||0,qe=0,Bt=Pe.that.colModel,Ze=0,Zn=Bt&&Bt.length,jt=U.cFormulas.shiftRC();for(null!=p&&(V=at[p],at=at.slice(Ze=p+1),Te=0<(Te-=Ze)?Te:0),qe=0,v=at.length;qe<v;qe++)T=(M=at[qe]).indx||qe,J=(I={})[_b(129)]={},W=I[_b(244)]={},re=I[_b(213)]={},ce=I[_b(242)]={},ie=I.pq_rowprop={},Pe.copyStyle(M,ie,ce),T!=qe&&Pe.fillRows(Ve,T,!0),(M.cells||[]).forEach(function(_n,Dt){P=_n.indx||Dt,I[N=g&&Zn&&Bt[P]?Bt[P].dataIndx:P]=_n.value,ae=J[N]={},we=W[N]={},Pe.copyStyle(_n,ae,we),(ae=_n.comment)&&(re[N]={title:ae}),_n.format&&Pe.copyFormat(I,N,_n.format),(we=_n.formula)&&Pe[_b(500)](I,N,Ze?jt(we,0,-Ze):we),We<=P&&(We=P+1)}),0<=M.htFix&&(I.pq_ht=M.htFix,I.pq_htfix=!0),M.hidden&&(I.pq_hidden=!0),Ve[T]=I;return le.title=y.name,o&&Pe.fillRows(Ve,Ve.length+o,!0),le.dataModel={data:Ve},We+=d||0,!g&&We&&(le.colModel=Pe[_b(501)](We,y.columns,V)),le.mergeCells=(Me||[]).map(function(_n){return(_n=pq.getAddress(_n)).r1-=Ze,_n.r2-=Ze,_n}).filter(function(_n){return 0<=_n.r1}),le.freezeRows=Te,le.freezeCols=y.frozenCols,le.pics=y.pics,le},copyFormula:function(y,o,d){(y.pq_fn=y.pq_fn||{})[o]=d},copyFormat:function(y,o,d){y=(y=y[_b(129)])[o]=y[o]||{},d=pq[_b(241)](d)?pq.excelToJui(d):pq.excelToNum(d),y.format=d},copyStyle:function(y,o,d){var g,p;if((g=y.font)&&(d["font-family"]=g),(g=y.fontSize)&&(d["font-size"]=g+"px"),(g=y.color)&&(d.color=g),(g=y.bgColor)&&(d["background-color"]=g),null!=(g=y.bold)&&(d["font-weight"]=g?"bold":"normal"),y.italic&&(d["font-style"]="italic"),y.underline&&(d["text-decoration"]="underline"),y.wrap&&(d["white-space"]="normal"),(g=y.align)&&(o.align=g),(g=y.valign)&&(o.valign=g),g=y.border)for(p in g)d["border-"+p]=g[p]},applyOptions:function(y,o){var d=y.options.dataModel,g=o.dataModel;if(g){for(var p in g)d[p]=g[p];delete o.dataModel}y.option(o)},importWb:function(y){function o(N){return v.importS(N,y.extraRows,y.extraCols,y.keepCM,y[_b(502)])}function d(N){v[_b(503)](I,N)}var g=y.workbook,p=g.activeId||0,v=this,M=v.that.iTab,T=M.tabs(),I=M.main(),P=y.sheet;T?(M.clear(),g.sheets.forEach(function(N,V){var J={sheet:N,extraRows:y.extraRows,extraCols:y.extraCols,name:N.name,hidden:N.hidden};T.push(J),V==p&&(J._inst=I,d(o(N)))}),M.model.activeId=p,I._trigger("tabsReady"),I.element.show(),M.refresh()):(P=P||0,(M=g.sheets.filter(function(N,V){return P==V||P&&P==N.name})[0])&&d(o(M))),I._trigger("importWb"),I[_b(118)]()}}}(jQuery),function(K){var U;pq[_b(504)]={attr:(U=new RegExp(_a(162),"gi"),function(D){D=(D=D||"").slice(0,D.indexOf(">"));var y={};return D.replace(U,function(o,d,g){y[d]=g}),y}),getComment:function(d){var y=this,o={};return(d=y.pxml(_a(163)+d+".xml.rels")).length&&(d=K(d.find(_a(164))[0]).attr("Target"))&&(d=d.split("/").pop(),(y[_b(505)]("xl/"+d).match(/<comment\s+[^>]*>([\s\S]*?)<\/comment>/g)||[]).forEach(function(v){var p=y.attr(v).ref;v=v.match(/<t(\s+[^>]*)?>([\s\S]*?)(?=<\/t>)/g),v=y.match(v[v.length-1],/[^>]*>([\s\S]*)/,1),o[p]=K.trim(v)})),o},getBase64:function(D){return _a(165)+JSZip.base64.encode(D.asBinary())},pxml:function(D){return K(K.parseXML(this[_b(505)](D)))},pxmlstr:function(D){return K(K.parseXML(K.trim(D)))},getPic:function(p,y){var o,d=[],g=this.files;if(p=this.match(p,/<drawing\s+r:id=\"([^\"]*)\"(\s*)\/>/i,1)){y=this.pxml(_a(163)+y+".xml.rels"),y=(y=K(y.find('Relationship[Id="'+p+'"]')[0]).attr("Target")).split("/").pop();var v,M,T,I={},P={},N=(p=this.pxml("xl/drawings/"+y),y=this.pxml("xl/drawings/_rels/"+y+".rels"),["col","colOff","row","rowOff"]);for(o in y.find(_a(166)).each(function(W,re){M=K(re),I[M.attr("Id")]=M.attr("Target").match(/media\/(.*)/)[1]}),g)/media\/.*/.test(o)&&(v=o.match(/media\/(.*)/)[1],P[v]=this.getBase64(g[o]));p.find(_a(167)).each(function(W,Pe){var ce=(ie=(Pe=K(Pe)).find("xdr\\:cNvPr")).attr("descr"),ie=ie.attr("id"),ae=Pe.find("a\\:blip").attr("r:embed"),we=(ae=I[ae],Pe.find("xdr\\:from")),Me=Pe.find("xdr\\:to"),Ve=(Pe=Pe.find("xdr\\:ext"),Me.length),le=[],st=Ve?[]:null;N.forEach(function(We,at){T=at%2?9500:1,le.push(we.find("xdr\\:"+We).text()/T),Ve&&st.push(Me.find("xdr\\:"+We).text()/T)}),d.push({id:ie,name:ce,src:P[ae],from:le,to:st,cx:Ve?0:Pe.attr("cx")/9500,cy:Ve?0:Pe.attr("cy")/9500})})}return d},cacheTheme:function(){var D=this.pxmlstr(this[_b(506)]("th")).find("a\\:clrScheme").children(),y=this.themeColor=[];D.each(function(o,d){0===(d=K(d).children().attr("val")).indexOf("window")&&(d=void 0),y[o]=d})},colorFromNode:function(D){for(var y,o,d=D.attributes,g=0;g<d.length;g++){var p=(v=d[g]).name,v=v.value;"indexed"==p?y=this.indexes[v]:"rgb"==p?y=v.slice(2):"theme"==p?y=this.themeColor[v]:"tint"==p&&(o=v)}if(y)return"#"+(o?pq.tint(y,o):y)},indexes:["000000","FFFFFF","FF0000","00FF00","0000FF","FFFF00","FF00FF","00FFFF","000000","FFFFFF","FF0000","00FF00","0000FF","FFFF00","FF00FF","00FFFF","800000","008000","000080","808000","800080","008080","C0C0C0","808080","9999FF","993366","FFFFCC","CCFFFF","660066","FF8080","0066CC","CCCCFF","000080","FF00FF","FFFF00","00FFFF","800080","800000","008080","0000FF","00CCFF","CCFFFF","CCFFCC","FFFF99","99CCFF","FF99CC","CC99FF","FFCC99","3366FF","33CCCC","99CC00","FFCC00","FF9900","FF6600","666699","969696","003366","339966","003300","333300","993300","993366","333399","333333","000000"],cacheStyles:function(){var D,y,o,d=this,g=d.pxmlstr(d[_b(507)]()),p=K.extend(!0,{},d[_b(508)]),v=[],M=[""],T=["",""],I=[];g.find("numFmts>numFmt").each(function(P,V){var J=(V=K(V)).attr("formatCode");p[V.attr("numFmtId")]=J}),g.find(_a(168)).each(function(P,N){T.push(d[_b(509)](N))}),g.find("borders>border").each(function(P,V){V=K(V).children();var J={},W="double";V.each(function(re,ce){var ie=K(ce),ae=ie.children()[0];ae&&(ie=ie.attr("style"),J[ce.tagName]=(ie==W?"3px":"1px")+" "+(ie==W?W:"solid")+" "+(d[_b(509)](ae)||"#000000"))}),I.push(J)}),g.find("fonts>font").each(function(P,V){var J=+(V=K(V)).find("sz").attr("val"),W=V.find("name").attr("val"),re=V.find("color")[0],ce={};if(0===P)return D=J,void(y=W[_b(37)]());V.find("b").length&&(ce.bold=!0),(re=re&&d[_b(509)](re))&&(ce.color=re),W&&W[_b(37)]()!=y&&(ce.font=W),J&&J!=D&&(ce.fontSize=J),V.find("u").length&&(ce.underline=!0),V.find("i").length&&(ce.italic=!0),M.push(ce)}),g.find("cellXfs>xf").each(function(P,ie){var V,J=+(ie=K(ie)).attr("numFmtId"),W=+ie.attr("fillId"),re=+ie.attr("borderId"),ce=ie.children("alignment"),ae=(ie=+ie.attr("fontId"))?M[ie]:{},we={};for(V in ce.length&&((ie=ce.attr("horizontal"))&&(we.align=ie),(ie=ce.attr("vertical"))&&(we.valign=ie),"1"==ce.attr("wrapText")&&(we.wrap=!0)),J&&(/(?=.*m.*)(?=.*d.*)(?=.*y.*)/i.test(o=p[J])&&(o=o.replace(/(\[.*\]|[^mdy\/\-\s])/gi,"")),we.format=o),re&&(we.border=I[re]),W&&T[W]&&(we.bgColor=T[W]),ae)we[V]=ae[V];v.push(we)}),d.getStyle=function(P){return v[P]}},getMergeCells:function(D){var y=this;return(D.match(/<mergeCell\s+.*?(\/>|<\/mergeCell>)/g)||[]).map(function(o){return y.attr(o).ref})},getFrozen:function(y){return y=this.match(y,/<pane.*?(\/>|<\/pane>)/,0),{r:+(y=this.attr(y)).ySplit||0,c:+y.xSplit||0}},getFormula:function(D){var y={},o=K.paramquery.cFormulas.shiftRC();return function(d,g,p){var v;if("<f"===d.substr(0,2))return v=D.match(d,/^<f.*?>(.*?)<\/f>/,1),"shared"==(d=D.attr(d)).t&&(v?y[d.si]={r:g,c:p,f:v}:v=o((d=y[d.si]).f,p-d.c,g-d.r)),v}},getCols:function(D){for(var y=(D.match(/<dimension\s.*?\/>/)||[])[0],o=(y=this.attr(y||"").ref,[]),d=D.match(/<col\s.*?\/>/g)||[],g=y?pq.getAddress(y).c2+1:d.length,p=pq.excel.colRatio,v=0;v<g;v++)for(var M,T,J,I=+(J=this.attr(J=d[v])).min,P=+J.max,N=+J.hidden,V=+J.width,W=(J=J.style)?this.getStyle(J):{},re=I;re<=P;re++){for(T in M={},N?M.hidden=!0:M.width=+(V*p).toFixed(2),re!==o.length+1&&(M.indx=re-1),W)M[T]=W[T];o.push(M)}return o},getColor:function(D){return"#"+D.slice(2)},getPath:function(D){return this.paths[D]},getPathSheets:function(){return this.pathSheets},getFileTextFromKey:function(D){return this[_b(505)](this.getPath(D))},getFileText:function(D){return D&&(D=this.files[D.replace(/^\//,"")])?D.asText().replace(/\<x\:/g,"<").replace(/\<\/x\:/g,"</"):""},getSheetText:function(D){D=D||0;var y=this.pathSheets.filter(function(o,d){return o.name===D||d===D})[0].path;return this[_b(505)](y)},getStyleText:function(){return this[_b(506)]("st")},getSI:function(D){var y,o=[],d=pq[_b(510)],g=+this.attr(this.match(D,/<sst.*?>[\s\S]*?<\/sst>/,0))[_b(511)];if(D.replace(/<si>([\s\S]*?)<\/si>/g,function(p,v){y=[],v.replace(/<t.*?>([\s\S]*?)<\/t>/g,function(M,T){y.push(T)}),o.push(d(y.join("")))}),g&&g!==o.length)throw"si misatch";return o},getCsv:function(D,y){var o=[],d=Math.random()+"";return D=D.replace("\ufeff","").replace(/(?:^|[^"]+)"(([^"]|"{2})+)"(?=([^"]+|$))/g,function(g,p){var v=g.indexOf(p);return o.push(p.replace(/""/g,'"')),g.slice(0,v-1)+d+(o.length-1)+d}),y=y||new RegExp(-1==D.indexOf("\t")?",":"\t","g"),{sheets:[{rows:D.split(/\r\n|\r|\n/g).map(function(g){return{cells:g.split(y).map(function(p){var v;return 0==p.indexOf(d)?(v=p.slice(d.length,p.indexOf(d,1)),p=o[v]):'""'===p&&(p=""),{value:p}})}})}]}},getWorkBook:function(D,p,o){var d=this,g={},v=(p?g[p]=!0:"string"==typeof D&&(g.base64=!0),d.files=new JSZip(D,g).files,d.readPaths(),d.cacheTheme(),d[_b(512)](),p=this.getPath("ss"),[]),M=p?this.getSI(this[_b(505)](p)):[];return d[_b(513)]().forEach(function(T,I){var P,N;(!o||-1<o.indexOf(I)||-1<o.indexOf(T.name))&&(N=d[_b(505)](T.path),P=d.match(N,/<sheetData.*?>([\s\S]*?)<\/sheetData>/,1),N=d[_b(514)](N,P,M,T.name,I+1),T.hidden&&(N.hidden=!0),v.push(N))}),delete d.files,{sheets:v,activeId:d.activeId}},getWorkSheet:function(D,Ze,o,d,g){var p,v,M,T,I,P,N,V,J,W,re,ce,ie,ae,we,Me,Pe=this,Ve=Pe.getComment(g),le=[],st=pq.toNumber,We=Pe.getFormula(Pe),at=pq.formulas,Te=pq[_b(241)],qe=Pe[_b(515)](D),Bt=Ze.match(/<row[^<]*?\/>|<row.*?<\/row>/g)||[],Zn=(Ze=Pe.getCols(D),{}),jt=0,_n=Bt.length;for(Ze.forEach(function(ei,Xt){Zn[ei.indx||Xt]=ei});jt<_n;jt++){for(p in M={cells:[]},ae=(V=Pe.attr(ce=Bt[jt])).r,V[_b(516)]&&(M.htFix=1.5*V.ht),we=(T=V.s)?Pe.getStyle(T):{})M[p]=we[p];(ie=ae?ae-1:jt)!==jt&&(M.indx=ie),V.hidden&&(M.hidden=!0);for(var Dt,It=0,Yn=(Dt=ce.match(/(<c[^<]*?\/>|<c.*?<\/c>)/g)||[]).length;It<Yn;It++){if(I=(J=Pe.attr(N=Dt[It])).t,N=Pe.match(N,/<c.*?>(.*?)(<\/c>)?$/,1),v={},"inlineStr"==I?Me=(Me=N.match(/<t><!\[CDATA\[(.*?)\]\]><\/t>/))?Me[1]:(Me=N.match(/<t>(.*?)<\/t>/),pq[_b(510)](Me[1])):null!=(Me=Pe.match(N,/<v>(.*?)<\/v>/,1)||void 0)&&(Me="s"==I?o[Me]:"str"==I?pq[_b(510)](Me):"b"==I?"1"==Me:at.VALUE(Me)),(I=J.r)?P=st(P=I.replace(/\d+/,"")):I=pq.toLetter(P=It)+(ie+1),Ve[I]&&(v.comment=Ve[I]),void 0!==Me&&(v.value=Me),P!==It&&(v.indx=P),(I=We(N,ie,P))&&(v.formula=pq[_b(510)](I)),re=Zn[P],T=(T=J.s)&&this.getStyle(T)){for(p in T)W=T[p],re&&re[p]==W||M[p]!=W&&(v[p]=W);N=v.format,null!=Me&&!I&&N&&Te(N)&&(v.value=at.TEXT(Me,"m/d/yyyy"))}["bold","underline","italic"].forEach(function(ei){null!=T&&null!=T[ei]||((re||{})[ei]||M[ei])&&(v[ei]=!1)}),M.cells.push(v)}le.push(M)}return d={rows:le,name:d,pics:Pe.getPic(D,g)},g=Pe.getFrozen(D),qe.length&&(d.mergeCells=qe),Ze.length&&(d.columns=Ze),g.r&&(d.frozenRows=g.r),g.c&&(d.frozenCols=g.c),d},Import:function(D,y){function o(T,I){y(d[M?"getCsv":"getWorkBook"](T,M?D.separator:D.type||I,D.sheets))}var d=this,g=D.file,p=D.content,v=D.url,M="csv"==(v||(g||{}).name||"").slice(-3)[_b(54)]()||D.csv;v?(v+="?"+Math.random(),window.Uint8Array?pq.xmlhttp(v,M?"text":"arraybuffer",o):JSZipUtils[_b(517)](v,function(T,I){o(I,"binary")})):g?pq.fileRead(g,M?"readAsText":"readAsArrayBuffer",o):p&&o(p)},match:function(D,y,o){return(D=D.match(y))?D[o]:""},preDefFormats:{1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",5:"$#,##0_);($#,##0)",6:_a(169),7:_a(170),8:_a(171),9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yyyy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yyyy h:mm",37:"#,##0_);(#,##0)",38:"#,##0_);[Red](#,##0)",39:_a(172),40:_a(173),45:"mm:ss",46:"[h]:mm:ss",47:"mm:ss.0",48:"##0.0E+0",49:"@"},readPaths:function(){var D,y=this.pxmlstr((g=this.files)["[Content_Types].xml"].asText()),o=this.paths={wb:"sheet.main",ws:"worksheet",st:"styles",ss:"sharedStrings",th:"theme"};for(D in o)o[D]=y.find('[ContentType$="'+o[D]+'+xml"]').attr("PartName");for(D in g)if(/workbook.xml.rels$/.test(D)){o.wbrels=D;break}var d=K(this[_b(506)]("wbrels")),g=K(this[_b(506)]("wb")),p=this.pathSheets=[];this.activeId=+g.find("workbookView").attr("activeTab")||null,g.find("sheet").each(function(v,T){var I=(T=K(T)).attr("r:id"),P=T.attr("name"),N=d.find('[Id="'+I+'"]').attr("Target");N=y.find('Override[PartName$="'+N+'"]').attr("PartName"),p.push({name:P,rId:I,path:N,hidden:"hidden"==T.attr("state")})})}}}(jQuery),function(K){var U=K.paramquery,D=U._pqGrid.prototype,y=(D[_b(518)]=function(o){return(o=o||{}).format="xlsx",this.exportData(o)},D.exportCsv=function(o){return(o=o||{}).format="csv",this.exportData(o)},D.exportData=function(o){return new y(this,o).Export(o)},U.cExport=function(o){this.that=o});y.prototype=K.extend({copyStyle:function(o,d,g,p,v){function M(N){var V=d[N];if(V&&p[N]!=V)return V}function T(N){var V=g[N];if(V&&v[N]!=V)return V}var I,P;p=p||{},v=v||{},d&&(d=pq.styleObj(d),(I=M("background-color"))&&(o.bgColor=I),(I=M("font-size"))&&(o.fontSize=parseFloat(I)),(I=M("color"))&&(o.color=I),(I=M("font-family"))&&(o.font=I),(I=M("font-weight"))&&(o.bold="bold"==I),(I=M("white-space"))&&(o.wrap="normal"==I),(I=M("font-style"))&&(o.italic="italic"==I),(I=M("text-decoration"))&&(o.underline="underline"==I),P=M("border"),["left","right","top","bottom"].forEach(function(N){var V;((V=M("border-"+N))||(V=P))&&((o.border=o.border||{})[N]=V)})),g&&((I=T("align"))&&(o.align=I),(I=T("valign"))&&(o.valign=I))},getCsvHeader:function(o,d,g,p){for(var v,M,T=[],I=[],P=0;P<d;P++){for(var N=o[P],V=null,J=0,W=N.length;J<W;J++)(v=g[J]).hidden||!1===v.copy||(v=N[J],0<P&&v==o[P-1][J]||V&&0<J&&v==V?T.push(""):(M=null==(M=this.getTitle(v,J))?"":(M+"").replace(/\"/g,'""'),V=v,T.push('"'+M+'"')));I.push(T.join(p)),T=[]}return I},getCSVContent:function(o,d,g,p,v,M,T,I,P,N,V,J,W){for(var re,ce=o.separator||",",ie=[],ae=W?this[_b(519)](p,v,d,ce):[],we=0;we<T;we++)if(!(re=M[we]).pq_hidden){for(var Me,Pe,Ve,le={rowIndx:Me=I?we+P:we,rowIndxPage:Me-P,rowData:re,Export:!0},st=0;st<g;st++)(Ve=d[st]).hidden||!1===Ve.copy||(Ve=(Ve=((Pe=null)==(Pe=N[_b(195)](Me,st)?N.isRootCell(Me,st)?((Pe=N[_b(137)](Me,st)).Export=!0,this[_b(347)](Pe,V,J)[0]):"":(le.colIndx=st,le.column=Ve,le.dataIndx=Ve.dataIndx,this[_b(347)](le,V,J)[0]))?"":Pe)+"").replace(/\"/g,'""'),ie.push('"'+Ve+'"'));ae.push(ie.join(ce)),ie=[]}return"\ufeff"+ae.join("\n")},getExportCM:function(o,d){return 1<d?o:o.filter(function(g){return 0!=g.copy})},Export:function(o){var d,g,p=this.that,v=p.options.tabModel||{},M=v.tabs,T={sheets:[]};return!1!==p._trigger("beforeExport",null,o)&&("xlsx"==o.format?(M?(M.forEach(function(I,P){(g=I._inst||!(d=I.sheet)&&p.iTab.create(P))&&(g=new y(g),(d=g._Export(o).sheets[0]).name=I.name,I.hidden&&(d.hidden=!0)),T.sheets.push(d)}),T.activeId=v.activeId):T=this._Export(o),!1===p._trigger("workbookReady",null,{workbook:T})||o.workbook?T:(o.workbook=T,M=pq.excel.exportWb(o)||this[_b(520)](o),p._trigger("exportData",null,o),M)):this._Export(o))},_Export:function(o){var d=this.that,W=(ce=d.options).groupModel,g="remote"==ce.pageModel.type,p=d.riOffset,v=d.iRenderB,M=d.iMerge,T=d[_b(144)],I=T.length,P=d.colModel,N=P.length,V=this[_b(521)](P,I),J=V.length,re=ce.treeModel,ce=(W=W.on&&W.dataIndx.length||g||re.dataIndx&&re.summary?d.pdata:ce.dataModel.data,re=(W=ce[_b(23)]?W.concat(ce[_b(23)]):W).length,o.render),ie=!o.noheader,ae=o.format;return"xlsx"==ae?this[_b(522)](V,J,T,I,W,re,g,p,M,ce,v,ie,o.sheetName):(o.data="json"==ae?this[_b(523)](o,W):"csv"==ae?this[_b(524)](o,P,N,T,I,W,re,g,p,M,ce,v,ie):this[_b(525)](o,P,N,T,I,W,re,g,p,M,ce,v,ie),V=this[_b(520)](o),d._trigger("exportData",null,o),V)},getHtmlHeader:function(o,d){for(var g,p,v,M,T=["<thead>"],I=0;I<d;I++){var P=o[I],N=null;T.push("<tr>");for(var V=0,J=P.length;V<J;V++)g=(M=P[V]).colSpan,!M.hidden&&g&&!1!==M.copy&&(p=M.rowSpan,0<I&&M==o[I-1][V]||N&&0<V&&M==N||(v=this.getTitle(M,V),M=(N=M).halign||M.align,T.push("<th colspan=",g," rowspan=",p," ",M=M?"align="+M:"",">",v,"</th>")));T.push("</tr>")}return T.push("</thead>"),T.join("")},getHtmlBody:function(o,d,g,p,v,M,T,I,P){for(var N,V,J,W,re,ce,ie,ae,we,Me,Pe,Ve=[],le=0;le<p;le++)if(!(ie=g[le]).pq_hidden){for(ce={rowIndx:ae=v?le+M:le,rowIndxPage:ae-M,rowData:ie,Export:!0},Ve.push("<tr>"),N=0;N<d;N++)if(!(V=o[N]).hidden&&!1!==V.copy){if(Pe=null,Me="",T[_b(195)](ae,N)){if(!(J=T.isRootCell(ae,N)))continue;(Pe=T[_b(137)](ae,N)).Export=!0,we=(W=this[_b(347)](Pe,I,P))[0],re=W[1],Me="rowspan="+J.rowspan+" colspan="+J.colspan+" "}else ce.colIndx=N,ce.column=V,ce.dataIndx=V.dataIndx,we=(W=this[_b(347)](ce,I,P))[0],re=W[1];Me+=(Pe=V.align)?"align="+Pe:"",we=pq.newLine(we=null==we?"":we),Ve.push("<td ",Me,re?' style="'+re+'"':"",">",we,"</td>")}Ve.push("</tr>")}return Ve.join("")},getHtmlContent:function(o,d,g,p,v,M,T,I,P,N,V,J,W){var re=(ae=this.that).options.rtl,ce=o.cssRules||"",ie=(ae=ae.element.find(".pq-grid-table")).css("font-family"),ae=ae.css("font-size"),we=[];return we.push(_a(174),_a(175),"<title>",o.title||"ParamQuery Pro","</title>","</head><body ",re?'dir="rtl"':""," >","<style>",_a(176)+ie+";font-size:"+ae+_a(177),_a(178),ce,"</style>","<table>"),we.push(W?this[_b(526)](p,v,d):""),we.push(this[_b(527)](d,g,M,T,I,P,N,V,J)),we.push(_a(179)),we.join("")},getJsonContent:function(o,d){return o[_b(528)]?d:JSON.stringify(d,o.nopqdata?function(g,p){if(0!==(g+"").indexOf("pq_"))return p}:null,o.nopretty?null:2)},getXlsMergeCells:function(o,d,g,p){o=o.concat(g[_b(515)](d,this.curPage,p));for(var v=[],M=pq.toLetter,T=o.length,I=0;I<T;I++){var P=M((P=o[I]).c1)+(P.r1+1)+":"+M(P.c2)+(P.r2+1);v.push(P)}return v},getXlsCols:function(o,d){for(var g,p,v,M=[],T=0,I=pq.excel.colWidth;T<d;T++)v=+((p=o[T])._width||I).toFixed(2),this.copyStyle(g={},p.style,p),v!==I&&(g.width=v),p.hidden&&(g.hidden=!0),pq.isEmpty(g)||(M.length!==T&&(g.indx=T),M.push(g));return M},getXlsHeader:function(o,d,g){for(var p=[],v=0;v<d;v++){for(var M=o[v],T=[],I=0,P=M.length;I<P;I++){var N,V,J,W=M[I];!1!==W.copy&&(N=W.o_colspan,V=W.rowSpan,J=this.getTitle(W,I),0<v&&W==o[v-1][I]||0<I&&W==o[v][I-1]?J="":(1<N||1<V)&&g.push({r1:v,c1:I,r2:v+V-1,c2:I+N-1}),T.push({value:J,bgColor:"#eeeeee"}))}p.push({cells:T})}return p},getXlsBody:function(o,d,g,p,v,M,T,I,P,N,V){for(var J,W,re,ce,ie,ae,we,Me,Pe,Ve,le,st,We,at,Te,qe,Bt,Ze,Zn,jt,_n,Dt,It,Yn,ei=this.that,Xt=ei.options,pr=[],Li=U.cFormulas.shiftRC(ei),Mn=0;Mn<p;Mn++){for(Bt=(Pe=g[Mn])[_b(213)],jt=Pe[_b(129)]||{},at=Pe.pq_rowprop||{},Dt=Pe[_b(244)]||{},Me=[],ce={rowIndx:Ve=v?Mn+M:Mn,rowIndxPage:Ve-M,rowData:Pe,Export:!0},J=0;J<d;J++)st=(Yn=o[J]).style,It=Dt[le=(We=Yn).dataIndx],_n=jt[le]||{},W=Ze=Pe[le],re=ei.getFormula(Pe,le),qe=!1,(qe=!(!T[_b(195)](Ve,J)||T.isRootCell(Ve,J,"o"))||qe)||re||(ce.colIndx=J,ce.column=Yn,ce.dataIndx=le,W=(qe=this[_b(347)](ce,I,P))[0],ie=qe[1],we=qe[2],ae=qe[3]),qe={},"string"==typeof(Yn=Xt.format.call(ei,Pe,Yn,_n,at))&&(Yn=pq[_b(241)](Yn)?(W!==Ze&&K.datepicker.formatDate(Yn,new Date(Ze))===W&&(W=Ze),pq.juiToExcel(Yn)):(W!==Ze&&pq[_b(47)](Ze,Yn)===W&&(W=Ze),pq.numToExcel(Yn)),qe.format=Yn),void 0!==W&&(qe.value=W),Bt&&(Ze=Bt[le])&&((Zn=Ze.title)&&(qe.comment=Zn),(Zn=Ze.style)&&this.copyStyle(qe,Zn)),this.copyStyle(qe,It,_n,st,We),this.copyStyle(qe,ie,we,st,We),ae&&(qe.comment=ae),re&&(N&&(re=Li(re,0,N)),qe.formula=re),pq.isEmpty(qe)||(qe.dataIndx=le,Me.length!==J&&(qe.indx=J),Me.push(qe));Te={},Me.length&&(Te.cells=Me),Pe.pq_hidden&&(Te.hidden=!0),Pe.pq_htfix&&(Te.htFix=Pe.pq_ht),this.copyStyle(Te,Pe[_b(242)],at),V&&(Zn=(V.call(ei,ce)||{}).style)&&this.copyStyle(Te,Zn),pq.isEmpty(Te)||(pr.length!==Mn&&(Te.indx=Mn),pr.push(Te))}return pr},getWorkbook:function(o,d,Pe,st,v,M,T,I,P,N,V,le,W){var re=this.getXlsCols(o,d),Ve=[],ce=this.that,ie=ce.options,ae=ie.freezeCols,we=le?st:0,Me=we+(ie.freezeRows||0);return Pe=le?this[_b(529)](Pe,st,Ve):[],Ve=this[_b(530)](Ve,le?st:0,P,M),le=this.getXlsBody(o,d,v,M,T,I,P,N,V,we,ie.rowInit),st={columns:re,rows:Pe.concat(le)},ie.rtl&&(st.rtl=!0),Ve.length&&(st.mergeCells=Ve),(o=Pe.length)&&(st.headerRows=o),Me&&(st.frozenRows=Me),ae&&(st.frozenCols=ae),(W=W||ie.title)&&(st.name=W),st.pics=ce.iPic.pics,{sheets:[st]}},postRequest:function(o){var d,g,p=o.format,v=o.url,M=o.filename||"pqGrid";return o.zip&&"xlsx"!=p?((g=new JSZip).file(M+"."+o.format,o.data),g=g.generate({type:"base64",compression:"DEFLATE"}),d=!0,p="zip"):(d=!!o.decodeBase,g=o.data),v&&K.ajax({url:v,type:"POST",cache:!1,data:{pq_ext:p,pq_data:g,pq_decode:d,pq_filename:M},success:function(T){v=v+(0<v.indexOf("?")?"&":"?")+"pq_filename="+T,K(document.body).append(_a(180)+v+'"></iframe>')}}),g}},pq.mixin.render)}(jQuery),function(K){var U,D=pq.excel={_tmpl:{rels:_a(181)},eachRow:function(o,d){for(var g=o.rows,p=0,v=g.length;p<v;p++)d(g[p],p)},exportWb:function(o){var d=o.workbook,g=o.replace,p=this,v=p._tmpl,M=d.sheets,T=M.length,I=[],P=[],N=new JSZip,V={},J=N.folder("xl");return N.file("_rels/.rels",v.rels),N.file(_a(182),p[_b(531)](T)),M.forEach(function(le,Me){var ce,ie=p.getCols(le.columns),ae=le.pics||[],we=ae.length,Pe=(Me+=1,p.getFrozen(le.frozenRows,le.frozenCols,le.rtl)),Ve=p.getBody(le.rows||[],le.columns||[]);le=p[_b(515)](le.mergeCells),g&&(Ve=Ve.replace.apply(Ve,g)),ce=!pq.isEmpty(ce=p.comments),J.file("worksheets/sheet"+Me+".xml",p.getSheet(Pe,ie,Ve,le,ce,we,Me)),ce&&(I.push(Me),J.file("comments"+Me+".xml",p.getComment()),J.file("drawings/vmlDrawing"+Me+".vml",p.getVml())),we&&(p.addPics(J,ae,Me),ae.forEach(function(st){V[st.name.split(["."])[1]]=1}),P.push(Me)),(ce||we)&&J.file(_a(183)+Me+".xml.rels",p[_b(532)](Me,ce,we))}),N.file("[Content_Types].xml",p[_b(533)](T,I,P,V)),J.file("workbook.xml",p.getWBook(M,d.activeId)),J.file("styles.xml",p.getStyle()),o.url?(o.data=N.generate({type:"base64",compression:"DEFLATE"}),o.decodeBase=!0,pq[_b(520)](o)):N.generate({type:o.type||"blob",compression:"DEFLATE"})},addPics:function(o,d,g){var p,v,M,T,I;d.length&&(p=[_a(184)],v=[_a(185)],M=1,T=parseInt,I=function(P){return["<xdr:col>",P[0],_a(186),T(9500*P[1]),_a(187),P[2],_a(188),T(9500*P[3]),"</xdr:rowOff>"].join("")},d.forEach(function(P,N){var V=P.from,J=P.name,W="rId"+M++,re=P.to,ce=re&&!!re.length,ie=ce?"two":"one",ae=T(9500*P.cx),we=T(9500*P.cy);p.push("<xdr:",ie,"CellAnchor>","<xdr:from>",I(V),"</xdr:from>",ce?"<xdr:to>"+I(re)+"</xdr:to>":'<xdr:ext cx="'+ae+'" cy="'+we+'"/>',_a(189),P.id,'" name="Picture ',N+1,'" descr="',J,'"/>',_a(190),_a(191),W,_a(192),_a(193),_a(194),ie,"CellAnchor>"),v.push('<Relationship Id="',W,'" Target="../media/',J,_a(195)),o.file("media/"+J,P.src.split(",")[1],{base64:!0})}),p.push("</xdr:wsDr>"),v.push("</Relationships>"),o.file("drawings/drawing"+g+".xml",p.join("")),o.file(_a(196)+g+".xml.rels",v.join("")))},eachCell:function(o,d,g){o.forEach(function(p,v){var M,T;if(M=p.cells){v=p.indx||v;for(var I=0,P=M.length;I<P;I++)d(T=M[I],T.indx||I,v,g)}else(M=p.rows)&&this.eachCell(M,d,v)},this)},findIndex:function(o,d){return d=o.findIndex(d),o[d].indx||d},getArray:function(o){var d=[],g=this;return this.eachRow(o,function(p){var v=[];p.cells.forEach(function(M){v.push(g.getCell(M))}),d.push(v)}),d},getBody:function(o,d){var g,p,v,M,T,I,P,N,V,J,W,re,ce,ie,ae,we,Me,Pe,Ve,le={},st=pq.formulas,We=[],at=this.comments={},Te=o.length;for((d||[]).forEach(function(qe,Bt){le[qe.indx||Bt]=qe}),p=0;p<Te;p++){for(ae=(re=(ie=o[p]).cells||[]).length,we=ie.hidden?'hidden="1" ':"",Me=ie.htFix?_a(197)+ie.htFix/1.5+'" ':"",I='r="'+(M=(ie.indx||p)+1)+'"',N=this[_b(534)](ie),We.push("<row "+we+Me+I+(N=N?' s="'+N+'" customFormat="1"':"")+">"),v=0;v<ae;v++)ce=(W=re[v]).value,N=P="",Pe=le[T=W.indx||v]||{},I=T===v?"":'r="'+pq.toLetter(T)+M+'"',Pe=K.extend({},Pe,ie,W),g="@"!=(Ve=W.format),J=(J=W.formula)?"<f>"+pq.escapeXml(J)+"</f>":"",null==ce?V="<v></v>":g&&"boolean"==typeof ce?(V="<v>"+(ce?"1":"0")+"</v>",P='t="b"'):V=g&&ce==+ce&&(ce+"").length==(+ce+"").length?"<v>"+ce+"</v>":g&&Ve&&st.isDate(ce)?"<v>"+st.VALUE(ce)+"</v>":(P='t="inlineStr"',"<is><t>"+pq.escapeXml(ce)+"</t></is>"),N=(N=this[_b(534)](Pe))?'s="'+N+'"':"",(g=W.comment)&&(at[pq.toLetter(T)+M]=g),We.push("<c "+P+" "+I+" "+N+">"+J+V+"</c>");We.push("</row>")}return We.join("")},getCell:function(g){var d=g.format;return g=g.value,d?pq.formulas.TEXT(g,d):g},getCSV:function(o){var d=[],g=this;return this.eachRow(o,function(p){var v=[];p.cells.forEach(function(M){v.push(g.getCell(M))}),d.push(v.join(","))}),d.join("\r\n")},getColor:(U={},function(o){var d,g,p=U[o];if(p||(/^#[0-9,a,b,c,d,e,f]{6}$/i.test(o)?g=o.replace("#",""):(d=o.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/i))&&(g=y((+d[1]).toString(16))+y((+d[2]).toString(16))+y((+d[3]).toString(16))),g&&6===g.length&&(p=U[o]="ff"+g)),p)return p;throw"invalid color: "+o}),_getCol:function(o,d,g,p,v,M){M=M?' style="'+M+'"':"",p&&!v||(v=_a(198)+(v=+((v=v||this.colWidth)/this.colRatio).toFixed(2))+'"'),o.push('<col min="',d,'" max="',g,'" hidden="',p,'"',v,M,"/>")},getCols:function(o){if(!o||!o.length)return"";var d,g,p,v,M,T,I=[],P=0,N=0,V=0,J=o.length;for(I.push("<cols>");V<J;V++){var W=o[V],re=W.hidden?1:0,ce=W.width,ie=this[_b(534)](W);P=(W.indx||P)+1,p===ce&&v===re&&ie==M&&P==N+1?g=P:(T&&(this._getCol(I,d,g,v,p,M),d=null),g=P,null==d&&(d=P)),p=ce,v=re,M=ie,N=P,T=!0}return this._getCol(I,d,g,v,p,M),I.push("</cols>"),I.join("")},getComment:function(){var o,d=[],g=this.comments;for(o in g)d.push(_a(199),o,_a(200),g[o].replace(/</g,"&lt;").replace(/>/g,"&gt;"),_a(201));return[_a(202),_a(203),_a(204),"<commentList>",d.join(""),_a(205)].join("")},getContentTypes:function(o,d,g,p){for(var v,M=[],T=1,I=[],P=[];T<=o;T++)M.push(_a(206)+T+_a(207));for(v in d.forEach(function(N){I.push(_a(208),N,_a(209))}),p)P.push('<Default Extension="'+v+_a(210)+v+'" />');return g.forEach(function(N){P.push(_a(211),N,_a(212))}),[_a(202),_a(213),_a(214),_a(215),_a(216),_a(217),M.join(""),_a(218),I.join(""),P.join(""),"</Types>"].join("")},getFillIndx:function(o){var d=this.fills=this.fills||{length:2};return this.getIndx(d,o)},getBorderIndx:function(o){var d=this.borders=this.borders||{length:1};return this.getIndx(d,JSON.stringify(o))},getFontIndx:function(o,d,g,p,v,M){var T=this.fonts=this.fonts||{length:1};return this.getIndx(T,(o||"")+"_"+(d||"")+"_"+(g||"")+"_"+(p||"")+"_"+(v||"")+"_"+(M||""))},getFormatIndx:function(o){var d=this.formats=this.formats||{length:164};return this.numFmtIds[o]||this.getIndx(d,o)},getFrozen:function(o,d,g){return[_a(219),g?'rightToLeft="1"':"",' workbookViewId="0">','<pane xSplit="',d=d||0,'" ySplit="',o=o||0,'" topLeftCell="',pq.toLetter(d)+(o+1),_a(220),_a(221)].join("")},getIndx:function(o,d){var g=o[d];return null==g&&(g=o[d]=o.length,o.length++),g},getItem:function(o,d){var g,p,v=o[d],M=0,T=0,I=v?v.indx:-1;if(null==I||d==I)return v;if(0<=(g=-1==I?o.length-1:d))for(;;){if(20<++T)throw"not found";if((I=(v=o[p=Math.floor((g+M)/2)]).indx)==d)return v;if(d<I?g=p:M=p==M?p+1:p,M==g&&p==M)break}},getMergeCells:function(o){var d=[],g=0,p=(o=o||[]).length;for(d.push('<mergeCells count="'+p+'">');g<p;g++)d.push('<mergeCell ref="',o[g],'"/>');return d.push("</mergeCells>"),p?d.join(""):""},getSheetRel:function(o,d,g){var p=[_a(185)];return d&&p.push(_a(222)+o+_a(223)+o+_a(224),_a(225)+o+_a(226)+o+_a(227)),g&&p.push(_a(228)+o+_a(229)+o+_a(230)),p.push("</Relationships>"),p.join("")},getSheet:function(o,d,g,p,v,M,T){return[_a(231),o,d,"<sheetData>",g,"</sheetData>",p,M?'<drawing r:id="rId'+T+'" />':"",v?_a(232)+T+'" />':"","</worksheet>"].join("")},getStyleIndx:function(W){var d=W.format,g=W.bgColor,p=W.color,v=W.font,M=W.fontSize,T=W.align,I=W.valign,P=W.wrap,N=W.bold,V=W.italic,J=W.underline;if(W=W.border,d||g||p||v||M||T||I||P||N||V||J||W)return d=d?this[_b(535)](d):"",g=g?this[_b(536)](g):"",W=W?this[_b(537)](W):"",d=d+"_"+g+"_"+(p||v||M||N||V||J?this[_b(538)](p,v,M,N,V,J):"")+"_"+(T||"")+"_"+(I||"")+"_"+(P||"")+"_"+W,g=this.styles=this.styles||{length:1},this.getIndx(g,d)},getStyle:function(){var o,T,I,P,N,V,J,W,re,ce,ie=this,ae=ie.formats,we=ie.fills,Me=ie.fonts,Pe=ie.borders,Ve=["left","right","top","bottom"],le=ie.styles,st=[],We=[],at=[],Te=[],qe=[_a(233)];if(ae){for(ce in delete ae.length,ae)st.push('<numFmt numFmtId="'+ae[ce]+'" formatCode="'+ce+'"/>');delete ie.formats}if(we){for(ce in delete we.length,we)We.push(_a(234)+this.getColor(ce)+_a(235));delete ie.fills}if(Me){for(ce in delete Me.length,Me)o="<color "+((T=ce.split("_"))[0]?'rgb="'+this.getColor(T[0])+'"':'theme="1"')+" />",at.push("<font>",T[3]?"<b/>":"",T[4]?"<i/>":"",T[5]?"<u/>":"",'<sz val="'+(T[2]||11)+'"/>',o,'<name val="'+(T[1]||"Calibri")+'"/>',_a(236));delete ie.fonts}if(Pe){for(ce in delete Pe.length,Pe){var Bt=JSON.parse(ce);Te.push("<border>"),Ve.forEach(function(Ze){Bt[Ze]&&(T=Bt[Ze].split(" "),Te.push("<"+Ze+' style="'+("1px"==T[0]?"thin":"double")+'"><color rgb="'+ie.getColor(T[2])+'"/></'+Ze+">"))}),Te.push("</border>")}delete ie.borders}if(le){for(ce in delete le.length,le)I=(T=ce.split("_"))[0],P=T[1],N=T[2],V=T[3],re=T[6],J=(J=T[4])?' vertical="'+J+'" ':"",W=(W=T[5])?' wrapText="1" ':"",qe.push("<xf "+(I?_a(237)+I+'"':"")+(P?_a(238)+P+'" ':"")+(N?_a(239)+N+'" ':"")+(re?_a(240)+re+'"':"")+((V=V?' horizontal="'+V+'" ':"")||J||W?_a(241)+V+J+W+"/></xf>":"/>"));delete this.styles}return st=st.join("\n"),qe=qe.join("\n"),We=We.join("\n"),[_a(202),_a(242),"<numFmts>",st,"</numFmts>","<fonts>",_a(243),at=at.join(""),"</fonts>",_a(244),We,"</fills>",_a(245),Te=Te.join("\n"),"</borders>",_a(246),"</cellStyleXfs>","<cellXfs>",qe,"</cellXfs>",_a(247),_a(248),"</styleSheet>"].join("")},getVml:function(){var o,d=[];for(o in this.comments){var p=o.match(/([A-Z]+)(\d+)/),g=pq.toNumber(p[1]);p=p[2]-1,d.push(_a(249),"<x:Row>",p,"</x:Row>","<x:Column>",g,_a(250))}return[_a(251),_a(252),d.join(""),"</xml>"].join("")},getWBook:function(o,d){return[_a(253),_a(254)+(0<=d?"activeTab='"+d+"'":"")+_a(255),o.map(function(g,p){return p++,["=tiffu obnf>#".replace(/[^\s]/g,function(v){return String[_b(60)](v.charCodeAt(0)-1)}),"RctcoSwgt{ Gxcn ".replace(/[^\s]/g,function(v){return String[_b(60)](v.charCodeAt(0)-2)})+p,'" sheetId="',p,'" r:id="rId',p,'"/>'].join("")}).join(""),"</sheets></workbook>"].join("")},getWBookRels:function(o){for(var d=[],g=1;g<=o;g++)d.push(_a(228)+g+_a(256)+g+'.xml"/>');return[_a(202),_a(257),d.join(""),_a(228),g,_a(258),"</Relationships>"].join("")},importXl:function(){var o=pq[_b(504)];return o.Import.apply(o,arguments)},SpreadSheet:function(o){var d,g=D[_b(539)];if(this instanceof g==0)return new g(o);for(d in o)this[d]=o[d]}};function y(o){return 1===o.length?"0"+o:o}D.colRatio=8,D.colWidth=8.43*D.colRatio,D.numFmtIds=function(){var o,d=pq[_b(504)][_b(508)],g={};for(o in d)g[d[o]]=o;return g}(),pq[_b(520)]=function(o){var d,g,p=o.format,v=o.url,M=o.filename||"pqGrid";return o.zip&&"xlsx"!=p?((g=new JSZip).file(M+"."+o.format,o.data),g=g.generate({type:"base64",compression:"DEFLATE"}),d=!0,p="zip"):(d=!!o.decodeBase,g=o.data),v&&K.ajax({url:v,type:"POST",cache:!1,data:{pq_ext:p,pq_data:g,pq_decode:d,pq_filename:M},success:function(T){v=v+(0<v.indexOf("?")?"&":"?")+"pq_filename="+T,K(document.body).append(_a(180)+v+'"></iframe>')}}),g},D[_b(539)].prototype={getCell:function(o,d){var g=D.getItem(g=this.rows||[],o)||{cells:[]};return D.getItem(g.cells,d)}}}(jQuery),function(K){var U=K.paramquery,D=(U.pqGrid.defaults[_b(540)]={on:!0},U.pqGrid.prototype.getFormula=function(y,o){return(y=this.iFormulas.getFnW(y,o))?y.fn:void 0},K(document).on("pqGrid:bootup",function(y,g){var d;(g=g.instance).options[_b(540)].on&&(d=g.iFormulas=new D(g)),g.Formulas=function(){return d}}),U.cFormulas=function(y){var o=this;o.that=y,o.fn={},o.tabNames={},y.on("dataReadyDone",o[_b(541)].bind(o)).on(_a(259),o[_b(542)].bind(o)).on("beforeValidateDone",o[_b(543)].bind(o)).on("autofillSeries",o.onAutofill.bind(o)).on("editorBegin",o[_b(544)].bind(o)).on("editorEnd",o[_b(545)].bind(o)).on(_a(260),o[_b(546)].bind(o)).on(!0,"change",o.onChange.bind(o)).on("tabChange",o[_b(547)].bind(o)).on("tabRename",o[_b(548)].bind(o))});K.extend(D,{deString:function(y,o,d){var g=[];return y=o(y=y.replace(/(?:^|[^"]+)"(([^"]|"{2})+)"(?=([^"]+|$))/g,function(p,v){var M=p.indexOf('"'+v+'"');return g.push(v),p.slice(0,M)+"#"+(g.length-1)+"#"})),g.forEach(function(p,v){d&&(p=p.replace(/""/g,'\\"')),y=y.replace("#"+v+"#",'"'+p+'"')}),y},reSheet:_a(261),selectExp:function(y,o){var d,g=y.slice(0,o).replace(/"[^"]*"/g,"");if(!/"[^"]+$/.test(g)&&(y=y.slice(o),(o=g.match(/.*?([a-z0-9:$]+)$/i))&&(d=""===y?[]:y.match(/^([a-z0-9:$]+)?.*/i))))return(o[1]+(null==d[1]?"":d[1])).replace(/\$/g,"")[_b(37)]()},shiftRC:function(y){var o=D,d=y?y.get_p_data().length-1:0,g=y?y.colModel.length-1:0;return function(p,v,M){return v&&(p=o.shiftC(p,v,g)),M?o.shiftR(p,M,d):p}},getTab:function(y){return"'"==(y=y.slice(0,y.length-1).replace(/''/g,"'"))[0]?y.slice(1,y.length-1):y},shiftR:function(y,o,d,g){function p(I){return g[D.getTab(I)].pdata.length-1}var v=D.reSheetC,M=new RegExp(v+_a(262),"g"),T=new RegExp(v+_a(263),"g");return D.deString(y,function(I){return I.replace(M,function(P,N,V,J,W,re){return W?P:(W=+re+o-1,d=N?p(N):d,(N||"")+V+J+((W=W<0?0:d&&d<W?d:W)+1))}).replace(T,function(P,N,V,J,W,re){var ce;return d=N?p(N):d,(N||"")+V+(J=V?J:(ce=(ce=+J+o-1)<0?0:d&&d<ce?d:ce)+1)+":"+W+(W?re:(ce=(ce=+re+o-1)<0?0:d&&d<ce?d:ce)+1)})})},shiftC:function(y,o,d,g){function p(I){return g[D.getTab(I)].colModel.length-1}var v=D.reSheetC,M=new RegExp(v+_a(264),"g"),T=new RegExp(v+_a(265),"g");return D.deString(y,function(I){return(I=I.replace(M,function(P,N,V,J,W,re){return V?P:(V=pq.toNumber(J)+o,d=N?p(N):d,(N||"")+pq.toLetter(V=V<0?0:d&&d<V?d:V)+W+re)})).replace(T,function(P,N,V,J,W,re){var ce;return d=N?p(N):d,V||(ce=(ce=pq.toNumber(J)+o)<0?0:d&&d<ce?d:ce,J=pq.toLetter(ce)),W||(ce=(ce=pq.toNumber(re)+o)<0?0:d&&d<ce?d:ce,re=pq.toLetter(ce)),(N||"")+V+J+":"+W+re})})}}),D.reSheetC=D.reSheet.replace("?:",""),D.prototype={addRowIndx:function(y){y.forEach(function(o){var d,g,p=o.newRow,v=p.pq_fn;if(v)for(g in v)(d=v[g]).ri=d.riO=p.pq_ri})},cell:function(d){return d=this.toCell(d),this.valueArr(d.r,d=d.c)[0]},check:function(y){return D.deString(y,function(o){return(o=o.replace(/[^']+(\s+)(?![^']+')/g,function(d){return d.replace(/\s/g,"")}))[_b(37)]().replace(/([A-Z]+)([0-9]+)\:([A-Z]+)([0-9]+)/g,function(d,g,p,v,M){return g=pq.toNumber(g),(v=pq.toNumber(v))<g&&(g=[v,v=g][0]),+M<+p&&(p=[M,M=p][0]),pq.toLetter(g)+p+":"+pq.toLetter(v)+M})})},computeAll:function(){var y,o=this,d=o.that;if(o.initObj(),o[_b(549)](function(g){g.clean=0,y=!0}),y)return o[_b(549)](function(g,p,v,M,T){try{var I=o[_b(550)](g)}catch(P){I="string"==typeof P?P:P.message}p[v]=I,T&&d.isValid({rowIndx:M,rowData:p,dataIndx:v,allowInvalid:!0})}),!0},eachFormula:function(y){function o(M){for(var T,I,P=(M=M||[]).length;P--;)(T=M[P])&&(I=T.pq_fn)&&v(T,P,I)}var d=!0,g=this.that,p=g.columns,v=function(M,T,I){var P,N;for(P in I)p[P]&&"string"!=typeof(N=I[P])&&y(N,M,P,T,d)};o(g.get_p_data()),d=!1,o(g.options[_b(23)])},execIfDirty:function(y,o){if(y.clean){if(.5==y.clean)return o}else y.clean=.5,y.val=this.exec(y.fn,y.ri,y.ci),y.clean=1;return y.val},replace:function(y,o,d){var g,p,v,M,T=o[_b(386)]("!"),I=y===o,P=this.obj;return 0<T?(v=(g=this.that.iTab).tabs(),M=o.substr(0,T),T=o.substr(T+1,o.length-1),"'"==M[0]&&(o=(M=(M=M.slice(1,M.length-1)).replace(/''/g,"'"))+"!"+T),0<=(p=v.findIndex(function(N){return N.name[_b(37)]().trim()==M}))&&(v=v[p],this.tabNames[M]=instance=g.grid(v)||g.create(p),P[o]=P[o]||instance.iFormulas[d](T)),o=o.replace(/'/g,"\\'")):P[o]=P[o]||this[d](o),"range"==d?"this['"+o+"']":(v=y.charAt(0),(I||"$"==v?"":v)+"this['"+o+"']")},exec:function(M,o,d){var g=this,p=g.obj,v=D.reSheet;M=D.deString(M,function(I){var P="(?:\\(|\\,|^|\\+)(("+v+_a(266);return(I=(I=(I=(I=I.replace(new RegExp(P,"g"),function(re,V){var J="SUM("+V.split("+").join(",")+")",W=re[0];return(W=W==V[0]?"":W)+J+((re=re[re.length-1])==V[V.length-1]?"":re)})).replace(/\^/g,"**")).replace(new RegExp("("+v+_a(267),"g"),function(N,V){return g.replace(N,V,"range")})).replace(new RegExp("(?:[^:A-Z']|^)("+v+_a(268),"g"),function(N,V){return g.replace(N,V,"cell")})).replace(/{/g,"[").replace(/}/g,"]").replace(/(?:[^><])(=+)/g,function(N,V){return N+(1===V.length?"==":"")}).replace(/<>/g,"!==").replace(/&/g,"+")},!0),p.getRange=function(){return{r1:o,c1:d}};try{var T=new Function("with(this){return "+M+"}").call(p);"function"==typeof T?T="#NAME?":"string"==typeof T&&D.deString(T,function(I){0<=I.indexOf("function")&&(T="#NAME?")}),T!=T&&(T=null)}catch(I){T="string"==typeof I?I:I.message}return T},initObj:function(){this.obj=K.extend({iFormula:this},pq.formulas)},onAutofill:function(y,o){var P,p=(d=o.sel).r,d=d.c,g=o.x,v=(p=(P=this.that).getRowData({rowIndx:p}),P.colModel),M=v.length-1,T=P.get_p_data().length-1,I=this.tabNames,N=this.getFnW(p,P=v[d].dataIndx);N&&(o.series=function(V){return"="+(g?D.shiftC(N.fn,V-1,M,I):D.shiftR(N.fn,V-1,T,I))})},onBeforeValidateDone:function(y,o){function d(v){v.forEach(function(M){var T,I,P,N=M.newRow,V=M.rowData;for(T in N)"string"==typeof(P=N[T])&&"="===P[0]?(o[_b(68)]=!0,P=g.check(P),(I=V?g.getFnW(V,T):null)?P!==I.fn&&(M.oldRow[T]="="+I.fn,g.save(V,T,P,M.rowIndx,p[T])):g.save(V||N,T,P,M.rowIndx,p[T])):V&&(I=g.remove(V,T))&&(M.oldRow[T]="="+I.fn)})}var g=this,p=this.that.colIndxs;d(o.addList),d(o.updateList)},onTabChange:function(y,o){!this.tabNames[o.tab.name[_b(37)]()]||o.addList.length||o.deleteList.length||(this.computeAll(),this.that.refresh())},onTabRename:function(y,o){function d(M){return M=M.replace(/'/g,"''"),(M=/[\s~!@#'\.,$%^&(\)<>]+/.test(M)?"'"+M+"'":M)+"!"}var g=this.tabNames,p=o.oldVal[_b(37)](),v=o.tab.name[_b(37)]();g[p]&&(delete g[p],g[v]=1,v=d(v),p=d(p),this[_b(549)](function(M){M.fn=M.fn.split(p).join(v)}))},onChange:function(y,o){this.addRowIndx(o.addList),o.addList.length||o.deleteList.length||this.computeAll()},onColumnAMR:function(){var y,o,d=this.that,g=D.shiftRC(d),p=d.colIndxs;this[_b(549)](function(v,M,T){v.ci!=(y=p[T])&&(o=y-v.ciO,v.ci=y,v.fn=g(v.fnOrig,o,v.ri-v.riO))}),null!=y&&this.computeAll()},onEditorBegin:function(y,o){var d=this.getFnW(o.rowData,o.dataIndx);d&&o.$editor.val("="+d.fn)},onEditorEnd:function(){pq.intel.hide()},onEditorKeyUp:function(y,d){var g=(d=d.$editor).val(),p=pq.intel,v=window[_b(206)]().getRangeAt(0)[_b(551)];g&&0===g.indexOf("=")&&(p.popup(g,v,d),this.select(g,v))},onDataReadyDone:function(){function y(T){for(var I,P,N=(T=T||[]).length;N--;)(I=T[N])&&(P=I.pq_fn)&&M(I,N,P)}var o,d=this,g=d.that,p=D.shiftRC(g),v=g.colIndxs,M=function(T,I,P){var N,V,J;for(V in P)o=!0,"string"==typeof(N=P[V])?d.save(T,V,d.check(N),I,v[V]):N.ri!=I&&(J=I-N.riO,N.ri=I,N.fn=p(N.fnOrig,N.ci-N.ciO,J))};y(g.get_p_data()),y(g.options[_b(23)]),d.initObj(),o&&d.computeAll()},getFnW:function(y,o){if(y=y.pq_fn)return y[o]},remove:function(y,o){var d,g=y.pq_fn;if(g&&(d=g[o]))return delete g[o],pq.isEmpty(g)&&delete y.pq_fn,d},range:function(v){v=v.split(":");var o=this.that,d=(g=this.toCell(v[0])).r,g=g.c,p=(v=this.toCell(v[1])).r;return v=v.c,this.valueArr(null==d?0:d,null==g?0:g,null==p?o.get_p_data().length-1:p,null==v?o.colModel.length-1:v)},save:function(y,o,d,g,p){return d={clean:0,fn:d=d.replace(/^=/,""),fnOrig:d,riO:g,ciO:p,ri:g,ci:p},(y.pq_fn=y.pq_fn||{})[o]=d},selectRange:function(p,o){var d,g;if(p=D.selectExp(p,o))return/^([a-z0-9]+):([a-z0-9]+)$/i.test(p)?(o=p.split(":"),d=this.toCell(o[0]),o=this.toCell(o[1]),g={r1:d.r,c1:d.c,r2:o.r,c2:o.c}):/^[a-z]+[0-9]+$/i.test(p)&&(g={r1:(d=this.toCell(p)).r,c1:d.c}),g},select:function(y,o){y=this[_b(552)](y,o),o=this.that,y?o.Range(y).select():o.Selection().removeAll()},toCell:function(y){return{c:(y=y.match(/\$?([A-Z]+)?\$?(\d+)?/))[1]?pq.toNumber(y[1]):null,r:y[2]?y[2]-1:null}},valueArr:function(y,o,d,g){var p,v,M,T,I,P,ie,N=(ie=this.that).colModel,V=N.length,J=[],W=[],re=[],ce=ie.get_p_data();for(g=null==g?o:g,o=o<0?0:o,d=(ie=ce.length)<=(d=null==d?y:d)?ie-1:d,g=V<=g?V-1:g,p=y=y<0?0:y;p<=d;p++){for(M=ce[p],v=o;v<=g;v++)(I=this.getFnW(M,T=N[v].dataIndx))?P=this[_b(550)](I,M[T]):null==(P=M[T])&&(P=""),J.push(P),re.push(P);W.push(re),re=[]}return J.get2Arr=function(){return W},J.getRange=function(){return{r1:y,c1:o,r2:d,c2:g}},J}}}(jQuery),function(K){pq.intel={removeFn:function(U){return U.length===(U=U.replace(/[a-z]*\([^()]*\)/gi,"")).length?U:this.removeFn(U)},removeStrings:function(U){return(U=U.replace(/"[^"]*"/g,"")).replace(/"[^"]*$/,"")},getMatch:function(U,D){var y,o=pq.formulas,d=[];for(y in U=U[_b(37)](),o)if(D){if(y===U)return[y]}else 0===y.indexOf(U)&&d.push(y);return d},intel:function(U){var D,y;return U=this[_b(553)](U),(U=(U=this.removeFn(U)).match(/^=(.*[,+\-&*\s(><=])?([a-z]+)((\()[^)]*)?$/i))&&(D=U[2],U[4]&&(y=!0)),[D,y]},movepos:function(U){var D;return(D=U.match(/([^a-z].*)/i))?U.indexOf(D[1])+1:U.length},intel3:function(U,D){return D<U.length&&/=(.*[,+\-&*\s(><=])?[a-z]+$/i.test(U.slice(0,D))&&(D+=this.movepos(U.slice(D))),U=U.substr(0,D),this.intel(U)},item:function(U){var D=this.that.options[_b(554)];return"<div>"+((D=D?D[U]:null)?D[0]:U)+"</div>"+(D?_a(269)+D[1]+"</div>":"")},popup:function(p,D,y){var o=y.closest(".pq-grid"),d=K(".pq-intel"),g=o;p=this.intel3(p,D),this.that=o.pqGrid("instance"),d.remove(),(D=p[0])&&(o=this.getMatch(D,p[1]).map(this.item,this).join(""))&&K(_a(270)).appendTo(g).html(o).position({my:"center top",at:"center bottom",collision:"flipfit",of:y,within:g})},hide:function(){K(".pq-intel").remove()}}}(jQuery),function($){var f=pq.formulas={evalify:function(K,o){var D,y,d=(o=o.match(/([><=]{1,2})?(.*)/))[1]||"=",g=o[2],p=this;return/(\*|\?)/.test(g)?D=g.replace(/\*/g,".*").replace(/\?/g,"\\S").replace(/\(/g,"\\(").replace(/\)/g,"\\)"):(d="="===d?"==":"<>"===d?"!=":d,y=this.ISNUMBER(g)),K.map(function(v){return D?("<>"===d?"!":"")+"/^"+D+'$/i.test("'+(v=null==v?"":v)+'")':y?p.ISNUMBER(v)?v+d+g:"false":'"'+((v=null==v?"":v)+"")[_b(37)]()+'"'+d+'"'+(g+"")[_b(37)]()+'"'})},get2Arr:function(K){return K.get2Arr?K.get2Arr():K},ISNUMBER:function(K){return parseFloat(K)==K},_reduce:function(K,U){var D=[],y=U.map(function(){return[]});return K.forEach(function(o,d){null!=o&&(o=+o,isNaN(o)||(D.push(o),y.forEach(function(g,p){g.push(U[p][d])})))}),[D,y]},reduce:function(K){var D=(K=this.toArray(K)).shift(),y=K.filter(function(o,d){return d%2==0}),U=this._reduce(D,y);return y=U[1],[D=U[0]].concat(K.map(function(o,d){return d%2==0?y[d/2]:K[d]}))},strDate1:_a(271),strDate2:_a(272),strDate3:_a(273),strTime:_a(274),isDate:function(K){return this.reDate.test(K)&&Date.parse(K)||K&&K.constructor==Date},toArray:function(K){for(var U=[],D=0,y=K.length;D<y;D++)U.push(K[D]);return U},valueToDate:function(K){var U=new Date(Date.UTC(1900,0,1));return U.setUTCDate(U.getUTCDate()+K-2),U},varToDate:function(K){var U,D,y,o,d;if(this.ISNUMBER(K))U=this[_b(555)](K);else if(K.getTime)U=K;else if("string"==typeof K){if((D=(K=$.trim(K)).match(this.reDateTime))?D[12]?(d=+D[13],o=+D[15],y=+D[14]):(y=+D[2],o=+D[3],d=+D[4]):(D=K.match(this.reDate2))?(d=+D[1],o=+D[3],y=+D[2]):(D=K.match(this.reDate1))?(y=+D[1],o=+D[2],d=+D[3]):(D=K.match(this.reDate3))&&(o=+D[1],y=+D[2],d=+D[3]),!D)return K;K=Date.UTC(d,y-1,o),U=new Date(K)}return U},_IFS:function(arg,fn){for(var len=arg.length,i=0,arr=[],a=0;i<len;i+=2)arr.push(this.evalify(arg[i],arg[i+1]));for(var condsIndx=arr[0].length,lenArr=len/2,j;condsIndx--;){for(j=0;j<lenArr&&eval(arr[j][condsIndx]);j++);a+=j===lenArr?fn(condsIndx):0}return a},ABS:function(K){return Math.abs(K.map?K[0]:K)},ACOS:function(K){return Math.acos(K)},ADDRESS:function(K,U,D){return(2==D||4==D?"":"$")+pq.toLetter(U-1)+(3==D||4==D?"":"$")+K},AND:function(){var arr=this.toArray(arguments);return eval(arr.join(" && "))},ASIN:function(K){return Math.asin(K)},ATAN:function(K){return Math.atan(K)},_AVERAGE:function(K){var U=0,D=0;if(K.forEach(function(y){parseFloat(y)==y&&(D+=+y,U++)}),U)return D/U;throw"#DIV/0!"},AVERAGE:function(){return this._AVERAGE(pq.flatten(arguments))},AVERAGEIF:function(K,U,D){return this.AVERAGEIFS(D||K,K,U)},AVERAGEIFS:function(){var D=this.reduce(arguments),K=0,U=D.shift();if(D=this._IFS(D,function(y){return K++,U[y]}),K)return D/K;throw"#DIV/0!"},TRUE:!0,FALSE:!1,CEILING:function(K){return Math.ceil(K)},CHAR:function(K){return String[_b(60)](K)},CHOOSE:function(){var K=pq.flatten(arguments),U=K[0];if(0<U&&U<K.length)return K[U];throw"#VALUE!"},CODE:function(K){return(K+"").charCodeAt(0)},COLUMN:function(K){return(K||this).getRange().c1+1},COLUMNS:function(K){return(K=K.getRange()).c2-K.c1+1},CONCATENATE:function(){var K=pq.flatten(arguments),U="";return K.forEach(function(D){U+=D}),U},COS:function(K){return Math.cos(K)},_COUNT:function(U){U=pq.flatten(U);var D=this,y=0,o=0,d=0;return U.forEach(function(g){null==g||""===g?y++:(o++,D.ISNUMBER(g)&&d++)}),[y,o,d]},COUNT:function(){return this._COUNT(arguments)[2]},COUNTA:function(){return this._COUNT(arguments)[1]},COUNTBLANK:function(){return this._COUNT(arguments)[0]},COUNTIF:function(K,U){return this.COUNTIFS(K,U)},COUNTIFS:function(){return this._IFS(arguments,function(){return 1})},DATE:function(K,U,D){if(K<0||9999<K)throw"#NUM!";return K<=1899&&(K+=1900),this.VALUE(new Date(Date.UTC(K,U-1,D)))},DATEVALUE:function(K){return this.DATEDIF("1/1/1900",K,"D")+2},DATEDIF:function(d,o,D){o=this.varToDate(o),d=this.varToDate(d);var y,g=(o.getTime()-d.getTime())/864e5;if("Y"===D)return parseInt(g/365);if("M"===D)return y=o[_b(556)]()-d[_b(556)]()+12*(o[_b(557)]()-d[_b(557)]()),d.getUTCDate()>o.getUTCDate()&&y--,y;if("D"===D)return g;throw"unit N/A"},DAY:function(K){return this.varToDate(K).getUTCDate()},DAYS:function(K,U){return this.DATEDIF(U,K,"D")},DEGREES:function(K){return 180/Math.PI*K},EOMONTH:function(K,U){return U=U||0,(K=this.varToDate(K))[_b(558)](K[_b(556)]()+U+1),K.setUTCDate(0),this.VALUE(K)},EXP:function(K){return Math.exp(K)},FIND:function(K,U,D){return U.indexOf(K,D?D-1:0)+1},FLOOR:function(K,U){return K*U<0?"#NUM!":parseInt(K/U)*U},HLOOKUP:function(K,U,D,y){return null==y&&(y=!0),U=this.get2Arr(U),K=this.MATCH(K,U[0],y?1:0),this.INDEX(U,D,K)},HOUR:function(K){return Date.parse(K)?new Date(K).getHours():24*K},IF:function(K,U,D){return K?U:D},INDEX:function(K,U,D){return U=U||1,D=D||1,"function"==typeof(K=this.get2Arr(K))[0].push?K[U-1][D-1]:K[1<U?U-1:D-1]},INDIRECT:function(K){return this.iFormula[0<K.indexOf(":")?"range":"cell"](K)},ISBLANK:function(K){return""===K},LARGE:function(K,U){return K.sort(),K[K.length-(U||1)]},LEFT:function(K,U){return K.substr(0,U||1)},LEN:function(K){return 1<(K=(K.map?K:[K]).map(function(U){return U.length})).length?K:K[0]},LOOKUP:function(K,U,D){return D=D||U,K=this.MATCH(K,U,1),this.INDEX(D,1,K)},LOWER:function(K){return(K+"")[_b(559)]()},_MAXMIN:function(K,U){var D,y=this;return K.forEach(function(o){null!=o&&(o=y.VALUE(o),y.ISNUMBER(o)&&(D*U<o*U||null==D)&&(D=o))}),null!=D?D:0},MATCH:function(val,arr,type){var ISNUMBER=this.ISNUMBER(val),_isNumber,indx,_val,i=0,len=arr.length;if(null==type&&(type=1),val=ISNUMBER?val:val[_b(37)](),0===type){for(arr=this.evalify(arr,val+""),i=0;i<len;i++)if(_val=arr[i],eval(_val)){indx=i+1;break}}else{for(i=0;i<len;i++)if(_val=arr[i],_isNumber=this.ISNUMBER(_val),_val=arr[i]=_isNumber?_val:_val?_val[_b(37)]():"",val==_val){indx=i+1;break}if(!indx){for(i=0;i<len;i++)if(_val=arr[i],_isNumber=this.ISNUMBER(_val),type*(_val<val?-1:1)==1&&ISNUMBER==_isNumber){indx=i;break}indx=null==indx?i:indx}}if(indx)return indx;throw"#N/A"},MAX:function(){var K=pq.flatten(arguments);return this._MAXMIN(K,1)},MEDIAN:function(){var K=pq.flatten(arguments).filter(function(y){return+y==y}).sort(function(y,o){return o-y}),U=K.length,D=U/2;return D===parseInt(D)?(K[D-1]+K[D])/2:K[(U-1)/2]},MID:function(K,U,D){if(U<1||D<0)throw"#VALUE!";return K.substr(U-1,D)},MIN:function(){var K=pq.flatten(arguments);return this._MAXMIN(K,-1)},MODE:function(){var K,U,D=pq.flatten(arguments),y={},o=0;if(D.forEach(function(d){K=y[d]=y[d]?y[d]+1:1,o<K&&(o=K,U=d)}),o<2)throw"#N/A";return U},MONTH:function(K){return this.varToDate(K)[_b(556)]()+1},OR:function(){var arr=this.toArray(arguments);return eval(arr.join(" || "))},PI:function(){return Math.PI},POWER:function(K,U){return Math.pow(K,U)},PRODUCT:function(){var K=pq.flatten(arguments),U=1;return K.forEach(function(D){U*=D}),U},PROPER:function(K){return K.replace(/(\S+)/g,function(U){return U.charAt(0)[_b(37)]()+U.substr(1)[_b(54)]()})},RADIANS:function(K){return Math.PI/180*K},RAND:function(){return Math.random()},RANK:function(K,U,D){for(var y=JSON.stringify(U.getRange())+"_range",o=0,d=(U=this[y]||(this[y]=U).sort(function(g,p){return g-p})).length;o<d;o++)if(K===U[o])return D?o+1:d-o},RATE:function(){},REPLACE:function(K,U,D,y){return(K+="").substr(0,U-1)+y+K.substr(U+D-1)},REPT:function(K,U){for(var D="";U--;)D+=K;return D},RIGHT:function(K,U){return K.substr(-1*(U=U||1),U)},_ROUND:function(o,y,D){o*=y=Math.pow(10,y);var d=parseInt(o);return D(d,o-d)/y},ROUND:function(K,U){return this._ROUND(K,U,function(D,y){var o=Math.abs(y);return D+(.5<=o?o/y:0)})},ROUNDDOWN:function(K,U){return this._ROUND(K,U,function(D){return D})},ROUNDUP:function(K,U){return this._ROUND(K,U,function(D,y){return D+(y?Math.abs(y)/y:0)})},ROW:function(K){return(K||this).getRange().r1+1},ROWS:function(K){return(K=K.getRange()).r2-K.r1+1},SEARCH:function(K,U,D){return K=K[_b(37)](),(U=U[_b(37)]()).indexOf(K,D?D-1:0)+1},SIN:function(K){return Math.sin(K)},SMALL:function(K,U){return K.sort(),K[(U||1)-1]},SQRT:function(K){return Math.sqrt(K)},_STDEV:function(K){var U=(K=pq.flatten(K)).length,D=this._AVERAGE(K),y=0;return K.forEach(function(o){y+=(o-D)*(o-D)}),[y,U]},STDEV:function(){var K=this._STDEV(arguments);if(1===K[1])throw"#DIV/0!";return Math.sqrt(K[0]/(K[1]-1))},STDEVP:function(){var K=this._STDEV(arguments);return Math.sqrt(K[0]/K[1])},SUBSTITUTE:function(K,U,D,y){var o=0;return K.replace(new RegExp(U,"g"),function(){return o++,y&&o!==y?U:D})},SUM:function(){var K=pq.flatten(arguments),U=0,D=this;return K.forEach(function(y){y=D.VALUE(y),D.ISNUMBER(y)&&(U+=parseFloat(y))}),U},SUMIF:function(K,U,D){return this.SUMIFS(D||K,K,U)},SUMIFS:function(){var K=this.reduce(arguments),U=K.shift();return this._IFS(K,function(D){return U[D]})},SUMPRODUCT:function(){var K=(K=this.toArray(arguments))[0].map(function(U,D){var y=1;return K.forEach(function(o){o=o[D],y*=parseFloat(o)==o?o:0}),y});return pq.aggregate.sum(K)},TAN:function(K){return Math.tan(K)},TEXT:function(K,U){var D;return this.ISNUMBER(K)&&0<=U.indexOf("#")?pq[_b(47)](K,U):(D=this.varToDate(K))&&D.constructor==Date?$.datepicker.formatDate(pq.excelToJui(U),D):K},TIME:function(K,U,D){return(K+U/60+D/3600)/24},TIMEVALUE:function(d){var U,D,y,o;if(!(d=d.match(this.reTime))||null==d[1]||null==d[3]&&null==d[7]||(U=+d[1],o=+(d[3]||0),D=+(d[5]||0),y=(d[7]||"")[_b(37)](),o=U+o/60+D/3600),0<=o&&(y&&o<13||!y&&o<24))return"PM"==y&&U<12?o+=12:"AM"==y&&12==U&&(o-=12),o/24;throw"#VALUE!"},TODAY:function(){var K=new Date;return this.VALUE(new Date(Date.UTC(K[_b(471)](),K.getMonth(),K.getDate())))},TRIM:function(K){return K.replace(/^\s+|\s+$/gm,"")},TRUNC:function(K,U){return~~(K*(U=Math.pow(10,U||0)))/U},UPPER:function(K){return(K+"")[_b(560)]()},VALUE:function(K){var U,D,y;return K?parseFloat(K)==K?parseFloat(K):this.isDate(K)?this.DATEVALUE(K):(U=K.match(this.reDateTime))?(y=K.substr((D=U[1]||U[12]).length+1),this.DATEVALUE(D)+this.TIMEVALUE(y)):(U=K.match(this.reTime))?this.TIMEVALUE(K):K.replace(/[^0-9\-.]/g,"").replace(/(\.[1-9]*)0+$/,"$1").replace(/\.$/,""):0},VAR:function(){var K=this._STDEV(arguments);return K[0]/(K[1]-1)},VARP:function(){var K=this._STDEV(arguments);return K[0]/K[1]},VLOOKUP:function(d,U,D,y){null==y&&(y=!0);var o=(U=this.get2Arr(U)).map(function(g){return g[0]});return d=this.MATCH(d,o,y?1:0),this.INDEX(U,d,D)},YEAR:function(K){return this.varToDate(K)[_b(557)]()}};f.reDate1=new RegExp("^"+f.strDate1+"$"),f.reDate2=new RegExp("^"+f.strDate2+"$"),f.reDate3=new RegExp("^"+f.strDate3+"$"),f.reDate=new RegExp("^"+f.strDate1+"$|^"+f.strDate2+"$|^"+f.strDate3+"$"),f.reTime=new RegExp("^"+f.strTime+"$","i"),f.reDateTime=new RegExp("^("+f.strDate1+")\\s"+f.strTime+"$|^("+f.strDate2+")\\s"+f.strTime+"$|^("+f.strDate3+")\\s"+f.strTime+"$")}(jQuery),function(K){pq.Select=function(U,D){if(this instanceof pq.Select==0)return new pq.Select(U,D);var y=D.closest(".pq-grid"),o=K("<div/>").appendTo(y);pq.grid(o,K.extend({width:D[0][_b(40)],scrollModel:{autoFit:!0},height:"flex",autoRow:!1,numberCell:{show:!1},hoverMode:"row",fillHandle:"",stripeRows:!1,showTop:!1,showHeader:!1},U)),pq.makePopup(o[0],D[0]),o.position({my:"left top",at:"left bottom",of:D,collision:"flipfit",within:y})}}(jQuery),function(K){function U(g){this.options=g.options}U.prototype={empty:function(){for(var g in this)0==g.indexOf("_")&&delete this[g];delete this.options.dataModel[_b(319)]},getCM:function(){return this._cm},setCM:function(g){this._cm=g},getCols:function(){return this._columns},setCols:function(g){this._columns=g},getDMData:function(){return this.options.dataModel[_b(319)]},setDMData:function(g){this.options.dataModel[_b(319)]=g},getOCM:function(){return this._ocm},setOCM:function(g){this._ocm=g}},K(document).on("pqGrid:bootup",function(g,v){var M=(v=v.instance).Group();M.primary=new U(v),v.on("beforeFilterDone",M[_b(561)].bind(M)).one("CMInit",M.oneCMInit.bind(M))});var D,y={},o={clearPivot:function(g){if(this.isPivot()){var p=this.that,v=p.options.dataModel,M=(T=this.primary).getOCM(),T=T.getDMData();if(M&&p.refreshCM(M),g){if(!T)throw"!primary.getDMData";v.data=T}else T&&(v.data=T);return this.primary.empty(),this.setPivot(!1),!0}},getColsPrimary:function(){return this.primary.getCols()||this.that.columns},getCMPrimary:function(){return this.primary.getCM()||this.that.colModel},getOCMPrimary:function(){return this.primary.getOCM()||this.that.options.colModel},getSumCols:function(){var g=")"+(this.that.options.rtl?"&lrm;":"");return(y.getSumCols.call(this)||[]).map(function(p){return[p.dataIndx,p.dataType,p.summary,p.summary.type+"("+p.title+g,p.width,p.format,p.showifOpen]})},getVal:function(){return this._pivot?function(g,p){return g[p]}:y.getVal.apply(this,arguments)},groupData:function(){var g,p,v,M,T,I,P=this.that,N=P.options.groupModel,V=N.dataIndx,J=N.groupCols,W=this.primary,re=J.length;(W=W.getDMData())&&W[0]!=P.pdata[0]||(N.pivot&&(g=V.slice(),N.dataIndx=V=V.concat(J),p=N[_b(12)],v=N.titleIndx,M=N.merge,N[_b(12)]=!1,N.titleIndx=null,N.merge=!1),y.groupData.call(this),N.pivot&&(P.pdata=P.pdata.reduce(function(ce,ie){return ie.pq_gtitle&&ce.push(ie),ce},[]),v?(N[_b(12)]=p,N.titleIndx=v):1<g.length&&(N.merge=M),this.pivotData(V,g),N.dataIndx=g.slice(0,g.length-1),N[_b(18)]="all",re?(T=v,I=g[g.length-1],y.groupData.call(this,!0),v&&T!=I&&P.pdata.forEach(function(ce){ce.pq_gtitle||(ce[T]=ce[I])})):v&&P.pdata.forEach(function(ce){ce[v]=ce[[V[ce.pq_level]]]}),N.dataIndx=g,this.setPivot(!0)),P._trigger("groupData"))},isPivot:function(){return this._pivot},getSorter:function(g){return g[_b(562)]||("number"==pq[_b(46)](g)?function(p,v){return+p.sortby>+v.sortby?1:-1}:function(p,v){return p.sortby>v.sortby?1:-1})},nestedCM:function(g,p){var v=this,M=p.groupCols,T=p[_b(563)],I="hideifOpen"!=T&&null,P=[],N=[],V=v.that.columns;return V=M.map(function(J){return P.push(v.getSorter(J=V[J])),N.push(pq[_b(46)](J)),J}),function J(W,re,ce){re=re||0,ce=ce||[];var ie,ae,we,Me,Pe,Ve,le,st,We=0,at=[];if(K[_b(215)](W))for(;We<g.length;We++)ie=g[We],(ae=ce.slice()).push(ie[0]),we={dataIndx:ae.join("_"),dataType:ie[1],summary:ie[2],title:ie[3],width:ie[4],format:ie[5],showifOpen:ie[6]},at.push(we);else{for(Pe in ie=V[re],Me=N[re],W)le="aggr"===Pe,(ae=ce.slice()).push(Pe),Ve=J(W[Pe],re+1,ae),le?(st=Ve).forEach(function(Te){Te.showifOpen=I,Te.type="aggr"}):(we={showifOpen:!0,sortby:Pe,title:pq.format(ie,Pe,Me),colModel:Ve},1<Ve.length&&!Ve.find(function(Te){return!Te.type}).dataIndx&&(we[_b(90)]={on:!0,last:null}),at.push(we));at.sort(P[re]),st&&at["before"==T?"unshift":"push"].apply(at,st)}return at}},onBeforeFilterDone:function(g,p){if(this.isPivot()){for(var v=p.rules,M=this.primary.getCols(),T=0;T<v.length;T++)if(!M[v[T].dataIndx])return!1;this.clearPivot(!0),p.header=!0}},oneCMInit:function(){this.updateAgg(this.that.options.groupModel.agg)},option:function(g,p,v,M){this.isPivot()&&this.clearPivot(),y.option.call(this,g,p,v,M)},pivotData:function(ce,p){var v=this.that,M=this.getSumCols(),re=this.getSumDIs(),T=v.options,I=T.groupModel,P=this.primary,W=v.pdata,N=v.columns,V=I.titleIndx,J=V?[N[V]].concat(p.reduce(function(ie,ae){return ae!=V&&ie.push(K.extend({hidden:!0},N[ae])),ie},[])):p.map(function(ie){return N[ie]});W=this[_b(564)](W,re,ce,p),re=this.nestedCM(M,I)(W),(ce={}).CM=J=J.concat(re),v._trigger("pivotCM",null,ce),P.setOCM(T.colModel),P.setCM(v.colModel),P.setCols(v.columns),v.refreshCM(ce.CM,{pivot:!0})},setPivot:function(g){this._pivot=g},transformData:function(g,p,v,M){var T,I,P,N,we,V=this,J=[],W=this.that,re=this.primary,ce={},ie=[],ae=(we=W.options).dataModel,Me=(we=we.groupModel)[_b(563)],Pe=M.length,Ve={},le=v.length;return Pe==le?(g.forEach(function(st){st.pq_level==Pe-1&&(delete st.children,delete st.pq_gtitle)}),V[_b(433)](g),J=g):g.forEach(function(st){var We,at,Te=st.pq_level,qe=Te-Pe,Bt=Ve,Ze=v[Te],Zn=st[Ze];if(0<=qe)for(ie[qe]=Zn,We=0;We<1+qe;We++)Bt=Bt[at=ie[We]]=Bt[at]||{};Te===le-1?p.forEach(function(jt){(N=ie.slice()).push(jt),P[N.join("_")]=st[jt]}):((!P||Te<I&&Te<Pe)&&(P={pq_gid:V.idCount++},T=!0),Te<Pe&&(ce[Ze]=P[Ze]=Zn),Me&&Te<=le-2&&Pe-1<=Te&&p.forEach(function(jt){(N=ie.slice(0,1+qe)).push("aggr"),N.push(jt),P[N.join("_")]=st[jt]})),I=Te,T&&(J.push(P),M.forEach(function(jt){void 0===P[jt]&&(P[jt]=ce[jt])}),T=!1)}),re.setDMData(ae.data),ae.data=W.pdata=J,Me&&this[_b(565)](Ve,we[_b(566)]),Ve},addAggrInCM:function(g,p){var v,M=0;for(v in g)M++,this[_b(565)](g[v],p);(p?0:1)<M&&(g.aggr={})},updateAgg:function(g,p){var v,M=this.that.columns;if(p)for(v in p)M[v].summary=null;if(g)for(v in g)M[v].summary={type:g[v]}}},d=K.paramquery.cGroup.prototype;for(D in o)y[D]=d[D],d[D]=o[D]}(jQuery),function(K){var U,D=K.paramquery;D.pqGrid.defaults.toolPanel={},D.pqGrid.prototype.ToolPanel=function(){return this.iToolPanel},K(document).on("pqGrid:bootup",function(y,o){(o=o.instance).iToolPanel=new D.cToolPanel(o)}),D.cToolPanel=function(y){this.that=y,this.panes=[],this.clsSort="pq-sortable",y.one("render",this.init.bind(this))},D.cToolPanel.prototype={getArray:function(y){return y.find(".pq-pivot-col").get().map(function(o){return o.dataset.di})},getInit:function(){return this._inited},getObj:function(y){var o={};return y.find(".pq-pivot-col").each(function(d,g){o[g.dataset.di]=g[_b(567)]("type")||"sum"}),o},getSortCancel:function(){return this[_b(568)]},_hide:function(y){this.$ele[y?"hide":"show"](),this.init(),this.that.refresh({soft:!0})},hide:function(){this._hide(!0)},disablePivotChkBox:function(y){this.$pivotChk.prop("disabled",y)},init:function(){var y,o,d,g,p,v,M,T,I,P,N,V=this,J=V.$ele=V.that.$toolPanel;V.isVisible()&&!V.getInit()&&(d=(o=(y=V.that).options).toolPanel,P=o.groupModel,g=_a(275),p=_a(276),v=V[_b(569)](),M=d[_b(570)],T=d[_b(571)],I=P.pivot?"checked":"",P=P.on?"checked":"",N=V.clsSort,J.html([_a(277),p,"'>","<div class='",N,"' style='",M?"padding-top:0;":"","'></div>",M?"":["<div class='",g,"'>",_a(278),T?"disabled":"",_a(279),I,"/>",o[_b(572)],"</label>","</div>"].join(""),"</div>",_a(280),p,"' style='display:",d[_b(573)]?"none":"",";'>",_a(281),N,"'></div>","<div class='",g,"'>",d[_b(574)]?_a(282)+o[_b(575)]:_a(283)+P+"/>"+o[_b(575)]+"</label>","</div>","</div>",_a(284),p,"' style='display:",v?"none":"",";'>",_a(285),N,"'></div>","<div class='",g,_a(286),o[_b(576)],"</div>","</div>",_a(287),p,"' style='display:",d[_b(577)]?"none":"",";'>",_a(288),N,"'></div>","<div class='",g,_a(286),o[_b(578)],"</div>","</div>"].join("")),V.$pivotChk=J.find(".pq-pivot-checkbox").on("click",V[_b(579)](V,y)),V.$groupChk=J.find(".pq-group-checkbox").on("click",V[_b(580)](V,y)),V.$colsAll=J.find(".pq-pivot-cols-all>."+N),V.$colsPane=J.find(".pq-pivot-cols"),V.$cols=J.find(".pq-pivot-cols>."+N),V.$rows=J.find(".pq-pivot-rows>."+N),V.$aggs=J.find(".pq-pivot-vals>."+N).on("click contextmenu",V.onClick.bind(V)),y.on("refreshFull",V.setHt.bind(V)).on("groupOption",V[_b(581)].bind(V)),setTimeout(function(){y.element&&(y.on("CMInit",V.onCMInit.bind(V)),V.render())}),V.setInit())},isHideColPane:function(){var y=this.that.options;return y.toolPanel[_b(582)]||!y.groupModel.pivot},isDeny:function(y,o,d){return o=o.attr("deny"),this.that.iGroup[_b(166)]()[d[0].dataset.di][o]},isVisible:function(){return this.$ele.is(":visible")},onCMInit:function(y,o){o.pivot||o.flex||o.group||this.that.Group().isPivot()||this.refresh()},onClick:function(p){var o,d=K(p.target),g=this;if(p=g.that,d.hasClass("pq-pivot-col"))return o=d[0].dataset.di,o=p.iGroup[_b(166)]()[o],p={dataModel:{data:p.iGroup[_b(421)](o.dataType).sort().map(function(v){return[v]})},cellClick:function(v,T){var I=this;d.attr("type",T=T.rowData[0]),setTimeout(function(){I.destroy(),g[_b(583)](),g.refresh()})}},pq.Select(p,d),!1},onGroupOption:function(y,o){var d;"tp"!=o.source&&((d=this.that.options.groupModel).groupCols==(o=o.oldGM).groupCols&&d.agg==o.agg&&d.dataIndx==o.dataIndx&&d.pivot==o.pivot||this.refresh())},onPivotChange:function(y,o){return function(){o.Group().option({pivot:!!this.checked},null,"tp"),y[_b(584)]()}},onGroupChange:function(y,o){return function(){o.Group().option({on:!!this.checked},null,"tp")}},ph:function(y){return _a(289)+y+"</span>"},refreshGrid:function(){var y=this,o=y.that,d=y.getArray(y.$cols),g=y.getObj(y.$aggs),p=y.getArray(y.$rows);o.Group().option({groupCols:d,dataIndx:p,agg:g},null,"tp"),setTimeout(function(){y.refresh()})},onReceive:function(y,o){if(this[_b(585)]())return this[_b(586)](!1);this[_b(583)]()},onOver:function(y){return function(o,d){var g=K(this),p=d.item,v="removeClass",M=(M=p.parent())[0]!=g[0]&&y.isDeny(M,g,p);d.helper.find(".ui-icon")[M?"addClass":v]("ui-icon-closethick")[M?v:"addClass"]("ui-icon-check")}},onStop:function(y){return function(o,p){var g=K(this),v=(p=p.item).parent();g[0]!=v[0]&&y.isDeny(g,v,p)&&(g.sortable("cancel"),y[_b(586)](!0))}},onTimer:function(y,o){clearTimeout(U);var d=this;U=setTimeout(function(){d.onReceive(y,o)})},refresh:function(){this.that.element.is(":visible")?(this.setHtml(),K(this.panes).sortable("refresh")):this[_b(587)]=!0},render:function(){var y=this,o="."+y.clsSort,d=y.that;d.element&&(y.panes=[y.$colsAll,y.$cols,y.$rows,y.$aggs],y.setHtml(),K(y.panes).sortable({appendTo:y.$ele,connectWith:o,containment:y.$ele,cursor:"move",items:_a(290),helper:function(g,p){return p.clone(!0).css({opacity:"0.8"}).prepend(_a(291))},receive:y.onTimer.bind(y),stop:y.onStop(y),over:y.onOver(y),update:y.onTimer.bind(y),tolerance:"pointer"}),d._trigger("tpRender"))},setHtml:function(){var y,o,d=this,W=d.that,g=[],p=[],v=[],M=[],T=d.template,I=d[_b(588)],P={},N=W.options,V=(W=W.iGroup)[_b(166)](),J=W[_b(177)](),re=(W=N.groupModel).dataIndx,ce=W.groupCols,ie=0,ae=J.length,we=d.$groupChk[0],Me=d.$pivotChk[0];for(re.concat(ce).forEach(function(Pe){P[Pe]=1}),we&&(we.checked=W.on),Me&&(Me.checked=W.pivot),d[_b(584)]();ie<ae;ie++)o=(y=J[ie]).dataIndx,y.tpHide||P[o]||(y.summary&&y.summary.type?M.push(I(o,y)):g.push(T(o,y)));re.forEach(function(Pe){v.push(T(Pe,V[Pe]))}),ce.forEach(function(Pe){p.push(T(Pe,V[Pe]))}),d.$colsAll.html(g.join("")),d.$rows.html(v.join("")||d.ph(N[_b(589)])),d.$cols.html(p.join("")||d.ph(N[_b(590)])),d.$aggs.html(M.join("")||d.ph(N[_b(591)]))},setAttrPanes:function(){this.$ele.attr("panes",this.panes.filter(function(y){return y.is(":visible")}).length)},setHt:function(){this.$ele.height(this.$ele.parent()[0][_b(41)]),this[_b(587)]&&(this[_b(587)]=!1,this.refresh())},setSortCancel:function(y){this[_b(568)]=y},setInit:function(){this._inited=!0},show:function(){this._hide(!1)},showHideColPane:function(){this.$colsPane.css("display",this[_b(569)]()?"none":""),this[_b(592)]()},template:function(y,o){return["<div data-di='",y,_a(292),o.tpCls||"","'>",o.title,"</div>"].join("")},templateVals:function(y,o){var d=o.summary.type;return["<div data-di='",y,"' type='",d,_a(292),o.tpCls||"","'>",d,"(",o.title,")</div>"].join("")},toggle:function(){this._hide(this.isVisible())}}}(jQuery),function(K){function U(D){this.that=D,this.rtl=D.options.rtl,D.on("headerCellClick",this[_b(593)].bind(this)).on("destroy",this.onDestroy.bind(this))}K(document).on("pqGrid:bootup",function(D,y){var o=y.instance;o[_b(594)]=new U(o),o.HeaderMenu=function(){return o[_b(594)]}}),U.prototype={close:function(){this.$popup.remove(),this.$popup=null},popup:function(){return this.$popup},openFilterTab:function(){var D=this.$popup.find(_a(293)).closest("li").index();return this.$tabs.tabs("option","active",D),this.filterMenu},FilterMenu:function(){return this.filterMenu},getCM:function(){var D=this.that.options[_b(595)]||"Select All",y=this.nested;return[{editor:!1,dataIndx:"title",title:D,useLabel:!0,filter:{crules:[{condition:"contain"}]},type:y?null:"checkbox",cbId:y?null:"visible"},{hidden:!0,dataIndx:"visible",dataType:"bool",editable:function(o){return!o.rowData.pq_disable},cb:y?null:{header:!0}}]},getData:function(){var D=1,y=this,o=y.that,d=o[_b(115)];return o.Columns().reduce(function(g){var p=this.getColIndx({column:g}),v=!g.hidden,M=g.childCount;if(!g.menuInHide&&!g[_b(90)])return M&&(y.nested=!0),{visible:M?void 0:v,title:M?g.title:d.getTitle(g,p)||g.dataIndx,column:g,id:D++,pq_disable:g[_b(596)],pq_close:g[_b(597)],colModel:M?g.colModel:void 0}})},getGridObj:function(){var D=this.that;return K.extend({dataModel:{data:this.getData()},rtl:D.options.rtl,colModel:this.getCM(),check:this.onChange.bind(this),treeExpand:this[_b(598)].bind(this),treeModel:this.nested?{dataIndx:"title",childstr:"colModel",checkbox:!0,checkboxHead:!0,cbId:"visible",cascade:!0,useLabel:!0}:void 0},D.options.menuUI[_b(599)])},onChange:function(D,y){var o,d;y.init||(o=[],d=[],(y[_b(7)]?y[_b(7)]():y.rows).forEach(function(M){var p=(M=M.rowData).visible,v=(M=M.column).dataIndx;(M=M.colModel)&&M.length||(p?o:d).push(v)}),this.that.Columns().hide({diShow:o,diHide:d}))},onDestroy:function(){var D=this.$popup;D&&D.remove(),delete this.$popup},onHeadCellClick:function(D,y){var o=K(D[_b(32)].target);return o.hasClass("pq-filter-icon")?this[_b(600)](D,y,o):o.hasClass("pq-menu-icon")?this[_b(601)](D,y,o):null==this.that[_b(176)]().find(function(d){return!d.hidden})?this[_b(601)](D,y):void 0},getMenuHtml:function(d){var y={hideCols:"visible",filter:"filter"},o=d.map(function(g){return['<li><a href="#tabs-',g,_a(294),y[g],_a(295)].join("")}).join("");return d=d.map(function(g){return'<div id="tabs-'+g+'"></div>'}).join(""),[_a(296),this.rtl?"rtl":"ltr","'>",_a(297),"<ul>",o,"</ul>",d,"</div>","</div>"].join("")},getMenuH:function(D,y){return K.extend({},D.menuUI,y.menuUI)},open:function(D,y,o){var d,g,p=this,v=p.that,M=(y=y||v[_b(27)]({dataIndx:D}),D=null!=D?(p.menuH=p.getMenuH(v.options,d=v.columns[D])).tabs:["hideCols"],v=p.$popup=K(p[_b(602)](D)).appendTo(v.$header),p.$tabs=v.find(".pq-tabs"));return-1<D.indexOf("hideCols")&&(g=p.$grid=K("<div/>").appendTo(v.find("#tabs-hideCols")),p.grid=pq.grid(g,p.getGridObj())),-1<D.indexOf("filter")&&p[_b(603)](v.find("#tabs-filter"),d),pq.makePopup(p.$popup[0]),M.tabs({active:localStorage["pq-menu-tab"]||1,activate:function(T,I){localStorage["pq-menu-tab"]=K(this).tabs("option","active"),K(I.newPanel).find(".pq-grid").pqGrid("refresh")}}),v.resizable({handles:"e,w",maxWidth:600,minWidth:220}),v.position({my:"left top",at:"left bottom",of:o||y}),this},onMenuClick:function(D,y,o){return this.open(y.dataIndx,D,o),!1},onTreeExpand:function(D,y){y.nodes.forEach(function(o){o.column[_b(597)]=y.close})},appendFilter:function(p,y,T){var d=this,g=d.that,v=(p=K(_a(298)).appendTo(p),d.$popup||p),M=d.filterMenu=new(pq[_b(385)]);return T={filterRow:T,grid:g,column:y,$popup:v,menuH:this.menuH||this.getMenuH(g.options,y)},M.init(T),g=M.getHtml(),p.html(g),M.ready(p.children().get()),M.addEvents(),v.on("remove",function(){d.$popup=d.filterMenu=null}),p},onFilterClick:function(D,y,o){return y=this.$popup=this[_b(603)](this.that.$header,y.column,!0),pq.makePopup(y[0]),y.position({my:"left top",at:"left bottom",of:o}),!1}}}(jQuery),function(K){var U=pq[_b(385)]=function(){};(U.select=function(D,y){this.that=D,this.di1="selected",this.grid=null,this.column=y}).prototype={change:function(D){this.onChange(D).call(this.grid)},create:function(D,y,p){function d(M){var T=y[M];T&&T.call(g,v),g._trigger(M,null,v)}var g=this.that,v=(p=this.getGridObj(y,p),K.extend({obj:p,column:this.column},y));return d("selectGridObj"),p.rtl=g.options.rtl,v.grid=this.grid=pq.grid(D,p),d("selectGridCreated"),this.grid},getCM:function(D,y,o,d,g,M){var v=D.dataIndx;return M=K.extend({filter:{crules:[{condition:"contain"}]},align:"left",format:M.format||D.format,deFormat:D.deFormat,title:D.pq_title||D.title,dataType:D.dataType,dataIndx:v,editor:!1,useLabel:!0,renderLabel:this[_b(604)](d,v,this.that.options.strBlanks)},o?{}:{type:"checkbox",cbId:y}),o?[M,{dataIndx:y,dataType:"bool",hidden:!0},{dataIndx:o,hidden:!0}]:[M,{dataIndx:y,dataType:"bool",hidden:!0,cb:{header:!g,maxCheck:g}}]},getData:function(D,M){var o=this.that,d={},g=this.di1,p=(T=this.column).dataIndx,v=D.maxCheck,T=(M=pq.filter.getVal(M)[0],pq.filter.getOptions(T,D,o,!0));return K.isArray(M)?v&&(M=M.slice(0,v)):M=1==v?[M]:[],M.forEach(function(I){d[I]=!0}),T.forEach(M.length?function(I){I[g]=d[I[p]]}:function(I){I[g]=!v}),T},getGridObj:function(D,y){var T,o=this.column,d=this.that.options,g="gridOptions",p=D.groupIndx,v=D.maxCheck,M=this.di1,I=(T=this.getData(D,T=o.filter))&&T.length&&null!=T[0].pq_label?"pq_label":D.labelIndx;return this.filterUI=D,K.extend({colModel:this.getCM(o,M,p,I,v,D),check:this.onChange(!y),filterModel:"bool"===o.dataType?{}:void 0,groupModel:p?{on:!0,dataIndx:p?[p]:[],titleInFirstCol:!0,fixCols:!1,indent:18,checkbox:!0,select:!1,checkboxHead:!v,cascade:!v,maxCheck:v,cbId:M}:{},dataModel:{data:T}},d.menuUI[g],d[_b(157)][g],D[g])},getRenderLbl:function(D,y,o){return D===y&&(D=void 0),function(g){var p=(g=g.rowData)[D];return p||""!==g[y]?p:o}},onChange:function(D){var y=this,d=y.filterUI.condition;return function(){var g,p,v,M,T;D&&(g=!1,p=y.column.dataIndx,v=y.di1,M=y.that,T=this.getData().filter(function(I){return(I=I[v])||(g=!0),I}).map(function(I){return I[p]}),M.filter(g?{oper:"add",rule:{dataIndx:p,condition:d,value:T}}:{rule:{dataIndx:p,condition:d,value:[]}}),y[_b(605)]())}},refreshRowFilter:function(){this.that[_b(115)][_b(270)](this.column)}},U.prototype={addEvents:function(){var D=this;D.$sel0.on("change",D[_b(606)].bind(D)),D.$sel1.on("change",D[_b(607)].bind(D)),D[_b(608)].on("change",D[_b(609)].bind(D)),D.$clear.button().on("click",D.clear.bind(D)),D.$ok.button().on("click",D.ok.bind(D))},addEventsInput:function(){this.$inp&&(this.$inp.filter("[type='checkbox']").off("click").on("click",this.onInput.bind(this)),this.$inp.filter("[type='text']").off("keyup").on("keyup",this.onInput.bind(this)))},clear:function(){var D=this.that,d=this.column,y=this.cond0,o=this.getType(y);D.filter({rule:{dataIndx:d=d.dataIndx,condition:o?y:void 0},oper:"remove"}),this[_b(605)](),this.ready()},close:function(){this.$popup.remove()},filterByCond:function(D){var y,o,d,g,p,v,M,T=this,I=T.that,P=T.column.dataIndx,N=T.cond0,V=""===N,J=T.cond1,W=T.filterRow;T.showHide(N,J),W||(y=T.getModeVal(),o=T.getType(N),d=(g=T.getVal(0))[0],g=g[1],p=(v=T.getVal(1))[0],v=v[1],M=T.$gridR),"select"==o?(D&&I.filter({oper:"add",rule:{dataIndx:P,condition:N,value:[]}}),W||T.iRange.create(M,T.filterUI[0],T.btnOk)):D&&I.filter({oper:V?"remove":"add",rule:{dataIndx:P,mode:y,crules:[{condition:N,value:d,value2:g},{condition:J,value:p,value2:v}]}})},getBtnOk:function(){return this.$ok},getInp:function(D){return this["$inp"+D]},getSel:function(D){return this["$sel"+D]},getBtnClear:function(){return this.$clear},getHtmlInput:function(o){return"<input type='"+("checkbox"==(o=this.filterUI[o<2?0:1]).type?"checkbox":"text")+"' "+["name='",this.column.dataIndx,"' class='",o.cls||"","' style='width:100%;",o.style||"","display:none;' ",o.attr||""].join("")+" />"},getHtml:function(){function D(T,I){return[_a(299),y[_b(610)](T),"</div>",_a(299),y[_b(610)](I),"</div>"].join("")}var y=this,o=y.menuH,g=(p=(g=y.column.filter).crules||[])[0]||g,p=p[1]||{},d=y.that.options,v=(g=y.cond0=g.condition,p=y.cond1=p.condition,y.filterRow),M=(y[_b(611)](),pq.filter[_b(612)](this.column,y.filterUI[0]));return[_a(300),_a(299),d[_b(613)]," <select>",this[_b(614)](M,g),"</select></div>",v?"":["<div>",D(0,1),_a(301),o[_b(615)]?"":[_a(302),_a(303),_a(304),"</div>",_a(305),this[_b(614)](M,p,!0),"</select></div>",D(2,3)].join(""),"</div>"].join(""),_a(306),o.buttons.map(function(T){return"<button data-rel='"+T+_a(307)+(d["str"+pq.cap1(T)]||T)+"</button>"}).join(""),"</div>","</div>"].join("")},getMode:function(D){var y=this[_b(608)];return 0<=D?y[D]:y},getModeVal:function(){return this[_b(608)].filter(":checked").val()},getOptionStr:function(d,y,o){d=[""].concat(d);var g=this,p=g.that.options[_b(616)]||{};return(d=o?d.filter(function(v){return"select"!=g.getType(v)}):d).map(function(v){return'<option value="'+v+'" '+(y==v?"selected":"")+">"+(p[v]||v)+"</option>"}).join("")},getType:function(D){return pq.filter.getType(D,this.column)},getVal:function(M){var y,o,d=this.column,g=this["cond"+M],p=this["$inp"+(M?"2":"0")],v=p[0];return M=this["$inp"+(M?"3":"1")],p.is("[type='checkbox']")?(o=v[_b(16)],o=!!v.checked||!!o&&null):(p.is(":visible")&&(o=pq.deFormat(d,p.val(),g)),M.is(":visible")&&(y=pq.deFormat(d,M.val(),g))),[o,y]},init:function(D){var y=this.column=D.column;y.filter=y.filter||{},this.that=D.grid,this.menuH=D.menuH,this.$popup=D.$popup,this.filterRow=D.filterRow},initControls:function(){var D=this.filterUI[0],y=this.that,o={column:this.column,headMenu:!0};o.$editor=K([this.$inp0[0],this.$inp1[0]]),o.condition=this.cond0,o.type=D.type,(o.filterUI=D).init.find(function(d){return d.call(y,o)}),D=this.filterUI[1],o.$editor=K([this.$inp2[0],this.$inp3[0]]),o.condition=this.cond1,o.type=D.type,(o.filterUI=D).init.find(function(d){return d.call(y,o)})},isInputHidden:function(D){if("select"==D||!D)return!0},ok:function(){var D=this.cond0;"select"!=this.getType(D)||this.filterRow?D&&this[_b(617)](!0):this.iRange.change(!0),this.close(),this[_b(605)]()},onModeChange:function(){this[_b(617)](!this.btnOk)},onInput:function(y){y=K(y.target);var o=!this.btnOk;y.is(":checkbox")&&y.pqval({incr:!0}),this[_b(617)](o),o&&this[_b(605)]()},onSel1Change:function(){var D=!this.btnOk;this.cond0=this.getSel(0).val(),this[_b(611)](),this.filterRow||(this.$inp0[_b(314)](this[_b(610)](0)),this.$inp1[_b(314)](this[_b(610)](1)),this[_b(618)](),this[_b(619)]()),this[_b(617)](D),this[_b(605)]()},onSel2Change:function(){this.cond1=this.getSel(1).val(),this[_b(611)](),this.$inp2[_b(314)](this[_b(610)](2)),this.$inp3[_b(314)](this[_b(610)](3)),this[_b(618)](),this[_b(619)](),this[_b(617)](!this.btnOk)},ready:function(o){this.node=o=o||this.node,o=K(o);var y,d=this,g=d.that,p=d.column,v=p.filter,M=(T=v.crules||[])[0]||v,T=T[1]||{},I=d.cond0=M.condition,P=d.cond1=T.condition,N=d[_b(611)]();d.iRange=new(pq[_b(385)].select)(g,p),g=d.getType(I),p=d.getType(P),y=d.$select=o.find("select"),d.$sel0=K(y[0]).val(I),d.$sel1=K(y[1]).val(P),d[_b(608)]=o.find(_a(308)),d.$clear=o.find("[data-rel='clear']"),d.$ok=o.find("[data-rel='ok']"),d.btnOk=d.$ok.length,d.filterRow||(d[_b(618)](),d.$gridR=o.find("[data-rel='grid']"),d[_b(608)].filter("[value="+v.mode+"]").attr("checked","checked"),d[_b(620)]=o.find(".filter_mode_div"),d.showHide(I,P),"select"==g?d.iRange.create(d.$gridR,N[0],d.btnOk):d.readyInput(0,g,M),d.readyInput(1,p,T),d[_b(619)]())},readyInput:function(v,y,o){var d=this.column,g=this["cond"+v],p=this["$inp"+(v?"2":"0")];v=this["$inp"+(v?"3":"1")],p.is(":checkbox")&&p.pqval({val:o.value}),p.val(pq.formatEx(d,o.value,g)),"textbox2"==y&&v.val(pq.formatEx(d,o.value2,g))},readFilterUI:function(){var D=this.filterUI=[],y=this.that,o={column:this.column,condition:this.cond0,indx:0,headMenu:!0};return D[0]=pq.filter[_b(273)](o,y),o.condition=this.cond1,D[o.indx=1]=pq.filter[_b(273)](o,y),D},refreshInputVarsAndEvents:function(){var d=this.column,D=(d=this.$inp=K(this.node).find("input[name='"+d.dataIndx+_a(309)))[0],y=d[1],o=d[2];d=d[3],this.$inp0=K(D),this.$inp1=K(y),this.$inp2=K(o),this.$inp3=K(d),this[_b(621)]()},refreshRowFilter:function(){this.that[_b(318)]({dataIndx:this.column.dataIndx})},SelectGrid:function(){return this.$gridR.pqGrid("instance")},showHide:function(D,y){var o,d,g,p,v;this.filterRow||(d=(o=this)[_b(620)],g=o.$sel1,p=o.getType(D),v=o.$inp,"select"===p?(o.$gridR.show(),o.$gridR.hasClass("pq-grid")&&o.$gridR.pqGrid("destroy"),v.hide(),d.hide(),g.hide()):(o.$gridR.hide(),D?(o.$inp0[o[_b(622)](p)?"hide":"show"](),o.$inp1["textbox2"===p?"show":"hide"](),d.show(),g.show(),y?(D=o.getType(y),o.$inp2[o[_b(622)](D)?"hide":"show"](),o.$inp3["textbox2"===D?"show":"hide"]()):(o.$inp2.hide(),o.$inp3.hide())):(v.hide(),d.hide(),g.hide())))},updateConditions:function(){var D=this.column.filter;D.crules=D.crules||[{}],D.crules[0].condition=this.cond0,this.cond1&&(D.crules[1]=D.crules[1]||{},D.crules[1].condition=this.cond1)}}}(jQuery),function(K){var U=K.paramquery;K(document).on("pqGrid:bootup",function(D,y){new U.cEditor(y.instance)}),U.cEditor=function(D){var y=this,o=y.setDims.bind(y);(y.that=D).on("editorBeginDone",function(d,g){g.$td.addClass("pq-edited"),y.ui=g,y.setStyle(g),y.setDims();var p=g.editor.init;p&&D.callFn(p,g),"grid"!=g.editor.appendTo&&D.on("assignTblDims scroll",o)}).on("editorEnd",function(d,g){g.$td[_b(72)]("pq-edited"),D.off("assignTblDims scroll",o),delete y.ui})},U.cEditor.prototype={setStyle:function(D){var y=D.$td,o=y.children("div"),d=y.css("background-color");(d={fontSize:y.css("font-size"),fontFamily:y.css("font-family"),backgroundColor:d,color:y.css("color")}).padding=parseInt(o.css("padding-top"))+0+"px "+(parseInt(o.css("padding-right"))+0)+"px",D.$editor.css(d)},setDims:function(){var D,y,o,d,V,le,g=this.ui,p=this.that,v=g[_b(75)],M=g.colIndx,we=(Me=g.$td)[0],T=p.iRenderB,J=T.wdContLeft,I=T.$cright[0],P=T[_b(168)](v,M)[0],N=0,W=(J="textarea"==("right"==(V=T[_b(343)](v,M))&&(N=J),"tr"==V&&(N=J),V=g.$editor)[0].type,"true"==V[0][_b(623)]),re=V.closest(".pq-editor-outer"),ce=(T[_b(310)](v,M),Pe=p.options).rtl,ie=ce?"right":"left",Me=Me.offset(),ae=we[_b(40)],at=(we=we[_b(41)],Me.left),We=(Me=Me.top,at+ae),Pe=K.extend({},Pe.editModel,(le=g.column).editModel),Te=(Ve=(le=re.parent()).offset()).left,Ve=Ve.top,st=(le=le[0])[_b(40)];st=N<(st=ce?Te+st-We:at-Te)?st:N,at=we-2,Te={minWidth:We=ae-2},le==p.element[0]?(D={top:y=Me-Ve})[ie]=st:(ae=(N=T[_b(310)](v,M))[0],y=N[1]+1-P.scrollTop,st=ae+1-(ce?-1:1)*P.scrollLeft,o=I[_b(624)]-y,d=I[_b(63)]-st,Te.maxHeight=o,Te.maxWidth=d,(D={top:y})[ie]=st),re.css(D),We=d<We?d:We,Te.minHeight=at=o<at?o:at,Te.width=We,J&&(V.attr("rows")&&(Te.maxHeight=Te.minHeight=void 0),V.attr("columns")&&(Te.maxWidth=Te.minWidth=Te.width=void 0)),V.css(K.extend(Te,pq.styleObj(g.editor.style))),W&&V.pqContent(Pe.saveKey!=K.ui.keyCode.ENTER)}}}(jQuery),function(K){var D=pq.grid,y=K.paramquery.cProxy=function(o){(this.that=o).options.reactive&&this.init()};K(document).on("pqGrid:bootup",function(o,d){(d=d.instance).iProxy=new y(d)}),pq.isEqual=function(o,d){if(pq.isObject(o)){for(var g in o)if(!pq.isEqual(o[g],d[g]))return!1;return!0}return o===d},pq.grid=function(o,d){var g=D.apply(pq,arguments),p=g.iProxy,v=g.options;return v.reactive&&(g.on("filter",function(){d.dataModel&&(d.dataModel.data=v.dataModel.data),p.prxData()}),p.prxObj(d,p.onOption,!0)),g},y.prototype={init:function(){var o=this.that;this.prxData(),this.prxCM(),o.on("refresh",this.clear.bind(this)).on("dataReady",this.clearV.bind(this)).on("dataAvailable",this.clearDV.bind(this))},onOption:function(o,d){var g,p=this.that,v={},M=p.options;if(v[o]=d,p.element&&!pq.isEqual(v,M))if(this.refresh(),pq.isObject(M[o]))if("groupModel"==o)p.Group().option(d,!1),this[_b(17)]();else if("treeModel"==o)p.Tree().option(d);else if("sortModel"==o)p.sort(d);else for(g in"dataModel"==o?(d.data&&this.prxData(d.data),this[_b(625)]()):"pageModel"!=o||!d.rPP&&null==d.type||this[_b(625)](),d)p.option(o+"."+g,d[g]);else"colModel"==o?this.prxCM(d):"mergeCells"==o&&this[_b(17)](),p.option(o,d)},onCMChange:function(){var o=this,d=o.that;clearTimeout(o.CMtimer),o.CMtimer=setTimeout(function(){d.refreshCM(),o.refresh()}),d.one("CMInit",function(){clearTimeout(o.CMtimer)})},prxCM:function(p){var d=this;(p=p||d.that.options.colModel)&&(d.prxArray(p,d.onCMChange.bind(d)),p.forEach(function(v){v.colModel&&d.prxCM(v.colModel)}))},prxData:function(p){var d=this,g=d.that;(p=p||g.options.dataModel.data)&&d.prxArray(p,function(){clearTimeout(d.datatimer),d.datatimer=setTimeout(function(){d[_b(17)]()}),g.one("dataReady",function(){clearTimeout(d.datatimer)})})},prxArray:function(o,d){var g=this,p=Array.prototype;_a(310).split(" ").forEach(function(v){o[v]=function(){var M=arguments,T="splice"==v,I=Object[_b(626)](o)[v].apply(this,M);return"push"!=v&&!T&&"unshift"!=v||g[_b(627)](T?p.slice.call(M,2):M),d.call(g),I}}),g[_b(627)](o)},prxArrayObjs:function(o){for(var d=0,g=o.length;d<g;d++)this.prxObj(o[d])},prxObj:function(o,d,g,p){if(pq.isObject(o)&&"tabModel"!=p){var v,M,T="pq_proxy";for(M in o[T]||Object[_b(45)](o,T,{value:{},enumerable:!1}),(v=o[T]).__self=this,o)"pq_"!=M.substr(0,3)&&(g&&!p&&pq.isObject(o[M])&&this.prxObj(o[M],d,g,M),v.hasOwnProperty(M)||(Object[_b(45)](v,M,Object[_b(44)](o,M)),this.defineProp(o,v,M,d,g,p)))}},defineProp:function(o,d,g,p,v,M){Object[_b(45)](o,g,{get:function(){return d[g]},set:function(T){var I,P=d.__self;v&&!M&&pq.isObject(T)&&P.prxObj(T,p,v,g),d[g]=T,p?(I=T,M&&((I={})[g]=T),p.call(P,M||g,I)):P.refresh()},enumerable:!0})},clear:function(){clearTimeout(this.timer)},clearV:function(){this.clear(),clearTimeout(this.timerV)},clearDV:function(){this.clearV(),clearTimeout(this.timerDV)},X:function(o,d){var g=this;g[d]=setTimeout(function(){g.that.element&&g.that[o]()})},refresh:function(){this.clear(),this.X("refresh","timer")},refreshView:function(){this.clearV(),this.X("refreshView","timerV")},refreshDataView:function(){this.clearDV(),this.X("refreshDataAndView","timerDV")}}}(jQuery),function(K){K.widget("pq.drag",K.ui.mouse,{_create:function(){this._mouseInit()},_mouseCapture:function(U){return this._trigger("capture",U),!0},_mouseStart:function(U){return this._trigger("start",U),!0},_mouseDrag:function(U){this._trigger("drag",U)},_mouseStop:function(U){this._trigger("stop",U)}})}(jQuery),function(K){K(document).on("pqGrid:bootup",function(D,y){var o=y.instance;o.iPic=new U(o),o.Pic=function(){return o.iPic}});var U=K.paramquery.cPic=function(D){var y=this,o=D.options,d=y.rtl=o.rtl;y.id=0,y.left=d?"right":"left",y.pics=[],(y.that=D).on("dataAvailable",function(g,p){"filter"!=p.source&&(y.reset(),D.one("refresh",function(){y.addPics(o.pics)}))}).on("assignTblDims",y.refresh.bind(y))};U.prototype={addPics:function(D){var y=this;(D||[]).forEach(function(o){y.add(o.name,o.src,o.from,o.to,o.cx,o.cy,!0)})},create:function(D,y,o,N,g,p,v,M,T){var I=this,P=new Image,V=(N={position:"absolute",top:N,zIndex:5},K(P));P.src=y,N[I.left]=o,D.append(P),(y=V.attr({draggable:!1,"pic-id":T,tabindex:1}).css({height:p,width:g,cursor:"move"}).on("focus",function(){K(M).css({outline:"2px dotted #999"})}).on("keydown",function(J){J.keyCode==K.ui.keyCode.DELETE&&I.remove(I.getId(this))}).on("blur",function(){K(M).css({outline:""})}).resizable({resize:I.onResize(I,M,v)}).parent(".ui-wrapper").css(N)).find(".ui-resizable-se")[_b(72)]("ui-icon"),o=I.drag(y,M,v),V.drag({distance:3,capture:function(){V.focus()},start:o.start,drag:o.drag,stop:o.stop}),M.push(y[0])},drag:function(D,y,o){function d(re){return parseInt(D.css(re))}var g,p=this,v=p.that,M=v.iRenderB,T=o.cx,I=o.cy,P=M.leftArr,N=M.topArr,V=P[P.length-1],J=N[N.length-1],W=M.numColWd;return{start:function(re){g={pageX:re.pageX,pageY:re.pageY,scrollX:v.scrollX(),scrollY:v.scrollY()}},drag:function(re){var ce=v.scrollX(),ie=v.scrollY(),ae=(re.pageX+ce-g.pageX-g.scrollX)*(p.rtl?-1:1),we=re.pageY+ie-g.pageY-g.scrollY,Me=d(p.left),Pe=d("top"),Ve={};g.pageX=re.pageX,g.scrollX=ce,g.pageY=re.pageY,g.scrollY=ie,Me+ae-W<0?ae=W-Me:V+W<Me+ae+T&&(ae=V+W-Me-T),Pe+we<0?we=0-Pe:J<Pe+ae+I&&(we=J-Pe-I),Ve.top=Pe+we,Ve[p.left]=Me+ae,K(y).css(Ve)},stop:function(){var re=d(p.left)-W,ce=d("top"),ie=p.findIndx(P,re),ae=p.findIndx(N,ce);o.from=[ie,re-P[ie],ae,ce-N[ae]]}}},onResize:function(D,y,o){return function(d,v){var p=v.size.height,M={height:p,width:v=v.size.width};K(y).css(M),K(y).find("img").css(M),delete o.to,o.cx=v,o.cy=p}},getPos:function(D){var d;return[(d=(d=this.that.iRenderB).getCellXY(+D[2],+D[0]))[0]+D[1],d[1]+D[3]]},name:function(D){return D.replace(/[^0-9,a-z,A-Z,_\.]/g,"_")},refresh:function(){var D=this,y=D.that.widget();D.pics.forEach(function(p){var g=p.from,d=(p=p.id,(g=D.getPos(g))[0]);g={top:g[1]},p=y.find("[pic-id="+p+"]").parent(),g[D.left]=d,p.css(g)})},add:function(D,y,o,d,g,p,v){var M,T,I,P,N,V,J,W,re,ce,ie,ae=this;if(y)return"data:"!=y.substr(0,5)?(D=D||y.split("/").pop(),pq.urlToBase(y,function(we){ae.add(D,we,o,d,g,p,v)})):(T=(M=ae.that).iRenderB,N=ae.getPos(o),I=N[0],P=N[1],W=[],re=ae.id++,ie=function(we,Me){(J={name:D,src:y,get from(){var Pe=this._from;return[M.getColIndx({column:Pe[0]}),Pe[1],Pe[2].pq_ri,Pe[3]]},set from(Pe){this._from=[M.colModel[Pe[0]],Pe[1],M.getRowData({rowIndx:Pe[2]}),Pe[3]]},cx:we,cy:Me,id:re}).from=o,["$cright","$cleft","$clt","$ctr"].forEach(function(Pe){ae.create(T[Pe],y,I,P,we,Me,J,W,re)}),ae.pics.push(J),v||M.iHistory.push({callback:function(Pe){Pe?re=ae.add(D,y,o,d,we,Me,!0):ae.remove(re,!0)}}),M._trigger("picAdd")},d&&d.length?(N=(V=T.getCellXY(V=d[2],N=d[0]))[0]+d[1],ie(N-I,(V=V[1]+d[3])-P)):p?ie(g,p):((ce=new Image).onload=function(){ie(ce.width,ce.height)},ce.src=y)),re},findIndx:function(D,y){return D.findIndex(function(o){return y<o})-1},getId:function(D){return K(D).attr("pic-id")},remove:function(D,y){var o,d=this,g=d.that,p=d.pics.findIndex(function(v){return v.id==D});g.widget().find("[pic-id="+D+"]").remove(),o=d.pics.splice(p,1)[0],y||g.iHistory.push({callback:function(v){v?d.remove(D,!0):D=d.add(o.name,o.src,o.from,o.to,o.cx,o.cy,!0)}})},reset:function(){this.that.widget().find("[pic-id]").remove(),this.pics.length=0,this.id=0}}}(jQuery),function(K){var U,D,y,o,d=K.fn.val;function g(){return window[_b(206)]()}function p(){return document[_b(205)]()}function M(P){var N=g().getRangeAt(0),V=p();return N[_b(630)]==P?[N[_b(551)],P]:(V[_b(207)](P),V.setEnd(N[_b(630)],N[_b(551)]),[V.toString().length])}function T(){U[++o]={indx:M(D),dom:D.cloneNode(!0)}}K.fn.val=function(P){var N,V,J,W=this[0];return W&&"true"==W[_b(623)]?arguments.length?void(null!=P&&(W.innerHTML=(P+"").replace(/\n/g,"<br>"),N=W,V=g(),J=p(),N.lastChild&&(V[_b(208)](),J[_b(629)](N.lastChild),V.addRange(J)))):(N=W.innerHTML,"html"==y?N:(N=N.replace(/<br>/g,"\n"),K("<p>").html(N).text())):d.apply(this,arguments)},K.fn.pqContent=function(P){var N=D=this[0],V="pq-content";this.hasClass(V)||(y=this.attr("dataType"),U=[],o=-1,this.addClass(V).attr("spellcheck",!1).on("keydown",function(J){var W,re,ce,ie;if(U.length||T(),13!=J.keyCode||y&&0!=y.indexOf("string")&&"html"!=y?J.ctrlKey&&(90==J.keyCode?(0<o&&(o--,W=1),ce=1):89==J.keyCode&&(o<U.length-1&&(o++,W=1),ce=1),W&&(ie=(re=U[o]).dom.childNodes,D.innerHTML="",K(ie).toArray().forEach(function(ae){D[_b(633)](ae.cloneNode(!0))}),function ae(we,Me,Ve){if(Ve!=we)return K(we.childNodes).toArray().forEach(function(st){var We,at,Te;0<=Me&&("#TEXT"==st.nodeName[_b(37)]()?(We=st[_b(631)]).length>=Me?(at=p(),Te=g(),at.setStart(st,Me),at.collapse(!0),Te[_b(208)](),Te.addRange(at),Me=-1):Me-=We.length:Me=ae(st,Me))}),Me;Ve=p();var le=g();Ve.setStart(we,Me),Ve.collapse(!0),le[_b(208)](),le.addRange(Ve)}(N,re.indx[0],re.indx[1]))):((J.altKey||P)&&function v(P){function N(){var ce=document[_b(628)]("br");J.insertNode(ce),J[_b(629)](ce)}var V=P.childNodes,J=g().getRangeAt(0),W=J[_b(630)],re=J[_b(551)];(!V.length||W==P&&3==V[re-1].nodeType||3==W.nodeType&&W[_b(631)].length==re&&null==W[_b(632)])&&N(),N()}(N),ce=!0),W||function I(){!function P(N,V){var J,W;if(U[o])return N=K(N.childNodes).toArray(),J=K(V||U[o].dom.childNodes).toArray(),W=!1,N.length!=J.length||(N.forEach(function(re,ce){W||(re.nodeName!=(ce=J[ce]).nodeName||3==re.nodeType&&re.nodeValue.split(/\s/).length!=ce.nodeValue.split(/\s/).length?W=!0:re.childNodes&&re.childNodes.length&&(W=P(re,ce)))}),W)}(D)?(U[o].dom=D.cloneNode(!0),U[o].indx=M(D)):T()}(),ce)return!1}))}}(jQuery),function(K){K(document).on("pqGrid:bootup",function(D,y){var o=y.instance;o.iRowResize=new U(o),o.RowResize=function(){return o.iRowResize}});var U=K.paramquery.cRowResize=function(D){this.that=D,this.ht=8,D.options.rowResize&&D.on(!0,"cellMouseDown",this.onCellDown.bind(this)).on("cellMouseEnter",this[_b(634)].bind(this))};U.prototype={onCellDown:function(D,y){if(-1==y.colIndx){var o=D.pageY,d=D[_b(125)],g=K(d);if(o>=g.offset().top+d[_b(41)]-this.ht)return this.createDrag(g,y),(o=K.Event("mousedown",D)).type="mousedown",g.trigger(o),!1;g.draggable("instance")&&g.draggable("destroy")}},onCellEnter:function(D,y){-1==y.colIndx&&(y="pq-row-resize",D=K(D[_b(125)]),this.drag||D.find("."+y).length||D.append("<div class='"+y+_a(311)+(this.ht-1)+_a(312)))},createDrag:function(D,y){var o,d=this,g=d.that,p=y.rowData,v=y[_b(75)],M=g.iRenderB,T=g.$cont,I=_a(313);D.hasClass("ui-draggable")||D.on("dblclick",function(){delete p.pq_htfix,M.autoHeight({})}).draggable({axis:"y",cursor:"row-resize",cursorAt:{top:-2},start:function(P){d.drag=!0,o=P.pageY,d.$top=K("<div style='"+I+_a(314)+(M.getTop(v)-M.scrollY())+"px;'></div>").appendTo(T)},helper:function(){return K("<div style='"+I+"'></div>").appendTo(T)},stop:function(N){d.drag=!1,N=N.pageY-o;var V=M.rowhtArr;d.$top.remove(),p.pq_ht=Math.max(V[v]+N,10),p.pq_htfix=!0,g.refresh()}})}}}(jQuery),function(K){K(document).on("pqGrid:bootup",function(y,o){var d=o.instance;d.iTab=new D(d),d.Tab=function(){return d.iTab}});var U=K.paramquery,D=U.cTab=function(y){var o=this,d=y.options,g=d.tabModel||{},p=g.tabs;o.that=y,p&&(p.length||p.push({name:d.title,_inst:y}),g.byRef=!0,o.model=g,o._tbs=p,g._main||(null==(d=g.activeId)&&(d=p.findIndex(function(v){return!v.hidden})),Object[_b(45)](g,"activeId",{get:function(){return this.tabs.indexOf(this._at)},set:function(v){this._at=this.tabs[v]},configurable:!0}),g.activeId=d,(g._main=g._at._inst=y).on("destroy",o.onDestroy.bind(o)),o[_b(635)](g._at,!0)),y.on("change",o.onChange.bind(o)).on("render",o.onRender.bind(o)).on("toggle",o.onToggle.bind(o)))};U.pqGrid.defaults.tabModel={newTab:function(){return{sheet:{},extraRows:20,extraCols:10}}},D.prototype={activeTab:function(){return this.model._at},grid:function(y){return y._inst},activate:function(y){var o=this.model,d=this._tbs[y],g=d._inst,p=o.activeId,v=o._at._inst.widget();return g?p!=y&&(v.hide(),g.widget().show(),o._at=d,g.iTab.refresh(),g.refresh()):g=this.create(y,!0),this.trigger("tabActivate",null,{tab:d}),g},add:function(){var y=this.model.newTab.call(this.main());y.name=y.name||this.getTitle(),this._tbs.push(y),this.refresh()},clear:function(){var y=this._tbs,o=this.model;y.forEach(function(d){(d=d._inst)&&d!=o._main&&d.widget().remove()}),y.length=0},create:function(y,o){var d=this.model,g=(p=this._tbs)[y];if(p=g._inst)return p;var p=d._at._inst.widget(),v=this.getOptions(g),M=K("<div/>")[_b(169)](p);return delete g.sheet,M[0].style.cssText=p[0].style.cssText,o?(d.activeId=y,p.hide()):M.hide(),v.render=function(){g._inst=this},pq.grid(M,v)},findActive:function(y){var o,d,g,v,p=this._tbs;if(-1==p.indexOf(v=(v=this.model)._at)||v.hidden){for(d=y;d<p.length;d++)if(!(o=p[d]).hidden){g=d;break}if(null==g)for(d=y;0<=d;d--)if((o=p[d])&&!o.hidden){g=d;break}this.activate(g)}else this.refresh()},remove:function(y){var o=this.model,d=this._tbs,g=d[y]._inst,p=o.activeId;1<this.show().length&&(d.splice(y,1),this.findActive(p),g&&g!=o._main&&g.destroy())},rename:function(d,o){var g=(d=this._tbs[d]).name;this.isValid(o)&&(d.name=o,this.trigger("tabRename",null,{tab:d,oldVal:g}),this.refresh())},edit:function(y){var o=this,d=o._tbs[y];K(_a(315)+d.name+'">').appendTo(o.getTab(y)).on("change",function(g){var p=K.trim(this.value);o.rename(y,p)}).on("focusout",function(){o.refresh()}).focus().select()},getId:function(y){return K[_b(43)](y)?this._tbs.indexOf(y):null!=(y=K(y).attr("tabId"))?+y:null},getSheetOptions:function(y,o){var d,g=this.that,p=g.iImport,v=y.sheet,M=v?p.importS(v,y.extraRows,y.extraCols):{};return o&&(v||(d=this[_b(636)](y)))&&(K.extend(M,d),p[_b(503)](g,M)),M},getGridOptions:function(y){return"function"==typeof(y=y[_b(599)])?y.call(this.main()):y},getOptions:function(y){var o=this.that.options,d="collapsible",g=o[d],p=K.extend(!0,{},this.model._options);return K.extend(p,this[_b(635)](y),this[_b(636)](y)),["width","height","maxHeight","maxWidth","tabModel"].forEach(function(v){p[v]=o[v]}),K.extend(!0,p[d]=p[d]||{},{state:g.state,toggle:g.toggle,toggled:g.toggled}),p},getTab:function(y){return this.$tabs.find("[tabId="+y+"]")[0]},getTitle:function(){var y=this.that.options.strTabName||"{0}",o=(o=this._tbs).map(function(d){return(d=(d.name||"").match(new RegExp(y.replace("{0}","(\\d+)"),"i")))?+d[1]:0}).sort(function(d,g){return d-g});return y.replace("{0}",o.length?o.pop()+1:1)},hide:function(y){return this.show(y,!0)},isValid:function(y){if(y.length&&y.length<=31&&!this._tbs.find(function(o){return o.name[_b(37)]()==y[_b(37)]()})&&!"/\\*?:[]".split("").find(function(o){return 0<=y.indexOf(o)}))return!0},main:function(){return this.model?this.model._main:this.that},trigger:function(y,o,d){this._tbs.forEach(function(g){(g=g._inst)&&g._trigger(y,o,d)})},find:function(y,o){return this._tbs.find(function(d){return d[y]==o})},onChange:function(y,o){o.tab=this.find("_inst",this.that),this.trigger("tabChange",y,o)},onClick:function(p){var d=(p=K(p.target)).hasClass("ui-icon-close"),g=this.that.options[_b(637)]||"";null!=(p=this.getId(p.closest(".pq-tab-item")))&&(d&&1!=confirm(g.replace("{0}",this._tbs[p].name))||this[d?"remove":"activate"](p))},onDestroy:function(){this.clear()},onDblClick:function(y){y=K(y.target).closest(".pq-tab-item"),null==(y=this.getId(y))||this._tbs[y].noRename||this.edit(y)},onPlus:function(){this.add()},onLeft:function(y){var o=this.$tabs,d=o[0],g=.8*d[_b(63)],p=pq.scrollLeft(d);p=1==y?p+g:Math.max(p-g,0),o.animate({scrollLeft:pq[_b(638)](d,p)},300)},onRight:function(){this.onLeft(!0)},onRender:function(){function y(V){return function(J){"click"!=J.type&&J.keyCode!=K.ui.keyCode.ENTER||d[V](J)}}function o(V,J,W){return"<div tabindex=0 "+(W||"")+" class='"+V+_a(316)+J+_a(317)}var d=this,g=d.that,p=(N=g.options).tabModel,v=N.rtl,M="click keydown",T="ui-icon-triangle-1-w",I="ui-icon-triangle-1-e",P=d.model,N=d.$cont=K(_a(318)+(p.noAdd?"":o("pq-tab-plus","ui-icon-plus","title='"+N.strTabAdd+"'"))+o("pq-tab-w",v?I:T)+_a(319)+(p.css||"")+"'></div>"+o("pq-tab-e",v?T:I)+"</div>").appendTo(p.atTop?g.$top:g.$bottom);P._options||pq.copyObj(P._options={},g[_b(87)],["dataModel","colModel","tabModel"]),N.find(".pq-tab-plus").on(M,y("onPlus")),d.$leftBtn=N.find(".pq-tab-w").on(M,y("onLeft")),d.$rightBtn=N.find(".pq-tab-e").on(M,y("onRight")),v=d.$tabs=N.find(".pq-tabs-strip").on(M,y("onClick")),P.noSortable||v.sortable({axis:"x",distance:3,start:function(){K(_a(320)).html("a")},update:d.onMove.bind(d)}),v.on("dblclick",d.onDblClick.bind(d)).on("scroll",d.onScroll.bind(d)),d.refresh()},onMove:function(y,p){var d=this._tbs,g=this.getId(p=p.item),v=(p=this.getId(p.prev())||-1,d.splice(g,1)[0]);d.splice(p+(g<p?0:1),0,v),this.refresh()},onScroll:function(y){this.model.scrollLeft=pq.scrollLeft(y.target),this[_b(639)]()},onToggle:function(y,o){var d=this,g=d._tbs,p=d.model,v=d.that,M=v.options[_b(90)],T="max"==o.state;p.toggle||(v.one("refresh",function(){d.setBtn(),d[_b(639)]()}),p.toggle=1,g.forEach(function(N){var P;(N=N._inst)&&N.element[0]!=v.element[0]&&(P=N.options[_b(90)],N.toggle({refresh:!1}),T&&(P.state=K.extend(!0,{},M.state)),N.element.hide())}),p.toggle=0)},refresh:function(){var y,o=this,d=[],g=o._tbs,p=o.that,v=o.model,M=p.options[_b(640)]||"",T=v._at,I=v.activeId;if(T&&(v=T._inst)&&p!=v)return v.Tab().refresh();y=o.show(),g.forEach(function(P,N){P.hidden||(P.name=P.name||o.getTitle(),d.push(_a(321)+(N==I?"pq-bg-3 pq-active":"")+"' tabId='"+N+"'><div>"+pq.escapeHtml(P.name)+"</div>"+(1<y.length&&!P.noClose?"<div title='"+M+"' class='ui-icon ui-icon-close'></div>":"")+"</div>"))}),o.$tabs.html(d.join("")),o.setBtn(),o.restoreSL(),o[_b(639)]()},setBtnEnable:function(){var y={cursor:"default",opacity:.5},o={cursor:"",opacity:""},d=(g=this.$tabs[0])[_b(62)]-g[_b(63)],g=pq.scrollLeft(g);this.$leftBtn.css(g?o:y),this.$rightBtn.css(d<=g?y:o)},setBtn:function(){var y=this.$tabs,o=y[0],d=this.$leftBtn,g=this.$rightBtn;d.hide(),g.hide(),y.css("width","calc(100% - 25px)"),o[_b(62)]-o[_b(63)]&&(d.show(),g.show(),y.css("width","calc(100% - 75px)"))},restoreSL:function(){var d,y=(d=this.model).activeId,o=this.$tabs;null==(d=d.scrollLeft)&&null!=y&&(d=o.find("[tabid="+y+"]")[0].offsetLeft),pq.scrollLeft(o[0],d)},show:function(y,o){var d=this._tbs,g=[];if(!y)return d.forEach(function(p){!p.hidden==!o&&g.push(p)}),g;y.forEach(function(p){d[p].hidden=o}),this.findActive(this.model.activeId)},tabs:function(){return this._tbs}}}(jQuery),function(K){K(document).on("pqGrid:bootup",function(D,o){var d=(o=o.instance).options;"lazy"==d.dataModel.location&&(o.iLazy=new U(o,d))});var U=K.paramquery.Lazy=function(D,y){var o=this;o.grid=D,o.rpp=y.pageModel.rPP,D.on("scrollEnd",o.onScroll.bind(o)).on("customSort",o.customSort.bind(o)).on("customFilter",o[_b(641)].bind(o)).on("lazyProgress",o.progress.bind(o)).on("lazyComplete",o.onComplete.bind(o))};U.prototype={init:function(D){var y=this,o=y.grid,d=o[_b(156)](D=D||{});y.dataURL=d.dataURL,y.url=d.url,o._trigger("lazyInit",null,D),y[_b(85)]=null,y[_b(642)]=[],y.data=null,y.complete=!1,y.xhr&&y.xhr.abort(),y.bars=[],y.request(D)},customSort:function(D,y){if("local"==this.grid.option("sortModel.type")&&!this.complete)return!1},customFilter:function(D,y){var o=this.complete,d=this.grid;if("local"==d.option("filterModel.type")&&!o)return y.dataTmp=d.options.dataModel.data,y.dataUF=[],y.trigger=!1},progBar:function(){var D=this.grid,y=this.bars,o=D.iTab,d=(D=(d=D.options.dataModel)[_b(643)]?o.grid(o.activeTab()):D).widget().find(".pq-grid-pbar")[0];return-1==y.indexOf(d)&&y.push(d),K(y)},progress:function(D,y){var o=this.progBar(),d=y.percent+"%";o.show().stop().animate({width:d},{always:function(){o.css({width:d})}})},onComplete:function(D,y){var o=this.progBar();o.animate({width:"100%"},{complete:function(){o.css({width:0}).hide()}}),this.grid[_b(147)](y)},onScroll:function(){this.complete||this.request()},triggerProgress:function(){var D=0,y=this[_b(642)];y.forEach(function(o){o&&D++}),this.grid._trigger("lazyProgress",null,{percent:Math.round(100*D/y.length,2)})},triggerComplete:function(D){var y=this.grid;this.complete||(this.complete=!0,y._trigger("lazyComplete",null,D))},request:function(D){D=D||{};var y,o,d,g,p=this,v=p.grid,M=v.options.pageModel,T=v[_b(193)](),I=T.initV,P=p.dataURL,N=I,V=p.data,J=p.rpp,W=p[_b(642)],re=p.totalPages,ce=T.finalV;if(V&&null!=I){for(;N<=ce;N++)if(V[N]&&V[N].pq_empty){d=g=Math.floor(N/J)+1;break}if(!d)for(y=o=Math.floor(I/J)+1,N=0;N<=re;N++){if(0==W[y]){g=y;break}if(0==W[o]){g=o;break}y--,o++}}else g=1;if(!g)return p[_b(644)](D),!1;M.curPage=g,p.xhr&&p.xhr.abort(),P=K.extend(P,{pq_curpage:g,pq_rpp:M.rPP}),p.xhr=K.ajax({url:p.url,dataType:"json",data:P,success:function(We,ae,we){var Me,Pe=We.data,Ve=We[_b(85)],le=Pe.length,st=le,at=(We=We.curPage,p.data=p.data||[]),Te=(We-1)*p.rpp;if(null==p[_b(85)]){for(Me=!0;st<Ve;st++)at[st+Te]={pq_empty:!0};for(p[_b(85)]=Ve,re=p.totalPages=Math.ceil(Ve/J),st=1;st<=re;st++)W[st]=!1;v.option("dataModel.data",at)}for(W[We]=!0,st=0;st<le;st++)at[st+Te]=Pe[st],at[st+Te].pq_empty=!1;Me?v[_b(17)]({header:D.header,trigger:!1,triggerQueue:!1,group:!1}):d&&v.refresh({header:!1}),null!=I?0!=p.request(D)&&p[_b(645)]():p[_b(644)](D)}})}}}(jQuery),function(K){var U=pq.cVirtual=function(){this.diffH=0,this.diffV=0};U.setSBDim=function(){var D=K(_a(322)).appendTo(document.body),y=D[0];this.SBDIM=y[_b(41)]-y[_b(624)],D.remove()},U.prototype={assignTblDims:function(D){var y=this,o=y.isBody(),d=y.getTopSafe(this[D?"cols":"rows"],D,!0),g=((g=y.maxHt)<d?(y[D?"ratioH":"ratioV"]=d/g,y[D?"virtualWd":"virtualHt"]=d,d=g):(d=d||(y.isHead()?0:1),y[D?"ratioH":"ratioV"]=1),y.$tbl_right[0]),p=(p=y[D?"$tbl_tr":"$tbl_left"]).length?p[0]:{style:{}},v=D?"width":"height";g.style[v]=d+"px",p.style[v]=d+"px",g=o?"Tbl":y.isHead()?"TblHead":"TblSum",!o&&D&&y.$spacer.css(y.rtl,d),y.dims[D?"wd"+g:"ht"+g]=d,o&&y[_b(646)](100)},calInitFinal:function(D,y,o){var d,g,p,v=this[o?"cols":"rows"],M=this[o?"freezeCols":"freezeRows"],T=this[o?"leftArr":"topArr"],I=this.getTopSafe(M,o);if(0==this.that.options[o?"virtualX":"virtualY"])return[M,v-1];if(M==v)return[0,M-1];if(o&&(I-=this.numColWd),D+=I,y+=I,M<v&&T[M]<D){for(var P,N=30,V=v;N--;)if(T[P=Math.floor((M+V)/2)]>=D)V=P;else{if(M==P){p=!0;break}M=P}if(!p)throw"ri not found"}for(;M<=v;M++)if(T[M]>D){d=M&&M-1;break}for(;M<=v;M++)if(T[M]>y){g=M-1;break}return null==d&&null==g&&v&&D>T[v-1]?[null,null]:[d=null==d?0:d,g=null==g?v-1:g]},calInitFinalSuper:function(){var D=this.dims||{},y=(d=this[_b(647)]())[0],o=d[1],d=d[2],g=this[_b(647)](!0),p=g[0],v=g[1],M=(T=this[_b(648)](y,o))[0],T=T[1],I=(P=this[_b(648)](p,v,!0))[0],P=P[1];return this.isBody()&&(D.bottom=o,D.top=y,D.left=p,D.right=v),[M,I,T,P,d||g[2]]},calcTopBottom:function(D){var y,o,d,g,p,v=this,M=v.isBody(),J=v.dims,V=v.virtualWin,N=(T=v.$cright)[0],T=D?(I=pq.scrollLeft(N),d=v.sleft,g=J.wdCont,p=v.wdContLeft,v.ratioH):(V&&(W=K(window).scrollTop()-T.offset().top),I=V?v._calcTop(N,W):N.scrollTop,d=v.stop,g=v.htCont,p=v.htContTop,v.ratioV),I=I<0?0:I;if(1==T)return o=I+g-p,[I,o=0<=(o=D||!V?o:v._calcBot(I,o,W))?o:0];N=v[D?"virtualWd":"virtualHt"],V=D?J[_b(649)]:J[_b(650)];var P,W=v[J=D?"diffH":"diffV"];if(U.maxHt<=I+V?y=(o=N-p+(g-V))-g+p:o=(y=0==I?0:I*(N=null==d||Math.abs(I-d)>g?T:1)+(1==N&&W?W:0))+g-p,(V=y-I)!=W&&(P=!0,v[J]=V,M&&v[_b(646)](3e3)),!(0<=(v[D?"sleft":"stop"]=I)))throw"stop NaN";if(0<=o&&0<=y)return[y,o,P];throw"top bottom NaN"},_calcTop:function(D,y){return D.scrollTop+(0<y?y:0)},_calcBot:function(D,y,o){return(D=D+K(window).height()+(o<0?o:0))<y?D:y},getHtDetail:function(D,y){return(D=D.pq_detail)&&D.show?D.height||y:0},getTop:function(D,d){var o=this.topArr[D];if(0<=(o=(d=d?0:this.diffV)&&(o-=D>this.freezeRows?d:0)<0?0:o))return o;throw o},getTopSafe:function(D,y,o){var d=y?this.cols:this.rows;return this[y?"getLeft":"getTop"](d<D?d:D,o)},getLeft:function(g,y){var d,p;if(g=-1==(d=(d=(p=this.leftArr).length-1)<g?d:g)?0:p[d]+this.numColWd,0<=(g=(p=y?0:this.diffH)&&(g-=d>this.freezeCols?p:0)<0?0:g))return g;throw g},getHeightR:function(D,d){var o=this.topArr;if(0<=(d=o[D+(d=d||1)]-o[D]))return d;throw d},getHeightCell:function(D,g){g=g||1;var o=this.topArr,d=(d=this[_b(335)])?this[_b(651)](this.data[D+g-1],d):0;if(0<=(g=o[D+g]-o[D]-d))return g;throw g},getHeightCellM:function(D,y){return this.getTopSafe(D+y)-this.getTop(D)},getHeightCellDirty:function(D,y){return this.setTopArr(D,null,D+y),this[_b(652)](D,y)},getWidthCell:function(D){if(-1==D)return this.numColWd;if(0<=(D=this.colwdArr[D]))return D;throw D},getWidthCellM:function(D,y){return this.getTopSafe(D+y,!0)-this.getLeft(D)},initRowHtArr:function(){var D,y=this.rowHt,o=this.data,d=o.length,g=this[_b(335)],p=this.rowhtArr=[],v=(this.topArr=[],0);if(g)for(;v<d;v++)p[v]=(D=o[v]).pq_hidden?0:D.pq_ht||y+this[_b(651)](D,g);else for(;v<d;v++)p[v]=(D=o[v]).pq_hidden?0:D.pq_ht||y},initRowHtArrDetailSuper:function(D){var y,o=this.rowhtArr,d=this.data;D.forEach(function(g){o[y=g[0]]=d[y].pq_ht=o[y]+g[1]}),this.setTopArr(),this[_b(653)]()},initRowHtArrSuper:function(){this[_b(654)](),this.setTopArr(),this[_b(653)]()},refreshRowHtArr:function(D,y){var o=this.data[D],d=this[_b(335)];this.rowhtArr[D]=o.pq_hidden?0:this.rowHt+this[_b(651)](o,d),y&&(this.setTopArr(D),this[_b(653)]())},setTopArr:function(D,y,o){for(var d,g,p=D||0,v=y?(d=this.cols,g=this.colwdArr,this.leftArr):(d=this.rows,g=this.rowhtArr,this.topArr),M=o&&o<d?o:d-1,T=p?v[p]:0;p<=M;p++)v[p]=T,T+=g[p];v[p]=T,v.length=d+1},triggerTblDims:function(D){var y=this;y.setTimer(function(){y.that._trigger("assignTblDims")},"assignTblDims",D)}}}(jQuery),function(K){var U=1533910;K(document).one("pq:ready",function(){var D=K(_a(323)).appendTo(document.body),o=K(_a(324)).appendTo(D)[0],y=pq.cVirtual;o.style.top="1000000000px",16554378<(U=(o=o.offsetTop-50)<=1e4?U:o)&&(U=16554378),y.maxHt=U,D.remove(),y.setSBDim(),K(window).on("resize",y.setSBDim.bind(y))})}(jQuery),function(K){pq.cRender=function(){this.data=[]},pq.cRender.prototype=K.extend({},{_m:function(){},autoHeight:function(U){var D=this,y=D.that,o=D.isBody(),d=U.hChanged,g=D.freezeRows,p=!1,v=D.initV,M=D.finalV;D.rows&&(o&&y._trigger("beforeAutoRowHeight"),p=D[_b(655)](v,M,d),(p=D[_b(655)](0,g-1,d)||p)?(D.setTopArr(g?0:v),D[_b(653)](),D.setPanes(),D[_b(346)](!0),o&&(U.source="autoRow",D.refresh(U),y._trigger("autoRowHeight"))):D[_b(346)](!0))},autoWidth:function(p){function D(M){0<=d.indexOf(M)&&y[_b(656)](M,M)}var y=this,o=y.freezeCols,d=(p=p||{}).colIndx,g=y.initH,v=p=y.finalH;if(d){for(;g<=v;v--)D(v);for(v=o-1;0<=v;v--)D(v)}else y[_b(656)](g,p),y[_b(656)](0,o-1)},_each:function(U,D,y,o,d,g){for(var p,v=this.jump,M=0;M<=y;M++)(p=o[M=v(D,g,M)])[d]||U.call(this,p,M)},eachV:function(U){this._each(U,this.initV,this.finalV,this.data,"pq_hidden",this.freezeRows)},eachH:function(U){this._each(U,this.initH,this.finalH,this.colModel,"hidden",this.freezeCols)},saveValues:function(U){var D,y,o=[],d=this,g="value"==U;return d.eachV(function(p,v){o[v]=[],D=d[_b(340)](v),d.eachH(function(M,T){y=g?p[M.dataIndx]:d[_b(657)](v,T,p,M,d[_b(343)](v,T),D,!0),o[v][T]=y})}),o},dirtyCells:function(U,D){var y,o,d=[],g=this,p="value"==D;return g.eachV(function(v,M){y=g[_b(340)](M),g.eachH(function(T,I){o=p?v[T.dataIndx]:g[_b(657)](M,I,v,T,g[_b(343)](M,I),y,!0),U[M]&&U[M][I]!==o&&d.push([M,I,v,T])})}),d},generateCell:function(U,D,y,o,d,g,p){var v,M,T,I,P=this,ae=P.iMerge,N=P.isHead(),V=[],J=P.riOffset,W=U+J,re=[P.cellCls];if(P._m()&&(I=ae[_b(195)](W,D))){if(!I.o_rc)return(U==P._initV||D==P._initH)&&(ie=P[_b(343)](U,D),v=(M=ae[_b(230)](W,D)).v_ri-J,T=M.v_ci,v<0||(ce=P[_b(343)](v,T),P.mcLaid[v+","+T+(ce==ie?"":","+ie)]=!0)),"";(M=ae[_b(658)](W,D)).style&&V.push(M.style),M.cls&&re.push(M.cls),y=P.data[U=(W=I.o_ri)-J],o=P.colModel[D=I.o_ci],g=P[_b(652)](U,I.o_rc),v=P[_b(659)](D,I.o_cc),re.push("pq-merge-cell")}else if(y.pq_hidden||o.hidden)return"";if(T=P.getCellId(U,D,d),!p&&P.getById(T))return"";var ce=g||P[_b(340)](U),ie=v||P.colwdArr[D];return ae=P.getLeft(D),V.push(P.rtl+":"+ae+"px;width:"+ie+"px;height:"+ce+"px;"),P.renderCell({style:V,cls:re,attr:["role="+(N?"columnheader":"gridcell")+" id='"+T+"'"],rowData:y,rowIndxPage:U,rowIndx:W,colIndx:D,dataIndx:o.dataIndx,column:o})},generateRow:function(g,d){var y="pq-grid-row",o="top:"+this.getTop(g)+"px;height:"+this.getHeightR(g)+"px;width:100%;";return d="role=row id="+this.getRowId(g,d)+" aria-rowindex="+(g+1),"<div class='"+(y+=" "+(g=this[_b(660)](g))[0])+"' "+(d+=" "+g[2])+" style='"+(o+=g[1])+"'>"},getById:function(U){return document[_b(465)](U)},getCell:function(U,D,y){var o,d=this.riOffset,g=U+d;return y||(o=this.iMerge)[_b(195)](g,D)&&(o=o[_b(230)](g,D),this.isHead()&&(U=o.o_ri,D=o.o_ci),y=this[_b(343)](o.v_ri-d,o.v_ci)),this.getById(this.getCellId(U,D,y))},getCellIndx:function(U){if((U=U.id.split("-"))[3]=="u"+this.uuid)return""==U[5]?[+U[4],-1,U[7]]:[+U[4],+U[5],U[6]]},getCellId:function(U,D,y){return U>=this.data.length?"":(y=y||this[_b(343)](U,D),this.cellPrefix+U+"-"+D+"-"+y)},getCellCont:function(U,D){return this["$c"+this[_b(343)](U,D)]},getCellCoords:function(p,D){var y=this.maxHt,g=p+(d=this.riOffset),v=p,o=D,d=(this.isBody()&&(v=(g=this.that.iMerge[_b(350)](g,D,g,D))[2]-d,o=g[3]),this.getTop(p));return g=this.getTop(v)+this[_b(340)](v),p=this.getLeft(D),y<g&&(d-=g-y,g=y),y<(v=this.getLeft(o+1))&&(p-=v-y,v=y),[p,d,v,g]},getCellRegion:function(U,D){var y=this.freezeCols;return U<this.freezeRows?D<y?"lt":"tr":D<y?"left":"right"},getCellXY:function(U,D){var y=this.maxHt;return[Math.min(this.getLeft(D),y),Math.min(this.getTop(U),y)]},getContRight:function(){return this.$cright},getMergeCells:function(){return this._m()?this.$tbl.children().children(".pq-merge-cell"):K()},getRow:function(U,D){return this.getById(this.getRowId(U,D))},getAllCells:function(){return this.$ele.children().children().children().children().children(this.isHead()?".pq-grid-col":".pq-grid-cell")},get$Col:function(U,D){var y=["right","left","lt","rt"].map(function(o){return"[id$=-"+U+"-"+o+"]"}).join(",");return(D||this[_b(463)]()).filter(y)},get$Row:function(U){return this.$ele.find("[id^="+this.getRowId(U,"")+"]")},getRowClsStyleAttr:function(U){var D=this.that,y=[],o=D.options,d=o.rowInit,g=this.data[U],p=g.pq_rowcls,v=g.pq_rowattr,M=g[_b(242)],T=pq.styleStr,I="",P=[],N=U+this.riOffset;return o.stripeRows&&this.stripeArr[U]&&y.push("pq-striped"),g[_b(2)]&&y.push(D.iRows.hclass),p&&y.push(p),v&&(I+=D[_b(214)](v,P)),M&&P.push(T(M)),d&&(o=d.call(D,{rowData:g,rowIndxPage:U,rowIndx:N}))&&((p=o.cls)&&y.push(p),(p=o.attr)&&(I+=" "+p),(p=o.style)&&P.push(T(p))),[y.join(" "),P.join(""),I]},getRowId:function(U,D){if(null==D)throw"getRowId region.";return this.rowPrefix+U+"-"+D},getRowIndx:function(U){return[+(U=U.id.split("-"))[4],U[5]]},getTable:function(U,D){return this["$tbl_"+this[_b(343)](U,D)]},getTblCls:function(U){var D=this.isBody()?[]:[_a(325)];return U.rowBorders&&D.push("pq-td-border-top"),U[_b(243)]&&D.push("pq-td-border-right"),U.wrap||D.push("pq-no-wrap"),D.join(" ")},getFlexWidth:function(){return this._flexWidth},preInit:function(U){var D=this,y=D.isBody(),o=(d=D.that).options,d=d[_b(35)],g="pq-table "+D.getTblCls(o),p=["pq-cont-inner ","pq-cont-right","pq-cont-left","pq-cont-lt","pq-cont-tr"];U.empty(),U[0].innerHTML=[_a(326),y?_a(327)+o.strNoRows+"</div>":"",'<div class="',p[0]+p[1],_a(328)+g+'"></div>',y?"":_a(329),"</div>",'<div class="'+p[0]+p[2]+_a(330)+g+'"></div></div>','<div class="'+p[0]+p[4]+_a(331)+g+'"></div></div>','<div class="'+p[0]+p[3]+_a(332)+g+'"></div></div>',"</div>"].join(""),D.$cright=U.find("."+p[1]).on("scroll",D[_b(661)].bind(D)),D.virtualWin&&K(window).on("scroll"+d+" resize"+d,D[_b(661)].bind(D)),y||(D.$spacer=U.find(".pq-r-spacer")),D.$cleft=U.find("."+p[2]).on("scroll",D.onScrollL.bind(D)),D.$clt=U.find("."+p[3]).on("scroll",D.onScrollLT),D.$ctr=U.find("."+p[4]).on("scroll",D.onScrollT),D.$tbl=U.find(".pq-table").on("scroll",D.onScrollLT),D.$tbl_right=U.find(".pq-table-right"),D.$tbl_left=U.find(".pq-table-left"),D.$tbl_lt=U.find(".pq-table-lt"),D.$tbl_tr=U.find(".pq-table-tr"),y&&(D.$cleft.add(D.$ctr).add(D.$cright.find(".pq-table")).on(_a(333),D[_b(662)](D)),D.$norows=U.find(".pq-grid-norows"))},isBody:function(){},isHead:function(){},isSum:function(){},jump:function(U,D,y){return y<U&&D<=y?U:y},hasMergeCls:function(U){return U&&0<=U.className.indexOf("pq-merge-cell")},initRefreshTimer:function(U){U=this[_b(663)](this,U),this.setTimer(U,"refresh")},initStripeArr:function(){for(var U,D=this.rows,y=0,o=this.stripeArr=[],d=this.data;y<D;y++)d[y].pq_hidden||(U=o[y]=!U)},isRenderedRow:function(U){return!!this.getRow(U)},onScrollLT:function(){this.scrollTop=this.scrollLeft=0},onScrollT:function(){this.scrollTop=0},onScrollL:function(U){var D=U.target,y=this;pq.scrollLeft(D,0),y.setTimer(function(){y.$cright[0].scrollTop=D.scrollTop},"scrollL",50)},refresh:function(U){U=U||{};var D,y=this,o=y.that,d=y.isBody(),g=y.isHead(),p=y.mcLaid={},v=y.freezeCols,M=y.numColWd,T=!(!v&&!M),I=y.freezeRows,P=(we=y[_b(664)]())[0],N=we[1],V=we[2],J=we[3],W=U[_b(665)]||we[4],re=y.initV,ce=y.finalV,ie=y.initH,ae=y.finalH;for(D in W&&d&&o.blurEditor({force:!0}),y._initV=P,y._finalV=V,y._initH=N,y._finalH=J,d&&o._trigger("beforeTableView",null,{initV:P,finalV:V,pageData:y.data}),W||(null!=ce&&re<=V&&P<=ce&&(re<P?(y.removeView(re,P-1,ie,ae),T&&y.removeView(re,P-1,M?-1:0,v-1)):P<re&&(y.renderView(P,re-1,N,J),T&&y.renderView(P,re-1,0,v-1)),V<ce?(y.removeView(V+1,ce,ie,ae),T&&y.removeView(V+1,ce,M?-1:0,v-1)):ce<V&&(y.renderView(ce+1,V,N,J),T&&y.renderView(ce+1,V,0,v-1)),re=P,ce=V),null!=ae&&ie<J&&N<ae&&(ie<N?(y.removeView(re,ce,ie,N-1),I&&y.removeView(0,I-1,ie,N-1)):N<ie&&(y.renderView(re,ce,N,ie-1),I&&y.renderView(0,I-1,N,ie-1)),J<ae?(y.removeView(re,ce,J+1,ae),I&&y.removeView(0,I-1,J+1,ae)):ae<J&&(y.renderView(re,ce,ae+1,J),I&&y.renderView(0,I-1,ae+1,J)),ie=N,ae=J)),W||V!==ce||P!==re||N!==ie||J!==ae?(d&&o._trigger("beforeViewEmpty",null,{region:"right"}),y.$tbl_right.empty(),y.renderView(P,V,N,J),!T||V===ce&&P===re||(y.$tbl_left.empty(),y.renderView(P,V,0,v-1)),I&&(N===ie&&J===ae||(o._trigger("beforeViewEmpty",null,{region:"tr"}),y.$tbl_tr.empty(),y.renderView(0,I-1,N,J)),T&&null==ce&&(y.$tbl_lt.empty(),y.renderView(0,I-1,0,v-1)))):y[_b(666)](),p){var we,Me=+(we=D.split(","))[0],Pe=+we[1];y.renderView(Me,Me,Pe,Pe,we[2])}re=(M=N!=y.initH||J!=y.finalH)&&null!=y.initH,(W||V!=y.finalV||P!=y.initV||M)&&(y.initV=P,y.finalV=V,y.initH=N,y.finalH=J,d?o._trigger("refresh",null,{source:U.source,hChanged:re}):o._trigger(g?"refreshHeader":"refreshSum",null,{hChanged:re}))},refreshAllCells:function(U){this.initH=this.initV=this.finalH=this.finalV=null,(U=U||{})[_b(665)]=!0,this.refresh(U)},refreshCell:function(U,D,y,o){function d(I,P){I&&(g=!0,I.id="",K(I)[_b(314)](p[_b(657)](U,D,y,o,P)))}var g,p=this,v=p.isBody()&&p._m()?p.iMerge[_b(231)](U+p.riOffset,D):0,M=U,T=D;return v?(U=v[_b(75)],D=v.colIndx,y=v.rowData,o=v.column,["lt","tr","left","right"].forEach(function(I){d(p.getCell(M,T,I),I)})):d(p.getCell(U,D)),g},removeMergeCells:function(){for(var U,D,y,o,d,g,p,v=this,M=v.iMerge,T=v.riOffset,I=v[_b(515)](),P=v._initH,N=v._finalH,V=v._initV,J=v._finalV,W=0,re=I.length;W<re;W++)d=I[W],(g=v[_b(143)](d))&&(p=g[0],U=g[1],g=g[2],D=p+(y=M[_b(230)](p+T,U)).o_rc-1,y=U+y.o_cc-1,o=!1,J<p||N<U?o=!0:"right"==g?(D<V||y<P)&&(o=!0):"left"==g?D<V&&(o=!0):"tr"==g&&y<P&&(o=!0),p=d.parentNode,o&&K(d).remove(),p.children.length||p.parentNode[_b(121)](p))},removeView:function(U,D,y,o){for(var d,g,p,v=this[_b(343)](U,y),M=U;M<=D;M++)if(d=this.getRow(M,v)){for(g=y;g<=o;g++)!(p=this.getCell(M,g,v))||this[_b(667)](p)||K(p).remove();d.children.length||d.parentNode[_b(121)](d)}},renderNumCell:function(U,D,y){var o=this.getHeightR(U),d=this.isHead();return"<div id='"+this.getCellId(U,-1,y)+"' style='width:"+D+"px;height:"+o+"px;"+_a(334)+(this.isBody()?U+1+this.riOffset:d&&U==this.data.length-1&&this.numberCell.title||"")+"</div>"},renderRow:function(U,D,y,o,d,g){var p,v,M,T=this.getRow(y,g),I=this.numColWd,P=[],N=this[_b(340)](y),V=this.colModel;for(T||U.push(this[_b(668)](y,g)),0!=o||!I||"left"!=g&&"lt"!=g||(M=this[_b(669)](y,I,g),P.push(M)),v=o;v<=d;v++)(p=V[v])&&!p.hidden&&(M=this[_b(657)](y,v,D,p,g,N),P.push(M));I=P.join(""),T?K(T).append(I):U.push(I,"</div>")},renderView:function(U,D,y,o,d){if(null!=y&&null!=o){d=d||this[_b(343)](U,Math.min(y,o));for(var g,p=[],v=this.data,M=this["$tbl_"+d],T=U;T<=D;T++)(g=v[T])&&!g.pq_hidden&&this.renderRow(p,g,T,y,o,d);M.append(p.join(""))}},scrollX:function(U,D){var y=this.$cright[0];if(!(0<=U))return pq.scrollLeft(y);this.scrollXY(U,y.scrollTop,D)},setCellDims:function(U){for(var D,y=this,o=y.rtl,d=y.iMerge,g=y._m(),p=y.colModel,v=y.numColWd,M=y.jump,T=y.setRowDims(),I=y.riOffset,P=y.initH,N=y.finalH,V=y.freezeCols,J=(y.eachV(function(le,st){var We,at=y.get$Row(st),Te=y.getHeightR(st),qe=y.getTop(st),Bt=y[_b(340)](st);T(at,Te,qe);for(var Ze=v?-1:0;Ze<=N;Ze++)!((Ze=M(P,V,Ze))<0)&&p[Ze].hidden||g&&(ce=d[_b(195)](st+I,Ze))||(We=y.getCell(st,Ze))&&((D=We.style).height=(-1==Ze?Te:Bt)+"px",U||(D.width=y[_b(670)](Ze)+"px",D[o]=y.getLeft(Ze)+"px"))}),y[_b(515)]()),W=0,re=J.length;W<re;W++){var ce,ie,ae,we,Me,Pe=J[W],Ve=y[_b(143)](Pe);Ve&&(we=Ve[0],Ve=Ve[1],Me=(ce=d[_b(230)](we+I,Ve)).v_ri-I,ie=y.get$Row(Me),ae=y.getHeightR(Me),we=y[_b(652)](we,ce.o_rc),Me=y.getTop(Me),T(ie,ae,Me),(D=Pe.style).height=we+"px",U||(D.width=y[_b(659)](Ve,ce.o_cc)+"px",D[o]=y.getLeft(Ve)+"px"))}},setRowDims:function(){return function(U,D,y){(D={height:D,width:"100%"}).top=y,U.css(D)}},setColWdArr:function(U,we){var y,o,d,g,p,v,M,T,I=we,P=this,N=P.riOffset,V=P.jump,J=P.colModel,W=P.data,re=P.freezeRows,ce=P.maxHt+"px",ie=P.iMerge,ae=P.initV,Me=(we=P.isBody(),P.isSum()),Pe=we||Me,Ve=P.isHead()?P.that[_b(144)].length-1:P.finalV;if(0<=Ve)for(;U<=I;I--)if(!(o=J[I]).hidden&&-1==(o.width+"").indexOf("%")&&(g=Pe?o.width:o._minWidth)){for(y=0;y<=Ve;y++)if((p=W[y=V(ae,re,y)])&&!p.pq_hidden){if(p=!0,v=ie[_b(195)](y+N,I)){if(1==v)continue;if(1<(v=ie[_b(230)](y+N,I)).v_rc||1<v.v_cc){if(1<v.v_cc)continue;p=!1}d=P.getCell(v.o_ri-N,v.o_ci)}else d=P.getCell(y,I);d&&(d.parentNode.style.width=ce,p&&(d.style.width="auto",(M=K(d).find(_a(335))).length&&(M.css({position:"static",float:"left",width:20}),(T=K(d).find(".pq-td-div")).css("width","auto"))),v=d[_b(40)]+1,p&&M.length&&(M.css({position:"",float:"",width:""}),T.css("width","")),g=Math.max(v,g))}if(!(0<g))throw"wd NaN";o.width=P.colwdArr[I]=g,o._resized=!0}},setRowHtArr:function(U,D,y){for(var o,d,g,p,v,M,T,I,P,N=D,V=this,J=V.jump,W=V.riOffset,re=V.rowhtArr,ce=V.data,ie=V.colModel,ae=V._m(),we=V.diffV,Me=V.freezeCols,Pe=V.rowHt,Ve=V.iMerge,le=V[_b(335)],st=V.initH,We=V.finalH;U<=N;N--)if((g=ce[N])&&!g.pq_hidden&&!g.pq_htfix){for(P=le?V[_b(651)](g,le):0,M=y?re[N]-P:Pe,o=0;o<=We;o++)if(!ie[o=J(st,Me,o)].hidden){if(T=ae&&Ve[_b(195)](N+W,o)){if(1==T||we)continue;T=Ve[_b(230)](N+W,o),p=V.getCell(T.o_ri-W,T.o_ci)}else p=V.getCell(N,o);p&&(p.style.height="auto",v=p[_b(41)],T&&(I=T.o_rc-(T.v_ri-T.o_ri)-1,v-=1<T.v_rc?V[_b(671)](T.v_ri-W+1,I):0),M=Math.max(v,M))}re[N]!=(P=M+P)&&(re[N]=g.pq_ht=P,d=!0)}return d},setTimer:function(U){var D={};return!0===U?function(y){y()}:function(y,o,d){clearTimeout(D[o]);var g=this;D[o]=setTimeout(function(){g.that.element&&y.call(g)},d||300)}}},new pq.cVirtual)}(jQuery),function(K){pq[_b(96)]=function(U,v){var y=this,o=y.uuid=U.uuid,d=U.options,g=y.$ele=v.$b,p=y.$sum=v.$sum,M=(v=y.$h=v.$h,d[_b(449)]);y.that=U,y.rtl=d.rtl?"right":"left",y.virtualWin=d.virtualWin,y.setTimer=y.setTimer(o),y.cellPrefix="pq-body-cell-u"+o+"-",y.rowPrefix="pq-body-row-u"+o+"-",y.cellCls="pq-grid-cell",y.iMerge=U.iMerge,y.rowHt=d.rowHt||27,y[_b(335)]="auto"==(o=d[_b(336)].height)?1:o,y[_b(115)]=U[_b(115)]=new(pq[_b(672)])(U,v),y.iRenderSum=U.iRenderSum=new pq.cRenderSum(U,p),U.on("headHtChanged",y[_b(673)](y)),null!=M&&U.on(_a(336),function(){M<0?y[_b(674)]():y.setTimer(y[_b(674)],"postRender",M)}),y.preInit(g),U.on("refresh softRefresh",y.onRefresh.bind(y))},pq[_b(96)].prototype=K.extend({},new(K.paramquery[_b(235)]),new pq.cRender,{setHtCont:function(U){this.dims.htCont=U,this.$ele.css("height",U)},flex:function(U){var D=this.that;!1!==D._trigger("beforeFlex",null,U)&&(this[_b(115)].autoWidth(U),this.iRenderSum.autoWidth(U),this.autoWidth(U),D.refreshCM(null,{flex:!0}),D.refresh({source:"flex",soft:!0}))},init:function(U){var D,y=this,o=y.that,d=(U=U||{}).soft,g=!d,p=U.source,v=y[_b(115)],M=y.iRenderSum,T=o.options,I=T[_b(255)],P=(y.freezeCols=T.freezeCols||0,y.freezeRows=T.freezeRows,y.numberCell=T.numberCell),N=y.colModel=o.colModel;y.width=T.width,y.height=T.height,g&&(y.dims=o.dims,y.autoFit=I.autoFit,y.pauseTO=I.timeout,D=(I=o.pdata||[]).findIndex(function(V){return!V.pq_hidden}),y.$norows.css("display",0<=D?"none":""),y.data=I,y.maxHt=pq.cVirtual.maxHt,y.riOffset=o.riOffset,y.cols=N.length,y.rows=I.length,o[_b(413)]&&(y._m=function(){return!0}),y.autoRow=T.autoRow,y[_b(675)](),T.stripeRows&&y[_b(676)]()),y[_b(677)](),y.numColWd=v.numColWd=M.numColWd=P.show?P.width:0,y[_b(678)](),M.init(U),U.header?v.init(U):(y.setPanes(),v[_b(346)](),v[_b(653)](!0)),M.initPost(U),U.header&&v.initPost(U),y.$cright[0].scrollTop>y.getTop(y.rows)||(g?y[_b(679)]({source:p}):d&&(y[_b(346)](),y.refresh({source:p}),o._trigger("softRefresh")))},initColWdArr:function(){for(var U,D=this.colModel,y=D.length,o=(this.leftArr=this[_b(115)].leftArr=this.iRenderSum.leftArr=[],0),d=this.colwdArr=this[_b(115)].colwdArr=this.iRenderSum.colwdArr=[];o<y;o++)d[o]=(U=D[o]).hidden?0:U._width},initColWdArrSuper:function(){this[_b(680)](),this.setTopArr(0,!0),this[_b(653)](!0)},inViewport:function(v,T,P){P=P||this.getCell(v,T);var o=(I=this.dims).left-2,d=I.right-(I.wdCont-I[_b(649)])+2,g=I.top-2,p=I.bottom-(I.htCont-I[_b(650)])+2,M=(v=this[_b(343)](v,T),P.offsetLeft-I.wdContLeft),I=(T=(T=P.parentNode).offsetTop-I.htContTop,M+P[_b(40)]);return P=T+P[_b(41)],"right"==v?o<M&&I<d&&g<T&&P<p:"tr"==v?o<M&&I<d:"left"!=v||g<T&&P<p},isBody:function(){return!0},onHeadHtChanged:function(U){return function(D,y){U.setPanes()}},onMouseWheel:function(U){var D;return function(y){var o=this;o.style["pointer-events"]="none",clearTimeout(D),D=setTimeout(function(){o.style["pointer-events"]=""},300)}},onNativeScroll:function(){var U=this.that,D=(y=this.$cright[0]).scrollLeft,y=y.scrollTop;this.iRenderSum[_b(681)](D),this[_b(115)][_b(681)](D),this.$cleft[0].scrollTop=y,this.$ctr[0].scrollLeft=D,this.refresh(),U._trigger("scroll"),this.setTimer(function(){U._trigger("scrollStop")},"scrollStop",this.pauseTO)},onRefresh:function(U,D){"autoRow"!=D.source&&this[_b(682)](D.hChanged)},onRefreshTimer:function(U,D){return function(){var y=U.$cright[0];U.autoRow&&U.autoHeight({hChanged:D}),y.scrollTop=y.scrollTop,y.scrollLeft=y.scrollLeft}},pageDown:function(U,D){var y,o=this,d=o.topArr,g=d[U],p=U,M=o.dims,v=this.$cright[0].scrollTop,T=(M=95*Math.min(M[_b(650)]-M.htContTop,K(window).height())/100,g+M),I=U,P=d.length-1;o.scrollY(v+M,function(){for(I=U<o.initV?o.initV:U;I<=P;I++)if(g<(y=d[I])&&(g=y,p=I-1),T<y){p=I-1;break}D(p)})},pageUp:function(U,D){for(var y,o=this.topArr,d=o[U],g=this.$cright[0].scrollTop,p=this.dims,v=d-(p=9*Math.min(K(window).height(),p[_b(650)]-p.htContTop)/10),M=U,T=U;0<=T;T--)if((y=o[T])<d&&(d=y,M=T),y<v){M=T;break}this.scrollY(g-p,function(){D(M)})},postRenderAll:function(){var U,D,y,o=this,d=o.that,g=o.riOffset,p=o.iMerge,v=o.data;o.eachH(function(M,T){(y=M.postRender)&&o.eachV(function(I,P){D=p[_b(137)](P+g,T,!0),(U=o.getCell(D[_b(75)],D.colIndx))&&!U[_b(683)]&&(D.cell=U,d.callFn(y,D),U[_b(683)]=!0)})}),(y=o.numberCell.postRender)&&o.eachV(function(M,N){var I=o.getCell(N,-1),P=N+g;N={rowIndxPage:N,colIndx:-1,rowIndx:P,rowData:v[P]},I&&!I[_b(683)]&&(N.cell=I,d.callFn(y,N),I[_b(683)]=!0)})},refreshRow:function(U){var D,y,o=this,d=o.initH,g=o.finalH,p=o.freezeCols,v=o.get$Row(U),M=[];v.each(function(T,I){I=o.getRowIndx(I),M.push(I[1])}),o.that._trigger("beforeViewEmpty",null,{rowIndxPage:U}),v.remove(),M.forEach(function(T){y="left"==T||"lt"==T?(D=0,p-1):(D=d,g),o.renderView(U,U,D,y,T)})},newScrollPos:function(U,D){var y,o,d=(T=this.dims)[D?"wdContClient":"htContClient"],g=this.$cright[0],p=this[D?"colModel":"data"].length,v=this[D?"freezeCols":"freezeRows"],M=pq[D?"scrollLeft":"scrollTop"](g),T=T[D?"wdContLeft":"htContTop"];return U<v||p-1<U?M:(v=this.getTopSafe(U,D),p=this[D?"getWidthCell":"getHeightR"](U),null!=v?(!D&&this.virtualWin&&(D=(U=K(window)).scrollTop(),0<=(o=(g=v-M+K(g).offset().top-D)-U.height())?U.scrollTop(D+o+p):g<0&&U.scrollTop(D+g)),M+d<v+p+1?v<(y=v+p+1-d)+T&&(y=v-T):v<M+T&&(y=v-T),0<=(y=y<0?0:y)?y:M):void 0)},scrollColumn:function(U,D){U=this[_b(684)](U,!0),this.scrollX(U,D)},scrollRow:function(U,D){U=this[_b(684)](U),this.scrollY(U,D)},scrollCell:function(U,D,y){U=this[_b(684)](U),D=this[_b(684)](D,!0),this.scrollXY(D,U,y)},scrollY:function(U,D){var y=this.$cright[0];if(null==U)return y.scrollTop;U=0<=U?U:0,this.scrollXY(pq.scrollLeft(y),U,D)},scrollXY:function(U,D,y){var o,d=this.$cright[0],g=this.that,p=d.scrollLeft,v=d.scrollTop;if(!(0<=U))return[p,v];pq.scrollLeft(d,U),d.scrollTop=D,o=d.scrollLeft,U=d.scrollTop,y&&(o==p&&U==v?y():g.one("scroll",function(){o==p?y():g.one("scrollHead",y)}))},getSBHt:function(U){var o=pq.cVirtual.SBDIM;return!this.autoFit&&("flex"!=this.width||this.that.options.maxWidth)&&U>this.dims.wdCenter+o?o:0},getSBWd:function(){var U=this.dims,D=this.that.options[_b(685)];return!U.htCenter||D&&U.htCenter>(U.htTblHead||0)+U.htTbl+U.htTblSum?0:pq.cVirtual.SBDIM},setPanes:function(){var U=this,D=U.that.options,y=U.autoFit,o=U.dims,d=o.htCenter-o.htHead-o.htSum,g=o.wdCenter,p=U.$ele,v=U.freezeRows,M=U.$cright,T=M[0],I=U.$cleft,P=U.$clt,N=U.$ctr,V=U.getLeft(V=U.freezeCols),J=pq.cVirtual.SBDIM,W=o.wdTbl,re=Math.max(o.htTbl,30)+U.getSBHt(W),ce=U.getTopSafe(v);N.css("display",v?"":"none"),I.css("display",V?"":"none"),P.css("display",V&&v?"":"none"),M.css("overflow-y",""),"flex"==U.height?(0<d&&d<re?re=Math.min(re,d):M.css("overflow-y","hidden"),U.setHtCont(re)):U.setHtCont(d),y&&U.getSBWd()&&M.css("overflow-y","scroll"),M.css("overflow-x",y?"hidden":""),"flex"==U.width?(W=parseInt(p[0].style.height)>=o.htTbl-1?W:W+J,D.maxWidth&&g<W?W=Math.min(W,g):M.css("overflow-x","hidden"),U._flexWidth=W,p.width(U._flexWidth)):p.css("width",""),U.htCont=o.htCont=M.height(),U.wdCont=o.wdCont=M.width(),o[_b(650)]=v=T[_b(624)],o[_b(649)]=re=T[_b(63)],re<V&&(M.css("overflow-x","hidden"),V=re),I.css("width",V),P.css("width",V),N.width(re),I.height(v),d=T[_b(40)],U[_b(115)].setWidth(d,re),U.iRenderSum.setWidth(d,re),v<ce&&(M.css("overflow-y","hidden"),ce=v),P.css("height",ce),N.css("height",ce),U.wdContLeft=o.wdContLeft=I.width(),U.htContTop=o.htContTop=N.height()}},new pq.cVirtual)}(jQuery),(jQuery.paramquery.cMergeHead=function K(U){this.that=U}).prototype={getRootCell:function(U,D){for(var y=this.that,o=y[_b(144)],d=o[U][D],g=(D=d.rowSpan,d.leftPos);U&&o[U-1][g]==d;)U--;return{v_ri:U,o_ri:U,v_ci:y[_b(223)](g),o_ci:g,v_rc:D,o_rc:D,v_cc:d.colSpan,o_cc:d.o_colspan}},ismergedCell:function(U,D){var y,g,o=this.that,d=o[_b(144)];if(g=(g=d[U])?g[D]:"")if(y=g.leftPos,0!=U&&d[U-1][D]===g||o[_b(223)](y)!=D){if(g.colSpan)return!0}else if(o=g.colSpan,(d=g.rowSpan)&&o&&(1<d||1<o))return{o_ri:U,o_ci:y,v_rc:d,o_rc:d,v_cc:o,o_cc:g.o_colspan}},getClsStyle:function(){return{}}},function(K){pq.cRenderHS=K.extend({},new pq.cRender,{init:function(U){var D,y=this,o=y.that,d=o.options,g=y.colModel=o.colModel,p=y.isHead(),v=y.isSum(),M=p?d[_b(686)]:d.autoRowSum,T=o[_b(144)];y.freezeCols=d.freezeCols||0,y.numberCell=d.numberCell,y.width=d.width,y.height="flex",y.freezeRows=0,y.dims=o.dims,p?D=y.data=d.showHeader?d[_b(157)].header?T.concat([[]]):T:[]:v&&(D=y.data=d[_b(23)]||[]),y.maxHt=pq.cVirtual.maxHt,y.riOffset=0,y.cols=g.length,y.rows=D.length,p?1<T.length&&(y._m=function(){return!0}):d.stripeRows&&y[_b(676)](),y.autoRow=null==M?d.autoRow:M,y[_b(675)](),y[_b(653)](!0),y.setPanes()},initPost:function(U){this.data.length&&(U||{}).soft?(this[_b(346)](),this.refresh()):this[_b(679)]()},onNativeScroll:function(){this.refresh(),this.isHead()&&this.that._trigger("scrollHead")},onRefresh:function(U,D){this[_b(682)](D.hChanged)},refreshHS:function(){this.init(),this.initPost()},setPanes:function(){var U=this,D=U.that,y=U.dims,o=U.$ele,d=U.$cright,g=d[0],p=U.$cleft,v=U.getLeft(v=U.freezeCols),M=U.isHead(),T=U.isSum(),I=U.getTopSafe(U.rows);p.css("display",v?"":"none"),o.height(I),M?(y.htHead=I,D._trigger("headHtChanged")):T&&(y.htSum=I,D._trigger("headHtChanged")),U.htCont=d.height(),U.wdCont=d.width(),p.css("width",v),p.height(g[_b(624)]),U.wdContLeft=p.width(),U.htContTop=0},setScrollLeft:function(U){var D=this.$cright;D&&this.scrollLeft!==U&&(this.scrollLeft=D[0].scrollLeft=U)},setWidth:function(U,D){this.$spacer.width(U-D)}})}(jQuery),function(K){var U=K.paramquery;(pq[_b(672)]=function(D,y){var o=D.options,d=this,g=d.uuid=D.uuid;d.that=D,d.iMerge=new U.cMergeHead(D),d.$ele=y,d.height="flex",d.scrollTop=0,d.rtl=o.rtl?"right":"left",d.rowHt=o.rowHtHead||28,d.cellCls="pq-grid-col",d.setTimer=d.setTimer(!0),d.cellPrefix="pq-head-cell-u"+g+"-",d.rowPrefix="pq-head-row-u"+g+"-",d.preInit(y),(D.$head_i=y.children(".pq-grid-cont")).on("click",d[_b(687)].bind(d)),D.on("headerKeyDown",d[_b(688)].bind(d)).on(_a(337),d.onRefresh.bind(d))}).prototype=K.extend({},pq.cRenderHS,U.mixHeader,U[_b(269)],{getRowClsStyleAttr:function(D){var y=this.that[_b(144)].length,o="";return y==D?o="pq-grid-header-search-row":D==y-1&&(o="pq-grid-title-row"),[o,"",""]},getTblCls:function(D){var y="pq-grid-header-table";return D.hwrap?y:y+" pq-no-wrap"},isHead:function(){return!0},onRefreshTimer:function(D,y){return function(){var o=D.$cright[0];D.autoRow&&D.autoHeight({timer:!1,hChanged:y}),o.scrollTop=0,o.scrollLeft=o.scrollLeft,D[_b(689)](),D[_b(690)](),D[_b(691)](),D.that._trigger("refreshHeadAsync")}},_resizeId:function(D){return"pq-resize-div-"+this.uuid+"-"+D},_resizeCls:function(){return"pq-resize-div-"+this.uuid},_resizeDiv:function(D){return this.getById(this._resizeId(D))},refreshResizeColumn:function(){var D,y,o,d=this.initH,g=this.colModel,p=this._resizeCls(),v=this.finalH,M=this.numberCell,T=this.freezeCols,I=[],P=[],N=M.show?-1:0;for(this.$ele.find("."+p).remove();N<=v;N++){if(d<=N)D=P;else{if(!(N<T))continue;D=I}(y=0<=N?g[N]:M).hidden||!1===y.resizable||this._resizeDiv(N)||(y=this.getLeft(N+1)-5,o=this._resizeId(N),D.push("<div id='",o,"' pq-col-indx='",N,"' style='",this.rtl,":",y,"px;'",_a(338)+p+"'>&nbsp;</div>"))}I.length&&this.$cleft.append(I.join("")),P.length&&this.$cright.append(P.join(""))},renderCell:function(D){var p,y=D.colIndx,o=D.attr,d=D.cls,g=D.style;return(p=(p=D.rowData)[y])?(1<p.colSpan&&g.push("z-index:3;"),D.column=p,this[_b(692)](D)):(p=this[_b(693)](D.column,y,d),"<div "+o+" class='"+d.join(" ")+"' style='"+g.join("")+"'>"+p+"</div>")}})}(jQuery),function(K){var U=K.paramquery;(pq.cRenderSum=function(D,y){var o=D.options,d=this,g=d.uuid=D.uuid;d.that=D,d.rtl=o.rtl?"right":"left",d.iMerge={ismergedCell:function(){}},d.$ele=y,d.height="flex",d.scrollTop=0,d.rowHt=o.rowHtSum||27,d.cellCls="pq-grid-cell",d.setTimer=d.setTimer(!0),d.cellPrefix="pq-sum-cell-u"+g+"-",d.rowPrefix="pq-sum-row-u"+g+"-",d.preInit(y),D.on(_a(339),d.onRefresh.bind(d))}).prototype=K.extend({},new(U[_b(235)]),pq.cRenderHS,{isSum:function(){return!0},onRefreshTimer:function(D,y){return function(){var o=D.$cright[0];D.autoRow&&D.autoHeight({timer:!1,hChanged:y}),o.scrollTop=0,o.scrollLeft=o.scrollLeft}}})}(jQuery)})(function(K){return atob(["PGlucHV0IHR5cGU9J2NoZWNrYm94JyA=","PGlucHV0IHR5cGU9J2NoZWNrYm94JyBzdHlsZT0ncG9zaXRpb246Zml4ZWQ7bGVmdDotNTBweDt0b3A6LTUwcHg7Jy8+","PGlucHV0IHR5cGU9ImNoZWNrYm94IiAvPg==","LnBxLWdyaWQtY2VsbC5wcS1oYXMtdG9vbHRpcCwucHEtZ3JpZC1jZWxsW3RpdGxlXQ==","PHNwYW4gY2xhc3M9J3VpLWljb24g","IHBxLXRvb2x0aXAtaWNvbic+PC9zcGFuPg==","LnVpLWRyYWdnYWJsZS1kcmFnZ2luZw==","Om5vdChbZGlzYWJsZWRdLFt0YWJpbmRleD0iLTEiXSk=","PGRpdiBkaXI9J3J0bCcgc3R5bGU9J3Zpc2liaWx0eTpoaWRkZW47aGVpZ2h0OjRweDt3aWR0aDo0cHg7b3ZlcmZsb3c6YXV0bzsnPnJ0bDwvZGl2Pg==","aW5jb3JyZWN0IHVzYWdlIG9mIGlzVmFsaWQgcm93SW5keDog","aW5jb3JyZWN0IHVzYWdlIG9mIGlzVmFsaWQgZGF0YUluZHg6IA==","PHRkPjxzcGFuIGNsYXNzPSdwcS1zZXBhcmF0b3InPjwvc3Bhbj48L3RkPg==","PHRkPjxzcGFuIGNsYXNzPSdwcS1wYWdlLWRpc3BsYXknPg==","PHRhYmxlIHN0eWxlPSdib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7Jz48dHI+","PHRkPjxzcGFuIGNsYXNzPSdwcS11aS1idXR0b24gdWktd2lkZ2V0LWhlYWRlciBwcS1wYWdlLQ==","JyB0YWJpbmRleD0nMCcgdGl0bGU9Jw==","Jz48c3BhbiBjbGFzcz0ndWktaWNvbiB1aS1pY29uLQ==","Jz48L3NwYW4+PC9zcGFuPjwvdGQ+","PGlucHV0IHR5cGU9J3RleHQnIHZhbHVlPSc=","JyB0YWJpbmRleD0nMCcgY2xhc3M9J3BxLXBhZ2UtY3VycmVudCB1aS1jb3JuZXItYWxsJyAvPg==","PHNwYW4gY2xhc3M9J3BxLXBhZ2UtdG90YWwnPg==","PHNlbGVjdCBjbGFzcz0ndWktY29ybmVyLWFsbCBwcS1wYWdlLXNlbGVjdCcgPg==","PHRkPjxzcGFuIGNsYXNzPSdwcS1wYWdlLXJwcG9wdGlvbnMnPg==","PGRpdiBjbGFzcz0ncHEtc3VtbWFyeS1vdXRlcicgPjwvZGl2Pg==","PGRpdiBjbGFzcz0ncHEtZ3JpZC10b3Ag","PGRpdiBjbGFzcz0ncHEtZ3JpZC10aXRsZQ==","PGRpdiBjbGFzcz0ncHEtZ3JpZC1wYmFyJyBzdHlsZT0nYmFja2dyb3VuZDpyZWQ7aGVpZ2h0OjJweDt3aWR0aDowJTtkaXNwbGF5Om5vbmU7Jz4mbmJzcDs8L2Rpdj4=","PGRpdiBjbGFzcz0ncHEtZ3JpZC1jZW50ZXItbyc+","PGRpdiBjbGFzcz0ncHEtdG9vbC1wYW5lbCcgc3R5bGU9J2Rpc3BsYXk6","PGRpdiBjbGFzcz0ncHEtdG9vbC1wYW5lbC1ydWxlcycgc3R5bGU9J2Rpc3BsYXk6","PGRpdiBjbGFzcz0ncHEtZ3JpZC1jZW50ZXInID4=","PGRpdiBjbGFzcz0ncHEtaGVhZGVyLW91dGVyIA==","JyB0YWJpbmRleD0nMCc+PC9kaXY+","PGRpdiBjbGFzcz0ncHEtYm9keS1vdXRlcicgdGFiaW5kZXg9JzAnID48L2Rpdj4=","PGRpdiBzdHlsZT0nY2xlYXI6Ym90aDsnPjwvZGl2Pg==","PGRpdiBjbGFzcz0ncHEtZ3JpZC1ib3R0b20g","PGRpdiBjbGFzcz0ncHEtZ3JpZC1mb290ZXInPjwvZGl2Pg==","LnBxLWdyaWQtY2VsbCwucHEtZ3JpZC1udW1iZXItY2VsbA==","dXNlIGdyb3VwT3B0aW9uKCkgdG8gc2V0IGdyb3VwTW9kZWwgb3B0aW9ucy4=","dXNlIHRyZWVPcHRpb24oKSB0byBzZXQgdHJlZU1vZGVsIG9wdGlvbnMu","aW5wdXQsdGV4dGFyZWEsYnV0dG9uLHNlbGVjdCxvcHRpb24sLnBxLW5vLWNhcHR1cmUsLnVpLXJlc2l6YWJsZS1oYW5kbGU=","dGFibGUgdGFibGUtc3RyaXBlZCB0YWJsZS1jb25kZW5zZWQgdGFibGUtYm9yZGVyZWQ=","dGFibGUgdGFibGUtY29uZGVuc2Vk","Z2x5cGhpY29uLXRyaWFuZ2xlLWJvdHRvbQ==","Z2x5cGhpY29uLXRyaWFuZ2xlLXJpZ2h0","dWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50","cHEtY2VsbC1yZWQtdHIgcHEtaGFzLXRvb2x0aXA=","cHEtY2VsbC1ibHVlLXRyIHBxLWhhcy10b29sdGlw","YXZnLG1heCxtaW4sc3RkZXYsc3RkZXZwLHN1bQ==","PHNwYW4gY2xhc3M9J2J0biBidG4teHMgZ2x5cGhpY29uIGdseXBoaWNvbi0=","PHNwYW4gY2xhc3M9J3VpLXdpZGdldC1oZWFkZXIgcHEtdWktYnV0dG9uJz48c3BhbiBjbGFzcz0ndWktaWNvbiB1aS1pY29uLQ==","PGRpdiBjbGFzcz0ncHEtZ3JpZC1kaXNhYmxlJz48L2Rpdj4=","cHEtZ3JpZCB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbA==","dWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtcw==","dWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtbg==","PGRpdiBjbGFzcz0ncHEtc2xpZGVyLWljb24gcHEtbm8tY2FwdHVyZScgID4=","aW5wdXQsdGV4dGFyZWEsc2VsZWN0LFtjb250ZW50ZWRpdGFibGU9dHJ1ZV0=","cHEtZ3JpZC1jZWxsLWhvdmVyIHVpLXN0YXRlLWhvdmVy","cHEtZ3JpZC1yb3ctaG92ZXIgdWktc3RhdGUtaG92ZXI=","PGRpdiBjbGFzcz0ncHEtbG9hZGluZyc+PC9kaXY+","PGRpdiBjbGFzcz0ncHEtbG9hZGluZy1iZyc+PC9kaXY+PGRpdiBjbGFzcz0ncHEtbG9hZGluZy1tYXNrIHVpLXN0YXRlLWhpZ2hsaWdodCc+PGRpdj4=","cHEtZHJhZ2dhYmxlIHBxLW5vLWNhcHR1cmU=","PGRpdiBjbGFzcz0ncHEtd3JhcHBlcicgLz4=","PGRpdiBjbGFzcz0ncHEtZWRpdG9yLW91dGVyJz4=","PGRpdiBjbGFzcz0ncHEtZWRpdG9yLWlubmVyJz4=","b2xkUm93IHJlcXVpcmVkIHdoaWxlIHVwZGF0ZQ==","IHR5cGU9Y2hlY2tib3ggbmFtZT0n","PGRpdiBjb250ZW50ZWRpdGFibGU9J3RydWUnIGRhdGFUeXBlPSc=","dWktYXV0b2NvbXBsZXRlLWlucHV0","c2F2ZUFuZE1vdmUgc2F2ZUVkaXRDZWxs","PGltZyBzdHlsZT0ibWF4LWhlaWdodDoxMDAlO21heC13aWR0aDoxMDAlOyIgc3JjID0gIg==","LnBxLWdyaWQtY29sLC5wcS1ncmlkLW51bWJlci1jZWxs","PHNwYW4gY2xhc3M9J3BxLWNvbC1jb2xsYXBzZSBwcS1pY29uLWhvdmVyIHVpLWljb24gdWktaWNvbi0=","PGRpdiBjbGFzcz0ncHEtdGQtZGl2Jz4=","PHNwYW4gY2xhc3M9J3BxLXRpdGxlLXNwYW4nPg==","PHNwYW4gY2xhc3M9J3BxLWNvbC1zb3J0LWljb24=","PHNwYW4gY2xhc3M9J3BxLWNvbC1zb3J0LWNvdW50","IGdseXBoaWNvbiBnbHlwaGljb24tYXJyb3ct","dWktaWNvbiB1aS1pY29uLXRyaWFuZ2xlLTEt","LnBxLWdyaWQtY29sLXJlc2l6ZS1oYW5kbGU=","PGRpdiBjbGFzcz0ncHEtZ3JpZC1kcmFnLWJhcicg","PGRpdiBjbGFzcz0ncHEtYXJyb3ct","PGRpdiBjbGFzcz0ncHEtY29sLWRyYWctaGVscGVyIHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwgcGFuZWwgcGFuZWwtZGVmYXVsdCcgPjxzcGFuIGNsYXNzPSdwcS1kcmFnLWljb24gdWktaWNvbiA=","IGdseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlJz48L3NwYW4+","aW5wdXQsc2VsZWN0LHRleHRhcmVh","cHEtZ3JpZC1oZWFkZXItc2VhcmNoLXJvdw==","cHEtZHJvcC1ob3ZlciB1aS1zdGF0ZS1oaWdobGlnaHQ=","Om5vdCgucHEtZ3JpZC1oZWFkZXItc2VhcmNoLXJvdyk+LnBxLWdyaWQtY29s","PGRpdiBjbGFzcz0ncHEtZnJvbS1kaXYnPg==","PHNwYW4gY2xhc3M9J3BxLWZyb20tdG8tY2VudGVyJz4tPC9zcGFuPg==","PGRpdiBjbGFzcz0ncHEtdG8tZGl2Jz4=","LnBxLWdyaWQtaGQtc2VhcmNoLWZpZWxk","cHEtZ3JpZC1oZC1zZWFyY2gtZmllbGQ=","cHEtZ3JpZC1oZC1zZWFyY2gtZmllbGQg","ID48c3BhbiBzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7","JyB0eXBlPWNoZWNrYm94IGNsYXNzPSc=","PGRpdiBjbGFzcz0ncHEtdGQtZGl2JyBzdHlsZT0nb3ZlcmZsb3c6aGlkZGVuOyc+","dWktaWNvbi10cmlhbmdsZS0xLXNlIGdseXBoaWNvbiBnbHlwaGljb24tbWludXM=","dWktaWNvbi10cmlhbmdsZS0xLWUgZ2x5cGhpY29uIGdseXBoaWNvbi1wbHVz","dWktaWNvbi1jaGVjayBnbHlwaGljb24tb2s=","dWktaWNvbi1jbG9zZXRoaWNrIGdseXBoaWNvbi1yZW1vdmU=","dWktaWNvbi1jaXJjbGUtYXJyb3ctcyBnbHlwaGljb24gZ2x5cGhpY29uLWNpcmNsZS1hcnJvdy1kb3du","dWktaWNvbi1jaXJjbGUtYXJyb3ctbiBnbHlwaGljb24gZ2x5cGhpY29uLWNpcmNsZS1hcnJvdy11cA==","PGRpdiBzdHlsZT0ncG9zaXRpb246Zml4ZWQ7Ym90dG9tOjA7cmlnaHQ6MjVweDtwYWRkaW5nOjAgMnB4O21hcmdpbjowO29wYWNpdHk6MC41O3otaW5kZXg6MTAwMDA7Ym9yZGVyOjFweCBzb2xpZCBsaWdodGdyYXk7Ym9yZGVyLXJhZGl1czo1cHg7cG9pbnRlci1ldmVudHM6bm9uZTsnPg==","PGEgc3R5bGU9J2ZvbnQtc2l6ZToxMHB4OycgaHJlZj0naHR0cDovL3BhcmFtcXVlcnkuY29tL3Bybyc+UGFyYW1RdWVyeSBQcm8gRXZhbDwvYT4=","IGNsYXNzPSdwcS1ib3gtZm9jdXMnIHN0eWxlPSdwb3NpdGlvbjphYnNvbHV0ZTtvcGFjaXR5OjA7cmVzaXplOm5vbmU7cG9pbnRlci1ldmVudHM6bm9uZTsnID48L3RleHRhcmVhPg==","cG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3RvcDo=","cHg7cGFkZGluZzo1cHg7d2lkdGg6MTAwJTtvdmVyZmxvdzpoaWRkZW47","aW5jb3JyZWN0bHkgZGV0YWNoZWQgZGV0YWls","PGRpdiByb2xlPSdncmlkY2VsbCcgaWQ9Jw==","Ym9yZGVyLWxlZnQ6MDtib3JkZXItcmlnaHQ6MDsg","Ym9yZGVyLXRvcDowO2JvcmRlci1ib3R0b206MDs=","Ym9yZGVyLXJpZ2h0OjA7Ym9yZGVyLWJvdHRvbTow","Ym9yZGVyLWxlZnQ6MDtib3JkZXItYm90dG9tOjA=","Ym9yZGVyLXJpZ2h0OjA7Ym9yZGVyLXRvcDow","Ym9yZGVyLWxlZnQ6MDtib3JkZXItdG9wOjA=","PGxhYmVsIGNsYXNzPSd1aS1idXR0b24gdWktd2lkZ2V0IHVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbCA=","PGlucHV0IHR5cGU9J2ZpbGUnIHN0eWxlPSdkaXNwbGF5Om5vbmU7JyA=","PHNwYW4gY2xhc3M9J3VpLWJ1dHRvbi1pY29uLXByaW1hcnkgdWktaWNvbiA=","PHNwYW4gY2xhc3M9J3VpLWJ1dHRvbi10ZXh0Jz4=","PHNwYW4gY2xhc3M9J3BxLXNlcGFyYXRvcicg","PGJ1dHRvbiB0eXBlPSdidXR0b24nIA==","PHNwYW4gY2xhc3M9J2dseXBoaWNvbiA=","cHJpbWFyeSBrZXkgdmlvbGF0aW9u","c2FtZSBkYXRhIGNhbid0IGJlIGFkZGVkIHR3aWNlLg==","aW5wdXQsdGV4dGFyZWEsc2VsZWN0","PGRpdiBpZD0ncHEtZ3JpZC1leGNlbC1kaXYnICBzdHlsZT0ncG9zaXRpb246Zml4ZWQ7dG9wOjIwcHg7bGVmdDoyMHB4O2hlaWdodDoxcHg7d2lkdGg6MXB4O292ZXJmbG93OmhpZGRlbjt6LWluZGV4Og==","JyBhdXRvY29tcGxldGU9J29mZicgc3BlbGxjaGVjaz0nZmFsc2UnIHN0eWxlPSdvdmVyZmxvdzpoaWRkZW47aGVpZ2h0OjEwMDAwcHg7d2lkdGg6MTAwMDBweDtvcGFjaXR5OjAnIC8+","bGVuSCBOYU4uIGFzc2VydCBmYWlsZWQu","OjE2cHg7Y3Vyc29yOmRlZmF1bHQ7","JyBzdHlsZT0nd2lkdGg6MjcwcHg7JyBjbGFzcz0ncHEtdGhlbWUnPjxkaXY+PC9kaXY+PC9kaXY+","SW5jb3JyZWN0IGZpbHRlciBwYXJhbWV0ZXJzLiBQbGVhc2UgY2hlY2sgdXBncmFkZSBndWlkZQ==","ZGF0YVJlYWR5RG9uZSBjb2xNb3ZlIGdyb3VwU2hvd0hpZGU=","dWktaWNvbi10cmlhbmdsZS0xLXNl","PGRpdiBjbGFzcz0ncHEtZ3JvdXAtaGVhZGVyIHVpLWhlbHBlci1jbGVhcmZpeCcgPjwvZGl2Pg==","PGRpdiB0YWJpbmRleD0nMCcgY2xhc3M9J3BxLWdyb3VwLWl0ZW0nIGRhdGEtaW5keD0n","Y3VzdG9tU29ydCBjYW5jZWxTb3J0","PHNwYW4gY2xhc3M9J3BxLWdyb3VwLXBsYWNlaG9sZGVyJz4=","PHVsIGNsYXNzPSdwcS1ncm91cC1tZW51Jz48bGk+","PGRpdj48c3Bhbj4mbmJzcDs8L3NwYW4+PC9kaXY+","JyBjbGFzcz0ncHEtbWVudS1pdGVtJz4=","dWktaWNvbiB1aS1pY29uLWNoZWNr","dWktaWNvbiB1aS1pY29uLWNhbmNlbA==","PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1ncmlwLWRvdHRlZC12ZXJ0aWNhbCBwcS1kcmFnLWhhbmRsZScgc3R5bGU9J2N1cnNvcjptb3ZlO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MnB4O3RvcDo0cHg7Jz4mbmJzcDs8L3NwYW4+","PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1ncmlwLWRvdHRlZC12ZXJ0aWNhbCBwcS1kcmFnLWhhbmRsZScgc3R5bGU9J2N1cnNvcjptb3ZlO3ZlcnRpY2FsLWFsaWduOnRleHQtYm90dG9tO3RvdWNoLWFjdGlvbjpub25lO2Zsb2F0OmxlZnQ7Jz4mbmJzcDs8L3NwYW4+","PGRpdiBjbGFzcz0ncHEtYm9yZGVyLTAgcHEtZ3JpZC1jZWxsJyBzdHlsZT0ncG9pbnRlci1ldmVudHM6IG5vbmU7Jz48c3BhbiBjbGFzcz0ncHEtaWNvbicgc3R5bGU9J3ZlcnRpY2FsLWFsaWduOnRleHQtYm90dG9tO21hcmdpbjowIDVweDsnPjwvc3Bhbj48c3Bhbj48L3NwYW4+PC9kaXY+","cHEtdGhlbWUgcHEtZHJhZy1oZWxwZXI=","PHN2ZyBjbGFzcz0ncHEtYm9yZGVyLTAnIHN0eWxlPSdib3gtc2l6aW5nOmJvcmRlci1ib3g7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyLXdpZHRoOjEuNXB4O2JvcmRlci1zdHlsZTpkYXNoZWQ7cG9pbnRlci1ldmVudHM6bm9uZTtoZWlnaHQ6MDsnPjwvc3ZnPg==","PHN2ZyBjbGFzcz0ncHEtYm9yZGVyLTAnIHN0eWxlPSdwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDowO2hlaWdodDoxMDAlOw==","cHg7dG9wOjA7Ym9yZGVyLXN0eWxlOmRhc2hlZDtib3JkZXItd2lkdGg6MS41cHg7cG9pbnRlci1ldmVudHM6bm9uZTsnPjwvc3ZnPg==","JyBjbGFzcz0ncHEtY21lbnUgcHEtdGhlbWUgcHEtcG9wdXAnPjx0YWJsZT4=","PHRyIGNsYXNzPSdwcS1jbWVudS1pdGVtIA==","PC90ZD48dGQ+PHNwYW4gY2xhc3M9Jw==","cHEtc3VibWVudSB1aS1pY29uIHVpLWljb24tdHJpYW5nbGUtMS0=","YmVmb3JlU29ydERvbmUgYmVmb3JlRmlsdGVyRG9uZSBiZWZvcmVSb3dFeHBhbmREb25lIGJlZm9yZUdyb3VwRXhwYW5kRG9uZSBiZWZvcmVNb3ZlTm9kZSBiZWZvcmVBdXRvUm93SGVpZ2h0IGJlZm9yZVZhbGlkYXRlRG9uZSBiZWZvcmVUcmVlRXhwYW5kRG9uZSBvblJlc2l6ZUhpZXJhcmNoeQ==","YmVmb3JlQ29sQWRkRG9uZSBiZWZvcmVDb2xSZW1vdmVEb25lIGJlZm9yZUhpZGVDb2xzRG9uZSBiZWZvcmVDb2x1bW5Db2xsYXBzZURvbmUgYmVmb3JlQ29sTW92ZURvbmUgYmVmb3JlRmxleCBjb2x1bW5SZXNpemU=","PGRpdiBjbGFzcz0ncHEtZmlsbC1oYW5kbGUnPjwvZGl2Pg==","PGRpdiBzdHlsZT0naGVpZ2h0OjEwcHg7d2lkdGg6MTBweDtjdXJzb3I6Y3Jvc3NoYWlyOyc+PC9kaXY+","dWktaWNvbi1mb2xkZXItY29sbGFwc2Vk","aW5wdXRbdHlwZT0nY2hlY2tib3gnXQ==","PHNwYW4gY2xhc3M9J3BxLWdyb3VwLWljb24gdWktaWNvbiA=","PHNwYW4gY2xhc3M9J3BxLXRyZWUtaWNvbiB1aS1pY29uIA==","KFthLXpdKylccyo9XHMqIihbXiJdKiki","eGwvd29ya3NoZWV0cy9fcmVscy9zaGVldA==","UmVsYXRpb25zaGlwW1R5cGUqPSIvY29tbWVudHMiXQ==","ZGF0YTppbWFnZS9wbmc7YmFzZTY0LA==","UmVsYXRpb25zaGlwW1R5cGUqPScvaW1hZ2UnXQ==","eGRyXDp0d29DZWxsQW5jaG9yLHhkclw6b25lQ2VsbEFuY2hvcg==","ZmlsbHM+ZmlsbD5wYXR0ZXJuRmlsbD5mZ0NvbG9y","JCMsIyMwXyk7W1JlZF0oJCMsIyMwKQ==","JCMsIyMwLjAwXyk7KCQjLCMjMC4wMCk=","JCMsIyMwLjAwXyk7W1JlZF0oJCMsIyMwLjAwKQ==","IywjIzAuMDBfKTsoIywjIzAuMDAp","IywjIzAuMDBfKTtbUmVkXSgjLCMjMC4wMCk=","PCFET0NUWVBFIGh0bWw+PGh0bWw+PGhlYWQ+","PG1ldGEgY2hhcnNldD0idXRmLTgiIC8+","dGFibGV7ZW1wdHktY2VsbHM6c2hvdztmb250LWZhbWlseTo=","O2JvcmRlci1jb2xsYXBzZTpjb2xsYXBzZTt9","dGQsdGh7cGFkZGluZzogNXB4O2JvcmRlcjoxcHggc29saWQgI2NjYzt9","PC90YWJsZT48L2JvZHk+PC9odG1sPg==","PGlmcmFtZSBoZWlnaHQ9JzAnIHdpZHRoPScwJyBmcmFtZWJvcmRlcj0nMCcgc3JjPSI=","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxSZWxhdGlvbnNoaXBzIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvcGFja2FnZS8yMDA2L3JlbGF0aW9uc2hpcHMiPjxSZWxhdGlvbnNoaXAgSWQ9InJJZDEiIFR5cGU9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMvb2ZmaWNlRG9jdW1lbnQiIFRhcmdldD0ieGwvd29ya2Jvb2sueG1sIi8+PC9SZWxhdGlvbnNoaXBzPg==","eGwvX3JlbHMvd29ya2Jvb2sueG1sLnJlbHM=","d29ya3NoZWV0cy9fcmVscy9zaGVldA==","PHhkcjp3c0RyIHhtbG5zOnhkcj0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL2RyYXdpbmdtbC8yMDA2L3NwcmVhZHNoZWV0RHJhd2luZyIgeG1sbnM6YT0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL2RyYXdpbmdtbC8yMDA2L21haW4iIHhtbG5zOnI9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMiIHhtbG5zOmM9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9kcmF3aW5nbWwvMjAwNi9jaGFydCIgeG1sbnM6Y3g9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vb2ZmaWNlL2RyYXdpbmcvMjAxNC9jaGFydGV4IiB4bWxuczpjeDE9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vb2ZmaWNlL2RyYXdpbmcvMjAxNS85LzgvY2hhcnRleCIgeG1sbnM6bWM9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9tYXJrdXAtY29tcGF0aWJpbGl0eS8yMDA2IiB4bWxuczpkZ209Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9kcmF3aW5nbWwvMjAwNi9kaWFncmFtIiB4bWxuczp4M1Vuaz0iaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9vZmZpY2UvZHJhd2luZy8yMDEwL3NsaWNlciIgeG1sbnM6c2xlMTU9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vb2ZmaWNlL2RyYXdpbmcvMjAxMi9zbGljZXIiPg==","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxSZWxhdGlvbnNoaXBzIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvcGFja2FnZS8yMDA2L3JlbGF0aW9uc2hpcHMiPg==","PC94ZHI6Y29sPjx4ZHI6Y29sT2ZmPg==","PC94ZHI6Y29sT2ZmPjx4ZHI6cm93Pg==","PC94ZHI6cm93Pjx4ZHI6cm93T2ZmPg==","PHhkcjpwaWM+PHhkcjpudlBpY1ByPjx4ZHI6Y052UHIgaWQ9Ig==","PHhkcjpjTnZQaWNQciBwcmVmZXJSZWxhdGl2ZVJlc2l6ZT0iMCIvPjwveGRyOm52UGljUHI+","PHhkcjpibGlwRmlsbD48YTpibGlwIGNzdGF0ZT0icHJpbnQiIHI6ZW1iZWQ9Ig==","Ii8+PGE6c3RyZXRjaD48YTpmaWxsUmVjdC8+PC9hOnN0cmV0Y2g+PC94ZHI6YmxpcEZpbGw+","PHhkcjpzcFByPjxhOnByc3RHZW9tIHByc3Q9InJlY3QiPjxhOmF2THN0Lz48L2E6cHJzdEdlb20+PGE6bm9GaWxsLz48L3hkcjpzcFByPg==","PC94ZHI6cGljPjx4ZHI6Y2xpZW50RGF0YSBmTG9ja3NXaXRoU2hlZXQ9IjAiLz48L3hkcjo=","IiBUeXBlPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL2ltYWdlIiAvPg==","ZHJhd2luZ3MvX3JlbHMvZHJhd2luZw==","Y3VzdG9tSGVpZ2h0PSIxIiBodD0i","IGN1c3RvbVdpZHRoPSIxIiB3aWR0aD0i","PGNvbW1lbnQgYXV0aG9ySWQ9IjAiIHJlZj0i","Ij48dGV4dD48dCB4bWw6c3BhY2U9InByZXNlcnZlIj4=","PC90PjwvdGV4dD48L2NvbW1lbnQ+","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/Pg==","PGNvbW1lbnRzIHhtbG5zOnI9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMiIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvc3ByZWFkc2hlZXRtbC8yMDA2L21haW4iPg==","PGF1dGhvcnM+PGF1dGhvcj48L2F1dGhvcj48L2F1dGhvcnM+","PC9jb21tZW50TGlzdD48L2NvbW1lbnRzPg==","PE92ZXJyaWRlIFBhcnROYW1lPSIveGwvd29ya3NoZWV0cy9zaGVldA==","LnhtbCIgQ29udGVudFR5cGU9ImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLndvcmtzaGVldCt4bWwiLz4=","PE92ZXJyaWRlIFBhcnROYW1lPSIveGwvY29tbWVudHM=","LnhtbCIgQ29udGVudFR5cGU9ImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLmNvbW1lbnRzK3htbCIgLz4=","IiBDb250ZW50VHlwZT0iaW1hZ2Uv","PE92ZXJyaWRlIFBhcnROYW1lPSIveGwvZHJhd2luZ3MvZHJhd2luZw==","LnhtbCIgQ29udGVudFR5cGU9ImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5kcmF3aW5nK3htbCIvPg==","PFR5cGVzIHhtbG5zPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvcGFja2FnZS8yMDA2L2NvbnRlbnQtdHlwZXMiPg==","PE92ZXJyaWRlIFBhcnROYW1lPSIveGwvc3R5bGVzLnhtbCIgQ29udGVudFR5cGU9ImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnN0eWxlcyt4bWwiLz4=","PERlZmF1bHQgRXh0ZW5zaW9uPSJyZWxzIiBDb250ZW50VHlwZT0iYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLXBhY2thZ2UucmVsYXRpb25zaGlwcyt4bWwiLz4=","PERlZmF1bHQgRXh0ZW5zaW9uPSJ4bWwiIENvbnRlbnRUeXBlPSJhcHBsaWNhdGlvbi94bWwiIC8+","PE92ZXJyaWRlIFBhcnROYW1lPSIveGwvd29ya2Jvb2sueG1sIiBDb250ZW50VHlwZT0iYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQubWFpbit4bWwiLz4=","PERlZmF1bHQgRXh0ZW5zaW9uPSJ2bWwiIENvbnRlbnRUeXBlPSJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQudm1sRHJhd2luZyIgLz4=","PHNoZWV0Vmlld3M+PHNoZWV0VmlldyA=","IiBhY3RpdmVQYW5lPSJib3R0b21MZWZ0IiBzdGF0ZT0iZnJvemVuIi8+","PC9zaGVldFZpZXc+PC9zaGVldFZpZXdzPg==","PFJlbGF0aW9uc2hpcCBJZD0iY29t","IiBUYXJnZXQ9Ii4uL2NvbW1lbnRz","LnhtbCIgVHlwZT0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9jb21tZW50cyIgLz4=","PFJlbGF0aW9uc2hpcCBJZD0idm1s","IiBUYXJnZXQ9Ii4uL2RyYXdpbmdzL3ZtbERyYXdpbmc=","LnZtbCIgVHlwZT0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy92bWxEcmF3aW5nIiAvPg==","PFJlbGF0aW9uc2hpcCBJZD0icklk","IiBUYXJnZXQ9Ii4uL2RyYXdpbmdzL2RyYXdpbmc=","LnhtbCIgVHlwZT0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9kcmF3aW5nIi8+","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/Pjx3b3Jrc2hlZXQgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9zcHJlYWRzaGVldG1sLzIwMDYvbWFpbiIgeG1sbnM6cj0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcyI+","PGxlZ2FjeURyYXdpbmcgcjppZD0idm1s","PHhmIG51bUZtdElkPSIwIiBhcHBseU51bWJlckZvcm1hdD0iMSIvPg==","PGZpbGw+PHBhdHRlcm5GaWxsIHBhdHRlcm5UeXBlPSJzb2xpZCI+PGZnQ29sb3IgcmdiPSI=","Ii8+PC9wYXR0ZXJuRmlsbD48L2ZpbGw+","PGZhbWlseSB2YWw9IjIiLz48L2ZvbnQ+","IGFwcGx5TnVtYmVyRm9ybWF0PSIxIiBudW1GbXRJZD0i","IGFwcGx5RmlsbD0iMSIgZmlsbElkPSI=","IGFwcGx5Rm9udD0iMSIgZm9udElkPSI=","IGFwcGx5Qm9yZGVyPSIxIiBib3JkZXJJZD0i","IGFwcGx5QWxpZ25tZW50PSIxIj48YWxpZ25tZW50IA==","PHN0eWxlU2hlZXQgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9zcHJlYWRzaGVldG1sLzIwMDYvbWFpbiI+","PGZvbnQ+PHN6IHZhbD0iMTEiLz48Y29sb3IgdGhlbWU9IjEiLz48bmFtZSB2YWw9IkNhbGlicmkiLz48ZmFtaWx5IHZhbD0iMiIvPjxzY2hlbWUgdmFsPSJtaW5vciIvPjwvZm9udD4=","PGZpbGxzPjxmaWxsPjxwYXR0ZXJuRmlsbCBwYXR0ZXJuVHlwZT0ibm9uZSIvPjwvZmlsbD48ZmlsbD48cGF0dGVybkZpbGwgcGF0dGVyblR5cGU9ImdyYXkxMjUiLz48L2ZpbGw+","PGJvcmRlcnM+PGJvcmRlcj48bGVmdC8+PHJpZ2h0Lz48dG9wLz48Ym90dG9tLz48ZGlhZ29uYWwvPjwvYm9yZGVyPg==","PGNlbGxTdHlsZVhmcyBjb3VudD0iMSI+PHhmIG51bUZtdElkPSIwIiBmb250SWQ9IjAiIGZpbGxJZD0iMCIgYm9yZGVySWQ9IjAiLz4=","PGNlbGxTdHlsZXMgY291bnQ9IjEiPjxjZWxsU3R5bGUgbmFtZT0iTm9ybWFsIiB4ZklkPSIwIiBidWlsdGluSWQ9IjAiLz48L2NlbGxTdHlsZXM+","PGR4ZnMgY291bnQ9IjAiLz48dGFibGVTdHlsZXMgY291bnQ9IjAiIGRlZmF1bHRUYWJsZVN0eWxlPSJUYWJsZVN0eWxlTWVkaXVtOSIgZGVmYXVsdFBpdm90U3R5bGU9IlBpdm90U3R5bGVMaWdodDE2Ii8+","PHY6c2hhcGUgaWQ9IjEiIHR5cGU9IiMwIiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7bWFyZ2luLWxlZnQ6MjU5LjI1cHQ7bWFyZ2luLXRvcDoxLjVwdDt3aWR0aDoxMDhwdDtoZWlnaHQ6NTkuMjVwdDt6LWluZGV4OjE7dmlzaWJpbGl0eTpoaWRkZW4iIGZpbGxjb2xvcj0iI2ZmZmZlMSIgbzppbnNldG1vZGU9ImF1dG8iPjx2OmZpbGwgY29sb3IyPSIjZmZmZmUxIi8+PHY6c2hhZG93IG9uPSJ0IiBjb2xvcj0iYmxhY2siIG9ic2N1cmVkPSJ0Ii8+PHY6cGF0aCBvOmNvbm5lY3R0eXBlPSJub25lIi8+PHY6dGV4dGJveCBzdHlsZT0ibXNvLWRpcmVjdGlvbi1hbHQ6YXV0byI+PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpyaWdodCI+PC9kaXY+PC92OnRleHRib3g+PHg6Q2xpZW50RGF0YSBPYmplY3RUeXBlPSJOb3RlIj48eDpNb3ZlV2l0aENlbGxzLz48eDpTaXplV2l0aENlbGxzLz48eDpBbmNob3I+MSwgMTUsIDAsIDIsIDMsIDMxLCA0LCAxPC94OkFuY2hvcj48eDpBdXRvRmlsbD5GYWxzZTwveDpBdXRvRmlsbD4=","PC94OkNvbHVtbj48L3g6Q2xpZW50RGF0YT48L3Y6c2hhcGU+","PHhtbCB4bWxuczp2PSJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOnZtbCIgeG1sbnM6bz0idXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTpvZmZpY2U6b2ZmaWNlIiB4bWxuczp4PSJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOm9mZmljZTpleGNlbCI+PG86c2hhcGVsYXlvdXQgdjpleHQ9ImVkaXQiPjxvOmlkbWFwIHY6ZXh0PSJlZGl0IiBkYXRhPSIxIi8+PC9vOnNoYXBlbGF5b3V0Pg==","PHY6c2hhcGV0eXBlIGlkPSIwIiBjb29yZHNpemU9IjIxNjAwLDIxNjAwIiBvOnNwdD0iMjAyIiBwYXRoPSJtLGwsMjE2MDByMjE2MDAsbDIxNjAwLHhlIj48djpzdHJva2Ugam9pbnN0eWxlPSJtaXRlciIvPjx2OnBhdGggZ3JhZGllbnRzaGFwZW9rPSJ0IiBvOmNvbm5lY3R0eXBlPSJyZWN0Ii8+PC92OnNoYXBldHlwZT4=","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/Pjx3b3JrYm9vayB4bWxucz0iaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3NwcmVhZHNoZWV0bWwvMjAwNi9tYWluIiB4bWxuczpyPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzIj4=","PGJvb2tWaWV3cz48d29ya2Jvb2tWaWV3IA==","IC8+PC9ib29rVmlld3M+PHNoZWV0cz4=","IiBUeXBlPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL3dvcmtzaGVldCIgVGFyZ2V0PSJ3b3Jrc2hlZXRzL3NoZWV0","PFJlbGF0aW9uc2hpcHMgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9wYWNrYWdlLzIwMDYvcmVsYXRpb25zaGlwcyI+","IiBUeXBlPSJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL3N0eWxlcyIgVGFyZ2V0PSJzdHlsZXMueG1sIi8+","Y29sTW92ZSBjb2xBZGQgY29sUmVtb3Zl","ZWRpdG9yS2V5VXAgZWRpdG9yQ2xpY2s=","KD86KD86KD86Jyg/OlteXCpcPzpcW1xdXCsnXXwnJykrJyl8KD86W15cKlw/OlxbXF1cKFwpXCtcLScsIV0rKSkhKT8=","KFwkPykoW0EtWl0rKShcJD8pKFtcZF0rKD8hISkp","KFwkPykoWzAtOV0rKTooXCQ/KShbMC05XSsp","KFwkPykoW0EtWl0rKShcJD8pKFtcZF0rKQ==","KFwkPykoW0EtWl0rKTooXCQ/KShbQS1aXSsp","XCQ/W0EtWl0rXCQ/WzAtOV0rXCs/KXsyLH0pKD86XCl8XCx8JHxcKyk=","XCQ/KFtBLVpdKyk/XCQ/KFswLTldKyk/XDpcJD8oW0EtWl0rKT9cJD8oWzAtOV0rKT8p","XCQ/W0EtWl0rXCQ/WzAtOV0rKSg/IVs6XGRdKyk=","PGRpdiBzdHlsZT0nZm9udC1zaXplOjAuOWVtO2NvbG9yOiM4ODg7bWFyZ2luLWJvdHRvbTo1cHg7Jz4=","PGRpdiBjbGFzcz0ncHEtaW50ZWwnIHN0eWxlPSd3aWR0aDozNTBweDttYXgtaGVpZ2h0OjMwMHB4O292ZXJmbG93OmF1dG87YmFja2dyb3VuZDojZmZmO2JvcmRlcjoxcHggc29saWQgZ3JheTtib3gtc2hhZG93OiA0cHggNHB4IDJweCAjYWFhYWFhO3BhZGRpbmc6NXB4Oyc+PC9kaXY+","KFxkezEsMn0pLyhcZHsxLDJ9KS8oXGR7Miw0fSk=","KFxkezR9KS0oXGR7MSwyfSktKFxkezEsMn0p","KFxkezEsMn0pLShcZHsxLDJ9KS0oXGR7NH0p","KFxkezEsMn0pKDooXGR7MSwyfSkpPyg6KFxkezEsMn0pKT8oXHMoQU18UE0pKT8=","IHBxLXBpdm90LWxhYmVsIHBxLWJnLTMg","IHBxLXBpdm90LXBhbmUgcHEtYm9yZGVyLTEg","PGRpdiBjbGFzcz0ncHEtcGl2b3QtY29scy1hbGw=","PGxhYmVsPjxpbnB1dCB0eXBlPSdjaGVja2JveCcg","IGNsYXNzPSdwcS1waXZvdC1jaGVja2JveCcg","PGRpdiBjbGFzcz0ncHEtcGl2b3Qtcm93cw==","PGRpdiBkZW55PSdkZW55R3JvdXAnIGNsYXNzPSc=","PHNwYW4gY2xhc3M9J3BxLWljb24nPjwvc3Bhbj4=","PGxhYmVsPjxpbnB1dCB0eXBlPSdjaGVja2JveCcgY2xhc3M9J3BxLWdyb3VwLWNoZWNrYm94JyA=","PGRpdiBjbGFzcz0ncHEtcGl2b3QtY29scw==","PGRpdiBkZW55PSdkZW55UGl2b3QnIGNsYXNzPSc=","Jz48c3BhbiBjbGFzcz0ncHEtaWNvbic+PC9zcGFuPg==","PGRpdiBjbGFzcz0ncHEtcGl2b3QtdmFscw==","PGRpdiBkZW55PSdkZW55QWdnJyBjbGFzcz0n","PHNwYW4gc3R5bGU9J2NvbG9yOiM5OTk7bWFyZ2luOjFweDtkaXNwbGF5OmlubGluZS1ibG9jazsnPg==","PiAucHEtcGl2b3QtY29sOm5vdCgnLnBxLWRlbnktZHJhZycp","PHNwYW4gY2xhc3M9J3VpLWljb24tY2hlY2sgdWktaWNvbic+PC9zcGFuPg==","JyBjbGFzcz0ncHEtcGl2b3QtY29sIHBxLWJvcmRlci0yIA==","YVtocmVmPSd0YWJzLWZpbHRlcidd","Ij48c3BhbiBjbGFzcz0icHEtdGFiLQ==","LWljb24iPiZuYnNwOzwvc3Bhbj48L2E+PC9saT4=","PGRpdiBjbGFzcz0ncHEtaGVhZC1tZW51IHBxLXRoZW1lJyBkaXI9Jw==","PGRpdiBjbGFzcz0ncHEtdGFicycgc3R5bGU9J2JvcmRlci13aWR0aDowOyc+","PGRpdiBjbGFzcz0ncHEtZmlsdGVyLW1lbnUgcHEtdGhlbWUnLz4=","PGRpdiBzdHlsZT0nbWFyZ2luOjAgYXV0byA0cHg7Jz4=","PGRpdiBzdHlsZT0ncGFkZGluZzo0cHg7Jz4=","PGRpdiBkYXRhLXJlbD0nZ3JpZCcgc3R5bGU9J2Rpc3BsYXk6bm9uZTsnPjwvZGl2Pg==","PGRpdiBjbGFzcz0nZmlsdGVyX21vZGVfZGl2JyBzdHlsZT0ndGV4dC1hbGlnbjpjZW50ZXI7ZGlzcGxheTpub25lO21hcmdpbjo0cHggMCA0cHg7Jz4=","PGxhYmVsPjxpbnB1dCB0eXBlPSdyYWRpbycgbmFtZT0ncHFfZmlsdGVyX21vZGUnIHZhbHVlPSdBTkQnLz5BTkQ8L2xhYmVsPiZuYnNwOw==","PGxhYmVsPjxpbnB1dCB0eXBlPSdyYWRpbycgbmFtZT0ncHFfZmlsdGVyX21vZGUnIHZhbHVlPSdPUicvPk9SPC9sYWJlbD4=","PGRpdiBzdHlsZT0nbWFyZ2luOjAgYXV0byA0cHg7Jz48c2VsZWN0Pg==","PGRpdiBzdHlsZT0nbWFyZ2luOjRweCAwIDA7Jz4=","JyB0eXBlPSdidXR0b24nIHN0eWxlPSd3aWR0aDpjYWxjKDUwJSAtIDRweCk7bWFyZ2luOjJweDsnID4=","W25hbWU9InBxX2ZpbHRlcl9tb2RlIl0=","J106bm90KC5wcS1zZWFyY2gtdHh0KQ==","cG9wIHB1c2ggcmV2ZXJzZSBzaGlmdCBzb3J0IHNwbGljZSB1bnNoaWZ0","JyBzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7aGVpZ2h0Og==","cHg7Ym90dG9tOjA7bGVmdDowO3dpZHRoOjEwMCU7Y3Vyc29yOnJvdy1yZXNpemU7Jz48L2Rpdj4=","d2lkdGg6MTAwJTtiYWNrZ3JvdW5kLWNvbG9yOiMwMDA7aGVpZ2h0OjFweDs=","cG9zaXRpb246YWJzb2x1dGU7dG9wOg==","PGlucHV0IGNsYXNzPSdwcS1ib3JkZXItMCcgdmFsdWU9Ig==","IHBxLXRhYi1idXR0b24gcHEtdmFsaWduLWNlbnRlciBwcS1iZy0zIHBxLWJvcmRlci0wJz48ZGl2IGNsYXNzPSc=","IHVpLWljb24nPjwvZGl2PjwvZGl2Pg==","PGRpdiBjbGFzcz0ncHEtdGFicy1jb250IHVpLXdpZGdldC1jb250ZW50Jz4=","PGRpdiBjbGFzcz0ncHEtdGFicy1zdHJpcCcgc3R5bGU9Jw==","LnVpLXNvcnRhYmxlLXBsYWNlaG9sZGVy","PGRpdiB0YWJpbmRleD0wIGNsYXNzPSdwcS10YWItaXRlbSBwcS12YWxpZ24tY2VudGVyIHBxLWJvcmRlci0wIA==","PGRpdiBzdHlsZT0nbWF4LXdpZHRoOjEwMHB4O2hlaWdodDoxMDBweDtwb3NpdGlvbjpmaXhlZDtsZWZ0OjA7dG9wOjA7b3ZlcmZsb3c6YXV0bzt2aXNpYmlsaXR5OmhpZGRlbjsnPjxkaXYgc3R5bGU9J3dpZHRoOjIwMHB4O2hlaWdodDoxMDBweDsnPjwvZGl2PjwvZGl2Pg==","PGRpdiBzdHlsZT0ncG9zaXRpb246cmVsYXRpdmU7Jz48L2Rpdj4=","PGRpdiBzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7bGVmdDowOyc+PC9kaXY+","cHEtZ3JpZC1zdW1tYXJ5LXRhYmxl","PGRpdiBjbGFzcz0icHEtZ3JpZC1jb250Ij4=","PGRpdiBjbGFzcz0icHEtZ3JpZC1ub3Jvd3MiPg==","Ij48ZGl2IGNsYXNzPSJwcS10YWJsZS1yaWdodCA=","PGRpdiBjbGFzcz0icHEtci1zcGFjZXIiIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtoZWlnaHQ6MTBweDsiPjwvZGl2Pg==","Ij48ZGl2IGNsYXNzPSJwcS10YWJsZS1sZWZ0IA==","Ij48ZGl2IGNsYXNzPSJwcS10YWJsZS10ciA=","Ij48ZGl2IGNsYXNzPSJwcS10YWJsZS1sdCA=","bW91c2V3aGVlbCBET01Nb3VzZVNjcm9sbA==","JyByb2xlPSdncmlkY2VsbCcgY2xhc3M9J3BxLWdyaWQtbnVtYmVyLWNlbGwgJz4=","LnBxLW1lbnUtaWNvbiwucHEtbWVudS1maWx0ZXItaWNvbg==","cmVmcmVzaCByZWZyZXNoUm93IHJlZnJlc2hDZWxsIHJlZnJlc2hDb2x1bW4=","cmVmcmVzaEhlYWRlciBzb2Z0UmVmcmVzaA==","IGNsYXNzPSdwcS1ncmlkLWNvbC1yZXNpemUtaGFuZGxlIA==","cmVmcmVzaFN1bSBzb2Z0UmVmcmVzaA=="][K])},function(K){return["exportRender","getCascadeInit","pq_rowselect","chkEachChild","cascadeNest","chkEachParent","eventForInit","getCascadeList","_cascadeInit","pq_gsummary","getChildrenAll","pq_child_sum","titleInFirstCol","checkboxHead","setCellRender","sort_composite","indeterminate","refreshView","summaryInTitleRow","showSummary","skipSingleSummary","grandSummary","pq_grandsummary","summaryData","getCheckedNodes","refreshHeadVal","hasCboxHead","getCellHeader","onHeaderChange","preventDefault","stopPropagation","isImmediatePropagationStopped","originalEvent","isDefaultPrevented","getCellIndices","eventNamespace","pq_celldata","toUpperCase","elementFromPoint","activeElement","offsetWidth","offsetHeight","getFocusEle","isPlainObject","getOwnPropertyDescriptor","defineProperty","getDataType","formatNumber","attachEvent","ResizeObserver","addResizeListener","responseType","deFormatNumber","triggerHandler","toLowerCase","pq_disabled","pq_selected","pq_disabled_group","tableToArray","formatCurrency","fromCharCode","generateData","scrollWidth","clientWidth","validations","getValueFromDataType","getEditCell","focusInvalid","allowInvalid","invalidClass","checkEditable","_isValidCell","removeClass","onScrollCell","isValidCell","rowIndxPage","strFirstPage","strNextPage","strPrevPage","strLastPage","getRppOptions","onChangeSelect","$totalPages","bindCurPage","enableSelection","totalRecords","_createWidget","origOptions","roundCorners","summaryOnTop","collapsible","toolPanelRules","$toolPanelRules","$grid_center","onfocusHeader","_onGCMouseDown","cRenderBody","_onClickCell","_onDblClickCell","_onMouseDown","_onCellMouseEnter","_onRowMouseEnter","_onCellMouseLeave","_onRowMouseLeave","selectionModel","disableSelection","_refreshTitle","generateLoading","_refreshResizable","_refreshDraggable","iResizeColumns","cResizeColumns","addEventListener","changedTouches","_blurEditMode","iRenderHead","_refreshLoadingString","_createCollapse","refreshDataAndView","_destroyResizable","uiResizable","removeChild","_destroyDraggable","bodyKeyDown","refreshAfterExpand","currentTarget","clicksToEdit","isValidChange","isEditableCell","pq_cellprop","isEditableRow","_onMouseDownCont","setAttribute","_mousePQUpDelegate","_onMouseDownCell","isPropagationStopped","_onMouseDownRow","getRootCellO","highlightCell","highlightRow","unHighlightCell","unHighlightRow","getHeadIndices","getCellIndx","headerCells","_getCreateEventData","remoteRequest","_onDataAvailable","showLoading","showLoadingCounter","hideLoading","getTotalRows","refreshDataFromDataModel","_queueATriggers","backwardCompat","triggerQueue","getQueryString","filterModel","getQueryStringSort","iFilterData","getQueryStringFilter","postDataOnce","contentType","onRemoteSuccess","_refreshPager","getInstance","getColsPrimary","_generateEditorOutline","getCellCont","insertAfter","_removeEditOutline","refreshCell","scrollColumn","blurIfFocus","setSelection","getFirstVisibleCI","getColModel","getCMPrimary","getOCMPrimary","saveEditCell","getEditCellData","_digestNewRow","_digestData","historyModel","refreshCompareBy","checkEditableAdd","_digestUpdate","_digestDelete","refreshColumn","refreshHeaderCell","quitEditMode","_quitEditMode","getViewPortRowsIndx","getViewPortIndx","getRIOffset","ismergedCell","getFirstEditableColIndx","editFirstCellInRow","keyDownInEdit","keyPressInEdit","keyUpInEdit","cancelBlurCls","autocomplete","preventClose","_deleteBlurEditMode","createRange","getSelection","selectNodeContents","removeAllRanges","getCellFilter","getEditorIndices","getRowsByClass","getCellsByClass","pq_cellattr","processAttr","isEmptyObject","normalizeList","arrayUnique","_removeClass","_getFirstRC","getFirstVisibleRIP","getLastVisibleRIP","getLastVisibleCI","getNextVisibleCI","getPrevVisibleCI","getPrevVisibleRIP","getNextVisibleRIP","calcWidthCols","incrRowIndx","pressToEdit","getRootCell","getRootCellV","saveAndMove","setDataMergeCell","resizeOrReplace","cGenerateView","minColWidth","maxColWidth","percentColumn","refreshWidth","autoFitCols","isDateFormat","pq_rowstyle","columnBorders","pq_cellstyle","addDisableCls","getHeadCell","iDragColumns","colCollapse","onHeaderCellClick","getSortSpaceSpans","header_active","pq_composed","setDraggables","doubleClick","scrollModel","_setDragLimits","_getDragHelper","outerHeight","columnResize","cDragColumns","dragColumns","$drag_helper","$arrowBottom","onColMouseDown","setDraggable","setDroppables","updateDragHelper","showFeedback","mixHeaderFilter","postRenderCell","createListener","bindListener","getFilterUI","betweenTmpl","getControlStr","onWindowResize","mozFullScreen","webkitIsFullScreen","innerHeight","rowTemplate","maxWidthPixel","getFlexWidth","dimsRelativeTo","_calcOffset","isFullScreen","isReactiveDims","setResizeTimer","getParentDims","_autoResizeTimeout","refreshAfterResize","autoSizeInterval","refreshToolbar","refreshGridWidthAndHeight","setCenterHeight","setGridAndCenterHeightForFlex","setGridWidthForFlex","cCheckBoxColumn","oneDataReady","onDataReady","onCheckBoxChange","onCellKeyDown","onRefreshHeader","onRowSelect","onBeforeRowSelect","onBeforeCheck","renderLabel","cFilterData","iMouseSelection","cMouseSelection","getCellCoords","rowInvalidate","rowCollapse","stateColKeys","replaceWith","showToolbar","refreshHeader","refreshSummary","refreshHeaderFilter","dataPrimary","_sortLocalData","getPlainOptions","getDataCascade","removeNullOptions","filterLocalData","sortLocalData","clearFilters","groupOption","columnTemplate","autoGenColumns","getHeaderCells","assignRowSpan","cacheIndices","initTypeColumns","refreshComplete","rowHtDetail","detailModel","onBeforeViewEmpty","onAutoRowHeight","onColumnResize","getHeightCell","detachCells","softRefresh","getCellRegion","collapseIcon","initRowHtArrDetailSuper","setCellDims","getRenderVal","_setGlobalStr","addressLast","inflateRange","removeBlock","gridInstance","commitAddAll","commitUpdateAll","commitDeleteAll","commitUpdate","commitDelete","rollbackUpdate","rollbackDelete","rollbackAdd","getChangesValue","getChangesRaw","getCellData","deleteNodes","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","onCellClick","onCellMouseDown","onCellMouseEnter","onMousePQUp","clearClipBoard","createClipBoard","destroyClipBoard","onFilterChange","defaultDate","dpBeforeShow","filterFnSelect","conditionList","getConditionsDT","conditionExclude","cFilterMenu","lastIndexOf","compatibilityCheck","getCMFromRules","addMissingConditions","copyRuleToColumn","getRulesFromCM","_getRulesFromCM","sortRulesAndFMIndx","isMatchCell","writeSorter","writeSingle","skipCustomSort","initByRemote","tempMultiple","sort_sortType","sort_number","sort_dataType","sort_locale","sort_string","compileSorter","removeCache","localeCompare","alterColumn","calcVisibleRows","findNextVisibleColumn","findNextVisibleRow","calcVisibleColumns","_mergeCells","beforeTrigger","onGroupItemClick","removeGroup","toggleLevel","triggerChange","groupRemoveIcon","summaryEdit","getAggOptions","editorGetData","createHeader","summaryOptions","groupChange","onCellKeyDown2","onColumnDrag","onCustomSort","setCascadeInit","initHeadSortable","strGroup_header","initHeaderMenu","updateItems","removeEmptyParent","getUniqueNodes","cascadeInit","initHeadDroppable","onCustomSortTree","summaryRestore","refreshColumns","initcollapsed","renderTitle","renderBodyCell","renderSummary","summaryTitle","updateformatVal","titleDefault","editorSummary","postRenderInterval","contentHelper","addRejectIcon","isDraggable","addAcceptIcon","getChildren","removeFeedback","elementFromXY","contextMenu","getItemHtml","onMouseOver","removeSubMenu","onMouseDown","onBeforeCol","getAllCells","oneRefreshCol","getElementById","iFillHandle","cFillHandle","onSelectChange","onSelectEnd","setDoubleClickable","getFullYear","setFullYear","patternDate2","autofillVal","getContRight","calcMainData","isFormulaChange","formulaSave","isCollapsed","historyDelete","collapseAll","collapseNodes","expandNodes","filterShowChildren","onDataAvailable","onDataReadyAfter","onBeforeCellKeyDown","onCustomFilter","onClearFilter","leafIfEmpty","historyMove","refreshOnChange","refreshViewFull","clearFolderCheckbox","showHideRows","filterLockSummary","iconCollapse","_showHideRows","isSelectedAll","copyFormula","generateCols","headerRowIndx","applyOptions","excelImport","getFileText","getFileTextFromKey","getStyleText","preDefFormats","colorFromNode","unescapeXml","uniqueCount","cacheStyles","getPathSheets","getWorkSheet","getMergeCells","customHeight","getBinaryContent","exportExcel","getCsvHeader","postRequest","getExportCM","getWorkbook","getJsonContent","getCSVContent","getHtmlContent","getHtmlHeader","getHtmlBody","nostringify","getXlsHeader","getXlsMergeCells","getWBookRels","getSheetRel","getContentTypes","getStyleIndx","getFormatIndx","getFillIndx","getBorderIndx","getFontIndx","SpreadSheet","formulasModel","onDataReadyDone","onColumnAMR","onBeforeValidateDone","onEditorBegin","onEditorEnd","onEditorKeyUp","onTabChange","onTabRename","eachFormula","execIfDirty","startOffset","selectRange","removeStrings","strFormulas","valueToDate","getUTCMonth","getUTCFullYear","setUTCMonth","toLocaleLowerCase","toLocaleUpperCase","onBeforeFilterDone","pivotSortFn","pivotColsTotal","transformData","addAggrInCM","pivotTotalForSingle","getAttribute","_sortCancel","isHideColPane","hidePivotChkBox","disablePivotChkBox","strTP_pivot","hideRowPane","hideGroupChkBox","strTP_rowPane","strTP_colPane","hideAggPane","strTP_aggPane","onPivotChange","onGroupChange","onGroupOption","hideColPane","refreshGrid","showHideColPane","getSortCancel","setSortCancel","pendingRefresh","templateVals","strTP_rowPH","strTP_colPH","strTP_aggPH","setAttrPanes","onHeadCellClick","iHeaderMenu","strSelectAll","menuInDisable","menuInClose","onTreeExpand","gridOptions","onFilterClick","onMenuClick","getMenuHtml","appendFilter","getRenderLbl","refreshRowFilter","onSel1Change","onSel2Change","$filter_mode","onModeChange","getHtmlInput","readFilterUI","getConditionsCol","strCondition","getOptionStr","singleFilter","strConditions","filterByCond","refreshInputVarsAndEvents","initControls","$filter_mode_div","addEventsInput","isInputHidden","contentEditable","clientHeight","refreshDataView","getPrototypeOf","prxArrayObjs","createElement","setStartAfter","startContainer","textContent","nextSibling","appendChild","onCellEnter","getSheetOptions","getGridOptions","strTabRemove","scrollLeftVal","setBtnEnable","strTabClose","customFilter","cachedPages","progressAcrossTabs","triggerComplete","triggerProgress","triggerTblDims","calcTopBottom","calInitFinal","wdContClient","htContClient","getHtDetail","getHeightCellM","assignTblDims","initRowHtArr","setRowHtArr","setColWdArr","generateCell","getClsStyle","getWidthCellM","getRowClsStyleAttr","onNativeScroll","onMouseWheel","onRefreshTimer","calInitFinalSuper","fullRefresh","removeMergeCells","hasMergeCls","generateRow","renderNumCell","getWidthCell","getHeightCellDirty","cRenderHead","onHeadHtChanged","postRenderAll","initRowHtArrSuper","initStripeArr","refreshColumnWidths","initColWdArrSuper","refreshAllCells","initColWdArr","setScrollLeft","initRefreshTimer","_postRender","newScrollPos","hideVScroll","autoRowHead","onHeaderClick","onHeaderKeyDown","onCreateHeader","refreshResizeColumn","setSortIcons","createHeaderCell","renderFilterCell"][K]})},200:K=>{"use strict";K.exports="/*! jQuery UI - v1.12.1 - 2017-03-19\n* http://jqueryui.com\n* Includes: draggable.css, core.css, resizable.css, selectable.css, sortable.css, accordion.css, autocomplete.css, menu.css, button.css, controlgroup.css, checkboxradio.css, datepicker.css, dialog.css, progressbar.css, selectmenu.css, slider.css, spinner.css, tabs.css, tooltip.css, theme.css\n* To view and modify this theme, visit http://jqueryui.com/themeroller/?scope=&folderName=base&cornerRadiusShadow=8px&offsetLeftShadow=0px&offsetTopShadow=0px&thicknessShadow=5px&opacityShadow=30&bgImgOpacityShadow=0&bgTextureShadow=flat&bgColorShadow=666666&opacityOverlay=30&bgImgOpacityOverlay=0&bgTextureOverlay=flat&bgColorOverlay=aaaaaa&iconColorError=cc0000&fcError=5f3f3f&borderColorError=f1a899&bgTextureError=flat&bgColorError=fddfdf&iconColorHighlight=777620&fcHighlight=777620&borderColorHighlight=dad55e&bgTextureHighlight=flat&bgColorHighlight=fffa90&iconColorActive=ffffff&fcActive=ffffff&borderColorActive=003eff&bgTextureActive=flat&bgColorActive=007fff&iconColorHover=555555&fcHover=2b2b2b&borderColorHover=cccccc&bgTextureHover=flat&bgColorHover=ededed&iconColorDefault=777777&fcDefault=454545&borderColorDefault=c5c5c5&bgTextureDefault=flat&bgColorDefault=f6f6f6&iconColorContent=444444&fcContent=333333&borderColorContent=dddddd&bgTextureContent=flat&bgColorContent=ffffff&iconColorHeader=444444&fcHeader=333333&borderColorHeader=dddddd&bgTextureHeader=flat&bgColorHeader=e9e9e9&cornerRadius=3px&fwDefault=normal&fsDefault=1em&ffDefault=Arial%2CHelvetica%2Csans-serif\n* Copyright jQuery Foundation and other contributors; Licensed MIT */\n\n.ui-draggable-handle {\n\ttouch-action: none;\n}\n\n/* Layout helpers\n----------------------------------*/\n\n.ui-helper-hidden {\n\tdisplay: none;\n}\n\n.ui-helper-hidden-accessible {\n\tborder: 0;\n\tclip: rect(0 0 0 0);\n\theight: 1px;\n\tmargin: -1px;\n\toverflow: hidden;\n\tpadding: 0;\n\tposition: absolute;\n\twidth: 1px;\n}\n\n.ui-helper-reset {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\toutline: 0;\n\tline-height: 1.3;\n\ttext-decoration: none;\n\tfont-size: 100%;\n\tlist-style: none;\n}\n\n.ui-helper-clearfix:before,\n.ui-helper-clearfix:after {\n\tcontent: \"\";\n\tdisplay: table;\n\tborder-collapse: collapse;\n}\n\n.ui-helper-clearfix:after {\n\tclear: both;\n}\n\n.ui-helper-zfix {\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n\tposition: absolute;\n\topacity: 0;\n\tfilter:Alpha(Opacity=0); /* support: IE8 */\n}\n\n.ui-front {\n\tz-index: 100;\n}\n\n/* Interaction Cues\n----------------------------------*/\n\n.ui-state-disabled {\n\tcursor: default !important;\n\tpointer-events: none;\n}\n\n/* Icons\n----------------------------------*/\n\n.ui-icon {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tmargin-top: -.25em;\n\tposition: relative;\n\ttext-indent: -99999px;\n\toverflow: hidden;\n\tbackground-repeat: no-repeat;\n}\n\n.ui-widget-icon-block {\n\tleft: 50%;\n\tmargin-left: -8px;\n\tdisplay: block;\n}\n\n/* Misc visuals\n----------------------------------*/\n\n/* Overlays */\n\n.ui-widget-overlay {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.ui-resizable {\n\tposition: relative;\n}\n\n.ui-resizable-handle {\n\tposition: absolute;\n\tfont-size: 0.1px;\n\tdisplay: block;\n\ttouch-action: none;\n}\n\n.ui-resizable-disabled .ui-resizable-handle,\n.ui-resizable-autohide .ui-resizable-handle {\n\tdisplay: none;\n}\n\n.ui-resizable-n {\n\tcursor: n-resize;\n\theight: 7px;\n\twidth: 100%;\n\ttop: -5px;\n\tleft: 0;\n}\n\n.ui-resizable-s {\n\tcursor: s-resize;\n\theight: 7px;\n\twidth: 100%;\n\tbottom: -5px;\n\tleft: 0;\n}\n\n.ui-resizable-e {\n\tcursor: e-resize;\n\twidth: 7px;\n\tright: -5px;\n\ttop: 0;\n\theight: 100%;\n}\n\n.ui-resizable-w {\n\tcursor: w-resize;\n\twidth: 7px;\n\tleft: -5px;\n\ttop: 0;\n\theight: 100%;\n}\n\n.ui-resizable-se {\n\tcursor: se-resize;\n\twidth: 12px;\n\theight: 12px;\n\tright: 1px;\n\tbottom: 1px;\n}\n\n.ui-resizable-sw {\n\tcursor: sw-resize;\n\twidth: 9px;\n\theight: 9px;\n\tleft: -5px;\n\tbottom: -5px;\n}\n\n.ui-resizable-nw {\n\tcursor: nw-resize;\n\twidth: 9px;\n\theight: 9px;\n\tleft: -5px;\n\ttop: -5px;\n}\n\n.ui-resizable-ne {\n\tcursor: ne-resize;\n\twidth: 9px;\n\theight: 9px;\n\tright: -5px;\n\ttop: -5px;\n}\n\n.ui-selectable {\n\ttouch-action: none;\n}\n\n.ui-selectable-helper {\n\tposition: absolute;\n\tz-index: 100;\n\tborder: 1px dotted black;\n}\n\n.ui-sortable-handle {\n\ttouch-action: none;\n}\n\n.ui-accordion .ui-accordion-header {\n\tdisplay: block;\n\tcursor: pointer;\n\tposition: relative;\n\tmargin: 2px 0 0 0;\n\tpadding: .5em .5em .5em .7em;\n\tfont-size: 100%;\n}\n\n.ui-accordion .ui-accordion-content {\n\tpadding: 1em 2.2em;\n\tborder-top: 0;\n\toverflow: auto;\n}\n\n.ui-autocomplete {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tcursor: default;\n}\n\n.ui-menu {\n\tlist-style: none;\n\tpadding: 0;\n\tmargin: 0;\n\tdisplay: block;\n\toutline: 0;\n}\n\n.ui-menu .ui-menu {\n\tposition: absolute;\n}\n\n.ui-menu .ui-menu-item {\n\tmargin: 0;\n\tcursor: pointer;\n\t/* support: IE10, see #8844 */\n\tlist-style-image: url(\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\");\n}\n\n.ui-menu .ui-menu-item-wrapper {\n\tposition: relative;\n\tpadding: 3px 1em 3px .4em;\n}\n\n.ui-menu .ui-menu-divider {\n\tmargin: 5px 0;\n\theight: 0;\n\tfont-size: 0;\n\tline-height: 0;\n\tborder-width: 1px 0 0 0;\n}\n\n.ui-menu .ui-state-focus,\n.ui-menu .ui-state-active {\n\tmargin: -1px;\n}\n\n/* icon support */\n\n.ui-menu-icons {\n\tposition: relative;\n}\n\n.ui-menu-icons .ui-menu-item-wrapper {\n\tpadding-left: 2em;\n}\n\n/* left-aligned */\n\n.ui-menu .ui-icon {\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: .2em;\n\tmargin: auto 0;\n}\n\n/* right-aligned */\n\n.ui-menu .ui-menu-icon {\n\tleft: auto;\n\tright: 0;\n}\n\n.ui-button {\n\tpadding: .4em 1em;\n\tdisplay: inline-block;\n\tposition: relative;\n\tline-height: normal;\n\tmargin-right: .1em;\n\tcursor: pointer;\n\tvertical-align: middle;\n\ttext-align: center;\n\t-webkit-user-select: none;\n\tuser-select: none;\n\n\t/* Support: IE <= 11 */\n\toverflow: visible;\n}\n\n.ui-button,\n.ui-button:link,\n.ui-button:visited,\n.ui-button:hover,\n.ui-button:active {\n\ttext-decoration: none;\n}\n\n/* to make room for the icon, a width needs to be set here */\n\n.ui-button-icon-only {\n\twidth: 2em;\n\tbox-sizing: border-box;\n\ttext-indent: -9999px;\n\twhite-space: nowrap;\n}\n\n/* no icon support for input elements */\n\ninput.ui-button.ui-button-icon-only {\n\ttext-indent: 0;\n}\n\n/* button icon element(s) */\n\n.ui-button-icon-only .ui-icon {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\tmargin-top: -8px;\n\tmargin-left: -8px;\n}\n\n.ui-button.ui-icon-notext .ui-icon {\n\tpadding: 0;\n\twidth: 2.1em;\n\theight: 2.1em;\n\ttext-indent: -9999px;\n\twhite-space: nowrap;\n\n}\n\ninput.ui-button.ui-icon-notext .ui-icon {\n\twidth: auto;\n\theight: auto;\n\ttext-indent: 0;\n\twhite-space: normal;\n\tpadding: .4em 1em;\n}\n\n/* workarounds */\n\n/* Support: Firefox 5 - 40 */\n\ninput.ui-button::-moz-focus-inner,\nbutton.ui-button::-moz-focus-inner {\n\tborder: 0;\n\tpadding: 0;\n}\n\n.ui-controlgroup {\n\tvertical-align: middle;\n\tdisplay: inline-block;\n}\n\n.ui-controlgroup > .ui-controlgroup-item {\n\tfloat: left;\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.ui-controlgroup > .ui-controlgroup-item:focus,\n.ui-controlgroup > .ui-controlgroup-item.ui-visual-focus {\n\tz-index: 9999;\n}\n\n.ui-controlgroup-vertical > .ui-controlgroup-item {\n\tdisplay: block;\n\tfloat: none;\n\twidth: 100%;\n\tmargin-top: 0;\n\tmargin-bottom: 0;\n\ttext-align: left;\n}\n\n.ui-controlgroup-vertical .ui-controlgroup-item {\n\tbox-sizing: border-box;\n}\n\n.ui-controlgroup .ui-controlgroup-label {\n\tpadding: .4em 1em;\n}\n\n.ui-controlgroup .ui-controlgroup-label span {\n\tfont-size: 80%;\n}\n\n.ui-controlgroup-horizontal .ui-controlgroup-label + .ui-controlgroup-item {\n\tborder-left: none;\n}\n\n.ui-controlgroup-vertical .ui-controlgroup-label + .ui-controlgroup-item {\n\tborder-top: none;\n}\n\n.ui-controlgroup-horizontal .ui-controlgroup-label.ui-widget-content {\n\tborder-right: none;\n}\n\n.ui-controlgroup-vertical .ui-controlgroup-label.ui-widget-content {\n\tborder-bottom: none;\n}\n\n/* Spinner specific style fixes */\n\n.ui-controlgroup-vertical .ui-spinner-input {\n\n\t/* Support: IE8 only, Android < 4.4 only */\n\twidth: 75%;\n\twidth: calc( 100% - 2.4em );\n}\n\n.ui-controlgroup-vertical .ui-spinner .ui-spinner-up {\n\tborder-top-style: solid;\n}\n\n.ui-checkboxradio-label .ui-icon-background {\n\tbox-shadow: inset 1px 1px 1px #ccc;\n\tborder-radius: .12em;\n\tborder: none;\n}\n\n.ui-checkboxradio-radio-label .ui-icon-background {\n\twidth: 16px;\n\theight: 16px;\n\tborder-radius: 1em;\n\toverflow: visible;\n\tborder: none;\n}\n\n.ui-checkboxradio-radio-label.ui-checkboxradio-checked .ui-icon,\n.ui-checkboxradio-radio-label.ui-checkboxradio-checked:hover .ui-icon {\n\tbackground-image: none;\n\twidth: 8px;\n\theight: 8px;\n\tborder-width: 4px;\n\tborder-style: solid;\n}\n\n.ui-checkboxradio-disabled {\n\tpointer-events: none;\n}\n\n.ui-datepicker {\n\twidth: 17em;\n\tpadding: .2em .2em 0;\n\tdisplay: none;\n}\n\n.ui-datepicker .ui-datepicker-header {\n\tposition: relative;\n\tpadding: .2em 0;\n}\n\n.ui-datepicker .ui-datepicker-prev,\n.ui-datepicker .ui-datepicker-next {\n\tposition: absolute;\n\ttop: 2px;\n\twidth: 1.8em;\n\theight: 1.8em;\n}\n\n.ui-datepicker .ui-datepicker-prev-hover,\n.ui-datepicker .ui-datepicker-next-hover {\n\ttop: 1px;\n}\n\n.ui-datepicker .ui-datepicker-prev {\n\tleft: 2px;\n}\n\n.ui-datepicker .ui-datepicker-next {\n\tright: 2px;\n}\n\n.ui-datepicker .ui-datepicker-prev-hover {\n\tleft: 1px;\n}\n\n.ui-datepicker .ui-datepicker-next-hover {\n\tright: 1px;\n}\n\n.ui-datepicker .ui-datepicker-prev span,\n.ui-datepicker .ui-datepicker-next span {\n\tdisplay: block;\n\tposition: absolute;\n\tleft: 50%;\n\tmargin-left: -8px;\n\ttop: 50%;\n\tmargin-top: -8px;\n}\n\n.ui-datepicker .ui-datepicker-title {\n\tmargin: 0 2.3em;\n\tline-height: 1.8em;\n\ttext-align: center;\n}\n\n.ui-datepicker .ui-datepicker-title select {\n\tfont-size: 1em;\n\tmargin: 1px 0;\n}\n\n.ui-datepicker select.ui-datepicker-month,\n.ui-datepicker select.ui-datepicker-year {\n\twidth: 45%;\n}\n\n.ui-datepicker table {\n\twidth: 100%;\n\tfont-size: .9em;\n\tborder-collapse: collapse;\n\tmargin: 0 0 .4em;\n}\n\n.ui-datepicker th {\n\tpadding: .7em .3em;\n\ttext-align: center;\n\tfont-weight: bold;\n\tborder: 0;\n}\n\n.ui-datepicker td {\n\tborder: 0;\n\tpadding: 1px;\n}\n\n.ui-datepicker td span,\n.ui-datepicker td a {\n\tdisplay: block;\n\tpadding: .2em;\n\ttext-align: right;\n\ttext-decoration: none;\n}\n\n.ui-datepicker .ui-datepicker-buttonpane {\n\tbackground-image: none;\n\tmargin: .7em 0 0 0;\n\tpadding: 0 .2em;\n\tborder-left: 0;\n\tborder-right: 0;\n\tborder-bottom: 0;\n}\n\n.ui-datepicker .ui-datepicker-buttonpane button {\n\tfloat: right;\n\tmargin: .5em .2em .4em;\n\tcursor: pointer;\n\tpadding: .2em .6em .3em .6em;\n\twidth: auto;\n\toverflow: visible;\n}\n\n.ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current {\n\tfloat: left;\n}\n\n/* with multiple calendars */\n\n.ui-datepicker.ui-datepicker-multi {\n\twidth: auto;\n}\n\n.ui-datepicker-multi .ui-datepicker-group {\n\tfloat: left;\n}\n\n.ui-datepicker-multi .ui-datepicker-group table {\n\twidth: 95%;\n\tmargin: 0 auto .4em;\n}\n\n.ui-datepicker-multi-2 .ui-datepicker-group {\n\twidth: 50%;\n}\n\n.ui-datepicker-multi-3 .ui-datepicker-group {\n\twidth: 33.3%;\n}\n\n.ui-datepicker-multi-4 .ui-datepicker-group {\n\twidth: 25%;\n}\n\n.ui-datepicker-multi .ui-datepicker-group-last .ui-datepicker-header,\n.ui-datepicker-multi .ui-datepicker-group-middle .ui-datepicker-header {\n\tborder-left-width: 0;\n}\n\n.ui-datepicker-multi .ui-datepicker-buttonpane {\n\tclear: left;\n}\n\n.ui-datepicker-row-break {\n\tclear: both;\n\twidth: 100%;\n\tfont-size: 0;\n}\n\n/* RTL support */\n\n.ui-datepicker-rtl {\n\tdirection: rtl;\n}\n\n.ui-datepicker-rtl .ui-datepicker-prev {\n\tright: 2px;\n\tleft: auto;\n}\n\n.ui-datepicker-rtl .ui-datepicker-next {\n\tleft: 2px;\n\tright: auto;\n}\n\n.ui-datepicker-rtl .ui-datepicker-prev:hover {\n\tright: 1px;\n\tleft: auto;\n}\n\n.ui-datepicker-rtl .ui-datepicker-next:hover {\n\tleft: 1px;\n\tright: auto;\n}\n\n.ui-datepicker-rtl .ui-datepicker-buttonpane {\n\tclear: right;\n}\n\n.ui-datepicker-rtl .ui-datepicker-buttonpane button {\n\tfloat: left;\n}\n\n.ui-datepicker-rtl .ui-datepicker-buttonpane button.ui-datepicker-current,\n.ui-datepicker-rtl .ui-datepicker-group {\n\tfloat: right;\n}\n\n.ui-datepicker-rtl .ui-datepicker-group-last .ui-datepicker-header,\n.ui-datepicker-rtl .ui-datepicker-group-middle .ui-datepicker-header {\n\tborder-right-width: 0;\n\tborder-left-width: 1px;\n}\n\n/* Icons */\n\n.ui-datepicker .ui-icon {\n\tdisplay: block;\n\ttext-indent: -99999px;\n\toverflow: hidden;\n\tbackground-repeat: no-repeat;\n\tleft: .5em;\n\ttop: .3em;\n}\n\n.ui-dialog {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tpadding: .2em;\n\toutline: 0;\n}\n\n.ui-dialog .ui-dialog-titlebar {\n\tpadding: .4em 1em;\n\tposition: relative;\n}\n\n.ui-dialog .ui-dialog-title {\n\tfloat: left;\n\tmargin: .1em 0;\n\twhite-space: nowrap;\n\twidth: 90%;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n\n.ui-dialog .ui-dialog-titlebar-close {\n\tposition: absolute;\n\tright: .3em;\n\ttop: 50%;\n\twidth: 20px;\n\tmargin: -10px 0 0 0;\n\tpadding: 1px;\n\theight: 20px;\n}\n\n.ui-dialog .ui-dialog-content {\n\tposition: relative;\n\tborder: 0;\n\tpadding: .5em 1em;\n\tbackground: none;\n\toverflow: auto;\n}\n\n.ui-dialog .ui-dialog-buttonpane {\n\ttext-align: left;\n\tborder-width: 1px 0 0 0;\n\tbackground-image: none;\n\tmargin-top: .5em;\n\tpadding: .3em 1em .5em .4em;\n}\n\n.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset {\n\tfloat: right;\n}\n\n.ui-dialog .ui-dialog-buttonpane button {\n\tmargin: .5em .4em .5em 0;\n\tcursor: pointer;\n}\n\n.ui-dialog .ui-resizable-n {\n\theight: 2px;\n\ttop: 0;\n}\n\n.ui-dialog .ui-resizable-e {\n\twidth: 2px;\n\tright: 0;\n}\n\n.ui-dialog .ui-resizable-s {\n\theight: 2px;\n\tbottom: 0;\n}\n\n.ui-dialog .ui-resizable-w {\n\twidth: 2px;\n\tleft: 0;\n}\n\n.ui-dialog .ui-resizable-se,\n.ui-dialog .ui-resizable-sw,\n.ui-dialog .ui-resizable-ne,\n.ui-dialog .ui-resizable-nw {\n\twidth: 7px;\n\theight: 7px;\n}\n\n.ui-dialog .ui-resizable-se {\n\tright: 0;\n\tbottom: 0;\n}\n\n.ui-dialog .ui-resizable-sw {\n\tleft: 0;\n\tbottom: 0;\n}\n\n.ui-dialog .ui-resizable-ne {\n\tright: 0;\n\ttop: 0;\n}\n\n.ui-dialog .ui-resizable-nw {\n\tleft: 0;\n\ttop: 0;\n}\n\n.ui-draggable .ui-dialog-titlebar {\n\tcursor: move;\n}\n\n.ui-progressbar {\n\theight: 2em;\n\ttext-align: left;\n\toverflow: hidden;\n}\n\n.ui-progressbar .ui-progressbar-value {\n\tmargin: -1px;\n\theight: 100%;\n}\n\n.ui-progressbar .ui-progressbar-overlay {\n\tbackground: url(\"data:image/gif;base64,R0lGODlhKAAoAIABAAAAAP///yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJAQABACwAAAAAKAAoAAACkYwNqXrdC52DS06a7MFZI+4FHBCKoDeWKXqymPqGqxvJrXZbMx7Ttc+w9XgU2FB3lOyQRWET2IFGiU9m1frDVpxZZc6bfHwv4c1YXP6k1Vdy292Fb6UkuvFtXpvWSzA+HycXJHUXiGYIiMg2R6W459gnWGfHNdjIqDWVqemH2ekpObkpOlppWUqZiqr6edqqWQAAIfkECQEAAQAsAAAAACgAKAAAApSMgZnGfaqcg1E2uuzDmmHUBR8Qil95hiPKqWn3aqtLsS18y7G1SzNeowWBENtQd+T1JktP05nzPTdJZlR6vUxNWWjV+vUWhWNkWFwxl9VpZRedYcflIOLafaa28XdsH/ynlcc1uPVDZxQIR0K25+cICCmoqCe5mGhZOfeYSUh5yJcJyrkZWWpaR8doJ2o4NYq62lAAACH5BAkBAAEALAAAAAAoACgAAAKVDI4Yy22ZnINRNqosw0Bv7i1gyHUkFj7oSaWlu3ovC8GxNso5fluz3qLVhBVeT/Lz7ZTHyxL5dDalQWPVOsQWtRnuwXaFTj9jVVh8pma9JjZ4zYSj5ZOyma7uuolffh+IR5aW97cHuBUXKGKXlKjn+DiHWMcYJah4N0lYCMlJOXipGRr5qdgoSTrqWSq6WFl2ypoaUAAAIfkECQEAAQAsAAAAACgAKAAAApaEb6HLgd/iO7FNWtcFWe+ufODGjRfoiJ2akShbueb0wtI50zm02pbvwfWEMWBQ1zKGlLIhskiEPm9R6vRXxV4ZzWT2yHOGpWMyorblKlNp8HmHEb/lCXjcW7bmtXP8Xt229OVWR1fod2eWqNfHuMjXCPkIGNileOiImVmCOEmoSfn3yXlJWmoHGhqp6ilYuWYpmTqKUgAAIfkECQEAAQAsAAAAACgAKAAAApiEH6kb58biQ3FNWtMFWW3eNVcojuFGfqnZqSebuS06w5V80/X02pKe8zFwP6EFWOT1lDFk8rGERh1TTNOocQ61Hm4Xm2VexUHpzjymViHrFbiELsefVrn6XKfnt2Q9G/+Xdie499XHd2g4h7ioOGhXGJboGAnXSBnoBwKYyfioubZJ2Hn0RuRZaflZOil56Zp6iioKSXpUAAAh+QQJAQABACwAAAAAKAAoAAACkoQRqRvnxuI7kU1a1UU5bd5tnSeOZXhmn5lWK3qNTWvRdQxP8qvaC+/yaYQzXO7BMvaUEmJRd3TsiMAgswmNYrSgZdYrTX6tSHGZO73ezuAw2uxuQ+BbeZfMxsexY35+/Qe4J1inV0g4x3WHuMhIl2jXOKT2Q+VU5fgoSUI52VfZyfkJGkha6jmY+aaYdirq+lQAACH5BAkBAAEALAAAAAAoACgAAAKWBIKpYe0L3YNKToqswUlvznigd4wiR4KhZrKt9Upqip61i9E3vMvxRdHlbEFiEXfk9YARYxOZZD6VQ2pUunBmtRXo1Lf8hMVVcNl8JafV38aM2/Fu5V16Bn63r6xt97j09+MXSFi4BniGFae3hzbH9+hYBzkpuUh5aZmHuanZOZgIuvbGiNeomCnaxxap2upaCZsq+1kAACH5BAkBAAEALAAAAAAoACgAAAKXjI8By5zf4kOxTVrXNVlv1X0d8IGZGKLnNpYtm8Lr9cqVeuOSvfOW79D9aDHizNhDJidFZhNydEahOaDH6nomtJjp1tutKoNWkvA6JqfRVLHU/QUfau9l2x7G54d1fl995xcIGAdXqMfBNadoYrhH+Mg2KBlpVpbluCiXmMnZ2Sh4GBqJ+ckIOqqJ6LmKSllZmsoq6wpQAAAh+QQJAQABACwAAAAAKAAoAAAClYx/oLvoxuJDkU1a1YUZbJ59nSd2ZXhWqbRa2/gF8Gu2DY3iqs7yrq+xBYEkYvFSM8aSSObE+ZgRl1BHFZNr7pRCavZ5BW2142hY3AN/zWtsmf12p9XxxFl2lpLn1rseztfXZjdIWIf2s5dItwjYKBgo9yg5pHgzJXTEeGlZuenpyPmpGQoKOWkYmSpaSnqKileI2FAAACH5BAkBAAEALAAAAAAoACgAAAKVjB+gu+jG4kORTVrVhRlsnn2dJ3ZleFaptFrb+CXmO9OozeL5VfP99HvAWhpiUdcwkpBH3825AwYdU8xTqlLGhtCosArKMpvfa1mMRae9VvWZfeB2XfPkeLmm18lUcBj+p5dnN8jXZ3YIGEhYuOUn45aoCDkp16hl5IjYJvjWKcnoGQpqyPlpOhr3aElaqrq56Bq7VAAAOw==\");\n\theight: 100%;\n\tfilter: alpha(opacity=25); /* support: IE8 */\n\topacity: 0.25;\n}\n\n.ui-progressbar-indeterminate .ui-progressbar-value {\n\tbackground-image: none;\n}\n\n.ui-selectmenu-menu {\n\tpadding: 0;\n\tmargin: 0;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tdisplay: none;\n}\n\n.ui-selectmenu-menu .ui-menu {\n\toverflow: auto;\n\toverflow-x: hidden;\n\tpadding-bottom: 1px;\n}\n\n.ui-selectmenu-menu .ui-menu .ui-selectmenu-optgroup {\n\tfont-size: 1em;\n\tfont-weight: bold;\n\tline-height: 1.5;\n\tpadding: 2px 0.4em;\n\tmargin: 0.5em 0 0 0;\n\theight: auto;\n\tborder: 0;\n}\n\n.ui-selectmenu-open {\n\tdisplay: block;\n}\n\n.ui-selectmenu-text {\n\tdisplay: block;\n\tmargin-right: 20px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n\n.ui-selectmenu-button.ui-button {\n\ttext-align: left;\n\twhite-space: nowrap;\n\twidth: 14em;\n}\n\n.ui-selectmenu-icon.ui-icon {\n\tfloat: right;\n\tmargin-top: 0;\n}\n\n.ui-slider {\n\tposition: relative;\n\ttext-align: left;\n}\n\n.ui-slider .ui-slider-handle {\n\tposition: absolute;\n\tz-index: 2;\n\twidth: 1.2em;\n\theight: 1.2em;\n\tcursor: default;\n\ttouch-action: none;\n}\n\n.ui-slider .ui-slider-range {\n\tposition: absolute;\n\tz-index: 1;\n\tfont-size: .7em;\n\tdisplay: block;\n\tborder: 0;\n\tbackground-position: 0 0;\n}\n\n/* support: IE8 - See #6727 */\n\n.ui-slider.ui-state-disabled .ui-slider-handle,\n.ui-slider.ui-state-disabled .ui-slider-range {\n\tfilter: inherit;\n}\n\n.ui-slider-horizontal {\n\theight: .8em;\n}\n\n.ui-slider-horizontal .ui-slider-handle {\n\ttop: -.3em;\n\tmargin-left: -.6em;\n}\n\n.ui-slider-horizontal .ui-slider-range {\n\ttop: 0;\n\theight: 100%;\n}\n\n.ui-slider-horizontal .ui-slider-range-min {\n\tleft: 0;\n}\n\n.ui-slider-horizontal .ui-slider-range-max {\n\tright: 0;\n}\n\n.ui-slider-vertical {\n\twidth: .8em;\n\theight: 100px;\n}\n\n.ui-slider-vertical .ui-slider-handle {\n\tleft: -.3em;\n\tmargin-left: 0;\n\tmargin-bottom: -.6em;\n}\n\n.ui-slider-vertical .ui-slider-range {\n\tleft: 0;\n\twidth: 100%;\n}\n\n.ui-slider-vertical .ui-slider-range-min {\n\tbottom: 0;\n}\n\n.ui-slider-vertical .ui-slider-range-max {\n\ttop: 0;\n}\n\n.ui-spinner {\n\tposition: relative;\n\tdisplay: inline-block;\n\toverflow: hidden;\n\tpadding: 0;\n\tvertical-align: middle;\n}\n\n.ui-spinner-input {\n\tborder: none;\n\tbackground: none;\n\tcolor: inherit;\n\tpadding: .222em 0;\n\tmargin: .2em 0;\n\tvertical-align: middle;\n\tmargin-left: .4em;\n\tmargin-right: 2em;\n}\n\n.ui-spinner-button {\n\twidth: 1.6em;\n\theight: 50%;\n\tfont-size: .5em;\n\tpadding: 0;\n\tmargin: 0;\n\ttext-align: center;\n\tposition: absolute;\n\tcursor: default;\n\tdisplay: block;\n\toverflow: hidden;\n\tright: 0;\n}\n\n/* more specificity required here to override default borders */\n\n.ui-spinner a.ui-spinner-button {\n\tborder-top-style: none;\n\tborder-bottom-style: none;\n\tborder-right-style: none;\n}\n\n.ui-spinner-up {\n\ttop: 0;\n}\n\n.ui-spinner-down {\n\tbottom: 0;\n}\n\n.ui-tabs {\n\tposition: relative;/* position: relative prevents IE scroll bug (element with position: relative inside container with overflow: auto appear as \"fixed\") */\n\tpadding: .2em;\n}\n\n.ui-tabs .ui-tabs-nav {\n\tmargin: 0;\n\tpadding: .2em .2em 0;\n}\n\n.ui-tabs .ui-tabs-nav li {\n\tlist-style: none;\n\tfloat: left;\n\tposition: relative;\n\ttop: 0;\n\tmargin: 1px .2em 0 0;\n\tborder-bottom-width: 0;\n\tpadding: 0;\n\twhite-space: nowrap;\n}\n\n.ui-tabs .ui-tabs-nav .ui-tabs-anchor {\n\tfloat: left;\n\tpadding: .5em 1em;\n\ttext-decoration: none;\n}\n\n.ui-tabs .ui-tabs-nav li.ui-tabs-active {\n\tmargin-bottom: -1px;\n\tpadding-bottom: 1px;\n}\n\n.ui-tabs .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor,\n.ui-tabs .ui-tabs-nav li.ui-state-disabled .ui-tabs-anchor,\n.ui-tabs .ui-tabs-nav li.ui-tabs-loading .ui-tabs-anchor {\n\tcursor: text;\n}\n\n.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor {\n\tcursor: pointer;\n}\n\n.ui-tabs .ui-tabs-panel {\n\tdisplay: block;\n\tborder-width: 0;\n\tpadding: 1em 1.4em;\n\tbackground: none;\n}\n\n.ui-tooltip {\n\tpadding: 8px;\n\tposition: absolute;\n\tz-index: 9999;\n\tmax-width: 300px;\n}\n\nbody .ui-tooltip {\n\tborder-width: 2px;\n}\n\n/* Component containers\n----------------------------------*/\n\n.ui-widget {\n\tfont-family: Arial,Helvetica,sans-serif;\n\tfont-size: 1em;\n}\n\n.ui-widget .ui-widget {\n\tfont-size: 1em;\n}\n\n.ui-widget input,\n.ui-widget select,\n.ui-widget textarea,\n.ui-widget button {\n\tfont-family: Arial,Helvetica,sans-serif;\n\tfont-size: 1em;\n}\n\n.ui-widget.ui-widget-content {\n\tborder: 1px solid #c5c5c5;\n}\n\n.ui-widget-content {\n\tborder: 1px solid #dddddd;\n\tbackground: #ffffff;\n\tcolor: #333333;\n}\n\n.ui-widget-content a {\n\tcolor: #333333;\n}\n\n.ui-widget-header {\n\tborder: 1px solid #dddddd;\n\tbackground: #e9e9e9;\n\tcolor: #333333;\n\tfont-weight: bold;\n}\n\n.ui-widget-header a {\n\tcolor: #333333;\n}\n\n/* Interaction states\n----------------------------------*/\n\n.ui-state-default,\n.ui-widget-content .ui-state-default,\n.ui-widget-header .ui-state-default,\n.ui-button,\n\n/* We use html here because we need a greater specificity to make sure disabled\nworks properly when clicked or hovered */\nhtml .ui-button.ui-state-disabled:hover,\nhtml .ui-button.ui-state-disabled:active {\n\tborder: 1px solid #c5c5c5;\n\tbackground: #f6f6f6;\n\tfont-weight: normal;\n\tcolor: #454545;\n}\n\n.ui-state-default a,\n.ui-state-default a:link,\n.ui-state-default a:visited,\na.ui-button,\na:link.ui-button,\na:visited.ui-button,\n.ui-button {\n\tcolor: #454545;\n\ttext-decoration: none;\n}\n\n.ui-state-hover,\n.ui-widget-content .ui-state-hover,\n.ui-widget-header .ui-state-hover,\n.ui-state-focus,\n.ui-widget-content .ui-state-focus,\n.ui-widget-header .ui-state-focus,\n.ui-button:hover,\n.ui-button:focus {\n\tborder: 1px solid #cccccc;\n\tbackground: #ededed;\n\tfont-weight: normal;\n\tcolor: #2b2b2b;\n}\n\n.ui-state-hover a,\n.ui-state-hover a:hover,\n.ui-state-hover a:link,\n.ui-state-hover a:visited,\n.ui-state-focus a,\n.ui-state-focus a:hover,\n.ui-state-focus a:link,\n.ui-state-focus a:visited,\na.ui-button:hover,\na.ui-button:focus {\n\tcolor: #2b2b2b;\n\ttext-decoration: none;\n}\n\n.ui-visual-focus {\n\tbox-shadow: 0 0 3px 1px rgb(94, 158, 214);\n}\n\n.ui-state-active,\n.ui-widget-content .ui-state-active,\n.ui-widget-header .ui-state-active,\na.ui-button:active,\n.ui-button:active,\n.ui-button.ui-state-active:hover {\n\tborder: 1px solid #003eff;\n\tbackground: #007fff;\n\tfont-weight: normal;\n\tcolor: #ffffff;\n}\n\n.ui-icon-background,\n.ui-state-active .ui-icon-background {\n\tborder: #003eff;\n\tbackground-color: #ffffff;\n}\n\n.ui-state-active a,\n.ui-state-active a:link,\n.ui-state-active a:visited {\n\tcolor: #ffffff;\n\ttext-decoration: none;\n}\n\n/* Interaction Cues\n----------------------------------*/\n\n.ui-state-highlight,\n.ui-widget-content .ui-state-highlight,\n.ui-widget-header .ui-state-highlight {\n\tborder: 1px solid #dad55e;\n\tbackground: #fffa90;\n\tcolor: #777620;\n}\n\n.ui-state-checked {\n\tborder: 1px solid #dad55e;\n\tbackground: #fffa90;\n}\n\n.ui-state-highlight a,\n.ui-widget-content .ui-state-highlight a,\n.ui-widget-header .ui-state-highlight a {\n\tcolor: #777620;\n}\n\n.ui-state-error,\n.ui-widget-content .ui-state-error,\n.ui-widget-header .ui-state-error {\n\tborder: 1px solid #f1a899;\n\tbackground: #fddfdf;\n\tcolor: #5f3f3f;\n}\n\n.ui-state-error a,\n.ui-widget-content .ui-state-error a,\n.ui-widget-header .ui-state-error a {\n\tcolor: #5f3f3f;\n}\n\n.ui-state-error-text,\n.ui-widget-content .ui-state-error-text,\n.ui-widget-header .ui-state-error-text {\n\tcolor: #5f3f3f;\n}\n\n.ui-priority-primary,\n.ui-widget-content .ui-priority-primary,\n.ui-widget-header .ui-priority-primary {\n\tfont-weight: bold;\n}\n\n.ui-priority-secondary,\n.ui-widget-content .ui-priority-secondary,\n.ui-widget-header .ui-priority-secondary {\n\topacity: .7;\n\tfilter:Alpha(Opacity=70); /* support: IE8 */\n\tfont-weight: normal;\n}\n\n.ui-state-disabled,\n.ui-widget-content .ui-state-disabled,\n.ui-widget-header .ui-state-disabled {\n\topacity: .35;\n\tfilter:Alpha(Opacity=35); /* support: IE8 */\n\tbackground-image: none;\n}\n\n.ui-state-disabled .ui-icon {\n\tfilter:Alpha(Opacity=35); /* support: IE8 - See #6059 */\n}\n\n/* Icons\n----------------------------------*/\n\n/* states and images */\n\n.ui-icon {\n\twidth: 16px;\n\theight: 16px;\n}\n\n.ui-icon,\n.ui-widget-content .ui-icon {\n\tbackground-image: url('ui-icons_444444_256x240.0e0a9e65144a9bf9.png');\n}\n\n.ui-widget-header .ui-icon {\n\tbackground-image: url('ui-icons_444444_256x240.0e0a9e65144a9bf9.png');\n}\n\n.ui-state-hover .ui-icon,\n.ui-state-focus .ui-icon,\n.ui-button:hover .ui-icon,\n.ui-button:focus .ui-icon {\n\tbackground-image: url('ui-icons_555555_256x240.8adbd261678281ce.png');\n}\n\n.ui-state-active .ui-icon,\n.ui-button:active .ui-icon {\n\tbackground-image: url('ui-icons_ffffff_256x240.7b3b65cee7d59ccd.png');\n}\n\n.ui-state-highlight .ui-icon,\n.ui-button .ui-state-highlight.ui-icon {\n\tbackground-image: url('ui-icons_777620_256x240.4298d92e10bb13dc.png');\n}\n\n.ui-state-error .ui-icon,\n.ui-state-error-text .ui-icon {\n\tbackground-image: url('ui-icons_cc0000_256x240.3cc6f93e0fbdd6f0.png');\n}\n\n.ui-button .ui-icon {\n\tbackground-image: url('ui-icons_777777_256x240.0e3e40c4a518e818.png');\n}\n\n/* positioning */\n\n.ui-icon-blank { background-position: 16px 16px; }\n\n.ui-icon-caret-1-n { background-position: 0 0; }\n\n.ui-icon-caret-1-ne { background-position: -16px 0; }\n\n.ui-icon-caret-1-e { background-position: -32px 0; }\n\n.ui-icon-caret-1-se { background-position: -48px 0; }\n\n.ui-icon-caret-1-s { background-position: -65px 0; }\n\n.ui-icon-caret-1-sw { background-position: -80px 0; }\n\n.ui-icon-caret-1-w { background-position: -96px 0; }\n\n.ui-icon-caret-1-nw { background-position: -112px 0; }\n\n.ui-icon-caret-2-n-s { background-position: -128px 0; }\n\n.ui-icon-caret-2-e-w { background-position: -144px 0; }\n\n.ui-icon-triangle-1-n { background-position: 0 -16px; }\n\n.ui-icon-triangle-1-ne { background-position: -16px -16px; }\n\n.ui-icon-triangle-1-e { background-position: -32px -16px; }\n\n.ui-icon-triangle-1-se { background-position: -48px -16px; }\n\n.ui-icon-triangle-1-s { background-position: -65px -16px; }\n\n.ui-icon-triangle-1-sw { background-position: -80px -16px; }\n\n.ui-icon-triangle-1-w { background-position: -96px -16px; }\n\n.ui-icon-triangle-1-nw { background-position: -112px -16px; }\n\n.ui-icon-triangle-2-n-s { background-position: -128px -16px; }\n\n.ui-icon-triangle-2-e-w { background-position: -144px -16px; }\n\n.ui-icon-arrow-1-n { background-position: 0 -32px; }\n\n.ui-icon-arrow-1-ne { background-position: -16px -32px; }\n\n.ui-icon-arrow-1-e { background-position: -32px -32px; }\n\n.ui-icon-arrow-1-se { background-position: -48px -32px; }\n\n.ui-icon-arrow-1-s { background-position: -65px -32px; }\n\n.ui-icon-arrow-1-sw { background-position: -80px -32px; }\n\n.ui-icon-arrow-1-w { background-position: -96px -32px; }\n\n.ui-icon-arrow-1-nw { background-position: -112px -32px; }\n\n.ui-icon-arrow-2-n-s { background-position: -128px -32px; }\n\n.ui-icon-arrow-2-ne-sw { background-position: -144px -32px; }\n\n.ui-icon-arrow-2-e-w { background-position: -160px -32px; }\n\n.ui-icon-arrow-2-se-nw { background-position: -176px -32px; }\n\n.ui-icon-arrowstop-1-n { background-position: -192px -32px; }\n\n.ui-icon-arrowstop-1-e { background-position: -208px -32px; }\n\n.ui-icon-arrowstop-1-s { background-position: -224px -32px; }\n\n.ui-icon-arrowstop-1-w { background-position: -240px -32px; }\n\n.ui-icon-arrowthick-1-n { background-position: 1px -48px; }\n\n.ui-icon-arrowthick-1-ne { background-position: -16px -48px; }\n\n.ui-icon-arrowthick-1-e { background-position: -32px -48px; }\n\n.ui-icon-arrowthick-1-se { background-position: -48px -48px; }\n\n.ui-icon-arrowthick-1-s { background-position: -64px -48px; }\n\n.ui-icon-arrowthick-1-sw { background-position: -80px -48px; }\n\n.ui-icon-arrowthick-1-w { background-position: -96px -48px; }\n\n.ui-icon-arrowthick-1-nw { background-position: -112px -48px; }\n\n.ui-icon-arrowthick-2-n-s { background-position: -128px -48px; }\n\n.ui-icon-arrowthick-2-ne-sw { background-position: -144px -48px; }\n\n.ui-icon-arrowthick-2-e-w { background-position: -160px -48px; }\n\n.ui-icon-arrowthick-2-se-nw { background-position: -176px -48px; }\n\n.ui-icon-arrowthickstop-1-n { background-position: -192px -48px; }\n\n.ui-icon-arrowthickstop-1-e { background-position: -208px -48px; }\n\n.ui-icon-arrowthickstop-1-s { background-position: -224px -48px; }\n\n.ui-icon-arrowthickstop-1-w { background-position: -240px -48px; }\n\n.ui-icon-arrowreturnthick-1-w { background-position: 0 -64px; }\n\n.ui-icon-arrowreturnthick-1-n { background-position: -16px -64px; }\n\n.ui-icon-arrowreturnthick-1-e { background-position: -32px -64px; }\n\n.ui-icon-arrowreturnthick-1-s { background-position: -48px -64px; }\n\n.ui-icon-arrowreturn-1-w { background-position: -64px -64px; }\n\n.ui-icon-arrowreturn-1-n { background-position: -80px -64px; }\n\n.ui-icon-arrowreturn-1-e { background-position: -96px -64px; }\n\n.ui-icon-arrowreturn-1-s { background-position: -112px -64px; }\n\n.ui-icon-arrowrefresh-1-w { background-position: -128px -64px; }\n\n.ui-icon-arrowrefresh-1-n { background-position: -144px -64px; }\n\n.ui-icon-arrowrefresh-1-e { background-position: -160px -64px; }\n\n.ui-icon-arrowrefresh-1-s { background-position: -176px -64px; }\n\n.ui-icon-arrow-4 { background-position: 0 -80px; }\n\n.ui-icon-arrow-4-diag { background-position: -16px -80px; }\n\n.ui-icon-extlink { background-position: -32px -80px; }\n\n.ui-icon-newwin { background-position: -48px -80px; }\n\n.ui-icon-refresh { background-position: -64px -80px; }\n\n.ui-icon-shuffle { background-position: -80px -80px; }\n\n.ui-icon-transfer-e-w { background-position: -96px -80px; }\n\n.ui-icon-transferthick-e-w { background-position: -112px -80px; }\n\n.ui-icon-folder-collapsed { background-position: 0 -96px; }\n\n.ui-icon-folder-open { background-position: -16px -96px; }\n\n.ui-icon-document { background-position: -32px -96px; }\n\n.ui-icon-document-b { background-position: -48px -96px; }\n\n.ui-icon-note { background-position: -64px -96px; }\n\n.ui-icon-mail-closed { background-position: -80px -96px; }\n\n.ui-icon-mail-open { background-position: -96px -96px; }\n\n.ui-icon-suitcase { background-position: -112px -96px; }\n\n.ui-icon-comment { background-position: -128px -96px; }\n\n.ui-icon-person { background-position: -144px -96px; }\n\n.ui-icon-print { background-position: -160px -96px; }\n\n.ui-icon-trash { background-position: -176px -96px; }\n\n.ui-icon-locked { background-position: -192px -96px; }\n\n.ui-icon-unlocked { background-position: -208px -96px; }\n\n.ui-icon-bookmark { background-position: -224px -96px; }\n\n.ui-icon-tag { background-position: -240px -96px; }\n\n.ui-icon-home { background-position: 0 -112px; }\n\n.ui-icon-flag { background-position: -16px -112px; }\n\n.ui-icon-calendar { background-position: -32px -112px; }\n\n.ui-icon-cart { background-position: -48px -112px; }\n\n.ui-icon-pencil { background-position: -64px -112px; }\n\n.ui-icon-clock { background-position: -80px -112px; }\n\n.ui-icon-disk { background-position: -96px -112px; }\n\n.ui-icon-calculator { background-position: -112px -112px; }\n\n.ui-icon-zoomin { background-position: -128px -112px; }\n\n.ui-icon-zoomout { background-position: -144px -112px; }\n\n.ui-icon-search { background-position: -160px -112px; }\n\n.ui-icon-wrench { background-position: -176px -112px; }\n\n.ui-icon-gear { background-position: -192px -112px; }\n\n.ui-icon-heart { background-position: -208px -112px; }\n\n.ui-icon-star { background-position: -224px -112px; }\n\n.ui-icon-link { background-position: -240px -112px; }\n\n.ui-icon-cancel { background-position: 0 -128px; }\n\n.ui-icon-plus { background-position: -16px -128px; }\n\n.ui-icon-plusthick { background-position: -32px -128px; }\n\n.ui-icon-minus { background-position: -48px -128px; }\n\n.ui-icon-minusthick { background-position: -64px -128px; }\n\n.ui-icon-close { background-position: -80px -128px; }\n\n.ui-icon-closethick { background-position: -96px -128px; }\n\n.ui-icon-key { background-position: -112px -128px; }\n\n.ui-icon-lightbulb { background-position: -128px -128px; }\n\n.ui-icon-scissors { background-position: -144px -128px; }\n\n.ui-icon-clipboard { background-position: -160px -128px; }\n\n.ui-icon-copy { background-position: -176px -128px; }\n\n.ui-icon-contact { background-position: -192px -128px; }\n\n.ui-icon-image { background-position: -208px -128px; }\n\n.ui-icon-video { background-position: -224px -128px; }\n\n.ui-icon-script { background-position: -240px -128px; }\n\n.ui-icon-alert { background-position: 0 -144px; }\n\n.ui-icon-info { background-position: -16px -144px; }\n\n.ui-icon-notice { background-position: -32px -144px; }\n\n.ui-icon-help { background-position: -48px -144px; }\n\n.ui-icon-check { background-position: -64px -144px; }\n\n.ui-icon-bullet { background-position: -80px -144px; }\n\n.ui-icon-radio-on { background-position: -96px -144px; }\n\n.ui-icon-radio-off { background-position: -112px -144px; }\n\n.ui-icon-pin-w { background-position: -128px -144px; }\n\n.ui-icon-pin-s { background-position: -144px -144px; }\n\n.ui-icon-play { background-position: 0 -160px; }\n\n.ui-icon-pause { background-position: -16px -160px; }\n\n.ui-icon-seek-next { background-position: -32px -160px; }\n\n.ui-icon-seek-prev { background-position: -48px -160px; }\n\n.ui-icon-seek-end { background-position: -64px -160px; }\n\n.ui-icon-seek-start { background-position: -80px -160px; }\n\n/* ui-icon-seek-first is deprecated, use ui-icon-seek-start instead */\n\n.ui-icon-seek-first { background-position: -80px -160px; }\n\n.ui-icon-stop { background-position: -96px -160px; }\n\n.ui-icon-eject { background-position: -112px -160px; }\n\n.ui-icon-volume-off { background-position: -128px -160px; }\n\n.ui-icon-volume-on { background-position: -144px -160px; }\n\n.ui-icon-power { background-position: 0 -176px; }\n\n.ui-icon-signal-diag { background-position: -16px -176px; }\n\n.ui-icon-signal { background-position: -32px -176px; }\n\n.ui-icon-battery-0 { background-position: -48px -176px; }\n\n.ui-icon-battery-1 { background-position: -64px -176px; }\n\n.ui-icon-battery-2 { background-position: -80px -176px; }\n\n.ui-icon-battery-3 { background-position: -96px -176px; }\n\n.ui-icon-circle-plus { background-position: 0 -192px; }\n\n.ui-icon-circle-minus { background-position: -16px -192px; }\n\n.ui-icon-circle-close { background-position: -32px -192px; }\n\n.ui-icon-circle-triangle-e { background-position: -48px -192px; }\n\n.ui-icon-circle-triangle-s { background-position: -64px -192px; }\n\n.ui-icon-circle-triangle-w { background-position: -80px -192px; }\n\n.ui-icon-circle-triangle-n { background-position: -96px -192px; }\n\n.ui-icon-circle-arrow-e { background-position: -112px -192px; }\n\n.ui-icon-circle-arrow-s { background-position: -128px -192px; }\n\n.ui-icon-circle-arrow-w { background-position: -144px -192px; }\n\n.ui-icon-circle-arrow-n { background-position: -160px -192px; }\n\n.ui-icon-circle-zoomin { background-position: -176px -192px; }\n\n.ui-icon-circle-zoomout { background-position: -192px -192px; }\n\n.ui-icon-circle-check { background-position: -208px -192px; }\n\n.ui-icon-circlesmall-plus { background-position: 0 -208px; }\n\n.ui-icon-circlesmall-minus { background-position: -16px -208px; }\n\n.ui-icon-circlesmall-close { background-position: -32px -208px; }\n\n.ui-icon-squaresmall-plus { background-position: -48px -208px; }\n\n.ui-icon-squaresmall-minus { background-position: -64px -208px; }\n\n.ui-icon-squaresmall-close { background-position: -80px -208px; }\n\n.ui-icon-grip-dotted-vertical { background-position: 0 -224px; }\n\n.ui-icon-grip-dotted-horizontal { background-position: -16px -224px; }\n\n.ui-icon-grip-solid-vertical { background-position: -32px -224px; }\n\n.ui-icon-grip-solid-horizontal { background-position: -48px -224px; }\n\n.ui-icon-gripsmall-diagonal-se { background-position: -64px -224px; }\n\n.ui-icon-grip-diagonal-se { background-position: -80px -224px; }\n\n/* Misc visuals\n----------------------------------*/\n\n/* Corner radius */\n\n.ui-corner-all,\n.ui-corner-top,\n.ui-corner-left,\n.ui-corner-tl {\n\tborder-top-left-radius: 3px;\n}\n\n.ui-corner-all,\n.ui-corner-top,\n.ui-corner-right,\n.ui-corner-tr {\n\tborder-top-right-radius: 3px;\n}\n\n.ui-corner-all,\n.ui-corner-bottom,\n.ui-corner-left,\n.ui-corner-bl {\n\tborder-bottom-left-radius: 3px;\n}\n\n.ui-corner-all,\n.ui-corner-bottom,\n.ui-corner-right,\n.ui-corner-br {\n\tborder-bottom-right-radius: 3px;\n}\n\n/* Overlays */\n\n.ui-widget-overlay {\n\tbackground: #aaaaaa;\n\topacity: .3;\n\tfilter: Alpha(Opacity=30); /* support: IE8 */\n}\n\n.ui-widget-shadow {\n\tbox-shadow: 0px 0px 5px #666666;\n}\n"},879:K=>{"use strict";K.exports='/*!\n * jQuery UI CSS Framework 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/theming/\n */\n.ui-draggable-handle {\n\ttouch-action: none;\n}\n/* Layout helpers\n----------------------------------*/\n.ui-helper-hidden {\n\tdisplay: none;\n}\n.ui-helper-hidden-accessible {\n\tborder: 0;\n\tclip: rect(0 0 0 0);\n\theight: 1px;\n\tmargin: -1px;\n\toverflow: hidden;\n\tpadding: 0;\n\tposition: absolute;\n\twidth: 1px;\n}\n.ui-helper-reset {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\toutline: 0;\n\tline-height: 1.3;\n\ttext-decoration: none;\n\tfont-size: 100%;\n\tlist-style: none;\n}\n.ui-helper-clearfix:before,\n.ui-helper-clearfix:after {\n\tcontent: "";\n\tdisplay: table;\n\tborder-collapse: collapse;\n}\n.ui-helper-clearfix:after {\n\tclear: both;\n}\n.ui-helper-zfix {\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n\tposition: absolute;\n\topacity: 0;\n\tfilter:Alpha(Opacity=0); /* support: IE8 */\n}\n.ui-front {\n\tz-index: 100;\n}\n/* Interaction Cues\n----------------------------------*/\n.ui-state-disabled {\n\tcursor: default !important;\n\tpointer-events: none;\n}\n/* Icons\n----------------------------------*/\n.ui-icon {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tmargin-top: -.25em;\n\tposition: relative;\n\ttext-indent: -99999px;\n\toverflow: hidden;\n\tbackground-repeat: no-repeat;\n}\n.ui-widget-icon-block {\n\tleft: 50%;\n\tmargin-left: -8px;\n\tdisplay: block;\n}\n/* Misc visuals\n----------------------------------*/\n/* Overlays */\n.ui-widget-overlay {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n.ui-resizable {\n\tposition: relative;\n}\n.ui-resizable-handle {\n\tposition: absolute;\n\tfont-size: 0.1px;\n\tdisplay: block;\n\ttouch-action: none;\n}\n.ui-resizable-disabled .ui-resizable-handle,\n.ui-resizable-autohide .ui-resizable-handle {\n\tdisplay: none;\n}\n.ui-resizable-n {\n\tcursor: n-resize;\n\theight: 7px;\n\twidth: 100%;\n\ttop: -5px;\n\tleft: 0;\n}\n.ui-resizable-s {\n\tcursor: s-resize;\n\theight: 7px;\n\twidth: 100%;\n\tbottom: -5px;\n\tleft: 0;\n}\n.ui-resizable-e {\n\tcursor: e-resize;\n\twidth: 7px;\n\tright: -5px;\n\ttop: 0;\n\theight: 100%;\n}\n.ui-resizable-w {\n\tcursor: w-resize;\n\twidth: 7px;\n\tleft: -5px;\n\ttop: 0;\n\theight: 100%;\n}\n.ui-resizable-se {\n\tcursor: se-resize;\n\twidth: 12px;\n\theight: 12px;\n\tright: 1px;\n\tbottom: 1px;\n}\n.ui-resizable-sw {\n\tcursor: sw-resize;\n\twidth: 9px;\n\theight: 9px;\n\tleft: -5px;\n\tbottom: -5px;\n}\n.ui-resizable-nw {\n\tcursor: nw-resize;\n\twidth: 9px;\n\theight: 9px;\n\tleft: -5px;\n\ttop: -5px;\n}\n.ui-resizable-ne {\n\tcursor: ne-resize;\n\twidth: 9px;\n\theight: 9px;\n\tright: -5px;\n\ttop: -5px;\n}\n.ui-selectable {\n\ttouch-action: none;\n}\n.ui-selectable-helper {\n\tposition: absolute;\n\tz-index: 100;\n\tborder: 1px dotted black;\n}\n.ui-sortable-handle {\n\ttouch-action: none;\n}\n.ui-accordion .ui-accordion-header {\n\tdisplay: block;\n\tcursor: pointer;\n\tposition: relative;\n\tmargin: 2px 0 0 0;\n\tpadding: .5em .5em .5em .7em;\n\tfont-size: 100%;\n}\n.ui-accordion .ui-accordion-content {\n\tpadding: 1em 2.2em;\n\tborder-top: 0;\n\toverflow: auto;\n}\n.ui-autocomplete {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tcursor: default;\n}\n.ui-menu {\n\tlist-style: none;\n\tpadding: 0;\n\tmargin: 0;\n\tdisplay: block;\n\toutline: 0;\n}\n.ui-menu .ui-menu {\n\tposition: absolute;\n}\n.ui-menu .ui-menu-item {\n\tmargin: 0;\n\tcursor: pointer;\n\t/* support: IE10, see #8844 */\n\tlist-style-image: url("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");\n}\n.ui-menu .ui-menu-item-wrapper {\n\tposition: relative;\n\tpadding: 3px 1em 3px .4em;\n}\n.ui-menu .ui-menu-divider {\n\tmargin: 5px 0;\n\theight: 0;\n\tfont-size: 0;\n\tline-height: 0;\n\tborder-width: 1px 0 0 0;\n}\n.ui-menu .ui-state-focus,\n.ui-menu .ui-state-active {\n\tmargin: -1px;\n}\n/* icon support */\n.ui-menu-icons {\n\tposition: relative;\n}\n.ui-menu-icons .ui-menu-item-wrapper {\n\tpadding-left: 2em;\n}\n/* left-aligned */\n.ui-menu .ui-icon {\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: .2em;\n\tmargin: auto 0;\n}\n/* right-aligned */\n.ui-menu .ui-menu-icon {\n\tleft: auto;\n\tright: 0;\n}\n.ui-button {\n\tpadding: .4em 1em;\n\tdisplay: inline-block;\n\tposition: relative;\n\tline-height: normal;\n\tmargin-right: .1em;\n\tcursor: pointer;\n\tvertical-align: middle;\n\ttext-align: center;\n\t-webkit-user-select: none;\n\tuser-select: none;\n\n\t/* Support: IE <= 11 */\n\toverflow: visible;\n}\n.ui-button,\n.ui-button:link,\n.ui-button:visited,\n.ui-button:hover,\n.ui-button:active {\n\ttext-decoration: none;\n}\n/* to make room for the icon, a width needs to be set here */\n.ui-button-icon-only {\n\twidth: 2em;\n\tbox-sizing: border-box;\n\ttext-indent: -9999px;\n\twhite-space: nowrap;\n}\n/* no icon support for input elements */\ninput.ui-button.ui-button-icon-only {\n\ttext-indent: 0;\n}\n/* button icon element(s) */\n.ui-button-icon-only .ui-icon {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\tmargin-top: -8px;\n\tmargin-left: -8px;\n}\n.ui-button.ui-icon-notext .ui-icon {\n\tpadding: 0;\n\twidth: 2.1em;\n\theight: 2.1em;\n\ttext-indent: -9999px;\n\twhite-space: nowrap;\n\n}\ninput.ui-button.ui-icon-notext .ui-icon {\n\twidth: auto;\n\theight: auto;\n\ttext-indent: 0;\n\twhite-space: normal;\n\tpadding: .4em 1em;\n}\n/* workarounds */\n/* Support: Firefox 5 - 40 */\ninput.ui-button::-moz-focus-inner,\nbutton.ui-button::-moz-focus-inner {\n\tborder: 0;\n\tpadding: 0;\n}\n.ui-controlgroup {\n\tvertical-align: middle;\n\tdisplay: inline-block;\n}\n.ui-controlgroup > .ui-controlgroup-item {\n\tfloat: left;\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n.ui-controlgroup > .ui-controlgroup-item:focus,\n.ui-controlgroup > .ui-controlgroup-item.ui-visual-focus {\n\tz-index: 9999;\n}\n.ui-controlgroup-vertical > .ui-controlgroup-item {\n\tdisplay: block;\n\tfloat: none;\n\twidth: 100%;\n\tmargin-top: 0;\n\tmargin-bottom: 0;\n\ttext-align: left;\n}\n.ui-controlgroup-vertical .ui-controlgroup-item {\n\tbox-sizing: border-box;\n}\n.ui-controlgroup .ui-controlgroup-label {\n\tpadding: .4em 1em;\n}\n.ui-controlgroup .ui-controlgroup-label span {\n\tfont-size: 80%;\n}\n.ui-controlgroup-horizontal .ui-controlgroup-label + .ui-controlgroup-item {\n\tborder-left: none;\n}\n.ui-controlgroup-vertical .ui-controlgroup-label + .ui-controlgroup-item {\n\tborder-top: none;\n}\n.ui-controlgroup-horizontal .ui-controlgroup-label.ui-widget-content {\n\tborder-right: none;\n}\n.ui-controlgroup-vertical .ui-controlgroup-label.ui-widget-content {\n\tborder-bottom: none;\n}\n/* Spinner specific style fixes */\n.ui-controlgroup-vertical .ui-spinner-input {\n\n\t/* Support: IE8 only, Android < 4.4 only */\n\twidth: 75%;\n\twidth: calc( 100% - 2.4em );\n}\n.ui-controlgroup-vertical .ui-spinner .ui-spinner-up {\n\tborder-top-style: solid;\n}\n.ui-checkboxradio-label .ui-icon-background {\n\tbox-shadow: inset 1px 1px 1px #ccc;\n\tborder-radius: .12em;\n\tborder: none;\n}\n.ui-checkboxradio-radio-label .ui-icon-background {\n\twidth: 16px;\n\theight: 16px;\n\tborder-radius: 1em;\n\toverflow: visible;\n\tborder: none;\n}\n.ui-checkboxradio-radio-label.ui-checkboxradio-checked .ui-icon,\n.ui-checkboxradio-radio-label.ui-checkboxradio-checked:hover .ui-icon {\n\tbackground-image: none;\n\twidth: 8px;\n\theight: 8px;\n\tborder-width: 4px;\n\tborder-style: solid;\n}\n.ui-checkboxradio-disabled {\n\tpointer-events: none;\n}\n.ui-datepicker {\n\twidth: 17em;\n\tpadding: .2em .2em 0;\n\tdisplay: none;\n}\n.ui-datepicker .ui-datepicker-header {\n\tposition: relative;\n\tpadding: .2em 0;\n}\n.ui-datepicker .ui-datepicker-prev,\n.ui-datepicker .ui-datepicker-next {\n\tposition: absolute;\n\ttop: 2px;\n\twidth: 1.8em;\n\theight: 1.8em;\n}\n.ui-datepicker .ui-datepicker-prev-hover,\n.ui-datepicker .ui-datepicker-next-hover {\n\ttop: 1px;\n}\n.ui-datepicker .ui-datepicker-prev {\n\tleft: 2px;\n}\n.ui-datepicker .ui-datepicker-next {\n\tright: 2px;\n}\n.ui-datepicker .ui-datepicker-prev-hover {\n\tleft: 1px;\n}\n.ui-datepicker .ui-datepicker-next-hover {\n\tright: 1px;\n}\n.ui-datepicker .ui-datepicker-prev span,\n.ui-datepicker .ui-datepicker-next span {\n\tdisplay: block;\n\tposition: absolute;\n\tleft: 50%;\n\tmargin-left: -8px;\n\ttop: 50%;\n\tmargin-top: -8px;\n}\n.ui-datepicker .ui-datepicker-title {\n\tmargin: 0 2.3em;\n\tline-height: 1.8em;\n\ttext-align: center;\n}\n.ui-datepicker .ui-datepicker-title select {\n\tfont-size: 1em;\n\tmargin: 1px 0;\n}\n.ui-datepicker select.ui-datepicker-month,\n.ui-datepicker select.ui-datepicker-year {\n\twidth: 45%;\n}\n.ui-datepicker table {\n\twidth: 100%;\n\tfont-size: .9em;\n\tborder-collapse: collapse;\n\tmargin: 0 0 .4em;\n}\n.ui-datepicker th {\n\tpadding: .7em .3em;\n\ttext-align: center;\n\tfont-weight: bold;\n\tborder: 0;\n}\n.ui-datepicker td {\n\tborder: 0;\n\tpadding: 1px;\n}\n.ui-datepicker td span,\n.ui-datepicker td a {\n\tdisplay: block;\n\tpadding: .2em;\n\ttext-align: right;\n\ttext-decoration: none;\n}\n.ui-datepicker .ui-datepicker-buttonpane {\n\tbackground-image: none;\n\tmargin: .7em 0 0 0;\n\tpadding: 0 .2em;\n\tborder-left: 0;\n\tborder-right: 0;\n\tborder-bottom: 0;\n}\n.ui-datepicker .ui-datepicker-buttonpane button {\n\tfloat: right;\n\tmargin: .5em .2em .4em;\n\tcursor: pointer;\n\tpadding: .2em .6em .3em .6em;\n\twidth: auto;\n\toverflow: visible;\n}\n.ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current {\n\tfloat: left;\n}\n/* with multiple calendars */\n.ui-datepicker.ui-datepicker-multi {\n\twidth: auto;\n}\n.ui-datepicker-multi .ui-datepicker-group {\n\tfloat: left;\n}\n.ui-datepicker-multi .ui-datepicker-group table {\n\twidth: 95%;\n\tmargin: 0 auto .4em;\n}\n.ui-datepicker-multi-2 .ui-datepicker-group {\n\twidth: 50%;\n}\n.ui-datepicker-multi-3 .ui-datepicker-group {\n\twidth: 33.3%;\n}\n.ui-datepicker-multi-4 .ui-datepicker-group {\n\twidth: 25%;\n}\n.ui-datepicker-multi .ui-datepicker-group-last .ui-datepicker-header,\n.ui-datepicker-multi .ui-datepicker-group-middle .ui-datepicker-header {\n\tborder-left-width: 0;\n}\n.ui-datepicker-multi .ui-datepicker-buttonpane {\n\tclear: left;\n}\n.ui-datepicker-row-break {\n\tclear: both;\n\twidth: 100%;\n\tfont-size: 0;\n}\n/* RTL support */\n.ui-datepicker-rtl {\n\tdirection: rtl;\n}\n.ui-datepicker-rtl .ui-datepicker-prev {\n\tright: 2px;\n\tleft: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-next {\n\tleft: 2px;\n\tright: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-prev:hover {\n\tright: 1px;\n\tleft: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-next:hover {\n\tleft: 1px;\n\tright: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane {\n\tclear: right;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane button {\n\tfloat: left;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane button.ui-datepicker-current,\n.ui-datepicker-rtl .ui-datepicker-group {\n\tfloat: right;\n}\n.ui-datepicker-rtl .ui-datepicker-group-last .ui-datepicker-header,\n.ui-datepicker-rtl .ui-datepicker-group-middle .ui-datepicker-header {\n\tborder-right-width: 0;\n\tborder-left-width: 1px;\n}\n/* Icons */\n.ui-datepicker .ui-icon {\n\tdisplay: block;\n\ttext-indent: -99999px;\n\toverflow: hidden;\n\tbackground-repeat: no-repeat;\n\tleft: .5em;\n\ttop: .3em;\n}\n.ui-dialog {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tpadding: .2em;\n\toutline: 0;\n}\n.ui-dialog .ui-dialog-titlebar {\n\tpadding: .4em 1em;\n\tposition: relative;\n}\n.ui-dialog .ui-dialog-title {\n\tfloat: left;\n\tmargin: .1em 0;\n\twhite-space: nowrap;\n\twidth: 90%;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n.ui-dialog .ui-dialog-titlebar-close {\n\tposition: absolute;\n\tright: .3em;\n\ttop: 50%;\n\twidth: 20px;\n\tmargin: -10px 0 0 0;\n\tpadding: 1px;\n\theight: 20px;\n}\n.ui-dialog .ui-dialog-content {\n\tposition: relative;\n\tborder: 0;\n\tpadding: .5em 1em;\n\tbackground: none;\n\toverflow: auto;\n}\n.ui-dialog .ui-dialog-buttonpane {\n\ttext-align: left;\n\tborder-width: 1px 0 0 0;\n\tbackground-image: none;\n\tmargin-top: .5em;\n\tpadding: .3em 1em .5em .4em;\n}\n.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset {\n\tfloat: right;\n}\n.ui-dialog .ui-dialog-buttonpane button {\n\tmargin: .5em .4em .5em 0;\n\tcursor: pointer;\n}\n.ui-dialog .ui-resizable-n {\n\theight: 2px;\n\ttop: 0;\n}\n.ui-dialog .ui-resizable-e {\n\twidth: 2px;\n\tright: 0;\n}\n.ui-dialog .ui-resizable-s {\n\theight: 2px;\n\tbottom: 0;\n}\n.ui-dialog .ui-resizable-w {\n\twidth: 2px;\n\tleft: 0;\n}\n.ui-dialog .ui-resizable-se,\n.ui-dialog .ui-resizable-sw,\n.ui-dialog .ui-resizable-ne,\n.ui-dialog .ui-resizable-nw {\n\twidth: 7px;\n\theight: 7px;\n}\n.ui-dialog .ui-resizable-se {\n\tright: 0;\n\tbottom: 0;\n}\n.ui-dialog .ui-resizable-sw {\n\tleft: 0;\n\tbottom: 0;\n}\n.ui-dialog .ui-resizable-ne {\n\tright: 0;\n\ttop: 0;\n}\n.ui-dialog .ui-resizable-nw {\n\tleft: 0;\n\ttop: 0;\n}\n.ui-draggable .ui-dialog-titlebar {\n\tcursor: move;\n}\n.ui-progressbar {\n\theight: 2em;\n\ttext-align: left;\n\toverflow: hidden;\n}\n.ui-progressbar .ui-progressbar-value {\n\tmargin: -1px;\n\theight: 100%;\n}\n.ui-progressbar .ui-progressbar-overlay {\n\tbackground: url("data:image/gif;base64,R0lGODlhKAAoAIABAAAAAP///yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJAQABACwAAAAAKAAoAAACkYwNqXrdC52DS06a7MFZI+4FHBCKoDeWKXqymPqGqxvJrXZbMx7Ttc+w9XgU2FB3lOyQRWET2IFGiU9m1frDVpxZZc6bfHwv4c1YXP6k1Vdy292Fb6UkuvFtXpvWSzA+HycXJHUXiGYIiMg2R6W459gnWGfHNdjIqDWVqemH2ekpObkpOlppWUqZiqr6edqqWQAAIfkECQEAAQAsAAAAACgAKAAAApSMgZnGfaqcg1E2uuzDmmHUBR8Qil95hiPKqWn3aqtLsS18y7G1SzNeowWBENtQd+T1JktP05nzPTdJZlR6vUxNWWjV+vUWhWNkWFwxl9VpZRedYcflIOLafaa28XdsH/ynlcc1uPVDZxQIR0K25+cICCmoqCe5mGhZOfeYSUh5yJcJyrkZWWpaR8doJ2o4NYq62lAAACH5BAkBAAEALAAAAAAoACgAAAKVDI4Yy22ZnINRNqosw0Bv7i1gyHUkFj7oSaWlu3ovC8GxNso5fluz3qLVhBVeT/Lz7ZTHyxL5dDalQWPVOsQWtRnuwXaFTj9jVVh8pma9JjZ4zYSj5ZOyma7uuolffh+IR5aW97cHuBUXKGKXlKjn+DiHWMcYJah4N0lYCMlJOXipGRr5qdgoSTrqWSq6WFl2ypoaUAAAIfkECQEAAQAsAAAAACgAKAAAApaEb6HLgd/iO7FNWtcFWe+ufODGjRfoiJ2akShbueb0wtI50zm02pbvwfWEMWBQ1zKGlLIhskiEPm9R6vRXxV4ZzWT2yHOGpWMyorblKlNp8HmHEb/lCXjcW7bmtXP8Xt229OVWR1fod2eWqNfHuMjXCPkIGNileOiImVmCOEmoSfn3yXlJWmoHGhqp6ilYuWYpmTqKUgAAIfkECQEAAQAsAAAAACgAKAAAApiEH6kb58biQ3FNWtMFWW3eNVcojuFGfqnZqSebuS06w5V80/X02pKe8zFwP6EFWOT1lDFk8rGERh1TTNOocQ61Hm4Xm2VexUHpzjymViHrFbiELsefVrn6XKfnt2Q9G/+Xdie499XHd2g4h7ioOGhXGJboGAnXSBnoBwKYyfioubZJ2Hn0RuRZaflZOil56Zp6iioKSXpUAAAh+QQJAQABACwAAAAAKAAoAAACkoQRqRvnxuI7kU1a1UU5bd5tnSeOZXhmn5lWK3qNTWvRdQxP8qvaC+/yaYQzXO7BMvaUEmJRd3TsiMAgswmNYrSgZdYrTX6tSHGZO73ezuAw2uxuQ+BbeZfMxsexY35+/Qe4J1inV0g4x3WHuMhIl2jXOKT2Q+VU5fgoSUI52VfZyfkJGkha6jmY+aaYdirq+lQAACH5BAkBAAEALAAAAAAoACgAAAKWBIKpYe0L3YNKToqswUlvznigd4wiR4KhZrKt9Upqip61i9E3vMvxRdHlbEFiEXfk9YARYxOZZD6VQ2pUunBmtRXo1Lf8hMVVcNl8JafV38aM2/Fu5V16Bn63r6xt97j09+MXSFi4BniGFae3hzbH9+hYBzkpuUh5aZmHuanZOZgIuvbGiNeomCnaxxap2upaCZsq+1kAACH5BAkBAAEALAAAAAAoACgAAAKXjI8By5zf4kOxTVrXNVlv1X0d8IGZGKLnNpYtm8Lr9cqVeuOSvfOW79D9aDHizNhDJidFZhNydEahOaDH6nomtJjp1tutKoNWkvA6JqfRVLHU/QUfau9l2x7G54d1fl995xcIGAdXqMfBNadoYrhH+Mg2KBlpVpbluCiXmMnZ2Sh4GBqJ+ckIOqqJ6LmKSllZmsoq6wpQAAAh+QQJAQABACwAAAAAKAAoAAAClYx/oLvoxuJDkU1a1YUZbJ59nSd2ZXhWqbRa2/gF8Gu2DY3iqs7yrq+xBYEkYvFSM8aSSObE+ZgRl1BHFZNr7pRCavZ5BW2142hY3AN/zWtsmf12p9XxxFl2lpLn1rseztfXZjdIWIf2s5dItwjYKBgo9yg5pHgzJXTEeGlZuenpyPmpGQoKOWkYmSpaSnqKileI2FAAACH5BAkBAAEALAAAAAAoACgAAAKVjB+gu+jG4kORTVrVhRlsnn2dJ3ZleFaptFrb+CXmO9OozeL5VfP99HvAWhpiUdcwkpBH3825AwYdU8xTqlLGhtCosArKMpvfa1mMRae9VvWZfeB2XfPkeLmm18lUcBj+p5dnN8jXZ3YIGEhYuOUn45aoCDkp16hl5IjYJvjWKcnoGQpqyPlpOhr3aElaqrq56Bq7VAAAOw==");\n\theight: 100%;\n\tfilter: alpha(opacity=25); /* support: IE8 */\n\topacity: 0.25;\n}\n.ui-progressbar-indeterminate .ui-progressbar-value {\n\tbackground-image: none;\n}\n.ui-selectmenu-menu {\n\tpadding: 0;\n\tmargin: 0;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tdisplay: none;\n}\n.ui-selectmenu-menu .ui-menu {\n\toverflow: auto;\n\toverflow-x: hidden;\n\tpadding-bottom: 1px;\n}\n.ui-selectmenu-menu .ui-menu .ui-selectmenu-optgroup {\n\tfont-size: 1em;\n\tfont-weight: bold;\n\tline-height: 1.5;\n\tpadding: 2px 0.4em;\n\tmargin: 0.5em 0 0 0;\n\theight: auto;\n\tborder: 0;\n}\n.ui-selectmenu-open {\n\tdisplay: block;\n}\n.ui-selectmenu-text {\n\tdisplay: block;\n\tmargin-right: 20px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n.ui-selectmenu-button.ui-button {\n\ttext-align: left;\n\twhite-space: nowrap;\n\twidth: 14em;\n}\n.ui-selectmenu-icon.ui-icon {\n\tfloat: right;\n\tmargin-top: 0;\n}\n.ui-slider {\n\tposition: relative;\n\ttext-align: left;\n}\n.ui-slider .ui-slider-handle {\n\tposition: absolute;\n\tz-index: 2;\n\twidth: 1.2em;\n\theight: 1.2em;\n\tcursor: default;\n\ttouch-action: none;\n}\n.ui-slider .ui-slider-range {\n\tposition: absolute;\n\tz-index: 1;\n\tfont-size: .7em;\n\tdisplay: block;\n\tborder: 0;\n\tbackground-position: 0 0;\n}\n/* support: IE8 - See #6727 */\n.ui-slider.ui-state-disabled .ui-slider-handle,\n.ui-slider.ui-state-disabled .ui-slider-range {\n\tfilter: inherit;\n}\n.ui-slider-horizontal {\n\theight: .8em;\n}\n.ui-slider-horizontal .ui-slider-handle {\n\ttop: -.3em;\n\tmargin-left: -.6em;\n}\n.ui-slider-horizontal .ui-slider-range {\n\ttop: 0;\n\theight: 100%;\n}\n.ui-slider-horizontal .ui-slider-range-min {\n\tleft: 0;\n}\n.ui-slider-horizontal .ui-slider-range-max {\n\tright: 0;\n}\n.ui-slider-vertical {\n\twidth: .8em;\n\theight: 100px;\n}\n.ui-slider-vertical .ui-slider-handle {\n\tleft: -.3em;\n\tmargin-left: 0;\n\tmargin-bottom: -.6em;\n}\n.ui-slider-vertical .ui-slider-range {\n\tleft: 0;\n\twidth: 100%;\n}\n.ui-slider-vertical .ui-slider-range-min {\n\tbottom: 0;\n}\n.ui-slider-vertical .ui-slider-range-max {\n\ttop: 0;\n}\n.ui-spinner {\n\tposition: relative;\n\tdisplay: inline-block;\n\toverflow: hidden;\n\tpadding: 0;\n\tvertical-align: middle;\n}\n.ui-spinner-input {\n\tborder: none;\n\tbackground: none;\n\tcolor: inherit;\n\tpadding: .222em 0;\n\tmargin: .2em 0;\n\tvertical-align: middle;\n\tmargin-left: .4em;\n\tmargin-right: 2em;\n}\n.ui-spinner-button {\n\twidth: 1.6em;\n\theight: 50%;\n\tfont-size: .5em;\n\tpadding: 0;\n\tmargin: 0;\n\ttext-align: center;\n\tposition: absolute;\n\tcursor: default;\n\tdisplay: block;\n\toverflow: hidden;\n\tright: 0;\n}\n/* more specificity required here to override default borders */\n.ui-spinner a.ui-spinner-button {\n\tborder-top-style: none;\n\tborder-bottom-style: none;\n\tborder-right-style: none;\n}\n.ui-spinner-up {\n\ttop: 0;\n}\n.ui-spinner-down {\n\tbottom: 0;\n}\n.ui-tabs {\n\tposition: relative;/* position: relative prevents IE scroll bug (element with position: relative inside container with overflow: auto appear as "fixed") */\n\tpadding: .2em;\n}\n.ui-tabs .ui-tabs-nav {\n\tmargin: 0;\n\tpadding: .2em .2em 0;\n}\n.ui-tabs .ui-tabs-nav li {\n\tlist-style: none;\n\tfloat: left;\n\tposition: relative;\n\ttop: 0;\n\tmargin: 1px .2em 0 0;\n\tborder-bottom-width: 0;\n\tpadding: 0;\n\twhite-space: nowrap;\n}\n.ui-tabs .ui-tabs-nav .ui-tabs-anchor {\n\tfloat: left;\n\tpadding: .5em 1em;\n\ttext-decoration: none;\n}\n.ui-tabs .ui-tabs-nav li.ui-tabs-active {\n\tmargin-bottom: -1px;\n\tpadding-bottom: 1px;\n}\n.ui-tabs .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor,\n.ui-tabs .ui-tabs-nav li.ui-state-disabled .ui-tabs-anchor,\n.ui-tabs .ui-tabs-nav li.ui-tabs-loading .ui-tabs-anchor {\n\tcursor: text;\n}\n.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-active .ui-tabs-anchor {\n\tcursor: pointer;\n}\n.ui-tabs .ui-tabs-panel {\n\tdisplay: block;\n\tborder-width: 0;\n\tpadding: 1em 1.4em;\n\tbackground: none;\n}\n.ui-tooltip {\n\tpadding: 8px;\n\tposition: absolute;\n\tz-index: 9999;\n\tmax-width: 300px;\n}\nbody .ui-tooltip {\n\tborder-width: 2px;\n}\n'},378:K=>{"use strict";K.exports="/*!\n * jQuery UI CSS Framework 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/theming/\n *\n * To view and modify this theme, visit http://jqueryui.com/themeroller/?scope=&folderName=base&cornerRadiusShadow=8px&offsetLeftShadow=0px&offsetTopShadow=0px&thicknessShadow=5px&opacityShadow=30&bgImgOpacityShadow=0&bgTextureShadow=flat&bgColorShadow=666666&opacityOverlay=30&bgImgOpacityOverlay=0&bgTextureOverlay=flat&bgColorOverlay=aaaaaa&iconColorError=cc0000&fcError=5f3f3f&borderColorError=f1a899&bgTextureError=flat&bgColorError=fddfdf&iconColorHighlight=777620&fcHighlight=777620&borderColorHighlight=dad55e&bgTextureHighlight=flat&bgColorHighlight=fffa90&iconColorActive=ffffff&fcActive=ffffff&borderColorActive=003eff&bgTextureActive=flat&bgColorActive=007fff&iconColorHover=555555&fcHover=2b2b2b&borderColorHover=cccccc&bgTextureHover=flat&bgColorHover=ededed&iconColorDefault=777777&fcDefault=454545&borderColorDefault=c5c5c5&bgTextureDefault=flat&bgColorDefault=f6f6f6&iconColorContent=444444&fcContent=333333&borderColorContent=dddddd&bgTextureContent=flat&bgColorContent=ffffff&iconColorHeader=444444&fcHeader=333333&borderColorHeader=dddddd&bgTextureHeader=flat&bgColorHeader=e9e9e9&cornerRadius=3px&fwDefault=normal&fsDefault=1em&ffDefault=Arial%2CHelvetica%2Csans-serif\n */\n\n\n/* Component containers\n----------------------------------*/\n\n\n.ui-widget {\n\tfont-family: Arial,Helvetica,sans-serif;\n\tfont-size: 1em;\n}\n\n\n.ui-widget .ui-widget {\n\tfont-size: 1em;\n}\n\n\n.ui-widget input,\n.ui-widget select,\n.ui-widget textarea,\n.ui-widget button {\n\tfont-family: Arial,Helvetica,sans-serif;\n\tfont-size: 1em;\n}\n\n\n.ui-widget.ui-widget-content {\n\tborder: 1px solid #c5c5c5;\n}\n\n\n.ui-widget-content {\n\tborder: 1px solid #dddddd;\n\tbackground: #ffffff;\n\tcolor: #333333;\n}\n\n\n.ui-widget-content a {\n\tcolor: #333333;\n}\n\n\n.ui-widget-header {\n\tborder: 1px solid #dddddd;\n\tbackground: #e9e9e9;\n\tcolor: #333333;\n\tfont-weight: bold;\n}\n\n\n.ui-widget-header a {\n\tcolor: #333333;\n}\n\n\n/* Interaction states\n----------------------------------*/\n\n\n.ui-state-default,\n.ui-widget-content .ui-state-default,\n.ui-widget-header .ui-state-default,\n.ui-button,\n\n/* We use html here because we need a greater specificity to make sure disabled\nworks properly when clicked or hovered */\nhtml .ui-button.ui-state-disabled:hover,\nhtml .ui-button.ui-state-disabled:active {\n\tborder: 1px solid #c5c5c5;\n\tbackground: #f6f6f6;\n\tfont-weight: normal;\n\tcolor: #454545;\n}\n\n\n.ui-state-default a,\n.ui-state-default a:link,\n.ui-state-default a:visited,\na.ui-button,\na:link.ui-button,\na:visited.ui-button,\n.ui-button {\n\tcolor: #454545;\n\ttext-decoration: none;\n}\n\n\n.ui-state-hover,\n.ui-widget-content .ui-state-hover,\n.ui-widget-header .ui-state-hover,\n.ui-state-focus,\n.ui-widget-content .ui-state-focus,\n.ui-widget-header .ui-state-focus,\n.ui-button:hover,\n.ui-button:focus {\n\tborder: 1px solid #cccccc;\n\tbackground: #ededed;\n\tfont-weight: normal;\n\tcolor: #2b2b2b;\n}\n\n\n.ui-state-hover a,\n.ui-state-hover a:hover,\n.ui-state-hover a:link,\n.ui-state-hover a:visited,\n.ui-state-focus a,\n.ui-state-focus a:hover,\n.ui-state-focus a:link,\n.ui-state-focus a:visited,\na.ui-button:hover,\na.ui-button:focus {\n\tcolor: #2b2b2b;\n\ttext-decoration: none;\n}\n\n\n.ui-visual-focus {\n\tbox-shadow: 0 0 3px 1px rgb(94, 158, 214);\n}\n\n\n.ui-state-active,\n.ui-widget-content .ui-state-active,\n.ui-widget-header .ui-state-active,\na.ui-button:active,\n.ui-button:active,\n.ui-button.ui-state-active:hover {\n\tborder: 1px solid #003eff;\n\tbackground: #007fff;\n\tfont-weight: normal;\n\tcolor: #ffffff;\n}\n\n\n.ui-icon-background,\n.ui-state-active .ui-icon-background {\n\tborder: #003eff;\n\tbackground-color: #ffffff;\n}\n\n\n.ui-state-active a,\n.ui-state-active a:link,\n.ui-state-active a:visited {\n\tcolor: #ffffff;\n\ttext-decoration: none;\n}\n\n\n/* Interaction Cues\n----------------------------------*/\n\n\n.ui-state-highlight,\n.ui-widget-content .ui-state-highlight,\n.ui-widget-header .ui-state-highlight {\n\tborder: 1px solid #dad55e;\n\tbackground: #fffa90;\n\tcolor: #777620;\n}\n\n\n.ui-state-checked {\n\tborder: 1px solid #dad55e;\n\tbackground: #fffa90;\n}\n\n\n.ui-state-highlight a,\n.ui-widget-content .ui-state-highlight a,\n.ui-widget-header .ui-state-highlight a {\n\tcolor: #777620;\n}\n\n\n.ui-state-error,\n.ui-widget-content .ui-state-error,\n.ui-widget-header .ui-state-error {\n\tborder: 1px solid #f1a899;\n\tbackground: #fddfdf;\n\tcolor: #5f3f3f;\n}\n\n\n.ui-state-error a,\n.ui-widget-content .ui-state-error a,\n.ui-widget-header .ui-state-error a {\n\tcolor: #5f3f3f;\n}\n\n\n.ui-state-error-text,\n.ui-widget-content .ui-state-error-text,\n.ui-widget-header .ui-state-error-text {\n\tcolor: #5f3f3f;\n}\n\n\n.ui-priority-primary,\n.ui-widget-content .ui-priority-primary,\n.ui-widget-header .ui-priority-primary {\n\tfont-weight: bold;\n}\n\n\n.ui-priority-secondary,\n.ui-widget-content .ui-priority-secondary,\n.ui-widget-header .ui-priority-secondary {\n\topacity: .7;\n\tfilter:Alpha(Opacity=70); /* support: IE8 */\n\tfont-weight: normal;\n}\n\n\n.ui-state-disabled,\n.ui-widget-content .ui-state-disabled,\n.ui-widget-header .ui-state-disabled {\n\topacity: .35;\n\tfilter:Alpha(Opacity=35); /* support: IE8 */\n\tbackground-image: none;\n}\n\n\n.ui-state-disabled .ui-icon {\n\tfilter:Alpha(Opacity=35); /* support: IE8 - See #6059 */\n}\n\n\n/* Icons\n----------------------------------*/\n\n\n/* states and images */\n\n\n.ui-icon {\n\twidth: 16px;\n\theight: 16px;\n}\n\n\n.ui-icon,\n.ui-widget-content .ui-icon {\n\tbackground-image: url('ui-icons_444444_256x240.0e0a9e65144a9bf9.png');\n}\n\n\n.ui-widget-header .ui-icon {\n\tbackground-image: url('ui-icons_444444_256x240.0e0a9e65144a9bf9.png');\n}\n\n\n.ui-state-hover .ui-icon,\n.ui-state-focus .ui-icon,\n.ui-button:hover .ui-icon,\n.ui-button:focus .ui-icon {\n\tbackground-image: url('ui-icons_555555_256x240.8adbd261678281ce.png');\n}\n\n\n.ui-state-active .ui-icon,\n.ui-button:active .ui-icon {\n\tbackground-image: url('ui-icons_ffffff_256x240.7b3b65cee7d59ccd.png');\n}\n\n\n.ui-state-highlight .ui-icon,\n.ui-button .ui-state-highlight.ui-icon {\n\tbackground-image: url('ui-icons_777620_256x240.4298d92e10bb13dc.png');\n}\n\n\n.ui-state-error .ui-icon,\n.ui-state-error-text .ui-icon {\n\tbackground-image: url('ui-icons_cc0000_256x240.3cc6f93e0fbdd6f0.png');\n}\n\n\n.ui-button .ui-icon {\n\tbackground-image: url('ui-icons_777777_256x240.0e3e40c4a518e818.png');\n}\n\n\n/* positioning */\n\n\n.ui-icon-blank { background-position: 16px 16px; }\n\n\n.ui-icon-caret-1-n { background-position: 0 0; }\n\n\n.ui-icon-caret-1-ne { background-position: -16px 0; }\n\n\n.ui-icon-caret-1-e { background-position: -32px 0; }\n\n\n.ui-icon-caret-1-se { background-position: -48px 0; }\n\n\n.ui-icon-caret-1-s { background-position: -65px 0; }\n\n\n.ui-icon-caret-1-sw { background-position: -80px 0; }\n\n\n.ui-icon-caret-1-w { background-position: -96px 0; }\n\n\n.ui-icon-caret-1-nw { background-position: -112px 0; }\n\n\n.ui-icon-caret-2-n-s { background-position: -128px 0; }\n\n\n.ui-icon-caret-2-e-w { background-position: -144px 0; }\n\n\n.ui-icon-triangle-1-n { background-position: 0 -16px; }\n\n\n.ui-icon-triangle-1-ne { background-position: -16px -16px; }\n\n\n.ui-icon-triangle-1-e { background-position: -32px -16px; }\n\n\n.ui-icon-triangle-1-se { background-position: -48px -16px; }\n\n\n.ui-icon-triangle-1-s { background-position: -65px -16px; }\n\n\n.ui-icon-triangle-1-sw { background-position: -80px -16px; }\n\n\n.ui-icon-triangle-1-w { background-position: -96px -16px; }\n\n\n.ui-icon-triangle-1-nw { background-position: -112px -16px; }\n\n\n.ui-icon-triangle-2-n-s { background-position: -128px -16px; }\n\n\n.ui-icon-triangle-2-e-w { background-position: -144px -16px; }\n\n\n.ui-icon-arrow-1-n { background-position: 0 -32px; }\n\n\n.ui-icon-arrow-1-ne { background-position: -16px -32px; }\n\n\n.ui-icon-arrow-1-e { background-position: -32px -32px; }\n\n\n.ui-icon-arrow-1-se { background-position: -48px -32px; }\n\n\n.ui-icon-arrow-1-s { background-position: -65px -32px; }\n\n\n.ui-icon-arrow-1-sw { background-position: -80px -32px; }\n\n\n.ui-icon-arrow-1-w { background-position: -96px -32px; }\n\n\n.ui-icon-arrow-1-nw { background-position: -112px -32px; }\n\n\n.ui-icon-arrow-2-n-s { background-position: -128px -32px; }\n\n\n.ui-icon-arrow-2-ne-sw { background-position: -144px -32px; }\n\n\n.ui-icon-arrow-2-e-w { background-position: -160px -32px; }\n\n\n.ui-icon-arrow-2-se-nw { background-position: -176px -32px; }\n\n\n.ui-icon-arrowstop-1-n { background-position: -192px -32px; }\n\n\n.ui-icon-arrowstop-1-e { background-position: -208px -32px; }\n\n\n.ui-icon-arrowstop-1-s { background-position: -224px -32px; }\n\n\n.ui-icon-arrowstop-1-w { background-position: -240px -32px; }\n\n\n.ui-icon-arrowthick-1-n { background-position: 1px -48px; }\n\n\n.ui-icon-arrowthick-1-ne { background-position: -16px -48px; }\n\n\n.ui-icon-arrowthick-1-e { background-position: -32px -48px; }\n\n\n.ui-icon-arrowthick-1-se { background-position: -48px -48px; }\n\n\n.ui-icon-arrowthick-1-s { background-position: -64px -48px; }\n\n\n.ui-icon-arrowthick-1-sw { background-position: -80px -48px; }\n\n\n.ui-icon-arrowthick-1-w { background-position: -96px -48px; }\n\n\n.ui-icon-arrowthick-1-nw { background-position: -112px -48px; }\n\n\n.ui-icon-arrowthick-2-n-s { background-position: -128px -48px; }\n\n\n.ui-icon-arrowthick-2-ne-sw { background-position: -144px -48px; }\n\n\n.ui-icon-arrowthick-2-e-w { background-position: -160px -48px; }\n\n\n.ui-icon-arrowthick-2-se-nw { background-position: -176px -48px; }\n\n\n.ui-icon-arrowthickstop-1-n { background-position: -192px -48px; }\n\n\n.ui-icon-arrowthickstop-1-e { background-position: -208px -48px; }\n\n\n.ui-icon-arrowthickstop-1-s { background-position: -224px -48px; }\n\n\n.ui-icon-arrowthickstop-1-w { background-position: -240px -48px; }\n\n\n.ui-icon-arrowreturnthick-1-w { background-position: 0 -64px; }\n\n\n.ui-icon-arrowreturnthick-1-n { background-position: -16px -64px; }\n\n\n.ui-icon-arrowreturnthick-1-e { background-position: -32px -64px; }\n\n\n.ui-icon-arrowreturnthick-1-s { background-position: -48px -64px; }\n\n\n.ui-icon-arrowreturn-1-w { background-position: -64px -64px; }\n\n\n.ui-icon-arrowreturn-1-n { background-position: -80px -64px; }\n\n\n.ui-icon-arrowreturn-1-e { background-position: -96px -64px; }\n\n\n.ui-icon-arrowreturn-1-s { background-position: -112px -64px; }\n\n\n.ui-icon-arrowrefresh-1-w { background-position: -128px -64px; }\n\n\n.ui-icon-arrowrefresh-1-n { background-position: -144px -64px; }\n\n\n.ui-icon-arrowrefresh-1-e { background-position: -160px -64px; }\n\n\n.ui-icon-arrowrefresh-1-s { background-position: -176px -64px; }\n\n\n.ui-icon-arrow-4 { background-position: 0 -80px; }\n\n\n.ui-icon-arrow-4-diag { background-position: -16px -80px; }\n\n\n.ui-icon-extlink { background-position: -32px -80px; }\n\n\n.ui-icon-newwin { background-position: -48px -80px; }\n\n\n.ui-icon-refresh { background-position: -64px -80px; }\n\n\n.ui-icon-shuffle { background-position: -80px -80px; }\n\n\n.ui-icon-transfer-e-w { background-position: -96px -80px; }\n\n\n.ui-icon-transferthick-e-w { background-position: -112px -80px; }\n\n\n.ui-icon-folder-collapsed { background-position: 0 -96px; }\n\n\n.ui-icon-folder-open { background-position: -16px -96px; }\n\n\n.ui-icon-document { background-position: -32px -96px; }\n\n\n.ui-icon-document-b { background-position: -48px -96px; }\n\n\n.ui-icon-note { background-position: -64px -96px; }\n\n\n.ui-icon-mail-closed { background-position: -80px -96px; }\n\n\n.ui-icon-mail-open { background-position: -96px -96px; }\n\n\n.ui-icon-suitcase { background-position: -112px -96px; }\n\n\n.ui-icon-comment { background-position: -128px -96px; }\n\n\n.ui-icon-person { background-position: -144px -96px; }\n\n\n.ui-icon-print { background-position: -160px -96px; }\n\n\n.ui-icon-trash { background-position: -176px -96px; }\n\n\n.ui-icon-locked { background-position: -192px -96px; }\n\n\n.ui-icon-unlocked { background-position: -208px -96px; }\n\n\n.ui-icon-bookmark { background-position: -224px -96px; }\n\n\n.ui-icon-tag { background-position: -240px -96px; }\n\n\n.ui-icon-home { background-position: 0 -112px; }\n\n\n.ui-icon-flag { background-position: -16px -112px; }\n\n\n.ui-icon-calendar { background-position: -32px -112px; }\n\n\n.ui-icon-cart { background-position: -48px -112px; }\n\n\n.ui-icon-pencil { background-position: -64px -112px; }\n\n\n.ui-icon-clock { background-position: -80px -112px; }\n\n\n.ui-icon-disk { background-position: -96px -112px; }\n\n\n.ui-icon-calculator { background-position: -112px -112px; }\n\n\n.ui-icon-zoomin { background-position: -128px -112px; }\n\n\n.ui-icon-zoomout { background-position: -144px -112px; }\n\n\n.ui-icon-search { background-position: -160px -112px; }\n\n\n.ui-icon-wrench { background-position: -176px -112px; }\n\n\n.ui-icon-gear { background-position: -192px -112px; }\n\n\n.ui-icon-heart { background-position: -208px -112px; }\n\n\n.ui-icon-star { background-position: -224px -112px; }\n\n\n.ui-icon-link { background-position: -240px -112px; }\n\n\n.ui-icon-cancel { background-position: 0 -128px; }\n\n\n.ui-icon-plus { background-position: -16px -128px; }\n\n\n.ui-icon-plusthick { background-position: -32px -128px; }\n\n\n.ui-icon-minus { background-position: -48px -128px; }\n\n\n.ui-icon-minusthick { background-position: -64px -128px; }\n\n\n.ui-icon-close { background-position: -80px -128px; }\n\n\n.ui-icon-closethick { background-position: -96px -128px; }\n\n\n.ui-icon-key { background-position: -112px -128px; }\n\n\n.ui-icon-lightbulb { background-position: -128px -128px; }\n\n\n.ui-icon-scissors { background-position: -144px -128px; }\n\n\n.ui-icon-clipboard { background-position: -160px -128px; }\n\n\n.ui-icon-copy { background-position: -176px -128px; }\n\n\n.ui-icon-contact { background-position: -192px -128px; }\n\n\n.ui-icon-image { background-position: -208px -128px; }\n\n\n.ui-icon-video { background-position: -224px -128px; }\n\n\n.ui-icon-script { background-position: -240px -128px; }\n\n\n.ui-icon-alert { background-position: 0 -144px; }\n\n\n.ui-icon-info { background-position: -16px -144px; }\n\n\n.ui-icon-notice { background-position: -32px -144px; }\n\n\n.ui-icon-help { background-position: -48px -144px; }\n\n\n.ui-icon-check { background-position: -64px -144px; }\n\n\n.ui-icon-bullet { background-position: -80px -144px; }\n\n\n.ui-icon-radio-on { background-position: -96px -144px; }\n\n\n.ui-icon-radio-off { background-position: -112px -144px; }\n\n\n.ui-icon-pin-w { background-position: -128px -144px; }\n\n\n.ui-icon-pin-s { background-position: -144px -144px; }\n\n\n.ui-icon-play { background-position: 0 -160px; }\n\n\n.ui-icon-pause { background-position: -16px -160px; }\n\n\n.ui-icon-seek-next { background-position: -32px -160px; }\n\n\n.ui-icon-seek-prev { background-position: -48px -160px; }\n\n\n.ui-icon-seek-end { background-position: -64px -160px; }\n\n\n.ui-icon-seek-start { background-position: -80px -160px; }\n\n\n/* ui-icon-seek-first is deprecated, use ui-icon-seek-start instead */\n\n\n.ui-icon-seek-first { background-position: -80px -160px; }\n\n\n.ui-icon-stop { background-position: -96px -160px; }\n\n\n.ui-icon-eject { background-position: -112px -160px; }\n\n\n.ui-icon-volume-off { background-position: -128px -160px; }\n\n\n.ui-icon-volume-on { background-position: -144px -160px; }\n\n\n.ui-icon-power { background-position: 0 -176px; }\n\n\n.ui-icon-signal-diag { background-position: -16px -176px; }\n\n\n.ui-icon-signal { background-position: -32px -176px; }\n\n\n.ui-icon-battery-0 { background-position: -48px -176px; }\n\n\n.ui-icon-battery-1 { background-position: -64px -176px; }\n\n\n.ui-icon-battery-2 { background-position: -80px -176px; }\n\n\n.ui-icon-battery-3 { background-position: -96px -176px; }\n\n\n.ui-icon-circle-plus { background-position: 0 -192px; }\n\n\n.ui-icon-circle-minus { background-position: -16px -192px; }\n\n\n.ui-icon-circle-close { background-position: -32px -192px; }\n\n\n.ui-icon-circle-triangle-e { background-position: -48px -192px; }\n\n\n.ui-icon-circle-triangle-s { background-position: -64px -192px; }\n\n\n.ui-icon-circle-triangle-w { background-position: -80px -192px; }\n\n\n.ui-icon-circle-triangle-n { background-position: -96px -192px; }\n\n\n.ui-icon-circle-arrow-e { background-position: -112px -192px; }\n\n\n.ui-icon-circle-arrow-s { background-position: -128px -192px; }\n\n\n.ui-icon-circle-arrow-w { background-position: -144px -192px; }\n\n\n.ui-icon-circle-arrow-n { background-position: -160px -192px; }\n\n\n.ui-icon-circle-zoomin { background-position: -176px -192px; }\n\n\n.ui-icon-circle-zoomout { background-position: -192px -192px; }\n\n\n.ui-icon-circle-check { background-position: -208px -192px; }\n\n\n.ui-icon-circlesmall-plus { background-position: 0 -208px; }\n\n\n.ui-icon-circlesmall-minus { background-position: -16px -208px; }\n\n\n.ui-icon-circlesmall-close { background-position: -32px -208px; }\n\n\n.ui-icon-squaresmall-plus { background-position: -48px -208px; }\n\n\n.ui-icon-squaresmall-minus { background-position: -64px -208px; }\n\n\n.ui-icon-squaresmall-close { background-position: -80px -208px; }\n\n\n.ui-icon-grip-dotted-vertical { background-position: 0 -224px; }\n\n\n.ui-icon-grip-dotted-horizontal { background-position: -16px -224px; }\n\n\n.ui-icon-grip-solid-vertical { background-position: -32px -224px; }\n\n\n.ui-icon-grip-solid-horizontal { background-position: -48px -224px; }\n\n\n.ui-icon-gripsmall-diagonal-se { background-position: -64px -224px; }\n\n\n.ui-icon-grip-diagonal-se { background-position: -80px -224px; }\n\n\n/* Misc visuals\n----------------------------------*/\n\n\n/* Corner radius */\n\n\n.ui-corner-all,\n.ui-corner-top,\n.ui-corner-left,\n.ui-corner-tl {\n\tborder-top-left-radius: 3px;\n}\n\n\n.ui-corner-all,\n.ui-corner-top,\n.ui-corner-right,\n.ui-corner-tr {\n\tborder-top-right-radius: 3px;\n}\n\n\n.ui-corner-all,\n.ui-corner-bottom,\n.ui-corner-left,\n.ui-corner-bl {\n\tborder-bottom-left-radius: 3px;\n}\n\n\n.ui-corner-all,\n.ui-corner-bottom,\n.ui-corner-right,\n.ui-corner-br {\n\tborder-bottom-right-radius: 3px;\n}\n\n\n/* Overlays */\n\n\n.ui-widget-overlay {\n\tbackground: #aaaaaa;\n\topacity: .3;\n\tfilter: Alpha(Opacity=30); /* support: IE8 */\n}\n\n\n.ui-widget-shadow {\n\tbox-shadow: 0px 0px 5px #666666;\n}\n"},861:(K,U,D)=>{"use strict";function y(d,g,p,v,M,T,I){try{var P=d[T](I),N=P.value}catch(V){return void p(V)}P.done?g(N):Promise.resolve(N).then(v,M)}function o(d){return function(){var g=this,p=arguments;return new Promise(function(v,M){var T=d.apply(g,p);function I(N){y(T,v,M,I,P,"next",N)}function P(N){y(T,v,M,I,P,"throw",N)}I(void 0)})}}D.d(U,{Z:()=>o})}},K=>{K(K.s=421)}]);